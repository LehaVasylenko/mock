{"result":[{"sys_mod_count":"26","description":"","view_type":"","sys_updated_on":"2008-10-16 09:32:34","sys_tags":"","type":"individual_windows","sys_class_name":"cmn_schedule_page","sys_id":"04ecb97d4a36232700b930c3e4350c71","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d00ba33304352210559073c06a02f77e","value":"d00ba33304352210559073c06a02f77e"},"header_html":"","sys_update_name":"cmn_schedule_page_04ecb97d4a36232700b930c3e4350c71","sys_updated_by":"glide.maint","client_script":"","sys_created_on":"2008-10-16 09:11:42","name":"Apps Servers Netgear","server_script":"var g = new GlideRecord('cmn_schedule');\r\n\t\t\tg.addQuery('type', 'app blackout');\r\n\t\t\tg.query();\r\n\t\t\twhile (g.next()) {\r\n\t\t\tschedulePage.addSchedule(g.sys_id, '#808080', null, false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Application calendar\r\n\t\t\tg.initialize();\r\n\t\t\tg.addQuery('type', 'application');\r\n\t\t\tg.query();\r\n\t\t\twhile (g.next()) {\r\n\t\t\tschedulePage.addSchedule(g.sys_id, '#B22222', null, false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Netgear calendar\r\n\t\t\tg.initialize();\r\n\t\t\tg.addQuery('type', 'netgear');\r\n\t\t\tg.query();\r\n\t\t\twhile (g.next()) {\r\n\t\t\tschedulePage.addSchedule(g.sys_id, '#DA70D6', null, false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Server calendar\r\n\t\t\tg.initialize();\r\n\t\t\tg.addQuery('type', 'server');\r\n\t\t\tg.query();\r\n\t\t\twhile (g.next()) {\r\n\t\t\tschedulePage.addSchedule(g.sys_id, '#00FFFF', null, false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Changes with no assigned user\r\n\t\t\tgr = new GlideRecord('change_request');\r\n\t\t\tgr.addQuery('assigned_to', '==', '');\r\n\t\t\tgr.query();\r\n\t\t\twhile (gr.next()) {\r\n\t\t\tvar start = gr.start_date.getDisplayValue();\r\n\t\t\tvar end = gr.end_date.getDisplayValue();\r\n\t\t\tvar item = schedulePage.addItem(gr, start, end, '', '#318047'); \r\n\t\t\tif (item){\r\n\t\t\titem.setDescription(gr.short_description.toString());\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Changes with assigned users\r\n\t\t\tgu = new GlideRecord('change_request');\r\n\t\t\tgu.addQuery('assigned_to', '!=', '');\r\n\t\t\tgu.query();\r\n\t\t\twhile (gu.next()) {\r\n\t\t\tvar start1 = gu.start_date.getDisplayValue();\r\n\t\t\tvar end1 = gu.end_date.getDisplayValue();\r\n\t\t\tvar item1 = schedulePage.addItem(gu, start1, end1, '', '#800080'); \r\n\t\t\tif (item1){\r\n\t\t\titem1.setDescription(gu.assigned_to.name);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r ","sys_name":"Apps Servers Netgear","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"init_function":"","sys_created_by":"glide.maint","sys_policy":""},{"sys_mod_count":"6","description":"Displays metric instance data for metric definitions that have timeline field set to true. Launched from Metrics Timeline UI Action.","view_type":"Timeline","sys_updated_on":"2011-12-05 20:33:34","sys_tags":"","type":"metrics_timeline","sys_class_name":"cmn_schedule_page","sys_id":"19bf65e2ff111000dadaebcfebffadaf","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f909a3b704f12210559073c06a02f7a8","value":"f909a3b704f12210559073c06a02f7a8"},"header_html":"","sys_update_name":"cmn_schedule_page_19bf65e2ff111000dadaebcfebffadaf","sys_updated_by":"cameron.ellis","client_script":"/**\r\n * Set specific configuration properties and event registration for displaying this timeline. \r\n * The JavaScript timeline variable is already defined as:\r\n *\r\n *   var glideTimeline; (typeof GlideTimeline)\r\n *\r\n * For a list of available functions, please visit:\r\n *   http://docs.servicenow.com/?context=Schedule_Pages\r\n */\r\n\r\nglideTimeline.showLeftPane(true);\r\nglideTimeline.showLeftPaneAsTree(true);\r\nglideTimeline.showTimelineText(true);\r\nglideTimeline.showDependencyLines(true);\r\nglideTimeline.groupByParent(true);\r\nglideTimeline.sortByStartDate(true);\r\nglideTimeline.showSummaryPane(false);\r\nglideTimeline.setDefaultPointIconClass('green_circle');\r\nglideTimeline.registerEvent('getItems', 'MetricsTimeline');","sys_created_on":"2011-09-27 01:59:31","name":"Metrics Timeline","server_script":"","sys_name":"Metrics Timeline","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"init_function":"","sys_created_by":"john.roberts","sys_policy":""},{"sys_mod_count":"30","description":"","view_type":"Calendar","sys_updated_on":"2019-06-12 20:44:34","sys_tags":"","type":"maint","sys_class_name":"cmn_schedule_page","sys_id":"1fe61dca0a0001c7003682f611af870c","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d00ba33304352210559073c06a02f77e","value":"d00ba33304352210559073c06a02f77e"},"header_html":"","sys_update_name":"cmn_schedule_page_1fe61dca0a0001c7003682f611af870c","sys_updated_by":"admin","client_script":"","sys_created_on":"2007-09-19 22:36:59","name":"Maintenance Windows and Changes","server_script":"var g = new GlideRecord('cmn_schedule');\n\t\t\tg.addQuery('name', 'application');\n\t\t\tg.query();\n\n\t\t\twhile (g.next())\n\t\t\t\tschedulePage.addSchedule(g.sys_id, '#808080', null, true);\n\n\t\t\tg.initialize();\n\t\t\tg.addQuery('name', 'server');\n\t\t\tg.query();\n\n\t\t\twhile (g.next())\n\t\t\t\tschedulePage.addSchedule(g.sys_id, '#73A8F0', null, true);\n\n\t\t\tg.initialize();\n\t\t\tg.addQuery('type', 'blackout');\n\t\t\tg.query();\n\n\t\t\twhile (g.next())\n\t\t\t\tschedulePage.addSchedule(g.sys_id, '#000', null, true);\n\n\t\t\tg.initialize();\n\t\t\tg.addQuery('name', 'network');\n\t\t\tg.query();\n\n\t\t\twhile (g.next())\n\t\t\t\tschedulePage.addSchedule(g.sys_id, '#FF6600', null, true);\n\n\t\t\tgr = new GlideRecord('change_request');\n\t\t\tvar start = schedulePage.getStartUtc();\n\t\t\tvar end = schedulePage.getEndUtc();\n\t\t\tgr.addNotNullQuery(\"start_date\");\n\t\t\tgr.addNotNullQuery(\"end_date\");\n\t\t\tgr.addEncodedQuery(\"start_dateBETWEENjavascript:'\"+start+\"'@javascript:'\"+end+\"'^ORend_dateBETWEENjavascript:'\"+start+\"'@javascript:'\"+end+\"'\");\n\t\t\tgr.query();\n\t\t\twhile (gr.next()) {\n\t\t\t\tvar start = gr.start_date.getDisplayValue();\n\t\t\t\tvar end = gr.end_date.getDisplayValue();\n\t\t\t\tvar item = schedulePage.addItem(gr, start, end, '', '#318047');\n\t\t\t\tif (item)\n\t\t\t\t\titem.setDescription(gr.short_description.toString());\n\n\t\t\t}","sys_name":"Maintenance Windows and Changes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"init_function":"","sys_created_by":"glide.maint","sys_policy":""},{"sys_mod_count":"0","description":"","view_type":"Calendar","sys_updated_on":"2018-02-20 14:15:46","sys_tags":"","type":"roster","sys_class_name":"cmn_schedule_page","sys_id":"24cfa143a9fe638b008a6ce6e035c9f3","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c6ca73b04352210559073c06a02f754","value":"8c6ca73b04352210559073c06a02f754"},"header_html":"<g:requires name=\"scripts/moment.min.js\" />\n<label id=\"label_group_list\" class=\"header\">${gs.getMessage('Group')}:</label>$[SP]\n   <select id=\"group_list\" name=\"group_list\" width=\"120\" onchange=\"groupChange();\" tabindex=\"1\">\n      <!-- get the groups that have a roster defined -->\n      <g:evaluate>\n         var groupIds = [];\n         var rotaGR = new GlideRecord('cmn_rota');\n         rotaGR.addActiveQuery();\n         rotaGR.query();\n         while (rotaGR.next())\n            groupIds.push(rotaGR.group + '');\n\n         if (groupIds.length > 0) {\n            rotaGR = null;\n            var groupGR = new GlideRecord('sys_user_group');\n            groupGR.addQuery('sys_id', groupIds);\n            groupGR.orderBy('name');\n            groupGR.query();\n         }\n      </g:evaluate>\n      <j:if test=\"${groupIds.length == 0}\">\n         <option value=\"-1\">-- ${gs.getMessage('No groups available')} --</option>\n      </j:if>\n\n      <j:if test=\"${groupIds.length > 0}\">\n         <j:while test=\"${groupGR.next()}\">\n            <g:evaluate var=\"jvar_group_name\" expression=\"groupGR.name\"/>\n            <option value=\"${groupGR.sys_id}\">${HTML:jvar_group_name}</option>\n         </j:while>\n      </j:if>\n   </select>\n\n<!-- Show a message if there is no schedule -->\n<j:if test=\"${groupIds.length == 0}\">\n    <script>\n        var u_g_form = new GlideForm('',true,true,true,true);\n        u_g_form.addInfoMessage('There are no active schedules');\n    </script>\n</j:if>\n\n<!-- get the group associated with the specified rota -->\n<g:evaluate var=\"jvar_group_id\" jelly=\"true\">\n   var groupId = \"\";\n   var sysId = jelly.sysparm_sys_id;\n   if (sysId) {\n      var gr = new GlideRecord(\"cmn_rota\");\n      gr.addQuery(\"schedule\", sysId);\n      gr.query();\n      if (gr.next())\n         groupId = gr.group;\n   }\n   if (groupId == \"\") {\n      var sysparmGroup = jelly.sysparm_group_id;\n      if (sysparmGroup)\n         groupId = sysparmGroup;\n   }\n   groupId;\n</g:evaluate>\n<input type=\"hidden\" id=\"group_id\" name=\"group_id\" value=\"$[jvar_group_id]\" />\n<g:evaluate var=\"jvar_is_read_only_user\" jelly=\"true\" >\n\tvar is_read_only_user = !new OnCallSecurityNG().rotaMgrAny();\n\tis_read_only_user;\n</g:evaluate>\n<input type=\"hidden\" id=\"is_read_only_user\" name=\"is_read_only_user\" value=\"$[jvar_is_read_only_user]\" />\n","sys_update_name":"cmn_schedule_page_24cfa143a9fe638b008a6ce6e035c9f3","sys_updated_by":"admin","client_script":"//# sourceURL=groupRostersInlineScript.js\n\nfunction rosterPageInit() {\n\tschedulePage.calendar.setWrap(false);\n\tvar e = gel(\"group_id\");\n\tif (e)\n\t\tschedulePage.group = e.value;\n\tschedulePage.registerOnAdd(rosterPageOnAdd);\n\tschedulePage.registerOnDblClickHandler(rosterPageOnDblClick);\n\tschedulePage.calendar.setDNDEnabled(false);\n\t// select the group from the list\n\t// first item is selected by default, so no onChange is called - do it manually\n    if (!schedulePage.group || selectMenuItem(schedulePage.group, \"group_list\") === 0)\n\t\tgroupChange();\n}\n\nfunction groupChange() {\n\tvar e = gel(\"group_list\");\n\tif (e.selectedIndex > -1) {\n\t    var id = e.options[e.selectedIndex].value;\n\t    schedulePage.group = id;\n\t    schedulePage.calendar.group = id;\n\t    schedulePage.addParam(\"group\", id);\n\t} else {\n\t\t//hide the group dropdown and its label in case there is no group associated with the user\n\t\te.style.display = \"none\";\n\t\te = gel(\"label_group_list\");\n\t\te.style.display = \"none\";\n\t\t//explain why user can't see the group dropdown\n\t\tvar u_g_form = new GlideForm('',true,true,true,true);\n\t    u_g_form.addInfoMessage(\"You are not in any group\");\n\t}\n\tschedulePage.run();\n}\n\n// User has clicked a cell or selected a range of cells\nfunction rosterPageOnAdd(fromDate, toDate) {\n\tif((toDate.getMinute() == 0) && (toDate.getSecond() == 0))\n\t\ttoDate.addSeconds(-1);\n\n\tvar dialog = new GlideDialogForm('Add Item', 'ui_page');\n\tdialog.setFieldID(schedulePage.DIALOG_TARGET_FIELD);\n\tdialog.addParm('name', 'on_call_add_item');\n\t// Add in any additional parameters\n\tdialog.addParm('sysparm_group', schedulePage.group);\n\tdialog.addParm('sysparm_start', fromDate.serializeInUserFormat());\n\tdialog.addParm('sysparm_end', toDate.serializeInUserFormat());\n\tdialog.addParm('sysparm_target_field', schedulePage.DIALOG_TARGET_FIELD);\n\tdialog.addParm('set_request_params', 'true');\n\tdialog.render();\n}\n\nfunction reloadCallback() {\n    // Force reloading the calendar\n    groupChange();\n}\n\nfunction rosterPageOnDblClick(itemWindow, ev) {\n\tvar tableName = itemWindow.item.getTableName();\n\tvar isReadOnlyUser = true;\n\tvar e = gel(\"is_read_only_user\");\n\tif (e)\n\t\tisReadOnlyUser = e.value === \"true\";\n\tif (tableName && (isReadOnlyUser || tableName != \"cmn_rota_member\"))\n        schedulePage.calendar.getCurrentView().editItem(itemWindow.item, moment(itemWindow.start).format(\"YYYYMMDD\"), reloadCallback);\n\telse if (!isReadOnlyUser)\n\t\trosterPageOnAdd(itemWindow.start, itemWindow.end);\n\telse\n\t\treturn;\n}","sys_created_on":"2014-02-04 15:01:17","name":"Group rosters","server_script":"new OCRotation(schedulePage).buildRotas();","sys_name":"Group rosters","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"init_function":"rosterPageInit","sys_created_by":"glide.maint","sys_policy":""},{"sys_mod_count":"12","description":"A schedule page for showing workflow context timelines.","view_type":"Timeline","sys_updated_on":"2011-08-03 22:16:19","sys_tags":"","type":"workflow_context","sys_class_name":"cmn_schedule_page","sys_id":"2b2a43f207130000dada43c0d1021e87","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/41672bfb04b12210559073c06a02f7c6","value":"41672bfb04b12210559073c06a02f7c6"},"header_html":"","sys_update_name":"cmn_schedule_page_2b2a43f207130000dada43c0d1021e87","sys_updated_by":"cameron.ellis","client_script":"/**\r\n * Set specific configuration properties and event registration for displaying this timeline. \r\n * The JavaScript timeline variable is already defined as:\r\n *\r\n *   var glideTimeline; (typeof GlideTimeline)\r\n *\r\n * For a list of available functions, please visit:\r\n *   http://docs.servicenow.com/?context=Schedule_Pages\r\n */\r\nglideTimeline.showLeftPane(true);\r\nglideTimeline.showSummaryPane(true);\r\nglideTimeline.showLeftPaneAsTree(true);\r\nglideTimeline.sortByStartDate(true);\r\nglideTimeline.showTimelineText(true);\r\nglideTimeline.showDependencyLines(true);\r\nglideTimeline.setReadOnly(false);\r\nglideTimeline.setDefaultPointIconClass('blue_circle');\r\nglideTimeline.groupByParent(true);\r\nglideTimeline.registerEvent('getItems', 'WorkflowTimeline');\r\n","sys_created_on":"2011-06-20 17:12:20","name":"Workflow Context","server_script":"","sys_name":"Workflow Context","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"init_function":"","sys_created_by":"jimmy.yuan","sys_policy":""},{"sys_mod_count":"167","description":"This schedule page is used for generating a timeline that makes use of predefined sysparm variables that have been translated from a separate table and can be processed by the timeline generator script include.","view_type":"Timeline","sys_updated_on":"2011-12-07 13:57:06","sys_tags":"","type":"timeline_page","sys_class_name":"cmn_schedule_page","sys_id":"53ddd1860a0a0b3e6122d5cb6b0bbef7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/15672bfb04b12210559073c06a02f7e3","value":"15672bfb04b12210559073c06a02f7e3"},"header_html":"","sys_update_name":"cmn_schedule_page_53ddd1860a0a0b3e6122d5cb6b0bbef7","sys_updated_by":"cameron.ellis","client_script":"/**\r\n * Set specific configuration properties and event registration for displaying this timeline. \r\n * The JavaScript timeline variable is already defined as:\r\n *\r\n *   var glideTimeline; (typeof GlideTimeline)\r\n *\r\n * For a list of available functions, please visit:\r\n *   http://docs.servicenow.com/?context=Schedule_Pages\r\n */\r\nglideTimeline.showDependencyLines(true);\r\nglideTimeline.groupByParent(true);\r\n\r\nglideTimeline.showLeftPane(false);\r\nglideTimeline.showLeftPaneAsTree(false);\r\nglideTimeline.showTimelineText(true);\r\nglideTimeline.setDefaultPointIconClass('blue_square');\r\nglideTimeline.registerEvent('getItems', 'TimelineGeneratorSchedulePage');\r\nglideTimeline.registerEvent('elementMoveX', 'TimelineGeneratorSchedulePage');\r\nglideTimeline.registerEvent('elementTimeAdjustEnd', 'TimelineGeneratorSchedulePage');\r\nglideTimeline.registerEvent('elementTimeAdjustStart', 'TimelineGeneratorSchedulePage');","sys_created_on":"2009-08-25 23:22:09","name":"Schedule Page Timeline Generator","server_script":"","sys_name":"Schedule Page Timeline Generator","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"init_function":"initTimeline","sys_created_by":"mark.johnson","sys_policy":""},{"sys_mod_count":"23","description":"","view_type":"Timeline","sys_updated_on":"2015-08-26 19:51:18","sys_tags":"","type":"sla_timeline","sys_class_name":"cmn_schedule_page","sys_id":"72a220e0933331002c68530b547ffbb7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f939e3f704f12210559073c06a02f7d6","value":"f939e3f704f12210559073c06a02f7d6"},"header_html":"","sys_update_name":"cmn_schedule_page_72a220e0933331002c68530b547ffbb7","sys_updated_by":"admin","client_script":"/**\n * Set specific configuration properties and event registration for displaying this timeline.\n * The JavaScript timeline variable is already defined as:\n *\n *   var glideTimeline; (typeof GlideTimeline)\n *\n * For a list of available functions, please visit:\n *   http://docs.servicenow.com/?context=Schedule_Pages\n */\nglideTimeline.useTimelineItemId = true;\n\nglideTimeline.showLeftPane(true);\nglideTimeline.showLeftPaneAsTree(true);\nglideTimeline.showTimelineText(true);\nglideTimeline.showDependencyLines(true);\nglideTimeline.groupByParent(true);\nglideTimeline.showSummaryPane(true);\nglideTimeline.setAutoRefresh(60);\nglideTimeline.showProjectGanttPanes(true);\nglideTimeline.setDefaultPointIconClass('blue_circle');\nglideTimeline.registerEvent('getItems', 'SLATimeline');\n","sys_created_on":"2015-04-29 23:02:28","name":"SLA Timeline","server_script":"","sys_name":"SLA Timeline","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"init_function":"","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"2","description":"","view_type":"","sys_updated_on":"2009-10-30 04:00:55","sys_tags":"","type":"schedules","sys_class_name":"cmn_schedule_page","sys_id":"a387fa5e4a36232b0000196b28983acd","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d00ba33304352210559073c06a02f77e","value":"d00ba33304352210559073c06a02f77e"},"header_html":"","sys_update_name":"cmn_schedule_page_a387fa5e4a36232b0000196b28983acd","sys_updated_by":"eric.schroeder@snc","client_script":"","sys_created_on":"2009-10-30 03:40:48","name":"Schedules","server_script":"var g = new GlideRecord('cmn_schedule');\r\n\t\t\tg.addQuery('name', 'application');\r\n\t\t\tg.query();\r\n\t\t\t\r\n\t\t\twhile (g.next()) {\r\n\t\t\tschedulePage.addSchedule(g.sys_id, '#808080', null, true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tg.initialize();\r\n\t\t\tg.addQuery('name', 'server');\r\n\t\t\tg.query();\r\n\t\t\t\r\n\t\t\twhile (g.next()) {\r\n\t\t\tschedulePage.addSchedule(g.sys_id, '#73A8F0', null, true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tg.initialize();\r\n\t\t\tg.addQuery('type', 'blackout');\r\n\t\t\tg.query();\r\n\t\t\t\r\n\t\t\twhile (g.next()) {\r\n\t\t\tschedulePage.addSchedule(g.sys_id, '#000', null, true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tg.initialize();\r\n\t\t\tg.addQuery('name', 'network');\r\n\t\t\tg.query();\r\n\t\t\t\r\n\t\t\twhile (g.next()) {\r\n\t\t\tschedulePage.addSchedule(g.sys_id, '#FF6600', null, true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//gr = new GlideRecord('change_request');\r\n\t\t\t//gr.query();\r\n\t\t\t//while (gr.next()) {\r\n\t\t\t// var start = gr.start_date.getDisplayValue();\r\n\t\t\t// var end = gr.end_date.getDisplayValue();\r\n\t\t\t// var item = schedulePage.addItem(gr, start, end, '', '#318047');\n\t\t\t\r\n\t\t\t// if (item) {\r\n\t\t\t// item.setDescription(gr.short_description.toString());\r\n\t\t\t// }\r\n\t\t\t//}","sys_name":"Schedules","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"init_function":"","sys_created_by":"eric.schroeder@snc","sys_policy":""},{"sys_mod_count":"358","description":"","view_type":"Calendar","sys_updated_on":"2021-03-18 13:35:48","sys_tags":"","type":"scheduled_installation_calender","sys_class_name":"cmn_schedule_page","sys_id":"c15202f90f666010a4e3700d7b767eb5","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/dafc273f04352210559073c06a02f70a","value":"dafc273f04352210559073c06a02f70a"},"header_html":"<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<j:jelly trim=\"false\" xmlns:j=\"jelly:core\" xmlns:g=\"glide\" xmlns:j2=\"null\" xmlns:g2=\"null\">\n<style>\n.monthCalBodyTHDay,\n.monthViewDayHeight {\n    background: white !important;\n    text-align: center;\n}\n.monthCalBodyCurrent {\n    text-align: center;\n}\n.widget_body {\n    height: inherit !important;\n}\n.monthCalBodyWeekDay div a {\n    color:#2e2e2e !important;;\n    text-align: center !important;\n    padding: 8px;\n}\n.margin-left-5 {\n    margin-left: 5px;\n}\n.margin-left-3 {\n    margin-left: 3px\n}\n.eventTitle {\n    padding: 15px;\n    margin-bottom: 20px;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    background-color: #dff0d8;\n    border-color: #d6e9c6;\n}\n\n.cal_row > td {\n\tbackground: #fff !important;\n\ttext-align: center !important;\n}\n#Schedule_cal_header {\n    visibility: hidden !important;\n\tdisplay: none;\n}\nbody {\n\tbackground-color: #fff !important;\n}\ndiv.monthCalAddSchedule {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    top: 0;\n    left: 0;\n    background: white;\n}\ntable#Schedulecal_table tr.cal_row td {\n    padding: 0px;\n    background: white;\n}\n.cal_row td {\n\ttext-align: center !important;\n}\n.timingDiv{\n\tdisplay: none !important;\n}\n.drag_section_header tr td a {\n\tdisplay: none !important;\n}\n#GwtDateTimePicker {\n\tdisplay: none !important;\n}\n.context_item {\n\tdisplay: none !important;\n}\n.context-menu-minwidth {\n\tdisplay: none !important;\n}\n.schedule-description {\n\toverflow: hidden;\n\twhite-space: nowrap;\n\ttext-overflow: ellipsis;\n\tmax-width: 100px;\n}\n.schedule-description-weekly {\n\toverflow: hidden;\n\twhite-space: nowrap;\n\ttext-overflow: ellipsis;\n\tmax-width: 70px;\n}\n</style>\n\n</j:jelly>\n","sys_update_name":"cmn_schedule_page_c15202f90f666010a4e3700d7b767eb5","sys_updated_by":"admin","client_script":"function seeCalendarInit() {\n    schedulePage.setDisplayMode('monthly');\n    schedulePage.addParam('read_only', true);\n    schedulePage.getCalendar().setReadOnly(true);\n    schedulePage.registerOnDblClickHandler(onDoubleClick);\n    schedulePage.run();\n}\nvar todayStyle = {\n    \"background-color\": \"#1f8476\",\n    \"opacity\": \"0.1\"\n};\njQuery(document).ready(function() {\n    var day = schedulePage.calendar.currentDate;\n    CustomEventManager.on('request_complete', function(data) {\n        var todayId = \"add_schedule_Schedule_\" + day.getYear() + \"-\" + (day.getMonth() + 1) + \"-\" + day.getDay();\n        var todayElement = document.getElementById(todayId);\n        if(!todayElement)\n            todayElement = document.getElementById(todayId + \"_undefined\");\n        if(todayElement)\n            Object.assign(todayElement.style, todayStyle);\n        if (\"daily\" == schedulePage.getCalendar().currentView.calendar.displayMode) {\n            var timer = setTimeout(function() {\n                if (document.getElementsByClassName(\"drag_section_part\").length > 0) {\n                    var len = document.getElementsByClassName(\"drag_section_part\").length;\n                    for (var i = 0; i != len; i++) {\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).style.width = \"94%\";\n\t\t\t  (document.getElementsByClassName(\"drag_section_part\")[i]).style.left = \"54px\";\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).getElementsByClassName(\"drag_section_picker\")[0].style.width = \"100%\";\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).getElementsByClassName(\"drag_section_header\")[0].style.width = \"80%\";\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).removeAttribute(\"aria-label\");\n                    }\n                }\n                fireEvent('sn_appclient.hide-calender-loading');\n            }, 500); \n        } else if(\"weekly\" == schedulePage.getCalendar().currentView.calendar.displayMode) {\n            var postions = [55, 189, 323, 458, 593, 727, 863 ];\n            var timer = setTimeout(function() {\n                if (document.getElementsByClassName(\"drag_section_part\").length > 0) {\n                    var len = document.getElementsByClassName(\"drag_section_part\").length;\n                    for (var i = 0; i != len; i++) {\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).style.width = \"135px\";\n                        var searchItem = \"\";\n                        searchItem = (document.getElementsByClassName(\"drag_section_part\")[i]).style.left;\n                        searchItem = searchItem.replace(\"px\", \"\");\n                        var idx = postions.findIndex(function (item){\n                            return item == searchItem;\n                        });\n                        if(idx == -1){\n                            idx = postions.findIndex(function (item){\n                                return item > searchItem;\n                            });\n                            if (idx != -1)\n                                (document.getElementsByClassName(\"drag_section_part\")[i]).style.left = postions[idx-1] +\"px\";\n                            else\n                                (document.getElementsByClassName(\"drag_section_part\")[i]).style.left = postions[6] +\"px\";\n                        }\n\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).getElementsByClassName(\"drag_section_picker\")[0].style.width = \"100%\";\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).getElementsByClassName(\"drag_section_header\")[0].style.width = \"100%\";\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).removeAttribute(\"aria-label\");\n                    }\n                }\n                fireEvent('sn_appclient.hide-calender-loading');\n            }, 500);\n        } else {\n            var timer = setTimeout(function() {\n                if (document.getElementsByClassName(\"drag_section_part\").length > 0) {\n                    var len = document.getElementsByClassName(\"drag_section_part\").length;\n                    for (var i = 0; i != len; i++) {\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).style.width = \"135px\";\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).style.left = \"0px\";\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).getElementsByClassName(\"drag_section_picker\")[0].style.width = \"100%\";\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).getElementsByClassName(\"drag_section_header\")[0].style.width = \"100%\";\n                        (document.getElementsByClassName(\"drag_section_part\")[i]).removeAttribute(\"aria-label\");\n                    }\n                }\n                fireEvent('sn_appclient.hide-calender-loading');\n            }, 500);\n        }\n    });\n    function fireEvent(eventName) {\n        window.parent.CustomEvent.fire(eventName, document);\n    }\n});\n\nfunction onDoubleClick(itemWindow, ev) {\n    ev.preventDefault();\n    return false;\n}\n","sys_created_on":"2021-02-26 05:57:41","name":"scheduled_installation_calender","server_script":"showCalendar();\n\nfunction showCalendar() {\n    try {\n        var encodedQuery = \"\";\n        var viewType = \"\";\n        if (schedulePage.getParameter(\"start\") && schedulePage.getParameter(\"end\")) {\n            encodedQuery = \"start_timeBETWEENjavascript:gs.dateGenerate('\"+schedulePage.getParameter(\"start\") + \"')@javascript:gs.dateGenerate('\" + schedulePage.getParameter(\"end\") + \"')^ORend_timeBETWEENjavascript:gs.dateGenerate('\"+schedulePage.getParameter(\"start\") + \"')@javascript:gs.dateGenerate('\"+schedulePage.getParameter(\"end\") + \"')\";\n            gs.debug(\"app-client: calender encodedQuery : \" + encodedQuery);\n\n            var start = new GlideDate();\n            start.setValue(schedulePage.getParameter(\"start\"));\n            var end = new GlideDate();\n            end.setValue(schedulePage.getParameter(\"end\"));\n            var duration = GlideDate.subtract(start, end);\n            if (duration.getDayPart() == 1)\n                viewType = \"daily\";\n            else if (duration.getDayPart() == 7)\n                viewType = \"weekly\";\n            else\n                viewType = \"monthly\";\n\n            gs.debug(\"app-client: calender duration: \" + duration.getDisplayValue());\n        }\n\n        var schedules = new GlideRecord('sys_installation_schedule');\n        if (encodedQuery)\n            schedules.addEncodedQuery(encodedQuery);\n        else\n            schedules.addEncodedQuery(\"start_time>=javascript:gs.beginningOfLastMonth()\");\n        schedules.query();\n        while (schedules.next()) {\n            var scheduleItem = new GlideRecord('sys_installation_schedule_item');\n            scheduleItem.addQuery(\"schedule\", schedules.getValue(\"sys_id\"));\n            scheduleItem.query();\n            var noOfItems = scheduleItem.getRowCount();\n            if (!scheduleItem.next())\n                continue;\n            var logo = getLogoInfo(scheduleItem);\n            var endTime = new GlideDateTime(schedules.getValue(\"end_time\"));\n            addEvent(schedules, (schedules.getValue(\"name\")).slice(0, -19), endTime, logo, viewType);\n        }\n    } catch (ex) {\n        gs.log('Scheduled Calender error : ' + ex.message);\n    }\n}\n\nfunction addEvent(schedules, scheduleItemName, endTime, logo, viewType) {\n    var stTime = new GlideDateTime(schedules.getValue(\"start_time\"));\n    var eventDate = schedulePage.addItem(schedules, stTime.getDisplayValue(), endTime.getDisplayValue(), schedules.getValue(\"name\"), '#D8EAFD');\n    if (eventDate == null)\n        return;\n    eventDate.setReadOnly(true);\n\n    if (viewType == 'monthly') {\n        eventDate.setName('<span class=\"schedule-description\" style=\"index: 0; top: 3px; position: absolute; left: 32px;\" data-toggle=\"tooltip\" data-placement=\"top\" data-trigger=\"focus\" title=\"' + scheduleItemName + '\">' +\n            ' <span class=\"margin-left-3\" ><img src=\"' + logo + '\" width=\"20\" height=\"20\"/></span>' +\n            scheduleItemName +\n            \"</span>\");\n        return;\n    }\n\n    if (viewType == 'weekly') {\n        eventDate.setName('<span class=\"schedule-description-weekly\" style=\"index: 0; top: 3px; position: absolute; left: 64px;\" data-toggle=\"tooltip\" data-placement=\"top\" data-trigger=\"focus\" title=\"' + scheduleItemName + '\">' +\n            ' <span class=\"margin-left-3\"><img src=\"' + logo + '\" width=\"20\" height=\"20\"/></span>' +\n            scheduleItemName +\n            \"</span>\");\n        return;\n    }\n    eventDate.setName('<span class=\"margin-left-5\" style=\"index: 0; top: 3px; position: absolute; left: 64px;\" data-toggle=\"tooltip\" data-placement=\"top\" data-trigger=\"focus\" title=\"' + scheduleItemName + '\">' +\n        ' <span ><img src=\"' + logo + '\" width=\"20\" height=\"20\"/></span>' +\n        scheduleItemName +\n        \"</span>\");\n    return;\n\n\n}\n\nfunction getLogoInfo(scheduleItem) {\n    if (scheduleItem.product && scheduleItem.getValue(\"product\").length() != 0 && scheduleItem.getValue(\"product\") != 'undefined')\n        return \"../images/app_store/nowlogo.png\";\n\n    if (scheduleItem.is_plugin)\n        return \"images/plugin_activate.gifx\";\n\n    var logo = getLogoURL(scheduleItem.getValue(\"source_app_id\"));\n    if (logo && logo.length != 0)\n        return logo;\n\n    logo = new GlideRecord('sys_attachment');\n    logo.addQuery('table_sys_id', scheduleItem.source_app_id);\n    logo.addQuery('file_name', 'logo');\n    logo.query();\n    if (logo.next())\n        return logo.getValue(\"sys_id\") + \".iix\";\n\n    return \"\";\n}\n\nfunction getLogoURL(sourceAppId) {\n    if(gs.getProperty(\"sn_appclient.app.install.offline\", \"false\") == \"true\")\n        return \"\";\n    var app = getApp(sourceAppId);\n    if (app == null)\n        return \"\";\n    var logoSysId = app.getValue('logo');\n    if (logoSysId && logoSysId != 'undefined')\n        return getStoreURl() + logoSysId + \".iix\";\n    return \"\";\n}\n\nfunction getStoreURl() {\n    var resultURL = \"\";\n    resultURL = gs.getProperty(\"sn_appclient.repository_base_url\", \"https://store.servicenow.com/\");\n    var isDev = gs.getProperty(\"glide.installation.developer\", \"false\") == \"true\";\n    if (isDev)\n        resultURL = gs.getProperty(\"sn_appclient.dev_repository_base_url\", \"http://localhost:8080/\");\n\n    var overrideUrl = gs.getProperty(\"sn_appclient.upload_base_url\");\n    if (gs.nil(overrideUrl))\n        overrideUrl = gs.getProperty(\"sn_appauthor.upload_base_url\");\n\n    if (!gs.nil(overrideUrl) && overrideUrl.startsWith(\"http\"))\n        resultURL = overrideUrl;\n\n    if (!resultURL.endsWith(\"/\"))\n        resultURL += \"/\";\n\n    return resultURL;\n}\n\nfunction getApp(sourceAppId) {\n    var gr = new GlideRecord(\"sys_remote_app\");\n    gr.addActiveQuery();\n    gr.addQuery(\"sys_id\", sourceAppId);\n    gr.query();\n    if (gr.next())\n        return gr;\n\n    gr = new GlideRecord(\"sys_store_app\");\n    gr.addQuery(\"sys_id\", sourceAppId);\n    gr.query();\n    if (gr.next())\n        return gr;\n\n    return null;\n}","sys_name":"scheduled_installation_calender","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"init_function":"seeCalendarInit","sys_created_by":"admin","sys_policy":""}]}