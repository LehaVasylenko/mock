{"result":[{"script_plain":"var DIRECTION=2;// 0-downstream,  1-upstream,  2-both way\n\nvar filterSonsOfHardware = false; // setting to true will filter all out-going connections out of host (when the host is added to the map it won't add new connections out of (or in to) it)\n\nvar filterTraffic = false;  //setting to true will filter all traffic-based conenctions\n\ndependency_views_script();\n\n\nfunction isTraffic(sysId) {\n\tif (!filterTraffic)\n\t\treturn false;\n\tvar trafficGr = new GlideRecord('cmdb_ci_qualifier_traffic_based_connection');\n\treturn trafficGr.get(sysId);\t\t\n}\n\nfunction isHardware(sysId) {\n\tif (!filterSonsOfHardware)\n\t\treturn false;\n\tvar grHar = new GlideRecord('cmdb_ci_computer');\n\treturn grHar.get(sysId);\t\t\n}\n\nfunction dependency_views_script() {\n\t\t\n    var result = [];\n                     \n\tif ((!isHardware(dv_ci_id)) && (!isTraffic(dv_ci_id))) {\n               \n\t\tvar gr = new GlideRecord('cmdb_rel_ci');\n\t\tvar dir = (DIRECTION==1) ? 'child' : 'parent'; //default is downstream\n\t\tvar qc = gr.addQuery(dir, dv_ci_id);\n               \n\t\tif (DIRECTION==2){\n\t\t\tqc.addOrCondition('child', dv_ci_id);//Add also up stream for both way\n\t\t}\n\n\t\tgr.query();\n                            \n\t\twhile (gr.next()) {\n\n\t\t\tif ((!isTraffic(gr.child)) && (!isTraffic(gr.parent))){\n\t\t\t\tresult.push({\n\t\t\t\t\t\"dv_ci_id\": (gr.parent == dv_ci_id) ? String(gr.child) :String(gr.parent) ,\n\t\t\t\t\t\"dv_downstream\": String(gr.parent == dv_ci_id) ,\n\t\t\t\t\t\"dv_rel_id\": String(gr.sys_id),\n\t\t\t\t\t\"dv_rel_type\": String(gr.type)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t} \n                //gs.log(\"\\n\\n\\n\\n@@@BSMCustomGraph->script->IN CI[\" + dv_ci_id + \"]  Level[\"+dv_level+\"] \\n\\n###OUT-\" + JSON.stringify( result ,null, 2));\n               \n    return result;\n}","sys_mod_count":"19","active":"false","description":"Shows all cis and relationships in cmdb_rel_ci (don't filter any specific types)","sys_overrides":{"link":"https://dev315171.service-now.com/api/now/v1/table/ngbsm_script/global","value":"global"},"sys_updated_on":"2017-07-30 12:58:58","sys_domain_path":"global","sys_tags":"","sys_class_name":"ngbsm_script","sys_id":"237fa68193063200e05476df067ffbba","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/cd4cabf704352210559073c06a02f74d","value":"cd4cabf704352210559073c06a02f74d"},"sys_update_name":"ngbsm_script_237fa68193063200e05476df067ffbba","sys_updated_by":"admin","sys_created_on":"2017-04-09 07:41:59","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Show All Relationships","sys_name":"Show All Relationships","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_policy":""}]}