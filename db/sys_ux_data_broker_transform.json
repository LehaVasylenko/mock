{"result":[{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2022-10-11 16:20:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"00b681325392d110a86bddeeff7b1297","sys_updated_by":"admin","sys_created_on":"2022-10-06 08:52:48","sys_name":"Fetch Theme Asset Record Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n\n    /**\n     * STEP 1:\n     * Fetch the font type theme assets ordered by name in asc order.\n     */\n    var themeAssetGr = new GlideRecord('sys_ux_theme_asset');\n    themeAssetGr.addQuery('category', 'font');\n    themeAssetGr.orderBy('name');\n    themeAssetGr.query();\n\n    /**\n     * STEP 2:\n     * Get the attachment records for table sys_ux_theme_asset with the filter on table_sys_id derived from step 1.\n     * Store a mapping of table_sys_id -> file_name\n\t * store a mapping of theme asset sys_id -> name\n     */\n    var attachmentGr = new GlideRecord('sys_attachment');\n    attachmentGr.addQuery('table_name', 'sys_ux_theme_asset');\n\tvar attachmentQuery;\n\tvar themeAssetIdToNameMapping = {};\n\twhile (themeAssetGr.next()) {\n\t\tvar themeAssetId = themeAssetGr.getValue('sys_id');\n        themeAssetIdToNameMapping[themeAssetId] = themeAssetGr.getValue('name');\n        if (!attachmentQuery) {\n            attachmentQuery = attachmentGr.addQuery('table_sys_id', themeAssetId);\n        } else {\n\t\t\tattachmentQuery.addOrCondition('table_sys_id', themeAssetId);\n\t\t}\n    }\n    attachmentGr.query();\n\n    var attachmentTableIdToNameMapping = {};\n    while (attachmentGr.next()) {\n        var themeAssetId = attachmentGr.getValue('table_sys_id');\n\t\t// Get the filename and remove the extension.\n        attachmentTableIdToNameMapping[themeAssetId] = attachmentGr.getValue('file_name');\n    }\n\n    /**\n     * Combine theme asset name and attachment file name.\n     */\n    var output = [];\n    Object.keys(themeAssetIdToNameMapping).forEach(function(key) {\n        output.push({\n            sys_id: key,\n            name: themeAssetIdToNameMapping[key] + ' ' + attachmentTableIdToNameMapping[key]\n        });\n    });\n\n    return output;\n}","acl_failure_result":"","props":"[]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_00b681325392d110a86bddeeff7b1297","api_name":"sn_oe_sfs.Fetch Theme Asset Record Details","mutates_server_data":"false","name":"Fetch Theme Asset Record Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"","batch_exclude":"false","description":"","sys_updated_on":"2024-04-19 15:19:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"00ed7a51c7111010ae8df4b503c260fe","sys_updated_by":"admin","sys_created_on":"2020-06-08 21:30:04","sys_name":"Data Driven Tabs Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n    var ROUTE = 'route';\n    var LABEL = 'label';\n    var FIELDS = 'fields';\n\n    try {\n        var items = input.items;\n        var isArray = Array.isArray(items);\n\n        if (!isArray) {\n            throwError('Bound items should be an array');\n        }\n\n        var response = [];\n\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            validateItem(item);\n\n            var fields = flattenFields(Object.keys(item), item, {});\n\n            response.push({\n                route: item[ROUTE],\n                label: item[LABEL],\n                fields: fields\n            });\n        }\n    } catch (e) {\n        return e.message;\n    }\n\t\n\t// helpers will be hoisted up\n\tfunction isObject(item) {\n\t\treturn (typeof item === \"object\" && !Array.isArray(item) && item !== null);\n\t}\n\t\n    function throwError(message, data) {\n        var parsed = data ? JSON.stringify(data, null, 4) : '';\n        throw new TypeError(message + ' ' + parsed);\n    }\n\n    function validateItem(item) {\n        if (isObject(item)) {\n            var keys = Object.keys(item);\n            if (keys.indexOf(ROUTE) === -1) {\n                throwError('Expected ' + ROUTE + ' to exist in', item);\n            }\n            if (keys.indexOf(LABEL) === -1) {\n                throwError('Expected  ' + LABEL + ' to exist in', item);\n            }\n        } else {\n            throwError('Expected object, found', item);\n        }\n    }\n\t\n\tfunction flattenFields(keys, item, fields) {\n\t\tfor (var j = 0; j < keys.length; j++) {\n\t\t\tvar key = keys[j];\n\t\t\tif (key !== ROUTE && key !== LABEL) {\n\t\t\t\tvar value = item[key];\n\t\t\t\tif (isObject(value)) {\n\t\t\t\t\tflattenFields(Object.keys(value), value, fields);\n\t\t\t\t} else {\n\t\t\t\t\tfields[key] = item[key];\n\t\t\t\t}\n\t\t\t}\n\t\t} \n\t\t\n\t\treturn fields;\n\t}\n\n    return response;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"items\",\r\n  \"label\": \"Items\",\r\n  \"description\": \"Items to be transformed into input for Data Driven Tabs\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a6932bf304312210559073c06a02f796","value":"a6932bf304312210559073c06a02f796"},"sys_update_name":"sys_ux_data_broker_transform_00ed7a51c7111010ae8df4b503c260fe","api_name":"global.Data Driven Tabs Transform","mutates_server_data":"false","name":"Data Driven Tabs Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Policy Execution SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of the current record\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get policy execution instance data","sys_updated_on":"2023-09-21 21:41:43","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0166bb3aeb1571100c0bb5d5d85228d3","sys_updated_by":"maint","sys_created_on":"2023-09-19 18:36:19","sys_name":"Get policy execution instance data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n    var DM = new CMDBWsDMConstants();\n    var uiProxy = new CMDBWsDMPolicyUIProxy();\n    var wrapperFn = function() {\n        return uiProxy.getPolicyExecutionInfo(input.policyExecutionId);\n    };\n    return new CMDBWsDataBrokerHandler().execute(\"Get policy execution instance data\", DM.DM_ERROR_SOURCE, wrapperFn);\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\":\"policyExecutionId\",\r\n      \"label\":\"Policy Execution SysId\",\r\n      \"description\":\"Sys id of the current record\",\r\n      \"fieldType\":\"string\",\r\n      \"mandatory\":true\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_0166bb3aeb1571100c0bb5d5d85228d3","api_name":"sn_cmdb_ws.Get policy execution instance data","mutates_server_data":"false","name":"Get policy execution instance data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Replace Coverage Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-01-08 13:59:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"020b8916a3523510bd3bd63f26fcda44","sys_updated_by":"admin","sys_created_on":"2023-11-06 09:56:18","sys_name":"Replace coverage","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n    const replaceCoverageData = input.replaceCoverageData;\n    var output;\n    var gdtStart = new GlideDateTime();\n    gdtStart.setDisplayValue(replaceCoverageData.startSpanDate);\n    var gdtEnd = new GlideDateTime();\n    gdtEnd.setDisplayValue(replaceCoverageData.endSpanDate);\n    output = new global.OnCallCommon().replaceCoverage(gdtStart.getDisplayValueInternal(), gdtEnd.getDisplayValueInternal(), replaceCoverageData.userId, replaceCoverageData.rosterId, replaceCoverageData.groupId, \"roster_schedule_span\", replaceCoverageData.scheduleSysId);\n    return output;\n}","acl_failure_result":"","props":"[{\r\n    \"name\": \"replaceCoverageData\",\r\n    \"label\": \"Replace Coverage Data\",\r\n    \"description\": \"Replace Coverage Data\",\r\n    \"fieldType\": \"json\",\r\n    \"valueType\": \"object\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_020b8916a3523510bd3bd63f26fcda44","api_name":"sn_uib_on_call.Replace coverage","mutates_server_data":"false","name":"Replace coverage","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-05-16 12:28:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"02240eaed0060110fa9b6742224fb1eb","sys_updated_by":"admin","sys_created_on":"2022-03-08 09:52:10","sys_name":"Rate card","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"32","sys_tags":"","script":"function transform(input) {\n\tvar data = [];\n\tif(GlidePluginManager.isActive('com.snc.cost_management')){\n\t\tvar gr = new GlideRecord(\"fm_contract_rate_card\");\n\t\tgr.addQuery(\"contract\",input.sysId);\n\t\tgr.query();\n\t\tvar count = 0;\n\t\twhile (gr.next()){\n\t\t\tvar str = '{\"start_date\":\"' + gr.start_date + '\",\"end_date\":\"' + gr.end_date + '\",\"base_cost\":\"'\n\t\t\t+ gr.base_cost + '\",\"sysId\":\"' + gr.sys_id + '\",\"name\": \"' + gr.name + '\",\"start_date_valid\":\"\",\"end_date_valid\":\"\"}';\n\t\t\tdata[count] = str;\n\t\t\tcount++;\n\t\t}\n\t}\n\tvar currency = [];\n\tvar gq = new GlideRecord(\"fx_currency\");\n    gq.addQuery(\"active\", true);\n    gq.query();\n\tcount = 0;\n    while(gq.next()){\n\t\tvar code = gq.code;\n\t\tcurrency[count] = '{\"' + gq.symbol + '\":\"' + code + '\"}';\n\t\tcount++;\n\t}\n\t\n\tvar details = {\n\t\tadjTypes: data,\n\t\tcurr: currency\n    };\t\n    return details;\n}","acl_failure_result":"","props":"[\r\n       {\r\n\t  \"name\": \"sysId\",\r\n\t  \"label\": \"Sys ID\",\r\n\t  \"fieldType\": \"string\",\r\n\t  \"mandatory\": true\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_02240eaed0060110fa9b6742224fb1eb","api_name":"sn_itam_workspace.Rate card","mutates_server_data":"false","name":"Rate card","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Opened For\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Recent Query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-07-26 04:59:34","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"02dfe8a0a39602104bb05824d51e61aa","sys_updated_by":"admin","sys_created_on":"2024-05-17 17:35:44","sys_name":"Get Recent tasks","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"37","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.openedFor || !input.recentQuery) {\n        return [];\n    }\n\n    var callerRecordsTask = [];\n    var userId = input.openedFor;\n    var recentQuery = input.recentQuery;\n\n    var inc = \"sys_class_name=incident^ref_incident.caller_id=\" + userId;\n    var prb = \"sys_class_name=problem^opened_by=\" + userId;\n    var chg = \"sys_class_name=change_request^ref_change_request.requested_by=\" + userId;\n    var scr = \"sys_class_name=sc_request^ref_sc_request.requested_for=\" + userId;\n\n    var taskQuery = inc + \"^NQ\" + prb + \"^NQ\" + chg + \"^NQ\" + scr + \"^ORDERBYDESCsys_created_on\";\n\n    var taskGr = new GlideRecordSecure('task');\n    taskGr.addEncodedQuery(taskQuery);\n    taskGr.addQuery(recentQuery);\n    taskGr.setLimit(10);\n    taskGr.query();\n\n    while (taskGr.next()) {\n        var record = {};\n        record['table'] = taskGr.getValue('sys_class_name');\n        record['sys_id'] = taskGr.getValue('sys_id');\n        record['number'] = taskGr.getValue('number');\n        record['sys_created_on'] = taskGr.getValue('sys_created_on');\n        record['short_description'] = taskGr.getValue('short_description');\n        record['priority'] = taskGr.getValue('priority');\n        record['priority_label'] = taskGr.getDisplayValue('priority');\n        record[\"labelled_row_one\"] = [];\n        if (taskGr.getValue('priority')) record[\"labelled_row_one\"].push({\n            \"label\": taskGr.priority.getLabel(),\n            \"value\": taskGr.getDisplayValue('priority')\n        });\n        if (taskGr.getValue('sys_created_on')) {\n            var gdt = new GlideDateTime(taskGr.getValue('sys_created_on'));\n            var dateOnly = gdt.getDate().getDisplayValue();\n            record[\"labelled_row_one\"].push({\n                \"label\": gs.getMessage(\"Opened\"),\n                \"value\": dateOnly\n            });\n        }\n        record[\"labelled_row_two\"] = [];\n        if (taskGr.getValue('state')) record[\"labelled_row_two\"].push({\n            \"label\": taskGr.state.getLabel(),\n            \"value\": taskGr.getDisplayValue('state')\n        });\n        if (taskGr.getValue('assignment_group')) record[\"labelled_row_two\"].push({\n            \"label\": taskGr.assignment_group.getLabel(),\n            \"value\": taskGr.getDisplayValue('assignment_group')\n        });\n\n        callerRecordsTask.push(record);\n    }\n\n    return callerRecordsTask;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"openedFor\",\r\n  \"label\": \"Opened For\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"recentQuery\",\r\n  \"label\": \"Recent Query\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"sysId\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_02dfe8a0a39602104bb05824d51e61aa","api_name":"sn_sow_itsm_common.Get Recent tasks","mutates_server_data":"false","name":"Get Recent tasks","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Prompt Injection Detection Impact Now Assist Admin Skill","sys_updated_on":"2024-10-03 08:02:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"031b17199fecd21050df2e5af90a1c96","sys_updated_by":"admin","sys_created_on":"2024-09-09 10:19:56","sys_name":"Prompt Injection Detection Impact","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n    try {\n        var naaUtil = new sn_nowassist_admin.NowAdminAssistUtil();\n        var guardrailsUtil = new sn_nowassist_admin.NowAssistAdminGuardrails();\n        var CONSTANTS = new sn_nowassist_admin.NowAdminAssistMetadata();\n        var NAA_GUARDIAN_CONSTANTS = CONSTANTS.NOW_ASSIST_GUARDIAN;\n        var detectionImpact = \"\";\n        // var activeSkills = naaUtil.getAllActiveSkills();\n\n\n        // if (!activeSkills.length) {\n            var piControlSettingData = guardrailsUtil._getControlSettingDataByType(NAA_GUARDIAN_CONSTANTS.PROMPT_INJECTION_TYPE);\n            detectionImpact = piControlSettingData && piControlSettingData[\"detectionImpact\"];\n\n        // } else {\n        //     var skill = activeSkills[0];\n        //     var controlSettingData = guardrailsUtil._getControlSettingData(skill?.id, NAA_GUARDIAN_CONSTANTS.PROMPT_INJECTION_TYPE);\n        //     detectionImpact = controlSettingData && controlSettingData[\"detectionImpact\"];\n        // }\n    } catch (error) {\n        gs.error(\"Unable to get detection impact for prompt injection: \" + error.toString());\n    }\n    return detectionImpact;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_031b17199fecd21050df2e5af90a1c96","api_name":"sn_nowassist_admin.Prompt Injection Detection Impact","mutates_server_data":"false","name":"Prompt Injection Detection Impact","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"CI Admin Console - Translations","sys_updated_on":"2022-03-24 17:15:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"03434a73c3520110fc869bc8a840dd5c","sys_updated_by":"admin","sys_created_on":"2022-03-24 17:15:54","sys_name":"CI Admin Console - Translations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    return new sn_oe_sfs.CIAdminConsoleTranslations().getTranslations();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_03434a73c3520110fc869bc8a840dd5c","api_name":"sn_oe_sfs.CI Admin Console - Translations","mutates_server_data":"false","name":"CI Admin Console - Translations","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ID of the App Shell UI\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ID of the App Shell UI for the new Experience\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"UX App Config Id for experience\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"urlPath\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-02-15 04:44:59","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"03c1a43cc31d0110a86b4fb9c840dd86","sys_updated_by":"admin","sys_created_on":"2022-01-24 09:33:57","sys_name":"Update Parent App for Experience","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"20","sys_tags":"","script":"function transform(input) {\n    var util = new global.ACEAppBuilderGlobalScopedUtil();\n\tvar CONSTANTS = new ACEAppBuilderMetaData();\n\n    var output = {\n        experienceId: '',\n        appConfig: input.uxAppConfigId\n    };\n    var uxAppConfigId = input.uxAppConfigId;\n\tvar appShellId = input.appShellUI;\n\n    var expGr = new GlideRecord('sys_ux_page_registry');\n    if (!uxAppConfigId || !expGr.canWrite() || !expGr.canRead()) {\n        output.status = \"Failed to create experience\";\n        return output;\n    }\n\n    expGr.addQuery('admin_panel', uxAppConfigId);\n    expGr.query();\n    if (expGr.next()) {\n\t\tvar parentApp = '';\n\t\t\n\t\tif (!appShellId)\n\t\t\tappShellId = CONSTANTS.BASE_UXF_RECORDS.DEFAULT_APP_SHELL_UI;\n\t\t\n\t\tvar _appShells = CONSTANTS.BASE_UXF_RECORDS.APP_SHELLS;\n\t\tfor (var i = 0; i < _appShells.length; i++) {\n\t\t\tvar appShellObj = _appShells[i];\n\t\t\tif (appShellObj && appShellObj.id === appShellId) {\n\t\t\t\tparentApp = appShellObj.parentApp;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} \n\t\tif (!parentApp) \n\t\t\tparentApp = CONSTANTS.BASE_UXF_RECORDS.DEFAULT_PARENT_APP;\n\t\t\n\t\tutil.updateRecord('sys_ux_page_registry', expGr.getValue('sys_id'), {\"parent_app\": parentApp});\n        output.experienceId = expGr.getValue('sys_id');\n\t\t\n\t\tvar chromeHeaderPagePropertyPayload = {\n            'page': expGr.getValue('sys_id'),\n            'name': 'chrome_header',\n            'type': 'json',\n            'value': JSON.stringify(CONSTANTS.CHROME_HEADER_VALUE),\n        };\n\t\tutil._grRecordCreator('sys_ux_page_property', chromeHeaderPagePropertyPayload);\n    }\n\n    return output;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"uxAppConfigId\",\r\n    \"label\": \"UX App Config Id for experience\",\r\n    \"description\": \"UX App Config Id for experience\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\",\r\n    \"fieldType\": \"string\"\r\n  },\r\n  {\r\n    \"name\": \"name\",\r\n    \"label\": \"Name\",\r\n    \"description\": \"Name\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\",\r\n    \"fieldType\": \"string\"\r\n  },\r\n  {\r\n    \"name\": \"urlPath\",\r\n    \"label\": \"urlPath\",\r\n    \"description\": \"urlPath\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\",\r\n    \"fieldType\": \"string\"\r\n  } , {\r\n    \"name\": \"appShellUI\",\r\n    \"label\": \"ID of the App Shell UI\",\r\n    \"description\": \"ID of the App Shell UI for the new Experience\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\",\r\n    \"fieldType\": \"string\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_03c1a43cc31d0110a86b4fb9c840dd86","api_name":"sn_ace.Update Parent App for Experience","mutates_server_data":"true","name":"Update Parent App for Experience","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2021-10-28 11:45:23","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"04d4081949533010f87757ccb8598be9","sys_updated_by":"admin","sys_created_on":"2021-10-28 10:30:18","sys_name":"Product Model Status Report Config","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"13","sys_tags":"","script":"function transform(input) {\n    var query = \"\";\n    var reportConfiguration = {};\n\n    if (GlidePluginManager.isActive('com.snc.cmdb.csdm.activation')) {\n        query = \"active=true^lifecycle_phase=end_of_life^start_dateONThis year@javascript:gs.beginningOfThisYear()@javascript:gs.endOfThisYear()^lifecycle_type=publisher^model.life_cycle_stageNOT INEnd of Life^model.life_cycle_stage_statusNOT INRetired,Sold\";\n    } else {\n        query = \"active=true^lifecycle_phase=end_of_life^start_dateONThis year@javascript:gs.beginningOfThisYear()@javascript:gs.endOfThisYear()^lifecycle_type=publisher^model.statusNOT INRetired,Sold\";\n    }\n\n    var hardwareLifeCycleEOL = {};\n    hardwareLifeCycleEOL.dataSource = [{\n        \"isDatabaseView\": false,\n        \"allowRealTime\": true,\n        \"label\": \"Hardware Model Lifecycle\",\n        \"sourceType\": \"table\",\n        \"tableOrViewName\": \"cmdb_hardware_model_lifecycle\",\n        \"filterQuery\": query,\n        \"reportSourceSysId\": null,\n        \"id\": \"dGFibGVjbWRiX2hhcmR3YXJlX21vZGVsX2xpZmVjeWNsZTE2MjY3OTExOTI3MzA=\"\n    }];\n\n    hardwareLifeCycleEOL.metrics = [{\n        \"dataSource\": \"dGFibGVjbWRiX2hhcmR3YXJlX21vZGVsX2xpZmVjeWNsZTE2MjY3OTExOTI3MzA=\",\n        \"id\": \"Y21kYl9oYXJkd2FyZV9tb2RlbF9saWZlY3ljbGVDT1VOVDE2MzQ1MTU2ODA=\",\n        \"aggregateFunction\": \"COUNT\",\n        \"numberFormat\": {\n            \"customFormat\": false\n        },\n        \"axisId\": \"primary\"\n    }];\n\n    var consumableLifeCycleEOL = {};\n    consumableLifeCycleEOL.dataSource = [{\n        \"isDatabaseView\": false,\n        \"allowRealTime\": true,\n        \"label\": \"Consumable Model Lifecycle\",\n        \"sourceType\": \"table\",\n        \"tableOrViewName\": \"cmdb_consumable_model_lifecycle\",\n        \"filterQuery\": query,\n        \"reportSourceSysId\": null,\n        \"id\": \"dGFibGVjbWRiX2NvbnN1bWFibGVfbW9kZWxfbGlmZWN5Y2xlMTYyNjc5MTM2NzI4OA==\"\n    }];\n\n    consumableLifeCycleEOL.metrics = [{\n        \"dataSource\": \"dGFibGVjbWRiX2NvbnN1bWFibGVfbW9kZWxfbGlmZWN5Y2xlMTYyNjc5MTM2NzI4OA==\",\n        \"id\": \"Y21kYl9jb25zdW1hYmxlX21vZGVsX2xpZmVjeWNsZUNPVU5UMTYzNDUxNTY4MA==\",\n        \"aggregateFunction\": \"COUNT\",\n        \"numberFormat\": {\n            \"customFormat\": false\n        },\n        \"axisId\": \"primary\"\n    }];\n\n    reportConfiguration.hardwareLifeCycleEOL = hardwareLifeCycleEOL;\n    reportConfiguration.consumableLifeCycleEOL = consumableLifeCycleEOL;\n\n    return reportConfiguration;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_04d4081949533010f87757ccb8598be9","api_name":"sn_itam_workspace.Product Model Status Report Config","mutates_server_data":"false","name":"Product Model Status Report Config","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Product Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetch encoded log query for Offensiveness","sys_updated_on":"2024-09-13 08:07:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"04e6a7c79f901210afb85c1eca0a1ca8","sys_updated_by":"admin","sys_created_on":"2024-09-02 11:26:55","sys_name":"Fetch encoded log query for Offensiveness","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"14","sys_tags":"","script":"function transform(input) {\n    try {\n        var naaUtil = new sn_nowassist_admin.NowAdminAssistUtil();\n        var guardUtil = new sn_nowassist_admin.NowAssistAdminGuardrails();\n        var skillIdList = [];\n        var features = naaUtil.getFeatures(input?.productId);\n        features.forEach(function(feature) {\n            var skills = naaUtil.getSkills(feature.id);\n            skills.forEach(function(skill) {\n                skillIdList.push(skill.id);\n            });\n        });\n\n        var url = guardUtil.getExportURL(skillIdList, guardUtil.OFFENSIVENESS_METRIC_NAME);\n        return {\n            path: url\n        };\n    } catch (error) {\n        gs.error(\"Error occurred in fetching encoded log query for Offensiveness data broker : \" + error.toString());\n    }\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"productId\",\r\n        \"label\": \"Product Id\",\r\n        \"description\": \"Product Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_04e6a7c79f901210afb85c1eca0a1ca8","api_name":"sn_nowassist_admin.Fetch encoded log query for Offensiveness","mutates_server_data":"true","name":"Fetch encoded log query for Offensiveness","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get General settings plugin status;\n -  Branding;\n -  Channels;\n -  Context variables;\n -  Pre-chat surveys;\n -  Topic Context Intent;\n -  System messages;\n -  URL redirects","sys_updated_on":"2021-11-29 19:26:23","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"05091dca7702301039ac088b3a10619d","sys_updated_by":"maint","sys_created_on":"2021-08-19 22:06:04","sys_name":"CI GS Features Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\n    var result = {};\n\n    // Brandings\n    result.brandingCountText = (function() {\n        var brProfileGR = new GlideAggregate(\"sys_cs_branding_setup\");\n        brProfileGR.addAggregate('COUNT');\n        brProfileGR.query();\n        var _count = brProfileGR.next() ? brProfileGR.getAggregate('COUNT') : 0;\n        return gs.getMessage(\"Branding profiles ({0})\", _count);\n    })();\n\n    // Channels\n    result.channnelsCountText = (function() {\n        var chProfileGR = new GlideAggregate(\"sys_cs_provider\");\n        chProfileGR.addAggregate('COUNT');\n        chProfileGR.query();\n        var _count = chProfileGR.next() ? chProfileGR.getAggregate('COUNT') : 0;\n        return gs.getMessage(\"Installed channels ({0})\", _count);\n    })();\n\n    // Context variables\n    result.contextVariablesCountText = (function() {\n        var cvProfileGR = new GlideAggregate(\"sys_cs_virtual_agent_context\");\n        cvProfileGR.addEncodedQuery('live_agent_setup=f0acbc4c5f091300e6333654de7313c8');\n        cvProfileGR.addAggregate('COUNT');\n        cvProfileGR.query();\n        var _count = cvProfileGR.next() ? cvProfileGR.getAggregate('COUNT') : 0;\n        return gs.getMessage(\"Context variables ({0})\", _count);\n    })();\n\n    // Pre-chat surveys\n    result.preChatSurveysCountText = (function() {\n        var pcsProfileGR = new GlideAggregate(\"sys_cs_survey\");\n        pcsProfileGR.addEncodedQuery('type=prechat^EQ');\n        pcsProfileGR.addAggregate('COUNT');\n        pcsProfileGR.query();\n        var _count = pcsProfileGR.next() ? pcsProfileGR.getAggregate('COUNT') : 0;\n        return gs.getMessage(\"Pre-chat surveys ({0})\", _count);\n    })();\n\n    // Topic context intent\n    result.topicContextIntentCountText = (function() {\n        var tciProfileGR = new GlideAggregate(\"sys_cs_context_topic\");\n        tciProfileGR.addAggregate('COUNT');\n        tciProfileGR.query();\n        var _count = tciProfileGR.next() ? tciProfileGR.getAggregate('COUNT') : 0;\n        return gs.getMessage(\"Topic context intent ({0})\", _count);\n    })();\n\n    // System messages\n    result.systemMessagesCountText = (function() {\n        var smProfileGR = new GlideAggregate(\"sys_properties_category_m2m\");\n        smProfileGR.addEncodedQuery('category=4f33892a533e5010ad82ddeeff7b1218');\n        smProfileGR.addAggregate('COUNT');\n        smProfileGR.query();\n        var _count = smProfileGR.next() ? smProfileGR.getAggregate('COUNT') : 0;\n        return gs.getMessage(\"System messages ({0})\", _count);\n    })();\n\n    // URL redirects\n    result.urlRedirectsCountText = (function() {\n        var urlProfileGR = new GlideAggregate(\"sys_cs_portal_url_mapping\");\n        urlProfileGR.addAggregate('COUNT');\n        urlProfileGR.query();\n        var _count = urlProfileGR.next() ? urlProfileGR.getAggregate('COUNT') : 0;\n        return gs.getMessage(\"URL redirects ({0})\", _count);\n    })();\n\t\n\t// Sensitive Data Handling \n\tresult.isSenstiveDataPluginInstalled = GlidePluginManager.isActive('com.glide.sensitive_data_handling');\n\tif (result.isSenstiveDataPluginInstalled) {\n\t\tresult.sensitiveDatapatternsText = (function() {\n\t\t\tvar csRegexGR = new GlideAggregate(\"sys_sensitive_data_handling_regex\");\n\t\t\tcsRegexGR.addAggregate('COUNT');\n\t\t\tcsRegexGR.query();\n\t\t\tvar _count = csRegexGR.next() ? csRegexGR.getAggregate('COUNT') : 0;\n\t\t\treturn gs.getMessage(\"Regular expressions ({0})\", _count);\n\t\t})();\n\t} else {\n\t\t// TODO: Maintain a central store for all plugin related links used in admin console\n\t\tresult.sensitiveDataAppLink = \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.sensitive_data_handling\";\n\t}\n\t\n    return result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sys_ux_data_broker_transform_05091dca7702301039ac088b3a10619d","api_name":"global.CI GS Features Status","mutates_server_data":"false","name":"CI GS Features Status","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"List of System property names\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Properties\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Returns the name and value of System properties. If value doesnt exist, it returns default value.","sys_updated_on":"2024-05-14 17:17:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"059c1a8db7c60210cc4880408e11a9d2","sys_updated_by":"admin","sys_created_on":"2024-05-07 04:36:25","sys_name":"Get System Properties Values","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var wrapperFn = function() {\n      var util = new sn_cmdb_ws.CMDBWorkspaceUtil();\n\n      var result = {\n        properties: {}\n      };\n\n      if (input.properties && input.properties.length > 0) {\n        var properties = input.properties.trim().split(',');\n        properties.forEach(function(name) {\n          switch (name) {\n            case util.SYS_PROPERTIES_NAME.LIST_RECORD_COUNT_LIMIT.NAME:\n              result.properties[\"LIST_RECORD_COUNT_LIMIT\"] = util.getSystemProperty(util.SYS_PROPERTIES_NAME.LIST_RECORD_COUNT_LIMIT.NAME, util.DATATYPE.NUMBER, util.SYS_PROPERTIES_NAME.LIST_RECORD_COUNT_LIMIT.DEFAULT_VALUE);\n              break;\n            default:\n              result.properties[name] = gs.getProperty(name);\n              break;\n          }\n        });\n      }\n      return result;\n    };\n\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws\", \"CMDB WS Get System Properties Values\", wrapperFn);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"properties\",\r\n    \"label\": \"Properties\",\r\n    \"fieldType\": \"string\",    \r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\",\r\n    \"description\": \"List of System property names\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_059c1a8db7c60210cc4880408e11a9d2","api_name":"sn_cmdb_ws.Get System Properties Values","mutates_server_data":"false","name":"Get System Properties Values","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-04-18 19:26:49","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"06423707536d02101c02ddeeff7b1254","sys_updated_by":"admin","sys_created_on":"2024-04-18 19:26:49","sys_name":"Get PWD Reset User Lock State","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\treturn  new sn_uib_pwd_reset.PwdResetUXFResetProcessor().getLockStateFromRequest(input.token);\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_06423707536d02101c02ddeeff7b1254","api_name":"sn_uib_pwd_reset.Get PWD Reset User Lock State","mutates_server_data":"false","name":"Get PWD Reset User Lock State","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Config Identifier Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Supports granular configurations both within and across Workspaces\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Workspace App Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"max results\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"maximum number of resulting matches to return; default is 100\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"name of the CI\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"name or partial name of the CI\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Search all CIs by name that match the supplied string. Search is only for startsWith since contains will likely be to expensive for larger datasets.","sys_updated_on":"2024-09-19 01:42:30","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"069e494c77f14110960ced43ba5a99a7","sys_updated_by":"admin","sys_created_on":"2022-02-16 01:21:45","sys_name":"Search CIs by Name","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"26","sys_tags":"","script":"// returns array of matching CIs to supplied search text for CI name\nfunction transform(input) {\n\tvar result = {\n\t\terrors: [],\n\t\tname: '',\n\t\tmax: parseInt(input.max) || 100,\n\t\tmatches: 0,\n\t\tcis: []\n\t};\n\t\n\ttry {\n\t\tvar name = input.name;\n\t\tvar workspaceId = input.workspaceId;\n\t\tvar configIdentifierId = input.configIdentifierId;\n\t\tvar mapBase = new sn_cmdb_ws.MapBase();\n\t\tvar mode = input.mode || mapBase.OPERATIONAL_LIFE_CYCLE_STAGE_MODE.VIEW;\n\t\tif (!name || !name.length || !name[0]) {\n\t\t\tresult.errors.push('name is missing');\n\t\t}\n\t\t\n\t\tif (!workspaceId) {\n\t\t\tresult.errors.push('Workspace App Id is missing');\n\t\t}\n\n\t\tvar TABLE_NAME = {\n\t\t\tOPERATIONAL_CYCLE_UNIFIED_MAP: mapBase.NODE_MAP_TABLE.OPERATIONAL_LIFE_CYCLE_FOR_UNIFIED_MAP,\n\t\t\tCMDB_CI: mapBase.NODE_MAP_TABLE.CMDB_CI\n\t\t};\n\t\t\n\t\tif (!result.errors.length) {\n\t\t\tresult.name = name;\n\t\t\tvar lifeCycleStageInclusionList;\n\t\t\tvar mapService = new sn_cmdb_ws.MapService();\n\t\t\tlifeCycleStageInclusionList = mapService.getLifeCycleStageInclusionList(mode, workspaceId, configIdentifierId);\n\n\t\t\tvar gr = new GlideRecordSecure(TABLE_NAME.CMDB_CI);\n\t\t\tgr.addEncodedQuery('nameSTARTSWITH' + name);\n\t\t\tif(lifeCycleStageInclusionList) {\n\t\t\t\tgr.addNullQuery(mapBase.COL_LIFE_CYCLE_STAGE).addOrCondition(mapBase.COL_LIFE_CYCLE_STAGE, mapBase.IN_OP, lifeCycleStageInclusionList);\n\t\t\t}\n\t\t\tgr.setLimit(result.max || 30);\n\t\t\tgr.query();\n\t\t\twhile(gr.next() && result.matches < result.max) {\n\t\t\t\tresult.matches++;\n\t\t\t\tresult.cis.push({\n\t\t\t\t\tid: gr.getUniqueValue(),\n\t\t\t\t\tlabel: gr.getDisplayValue(),\n\t\t\t\t\tsublabel: gr.getClassDisplayValue(),\n\t\t\t\t\t'class': gr.getRecordClassName()\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t} catch (error) {\n\t\tresult.errors.push(error.toString());\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"name\",\r\n    \"label\": \"name of the CI\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"name or partial name of the CI\"\r\n  },\r\n  {\r\n    \"name\": \"max\",\r\n    \"label\": \"max results\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": false,\r\n    \"description\": \"maximum number of resulting matches to return; default is 100\"\r\n  },\r\n  {\r\n      \"name\": \"workspaceId\",\r\n      \"label\": \"Workspace App Id\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": true,\r\n      \"description\": \"Workspace App Id\"\r\n   },\r\n   {\r\n      \"name\": \"configIdentifierId\",\r\n      \"label\": \"Config Identifier Id\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": false,\r\n      \"description\": \"Supports granular configurations both within and across Workspaces\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_069e494c77f14110960ced43ba5a99a7","api_name":"sn_cmdb_ws.Search CIs by Name","mutates_server_data":"false","name":"Search CIs by Name","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Related Lists Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-12-20 12:25:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"06d9a42d532001105264ddeeff7b1269","sys_updated_by":"admin","sys_created_on":"2021-12-20 11:20:32","sys_name":"Latest Refresh Requested","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54a81ee10b11301039dd818393673a5c","value":"54a81ee10b11301039dd818393673a5c"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\tvar currentTimestamp = new GlideDateTime().getNumericValue();\n\treturn {\n\t\t\"latestRefreshRequest\": {\n\t\t\t\"timestamp\": currentTimestamp\n\t\t}\n\t};\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"relatedLists\",\r\n  \"label\": \"Related Lists Data\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"object\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54a81ee10b11301039dd818393673a5c","value":"54a81ee10b11301039dd818393673a5c"},"sys_update_name":"sys_ux_data_broker_transform_06d9a42d532001105264ddeeff7b1269","api_name":"sn_sow_problem.Latest Refresh Requested","mutates_server_data":"false","name":"Latest Refresh Requested","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Selected date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"dates\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-25 18:13:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"07153db887131110adf7083f37cb0bf8","sys_updated_by":"maint","sys_created_on":"2022-11-18 21:46:47","sys_name":"Get Score For Date Selected","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\tvar date = input.dates;\n\tif (!date) {\n\t\treturn '';\n\t}\n\tvar startTime = \"00:00:00\";\n\tvar endTime = \"23:59:59\";\n\tvar score = \"\";\n\tvar gr = new GlideRecord('sn_vsc_hardening_compliance_scores');\n\tvar records = \"harc_collectedON\" + date + \"@javascript:gs.dateGenerate('\" + date + \"','\" + startTime + \"')@javascript:gs.dateGenerate('\" + date + \"','\" + endTime + \"')\";\n\tgr.addEncodedQuery(records, true);\n\tgr.orderByDesc('harc_collected');\n\tgr.setLimit(1);\n\tgr.query();\n\tif(gr.next()){\n\t\tscore = gr.getDisplayValue('harc_score').toString() + \"%\";\n\t}\n\treturn score;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"dates\",\n    \"label\": \"dates\",\n    \"description\": \"Selected date\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_07153db887131110adf7083f37cb0bf8","api_name":"sn_vsc.Get Score For Date Selected","mutates_server_data":"false","name":"Get Score For Date Selected","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Required user roles\",\n  \"comment\" : \"\"\n},\n{\n  \"message\" : \"One or more than one user role can be given as input(comma-separated)\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Check whether user has given roles or not","sys_updated_on":"2022-09-07 14:39:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"07c0e9ed77b11110ad2e53cf6b5a997d","sys_updated_by":"admin","sys_created_on":"2022-09-07 14:39:14","sys_name":"Check for user roles","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar output = {};\n\tvar roles = (input.roles || \"\").split(\",\");\n\tif(roles && roles.length > 0) {\n\t\tvar size = roles.length;\n\t\tfor(var i = 0; i < size; i++) {\n\t\t\tif(roles[i]) {\n\t\t\t\toutput[roles[i]] = gs.hasRole(roles[i]);\n\t\t\t}\n\t\t}\n\t}\n\treturn output;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"roles\",\r\n    \"label\": \"Required user roles\",\r\n    \"description\": \"One or more than one user role can be given as input(comma-separated)\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sys_ux_data_broker_transform_07c0e9ed77b11110ad2e53cf6b5a997d","api_name":"sn_sow.Check for user roles","mutates_server_data":"false","name":"Check for user roles","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-10-25 08:31:42","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"07f407da43023110449f255adfb8f29b","sys_updated_by":"maint","sys_created_on":"2023-10-25 08:31:42","sys_name":"EMS Purchase Count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input){\n\tvar subscription_detail = new sn_entitlement.SubscriptionEntitlementsService().getEntitlementDetails(\"IntegrationHubPool\")[0];\n\treturn subscription_detail.purchased_count + \"\";\n}\t","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_update_name":"sys_ux_data_broker_transform_07f407da43023110449f255adfb8f29b","api_name":"sn_ih_usage_app.EMS Purchase Count","mutates_server_data":"false","name":"EMS Purchase Count","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"sysId of  source record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId of source record\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetch Notify Conference Calls in TCM","sys_updated_on":"2023-10-17 15:26:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"08556dbb431131100bd09f18d9b8f206","sys_updated_by":"admin","sys_created_on":"2023-09-22 10:41:16","sys_name":"Fetch Notify Conference Calls - TCM","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0d2383dd53687510b256ddeeff7b12b8","value":"0d2383dd53687510b256ddeeff7b12b8"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    if (GlidePluginManager.isActive('com.snc.notify')) {\n        var confUtils = new sn_uib_notify.NotifyUXFConferenceUtil();\n        return confUtils.getAllConferenceCardsData(input.sysId);\n    }\n\treturn {};\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"sysId of  source record\",\r\n  \"description\": \"sysId of source record\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0d2383dd53687510b256ddeeff7b12b8","value":"0d2383dd53687510b256ddeeff7b12b8"},"sys_update_name":"sys_ux_data_broker_transform_08556dbb431131100bd09f18d9b8f206","api_name":"sn_uib_tcm.Fetch Notify Conference Calls - TCM","mutates_server_data":"false","name":"Fetch Notify Conference Calls - TCM","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Enoded Query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Max Records\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"maximum number of records to return; default is 1000\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"the encoded query to use when filtering the returned dataset\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Gets a subset of the UM perf mertrics","sys_updated_on":"2024-05-07 11:09:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"088fd40877c8c290960ced43ba5a99bf","sys_updated_by":"admin","sys_created_on":"2024-01-25 07:16:12","sys_name":"Get UM Perf Metrics","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"// returns array of matching CIs to supplied search text for CI name\nfunction transform(input) {\n\tvar result = {\n\t\tquery: input.query,\n\t\tmax: input.max,\n\t\tmatches: 0,\n\t\tresult: []\n\t};\n\t\n\tvar gr = new GlideRecord('sn_cmdb_ws_um_perf_metrics');\n\tgr.addEncodedQuery(input.query);\n\tgr.setLimit(input.max);\n\tgr.query();\n\twhile(gr.next() && result.matches <= input.max) {\n\t\tresult.matches++;\n\t\tresult.result.push({\n\t\t\tapp_id: gr.getValue('app_id'),\n\t\t\tapp_name: gr.app_id.title.getDisplayValue(),\n\t\t\tbase_state_type: gr.getValue('base_state_type'),\n\t\t\tbrowser: gr.getValue('browser'),\n\t\t\tci_sysid: gr.getValue('ci'),\n\t\t\tci_name: gr.getDisplayValue('ci'),\n\t\t\tcmdb_frontend_time: gr.getValue('cmdb_frontend_time'),\n\t\t\tcmdb_getmap_api_time: gr.getValue('cmdb_getmap_api_time'),\n\t\t\tcmdb_map_only: gr.getValue('cmdb_map_only'),\n\t\t\thas_related_item_badging_data: gr.getValue('has_related_item_badging_data'),\n\t\t\tlevels: gr.getValue('levels'),\n\t\t\tnodemap_component_rendering_time: gr.getValue('nodemap_component_rendering_time'),\n\t\t\tnumber_of_edges: gr.getValue('number_of_edges'),\n\t\t\tnumber_of_nodes: gr.getValue('number_of_nodes'),\n\t\t\tsm_getmap_api_time: gr.getValue('sm_getmap_api_time'),\n\t\t\tstart_time: gr.getValue('start_time'),\n\t\t\ttotal_backend_time: gr.getValue('total_backend_time'),\n\t\t\ttotal_roundtrip_time: gr.getValue('total_roundtrip_time'),\n\t\t\tuxf_getmap_inbound_return_time: gr.getValue('uxf_getmap_inbound_return_time'),\n\t\t\tuxf_getmap_outbound_call_time: gr.getValue('uxf_getmap_outbound_call_time')\n\t\t});\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"{\r\n\t\"message\": \"User does not have required roles to perform this action.\"\r\n}","props":"[\r\n  {\r\n    \"name\": \"query\",\r\n    \"label\": \"Enoded Query\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"the encoded query to use when filtering the returned dataset\"\r\n  },\r\n  {\r\n    \"name\": \"max\",\r\n    \"label\": \"Max Records\",\r\n    \"fieldType\": \"number\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": false,\r\n    \"description\": \"maximum number of records to return; default is 1000\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_088fd40877c8c290960ced43ba5a99bf","api_name":"sn_cmdb_ws.Get UM Perf Metrics","mutates_server_data":"false","name":"Get UM Perf Metrics","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ACE App Config Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ACE Page Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Generate fields required for the new Embedded Help form","sys_updated_on":"2022-07-07 19:00:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"091d0ddeb70811109cfe23508e11a96f","sys_updated_by":"admin","sys_created_on":"2022-06-14 21:17:59","sys_name":"Embedded Help Fields","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) { \n    var result = {appRoute: '', pageName: '', pagePath: ''};\n    \n    var aceAppConfigGr = new GlideRecord('sn_ace_app_config');\n    var uxPageRegistryGr = new GlideRecord('sys_ux_page_registry');\n    if (input.appConfigId && aceAppConfigGr.get(input.appConfigId)) {\n      uxPageRegistryGr.addQuery('admin_panel', aceAppConfigGr.getValue('app_config'));\n      uxPageRegistryGr.query();\n      if (uxPageRegistryGr.next())\n      result.appRoute = uxPageRegistryGr.getValue('path');\n    }\n    \n    var acePageGr = new GlideRecord('sn_ace_page');\n    var uxRouteGr = new GlideRecord('sys_ux_app_route');\n    if (input.pageId && acePageGr.get(input.pageId)) {\n      result.pageName = acePageGr.getValue('name');\n      if (uxRouteGr.get(acePageGr.getValue('route')))\n      result.pagePath = uxRouteGr.getValue('route_type');\n    }\n    \n    return result;\n} ","acl_failure_result":"","props":"[\r\n\t{\r\n\t\t\"name\": \"appConfigId\",\r\n\t\t\"label\": \"ACE App Config Sys Id\",\r\n\t\t\"description\": \"ACE App Config Sys Id\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true\r\n\t},\r\n\t{\r\n\t\t\"name\": \"pageId\",\r\n\t\t\"label\": \"ACE Page Sys Id\",\r\n\t\t\"description\": \"ACE Page Sys Id\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true\r\n\t} \r\n] ","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_091d0ddeb70811109cfe23508e11a96f","api_name":"sn_ace.Embedded Help Fields","mutates_server_data":"false","name":"Embedded Help Fields","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"get sys_cs_collab_provider and sys_cs_collab_provider_application records for sidebar Teams integration","sys_updated_on":"2022-10-19 07:05:50","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"09580310c35e11103f4fcd7b7940dde4","sys_updated_by":"admin","sys_created_on":"2022-09-28 21:29:42","sys_name":"Sidebar Teams Settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"77","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar sidebar_teams_config = {};\n\tvar sys_cs_collab_channel = {};\n\tvar sys_cs_collab_provider = {};\n\tvar sys_cs_collab_provider_application = {};\n\tvar collab_chat_webhook_registry = {};\n\tvar sys_cs_collab_settings = {};\n\tvar oAuthEntity = {};\n\tvar wrongScope = false;\n\tvar readOnly = false;\n\tvar setupStatus = \"incomplete\";\n\tvar isTeamsConfigured = false;\n\tvar isTeamsEnabled = false;\n\t\t\n\t\n\tsidebar_teams_config.sys_cs_collab_channel = sys_cs_collab_channel;\n\tsidebar_teams_config.sys_cs_collab_provider = sys_cs_collab_provider;\n\tsidebar_teams_config.sys_cs_collab_provider_application = sys_cs_collab_provider_application;\t\n\tsidebar_teams_config.oAuthEntity = oAuthEntity;\n\tsidebar_teams_config.sys_cs_collab_settings = sys_cs_collab_settings;\n\tsidebar_teams_config.collab_chat_webhook_registry = collab_chat_webhook_registry;\n\tresult.sidebar_teams_config = sidebar_teams_config;\n\tresult.setupStatus = setupStatus;\n\tresult.isTeamsConfigured = isTeamsConfigured;\n\tresult.wrongScope = wrongScope;\n\t\n\t\n\t////////////////////////////////////////////////////////////////////////////////////////\n\t// query for oauth_entity to get client secret                                        //\n\t////////////////////////////////////////////////////////////////////////////////////////\n\tvar oAuthGr = new GlideRecord('oauth_entity');\n\toAuthGr.addQuery('name', 'Sidebar Microsoft Teams Graph');\n\toAuthGr.query();\n\t\n\tif(!oAuthGr.next()){\n\t\tresult.error = gs.getMessage('Were unable to pull up the Sidebar Microsoft Teams Graph oauth_entity record. Please contact technical support for details.');\n\t\tresult.readOnly = true;\n\t\treturn result;\n\t}\n\t\n\toAuthEntity.client_secret = oAuthGr.getValue('client_secret');\n\toAuthEntity.sys_id = oAuthGr.getUniqueValue();\n\tsidebar_teams_config.oAuthEntity = oAuthEntity;\n\t\n\t\n\t////////////////////////////////////////////////////////////////////////////////////////\n\t// query for sys_cs_collab_channel                                                    //\n\t////////////////////////////////////////////////////////////////////////////////////////\n\t\n\tvar channelGr = new GlideRecord(\"sys_cs_collab_channel\"); \n\tchannelGr.addQuery(\"name\", \"Teams\");\n\tchannelGr.query();\n\t\n\tif(!channelGr.next()) {\n\t\tresult.error = gs.getMessage('Unable to fetch sys_cs_collab_channel record for Teams. Contact system administrator for details');\n\t\tresult.readOnly = true;\n\t\treturn result;\n\t}\n\tsys_cs_collab_channel.sys_id = channelGr.getUniqueValue();\n\tsidebar_teams_config.sys_cs_collab_channel = sys_cs_collab_channel;\n\t\n\t////////////////////////////////////////////////////////////////////////////////////////\n\t// query for sys_cs_collab_provider                                                   //\n\t////////////////////////////////////////////////////////////////////////////////////////\n\tvar providerGr = new GlideRecord('sys_cs_collab_provider');\n\tproviderGr.addQuery('channel', sys_cs_collab_channel.sys_id);\n\tproviderGr.query();\n\t\n\tif(!providerGr.next()){\n\t\t\tresult.error = gs.getMessage('Unable to fetch sys_cs_collab_provider record for Teams. Contact system administrator for details');\n\t\t\tresult.readOnly = true;\n\t\t\treturn result;\n\t}\n\tsys_cs_collab_provider.sys_id =  providerGr.getUniqueValue();\n\tsidebar_teams_config.sys_cs_collab_provider = sys_cs_collab_provider;\n\n\t\n\t////////////////////////////////////////////////////////////////////////////////////////\n\t// query for sys_cs_collab_provider_application                                       //\n\t////////////////////////////////////////////////////////////////////////////////////////\t\n\t\n\tvar applicationGr = new GlideRecord('sys_cs_collab_provider_application');\n\tapplicationGr.addQuery('provider', sys_cs_collab_provider.sys_id);\n\tapplicationGr.query();\n\t\n\tif(applicationGr.next()){\n\t\tfor (var key in applicationGr) {\n\t\t\tif(key != 'sys_meta')\n\t\t\t\tsys_cs_collab_provider_application[key] = applicationGr.getValue(key);\n\t\t}\n\t\t\n\t\tsetupStatus = sys_cs_collab_provider_application.setup_status;\n\t\tif(setupStatus == \"incomplete\"){ //users are being imported\n\t\t\treadOnly = true;\n\t\t}\n\t\tisTeamsConfigured = true;\n\t\tsidebar_teams_config.sys_cs_collab_provider_application = sys_cs_collab_provider_application;\t\n\t\t\n\t\tif (!applicationGr.canWrite() && !isInSelectedScope(applicationGr)) {\n\t\t\twrongScope = true;\n\t\t}\n\t}\n\t\n\t////////////////////////////////////////////////////////////////////////////////////////\n\t// query for webhook registry and call back URL                                       //\n\t////////////////////////////////////////////////////////////////////////////////////////\t\n\t\n\tvar webhookGr = new GlideRecord(\"sys_cs_collab_chat_webhook_registry\");\n\twebhookGr.addQuery(\"name\", \"CollabChatWebhookRegistry\");\n\twebhookGr.query();\n\tif(webhookGr.next()) {\n\t\tif (!webhookGr.canWrite() && !webhookGr.canWrite()) {\n\t\t\twrongScope = true;\n\t\t}\n\t\tcollab_chat_webhook_registry.callback_url = webhookGr.getValue(\"callback_url\");\n\t\tcollab_chat_webhook_registry.sys_id = webhookGr.getUniqueValue();\n\t\tsidebar_teams_config.collab_chat_webhook_registry = collab_chat_webhook_registry;\n\t} else {\n\t\tresult.error = gs.getMessage('Were unable to pull up the collab_chat_webhook_registry record. Please contact technical support for details.');\n\t\tresult.readOnly = true;\n\t\treturn result;\n\t}\n\t\n\t////////////////////////////////////////////////////////////////////////////////////////\n\t// query for sys_cs_collab_settings.                                                  //\n\t////////////////////////////////////////////////////////////////////////////////////////\t\n\t\n\tvar settingsGr = new GlideRecord(\"sys_cs_collab_settings\");\n\tsettingsGr.query();\n\tif(settingsGr.next()) {\n\t\tif (!settingsGr.canWrite() && !settingsGr.canWrite()) {\n\t\t\twrongScope = true;\n\t\t}\n\t\tsys_cs_collab_settings = {};\n\t\tsys_cs_collab_settings.sys_id = settingsGr.getUniqueValue();\n\t\tisTeamsEnabled = settingsGr.getValue('enable_teams') == 1;\n\t\tsidebar_teams_config.sys_cs_collab_settings = sys_cs_collab_settings;\n\n\t} else {\n\t\tresult.error = gs.getMessage('Unable to fetch sys_cs_collab_settings record. Contact system administrator for details');\n\t\tresult.readOnly = true;\n\t\treturn result;\n\t}\n\t\n\tif(wrongScope) {\n\t\tvar expectedScope = settingsGr.getDisplayValue('sys_scope') || 'Omni-Experience Standard Feature Set';\n\t\t\tresult.crossScopeMessage = gs.getMessage('This page can only be edited when {0} is the current application. Change the scope to make any updates.', '<strong>' + expectedScope + '</strong>');\n\t\treadOnly = true;\n\t}\n\n\tresult.wrongScope = wrongScope;\n\tresult.readOnly = readOnly;\n\tresult.sidebar_teams_config = sidebar_teams_config;\n\tresult.setupStatus = setupStatus;\n\tresult.isTeamsConfigured = isTeamsConfigured;\n\tresult.isTeamsEnabled = isTeamsEnabled;\n\treturn result;\n\n\n\tfunction isInSelectedScope(gr) {\n\t\tvar currentScope = gs.getCurrentScopeName();\n\t\tvar grScope = gr.getValue('sys_scope');\n\t\treturn currentScope == grScope;\n\t}\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_09580310c35e11103f4fcd7b7940dde4","api_name":"sn_oe_sfs.Sidebar Teams Settings","mutates_server_data":"false","name":"Sidebar Teams Settings","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"name of class\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0ab0358d777d9110b9f7f350ff5a99f3","sys_updated_by":"admin","sys_created_on":"2022-09-06 02:32:38","sys_name":"Multisource Get Attributes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"16","sys_tags":"","script":"function transform(input) {\n\t\n\tvar table = input.table;\n\tif (!table) {\n\t\treturn null; //throw proper error \n\t}\n\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tvar results = util.getAndTransformColumns(table);\n\t\n\treturn results;\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"table\",\r\n  \"label\": \"table\",\r\n  \"description\": \"name of class\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"String\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_0ab0358d777d9110b9f7f350ff5a99f3","api_name":"sn_cmdb_ws.Multisource Get Attributes","mutates_server_data":"false","name":"Multisource Get Attributes","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"List of selected group ids\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of the subscription\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"groupIds\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"subscriptionId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to add groups to subscription, if not already added","sys_updated_on":"2024-06-03 21:23:23","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0aed6005430221101f6d73e60db8f285","sys_updated_by":"admin","sys_created_on":"2023-04-05 04:06:05","sys_name":"Add Groups to Subscription","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_created_by":"admin","sys_mod_count":"79","sys_tags":"","script":"/**\n * Data broker to add groups to subscription, if not already added\n * @param {object} input - Gets subscriptionId and groupIds as input as defined in the Properties\n * @return {string}\n */\nfunction transform(input) {\n    const subscriptionId = input.subscriptionId;\n    const groupIds = input.groupIds;\n    if (!subscriptionId || subscriptionId.length === 0 || !groupIds || groupIds.length === 0) {\n        // Counter-intuitively, this script gets called multiple times and often with an empty group list\n        // Returning 'false' here will make other scripts think that the allocation failed and display error messages\n        // Returning 'true' with the input guard is necessary for the downstream behavior to work as desired.\n        return 'true';\n    }\n\n    const maxEntityCountToProcessSync = parseInt(gs.getProperty('sn_sub_man.add_group_max_entity_count_for_sync', 500));\n\n    const groupAllocationService = new sn_sub_man.GroupAllocationService();\n    const entityCount = groupAllocationService.getEntityCountByGroupIds(groupIds);\n\n    if (entityCount > maxEntityCountToProcessSync) {\n        // Execute sync\n        groupAllocationService.addGroupsToSubscription(groupIds, subscriptionId);\n        groupAllocationService.addGroupMembersToSubscription(groupIds, subscriptionId);\n\n        // Execute async\n        const steps = gs\n            .getProperty('sn_sub_man.add_group_async_steps', 'executePartialUpdateForGroups')\n            .split(',');\n        const args = {\n            subscriptionId: subscriptionId,\n            groupIds: groupIds\n        };\n\n        gs.eventQueue('sn_sub_man.add_groups_to_subscription', null, JSON.stringify(steps), JSON.stringify(args));\n\n        const asyncInfoMessage = sn_i18n.Message.getMessage('Subscription Management', 'An update job has started and will continue in the background. Allocations will be updated when the process completes. Refresh the page and check allocations in a few minutes.');\n        gs.addInfoMessage(asyncInfoMessage);\n    } else {\n        // Execute sync\n        groupAllocationService.addGroupsToSubscription(groupIds, subscriptionId);\n        groupAllocationService.addGroupMembersToSubscription(groupIds, subscriptionId);\n        groupAllocationService.executePartialUpdateForGroups(groupIds);\n    }\n\n    return 'true';\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\":\"subscriptionId\",\r\n      \"label\":\"subscriptionId\",\r\n      \"description\":\"Sys id of the subscription\",\r\n      \"fieldType\":\"string\",\r\n      \"mandatory\":true\r\n   },\r\n{\r\n      \"name\":\"groupIds\",\r\n      \"label\":\"groupIds\",\r\n      \"description\":\"List of selected group ids\",\r\n      \"fieldType\":\"object\",\r\n      \"mandatory\":true\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_update_name":"sys_ux_data_broker_transform_0aed6005430221101f6d73e60db8f285","api_name":"sn_sub_man.Add Groups to Subscription","mutates_server_data":"false","name":"Add Groups to Subscription","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Check whether user has required roles to access dashboards","sys_updated_on":"2022-04-26 14:38:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0bdb9f1239430110fa9b89cdf46ffb09","sys_updated_by":"admin","sys_created_on":"2022-04-26 14:38:54","sys_name":"Check user roles for dashboards","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform() {\n\tvar result = {\n\t\thasAccessToAsset: true,\n\t\thasAccessToModel: true,\n\t\thasAccessToInventory: true,\n\t\thasAccessToContract: true,\n\t};\n\tassetDashboardRoles = ['inventory_user', 'asset', 'inventory_admin', 'sam_admin', 'sam_user', 'ham_admin', 'itil'];\n\tinventoryDashboardRoles = ['ham_admin', 'inventory_user', 'inventory_admin', 'asset'];\n\tmodelDashboardRoles = ['ham_admin', 'sam', 'catalog_admin', 'model_manager', 'asset', 'itil', 'catalog_manager'];\n\tcontractDashboardRoles = ['asset', 'contract_manager'];\n\n\tresult['hasAccessToAsset'] = !gs.hasRole(assetDashboardRoles);\n\tresult['hasAccessToModel'] = !gs.hasRole(modelDashboardRoles);\n\tresult['hasAccessToInventory'] = !gs.hasRole(inventoryDashboardRoles);\n\tresult['hasAccessToContract'] = !gs.hasRole(contractDashboardRoles);\n\n\treturn result;\n}","acl_failure_result":"{\r\n    \"message\":\"User does not have required ACL to perform this action.\"\r\n}","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_0bdb9f1239430110fa9b89cdf46ffb09","api_name":"sn_itam_workspace.Check user roles for dashboards","mutates_server_data":"false","name":"Check user roles for dashboards","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ACE Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"search result block id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-04-01 04:46:42","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0c41681eebea0110da1861c59c5228f3","sys_updated_by":"admin","sys_created_on":"2022-04-01 04:33:05","sys_name":"ACE fetch search result route","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.application_id || !input.search_result_block_id) return '';\n    var route = new ACEAppBuilderUtil().fetchRouteSearchResult(input.application_id, input.search_result_block_id);\n    return route;\n}","acl_failure_result":"","props":"[ {\r\n      \"name\": \"application_id\",\r\n      \"label\": \"Application Id\",\r\n      \"description\": \"ACE Application Id\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n},\r\n {\r\n      \"name\": \"search_result_block_id\",\r\n      \"label\": \"search result block id\",\r\n      \"description\": \"search result block id\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n}]\r\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_0c41681eebea0110da1861c59c5228f3","api_name":"sn_ace.ACE fetch search result route","mutates_server_data":"true","name":"ACE fetch search result route","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Additional Filters\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Additional Filters to apply on top of the Search Application and Profile configurations\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search Context Config ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Updates additionalFilters param to include the sys ID for synthesized GR if linked to the search application.","sys_updated_on":"2025-02-28 20:11:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0c735fb4530422104accddeeff7b12dd","sys_updated_by":"admin","sys_created_on":"2025-02-28 20:10:28","sys_name":"Update additionalFilters if synthesized GR is linked","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var result = {};\n    var synthGrLinked = false;\n    var synthGrId = '088c73a5430302104eaff03a5ab8f22f';\n    var additionalFiltersExist = input && input.additionalFilters;\n    if (additionalFiltersExist)\n        result = JSON.parse(input.additionalFilters);\n\n    // if additionalFilters already has synthesized GR, return early\n    if (additionalFiltersExist && result.geniusResultFilters && result.geniusResultFilters.includes(synthGrId))\n        return input.additionalFilters;\n\n    var cachedValue = GlideCacheManager.get('search_context_config_synth_gr_linked_cache', input.searchContextConfigId);\n    if (cachedValue != null && ('' + cachedValue).trim() != '')\n        synthGrLinked = ('' + cachedValue) === 'true';\n    else {\n        // check if synthesized GR is linked to the search application through search profile\n        var searchApplicationRecord = new GlideRecord('sys_search_context_config');\n        if (searchApplicationRecord.get(input.searchContextConfigId)) {\n            var linkedGRs = [];\n            var searchProfileId = searchApplicationRecord.getValue('search_profile');\n            var grConfigM2m = new GlideRecord('ais_search_profile_ais_genius_result_configuration_m2m');\n            grConfigM2m.addQuery('profile', searchProfileId);\n            grConfigM2m.addQuery('genius_result_configuration.active', 'true');\n            grConfigM2m.query();\n\n            while (grConfigM2m.next()) {\n                linkedGRs.push(grConfigM2m.getValue('genius_result_configuration'));\n            }\n            synthGrLinked = linkedGRs.includes(synthGrId);\n            GlideCacheManager.put('search_context_config_synth_gr_linked_cache', input.searchContextConfigId, synthGrLinked);\n        }\n    }\n\n    // if synthesized GR is linked, make sure synthesized GR ID is part of additionalFilters\n    if (synthGrLinked) {\n        if (additionalFiltersExist && result.geniusResultFilters && result.geniusResultFilters.length > 0) {\n            result.geniusResultFilters.push(synthGrId);\n            return JSON.stringify(result);\n        }\n\n        return JSON.stringify({\n            'geniusResultFilters': [synthGrId]\n        });\n    }\n\n    return input.additionalFilters;\n}","acl_failure_result":"","props":"[\r\n   {\r\n        \"name\": \"additionalFilters\",\r\n        \"label\": \"Additional Filters\",\r\n        \"description\": \"Additional Filters to apply on top of the Search Application and Profile configurations\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    },\r\n   {\r\n        \"name\": \"searchContextConfigId\",\r\n        \"label\": \"Search Context Config ID\",\r\n        \"description\": \"Search Context Config ID\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"reference\",\r\n        \"mandatory\": true,\r\n        \"typeMetadata\": {\r\n               \"reference\": \"sys_search_context_config\"\r\n         }\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_0c735fb4530422104accddeeff7b12dd","api_name":"global.Update additionalFilters if synthesized GR is linked","mutates_server_data":"false","name":"Update additionalFilters if synthesized GR is linked","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"User\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-11-10 10:55:22","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0d213186074f51102fe9f1e08c1ed0ef","sys_updated_by":"admin","sys_created_on":"2022-11-10 08:27:17","sys_name":"SC Get Saved Export Setting","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"kratika.patni@snc","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n    var userId = input.user_id;\n\tvar classifications = [];\n    var userExpSettingGr = new GlideRecord(\"sn_vsc_export_setting\");\n    userExpSettingGr.addQuery('user', userId);\n    userExpSettingGr.query();\n    if (userExpSettingGr.next()) {\n        classifications = userExpSettingGr.classification_metric.toString().split(\",\");\n    }\n\treturn classifications == \"\" ? [] : classifications;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"user_id\",\n    \"label\": \"User\",\n    \"description\": \"User\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_0d213186074f51102fe9f1e08c1ed0ef","api_name":"sn_vsc.SC Get Saved Export Setting","mutates_server_data":"false","name":"SC Get Saved Export Setting","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ACE Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Block Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"data brocker which generates static content blocks as per the search results given by the AI search engine","sys_updated_on":"2022-06-03 09:09:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0d3083166b710110da18ec188e44afdc","sys_updated_by":"admin","sys_created_on":"2022-02-23 09:21:43","sys_name":"ACE Static Search Results","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"36","sys_tags":"","script":"function transform(input) {\n    var searchResults = [];\n    var data = input.block_id;\n    var util = new ACEAppBuilderUtil();\n    try {\n        data.forEach(function(contentBlockId) {\n            var gr = new GlideRecord('sn_ace_content_block');\n            gr.addQuery('sys_id', contentBlockId);\n            gr.addQuery('active', true);\n            gr.query();\n            if (gr.next()) {\n                var currentSearchResult = getSearchBlockTemplate();\n                var contentBlockInfo = util._getContentBlockInfo(gr, contentBlockId);\n                var title = contentBlockInfo.title;\n                var subtitle = contentBlockInfo.subtitle;\n                var pageId = gr.getValue('document_id');\n                if (title) {\n                    currentSearchResult.title = title;\n                    currentSearchResult.subtitle = subtitle;\n                    if (pageId) {\n                        var grpage = new GlideRecord('sn_ace_page');\n                        if (grpage.get(pageId)) {\n                            var route_gr = new GlideRecord('sys_ux_app_route');\n                            if (route_gr.get(grpage.getValue('route'))) {\n                                gs.info('route: ' + route_gr.getValue('route_type'));\n                                currentSearchResult.children[0].props_details.link = getURL(route_gr.getValue('route_type'));\n                            }\n                        }\n                    }\n                    searchResults.push(currentSearchResult);\n                }\n            }\n        });\n        return searchResults;\n    } catch (e) {\n        return searchResults;\n    }\n\n    function getSearchBlockTemplate() {\n        var searchCardTemplate = {\n            \"block_id\": \"ed61d603eb714110da1861c59c52284e\",\n            \"name\": \"Search Card\",\n            \"title\": \"\",\n            \"subtitle\": \"\",\n            \"order\": null,\n            \"type\": {\n                \"group\": \"element\",\n                \"name\": \"Simple card with button\",\n                \"id\": \"115fe59ceb38011090fa99602a5228b5\",\n                \"route\": \"simple_card_with_button\",\n                \"props\": [{\n                    \"element\": \"footer_text\",\n                    \"type\": \"string\"\n                }]\n            },\n            \"children\": [{\n                \"block_id\": \"78b11e03eb714110da1861c59c5228a5\",\n                \"name\": \"Search view button\",\n                \"title\": \"view\",\n                \"subtitle\": \"view123\",\n                \"order\": null,\n                \"type\": {\n                    \"group\": \"action\",\n                    \"name\": \"Button\",\n                    \"id\": \"02c8c279c3e401104b8e88c7c840dde2\",\n                    \"route\": \"button\",\n                    \"props\": [{\n                            \"element\": \"action_type\",\n                            \"type\": \"string\"\n                        },\n                        {\n                            \"element\": \"link\",\n                            \"type\": \"url\"\n                        },\n                        {\n                            \"element\": \"event_name\",\n                            \"type\": \"string\"\n                        }\n                    ]\n                },\n                \"children\": [],\n                \"props_details\": {\n                    \"action_type\": \"link\",\n                    \"link\": \"\",\n                    \"event_name\": \"\"\n                },\n                \"pageParams\": {}\n            }],\n            \"props_details\": {\n                \"footer_text\": \"\"\n            },\n            \"pageParams\": {}\n        };\n        return searchCardTemplate;\n    }\n\n    function getURL(route) {\n        var gr = new GlideRecord('sn_ace_app_config');\n        var url = '';\n        if (gr.get(input.application_id)) {\n            url = '/now/' + util.getURLPath(gr.getValue('app_config')) + '/' + route + '/';\n        }\n        return url;\n    }\n}","acl_failure_result":"","props":"[{\r\n\"name\": \"block_id\",\r\n\"label\": \"Block Id\",\r\n\"description\": \"ACE Application Id\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"json\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n},\r\n{\r\n      \"name\": \"application_id\",\r\n      \"label\": \"Application Id\",\r\n      \"description\": \"ACE Application Id\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_0d3083166b710110da18ec188e44afdc","api_name":"sn_ace.ACE Static Search Results","mutates_server_data":"false","name":"ACE Static Search Results","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Shift ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift id for fetching shift details\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Shift details data","sys_updated_on":"2023-12-12 11:38:45","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0d56005deb693110249e8d835d522889","sys_updated_by":"admin","sys_created_on":"2023-09-26 19:31:10","sys_name":"Get Shift Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"220","sys_tags":"","script":"function transform(input) {\n\tvar result =  new sn_uib_on_call.ShiftDetailsUtils().getShiftData(input.shift_id, 'shiftDrilldown');\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"shift_id\",\r\n    \"label\": \"Shift ID\",\r\n    \"description\": \"Shift id for fetching shift details\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_0d56005deb693110249e8d835d522889","api_name":"sn_uib_on_call.Get Shift Details","mutates_server_data":"false","name":"Get Shift Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"CI Class\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Cloud Provider\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected CI class\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected Cloud provider\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected Tab Index\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected Tab index\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Type\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This is used to get the data needed for representing cloud and non-cloud assets","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0d965d2453771110b87eddeeff7b12ab","sys_updated_by":"maint","sys_created_on":"2022-12-12 21:45:55","sys_name":"Get Cloud and Non-Cloud Assets data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"31","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.CMDBWsInsightUtil();\n\tvar result = {\n\t\terrors: [],\n\t\tlistRefresh: {}\n\t};\n\t\n\tvar ciClass = input.ci_class;\n\tvar type = input.type;\n\tvar cloudProvider = input.cloud_provider;\n\tvar selectedTabIndex = input.selected_tab_index;\n\t\n\tvar dataCenterClass = \"\";\n\tvar encodedQuery = \"\";\n\t\n\tencodedQuery = util.COLS.CI_CLASS + \"=\" + ciClass;\n\tif (!ciClass) {\n\t\tresult.errors.push(\"Input parameter - CI Class is missing\");\n\t} else if (!util.isValidRecord(util.TABLES.SN_CMDB_WS_QUERY_CATEGORY, encodedQuery)) {\n\t\tresult.errors.push(\"Invalid input parameter - CI Class\");\n\t}\n\t\n\tif (selectedTabIndex == 0) {\n\t\tencodedQuery = util.COLS.NAME + \"=\" + util.TABLES.SN_CMDB_WS_DATACENTER_TYPE + \"^\" + util.COLS.ELEMENT + \"=\" + util.COLS.TYPE + \"^\" + util.COLS.VALUE + \"=\" +type;\n\t\tif (!type) {\n\t\t\tresult.errors.push(\"Input parameter - Type is missing\");\n\t\t} else if (!util.isValidRecord(util.TABLES.SYS_CHOICE, encodedQuery)) {\n\t\t\tresult.errors.push(\"Invalid input parameter - Type\");\n\t\t}\n\t} else if (selectedTabIndex == 1) {\n\t\tencodedQuery = util.COLS.CLOUD_PROVIDER + \"=\" +cloudProvider;\n\t\tif (!cloudProvider) {\n\t\t\tresult.errors.push(\"Input parameter - Cloud Provider is missing\");\n\t\t} else if (cloudProvider !== util.NONCLOUD_AS_PROVIDER && !util.isValidRecord(util.TABLES.SN_CMDB_WS_DATACENTER_TYPE, encodedQuery)) {\n\t\t\tresult.errors.push(\"Invalid input parameter - Cloud provider\");\n\t\t}\n\t}\n\t\n\t// Get the count of CI categories\n\tresult.ci_classes = util.getCIClasses();\n\tresult.ci_classes_count = util.getCIClasses().length;\n\t\n\t// List information shouldn't be returned if there are errors.\n\tif (result.errors.length == 0) {\n\t\tif (cloudProvider) {\n\t\t\t// Setting type to \"non_cloud\" by default for \"Non-cloud\" cloud provider case, as the corresponding record doesn't exist in datacenter type table.\n\t\t\ttype = util.DATACENTER_TYPE.NONCLOUD;\n\t\t\tvar grDataCenterType = util.getDataCenterTypeOfCloudProvider(cloudProvider);\n\t\t\tif (grDataCenterType.next()) {\n\t\t\t\ttype = grDataCenterType.getValue(util.COLS.TYPE);\n\t\t\t\tdataCenterClass = grDataCenterType.getValue(util.COLS.DATACENTER_CLASS);\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar gr = new GlideRecord(util.TABLES.SN_CMDB_WS_QUERY_CATEGORY);\n\t\tgr.addQuery(util.COLS.CI_CLASS, ciClass);\n\t\tgr.addQuery(util.COLS.TYPE, type);\n\t\tgr.query();\n\n\t\tif (gr.next()) {\n\t\t\tvar savedQueryId = gr.getValue(\"query\");\n\t\t\tvar typeLabel = gr.getDisplayValue(util.COLS.TYPE);\n\t\t\tvar latestExecutionDataObj = util.getQueryLatestExecutionData(savedQueryId);\n\n\t\t\tif (latestExecutionDataObj.status === util.QB_STATUS.COMPLETE) {\n\t\t\t\tresult.listTable = latestExecutionDataObj.result_table;\n\t\t\t\tresult.listFixedFilter = \"query=\" + latestExecutionDataObj.executionId;\n\n\t\t\t\tif (cloudProvider) {\n\t\t\t\t\tif (dataCenterClass) {\n\t\t\t\t\t\tvar baseFilter = \"query=\" + latestExecutionDataObj.executionId;\n\t\t\t\t\t\t//needs a different field for cloud service account, since its query doesn't have a logical datacenter\n\t\t\t\t\t\tvar dcField = (gr.getUniqueValue() === util.CLOUD_SERVICE_ACC_CATEGORY)\n\t\t\t\t\t\t\t? util.CLOUD_SERVICE_ACC_DC_TYPE_FIELD\n\t\t\t\t\t\t\t: util.DC_CLASS_FIELD;\n\t\t\t\t\t\tresult.listFixedFilter = baseFilter + \"^\" + dcField + \"=\" + dataCenterClass;\n\t\t\t\t\t}\n\t\t\t\t\tresult.listTitle = gs.getMessage(\"{0} - {1}\", [ciClass, cloudProvider]);\n\n\t\t\t\t} else { \n\t\t\t\t\tresult.listTitle = gs.getMessage(\"{0} - {1}\", [ciClass, typeLabel]);\n\t\t\t\t}\n\t\t\t\tresult.listRefresh.timestamp = new GlideDateTime().getNumericValue();\n\t\t\t} else {\n\t\t\t\tresult.errors.push(\"Latest execution did not complete successfully\");\n\t\t\t}\n\t\t} else {\n\t\t\tresult.errors.push(\"Error while getting results table information\");\n\t\t}\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"ci_class\",\r\n  \"label\": \"CI Class\",\r\n  \"description\": \"Selected CI class\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false\r\n}, {\r\n  \"name\": \"type\",\r\n  \"label\": \"Type\",\r\n  \"description\": \"Selected type\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false\r\n}, {\r\n  \"name\": \"cloud_provider\",\r\n  \"label\": \"Cloud Provider\",\r\n  \"description\": \"Selected Cloud provider\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false\r\n}, {\r\n  \"name\": \"selected_tab_index\",\r\n  \"label\": \"Selected Tab Index\",\r\n  \"description\": \"Selected Tab index\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"number\",\r\n  \"mandatory\": false\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_0d965d2453771110b87eddeeff7b12ab","api_name":"sn_cmdb_ws.Get Cloud and Non-Cloud Assets data","mutates_server_data":"false","name":"Get Cloud and Non-Cloud Assets data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Current task sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetch the latest state of smart detection","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0dc5c7c8b786011094bb21208e11a9cb","sys_updated_by":"admin","sys_created_on":"2022-02-28 20:12:42","sys_name":"Get smart detection state","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    var taskId = input.taskId;\n\t\n\tvar smartDetectionUtil = new sn_cmdb_ws.CMDBAttestationSmartDetectionUtil();\n\treturn smartDetectionUtil.getTaskState(taskId);\n}","acl_failure_result":"","props":"[{\r\n \"name\": \"taskId\",\r\n  \"label\": \"Current task sysId\",\r\n  \"description\": \"Current task sysId\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_0dc5c7c8b786011094bb21208e11a9cb","api_name":"sn_cmdb_ws.Get smart detection state","mutates_server_data":"false","name":"Get smart detection state","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"SysID of Verification\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Verification ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-14 07:02:09","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0dd5c896533502101c02ddeeff7b12be","sys_updated_by":"admin","sys_created_on":"2024-04-28 04:30:09","sys_name":"Get initial Security Question Verification data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    return new PwdResetCommonUXFVerificationProcessor().getSecurityQuestionVerificationDetails(input.token, input.verificationId);\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"token\",\r\n        \"label\": \"Token\",\r\n        \"description\": \"Token\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"verificationId\",\r\n        \"label\": \"Verification ID\",\r\n        \"description\": \"SysID of Verification\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_0dd5c896533502101c02ddeeff7b12be","api_name":"sn_uib_pwd_reset.Get initial Security Question Verification data","mutates_server_data":"false","name":"Get initial Security Question Verification data","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Native translation\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update Native Translation Property","sys_updated_on":"2024-09-18 06:21:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0dfbce0c9f7412106e922e5af90a1c95","sys_updated_by":"admin","sys_created_on":"2024-09-17 17:37:23","sys_name":"Update Native Translation Property","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    var value = input.enableNativeTranslation;\n\n    try {\n        var nativeTranslationUtil = new sn_generative_ai.GenAINativeTranslationUtil();\n        nativeTranslationUtil.updateNativeTranslationProperty(value);\n        return true;\n    } catch (error) {\n        gs.error(\"Failed to update native translation\" + error.toString());\n        return false;\n    }\n\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"enableNativeTranslation\",\n        \"label\": \"Native translation\",\n        \"description\": \"Native translation\",\n        \"readOnly\": false,\n        \"fieldType\": \"boolean\",\n        \"mandatory\": true,\n        \"defaultValue\": false\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_0dfbce0c9f7412106e922e5af90a1c95","api_name":"sn_nowassist_admin.Update Native Translation Property","mutates_server_data":"true","name":"Update Native Translation Property","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Task Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-25 18:46:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0e2ed7ee730031103f3cc3ed8ff6a711","sys_updated_by":"admin","sys_created_on":"2023-07-18 18:51:57","sys_name":"De-Duplication Template Remediate Task","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar templateId = input.templateSysId;\n\tvar taskId = input.taskId;\n\n\tresult = sn_cmdb.DuplicateTemplate.remediateTask(templateId, taskId);\n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n   {\r\n      \"name\": \"taskId\",\r\n      \"label\": \"Task Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_0e2ed7ee730031103f3cc3ed8ff6a711","api_name":"sn_cmdb_ws.De-Duplication Template Remediate Task","mutates_server_data":"true","name":"De-Duplication Template Remediate Task","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Evam Data Resource Output\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Post Procesing Configuration\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The configuration for how to process the record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The output  of the EVAM data resource\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Process the announcments evam data source to create the correct evam setup","sys_updated_on":"2023-09-24 13:13:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0eaf28eec3423010965e070e9140dd6b","sys_updated_by":"admin","sys_created_on":"2021-08-21 07:38:01","sys_name":"SOW - Announcements EVAM Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","sys_mod_count":"50","sys_tags":"","script":"function transform(inputs) {\n    var evamData = inputs.evamOutput;\n    var config = inputs.configuration;\n    return sn_sow.SOWEvamPostProcessor.process(evamData, config);\n}","acl_failure_result":"","props":"[{\r\n    \"name\": \"configuration\",\r\n    \"label\": \"Post Procesing Configuration\",\r\n    \"description\": \"The configuration for how to process the record\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"json\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }, {\r\n    \"name\": \"evamOutput\",\r\n    \"label\": \"Evam Data Resource Output\",\r\n    \"description\": \"The output  of the EVAM data resource\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sys_ux_data_broker_transform_0eaf28eec3423010965e070e9140dd6b","api_name":"sn_sow.SOW - Announcements EVAM Transform","mutates_server_data":"false","name":"SOW - Announcements EVAM Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Delete Coverage Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-09 07:02:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0edd6376a3de7510bd3bd63f26fcdaf9","sys_updated_by":"admin","sys_created_on":"2023-11-08 11:01:51","sys_name":"Delete coverage","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n    const deleteCoverageData = input.deleteCoverageData;\n    var output =  new global.OnCallCommon().deleteCoverage(deleteCoverageData.table, deleteCoverageData.sysId);\n\treturn output;\n}","acl_failure_result":"","props":"[{\r\n    \"name\": \"deleteCoverageData\",\r\n    \"label\": \"Delete Coverage Data\",\r\n    \"description\": \"Delete Coverage Data\",\r\n    \"fieldType\": \"json\",\r\n    \"valueType\": \"object\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_0edd6376a3de7510bd3bd63f26fcdaf9","api_name":"sn_uib_on_call.Delete coverage","mutates_server_data":"false","name":"Delete coverage","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Bot Name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-05-22 23:53:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0f0e7edcc307a110bf30c265cb40dd82","sys_updated_by":"admin","sys_created_on":"2023-05-22 23:53:33","sys_name":"fetchLineBotDetails","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input){\n\tvar botName = input.line_bot_name;\n\treturn new sn_va_line.VALineMessengerCustomBotInstall().getBotInfo(botName);\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"line_bot_name\",\r\n      \"label\": \"Bot Name\",\r\n      \"description\": \"Bot Name\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_0f0e7edcc307a110bf30c265cb40dd82","api_name":"sn_oe_sfs.fetchLineBotDetails","mutates_server_data":"false","name":"fetchLineBotDetails","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Change Model\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Change State\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-08-12 12:57:41","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0f1e63d377305110403eaeb4bb5a9981","sys_updated_by":"admin","sys_created_on":"2022-07-25 18:21:52","sys_name":"Change Model States","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_created_by":"admin","sys_mod_count":"14","sys_tags":"","script":"function transform(input) {\n\tif (!input.changeState)\n\t\treturn [];\n\n\t\n\tvar currentStates = [];\n\tvar order = 0;\n\tif (input.changeModel) {\n\t\tvar chg_model = new GlideRecordSecure('chg_model');\n\t\tif (chg_model.get(input.changeModel)) {\n\t\t\tvar modelStates = new global.ChangeModel(chg_model).getStates();\n\t\t\twhile(modelStates.next()) {\n\t\t\t\tvar modelChoice = {\n\t\t\t\t\t\"value\": modelStates.getValue(\"state_value\"),\n\t\t\t\t\t\"label\": modelStates.getDisplayValue(\"state_label\"),\n\t\t\t\t\t\"order\": order++\n\t\t\t\t};\n\t\t\t\tcurrentStates.push(modelChoice);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tvar blankModel = {\n\t\t\ttable_name: \"change_request\",\n\t\t\tstate_field: \"state\",\n\t\t\tgetValue: function(name) { return this[name];}\n\t\t};\n\t\tvar choiceGr = new global.STTRMStateChoiceUtil(blankModel)._getSysChoices();\n\t\twhile (choiceGr.next()) {\n\t\t\tif (choiceGr.getValue(\"inactive\") === \"1\")\n\t\t\t\tcontinue;\n\n\t\t\tvar chgChoice = {\n\t\t\t\t\"value\": choiceGr.getValue('value'),\n\t\t\t\t\"label\": choiceGr.getValue('label'),\n\t\t\t\t\"order\": order++\n\t\t\t};\n\t\t\tcurrentStates.push(chgChoice);\n\t\t}\n\t}\n\n\tvar stepperData = {};\n\tvar beforeState = true;\n\tstepperData.steps = [];\n\tfor (var i = 0; i < currentStates.length; i++) {\n\t\tvar step = {};\n\t\tstep.id = 'step' + (i+1);\n\t\tstep.label = currentStates[i].label;\n\t\tif (input.changeState + '' === currentStates[i].value + '') {\n\t\t\tstep.progress = 'partial';\n\t\t\tstepperData.selected = step.id;\n\t\t\tbeforeState = false;\n\t\t} else {\n\t\t\tif (beforeState)\n\t\t\t\tstep.progress = 'done';\n\t\t\telse\n\t\t\t\tstep.progress = 'none';\n\t\t}\n\n\t\tstepperData.steps.push(step);\n\t}\n\treturn stepperData;\n\n}","acl_failure_result":"","props":"[\n{\n  \"name\": \"changeModel\",\n  \"label\": \"Change Model\",\n  \"description\": \"Change Model\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n},\n{\n  \"name\": \"changeState\",\n  \"label\": \"Change State\",\n  \"description\": \"Change State\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_update_name":"sys_ux_data_broker_transform_0f1e63d377305110403eaeb4bb5a9981","api_name":"sn_sow_chg.Change Model States","mutates_server_data":"false","name":"Change Model States","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Apps Info\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"apps information\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-28 07:33:48","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0f4b7fba43bc421016817a372ab8f22f","sys_updated_by":"admin","sys_created_on":"2024-03-11 18:41:47","sys_name":" Check for installation/licensing","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_created_by":"admin","sys_mod_count":"38","sys_tags":"","script":"function transform(input) {\n    var response = {};\n    for (var i = 0; i < input.appsInfo.length; i++) {\n        response[input.appsInfo[i].appId] = {};\n        response[input.appsInfo[i].appId]['licensingStatus'] = true;\n        response[input.appsInfo[i].appId]['installationStatus'] = false;\n        if (input.appsInfo[i].installationCheck)\n            response[input.appsInfo[i].appId]['installationStatus'] = GlidePluginManager.isActive(input.appsInfo[i].appId);\n        else if (input.appsInfo[i].licenseCheck) {\n            try {\n                if (GlidePluginManager.isActive('com.sn_licensing_engine'))\n                    response[input.appsInfo[i].appId]['licensingStatus'] = new sn_entitlement.GlideEntitlementAPI().hasLicenseForArtifact(\"app_id\", input.appsInfo[i].appId);\n            } catch (e) {\n                gs.addErrorMessage(gs.getMessage('The required entitlement is not available'));\n            }\n        }\n    }\n    return response;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"appsInfo\",\r\n    \"label\": \"Apps Info\",\r\n    \"description\": \"apps information\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": []\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_update_name":"sys_ux_data_broker_transform_0f4b7fba43bc421016817a372ab8f22f","api_name":"sn_sd. Check for installation/licensing","mutates_server_data":"false","name":" Check for installation/licensing","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[{\"message\":\"Plugins\",\"comment\":\"\"}]","batch_exclude":"false","description":"","sys_updated_on":"2021-02-05 22:28:47","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0f5459db40422010f8774d1a29c70a10","sys_updated_by":"maint","sys_created_on":"2021-02-05 21:55:31","sys_name":"Enabled plugins","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/ead9fb5f8b27a051aa71b35163745b82","value":"ead9fb5f8b27a051aa71b35163745b82"},"sys_created_by":"maint","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    \treturn JSON.parse(input.plugins).map(function(plugin) {  \n    \t\treturn {  \n    \t\t\tid: plugin, \n    \t\t\tactive: GlidePluginManager.isActive(plugin)\n    \t\t};\n    \t});\n    }","acl_failure_result":"","props":"[ \n    {\n            \"name\": \"plugins\",\n            \"label\": \"Plugins\",\n            \"description\": \"Plugins\",\n            \"readOnly\": false,\n            \"fieldType\": \"array\",\n            \"mandatory\": false,\n            \"defaultValue\": \"[]\"\n        }\n    ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ead9fb5f8b27a051aa71b35163745b82","value":"ead9fb5f8b27a051aa71b35163745b82"},"sys_update_name":"sys_ux_data_broker_transform_0f5459db40422010f8774d1a29c70a10","api_name":"polaris_app_shell.Enabled plugins","mutates_server_data":"false","name":"Enabled plugins","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Actual stockroom\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Current Stockroom\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"substatus\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-07-27 15:22:53","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"0fcfd809732530102d1d2f163cf6a718","sys_updated_by":"admin","sys_created_on":"2021-07-22 17:58:56","sys_name":"Cancel from Consumable","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n    var updatedStockroom = input.currentStockroom;\n\tvar actualStockroom = input.actualStockroom;\n\tvar shouldUpdateStockroom = updatedStockroom === actualStockroom? actualStockroom: '';\n\tvar status = 6;\n\tvar substatus = input.substatus;\n\tvar consumable = input.sysId;\n\tnew global.Consumables().cancelFromDisposal(consumable, status, substatus, updatedStockroom, shouldUpdateStockroom);\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"currentStockroom\",\r\n  \"label\": \"Current Stockroom\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false\r\n},\r\n{\r\n  \"name\": \"actualStockroom\",\r\n  \"label\": \"Actual stockroom\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"substatus\",\r\n  \"label\": \"substatus\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"sysId\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_0fcfd809732530102d1d2f163cf6a718","api_name":"sn_itam_workspace.Cancel from Consumable","mutates_server_data":"true","name":"Cancel from Consumable","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Product Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-25 07:51:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"108519179f441210afb85c1eca0a1c87","sys_updated_by":"admin","sys_created_on":"2024-08-21 09:18:08","sys_name":"Get Detection Impact","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"29","sys_tags":"","script":"function transform(input) {\n    try {\n        var grUtil = new sn_nowassist_admin.NowAssistAdminGuardrails();\n        var naaUtil = new sn_nowassist_admin.NowAdminAssistUtil();\n        var metaUtil = new sn_nowassist_admin.NowAdminAssistMetadata();\n        var skills = naaUtil.getSkillsOfProduct(input?.productId);\n        return grUtil.getDetectionImpact(skills, metaUtil.NOW_ASSIST_GUARDIAN?.OFFENSIVENESS_TYPE);\n    } catch (error) {\n        gs.error(\"Error in getting detection Impact transform: \" + error.toString());\n    }\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"productId\",\r\n        \"label\": \"Product Id\",\r\n        \"description\": \"Product Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_108519179f441210afb85c1eca0a1c87","api_name":"sn_nowassist_admin.Get Detection Impact","mutates_server_data":"false","name":"Get Detection Impact","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Calling Function Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Input Args\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Input args for backend java function\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Scriptable Class Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Scriptable class name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Scriptable function name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to call backend functions for Hermes plugin","sys_updated_on":"2024-02-22 13:31:18","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"10a6a90943e00210026cbbd32fb8f244","sys_updated_by":"admin","sys_created_on":"2024-02-22 11:02:03","sys_name":"Hermes Java backend Scriptable Get","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n    var resultFromServer = \"\";\n\tvar results = {\n        returnValue: \"\",\n        errors: []\n    };\n    try {\n        resultFromServer = new sn_hermes[input.scriptableClassName]()[input.methodName](JSON.stringify(input.args));\n    } catch (ex) {\n        results.errors.push(ex);\n    }\n    results.returnValue = resultFromServer;\n    return results;\n}","acl_failure_result":"[\r\n\"ACL is missing\"\r\n]","props":"[\r\n    {\r\n        \"name\": \"scriptableClassName\",\r\n        \"label\": \"Scriptable Class Name\",\r\n        \"description\": \"Scriptable class name\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"methodName\",\r\n        \"label\": \"Calling Function Name\",\r\n        \"description\": \"Scriptable function name\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"args\",\r\n        \"label\": \"Input Args\",\r\n        \"description\": \"Input args for backend java function\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"json\",\r\n        \"valueType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/03d4abbf04312210559073c06a02f7f9","value":"03d4abbf04312210559073c06a02f7f9"},"sys_update_name":"sys_ux_data_broker_transform_10a6a90943e00210026cbbd32fb8f244","api_name":"global.Hermes Java backend Scriptable Get","mutates_server_data":"false","name":"Hermes Java backend Scriptable Get","output_schema":"{\r\n\"returnValue\": {},\r\n\"errors\": []\r\n}","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"MS get application attributes","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1118900a7779111023651605bc5a991c","sys_updated_by":"admin","sys_created_on":"2022-09-08 22:37:09","sys_name":"MS get application services","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tvar results = util.getAndTransformApplicationServices();\n\t\n\treturn results;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_1118900a7779111023651605bc5a991c","api_name":"sn_cmdb_ws.MS get application services","mutates_server_data":"false","name":"MS get application services","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Timestamp\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get Application Services Tab Details","sys_updated_on":"2024-06-28 14:51:52","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"11728ba443c321106d8a8ef0dab8f297","sys_updated_by":"admin","sys_created_on":"2023-05-23 18:40:51","sys_name":"Get Application Services Categories","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\tvar insight = new sn_cmdb_ws.CMDBWsInsightUtil();\n\tvar tabDetails = insight.getAppSvcTabs();\n\t\n\treturn tabDetails;\n}","acl_failure_result":"","props":"[\n\t{\n\t  \"name\": \"ts\",\n\t  \"label\": \"Timestamp\",\n\t  \"description\": \"\",\n\t  \"readOnly\": false,\n\t  \"fieldType\": \"string\",\n\t  \"mandatory\": false,\n\t  \"defaultValue\": \"\"\n\t}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_11728ba443c321106d8a8ef0dab8f297","api_name":"sn_cmdb_ws.Get Application Services Categories","mutates_server_data":"false","name":"Get Application Services Categories","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get benchmark configuration","sys_updated_on":"2024-02-06 09:01:41","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"119ed79c938c021066b7f68333891833","sys_updated_by":"admin","sys_created_on":"2024-01-26 15:24:06","sys_name":"Get benchmark config","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    var gr = new GlideRecord('sn_bm_client_configuration');\n    gr.addQuery('name', 'opt_in_status');\n    gr.query();\n    var opt_in;\n    if (gr.next()) {\n        opt_in = (gr.value == \"true\");\n    }\n    return opt_in;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_update_name":"sys_ux_data_broker_transform_119ed79c938c021066b7f68333891833","api_name":"sn_sd.Get benchmark config","mutates_server_data":"false","name":"Get benchmark config","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Returns active conferences","sys_updated_on":"2024-03-22 08:06:09","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"11a4583943a63110b71d8772d9b8f231","sys_updated_by":"admin","sys_created_on":"2023-11-17 03:04:01","sys_name":"Get active conferences","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n    var tcm = {};\n    var notify = {};\n    var telephoneProviderType = '';\n\t\n    var filterCriteria = \"recordClass=\"+input.table+\"&orderBy=order\";\n    if (GlidePluginManager.isActive(\"com.snc.task_communication_management\")) {\n        var taskSysId = input.sysId;\n        var commTaskHandler = new sn_comm_management.CommunicationManagementBridgeSNC().getHandlerInstance(\"incident\");\n        tcm = commTaskHandler.getCommunicationDetails(taskSysId, filterCriteria);\n    }\n\n    if (GlidePluginManager.isActive(\"com.snc.notify\")) {\n        var confUtils = new sn_uib_notify.NotifyUXFConferenceUtil();\n        notify = confUtils.getAllConferenceCardsData(input.sysId);\n        telephoneProviderType = confUtils.TELEPHONY_PROVIDER;\n    }\n\n    var result = {\n        \"tcm\": tcm,\n        \"notify\": notify,\n        \"telephoneProviderType\" : telephoneProviderType\n    };\n\treturn result;\n}\n","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_11a4583943a63110b71d8772d9b8f231","api_name":"sn_sow_itsm_common.Get active conferences","mutates_server_data":"false","name":"Get active conferences","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"All Day\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Description for timeOff\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"End Date Time\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"End time of timeOff\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Etart time of timeOff\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Group Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Member's group id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Member's sys id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Notes\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"One full day timeOff\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Proposed Cover\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Start Date Time\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Time zone\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"TimeZone\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"coverage member sys id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-14 11:34:19","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1201032eebff6110b5673d9f7f5228fa","sys_updated_by":"admin","sys_created_on":"2023-07-06 06:32:12","sys_name":"Add TimeOff","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n    if (input.user_id) {\n        return new OCTimeOffUtil().create(input);\n    }\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t\t\"name\": \"start_date_time\",\r\n\t\t\"label\": \"Start Date Time\",\r\n\t\t\"description\": \"Etart time of timeOff\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": false,\r\n\t\t\"defaultValue\": \"\"\r\n\t},\r\n\t{\r\n\t\t\"name\": \"end_date_time\",\r\n\t\t\"label\": \"End Date Time\",\r\n\t\t\"description\": \"End time of timeOff\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": false,\r\n\t\t\"defaultValue\": \"\"\r\n\t},\r\n       {\r\n\t\t\"name\": \"group_id\",\r\n\t\t\"label\": \"Group Id\",\r\n\t\t\"description\": \"Member's group id\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": false,\r\n\t\t\"defaultValue\": \"\"\r\n\t},\r\n\t{\r\n\t\t\"name\": \"user_id\",\r\n\t\t\"label\": \"User Id\",\r\n\t\t\"description\": \"Member's sys id\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": false,\r\n\t\t\"defaultValue\": \"\"\r\n\t},\r\n        {\r\n\t\t\"name\": \"notes\",\r\n\t\t\"label\": \"Notes\",\r\n\t\t\"description\": \"Description for timeOff\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": false,\r\n\t\t\"defaultValue\": \"\"\r\n\t},\r\n        {\r\n\t\t\"name\": \"proposed_cover\",\r\n\t\t\"label\": \"Proposed Cover\",\r\n\t\t\"description\": \"coverage member sys id\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": false,\r\n\t\t\"defaultValue\": \"\"\r\n\t},\r\n        {\r\n                \"name\": \"timeZone\",\r\n                \"label\": \"TimeZone\",\r\n                \"description\": \"Time zone\",\r\n                \"readOnly\": false,\r\n                \"fieldType\": \"string\",\r\n                \"mandatory\": false,\r\n                \"defaultValue\": \"\"\r\n        },\r\n\t{\r\n\t\t\"name\": \"all_day\",\r\n\t\t\"label\": \"All Day\",\r\n\t\t\"description\": \"One full day timeOff\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"boolean\",\r\n\t\t\"mandatory\": false,\r\n\t\t\"defaultValue\": false\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_1201032eebff6110b5673d9f7f5228fa","api_name":"sn_uib_on_call.Add TimeOff","mutates_server_data":"false","name":"Add TimeOff","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"AIS Search DATA CONFIG ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Zing Search DATA CONFIG ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get search context config sysid based on the glide.ais.enabled property value. If true sysid returned would be for zing else it would be for AIS.","sys_updated_on":"2025-01-10 12:02:49","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1212c92ffff29210d4f8ffffffffffa5","sys_updated_by":"admin","sys_created_on":"2025-01-05 19:27:05","sys_name":"Get Search Context Config Id","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8a841f2bc42f457e8809ea71d35e821f","value":"8a841f2bc42f457e8809ea71d35e821f"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n  if (!input || !input.zingSearchContextId || !input.aisSearchContextId) return '';\n  var isAISEnabled = JSON.parse(gs.getProperty('glide.ais.enabled')) || false;\n  if(isAISEnabled)\n    return input.aisSearchContextId;\n  return input.zingSearchContextId;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"zingSearchContextId\",\r\n    \"label\": \"Zing Search DATA CONFIG ID\",\r\n    \"description\": \"\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"valueType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"aisSearchContextId\",\r\n    \"label\": \"AIS Search DATA CONFIG ID\",\r\n    \"description\": \"\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"valueType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8a841f2bc42f457e8809ea71d35e821f","value":"8a841f2bc42f457e8809ea71d35e821f"},"sys_update_name":"sys_ux_data_broker_transform_1212c92ffff29210d4f8ffffffffffa5","api_name":"sn_udc.Get Search Context Config Id","mutates_server_data":"false","name":"Get Search Context Config Id","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Multisource get technical services","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1248d00a7779111023651605bc5a990a","sys_updated_by":"admin","sys_created_on":"2022-09-08 22:38:03","sys_name":"MS get technical services","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tvar results = util.getAndTransformTechnicalServices();\n\t\n\treturn results;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_1248d00a7779111023651605bc5a990a","api_name":"sn_cmdb_ws.MS get technical services","mutates_server_data":"false","name":"MS get technical services","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Policy ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The policy ID for the given data manager policy\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The target table for the data manager policy\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This data broker returns the fields that can be selected as display and certification fields for a certification policy and currently selected certification/display fields","sys_updated_on":"2023-12-26 18:37:13","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"131498c2438331106d8a8ef0dab8f23f","sys_updated_by":"admin","sys_created_on":"2023-12-12 18:00:37","sys_name":"Get certification selected fields lists","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"26","sys_tags":"","script":"function transform(input) {\n    var wrapperFunction = function() {\n\t\tvar DICTIONARY = {\n\t\t\tTABLE : \"sys_dictionary\",\n\t\t\tTABLE_FIELD : \"name\", \n\t\t\tCOLUMN_NAME : \"element\",\n\t\t\tCOLUMN_LABEL : \"column_label\"\n\t\t};\n\n\n\n        var table = input.table;\n        var policyId = input.policyId;\n\n        var result = {};\n        var gr = new GlideRecord(\"sn_cmdb_ws_dm_certification_policy\");\n        gr.get(policyId);\n\n        var displayFields = gr.getValue(\"display_fields\");\n        var certificationFields = gr.getValue(\"certification_fields\");\n\n        var displayFieldsList = displayFields ? displayFields.split(\",\") : [];\n        var certificationFieldsList = certificationFields ? certificationFields.split(\",\") : [];\n\n        var displayFieldsObject = {};\n        var certificationFieldsObject = {};\n\n        for (var i = 0; i < displayFieldsList.length; i++) {\n            displayFieldsObject[displayFieldsList[i]] = true;\n        }\n\n        for (var i = 0; i < certificationFieldsList.length; i++) {\n            certificationFieldsObject[certificationFieldsList[i]] = true;\n        }\n\n        var displayFieldOptions = [];\n        var certificationFieldOptions = [];\n        var displayFieldSelections = [];\n        var certificationFieldSelections = [];\n\n        var tableGr = new GlideRecord(DICTIONARY.TABLE);\n        tableGr.addQuery(DICTIONARY.TABLE_FIELD, table);\n\t\ttableGr.orderBy(DICTIONARY.COLUMN_NAME);\n        tableGr.query();\n\n        while (tableGr.next()) {\n            var id = tableGr.getValue(DICTIONARY.COLUMN_NAME);\n            var label = tableGr.getValue(DICTIONARY.COLUMN_LABEL);\n\n            if (global.JSUtil.nil(id) || global.JSUtil.nil(label))\n                continue;\n\n            var displayField = {\n                \"id\": id,\n                \"label\": label\n            };\n            var certField = {\n                \"id\": id,\n                \"label\": label\n            };\n\n            if (!displayFieldsObject[id]) {\n                certField.disabled = false;\n                certificationFieldOptions.push(certField);\n            } else {\n                certField.disabled = true;\n                certificationFieldOptions.push(certField);\n            }\n\n            if (!certificationFieldsObject[id]) {\n                displayField.disabled = false;\n                displayFieldOptions.push(displayField);\n            } else {\n                displayField.disabled = true;\n                displayFieldOptions.push(displayField);\n            }\n        }\n\n\n        for (var i = 0; i < displayFieldsList.length; i++) {\n            var displayFieldGr = new GlideRecord(DICTIONARY.TABLE);\n            displayFieldGr.addQuery(DICTIONARY.TABLE_FIELD, table);\n            if (displayFieldsList[i].includes(\".\")) {\n                var temp = {};\n                temp.id = displayFieldsList[i];\n                temp.label = displayFieldsList[i].toUpperCase();\n                displayFieldSelections.push(temp);\n                displayFieldOptions.push(temp);\n            } else {\n                displayFieldGr.addQuery(DICTIONARY.COLUMN_NAME, displayFieldsList[i]);\n                displayFieldGr.query();\n\n                if (displayFieldGr.next()) {\n                    var temp = {};\n                    var id = displayFieldGr.getValue(DICTIONARY.COLUMN_NAME);\n                    var label = displayFieldGr.getValue(DICTIONARY.COLUMN_LABEL);\n                    temp.id = id;\n                    temp.label = label;\n                    displayFieldSelections.push(temp);\n                }\n            }\n        }\n\n        for (var i = 0; i < certificationFieldsList.length; i++) {\n            var certificationFieldGr = new GlideRecord(DICTIONARY.TABLE);\n            certificationFieldGr.addQuery(DICTIONARY.TABLE_FIELD, table);\n            if (certificationFieldsList[i].includes(\".\")) {\n                var temp = {};\n                temp.id = certificationFieldsList[i];\n                temp.label = certificationFieldsList[i].toUpperCase();\n                certificationFieldSelections.push(temp);\n                certificationFieldOptions.push(temp);\n            } else {\n                certificationFieldGr.addQuery(DICTIONARY.COLUMN_NAME, certificationFieldsList[i]);\n                certificationFieldGr.query();\n\n                if (certificationFieldGr.next()) {\n                    var temp = {};\n                    var id = certificationFieldGr.getValue(DICTIONARY.COLUMN_NAME);\n                    var label = certificationFieldGr.getValue(DICTIONARY.COLUMN_LABEL);\n                    temp.id = id;\n                    temp.label = label;\n                    certificationFieldSelections.push(temp);\n                }\n            }\n        }\n\n        result.displayFieldOptions = displayFieldOptions;\n        result.certificationFieldOptions = certificationFieldOptions;\n        result.displayFieldSelections = displayFieldSelections;\n        result.certificationFieldSelections = certificationFieldSelections;\n\n        return result;\n    };\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Get certification selected fields lists\", wrapperFunction);\n}","acl_failure_result":"","props":"[\r\n    {\r\n       \"name\": \"table\",\r\n       \"label\": \"Table\",\r\n       \"fieldType\": \"string\",\r\n       \"readOnly\": false,\r\n       \"mandatory\": true,\r\n       \"description\": \"The target table for the data manager policy\"\r\n    },\r\n    {\r\n        \"name\": \"policyId\",\r\n        \"label\": \"Policy ID\",\r\n        \"fieldType\": \"string\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": true,\r\n        \"description\": \"The policy ID for the given data manager policy\"\r\n     }\r\n ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_131498c2438331106d8a8ef0dab8f23f","api_name":"sn_cmdb_ws.Get certification selected fields lists","mutates_server_data":"true","name":"Get certification selected fields lists","output_schema":"{\r\n    \"result\":  {}\r\n}","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Check if components should be displayed for current user in the home page","sys_updated_on":"2024-03-29 17:42:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"134b94cb538d11108726ddeeff7b1292","sys_updated_by":"admin","sys_created_on":"2022-08-05 18:52:13","sys_name":"Check Home page components visibility","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.CMDBWorkspaceUtil();\n\tvar insightUtil = new sn_cmdb_ws.CMDBWsInsightUtil();\n\t\n\treturn {\n\t\tshowCIsManagedByMe: util.showCIsManagedByMe(),\n\t\tshowTotalCIs: util.showTotalCIs(),\n\t\tshowImportantActions: util.showImportantActions(),\n\t\tshowCloudNonCloudAsset: insightUtil.showCloudVsNonCloudAsset(),\n\t\tshowCloudVsNonCloudStatusContainer: insightUtil.showCloudVsNonCloudStatusContainer()\n\t};\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_134b94cb538d11108726ddeeff7b1292","api_name":"sn_cmdb_ws.Check Home page components visibility","mutates_server_data":"false","name":"Check Home page components visibility","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Filter query to be applied on the group table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of the subscription\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"filterQuery\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"subscriptionId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get groups relevant to a subscription in a format supported by list selector component","sys_updated_on":"2024-09-09 16:27:34","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"13dbfa65430a21101f6d73e60db8f2fb","sys_updated_by":"maint","sys_created_on":"2023-04-07 04:17:15","sys_name":"Get Relevant Groups to Subscription","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_created_by":"maint","sys_mod_count":"75","sys_tags":"","script":"/**\n * Data broker to get groups relevant to a subscription\n * @param {object} input - Gets subscriptionId and filter queries based on which filtering should be applied on results\n * @param {Object} groups - An object containing group information with unique keys.\n *\n * Type def of groups\n *\ttype ObjectWithGroups = {\n *\t\tgroups: Groups;\n *\t};\n *\n *\ttype Groups = {\n *\t\t[key: string]: Group;\n *\t};\n\n *\ttype Group = {\n *\t\tlabel: string;\n *\t};\n *\t\n *\t@example\n *\t  \"groups\": {\n *\t\t\"019ad92ec7230010393d265c95c260dd\": {\n *\t\t\"label\": \"Analytics Settings Managers SF\"\n *\t\t},\n *\t\t\"0270c251c3200200be647bfaa2d3aea6\": {\n *\t\t\"label\": \"Customer Service Support\"\n *\t\t},\n *\t\t\"0a52d3dcd7011200f2d224837e6103f2\": {\n *\t\t\"label\": \"Application Development\"\n *\t\t}\n *\t}\n */\nfunction transform(input) {\n\n    const grGroups = new GlideRecord('sn_sub_man_st_unallocated_group_recommendation');\n    let relevantGroups = {};\n    try {\n        grGroups.addQuery('subscription', input.subscriptionId);\n        if (!gs.nil(input.filterQuery)) {\n            grGroups.addEncodedQuery(input.filterQuery);\n        }\n        //sort by weight in descending order\n        grGroups.orderByDesc('weight');\n        grGroups.query();\n        while (grGroups.next()) {\n            const id = grGroups.group;\n            let groupObj = {};\n            const groupObjKey = \"label\";\n            const groupObjVal = grGroups.group.name.toString();\n            groupObj[groupObjKey] = groupObjVal;\n            relevantGroups[id] = groupObj;\n        }\n\n    } catch (err) {\n        const errMessage = 'Could not get relevant roles for subscription id: ' + input.subscriptionId;\n        gs.addErrorMessage(errMessage + ' with error ' + err.message);\n        return errMessage;\n    }\n    let returnObj = {};\n    const returnObjKey = \"groups\";\n    returnObj[returnObjKey] = relevantGroups;\n\n    return returnObj;\n\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\":\"subscriptionId\",\r\n      \"label\":\"subscriptionId\",\r\n      \"description\":\"Sys id of the subscription\",\r\n      \"fieldType\":\"string\",\r\n      \"mandatory\":true\r\n   },\r\n {\r\n      \"name\":\"filterQuery\",\r\n      \"label\":\"filterQuery\",\r\n      \"description\":\"Filter query to be applied on the group table\",\r\n      \"fieldType\":\"string\",\r\n      \"mandatory\":false\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_update_name":"sys_ux_data_broker_transform_13dbfa65430a21101f6d73e60db8f2fb","api_name":"sn_sub_man.Get Relevant Groups to Subscription","mutates_server_data":"false","name":"Get Relevant Groups to Subscription","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Access analyzer base user result object\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Access analyzer model user result object\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Object containing all data with request and response\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"save compare access request along with debug logs","sys_updated_on":"2023-10-31 09:25:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1455be155350311031f4ddeeff7b122a","sys_updated_by":"admin","sys_created_on":"2023-07-27 05:29:46","sys_name":"Save compare access request and debug logs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    populateLastRunInRequest(input);\n    var baseUserRequestId = saveResult(input.baseUserResult);\n    var modelUserRequestId = saveResult(input.modelUserResult);\n    saveAccessComparisonRequest(baseUserRequestId, modelUserRequestId);\n    return {\n        \"baseUserRequestId\": baseUserRequestId,\n        \"modelUserRequestId\": modelUserRequestId\n    };\n\n    function saveResult(result) {\n        var aaUtil = new sn_access_analyzer.AccessAnalyzerUtil();\n        var requestGR = aaUtil.saveRequest(result.request);\n        var entityName = new sn_access_analyzer.AccessAnalyzeExecutor().getEntityName(requestGR);\n        requestGR.setValue(\"analyzed_by\", requestGR.analyze_by + \": \" + entityName);\n        requestGR.update();\n        aaUtil.saveResult(result.debugLogAPIResponse, requestGR);\n        return requestGR.getUniqueValue();\n    }\n\n    function saveAccessComparisonRequest(baseUserRequestId, modelUserRequestId) {\n        var accessComparisonRequestGr = new GlideRecord(\"sn_access_analyzer_access_comparison_request\");\n        accessComparisonRequestGr.initialize();\n        accessComparisonRequestGr.setValue(\"user_1_request\", baseUserRequestId);\n        accessComparisonRequestGr.setValue(\"user_2_request\", modelUserRequestId);\n        accessComparisonRequestGr.insert();\n    }\n\n    function populateLastRunInRequest(input) {\n        var date = new GlideDateTime();\n        input.baseUserResult.request.last_run = date;\n        input.modelUserResult.request.last_run = date;\n    }\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"baseUserResult\",\r\n    \"label\": \"Access analyzer base user result object\",\r\n    \"description\": \"Object containing all data with request and response\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": true\r\n  },\r\n{\r\n    \"name\": \"modelUserResult\",\r\n    \"label\": \"Access analyzer model user result object\",\r\n    \"description\": \"Object containing all data with request and response\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": true\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_update_name":"sys_ux_data_broker_transform_1455be155350311031f4ddeeff7b122a","api_name":"sn_access_analyzer.Save compare access request and debug logs","mutates_server_data":"true","name":"Save compare access request and debug logs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Check\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Check Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table Name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"VSC Execute Test Check Scan","sys_updated_on":"2022-08-18 17:09:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"14764c4b58951110f87739b011b4a1a0","sys_updated_by":"maint","sys_created_on":"2022-08-18 03:23:23","sys_name":"VSC Execute Test Check Scan","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\t// Run scan for suite and return progress Id\n\tvar scan = new sn_instance_scan.ScanInstance();\n\treturn scan.triggerTestScan(input.check, input.table);\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"check\",\n    \"label\": \"Check\",\n    \"description\": \"Check Id\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n},\n{\n    \"name\": \"table\",\n    \"label\": \"Table\",\n    \"description\": \"Table Name\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_14764c4b58951110f87739b011b4a1a0","api_name":"sn_vsc.VSC Execute Test Check Scan","mutates_server_data":"false","name":"VSC Execute Test Check Scan","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Selected template Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Checks whether user has no access to the template\n\t\t","sys_updated_on":"2023-09-20 05:43:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"14b75a3073531010b30e2ee2c4f6a7db","sys_updated_by":"admin","sys_created_on":"2020-09-14 15:32:59","sys_name":"check for no access to the template","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/e92e72c9b7021010e54deb56ee11a9bf","value":"e92e72c9b7021010e54deb56ee11a9bf"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n\t\t\tvar output = new global.GlobalServiceCatalogUtil().canUseTemplate(input.templateId);\n\t\t\treturn !output;\n\t\t}","acl_failure_result":"","props":"[{\n\t\t\t\"name\": \"templateId\",\n\t\t\t\"label\": \"Selected template Id\",\n\t\t\t\"description\": \"\",\n\t\t\t\"readOnly\": false,\n\t\t\t\"fieldType\": \"string\",\n\t\t\t\"mandatory\":false,\n\t\t\t\"defaultValue\":\"\"\n\t\t\t}]\n\t\t","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e92e72c9b7021010e54deb56ee11a9bf","value":"e92e72c9b7021010e54deb56ee11a9bf"},"sys_update_name":"sys_ux_data_broker_transform_14b75a3073531010b30e2ee2c4f6a7db","api_name":"sn_catalog_builder.check for no access to the template","mutates_server_data":"false","name":"check for no access to the template","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n      \"message\" : \"sysId\",\n      \"comment\" : \"\"\n      }, {\n        \"message\" : \"table\",\n        \"comment\" : \"\"\n      } ]\n    ","batch_exclude":"false","description":"Fetch predicted record fields","sys_updated_on":"2024-07-25 04:12:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"14f96aa5ebde0a109c3cfd18cad0cd77","sys_updated_by":"admin","sys_created_on":"2024-05-21 05:05:05","sys_name":"Fetch Predicted record","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b49916aff4f50a107d41bb28e786c2f6","value":"b49916aff4f50a107d41bb28e786c2f6"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var sysId = input.sysId;\n    var table = input.table;\n    var state = '';\n    var description = '';\n    var closeNotes = '';\n\n    if (table && sysId) {\n        var gr = new GlideRecordSecure(table);\n\n        if (gr.get(sysId)) {\n            state = gr.getValue(\"state\");\n            description = gr.getDisplayValue(\"description\");\n            closeNotes = gr.getDisplayValue(\"close_notes\");\n        }\n    }\n\n    return {\n        \"state\": state,\n        \"description\": description,\n        \"closeNotes\": closeNotes\n    };\n}","acl_failure_result":"","props":"[\n      {\n      \"name\": \"sysId\",\n      \"label\": \"sysId\",\n      \"description\": \"sysId\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n      },\n      {\n        \"name\": \"table\",\n        \"label\": \"table\",\n        \"description\": \"table\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n      }\n      ]\n    ","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b49916aff4f50a107d41bb28e786c2f6","value":"b49916aff4f50a107d41bb28e786c2f6"},"sys_update_name":"sys_ux_data_broker_transform_14f96aa5ebde0a109c3cfd18cad0cd77","api_name":"sn_itsm_ra.Fetch Predicted record","mutates_server_data":"false","name":"Fetch Predicted record","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Returns all the contributors on an incident.","sys_updated_on":"2023-12-15 03:42:40","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"15a2091d436231108b8c8772d9b8f2dd","sys_updated_by":"admin","sys_created_on":"2023-11-15 16:59:29","sys_name":"Fetch all contributors on an incident","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"33","sys_tags":"","script":"function transform(input) {\n    var table = input.table;\n    var gr = new GlideRecord(table);\n    if (gr.get(input.sysId) && gr.canRead()) {\n        if (table == 'incident') {\n            var recordInfo = new sn_sow_inc.SOWIncidentInfo(gr);\n            return recordInfo.getAllContributors(); \n        }\n    }\n    return {};\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_15a2091d436231108b8c8772d9b8f2dd","api_name":"sn_sow_itsm_common.Fetch all contributors on an incident","mutates_server_data":"false","name":"Fetch all contributors on an incident","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Interaction Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-01-31 13:27:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"15a2accf475d8510bc0ba442846d432b","sys_updated_by":"admin","sys_created_on":"2022-01-31 09:21:54","sys_name":"Get Record SysId","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\tvar output = {};\n    var chatGr = new GlideRecord('sn_tcm_collab_hook_ms_teams_chat');\n\tchatGr.addQuery('interaction', input.interactionSysId);\n\tchatGr.query();\n\tvar sysId;\n\tif(chatGr.next())\n\t\tsysId = chatGr.getValue('sys_id');\n\toutput.sysId = sysId;\n\t\n\treturn output;\n}","acl_failure_result":"","props":"[\n\t{\n\t  \"name\": \"interactionSysId\",\n          \"label\": \"Interaction Sys Id\",\n          \"description\": \"Interaction Sys Id\",\n          \"readOnly\": false,\n          \"fieldType\": \"string\",\n          \"mandatory\": true\n\t}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_update_name":"sys_ux_data_broker_transform_15a2accf475d8510bc0ba442846d432b","api_name":"sn_sow_interaction.Get Record SysId","mutates_server_data":"false","name":"Get Record SysId","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Opened for Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Opened for user Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-02-06 13:20:26","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1625955697d8e1104305f5f3a253afb9","sys_updated_by":"admin","sys_created_on":"2023-01-12 04:20:06","sys_name":"Fetch Asset Information","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n\tvar output = {};\n\tvar assetGr = new GlideRecord('alm_asset');\n\tassetGr.addQuery('assigned_to', input.openedForSysId);\n\tassetGr.addNotNullQuery('assigned_to');\n\tassetGr.addQuery('assigned_to', '!=', '5136503cc611227c0183e96598c4f706');\n\tassetGr.addQuery('install_status', '!=', 7);\n\tassetGr.query();\n\tvar numberOfAssets = assetGr.getRowCount();\n\tvar assets = [];\n\twhile(assetGr.next() && assets.length < 5 ) {\n\t\tvar asset = {\n\t\t\tassetName : assetGr.getValue('display_name'),\n\t\t\tsysId: assetGr.getValue('sys_id')\n\t\t};\n\t\tassets.push(asset);\n\t}\n\t\t\n\toutput.numberOfAssets = numberOfAssets;\n\toutput.assets = assets;\n\t\n\treturn output;\n}","acl_failure_result":"","props":"[\n\t{\n\t  \"name\": \"openedForSysId\",\n          \"label\": \"Opened for Sys Id\",\n          \"description\": \"Opened for user Sys Id\",\n          \"readOnly\": false,\n          \"fieldType\": \"string\",\n          \"mandatory\": true\n\t}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_update_name":"sys_ux_data_broker_transform_1625955697d8e1104305f5f3a253afb9","api_name":"sn_sow_interaction.Fetch Asset Information","mutates_server_data":"false","name":"Fetch Asset Information","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Escalation policy data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Input payload needed to create/update escalation policy and related records\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This data broker can be used to create or update escalation policy and related records","sys_updated_on":"2023-11-24 12:27:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"166345fb53e231105dd2ddeeff7b1258","sys_updated_by":"admin","sys_created_on":"2023-11-23 11:30:42","sys_name":"Update escalation policy details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n    var escalationPolicyData = input.escalationPolicyData;\n\tif (gs.nil(escalationPolicyData)) return;\n\n    var ocEscPolicyUIBUtils = new sn_uib_on_call.OnCallEscalationPolicyUIBUtils();\n\tvar ocTeamsCalendarUtil = new sn_uib_on_call.OnCallTeamsCalendarUtil();\n\tvar result = {};\n    \n\tocTeamsCalendarUtil.clearErrorMessages();\n\n\tif (escalationPolicyData.escalation_type === \"roster\" || escalationPolicyData.escalation_type === \"member\") {\n\t\tresult = ocEscPolicyUIBUtils.migrateToCustomEscalationPolicy(escalationPolicyData);\n\t} else {\n\t\tresult = ocEscPolicyUIBUtils.populateCustomEscalationData(escalationPolicyData);\n\t}\n\tresult.errors = (ocTeamsCalendarUtil.getErrorMessages() || []).concat((result.errors || []));\n\treturn result;\n\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t\t\"name\": \"escalationPolicyData\",\r\n\t\t\"label\": \"Escalation policy data\",\r\n\t\t\"description\": \"Input payload needed to create/update escalation policy and related records\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"json\",\r\n\t\t\"mandatory\": true,\r\n\t\t\"defaultValue\": \"\"\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_166345fb53e231105dd2ddeeff7b1258","api_name":"sn_uib_on_call.Update escalation policy details","mutates_server_data":"false","name":"Update escalation policy details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-12 18:24:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"168cb187b7322110b87e80408e11a903","sys_updated_by":"admin","sys_created_on":"2023-05-18 22:00:35","sys_name":"Get Integration sources related misconfigurations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"16","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.CMDBWorkspaceUtil();\n\tvar resultObj = {};\n\t\n\tvar integrationDataSources = [];\n\tvar gr = new GlideRecord(util.TABLES.CMDB_INST_APPLICATION_FEED);\n\tgr.addActiveQuery();\n\tgr.addEncodedQuery(util.COLS.SYS_DATA_SOURCE + util.OPERATORS.NOTEQUAL + \"null^\"+ util.COLS.NAME + util.OPERATORS.NOTLIKE + util.IH_ETL_DEMODATA_PREFIX);\n\tgr.query();\n\twhile (gr.next()) {\n\t\tintegrationDataSources.push(gr.getValue(util.COLS.SYS_DATA_SOURCE));\n\t}\n\t\n\tvar sourcesBatchImportOff = 0;\n\tgr = new GlideRecord(util.TABLES.SYS_DATA_SOURCE);\n\tgr.addEncodedQuery(util.COLS.SYS_ID + util.COLS.IN + integrationDataSources.join(\",\"));\n\tgr.query();\n\twhile (gr.next()) {\n\t\tvar useBatchImport = gr.getValue(util.COLS.USE_BATCH_IMPORT);\n\t\tif (global.JSUtil.nil(useBatchImport) || useBatchImport == false) {\n\t\t\tsourcesBatchImportOff++;\n\t\t}\n\t}\n\t\n\tvar totalSources = gr.getRowCount();\n\tresultObj[\"total_sources\"] = totalSources;\n\t\n\t// Sources with batch processing turned off\n\tresultObj[\"sources_batch_import_off\"] = sourcesBatchImportOff;\n\tresultObj[\"sources_batch_import_on\"] = totalSources - sourcesBatchImportOff;\n\tvar sourcesBatchImportOffPercent = 0;\n\tif (totalSources > 0) {\n\t\tsourcesBatchImportOffPercent = parseFloat((sourcesBatchImportOff / totalSources) * 100);\n\t}\n\tresultObj[\"sources_batch_import_off_percent\"] = util.getDecimalNumberWithGivenScale(sourcesBatchImportOffPercent.toString()) + '%';\n\tresultObj[\"sources_batch_import_last_refreshed\"] = new GlideDateTime().getDisplayValue();\n\t\n\t// Sources with concurrent import turned off\n\tvar totalSourcesSchImportSet = 0;\n\tvar sourcesConcurrentImportOff = 0;\n\tvar sourcesWithNonCustomSizePartitionMethod = 0;\n\tgr = new GlideRecord(util.TABLES.SCHEDULED_IMPORT_SET);\n\tgr.addActiveQuery();\n\tgr.addEncodedQuery(util.COLS.DATA_SOURCE + util.COLS.IN + integrationDataSources.join(\",\"));\n\tgr.query();\n\twhile (gr.next()) {\n\t\ttotalSourcesSchImportSet++;\n\t\tvar concurrentImport = gr.getValue(util.COLS.CONCURRENT_IMPORT);\n\t\tif (global.JSUtil.nil(concurrentImport) || concurrentImport == false) {\n\t\t\tsourcesConcurrentImportOff++;\n\t\t}\n\t\t\n\t\tvar partitionMethod = gr.getValue(util.COLS.PARTITION_METHOD);\n\t\tif (global.JSUtil.nil(partitionMethod) || partitionMethod != util.SCH_IMP_PARTITON_METHOD.CUSTOM_SIZE) {\n\t\t\tsourcesWithNonCustomSizePartitionMethod++;\n\t\t}\n\t}\n\t\n\tresultObj[\"total_sources_with_sch_import_set\"] = totalSourcesSchImportSet;\n\tresultObj[\"sources_concurrent_import_off\"] = sourcesConcurrentImportOff;\n\tresultObj[\"sources_concurrent_import_on\"] = totalSourcesSchImportSet - sourcesConcurrentImportOff;\n\t\n\tvar sourcesConcurrentImportOffPercent = 0;\n\tif (totalSourcesSchImportSet > 0) {\n\t\tsourcesConcurrentImportOffPercent = parseFloat((sourcesConcurrentImportOff / totalSourcesSchImportSet) * 100);\n\t}\n\tresultObj[\"sources_concurrent_import_off_percent\"] = util.getDecimalNumberWithGivenScale(sourcesConcurrentImportOffPercent.toString()) + '%';\n\tresultObj[\"sources_concurrent_import_last_refreshed\"] = new GlideDateTime().getDisplayValue();\n\t\n\t// Sources with non-custom size partition method\n\tresultObj[\"sources_non_custom_size_partition_method\"] = sourcesWithNonCustomSizePartitionMethod;\n\tvar sourcesWithNonCustomSizePartitionMethodPercent = 0;\n\tif (totalSourcesSchImportSet > 0) {\n\t\tsourcesWithNonCustomSizePartitionMethodPercent = parseFloat((sourcesWithNonCustomSizePartitionMethod / totalSourcesSchImportSet) * 100);\n\t}\n\tresultObj[\"sources_non_custom_size_partition_method_percent\"] = util.getDecimalNumberWithGivenScale(sourcesWithNonCustomSizePartitionMethodPercent.toString()) + '%';\n\tresultObj[\"sources_non_custom_size_partition_method_last_refreshed\"] = new GlideDateTime().getDisplayValue();\n\t\n\treturn JSON.parse(JSON.stringify(resultObj));\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_168cb187b7322110b87e80408e11a903","api_name":"sn_cmdb_ws.Get Integration sources related misconfigurations","mutates_server_data":"false","name":"Get Integration sources related misconfigurations","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Mode\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Mode of the user\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Security token\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysID of verification\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Verification ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-04-14 11:25:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1690d9359f650210d9e5328dda0a1cc0","sys_updated_by":"admin","sys_created_on":"2024-04-14 10:24:57","sys_name":"Send Verification Code","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    return new sn_uib_pwd_reset.PwdResetUXFEmailVerificationProcessor().generateCode(input.token, input.verificationId, input.mode);\n}","acl_failure_result":"","props":"[\r\n   {\r\n        \"name\": \"token\",\r\n        \"label\": \"Token\",\r\n        \"description\": \"Security token\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    } ,{\r\n    \"name\": \"verificationId\",\r\n    \"label\": \"Verification ID\",\r\n    \"description\": \"SysID of verification\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },{\r\n    \"name\": \"mode\",\r\n    \"label\": \"Mode\",\r\n    \"description\": \"Mode of the user\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_1690d9359f650210d9e5328dda0a1cc0","api_name":"sn_uib_pwd_reset.Send Verification Code","mutates_server_data":"true","name":"Send Verification Code","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get current application scope details","sys_updated_on":"2023-07-24 07:57:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"16c134eb7784311031e3b3c64b5a99e1","sys_updated_by":"admin","sys_created_on":"2023-07-21 08:58:32","sys_name":"Get Current Scope","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/f53f19bac362fa22ca2e93692d32f18f","value":"f53f19bac362fa22ca2e93692d32f18f"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform() {\n    var sys_id = gs.getCurrentApplicationId();\n    var gr = new GlideRecord(\"sys_scope\");\n    gr.get(sys_id);\n    var scopeData = {\n        name: gr.getValue('name'),\n        label: gr.getValue('name'),\n        scopeName: gr.getValue('scope'),\n        className: gr.getValue('sys_class_name'),\n        id: sys_id,\n        sysId: sys_id,\n    };\n    return scopeData;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f53f19bac362fa22ca2e93692d32f18f","value":"f53f19bac362fa22ca2e93692d32f18f"},"sys_update_name":"sys_ux_data_broker_transform_16c134eb7784311031e3b3c64b5a99e1","api_name":"sn_table_builder.Get Current Scope","mutates_server_data":"false","name":"Get Current Scope","output_schema":"[{\r\n    \"name\": \"scopeData\",\r\n    \"label\": \"Scope Data\",\r\n    \"description\": \"Get current scope\",\r\n    \"readOnly\": true,\r\n    \"fieldType\": \"object\"\r\n}]","sys_policy":"read"},{"private":"true","required_translations":"","batch_exclude":"false","description":"Retuns the comparison data for articles.\ngraphQLData : output of the \"Version Compare GQL\" data broker","sys_updated_on":"2021-08-03 16:20:16","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"17a81b0753311010733addeeff7b127d","sys_updated_by":"admin","sys_created_on":"2020-07-09 06:28:57","sys_name":"Version Compare Data Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar version1 = input.graphQLData.data.firstVersion.kb_version._results[0];\n\tvar version2 = input.graphQLData.data.secondVersion.kb_version._results[0];\n\tvar original, changed;\n    var originalVersionNumber, changedVersionNumber;\n    var versionNumber1 = parseFloat(version1.version.value);\n    var versionNumber2 = parseFloat(version2.version.value);\n    var getArticleData = function getArticleData(version) {\n\t\treturn version._query.AppKnowledge_Query.getArticleByFieldTypes;\n\t};\n    if(versionNumber1 < versionNumber2){\n\t\toriginalVersionNumber = versionNumber1;\n\t\tchangedVersionNumber = versionNumber2;\n\t\toriginal = getArticleData(version1);\n\t\tchanged = getArticleData(version2);\n\t} else {\n\t\toriginalVersionNumber = versionNumber2;\n\t\tchangedVersionNumber = versionNumber1;\n\t\toriginal = getArticleData(version2);\n\t\tchanged = getArticleData(version1);\n\t}\n\t\n\tvar comparisonData = new global.KBKnowledge().prepareComparisonData(original,changed);\n\t\n\tvar versionData = [\n\t\t{\n\t\t\t\"name\": \"version\",\n\t\t\t\"contentType\": \"string\",\n\t\t\t\"heading\": gs.getMessage(\"Article Version\"),\n\t\t\t\"originalContent\": originalVersionNumber,\n\t\t\t\"changedContent\": changedVersionNumber\n\t\t}\n\t];\n\tvar result = {\n\t\t\"articleData\": comparisonData,\n\t\t\"versionData\": versionData\n\t};\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"graphQLData\",\n    \"label\": \"GraphQL Data\",\n    \"readOnly\": false,\n    \"fieldType\": \"object\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_17a81b0753311010733addeeff7b127d","api_name":"sn_km_uib.Version Compare Data Transform","mutates_server_data":"false","name":"Version Compare Data Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Label\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Label for stacked value\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Value\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Value for stacked value\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-12-17 00:22:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"17dddb915b100110ab933520b881c7c5","sys_updated_by":"admin","sys_created_on":"2021-12-07 19:24:42","sys_name":"Label Value Stacked label and value","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1872ee045b100110ab933520b881c727","value":"1872ee045b100110ab933520b881c727"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var label = input.label;\n\tvar value = input.value;\n\t\n\tif (Array.isArray(value)) {\n\t\tvar obj = value[0];\n\t\tvar key = Object.keys(obj)[0];\n\t\tvalue = obj[key];\n\t}\n\n\tvar response = [{\"label\":label,\"value\":{\"type\":\"string\",\"value\":value}}];\n\n    return response;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"label\",\r\n  \"label\": \"Label\",\r\n  \"description\": \"Label for stacked value\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"value\",\r\n  \"label\": \"Value\",\r\n  \"description\": \"Value for stacked value\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1872ee045b100110ab933520b881c727","value":"1872ee045b100110ab933520b881c727"},"sys_update_name":"sys_ux_data_broker_transform_17dddb915b100110ab933520b881c7c5","api_name":"sn_fdih_dashboards.Label Value Stacked label and value","mutates_server_data":"false","name":"Label Value Stacked label and value","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Category Selected\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Model Record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-05-10 19:20:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"180e1b7a73e13010c01ce234c4f6a7a4","sys_updated_by":"admin","sys_created_on":"2021-07-28 18:22:18","sys_name":"Asset Create Catalog Item Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    var mSysId = input.mSysId;\n    var catSysId = input.catSysId;\n\tvar table = input.table;\n    var type = '';\n\n\tif(table === 'cmdb_hardware_product_model' || table === 'cmdb_consumable_product_model') {\n\t\ttype = 'pc_hardware_cat_item';\n\t} else if(table === 'cmdb_software_product_model') {\n\t\ttype = 'pc_software_cat_item';\n\t} else {\n\t\ttype = 'pc_product_cat_item';\n\t}\n\tvar gr = new GlideRecord('cmdb_model');\n\t/*\n\t* To prevent multiple catalog items from being created\n\t* when the same Publish UI action is executed more than once\n\t*/\n\tif(gr.get(mSysId) && gs.nil(gr.product_catalog_item)) {\n\t\tgr.product_catalog_item = (new global.ProductCatalogUtils()).createProductCatalog(gr, catSysId, 'model', type);\n\t\tvar sysId = gr.product_catalog_item;\n\t\tgr.update();\n\t\t// Add location variable to the hardware catalog item published if HAM is active and indoor mapping is enabled\n\t\tif (type === 'pc_hardware_cat_item' && GlidePluginManager.isActive('com.sn_hamp') && sn_hamp.HAMRitmUtils.prototype.addLocationVariable) {\n\t\t\tnew sn_hamp.HAMRitmUtils().addLocationVariable(sysId);\n\t\t}\n\t}\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"mSysId\",\r\n  \"label\": \"Model Record\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"catSysId\",\r\n  \"label\": \"Category Selected\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_180e1b7a73e13010c01ce234c4f6a7a4","api_name":"sn_itam_workspace.Asset Create Catalog Item Transform","mutates_server_data":"false","name":"Asset Create Catalog Item Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys_id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"To fetch the qualifying conditions for a security policy. Will return all the eligible conditions that a polciy with a \"trigger_type\" can have","sys_updated_on":"2024-06-01 03:42:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"18135b7b43060210c5155dc36ab8f2e6","sys_updated_by":"admin","sys_created_on":"2024-05-15 21:39:17","sys_name":"Get eligible conditions for the security policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"33","sys_tags":"","script":"function transform(input) {\n    var id = input && input.sys_id;\n    var resp = {\n        \"conditions\": []\n    };\n    if (id) {\n        var scConstants = new sn_vsc.SecurityCenterConstants();\n        var util = new SCSecurityPolicyUtil();\n        var res = util.getEligiblePolicyConditions(id, scConstants.SECURITY_POLICY, scConstants.SECURITY_POLICY_CONDITIONS_HUB_CATEGORY);\n        resp.conditions = res.conditions;\n    }\n    return resp;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"sys_id\",\n    \"label\": \"sys_id\",\n    \"description\": \"ID\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_18135b7b43060210c5155dc36ab8f2e6","api_name":"sn_vsc.Get eligible conditions for the security policy","mutates_server_data":"false","name":"Get eligible conditions for the security policy","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Update Language Service Provider to Service Now","sys_updated_on":"2024-08-21 08:51:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"187825bb9f4a0210f0b32e5af90a1c71","sys_updated_by":"admin","sys_created_on":"2024-05-15 13:46:46","sys_name":"Update Language Service Provider to Service Now","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    try {\n        var sysPropertiesGr = new GlideRecord('sys_properties');\n        sysPropertiesGr.addQuery('name', 'com.snc.gen_ai.translator_configuration.sys_id');\n        sysPropertiesGr.query();\n        if (sysPropertiesGr.next()) {\n            var id = sysPropertiesGr.getUniqueValue();\n            var naaGlobalUtil = new global.NowAssistAdminGlobalScopedUtil();\n            naaGlobalUtil.updateRecord(\"sys_properties\", id, {\n                value: \"\"\n            });\n        }\n    } catch (e) {\n        gs.error(\"Failed to update language service provider to Service Now\");\n    }\n}","acl_failure_result":"","props":"[\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_187825bb9f4a0210f0b32e5af90a1c71","api_name":"sn_nowassist_admin.Update Language Service Provider to Service Now","mutates_server_data":"true","name":"Update Language Service Provider to Service Now","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Maturity level element name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get Maturity level element Sys Id from element name","sys_updated_on":"2023-12-26 22:21:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"188595ae771331101b803a91fa5a999e","sys_updated_by":"maint","sys_created_on":"2023-12-26 22:21:38","sys_name":"Get maturity level element Id","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var gr = new GlideRecord('sys_choice');\n    gr.addEncodedQuery('name=sn_vsc_best_practice_configurations^element=maturity_level^label=' + GlideStringUtil.escapeQueryTermSeparator(input.element_name), true);\n    gr.query();\n    var res = {};\n    if (gr.next()) {\n        res.sysId = gr.getValue('sys_id').toString();\n    }\n    return res;\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"element_name\",\r\n    \"label\": \"Maturity level element name\",\r\n    \"description\": \"Maturity level element name\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_188595ae771331101b803a91fa5a999e","api_name":"sn_vsc.Get maturity level element Id","mutates_server_data":"false","name":"Get maturity level element Id","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Roles\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"State\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"UI Action Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Save UI action state","sys_updated_on":"2024-09-27 09:45:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"18ee6cb493fe4210aa5730f1648918f0","sys_updated_by":"admin","sys_created_on":"2024-06-12 08:42:00","sys_name":"Save UI action state","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"function transform(input) {\n    try {\n        var util = new sn_nowassist_admin.SkillBuilderNaaUtils();\n\t\tutil.toggleUiActionState(input.uiActionId, input.state);\n\t\tutil.updateUiActionRoles(input.uiActionId,input.roles);\n    } catch (e) {\n\t\tgs.error(\"Toggle ui action failed: \"+ e);\n\t\tthrow new Error(\"Toggle ui action failed\");\n    }\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"uiActionId\",\r\n        \"label\": \"UI Action Id\",\r\n        \"description\": \"UI Action Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"state\",\r\n        \"label\": \"State\",\r\n        \"description\": \"State\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": false\r\n    },\r\n{\r\n        \"name\": \"roles\",\r\n        \"label\": \"Roles\",\r\n        \"description\": \"Roles\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"JSON\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\":[]\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_18ee6cb493fe4210aa5730f1648918f0","api_name":"sn_nowassist_admin.Save UI action state","mutates_server_data":"true","name":"Save UI action state","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Activity Associated Record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Activity Associated Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Activity Parent Record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Activity Parent Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Advanced Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Advanced Properties from the Activity UI Macroponent\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Associated Record SysId of the Activity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Associated Table of the Activity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Experience Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Parent Record SysId of the Activity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Parent Table of the Activity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Properties for the Activity UI Macroponent content\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-11-02 03:11:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1940139bc3313010948404186e40dd4b","sys_updated_by":"admin","sys_created_on":"2021-08-11 16:59:37","sys_name":"Playbook Experience Attachments Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n    var parentTable = input.parentTable;\n    var parentSysId = input.parentSysId;\n    var associatedTable = input.associatedTable;\n    var associatedSysId = input.associatedSysId;\n    var attachment_source = input.experienceProperties.attachment_source || {};\n    var attachments_read_only = input.experienceProperties.attachments_read_only || {};\n\tvar refreshRequested = (input.advanced || {}).associatedRecordModCount || 0;\n\n\n    var table = '';\n    var sysId = '';\n\n    if (attachment_source.value == 'associated_record') {\n        table = associatedTable;\n        sysId = associatedSysId;\n    } else if (attachment_source.value == 'parent_record') {\n        table = parentTable;\n        sysId = parentSysId;\n    }\n\n    if (!attachment_source || !table || !sysId) return { table: null, sysId: null, readOnly: true};\n\n    var readOnly = (attachments_read_only || {}).value === '1';\n\n    return {\n        table: table,\n        sysId: sysId,\n        readOnly: readOnly,\n\t\trefreshRequested: refreshRequested\n\t\t\n    };\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"experienceProperties\",\n    \"label\": \"Experience Properties\",\n    \"description\": \"Properties for the Activity UI Macroponent content\",\n    \"readOnly\": false,\n    \"fieldType\": \"json\",\n    \"mandatory\": true\n  },\n  {\n    \"name\": \"parentTable\",\n    \"label\": \"Activity Parent Table\",\n    \"description\": \"Parent Table of the Activity\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  },\n  {\n    \"name\": \"parentSysId\",\n    \"label\": \"Activity Parent Record\",\n    \"description\": \"Parent Record SysId of the Activity\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  },\n  {\n    \"name\": \"associatedTable\",\n    \"label\": \"Activity Associated Table\",\n    \"description\": \"Associated Table of the Activity\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  },\n  {\n    \"name\": \"associatedSysId\",\n    \"label\": \"Activity Associated Record\",\n    \"description\": \"Associated Record SysId of the Activity\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  },\n {\n    \"name\": \"advanced\",\n    \"label\": \"Advanced Properties\",\n    \"description\": \"Advanced Properties from the Activity UI Macroponent\",\n    \"readOnly\": false,\n    \"fieldType\": \"json\",\n    \"mandatory\": true\n  }\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_update_name":"sys_ux_data_broker_transform_1940139bc3313010948404186e40dd4b","api_name":"sn_playbook_exp.Playbook Experience Attachments Properties","mutates_server_data":"false","name":"Playbook Experience Attachments Properties","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Return overdue and not completed customer action count","sys_updated_on":"2024-09-18 17:50:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1ad18c9c77b01210c2123a91fa5a9962","sys_updated_by":"maint","sys_created_on":"2024-09-18 02:19:30","sys_name":"Get Customer action count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    var notCompletedCA = 0;\n    var overdueCA = 0;\n    if (gs.hasRole('admin')) {\n        var gr = new GlideRecord('sn_critical_update');\n        gr.addQuery('up_active', true);\n        gr.addQuery('up_update_status', '!=', 'acknowledged');\n        gr.query();\n        notCompletedCA = gr.getRowCount();\n        gr = new GlideRecord('sn_critical_update');\n        gr.addQuery('up_active', true);\n        gr.addQuery('up_update_priority', 'overdue');\n        gr.query();\n        overdueCA = gr.getRowCount();\n    }\n    return {\n        'notCompletedCA': notCompletedCA,\n        'overdueCA': overdueCA\n    };\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_1ad18c9c77b01210c2123a91fa5a9962","api_name":"sn_vsc.Get Customer action count","mutates_server_data":"false","name":"Get Customer action count","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Details of related data queries to return counts for the cards\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"cardDataQueries\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys_id of the Change Request\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetches related list data for a specific Change Request e.g. Incidents caused by a Change","sys_updated_on":"2024-06-26 11:39:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1ad948a4b7a21110c85a6ac7ee11a98d","sys_updated_by":"admin","sys_created_on":"2022-10-11 12:36:56","sys_name":"Change Outcomes Counts","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_created_by":"admin","sys_mod_count":"25","sys_tags":"","script":"function transform(input) {\n\tvar cardData = [];\n\tif (!input.sysId || !input.cardDataQueries)\n\t\treturn cardData;\n\n\tfor (var i = 0; i < input.cardDataQueries.length; i++) {\n\t\tvar cardDataQuery = input.cardDataQueries[i];\n\t\tvar countGr = new GlideRecordSecure(cardDataQuery.relatedTable);\n\n\t\tif (!countGr.isValid() || !countGr.isValidField(cardDataQuery.relatedField))\n\t\t\tcontinue;\n\n\t\tcountGr.addQuery(cardDataQuery.relatedField, input.sysId);\n\t\tcountGr.query();\n\n\t\tif (countGr.next())\n\t\t\tcardDataQuery.count = countGr.getRowCount();\n\t\telse\n\t\t\tcardDataQuery.count = 0;\n\n\t\tcardData.push(cardDataQuery);\n\t}\n\n\treturn cardData;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"sysId\",\r\n        \"label\": \"sysId\",\r\n        \"description\": \"sys_id of the Change Request\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"cardDataQueries\",\r\n        \"label\": \"cardDataQueries\",\r\n        \"description\": \"Details of related data queries to return counts for the cards\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_update_name":"sys_ux_data_broker_transform_1ad948a4b7a21110c85a6ac7ee11a98d","api_name":"sn_sow_chg.Change Outcomes Counts","mutates_server_data":"false","name":"Change Outcomes Counts","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Hermes Service\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-14 20:25:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1b38685b43f821101f401daa5ab8f236","sys_updated_by":"admin","sys_created_on":"2023-02-09 00:08:55","sys_name":"HermesInternalTopics","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"34","sys_tags":"","script":"function transform(input) {\n    var output = [];\n\tvar service = input.service;\n    var inspector = new sn_hermes.HermesTopicInspector();\n    var topics = inspector.getAllTopicsForService(service, 'sni');\n\n    if (topics.length > 0) {\n        for (i = 0; i < topics.length; i++) {\n            var topic = topics[i];\n\t\t\tvar name = topic.getName().toString();\n\t\t\toutput.push({\"topic\":name});\n        }\n    }\n    return output;\n}","acl_failure_result":"","props":"[{\r\n\"name\":\"service\",\r\n\"label\":\"Hermes Service\",\r\n\"fieldType\":\"string\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/03d4abbf04312210559073c06a02f7f9","value":"03d4abbf04312210559073c06a02f7f9"},"sys_update_name":"sys_ux_data_broker_transform_1b38685b43f821101f401daa5ab8f236","api_name":"global.HermesInternalTopics","mutates_server_data":"false","name":"HermesInternalTopics","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2021-10-23 13:20:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1bbb40657713301039ac088b3a1061d4","sys_updated_by":"admin","sys_created_on":"2021-10-19 05:38:44","sys_name":"CI AI Search Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c2a7835187123010a4a2c077f6cb0bc0","value":"c2a7835187123010a4a2c077f6cb0bc0"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform() {\n\n\tvar aisService = checkAISService();\n\tvar aisInitialized = new sn_ais.StatusApi().isAisInitialized();\n\tvar aisEnabled = new sn_ais.StatusApi().isAisEnabled();\n\t\n\tfunction checkAISService() {\n\t\tvar grS = new GlideAggregate('sys_service');\n\t\tgrS.addQuery('name', 'AISearch');\n\t\tif(grS.getCount() > 0)\n\t\t\treturn true;\n\t\treturn false;\n\t}\n\t\n\tvar res = {};\n\t\n\tres[\"aisService\"] = aisService;\n\tres[\"aisInitialized\"] = aisInitialized;\n\tres[\"aisEnabled\"] = aisEnabled;\n\t\n\treturn res;\n\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c2a7835187123010a4a2c077f6cb0bc0","value":"c2a7835187123010a4a2c077f6cb0bc0"},"sys_update_name":"sys_ux_data_broker_transform_1bbb40657713301039ac088b3a1061d4","api_name":"sn_ci_landing_exp.CI AI Search Status","mutates_server_data":"false","name":"CI AI Search Status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template JSON\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-06 20:14:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1c8baf6873d071103f3cc3ed8ff6a796","sys_updated_by":"admin","sys_created_on":"2023-07-25 00:59:22","sys_name":"De-Duplication Template Update","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar templateId = input.templateSysId;\n\tvar templateJson = input.templateJson;\n\n\tresult = sn_cmdb.DuplicateTemplate.updateTemplate(templateId, templateJson);\n\tif(result) {\n\t\tvar templateUtil = new DedupeTemplateUtil();\n\t\tvar conditions = templateJson.conditions ? templateJson.conditions : \"\";\n\t\tvar advanced = templateJson.advanced ? true : false;\n\t\tvar script = templateJson.script ? templateJson.script : \"\";\n\t\t// if adavnced (use script) clear conditions\n\t\tif(advanced)\n\t\t\tconditions = '';\n\t\ttemplateUtil.addTemplateConditions(templateId,conditions);\n\t\ttemplateUtil.addTemplateScript(templateId, advanced, script);\n\t}\n\n\tif(templateJson.library) {\n\t\tvar util = new DedupeTemplateLibraryUtil();\n\t\tvar LibrayResult = util.addTemplateToLibrary(templateId,templateJson.library);\n\t}\n\n\treturn result; \n\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n   {\r\n      \"name\": \"templateJson\",\r\n      \"label\": \"Template JSON\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"json\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_1c8baf6873d071103f3cc3ed8ff6a796","api_name":"sn_cmdb_ws.De-Duplication Template Update","mutates_server_data":"true","name":"De-Duplication Template Update","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Related Records\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected Filter Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Based on the related records sys_id, we retrieve the relevant EVAM view configuration and return the field values from the record, along with the template ID.","sys_updated_on":"2023-06-16 15:39:55","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1d3f104d8797201074f38467a7cb0bd0","sys_updated_by":"admin","sys_created_on":"2021-04-01 21:36:45","sys_name":"Fetch Related Records View Configuration Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4b2d950b87c220109bada7da0acb0baa","value":"4b2d950b87c220109bada7da0acb0baa"},"sys_created_by":"admin","sys_mod_count":"22","sys_tags":"","script":"function transform(input) {\n    var returnVal = {};\n    var all_actions = [];\n    var items = [];\n    var viewConfigGr = {};\n    var selectedTable = input.selectedTable;\n    input.relatedRecords\n        .forEach(function(item) {\n            viewConfigGr = new sn_uib_dyn_rel_rec.RelatedRecordsUtil().getMatchingViewConfig(selectedTable, item._row_data.uniqueValue);\n            var relatedRecordGr = new GlideRecordSecure(selectedTable);\n            relatedRecordGr.get(item._row_data.uniqueValue);\n            if (viewConfigGr)\n                items.push(new sn_uib_dyn_rel_rec.RelatedRecordsUtil().getConfigFieldsTemplate(relatedRecordGr, viewConfigGr));\n            else\n                gs.info(gs.getMessage(\"No matching view config record found for {0}\", selectedTable));\n        });\n    returnVal.items = items;\n    if (viewConfigGr)\n        returnVal.all_actions = new sn_uib_dyn_rel_rec.RelatedRecordsUtil().getAllActionsForViewConfig(viewConfigGr);\n    else\n        gs.info(gs.getMessage(\"No matching view config record found for {0}\", selectedTable));\n    return returnVal;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"relatedRecords\",\r\n        \"label\": \"Related Records\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n   {\r\n        \"name\": \"selectedTable\",\r\n        \"label\": \"Selected Filter Table\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4b2d950b87c220109bada7da0acb0baa","value":"4b2d950b87c220109bada7da0acb0baa"},"sys_update_name":"sys_ux_data_broker_transform_1d3f104d8797201074f38467a7cb0bd0","api_name":"sn_uib_dyn_rel_rec.Fetch Related Records View Configuration Properties","mutates_server_data":"false","name":"Fetch Related Records View Configuration Properties","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Policy ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Policy Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Security Policy ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update Custom Policy Name","sys_updated_on":"2024-06-05 20:37:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1d64cf5e93aa0210d0881347328918c7","sys_updated_by":"admin","sys_created_on":"2024-06-05 01:10:24","sys_name":"Update Custom Policy Name","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var id = input.sys_id;\n    var policyName = input.policy_name;\n    if (!policyName || !id) {\n        return;\n    }\n    var gr = new GlideRecord(\"sn_vsc_security_policy\");\n    if (gr.get(id)) {\n        gr.name = policyName;\n        gr.update();\n    }\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"sys_id\",\r\n    \"label\": \"Policy ID\",\r\n    \"description\": \"Security Policy ID\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true\r\n},\r\n{\r\n     \"name\": \"policy_name\",\r\n    \"label\": \"Policy Name\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_1d64cf5e93aa0210d0881347328918c7","api_name":"sn_vsc.Update Custom Policy Name","mutates_server_data":"false","name":"Update Custom Policy Name","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Service group\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get all the PM project mapped to corresponding contributing indicator regsitry & related data to create the presentation list in UI.","sys_updated_on":"2024-04-12 17:17:19","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1df55cdd433402107f9fbbfd6bb8f26a","sys_updated_by":"admin","sys_created_on":"2024-03-06 10:06:30","sys_name":"Get mapped PM projects","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    var output = {\n        rows: []\n    };\n\n    var grContributingM2mPO = new GlideRecord(\"sn_sd_contributing_indicator_m2m_po_project\");\n    grContributingM2mPO.addNotNullQuery(\"po_project_id\");\n    grContributingM2mPO.addQuery(\"contributing_indicator_registry.service_group\", input.serviceGroup);\n    grContributingM2mPO.query();\n\n    for (var i = 0; grContributingM2mPO.next(); i++) {\n        output.rows[i] = {\n            key: \"\",\n            cells: {\n                contributingIndicator: {},\n                poProject: {},\n                status: {},\n                table: {},\n                conditionApplied: {}\n            }\n        };\n\n        output.rows[i].key = grContributingM2mPO.sys_id.toString();\n\n        output.rows[i].cells.contributingIndicator = {\n            \"label\": grContributingM2mPO.getValue(\"contributing_indicator_registry\"),\n            \"value\": grContributingM2mPO.getDisplayValue(\"contributing_indicator_registry\")\n        };\n\n        output.rows[i].cells.poProject = {\n            \"label\": grContributingM2mPO.getValue(\"po_project_id\"),\n            \"value\": grContributingM2mPO.getDisplayValue(\"po_project_id\")\n        };\n\n        output.rows[i].cells.status = {\n            \"label\": grContributingM2mPO.active ? gs.getMessage(\"Active\") : gs.getMessage(\"Inactive\"),\n            \"value\": grContributingM2mPO.active ? gs.getMessage(\"Active\") : gs.getMessage(\"Inactive\"),\n            \"highlightedValue\": {\n                \"color\": grContributingM2mPO.active ? \"positive\" : \"critical\",\n                \"value\": grContributingM2mPO.active ? gs.getMessage(\"Active\") : gs.getMessage(\"Inactive\"),\n                \"showIcon\": true\n            }\n        };\n\n        var grProminProjectEntity = new GlideRecord(\"promin_project_entity\");\n        grProminProjectEntity.addNullQuery(\"relation_type\");\n        grProminProjectEntity.addQuery(\"project\", grContributingM2mPO.getValue(\"po_project_id\"));\n        grProminProjectEntity.query();\n\n        if (grProminProjectEntity.next()) {\n            output.rows[i].cells.table = {\n                \"label\": grProminProjectEntity.getValue(\"table\"),\n                \"value\": grProminProjectEntity.getDisplayValue(\"table\")\n            };\n\n            output.rows[i].cells.conditionApplied = {\n                \"label\": grProminProjectEntity.getValue(\"filter\"),\n                \"value\": grProminProjectEntity.getDisplayValue(\"filter\")\n            };\n        }\n    }\n\n    return output;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"serviceGroup\",\r\n    \"label\": \"Service group\",\r\n    \"description\": \"\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_update_name":"sys_ux_data_broker_transform_1df55cdd433402107f9fbbfd6bb8f26a","api_name":"sn_sd.Get mapped PM projects","mutates_server_data":"false","name":"Get mapped PM projects","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Optional timestamp to force refresh of data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Refresh timestamp\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-28 23:02:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1ed470cb77113110ee0d0cc2fa5a9977","sys_updated_by":"admin","sys_created_on":"2023-09-19 23:32:15","sys_name":"DM - Get Upcoming Scheduled Policies","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFunction = function() {\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n\t\tvar dmConst = new sn_cmdb_ws.CMDBWsDMConstants();\n\t\tvar policyTypeIdToEventInfoMap = {};\n\t\tvar ICON_STAR_FILL = 'starFill';\n\t\tvar ATTESTATION_ICON_COLOR = '#F0E000';\n\t\tvar CERTIFICATION_ICON_COLOR = '#7EB165';\n\n\t\tvar DEFAULT_TYPE_NAME = sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"Custom\");\n\t\tpolicyTypeIdToEventInfoMap[dmConst.OOB_POLICY_TYPES.ATTESTATION.sys_id] = {'icon': ICON_STAR_FILL, 'color': ATTESTATION_ICON_COLOR, 'typeName': dmConst.OOB_POLICY_TYPES.ATTESTATION.name};\n\t\tpolicyTypeIdToEventInfoMap[dmConst.OOB_POLICY_TYPES.CERTIFICATION.sys_id] = {'icon': ICON_STAR_FILL, 'color': CERTIFICATION_ICON_COLOR, 'typeName': dmConst.OOB_POLICY_TYPES.CERTIFICATION.name};\n\n\t\tvar result = {};\n\t\tresult.isEmpty = true;\n\t\tvar startDate = new GlideDateTime();\n\t\tvar endDate = new GlideDateTime();\n\t\tendDate.addYearsLocalTime(1);\n\t\tvar formattedDisplayEndDate = new GlideDateTime();\n\t\tformattedDisplayEndDate.addMonthsLocalTime(3);\n\t\tresult.startDate = startDate.getValue();\n\t\tresult.endDate = endDate.getValue();\n\t\tresult.formattedDisplayEndDate = formattedDisplayEndDate.getValue();\n\t\tresult.timelineDataPointPayload = [];\n\t\tvar scheduledPoliciesByType = proxy.getUpcomingSchedules(startDate, endDate);\n\n\t\tvar types = Object.keys(scheduledPoliciesByType);\n\t\tfor (var i = 0; i < types.length; i++) {\n\t\t\tvar typeId = types[i];\n\t\t\tvar scheduledPolicies = scheduledPoliciesByType[typeId];\n\n\t\t\tvar dataPoint = {};\n\t\t\tvar icon = policyTypeIdToEventInfoMap[typeId] ? policyTypeIdToEventInfoMap[typeId].icon : ICON_STAR_FILL;\n\t\t\tvar color = policyTypeIdToEventInfoMap[typeId] ? policyTypeIdToEventInfoMap[typeId].color : ATTESTATION_ICON_COLOR;\n\t\t\tvar typeName = policyTypeIdToEventInfoMap[typeId] ? policyTypeIdToEventInfoMap[typeId].typeName : DEFAULT_TYPE_NAME;\n\t\t\tdataPoint.icon = icon;\n\t\t\tdataPoint.color = color;\n\t\t\tdataPoint.isVisible = true;\n\t\t\tdataPoint.label = sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"{0} Policy\", {0: typeName});\n\t\t\tdataPoint.labelPlural = sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"{0} Policies\", {0: typeName});\n\t\t\tdataPoint.name = typeName;\n\t\t\tdataPoint.events = [];\n\n\t\t\tfor (var j = 0; j < scheduledPolicies.length; j++) {\n\t\t\t\tvar policy = scheduledPolicies[j];\n\t\t\t\tvar event = {};\n\t\t\t\tevent.description = policy.name;\n\t\t\t\tevent.timestamp = policy.epoch;\n\t\t\t\tevent.data = {'policyRuntimeId': policy.runtimeId, 'policyId': policy.id, 'policyName': policy.name, 'policyScheduledTime': policy.time};\n\t\t\t\tevent.popover = {};\n\t\t\t\tevent.popover.fields = [{'policyId': policy.id, 'policyName': policy.name, 'policyScheduledTime': policy.time}];\n\t\t\t\tdataPoint.events.push(event);\n\t\t\t}\n\t\t\tif (dataPoint.events.length > 0) {\n\t\t\t\tresult.isEmpty = false;\n\t\t\t}\n\t\t\tresult.timelineDataPointPayload.push(dataPoint);\n\t\t}\n\t\treturn result;\n\t};\n\treturn new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Get Upcoming Scheduled Policies\", wrapperFunction);\n}","acl_failure_result":"","props":"{\r\n     \"name\": \"refresh_timestamp\",\r\n     \"label\": \"Refresh timestamp\",\r\n     \"description\": \"Optional timestamp to force refresh of data\",\r\n     \"readOnly\": false,\r\n     \"fieldType\": \"string\",\r\n     \"mandatory\": false,\r\n     \"defaultValue\": \"\"\r\n}","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_1ed470cb77113110ee0d0cc2fa5a9977","api_name":"sn_cmdb_ws.DM - Get Upcoming Scheduled Policies","mutates_server_data":"false","name":"DM - Get Upcoming Scheduled Policies","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Policy ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The policy ID for the given data manager policy\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Given a policy sys_id get existing data certification policies of which the current policy is a duplicate","sys_updated_on":"2024-01-08 23:07:15","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1ef9d520436331106d8a8ef0dab8f2ae","sys_updated_by":"admin","sys_created_on":"2024-01-02 03:57:38","sys_name":"Get Data Certification Duplicate Policies","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n    var DM = new CMDBWsDMConstants();\n\n    function _areFieldsEqual(currentFields, duplicateFields) {\n        currentFieldsArray = currentFields.split(',').filter(function(element) {\n            return element.trim() !== '';\n        });\n        duplicateFieldsArray = duplicateFields.split(',').filter(function(element) {\n            return element.trim() !== '';\n        });\n\n        currentFieldsArray.sort();\n        duplicateFieldsArray.sort();\n\n        if (currentFieldsArray.length !== duplicateFieldsArray.length) {\n            return false;\n        }\n\n        for (var i = 0; i < currentFieldsArray.length; i++) {\n            if (currentFieldsArray[i] !== duplicateFieldsArray[i]) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    var wrapperFunction = function() {\n        var result = {};\n        var policySysId = input.policyId;\n        var currentPolicyGr = new GlideRecord(DM.CERTIFICATION_POLICY.TABLE);\n        currentPolicyGr.get(policySysId);\n\n        var currentCertFields = currentPolicyGr.getValue(DM.CERTIFICATION_POLICY.CERTIFICATION_FIELDS);\n        var currentPolicyTable = currentPolicyGr.getValue(DM.CERTIFICATION_POLICY.TABLE_COL);\n        var currentEncodedQuery = currentPolicyGr.getValue(DM.POLICY.ENCODED_QUERY);\n\n        var duplicatePolicyGr = new GlideRecord(DM.CERTIFICATION_POLICY.TABLE);\n        duplicatePolicyGr.addQuery(DM.SYS_ID, \"!=\", policySysId);\n        duplicatePolicyGr.addQuery(DM.CERTIFICATION_POLICY.TABLE_COL, currentPolicyTable);\n        if (global.JSUtil.notNil(currentEncodedQuery)) {\n            duplicatePolicyGr.addQuery(DM.POLICY.ENCODED_QUERY, currentEncodedQuery);\n        }\n        duplicatePolicyGr.query();\n\n        if (duplicatePolicyGr.getRowCount() == 0) {\n            result.hasDuplicates = false;\n            result.duplicatePolicySysId = [];\n            return result;\n        }\n\n        var duplicatePolicyCount = 0;\n        var duplicatePolicySysId = [];\n        while (duplicatePolicyGr.next()) {\n            var certFields = duplicatePolicyGr.getValue(DM.CERTIFICATION_POLICY.CERTIFICATION_FIELDS) || '';\n            if (_areFieldsEqual(currentCertFields, certFields)) {\n                duplicatePolicyCount += 1;\n                duplicatePolicySysId.push(duplicatePolicyGr.getUniqueValue());\n            }\n        }\n\n        result.hasDuplicates = duplicatePolicyCount > 0 ? true : false;\n        result.duplicatePolicySysId = duplicatePolicySysId;\n\n        return result;\n\n    };\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Get data certification duplicate policy\", wrapperFunction);\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"policyId\",\r\n        \"label\": \"Policy ID\",\r\n        \"fieldType\": \"string\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": true,\r\n        \"description\": \"The policy ID for the given data manager policy\"\r\n     }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_1ef9d520436331106d8a8ef0dab8f2ae","api_name":"sn_cmdb_ws.Get Data Certification Duplicate Policies","mutates_server_data":"true","name":"Get Data Certification Duplicate Policies","output_schema":"{\r\n    \"result\":  {}\r\n}","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Optional timestamp to force refresh of data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Refresh timestamp\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get the name and value of Data manager properties","sys_updated_on":"2024-05-29 23:57:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1f0f819aef653110c445bba98d97d759","sys_updated_by":"admin","sys_created_on":"2023-09-30 03:26:46","sys_name":"Data Manager Get Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    var wrapperFn = function() {\n        var proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n        var properties = proxy.getPropertiesNameAndValue();\n        return properties;\n    };\n\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Get DM properties name and value\", wrapperFn);\n}","acl_failure_result":"","props":"{\r\n     \"name\": \"refresh_timestamp\",\r\n     \"label\": \"Refresh timestamp\",\r\n     \"description\": \"Optional timestamp to force refresh of data\",\r\n     \"readOnly\": false,\r\n     \"fieldType\": \"string\",\r\n     \"mandatory\": false,\r\n     \"defaultValue\": \"\"\r\n}","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_1f0f819aef653110c445bba98d97d759","api_name":"sn_cmdb_ws.Data Manager Get Properties","mutates_server_data":"false","name":"Data Manager Get Properties","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"aceAppConfigId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-03-31 03:10:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"1f94eca2536f11104410ddeeff7b12f2","sys_updated_by":"admin","sys_created_on":"2022-12-06 12:44:50","sys_name":"Get Nav Menu Items","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var aceAppConfigId = input.aceAppConfigId;\n\n    var output = [];\n    var CONSTANTS = new sn_ace.ACEAppBuilderMetaData();\n    var pageIds = [];\n    if (aceAppConfigId) {\n        var pageGR = new GlideRecord('sn_ace_page');\n        pageGR.addQuery('ace_app', aceAppConfigId);\n        pageGR.query();\n        while (pageGR.next()) {\n            pageIds.push(pageGR.getValue('sys_id'));\n        }\n    }\n\n    var appId = input.aceAppConfigId;\n\n\n    // Get search config Content block ID\n    var searchNavigation = {};\n    try {\n        var searchGr = new GlideRecord('sn_ace_content_block');\n        searchGr.addQuery('document_table', 'sn_ace_app_config');\n        searchGr.addQuery('document_id', appId);\n        searchGr.addQuery('type', CONSTANTS.CONTENT_BLOCK_TYPES.SEARCH_CONFIG);\n        searchGr.query();\n        if (searchGr.next()) {\n            searchNavigation = {\n                \"route\": \"record\",\n                \"fields\": {\n                    \"aceAppConfigId\": appId,\n                    \"table\": \"sn_ace_content_block\",\n                    \"sysId\": searchGr.getUniqueValue()\n                },\n                \"params\": {},\n\t\t\t\treload: true\n            };\n        }\n    } catch (e) {}\n\n\n    // Get Modules\n\n    var modulesContentBlockQuery = 'document_id=' + aceAppConfigId;\n    pageIds.forEach(function(pageId) {\n        modulesContentBlockQuery += '^ORdocument_id=' + pageId;\n    });\n    modulesContentBlockQuery += '^type=76dddbc9c38501104b8e88c7c840dd9f';\n\n    // Get Reusable blocks\n    var reusableBlockQuery = 'document_table=sn_ace_app_config^type=5db4a12153975110c733ddeeff7b1277^document_id=' + appId;\n\n    // context.props_details.component_name = 'now-content-tree';\n            output = [\n            {\n                \"id\": \"home\",\n                \"label\": gs.getMessage(\"Home\"),\n                \"icon\": \"home-outline\",\n                \"navigation\": {\n                    \"route\": \"/now/ace-app-builder/home\",\n                    \"fields\": {},\n                    \"params\": {},\n                    reload: true\n                }\n            },\n            {\n                \"id\": \"basic-details\",\n                \"label\": gs.getMessage(\"Basic Details\"),\n                \"icon\": \"window-outline\",\n                \"navigation\": {\n                    \"route\": \"record\",\n                    \"fields\": {\n                        \"table\": \"sn_ace_app_config\",\n                        \"sysId\": aceAppConfigId,\n                        \"aceAppConfigId\": appId\n                    },\n                    \"params\": {},\n                    reload: true\n                }\n            }, {\n                \"id\": \"pages\",\n                \"label\": gs.getMessage(\"Pages\"),\n                \"icon\": \"pencil-page-outline\",\n                \"navigation\": {\n                    \"route\": \"list\",\n                    \"fields\": {\n                        \"aceAppConfigId\": aceAppConfigId,\n                        \"table\": \"sn_ace_page\"\n                    },\n                    \"params\": {\n                        \"filter\": \"ace_app=\" + aceAppConfigId\n                    },\n                    reload: true\n                }\n            }, {\n\n                \"id\": \"content-types\",\n                \"label\": gs.getMessage(\"Content Types\"),\n                \"icon\": \"folder-open-outline\",\n                \"children\": [\n                    {\n                        \"id\": \"custom-content-types\",\n                        \"label\": gs.getMessage(\"Custom Content Types\"),\n                        \"icon\": \"folder-open-outline\",\n                        \"navigation\": {\n                            \"route\": \"list\",\n                            \"fields\": {\n                                \"aceAppConfigId\": aceAppConfigId,\n                                \"table\": \"sn_ace_content_block_type\"\n                            },\n                            \"params\": {\n                                \"filter\": \"ace_app=\" + aceAppConfigId\n                            },\n                            reload: true\n                        }\n                    },\n                    {\n                        \"id\": \"reusable-blocks\",\n                        \"label\": gs.getMessage(\"Reusable Blocks\"),\n                        \"icon\": \"pencil-page-outline\",\n                        \"url\": \"/now/ace-app-builder/ace-list-page/\" + appId + \"/sn_ace_content_block\" + \"/params/filter/\" + reusableBlockQuery,\n                        \"navigation\": {\n                            \"route\": \"list\",\n                            \"fields\": {\n                                \"table\": \"sn_ace_content_block\",\n                                \"aceAppConfigId\": appId\n                            },\n                            \"params\": {\n                                \"filter\": reusableBlockQuery\n                            },\n                            reload: true\n                        }\n\n                    }\n                ]\n            }, {\n                \"id\": \"modules\",\n                \"label\": gs.getMessage(\"Modules\"),\n                \"icon\": \"folder-open-outline\",\n                \"navigation\": {\n                    \"route\": \"list\",\n                    \"fields\": {\n                        \"aceAppConfigId\": aceAppConfigId,\n                        \"table\": \"sn_ace_content_block\"\n                    },\n                    \"params\": {\n                        \"filter\": modulesContentBlockQuery\n                    },\n                    reload: true\n                }\n            }, {\n                \"id\": \"search-configurations\",\n                \"label\": gs.getMessage(\"Search Configurations\"),\n                \"icon\": \"magnifying-glass-outline\",\n                \"navigation\": searchNavigation\n            }, {\n                \"id\": \"help-content\",\n                \"label\": gs.getMessage(\"Help Content\"),\n                \"icon\": \"circle-question-outline\",\n                \"navigation\": {\n                    \"route\": \"list\",\n                    \"fields\": {\n                        \"aceAppConfigId\": aceAppConfigId,\n                        \"table\": \"sys_embedded_help_content\"\n                    },\n                    \"params\": {\n                        \"filter\": 'sys_scope=' + pageGR.sys_scope\n                    },\n                    reload: true\n                }\n            }\n        ];\n\n    return output;\n}","acl_failure_result":"","props":"[\r\n {\r\n    \"name\": \"aceAppConfigId\",\r\n    \"label\": \"aceAppConfigId\",\r\n    \"description\": \"aceAppConfigId\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\",\r\n    \"fieldType\": \"string\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_1f94eca2536f11104410ddeeff7b12f2","api_name":"sn_ace.Get Nav Menu Items","mutates_server_data":"false","name":"Get Nav Menu Items","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-08-04 07:52:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"20fde225375c3110815ed52964924b3c","sys_updated_by":"admin","sys_created_on":"2023-07-27 23:03:44","sys_name":"Get Resolution Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"14","sys_tags":"","script":"function transform(input) {\n    var constants = {\n        NOW_ASSIST_ITSM_PLUGIN: 'com.sn.itsm.gen.ai'\n    };\n    if (!GlidePluginManager.isActive(constants.NOW_ASSIST_ITSM_PLUGIN))\n        return null;\n    return new sn_itsm_gen_ai.NowAssistItsmGenAIUtils().fetchRecordResolution(input.table, input.sysId);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"table\",\r\n    \"label\": \"Table name\",\r\n    \"description\": \"Table name\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"sysId\",\r\n    \"label\": \"Sys Id\",\r\n    \"description\": \"Sys Id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_20fde225375c3110815ed52964924b3c","api_name":"sn_sow_itsm_common.Get Resolution Details","mutates_server_data":"false","name":"Get Resolution Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data manager properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Properties\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update Data manager properties","sys_updated_on":"2023-10-03 20:43:16","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2200cc4bb7213110c44580408e11a998","sys_updated_by":"admin","sys_created_on":"2023-10-02 05:40:59","sys_name":"Data Manager Update Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n    var wrapperFn = function() {\n\t\tvar properties = input.properties;\n        var proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n        proxy.updateProperties(properties);\n    };\n\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Update Data manager properties\", wrapperFn);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"properties\",\r\n    \"label\": \"Properties\",\r\n    \"fieldType\": \"json\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Data manager properties\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_2200cc4bb7213110c44580408e11a998","api_name":"sn_cmdb_ws.Data Manager Update Properties","mutates_server_data":"true","name":"Data Manager Update Properties","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2021-11-22 08:08:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2266d4ba6d223810f8772a5d5011827b","sys_updated_by":"admin","sys_created_on":"2021-09-15 20:51:54","sys_name":"Landing Page Stage Resolver ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c2a7835187123010a4a2c077f6cb0bc0","value":"c2a7835187123010a4a2c077f6cb0bc0"},"sys_created_by":"maint","sys_mod_count":"1","sys_tags":"","script":"function transform() {\n\n    function getPortals() {\n        var items = [];\n        try {\n            var gr = new GlideRecord('sp_portal');\n            gr.addActiveQuery();\n            gr.query();\n            while (gr.next()) {\n                var settings_label = gs.getMessage(\"View settings\");\n                var urlSuffix = gr.getDisplayValue(\"url_suffix\");\n                var sys_id = gr.getUniqueValue();\n                var agentChatGR = new GlideRecord('sp_agent_chat_config');\n                agentChatGR.addQuery(\"portal=\" + sys_id);\n                agentChatGR.query();\n                var settings_link = \"/sp_agent_chat_config.do?sys_id=\";\n                var isActive = \"false\";\n                if (agentChatGR.next()) {\n                    settings_link += agentChatGR.getUniqueValue();\n                    isActive = agentChatGR.getDisplayValue(\"active\");\n                    if (isActive == \"false\") {\n                        settings_label = gs.getMessage(\"Set up bot integration\");\n                    }\n                    items.push({\n                        \"id\": urlSuffix,\n                        \"label\": gr.getDisplayValue(\"title\"),\n                        \"portal_link\": \"/\" + urlSuffix,\n                        \"settings_link\": settings_link,\n                        \"isActive\": isActive,\n                        \"settings_label\": settings_label\n                    });\n                }\n            }\n        } catch (e) {\n\n        }\n        return items;\n    }\n\n    function getActiveTopics() {\n        var _count = 0;\n        if (GlidePluginManager.isActive(\"com.glide.cs.chatbot\") || GlidePluginManager.isActive(\"com.glide.cs.chatbot.lite\")) {\n            var gr = new GlideAggregate('sys_cs_topic');\n            gr.addQuery(\"is_system_topic\", false);\n            gr.addQuery(\"type\", \"!=\", \"TOPIC_BLOCK\");\n            gr.addQuery(\"type\", \"!=\", \"SETUP_TOPIC\");\n            gr.addQuery(\"active\", true);\n            gr.addAggregate(\"COUNT\");\n            gr.query();\n            _count = gr.next() ? gr.getAggregate('COUNT') : 0;\n        }\n        return _count;\n    }\n\n    function processData() {\n        advancedStageData[\"right_nav_links\"].forEach(function(rightnavData) {\n            if (rightnavData[\"pluginId\"] && rightnavData[\"pluginId\"] != \"\") {\n                if (GlidePluginManager.isActive(rightnavData[\"pluginId\"])) {\n                    rightnavData[\"actions\"] = rightnavData[\"after_install\"];\n                } else\n                    rightnavData[\"actions\"] = rightnavData[\"before_install\"];\n            }\n        });\n    }\n\n    var queAndAnsData = [{\n        \"Question\": gs.getMessage(\"How do you currently handle incoming user requests?\"),\n        \"Answer\": gs.getMessage(\"You might currently support user requests with agents on the phone or even responding to them via email. You might also have a system in place to track incoming requests. Think about your current support methods and how your company will make the transition as you move to implement a more centralized and automated chat system.\")\n    }, {\n        \"Question\": gs.getMessage(\"What type of agents do you want to handle these requests?\"),\n        \"Answer\": gs.getMessage(\"There are two types of agents that can assist with user requests: virtual and human agents. Virtual agents can handle common requests by using prebuilt topics, freeing up your human agents to work on the more complicated requests. Decide if you want to support one or both types of agents in your company.\")\n    }, {\n        \"Question\": gs.getMessage(\"Where do you want to offer support to your users?\"),\n        \"Answer\": gs.getMessage(\"You aren't limited to offering support on just one channel. Your virtual and human agents can meet users where they are, like an employee portal or third-party messaging app (like Microsoft Teams). Think about where your users are most likely to need help so you can meet them where they're at.\")\n    }, {\n        \"Question\": gs.getMessage(\"What types of information do you have to support your users?\"),\n        \"Answer\": gs.getMessage(\"Users may need different types of information to help solve a particular request. They may need a status update, a method for ordering something, or even step-by-step guidance. Consider setting up a knowledgebase or adding catalog items ahead of time to assist the needs of all users.\")\n    }, {\n        \"Question\": gs.getMessage(\"What do you want to achieve by deploying a virtual agent?\"),\n        \"Answer\": gs.getMessage(\"There are many reasons you may want to deploy a virtual agent: to reduce costs, deflect common requests, or offer users a convenient way to get support (self-service or otherwise). Think about what outcomes you want to achieve as you build your virtual agent this will help you craft one with purpose.\")\n    }];\n    var res = {};\n\tvar active_topics = \"\";\n    if (!GlidePluginManager.isActive(\"com.glide.cs.chatbot\")) {\n        res = {\n            \"stage\": \"Beginner\",\n\t\t\t\"active_topics\": \"View your bot's topics\"\n        };\n    } else {\n        active_topics = getActiveTopics();\n        var topics_msg = gs.getMessage(\"See what defaults you have\");\n        if (active_topics != \"0\")\n            topics_msg = gs.getMessage(\"{0} active topics\", [active_topics]);\n        var advancedStageData = {\n        \"stage\": \"Advanced\",\n        \"title\": gs.getMessage(\"Now, see your bot in action on a portal\"),\n        \"description\": gs.getMessage(\"Select which portal to integrate with your bot. If you've already integrated them, you can open that portal to see a working version of your bot.\"),\n        \"select_label\": gs.getMessage(\"Select a portal\"),\n        \"open_label\": gs.getMessage(\"Open portal\"),\n        \"portals\": getPortals(),\n        \"active_topics\": topics_msg,\n        \"right_nav_title\": gs.getMessage(\"Keep improving your bot\"),\n        \"right_nav_links\": [{\n                \"title\": gs.getMessage(\"Refine and test topics\"),\n                \"tooltip\": gs.getMessage(\"\"),\n                \"actions\": {\n                    \"link_text\": gs.getMessage(\"Go to VA Designer\"),\n                    \"link_url\": \"/$conversation-builder.do\"\n                }\n            },\n            {\n                \"title\": gs.getMessage(\"Get suggestions for topics\"),\n                \"tooltip\": gs.getMessage(\"\"),\n                \"pluginId\": \"com.snc.va_topic_recommender\",\n                \"actions\": {},\n                \"before_install\": {\n                    \"link_text\": gs.getMessage(\"Run Topic Recommendations\"),\n                    \"link_url\": \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/87c995fd53d21010a813ddeeff7b12e1\",\n                },\n                \"after_install\": {\n                    \"link_text\": gs.getMessage(\"View Recommended Topics\"),\n                    \"link_url\": \"/nav_to.do?uri=%2F$topic-recommender.do%23%2Freports\",\n                }\n            },\n            {\n                \"title\": gs.getMessage(\"Analyze your bot's performance\"),\n                \"tooltip\": gs.getMessage(\"\"),\n                \"actions\": {},\n                \"pluginId\": \"sn_ci_analytics\",\n                \"before_install\": {\n                    \"link_text\": gs.getMessage(\"Get VA Analytics plugin\"),\n                    \"link_url\": \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/c53ca02a73c310108564b17afef6a7c0\",\n                },\n                \"after_install\": {\n                    \"link_text\": gs.getMessage(\"Go to VA Analytics\"),\n                    \"link_url\": \"/now/conversation/analytics/home\"\n                }\n            }\n        ]\n    };\n\n        if (GlidePluginManager.isActive(\"com.snc.itsm.virtualagent\") || GlidePluginManager.isActive(\"com.sn_csm.virtualagent\") || GlidePluginManager.isActive(\"com.sn_hr_virtual_agent\") || GlidePluginManager.isActive(\"com.sn_fsm.virtualagent\") || GlidePluginManager.isActive(\"com.snc.ppm_virtualagent\") || GlidePluginManager.isActive(\"com.sn_lg_virtual_agent\") || GlidePluginManager.isActive(\"com.sn_grc_virt_agent\") || GlidePluginManager.isActive(\"com.glide.isc_virtualagent\")) {\n            processData();\n            res = advancedStageData;\n        } else {\n            res = {\n                \"stage\": \"Exploration\",\n                \"active_topics\": topics_msg\n            };\n        }\n    }\n    res[\"que_and_ans\"] = queAndAnsData;\n    res[\"more\"] = gs.getMessage(\"See more\");\n    res[\"less\"] = gs.getMessage(\"Show less\");\n    res[\"topics_content\"] = gs.getMessage(\"Try your bot\");\n\tres[\"refresh_console\"] = gs.getMessage(\"Refresh console\");\n\tres[\"isChatbotLiteInstalled\"] = GlidePluginManager.isActive(\"com.glide.cs.chatbot.lite\");\n    res[\"isChatbotInstalled\"] = GlidePluginManager.isActive(\"com.glide.cs.chatbot\");\n\treturn res;\n\n\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c2a7835187123010a4a2c077f6cb0bc0","value":"c2a7835187123010a4a2c077f6cb0bc0"},"sys_update_name":"sys_ux_data_broker_transform_2266d4ba6d223810f8772a5d5011827b","api_name":"sn_ci_landing_exp.Landing Page Stage Resolver ","mutates_server_data":"false","name":"Landing Page Stage Resolver ","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Task Sys IDs\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get the filtered tasks selected in the typeahead multi component of the manual association page","sys_updated_on":"2023-10-03 21:23:35","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"22d9a7bf73b0b1103f3cc3ed8ff6a701","sys_updated_by":"admin","sys_created_on":"2023-08-28 23:49:45","sys_name":"De-Duplication Template Filter Tasks","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar taskIds = input.taskIds;\n\n\tvar limit = gs.getProperty('sn_cmdb_ws.dedupetemplate.max_task_query_limit');\n\n\t// if limit is not set or it is set to an invalid value, go with the default value of 50\n\tif (!limit || limit <= 0 ) {\n\t\t\tlimit = 50;\n\t}\n\n\t// we don't want to allow the user to put in an enormous IN query, so we will truncate the list\n\tvar slicedTasksIds = taskIds.slice(0, limit);\n\n\tvar gr = new GlideRecord('reconcile_duplicate_task');\n\tgr.addQuery('sys_id', 'IN', slicedTasksIds);\n\tgr.orderByDesc('sys_updated_on');\n\tgr.query();\n\n\tvar items = [];\n\n\twhile (gr.next()) {\n\t\t\tvar item = (new GetDedupeTaskInfo()).getTaskInfo(gr);\n\t\t\tif (item) {\n\t\t\t\t\titems.push(item);\n\t\t\t}\n\t}\n\n\tresult = {'items': items};\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"taskIds\",\r\n      \"label\": \"Task Sys IDs\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"json\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"Tasks selected in the typeahead multi\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_22d9a7bf73b0b1103f3cc3ed8ff6a701","api_name":"sn_cmdb_ws.De-Duplication Template Filter Tasks","mutates_server_data":"false","name":"De-Duplication Template Filter Tasks","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-30 21:06:12","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"239bfe8253f23110c10eddeeff7b128b","sys_updated_by":"admin","sys_created_on":"2023-11-30 20:07:33","sys_name":"Look Up Trigger Rule Tables","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var gr = new GlideRecord(\"sys_db_object\");\n\tvar triggerTables = [];\n\tgr.addEncodedQuery(\"name=task^ORsuper_class.name=task\");\n\tgr.query();\n\twhile(gr.next()) {\n\t\ttriggerTables.push({\n\t\t\tid: gr.getValue(\"name\"),\n\t\t\tlabel: gr.getValue(\"label\")\n\t\t});\n\t}\n\tvar grTrigger = new GlideRecord(\"trigger_rule_table_cfg\");\n\tgrTrigger.query();\n\twhile(grTrigger.next()) {\n\t\ttriggerTables.push({\n\t\t\tid: grTrigger.getValue(\"table\"),\n\t\t\tlabel: grTrigger.getValue(\"table\")\n\t\t});\n\t}\n\treturn triggerTables;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_239bfe8253f23110c10eddeeff7b128b","api_name":"sn_uib_on_call.Look Up Trigger Rule Tables","mutates_server_data":"false","name":"Look Up Trigger Rule Tables","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Optional Query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-09-22 12:07:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"23a997365379b01033cdddeeff7b1220","sys_updated_by":"admin","sys_created_on":"2021-08-10 04:27:15","sys_name":"CI Settings page properties (and translations)","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var tableName = input.table && input.table.trim();\n    if (!tableName) return {};\n\tvar sysId = input.sysId;\n\treturn new CIRecordPagePropsUtil().getPageProps(tableName, sysId, input.optional_query);\n\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"table\",\n    \"label\": \"Table name\",\n    \"description\": \"Table name\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"sysId\",\n    \"label\": \"Sys Id\",\n    \"description\": \"Sys Id\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"optional_query\",\n    \"label\": \"Optional Query\",\n    \"description\": \"Optional Query\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  }\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sys_ux_data_broker_transform_23a997365379b01033cdddeeff7b1220","api_name":"global.CI Settings page properties (and translations)","mutates_server_data":"false","name":"CI Settings page properties (and translations)","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Shift sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-10-25 14:12:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2419f71e43067110377050e01fb8f224","sys_updated_by":"admin","sys_created_on":"2023-10-25 12:19:17","sys_name":"Get roster member details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\treturn new sn_uib_on_call.OnCallMembersDetails().getRotasRostersMembers(input.rota_sys_id);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"rota_sys_id\",\r\n    \"label\": \"Shift sysId\",\r\n    \"description\": \"Shift sysId\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_2419f71e43067110377050e01fb8f224","api_name":"sn_uib_on_call.Get roster member details","mutates_server_data":"false","name":"Get roster member details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Interaction Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Query to filter records\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record Sys Ids\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Script to link multiple records with the interaction.","sys_updated_on":"2024-08-29 01:47:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"244feab3ef6782108a039f4cfd97d75c","sys_updated_by":"admin","sys_created_on":"2024-07-29 08:32:08","sys_name":"Associate Records To Interaction Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_created_by":"admin","sys_mod_count":"21","sys_tags":"","script":"function transform(input) {\n    if (!input.interactionSysId || (!input.recordSysIds && !input.query))\n        return;\n\n    let interactionSysId = input.interactionSysId;\n    let associatedRecordDisplayValue = '';\n    let associatedRecords = 0;\n\n    let taskGr = new GlideRecordSecure('task');\n    if (!input.recordSysIds)\n        taskGr.addEncodedQuery(input.query);\n    else\n        taskGr.addQuery('sys_id', 'IN', input.recordSysIds);\n    taskGr.query();\n    let selectedRecords = taskGr.getRowCount();\n\n    while (taskGr.next()) {\n        let documentTable = taskGr.getValue('sys_class_name');\n\n        let irrGr = new GlideRecordSecure('interaction_related_record');\n        irrGr.addQuery('interaction', interactionSysId);\n        irrGr.addQuery('document_table', documentTable);\n        irrGr.addQuery('task', taskGr.getUniqueValue());\n        irrGr.query();\n\n        if (irrGr.canCreate() && !irrGr.hasNext()) {\n            irrGr.interaction = interactionSysId;\n            irrGr.document_table = documentTable;\n            irrGr.task = taskGr.getUniqueValue();\n            irrGr.insert();\n            associatedRecordDisplayValue = taskGr.getDisplayValue();\n            associatedRecords++;\n        }\n    }\n\n    return {\n        'selectedRecords': selectedRecords,\n        'associatedRecordDisplayValue': associatedRecordDisplayValue,\n        'associatedRecords': associatedRecords,\n    };\n}","acl_failure_result":"","props":"[\n    {\n      \"name\": \"interactionSysId\",\n      \"label\": \"Interaction Sys Id\",\n      \"description\": \"Interaction Sys Id\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true\n    }, {\n      \"name\": \"recordSysIds\",\n      \"label\": \"Record Sys Ids\",\n      \"description\": \"Record Sys Ids\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true\n    }, {\n      \"name\": \"query\",\n      \"label\": \"Query\",\n      \"description\": \"Query to filter records\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_update_name":"sys_ux_data_broker_transform_244feab3ef6782108a039f4cfd97d75c","api_name":"sn_sow_interaction.Associate Records To Interaction Transform","mutates_server_data":"true","name":"Associate Records To Interaction Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Takes Topics list API response\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Topic response\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Topic data transformation from hierarchichal to list selector","sys_updated_on":"2023-01-30 11:40:34","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"250c03cc5338a1105841ddeeff7b12a4","sys_updated_by":"admin","sys_created_on":"2023-01-30 09:47:39","sys_name":"Topic data transformation from hierarchichal to list selector","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var obj = input.topicResponse;\n    var obj2 = {};\n    var level = 0;\n\n    function operation(object) {\n\n        var obji = {};\n        for (var i = 0; i < object.length; ++i) {\n            obji[object[i][\"id\"]] = {\n                \"id\": object[i][\"id\"],\n                \"label\": object[i][\"label\"]\n            };\n        }\n        obj2[\"level_\" + level] = obji;\n\n        var level_x = \"level_\" + level;\n        for (var _i = 0; _i < object.length; _i++) {\n            if (object[_i].children !== undefined && object[_i].children.length) {\n                level = level + 1;\n                // insert (reference : level) pair => obj2.level_x[i].reference = level;\n                obj2[level_x][object[_i][\"id\"]].reference = \"level_\" + level;\n                operation(object[_i].children);\n            }\n        }\n    }\n\n    operation(obj);\n    return obj2;\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"topicResponse\",\r\n  \"label\": \"Topic response\",\r\n  \"description\": \"Takes Topics list API response\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"json\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": []\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/92ed237304752210559073c06a02f7a0","value":"92ed237304752210559073c06a02f7a0"},"sys_update_name":"sys_ux_data_broker_transform_250c03cc5338a1105841ddeeff7b12a4","api_name":"global.Topic data transformation from hierarchichal to list selector","mutates_server_data":"false","name":"Topic data transformation from hierarchichal to list selector","output_schema":"[\r\n    {\r\n        \"name\": \"listSelectorObject\",\r\n        \"label\": \"List Selector Input Object\",\r\n        \"description\": \"Compatible object for List Selector\",\r\n        \"readOnly\": true,\r\n        \"fieldType\": \"json\"\r\n    }\r\n]","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Payload\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-02-11 07:28:15","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"25e04816c36101104b8e88c7c840ddc5","sys_updated_by":"admin","sys_created_on":"2022-02-10 09:09:34","sys_name":"ACE Set Control","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.payload) return [];\n\treturn new ACEAppBuilderUtil().setControl(input.payload);\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"payload\",\n      \"label\": \"Payload\",\n      \"description\": \"\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_25e04816c36101104b8e88c7c840ddc5","api_name":"sn_ace.ACE Set Control","mutates_server_data":"true","name":"ACE Set Control","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Library Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get list of run completed templates","sys_updated_on":"2023-09-24 22:32:25","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"26b8ab3c53d031108cabddeeff7b12d8","sys_updated_by":"admin","sys_created_on":"2023-07-25 19:27:11","sys_name":"Get list of run completed templates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"18","sys_tags":"","script":"function transform(input) {\n    var result = [];\n    var response = {};\n    var rdt = new GlideRecord('reconcile_duplicate_template_run');\n    if (input.librarySysId) {\n        rdt.addQuery('template.library', input.librarySysId);\n    }\n    rdt.addEncodedQuery('stateINcomplete,complete_with_errors,failed,canceled,cancel_requested');\n\trdt.orderByDesc('completed');\n\trdt.setLimit(100);\n    rdt.query();\n\n    while (rdt.next()) {\n        var templateDetail = {};\n        templateDetail['template_name'] = rdt.template.name.toString() + \" (\" +rdt.getValue(\"run_id\") + \")\";\n        templateDetail['template_class'] = getTableLabel(rdt.template.table.getDisplayValue());\n        templateDetail['template_run_sys_id'] = rdt.sys_id.toString();\n        templateDetail['template_run_state'] = rdt.state.toString();\n        templateDetail['template_run_state_display_value'] = rdt.state.getDisplayValue();\n        templateDetail['template_task_count'] = rdt.getValue('total');\n\t\ttemplateDetail['template_task_errors'] = rdt.getValue('errors');\n\t\ttemplateDetail['template_task_skipped'] = rdt.getValue('skipped');\n\t\ttemplateDetail['template_run_time'] = rdt.getDisplayValue('run_time');\n\t\ttemplateDetail['template_task_processed'] = rdt.getValue('processed');\n        result.push(templateDetail);\n    }\n\n    function getTableLabel(table) {\n        var dbo = new GlideRecord('sys_db_object');\n        dbo.addQuery('name', table);\n        dbo.query();\n        if (dbo.next()) {\n            return dbo.getValue('label');\n        }\n        return null;\n    }\n    response.templateDetails = result;\n    response.lastUpdatedInfoText = gs.getMessage(\"Last updated: {0}\", new GlideDateTime().getDisplayValue());\n    return response;\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"librarySysId\",\r\n      \"label\": \"Library Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"false\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_26b8ab3c53d031108cabddeeff7b12d8","api_name":"sn_cmdb_ws.Get list of run completed templates","mutates_server_data":"false","name":"Get list of run completed templates","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Related Lists Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-02-06 23:13:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"26cb1e09c3e50110f208ce72a740dddb","sys_updated_by":"admin","sys_created_on":"2022-02-06 23:13:08","sys_name":"Latest Refresh Requested","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar currentTimestamp = new GlideDateTime().getNumericValue();\n\treturn {\n\t\t\"latestRefreshRequest\": {\n\t\t\t\"timestamp\": currentTimestamp\n\t\t}\n\t};\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t  \"name\": \"relatedLists\",\r\n\t  \"label\": \"Related Lists Data\",\r\n\t  \"description\": \"\",\r\n\t  \"readOnly\": false,\r\n\t  \"fieldType\": \"object\",\r\n\t  \"mandatory\": true,\r\n\t  \"defaultValue\": \"\"\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_update_name":"sys_ux_data_broker_transform_26cb1e09c3e50110f208ce72a740dddb","api_name":"sn_sow_chg.Latest Refresh Requested","mutates_server_data":"false","name":"Latest Refresh Requested","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Article ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This transform data broker fetches the replacement article of an article if available.","sys_updated_on":"2022-06-14 09:25:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"26def212c3430110c92609c77d40dd51","sys_updated_by":"admin","sys_created_on":"2022-04-26 12:33:38","sys_name":"Get Replacement Article","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    if (input.articleId) {\n        var kbViewModel = new global.KBViewModel();\n        kbViewModel.findKnowledgeById(input.articleId);\n\n        var isValidRecord = kbViewModel.isValid;\n        var replacementArticleId = kbViewModel.knowledgeRecord.getUniqueValue();\n        var replacementArticleClass = kbViewModel.knowledgeRecord.getValue('sys_class_name');\n\n        while (isValidRecord && kbViewModel.hasReplacementAvailable()) {\n            replacementArticleId = kbViewModel.knowledgeRecord.getValue('replacement_article');\n            var latestReplacementArticle = kbViewModel.getLatestAccessibleVersionFromId(replacementArticleId);\n            var isLatest = (!gs.nil(latestReplacementArticle) && (latestReplacementArticle.getValue('version')!=kbViewModel.knowledgeRecord.getValue('version')));\n            replacementArticleId = isLatest? latestReplacementArticle.getValue('sys_id'):replacementArticleId;\n            kbViewModel = new global.KBViewModel();\n            kbViewModel.findKnowledgeById(replacementArticleId);\n            isValidRecord = kbViewModel.isValid;\n            replacementArticleClass = kbViewModel.knowledgeRecord.getValue('sys_class_name');\n        }\n\n        return {\n\t\t\t\"sysId\": replacementArticleId,\n\t\t\t\"class\": replacementArticleClass\n\t\t};\n    }\n\n    return null;\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"articleId\",\r\n  \"label\": \"Article ID\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_26def212c3430110c92609c77d40dd51","api_name":"sn_km_uib.Get Replacement Article","mutates_server_data":"false","name":"Get Replacement Article","output_schema":"[{\r\n    \"name\": \"replacementArticle\",\r\n    \"label\": \"Replacement Article\",\r\n    \"description\": \"The replacement article to this article after retirement.\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\"\r\n}]","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Interaction SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Knowledge Article SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysId of the Interaction record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysId of the knowledge article\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Check whether the interaction record is a Live Agents active chat record and determine whether the user has access to the knowledge record.","sys_updated_on":"2024-09-12 13:27:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2707fb5c436812108d82c8641ab8f248","sys_updated_by":"admin","sys_created_on":"2024-09-06 09:54:31","sys_name":"Check chat session and user kb access","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\treturn checkChatSessionAndUserKbAccess();\n\n\tfunction checkChatSessionAndUserKbAccess() {\n\t\tvar output = {};\n\t\tconst interactionSysId = input.interactionSysId;\n\t\tvar interactionGr = new GlideRecord('interaction');\n\t\tinteractionGr.get(interactionSysId);\n\t\tif (!interactionGr.canRead()) {\n\t\t\treturn output;\n\t\t}\n\n\t\t// check for live agent active chat session\n\t\toutput.isLiveAgentChatActive = checkActiveChatSession(interactionGr);\n\t\t// check for user kb access\n\t\toutput.userHasKbAccess = checkUserKbAccess(interactionGr, input.kbSysId);\n\n\t\treturn output;\n\t}\n\n\tfunction checkActiveChatSession(interactionGr) {\n\t\treturn interactionGr.type == 'chat' && interactionGr.agent_chat && interactionGr.active;\n\t}\n\n\tfunction checkUserKbAccess(interactionGr, kbSysId) {\n\t\tconst userSysId = getUserFromInteractionRecord(interactionGr);\n\t\tlet userHasKbAccess = false;\n\t\tconst knowledgeAPI = new global.KBCommon();\n\t\tif (userSysId) {\n\t\t\tuserHasKbAccess = knowledgeAPI.isViewAsUserHasArticleAccess(userSysId, kbSysId);\n\t\t} else {\n\t\t\tuserHasKbAccess = knowledgeAPI.checkGuestUserHasAccess(kbSysId);\n\t\t}\n\n\t\treturn userHasKbAccess;\n\t}\n\n\tfunction getUserFromInteractionRecord(interactionGr){\n\t\tlet userSysId = '';\n\t\tif (interactionGr.direction == 'inbound') {\n\t\t\tuserSysId = interactionGr.opened_for;\n\t\t} else {\n\t\t\tif (interactionGr.contact) {\n\t\t\t\tuserSysId = interactionGr.contact;\n\t\t\t} else if (interactionGr.consumer) {\n\t\t\t\tuserSysId = interactionGr.consumer.user;\n\t\t\t} else if (interactionGr.req_service_org) {\n\t\t\t\tuserSysId = interactionGr.opened_for;\n\t\t\t}\n\t\t}\n\n\t\treturn userSysId;\n\t}\n}","acl_failure_result":"{\r\n    \"message\":\"User does not have required ACL to perform this action.\"\r\n}","props":"[\r\n  {\r\n    \"name\": \"interactionSysId\",\r\n    \"label\": \"Interaction SysId\",\r\n    \"description\": \"SysId of the Interaction record\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"kbSysId\",\r\n    \"label\": \"Knowledge Article SysId\",\r\n    \"description\": \"SysId of the knowledge article\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e2f73b3304f52210559073c06a02f7a0","value":"e2f73b3304f52210559073c06a02f7a0"},"sys_update_name":"sys_ux_data_broker_transform_2707fb5c436812108d82c8641ab8f248","api_name":"sn_guidances.Check chat session and user kb access","mutates_server_data":"false","name":"Check chat session and user kb access","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get the count of the de-duplication tasks that aren't assigned to a template based on the calculated suggested table","sys_updated_on":"2023-10-03 21:58:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"270f1c6f736931103f3cc3ed8ff6a709","sys_updated_by":"admin","sys_created_on":"2023-10-03 21:05:07","sys_name":"De-Duplication Template Get orphan count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\tvar result = {\n\t\tcount: 0,\n\t\tlabel: gs.getMessage('Orphan de-duplication tasks')\n\t};\n\n\tvar ga = new GlideAggregate('sn_cmdb_ws_reconcile_duplicate_template_suggested_task');\n\tga.addEncodedQuery('state=2^templateISEMPTY');\n\n\t// check if we want to show only open tasks\n\tif ((new GetDedupeTaskInfo()).showOnlyOpenTasks()) {\n\t\tga.addEncodedQuery('task.state=1');\n\t}\n\n\tga.addAggregate('COUNT');\n\tga.query();\n\tif (ga.next())\n\t\tresult.count = parseInt(ga.getAggregate('COUNT'));\n\n\treturn result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_270f1c6f736931103f3cc3ed8ff6a709","api_name":"sn_cmdb_ws.De-Duplication Template Get orphan count","mutates_server_data":"false","name":"De-Duplication Template Get orphan count","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"FilterId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-10-07 10:43:21","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"27f946977fc05210b23326d6ac86656c","sys_updated_by":"admin","sys_created_on":"2024-08-21 13:12:55","sys_name":"Get Deployment Channel List","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n      try {\n        if(gs.nil(input.filterId)){\n          return [];\n        }\n        var result = [];\n        var nowAssistGuardianFilterUtil = new sn_nowassist_admin.NowAssistGuardianFilterUtil();\n        result = nowAssistGuardianFilterUtil.getVADeploymentChannels(input.filterId);\n        \n        return result;\n\n      } catch (e) {\n        gs.error('NowAssistSkillConfig: Unable to fetch skill virtual Agent for filters: ' + e.toString());\n        return [];\n      }\n\n}","acl_failure_result":"","props":"[\n {\n        \"name\": \"filterId\",\n        \"label\": \"FilterId\",\n        \"description\": \"FilterId\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_27f946977fc05210b23326d6ac86656c","api_name":"sn_nowassist_admin.Get Deployment Channel List","mutates_server_data":"false","name":"Get Deployment Channel List","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Payload of row selection, coming from selected record count updated\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Row selection payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected sysIds of DM policy runtime attributes\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"comma separated Sys IDs of DM policy runtime attributes\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Deletes the selected policies","sys_updated_on":"2024-06-14 22:05:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2806dfdf535331101152ddeeff7b1290","sys_updated_by":"admin","sys_created_on":"2023-12-29 15:38:49","sys_name":"Data Manager Delete Policies","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    var wrapperFunction = function() {\n        var recordSelection = input.recordSelection;\n        var encodedQuery = \"\";\n        if (recordSelection.allRecordsSelected) {\n          encodedQuery = recordSelection.fixedFilter + '^' + recordSelection.query;\n        }\n        var proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n        var DM = new CMDBWsDMConstants();\n        var isDeletePoliciesActionScheduled = false;\n        if (recordSelection.selectionCount <= DM.UI_DEFAULT_LIMIT.DM_DELETE_POLICY) {\n          proxy.deleteSelectedPolicies(encodedQuery, recordSelection.selectedRecords);\n        } else {\n          proxy.markPoliciesForDeletion(encodedQuery, recordSelection.selectedRecords);\n          isDeletePoliciesActionScheduled = true;\n        }\n        return {\n          \"isDeletePoliciesActionScheduled\": isDeletePoliciesActionScheduled\n        };\n\t};\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Delete Policies\", wrapperFunction);\n}","acl_failure_result":"","props":"[{\r\n \"name\": \"sysIds\",\r\n  \"label\": \"Selected sysIds of DM policy runtime attributes\",\r\n  \"description\": \"comma separated Sys IDs of DM policy runtime attributes\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n \"defaultValue\": \"\"\r\n},\r\n{\r\n    \"name\": \"recordSelection\",\r\n    \"label\": \"Row selection payload\",\r\n    \"fieldType\": \"json\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Payload of row selection, coming from selected record count updated\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_2806dfdf535331101152ddeeff7b1290","api_name":"sn_cmdb_ws.Data Manager Delete Policies","mutates_server_data":"true","name":"Data Manager Delete Policies","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Extra Sources\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Should fetch\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Source sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Source table name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Target Language\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Target table name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Target table sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Invoke Gen AI API to generate content for an article","sys_updated_on":"2024-09-06 06:55:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"28ae3e788368065039fd5defeeaad329","sys_updated_by":"admin","sys_created_on":"2024-03-06 18:31:57","sys_name":"Generate Article Content with Gen AI","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(params) {\n    if (!GlidePluginManager.isActive(\"sn_km_gen_ai\"))\n        return {\n            success: false\n        };\n\n    if (gs.nil(params) || gs.nil(params.source_table) || gs.nil(params.target_table) || gs.nil(params.should_fetch) || params.should_fetch === false || gs.nil(params.target_table_sys_id))\n        return {\n            success: false\n        };\n\n    var inputTasks = [];\n    var inputTable = params.source_table;\n\n    if (!gs.nil(params.source_sys_id)) {\n        inputTasks.push(params.source_sys_id);\n    }\n    if (!gs.nil(params.extra_sources)) {\n        for (var id in params.extra_sources) {\n            inputTasks.push(id);\n        }\n    }\n\n    var proceed = false;\n    if (inputTasks.length > 0) {\n        var sourceGr = new GlideRecord(params.source_table);\n        if (sourceGr.get(inputTasks[0])) {\n            inputTable = sourceGr.getValue('sys_class_name');\n            proceed = true;\n        }\n    }\n\n    if (!proceed) {\n        return {\n            success: false\n        };\n    }\n\n\tvar targetLanguage = params.target_language;\n\ttargetLanguage = (targetLanguage != '') ? targetLanguage : null;\n\n    var answer = null;\n\n    if (inputTasks.length === 1) {\n        answer = new sn_km_gen_ai.KMNowAssistInProductUtils().generateArticleFields(inputTable, inputTasks[0], params.target_table, params.target_table_sys_id, 'Workspace', targetLanguage);\n\n        return {\n            success: true,\n\t\t\tisAsync: false,\n            content: answer\n        };\n    } else if (inputTasks.length <= 6) {\n        answer = new sn_km_gen_ai.KMNowAssistInProductUtils().generateMultiTaskArticleFields(inputTasks, params.source_table, params.target_table, params.target_table_sys_id, 'Workspace', targetLanguage);\n        return {\n            success: true,\n\t\t\tisAsync: true,\n            content: params.target_table_sys_id\n        };\n    }\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"source_table\",\n        \"label\": \"Source table name\",\n        \"description\": \"Source table name\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n    {\n        \"name\": \"source_sys_id\",\n        \"label\": \"Source sys ID\",\n        \"description\": \"Source sys ID\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": false,\n        \"defaultValue\": \"\"\n    },\n {\n        \"name\": \"target_table\",\n        \"label\": \"Target table name\",\n        \"description\": \"Target table name\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n {\n        \"name\": \"target_table_sys_id\",\n        \"label\": \"Target table sys ID\",\n        \"description\": \"Target table sys ID\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n {\n        \"name\": \"extra_sources\",\n        \"label\": \"Extra Sources\",\n        \"description\": \"Extra Sources\",\n        \"readOnly\": false,\n        \"fieldType\": \"object\",\n        \"mandatory\": false,\n        \"defaultValue\": \"\"\n    },\n {\n        \"name\": \"should_fetch\",\n        \"label\": \"Should fetch\",\n        \"description\": \"Should fetch\",\n        \"readOnly\": false,\n        \"fieldType\": \"boolean\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n {\n        \"name\": \"target_language\",\n        \"label\": \"Target Language\",\n        \"description\": \"Target Language\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_28ae3e788368065039fd5defeeaad329","api_name":"sn_km_uib.Generate Article Content with Gen AI","mutates_server_data":"false","name":"Generate Article Content with Gen AI","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Table name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"fetches profiles for a specific definition","sys_updated_on":"2023-04-19 17:24:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"28d9afa9eb122510da1861c59c522860","sys_updated_by":"admin","sys_created_on":"2023-04-19 17:24:10","sys_name":"Get profiles for definition","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/31774a2953839110a6f8ddeeff7b12cb","value":"31774a2953839110a6f8ddeeff7b12cb"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var tableName = input.table && input.table.trim();\n\tvar sysId = input.sysId && input.sysId.trim();\n    if (!tableName || !sysId) return {};\n\treturn new sn_instance_clone.AdminCloneUtil().getCloneProfilesForDefinition(tableName,sysId);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"table\",\r\n    \"label\": \"Table name\",\r\n    \"description\": \"Table name\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n {\r\n    \"name\": \"sysId\",\r\n    \"label\": \"sysId\",\r\n    \"description\": \"sysId\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/31774a2953839110a6f8ddeeff7b12cb","value":"31774a2953839110a6f8ddeeff7b12cb"},"sys_update_name":"sys_ux_data_broker_transform_28d9afa9eb122510da1861c59c522860","api_name":"sn_instance_clone.Get profiles for definition","mutates_server_data":"false","name":"Get profiles for definition","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Record Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Checks if the user has permission to read the record","sys_updated_on":"2024-06-20 08:48:32","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2902883653062110ad0fddeeff7b1200","sys_updated_by":"admin","sys_created_on":"2023-04-10 11:28:03","sys_name":"Check sidebar user permission","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","sys_mod_count":"21","sys_tags":"","script":"function transform(input) {\n    var output = {\n        hasReadAcccess: false,\n        isSidebarSupportedOnSOW: false,\n        hasRecordWriteAccess: false\n    };\n    if (!input.userId || !input.recordSysId || !input.table)\n        return output;\n    var sidebarChatUtilsGr = new sn_sow_collab.SOWSidebarChatUtils();\n    var recordGr = new GlideRecord(input.table);\n    if (recordGr.get(input.recordSysId)) {\n        output.hasRecordWriteAccess = recordGr.canWrite();\n        output.hasReadAcccess = sidebarChatUtilsGr.hasPermission(input.userId, input.recordSysId, input.table);\n        output.isSidebarSupportedOnSOW = sidebarChatUtilsGr.isSidebarSupportedOnSOW(input.table, input.recordSysId);\n    }\n    return output;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"userId\",\r\n        \"label\": \"User Id\",\r\n        \"description\": \"User Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"recordSysId\",\r\n        \"label\": \"Record Sys ID\",\r\n        \"description\": \"Record Sys Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"table\",\r\n        \"label\": \"Table\",\r\n        \"description\": \"Table\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": false\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sys_ux_data_broker_transform_2902883653062110ad0fddeeff7b1200","api_name":"sn_sow.Check sidebar user permission","mutates_server_data":"false","name":"Check sidebar user permission","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Change request sys id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Key value pairs\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Planned start date display value\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-10-01 16:47:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2910eabb43892110cd5b8beeaab8f23f","sys_updated_by":"admin","sys_created_on":"2023-02-23 08:24:49","sys_name":"SOW Remediate update change","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_created_by":"admin","sys_mod_count":"19","sys_tags":"","script":"function transform(inputs) {\n    var changeRemedialActionUtil = new sn_sow_inc.ChangeRemedialActionUtil();\n    return changeRemedialActionUtil.updateChangeWithAuthorization(inputs.sysId, inputs.keyValuePairs);\n}","acl_failure_result":"","props":"[{\r\n    \"name\": \"sysId\",\r\n    \"label\": \"Sys Id\",\r\n    \"description\": \"Change request sys id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"keyValuePairs\",\r\n    \"label\": \"Key value pairs\",\r\n    \"description\": \"Planned start date display value\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_update_name":"sys_ux_data_broker_transform_2910eabb43892110cd5b8beeaab8f23f","api_name":"sn_sow_inc.SOW Remediate update change","mutates_server_data":"true","name":"SOW Remediate update change","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"The workspace Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Workspace Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"array of user preferences\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-15 02:49:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"295c14137f681210489402c9ec8665dc","sys_updated_by":"admin","sys_created_on":"2024-09-15 01:36:17","sys_name":"Lookup User Preferences by workspaceId","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n\tvar preferences = input.preferences.split(\",\");\n\tvar workspaceId = input.workspaceId;\n\tvar result = {};\n\tpreferences.forEach(function(key) {\n\t\tvar currentKey = key + \"_\" + workspaceId;\n\t\tvar prefValue = gs.getUser().getPreference(currentKey);\n\t\tresult[currentKey] = prefValue;\n\t});\n\treturn result;\n}","acl_failure_result":"","props":"[{\r\n    \"name\": \"preferences\",\r\n    \"label\": \"array of user preferences\",\r\n    \"description\": \"\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n\t}, \n    {\r\n    \"name\": \"workspaceId\",\r\n    \"label\": \"Workspace Id\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"The workspace Id\"\r\n\t}\r\n]\r\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_295c14137f681210489402c9ec8665dc","api_name":"sn_cmdb_ws.Lookup User Preferences by workspaceId","mutates_server_data":"false","name":"Lookup User Preferences by workspaceId","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Experience Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Properties for the Activity UI Macroponent content\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Transform context properties to format expected by List card","sys_updated_on":"2021-11-19 01:38:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2afce6f9c3123010948404186e40dd88","sys_updated_by":"admin","sys_created_on":"2021-08-31 19:06:26","sys_name":"Playbook Experience List Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\tvar experienceProperties = input.experienceProperties || {};\n\tvar maxColumns = (experienceProperties.max_columns || {}).value || \"\";\n\tvar rowCount = (experienceProperties.row_count || {}).value || \"\";\n\tvar listTitle = (experienceProperties.list_title || {}).value || \"\";\n\t\n\treturn {\n\t\tmaxColumns: parseInt(maxColumns) || 0,\n\t\trowCount: parseInt(rowCount) || 0,\n\t\thideListTitle: !listTitle\n\t};\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"experienceProperties\",\n    \"label\": \"Experience Properties\",\n    \"description\": \"Properties for the Activity UI Macroponent content\",\n    \"readOnly\": false,\n    \"fieldType\": \"json\",\n    \"mandatory\": true\n  }\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_update_name":"sys_ux_data_broker_transform_2afce6f9c3123010948404186e40dd88","api_name":"sn_playbook_exp.Playbook Experience List Properties","mutates_server_data":"false","name":"Playbook Experience List Properties","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get benchmark user roles count","sys_updated_on":"2024-08-26 09:37:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2bbb3d399314421066b7f683338918c8","sys_updated_by":"admin","sys_created_on":"2024-02-12 10:13:23","sys_name":"Get benchmark roles count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_created_by":"admin","sys_mod_count":"14","sys_tags":"","script":"function transform(input) {\n    var roles = new sn_sd.SDRolesUtility().getBMRolesList();\n    var gr = new GlideAggregate('sys_user_has_role');\n    gr.addEncodedQuery(\"role.sys_idIN\" + roles.join(\",\"), true);\n    gr.addAggregate('COUNT(DISTINCT', 'user');\n\tgr.setGroup(false);\n    gr.query();\n    var count = 0;\n    if (gr.next())\n        count = gr.getAggregate('COUNT(DISTINCT','user');\n    return count;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_update_name":"sys_ux_data_broker_transform_2bbb3d399314421066b7f683338918c8","api_name":"sn_sd.Get benchmark roles count","mutates_server_data":"false","name":"Get benchmark roles count","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id of the critical update record\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Show number of steps completed for a critical update experience","sys_updated_on":"2025-03-04 22:06:57","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2c7ef26743043110adf71f062bb8f20e","sys_updated_by":"admin","sys_created_on":"2023-07-21 19:08:39","sys_name":"Critical Update Steps completed","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var returnObj = new global.CriticalUpdateUtil().getCAStepCount(input.sys_id);\n    return returnObj;\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"sys_id\",\r\n      \"label\": \"Sys Id\",\r\n      \"description\": \"Sys Id of the critical update record\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/983e67b304752210559073c06a02f755","value":"983e67b304752210559073c06a02f755"},"sys_update_name":"sys_ux_data_broker_transform_2c7ef26743043110adf71f062bb8f20e","api_name":"global.Critical Update Steps completed","mutates_server_data":"false","name":"Critical Update Steps completed","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"This is a dummy script, just to get our texts picked up by translations team in their scan , this will avoid creating multiple sys_ui_message records","sys_updated_on":"2024-10-09 06:59:42","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2ddbf08b7f01121061d13705bc866573","sys_updated_by":"admin","sys_created_on":"2024-10-09 05:44:49","sys_name":"Get Custom Translations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n\n\t\ttry {\n\t\t\tvar custom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Number of actions\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Number of actions over time\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Number of users who used Gen AI actions per day\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Gen AI Actions per day\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Avg number of unique users per day who triggered actions\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"The total number of actions completed using Now Assist in the date range selected\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Active Skills performance\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Gen AI Avg response time per day\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Number of Generative AI Calls\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Number of unique users per day\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Average task completion time per day\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Task completion over time\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Total no. of tasks completed\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Avg. unique users per day who used skills\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"The average number of unique users per day who used Now Assist skills\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"The total number of tasks completed using Now Assist in the date range selected\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"The number of tasks completed using Now Assist per day over a selected date range\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"The average amount of time it takes for a task to be completed per day\");\n\t\t\tcustom_translation = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Skill usage\");\n\n\t\t\treturn custom_translation;\n\t\t}\n\n\t\t\n\t\tcatch (e) {\n            gs.error('Error occured in translations');\n        return [];\n      }\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_2ddbf08b7f01121061d13705bc866573","api_name":"sn_nowassist_admin.Get Custom Translations","mutates_server_data":"false","name":"Get Custom Translations","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"gformLastRefresh\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-03 19:21:23","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2df9404f530230108e4dddeeff7b12fa","sys_updated_by":"admin","sys_created_on":"2021-08-22 18:03:12","sys_name":"SOW Record Information","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"function transform(input) {\n    var table = input.table;\n    var gr = new GlideRecord(table);\n    if (gr.get(input.sysId) && gr.canRead()) {\n        if (table == 'incident' || table == 'interaction') {\n            var recordInfo = new sn_sow_inc.SOWIncidentInfo(gr);\n            return recordInfo.getRecordInfo();\n        }\n    }\n    return {};\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"gformLastRefresh\",\r\n  \"label\": \"gformLastRefresh\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"integer\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_2df9404f530230108e4dddeeff7b12fa","api_name":"sn_sow_itsm_common.SOW Record Information","mutates_server_data":"false","name":"SOW Record Information","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Date Type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Id of type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Metric\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Metric to search on\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Type: class, service, group\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-08 16:10:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2dfde36177237110327bf350ff5a99de","sys_updated_by":"admin","sys_created_on":"2024-01-05 17:12:04","sys_name":"Health Dashboard Get Sub Metrics","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"18","sys_tags":"","script":"function transform(input) {\n\n\tvar util = new sn_cmdb_ws.CMDBWsHealthDashboardUtil();\n\tvar id = input.id;\n\tvar dataType = input.dataType;\n\tvar metric = input.metric;\n\treturn util.getSubMetrics(dataType,id,metric);\n\n}","acl_failure_result":"","props":"[\r\n    {\r\n      \"name\": \"dataType\",\r\n      \"label\": \"Date Type\",\r\n      \"description\": \"Type: class, service, group\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false\r\n    },\r\n   {\r\n      \"name\": \"id\",\r\n      \"label\": \"ID\",\r\n      \"description\": \"Id of type\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false\r\n    },\r\n   {\r\n      \"name\": \"metric\",\r\n      \"label\": \"Metric\",\r\n      \"description\": \"Metric to search on\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false\r\n    }\r\n ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_2dfde36177237110327bf350ff5a99de","api_name":"sn_cmdb_ws.Health Dashboard Get Sub Metrics","mutates_server_data":"true","name":"Health Dashboard Get Sub Metrics","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Ace app config Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Ace app config id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-02-16 13:41:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2e0e0da76ba50110da18ec188e44af02","sys_updated_by":"admin","sys_created_on":"2022-02-14 11:57:59","sys_name":"fetch search config","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n\treturn new ACEAppBuilderUtil().fetchSearchConfig(input.aceAppConfig);\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"aceAppConfig\",\n    \"label\": \"Ace app config Id\",\n    \"description\": \"Ace app config id\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_2e0e0da76ba50110da18ec188e44af02","api_name":"sn_ace.fetch search config","mutates_server_data":"false","name":"fetch search config","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Action Attributes\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Checkbox Value\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Condition Logic\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Removed Condition Model Ids\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Removed Conditions Ids\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Removed Notifications Ids\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Removed Notifications Model Ids\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected Conditions Ids\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"data object containing conditions action attributes\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"object containing checkbox values\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"object containing condition logic of the policy\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys_id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update policy conditions glide variables within the action_attributes","sys_updated_on":"2024-09-18 23:11:45","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2ec56a84c9e20210f877b0376c20b3d9","sys_updated_by":"admin","sys_created_on":"2024-05-28 23:09:33","sys_name":"Update Policy Conditions Action Attributes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"54","sys_tags":"","script":"function transform(input) {\n    var policyManager = new sn_vsc.SecurityPoliciesManager();\n    var resultData = input.action_attributes || {};\n    var checkboxData = input.checkbox_value || {};\n    var id = input && input.sys_id;\n    var removedConditionsIds = input.removed_conditions_ids || [];\n    var removedNotificationsIds = input.removed_notifications_ids || [];\n    var condition_logic = input.condition_logic || \"\";\n    var selectedConditionWithoutValues = input.selected_condition_ids || [];\n    var sysId = [];\n    var columnName = \"\";\n    var commaSeparatedIds = \"\";\n    var columnsData = {};\n    var policyConditionTableName = \"sn_vsc_security_policy_condition\";\n\n    if (selectedConditionWithoutValues.length > 0) {\n        for (var selectedConditionId in selectedConditionWithoutValues) {\n            insertOrUpdatePolicy(selectedConditionWithoutValues[selectedConditionId], \"\", \"\", policyConditionTableName);\n        }\n    }\n\n    for (var modelIdVal in checkboxData) {\n        if (checkboxData[modelIdVal] == true) {\n            var actionInputObjVal = new GlideRecord(\"sys_hub_action_input\");\n            if (actionInputObjVal.get(\"model_id\", modelIdVal)) {\n                columnName = actionInputObjVal.getDisplayValue(\"element\");\n            }\n            commaSeparatedIds = \"\";\n        }\n        insertOrUpdatePolicy(modelIdVal, commaSeparatedIds, columnName, policyConditionTableName);\n    }\n\n    for (var modelIdObj in resultData) {\n        var modelId = modelIdObj.split(\",\")[0];\n        var resultObj = resultData[modelId];\n        modelId = modelId.split(\"_\")[0];\n        var actionInputObj = new GlideRecord(\"sys_hub_action_input\");\n        actionInputObj.addEncodedQuery(\"model_id=\" + modelId, true);\n        actionInputObj.query();\n        var newRecordSysId = resultObj[\"policy_action_sys_id\"];\n        // To allow multiple notifications to be added for the same policy, we would need to update/create records accordingly\n        var notificationSysId = resultObj[\"policy_action_sys_id\"];\n        var isNewEntry = resultObj[\"create_new_entry\"];\n        while (actionInputObj.next()) {\n            commaSeparatedIds = \"\";\n            columnName = actionInputObj.getDisplayValue(\"element\");\n            // Need to check if the user has not touched the pre-existing values. \n            if (resultData[modelIdObj][columnName]) {\n                var variablesData = resultData[modelIdObj][columnName][\"value\"];\n                var tableToUpdate = resultData[modelIdObj][columnName][\"tableToUpdate\"];\n                sysId = [];\n                if (variablesData) {\n                    for (var value in variablesData) {\n                        var attributeId = variablesData[value].id;\n                        if (attributeId) {\n                            sysId.push(attributeId);\n                        }\n                    }\n                }\n\n                if (sysId.length) {\n                    commaSeparatedIds = sysId.map(String).join(', ').toString();\n                }\n\n                // The column name needs to be passed so we can update same model for different fields ( when we have more than one param inside single condition/notification)\n                // Specially a case for when same type of notification is added for a given policy.\n                if (newRecordSysId) {\n                    insertOrUpdatePolicy(modelId, commaSeparatedIds, columnName, tableToUpdate, newRecordSysId, false);\n                } else {\n                    newRecordSysId = insertOrUpdatePolicy(modelId, commaSeparatedIds, columnName, tableToUpdate, notificationSysId, isNewEntry);\n                }\n            }\n        }\n    }\n\n    // Update conditions/notifications for the policy\n    function insertOrUpdatePolicy(modelSysId, commaSeparatedIds, columnToUpdate, tableToUpdate, recordSysId, createNewEntry) {\n        var gr = new GlideRecord(tableToUpdate);\n        if (recordSysId) {\n            gr.get(recordSysId);\n        } else {\n            gr.addEncodedQuery(\"action_type=\" + modelSysId + \"^policy=\" + id, true);\n        }\n        gr.query();\n        // We might end up receiving multiple notifications for the same policy. So in those cases the 'createNewEntry' will decide to create new or not\n        if (gr.next() && !createNewEntry) {\n            gr.action_attributes[columnToUpdate] = commaSeparatedIds;\n            gr.update();\n        } else {\n            //insert condition/notification\n            var insertGr = new GlideRecord(tableToUpdate);\n            insertGr.initialize();\n            insertGr.policy = id;\n            insertGr.action_type = modelSysId;\n            insertGr.action_attributes[columnToUpdate] = commaSeparatedIds;\n            insertGr.insert();\n            return insertGr.getValue('sys_id');\n        }\n    }\n\n    if (removedConditionsIds && removedConditionsIds.length) {\n        // Delete conditions for the policy when removed button is clicked\n        for (var i = 0; i < removedConditionsIds.length; i++) {\n            var removeConditionsGr = new GlideRecord('sn_vsc_security_policy_condition');\n            removeConditionsGr.addQuery(\"action_type\", removedConditionsIds[i]);\n            removeConditionsGr.addQuery(\"policy\", id);\n            removeConditionsGr.query();\n            if (removeConditionsGr.next()) {\n                removeConditionsGr.deleteRecord();\n            }\n        }\n    }\n\n    if (removedNotificationsIds && removedNotificationsIds.length) {\n        // Delete notifications for the policy when removed button is clicked\n        for (var j = 0; j < removedNotificationsIds.length; j++) {\n            var removeNotificationGr = new GlideRecord('sn_vsc_security_policy_action');\n            removeNotificationGr.addQuery(\"sys_id\", removedNotificationsIds[j]);\n            removeNotificationGr.query();\n            if (removeNotificationGr.next()) {\n                removeNotificationGr.deleteRecord();\n            }\n        }\n    }\n\n    if (condition_logic) {\n        var gr = new GlideRecord(\"sn_vsc_security_policy\");\n        if (gr.get(id)) {\n            gr.setValue(\"events_criteria_type\", condition_logic);\n            gr.update();\n        }\n    }\n\n    policyManager.updatePolicyConfigureValue(id);\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"action_attributes\",\r\n  \"label\": \"Action Attributes\",\r\n  \"description\": \"data object containing conditions action attributes\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"object\",\r\n  \"mandatory\": false\r\n},\r\n{\r\n    \"name\": \"sys_id\",\r\n    \"label\": \"sys_id\",\r\n    \"description\": \"ID\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false\r\n  },\r\n{\r\n    \"name\": \"removed_conditions_ids\",\r\n    \"label\": \"Removed Conditions Ids\",\r\n    \"description\": \"Removed Condition Model Ids\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"array\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"[]\"\r\n  },\r\n{\r\n    \"name\": \"removed_notifications_ids\",\r\n    \"label\": \"Removed Notifications Ids\",\r\n    \"description\": \"Removed Notifications Model Ids\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"array\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"[]\"\r\n  },\r\n{\r\n    \"name\": \"selected_condition_ids\",\r\n    \"label\": \"Selected Conditions Ids\",\r\n    \"description\": \"Selected Conditions Ids\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"array\",\r\n    \"mandatory\": false\r\n  },\r\n {\r\n  \"name\": \"checkbox_value\",\r\n  \"label\": \"Checkbox Value\",\r\n  \"description\": \"object containing checkbox values\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"object\",\r\n  \"mandatory\": false\r\n},\r\n {\r\n  \"name\": \"condition_logic\",\r\n  \"label\": \"Condition Logic\",\r\n  \"description\": \"object containing condition logic of the policy\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_2ec56a84c9e20210f877b0376c20b3d9","api_name":"sn_vsc.Update Policy Conditions Action Attributes","mutates_server_data":"false","name":"Update Policy Conditions Action Attributes","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"EVAM Broker\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Graphql Query Output\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Used to transform EVAM data to fit design of Next Experience landing page data row cards.","sys_updated_on":"2024-03-14 09:53:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2f6c9b781b213010d46eea48624bcb2f","sys_updated_by":"maint","sys_created_on":"2021-07-22 13:04:43","sys_name":"Data row evam broker - My Approvals","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/ead9fb5f8b27a051aa71b35163745b82","value":"ead9fb5f8b27a051aa71b35163745b82"},"sys_created_by":"system","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n\tfor(var i = 0; i < input.evambroker.items.length; i++){\n\t\tvar model = input.evambroker.items[i].propValues;\n\t\tvar currDate = new GlideDateTime();\n\t\tvar dueDate = new GlideDateTime();\n\t\tvar requestedFor = model.model[\"sysapproval.ref_asset_task.requested_for\"] || model.model[\"sysapproval.ref_sc_request.requested_for\"] || model.model[\"sysapproval.ref_sc_req_item.requested_for\"] || model.model[\"sysapproval.requested_by\"] || model.model[\"sysapproval.opened_by\"] || model.model.sys_created_by;\n\t\tdueDate.setValue(model.model.due_date);\n\t\tif(model.model.due_date != \"\"){\n\t\t\t\tmodel.highlightedHeaderLabel = gs.getMessage(\"{0}\", dueDate);\t\n\t\t\t\tif (model.model.due_date.includes('ago') || (dueDate.isValid() && currDate.compareTo(dueDate) > -1)) { \n\t\t\t\t\tmodel.highlightedHeaderBkgColor = \"critical\";\n\t\t\t\t\tmodel.highlightedHeaderLabel = gs.getMessage(\"Overdue\");\n\t\t\t\t}\n\t\t} else { \n\t\t\t\tmodel.highlightedHeaderLabel = gs.getMessage(\"No due date\");\n\t\t}\n\t\tif(model.model.table == \"sc_req_item\"){\n\t\t\tif(model.model.recurring_frequency != null){\n\t\t\t\tmodel.subtitle = model.subtitle + \" + \" + model.model.recurring_price + \" \" + model.model.recurring_frequency;\n\t\t\t}\n\t\t}\n\t\tif(model.model.sys_created_on != null){\n\t\t\tvar createdDate = new GlideDateTime();\n\t\t\tcreatedDate.setValue(model.model.sys_created_on);\n\t\t\tmodel.detailValueOne = createdDate.toString();\n\t\t}\n\t\t\n\t\tif(requestedFor){ \n\t\t\tmodel.subtitle = gs.getMessage(\"Requested for {0}\", requestedFor);\n\t\t}\n\t}\n\n\treturn input;\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"evambroker\",\n    \"label\": \"EVAM Broker\",\n    \"fieldType\": \"json\",\n    \"valueType\": \"object\",\n    \"readOnly\": false,\n    \"mandatory\": true,\n    \"description\": \"Graphql Query Output\"\n  }\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ead9fb5f8b27a051aa71b35163745b82","value":"ead9fb5f8b27a051aa71b35163745b82"},"sys_update_name":"sys_ux_data_broker_transform_2f6c9b781b213010d46eea48624bcb2f","api_name":"polaris_app_shell.Data row evam broker - My Approvals","mutates_server_data":"false","name":"Data row evam broker - My Approvals","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Country code\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Country name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Mode of user-enrolment\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Provider ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Verification ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-04-26 07:28:18","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2ff2de1e93650210228bca32b38918ac","sys_updated_by":"admin","sys_created_on":"2024-04-16 04:31:22","sys_name":"Send SMS Verification Code","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    return new PwdResetUXFSMSVerificationProcessor().sendSMSVerificationCode(\n        input.token,\n        input.verificationId,\n        input.mode,\n        input.providerId,\n        input.countryCode,\n        input.countryName);\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"token\",\r\n        \"label\": \"Token\",\r\n        \"description\": \"Token\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"verificationId\",\r\n        \"label\": \"Verification ID\",\r\n        \"description\": \"Verification ID\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"mode\",\r\n        \"label\": \"Mode of user-enrolment\",\r\n        \"description\": \"Mode of user-enrolment\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"providerId\",\r\n        \"label\": \"Provider ID\",\r\n        \"description\": \"Provider ID\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"countryCode\",\r\n        \"label\": \"Country code\",\r\n        \"description\": \"Country code\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"countryName\",\r\n        \"label\": \"Country name\",\r\n        \"description\": \"Country name\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_2ff2de1e93650210228bca32b38918ac","api_name":"sn_uib_pwd_reset.Send SMS Verification Code","mutates_server_data":"true","name":"Send SMS Verification Code","output_schema":"","sys_policy":"read"},{"private":"true","required_translations":"[{\"message\":\"GraphQL Data\",\"comment\":\"\"}]","batch_exclude":"false","description":"","sys_updated_on":"2020-11-04 21:16:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"2ff9188b7311101052c7d5fdbdf6a7c7","sys_updated_by":"admin","sys_created_on":"2020-06-13 20:04:34","sys_name":"Bind composite iterable data output to component prop","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\t\n\tvar compositeData = input\n\t\t.graphqlData\n\t\t.data\n\t\t.GlideCompositeIterableData_Query\n\t\t.getCompositeData;\n\t\n\tif (!compositeData) {\n\t\treturn [];\n\t}\n\t\n\tvar templateIds = [];\n\t\n\tcompositeData\n\t\t.items\n\t\t.forEach(function (item) {\n\t\t\tif (templateIds.indexOf(item.template) === -1) {\n\t\t\t\ttemplateIds.push(item.template);\n\t\t\t}\n\t\t});\n\tvar templates = [];\n\tvar gr = new GlideRecord(\"sys_ux_composite_data_template\");\n\tgr.addQuery(\"sys_id\", \"IN\", templateIds.toString());\n\tgr.addActiveQuery();\n\tgr.query();\n\twhile (gr.next()) {\n\t\tvar template = {\"id\": gr.getUniqueValue(),\n\t\t\t\t\t\t\"template\" : JSON.parse(gr.getValue(\"template\"))};\n\t\ttemplates.push(template);\n\t}\n\tvar result = [];\n\tinput\n\t\t.graphqlData\n\t\t.data\n\t\t.GlideCompositeIterableData_Query\n\t\t.getCompositeData\n\t\t.items\n\t\t.forEach(function (item) {\n\t\t\tfor (template in templates) {\n\t\t\t\ttemplateObj = templates[template];\n\t\t\t\tif (templateObj.id.indexOf(item.template) > -1) {\n\t\t\t\t\tvar propMap = {};\n\t\t\t\t\titem.props.forEach(function(fieldValue) {\n\t\t\t\t\t\tif (fieldValue.name === 'sys_id')\n\t\t\t\t\t\t\tpropMap['sysId'] = fieldValue.value;\n\t\t\t\t\t\tpropMap[fieldValue.name] = fieldValue.value;\n\t\t\t\t\t});\n\n\t\t\t\t\tvar templateResult = {\n\t\t\t\t\t\t\"template\": templateObj.template.component,\n\t\t\t\t\t\t\"propValues\": getPropValues(propMap, item.actions, templateObj.template)\n\t\t\t\t\t};\n\n\t\t\t\t\tresult.push(templateResult);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\tfunction getPropValues(propMap, actions, template) {\n\t\tvar propValues = {};\n\t\tgetPropsFromFieldMappings(propValues, propMap, template.mappings);\n\t\tgetPropsFromStaticValues(propValues, template.staticValues);\n\t\tgetPropsFromActionMappings(propValues, propMap, actions, template.actionMappings);\n\t\treturn propValues;\n\t}\n\n\tfunction getPropsFromFieldMappings(result, propMap, propFieldMappings) {\n\t\tfor (var prop in propFieldMappings) {\n\t\t\tif (propFieldMappings.hasOwnProperty(prop)) {\n\t\t\t\tresult[prop] = propMap[propFieldMappings[prop]] || '';\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getPropsFromStaticValues(result, staticPropValues) {\n\t\tfor (var prop in staticPropValues) {\n\t\t\tif (staticPropValues.hasOwnProperty(prop)) {\n\t\t\t\tresult[prop] = getTranslatedStaticValues(staticPropValues[prop]);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getTranslatedStaticValues(propVal) {\n\t\tif (propVal === null || typeof propVal !== 'object')\n\t\t\treturn '';\n\t\tvar propValKey = GlideStringUtil.escapeHTML(propVal.key);\n\t\treturn propVal.translatable ? gs.getMessage(propValKey) : propValKey;\n\t}\n\n\tfunction getPropsFromActionMappings(result, propMap, actions, actionMappings) {\n\t\tvar actionMap = {};\n\t\tactions.forEach(function(action) {\n\t\t\tactionMap[action.name] = action;\n\t\t});\n\n\t\tfor (var prop in actionMappings) {\n\n\t\t\tif (actionMappings.hasOwnProperty(prop)) {\n\t\t\t\tvar mappedActions = actionMappings[prop];\n\n\t\t\t\tif (Array.isArray(mappedActions)) {\n\t\t\t\t\tvar actionArr = [];\n\t\t\t\t\tmappedActions.forEach(function(actionName) {\n\t\t\t\t\t\tvar processedAction = getProcessedAction(actionMap, actionName, propMap);\n\t\t\t\t\t\tif (processedAction)\n\t\t\t\t\t\t\tactionArr.push(processedAction);\n\t\t\t\t\t});\n\t\t\t\t\tresult[prop] = actionArr;\n\t\t\t\t} else {\n\t\t\t\t\tresult[prop] = getProcessedAction(actionMap, mappedActions, propMap);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tresult['model'] = propMap;\n\t}\n\n\tfunction getProcessedAction(actionMap, actionName, propMap) {\n\t\ttry {\n\t\t\tvar action = actionMap[actionName] ? JSON.parse(JSON.stringify(actionMap[actionName])) : null;\n\t\t\tif (action === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar actionType = action.actionType;\n\t\t\tif (actionType !== \"uxf_client_action\") {\n\t\t\t\treturn action;\n\t\t\t}\n\n\t\t\tvar actionPayloadMapFieldValues = action.actionPayloadMap;\n\t\t\taction.actionPayload = resolveActionPayloadDataBinding(propMap, JSON.parse(action.actionPayload), actionPayloadMapFieldValues);\n\t\t\tdelete(action.actionPayloadMap);\n\n\t\t\treturn action;\n\t\t} catch (e) {\n\t\t\tgs.logError(\"Error resolving/processing declarative action: \" + e);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tfunction resolveActionPayloadDataBinding(propMap, actionPayload, actionPayloadMapFieldValues) {\n\t\tvar actionPayloadMap = {};\n\t\tactionPayloadMapFieldValues.forEach(function(fieldValue) {\n\t\t\tvar key = fieldValue.name;\n\t\t\tvar value = fieldValue.value;\n\t\t\tif (/{{.*}}/.test(value)) {\n\t\t\t\tvar dynamicBindingVar = value.match(/{{(.*)}}/)[1];\n\t\t\t\tvalue = propMap[dynamicBindingVar] || '';\n\t\t\t} else {\n\t\t\t\tvalue = GlideStringUtil.escapeHTML(value);\n\t\t\t}\n\t\t\tactionPayloadMap[key] = value;\n\t\t});\n\t\tvar resolvedActionPayload = {};\n\t\tfor (var key in actionPayload) {\n\t\t\tif (actionPayload.hasOwnProperty(key)) {\n\t\t\t\tvar value = actionPayload[key];\n\t\t\t\tif (/{{.*}}/.test(value)) {\n\t\t\t\t\tresolvedActionPayload[key] = actionPayloadMap[key] || '';\n\t\t\t\t} else {\n\t\t\t\t\tresolvedActionPayload[key] = GlideStringUtil.escapeHTML(value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn resolvedActionPayload;\n\t}\n\treturn {\n\t\titems: result,\n\t\tall_actions: compositeData.all_actions\n\t};\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"graphqlData\",\r\n        \"label\": \"GraphQL Data\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8218a73304f12210559073c06a02f779","value":"8218a73304f12210559073c06a02f779"},"sys_update_name":"sys_ux_data_broker_transform_2ff9188b7311101052c7d5fdbdf6a7c7","api_name":"global.Bind composite iterable data output to component prop","mutates_server_data":"false","name":"Bind composite iterable data output to component prop","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"plugins\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-06-13 12:12:53","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"303fad54535301102958ddeeff7b12d1","sys_updated_by":"admin","sys_created_on":"2022-05-02 11:51:26","sys_name":"ACE Plugin Installation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n    var result = {};\n    if (!input.plugins) {\n        return result;\n    }\n\n    var appInstallationPayload = {};\n    input.plugins.forEach(function(p) {\n        if (p.type == \"plugin\") {\n            appInstallationPayload[p.id] = {\n                plugin_id: p.id,\n                app_name: p.name,\n                isPlugin: true,\n                loadDemoData: p.install_demo_data\n            };\n        } else if (p.type == \"application\") {\n            appInstallationPayload[p.id] = {\n                sys_id: p.id,\n                app_name: p.name,\n                versionObj: {\n                    version: (p.newerVersion) ? p.newerVersion : p.currentVersion\n                },\n                appScope: p.pluginId,\n                isStoreApp: true,\n                loadDemoData: p.install_demo_data\n            };\n        }\n    });\n    try {\n        var api = new sn_appclient.AppPluginInstallation();\n        result = api.validateAndBatchInstall('ACE', appInstallationPayload);\n    } catch (e) {\n        gs.error(\"Failed to generate app installation payload\" + e.toString());\n    }\n    return result;\n\n\n\n\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"plugins\",\n      \"label\": \"plugins\",\n      \"description\": \"plugins\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_303fad54535301102958ddeeff7b12d1","api_name":"sn_ace.ACE Plugin Installation","mutates_server_data":"true","name":"ACE Plugin Installation","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Activity Pattern Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Deflection Configuration Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Deflection Pattern Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Name of the rprimary activity table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Primary Activity Filter\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Primary Activity Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected  Deflection Pattern Outcome\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"activity pattern id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"deflection configuration id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"name of the  deflection pattern\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"selected  deflection pattern outcome\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update Deflection Pattern details","sys_updated_on":"2021-10-10 16:59:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3087406d87717010a4a2c077f6cb0b8b","sys_updated_by":"admin","sys_created_on":"2021-08-05 18:01:06","sys_name":"Update Deflection Pattern details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"function transform(input) {\n\n    function _createVaActivityPattern(name, outcome, primaryActivityId) {\n        var gr = new GlideRecord(\"ssa_activity_pattern\");\n        gr.initialize();\n        gr.setValue('name', name);\n        if (outcome)\n            gr.setValue('outcome', outcome);\n        if (primaryActivityId)\n            gr.setValue('primary_activity', primaryActivityId);\n\n        gr.setWorkflow(false);\n        if (gr.canCreate())\n            return gr.insert();\n\n        return false;\n    }\n\n    function _createVaPrimaryActivity(primaryActvityTable, primaryActvityFilter) {\n        var gr = new GlideRecord(\"sn_actsub_activity_type\");\n        gr.initialize();\n        gr.setValue('activity_source_table', primaryActvityTable);\n        gr.setValue('feed_conditions', primaryActvityFilter);\n        gr.setWorkflow(false);\n        if (gr.canCreate())\n            return gr.insert();\n\n        return false;\n    }\n\n    function _createVaDeflectionPattern(dfConfigId, patternId) {\n        var gr = new GlideRecord(\"ssa_deflection_pattern\");\n        gr.initialize();\n        gr.setValue('deflection_configuration', dfConfigId);\n        gr.setValue('activity_pattern', patternId);\n        gr.setWorkflow(false);\n        if (gr.canCreate())\n            return gr.insert();\n\n        return false;\n    }\n\n    function _updateVaPrimaryActivity(primaryActivityId, primaryActvityTable, primaryActvityFilter) {\n        var gr = new GlideRecord(\"sn_actsub_activity_type\");\n        if (gr.get(primaryActivityId)) {\n            gr.setValue('activity_source_table', primaryActvityTable);\n            gr.setValue('feed_conditions', primaryActvityFilter);\n            gr.setWorkflow(false);\n            if (gr.canWrite())\n                return gr.update();\n        }\n        return false;\n    }\n\n    function createVaDeflectionPattern(input) {\n        var response = {};\n        var dfConfigId = input.deflection_configuration_id;\n        var patternName = input.name;\n\n        if (!dfConfigId || !patternName) {\n            response.error = gs.getMessage('Required fields missing');\n            return JSON.stringify(response);\n        }\n\n        // Create Primary activity (optional)\n        var primaryActvityTable = input.primary_activity_table;\n        var primaryActvityFilter = input.primary_activity_filter;\n        var primaryActivityId;\n        if (primaryActvityTable || primaryActvityFilter) {\n            primaryActivityId = _createVaPrimaryActivity(primaryActvityTable, primaryActvityFilter, patternName);\n        }\n\n        // Create Activity Pattern\n        var patternOutcome = input.outcome;\n\n        var patternId = _createVaActivityPattern(patternName, patternOutcome, primaryActivityId);\n        if (patternId) {\n            var dfPatternId = _createVaDeflectionPattern(dfConfigId, patternId);\n            if (dfPatternId) {\n                response = {\n                    'pattern_id': dfPatternId,\n                    'success': gs.getMessage('Activity Pattern created')\n                };\n            }\n        } else {\n            response.error = gs.getMessage('Activity Pattern creation failed');\n        }\n\n        return JSON.stringify(response);\n    }\n\n    function updateVaActivityPattern(patternId, patternName, patternOutcome, primaryActvityTable, primaryActvityFilter) {\n\n        var gr = new GlideRecord(\"ssa_activity_pattern\");\n        if (patternId && gr.get(patternId)) {\n            var primaryActivityId = gr.getValue('primary_activity');\n\n            if (primaryActivityId) {\n                primaryActivityId = _updateVaPrimaryActivity(primaryActivityId, primaryActvityTable, primaryActvityFilter);\n            } else {\n                primaryActivityId = _createVaPrimaryActivity(primaryActvityTable, primaryActvityFilter);\n                if (primaryActivityId)\n                    gr.setValue('primary_activity', primaryActivityId);\n            }\n\n            gr.setValue('name', patternName);\n            gr.setValue('outcome', patternOutcome);\n            gr.setWorkflow(false);\n            if (gr.canWrite()) {\n                return gr.update();\n            }\n\n        }\n        return false;\n\n    }\n\n    var activityPatternId = input.activity_pattern_id;\n    if (activityPatternId != '-1') {\n        activityPatternId = updateVaActivityPattern(activityPatternId, input.name, input.outcome, input.primary_activity_table, input.primary_activity_filter);\n        if (activityPatternId) {\n            return {\n                'pattern_id': activityPatternId,\n                'success': gs.getMessage('Deflection Pattern changes saved succesfully')\n            };\n        }\n        return {\n            'error': gs.getMessage('Deflection Pattern creation/updation failed')\n        };\n    }\n    return JSON.parse(JSON.stringify(createVaDeflectionPattern(input)));\n\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"name\",\n        \"label\": \"Deflection Pattern Name\",\n        \"description\": \"name of the  deflection pattern\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n    {\n        \"name\": \"outcome\",\n        \"label\": \"Selected  Deflection Pattern Outcome\",\n        \"description\": \"selected  deflection pattern outcome\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n    {\n        \"name\": \"primary_activity_table\",\n        \"label\": \"Primary Activity Table\",\n        \"description\": \"Name of the rprimary activity table\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": false,\n        \"defaultValue\": \"--None--\"\n    },\n    {\n        \"name\": \"deflection_configuration_id\",\n        \"label\": \"Deflection Configuration Id\",\n        \"description\": \"deflection configuration id\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": false,\n        \"defaultValue\": \"\"\n    },\n     {\n        \"name\": \"activity_pattern_id\",\n        \"label\": \"Activity Pattern Id\",\n        \"description\": \"activity pattern id\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": false,\n        \"defaultValue\": \"\"\n    },\n    {\n        \"name\": \"primary_activity_filter\",\n        \"label\": \"Primary Activity Filter\",\n        \"description\": \"\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": false,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sys_ux_data_broker_transform_3087406d87717010a4a2c077f6cb0b8b","api_name":"global.Update Deflection Pattern details","mutates_server_data":"true","name":"Update Deflection Pattern details","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Page Params\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page parameters\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to fetch the  content blocks hierarchy","sys_updated_on":"2022-11-30 10:42:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3089593b53301110b643ddeeff7b120c","sys_updated_by":"admin","sys_created_on":"2022-07-26 20:51:17","sys_name":"ACE Fetch Content Blocks Hierarchy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.page_params) return [];\n\t// var contentBlocks = new ACEAppBuilderUtil().getAllContentBlocksBFS();\n    var contentBlocksHierarchy = [];\n    // for (var i = 0; i < contentBlocks.length; i++) {\n    //     if (contentBlocks[i].block_id == input.page_params.sysId) {\n    //         contentBlocksHierarchy.push(contentBlocks[i]);\n    //     }\n    // }\n    return contentBlocksHierarchy;\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"page_params\",\r\n      \"label\": \"Page Params\",\r\n      \"description\": \"Page parameters\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"json\",\r\n      \"valueType\": \"object\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_3089593b53301110b643ddeeff7b120c","api_name":"sn_ace.ACE Fetch Content Blocks Hierarchy","mutates_server_data":"false","name":"ACE Fetch Content Blocks Hierarchy","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-05-19 04:10:23","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"30a4df0b433e61102bb850e01fb8f258","sys_updated_by":"admin","sys_created_on":"2023-05-19 04:10:23","sys_name":"Get error messages","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\treturn new sn_uib_on_call.OnCallContactPref().getErrorMessages();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_30a4df0b433e61102bb850e01fb8f258","api_name":"sn_uib_on_call.Get error messages","mutates_server_data":"false","name":"Get error messages","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-08-04 10:40:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"31d8608453603110d87cddeeff7b121f","sys_updated_by":"admin","sys_created_on":"2023-08-04 07:47:09","sys_name":"Get Resolution Config","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var constants = {\n        NOW_ASSIST_ITSM_PLUGIN: 'com.sn.itsm.gen.ai'\n    };\n    if (!GlidePluginManager.isActive(constants.NOW_ASSIST_ITSM_PLUGIN))\n        return null;\n    return new sn_itsm_gen_ai.NowAssistItsmGenAIUtils().fetchResolutionConfig();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_31d8608453603110d87cddeeff7b121f","api_name":"sn_sow_itsm_common.Get Resolution Config","mutates_server_data":"false","name":"Get Resolution Config","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"gformLastRefresh\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-27 13:24:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"31e7b1e143824210ced539aaaab8f282","sys_updated_by":"admin","sys_created_on":"2024-05-08 15:08:00","sys_name":"Record Information - Problem","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54a81ee10b11301039dd818393673a5c","value":"54a81ee10b11301039dd818393673a5c"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\tif (!input || !input.table || !input.sysId)\n\t\treturn { error: gs.getMessage('ERROR table: {0} sysId: {1}', [input.table, input.sysId]) };\n\n\tvar gr = new GlideRecordSecure(input.table);\n\tif (gr.get(input.sysId) && gr.canRead()) {\n\t\tvar recordInfo = new ProblemMgmntInfo(gr);\n\t\treturn JSON.parse(recordInfo.getRecordInfo());\n\t}\n\n    return {};\n}","acl_failure_result":"","props":"[\n{\n  \"name\": \"table\",\n  \"label\": \"Table\",\n  \"description\": \"\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n},\n{\n  \"name\": \"sysId\",\n  \"label\": \"Sys Id\",\n  \"description\": \"\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n},\n{\n  \"name\": \"gformLastRefresh\",\n  \"label\": \"gformLastRefresh\",\n  \"description\": \"\",\n  \"readOnly\": false,\n  \"fieldType\": \"integer\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54a81ee10b11301039dd818393673a5c","value":"54a81ee10b11301039dd818393673a5c"},"sys_update_name":"sys_ux_data_broker_transform_31e7b1e143824210ced539aaaab8f282","api_name":"sn_sow_chg.Record Information - Problem","mutates_server_data":"false","name":"Record Information - Problem","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id of source record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-03 14:02:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"327eb363d5062110f877fdb55dd7f65f","sys_updated_by":"admin","sys_created_on":"2023-04-13 13:41:51","sys_name":"Get Collab Routes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var output = [];\n    var sowCollabUtils = new sn_sow_collab.SowCollabUtils();\n    var table = input.table;\n    var sysId = input.sysId;\n\n    if (gs.nil(table) || gs.nil(sysId)) {\n        return output;\n    }\n\n    if (sowCollabUtils.canViewChats(table, sysId)) {\n        output.push({\n            \"route\": \"collab-chat-tab\",\n            \"fields\": {\n                \"table\": table,\n                \"sysId\": sysId\n            },\n            \"label\": gs.getMessage(\"Chat\")\n        });\n    }\n\n    if (sowCollabUtils.canViewCalls(table, sysId)) {\n        output.push({\n            \"route\": \"notify-call\",\n            \"fields\": {\n                \"table\": table,\n                \"sysId\": sysId\n            },\n            \"label\": gs.getMessage(\"Calls\")\n        });\n    }\n    return output;\n}","acl_failure_result":"","props":"[{\n        \"name\": \"sysId\",\n        \"label\": \"Sys Id\",\n        \"description\": \"Sys Id of source record\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true\n    },\n    {\n        \"name\": \"table\",\n        \"label\": \"Table\",\n        \"description\": \"Table\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_update_name":"sys_ux_data_broker_transform_327eb363d5062110f877fdb55dd7f65f","api_name":"sn_sow_collab.Get Collab Routes","mutates_server_data":"false","name":"Get Collab Routes","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Selected Suite\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Suite\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"date\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get time for date selected ","sys_updated_on":"2022-09-01 23:39:41","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3355801f8748111061ee083f37cb0be0","sys_updated_by":"admin","sys_created_on":"2022-06-17 18:39:38","sys_name":"VSC Get Time For Scan Results First Date","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    //  Get time for date selected \n    var results = new VSCGetScanResultsDateTimeUtil().getResultsTimeFromDateSelection(input.date, input.suite);\n    return results;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"date\",\n    \"label\": \"date\",\n    \"description\": \"Selected date\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  },\n{\n    \"name\": \"suite\",\n    \"label\": \"Suite\",\n    \"description\": \"Selected Suite\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_3355801f8748111061ee083f37cb0be0","api_name":"sn_vsc.VSC Get Time For Scan Results First Date","mutates_server_data":"false","name":"VSC Get Time For Scan Results First Date","output_schema":"","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"EVAM Definition to use, as specified by the application calling the Search databroker\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Provided Evam Definition ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search Context Config ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This transform is meant to serve as a utility for the Search Composite Data Broker, \"Search EVAM Data Resource\". It's job is to pick between an optionally provided EVAM Definition ID passed in to the Data Broker call, and an EVAM Definition ID configured on the Search Application ID passed in to the Data Broker. If one is specified on the Data Broker call via the \"searchEvamConfigId\" input prop, that will be used. Else, if there is an EVAM Definition specified on the Search Application record passed, that value is selected and returned.","sys_updated_on":"2022-10-04 02:08:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"338232a0731211105afea11cff148b75","sys_updated_by":"admin","sys_created_on":"2022-09-29 14:33:14","sys_name":"Select EVAM definition to use transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var providedEvamDefID = input.searchEvamConfigId; // EVAM Def provided as configuration property to composite data broker\n    if (providedEvamDefID != null && providedEvamDefID.trim() != '')\n        return input.searchEvamConfigId;\n\n    var cachedValue = GlideCacheManager.get('search_context_config_evam_cache', input.searchContextConfigId);\n    if (cachedValue != null && ('' + cachedValue).trim() != '')\n        return '' + cachedValue;\n\n    if ((!providedEvamDefID || providedEvamDefID.length <= 1) && input.searchContextConfigId) {\n        var searchApplicationRecord = new GlideRecord('sys_search_context_config');\n        if (searchApplicationRecord.get(input.searchContextConfigId)) {\n            var searchEvamConfigId = searchApplicationRecord.getValue('evam_definition');\n            if (searchEvamConfigId && searchEvamConfigId.length > 0) {\n                GlideCacheManager.put('search_context_config_evam_cache', input.searchContextConfigId, searchEvamConfigId);\n                return searchEvamConfigId;\n            }\n\n        }\n    }\n    return \"\";\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\":\"searchEvamConfigId\",\r\n      \"label\":\"Provided Evam Definition ID\",\r\n      \"description\":\"EVAM Definition to use, as specified by the application calling the Search databroker\",\r\n      \"readOnly\":false,\r\n      \"fieldType\":\"reference\",\r\n      \"mandatory\":false,\r\n      \"defaultValue\":\" \",\r\n      \"typeMetadata\": {\r\n             \"reference\": \"sys_ux_composite_data\"\r\n       }\r\n   },\r\n    {\r\n        \"name\": \"searchContextConfigId\",\r\n        \"label\": \"Search Context Config ID\",\r\n        \"description\": \"Search Context Config ID\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"reference\",\r\n        \"mandatory\": true,\r\n        \"typeMetadata\": {\r\n               \"reference\": \"sys_search_context_config\"\r\n         }\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_338232a0731211105afea11cff148b75","api_name":"global.Select EVAM definition to use transform","mutates_server_data":"false","name":"Select EVAM definition to use transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"All\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Breakdown value\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Category\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Indicator id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Returns benchmark data.","sys_updated_on":"2023-12-21 15:52:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"33bd1f201b23e510a34420252a4bcb69","sys_updated_by":"admin","sys_created_on":"2023-06-17 17:11:27","sys_name":"Get benchmarks data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3214b661c3eb211062ebf69f05013160","value":"3214b661c3eb211062ebf69f05013160"},"sys_created_by":"haseeb.ahmed@snc","sys_mod_count":"124","sys_tags":"","script":"function transform(input) {\n    var data = {};\n    var indicators = [];\n    var categories = [];\n    var bu = new sn_benchmarks.BenchmarkScoreUtil();\n\n    function isOptIn() {\n        return bu.getOptIn();\n    }\n\n    function getCategories(category) {\n        data.categories = bu.getOrderedCategoryByRoles();\n        if (category)\n            return [category];\n        return data.categories;\n    }\n\n    function getBreakdown(breakdown) {\n        if (breakdown == 'all')\n            return '';\n        return breakdown ? breakdown : '';\n    }\n\n    function getIndicators(indicator, category) {\n        if (indicator)\n            return [indicator];\n        return bu.getActiveGlobalIndicatorsByCategory(category);\n    }\n\n    /* If not opted; don't query scores */\n    if (!isOptIn())\n        return {\n            'optedIn': false\n        };\n\n    data['optedIn'] = true;\n\n    categories = getCategories(input.category);\n\n    data.breakdowns = bu.getBreakdowns();\n    data.activeIndustry = bu.getActiveIndustry();\n\n    var category = input.category ? input.category : Object.keys(categories)[0];\n    var breakdownValue = getBreakdown(input.value);\n\n    var scoreData = {};\n    indicators = getIndicators(input.iid, category);\n    if (input.iid) {\n        scoreData = bu.getScoreForTrend(input.iid, breakdownValue);\n    } else {\n        scoreData = bu.getScoreByIndicators(indicators, breakdownValue);\n    }\n    data.currentMonth = scoreData.currentMonth;\n    data.groups = scoreData.groups;\n    data.indicators = scoreData.indicators;\n    data.i18n = {};\n    data.i18n.kpiDisplay = {\n        hours: gs.getMessage('{0} hours'),\n        days_hours: gs.getMessage('{0}d {1}h'),\n        days: gs.getMessage('{0} days')\n    };\n    data.i18n.recoText = gs.getMessage(\"Recommendation '{0}' is implemented on {1}\");\n    data.i18n.alertMsg = gs.getMessage('No breakdown score exist for {0} in {1}');\n    data.i18n.noRankText = gs.getMessage('(Percentile rank is not available for this KPI)');\n    data.i18n.noPAScoreText = gs.getMessage('(Data unavailable in Performance Analytics scorecard)');\n    data.i18n.alertSimilarCompany = gs.getMessage('Showing Benchmark score according to your industry and user size bucket.');\n    data.i18n.chart = {\n        ourTrendNoPA: gs.getMessage('{0}: Your Instance, {1} (Data unavailable in Performance Analytics scorecard), Percentile rank, {2}'),\n        ourTrend: gs.getMessage('{0}: Your Instance, {1}, Percentile rank, {2}'),\n        miniTrend: gs.getMessage('{0}: Your Instance, {1}, Monthly Change, {2}'),\n        miniTrendIncreased: gs.getMessage('{0}: Your Instance, {1}, Monthly Change, Increased by {2}%'),\n        miniTrendDecreased: gs.getMessage('{0}: Your Instance, {1}, Monthly Change, Decreased by {2}%'),\n        theirTrend: gs.getMessage('{0}: {1}, {2}')\n    };\n    data.i18n.viewToggles = {\n        cardView: {\n            selected: gs.getMessage('Card view, selected'),\n            unselected: gs.getMessage('Card view')\n        },\n        listView: {\n            selected: gs.getMessage('List view, selected'),\n            unselected: gs.getMessage('List view')\n        }\n    };\n    data.i18n.score = {\n        better: gs.getMessage('Better than Benchmark'),\n        worse: gs.getMessage('Worse than Benchmark')\n    };\n    var config = bu.getClientConfig();\n    data.sizeBucket = \"\";\n    var size_bucket_gr = new GlideRecord('sn_bm_common_size_bucket');\n    if (size_bucket_gr.get(config.sn_bm_common_size_bucket))\n        data.sizeBucket = size_bucket_gr.getDisplayValue('name');\n    var client_region_gr = new GlideRecord('sn_bm_client_region');\n    data.region = \"\";\n    if (client_region_gr.get(config.sn_bm_client_region))\n        data.region = client_region_gr.getDisplayValue('name');\n    return data;\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"iid\",\n    \"label\": \"Indicator id\",\n    \"description\": \"\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"value\",\n    \"label\": \"Breakdown value\",\n    \"description\": \"\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"all\",\n    \"label\": \"All\",\n    \"description\": \"\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"false\"\n  },\n{\n    \"name\": \"category\",\n    \"label\": \"Category\",\n    \"description\": \"\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3214b661c3eb211062ebf69f05013160","value":"3214b661c3eb211062ebf69f05013160"},"sys_update_name":"sys_ux_data_broker_transform_33bd1f201b23e510a34420252a4bcb69","api_name":"sn_benchmarks.Get benchmarks data","mutates_server_data":"false","name":"Get benchmarks data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Beginning of Last 12 Months","sys_updated_on":"2024-04-07 19:11:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3446832fff1102105408ffffffffff31","sys_updated_by":"admin","sys_created_on":"2024-04-07 19:11:07","sys_name":"Beginning of Last 12 Months","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input){\n\tvar BeginOfLast12Months = gs.beginningOfLast12Months();\n\treturn BeginOfLast12Months.split(' ')[0];\n}\t","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_update_name":"sys_ux_data_broker_transform_3446832fff1102105408ffffffffff31","api_name":"sn_ih_usage_app.Beginning of Last 12 Months","mutates_server_data":"false","name":"Beginning of Last 12 Months","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Multisource Settings\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Settings\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"34b7811877301110f3a2f350ff5a9932","sys_updated_by":"admin","sys_created_on":"2022-07-15 22:35:05","sys_name":"Multisource Save Settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"46","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\t\n\tvar results = {\n\t\tstatus : util.STATUS.SUCCESS,\n\t\tmaxRecordsToProcess : null, \n\t\tmaxNotReportingDays : null,\n\t\tdataMismatchResult : null,\n\t\tcoverageResult : null,\n\t\tdataMismatchWeight : null,\n\t\tcoverageWeight: null\n\t};\n\t\n\t\n\ttry {\n\t\t\n\t\t// Save max records to process\n\t\tif(input.settings.maxRecordsToProcess)\n\t\t\tresults.maxRecordsToProcess = util.setMaxRecordsToProcess(input.settings.maxRecordsToProcess);\n\t\t\n\t\t// Save agent not reporting days\n\t\tif(input.settings.notReportingMaxDays)\n\t\t\tresults.maxNotReportingDays = util.setDiscoSourceNotReporting(input.settings.notReportingMaxDays);\n\t\t\n\t\t// Save Coverage Classes\n\t\tif(Array.isArray(input.settings.coverageClasses))\n\t\t\tresults.coverageResult = util.saveCoverageClasses(input.settings.coverageClasses);\n\n\t\t// Save Data Mismatch Classes\n\t\tif(Array.isArray(input.settings.dataMismatchClasses)) \n\t\t\tresults.dataMismatchResult = util.saveDataMismatchClasses(input.settings.dataMismatchClasses);\n\n\t\tif(input.settings.coverageWeightType)\n\t\t\tresults.coverageWeight = util.saveCoverageWeightType(input.settings.coverageWeightType);\n\t\t\n\t\tif(input.settings.dataMismatchWeightType)\n\t\t\tresults.dataMismatchWeight = util.saveDataMismatchWeightType(input.settings.dataMismatchWeightType);\n\t\t\t\t\n\t\t\n\t} catch(error) {\n\t\tresults.status = util.STATUS.FAILED;\n\t\tresults.error = error;\n\t\tresults.message = gs.getMessage(\"failed to update settings : {0} \",error.toString());\n\t}\n\n\n\treturn results;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"settings\",\r\n  \"label\": \"Settings\",\r\n  \"description\": \"Multisource Settings\",\r\n  \"fieldType\": \"json\",\r\n  \"mandatory\": false\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_34b7811877301110f3a2f350ff5a9932","api_name":"sn_cmdb_ws.Multisource Save Settings","mutates_server_data":"true","name":"Multisource Save Settings","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Conditions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Field to sort rows by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Look up search conditions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Max results\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Maximum results returned\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Order by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Pagination offset\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Query category\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Read replica query category\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Return field metadata\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Return fields\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Return rowcount\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Return table metadata\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Returned field values\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sort type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sort type (asc/desc)\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table to look up\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Perform a GlideRecord_Query to return the count and collection of records that meets the search criterion.","sys_updated_on":"2024-07-02 11:47:50","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"35590925a3830210250779af26fcdaf3","sys_updated_by":"admin","sys_created_on":"2024-06-27 04:48:15","sys_name":"Custom GlideRecordCollectionQuery for Clone Admin Console","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/31774a2953839110a6f8ddeeff7b12cb","value":"31774a2953839110a6f8ddeeff7b12cb"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n    var cloneUtil = new sn_instance_clone.AdminCloneUtil();\n    return cloneUtil.getCloneHomeData(input);\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"table_name\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"encodedQuery\",\r\n  \"label\": \"Conditions\",\r\n  \"description\": \"Look up search conditions\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"condition_string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\",\r\n  \"typeMetadata\": {\r\n        \"table\": \"@table\"\r\n  }\r\n},\r\n{\r\n  \"name\": \"returnFields\",\r\n  \"label\": \"Return fields\",\r\n  \"description\": \"Returned field values\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"field_list\",\r\n  \"mandatory\": false,\r\n  \"typeMetadata\": {\r\n        \"table\": \"@table\"\r\n  }\r\n},\r\n{\r\n  \"name\": \"orderBy\",\r\n  \"label\": \"Order by\",\r\n  \"description\": \"Field to sort rows by\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"field\",\r\n  \"mandatory\": false,\r\n  \"typeMetadata\": {\r\n        \"table\": \"@table\"\r\n}\r\n},\r\n{\r\n  \"name\": \"sortType\",\r\n  \"label\": \"Sort type (asc/desc)\",\r\n  \"description\": \"Sort type\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"asc\",\r\n  \"typeMetadata\": {\r\n        \"choices\": [{\"label\": \"a to z\", \"value\": \"asc\" },{\"label\": \"z to a\", \"value\": \"desc\" }]\r\n  }\r\n},\r\n{\r\n  \"name\": \"limit\",\r\n  \"label\": \"Max results\",\r\n  \"description\": \"Maximum results returned\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n \"defaultValue\": \"1000\"\r\n},\r\n{\r\n  \"name\": \"offset\",\r\n  \"label\": \"Pagination offset\",\r\n  \"description\": \"Pagination offset\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false\r\n},\r\n  {\r\n  \"name\": \"queryCategory\",\r\n  \"label\": \"Query category\",\r\n  \"description\": \"Read replica query category\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"returnRowCount\",\r\n  \"label\": \"Return rowcount\",\r\n  \"description\": \"Return rowcount\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"boolean\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": true\r\n},\r\n{\r\n  \"name\": \"returnTableMetadata\",\r\n  \"label\": \"Return table metadata\",\r\n  \"description\": \"Return table metadata\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"boolean\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": false\r\n},\r\n{\r\n  \"name\": \"returnFieldMetadata\",\r\n  \"label\": \"Return field metadata\",\r\n  \"description\": \"Return field metadata\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"boolean\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": false\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/31774a2953839110a6f8ddeeff7b12cb","value":"31774a2953839110a6f8ddeeff7b12cb"},"sys_update_name":"sys_ux_data_broker_transform_35590925a3830210250779af26fcdaf3","api_name":"sn_instance_clone.Custom GlideRecordCollectionQuery for Clone Admin Console","mutates_server_data":"false","name":"Custom GlideRecordCollectionQuery for Clone Admin Console","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Request Payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Request payload to be used for calling debug log API\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-28 04:38:30","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3572ff6e437321102c5119405bb8f2e3","sys_updated_by":"admin","sys_created_on":"2023-07-06 10:05:24","sys_name":"User Comparison Data Broker","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\n    const Methods = {\n\n        getRoleMap: (params) => {\n            var api = new sn_identity.IdentityRoleApi();\n            var resp = api.getRoles({\n                userId: params.userId,\n                targetRoles: params.targetRoles\n            });\n            return JSON.parse(resp || \"[]\");\n        },\n    };\n\n    return {\n        request: input.req,\n        response: Methods[input.req.method](input.req)\n    };\n\n}","acl_failure_result":"","props":"[ \r\n{\r\n        \"name\": \"req\",\r\n        \"label\": \"Request Payload\",\r\n        \"description\": \"Request payload to be used for calling debug log API\",\r\n        \"readOnly\": false,\r\n         \"fieldType\": \"json\",\r\n      \"valueType\": \"object\",\r\n        \"mandatory\": true\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_update_name":"sys_ux_data_broker_transform_3572ff6e437321102c5119405bb8f2e3","api_name":"sn_access_analyzer.User Comparison Data Broker","mutates_server_data":"false","name":"User Comparison Data Broker","output_schema":"","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"Include response details for query debugging\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Is Debug\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search Context Config ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search Query Response\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"View All Link Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-12-12 15:02:50","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3657e6665bef1110d9a5ce1a8581c7e0","sys_updated_by":"admin","sys_created_on":"2022-12-06 22:10:38","sys_name":"Search Metadata Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"26","sys_tags":"","script":"function transform(input) {\n\n    function getResultsPerPage(searchAppId) {\n        var cachedValue = GlideCacheManager.get('search_context_config_search_result_limit_cache', searchAppId);\n        if (cachedValue != null && ('' + cachedValue).trim() != '')\n            return cachedValue;\n\n        var searchApplicationRecord = new GlideRecord('sys_search_context_config');\n        if (searchApplicationRecord.get(searchAppId)) {\n            var searchResultLimit = searchApplicationRecord.getValue('search_results_limit');\n            if (searchResultLimit && searchResultLimit.length > 0) {\n                searchResultLimit = parseInt(searchResultLimit);\n                GlideCacheManager.put('search_context_config_search_result_limit_cache', searchAppId, searchResultLimit);\n                return searchResultLimit;\n            }\n        }\n    }\n\n    var searchResponse =\n        input\n        .searchQueryResponse\n        .data\n        .GlideSearch_Query;\n\n    if (!searchResponse) {\n        return null;\n    }\n\n    var resultsPerPage = getResultsPerPage(input.searchContextConfigId);\n    var totalHits = searchResponse.search.totalHits;\n    var showResultCount = searchResponse.search.showResultCount;\n\n    var searchResultMetadata = {\n        searchTerm: searchResponse.search.term,\n        rewrittenSearchTerm: searchResponse.search.rewrittenTerm,\n        correctedSearchTerm: searchResponse.search.spellCorrectedTerm,\n        count: searchResponse.search.count,\n        previousPageToken: searchResponse.search.previousPaginationToken,\n        nextPageToken: searchResponse.search.nextPaginationToken,\n        currentPage: searchResponse.search.currentPage,\n        resultsPerPage: resultsPerPage,\n        matchedQueryIntents: searchResponse.search.matchedQueryIntents,\n        matchedGeniusResultIntents: searchResponse.search.matchedGeniusResultIntents,\n        matchedRules: searchResponse.search.matchedRules,\n        responseTimeInMs: searchResponse.search.responseTimeInMs,\n        queryLanguage: searchResponse.search.queryLanguage,\n        searchAnalyticsPayload: searchResponse.search.searchAnalyticsPayload,\n        showResultCount: showResultCount,\n        totalHits: totalHits,\n        queryFeedback: searchResponse.search.queryFeedback,\n        queryAnalytics: searchResponse.search.queryAnalytics,\n        intentSwitch: searchResponse.search.intentSwitch,\n        additionalContext: searchResponse.search.additionalContext,\n        asyncGeniusResultChannelName: searchResponse.search.asyncGeniusResultChannelName,\n        asyncGeniusResultsMaxWaitTime: searchResponse.search.asyncGeniusResultsMaxWaitTime,\n        primarySearchRequestId: searchResponse.search.primarySearchRequestId,\n        awaitingResults: searchResponse.search.awaitingResults,\n        pendingResultDetails: searchResponse.search.pendingResultDetails,\n        callbackId: searchResponse.search.callbackId,\n        queryDisambiguation: searchResponse.search.queryDisambiguation,\n        sensitivityFilter: searchResponse.search.sensitivityFilter\n    };\n\n    var filters = searchResponse.search.filters;\n    var sortOptions = searchResponse.sortOptions;\n    var appliedFacetFilters = searchResponse.search.appliedFacetFiltersMetadata;\n    var selectedFilterIds = searchResponse.search.selectedFilterIds;\n    var selectedSortOptionIds = searchResponse.search.selectedSortOptionIds;\n    var searchFacets = searchResponse.search.searchFacets;\n\n    if (input.isDebug)\n        searchResultMetadata['searchResponse'] = searchResponse;\n\n    return {\n        viewAllLinkData: input.viewAllLinkData,\n        filters: filters,\n        sortOptions: sortOptions,\n        appliedFacetFilters: appliedFacetFilters,\n        selectedFilterIds: selectedFilterIds,\n        selectedSortOptionIds: selectedSortOptionIds,\n        searchFacets: searchFacets,\n        searchResultMetadata: searchResultMetadata\n    };\n}","acl_failure_result":"{\"accessDenied\": true}","props":"[\r\n  {\r\n    \"name\": \"searchQueryResponse\",\r\n    \"label\": \"Search Query Response\",\r\n    \"description\": \"\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"viewAllLinkData\",\r\n    \"label\": \"View All Link Data\",\r\n    \"description\": \"\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n      \"name\": \"searchContextConfigId\",\r\n      \"label\": \"Search Context Config ID\",\r\n      \"description\": \"Search Context Config ID\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"reference\",\r\n      \"mandatory\": true,\r\n      \"typeMetadata\": {\r\n             \"reference\": \"sys_search_context_config\"\r\n       }\r\n  },\r\n  {\r\n    \"name\": \"isDebug\",\r\n    \"label\": \"Is Debug\",\r\n    \"description\": \"Include response details for query debugging\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"boolean\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": false\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_3657e6665bef1110d9a5ce1a8581c7e0","api_name":"global.Search Metadata Transform","mutates_server_data":"false","name":"Search Metadata Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data manager form information\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Payload of basic data manager form information from the general info view.\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Creates a new data manager policy","sys_updated_on":"2024-05-07 11:09:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"36c7298943dcb51017b739603ab8f212","sys_updated_by":"admin","sys_created_on":"2023-07-26 04:46:01","sys_name":"Data Manager Create Policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFunction = function() {\n\t\tvar payload = input.payload;\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n\t\tvar policySysId = proxy.createDraftPolicy(payload.policy_name, payload.description, payload.cmdb_policy_type, payload.work_notes);\n\t\tvar updatedOn = proxy.getPolicyInfo(policySysId).updated_on;\n\t\tvar gdt = new GlideDateTime(updatedOn);\n\t\tvar policyUpdated = gs.getMessage(\"Last saved: {0}\", gdt.getDisplayValue());\n\t\treturn {\n\t\t\t\"policySysId\": policySysId,\n\t\t\t\"policyUpdated\": policyUpdated\n\t\t};\n\t};\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Create Policy\", wrapperFunction);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"payload\",\r\n    \"label\": \"Data manager form information\",\r\n    \"fieldType\": \"json\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Payload of basic data manager form information from the general info view.\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_36c7298943dcb51017b739603ab8f212","api_name":"sn_cmdb_ws.Data Manager Create Policy","mutates_server_data":"true","name":"Data Manager Create Policy","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-25 18:46:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"36df6fac73d071103f3cc3ed8ff6a7b7","sys_updated_by":"admin","sys_created_on":"2023-07-25 01:17:08","sys_name":"De-Duplication Template Publish","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar templateId = input.templateSysId;\n\n\tresult = sn_cmdb.DuplicateTemplate.publishTemplate(templateId);\n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_36df6fac73d071103f3cc3ed8ff6a7b7","api_name":"sn_cmdb_ws.De-Duplication Template Publish","mutates_server_data":"true","name":"De-Duplication Template Publish","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Optional timestamp to force refresh of data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Refresh timestamp\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of the record\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-24 05:41:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"376900a853383110fdadddeeff7b12a2","sys_updated_by":"admin","sys_created_on":"2023-08-18 05:04:34","sys_name":"Get certification task data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"40","sys_tags":"","script":"function transform(input) {\n\tvar DM = new CMDBWsDMConstants();\n\tvar totalRecords = 0;\n\tif (!input.sys_id)\n\t\treturn {};\n\tvar gr = new GlideRecord(DM.TASK.TABLE);\n\tgr.get(input.sys_id);\n\tvar taskDisplayValue = gr.getDisplayValue(DM.TASK.NUMBER);\n\tvar assignmentGroup = {\n\t\tdisplayValue: gr.getDisplayValue(DM.TASK.ASSIGNMENT_GROUP),\n\t\tvalue: gr.getValue(DM.TASK.ASSIGNMENT_GROUP)\n\t};\n\tvar assignedTo = {\n\t\tdisplayValue: gr.getDisplayValue(DM.TASK.ASSIGNED_TO),\n\t\tvalue: gr.getValue(DM.TASK.ASSIGNED_TO)\n\t};\n\tvar taskState = gr.getValue(DM.TASK.STATE);\n\tvar isTaskClosed = taskState == DM.TASK.STATE_OPTIONS.CLOSED_COMPLETE\n\t\t|| taskState == DM.TASK.STATE_OPTIONS.CLOSED_INCOMPLETE\n\t\t|| taskState == DM.TASK.STATE_OPTIONS.CLOSED_SKIPPED\n\t\t|| taskState == DM.TASK.STATE_OPTIONS.CLOSED_CANCELLED;\n\tvar policyId = gr.getValue(DM.TASK.POLICY);\n\n\tvar certTable = '';\n\tvar displayFields = '';\n\tvar certificationFields = '';\n\tgr = new GlideRecord(DM.TASK_EXECUTION_CONTEXT.TABLE);\n\tgr.addQuery(DM.TASK_EXECUTION_CONTEXT.TASK, input.sys_id);\n\tgr.setLimit(1);\n\tgr.query();\n\tif (gr.next()) {\n\t\tvar context = gr.getValue(DM.TASK_EXECUTION_CONTEXT.CONTEXT);\n\t\tcontext = JSON.parse(context);\n\t\tcertTable = context.table;\n\t\tdisplayFields = context.displayFields;\n\t\tcertificationFields = context.certificationFields;\n\t}\n\n\tvar viewName = new CMDBWsDMPolicyManager().getCertificationPolicyViewName(certTable, displayFields, certificationFields);\n\n\tvar tabConfig = [];\n\tvar reviewNotCompletedMsg = gs.getMessage('Review not completed');\n\tvar incompleteTab = {\n\t\tlabel: reviewNotCompletedMsg,\n\t\tfields: {\n\t\t\trlQuery: 'RLQUERYsn_cmdb_ws_dm_certification_task_to_document.ci,=1^status=pending^cmdb_data_management_task=' + input.sys_id + '^ENDRLQUERY'\n\t\t}\n\t};\n\tvar incompleteCount = CMDBWsDMUtil.getRowCount(DM.CERTIFICATION_TASK_TO_DOCUMENT.TABLE, 'status=pending^cmdb_data_management_task=' + input.sys_id);\n\tif (incompleteCount > 0) {\n\t\tincompleteTab.count = incompleteCount;\n\t\ttotalRecords += parseInt(incompleteCount);\n\t}\n\ttabConfig.push(incompleteTab);\n\tvar reviewCompletedMsg = gs.getMessage('Review completed');\n\tvar completeTab = {\n\t\tlabel: reviewCompletedMsg,\n\t\tfields: {\n\t\t\trlQuery: 'RLQUERYsn_cmdb_ws_dm_certification_task_to_document.ci,=1^status!=pending^cmdb_data_management_task=' + input.sys_id + '^ENDRLQUERY'\n\t\t}\n\t};\n\tvar completeCount = CMDBWsDMUtil.getRowCount(DM.CERTIFICATION_TASK_TO_DOCUMENT.TABLE, 'status!=pending^cmdb_data_management_task=' + input.sys_id);\n\tif (completeCount > 0) {\n\t\tcompleteTab.count = completeCount;\n\t\ttotalRecords += parseInt(completeCount);\n\t}\n\ttabConfig.push(completeTab);\n\n\treturn {\n\t\tassignedTo: assignedTo,\n\t\tassignmentGroup: assignmentGroup,\n\t\tcertTable: certTable,\n\t\tcertificationFields: certificationFields,\n\t\tdisplayFields: displayFields,\n\t\tisTaskClosed: isTaskClosed,\n\t\ttabConfig: tabConfig,\n\t\ttaskDisplayValue: taskDisplayValue,\n\t\ttotalRecords: totalRecords,\n\t\tviewName: viewName\n\t};\n}","acl_failure_result":"","props":"[ \r\n  {\r\n     \"name\": \"sys_id\",\r\n     \"label\": \"Sys Id\",\r\n     \"description\": \"Sys id of the record\",\r\n     \"readOnly\": false,\r\n     \"fieldType\": \"string\",\r\n     \"mandatory\": true,\r\n     \"defaultValue\": \"\"\r\n   },\r\n{\r\n     \"name\": \"refresh_timestamp\",\r\n     \"label\": \"Refresh timestamp\",\r\n     \"description\": \"Optional timestamp to force refresh of data\",\r\n     \"readOnly\": false,\r\n     \"fieldType\": \"string\",\r\n     \"mandatory\": false,\r\n     \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_376900a853383110fdadddeeff7b12a2","api_name":"sn_cmdb_ws.Get certification task data","mutates_server_data":"false","name":"Get certification task data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Config Identifier Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Supports granular configurations both within and across Workspaces\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Workspace App Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetch all the related Items that are configured per workspace or the default config","sys_updated_on":"2024-09-19 02:08:48","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"37c7cbe1ff5852104894bb63aad33ef8","sys_updated_by":"admin","sys_created_on":"2024-08-28 19:35:51","sys_name":"Get Related Item Categories","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n\tvar result = {\n\t\terrors: [],\n\t\trelatedLists: []\n\t};\n\t\n\ttry {\n\t\tvar workspaceId = input.workspaceId;\n\t\tvar configIdentifierId = input.configIdentifierId;\n\t\tvar response = new UnifiedMapHelper().getRelatedItemCategories(workspaceId, configIdentifierId);\n\t\tif (!response.success) {\n\t\t\tresult.errors.push('There was an error fetching the related item categories. ' + response.error.message);\n\t\t} else if (response.result.length === 0) {\n\t\t\t// No categories found for this configuration (not a failure)\n\t\t\treturn result;\n\t\t} else {\n\t\t\tresult.relatedLists = response;\n\t\t}\n\t} catch (error) {\n\t\tresult.errors.push(error.toString());\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"","props":"  [{\r\n      \"name\": \"workspaceId\",\r\n      \"label\": \"Workspace App Id\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": true,\r\n      \"description\": \"Workspace App Id\"\r\n   },\r\n   {\r\n      \"name\": \"configIdentifierId\",\r\n      \"label\": \"Config Identifier Id\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": false,\r\n      \"description\": \"Supports granular configurations both within and across Workspaces\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_37c7cbe1ff5852104894bb63aad33ef8","api_name":"sn_cmdb_ws.Get Related Item Categories","mutates_server_data":"false","name":"Get Related Item Categories","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Group Info\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-26 18:41:32","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"380bcbb3ebb32510b5673d9f7f5228bd","sys_updated_by":"admin","sys_created_on":"2023-07-10 04:27:51","sys_name":"Get Group Members","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\treturn new OCTimeOffUtil().getGroupMembers(input.group_info);\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t\t\"name\": \"group_info\",\r\n\t\t\"label\": \"Group Info\",\r\n\t\t\"description\": \"Group Info\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"json\",\r\n\t\t\"mandatory\": false,\r\n\t\t\"defaultValue\": \"\"\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_380bcbb3ebb32510b5673d9f7f5228bd","api_name":"sn_uib_on_call.Get Group Members","mutates_server_data":"false","name":"Get Group Members","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Actionbar GraphQL Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-20 08:53:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"383a5499778e021013d4aeb4bb5a995d","sys_updated_by":"admin","sys_created_on":"2024-05-07 13:43:55","sys_name":"Actionbar Layout transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n    var childData = input.graphqlData.GlideUxActionLayout_Query.getActionLayout.actionLayoutItems;\n    var actions = [];\n\n    childData.forEach(function(child, index) {\n        if (!child.type) {\n            var action = {\n                \"id\": index,\n                \"overflow\": child.shouldBeInOverflow,\n                \"type\": \"Button\",\n                \"children\": [],\n                \"icon\": child.icon,\n                \"disabled\": false\n            };\n\n            var children = {};\n            children.id = child.sysId ? child.sysId : child.assignmentId;\n            children.label = child.label;\n            children.hint = child.sysId ? child.hint : child.tooltip;\n            children.icon = child.icon;\n            children.uxActionType = child.sysId ? 'UIAction' : 'DeclarativeAction';\n            child.id = children.assignmentId;\n            child.uxActionType = children.uxActionType;\n            children.action = child;\n            action.children.push(children);\n            actions.push(action);\n        } else {\n\t\t\tvar grp = {};\n\t\t\tgrp.id = index;\n\t\t\tgrp.label = \"\";\n\t\t\tgrp.overflow = child.shouldBeInOverflow,\n\t\t\tgrp.color = child.color;\n\t\t\tgrp.icon = child.icon;\n\t\t\tgrp.disabled = false;\n\t\t\tgrp.type = child.type;\n\t\t\tgrp.children = [];\n\t\t\tchild.actions.forEach(function(action, index) {\n\t\t\t\tvar act = {};\n\t\t\t\tact.id = action.sysId ? action.sysId : action.assignmentId;\n\t\t\t\tact.label = action.label;\n\t\t\t\tact.hint = action.sysId ? action.hint : action.tooltip;\n\t\t\t\tact.uxActionType = action.sysId ? 'UIAction' : 'DeclarativeAction';\n\t\t\t\tact.action = action;\n\t\t\t\tgrp.children.push(act);\n\t\t\t});\n\t\t\tactions.push(grp);\n\t\t}\n    });\n\n    return actions;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"graphqlData\",\r\n  \"label\": \"Actionbar GraphQL Data\",\r\n  \"fieldType\": \"object\",\r\n  \"mandatory\": true\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_383a5499778e021013d4aeb4bb5a995d","api_name":"sn_sow_problem.Actionbar Layout transform","mutates_server_data":"false","name":"Actionbar Layout transform","output_schema":"[]","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Search Context Config ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This transform checks if the input search application configuration has a search profile that has genius results linked","sys_updated_on":"2024-09-26 19:00:43","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"388561b79f20121065482457480a1cbb","sys_updated_by":"admin","sys_created_on":"2024-09-16 20:16:34","sys_name":"Fetch genius results linked","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\treturn new AISGeniusResultsLinkedToSearchApplication().areGeniusResultsLinked(input.searchContextConfigId);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"searchContextConfigId\",\r\n    \"label\": \"Search Context Config ID\",\r\n    \"description\": \"Search Context Config ID\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"reference\",\r\n    \"mandatory\": true,\r\n    \"typeMetadata\": {\r\n      \"reference\": \"sys_search_context_config\"\r\n    }\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_388561b79f20121065482457480a1cbb","api_name":"global.Fetch genius results linked","mutates_server_data":"false","name":"Fetch genius results linked","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Deflection Configuration Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Deflection Configuration Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Description of Deflection Configuration\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"deflection configuration id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"description of deflection configuration\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"name of the  deflection Configuration\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-08-16 13:15:43","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3912649487c6f010a4a2c077f6cb0b54","sys_updated_by":"admin","sys_created_on":"2021-08-14 07:14:37","sys_name":"Update Deflection Configuration","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n\n    function updateVaDeflectionConfiguration(deflectionConfigId, deflectionConfigName, deflectionConfigDescription) {\n        var gr = new GlideRecord('ssa_deflection_configuration');\n\n        if (deflectionConfigId && gr.get(deflectionConfigId)) {\n            gr.setValue('name', deflectionConfigName);\n            gr.setValue('description', deflectionConfigDescription);\n            gr.setWorkflow(false);\n            if (gr.canWrite()) {\n                return {\n                    'config_id': gr.update(),\n                    'success': gs.getMessage('Deflection Configuration updated')\n                };\n            }\n        }\n\n        return {\n            'error': gs.getMessage('Deflection Configuration updation failed')\n        };\n\n    }\n\n    function createVaDeflectionConfiguration(deflectionConfigName, deflectionConfigDescription) {\n        var gr = new GlideRecord('ssa_deflection_configuration');\n        gr.initialize();\n        gr.setValue('name', deflectionConfigName);\n        gr.setValue('description', deflectionConfigDescription);\n        gr.setValue('activity_context', \"7b43fb645383201033cdddeeff7b1246\");\n        gr.setWorkflow(false);\n        if (gr.canCreate()) {\n            return {\n                'config_id': gr.insert(),\n                'success': gs.getMessage('Deflection Configuration created')\n            };\n        }\n\n        return {\n            'error': gs.getMessage('Deflection Configuration creation failed')\n        };\n    }\n\n    var deflectionConfigId = input.deflection_configuration_id;\n    var response = {};\n\n    if (deflectionConfigId != '-1')\n        response = updateVaDeflectionConfiguration(deflectionConfigId, input.name, input.description);\n    else\n        response = createVaDeflectionConfiguration(input.name, input.description);\n\n    return response;\n}","acl_failure_result":"","props":"[\r\n     {\r\n        \"name\": \"deflection_configuration_id\",\r\n        \"label\": \"Deflection Configuration Id\",\r\n        \"description\": \"deflection configuration id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"name\",\r\n        \"label\": \"Deflection Configuration Name\",\r\n        \"description\": \"name of the  deflection Configuration\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n   {\r\n        \"name\": \"description\",\r\n        \"label\": \"Description of Deflection Configuration\",\r\n        \"description\": \"description of deflection configuration\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sys_ux_data_broker_transform_3912649487c6f010a4a2c077f6cb0b54","api_name":"global.Update Deflection Configuration","mutates_server_data":"true","name":"Update Deflection Configuration","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Experience Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Properties for the Activity UI Macroponent content\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Transform to fetch input for knowledge article data resource from experienceProperties","sys_updated_on":"2021-08-24 20:00:23","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3a1442ebc3023010948404186e40ddc7","sys_updated_by":"admin","sys_created_on":"2021-08-24 16:14:13","sys_name":"Playbook Experience Playbook Knowledge Card Input","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\tvar experienceProperties = input.experienceProperties || {};\n\tvar knowledgeTable = experienceProperties.knowledge_table || {};\n\tvar knowledgeRecord = experienceProperties.knowledge_record || {};\n\t\n\treturn {\n\t\tknowledgeTable: knowledgeTable.value || \"\",\n\t\tknowledgeRecord: knowledgeRecord.value || \"\"\n\t};\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"experienceProperties\",\n    \"label\": \"Experience Properties\",\n    \"description\": \"Properties for the Activity UI Macroponent content\",\n    \"readOnly\": false,\n    \"fieldType\": \"json\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_update_name":"sys_ux_data_broker_transform_3a1442ebc3023010948404186e40ddc7","api_name":"sn_playbook_exp.Playbook Experience Playbook Knowledge Card Input","mutates_server_data":"false","name":"Playbook Experience Playbook Knowledge Card Input","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-05 16:57:12","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3a1ec2ed43b502107524354d3ab8f222","sys_updated_by":"admin","sys_created_on":"2024-04-26 06:29:49","sys_name":"Pwd Reset Initiate Account Unlock","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\t\treturn new sn_uib_pwd_reset.PwdResetUXFResetProcessor().unlockAccount(input.token);\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_3a1ec2ed43b502107524354d3ab8f222","api_name":"sn_uib_pwd_reset.Pwd Reset Initiate Account Unlock","mutates_server_data":"true","name":"Pwd Reset Initiate Account Unlock","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Query SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"queryInfo\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3a3a66a277311110b9f7f350ff5a99d0","sys_updated_by":"admin","sys_created_on":"2022-09-10 22:33:35","sys_name":"MS Save Query","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"16","sys_tags":"","script":"function transform(input) {\n\t\n\tvar result = {\n\t\terror: null,\n\t\tstatus : 'success',\n\t\tmessage : null\n\t};\n\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tvar query_json = input.queryInfo.query_json;\n\tvar query_sys_id = input.queryInfo.query_sys_id;\n\t\n\tif(!query_json) {\n\t\tresult.status = 'failure';\n\t\tresult.error = \"query_json is missing\";\n\t\treturn result;\n\t}\n\t\n\tif(query_sys_id) {\n\t\tresult = util.updateQuery(query_sys_id,query_json);\n\t} else {\n\t\tresult = util.createQuery(query_json);\n\t}\n\t\n\treturn result;\n}\n\n","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"queryInfo\",\r\n    \"label\": \"queryInfo\",\r\n    \"description\": \"Query SysId\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_3a3a66a277311110b9f7f350ff5a99d0","api_name":"sn_cmdb_ws.MS Save Query","mutates_server_data":"true","name":"MS Save Query","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Array of CI sys ids to fetch related services\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"List of CI Sys IDs\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Utilizes the application service / service mapping API to get the application services that are associated with the array of ci sys ids","sys_updated_on":"2024-07-16 23:40:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3a703d2407b7111017b703767cd300ad","sys_updated_by":"admin","sys_created_on":"2022-12-12 23:54:37","sys_name":"Get Related Application Services","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"28","sys_tags":"","script":"function transform(input) {\n    var TRANSLATIONS = {\n        NO_BUSINESS_CRITICALITY: gs.getMessage(\"No Business Criticality\"),\n        MOST_CRITICAL: gs.getMessage(\"Most Critical\"),\n        SOMEWHAT_CRITICAL: gs.getMessage(\"Somewhat Critical\"),\n        LESS_CRITICAL: gs.getMessage(\"Less Critical\"),\n        NOT_CRITICAL: gs.getMessage(\"Not Critical\"),\n        OWNER: gs.getMessage(\"Owner\"),\n        CLASS: gs.getMessage(\"Class\"),\n        DISCOVERY_SOURCE: gs.getMessage(\"Discovery source\"),\n        LAST_DISCOVERED: gs.getMessage(\"Last discovered\"),\n        NONE: gs.getMessage(\"none\"),\n        NO_OP_STATUS: gs.getMessage(\"No status found\")\n    };\n    var BUSINESS_CRITICALITY_VALUES = {\n        MOST_CRITICAL: '1 - most critical',\n        SOMEWHAT_CRITICAL: '2 - somewhat critical',\n        LESS_CRITICAL: '3 - less critical',\n        NOT_CRITICAL: '4 - not critical'\n    };\n    var COLORS = {\n        NO_CRITICALITY_GREY: \"low\",\n        CRITICAL_RED: \"critical\",\n        HIGH_ORANGE: \"high\",\n        WARN_YELLOW: \"warning\",\n        LOW_BLUE: \"info\",\n        DEFAULT: \"moderate\",\n    };\n    // format the highlight object for criticality\n    function getBusinessCriticality(businessCriticality) {\n        var bcHighlightObject;\n        if (!businessCriticality) {\n            bcHighlightObject = {\n                \"label\": TRANSLATIONS.NO_BUSINESS_CRITICALITY,\n                \"color\": COLORS.NO_CRITICALITY_GREY\n            };\n            return bcHighlightObject;\n        }\n        switch (businessCriticality) {\n            case BUSINESS_CRITICALITY_VALUES.MOST_CRITICAL:\n                bcHighlightObject = {\n                    \"label\": TRANSLATIONS.MOST_CRITICAL,\n                    \"color\": COLORS.CRITICAL_RED\n                };\n                break;\n            case BUSINESS_CRITICALITY_VALUES.SOMEWHAT_CRITICAL:\n                bcHighlightObject = {\n                    \"label\": TRANSLATIONS.SOMEWHAT_CRITICAL,\n                    \"color\": COLORS.HIGH_ORANGE\n                };\n                break;\n            case BUSINESS_CRITICALITY_VALUES.LESS_CRITICAL:\n                bcHighlightObject = {\n                    \"label\": TRANSLATIONS.LESS_CRITICAL,\n                    \"color\": COLORS.WARN_YELLOW\n                };\n                break;\n            case BUSINESS_CRITICALITY_VALUES.NOT_CRITICAL:\n                bcHighlightObject = {\n                    \"label\": TRANSLATIONS.NOT_CRITICAL,\n                    \"color\": COLORS.LOW_BLUE\n                };\n                break;\n            default:\n                bcHighlightObject = {\n                    \"label\": businessCriticality,\n                    \"color\": COLORS.DEFAULT\n                };\n                break;\n        }\n        return bcHighlightObject;\n    }\n    // get the searchable properties for the object\n    function getPropertiesObject(gr) {\n        return {\n            \"name\": gr.getDisplayValue(\"name\"),\n            \"owned_by\": gr.getDisplayValue(\"owned_by\"),\n            \"last_discovered\": gr.getDisplayValue(\"last_discovered\"),\n            \"class\": gr.getValue(\"sys_class_name\"),\n            \"tableName\": gr.getDisplayValue(\"sys_class_name\"),\n            \"discovery_source\": gr.getDisplayValue(\"discovery_source\"),\n            \"operational_status\": gr.getDisplayValue(\"operational_status\"),\n            \"busines_criticality\": gr.getDisplayValue(\"busines_criticality\"),\n            \"card_name\": gs.getMessage(\"{0} application service card\", gr.getDisplayValue(\"name\"))\n        };\n    }\n    var appServiceArray = [];\n    var sysIds = input.ciSysIds;\n    var mapService = new UnifiedMapHelper();\n    // this is an object where the key is the CI and the values are an array of sys_id of application service\n    var relatedSvcSysIds = mapService.getRelatedApplicationServices(!Array.isArray(sysIds) ? [sysIds] : sysIds);\n    if (!relatedSvcSysIds.success || !relatedSvcSysIds.result) {\n        // error condition, display error on client\n        return relatedSvcSysIds;\n    }\n    var visitedServiceSysIds = {};\n    var keys = Object.keys(relatedSvcSysIds.result);\n    for (var index = 0; index < keys.length; index++) {\n        // iterate through results and grab all associated services. \n        // The key is the sys_id of the CI and the value is an array of service CIs\n        var serviceSysIds = relatedSvcSysIds.result[keys[index]];\n        if (!serviceSysIds || serviceSysIds.length === 0)\n            continue;\n        var serviceGr = new GlideRecord('cmdb_ci_service_auto');\n        serviceGr.addQuery('sys_id', 'IN', serviceSysIds);\n        serviceGr.query();\n        while (serviceGr.next()) {\n            var sysId = serviceGr.getUniqueValue();\n            // ensure no duplicates\n            if (visitedServiceSysIds.hasOwnProperty(sysId)) {\n                continue;\n            }\n            visitedServiceSysIds[sysId] = \"\";\n            // constructs the application services card from properties\n            var propertiesObj = getPropertiesObject(serviceGr);\n            var cardContent = {};\n            cardContent.sysId = sysId;\n            cardContent.header = {\n                \"label\": propertiesObj[\"name\"],\n                \"size\": \"md\"\n            };\n            cardContent.subheader = {\n                \"label\": propertiesObj['tableName']\n            };\n            // label value stacked will be split into two rows\n            cardContent.labelValueStackedRow1 = [{\n                    \"label\": TRANSLATIONS.OWNER,\n                    \"value\": {\n                        \"type\": \"string\",\n                        \"value\": propertiesObj[\"owned_by\"] || TRANSLATIONS.NONE\n                    }\n                },\n                {\n                    \"label\": TRANSLATIONS.CLASS,\n                    \"value\": {\n                        \"type\": \"string\",\n                        \"value\": propertiesObj[\"class\"]\n                    }\n                }\n            ];\n            cardContent.labelValueStackedRow2 = [{\n                    \"label\": TRANSLATIONS.DISCOVERY_SOURCE,\n                    \"value\": {\n                        \"type\": \"string\",\n                        \"value\": propertiesObj[\"discovery_source\"] || TRANSLATIONS.NONE\n                    }\n                },\n                {\n                    \"label\": TRANSLATIONS.LAST_DISCOVERED,\n                    \"value\": {\n                        \"type\": \"string\",\n                        \"value\": propertiesObj[\"last_discovered\"] || TRANSLATIONS.NONE\n                    }\n                }\n            ];\n            var opStatus = propertiesObj[\"operational_status\"];\n            cardContent.operationalLabel = opStatus || TRANSLATIONS.NO_OP_STATUS;\n            cardContent.businessCriticality = getBusinessCriticality(propertiesObj[\"busines_criticality\"]);\n            // copy properties to card so they can be searched\n            cardContent.properties = propertiesObj;\n\n\t\t\t// add a prop to indicate which supplied CIs are in each app svc\n\t\t\tvar suppliedSysIdsInSvc = [];\n\t\t\tkeys.forEach(function(key){\n\t\t\t\tif (relatedSvcSysIds.result[key].indexOf(sysId) > -1) {\n\t\t\t\t\tsuppliedSysIdsInSvc.push(key);\n\t\t\t\t}\n\t\t\t});\n\t\t\tcardContent.sysIdsInSvc = suppliedSysIdsInSvc;\n\n            appServiceArray.push(cardContent);\n        }\n    }\n    result = {\n        \"appServiceArray\": appServiceArray\n    };\n    return result;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"ciSysIds\",\r\n    \"label\": \"List of CI Sys IDs\",\r\n    \"fieldType\": \"json\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Array of CI sys ids to fetch related services\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_3a703d2407b7111017b703767cd300ad","api_name":"sn_cmdb_ws.Get Related Application Services","mutates_server_data":"true","name":"Get Related Application Services","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-10-28 07:52:44","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3aea038148e11210f87746e8144e3cd7","sys_updated_by":"admin","sys_created_on":"2024-10-28 07:44:07","sys_name":"Creator Studio plugin details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/50c45c69e0089cfa57aa73a642c702c7","value":"50c45c69e0089cfa57aa73a642c702c7"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform() {\n\n    const creatorStudioPluginId = 'com.app_creator_studio';\n    const experienceType = 'creator_studio';\n    const creatorStudioMessages = {\n        notInstalled: {\n            headerText: gs.getMessage(\"Creator Studio hasn't been installed yet\"),\n            paragraphText: gs.getMessage(\"Once your admin installs it, you can start using this no-code app builder.\")\n        },\n        notUpdated: {\n            headerText: gs.getMessage(\"Creator Studio hasn't been updated yet\"),\n            paragraphText: gs.getMessage(\"Once your admin updates Creator Studio, you can start using this no-code app builder.\")\n        }\n    };\n\n    if (!GlidePluginManager.isActive(creatorStudioPluginId)) {\n        return creatorStudioMessages.notInstalled;\n    }\n\n    if (!sn_udc.ExperienceConfiguration.isExperienceAvailable(experienceType)) {\n        return creatorStudioMessages.notUpdated;\n    }\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/50c45c69e0089cfa57aa73a642c702c7","value":"50c45c69e0089cfa57aa73a642c702c7"},"sys_update_name":"sys_ux_data_broker_transform_3aea038148e11210f87746e8144e3cd7","api_name":"sn_studio_commons.Creator Studio plugin details","mutates_server_data":"false","name":"Creator Studio plugin details","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"App Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to fetch data required for Branding Settings page in CI Admin Console","sys_updated_on":"2022-08-25 15:14:23","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3b152255c32111104b8e88c7c840dd32","sys_updated_by":"admin","sys_created_on":"2022-08-25 14:42:14","sys_name":"CI Product Tour Helper","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    if (!input.appId || !input.table) return null;\n    try {\n        var response =  new sn_oe_sfs.CIUtil().getProductTour(input.appId, input.table);\n\t\treturn response;\n    } catch (e) {\n        gs.error('Failed fetching product tours for App: ' + appId + ' and table: ' + table + '. ' + e.toString());\n        return null;\n    }\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"appId\",\n      \"label\": \"App Id\",\n      \"description\": \"\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"table\",\n      \"label\": \"Table\",\n      \"description\": \"\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_3b152255c32111104b8e88c7c840dd32","api_name":"sn_oe_sfs.CI Product Tour Helper","mutates_server_data":"false","name":"CI Product Tour Helper","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Bot Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Inbound ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"inbound_id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-05-19 12:56:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3b4b855bc3f66110bf30c265cb40dd36","sys_updated_by":"admin","sys_created_on":"2023-05-19 12:56:08","sys_name":"fetchMessengerBotDetails","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input){\n\tvar botName = input.messenger_bot_name;\n\tvar inbound_id = input.inbound_id;\n\treturn new sn_va_fb_messenger.VAFBMessengerCustomBotInstall().getBotInfo(botName, inbound_id);\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"inbound_id\",\r\n      \"label\": \"inbound_id\",\r\n      \"description\": \"Inbound ID\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n  {\r\n      \"name\": \"messenger_bot_name\",\r\n      \"label\": \"Bot Name\",\r\n      \"description\": \"Bot Name\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_3b4b855bc3f66110bf30c265cb40dd36","api_name":"sn_oe_sfs.fetchMessengerBotDetails","mutates_server_data":"false","name":"fetchMessengerBotDetails","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Group\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Group for fetching shifts\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Shift data needed for the shifts tab ","sys_updated_on":"2024-09-05 15:52:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3b58e93753303110ad0fddeeff7b12d4","sys_updated_by":"admin","sys_created_on":"2023-08-28 14:17:25","sys_name":"Get shift data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"108","sys_tags":"","script":"function transform(input) {\n    var shiftGr = new GlideRecord('cmn_rota');\n    shiftGr.addQuery('group', input.group);\n    shiftGr.query();\n    var shifts = [];\n    while (shiftGr.next()) {\n        var shiftData = new sn_uib_on_call.ShiftDetailsUtils().getShiftData(shiftGr.getValue('sys_id'), 'allShifts');\n        var daysSelected = shiftData.day_selected;\n        var dayOrder = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n        var daysArray = [];\n        var daysCode = shiftData.weekday_code;\n\n        for (var i = 0; i < dayOrder.length; i++) {\n            var day = dayOrder[i];\n            daysArray.push({\n                name: day.charAt(0).toUpperCase() + day.slice(1),\n                code: daysCode[day],\n                isActive: daysSelected[day]\n            });\n        }\n\n        shifts.push({\n            name: shiftData.shiftName,\n            active: shiftData.active,\n            sysId: shiftGr.getValue('sys_id'),\n            state: shiftData.state,\n            users: shiftData.finalUsers,\n            additionalUsers: shiftData.additionalUsersText,\n            groupMembers: getGroupMembers(input.group),\n            timezone: shiftData.startTime + \" - \" + shiftData.endTime + \" (\" + shiftData.selected_timezone + \")\",\n            daysArray: daysArray,\n            rosters: shiftData.rosterData,\n            userDateTimeFormat: gs.getDateTimeFormat(),\n            isComplex: shiftData.complexShift,\n            scheduleName: shiftData.schedule_name,\n            scheduleSysId: shiftData.schedule_sysid,\n            moreActionsDropdownLabel: {\n                \"aria-label\": gs.getMessage(\"More options for {0}\", shiftData.shiftName)\n            }\n        });\n    }\n    return shifts;\n\n    function getTime(scheduledDateTime, timezone) {\n        var gsdt = new GlideScheduleDateTime();\n        gsdt.setValue(scheduledDateTime);\n        var convertedDateTime = gsdt.convertTimeZone(gs.getSession().getTimeZoneName(), timezone);\n        var gdt = new GlideDateTime();\n        gdt.setValueUTC(convertedDateTime, gs.getDateTimeFormat());\n        return gdt.getTime().getByFormat(gs.getTimeFormat().replace(/\\W*ss/, \"\"));\n    }\n\n    function getGroupMembers(groupSysId) {\n        var groupMembers = [];\n\n        var groupMemberGr = new GlideRecord(\"sys_user_grmember\");\n        groupMemberGr.addQuery('group', groupSysId);\n        groupMemberGr.addQuery(\"user.active\", true);\n        groupMemberGr.orderBy('user');\n        groupMemberGr.query();\n\n        while (groupMemberGr.next()) {\n            groupMembers.push({\n                'label': groupMemberGr.user.getDisplayValue('name'),\n                'id': groupMemberGr.user + ''\n            });\n        }\n\n        return groupMembers;\n    }\n\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"group\",\r\n    \"label\": \"Group\",\r\n    \"description\": \"Group for fetching shifts\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_3b58e93753303110ad0fddeeff7b12d4","api_name":"sn_uib_on_call.Get shift data","mutates_server_data":"false","name":"Get shift data","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-04-18 21:46:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3b5e9e857752211004d63a91fa5a99dd","sys_updated_by":"admin","sys_created_on":"2023-04-17 22:49:17","sys_name":"Get Adaptive Auth Policy Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var isAuthPolicyEnabledOnce = false;\n    if (GlidePluginManager.isActive('com.snc.adaptive_authentication')) {\n        // check if the property glide.authenticate.auth.policy.enabled is set to true at least once\n        var gr = new GlideRecord('sys_audit');\n        gr.addEncodedQuery('documentkey=47a63d6373121010616ca9843cf6a7c2^newvalue=true');\n        gr.query();\n        if (gr.hasNext()) {\n            isAuthPolicyEnabledOnce = true;\n        }\n    }\n    return {\n        'isAuthPolicyEnabledOnce': isAuthPolicyEnabledOnce\n    };\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_3b5e9e857752211004d63a91fa5a99dd","api_name":"sn_vsc.Get Adaptive Auth Policy Status","mutates_server_data":"false","name":"Get Adaptive Auth Policy Status","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"A comma separated string of feature IDs to check for version support\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Feature flag IDs\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Queries the CMDBWsFeatureSupportUtil for support of the provided feature flag","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3b8d898843b3211017b739603ab8f28a","sys_updated_by":"maint","sys_created_on":"2023-06-28 03:40:36","sys_name":"CMDB Workspace Feature Support","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"21","sys_tags":"","script":"function transform(input) {\n\tvar featureSupportUtil = new sn_cmdb_ws.CMDBWsFeatureSupportUtil();\n\tvar result = {};\n\n\tif (input && input.featureId && input.featureId.length > 0) {\n\t\tvar featureIds = input.featureId.split(\",\");\n\t\tfeatureIds.forEach(function (featureId) {\n\t\t\tresult[featureId] = {};\n\t\t\tresult[featureId].supported = featureSupportUtil.supportsFeature(featureId);\n\t\t\tif (!result[featureId].supported)\n\t\t\t\tresult[featureId].message = featureSupportUtil.getUnsupportedFeatureMessage(featureId);\n\t\t});\n\t\tresult.complete = true;\n\t}\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n    {\r\n      \"name\": \"featureId\",\r\n      \"label\": \"Feature flag IDs\",\r\n      \"description\": \"A comma separated string of feature IDs to check for version support\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_3b8d898843b3211017b739603ab8f28a","api_name":"sn_cmdb_ws.CMDB Workspace Feature Support","mutates_server_data":"false","name":"CMDB Workspace Feature Support","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Check if there exists at least one sys_one_extend_definition_config record for Particpant Suggestions sys_one_extend_capability.","sys_updated_on":"2023-10-07 02:44:13","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3c5941a8a33131100bf487c2441e6157","sys_updated_by":"admin","sys_created_on":"2023-10-07 02:44:13","sys_name":"Get One Extend Definition Config for Participant Suggestions Service","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform() {\n\tvar oneExtendDefinitionConfigGR = new GlideRecord(\"sys_one_extend_definition_config\");\n\t// Participant Suggestions Capability\n\toneExtendDefinitionConfigGR.addQuery(\"capability\",\"853f0b7243d4f1106ccb3fc9dbb8f251\");\n\toneExtendDefinitionConfigGR.addActiveQuery();\n\toneExtendDefinitionConfigGR.query();\n\treturn oneExtendDefinitionConfigGR.getRowCount() > 0;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_3c5941a8a33131100bf487c2441e6157","api_name":"sn_oe_sfs.Get One Extend Definition Config for Participant Suggestions Service","mutates_server_data":"false","name":"Get One Extend Definition Config for Participant Suggestions Service","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id of the best practice record\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Show number of steps completed for a best practice","sys_updated_on":"2024-03-22 18:38:25","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3c674791774331101b803a91fa5a9992","sys_updated_by":"maint","sys_created_on":"2023-12-10 23:10:05","sys_name":"Get BP steps completed","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\n    var returnObj = {};\n    var sysId = input.sys_id;\n    var res = new sn_vsc.SCPlaybookUtil().getBPStepData(sysId);\n    var msg = \"\";\n    var outstandingStepsCount = res.totalSteps - res.completedSteps;\n    if (res.completedSteps > 0) {\n        msg = gs.getMessage('This Best Practice was last edited on {0} by {1}. ', [res.lastUpdated.split(\" \")[0], res.lastUpdatedBy]);\n    }\n    if (outstandingStepsCount > 0) {\n        msg += gs.getMessage('{0} outstanding steps are ready to be completed.', outstandingStepsCount);\n    }\n    returnObj = {\n        'totalSteps': res.totalSteps,\n        'completedSteps': res.completedSteps,\n        'outstandingSteps': outstandingStepsCount,\n        'message': msg\n    };\n\n    return returnObj;\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"sys_id\",\n      \"label\": \"Sys Id\",\n      \"description\": \"Sys Id of the best practice record\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_3c674791774331101b803a91fa5a9992","api_name":"sn_vsc.Get BP steps completed","mutates_server_data":"false","name":"Get BP steps completed","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Add or Remove Bookmark\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Payload\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to add and remove bookmark.","sys_updated_on":"2024-08-29 11:12:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3ccc35719f9c52107e91971b8a0a1cc6","sys_updated_by":"admin","sys_created_on":"2024-08-29 07:19:08","sys_name":"Upgrade-management-bookmark","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/62336aa2cc80d210f877639778ef1feb","value":"62336aa2cc80d210f877639778ef1feb"},"sys_created_by":"maint","sys_mod_count":"41","sys_tags":"","script":"function transform(input) {\n\tif(input.addOrRemoveBookmark === \"add\") {\n\t\tvar request1 = new sn_ws.RESTMessageV2();\n\t\trequest1.setEndpoint('http://localhost:8080/api/now/ui/favorite');\n\t\trequest1.setHttpMethod('POST');\n\n\t\t//Eg. UserName=\"admin\", Password=\"admin\" for this code sample.\n\t\t// var user = 'admin';\n\t\t// var password = 'admin';\n\n\t\t// request.setBasicAuth(user,password);\n\t\trequest1.setRequestHeader(\"Accept\",\"application/json\");\n\t\trequest1.setRequestHeader('Content-Type','application/json');\n\t\trequest1.setRequestBody(JSON.stringify(input.payload));\n\t\tgs.info(JSON.stringify(input.payload));\n\t\tvar response1 = request1.execute();\n\t\tgs.info(response1.getBody());\n\t\treturn response1.getBody();\n\t} else {\n\t\tconst {sys_id} = input.payload;\n\t\tgs.info(sys_id);\n\t\tvar request = new sn_ws.RESTMessageV2();\n\t\trequest.setEndpoint('http://localhost:8080/api/now/ui/favorite?id='+sys_id);\n\t\trequest.setHttpMethod('DELETE');\n\n\t\t//Eg. UserName=\"admin\", Password=\"admin\" for this code sample.\n\t\t// var user = 'admin';\n\t\t// var password = 'admin';\n\n\t\t// request.setBasicAuth(user,password);\n\t\trequest.setRequestHeader(\"Accept\",\"application/json\");\n\n\t\tvar response = request.execute();\n\t\tgs.info(response.getBody());\n\t}\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"addOrRemoveBookmark\",\r\n     \"label\": \"Add or Remove Bookmark\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"\"\r\n  }, \r\n{\r\n    \"name\": \"payload\",\r\n     \"label\": \"Payload\",\r\n    \"fieldType\": \"json\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/62336aa2cc80d210f877639778ef1feb","value":"62336aa2cc80d210f877639778ef1feb"},"sys_update_name":"sys_ux_data_broker_transform_3ccc35719f9c52107e91971b8a0a1cc6","api_name":"sn_upgrade_mgmt.Upgrade-management-bookmark","mutates_server_data":"false","name":"Upgrade-management-bookmark","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Payload of row selection, coming from selected record count updated\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Row selection payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected sysIds of cmdb_policy_exclusion_list records\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"comma separated Sys IDs of exclusion list records\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Remove selected records from all or selected lists","sys_updated_on":"2023-09-23 07:26:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3d1f37d4cb1d311078520592a2e866b0","sys_updated_by":"admin","sys_created_on":"2023-09-12 00:53:12","sys_name":"Remove records from exclusion list","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\t\n\tvar util = new sn_cmdb_ws.CMDBWsDMPolicyTypeManager();\n\n\tvar inputSysIds = input.sysIds;\n\tvar rowSelection = input.rowSelection;\n\tif(rowSelection.allRecordsSelected) {\n\t\t//call util function with query only\n\t\tutil.removeRecordsFromExclusionList(rowSelection.query);\n\t} else {\n\t\tutil.removeSelectedRecordsFromExclusionList(inputSysIds);\n\t}\n\t\n\t\n}\t\n\n","acl_failure_result":"","props":"[{\r\n \"name\": \"sysIds\",\r\n  \"label\": \"Selected sysIds of cmdb_policy_exclusion_list records\",\r\n  \"description\": \"comma separated Sys IDs of exclusion list records\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n \"defaultValue\": \"\"\r\n},\r\n{\r\n    \"name\": \"rowSelection\",\r\n    \"label\": \"Row selection payload\",\r\n    \"fieldType\": \"json\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Payload of row selection, coming from selected record count updated\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_3d1f37d4cb1d311078520592a2e866b0","api_name":"sn_cmdb_ws.Remove records from exclusion list","mutates_server_data":"true","name":"Remove records from exclusion list","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Related item data configuration\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Should contain a payload of related item category sys id to indicate the related item category to display (ex. incident, problem) and a list of sys_id to fetch the related records.\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get all the related item records for the provided tableQuery object (configured tables are in sn_cmdb_ws_node_map_related_item).","sys_updated_on":"2024-05-07 11:09:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3e0f310e774a0110960ced43ba5a993c","sys_updated_by":"maint","sys_created_on":"2022-03-06 20:12:59","sys_name":"Get Related Item Records","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"99","sys_tags":"","script":"function transform(input) {\n    var result = {};\n\tresult.errors = [];\n    try {\n        var helper = new UnifiedMapHelper();\n\t\t\n        var tmpResult = helper.getRelatedItemData(input ? input.payload : {});\n        if (tmpResult.success) {\n            result.data = tmpResult.result;\n        } else {\n            //TODO: map with user-friendly error messages WRT tmpResult.error.code\n            result.errors.push(tmpResult.error.message);\n        }\n\n    } catch (error) {\n        result.errors.push(error.toString());\n    }\n    return result;\n}","acl_failure_result":"{\r\n\t\"message\":\"User does not have required roles to perform this action.\"\r\n}","props":"[\r\n  {\r\n    \"name\": \"payload\",\r\n    \"label\": \"Related item data configuration\",\r\n    \"fieldType\": \"json\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Should contain a payload of related item category sys id to indicate the related item category to display (ex. incident, problem) and a list of sys_id to fetch the related records.\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_3e0f310e774a0110960ced43ba5a993c","api_name":"sn_cmdb_ws.Get Related Item Records","mutates_server_data":"true","name":"Get Related Item Records","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template JSON\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-06 20:13:59","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3e762be073d071103f3cc3ed8ff6a7f5","sys_updated_by":"admin","sys_created_on":"2023-07-25 00:48:16","sys_name":"De-Duplication Template Create","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"14","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar templateJson = input.templateJson;\n\n\tresult = sn_cmdb.DuplicateTemplate.createTemplate(templateJson);\n\tif(result) {\n\t\tvar templateUtil = new DedupeTemplateUtil();\n\t\tvar conditions = templateJson.conditions ? templateJson.conditions : \"\";\n\t\tvar advanced = templateJson.advanced ? true : false;\n\t\tvar script = templateJson.script ? templateJson.script : \"\";\n\t\t// if adavnced (use script) clear conditions\n\t\tif(advanced)\n\t\t\tconditions = '';\n\n\t\ttemplateUtil.addTemplateConditions(result,conditions);\n\t\ttemplateUtil.addTemplateScript(result, advanced, script);\n\t}\n\n\tif(templateJson.library) {\n\t\tvar util = new DedupeTemplateLibraryUtil();\n\t\tvar LibrayResult = util.addTemplateToLibrary(result,templateJson.library);\n\t}\n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateJson\",\r\n      \"label\": \"Template JSON\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"json\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_3e762be073d071103f3cc3ed8ff6a7f5","api_name":"sn_cmdb_ws.De-Duplication Template Create","mutates_server_data":"true","name":"De-Duplication Template Create","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-06 05:02:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3e98b47a43900210e777c91766b8f278","sys_updated_by":"maint","sys_created_on":"2024-02-15 08:02:50","sys_name":"Get customer account details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_created_by":"admin","sys_mod_count":"77","sys_tags":"","script":"/*\nReturns: \n    Account ID, Account Name, Instance name, Capacity type, instance id, is subprod instance, total used pool capacity.\n\n*/\nfunction transform(input) {\n    const accountDetails = {};\n\n    const cloudEntitlementDetailDAO = new CloudEntitlementDetailDAO();\n    const cloudStorageAccountConsumptionService = new CloudStorageAccountConsumptionService();\n    const cloudStorageInstanceConsumptionDAO = new CloudStorageInstanceConsumptionDAO();\n    const isSharedCapacityType = cloudEntitlementDetailDAO.isSharedCapacityType();\n    const consumptions = cloudStorageInstanceConsumptionDAO.getInstanceStorageConsumption();\n    const poolConsumptions = cloudStorageInstanceConsumptionDAO.getInstancePoolConsumption();\n\taccountDetails.showCloudEntitlement = cloudEntitlementDetailDAO.showCloudEntitlement();\n    accountDetails.isSharedCapacityType = isSharedCapacityType;\n    accountDetails.capacityType = cloudStorageAccountConsumptionService.getCapacityType(isSharedCapacityType);\n    accountDetails.totalUsedPoolCapacity = cloudStorageAccountConsumptionService.getTotalUsedPoolCapacity(isSharedCapacityType);\n    accountDetails.totalPoolPurchasedCapacityCount = cloudStorageAccountConsumptionService.getTotalPoolPurchasedCapacityCount();\n\n    accountDetails.isOverage = ((accountDetails.totalUsedPoolCapacity - accountDetails.totalPoolPurchasedCapacityCount) > 0) ? true : false;\n\n    accountDetails.availablePoolCapacity = cloudStorageAccountConsumptionService.getAvailablePoolCapacity(accountDetails.totalPoolPurchasedCapacityCount, accountDetails.totalUsedPoolCapacity, accountDetails.isOverage);\n    accountDetails.excessPoolCapacity = cloudStorageAccountConsumptionService.getExcessPoolCapacity(accountDetails.totalPoolPurchasedCapacityCount, accountDetails.totalUsedPoolCapacity, accountDetails.isOverage);\n\n    accountDetails.isDataSharingRestricted = cloudEntitlementDetailDAO.isDataSharingRestricted(consumptions, poolConsumptions, isSharedCapacityType);\n\n    return accountDetails;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_update_name":"sys_ux_data_broker_transform_3e98b47a43900210e777c91766b8f278","api_name":"sn_sub_man.Get customer account details","mutates_server_data":"false","name":"Get customer account details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Config Identifier Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"List of property names\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Supports granular configurations both within and across Workspaces\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Workspace App Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetches system props for unified map in required format","sys_updated_on":"2024-09-11 15:57:35","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3ea9b01577d86d10960ced43ba5a991d","sys_updated_by":"admin","sys_created_on":"2023-01-09 00:04:03","sys_name":"Lookup System Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n    var properties = input.properties.trim().split(',');\n\n    var result = {\n        properties: {},\n        errors: []\n    };\n    var workspaceId = input.workspaceId;\n    var configIdentifierId = input.configIdentifierId;\n    try {\n        if (!properties || !properties.length) {\n            result.errors.push('the properties param is missing');\n        }\n\n        if(!workspaceId) {\n            result.errors.push('Workspace App Id is required');\n        }\n\n        if(!result.errors.length) {\n            var umHelper = new UnifiedMapHelper();\n            var output = umHelper.getConfigPropertyValues({\n                workspaceId: workspaceId,\n                configIdentifierId: configIdentifierId,\n                properties: properties\n            });\n            result.properties = output.result;\n        }\n    } catch (error) {\n        result.errors.push(error.toString());\n    }\n\n    return result;\n}","acl_failure_result":"[\r\n\"ACL is missing\"\r\n]","props":"[\r\n  {\r\n    \"name\": \"properties\",\r\n    \"label\": \"Properties\",\r\n    \"fieldType\": \"string\",    \r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\",\r\n    \"description\": \"List of property names\"\r\n  },\r\n  {\r\n      \"name\": \"configIdentifierId\",\r\n      \"label\": \"Config Identifier Id\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": false,\r\n      \"description\": \"Supports granular configurations both within and across Workspaces\"\r\n   },\r\n   {\r\n      \"name\": \"workspaceId\",\r\n      \"label\": \"Workspace App Id\",\r\n      \"fieldType\": \"json\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": true,\r\n      \"description\": \"Workspace App Id\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_3ea9b01577d86d10960ced43ba5a991d","api_name":"sn_cmdb_ws.Lookup System Properties","mutates_server_data":"false","name":"Lookup System Properties","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Dashboard sys id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys_id of dashboard\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get data for first donut of dashboard to get the corresponding list. ","sys_updated_on":"2024-08-26 15:41:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3ee0a3703b141210fb64b5d355e45a5b","sys_updated_by":"admin","sys_created_on":"2024-08-26 11:14:43","sys_name":"SOW - Get first dashboard donut data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n    var dashUtil = new sn_dashboard_api.PARDashboardUtil();\n    var dashboardValue = dashUtil.getDashboard(input.dashboard_id);\n\n    try {\n        var dashboardDataObj = JSON.parse(dashboardValue);\n    } catch (e) {\n        return {\n            error: 'Failed to parse JSON',\n            details: e.message\n        };\n    }\n\n    if (!dashboardDataObj || !dashboardDataObj.layout || typeof dashboardDataObj.layout !== 'object' || !Array.isArray(dashboardDataObj.layout.tabs)) {\n        return null;\n    }\n\n    var tabs = dashboardDataObj.layout.tabs;\n\n    if (tabs.length === 0) {\n        return null;\n    }\n\n    var layoutArray = tabs[0].layout;\n\n    if (!Array.isArray(layoutArray) || layoutArray.length === 0) {\n        return null;\n    }\n\n    var minElement = layoutArray[0];\n    for (var i = 1; i < layoutArray.length; i++) {\n        var current = layoutArray[i];\n        if (current.x < minElement.x || (current.x === minElement.x && current.y < minElement.y)) {\n            minElement = current;\n        }\n    }\n\n    var componentProps = minElement.component_props;\n    var componentPropsObj = JSON.parse(componentProps);\n    // Extract the required values\n    var filterQuery = componentPropsObj.dataSources[0].filterQuery;\n    var tableOrViewName = componentPropsObj.dataSources[0].tableOrViewName;\n    var headerTitle = componentPropsObj.headerTitle;\n\n    return {\n        filterQuery: filterQuery,\n        tableOrViewName: tableOrViewName,\n        headerTitle: headerTitle\n    };\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"dashboard_id\",\r\n    \"label\": \"Dashboard sys id\",\r\n    \"description\": \"sys_id of dashboard\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_3ee0a3703b141210fb64b5d355e45a5b","api_name":"sn_sow_itsm_common.SOW - Get first dashboard donut data","mutates_server_data":"false","name":"SOW - Get first dashboard donut data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Checks to see if the CMDB Assist GenAI plugin is installed, and if the summarize ci skill has been activated and enabled in platform","sys_updated_on":"2024-08-29 17:46:41","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3ef694ce43905a10e78f39603ab8f2ec","sys_updated_by":"admin","sys_created_on":"2024-08-29 17:43:54","sys_name":"Check CMDB Assist Summarize Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\treturn new sn_cmdb_ws.CMDBAssistWorkspaceUtils().isCISummarizationActive();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_3ef694ce43905a10e78f39603ab8f2ec","api_name":"sn_cmdb_ws.Check CMDB Assist Summarize Status","mutates_server_data":"false","name":"Check CMDB Assist Summarize Status","output_schema":"[{\r\n  \"name\": \"output\",\r\n  \"label\": \"output\",\r\n  \"readOnly\": true,\r\n  \"fieldType\": \"string\"\r\n}]","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Configuration group\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Configuration group sys_id for section's visibility\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Returns the section's visibility of the given SOW landing page variant.","sys_updated_on":"2024-02-20 08:39:32","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"3fc23e949360021004e40b276489182b","sys_updated_by":"admin","sys_created_on":"2024-02-20 08:39:32","sys_name":"Get sections visibility","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar output = {};\n\tvar settingsGr = new GlideRecord('sn_sow_cfg_stg');\n\tsettingsGr.addActiveQuery();\n\tsettingsGr.addQuery('group', input.config_group_sys_id);\n\tsettingsGr.query();\n\twhile(settingsGr.next()) {\n\t\toutput[settingsGr.key] = settingsGr.getValue('value') == \"true\";\n\t}\n\treturn output;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"config_group_sys_id\",\r\n    \"label\": \"Configuration group\",\r\n    \"description\": \"Configuration group sys_id for section's visibility\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_3fc23e949360021004e40b276489182b","api_name":"sn_sow_itsm_common.Get sections visibility","mutates_server_data":"false","name":"Get sections visibility","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Catalog Item\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Existing Connected Topics\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Net Selection \",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Takes array of sys_ids of existing connected topics\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Takes sys_id of catalog item\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Takes total selected topics object\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Generate connected contents for topics to catalog_item","sys_updated_on":"2023-09-20 08:33:48","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4061759ae5a16110f87791daad117078","sys_updated_by":"admin","sys_created_on":"2023-03-15 09:43:20","sys_name":"Generate connected content from topics script","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    function extractTopicFromTopicTree(topic_tree) {\n        if (!topic_tree.length)\n            return null;\n\n        var length = topic_tree.length;\n        var topic = topic_tree[length - 1];\n\n        return topic.id;\n    }\n\n    function extractTopicFromNetSelection(taxonomy_selections) {\n        var topics = [];\n        for (var i = 0; i < taxonomy_selections.length; i++) {\n            var topic_id = extractTopicFromTopicTree(taxonomy_selections[i]);\n            if (topic_id)\n                topics.push(topic_id);\n        }\n        return topics;\n    }\n\n    function _flatten(array) {\n        var _flattened_array = [];\n        for (var _i = 0; _i < array.length; _i++) {\n            for (var _j = 0; _j < array[_i].length; _j++) {\n                _flattened_array.push(array[_i][_j]);\n            }\n        }\n        return _flattened_array;\n    }\n\n    function _createRecord(topic_id, content_id, content_type) {\n        var CONTENT_TYPE_CATALOG = \"98f9a16553622010069addeeff7b1248\";\n        var CONTENT_TYPE_KNOWLEDGE = \"4c32a92153622010069addeeff7b12a3\";\n\n        var record = new GlideRecordSecure('m2m_connected_content');\n        record.initialize();\n\n        record.content_type = content_type;\n\n        if (content_type == CONTENT_TYPE_KNOWLEDGE)\n            record.knowledge = content_id;\n        else if (content_type == CONTENT_TYPE_CATALOG)\n            record.catalog_item = content_id;\n\n        record.topic = topic_id;\n        record.insert();\n    }\n\n    function calculateDelta(new_topics, previous_topics) {\n        if (!new_topics || !previous_topics)\n            return {\n                \"elements_to_disconnect\": !previous_topics ? [] : previous_topics,\n                \"elements_to_connect\": !new_topics ? [] : new_topics\n            };\n\n        var elements_to_connect = JSON.parse(JSON.stringify(new_topics));\n        var elements_to_disconnect = JSON.parse(JSON.stringify(previous_topics));\n\n        for (var i = 0; i < elements_to_disconnect.length; i++) {\n            var index = elements_to_connect.indexOf(elements_to_disconnect[i]);\n            if (index !== -1) {\n                elements_to_disconnect.splice(i, 1);\n                elements_to_connect.splice(index, 1);\n                i--;\n            }\n        }\n\n        return {\n            \"elements_to_disconnect\": elements_to_disconnect,\n            \"elements_to_connect\": elements_to_connect\n        };\n    }\n\n    function deleteObsoleteConnectecContents(content_type_name, catalog_item, previous_topics) {\n        if (previous_topics.length === 0)\n            return;\n        var obsolete_records = new GlideRecordSecure('m2m_connected_content');\n        obsolete_records.addQuery(content_type_name, catalog_item);\n        obsolete_records.addEncodedQuery(\"topicIN\" + previous_topics);\n\n        obsolete_records.deleteMultiple();\n    }\n\n    function isEqual(arr_1, arr_2) {\n        if (arr_1.toString().split(\"\").sort().join(\"\") === arr_2.toString().split(\"\").sort().join(\"\"))\n            return true;\n        return false;\n    }\n\n    function createConnectedContent(net_selection, content_id, existing_topics) {\n        if (!content_id)\n            return;\n\n        var current_topics = [];\n        var CONTENT_TYPE_CATALOG = \"98f9a16553622010069addeeff7b1248\";\n        var CONTENT_TYPE_KNOWLEDGE = \"4c32a92153622010069addeeff7b12a3\";\n\n        for (var taxonomy_selection in net_selection) {\n            if (net_selection.hasOwnProperty(taxonomy_selection)) {\n                current_topics.push(extractTopicFromNetSelection(net_selection[taxonomy_selection]));\n            }\n        }\n\n        current_topics = _flatten(JSON.parse(JSON.stringify(current_topics)));\n\n        if (isEqual(current_topics, existing_topics))\n            return;\n\n        var delta = calculateDelta(current_topics, existing_topics);\n        var disconnect_list = delta.elements_to_disconnect;\n        var connect_list = delta.elements_to_connect;\n\n        deleteObsoleteConnectecContents('catalog_item', content_id, disconnect_list);\n\n        for (var _i = 0; _i < connect_list.length; _i++) {\n            _createRecord(connect_list[_i], content_id, CONTENT_TYPE_CATALOG);\n        }\n    }\n\n    var catalog_item = JSON.parse(JSON.stringify(input.catalogSysId));\n    var netSelection = JSON.parse(JSON.stringify(input.netSelection));\n    var existingConnectedTopics = JSON.parse(JSON.stringify(input.existingTopics));\n\n    createConnectedContent(netSelection, catalog_item, existingConnectedTopics);\n}","acl_failure_result":"","props":"[\n            {\n                \"name\": \"netSelection\",\n                \"label\": \"Net Selection \",\n                \"description\": \"Takes total selected topics object\",\n                \"readOnly\": false,\n                \"fieldType\": \"json\",\n                \"mandatory\": true,\n                \"defaultValue\": []\n            },\n            {\n                \"name\": \"catalogSysId\",\n                \"label\": \"Catalog Item\",\n                \"description\": \"Takes sys_id of catalog item\",\n                \"readOnly\": false,\n                \"fieldType\": \"string\",\n                \"mandatory\": true,\n                \"defaultValue\": \"\"\n            },\n            {\n                \"name\": \"existingTopics\",\n                \"label\": \"Existing Connected Topics\",\n                \"description\": \"Takes array of sys_ids of existing connected topics\",\n                \"readOnly\": false,\n                \"fieldType\": \"json\",\n                \"mandatory\": true,\n                \"defaultValue\": []\n            }\n            ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/92ed237304752210559073c06a02f7a0","value":"92ed237304752210559073c06a02f7a0"},"sys_update_name":"sys_ux_data_broker_transform_4061759ae5a16110f87791daad117078","api_name":"global.Generate connected content from topics script","mutates_server_data":"true","name":"Generate connected content from topics script","output_schema":"[]","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get Shift background Color pallete","sys_updated_on":"2023-10-05 11:34:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"40a7d80c97b931104752ba771153af23","sys_updated_by":"admin","sys_created_on":"2023-10-05 09:56:18","sys_name":"Get Shift Color Pallete","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n\tvar calenderUtil = new sn_uib_on_call.OnCallTeamsCalendarUtil();\n\tvar colorPallete = calenderUtil.getColorPallete();\n\treturn colorPallete;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_40a7d80c97b931104752ba771153af23","api_name":"sn_uib_on_call.Get Shift Color Pallete","mutates_server_data":"false","name":"Get Shift Color Pallete","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Adj Amount\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Adj Percent\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Adj Type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Approver\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Options\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Ren End Date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Ren Start Date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Type\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Submits a contract for renewal or holds on for review and just saves the values","sys_updated_on":"2022-02-27 14:45:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4102bdb9a3b5011021fd885716fcda44","sys_updated_by":"admin","sys_created_on":"2022-02-21 14:20:40","sys_name":"Contract Renewal","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"14","sys_tags":"","script":"function transform(input) {\n    var renStart = '';\n    var renEnd = '';\n    var gd = new GlideDate();\n    if (!gs.nil(input.renStartDate)) {\n        gd.setDisplayValue(input.renStartDate);\n        renStart = gd.getValue();\n    }\n    if (!gs.nil(input.renEndDate)) {\n        gd.setDisplayValue(input.renEndDate);\n        renEnd = gd.getValue();\n    }\n    var contractGq = new GlideRecord(\"ast_contract\");\n    contractGq.get(input.sysId);\n    contractGq.renewal_date = renStart;\n    contractGq.renewal_end_date = renEnd;\n    contractGq.renewal_options = input.options;\n    contractGq.cost_adjustment_type = input.adjType;\n    contractGq.cost_adjustment = input.adjAmount;\n    contractGq.cost_adjustment_percentage = input.adjPercent;\n    contractGq.approver = input.approver;\n    if (input.type == 'submit_review') {\n        contractGq.substate = 'under_review';\n    } else if (input.type === 'save') {\n        contractGq.substate = 'awaiting_review';\n    }\n\tcontractGq.process = 'renewal';\n    contractGq.update();\n\n    return;\n}","acl_failure_result":"","props":"[\r\n      {\r\n       \"name\": \"type\",\r\n        \"label\": \"Type\",\r\n         \"fieldType\": \"string\",\r\n         \"mandatory\":true\r\n       },\r\n\t{\r\n\t  \"name\": \"sysId\",\r\n\t  \"label\": \"Sys ID\",\r\n\t  \"fieldType\": \"string\",\r\n\t  \"mandatory\": true\r\n\t},\r\n         {\r\n\t  \"name\": \"approver\",\r\n\t  \"label\": \"Approver\",\r\n\t  \"fieldType\": \"string\",\r\n\t  \"mandatory\": true\r\n\t},\r\n\t{\r\n\t\t\"name\": \"adjType\",\r\n\t\t\"label\": \"Adj Type\",\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true\r\n\t},\r\n\t{\r\n\t\t\"name\": \"options\",\r\n\t\t\"label\": \"Options\",\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true\r\n\t},\r\n\t{\r\n\t\t\"name\": \"adjPercent\",\r\n\t\t\"label\": \"Adj Percent\",\r\n\t\t\"fieldType\": \"number\",\r\n\t\t\"mandatory\": true\r\n\t},\r\n\t{\r\n\t\t\"name\": \"adjAmount\",\r\n\t\t\"label\": \"Adj Amount\",\r\n\t\t\"fieldType\": \"number\",\r\n\t\t\"mandatory\": true\r\n\t},\r\n       {\r\n\t\t\"name\": \"renStartDate\",\r\n\t\t\"label\": \"Ren Start Date\",\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true\r\n\t},\r\n         {\r\n\t\t\"name\": \"renEndDate\",\r\n\t\t\"label\": \"Ren End Date\",\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_4102bdb9a3b5011021fd885716fcda44","api_name":"sn_itam_workspace.Contract Renewal","mutates_server_data":"true","name":"Contract Renewal","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Incident Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Incident SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record Table Name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-02 17:48:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4132966153023010a487ddeeff7b12dc","sys_updated_by":"admin","sys_created_on":"2021-08-18 12:08:31","sys_name":"Fetch Collaboration Section Data ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_created_by":"admin","sys_mod_count":"21","sys_tags":"","script":"function transform(input) {\n\tvar output = {};\n\tvar recommendedCardProps = [];\n\tvar sowCollabUtils = new sn_sow_collab.SowCollabUtils();\n\toutput.collabDropdownParams = sowCollabUtils.getDropDownPanelContents();\n\tvar hasChats = new SOWContextualPanelTeamsConfigSNC().hasChats(input.recordSysId);\t\n\toutput.hasChats = hasChats;\n\tif (!hasChats) {\n\t\trecommendedCardProps = sowCollabUtils.getRecommededUsers(input.recordSysId, input.tableName);\n\t}\n\toutput.recommededCardProps =  recommendedCardProps;\n  return output;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"recordSysId\",\n    \"label\": \"Incident SysId\",\n    \"description\": \"Incident Sys Id\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"tableName\",\n    \"label\": \"Record Table Name\",\n    \"description\": \"Record Table Name\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_update_name":"sys_ux_data_broker_transform_4132966153023010a487ddeeff7b12dc","api_name":"sn_sow_collab.Fetch Collaboration Section Data","mutates_server_data":"false","name":"Fetch Collaboration Section Data ","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-21 11:41:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"415185f053110110bf68ddeeff7b12a7","sys_updated_by":"admin","sys_created_on":"2022-01-24 11:42:44","sys_name":"Check MS Teams Configured","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n    return new OnCallTeamsCalendarUtil().isTeamsPluginActive() && new sn_tcm_collab_hook.MSTeamsChatUtil().isSetupAvailable();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_415185f053110110bf68ddeeff7b12a7","api_name":"sn_uib_on_call.Check MS Teams Configured","mutates_server_data":"false","name":"Check MS Teams Configured","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys_id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Creating a response to deal with showcasing existing notifications attached with a policy","sys_updated_on":"2024-05-31 20:05:19","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"41c1517043a20210a0d25dc36ab8f20c","sys_updated_by":"admin","sys_created_on":"2024-05-31 00:58:33","sys_name":"Get existing notifications of a  policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n    var id = input && input.sys_id;\n    var resp = {\n        \"notifications_for_ui\": [],\n        \"existingNotificationsOfPolicyIds\": []\n    };\n    if (id) {\n        var util = new SCSecurityPolicyUtil();\n        var res = util.getExistingPolicyNotifications(id, \"sn_vsc_security_policy_action\");\n        resp.notifications_for_ui = res.data;\n        resp.existingNotificationsOfPolicyIds = res.existingIds;\n    }\n    return resp;\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"sys_id\",\r\n    \"label\": \"sys_id\",\r\n    \"description\": \"ID\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_41c1517043a20210a0d25dc36ab8f20c","api_name":"sn_vsc.Get existing notifications of a  policy","mutates_server_data":"false","name":"Get existing notifications of a  policy","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"data object containing classification settings\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Security center export settings ","sys_updated_on":"2022-11-10 08:36:45","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"41cd24d8070311102fe9f1e08c1ed017","sys_updated_by":"admin","sys_created_on":"2022-11-04 17:02:25","sys_name":"VSC Save Export Settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"18","sys_tags":"","script":"function transform(input) {\n    var userName = input.user_id;\n    var resultData = input.data || {};\n    var dataClasses = [];\n    var classificationSettings = [];\n    for (var i in resultData) {\n        var dataClass = new GlideRecord(\"data_classification\");\n        dataClass.addQuery(\"sys_id\", resultData[i]);\n        dataClass.query();\n        while (dataClass.next()) {\n            var name = dataClass.getDisplayValue(\"name\").toString();\n            dataClasses.push(name);\n        }\n    }\n    // Fetch export setting for valid users only\n    var userGr = new GlideRecord(\"sys_user\");\n    userGr.get(userName);\n    if (userGr.isValidRecord()) {\n        // Fetch the user's classification settings\n        var userExpSettingGr = new GlideRecord(\"sn_vsc_export_setting\");\n        userExpSettingGr.addQuery('user', userName);\n        userExpSettingGr.query();\n        if (!userExpSettingGr.next()) {\n            // Create new record for user if it doesn't exist\n            userExpSettingGr.initialize();\n            userExpSettingGr.user = userName;\n            userExpSettingGr.classification_metric = dataClasses.toString();\n            userExpSettingGr.insert();\n        } else {\n            //update record\n            userExpSettingGr.classification_metric = dataClasses.toString();\n            userExpSettingGr.update();\n        }\n    }\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"user_id\",\n    \"label\": \"User\",\n    \"description\": \"User\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false\n  },\n  {\n  \"name\": \"data\",\n  \"label\": \"Data\",\n  \"description\": \"data object containing classification settings\",\n  \"readOnly\": false,\n  \"fieldType\": \"object\",\n  \"mandatory\": false,\n  \"defaultValue\": {}\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_41cd24d8070311102fe9f1e08c1ed017","api_name":"sn_vsc.VSC Save Export Settings","mutates_server_data":"false","name":"VSC Save Export Settings","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Consumable record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Quantity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Stockroom\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Substate\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-09-14 07:11:13","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"41dd0cb553623010f263ddeeff7b1272","sys_updated_by":"admin","sys_created_on":"2021-09-12 17:56:52","sys_name":"Retire","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var updatedQuantity = input.quantity;\n\tvar consumableSysId = input.sysId;\n\tvar stockroom = input.stockroom;\n\tvar substate = input.substate;\n\tnew global.Consumables().retireConsumable(consumableSysId, updatedQuantity, '6', substate, stockroom);\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"quantity\",\r\n  \"label\": \"Quantity\",\r\n  \"fieldType\": \"number\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"stockroom\",\r\n  \"label\": \"Stockroom\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false\r\n},\r\n{\r\n  \"name\": \"substate\",\r\n  \"label\": \"Substate\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Consumable record\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_41dd0cb553623010f263ddeeff7b1272","api_name":"sn_itam_workspace.Retire","mutates_server_data":"true","name":"Retire","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"All Day Details\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-28 17:24:35","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"431c82907703b1109998bb6bbd5a999f","sys_updated_by":"admin","sys_created_on":"2023-12-07 16:26:07","sys_name":"Get All Day Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    return new OCTimeOffUtil().getAllDayDetails(input.all_day_details);\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t\t\"name\": \"all_day_details\",\r\n\t\t\"label\": \"All Day Details\",\r\n\t\t\"description\": \"\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"json\",\r\n\t\t\"mandatory\": false,\r\n\t\t\"defaultValue\": \"\"\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_431c82907703b1109998bb6bbd5a999f","api_name":"sn_uib_on_call.Get All Day Details","mutates_server_data":"false","name":"Get All Day Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"The execution id of the query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"executionId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Logic to determine whether to show load buttons or not","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"43233d597738911023651605bc5a99b9","sys_updated_by":"admin","sys_created_on":"2022-07-19 04:17:28","sys_name":"Show load buttons ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar result = {\n\t\terrors: [],\n\t\tshowLoadButtons: false\n\t};\n\tvar TABLE = \"cmdb_multisource_query_status\";\n    var STATUS = \"status\";\n\t\n\ttry {\n\t\tvar executionId = input.executionId;\n\t\tif (!executionId || !executionId.length || !executionId[0]) {\n\t\t\tresult.errors.push('executionId is missing.');\n\t\t}\n\t\tvar gr = new GlideRecord(TABLE);\n        if (gr.get(executionId)) {\n            if (gr.getValue(STATUS) == \"PAUSED\") {\n                result.showLoadButtons = true;\n            }\n        }\n\t\t\n\t} catch(error) {\n\t\tresult.errors.push(error.toString());\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"executionId\",\r\n  \"label\": \"executionId\",\r\n  \"description\": \"The execution id of the query\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_43233d597738911023651605bc5a99b9","api_name":"sn_cmdb_ws.Show load buttons ","mutates_server_data":"false","name":"Show load buttons ","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Data broker to populate the parameters in the Inventory tabs having list views based on index of tabs","sys_updated_on":"2024-09-06 09:34:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4328a1a537da30104ab7cab6fabe5de1","sys_updated_by":"admin","sys_created_on":"2021-08-30 19:29:42","sys_name":"Inventory tabs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"21","sys_tags":"","script":"function transform(input) {\n\t//titles , tables array used to populate params for the tabs.\n\t//If any of the tab does not need params currently inserting empty string in both arrays\n\t\n\tvar titles = ['', gs.getMessage('All stockrooms'), gs.getMessage('Asset audits'), gs.getMessage('Disposal orders'), gs.getMessage('Loaner asset orders'), gs.getMessage('RMA orders'), gs.getMessage('RMA line items'), gs.getMessage('Transfer orders'), gs.getMessage('Donation orders'), gs.getMessage('Repair orders'), gs.getMessage('Asset attestations')];\n\tvar tables = ['', 'alm_stockroom', 'sn_hamp_asset_audit', 'sn_hamp_hardware_disposal', 'sn_hamp_loaner_asset_order', 'sn_hamp_rma_request', 'sn_hamp_rma_request_line', 'alm_transfer_order', 'sn_itam_common_donation_order','sn_itam_common_repair_order', 'sn_itam_common_asset_attestation'];\n\tvar hampTables = ['sn_hamp_asset_audit', 'sn_hamp_hardware_disposal', 'sn_hamp_loaner_asset_order', 'sn_hamp_rma_request', 'sn_hamp_rma_request_line'];\n\tvar commonTables = ['sn_itam_common_donation_order','sn_itam_common_repair_order','sn_itam_common_asset_attestation'];\n\t\n\tvar data = [];\n\tvar params = {};\n\tvar emptyParams = {\n\t\t'listTitle': '',\n\t\t'table': '',\n\t\t'listView':'',\n\t\t'query':''\n\t};\n\n\tvar isHampActive = GlidePluginManager.isActive('sn_hamp');\n\tvar isCommonActive = GlidePluginManager.isActive('sn_itam_common');\n\t\n\tfor (var i = 0; i < titles.length; i++) {\n\t\tif (gs.nil(titles[i])) {\n\t\t\tdata.push(emptyParams);\n\t\t}\n\t\telse if (hampTables.indexOf(tables[i]) !== -1 && !(isHampActive)) {\n\t\t\tcontinue;\n\t\t}\n\t\telse if(commonTables.indexOf(tables[i]) !== -1 && !(isCommonActive)) {\n\t\t\tcontinue;\n\t\t}\n\t\telse {\n\t\t\tparams = {};\n\t\t\tparams['listTitle'] = titles[i];\n\t\t\tparams['table'] = tables[i];\n\t\t\tparams['listView'] = '';\n\t\t\tparams['query'] = '';\n\t\t\tdata.push(params);\n\t\t}\n\t}\n\t\n  return data;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_4328a1a537da30104ab7cab6fabe5de1","api_name":"sn_itam_workspace.Inventory tabs","mutates_server_data":"false","name":"Inventory tabs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Checks visibility for CMDB Performance and sections within that page.","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"43b3fc6aebae211094bbb5d5d8522886","sys_updated_by":"maint","sys_created_on":"2023-05-04 16:57:33","sys_name":"Check CMDB Performance visibility","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"6","sys_tags":"","script":"function transform() {\n\tvar util = new sn_cmdb_ws.CMDBWorkspaceUtil();\n\treturn {\n\t\tshowCmbdPerformance: util.showCmdbPerformance(),\n\t\tshowSGGTab: util.showPerformanceInsightSGCTab()\n\t};\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_43b3fc6aebae211094bbb5d5d8522886","api_name":"sn_cmdb_ws.Check CMDB Performance visibility","mutates_server_data":"false","name":"Check CMDB Performance visibility","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Approval Decision\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Approval Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Comments\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Updates the associated approval record to the decision made","sys_updated_on":"2022-11-25 16:50:35","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"43d5e258774a1110a438aeb4bb5a993b","sys_updated_by":"admin","sys_created_on":"2022-09-16 08:49:41","sys_name":"Update Change Approval Record","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_created_by":"admin","sys_mod_count":"17","sys_tags":"","script":"function transform(input) {\n\tif (!input || !input.taskSysId || !input.approvalSysId || !input.decision)\n\t\treturn { error: gs.getMessage('ERROR taskSysId: {0} approvalSysId: {1} decision: {2}', [input.taskSysId, input.approvalSysId], input.decision) };\n\n\treturn new SOWChangeUtils().updateApproval(input.taskSysId, input.approvalSysId, input.comments, input.decision);\n}","acl_failure_result":"","props":"[\n{\n\t\"name\": \"taskSysId\",\n\t\"label\": \"Task Sys Id\",\n\t\"description\": \"\",\n\t\"readOnly\": false,\n\t\"fieldType\": \"string\",\n\t\"mandatory\": true,\n\t\"defaultValue\": \"\"\n},\n{\n\t\"name\": \"approvalSysId\",\n\t\"label\": \"Approval Sys Id\",\n\t\"description\": \"\",\n\t\"readOnly\": false,\n\t\"fieldType\": \"string\",\n\t\"mandatory\": true,\n\t\"defaultValue\": \"\"\n},\n{\n\t\"name\": \"decision\",\n\t\"label\": \"Approval Decision\",\n\t\"description\": \"\",\n\t\"readOnly\": false,\n\t\"fieldType\": \"string\",\n\t\"mandatory\": true,\n\t\"defaultValue\": \"\"\n},\n{\n\t\"name\": \"comments\",\n\t\"label\": \"Comments\",\n\t\"description\": \"\",\n\t\"readOnly\": false,\n\t\"fieldType\": \"string\",\n\t\"mandatory\": true,\n\t\"defaultValue\": \"\"\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_update_name":"sys_ux_data_broker_transform_43d5e258774a1110a438aeb4bb5a993b","api_name":"sn_sow_chg.Update Change Approval Record","mutates_server_data":"true","name":"Update Change Approval Record","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Payload\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to fetch the control props for apps built in Admin Console Framework","sys_updated_on":"2022-02-11 07:55:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"43dfe466c3a101104b8e88c7c840dd39","sys_updated_by":"admin","sys_created_on":"2022-02-11 07:11:09","sys_name":"ACE Fetch Controls","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.payload) return [];\n\tvar controlProps = new ACEAppBuilderUtil().getControl(input.payload);\n\treturn controlProps;\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"payload\",\n      \"label\": \"Payload\",\n      \"description\": \"\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_43dfe466c3a101104b8e88c7c840dd39","api_name":"sn_ace.ACE Fetch Controls","mutates_server_data":"false","name":"ACE Fetch Controls","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Group\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Group for fetching shifts\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-13 16:39:26","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"44050f0b77bc42107c6a1aceca5a9902","sys_updated_by":"admin","sys_created_on":"2024-03-12 09:20:00","sys_name":"Get shift data for extra time","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n    if (gs.nil(input.group))\n        return [];\n    var shiftGr = new GlideRecord('cmn_rota');\n    shiftGr.addQuery('group', input.group);\n    shiftGr.query();\n    var shifts = [];\n    while (shiftGr.next()) {\n        if (shiftGr.getValue(\"active\") === '1' || shiftGr.getValue(\"state\") === \"draft\") {\n            shifts.push({\n                name: shiftGr.getValue(\"name\"),\n                active: shiftGr.getValue(\"active\"),\n                sysId: shiftGr.getValue(\"sys_id\"),\n                state: shiftGr.getValue(\"state\"),\n                userDateTimeFormat: gs.getDateTimeFormat()\n            });\n        }\n    }\n    return shifts;\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"group\",\r\n    \"label\": \"Group\",\r\n    \"description\": \"Group for fetching shifts\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_44050f0b77bc42107c6a1aceca5a9902","api_name":"sn_uib_on_call.Get shift data for extra time","mutates_server_data":"false","name":"Get shift data for extra time","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This broker gets matching de-duplication task information from the sn_cmdb_ws_reconcile_duplicate_template_suggested_task where template=<templateSysId>","sys_updated_on":"2023-11-14 22:14:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"44a49791730071103f3cc3ed8ff6a738","sys_updated_by":"admin","sys_created_on":"2023-07-14 21:08:11","sys_name":"De-Duplication Template Get matching template conditions tasks","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"43","sys_tags":"","script":"function transform(input) {\n\t/*\n\t\tGiven the template sys ID,\n\t\treturn the de-duplication task sys ID's that match the template's task conditions\n\t*/\n\tvar result = {};\n\tvar template = input.templateSysId;\n\n\tvar items = (new GetDedupeTaskInfo()).getMatchingTasks(template);\n\t\n\tresult = {'items': items,\n\t\t'template': template};\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_44a49791730071103f3cc3ed8ff6a738","api_name":"sn_cmdb_ws.De-Duplication Template Get matching template conditions tasks","mutates_server_data":"false","name":"De-Duplication Template Get matching template conditions tasks","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Items array from Data Manager Get Related Entry Tables REST\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Transform the \"Data Manager Get Related Entry Tables - REST\" REST API response into the js object that is expected for the sn-now-select with id, label, and sublabel props","sys_updated_on":"2023-11-03 02:19:26","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"44c8cc9877963110ee0d0cc2fa5a99dc","sys_updated_by":"admin","sys_created_on":"2023-10-30 23:55:42","sys_name":"Transform related entry table options","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"17","sys_tags":"","script":"function transform(input) {\n\tvar util = new CMDBWorkspaceUtil();\n\tif (gs.nil(input) || gs.nil(input.items)) {\n\t\treturn [];\n\t}\n\n\treturn util.transformRelatedEntryTables(input.items);\n}","acl_failure_result":"","props":"[{\r\n\"name\": \"items\",\r\n\"label\": \"Items array from Data Manager Get Related Entry Tables REST\",\r\n\"description\": \"\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"object\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_44c8cc9877963110ee0d0cc2fa5a99dc","api_name":"sn_cmdb_ws.Transform related entry table options","mutates_server_data":"false","name":"Transform related entry table options","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ACE Page Route\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to fetch ACE Page initial data including context, metadata etc","sys_updated_on":"2023-03-23 13:53:29","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"44d12e775364e110c733ddeeff7b128e","sys_updated_by":"admin","sys_created_on":"2023-01-29 12:00:57","sys_name":"GetACEPageInitialData","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.page_route) return {};\n    var result = {};\n    var gr = new GlideRecord(\"sn_ace_page\");\n    if (gr.get(input.page_route)) {\n        result = gr.getValue(\"client_context\") || {};\n        if (typeof result == \"string\") {\n            result = JSON.parse(result);\n\t\t\t// Added Below code for Diff logic issue\n            if (!result.__ace_internal__) {\n                result.__ace_internal__ = {\n                    'loadTime': Date.now()\n                };\n            }\n        }\n\t\tresult = convertToNormalFormat(result);\n    }\n    return result;\n\n    function convertToNormalFormat(customObject) {\n        var jsonObject = {};\n        for (var key in customObject) {\n            if (customObject[key].type === \"MAP_CONTAINER\") {\n                jsonObject[key] = convertToNormalFormat(customObject[key].container);\n            } else {\n                jsonObject[key] = customObject[key];\n            }\n        }\n        return jsonObject;\n    }\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"page_route\",\r\n      \"label\": \"ACE Page Route\",\r\n      \"description\": \"ACE Page Route\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_44d12e775364e110c733ddeeff7b128e","api_name":"sn_ace.GetACEPageInitialData","mutates_server_data":"false","name":"GetACEPageInitialData","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Search keyword to filter the groups\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search text\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-28 06:27:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"44f68472530e7510ad0fddeeff7b1228","sys_updated_by":"admin","sys_created_on":"2023-10-26 07:56:02","sys_name":"Get all groups data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"42","sys_tags":"","script":"function transform(inputs) {\n    var result = {};\n    var ocTeamsCalendarUtil = new sn_uib_on_call.OnCallTeamsCalendarUtil();\n    ocTeamsCalendarUtil.clearErrorMessages();\n\n    var allGroups = [];\n    var aggregateGr = new GlideAggregate('cmn_rota');\n    aggregateGr.addQuery('active', true); //Show only active shifts count\n    aggregateGr.groupBy('group');\n    aggregateGr.groupBy('state');\n    aggregateGr.addAggregate('COUNT');\n    aggregateGr.query();\n    var groupCounts = {};\n    var groupsSysIds = [];\n    while (aggregateGr.next()) {\n        // Show only published shifts and ignore drafts shifts\n        if (!aggregateGr.getValue('state')) {\n            groupCounts[aggregateGr.getValue('group')] = aggregateGr.getAggregate('COUNT');\n        }\n    }\n    var groupGr = new GlideRecord('sys_user_group');\n    groupGr.addActiveQuery();\n    if (inputs.searchText)\n        groupGr.addQuery(\"name\", \"CONTAINS\", inputs.searchText);\n    groupGr.setLimit(25); // TODO: Add a property to configure this value\n    groupGr.query();\n\n    while (groupGr.next()) {\n        var userGroupSysId = groupGr.getValue('sys_id');\n        var groupName = groupGr.getValue('name');\n        let groupObj = {\n            id: userGroupSysId,\n            label: groupName,\n            sublabel: gs.getMessage(\"(No active shifts)\"),\n            editable: new global.OCCalendarUtils().canWriteByGroupSysId(userGroupSysId) + \"\"\n        };\n        var finalNumberOfShifts = groupCounts[userGroupSysId] || 0;\n\n        if (finalNumberOfShifts == 1) {\n            groupObj.sublabel = gs.getMessage('(1 active shift)');\n        } else if (finalNumberOfShifts > 1) {\n            groupObj.sublabel = gs.getMessage('({0} active shifts)', finalNumberOfShifts);\n        }\n        allGroups.push(groupObj);\n        groupsSysIds.push(userGroupSysId);\n    }\n\n    var groupSettingMap = new global.OCRosterSpanApprovalUtil().getPTOApprovalAndCoverageStatusByGroups(groupsSysIds);\n\n    for (let i = 0; i < allGroups.length; i++) {\n        allGroups[i][\"isApprovalRequired\"] = groupSettingMap[allGroups[i].id].isPTOAccessible + \"\";\n        allGroups[i][\"isProposedCoverMandatory\"] = groupSettingMap[allGroups[i].id].isProposedCoverMandatory + \"\";\n    }\n\n    result.allGroups = allGroups;\n    result.errorMessages = ocTeamsCalendarUtil.getErrorMessages();\n\n    return result;\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"searchText\",\n    \"label\": \"Search text\",\n    \"description\": \"Search keyword to filter the groups\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_44f68472530e7510ad0fddeeff7b1228","api_name":"sn_uib_on_call.Get all groups data","mutates_server_data":"false","name":"Get all groups data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Filter Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Phrase Number\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-12 15:33:28","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"454d43ca7f1892100a3426d6ac8665cd","sys_updated_by":"admin","sys_created_on":"2024-08-30 07:01:52","sys_name":"Generate genAI Phrase","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"16","sys_tags":"","script":"function transform(input) {\n    var util = new sn_nowassist_admin.NowAdminAssistUtil();\n    var filterId = input.filterId;\n    var phraseNumber = input.phraseNumber ? input.phraseNumber : 10;\n\n    try {\n        if (gs.nil(filterId)) {\n            return [];\n        }\n        var result = sn_one_extend.OneExtendUtil.generateSamples(filterId, phraseNumber);\n        var generatedAIPhrases = [];\n        for (var i = 0; i < result.length; i++) {\n            var phraseObject = {\n                phrase: result[i],\n                sysId: gs.generateGUID()\n            };\n            generatedAIPhrases.push(phraseObject);\n        }\n\n        return generatedAIPhrases;\n    } catch (e) {\n        gs.error(\"Failed fetch AI Generated phrases - \" + e.toString());\n        return [];\n    }\n\n}","acl_failure_result":"","props":"[\n {\n        \"name\": \"filterId\",\n        \"label\": \"Filter Id\",\n        \"description\": \"Filter Id\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n {\n        \"name\": \"phraseNumber\",\n        \"label\": \"Phrase Number\",\n        \"description\": \"Phrase Number\",\n        \"readOnly\": false,\n        \"fieldType\": \"number\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_454d43ca7f1892100a3426d6ac8665cd","api_name":"sn_nowassist_admin.Generate genAI Phrase","mutates_server_data":"true","name":"Generate genAI Phrase","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Tab filters\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Given a list of tabs metadata with filters, this returns the count of task relevant to those filters","sys_updated_on":"2023-09-09 00:21:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"45550cc7ebf031100c0bb5d5d85228e8","sys_updated_by":"maint","sys_created_on":"2023-08-25 23:09:24","sys_name":"Get task count for given filters","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"15","sys_tags":"","script":"function transform(input) {\n    var wrapperFn = function() {\n        var tabFilterMetadata = input.tabFilterMetadata;\n\n        for (var j = 0; j < tabFilterMetadata.length; j++) {\n            tabFilterMetadata[j].count = CMDBWsDMUtil.getRowCount(\"cmdb_data_management_task\", tabFilterMetadata[j].fields.filter);\n        }\n        return tabFilterMetadata;\n    };\n\n    return new CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Get task count for given filters\", wrapperFn);\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"tabFilterMetadata\",\r\n        \"label\": \"Tab filters\",\r\n        \"description\": \"Tab filters\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_45550cc7ebf031100c0bb5d5d85228e8","api_name":"sn_cmdb_ws.Get task count for given filters","mutates_server_data":"true","name":"Get task count for given filters","output_schema":"","sys_policy":""},{"private":"true","required_translations":"","batch_exclude":"false","description":"Creates knowledge comment tree from root and child level comments.","sys_updated_on":"2020-08-17 11:16:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4567e4e373311010b29f2e46fbf6a791","sys_updated_by":"admin","sys_created_on":"2020-07-10 06:51:26","sys_name":"Create Knowledge Comments Tree","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var has = function(object, property) {\n        return object != null && object.hasOwnProperty(property);\n    };\n\n    var merge = function(target, source) {\n        for (var key in source) {\n            target[key] = source[key];\n        }\n        return target;\n    };\n\n    var buildTree = function(comments) {\n        var commentsTree = {};\n\n        try {\n            comments.forEach(function(x) {\n                if (has(commentsTree, x.id)) {\n                    commentsTree[x.id] = merge(commentsTree[x.id], x);\n                } else {\n                    commentsTree[x.id] = x;\n                    commentsTree[x.id].children = [];\n                }\n\n                if (has(commentsTree, x.parent))\n                    commentsTree[x.parent].children.push(commentsTree[x.id]);\n                else {\n                    commentsTree[x.parent] = {\n                        children: [commentsTree[x.id]]\n                    };\n                }\n            });\n            return commentsTree;\n        } catch (e) {\n            return commentsTree;\n        }\n    };\n\t\n\tvar addActions = function(comments) {\n\t\tvar knowledge = new GlideRecordSecure('kb_knowledge');\n\t\tknowledge.get(input.articleId);\n\t\tvar knowledgeBase = knowledge.kb_knowledge_base.getRefRecord();\n\t\t\n\t\tvar kbKnowledge = new global.KBKnowledge();\n\t\tvar isKnowledgeBaseOwner = kbKnowledge.isKnowledgeBaseOwner(knowledgeBase, 'owner');\n\t\tvar isKnowledgeAdmin = kbKnowledge.isAdminUser(knowledgeBase);\n\t\t\n\t\tif(!(isKnowledgeBaseOwner || isKnowledgeAdmin)) {\n\t\t\tcomments.map(function(comment) {\n\t\t\t\tif(!(comment.user.id == gs.getUser().getID())) {\n\t\t\t\t\tcomment.actions = [{\n\t\t\t\t\t\t'id': 'delete',\n\t\t\t\t\t\t'isHidden': true\n\t\t\t\t\t}];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn comments;\n\t};\n\n    var root = addActions(input.root.data.AppKnowledge_Query.getComments);\n    var nested = addActions(input.nested.data.AppKnowledge_Query.getComments);\n    var tree = buildTree(nested);\n\n    for (var i = 0; i < root.length; i++) {\n        var id = root[i].id;\n\n        if (has(tree, id)) {\n            root[i].children = tree[id].children;\n        } else {\n            root[i].children = [];\n        }\n    }\n\n    return root;\n}","acl_failure_result":"","props":"[{\n  \"name\": \"articleId\",\n  \"label\": \"Article ID\",\n  \"fieldType\": \"string\",\n  \"mandatory\": true\n},\n{\n  \"name\": \"root\",\n  \"label\": \"Root Comments\",\n  \"fieldType\": \"object\",\n  \"mandatory\": true\n},\n{\n  \"name\": \"nested\",\n  \"label\": \"Nested Comments\",\n  \"fieldType\": \"object\",\n  \"mandatory\": true\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_4567e4e373311010b29f2e46fbf6a791","api_name":"sn_km_uib.Create Knowledge Comments Tree","mutates_server_data":"false","name":"Create Knowledge Comments Tree","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Library Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Delete de-duplication library","sys_updated_on":"2023-09-11 15:47:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"45f246d09359b110f769fa607489188d","sys_updated_by":"admin","sys_created_on":"2023-09-11 15:47:46","sys_name":"De-Duplication Library Delete","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tif(!input.librarySysId){\n\t\treturn {};\n\t}\n\n    var util = new sn_cmdb_ws.DedupeTemplateLibraryUtil();\n\tvar result = util.deleteLibrary(input.librarySysId);\n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"librarySysId\",\r\n      \"label\": \"Library Sys Id\",\r\n      \"description\": \"Library Sys Id\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_45f246d09359b110f769fa607489188d","api_name":"sn_cmdb_ws.De-Duplication Library Delete","mutates_server_data":"true","name":"De-Duplication Library Delete","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Returns the instance name","sys_updated_on":"2024-09-16 20:45:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"467c6137536012105781ddeeff7b1244","sys_updated_by":"maint","sys_created_on":"2024-09-16 20:42:13","sys_name":"Get Instance Name","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    return gs.getProperty('instance_name');\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_467c6137536012105781ddeeff7b1244","api_name":"sn_vsc.Get Instance Name","mutates_server_data":"false","name":"Get Instance Name","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Field to sort rows by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Group by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Group by field\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Order by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table to look up\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Group by distinct values of a field in a table","sys_updated_on":"2024-02-22 11:03:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"46e725c043e00210026cbbd32fb8f219","sys_updated_by":"admin","sys_created_on":"2024-02-19 08:43:15","sys_name":"Group By Distinct Field -Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"27","sys_tags":"","script":"function transform(input) {\n    var results;\n    var distinctValues = [];\n    var ga = new GlideAggregate(input.table);\n    ga.groupBy(input.groupBy);\n    ga.orderBy(input.orderBy);\n    ga.addAggregate(\"COUNT\");\n    ga.query();\n    while (ga.next()) {\n        distinctValues.push({\n            \"value\": ga.getValue(input.groupBy),\n            \"displayValue\": ga.getDisplayValue(input.groupBy)\n        });\n    }\n    results = {\n        \"distinctValues\": distinctValues\n    };\n    return results;\n}","acl_failure_result":"[\r\n\"ACL is missing\"\r\n]","props":"[\r\n  {\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"table_name\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n\r\n{\r\n  \"name\": \"groupBy\",\r\n  \"label\": \"Group by\",\r\n  \"description\": \"Group by field\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"field\",\r\n  \"mandatory\": false,\r\n  \"typeMetadata\": {\r\n        \"table\": \"@table\"\r\n   }\r\n},\r\n{\r\n  \"name\": \"orderBy\",\r\n  \"label\": \"Order by\",\r\n  \"description\": \"Field to sort rows by\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"field\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\",\r\n  \"typeMetadata\": {\r\n        \"table\": \"@table\"\r\n   }\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/03d4abbf04312210559073c06a02f7f9","value":"03d4abbf04312210559073c06a02f7f9"},"sys_update_name":"sys_ux_data_broker_transform_46e725c043e00210026cbbd32fb8f219","api_name":"global.Group By Distinct Field -Transform","mutates_server_data":"false","name":"Group By Distinct Field -Transform","output_schema":"{\r\n\"distinctVlaues\":[]\r\n}","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-01-05 01:14:26","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"47414f3f34c75110f877339ba5f48b9b","sys_updated_by":"maint","sys_created_on":"2022-11-16 00:50:32","sys_name":"SC Get Suites With Results","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var suiteList = [];\n    var gr = new GlideAggregate('scan_suite_execution');\n    gr.addEncodedQuery(\"suite.sys_tags.e97202ce1ba201100fbd1066b04bcb30=e97202ce1ba201100fbd1066b04bcb30^ORsuite=833655cc1b94101046e87733cd4bcb4e\");\n    gr.groupBy('suite');\n    gr.addAggregate('count', 'result');\n    gr.addHaving('COUNT', '>', '1');\n    gr.query();\n    while (gr.next()) {\n        var suiteId = gr.suite.toString();\n        var suiteName = gr.suite.getDisplayValue().toString();\n        suiteList.push({\n            \"label\": suiteName,\n            \"id\": suiteId\n        });\n    }\n\n    return suiteList;\n\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_47414f3f34c75110f877339ba5f48b9b","api_name":"sn_vsc.SC Get Suites With Results","mutates_server_data":"false","name":"SC Get Suites With Results","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get Plugins Info","sys_updated_on":"2022-02-28 18:09:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"47596200c3860110fc869bc8a840dd94","sys_updated_by":"admin","sys_created_on":"2022-02-28 18:09:10","sys_name":"CI GS Plugins Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) { \n\t\n\tvar payload = [\n\t\t{\n\t\t\tid : \"com.glide.cs.chatbot\",\n\t\t\tdisplayName : \"Virtual Agent\",\n\t\t\tname : \"Glide Virtual Agent\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin : true,\n\t\t\tisStoreApp : false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.cs.chatbot\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.glide.interaction.awa\",\n\t\t\tdisplayName : \"Agent Chat\",\n\t\t\tname : \"Agent Chat\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin : true,\n\t\t\tisStoreApp : false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.interaction.awa\"\n\t\t},\n\t\t{\n\t\t\tid : \"sn_ci_analytics\",\n\t\t\tdisplayName : \"Conversational Analytics\",\n\t\t\tname : \"Conversational Analytics\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin : false,\n\t\t\tisStoreApp : true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/c53ca02a73c310108564b17afef6a7c0\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.snc.va_topic_recommender\",\n\t\t\tdisplayName : \"Topic Recommendations\",\n\t\t\tname : \"Virtual Agent Topic Recommendations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin : false,\n\t\t\tisStoreApp : true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/87c995fd53d21010a813ddeeff7b12e1\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.snc.itsm.virtualagent\",\n\t\t\tdisplayName : \"ITSM Virtual Agent Conversations\",\n\t\t\tname : \"ITSM Virtual Agent Conversations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin : false,\n\t\t\tisStoreApp : true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/134450a0b3781300787162ac16a8dc1e\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.sn_csm.virtualagent\",\n\t\t\tdisplayName : \"Customer Service Virtual Agent Conversations\",\n\t\t\tname : \"Customer Service Virtual Agent Conversations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin:true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.sn_csm.virtualagent\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.sn_hr_virtual_agent\",\n\t\t\tdisplayName : \"HR Scoped App: Virtual Agent Conversations\",\n\t\t\tname : \"HR Service Delivery Virtual Agent conversations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin:false,\n\t\t\tisStoreApp: true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/c8c5545573d8130000e588e54cf6a71a\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.snc.universal_request.va\",\n\t\t\tdisplayName : \"Universal Request: Virtual Agent Conversations\",\n\t\t\tname : \"Universal Request: Virtual Agent Conversations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.snc.universal_request.va\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.sn_fsm.virtualagent\",\n\t\t\tdisplayName : \"Field Service Management Virtual Agent Conversations\",\n\t\t\tname : \"Field Service Virtual Agent Conversations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin:false,\n\t\t\tisStoreApp: true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/b7d7aa2ab7ae10105f48228dce11a9d5\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.snc.ppm_virtualagent\",\n\t\t\tdisplayName : \"Virtual Agent for PPM\",\n\t\t\tname : \"Virtual Agent for PPM\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin:false,\n\t\t\tisStoreApp: true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/1fc89d065321101023beddeeff7b123c\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.glide.isc_virtualagent\",\n\t\t\tdisplayName : \"ISC Virtual Agent Conversations\",\n\t\t\tname : \"ISC Virtual Agent Conversations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.isc_virtualagent\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.glide.awa.agent_affinity\",\n\t\t\tdisplayName : \"Agent Affinity\",\n\t\t\tname : \"Advanced Work Assignment - Agent Affinity\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.awa.agent_affinity\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.glide.messaging.awa\",\n\t\t\tdisplayName : \"Conversational Messaging\",\n\t\t\tname : \"Conversational Messaging\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.messaging.awa\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.snc.pa.awa\",\n\t\t\tdisplayName : \"Performance Analytics Content Pack for AWA\",\n\t\t\tname : \"Performance Analytics - Content Pack - Advanced Work Assignment\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.snc.pa.awa\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.sn.va.profanity\",\n\t\t\tdisplayName : \"Profanity filter for agent chat\",\n\t\t\tname : \"Profanity filter for agent chat\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: false,\n\t\t\tisStoreApp: true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/77d07c3b7352201076d81f8afaf6a7bb\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.glide.sensitive_data_handling\",\n\t\t\tdisplayName : \"Sensitive Data Handling\",\n\t\t\tname : \"Sensitive Data Handling\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.sensitive_data_handling\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.sn_va_appt_scheduler\",\n\t\t\tdisplayName : \"Conversational Appointment Booking\",\n\t\t\tname : \"Conversational Appointment Booking\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: false,\n\t\t\tisStoreApp: true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/94cbb983db2e2010a59666041b961964\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.snc.csm.engagement_center\",\n\t\t\tdisplayName : \"Engagement Messenger\",\n\t\t\tname : \"Engagement Messenger\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: false,\n\t\t\tisStoreApp: true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/85cc1c10872a1010fb4b3a0548cb0bf2\"\n\t\t}\n\t];\n\t\n\tvar result = {\n\t\tavailablePlugins: [],\n\t\tinstalledPlugins: []\n\t};\n\t\n\tfor(var i=0; i<payload.length; i++) {\n\t\tvar link = {\n\t\t\t\"label\": \"\",\n\t\t\t\"value\": {\n\t\t\t\t\"href\": \"\"\n\t\t\t},\n\t\t\t\"type\": \"external\"\n\t\t};\n\t\tlink.label = payload[i].displayName;\n\t\tlink.value.href = payload[i].appLink;\n\t\tpayload[i].isInstalled = GlidePluginManager.isActive(payload[i].id);\n\t\tif(payload[i].isInstalled)\n\t\t\tresult.installedPlugins.push(link);\n\t\telse\n\t\t\tresult.availablePlugins.push(link);\n\t}\n\t\n\treturn result;\n\t\n}\n","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_47596200c3860110fc869bc8a840dd94","api_name":"sn_oe_sfs.CI GS Plugins Status","mutates_server_data":"false","name":"CI GS Plugins Status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"If true the policy should be activated, if false deactivate the policy\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Policy SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The sys_id of the policy\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Deactivates or activates a policy depending on the policy flag","sys_updated_on":"2024-05-08 00:07:00","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"47950f9f43c1b11017b739603ab8f282","sys_updated_by":"admin","sys_created_on":"2023-09-08 18:03:32","sys_name":"Data Manager Activate/Deactivate Policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFunction = function() {\n\t\tvar sysId = input.policySysId;\n\t\tvar activateFlag = input.isActivatePolicy;\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n\t\tproxy.activatePolicy(sysId, activateFlag);\n\t\tvar policyData = proxy.getPolicyInfo(sysId);\n\t\treturn policyData;\n\t};\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Activate/Deactivate Policy\", wrapperFunction);\n}","acl_failure_result":"","props":"[\r\n    {\r\n       \"name\": \"policySysId\",\r\n       \"label\": \"Policy SysId\",\r\n       \"fieldType\": \"string\",\r\n       \"readOnly\": false,\r\n       \"mandatory\": true,\r\n       \"description\": \"The sys_id of the policy\"\r\n    },\r\n    {\r\n       \"name\": \"isActivatePolicy\",\r\n       \"label\": \"If true the policy should be activated, if false deactivate the policy\",\r\n       \"fieldType\": \"boolean\",\r\n       \"readOnly\": false,\r\n       \"mandatory\": false,\r\n       \"description\": \"If true the policy should be activated, if false deactivate the policy\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_47950f9f43c1b11017b739603ab8f282","api_name":"sn_cmdb_ws.Data Manager Activate/Deactivate Policy","mutates_server_data":"true","name":"Data Manager Activate/Deactivate Policy","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ACE factory ids to store in app config\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Ace Application Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Ace app config Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Ace app config id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Factories ids\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Screen Type of Content Block\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"UX app config Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"UX app config id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"screenType\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Create Content Block Sub Pages","sys_updated_on":"2023-03-14 12:37:40","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4895ae49eb19011090fa99602a522814","sys_updated_by":"admin","sys_created_on":"2022-01-25 13:55:49","sys_name":"Create Content Block Sub Pages","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"30","sys_tags":"","script":"function transform(input) {\n\n    //UPDATE CONTEXT\n    var gr = new GlideRecord('sn_ace_app_config');\n    if (gr.get(input.aceAppConfig) && gr.canWrite()) {\n        gr.setValue('context', JSON.stringify(input.context));\n        gr.update();\n    }\n\n    // Create Content Block sub pages and update the subpage routes\n    var util = new sn_ace.ACEAppBuilderUtil();\n    util.updateAppConfigForSubPagesRoutes(input.screenType, input.context.content_block_id);\n    var subPages = util.getContentBlockSubPages(input.aceAppName);\n    util.cloneSubPages(input.aceAppName, input.uxAppConfigId, input.context.content_block_id, subPages);\n}","acl_failure_result":"","props":"[{\n    \"name\": \"context\",\n    \"label\": \"Factories ids\",\n    \"description\": \"ACE factory ids to store in app config\",\n    \"readOnly\": false,\n    \"fieldType\": \"object\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"aceAppConfig\",\n    \"label\": \"Ace app config Id\",\n    \"description\": \"Ace app config id\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"uxAppConfigId\",\n    \"label\": \"UX app config Id\",\n    \"description\": \"UX app config id\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"screenType\",\n    \"label\": \"Screen Type of Content Block\",\n    \"description\": \"screenType\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"aceAppName\",\n    \"label\": \"Ace Application Name\",\n    \"description\": \"Ace Application Name\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_4895ae49eb19011090fa99602a522814","api_name":"sn_ace.Create Content Block Sub Pages","mutates_server_data":"true","name":"Create Content Block Sub Pages","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-13 10:53:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"48a1f6f54390121085678772d9b8f2d0","sys_updated_by":"admin","sys_created_on":"2024-08-29 10:20:44","sys_name":"Fetch response templates for SOW","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n    var table = input.table;\n    var responseTemplate = new sn_sow_itsm_common.ResponseTemplateSOW();\n    var sysId = input.sysId;\n    var search = '';\n    var count = 100;\n    var offset = 0;\n    var channel = responseTemplate.CHANNEL_FORM;\n\n    var opts = {\n        channel: channel\n    };\n    var responses = responseTemplate.query(table, sysId, search, count, offset, true, '', opts);\n    var results = JSON.parse(responses);\n    return results;\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"table\",\r\n      \"label\": \"Table\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"incident\"\r\n  },\r\n {\r\n      \"name\": \"sysId\",\r\n      \"label\": \"Sys Id\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_48a1f6f54390121085678772d9b8f2d0","api_name":"sn_sow_itsm_common.Fetch response templates for SOW","mutates_server_data":"false","name":"Fetch response templates for SOW","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-24 00:11:40","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"48cacbfb435531106d8a8ef0dab8f2b7","sys_updated_by":"admin","sys_created_on":"2023-09-22 18:00:26","sys_name":"Get Subflows List Filter","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform() {\n    var wrapperFunction = function() {\n        var dataFilter = \"\";\n        var categoryGr = new GlideRecord(\"cmdb_policy_type_categories\");\n        categoryGr.query();\n\n        var subflowCategories = [];\n        while (categoryGr.next()) {\n            var subflowCategory = categoryGr.getValue(\"sys_hub_category\");\n            subflowCategories.push(subflowCategory);\n        }\n\n        var encodedQuery = \"category.sys_idIN\" + subflowCategories.join(\",\");\n\n        var subflowGr = new GlideRecord(\"sys_hub_flow\");\n        subflowGr.addEncodedQuery(encodedQuery);\n        subflowGr.query();\n\n        var sysIds = [];\n        while (subflowGr.next()) {\n            var subFlowId = subflowGr.getUniqueValue();\n            sysIds.push(subFlowId);\n        }\n\n        dataFilter = \"sys_idIN\" + sysIds.join(\",\");\n\n        return dataFilter;\n\n    };\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Get Subflows List\", wrapperFunction);\n\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_48cacbfb435531106d8a8ef0dab8f2b7","api_name":"sn_cmdb_ws.Get Subflows List Filter","mutates_server_data":"false","name":"Get Subflows List Filter","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-10-22 11:14:03","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"49115c3c43823110449f255adfb8f26e","sys_updated_by":"maint","sys_created_on":"2023-10-20 03:34:12","sys_name":"EMS Route","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_created_by":"maint","sys_mod_count":"3","sys_tags":"","script":"function transform(input){\n      return new sn_entitlement.SubscriptionEntitlementsService().canRouteToEMS();\n}\t","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_update_name":"sys_ux_data_broker_transform_49115c3c43823110449f255adfb8f26e","api_name":"sn_ih_usage_app.EMS Route","mutates_server_data":"false","name":"EMS Route","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Assignment Type Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User Group Assignment SysID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User Group Search Term\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get the available options depending on the assignment type","sys_updated_on":"2024-01-24 04:52:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4968c2d4a3513110d49f9bd2361e615d","sys_updated_by":"admin","sys_created_on":"2023-09-11 17:09:07","sys_name":"Data Manager Get Assignment Options","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFunction = function() {\n\t\tvar assignmentTypeId = input.assignmentTypeId;\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n\t\tvar typeAheadOptions = [];\n\n\t\tswitch(assignmentTypeId) {\n\t\t\tcase \"user_group_field\":\n\t\t\t\tvar userGroupFields = proxy.getGroupFieldsForTable(input.tableName);\n\t\t\t\tfor (var i = 0; i < userGroupFields.length; i++) {\n\t\t\t\t\ttypeAheadOptions.push({\n\t\t\t\t\t\t\"id\": userGroupFields[i].sys_id,\n\t\t\t\t\t\t\"label\": userGroupFields[i].label\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"specific_user\":\n\t\t\t\tvar users = proxy.getDataManagerUsers();\n\t\t\t\tfor (var i = 0; i < users.length; i++) {\n\t\t\t\t\ttypeAheadOptions.push({\n\t\t\t\t\t\t\"id\": users[i].value,\n\t\t\t\t\t\t\"label\": users[i].name\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"specific_user_group\":\n\t\t\t\tvar groups = proxy.getDataManagerUserGroupsUsingSearch({\n\t\t\t\t\t\"searchTerm\": input.searchTerm && input.searchTerm.length > 2 ? input.searchTerm : \"\",\n\t\t\t\t\t\"userGroupAssignmentSysId\": input.userGroupAssignmentSysId\n\t\t\t\t}\n\n\t\t\t\t);\n\t\t\t\tfor (var i = 0; i < groups.length; i++) {\n\t\t\t\t\ttypeAheadOptions.push({\n\t\t\t\t\t\t\"id\": groups[i].value,\n\t\t\t\t\t\t\"label\": groups[i].name\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"user_field\":\n\t\t\t\tvar userFields = proxy.getUserFieldsForTable(input.tableName);\n\t\t\t\tfor (var i = 0; i < userFields.length; i++) {\n\t\t\t\t\ttypeAheadOptions.push({\n\t\t\t\t\t\t\"id\": userFields[i].sys_id,\n\t\t\t\t\t\t\"label\": userFields[i].label\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn typeAheadOptions;\n\t};\n\n\treturn new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Get Assignment Options\", wrapperFunction);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"assignmentTypeId\",\r\n    \"label\": \"Assignment Type Id\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"tableName\",\r\n    \"label\": \"Table Name\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"searchTerm\",\r\n    \"label\": \"User Group Search Term\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": false,\r\n    \"description\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"userGroupAssignmentSysId\",\r\n    \"label\": \"User Group Assignment SysID\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": false,\r\n    \"description\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_4968c2d4a3513110d49f9bd2361e615d","api_name":"sn_cmdb_ws.Data Manager Get Assignment Options","mutates_server_data":"false","name":"Data Manager Get Assignment Options","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4ad6c7fd7706511023651605bc5a9923","sys_updated_by":"admin","sys_created_on":"2022-09-21 02:57:56","sys_name":"Hide property enabled message","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\treturn util.msPropertyEnabled();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_4ad6c7fd7706511023651605bc5a9923","api_name":"sn_cmdb_ws.Hide property enabled message","mutates_server_data":"false","name":"Hide property enabled message","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Base User Request Payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Model User Request Payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Request payload to be used for calling debug log API for Base User\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Request payload to be used for calling debug log API for Model User\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to run access analyser for 2 users and return results","sys_updated_on":"2023-07-27 03:37:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4aec960153d0311031f4ddeeff7b1260","sys_updated_by":"admin","sys_created_on":"2023-07-26 08:33:03","sys_name":"Get compare access debug logs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var debugLogAPI = new sn_identity.IdentitySecurityApi();\n    var baseUserAccessResult = debugLogAPI.getDebugLog(input.baseUserRequestPayload);\n    var modelUserAccessResult = debugLogAPI.getDebugLog(input.modelUserRequestPayload);\n\n    return {\n        \"baseUserAccessResult\": baseUserAccessResult,\n        \"modelUserAccessResult\": modelUserAccessResult\n    };\n}","acl_failure_result":"","props":"[ \r\n{\r\n        \"name\": \"baseUserRequestPayload\",\r\n        \"label\": \"Base User Request Payload\",\r\n        \"description\": \"Request payload to be used for calling debug log API for Base User\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true\r\n    },\r\n{\r\n        \"name\": \"modelUserRequestPayload\",\r\n        \"label\": \"Model User Request Payload\",\r\n        \"description\": \"Request payload to be used for calling debug log API for Model User\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_update_name":"sys_ux_data_broker_transform_4aec960153d0311031f4ddeeff7b1260","api_name":"sn_access_analyzer.Get compare access debug logs","mutates_server_data":"true","name":"Get compare access debug logs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Activity Label\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Activity State\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Advanced Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Are there declarative actions on this activity that require form fields?\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Assigned To\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Associated Record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Associated Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Config Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Configuration values from the Playbook Experience\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Does this activity UI have sufficient data to view something meaningful?\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Experience Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Experience Properties from the Activity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Fill Container\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Form Field Items\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Form Fields Required\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Has Sufficient Data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Is the Playbook in Focused Activity View?\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Is this activity prioritized?\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"List of form fields and their values\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Prioritized\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The Associated Record of the Activity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The Associated Table of the Activity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The User Object of the user assigned to the associated record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The ValueDisplay of the label of the activity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The label of the activity\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Transforms a set of Activity UI Properties and State into the properties to be passed into the sn-playbook-card component. ","sys_updated_on":"2023-05-08 19:07:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4b5256010742301051ff3342cfd300f6","sys_updated_by":"maint","sys_created_on":"2021-08-16 23:02:24","sys_name":"Playbook Experience Playbook Card Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_created_by":"admin","sys_mod_count":"16","sys_tags":"","script":"function transform(input) {\n\tfunction getActivityState(activityState, inUIBuilder){\n\t\tif(!inUIBuilder)\n\t\t\treturn activityState;\n\n\t\tvar label = new GlideChoiceList.getChoiceList('sys_playbook_experience_state_to_status', 'activity_card_value').getChoice(activityState).getLabel();\n\n\t\treturn {\n\t\t\tdisplayValue: label,\n\t\t\tvalue: activityState\n\t\t};\n\t}\n\n\tfunction getExpand(expand, activityState, inUIBuilder) {\n\t\tif(!inUIBuilder)\n\t\t\treturn expand;\n\n\t\tif(activityState.value != 'IN_PROGRESS')\n\t\t\treturn false;\n\n\t\treturn true;\n\t}\n\n\tinput.experienceProperties = input.experienceProperties || {};\n\tinput.advanced = input.advanced || {};\n\t\n\tvar inUIBuilder = input.advanced.inUIBuilder;\n\tvar associatedSysId = input.associatedRecord;\n\tvar associatedTable = input.associatedTable;\n\tvar activityLabel = input.activityLabel;\n\tvar activityState = getActivityState(input.activityState, inUIBuilder);\n\tvar assignedTo = input.assignedTo;\n\tvar prioritized = input.prioritized;\n\tvar fillContainer = input.fillContainer;\n\tvar configProperties = input.configProperties;\n\n\tvar pending_title = input.experienceProperties.pending_title || {};\n\tvar pending_description =\n\t\tinput.experienceProperties.pending_description || {};\n\tvar title = input.experienceProperties.title || {};\n\tvar footer = input.experienceProperties.footer;\n\tvar is_automated = input.experienceProperties.is_automated || {};\n\tvar show_sla = input.experienceProperties.show_sla || {};\n\tvar tagline = input.experienceProperties.tagline || {};\n\tvar icon = input.experienceProperties.icon || {};\n\n\tvar declarativeActions = input.advanced.declarativeActions;\n\tvar declarativeModel = input.advanced.declarativeModel;\n\tvar contextId = input.advanced.contextId;\n\tvar filterData = input.advanced.filterData;\n\tvar loading = input.advanced.loading;\n\tvar userSession = input.advanced.userSession;\n\t\n\tvar expandOnMountOrChange = getExpand(input.advanced.expandOnMountOrChange, activityState, inUIBuilder);\n\n\tvar heading = null;\n\tif (activityLabel) {\n\t\theading = { label: activityLabel };\n\t}\n\tif (title.value) {\n\t\theading = { label: title.value };\n\t}\n\n\tvar taglineValue = {};\n\tif (tagline.value || icon.value) {\n\t\ttaglineValue = {\n\t\t\tlabel: tagline.value || \"\",\n\t\t\ticon: icon.value || \"\",\n\t\t};\n\t}\n\n\tvar pendingTitle = null;\n\tif (pending_title.value) {\n\t\tpendingTitle = pending_title.value;\n\t} else if (title.value) {\n\t\tpendingTitle = title.value;\n\t} else if (activityLabel) {\n\t\tpendingTitle = activityLabel;\n\t}\n\n\tvar formApi = input.advanced.formApi;\n\n\treturn {\n\t\tassociatedTable: associatedTable || null,\n\t\tassociatedSysId: associatedSysId || null,\n\t\theading: heading,\n\t\ttagline: taglineValue,\n\t\tpendingDescription: pending_description.value || null,\n\t\tdeclarativeActions: declarativeActions,\n\t\tdeclarativeModel: declarativeModel,\n\t\tactivityState: activityState,\n\t\tpendingTitle: pendingTitle,\n\t\tloading: loading,\n\t\tcontextId: contextId,\n\t\tconfigProperties: configProperties,\n\t\tcardFooter: footer,\n\t\tfilterData: filterData,\n\t\tassignedTo: assignedTo,\n\t\tshowSla: show_sla.value === \"1\",\n\t\tisAutomated: is_automated.value === \"1\",\n\t\tprioritized: prioritized,\n\t\texpandOnMountOrChange: expandOnMountOrChange,\n\t\tuserSession: userSession,\n\t\tfillContainer: fillContainer,\n\t\tformFieldItems: inUIBuilder ? [\"UIB Placeholder\"] : input.formFieldItems,\n\t\tformFieldsRequired: inUIBuilder ? true : input.formFieldsRequired,\n\t\tdispatchDeclarativeAction: formApi && formApi.dispatchDeclarativeAction,\n\t\tmodalDeclarativeAction: formApi && formApi.modalDeclarativeAction\n\t};\n}\n","acl_failure_result":"","props":"[\n\t{\n\t\t\"name\": \"experienceProperties\",\n\t\t\"label\": \"Experience Properties\",\n\t\t\"description\": \"Experience Properties from the Activity\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"json\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": {}\n\t},\n\t{\n\t\t\"name\": \"advanced\",\n\t\t\"label\": \"Advanced Properties\",\n\t\t\"description\": \"Advanced Properties\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"json\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": {}\n\t},\n\t{\n\t\t\"name\": \"associatedRecord\",\n\t\t\"label\": \"Associated Record\",\n\t\t\"description\": \"The Associated Record of the Activity\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": \"\"\n\t},\n\t{\n\t\t\"name\": \"associatedTable\",\n\t\t\"label\": \"Associated Table\",\n\t\t\"description\": \"The Associated Table of the Activity\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": \"\"\n\t},\n\t{\n\t\t\"name\": \"activityLabel\",\n\t\t\"label\": \"Activity Label\",\n\t\t\"description\": \"The label of the activity\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": \"\"\n\t},\n\t{\n\t\t\"name\": \"activityState\",\n\t\t\"label\": \"Activity State\",\n\t\t\"description\": \"The ValueDisplay of the label of the activity\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": {}\n\t},\n\t{\n\t\t\"name\": \"assignedTo\",\n\t\t\"label\": \"Assigned To\",\n\t\t\"description\": \"The User Object of the user assigned to the associated record\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": {}\n\t},\n\t{\n\t\t\"name\": \"prioritized\",\n\t\t\"label\": \"Prioritized\",\n\t\t\"description\": \"Is this activity prioritized?\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"boolean\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": false\n\t},\n\t{\n\t\t\"name\": \"fillContainer\",\n\t\t\"label\": \"Fill Container\",\n\t\t\"description\": \"Is the Playbook in Focused Activity View?\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"boolean\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": false\n\t},\n\t{\n\t\t\"name\": \"configProperties\",\n\t\t\"label\": \"Config Properties\",\n\t\t\"description\": \"Configuration values from the Playbook Experience\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"json\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": {}\n\t},\n\t{\n\t\t\"name\": \"formFieldItems\",\n\t\t\"label\": \"Form Field Items\",\n\t\t\"description\": \"List of form fields and their values\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"json\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": []\n\t},\n\t{\n\t\t\"name\": \"hasSufficientData\",\n\t\t\"label\": \"Has Sufficient Data\",\n\t\t\"description\": \"Does this activity UI have sufficient data to view something meaningful?\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"boolean\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": true\n\t},\n\t{\n\t\t\"name\": \"formFieldsRequired\",\n\t\t\"label\": \"Form Fields Required\",\n\t\t\"description\": \"Are there declarative actions on this activity that require form fields?\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"boolean\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": false\n\t}\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_update_name":"sys_ux_data_broker_transform_4b5256010742301051ff3342cfd300f6","api_name":"sn_playbook_exp.Playbook Experience Playbook Card Properties","mutates_server_data":"false","name":"Playbook Experience Playbook Card Properties","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Context Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-09 10:58:28","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4b5fdea59fb10210d9e5328dda0a1c34","sys_updated_by":"admin","sys_created_on":"2024-04-26 07:45:14","sys_name":"Get PWD Reset Workflow Result","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\treturn  new sn_uib_pwd_reset.PwdResetUXFResetProcessor().checkWorkflowResult(input.token,input.contextId);\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n{\r\n      \"name\": \"contextId\",\r\n      \"label\": \"Context Id\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_4b5fdea59fb10210d9e5328dda0a1c34","api_name":"sn_uib_pwd_reset.Get PWD Reset Workflow Result","mutates_server_data":"true","name":"Get PWD Reset Workflow Result","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Context ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-06 14:44:26","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4b9a636b437942107524354d3ab8f29d","sys_updated_by":"admin","sys_created_on":"2024-05-02 18:26:15","sys_name":"Pwd Reset Get Account Unlock Status On Polling","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    return new sn_uib_pwd_reset.PwdResetUXFResetProcessor().getAccountUnlockStatusOnPolling(input.token, input.contextId);\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n{\r\n      \"name\": \"contextId\",\r\n      \"label\": \"Context ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_4b9a636b437942107524354d3ab8f29d","api_name":"sn_uib_pwd_reset.Pwd Reset Get Account Unlock Status On Polling","mutates_server_data":"true","name":"Pwd Reset Get Account Unlock Status On Polling","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Search Context Config ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This is a databroker that would fetch exact match property set in SAC","sys_updated_on":"2023-10-19 20:50:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4c6c99688c8eb910f877893fd12bf7e1","sys_updated_by":"maint","sys_created_on":"2023-10-19 14:23:12","sys_name":"Databroker to Fetch Exact Match","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","sys_mod_count":"32","sys_tags":"","script":"function transform(input) {\n    var SEARCH_CONTEXT_CONFIG_EXACT_MATCH = 'search_context_config_exact_match_cache';\n\n    var cachedValue = GlideCacheManager.get(SEARCH_CONTEXT_CONFIG_EXACT_MATCH, input.searchContextConfigId);\n    if (cachedValue != null)\n        return cachedValue ? true : false;\n\n    if (input.searchContextConfigId) {\n        var searchContextConfig = new GlideRecord('sys_search_context_config');\n\n        searchContextConfig.addQuery('sys_id', input.searchContextConfigId);\n        searchContextConfig.addQuery('search_engine', 'ai_search');\n        searchContextConfig.addQuery('enable_exact_match', true);\n        searchContextConfig.query();\n        var exactMatchValue = searchContextConfig.hasNext();\n        GlideCacheManager.put(SEARCH_CONTEXT_CONFIG_EXACT_MATCH, input.searchContextConfigId, exactMatchValue);\n        return exactMatchValue;\n    }\n\n    return false;\n\n\n}","acl_failure_result":"","props":"[\n    {\n      \"name\": \"searchContextConfigId\",\n      \"label\": \"Search Context Config ID\",\n      \"description\": \"Search Context Config ID\",\n      \"readOnly\": false,\n      \"fieldType\": \"reference\",\n      \"mandatory\": true,\n      \"typeMetadata\": {\n             \"reference\": \"sys_search_context_config\"\n       }\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_4c6c99688c8eb910f877893fd12bf7e1","api_name":"global.Databroker to Fetch Exact Match","mutates_server_data":"false","name":"Databroker to Fetch Exact Match","output_schema":"","sys_policy":""},{"private":"false","required_translations":"","batch_exclude":"false","description":"","sys_updated_on":"2020-06-04 18:40:32","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4c85aa1773e41010a0a79329faf6a769","sys_updated_by":"admin","sys_created_on":"2020-05-08 18:40:32","sys_name":"List Menu - Get Lists","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1ccc514914f9914b0daf263369cfe648","value":"1ccc514914f9914b0daf263369cfe648"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function getListMenuModel(input) {\n\tvar listMenu = input.graphqlData.data.GlideListMenu_Query.getListMenuLayout.listMenu;\n\tvar categories = listMenu.categoryItems.filter(function(category) {\n\t\treturn category.children.length > 0;\n\t});\n\n\treturn {\n\t\t'sys_ux_list': {\n\t\t\ttitle: 'Lists',\n\t\t\tkey: 'sys_ux_list',\n\t\t\tcanEdit: false,\n\t\t\tcanExpand: true,\n\t\t\tdata: categories,\n\t\t\tnewListForm: {}\n\t\t}, \n\t\t'sys_ux_my_list': {\n\t\t\ttitle: 'My Lists',\n\t\t\tkey: 'sys_ux_my_list',\n\t\t\tcanEdit: true,\n\t\t\tcanExpand: false,\n\t\t\tdata: listMenu.menuItems,\n\t\t\tnewListForm: {\n        form: 'sys_ux_my_list.do',\n        view: 'ux_modal'\n      }\n\t\t}\n\t};\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"graphqlData\",\r\n  \"label\": \"GraphQL Data\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"object\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1ccc514914f9914b0daf263369cfe648","value":"1ccc514914f9914b0daf263369cfe648"},"sys_update_name":"sys_ux_data_broker_transform_4c85aa1773e41010a0a79329faf6a769","api_name":"sn_list_menu.List Menu - Get Lists","mutates_server_data":"false","name":"List Menu - Get Lists","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data manager form information\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Payload of update data manager form information, must include the policy sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Updates a data manager policy","sys_updated_on":"2024-05-07 11:09:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4c9d60d54350311017b739603ab8f2ca","sys_updated_by":"admin","sys_created_on":"2023-07-26 19:03:52","sys_name":"Data Manager Update Policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFunction = function() {\n\t\tvar payload = input.payload;\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n\n\t\t// format the policy data by using the current view as key and save the data, then query the policy for updates\n\t\tvar currentViewPolicyData = {};\n\t\tcurrentViewPolicyData[payload.currentView] = payload.policyData[payload.currentView];\n\t\tproxy.updatePolicy(payload.policySysId, currentViewPolicyData);\n\t\tvar policyData = proxy.getPolicyInfo(payload.policySysId);\n\n\t\t// update the updated_on flag for the client display\n\t\tvar gdt = new GlideDateTime(policyData.updated_on);\n\t\tvar policyUpdated = gs.getMessage(\"Last saved: {0}\", gdt.getDisplayValue());\n\n\t\treturn {\n\t\t\t\"policyData\": policyData,\n\t\t\t\"policyUpdated\": policyUpdated\n\t\t};\n\t};\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Update Policy\", wrapperFunction);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"payload\",\r\n    \"label\": \"Data manager form information\",\r\n    \"fieldType\": \"json\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Payload of update data manager form information, must include the policy sysId\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_4c9d60d54350311017b739603ab8f2ca","api_name":"sn_cmdb_ws.Data Manager Update Policy","mutates_server_data":"true","name":"Data Manager Update Policy","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Array of document IDs to fetch attribute status for\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Document IDs\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of the record of the task record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-29 06:45:02","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4ce0746853453110fdadddeeff7b1259","sys_updated_by":"admin","sys_created_on":"2023-08-30 18:23:51","sys_name":"DM - Get attribute status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFn = function() {\n\t\tif (input.document_ids.length) {\n\t\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMTaskUIProxy();\n\t\t\treturn proxy.getAttributeStatus(input.task_id, input.document_ids);\n\t\t} else {\n\t\t\treturn {};\n\t\t}\n\t};\n\treturn new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Get certification attribute status from DM\", wrapperFn);\n}","acl_failure_result":"","props":"[ \r\n  {\r\n     \"name\": \"task_id\",\r\n     \"label\": \"Task ID\",\r\n     \"description\": \"Sys id of the record of the task record\",\r\n     \"readOnly\": false,\r\n     \"fieldType\": \"string\",\r\n     \"mandatory\": true,\r\n     \"defaultValue\": \"\"\r\n   },\r\n  {\r\n     \"name\": \"document_ids\",\r\n     \"label\": \"Document IDs\",\r\n     \"description\": \"Array of document IDs to fetch attribute status for\",\r\n     \"readOnly\": false,\r\n     \"fieldType\": \"array\",\r\n     \"mandatory\": true,\r\n     \"defaultValue\": \"\"  \r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_4ce0746853453110fdadddeeff7b1259","api_name":"sn_cmdb_ws.DM - Get attribute status","mutates_server_data":"false","name":"DM - Get attribute status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"AIS Genius Results From Search Query Response\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Genius Result Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This Transform is intended to be used after \"Bind data to component prop\" (7b652701773300108d070d74c81061b8) and will take the Genius Result Cards and add the Genius Result Configuration ID from the configuration which generated the card.","sys_updated_on":"2024-09-25 21:55:47","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4d8a60f5c3323110ef144ce55bba8fb4","sys_updated_by":"admin","sys_created_on":"2023-11-29 14:54:09","sys_name":"Augment Genius Result Cards","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"18","sys_tags":"","script":"function transform(input) {\n    var result = input.geniusResults;\n    if (!result)\n        return {\n\t\tis_last_page: true,\n\t\tall_actions: [],\n\t\titems: [],\n\t};\n\n    var geniusResults = input.geniusResultsResponseFromSearchResponse;\n    if (!geniusResults)\n        return result;\n\n    var geniusResultConfigByResultSysId = {};\n    var orderByResultSysId = {};\n\n    geniusResults\n        .forEach(function(geniusResult) {\n            var geniusResultItemId;\n            var geniusResultConfigId;\n            var order;\n            for (grColumnIdx in geniusResult.data) {\n                grColumnObj = geniusResult.data[grColumnIdx];\n\n                if (grColumnObj.fieldName === 'sys_id')\n                    geniusResultItemId = grColumnObj.value;\n                if (grColumnObj.fieldName === 'ais_genius_config_id')\n                    geniusResultConfigId = grColumnObj.value;\n                if (grColumnObj.fieldName === 'order')\n                    order = grColumnObj.value;\n\n                if (geniusResultItemId && order) {\n                    orderByResultSysId[geniusResultItemId] = order;\n                }\n\n                if (geniusResultItemId && geniusResultConfigId) {\n                    geniusResultConfigByResultSysId[geniusResultItemId] = geniusResultConfigId;\n                }\n\n\n            }\n        });\n\n    result\n        .items\n        .forEach(function(geniusResultCard) {\n            var model = geniusResultCard.propValues.model;\n            if (!model)\n                return;\n            var cardSysId = model['columns.sys_id'];\n            if (!cardSysId)\n                return;\n\n            var geniusResultConfigId = geniusResultConfigByResultSysId[cardSysId];\n            if (!geniusResultConfigId)\n                return;\n\n            model['ais_genius_config_id'] = geniusResultConfigId;\n\n            var order = orderByResultSysId[cardSysId];\n            if (!order)\n                return;\n\n            model['order'] = order;\n\n        });\n\n    return result;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"geniusResults\",\r\n        \"label\": \"Genius Result Data\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"geniusResultsResponseFromSearchResponse\",\r\n        \"label\": \"AIS Genius Results From Search Query Response\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_4d8a60f5c3323110ef144ce55bba8fb4","api_name":"global.Augment Genius Result Cards","mutates_server_data":"false","name":"Augment Genius Result Cards","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"SysID of Verification\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Verification ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-04-15 13:25:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4e6a768e93610210228bca32b3891846","sys_updated_by":"admin","sys_created_on":"2024-04-15 12:44:40","sys_name":"Get initial SMS Verification data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    return new PwdResetUXFSMSVerificationProcessor().getInitialData(input.token, input.verificationId);\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"token\",\r\n        \"label\": \"Token\",\r\n        \"description\": \"Token\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"verificationId\",\r\n        \"label\": \"Verification ID\",\r\n        \"description\": \"SysID of Verification\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_4e6a768e93610210228bca32b3891846","api_name":"sn_uib_pwd_reset.Get initial SMS Verification data","mutates_server_data":"false","name":"Get initial SMS Verification data","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Policy SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The sys_id of the policy\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Gets the record and task count for a data manager policy","sys_updated_on":"2024-05-07 11:09:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4ebb9c00434d351017b739603ab8f2d6","sys_updated_by":"admin","sys_created_on":"2023-08-29 03:21:29","sys_name":"Get data manager policy review info","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFunction = function() {\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n\t\tpolicyReviewData = proxy.getPolicyReviewInfo(input.policySysId);\n\t\treturn policyReviewData;\n\t};\n\treturn new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Get data manager policy review info\", wrapperFunction);\n}","acl_failure_result":"","props":"[\r\n    {\r\n       \"name\": \"policySysId\",\r\n       \"label\": \"Policy SysId\",\r\n       \"fieldType\": \"string\",\r\n       \"readOnly\": false,\r\n       \"mandatory\": true,\r\n       \"description\": \"The sys_id of the policy\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_4ebb9c00434d351017b739603ab8f2d6","api_name":"sn_cmdb_ws.Get data manager policy review info","mutates_server_data":"true","name":"Get data manager policy review info","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"KB sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Source sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Source table name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Target table name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Check if a knowledge form is eligible for \"Draft article with Now Assist\" feature","sys_updated_on":"2024-10-14 13:31:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4efc26308328065039fd5defeeaad37a","sys_updated_by":"admin","sys_created_on":"2024-02-21 21:31:06","sys_name":"Check Gen AI Eligibility","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(params) {\n    var answer = {};\n\n    if (!GlidePluginManager.isActive(\"sn_km_gen_ai\")) {\n        answer.eligible = false;\n        return answer;\n    }\n\n    if (gs.nil(params) || gs.nil(params.kb_sys_id) || gs.nil(params.target_table)) {\n        answer.eligible = false;\n        return answer;\n    }\n\n    var utils = new sn_km_gen_ai.KMNowAssistInProductUtils();\n    //Author flow condition check and it fills the dropdown with task table in workspace  \n    if (gs.nil(params.source_sys_id)) {\n        if (params.kb_sys_id.indexOf('-1') !== 0) {\n            answer.eligible = false;\n            return answer;\n        }\n        var searchService = new sn_km_gen_ai.KMSearchService();\n        answer.availableTaskFilters = searchService.getAvailableFilters();\n        var filtersCount = Object.keys(answer.availableTaskFilters).length;\n    }\n    answer.eligible = utils.shouldShowGenAIGenerate(params.kb_sys_id == '-1', params.source_table, params.source_sys_id, params.target_table);\n\n    answer.timeout = utils.getClientSideTimeout();\n    return answer;\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"source_table\",\n        \"label\": \"Source table name\",\n        \"description\": \"Source table name\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n    {\n        \"name\": \"source_sys_id\",\n        \"label\": \"Source sys ID\",\n        \"description\": \"Source sys ID\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n    {\n        \"name\": \"kb_sys_id\",\n        \"label\": \"KB sys ID\",\n        \"description\": \"KB sys ID\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n    {\n        \"name\": \"target_table\",\n        \"label\": \"Target table name\",\n        \"description\": \"Target table name\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_4efc26308328065039fd5defeeaad37a","api_name":"sn_km_uib.Check Gen AI Eligibility","mutates_server_data":"false","name":"Check Gen AI Eligibility","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Field\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-02-26 13:08:34","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4f2d5f6843a80a108ade1febb7b8f2da","sys_updated_by":"admin","sys_created_on":"2024-02-21 06:34:24","sys_name":"Get highlighted values","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"20","sys_tags":"","script":"function transform(input) {\n\tif (!input || !input.field || !input.table || !gs.tableExists(input.table)) return {};\n\treturn new sn_sow_itsm_common.SOWITSMHighlightedColorUtils().getAllHighlightedColors(input.table, input.field);\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"field\",\r\n  \"label\": \"Field\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_4f2d5f6843a80a108ade1febb7b8f2da","api_name":"sn_sow_itsm_common.Get highlighted values","mutates_server_data":"false","name":"Get highlighted values","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys ID array\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Takes Topics list API response\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Topic response\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"takes array of topic sys_ids\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-01-30 11:39:47","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4f5e47405378a1105841ddeeff7b1238","sys_updated_by":"admin","sys_created_on":"2023-01-30 09:56:56","sys_name":"Transform input for list selector","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\n    function search(sys_id, array_obj) {\n        for (var i = 0; i < array_obj.length; i++) {\n            if (array_obj[i].id == sys_id) {\n                var obj_i = {\n                    \"id\": array_obj[i].id,\n                    \"label\": array_obj[i].label\n                };\n                return [obj_i];\n            }\n            var response_array = undefined;\n            if (array_obj[i].children.length) {\n                response_array = search(sys_id, array_obj[i].children);\n            }\n            if (response_array && response_array.length) {\n                response_array.unshift({\n                    \"id\": array_obj[i].id,\n                    \"label\": array_obj[i].label\n                });\n                return response_array;\n            }\n        }\n        return undefined;\n    }\n\n    function operation2(sys_id_arr, topicResponse) {\n        var obj_selected = [];\n        for (var _i = 0; _i < sys_id_arr.length; ++_i) {\n            var search_i = search(sys_id_arr[_i], topicResponse);\n            if (search_i && search_i.length) {\n                obj_selected.unshift(search_i);\n            }\n        }\n        return obj_selected;\n    }\n    return operation2(input.sysIdArray, input.topicResponse);\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"sysIdArray\",\r\n  \"label\": \"Sys ID array\",\r\n  \"description\": \"takes array of topic sys_ids\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"json\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": []\r\n},\r\n{\r\n  \"name\": \"topicResponse\",\r\n  \"label\": \"Topic response\",\r\n  \"description\": \"Takes Topics list API response\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"json\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": []\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/92ed237304752210559073c06a02f7a0","value":"92ed237304752210559073c06a02f7a0"},"sys_update_name":"sys_ux_data_broker_transform_4f5e47405378a1105841ddeeff7b1238","api_name":"global.Transform input for list selector","mutates_server_data":"false","name":"Transform input for list selector","output_schema":"[\r\n    {\r\n        \"name\": \"selectedTopicsObject\",\r\n        \"label\": \"Selected topics Input Object\",\r\n        \"description\": \"Compatible input object for Selected Items of List Selector component\",\r\n        \"readOnly\": true,\r\n        \"fieldType\": \"json\"\r\n    }\r\n]","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"List of sys_ids of the required properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Properties Ids\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to fetch the properties for apps built in Admin Console Framework","sys_updated_on":"2022-02-10 09:58:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"4feb6225c32901104b8e88c7c840dd2d","sys_updated_by":"admin","sys_created_on":"2022-02-08 13:41:08","sys_name":"ACE Fetch Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.properties_id_list) return [];\n\tvar contentBlocks = new ACEAppBuilderUtil().getPropertiesPayload(input.properties_id_list);\n\treturn contentBlocks;\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"properties_id_list\",\n      \"label\": \"Properties Ids\",\n      \"description\": \"List of sys_ids of the required properties\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_4feb6225c32901104b8e88c7c840dd2d","api_name":"sn_ace.ACE Fetch Properties","mutates_server_data":"false","name":"ACE Fetch Properties","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[{\"message\":\"Preference\",\"comment\":\"\"}]","batch_exclude":"false","description":"","sys_updated_on":"2021-04-21 21:31:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"50855f17076320105fca5d1aead30036","sys_updated_by":"admin","sys_created_on":"2021-04-21 21:19:51","sys_name":"Dev Studio PublicAPI","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/ead9fb5f8b27a051aa71b35163745b82","value":"ead9fb5f8b27a051aa71b35163745b82"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n\tvar has_dev_studio = GlidePluginManager.isActive('com.glide.dev-studio') || GlidePluginManager.isActive('sn_devstudio');\n\n\tif(!has_dev_studio || !sn_devstudio) return {value: null};\n\t\n\treturn {value: sn_devstudio.PublicAPI.getUserPreference(gs.getUserID(), input.preference)};\n}","acl_failure_result":"","props":"[ \r\n    {\r\n            \"name\": \"preference\",\r\n            \"label\": \"Preference\",\r\n            \"description\": \"Preference\",\r\n            \"readOnly\": false,\r\n            \"fieldType\": \"String\",\r\n            \"mandatory\": false,\r\n            \"defaultValue\": \"\"\r\n        }\r\n    ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ead9fb5f8b27a051aa71b35163745b82","value":"ead9fb5f8b27a051aa71b35163745b82"},"sys_update_name":"sys_ux_data_broker_transform_50855f17076320105fca5d1aead30036","api_name":"polaris_app_shell.Dev Studio PublicAPI getPreference","mutates_server_data":"false","name":"Dev Studio PublicAPI getPreference","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-19 00:00:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"50f56a9f53c031105ea4ddeeff7b1248","sys_updated_by":"maint","sys_created_on":"2023-07-20 22:44:26","sys_name":"Critical Updates Update Complete","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var id = input.sys_id;\n    var gr = new GlideRecord(\"sn_critical_update\");\n    if (gr.get(id) && gr.getValue('up_update_status') == 'ready_ack') {\n        gr.setValue(\"up_update_status\", \"acknowledged\");\n        gr.setValue(\"up_completed_user\", gs.getUserID());\n        gr.update();\n    }\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"sys_id\",\r\n    \"label\": \"ID\",\r\n    \"description\": \"ID\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/983e67b304752210559073c06a02f755","value":"983e67b304752210559073c06a02f755"},"sys_update_name":"sys_ux_data_broker_transform_50f56a9f53c031105ea4ddeeff7b1248","api_name":"global.Critical Updates Update Complete","mutates_server_data":"false","name":"Critical Updates Update Complete","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Conditions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Field corresponding to id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Field corresponding to internal name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Field corresponding to label\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Field to filter results by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ID field\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Internal name field\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Label field\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Look up search conditions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Max results\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Maximum dropdown values to be shown\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search field\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search term\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"String to filter results by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table to look up\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get the dropdown values based on the search keyword","sys_updated_on":"2024-10-16 12:53:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5103bed743227910b8cf8beeaab8f20f","sys_updated_by":"admin","sys_created_on":"2023-11-22 06:28:07","sys_name":"Get dropdown values for typeahead","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n    var table = input.table;\n    var idField = input.idField;\n    var labelField = input.labelField;\n    var internalNameField = input.internalNameField;\n\n    if (!table || !gs.tableExists(table))\n        return [];\n\n    // Bypassing ACLs for sys_db_object to be able to show list of tables in condition builder dropdown\n    var bypassACL = (table === 'sys_db_object' && idField == 'name' && internalNameField === 'name' && labelField === 'label') ? true : false;\n\n    var encodedQuery = '';\n    if (input.encodedQuery && input.encodedQuery.length) {\n        encodedQuery = input.encodedQuery;\n    }\n\n    if (input.searchTerm && encodedQuery.length) {\n        encodedQuery = encodedQuery + '^' + input.searchField + 'LIKE' + input.searchTerm;\n    } else if (input.searchTerm) {\n        encodedQuery = input.searchField + 'LIKE' + input.searchTerm;\n    }\n\n    var dropdownvalues = [];\n    var label = '';\n\n    var recordGr = new GlideRecord(table);\n    if (bypassACL || recordGr.canRead()) {\n        recordGr.addEncodedQuery(encodedQuery, !bypassACL);\n        if (!gs.nil(input.labelField)) {\n            recordGr.orderBy(input.labelField);\n        }\n        recordGr.query();\n        var rowCount = recordGr.getRowCount();\n        if (rowCount === 0) {\n            label = gs.getMessage('No results found');\n        } else if (rowCount <= parseInt(input.limit, 10)) {\n            label = gs.getMessage('Showing 1-{0} of {0}', [rowCount]);\n        } else {\n            label = gs.getMessage('Showing 1-{0} of {1}', [input.limit, rowCount]);\n            recordGr.setLimit(parseInt(input.limit, 10));\n            recordGr.query();\n        }\n        while (recordGr.next() && (bypassACL ||recordGr.canRead())) {\n            dropdownvalues.push({\n                id: recordGr.getValue(input.idField),\n                label: recordGr.getDisplayValue(input.labelField),\n                internal_name: recordGr.getValue(input.internalNameField),\n            });\n        }\n    } else {\n        label = gs.getMessage('No results found');\n    }\n    return [{\n        id: 0,\n        label: label,\n        children: dropdownvalues\n    }];\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"table_name\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"encodedQuery\",\r\n  \"label\": \"Conditions\",\r\n  \"description\": \"Look up search conditions\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"searchTerm\",\r\n  \"label\": \"Search term\",\r\n  \"description\": \"String to filter results by\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"searchField\",\r\n  \"label\": \"Search field\",\r\n  \"description\": \"Field to filter results by\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"label\"\r\n},\r\n{\r\n  \"name\": \"idField\",\r\n  \"label\": \"ID field\",\r\n  \"description\": \"Field corresponding to id\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"sys_id\"\r\n},\r\n{\r\n  \"name\": \"labelField\",\r\n  \"label\": \"Label field\",\r\n  \"description\": \"Field corresponding to label\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"label\"\r\n},\r\n{\r\n  \"name\": \"internalNameField\",\r\n  \"label\": \"Internal name field\",\r\n  \"description\": \"Field corresponding to internal name\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"name\"\r\n},\r\n{\r\n  \"name\": \"limit\",\r\n  \"label\": \"Max results\",\r\n  \"description\": \"Maximum dropdown values to be shown\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n \"defaultValue\": \"25\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_5103bed743227910b8cf8beeaab8f20f","api_name":"sn_uib_on_call.Get dropdown values for typeahead","mutates_server_data":"false","name":"Get dropdown values for typeahead","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Name of the table (class)\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get class exclusion reason info","sys_updated_on":"2024-03-13 22:34:01","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"512f5287936442101eddfa60748918d6","sys_updated_by":"admin","sys_created_on":"2024-02-28 20:19:14","sys_name":"Multisource - Get class exclusion reason info","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tvar deniedClassList = util.getMultisourceDenyList();\n\tvar excludedReasonInfo = util.getClassExclusionReasonInfo(input.table, deniedClassList);\n\treturn excludedReasonInfo;\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"table\",\r\n  \"label\": \"table\",\r\n  \"description\": \"Name of the table (class)\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"String\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_512f5287936442101eddfa60748918d6","api_name":"sn_cmdb_ws.Multisource - Get class exclusion reason info","mutates_server_data":"false","name":"Multisource - Get class exclusion reason info","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Content Block Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ID for the Plugin Installer Content Block\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Plugin Installation Progress ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Progress ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-05-31 13:26:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"51664acdeb990110d05213b347522892","sys_updated_by":"admin","sys_created_on":"2022-01-25 11:27:46","sys_name":"ACE Plugin Progress Tracker","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.content_block_id) return [];\n    var util = new sn_ace.ACEAppContextUtil();\n    var context = util.getContentBlockContext(input.content_block_id) || {};\n    context.progress_id = input.progress_id || '';\n    var status = util.setContentBlockContext(input.content_block_id, context);\n    return {\n        status: status,\n        message: 'Progress ID updated on Content Block'\n    };\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"content_block_id\",\r\n      \"label\": \"Content Block Id\",\r\n      \"description\": \"ID for the Plugin Installer Content Block\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n{\r\n      \"name\": \"progress_id\",\r\n      \"label\": \"Progress ID\",\r\n      \"description\": \"Plugin Installation Progress ID\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_51664acdeb990110d05213b347522892","api_name":"sn_ace.ACE Plugin Progress Tracker","mutates_server_data":"true","name":"ACE Plugin Progress Tracker","output_schema":"","sys_policy":""},{"private":"true","required_translations":"","batch_exclude":"false","description":"Transforms a GlideDomain_Query of user and presence info into a simpler flattened structure. Not exposed to UIB - only used within a composite broker.","sys_updated_on":"2024-04-19 15:19:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"51782d3753211010cbc2ddeeff7b12d6","sys_updated_by":"admin","sys_created_on":"2020-06-28 19:57:24","sys_name":"GlideDomain User Query Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"27","sys_tags":"","script":"function transform(input) {\n\tvar envLogger = gs;\n\n\tfunction _safelyGet(obj, dotPath) {\n\t\tif (typeof(obj) !== \"object\" || typeof(dotPath) !== \"string\") {\n\t\t\tenvLogger.error(\"User transform error: invalid input \" + obj, dotPath);\n\t\t\treturn null;\n\t\t}\n\t\tvar foundProp = obj;\n\t\tvar path = dotPath.split(\".\");\n\t\tfor (var i = 0; i < path.length; i++) {\n\t\t\tif (!foundProp[path[i]])\n\t\t\t\treturn null;\n\n\t\t\tfoundProp = foundProp[path[i]];\n\t\t}\n\t\treturn foundProp;\n\t}\n\tvar result = {\n\t\t\"sys_id\": null,\n\t\t\"userName\": null,\n\t\t\"fullName\": null,\n\t\t\"imageSrc\": null,\n\t\t\"presence\": null,\n\t\t\"timeZone\": null\n\t};\n\tvar userRecord = _safelyGet(input, \"userRecord.data.GlideDomain_Query.userInfo\");\n\tif (!userRecord) {\n\t\tresult.error = \"User transform error: invalid input param: \" + JSON.stringify(input);\n\t\treturn result;\n\t}\n\tresult.sys_id = userRecord.sys_id;\n\tresult.userName = userRecord.userName;\n\tresult.fullName = userRecord.fullName;\n\tresult.avatar = userRecord.avatar;\n\tresult.avatarPath = userRecord.avatarPath;\n\tresult.imageSrc = userRecord.avatarPath;\n\tresult.initials = userRecord.initials;\n\tresult.timeZone = userRecord.timeZone;\n\tfunction getPresenceRecord(_userRecord) {\n\t\tvar presenceRecord = _safelyGet(_userRecord, \"_query.GlideRecord_Query.sys_user_presence._results.0\");\n\t\tif(presenceRecord && !gs.nil(presenceRecord.sys_updated_on.value)) {\n\t\t\treturn presenceRecord;\n\t\t}\n\t\tgr = new GlideRecord('sys_user_presence');\n\t\tvar presence = gr.get('user', _userRecord.sys_id);\n\t\tif(!presence) return null;\n\t\treturn {\n\t\t\tsys_updated_on: {\n\t\t\t\tvalue: gr.sys_updated_on\n\t\t\t},\n\t\t};\n\t}\n\n\tvar presenceRecord = getPresenceRecord(userRecord);\n\tif (presenceRecord && !gs.nil(presenceRecord.sys_updated_on.value)) {\n\t\tvar t = new GlideDateTime(presenceRecord.sys_updated_on.value);\n\t\tvar now = new GlideDateTime();\n\t\tvar diff = GlideDateTime.subtract(t, now);\n\t\tvar el = diff.getRaw().getTime() / 1000;\n\t\tvar isPresent = el < 90;  // ninety second window\n\t\tresult.presence = isPresent ? \"available\" : \"offline\";\n\t}\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"userRecord\",\r\n  \"label\": \"User Record\",\r\n  \"description\": \"User record from GlideDomain GraphQL query\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"object\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a6932bf304312210559073c06a02f796","value":"a6932bf304312210559073c06a02f796"},"sys_update_name":"sys_ux_data_broker_transform_51782d3753211010cbc2ddeeff7b12d6","api_name":"global.GlideDomain User Query Transform","mutates_server_data":"false","name":"GlideDomain User Query Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Article ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table Name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Check whether the article created by Gen AI is modified or not.","sys_updated_on":"2023-10-19 09:05:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"51bb53c0844a3110f877112e37712b38","sys_updated_by":"admin","sys_created_on":"2023-10-19 10:22:52","sys_name":"Check article status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var isHidden = true;\n\n    if (input.tableName == \"kb_knowledge\" || input.tableName.startsWith(\"kb_template\") || input.tableName.startsWith(\"u_kb_template\")) {\n    \tif (GlidePluginManager.isActive(\"sn_km_gen_ai\")) {\n            isHidden = false;\n\n            var articleModified = new global.GlobalKnowledgeUtilSNC().isArticleModified(input.articleId);\n            if (articleModified == \"-1\" || articleModified == \"true\")\n                isHidden = true;\n        }\n    }\n    return {\n        hidden: isHidden\n    };\n\n\n}","acl_failure_result":"","props":"[ \n{\n        \"name\": \"tableName\",\n        \"label\": \"Table Name\",\n        \"description\": \"Table Name\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"kb_knowledge\"\n    },\n   {\n       \"name\": \"articleId\",\n        \"label\": \"Article ID\",\n        \"description\": \"Article ID\",\n        \"readOnly\": false,\n         \"fieldType\": \"string\",\n         \"mandatory\": true,\n         \"defaultValue\": \"c85cd2519f77230088aebde8132e70c2\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_51bb53c0844a3110f877112e37712b38","api_name":"sn_km_uib.Check article status","mutates_server_data":"false","name":"Check article status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Problem Model\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Problem State\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker for getting info for displaying in the Stepper","sys_updated_on":"2024-08-12 12:58:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5251a8507741021013d4aeb4bb5a9978","sys_updated_by":"admin","sys_created_on":"2024-03-15 18:37:21","sys_name":"Problem Model States","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54a81ee10b11301039dd818393673a5c","value":"54a81ee10b11301039dd818393673a5c"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n\tif (!input.problemState)\n\t\treturn [];\n\n\t\n\tvar currentStates = [];\n\tvar order = 0;\n\tif (input.problemModel) {\n\t\tvar prb_model = new GlideRecordSecure('prb_model');\n\t\tif (prb_model.get(input.problemModel)) {\n\t\t\tvar modelStates = new global.ProblemModel(prb_model).getStates();\n\t\t\twhile(modelStates.next()) {\n\t\t\t\tvar modelChoice = {\n\t\t\t\t\t\"value\": modelStates.getValue(\"state_value\"),\n\t\t\t\t\t\"label\": modelStates.getDisplayValue(\"state_label\"),\n\t\t\t\t\t\"order\": order++\n\t\t\t\t};\n\t\t\t\tcurrentStates.push(modelChoice);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tvar blankModel = {\n\t\t\ttable_name: \"problem\",\n\t\t\tstate_field: \"state\",\n\t\t\tgetValue: function(name) { return this[name];}\n\t\t};\n\t\tvar choiceGr = new global.STTRMStateChoiceUtil(blankModel)._getSysChoices();\n\t\twhile (choiceGr.next()) {\n\t\t\tif (choiceGr.getValue(\"inactive\") === \"1\")\n\t\t\t\tcontinue;\n\n\t\t\tvar prbChoice = {\n\t\t\t\t\"value\": choiceGr.getValue('value'),\n\t\t\t\t\"label\": choiceGr.getValue('label'),\n\t\t\t\t\"order\": order++\n\t\t\t};\n\t\t\tcurrentStates.push(prbChoice);\n\t\t}\n\t}\n\n\tvar stepperData = {};\n\tvar beforeState = true;\n\tstepperData.steps = [];\n\tfor (var i = 0; i < currentStates.length; i++) {\n\t\tvar step = {};\n\t\tstep.id = 'step' + (i+1);\n\t\tstep.label = currentStates[i].label;\n\t\tif (input.problemState + '' === currentStates[i].value + '') {\n\t\t\tstep.progress = 'partial';\n\t\t\tstepperData.selected = step.id;\n\t\t\tbeforeState = false;\n\t\t} else {\n\t\t\tif (beforeState)\n\t\t\t\tstep.progress = 'done';\n\t\t\telse\n\t\t\t\tstep.progress = 'none';\n\t\t}\n\n\t\tstepperData.steps.push(step);\n\t}\n\treturn stepperData;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"problemModel\",\r\n  \"label\": \"Problem Model\",\r\n  \"description\": \"Problem Model\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"problemState\",\r\n  \"label\": \"Problem State\",\r\n  \"description\": \"Problem State\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54a81ee10b11301039dd818393673a5c","value":"54a81ee10b11301039dd818393673a5c"},"sys_update_name":"sys_ux_data_broker_transform_5251a8507741021013d4aeb4bb5a9978","api_name":"sn_sow_problem.Problem Model States","mutates_server_data":"false","name":"Problem Model States","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-10-02 12:24:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"52d1262c53521110532cddeeff7b12a6","sys_updated_by":"admin","sys_created_on":"2022-09-29 13:19:35","sys_name":"Risk Evaluation - Change","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.table || !input.sysId)\n        return {\n            error: gs.getMessage('ERROR table: {0} sysId: {1}', [input.table, input.sysId])\n        };\n\n    var changeGr = new GlideRecordSecure(input.table);\n    if (changeGr.get(input.sysId))\n        return new ChangeRisk(changeGr).getRiskActions();\n\n    return {};\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_update_name":"sys_ux_data_broker_transform_52d1262c53521110532cddeeff7b12a6","api_name":"sn_sow_chg.Risk Evaluation - Change","mutates_server_data":"false","name":"Risk Evaluation - Change","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Rota id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Rota sys id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-22 06:19:15","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"534b5992532a31105dd2ddeeff7b1208","sys_updated_by":"admin","sys_created_on":"2023-11-18 21:20:26","sys_name":"Get standard escalation policy details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    if (!input.rotaId) return {};\n\n    var onCallEscalationPolicyUIBUtils = new sn_uib_on_call.OnCallEscalationPolicyUIBUtils();\n    return onCallEscalationPolicyUIBUtils.getStandardEscalationPolicyDetails(input.rotaId);\n\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t\t\"name\": \"rotaId\",\r\n\t\t\"label\": \"Rota id\",\r\n\t\t\"description\": \"Rota sys id\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true,\r\n\t\t\"defaultValue\": \"\"\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_534b5992532a31105dd2ddeeff7b1208","api_name":"sn_uib_on_call.Get standard escalation policy details","mutates_server_data":"false","name":"Get standard escalation policy details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Lifecycle Task ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Approves a lifecycle task","sys_updated_on":"2023-09-13 04:35:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"535d6aacb7953110c44580408e11a9c5","sys_updated_by":"maint","sys_created_on":"2023-09-12 13:39:54","sys_name":"Approve Lifecycle Task","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    var wrapperFn = function() {\n        var uiProxy = new sn_cmdb_ws.CMDBWsDMTaskUIProxy();\n        return uiProxy.approveLifeCycleTask(input.taskId);\n    };\n\n    var DM = new CMDBWsDMConstants();\n    return new CMDBWsDataBrokerHandler().execute(DM.DM_ERROR_SOURCE, \"Approve task record\", wrapperFn);\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"taskId\",\r\n  \"label\": \"Task ID\",\r\n  \"description\": \"Lifecycle Task ID\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_535d6aacb7953110c44580408e11a9c5","api_name":"sn_cmdb_ws.Approve Lifecycle Task","mutates_server_data":"false","name":"Approve Lifecycle Task","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-04-02 21:50:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"53ab4b9977e13110b6a0cf6dbd5a9911","sys_updated_by":"admin","sys_created_on":"2023-09-27 09:58:21","sys_name":"Now Assist Bot Card Util","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"34","sys_tags":"","script":"function transform() {\n\tvar showNLUCard = GlidePluginManager.isActive('com.glide.cs.chatbot');\n    var showNowAssistCard = GlidePluginManager.isActive('com.glide.cs.genai');\n    var isGuidedSetupTurnedOn = gs.getProperty('sn_nowassist_va.setup_updated', 'false') == 'true';\n\n    return {\n\t\t\"showNLUCard\": showNLUCard,\n        \"showNowAssistCard\": showNowAssistCard,\n        \"isGuidedSetupTurnedOn\": isGuidedSetupTurnedOn,\n    };\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_53ab4b9977e13110b6a0cf6dbd5a9911","api_name":"sn_oe_sfs.Now Assist Bot Card Util","mutates_server_data":"false","name":"Now Assist Bot Card Util","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table to look up\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"True up the table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Resolves the correct table of a reference field that may point to a parent table like task. tale to resolve specified in a CSV in page property route_parent_tables.","sys_updated_on":"2022-05-09 18:03:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"53f70741b7a32010415d6c91de11a9c0","sys_updated_by":"admin","sys_created_on":"2021-04-14 20:20:11","sys_name":"Resolve route parent tables","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b6278788c342111082c603db7940dd4f","value":"b6278788c342111082c603db7940dd4f"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) { \n    var empty = '', \n\t\ttable = input.table || empty, \n\t\tsysId = input.sysId || empty, \n\t\ttrueTable = empty, \n\t\ttrueTitle = empty, \n\t\tgr = undefined; \n \n    if (!gs.nil(table) && !gs.nil(sysId)) { \n        gr = new GlideRecordSecure(table); \n        if (gr.get(sysId)) { \n            trueTable = gr.getRecordClassName(); \n            trueTitle = gr.getDisplayValue(); \n        } \n    } \n \n    return { \n        table: trueTable, \n        sysId: sysId, \n        title: trueTitle\n    }; \n} ","acl_failure_result":"","props":"[\n\t{\n\t\t\"name\": \"table\",\n\t\t\"label\": \"Table\",\n\t\t\"description\": \"Table to look up\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"table_name\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"sysId\",\n\t\t\"label\": \"Sys Id\",\n\t\t\"description\": \"True up the table\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true\n\t} \n] ","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b6278788c342111082c603db7940dd4f","value":"b6278788c342111082c603db7940dd4f"},"sys_update_name":"sys_ux_data_broker_transform_53f70741b7a32010415d6c91de11a9c0","api_name":"sn_uib_base_aw.Resolve route parent tables","mutates_server_data":"false","name":"Resolve route parent tables","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-25 18:46:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"54607bec73d071103f3cc3ed8ff6a7b3","sys_updated_by":"admin","sys_created_on":"2023-07-25 01:19:25","sys_name":"De-Duplication Template Retire","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar templateId = input.templateSysId;\n\n\tresult = sn_cmdb.DuplicateTemplate.retireTemplate(templateId);\n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_54607bec73d071103f3cc3ed8ff6a7b3","api_name":"sn_cmdb_ws.De-Duplication Template Retire","mutates_server_data":"true","name":"De-Duplication Template Retire","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Comma separated list of sys ids. If left empty then all permanent error jobs in sys_trigger will be deleted.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Ids\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Deletes permanent error scheduled jobs from sys_trigger","sys_updated_on":"2024-06-03 18:15:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"54efc8fc432a421073e946c8dbb8f260","sys_updated_by":"admin","sys_created_on":"2024-05-30 20:11:56","sys_name":"Delete Permanent Error Scheduled Jobs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/74fdcd7a437121109fa864cec7b8f27b","value":"74fdcd7a437121109fa864cec7b8f27b"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    try {\n        var sysIdsInput = input.sys_ids;\n        var utils = new AsyncDashboardUtils();\n\t\t\n        if (sysIdsInput == \"\") {\n            var sysIds = [];\n\n            var permanentErrorRecords = utils.getPermanentErrorJobs();\n\n            while (permanentErrorRecords.next()) {\n                sysIds.push(permanentErrorRecords.getUniqueValue());\n            }\n\n            sysIds.forEach(function(sys_id) {\n                utils.deleteRecord(sys_id);\n            });\n        } else {\n            var sysIdsInputArr = sysIdsInput.split(\",\");\n            sysIdsInputArr.forEach(function(sys_id) {\n                utils.deleteRecord(sys_id);\n            });\n        }\n    } catch (ex) {\n        gs.error(\"Error deleting permanent error scheduled jobs: \" + ex);\n    }\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"sys_ids\",\r\n      \"label\": \"Sys Ids\",\r\n      \"description\": \"Comma separated list of sys ids. If left empty then all permanent error jobs in sys_trigger will be deleted.\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/74fdcd7a437121109fa864cec7b8f27b","value":"74fdcd7a437121109fa864cec7b8f27b"},"sys_update_name":"sys_ux_data_broker_transform_54efc8fc432a421073e946c8dbb8f260","api_name":"sn_async_dashboard.Delete Permanent Error Scheduled Jobs","mutates_server_data":"true","name":"Delete Permanent Error Scheduled Jobs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Activity Field List Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Experience Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Properties for the Activity UI Macroponent content\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Source path in activityProperties field list content\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-11-02 03:14:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"552b0e3ec3313010948404186e40dd3e","sys_updated_by":"admin","sys_created_on":"2021-08-09 22:41:20","sys_name":"Playbook Experience Field List Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_created_by":"admin","sys_mod_count":"23","sys_tags":"","script":"function transform(input) {\n    var PLAYBOOK_FIELD_LIST_EMPTY = gs.getMessage(\"[Empty]\");\n\n    function convertNullToEmptyString(value) {\n        return value === null ? \"\" : value;\n    }\n\n    function convertElementInfo(info) {\n        var label = info.label || \"\";\n        var value = info.value || \"\";\n        var displayValue = info.displayValue || \"\";\n        var type = info.type || \"string\";\n        var reference = info.reference;\n\n        var converted = {\n            label: label,\n            isHTMLType: false\n        };\n\n        //If the value being passed in is PLAYBOOK_FIELD_LIST_EMPTY, return that\n        //string regardless of type\n        if (value === PLAYBOOK_FIELD_LIST_EMPTY) {\n            converted.value = {\n                type: \"string\",\n                value: displayValue,\n            };\n            return converted;\n        }\n\n        // 'now-label-value-stacked' won't render and fails silently if any of the\n        // 'value' properties we pass to is 'null', thus needing to convert all\n        // 'null' to empty string;\n        switch (type) {\n            case \"reference\":\n                converted.value = {\n                    type: \"text-link\",\n                    label: convertNullToEmptyString(displayValue),\n                    href: \"javascript:void(0)\",\n                    table: reference,\n                    sysId: value,\n                    playbookTextLinkRecord: {\n                        table: reference,\n                        sysId: value,\n                    },\n                };\n                break;\n            case \"url\":\n                converted.value = {\n                    type: \"text-link\",\n                    label: displayValue,\n                    href: value || \"\",\n                    opensWindow: true,\n                };\n                break;\n            case \"html\":\n            case \"translated_html\":\n                converted.value = {\n                    type: \"html\",\n                    value: convertNullToEmptyString(value),\n                };\n                converted.isHTMLType = true;\n                break;\n            default:\n                // Defaults to 'string' type\n                converted.value = convertNullToEmptyString(displayValue);\n        }\n\n        return converted;\n    }\n\n    var experienceProperties = input.experienceProperties;\n    var fieldListProperties = JSON.parse(input.fieldListProperties);\n    var htmlValues = [];\n\n    var reduceFieldListProperties = function(result, prop) {\n\t\tvar trimmedProp = prop.trim();\n        if (!experienceProperties.hasOwnProperty(trimmedProp)) return result;\n\n        var relatedProperties =\n            (experienceProperties[trimmedProp] && experienceProperties[trimmedProp].relatedProperties) || [];\n        if (!Array.isArray(relatedProperties) || !relatedProperties.length)\n            return result;\n\n        result[trimmedProp] = relatedProperties.map(function(prop) {\n            var elementData = prop.elementData;\n            var info = convertElementInfo({\n                label: prop.label || \"\",\n                value: prop.value || PLAYBOOK_FIELD_LIST_EMPTY,\n                displayValue: prop.displayValue || PLAYBOOK_FIELD_LIST_EMPTY,\n                type: elementData.type || \"string\",\n                reference: elementData.reference,\n            });\n\n            if (info.isHTMLType) htmlValues.push(prop.value);\n\n            return info;\n        });\n\n        return result;\n    };\n\n    var fieldListItems = fieldListProperties.reduce(\n        reduceFieldListProperties, {}\n    );\n\n    return {\n        fieldListItems: fieldListItems,\n        htmlValues: htmlValues\n    };\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"experienceProperties\",\n    \"label\": \"Experience Properties\",\n    \"description\": \"Properties for the Activity UI Macroponent content\",\n    \"readOnly\": false,\n    \"fieldType\": \"json\",\n    \"mandatory\": true\n  },\n  {\n    \"name\": \"fieldListProperties\",\n    \"label\": \"Activity Field List Properties\",\n    \"description\": \"Source path in activityProperties field list content\",\n    \"readOnly\": false,\n    \"fieldType\": \"array\",\n    \"mandatory\": true,\n    \"defaultValue\": \"[\\\"record_fields\\\"]\"\n  }\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_update_name":"sys_ux_data_broker_transform_552b0e3ec3313010948404186e40dd3e","api_name":"sn_playbook_exp.Playbook Experience Field List Properties","mutates_server_data":"false","name":"Playbook Experience Field List Properties","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table to look up\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Retrieves label-id-sublabel item objects for the selected table","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"552dd79b8f2f2010960c53ac37bdeea1","sys_updated_by":"admin","sys_created_on":"2021-04-21 21:33:21","sys_name":"Get Table Fields","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"// returns table column names\nfunction transform(input) {\n\tvar results = [];\n\t\n\tif (!input.table) {\n\t\treturn results;\n\t}\n\t\n\tvar fields = new GlideRecord('sys_dictionary');\n\tfields.addQuery('name', input.table);\n\tfields.addEncodedQuery('internal_type!=collection^ORinternal_type=NULL');\n\tfields.query();\n\n\twhile(fields.next())\n\t{\n\t\tvar id = fields.element.toString();\n\t\tresults.push({\n\t\t\t\"label\": fields.column_label.getDisplayValue().toString(),\n\t\t\t\"id\": id,\n\t\t\t\"sublabel\": id\n\t\t});\n\t}\n\t\n\tresults.sort(function(a, b) {\n\t\ta = a.label.toUpperCase();\n\t\tb = b.label.toUpperCase();\n\t\treturn (a < b) ? -1 : (a > b) ? 1 : 0;\n\t});\n\t\n\treturn results;\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"table_name\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_552dd79b8f2f2010960c53ac37bdeea1","api_name":"sn_cmdb_ws.Get Table Fields","mutates_server_data":"false","name":"Get Table Fields","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Conditions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Current page\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Field to sort rows by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Look up search conditions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Maximum number of rows to be rendered. When there is pagination component on the page, this property applies on a per-page basis.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Number of displayed rows\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Order by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Query category\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Read replica query category\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search term\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sort type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sort type (asc/desc)\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"String to filter results by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The current page index. Page 0 corresponds to the first page of data.\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker used for querying teams for the SOW Team management page","sys_updated_on":"2023-11-06 03:28:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"55557ceceb1af110ea6e4ee5b5522892","sys_updated_by":"admin","sys_created_on":"2023-10-31 21:50:11","sys_name":"SOW Team management - Lookup Teams","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\treturn new sn_sow.SOWTeamManagement().getTeams(\n\t\tinput.encodedQuery,\n\t\tinput.searchTerm,\n\t\tinput.orderBy,\n\t\tinput.sortType,\n\t\tinput.rowLimit,\n\t\tinput.currentPage,\n\t\tinput.queryCategory\n\t\t);\n}","acl_failure_result":"{\r\n   \"error\": true,   \r\n   \"message\":\"User does not have required ACL to perform this action.\"\r\n}","props":"[\r\n  {\r\n    \"name\": \"encodedQuery\",\r\n    \"label\": \"Conditions\",\r\n    \"description\": \"Look up search conditions\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"condition_string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\",\r\n    \"typeMetadata\": {\r\n      \"table\": \"sys_user_group\"\r\n    }\r\n  },\r\n  {\r\n    \"name\": \"searchTerm\",\r\n    \"label\": \"Search term\",\r\n    \"description\": \"String to filter results by\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"orderBy\",\r\n    \"label\": \"Order by\",\r\n    \"description\": \"Field to sort rows by\",\r\n    \"readOnly\": true,\r\n    \"fieldType\": \"field\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"name\",\r\n    \"typeMetadata\": {\r\n      \"table\": \"sys_user_group\"\r\n    }\r\n  },\r\n  {\r\n    \"name\": \"sortType\",\r\n    \"label\": \"Sort type (asc/desc)\",\r\n    \"description\": \"Sort type\",\r\n    \"readOnly\": true,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"asc\",\r\n    \"typeMetadata\": {\r\n      \"choices\": [\r\n        {\r\n          \"label\": \"a to z\",\r\n          \"value\": \"asc\"\r\n        },\r\n        {\r\n          \"label\": \"z to a\",\r\n          \"value\": \"desc\"\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  {\r\n    \"name\": \"rowLimit\",\r\n    \"label\": \"Number of displayed rows\",\r\n    \"description\": \"Maximum number of rows to be rendered. When there is pagination component on the page, this property applies on a per-page basis.\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": false,\r\n    \"fieldType\": \"number\",\r\n    \"defaultValue\": 12\r\n  },\r\n  {\r\n    \"name\": \"currentPage\",\r\n    \"label\": \"Current page\",\r\n    \"description\": \"The current page index. Page 0 corresponds to the first page of data.\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": false,\r\n    \"fieldType\": \"number\",\r\n    \"defaultValue\": 0\r\n  },\r\n  {\r\n    \"name\": \"queryCategory\",\r\n    \"label\": \"Query category\",\r\n    \"description\": \"Read replica query category\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sys_ux_data_broker_transform_55557ceceb1af110ea6e4ee5b5522892","api_name":"sn_sow.SOW Team management - Lookup Teams","mutates_server_data":"false","name":"SOW Team management - Lookup Teams","output_schema":"{\r\n  \"_results\": [\r\n    {\r\n      \"_row_data\": {\r\n        \"displayValue\": \"Team Display Value\",\r\n        \"uniqueValue\": \"019ad92ec7230010393d265c95c260dd\"\r\n      },\r\n      \"name\": {\r\n        \"value\": \"Team Name\",\r\n        \"displayValue\": \"Team Name\"\r\n      }\r\n    }\r\n  ],\r\n  \"_rowCount\": 0\r\n}","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Comma separated list of Plugin IDs\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Plugin IDs\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Checks for the installation status of multiple plugins.","sys_updated_on":"2023-12-27 19:22:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"55ada0984f133110a7ba8ed0b1ce0bcd","sys_updated_by":"admin","sys_created_on":"2023-12-19 19:40:34","sys_name":"Check optional plugins status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n\treturn input.pluginIds.split(\",\").reduce(function(prev, pluginId) {\n\t\tprev[pluginId] = {\n\t\t\tid: pluginId,\n\t\t\tactive: GlidePluginManager.isActive(pluginId)\n\t\t};\n\t\treturn prev;\n\t}, {});\n}","acl_failure_result":"","props":"[ \r\n{\r\n        \"name\": \"pluginIds\",\r\n        \"label\": \"Plugin IDs\",\r\n        \"description\": \"Comma separated list of Plugin IDs\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_55ada0984f133110a7ba8ed0b1ce0bcd","api_name":"sn_sow_itsm_common.Check optional plugins status","mutates_server_data":"false","name":"Check optional plugins status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Record Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record Table Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-05-22 10:08:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5635ab3687f26110a7e64006dabb357c","sys_updated_by":"admin","sys_created_on":"2023-05-18 10:50:04","sys_name":"Can User Send SMS","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","sys_mod_count":"13","sys_tags":"","script":"function transform(input) {\n\n    if (!input.tableName || !input.recordSysId || !input.userId || !GlidePluginManager.isActive('com.snc.notify'))\n        return false;\n\t\t\n    var notifyUtil = new global.NotifyUtil();\n    var SMS = \"sms\";\n    var isTelephonySupported = false;\n    var isValidNumberAvailable = false;\n    var notifyNumbersAndProviders = notifyUtil.getOrderedListOfNotifyNumbersAndProviders(input.tableName, input.recordSysId);\n    var orderedNumbersAndProviders = notifyNumbersAndProviders.orderedNumbersAndProviders;\n    orderedNumbersAndProviders.forEach(function(provider) {\n        if (provider.type === 'number')\n            isTelephonySupported = true;\n    });\n\n    var validNumbers = notifyUtil.getUniquePhoneNumbersForUsersAndGroups([], [input.userId], [], SMS);\n    isValidNumberAvailable = validNumbers.length > 0 ? true : false;\n    return isValidNumberAvailable && isTelephonySupported;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"recordSysId\",\n    \"label\": \"Record SysId\",\n    \"description\": \"Record Sys Id\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"tableName\",\n    \"label\": \"Record Table Name\",\n    \"description\": \"Record Table Name\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"userId\",\n    \"label\": \"User Id\",\n    \"description\": \"User Id\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sys_ux_data_broker_transform_5635ab3687f26110a7e64006dabb357c","api_name":"sn_sow.Can User Send SMS","mutates_server_data":"false","name":"Can User Send SMS","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ACE Page sys_id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-01-30 16:35:09","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"56d7983a53910110a86bddeeff7b12b5","sys_updated_by":"admin","sys_created_on":"2022-01-30 14:24:26","sys_name":"Get details for page deletion","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var uxAppRouteId = input.uxAppRouteId;\n    if (!uxAppRouteId) {\n        return {};\n    }\n\n    var uxAppRouteGr = new GlideRecord('sys_ux_app_route');\n    if (uxAppRouteGr.get(uxAppRouteId)) {\n        var screenCollectionId = uxAppRouteGr.getValue('screen_type');\n        var uxAppConfigId = uxAppRouteGr.getValue('app_config');\n    }\n\t\n    return {\n        uxAppConfigId: uxAppConfigId,\n        screenCollectionId: screenCollectionId\n    };\n}","acl_failure_result":"","props":"[\n {\n    \"name\": \"uxAppRouteId\",\n    \"label\": \"ACE Page sys_id\",\n    \"description\": \"ACE Page sys_id\",\n    \"readOnly\": false,\n    \"mandatory\": true,\n    \"defaultValue\": \"\",\n    \"fieldType\": \"string\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_56d7983a53910110a86bddeeff7b12b5","api_name":"sn_ace.Get details for page deletion","mutates_server_data":"true","name":"Get details for page deletion","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-07-02 06:31:22","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"56ef838b9f430210afb85c1eca0a1c47","sys_updated_by":"admin","sys_created_on":"2024-07-02 06:29:15","sys_name":"Check if BU Plugin Installed","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform() {\n    var util = new sn_nowassist_admin.NowAdminAssistUtil();\n    return util.isBuPluginInstalled();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_56ef838b9f430210afb85c1eca0a1c47","api_name":"sn_nowassist_admin.Check if BU Plugin Installed","mutates_server_data":"false","name":"Check if BU Plugin Installed","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template Run Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-27 22:46:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5741abe2734031103f3cc3ed8ff6a7f8","sys_updated_by":"admin","sys_created_on":"2023-07-18 19:05:41","sys_name":"De-Duplication Template Request Cancellation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar templateRunId = input.templateRunSysId;\n    if(templateRunId == '') {\n\t\treturn result;\n\t}\n\tresult = sn_cmdb.DuplicateTemplate.requestCancellation(templateRunId); \n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateRunSysId\",\r\n      \"label\": \"Template Run Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_5741abe2734031103f3cc3ed8ff6a7f8","api_name":"sn_cmdb_ws.De-Duplication Template Request Cancellation","mutates_server_data":"true","name":"De-Duplication Template Request Cancellation","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Encoded query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Encoded query returned from base aggregate\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"578dedff53622110b87eddeeff7b1247","sys_updated_by":"admin","sys_created_on":"2023-05-08 18:26:08","sys_name":"Transform base aggregate encoded query","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"23","sys_tags":"","script":"function transform(input) {\n\tvar resultObj = {};\n\tvar query = input.query;\n\t\n\tif (query) {\n\t\tvar util = new sn_cmdb_ws.CMDBWorkspaceUtil();\n\t\tvar parsedQueryObj = util.parseBaseAggEncodedQuery(query);\n\t\tvar chartId = parsedQueryObj.chartId;\n\t\tvar tablesFromQuery = parsedQueryObj.tablesFromQuery;\n\t\tutil.addBaseAggDataGroupByTableDetails(chartId, tablesFromQuery);\n\t\tvar tableSysIds = Object.keys(tablesFromQuery);\n\n\t\tif (chartId == util.SUB_CATEGORY.RELATED_RECORDS && tableSysIds.length) {\n\t\t\tvar tableInfo = tablesFromQuery[tableSysIds[0]];\n\t\t\tvar tableName = tableInfo.name;\n\t\t\tvar tableLabel = tableInfo.label;\n\t\t\tvar relEntryObj = util.getCMDBRelatedEntryRefFields(tableName);\n\n\t\t\tresultObj[tableName] = {};\n\t\t\tresultObj[tableName].label = tableLabel;\n\t\t\tif (relEntryObj[tableName] && relEntryObj[tableName].length > 0) {\n\t\t\t\tresultObj[tableName].encodedQuery = util.buildCustomEncodedQuery(relEntryObj[tableName], util.OPERATORS.ISEMPTY, null, util.OPERATORS.OR);\n\t\t\t}\n\t\t} else if (chartId == util.SUB_CATEGORY.STALE_RECORDS) {\n\t\t\tresultObj[util.TABLES.CMDB_HEALTH_RESULT] = {\n\t\t\t\tlabel: gs.getMessage('Stale CIs'),\n\t\t\t\tencodedQuery: [util.STALENESS_METRIC_QUERY, util.rebuildTableCondition(util.COLS.CLASS_NAME, tablesFromQuery)].join('^')\n\t\t\t};\n\t\t} else if (chartId == util.SUB_CATEGORY.DUPLICATE_RECORDS) {\n\t\t\tresultObj[util.TABLES.CMDB_DUPLICATE_AUDIT_RESULT] = {\n\t\t\t\tlabel: gs.getMessage('Duplicate CIs'),\n\t\t\t\tencodedQuery: util.rebuildTableCondition(util.COLS.CI_SYS_CLASS_NAME, tablesFromQuery)\n\t\t\t};\n\t\t}\n\t}\n\t\n\treturn resultObj;\n}","acl_failure_result":"","props":"[{\n  \"name\": \"query\",\n  \"label\": \"Encoded query\",\n  \"description\": \"Encoded query returned from base aggregate\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_578dedff53622110b87eddeeff7b1247","api_name":"sn_cmdb_ws.Transform base aggregate encoded query","mutates_server_data":"false","name":"Transform base aggregate encoded query","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-18 22:40:00","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5800a9b2437421101f401daa5ab8f221","sys_updated_by":"admin","sys_created_on":"2023-02-07 14:59:00","sys_name":"HermesStatus","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"27","sys_tags":"","script":"function transform(input) {\n\tvar output = {\"health\":\"\", \"bootstraps\": \"\", \"portsHealth\": \"\"};\n\tvar hd = new HermesDiagnostics();\n\toutput.health = JSON.parse(hd.getSetupStatus());\n\toutput.bootstraps = JSON.parse(hd.getBootstraps());\n\toutput.portsHealth = JSON.parse(hd.getTestPorts(false));\n\treturn output;\n}\n","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/03d4abbf04312210559073c06a02f7f9","value":"03d4abbf04312210559073c06a02f7f9"},"sys_update_name":"sys_ux_data_broker_transform_5800a9b2437421101f401daa5ab8f221","api_name":"global.HermesStatus","mutates_server_data":"false","name":"HermesStatus","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Policy ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Security Policy ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Copy an SC Policy","sys_updated_on":"2024-05-21 00:14:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5818cd6953520210f04fddeeff7b1200","sys_updated_by":"maint","sys_created_on":"2024-05-20 22:02:41","sys_name":"Duplicate SC Policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n\tif (!input.sys_id) {\n\t\treturn;\n\t}\n\tvar util = new sn_vsc.SCSecurityPolicyUtil();\n\tvar id = util.copyPolicyFromID(input.sys_id);\n\treturn id;\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"sys_id\",\r\n    \"label\": \"Policy ID\",\r\n    \"description\": \"Security Policy ID\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_5818cd6953520210f04fddeeff7b1200","api_name":"sn_vsc.Duplicate SC Policy","mutates_server_data":"false","name":"Duplicate SC Policy","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Selected Node Stable Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Service Map ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysId of the selected node\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-25 14:09:03","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5844035f37890210bec6c0f234c067b7","sys_updated_by":"admin","sys_created_on":"2024-03-25 14:09:03","sys_name":"GetHostProperties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/aef78b43372331103e9ac0f234c067c9","value":"aef78b43372331103e9ac0f234c067c9"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"// returns array of host properties of selected CI\nfunction transform(input) {\n\tvar selectedNodeSysId = input.selectedNodeSysId;\n\tvar serviceId = input.serviceId;\n\tvar selectedNodeStableId = input.selectedNodeStableId;\n\n\tvar result = {\n\t\terrors: [],\n\t\thost_properties: []\n\t};\n\n\tif (!selectedNodeSysId) {\n\t\tresult.errors.push('CI ID is missing');\n\t}\n\tif (!serviceId) {\n\t\tresult.errors.push('Service ID is missing');\n\t}\n\tif (!selectedNodeStableId) {\n\t\tresult.errors.push(\"CI Data does not contain selected ID's stable ID\");\n\t}\n\t\n\tif (!result.errors.length) {\n\t\tvar timestamp = null;\n\t\ttry{\n\t\t\tvar hostdata = new sn_app_service_ext.ApplicationServiceMapAPI().getCiHostData(selectedNodeSysId, selectedNodeStableId, timestamp, serviceId);\n\t\t\tresult.host_properties = hostdata;\n\t\t} catch(e) {\n\t\t\tresult.errors.push(e.toString());\n\t\t}\n\t}\n\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"selectedNodeSysId\",\r\n    \"label\": \"SysId of the selected node\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"SysId of the selected node\"\r\n  },\r\n  {\r\n    \"name\": \"serviceId\",\r\n    \"label\": \"Service Map ID\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Service Map ID\"\r\n  },\r\n  {\r\n   \"name\": \"selectedNodeStableId\",\r\n    \"label\": \"Selected Node Stable Id\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Selected Node Stable Id\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aef78b43372331103e9ac0f234c067c9","value":"aef78b43372331103e9ac0f234c067c9"},"sys_update_name":"sys_ux_data_broker_transform_5844035f37890210bec6c0f234c067b7","api_name":"sn_sow_em_um.GetHostProperties","mutates_server_data":"false","name":"GetHostProperties","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2022-04-18 11:26:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"588547f9537201102958ddeeff7b12e6","sys_updated_by":"admin","sys_created_on":"2022-04-12 13:28:01","sys_name":"ACE - Plugin Card Translations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n    return {\n        \"Failed\": gs.getMessage(\"Failed\"),\n        \"Updated\": gs.getMessage(\"Updated\"),\n        \"Installed\": gs.getMessage(\"Installed\"),\n        \"Update\": gs.getMessage(\"Update\"),\n        \"New\": gs.getMessage(\"New\"),\n        \"Install with demo data\": gs.getMessage(\"Choose if you want to install with demo data\"),\n        \"Updating to\": gs.getMessage(\"Updating to\"),\n        \"Test in lower envs\": gs.getMessage(\"Test in lower environments before installing in production\"),\n        \"Validate app\": gs.getMessage(\"Validate app or plugin entitlement in production\"),\n        \"Current version\": gs.getMessage(\"Current version\"),\n        \"Installing\": gs.getMessage(\"Installing...\"),\n        \"Updating\": gs.getMessage(\"Updating...\"),\n        \"Completed\": gs.getMessage(\"Completed\")\n\n    };\n\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_588547f9537201102958ddeeff7b12e6","api_name":"sn_ace.ACE - Plugin Card Translations","mutates_server_data":"false","name":"ACE - Plugin Card Translations","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Request Detail\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Verification Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-04-04 17:50:59","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"589f0771539942103919ddeeff7b12a1","sys_updated_by":"admin","sys_created_on":"2024-04-02 09:25:44","sys_name":"Pwd Reset Verify User Input","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\treturn new sn_uib_pwd_reset.PwdResetUXFVerifyProcessor().verifyUser(input.token, input.verificationId, input.reqDetail);\n\t\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },{\r\n        \"name\": \"verificationId\",\r\n        \"label\": \"Verification Id\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },{\r\n        \"name\": \"reqDetail\",\r\n        \"label\": \"Request Detail\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_589f0771539942103919ddeeff7b12a1","api_name":"sn_uib_pwd_reset.Pwd Reset Verify User Input","mutates_server_data":"true","name":"Pwd Reset Verify User Input","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2022-05-09 15:02:09","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"58bc8008530d701017caddeeff7b127a","sys_updated_by":"admin","sys_created_on":"2021-06-24 17:33:57","sys_name":"Form Builder ui privileges","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/f53f19bac362fa22ca2e93692d32f18f","value":"f53f19bac362fa22ca2e93692d32f18f"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform() {\n    var LAYOUT = 'layout';\n    var DICTIONARY = 'dictionary';\n    var CHOICES = 'choices';\n    var UI_POLICIES = 'ui_policies';\n    var FLOWS = 'flows';\n    var DATA_VIEWS = {\n        spreadsheet: 'spreadsheet',\n        schema: 'schema'\n    };\n\n    var privileges = [DATA_VIEWS.spreadsheet, DATA_VIEWS.schema];\n    var gr = new GlideRecord('sys_hub_flow');\n\n    if (gs.hasRightsTo('ui/configure.personalize_form/write', null)) {\n        privileges.push(LAYOUT);\n    }\n    if (gs.hasRightsTo('ui/configure.personalize_dictionary/write', null)) {\n        privileges.push(DICTIONARY);\n    }\n    if (gs.hasRightsTo('ui/configure.personalize_choices/write', null)) {\n        privileges.push(CHOICES);\n    }\n    if (gs.hasRightsTo('ui/configure.personalize_ui_policies/write', null)) {\n        privileges.push(UI_POLICIES);\n    }\n    if (gr.canWrite()) {\n        privileges.push(FLOWS);\n    }\n    return privileges;\n}","acl_failure_result":"","props":"[]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f53f19bac362fa22ca2e93692d32f18f","value":"f53f19bac362fa22ca2e93692d32f18f"},"sys_update_name":"sys_ux_data_broker_transform_58bc8008530d701017caddeeff7b127a","api_name":"sn_table_builder.Form Builder ui privileges","mutates_server_data":"false","name":"Form Builder ui privileges","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[{\"message\":\"Related Record Template Fields\",\"comment\":\"\"}]","batch_exclude":"false","description":"Maps the data items retrieved from related records filter to data set component values. View Template resolver block of Related Records now-data-set EVAM component. Performs following key activities -\r\na) Retreives the list of records corresponding to the filter\r\nb) Gets the valid templates based on the selected Table\r\nc) retrieves the actual view component prop-field map, prop-action map corresponding to each data-item that it gets as input from EVAM Data Fetcher\r\nd) runs over each data-item to\r\n- resolve values for view component props using prop-field lookup\r\n- translate or sanitize static values for view component prop\r\n- resolve view component action from prop-action lookup\r\ne) returns list of component with resolved propValues to render each data-item","sys_updated_on":"2021-04-09 00:39:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5910a4d787b62010629a8467a7cb0bc2","sys_updated_by":"admin","sys_created_on":"2021-03-15 00:55:04","sys_name":"Bind related records card to component","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4b2d950b87c220109bada7da0acb0baa","value":"4b2d950b87c220109bada7da0acb0baa"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n    var templateFields = input.templateFields;\n\n    if (!templateFields) {\n        return null;\n    }\n\n    var templateIds = [];\n\n    templateFields.\n    items.forEach(function(item) {\n        if (templateIds.indexOf(item.template) === -1) {\n            templateIds.push(item.template);\n        }\n    });\n\n    var templates = [];\n    var gr = new GlideRecord(\"sys_ux_composite_data_template\");\n    gr.addQuery(\"sys_id\", \"IN\", templateIds.toString());\n    gr.addActiveQuery();\n    gr.query();\n    while (gr.next()) {\n        var template = {\n            \"id\": gr.getUniqueValue(),\n            \"template\": JSON.parse(gr.getValue(\"template\"))\n        };\n\n        templates.push(template);\n    }\n\n    var result = [];\n    templateFields.\n    items.forEach(function(item) {\n        for (template in templates) {\n            templateObj = templates[template];\n            if (templateObj.id.indexOf(item.template) > -1) {\n                var propMap = {};\n                item.props.forEach(function(fieldValue) {\n                    if (fieldValue.name === 'sys_id')\n                        propMap['sysId'] = fieldValue.value;\n                    propMap[fieldValue.name] = fieldValue.value;\n                });\n\n                var templateResult = {\n                    \"template\": templateObj.template.component,\n                    \"propValues\": getPropValues(propMap, item.actions, templateObj.template)\n                };\n\n                result.push(templateResult);\n            }\n        }\n    });\n\n    function getPropValues(propMap, actions, template) {\n        var propValues = {};\n        getPropsFromFieldMappings(propValues, propMap, template.mappings);\n        getPropsFromStaticValues(propValues, template.staticValues);\n        getPropsFromActionMappings(propValues, propMap, actions, template.actionMappings);\n        return propValues;\n    }\n\n    function getPropsFromFieldMappings(result, propMap, propFieldMappings) {\n        for (var prop in propFieldMappings) {\n            if (propFieldMappings.hasOwnProperty(prop)) {\n                result[prop] = propMap[propFieldMappings[prop]] || '';\n            }\n        }\n    }\n\n    function getPropsFromStaticValues(result, staticPropValues) {\n        for (var prop in staticPropValues) {\n            if (staticPropValues.hasOwnProperty(prop)) {\n                result[prop] = getTranslatedStaticValues(staticPropValues[prop]);\n            }\n        }\n    }\n\n    function getTranslatedStaticValues(propVal) {\n        if (propVal === null || typeof propVal !== 'object')\n            return '';\n        var propValKey = GlideStringUtil.escapeHTML(propVal.key);\n        return propVal.translatable ? gs.getMessage(\"{0}\", propValKey) : propValKey;\n    }\n\n    function getPropsFromActionMappings(result, propMap, actions, actionMappings) {\n        var actionMap = {};\n        actions.forEach(function(action) {\n            actionMap[action.name] = action;\n        });\n\n        for (var prop in actionMappings) {\n\n            if (actionMappings.hasOwnProperty(prop)) {\n                var mappedActions = actionMappings[prop];\n\n                if (Array.isArray(mappedActions)) {\n                    var actionArr = [];\n                    mappedActions.forEach(function(actionName) {\n                        var processedAction = getProcessedAction(actionMap, actionName, propMap);\n                        if (processedAction)\n                            actionArr.push(processedAction);\n                    });\n                    result[prop] = actionArr;\n                } else {\n                    result[prop] = getProcessedAction(actionMap, mappedActions, propMap);\n                }\n            }\n        }\n        result['model'] = propMap;\n    }\n\n    function getProcessedAction(actionMap, actionName, propMap) {\n        try {\n            var action = actionMap[actionName] ? JSON.parse(JSON.stringify(actionMap[actionName])) : null;\n            if (action === null) {\n                return null;\n            }\n            var actionType = action.actionType;\n            if (actionType !== \"uxf_client_action\") {\n                return action;\n            }\n\n            var actionPayloadMapFieldValues = action.actionPayloadMap;\n            action.actionPayload = resolveActionPayloadDataBinding(propMap, JSON.parse(action.actionPayload), actionPayloadMapFieldValues);\n            delete(action.actionPayloadMap);\n\n            return action;\n        } catch (e) {\n            gs.logError(\"Error resolving/processing declarative action: \" + e);\n            return null;\n        }\n    }\n\n    function resolveActionPayloadDataBinding(propMap, actionPayload, actionPayloadMapFieldValues) {\n        var actionPayloadMap = {};\n        actionPayloadMapFieldValues.forEach(function(fieldValue) {\n            var key = fieldValue.name;\n            var value = fieldValue.value;\n            if (/{{.*}}/.test(value)) {\n                var dynamicBindingVar = value.match(/{{(.*)}}/)[1];\n                value = propMap[dynamicBindingVar] || '';\n            } else {\n                value = GlideStringUtil.escapeHTML(value);\n            }\n            actionPayloadMap[key] = value;\n        });\n        var resolvedActionPayload = {};\n        for (var key in actionPayload) {\n            if (actionPayload.hasOwnProperty(key)) {\n                var value = actionPayload[key];\n                if (/{{.*}}/.test(value)) {\n                    resolvedActionPayload[key] = actionPayloadMap[key] || '';\n                } else {\n                    resolvedActionPayload[key] = GlideStringUtil.escapeHTML(value);\n                }\n            }\n        }\n        return resolvedActionPayload;\n    }\n\n    return {\n        all_actions: templateFields.all_actions,\n        selected_filter: templateFields.selected_filter,\n        items: result,\n        available_filters: templateFields.filters\n    };\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"templateFields\",\r\n        \"label\": \"Related Record Template Fields\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4b2d950b87c220109bada7da0acb0baa","value":"4b2d950b87c220109bada7da0acb0baa"},"sys_update_name":"sys_ux_data_broker_transform_5910a4d787b62010629a8467a7cb0bc2","api_name":"sn_uib_aw_addon.Bind related records card to component","mutates_server_data":"false","name":"Bind related records card to component","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys_id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Prepare the summary of the policy","sys_updated_on":"2024-06-15 01:52:19","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"59a17ab64395021039f15dc36ab8f282","sys_updated_by":"admin","sys_created_on":"2024-04-05 09:59:03","sys_name":"Get policy summary","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"45","sys_tags":"","script":"function transform(input) {\n    var id = input && input.sys_id;\n    var logic_types = [{\n        \"id\": \"all\",\n        \"label\": gs.getMessage(\"All conditions must be met to trigger this policy\")\n    }, {\n        \"id\": \"any\",\n        \"label\": gs.getMessage(\"Any of the conditions must be met to trigger this policy\")\n    }];\n    var resp = {\n        \"when_to_run\": \"N/A\",\n        \"triggers\": [],\n        \"condition_logic\": [],\n        \"condition_logic_types\": logic_types,\n        \"conditions\": [],\n        \"notification\": \"N/A\",\n        \"should_disable_condition_logic_dropdown\": false\n    };\n\n    var policyManager = new sn_vsc.SecurityPoliciesManager();\n    policyManager.updatePolicyConfigureValue(id);\n\n    if (!id) return resp;\n    var gr = new GlideRecord(\"sn_vsc_security_policy\");\n    if (gr.get(id)) {\n\tvar existingConditionLogic = {\n  \t    \"id\" : \"\",\n            \"label\" : \"\"\n\t};\n        if (gr.getValue(\"events_criteria_type\") == \"all\") {\n            existingConditionLogic.id = logic_types[0].id;\n            existingConditionLogic.label = logic_types[0].label;\n        } else {\n            existingConditionLogic.id = logic_types[1].id;\n            existingConditionLogic.label = logic_types[1].label;\n        }\n\tresp[\"condition_logic\"].push(existingConditionLogic);\n        resp[\"when_to_run\"] = gr.getDisplayValue(\"trigger\");\n        if (gr.getValue(\"policy_type\") == \"system\") {\n            resp[\"should_disable_condition_logic_dropdown\"] = true;\n        }\n    }\n    gr = new GlideRecord(\"sn_vsc_security_policy_condition\");\n    gr.addEncodedQuery(\"policy=\" + id, true);\n    gr.query();\n    while (gr.next()) {\n        // Get the condition's description fromt the sys_hub_action_type_definition table\n        var sysHubActionTypeDefGr = new GlideRecord(\"sys_hub_action_type_definition\");\n        if (sysHubActionTypeDefGr.get(gr.getValue(\"action_type\"))) {\n            resp[\"conditions\"].push(sysHubActionTypeDefGr.getDisplayValue(\"description\"));\n        }\n    }\n\n    gr = new GlideRecord(\"sn_vsc_security_policy_action\");\n    gr.addEncodedQuery(\"policy=\" + id, true);\n    gr.query();\n    if (gr.next()) {\n        var actionTypeSysId = gr.getValue(\"action_type\");\n        var hubActionTypeGr = new GlideRecord(\"sys_hub_action_type_definition\");\n        hubActionTypeGr.addEncodedQuery(\"sys_id=\" + actionTypeSysId, true);\n        hubActionTypeGr.query();\n        if (hubActionTypeGr.next()) {\n            resp[\"notification\"] = hubActionTypeGr.getDisplayValue(\"description\") || \"-\";\n        } else {\n            resp[\"notification\"] = \"-\";\n        }\n    }\n\n    gr = new GlideRecord(\"sn_vsc_security_policy_event_type\");\n    gr.query();\n    while (gr.next()) {\n        resp[\"triggers\"].push({\n            \"id\": gr.getValue(\"sys_id\"),\n            \"label\": gr.getDisplayValue()\n        });\n    }\n    return resp;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"sys_id\",\n    \"label\": \"sys_id\",\n    \"description\": \"ID\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_59a17ab64395021039f15dc36ab8f282","api_name":"sn_vsc.Get policy summary","mutates_server_data":"false","name":"Get policy summary","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Event Payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Should Execute\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Telemetry API calls for Knowledge Record Page (3 column layout)","sys_updated_on":"2024-07-01 15:50:15","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5aa386faff834210e228fd137c4fd9f2","sys_updated_by":"admin","sys_created_on":"2024-07-01 06:19:21","sys_name":"RecordPage3ColumnLayoutTelemetry","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(params) {\n    if (gs.nil(params) || gs.nil(params.event_payload) || gs.nil(params.should_execute) || params.should_execute === false)\n        return false;\n\n    try {\n\t\tif (params.event_payload.event_key === 'isGenAiMultiTaskCancelled') {\n\t\t\tnew global.KBInstrumentationSNC().updateSessionInstrumentationValue(params.event_payload.targetTableSysId, 'isGenAiMultiTaskCancelled', true); \n\t\t} else if (params.event_payload.event_key === 'taskList') {\n\t\t\tnew global.KBInstrumentationSNC().updateSessionInstrumentationValue(params.event_payload.targetTableSysId, 'taskList', params.event_payload.selectedRecords);\n\t\t}\n        return true;\n    } catch (error) {\n        gs.error('RecordPage3ColumnLayoutTelemetry error: ' + error);\n        return false;\n    }\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"event_payload\",\n        \"label\": \"Event Payload\",\n        \"description\": \"Event Payload\",\n        \"readOnly\": false,\n        \"fieldType\": \"object\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n {\n        \"name\": \"should_execute\",\n        \"label\": \"Should Execute\",\n        \"description\": \"Should Execute\",\n        \"readOnly\": false,\n        \"fieldType\": \"boolean\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_5aa386faff834210e228fd137c4fd9f2","api_name":"sn_km_uib.RecordPage3ColumnLayoutTelemetry","mutates_server_data":"false","name":"RecordPage3ColumnLayoutTelemetry","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Object that contains the recommendation table and a list of sys_ids in the table to take action on\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"recommendationObj\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Given a recommendation table and it's record sys_ids, performs the recommendation for those records on the server side","sys_updated_on":"2024-05-30 21:56:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5c0dc39cff10311082feffffffffff40","sys_updated_by":"admin","sys_created_on":"2023-07-24 04:15:40","sys_name":"Execute Issues Recommendations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_created_by":"maint","sys_mod_count":"26","sys_tags":"","script":"/**\n * Data broker to execute subscription recommendations\n * @param {object} input - contains an object with a recommendation table name and sys_ids of\n * recommendation records in the table that should be executed\n * @return {boolean}\n */\nfunction transform(input) {\n    try {\n        if (!input.recommendationObj.table || !input.recommendationObj.recommendationIds) {\n            const errorMessage = \"Invalid recommendation input data\";\n            throw new Error(errorMessage);\n        }\n\n        if (input.recommendationObj.recommendationIds.length === 0)\n            return 'success';\n\n        return new ExecuteIssuesTabRecommendations(input).applyRecommendations();\n    } catch (e) {\n        gs.warn(gs.getMessage(\"Subscription Management: {0}\", e.message));\n        return 'failure';\n    }\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\":\"recommendationObj\",\r\n      \"label\":\"recommendationObj\",\r\n      \"description\":\"Object that contains the recommendation table and a list of sys_ids in the table to take action on\",\r\n      \"fieldType\":\"object\",\r\n      \"mandatory\":true\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_update_name":"sys_ux_data_broker_transform_5c0dc39cff10311082feffffffffff40","api_name":"sn_sub_man.Execute Issues Recommendations","mutates_server_data":"false","name":"Execute Issues Recommendations","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Contact Permission\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Optional Message\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Optional message\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Prop defining if customer can be contacted for a follow-up\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Star ratings\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Send customer feedback for admin home page to AdminX distribution email","sys_updated_on":"2022-12-19 18:44:29","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5cd47a6c436f5510b643a7ec6bb8f22c","sys_updated_by":"admin","sys_created_on":"2022-11-30 18:03:56","sys_name":"Share Admin Home Page Feedback","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1163fa730f102010e8c940c1df767e8c","value":"1163fa730f102010e8c940c1df767e8c"},"sys_created_by":"maint","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var adminCenterUtil = new AdminCenterUtil();\n    return adminCenterUtil.shareAdminHomeLandingPageFeedback(input.star_ratings, input.optional_message, input.contact_permission);\n}","acl_failure_result":"","props":"[{\n      \"name\": \"star_ratings\",\n      \"label\": \"Star ratings\",\n      \"description\": \"Star ratings\",\n      \"readOnly\": true,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"optional_message\",\n      \"label\": \"Optional Message\",\n      \"description\": \"Optional message\",\n      \"readOnly\": true,\n      \"fieldType\": \"string\",\n      \"mandatory\": false,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"contact_permission\",\n      \"label\": \"Contact Permission\",\n      \"description\": \"Prop defining if customer can be contacted for a follow-up\",\n      \"readOnly\": true,\n      \"fieldType\": \"string\",\n      \"mandatory\": false,\n      \"defaultValue\": \"\"\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1163fa730f102010e8c940c1df767e8c","value":"1163fa730f102010e8c940c1df767e8c"},"sys_update_name":"sys_ux_data_broker_transform_5cd47a6c436f5510b643a7ec6bb8f22c","api_name":"sn_admin_center.Share Admin Home Page Feedback","mutates_server_data":"true","name":"Share Admin Home Page Feedback","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Asset\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Quantity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Stockroom\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-09-13 10:54:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5ce26e9153923010aebdddeeff7b12ee","sys_updated_by":"admin","sys_created_on":"2021-08-30 04:57:30","sys_name":"Consume","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"40","sys_tags":"","script":"function transform(input){\n\tvar consume_gr = new GlideRecord('alm_consumable');\n\tconsume_gr.get(input.sysId);\n\tvar totalQuantity = consume_gr.getValue('quantity');\n\tvar quantity = input.quantity;\n\tvar assetId = input.asset;\n\tvar userId = input.user;\n\t\n\tvar isValidQuantity = !gs.nil(quantity) && quantity >=1 && quantity <= totalQuantity;\n\tvar isEitherPresent = !gs.nil(assetId) || !gs.nil(userId);\n\t\n\tif (!isValidQuantity) {\n\t\tgs.addErrorMessage(gs.getMessage(\"Quantity provided is not valid\"));\n\t\treturn;\n\t}\n\t\n\tif (!isEitherPresent) {\n\t\tgs.addErrorMessage(gs.getMessage(\"Asset/User is not provided to attach to the consumed items\"));\n\t\treturn;\n\t}\n\t\n\tif (assetId == \"\" && userId != \"\") {\n\t\tvar gr = new GlideRecord('sys_user');\n\t\tgr.get(input.user);\n\t\tvar location = gr.getValue('location');\n\t\tvar userDetails= {\n\t\tcost_center: gr.getValue('cost_center'),\n\t\tdepartment: gr.getValue('department'),\n\t\tcompany: gr.getValue('company'),\n\t\t};\n\t\tnew global.Consumables().splitForeground(input.sysId, quantity, '10', '', assetId, '', location, userId, userDetails);\n\t} else if (assetId != \"\") {\n\t\tnew global.Consumables().splitForeground(input.sysId, quantity, '10', '', assetId, '', '', userId);\n\t}\n\treturn;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"quantity\",\r\n  \"label\": \"Quantity\",\r\n  \"fieldType\": \"number\",\r\n  \"mandatory\":true\r\n},\r\n{\r\n  \"name\": \"user\",\r\n  \"label\": \"User\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"asset\",\r\n  \"label\": \"Asset\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"stockroom\",\r\n  \"label\": \"Stockroom\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"sysId\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_5ce26e9153923010aebdddeeff7b12ee","api_name":"sn_itam_workspace.Consume","mutates_server_data":"true","name":"Consume","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name to Fetch BreadCrumb data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-04-11 10:21:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5d2ddd4a4339211061d09a549cb8f211","sys_updated_by":"admin","sys_created_on":"2023-03-26 23:51:06","sys_name":"Get Bread Crumbs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/31774a2953839110a6f8ddeeff7b12cb","value":"31774a2953839110a6f8ddeeff7b12cb"},"sys_created_by":"admin","sys_mod_count":"29","sys_tags":"","script":"function transform(input) {\n\t\n    var adminCloneUtil = new AdminCloneUtil();\n    var breadCrumbsData = [];\n    if (input.table_name) {\n        try {\n            breadCrumbsData = adminCloneUtil.getBreadCrumbsByPageParams(input.table_name);\n        } catch (e) {\n            gs.error(\"Unable to fetch breadcrumbs data: \" + e.toString());\n            return breadCrumbsData;\n        }\n    }\n    return {\n        \"breadCrumbsData\": breadCrumbsData,\n    };\n}","acl_failure_result":"","props":"[\n{\n      \"name\": \"table_name\",\n      \"label\": \"Table Name\",\n      \"description\": \"Table name to Fetch BreadCrumb data\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"sys_id\",\n      \"label\": \"Sys Id\",\n      \"description\": \"Sys Id\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/31774a2953839110a6f8ddeeff7b12cb","value":"31774a2953839110a6f8ddeeff7b12cb"},"sys_update_name":"sys_ux_data_broker_transform_5d2ddd4a4339211061d09a549cb8f211","api_name":"sn_instance_clone.Get Bread Crumbs","mutates_server_data":"false","name":"Get Bread Crumbs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[{\"message\":\"Add seconds\",\"comment\":\"\"},{\"message\":\"Add specified number of days to current date-time\",\"comment\":\"\"},{\"message\":\"Add weeks\",\"comment\":\"\"},{\"message\":\"Add days\",\"comment\":\"\"},{\"message\":\"Add specified number of years to current date-time\",\"comment\":\"\"},{\"message\":\"Add specified number of months to current date-time\",\"comment\":\"\"},{\"message\":\"Add specified number of weeks to current date-time\",\"comment\":\"\"},{\"message\":\"Add specified number of seconds to current date-time\",\"comment\":\"\"},{\"message\":\"Add years\",\"comment\":\"\"},{\"message\":\"Add months\",\"comment\":\"\"}]","batch_exclude":"false","description":"Retrieves date-time information.","sys_updated_on":"2020-11-14 22:02:55","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5d46138853231010c495ddeeff7b121d","sys_updated_by":"admin","sys_created_on":"2020-09-25 14:44:46","sys_name":"Now DateTime","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n\t\t\n\t\tfunction _parseInt(str) {\n\t\t\tvar n = gs.nil(str) ? 0 : parseInt(str);\n\t\t\treturn n ? n : 0;\t\t\n\t\t}\n\t\t\n\t\tvar now = new GlideDateTime();\t\t\n\t\t\n\t\t// potentially useful functions to manipulate current date-time\n\t\tvar days = _parseInt(input.days);\n\t\tif (days != 0)\n\t\t\tnow.addDaysUTC(days);\n\t\t\n\t\tvar months = _parseInt(input.months);\n\t\tif (months != 0)\n\t\t\tnow.addMonthsUTC(months);\n\t\t\n\t\tvar weeks = _parseInt(input.weeks);\n\t\tif (weeks != 0)\n\t\t\tnow.addWeeksUTC(weeks);\n\t\t\n\t\tvar years = _parseInt(input.years);\n\t\tif (years != 0)\n\t\t\tnow.addYearsUTC(years);\n\t\t\n\t\tvar seconds = _parseInt(input.seconds);\n\t\tif (seconds != 0)\n\t\t\tnow.addSeconds(seconds);\n\t\t\n\t\treturn {\n\t\t\tdisplayValue: now.getDisplayValue(),\n\t\t\tutcValue: now.getValue(),\n\t\t\tdisplayDate: now.getLocalDate().getDisplayValue(),\n\t\t\tutcDate: now.getDate().getValue(),\t\t\n\t\t\tdisplayDayOfMonth: now.getDayOfMonthLocalTime(),\n\t\t\tutcDayOfMonth: now.getDayOfMonthUTC(),\t\t\n\t\t\tdisplayMonth: now.getMonthLocalTime(),\n\t\t\tutcMonth: now.getMonthUTC(),\t\t\t\t\n\t\t\tdisplayYear: now.getYearLocalTime(),\n\t\t\tutcYear: now.getYearUTC(),\n\t\t\tnumericValue: now.getNumericValue(),\n\t\t\tdateFormat: gs.getSession().getDateFormat(),\n\t\t\tdateTimeFormat: gs.getSession().getDateTimeFormat()\n\t\t};\n\t}","acl_failure_result":"","props":"[\n\t{\n\t  \"name\": \"days\",\n\t  \"label\": \"Add days\",\n\t  \"description\": \"Add specified number of days to current date-time\",\n\t  \"readOnly\": false,\n\t  \"fieldType\": \"string\",\n\t  \"mandatory\": false,\n\t  \"defaultValue\": \"\"\n\t},\n\t{\n\t  \"name\": \"months\",\n\t  \"label\": \"Add months\",\n\t  \"description\": \"Add specified number of months to current date-time\",\n\t  \"readOnly\": false,\n\t  \"fieldType\": \"string\",\n\t  \"mandatory\": false,\n\t  \"defaultValue\": \"\"\n\t},\n\t{\n\t  \"name\": \"weeks\",\n\t  \"label\": \"Add weeks\",\n\t  \"description\": \"Add specified number of weeks to current date-time\",\n\t  \"readOnly\": false,\n\t  \"fieldType\": \"string\",\n\t  \"mandatory\": false,\n\t  \"defaultValue\": \"\"\n\t},\n\t{\n\t  \"name\": \"years\",\n\t  \"label\": \"Add years\",\n\t  \"description\": \"Add specified number of years to current date-time\",\n\t  \"readOnly\": false,\n\t  \"fieldType\": \"string\",\n\t  \"mandatory\": false,\n\t  \"defaultValue\": \"\"\n\t},\n\t{\n\t  \"name\": \"seconds\",\n\t  \"label\": \"Add seconds\",\n\t  \"description\": \"Add specified number of seconds to current date-time\",\n\t  \"readOnly\": false,\n\t  \"fieldType\": \"string\",\n\t  \"mandatory\": false,\n\t  \"defaultValue\": \"\"\n\t}\n\t]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a6932bf304312210559073c06a02f796","value":"a6932bf304312210559073c06a02f796"},"sys_update_name":"sys_ux_data_broker_transform_5d46138853231010c495ddeeff7b121d","api_name":"global.Now DateTime","mutates_server_data":"false","name":"Now DateTime","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get Hardening compliance score trend start date ","sys_updated_on":"2022-12-15 16:27:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5d714814779711108bd73a91fa5a99ac","sys_updated_by":"admin","sys_created_on":"2022-11-17 00:04:00","sys_name":"VSC Get Score Trend Start date","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n        var scUtil = new sn_vsc.SCComparisonUtil();\n        var res = scUtil.getScoreTrendDates();\n        return res;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_5d714814779711108bd73a91fa5a99ac","api_name":"sn_vsc.VSC Get Score Trend Start date","mutates_server_data":"false","name":"VSC Get Score Trend Start date","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Group Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Group SysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-04-09 18:14:49","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5d8f21e987c26110de52a64d0ebb3585","sys_updated_by":"admin","sys_created_on":"2023-04-06 22:13:12","sys_name":"Get User Contact Overrides","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    return new sn_uib_on_call.OnCallContactPref().getUserContactOverrides(input.groupSysIds);\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"groupSysIds\",\n    \"label\": \"Group SysId\",\n    \"description\": \"Group Sys Id\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_5d8f21e987c26110de52a64d0ebb3585","api_name":"sn_uib_on_call.Get User Contact Overrides","mutates_server_data":"false","name":"Get User Contact Overrides","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Conversational Interfaces - Get NLU Available Languages ","sys_updated_on":"2021-10-21 10:31:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5d9a98e7534230106d43ddeeff7b1229","sys_updated_by":"maint","sys_created_on":"2021-08-24 08:33:04","sys_name":"CI NLU Languages","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var languageQueryParam = '';\n    var languageParam = \"^language.code=\";\n    var languageOrCondition = \"^ORlanguage.code=\";\n    try {\n        var glideLanguages = JSON.parse(new SNC.I18nPickerGenerator().getAvailableLanguages());\n        glideLanguages.forEach(function(language) {\n            languageQueryParam = languageQueryParam ? languageQueryParam + languageOrCondition + language.value : languageQueryParam + languageParam + language.value;\n        });\n    } catch (e) {\n\t\t\n    }\n    return languageQueryParam;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sys_ux_data_broker_transform_5d9a98e7534230106d43ddeeff7b1229","api_name":"global.CI NLU Languages","mutates_server_data":"false","name":"CI NLU Languages","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"paramsJSON\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-10-14 10:12:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5f9d4f0a53423010aebdddeeff7b1216","sys_updated_by":"admin","sys_created_on":"2021-08-20 06:16:00","sys_name":"Allocate","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"26","sys_tags":"","script":"function transform(input) {\n    var assetTag = input.paramsJSON.asset_tag;\n    var serialNumber = input.paramsJSON.serial_number;\n    var reservedFor = input.paramsJSON.reserved_for;\n    var sourceAsset = new GlideRecord('alm_asset');\n    sourceAsset.get(input.sysId);\n    if (Number(sourceAsset.getValue('quantity')) > 1) {\n        var asset = new GlideRecord(sourceAsset.sys_class_name);\n        asset.model_category = sourceAsset.model_category;\n        asset.model = sourceAsset.model;\n        asset.stockroom = sourceAsset.stockroom;\n        asset.location = sourceAsset.location;\n        asset.managed_by = sourceAsset.managed_by;\n        asset.cost = sourceAsset.cost;\n        if (sourceAsset.parent.nil()) {\n            asset.install_status = sourceAsset.install_status;\n            asset.substatus = 'available';\n        } else {\n            // inherit parent's state upon allocation and set parent\n            asset.install_status = sourceAsset.parent.install_status;\n            asset.substatus = sourceAsset.parent.substatus;\n            asset.parent = sourceAsset.parent;\n        }\n        asset.asset_tag = assetTag;\n        asset.serial_number = serialNumber;\n        asset.reserved_for = reservedFor;\n        var newAssetid = asset.insert();\n\n        // decrement pre-allocated quantity\n        if (!gs.nil(newAssetid)) {\n            sourceAsset.quantity = sourceAsset.quantity - 1;\n            sourceAsset.update();\n            gs.addInfoMessage(gs.getMessage(\"Standalone asset got instantiated out of pre-allocated asset {0}\", sourceAsset.display_name));\n            return newAssetid;\n        } else {\n            return null;\n        }\n    } else {\n        if (sourceAsset.parent.nil()) {\n            // update substatus to available because pre-allocated will prevent ci creation\n            sourceAsset.substatus = 'available';\n        } else {\n            // inherit parent's state upon allocation\n            sourceAsset.install_status = sourceAsset.parent.install_status;\n            sourceAsset.substatus = sourceAsset.parent.substatus;\n        }\n        sourceAsset.asset_tag = assetTag;\n        sourceAsset.serial_number = serialNumber;\n        sourceAsset.reserved_for = reservedFor;\n        // create CI as needed\n        try {\n            (new global.AssetandCI()).createCI(sourceAsset);\n            sourceAsset.update();\n        } catch (err) {\n            gs.addErrorMessage(err);\n        }\n        return null;\n    }\n}","acl_failure_result":"","props":"[\r\n    {\r\n      \"name\": \"paramsJSON\",\r\n      \"label\": \"paramsJSON\",\r\n      \"fieldType\": \"json\",\r\n      \"mandatory\": false\r\n    },\r\n    {\r\n      \"name\": \"sysId\",\r\n      \"label\": \"sysId\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_5f9d4f0a53423010aebdddeeff7b1216","api_name":"sn_itam_workspace.Allocate","mutates_server_data":"false","name":"Allocate","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-21 11:42:19","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"5fa97eefa3323510bd3bd63f26fcda81","sys_updated_by":"admin","sys_created_on":"2023-12-05 11:40:17","sys_name":"Check MS Teams Configured For Agent Popover","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    return new OnCallTeamsCalendarUtil().isTeamsPluginActive() && new sn_tcm_collab_hook.MSTeamsChatUtil().isSetupAvailable() && new global.OnCallCommon().shouldUseTeamsForDM();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_5fa97eefa3323510bd3bd63f26fcda81","api_name":"sn_uib_on_call.Check MS Teams Configured For Agent Popover","mutates_server_data":"false","name":"Check MS Teams Configured For Agent Popover","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"user preferences\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-05-09 12:34:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6034989287930110a4a2c077f6cb0b01","sys_updated_by":"admin","sys_created_on":"2022-05-08 10:22:10","sys_name":"Update User Preferences","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    if (input) {\n        var aceUtil = new global.ACEAppBuilderGlobalScopedUtil();\n        if (input.payload.name === \"Tables Drop Down\")\n            aceUtil.updateRecord(\"sys_user_preference\", \"cc49485a87530110a4a2c077f6cb0b04\", {\n                value: input.payload.value\n            });\n        else if (input.payload.name === \"Days Drop Down\")\n            aceUtil.updateRecord(\"sys_user_preference\", \"cb99485a87530110a4a2c077f6cb0b25\", {\n                value: input.payload.value\n            });\n    }\n    return {};\n\n}","acl_failure_result":"","props":"[{\n      \"name\": \"payload\",\n      \"label\": \"payload\",\n      \"description\": \"user preferences\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sys_ux_data_broker_transform_6034989287930110a4a2c077f6cb0b01","api_name":"sn_cp_sfs.Update User Preferences","mutates_server_data":"false","name":"Update User Preferences","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Array of objects: { key:string, code:string }\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Object map of template string keys and values e.g. { 'formType': '300' }\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Template string keys map\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Translations\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Translate strings on the backend using the \"sn_i18n.Message.getMessage()\" API\r\n\r\nExample usage:\r\n\r\nPass an array of objects containing a code and message key to configure this data broker. The message key is used to look up the sys_ui_message table.\r\n\r\n[\r\n    {\r\n        \"code\": \"sn_sow_on_call\",\r\n        \"message\": \"contact_roster\"\r\n    }\r\n]\r\n\r\nFor any template strings, you need to create a client state object that keeps track of the template string values and pass this state variable to this data broker\r\n\r\n{\r\n    \"formType\": \"300\"\r\n}\r\n\r\n\r\nNotes:\r\n- Make sure to keep the client state object for template string values updated BEFORE calling this translations data broker","sys_updated_on":"2024-10-09 15:54:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6096cf8f438d1210b8e69cd82ab8f22b","sys_updated_by":"admin","sys_created_on":"2024-10-09 15:54:10","sys_name":"Get Translations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7e3c2481539260100c54ddeeff7b127b","value":"7e3c2481539260100c54ddeeff7b127b"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var translations = input.translations;\n    var args = input.args;\n    var result = {};\n    translations.forEach(function(obj) {\n        var code = obj.code;\n        var key = obj.message;\n        var translation = sn_i18n.Message.getMessage(code, key, args);\n        result[key] = translation;\n    });\n    return result;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"translations\",\r\n    \"label\": \"Translations\",\r\n    \"description\": \"Array of objects: { key:string, code:string }\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"json\",\r\n    \"valueType\": \"object\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"args\",\r\n    \"label\": \"Template string keys map\",\r\n    \"description\": \"Object map of template string keys and values e.g. { 'formType': '300' }\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"json\",\r\n    \"valueType\": \"object\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]\r\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7e3c2481539260100c54ddeeff7b127b","value":"7e3c2481539260100c54ddeeff7b127b"},"sys_update_name":"sys_ux_data_broker_transform_6096cf8f438d1210b8e69cd82ab8f22b","api_name":"sn_sow_on_call.Get Translations","mutates_server_data":"false","name":"Get Translations","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get total account purchased counts for NowAssist usage and creators","sys_updated_on":"2024-02-21 01:29:18","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"611971a8ffe882108e03ffffffffff0a","sys_updated_by":"maint","sys_created_on":"2024-02-20 23:09:44","sys_name":"NowAssist Purchased Counts","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"/**\n * Data broker to get NowAssist Purchased Counts\n * @param {object} input\n * @return {string}\n */\nfunction transform(input) {\n    return new NowAssistPurchasedCounts().getNowAssistPurchasedCounts();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_update_name":"sys_ux_data_broker_transform_611971a8ffe882108e03ffffffffff0a","api_name":"sn_sub_man.NowAssist Purchased Counts","mutates_server_data":"false","name":"NowAssist Purchased Counts","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"To check for if there are any best practices which were changed for a given release. The best practices are changed based on the following condition :\r\n\r\nSay we have a relesase as \"Release SomeVersion\", then for this ( current ) release version , the condition to check for updated / changed / removed best practices will be :\r\n<  \"first_introduced\"== \"Release SomeVersion\" OR changed == \"Release SomeVersion\" OR \"removed\" == \"Release SomeVersion\" >\r\n\r\nThis should give us total count of all BPs changed for the current release that is - \"ReleaseNow\"\r\n\r\n","sys_updated_on":"2023-12-21 00:10:12","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6126e1ac439731103b465dc36ab8f26e","sys_updated_by":"maint","sys_created_on":"2023-12-20 19:16:02","sys_name":"SC Get updates information on the best practices","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\t\n\tvar resp = {\n\t\t\"hasBestPracticesChanged\" : false,\n\t\t\"release_version\" : null,\n\t\t\"number_of_best_practices_affected\" :  null,\n\t\t\"encodedQueryForAffectedBestPractices\" : null\n\t};\n\tvar securityCenterSysId = new sn_vsc.SecurityCenterConstants().SCPackage;\n\tvar sysStorAppeGr = new GlideRecord(\"sys_store_app\");\n\tsysStorAppeGr.addEncodedQuery(\"sys_id=\" + securityCenterSysId);\n\tsysStorAppeGr.query();\n\tif (sysStorAppeGr.next()) {\n\t\tvar securityCenterRelease = sysStorAppeGr.getDisplayValue(\"version\");\n\t\tvar bestPracticesGr = new GlideRecord(\"sn_vsc_best_practice_configurations\");\n\t\tvar encodedQuery = \"first_introduced=\" + securityCenterRelease + \"^ORremoved=\" + securityCenterRelease + \"^ORchanged=\" + securityCenterRelease;\n\t\tbestPracticesGr.addEncodedQuery(encodedQuery);\n\t\tbestPracticesGr.query();\n\t\tif (bestPracticesGr.next()) {\n\t\t\t// BPs has been changed / removed / updated\n\t\t\tresp[\"hasBestPracticesChanged\"] = true;\n\t\t\tresp[\"release_version\"] = securityCenterRelease;\n\t\t\tresp[\"number_of_best_practices_affected\"] = bestPracticesGr.getRowCount();\n\t\t\tresp[\"encodedQueryForAffectedBestPractices\"] = encodedQuery;\n\t\t}\n\t}\n\treturn resp;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_6126e1ac439731103b465dc36ab8f26e","api_name":"sn_vsc.SC Get updates information on the best practices","mutates_server_data":"false","name":"SC Get updates information on the best practices","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-11 22:22:01","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"614d5c59532111108726ddeeff7b120c","sys_updated_by":"admin","sys_created_on":"2022-08-25 04:49:13","sys_name":"Get Management Link Groups","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n    var util = new sn_cmdb_ws.CMDBWorkspaceUtil();\n    return util.getManagementLinkGroups();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_614d5c59532111108726ddeeff7b120c","api_name":"sn_cmdb_ws.Get Management Link Groups","mutates_server_data":"false","name":"Get Management Link Groups","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Selected Suite\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Suite\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"date\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-09-01 23:40:12","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"61becd9f874c111061ee083f37cb0bdc","sys_updated_by":"admin","sys_created_on":"2022-06-17 23:59:13","sys_name":"VSC Get Time For Scan Results Second Date","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var results = new VSCGetScanResultsDateTimeUtil().getResultsTimeFromDateSelection(input.date, input.suite);\n    return results;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"date\",\n    \"label\": \"date\",\n    \"description\": \"Selected date\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  },\n{\n    \"name\": \"suite\",\n    \"label\": \"Suite\",\n    \"description\": \"Selected Suite\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_61becd9f874c111061ee083f37cb0bdc","api_name":"sn_vsc.VSC Get Time For Scan Results Second Date","mutates_server_data":"false","name":"VSC Get Time For Scan Results Second Date","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Gets the domains","sys_updated_on":"2022-04-28 18:52:16","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"61df7c47540f8110fa9bb61bd0448296","sys_updated_by":"admin","sys_created_on":"2022-04-28 11:15:54","sys_name":"Domain Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform() {\t\n\tvar active = GlidePluginManager.isActive('com.sn_pa_domain_filter');\n\tvar domain = [];\n\tif(active == true) {\t\t\n\t\tvar gq = new GlideRecord(\"domain\");\n\t\tgq.addQuery(\"active\", true);\n\t\tgq.query();\n\t\tcount = 0;\n\t\twhile(gq.next()){\n\t\t\tdomain[count] = '{\"' + gq.sys_id + '\":\"' + gq.parent + '\"}';\n\t\t\tcount++;\n\t\t}\n\t}\n\tvar details = {\n\t\tactive: active,\n\t\tdomain: domain\n\t};\t\n\treturn details;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_61df7c47540f8110fa9bb61bd0448296","api_name":"sn_itam_workspace.Domain Details","mutates_server_data":"false","name":"Domain Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"plugins\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-06-06 07:56:23","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"623a3271537201102958ddeeff7b1205","sys_updated_by":"admin","sys_created_on":"2022-04-12 12:38:45","sys_name":"Get Plugin Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n\n    var result = {};\n\n    if (!input.payload) {\n        return result;\n    }\n\n    var pluginDetails = {};\n    try {\n\n        var payload = input.payload || {};\n        var hasPluginDetailsData = payload.plugin_details && Object.keys(payload.plugin_details).length > 0;\n        pluginDetails = hasPluginDetailsData ? payload.plugin_details : JSON.parse(input.payload.plugins);\n        var plugins = Object.keys(pluginDetails).map(function(plugin) {\n            return {\n                id: plugin,\n                installed: hasPluginDetailsData ? (pluginDetails[plugin]['app_scope'] ? GlidePluginManager.isActive(pluginDetails[plugin]['app_scope']) : GlidePluginManager.isActive(plugin)) : (input.payload.app_scope ? GlidePluginManager.isActive(input.payload.app_scope) : GlidePluginManager.isActive(plugin))\n            };\n        });\n\n        var progressId = payload.progress_id;\n        if (progressId) {\n            result.status = 'installing';\n        } else {\n            result.status = plugins.some(function(p) {\n                return !p.installed;\n            }) ? 'ready to install' : 'installed';\n        }\n        return result;\n\n    } catch (e) {\n        gs.info('Unable to parse plugin(s) information' + e);\n        return result;\n    }\n\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"payload\",\n      \"label\": \"payload\",\n      \"description\": \"plugins\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_623a3271537201102958ddeeff7b1205","api_name":"sn_ace.Get Plugin Status","mutates_server_data":"false","name":"Get Plugin Status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get Virtual agent settings and plugin status \n -  Topic Recommendations\n -  Deflection Tracking and VA Analytics \n -  Issue Auto Resolution\n -  NLU and notification settings","sys_updated_on":"2021-10-28 10:12:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6279729d537d301033cdddeeff7b1217","sys_updated_by":"admin","sys_created_on":"2021-08-05 11:12:28","sys_name":"CI VA Features status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n\n    var result = {\n        topicRecommendationsInstalled: false,\n        deflectionTrackingEnabled: false,\n        vaAnalyticsInstalled: false,\n        chatSettings: {},\n        iarSettings: {},\n        nluSettings: {}\n    };\n\n    // VA Topic Recommendations store app\n    result.topicRecommendationsInstalled = GlidePluginManager.isActive(\"com.snc.va_topic_recommender\");\n    var trSettingsGr = new GlideAggregate(\"sn_topic_recommend_default_setting\");\n    if (result.topicRecommendationsInstalled && trSettingsGr.isValid()) {\n        trSettingsGr.addAggregate('COUNT');\n        trSettingsGr.query();\n        var trSettingsCount = trSettingsGr.next() ? trSettingsGr.getAggregate('COUNT') : 0;\n        result.trDefaultSettingsText = gs.getMessage(\"Default criteria ({0})\", trSettingsCount);\n    }\n\n\n    // Deflection Tracking Enabled\n    result.deflectionTrackingEnabled = (gs.getProperty(\"com.glide.cs.va.deflection_tracking.enable\") === \"true\");\n    var dfConfigGR = new GlideAggregate(\"ssa_deflection_configuration\");\n    if (result.deflectionTrackingEnabled && dfConfigGR.isValid()) {\n        dfConfigGR.addEncodedQuery(\"activity_context=7b43fb645383201033cdddeeff7b1246\");\n        dfConfigGR.addAggregate('COUNT');\n        dfConfigGR.query();\n        var dfConfigCount = dfConfigGR.next() ? dfConfigGR.getAggregate('COUNT') : 0;\n        result.deflectionConfigText = gs.getMessage(\"Deflection configurations ({0})\", dfConfigCount);\n    }\n\n\n    // Conversational Analytics Dashboard store app\n    result.vaAnalyticsInstalled = GlidePluginManager.isActive(\"sn_ci_analytics\");\n\n\n    // Issue Auto-Resolution \n    result.iarSettings = (function() {\n        var _iarSetttings = {};\n        var _iarInstalled = GlidePluginManager.isActive(\"com.glide.cs.auto_resolution\");\n        if (_iarInstalled) {\n            var _isIarEnabled = gs.getProperty(\"com.glide.cs.enable_auto_resolution\") === \"true\";\n            var gr = new GlideRecordSecure(\"sys_cs_auto_resolution_configuration\");\n            if (_isIarEnabled && gr.isValid()) {\n                gr.addActiveQuery();\n                gr.query();\n                _isIarEnabled = gr.hasNext();\n            }\n            var iarSimulationGR = new GlideAggregate(\"sys_cs_auto_resolution_simulation_configuration\");\n            if (iarSimulationGR.isValid()) {\n                iarSimulationGR.addAggregate('COUNT');\n                iarSimulationGR.query();\n                var _simulationCount = iarSimulationGR.next() ? iarSimulationGR.getAggregate('COUNT') : 0;\n\n                _iarSetttings.simulationsText = gs.getMessage(\"Simulations ({0})\", _simulationCount);\n            }\n            _iarSetttings.enabled = _isIarEnabled;\n        }\n        _iarSetttings.installed = _iarInstalled;\n        return _iarSetttings;\n    })();\n\n\n    // NLU settings enabled\n    result.nluSettings = (function() {\n        var _nluSettings = {};\n        var csSettingsGR = new GlideRecordSecure(\"sys_cs_general_settings\");\n        if (csSettingsGR.isValid()) {\n            csSettingsGR.query();\n            if (csSettingsGR.next()) {\n                _nluSettings.sysId = csSettingsGR.getUniqueValue();\n                _nluSettings.enabled = csSettingsGR.getValue('nlu_enabled') == 1;\n            }\n        }\n        return _nluSettings;\n    })();\n\n\n    // Chat settings - VA Notifications Enabled\n    result.chatSettings = (function() {\n        var _chatSettings = {};\n        var laGR = new GlideRecordSecure(\"sys_cs_live_agent_setup\");\n        if (laGR.isValid()) {\n            laGR.query();\n            if (laGR.next()) {\n                _chatSettings.sysId = laGR.getUniqueValue();\n                _chatSettings.notificationsEnabled = laGR.getValue('notification_enabled') == 1;\n                _chatSettings.readOnly = !laGR.canWrite();\n                if (_chatSettings.readOnly && !laGR.isInSelectedScope()) {\n                    _chatSettings.infoMsg = gs.getMessage('Notification settings can only be edited when {0} is the current application. Change the scope to make any updates.', laGR.getTableScopeName());\n                }\n            }\n        }\n        return _chatSettings;\n    })();\n\n\n    // Custom Greetings and Setup\n    result.customGreetingsCountText = (function() {\n        var ctxProfileGR = new GlideAggregate(\"sys_cs_context_profile\");\n        var _count = 0;\n        if (ctxProfileGR.isValid()) {\n            ctxProfileGR.addAggregate('COUNT');\n            ctxProfileGR.query();\n            _count = ctxProfileGR.next() ? ctxProfileGR.getAggregate('COUNT') : 0;\n        }\n        return gs.getMessage(\"Custom Greetings and Setup ({0})\", _count);\n    })();\n\n    return result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sys_ux_data_broker_transform_6279729d537d301033cdddeeff7b1217","api_name":"global.CI VA Features status","mutates_server_data":"false","name":"CI VA Features status","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Custom Message\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Custom message from sender\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Link to share\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User sys ids to send email to\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Users\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Sending email containing adoption blueprint link and a custom message to provided users","sys_updated_on":"2022-11-02 23:38:40","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"62e22a2bb77611109cfe23508e11a905","sys_updated_by":"maint","sys_created_on":"2022-11-02 18:05:55","sys_name":"Share Via Email","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1163fa730f102010e8c940c1df767e8c","value":"1163fa730f102010e8c940c1df767e8c"},"sys_created_by":"maint","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n    var adminCenterUtil = new AdminCenterUtil();\n    return adminCenterUtil.shareViaEmail(JSON.parse(input.users), input.link_to_share, input.custom_message);\n}","acl_failure_result":"","props":"[{\n      \"name\": \"users\",\n      \"label\": \"Users\",\n      \"description\": \"User sys ids to send email to\",\n      \"readOnly\": true,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"link_to_share\",\n      \"label\": \"Link to share\",\n      \"description\": \"Link to share\",\n      \"readOnly\": true,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"custom_message\",\n      \"label\": \"Custom Message\",\n      \"description\": \"Custom message from sender\",\n      \"readOnly\": true,\n      \"fieldType\": \"string\",\n      \"mandatory\": false,\n      \"defaultValue\": \"\"\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1163fa730f102010e8c940c1df767e8c","value":"1163fa730f102010e8c940c1df767e8c"},"sys_update_name":"sys_ux_data_broker_transform_62e22a2bb77611109cfe23508e11a905","api_name":"sn_admin_center.Share Via Email","mutates_server_data":"true","name":"Share Via Email","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Status\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-08-25 12:16:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"63064a3f9c423010fa9bccc407a63b3e","sys_updated_by":"admin","sys_created_on":"2021-08-25 11:27:49","sys_name":"Get Substatus Choices","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transofrm(input) {\n\tvar results = [];\n\tvar gr = new GlideRecord('sys_choice');\n\tvar current_language = gs.getSession().getLanguage();\n\tgr.addQuery('name', 'alm_asset');\n\tgr.addQuery('element', 'substatus');\n\tgr.addQuery('dependent_value', input.status);\n\tgr.addQuery('value', 'NOT IN', ['pre_allocated']);\n\tgr.addQuery('language', current_language);\n\tgr.query();\n\twhile (gr.next()) {\n\t\tresults.push({\n\t\t'id' : gr.value.toString(),\n\t\t'value' : gr.value.toString(),\n\t\t'label' : gr.label.toString()\n\t\t});\n\t}\n\treturn results;\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t  \"name\": \"status\",\r\n\t  \"label\": \"Status\",\r\n\t  \"fieldType\": \"number\",\r\n\t  \"mandatory\": true\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_63064a3f9c423010fa9bccc407a63b3e","api_name":"sn_itam_workspace.Get Substatus Choices","mutates_server_data":"false","name":"Get Substatus Choices","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[{\"message\":\"SysId of the task\",\"comment\":\"\"},{\"message\":\"state of the task\",\"comment\":\"\"},{\"message\":\"Graphql Query Output\",\"comment\":\"\"}]","batch_exclude":"false","description":"Next Experience landing page - Task state update transform","sys_updated_on":"2022-03-09 09:44:12","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"636c9b781b213010d46eea48624bcb30","sys_updated_by":"system","sys_created_on":"2021-07-22 13:04:47","sys_name":"Task state update transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/ead9fb5f8b27a051aa71b35163745b82","value":"ead9fb5f8b27a051aa71b35163745b82"},"sys_created_by":"system","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\tvar sys = input.sysId;\n\tvar state = input.state;\n    var gr = new GlideRecordSecure('sysapproval_approver');\n    gr.get(sys);\n    gr.setValue('state', state);\n    gr.update();\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"sysId\",\n    \"label\": \"SysId of the task\",\n    \"fieldType\": \"string\",\n    \"valueType\": \"object\",\n    \"readOnly\": false,\n    \"mandatory\": true,\n    \"description\": \"Graphql Query Output\"\n  },\n{\n    \"name\": \"state\",\n    \"label\": \"state of the task\",\n    \"fieldType\": \"string\",\n    \"valueType\": \"object\",\n    \"readOnly\": false,\n    \"mandatory\": true,\n    \"description\": \"Graphql Query Output\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ead9fb5f8b27a051aa71b35163745b82","value":"ead9fb5f8b27a051aa71b35163745b82"},"sys_update_name":"sys_ux_data_broker_transform_636c9b781b213010d46eea48624bcb30","api_name":"polaris_app_shell.Task state update transform","mutates_server_data":"false","name":"Task state update transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Transaction Type Condition.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Transaction Type Conditions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"iHub Usage Filter Condition.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ihub Usage Conditions\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Returns Usage and Transactions Types Script","sys_updated_on":"2024-10-15 08:27:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"63fa31d6fff602105408ffffffffff0d","sys_updated_by":"admin","sys_created_on":"2024-06-17 06:09:42","sys_name":"Usage and Transactions Type Script","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n\tvar usage_count = 0;\n\tvar ihubUsageConditions = input.ihubUsageConditions || \"license_id=IntegrationHubPool^sys_created_onBETWEENjavascript:gs.beginningOfLast12Months()@javascript:gs.endOfLastMonth()\";\n\tvar ga = new GlideAggregate(\"ua_ih_usage\");\n\tga.addEncodedQuery(ihubUsageConditions, true);\n\tga.query();\n\twhile(ga.next()) {\n\t\tvar countVal = ga.getValue('use_count');\n\t\tif (countVal) {\n\t\t\tusage_count = usage_count + parseInt(countVal);\n\t\t}\n\t}\n\n\tvar transactionTypeConditions = input.transactionTypeConditions || \"sys_created_onBETWEENjavascript:gs.beginningOfLast12Months()@javascript:gs.endOfLastMonth()\";\n\n\tvar transactionTypesArr = [];\n\tvar transactionTypeObj = {};\n\tvar transactionTypes = new GlideAggregate(\"ua_ih_usage\");\n\ttransactionTypes.addEncodedQuery(transactionTypeConditions, true);\n\ttransactionTypes.query();\n\twhile(transactionTypes.next()) {\n\t\tvar countVal1 = transactionTypes.getValue('use_count');\n\t\tvar sourceType = transactionTypes.getValue('license_id');\n\t\tif (!transactionTypeObj[sourceType]) {\n\t\t\ttransactionTypeObj[sourceType] = {\n                    \"sum\" : 0,\n\t\t\t\t\t\"count\" : 0,\n                     \"groupBy\" : [{\n                          \"displayValue\" : sourceType,\n                          \"value\" : sourceType,\n                          \"field\" : \"license_id\" \n\n                     }]};\n\t\t}\n\t\tcountVal1 = transactionTypeObj[sourceType].sum + parseInt(countVal1);\n\t\ttransactionTypeObj[sourceType].sum = countVal1;\n\t\ttransactionTypeObj[sourceType].count = transactionTypeObj[sourceType].count + 1;\n\t}\n\tfor (var type in transactionTypeObj) {\n\t\ttransactionTypesArr.push(transactionTypeObj[type]);\n\t}\n\n\n\tvar license_details = new GlideAggregate('license_details');\n\tvar license_count = 0;\n\tlicense_details.addEncodedQuery(\"name=IntegrationHub Pool\", true);\n\tlicense_details.query();\n\twhile(license_details.next()) {\n\t\tlicense_count = license_details.getValue('count');\n\t}\n\n\treturn { \"usage\" : usage_count, \"txLicense\" : license_count, \"transactionTypes\" : transactionTypesArr};\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"ihubUsageConditions\",\r\n        \"label\": \"ihub Usage Conditions\",\r\n        \"description\": \"iHub Usage Filter Condition.\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    },\r\n{\r\n        \"name\": \"transactionTypeConditions\",\r\n        \"label\": \"Transaction Type Conditions\",\r\n        \"description\": \"Transaction Type Condition.\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_update_name":"sys_ux_data_broker_transform_63fa31d6fff602105408ffffffffff0d","api_name":"sn_ih_usage_app.Usage and Transactions Type Script","mutates_server_data":"false","name":"Usage and Transactions Type Script","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Lookup Dynamic Translation Property","sys_updated_on":"2024-07-01 10:17:42","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"64e5b76f9f020210f0b32e5af90a1cc5","sys_updated_by":"admin","sys_created_on":"2024-05-15 05:26:16","sys_name":"Lookup Dynamic Translation Property","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    var propValue = gs.getProperty('sn_generative_ai.disable_dynamic_translation', true);\n    return propValue === 'true' || propValue === '1';\n}","acl_failure_result":"","props":"[\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_64e5b76f9f020210f0b32e5af90a1cc5","api_name":"sn_nowassist_admin.Lookup Dynamic Translation Property","mutates_server_data":"false","name":"Lookup Dynamic Translation Property","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Library Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Library Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get list of published dedup templates","sys_updated_on":"2023-12-06 17:46:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"65455b5e530871108cabddeeff7b12b6","sys_updated_by":"admin","sys_created_on":"2023-07-17 23:49:22","sys_name":"Get list of published dedup templates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"130","sys_tags":"","script":"function transform(input) {\n\tvar MAX_TEMPLATES = 100;\n    var templateDetailsList = [];\n    var response = {};\n\t//cache matching task counts per template\n\tvar templateToMatchingTasksCountMap = {};\n\tgetMatchingTasksCount();\n    var rdt = new GlideRecord('reconcile_duplicate_template');\n    rdt.addQuery('state', 'published');\n    if (input.librarySysId) {\n        rdt.addQuery('library', input.librarySysId);\n    }\n    rdt.query();\n    var totalTemplates = 0;\n\tvar totalTemplateTasks = 0;\n    while (rdt.next()) {\n\t\tvar totalTasks = 0;\n        //check if the template is already running\n        if (templateIsRunning(rdt.getValue('sys_id'))) {\n            continue;\n        }\n\t\ttotalTemplates++;\n        var templateDetails = {};\n        templateDetails['template_sys_id'] = rdt.getValue('sys_id');\n        templateDetails['template_name'] = rdt.getValue('name');\n        templateDetails['template_description'] = rdt.getValue('description');\n        templateDetails['template_class_name'] = getTableLabel(rdt.table.getDisplayValue());\n\t\ttemplateDetails['template_library'] = rdt.getValue('library');\n\t\tvar libraryName = rdt.getDisplayValue('library');\n        if(!libraryName){\n\t\t\tlibraryName = \"N/A\";\n\t\t} \n\t\ttemplateDetails['template_library_name'] = libraryName;\n        var matchingTaskCount = 0;\n\t\tif(templateToMatchingTasksCountMap[rdt.getValue('sys_id')]){\n\t\t\tmatchingTaskCount = parseInt(templateToMatchingTasksCountMap[rdt.getValue('sys_id')]);\n\t\t}\n        totalTasks += parseInt(matchingTaskCount);\n\t\ttotalTemplateTasks += totalTasks;\n        templateDetails['template_tasks_count'] = totalTasks;\n\t\ttemplateDetails['template_matching_tasks_count'] = matchingTaskCount;\n\n\t\t// add table filter based on whether or not we want to show open tasks\n\t\tvar filter = 'state=2^template=' + rdt.getValue('sys_id');\n\t\tif ((new GetDedupeTaskInfo()).showOnlyOpenTasks()) {\n\t\t\tfilter += '^task.state=1';\n\t\t}\n\t\ttemplateDetails['template_filter'] = filter;\n\n        templateDetailsList.push(templateDetails);\n    }\n\n    function getMatchingTasksCount() {\n        var suggestedTaskGr = new GlideAggregate('sn_cmdb_ws_reconcile_duplicate_template_suggested_task');\n\t\tsuggestedTaskGr.addQuery('state', 2); //ready state\n\t\tif ((new GetDedupeTaskInfo()).showOnlyOpenTasks()) {\n\t\t\tsuggestedTaskGr.addQuery('task.state', 1); // tasks are in open state\n\t\t}\n\t\tsuggestedTaskGr.addAggregate('COUNT', 'template');\n        suggestedTaskGr.query();\n        while(suggestedTaskGr.next()) {\n            templateToMatchingTasksCountMap[suggestedTaskGr.getValue('template')] = suggestedTaskGr.getAggregate('COUNT', 'template');\n        }\n    }\n\n    function getTableLabel(table) {\n        var dbo = new GlideRecord('sys_db_object');\n        dbo.addQuery('name', table);\n        dbo.query();\n        if (dbo.next()) {\n            return dbo.getValue('label');\n        }\n        return null;\n    }\n    templateDetailsList.sort(function(temp1, temp2) {\n        if (parseInt(temp1.template_tasks_count) >= parseInt(temp2.template_tasks_count)) {\n            return -1;\n        } else {\n            return 1;\n        }\n    });\n\n    function templateIsRunning(templateSysId) {\n        var gr = new GlideRecord('reconcile_duplicate_template_run');\n        gr.addQuery('template', templateSysId);\n        gr.addEncodedQuery('stateINdraft,ready,running,cancel_requested');\n        gr.query();\n        return gr.next();\n    }\n    response['total_templates'] = totalTemplates;\n    response['total_tasks'] = totalTemplateTasks;\n    response['template_details'] = templateDetailsList.slice(0, MAX_TEMPLATES);\n    response.lastUpdatedInfoText = gs.getMessage(\"Last updated: {0}\", new GlideDateTime().getDisplayValue());\n    return response;\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"librarySysId\",\r\n      \"label\": \"Library Sys ID\",\r\n      \"description\": \"Library Sys Id\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"false\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_65455b5e530871108cabddeeff7b12b6","api_name":"sn_cmdb_ws.Get list of published dedup templates","mutates_server_data":"false","name":"Get list of published dedup templates","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Context Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-09 10:53:49","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"65fe46a99f710210d9e5328dda0a1c14","sys_updated_by":"admin","sys_created_on":"2024-04-26 06:33:28","sys_name":"Get PWD Reset Workflow Progress","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\treturn  new sn_uib_pwd_reset.PwdResetUXFResetProcessor().checkWorkflowProgress(input.token,input.contextId);\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n{\r\n      \"name\": \"contextId\",\r\n      \"label\": \"Context Id\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_65fe46a99f710210d9e5328dda0a1c14","api_name":"sn_uib_pwd_reset.Get PWD Reset Workflow Progress","mutates_server_data":"true","name":"Get PWD Reset Workflow Progress","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"66002bff77a89110f3a2f350ff5a995b","sys_updated_by":"admin","sys_created_on":"2022-07-14 20:22:58","sys_name":"Multisource Get Settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"45","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\n\t// get max records to process\n\tvar maxRecordsToProcess = util.getMaxRecordsToProcess();\n\t\n\t// get agent not reporting days\n\tvar notReportingMaxDays = util.getDiscoSourceNotReporting();\n\t\n\t// get coverage classes\n\tvar coverageClasses = util.getCoverageClasses();\n\t\n\tvar coverageWeightType = util.getCoverageWeightType();\n\n\t// get data mismatch classes\n\tvar dataMismatchClasses = util.getDataMismatchClasses();\n\t\n\tvar dataMismatchWeightType = util.getDataMismatchWeightType();\n\t\n\t// return results\n\tvar results = {\n\t\t'maxRecordsToProcess' : maxRecordsToProcess,\n\t\t'notReportingMaxDays' : notReportingMaxDays,\n\t\t'coverageClasses' : coverageClasses,\n\t\t'coverageWeightType' : coverageWeightType,\n\t\t'dataMismatchClasses' : dataMismatchClasses,\n\t\t'dataMismatchWeightType' : dataMismatchWeightType\n\t};\n\n\treturn results;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_66002bff77a89110f3a2f350ff5a995b","api_name":"sn_cmdb_ws.Multisource Get Settings","mutates_server_data":"false","name":"Multisource Get Settings","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":" Translator Configuration Scope","sys_updated_on":"2024-05-16 15:59:25","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"664747089f9e0210f0b32e5af90a1c7c","sys_updated_by":"admin","sys_created_on":"2024-05-16 15:19:40","sys_name":" Translator Configuration Scope","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"13","sys_tags":"","script":"function transform(input) {\n    var scope = \"\";\n    var scopeName = \"\";\n    try {\n        var currentApplicationId = gs.getCurrentApplicationId();\n        var sysPropertiesGr = new GlideRecord('sys_properties');\n        sysPropertiesGr.addQuery('name', 'com.snc.gen_ai.translator_configuration.sys_id');\n        sysPropertiesGr.query();\n        if (sysPropertiesGr.next()) {\n            scope = sysPropertiesGr.getValue('sys_scope');\n            scopeName = sysPropertiesGr.getDisplayValue('sys_scope');\n        }\n    } catch (error) {\n        gs.error(\"Failed to get the scope for translator configuration\" + error);\n    }\n    return {\n        currentApplicationId: currentApplicationId,\n        currentScopeName: gs.getCurrentScopeName(),\n        propertyScopeId: scope,\n        propertyScopeName: scopeName,\n        scopeMatch: (currentApplicationId === scope)\n    };\n}","acl_failure_result":"","props":"[\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_664747089f9e0210f0b32e5af90a1c7c","api_name":"sn_nowassist_admin. Translator Configuration Scope","mutates_server_data":"false","name":" Translator Configuration Scope","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data Governance\",\n  \"comment\" : \"\"\n},{\n  \"message\" : \"Data Ingestion\",\n  \"comment\" : \"\"\n},{\n  \"message\" : \"Exclude marketing copy\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Product Category\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search and Analytics\",\n  \"comment\" : \"\"\n},{\n  \"message\" : \"Whether to exclude marketing copy in the response\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Gets the product adoption state and the marketing materials as appropriate","sys_updated_on":"2023-10-18 11:18:32","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"66f3f40debb0611094bbb5d5d85228ae","sys_updated_by":"admin","sys_created_on":"2023-02-02 01:18:12","sys_name":"Get product adoption state","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n\tvar category = input.category;\n\tvar excludeMarketingCopy = input.excludeMarketingCopy;\n\t\n\tvar util = new sn_cmdb_ws.CMDBWsProductAdoptionUtil();\n\treturn util.getProductAdoptionStates(category, excludeMarketingCopy);\n}","acl_failure_result":"","props":"[{\r\n \"name\": \"category\",\r\n  \"label\": \"Product Category\",\r\n  \"description\": \"Product Category\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"choice\",\r\n  \"valueType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\",\r\n  \"typeMetadata\": {\r\n        \"choices\": [{\"label\": \"Data Ingestion\", \"value\": \"DATA_INGESTION\" },{\"label\": \"Data Governance\", \"value\": \"DATA_GOVERNANCE\" },{\"label\": \"Search and Analytics\", \"value\": \"SEARCH_AND_ANALYTICS\" }]\r\n  }\r\n},\r\n{\r\n \"name\": \"excludeMarketingCopy\",\r\n  \"label\": \"Exclude marketing copy\",\r\n  \"description\": \"Whether to exclude marketing copy in the response\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"boolean\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": false\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_66f3f40debb0611094bbb5d5d85228ae","api_name":"sn_cmdb_ws.Get product adoption state","mutates_server_data":"false","name":"Get product adoption state","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"custom policy event type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"policyType\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Create a new custom policy","sys_updated_on":"2024-05-03 20:07:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6744b717933982103c6713473289185f","sys_updated_by":"admin","sys_created_on":"2024-05-02 00:25:50","sys_name":"Create a new custom policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n    var trigger = input.policyType;\n    if (trigger) {\n        // create a new custom policy record\n        var customPolicy = new GlideRecord(\"sn_vsc_security_policy\");\n        customPolicy.initialize();\n        customPolicy.name = \"New custom policy\";\n        customPolicy.status = \"inactive\";\n        customPolicy.trigger = trigger;\n        customPolicy.settings = \"not_configured\";\n        customPolicy.policy_type = \"custom\";\n        var sysId = customPolicy.insert();\n        if (sysId) {\n            return sysId;\n        } else {\n            return '';\n        }\n    }\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\":\"policyType\",\r\n      \"label\":\"policyType\",\r\n       \"readOnly\": false,\r\n      \"description\":\"custom policy event type\",\r\n      \"fieldType\":\"string\",\r\n       \"mandatory\": true,\r\n       \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_6744b717933982103c6713473289185f","api_name":"sn_vsc.Create a new custom policy","mutates_server_data":"false","name":"Create a new custom policy","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"This fetches the page params required for widget on click navigation on single instance dashboard","sys_updated_on":"2024-06-04 22:23:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"680e129677a60210c2123a91fa5a995d","sys_updated_by":"admin","sys_created_on":"2024-06-04 22:22:43","sys_name":"Get SI dashboard KPI page params","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar scUtil = new sn_vsc.SCMIFUtil();\n\treturn scUtil.getSIWidgetNavParams();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_680e129677a60210c2123a91fa5a995d","api_name":"sn_vsc.Get SI dashboard KPI page params","mutates_server_data":"false","name":"Get SI dashboard KPI page params","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"color\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"description\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Updates Shift Color","sys_updated_on":"2023-10-05 12:35:00","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"681e47278765bd5087860e19dabb357d","sys_updated_by":"admin","sys_created_on":"2023-10-04 09:50:54","sys_name":"Update Shift Color","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar color = input.color;\n\tvar sysId = input.sysId;\n\tnew sn_uib_on_call.OnCallTeamsCalendarUtil().updateColor(color, sysId);\n\treturn {\n\t\tstatus: 'success'\n\t};\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"color\",\r\n  \"label\": \"color\",\r\n  \"description\": \"description\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"sysId\",\r\n  \"description\": \"description\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_681e47278765bd5087860e19dabb357d","api_name":"sn_uib_on_call.Update Shift Color","mutates_server_data":"true","name":"Update Shift Color","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Data broker to populate the parameters in the Model management tabs having list views based on index of tabs","sys_updated_on":"2023-07-17 12:50:02","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"683f181677003110da1f99f69c5a9942","sys_updated_by":"admin","sys_created_on":"2023-07-17 10:20:41","sys_name":"Model management tabs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    if (AssetWorkspaceUtil.isHAMActive()) {\n\t\t    return new sn_hamp.HAMAssetWorkspaceUtil().getModelManagementTabs();\n    } else {\n        return new AssetWorkspaceUtil().getModelManagementTabs();\n    }\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_683f181677003110da1f99f69c5a9942","api_name":"global.Model management tabs","mutates_server_data":"false","name":"Model management tabs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"","batch_exclude":"false","description":"","sys_updated_on":"2024-04-11 12:30:50","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6852f3e753e010105a20ddeeff7b129f","sys_updated_by":"admin","sys_created_on":"2020-05-09 18:23:42","sys_name":"Plugin Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7be88b365b3801be77a72fb359d185cb","value":"7be88b365b3801be77a72fb359d185cb"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n\treturn { \n\t\tid: input.pluginId, \n\t\tactive: GlidePluginManager.isActive(input.pluginId)\n\t};\n}","acl_failure_result":"","props":"[ \r\n{\r\n        \"name\": \"pluginId\",\r\n        \"label\": \"Plugin ID\",\r\n        \"description\": \"Plugin ID\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"com.devsnc_sn_catalog_form\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7be88b365b3801be77a72fb359d185cb","value":"7be88b365b3801be77a72fb359d185cb"},"sys_update_name":"sys_ux_data_broker_transform_6852f3e753e010105a20ddeeff7b129f","api_name":"sn_canvas_core.Plugin Status","mutates_server_data":"false","name":"Plugin Status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Short Description\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Short description of a new incident\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysID of record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-11 17:09:34","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"69b87a64436a02107524354d3ab8f204","sys_updated_by":"admin","sys_created_on":"2024-05-30 13:49:05","sys_name":"Get Record Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    return new sn_uib_pwd_reset.PwdResetUXFMainProcessor().getRecordDetails(input.table, input.sysID, input.shortDescription);\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"table\",\r\n        \"label\": \"Table\",\r\n        \"description\": \"Table\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    } ,{\r\n        \"name\": \"sysID\",\r\n        \"label\": \"SysID\",\r\n        \"description\": \"SysID of record\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"shortDescription\",\r\n        \"label\": \"Short Description\",\r\n        \"description\": \"Short description of a new incident\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_69b87a64436a02107524354d3ab8f204","api_name":"sn_uib_pwd_reset.Get Record Details","mutates_server_data":"true","name":"Get Record Details","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get SOW Incident overview impact details","sys_updated_on":"2023-08-22 11:47:25","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"69ceb6a4537031102f10ddeeff7b1249","sys_updated_by":"admin","sys_created_on":"2023-08-18 18:18:02","sys_name":"Impact Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n    var impactDetails = {};\n    var incSysId = input.sysId;\n    var incGr = new GlideRecord(\"incident\");\n    if (incGr.get(incSysId)) {\n        impactDetails = new SOWIncidentImpact().getImpactDetails(incGr);\n    }\n    return impactDetails;\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_update_name":"sys_ux_data_broker_transform_69ceb6a4537031102f10ddeeff7b1249","api_name":"sn_sow_inc.Impact Details","mutates_server_data":"false","name":"Impact Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Policy Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id of the policy to be published\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Publishes a data manager policy","sys_updated_on":"2023-09-27 01:00:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"69d1d95953a97110fdadddeeff7b128f","sys_updated_by":"admin","sys_created_on":"2023-09-27 01:00:39","sys_name":"Data Manager Publish Policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFunction = function() {\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n\t\tproxy.publishPolicy(input.policyId);\n\t};\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Publish Policy\", wrapperFunction);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"policyId\",\r\n    \"label\": \"Policy Sys Id\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Sys Id of the policy to be published\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_69d1d95953a97110fdadddeeff7b128f","api_name":"sn_cmdb_ws.Data Manager Publish Policy","mutates_server_data":"true","name":"Data Manager Publish Policy","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Role\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-01-31 04:42:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6a8876714300421016817a372ab8f215","sys_updated_by":"admin","sys_created_on":"2024-01-31 04:24:04","sys_name":"Fetch users having selected role","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var rolesUtility = new SDRolesUtility();\n    return rolesUtility.getUsersWithGivenRole(input.role);\n}","acl_failure_result":"","props":"[{\r\n    \"name\": \"role\",\r\n    \"label\": \"Role\",\r\n    \"description\": \"\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_update_name":"sys_ux_data_broker_transform_6a8876714300421016817a372ab8f215","api_name":"sn_sd.Fetch users having selected role","mutates_server_data":"false","name":"Fetch users having selected role","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Content Block Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Evaluate child content blocks\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page Params\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page parameters(optional and required)\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-04-14 10:47:25","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6aea892e5331011033cdddeeff7b1275","sys_updated_by":"admin","sys_created_on":"2022-02-23 19:26:23","sys_name":"ACE - load lazy blocks","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.blockId)\n        return {};\n    var pageParams = input.pageParams || {};\n    pageParams[\"_lazy\"] = true;\n    var blockGr = new GlideRecord('sn_ace_content_block');\n    if (!blockGr.get(input.blockId))\n        return {};\n\n    var documentTable = blockGr.getValue('document_table');\n    if (documentTable != 'sn_ace_page')\n        return {};\n\n    var pageGr = new GlideRecord('sn_ace_page');\n    if (!pageGr.get(blockGr.getValue('document_id')))\n        return {};\n\n    var pageVersion = pageGr.getValue('version');\n    if (pageVersion && pageVersion === 'v2')\n        return new ACEAppBuilderUtilV2().getContentBlockPayload(input.blockId, pageParams, input.includeChildBlocks);\n\n    return new ACEAppBuilderUtil().getContentBlockPayload(input.blockId, pageParams, input.includeChildBlocks);\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"blockId\",\n        \"label\": \"Content Block Id\",\n        \"description\": \"Content Block Id\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n    {\n        \"name\": \"pageParams\",\n        \"label\": \"Page Params\",\n        \"description\": \"Page parameters(optional and required)\",\n        \"readOnly\": false,\n        \"fieldType\": \"json\",\n        \"valueType\": \"object\",\n        \"mandatory\": false,\n        \"defaultValue\": \"\"\n    },\n    {\n        \"name\": \"includeChildBlocks\",\n        \"label\": \"Evaluate child content blocks\",\n        \"description\": \"Evaluate child content blocks\",\n        \"readOnly\": false,\n        \"fieldType\": \"boolean\",\n        \"mandatory\": true,\n        \"defaultValue\": false\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_6aea892e5331011033cdddeeff7b1275","api_name":"sn_ace.ACE - load lazy blocks","mutates_server_data":"true","name":"ACE - load lazy blocks","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Turns the public flag off for all Now Assist in VA assistants' agent chat configurations","sys_updated_on":"2024-06-05 22:16:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6b9ddfee70e20610f8772b53c5b8c7d7","sys_updated_by":"admin","sys_created_on":"2024-06-05 21:39:25","sys_name":"Deactivate public assistant agent chats","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform() {\n\tnew global.NowAssistInVAAdminConsoleUtil().deactivateAllPublicAssistants();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_6b9ddfee70e20610f8772b53c5b8c7d7","api_name":"sn_oe_sfs.Deactivate public assistant agent chats","mutates_server_data":"true","name":"Deactivate public assistant agent chats","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"recordId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"returnFields\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6bd58b4677312110ee0d0cc2fa5a99b5","sys_updated_by":"admin","sys_created_on":"2023-03-27 07:29:53","sys_name":"Query Result CI Lookup","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar table = input.table;\n\tvar recordId = input.recordId;\n\tvar returnFields = input.returnFields;\n\tvar gr = new GlideRecord(table);\n\tif (gr.get(recordId)) {\n\t\treturn {primaryCiColumn: gr.getValue(returnFields)};\n\t}\n\treturn {primaryCiColumn: ''};\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false\r\n}, {\r\n  \"name\": \"recordId\",\r\n  \"label\": \"recordId\",\r\n  \"description\": \"recordId\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false\r\n}, {\r\n  \"name\": \"returnFields\",\r\n  \"label\": \"returnFields\",\r\n  \"description\": \"returnFields\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_6bd58b4677312110ee0d0cc2fa5a99b5","api_name":"sn_cmdb_ws.Query Result CI Lookup","mutates_server_data":"false","name":"Query Result CI Lookup","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Member details\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Member details to save\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift details\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift details to save\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift id for fetching shift details\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift name to save\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift state\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift state to save\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-24 09:57:21","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6d07b05177a67110d4fa1aceca5a9918","sys_updated_by":"admin","sys_created_on":"2023-11-15 16:37:51","sys_name":"Shift save flow","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"80","sys_tags":"","script":"function transform(input) {\n\tvar result = new sn_uib_on_call.ShiftUtility().save(input);\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"shift_id\",\r\n    \"label\": \"Shift ID\",\r\n    \"description\": \"Shift id for fetching shift details\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"shift_details\",\r\n    \"label\": \"Shift details\",\r\n    \"description\": \"Shift details to save\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"json\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"member_details\",\r\n    \"label\": \"Member details\",\r\n    \"description\": \"Member details to save\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"json\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"shift_name\",\r\n    \"label\": \"Shift name\",\r\n    \"description\": \"Shift name to save\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"shift_state\",\r\n    \"label\": \"Shift state\",\r\n    \"description\": \"Shift state to save\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_6d07b05177a67110d4fa1aceca5a9918","api_name":"sn_uib_on_call.Shift save flow","mutates_server_data":"false","name":"Shift save flow","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Shift ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift id for fetching shift details\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-28 06:06:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6ed3566b7716021084ef1aceca5a99f6","sys_updated_by":"admin","sys_created_on":"2024-05-27 08:41:05","sys_name":"Get rota details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var result = {};\n    var shiftGr = new GlideRecord('cmn_rota');\n    if (!input.shift_id || !shiftGr.get(input.shift_id)) {\n        return result;\n    }\n\n    result.shiftName = shiftGr.getValue('name');\n    result.shiftSysID = shiftGr.getUniqueValue();\n    result.active = shiftGr.getValue('active');\n    result.state = shiftGr.getValue('state');\n    result.shift_state = shiftGr.getValue('state');\n    return result;\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"shift_id\",\r\n    \"label\": \"Shift ID\",\r\n    \"description\": \"Shift id for fetching shift details\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_6ed3566b7716021084ef1aceca5a99f6","api_name":"sn_uib_on_call.Get rota details","mutates_server_data":"false","name":"Get rota details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Is File Navigator Enabled?\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Hydrates server-side cache for taxonomy structure only if File Navigator is enabled.","sys_updated_on":"2024-12-04 11:53:35","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6f41ebcbf3ce121000baad941484cad2","sys_updated_by":"admin","sys_created_on":"2024-11-28 10:52:59","sys_name":"Hydrate cache","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8a841f2bc42f457e8809ea71d35e821f","value":"8a841f2bc42f457e8809ea71d35e821f"},"sys_created_by":"admin","sys_mod_count":"21","sys_tags":"","script":"function transform(input) {\n    let isFileNavigatorEnabled = false;\n\n    try {\n        // TODO: Remove the below code once DEF0589428 is fixed\n        const studioShellConfig = input?.isFileNavigatorEnabled ?\n            JSON.parse(input.isFileNavigatorEnabled) :\n            null;\n        isFileNavigatorEnabled = studioShellConfig?.fileNavigatorConfig?.enabled ?? false;\n    } catch (error) {\n        gs.error(`Error parsing isFileNavigatorEnabled: ${error.message}`);\n    }\n\n    if (isFileNavigatorEnabled) {\n        FileTaxonomy.cacheAndGetTaxonomyStructure();\n    }\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"isFileNavigatorEnabled\",\r\n        \"label\": \"Is File Navigator Enabled?\",\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": false\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8a841f2bc42f457e8809ea71d35e821f","value":"8a841f2bc42f457e8809ea71d35e821f"},"sys_update_name":"sys_ux_data_broker_transform_6f41ebcbf3ce121000baad941484cad2","api_name":"sn_udc.Hydrate cache","mutates_server_data":"false","name":"Hydrate cache","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data Egress Trend Date Filter Condition.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Date Filter Condition\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Returns Data Egress Trends for a selected time period.","sys_updated_on":"2024-10-15 08:29:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"6fc687f837a942105408edd734924b84","sys_updated_by":"admin","sys_created_on":"2024-04-11 16:25:53","sys_name":"Data Egress Trends","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_created_by":"admin","sys_mod_count":"43","sys_tags":"","script":"function transform(input) {\nvar trendDataArr = [];\nvar trendDataObj = {};\nvar trendValArr = [];\nvar counter = 0;\nvar divisor = 1;\nvar suffixes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\",\"PB\"];\nvar labelMappings = {\n\t\"EXPORTURI\" : \"URI\",\n\t\"EXPORTSET\" : \"Export Sets\",\n\t\"APIREST\" : \"REST\",\n\t\"APISOAP\" : \"SOAP\",\n\t\"APIJSONV2\" : \"JSON\"\n};\nvar dateFilterConditon = input.dateFilterCondition || \"sys_created_onBETWEENjavascript:gs.beginningOfLast12Months()@javascript:gs.endOfYesterday()\";\nvar ga = new GlideAggregate(\"data_egress_count\");\nga.addEncodedQuery(dateFilterConditon, true);\nga.query();\nwhile(ga.next()) {\n\tvar sourceType = ga.getValue('source');\n\tif (!trendDataObj[sourceType]) {\n\t\ttrendDataObj[sourceType] = {\n        \"data\": [],\n        \"metadata\": {\n            \"eventData\": {\n                \"indicatorSysid\": \"fb007202d7130100b96d45a3ce6103b4\"\n            },\n            \"dataSourceLabel\": \"\",\n            \"series\": [\n                {\n                    \"label\": \"\",\n                    \"id\": \"value\",\n                    \"type\": \"value\"\n                }\n            ],\n            \"aggregate\": {\n                \"fieldType\": \"decimal\"\n            },\n            \"format\": {\n                \"unitFormat\": \"{0}\",\n                \"frequency\": \"daily\",\n                \"precision\": 2\n            }\n        },\n        \"thresholds\": [],\n        \"comments\": []\n    };\n\t\ttrendDataObj[sourceType].metadata.dataSourceLabel = labelMappings[sourceType];\n\t}\n\tvar timeStampVar = new GlideDateTime(ga.getValue(\"agg_period\")).getNumericValue();\n\tvar trendVal = ga.getValue('aggregation_value');\n\tif (timeStampVar > 0 && trendVal > 0) {\n\t\tvar trendData = {\n                \"timestamp\":  timeStampVar,\n                \"value\": trendVal\n    };\n\ttrendValArr.push(trendVal);\n\ttrendDataObj[sourceType].data.push(trendData);\n\t}\n}\n\nif (trendValArr.length > 0) {\n\tvar trendValuesSorted = trendValArr.sort((a, b) => a- b);\n    var tVal = trendValuesSorted[0];\n    while (tVal > 999) {\n    \ttVal = tVal/1000;\n    \tcounter = counter + 1;\n\t\tdivisor = divisor*1000;\n    }\n}\n\nfor (var myObj in trendDataObj) {\n\tvar sourceObj = trendDataObj[myObj];\n    sourceObj.data = sourceObj.data.sort((a, b) => a.timestamp - b.timestamp);\n\tif (counter > 0) {\n\t\tsourceObj.data = sourceObj.data.map((ele) => ({\"timestamp\":  ele.timestamp, \"value\" : (ele.value/(divisor))}));\n\t}\n    trendDataArr.push(sourceObj);\n}\nreturn {\"dataTrend\" : trendDataArr, \"dataMetric\" : \"Data Exported (in \" + suffixes[counter] +\")\"};\n}\t","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"dateFilterCondition\",\r\n        \"label\": \"Date Filter Condition\",\r\n        \"description\": \"Data Egress Trend Date Filter Condition.\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_update_name":"sys_ux_data_broker_transform_6fc687f837a942105408edd734924b84","api_name":"sn_ih_usage_app.Data Egress Trends","mutates_server_data":"false","name":"Data Egress Trends","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Consumable quantity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Consumable record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Quantity\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-09-28 10:41:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7005eb47c7023010dbbc784c95c260e7","sys_updated_by":"admin","sys_created_on":"2021-08-23 10:11:09","sys_name":"Mark for disposal","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"23","sys_tags":"","script":"function transform(input) {\n    var updatedQuantity = input.quantity;\n\tvar consumableSysId = input.sysId;\n\tvar totalQuantity = input.consQty;\n\n\tif (updatedQuantity > totalQuantity) {\n\t\tgs.addErrorMessage(gs.getMessage(\"Please enter a quantity less than or equal to the total quantity\"));\n\t} else {\n\t\tnew global.Consumables().markReadyForDisposal(consumableSysId, updatedQuantity, '6', 'pending_disposal');\n\t}\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"quantity\",\r\n  \"label\": \"Quantity\",\r\n  \"fieldType\": \"number\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"consQty\",\r\n  \"label\": \"Consumable quantity\",\r\n  \"fieldType\": \"number\",\r\n  \"mandatory\": false\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Consumable record\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_7005eb47c7023010dbbc784c95c260e7","api_name":"sn_itam_workspace.Mark for disposal","mutates_server_data":"true","name":"Mark for disposal","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get chat settings plugin status;\r\n  - Agent - Toolbar Quick actions\r\n  - Profanity plugin status","sys_updated_on":"2022-03-26 09:41:19","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7080c513c34a0110fc869bc8a840dd00","sys_updated_by":"admin","sys_created_on":"2022-03-10 13:32:42","sys_name":"CI chat settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\n\tresult.chat_setup = {};\n\tvar settingsGr = new GlideRecord('sys_cs_live_agent_setup');\n\tsettingsGr.query();\n\tif (settingsGr.next() && settingsGr.canRead()) {\n\t\tvar _chatSettings = {\n\t\t\tsys_id: settingsGr.getUniqueValue(),\n\t\t\treadOnly: !settingsGr.canWrite()\n\t\t};\n\n\t\tif (_chatSettings.readOnly && !isInSelectedScope(settingsGr)) {\n\t\t\tvar expectedScope = settingsGr.getDisplayValue('sys_scope') || 'Global';\n\t\t\t_chatSettings.crossScopeMessage = gs.getMessage('This page can only be edited when {0} is the current application. Change the scope to make any updates.', '<strong>' + expectedScope + '</strong>');\n\t\t}\n\n\t\tvar isLiveAgentEnabled = settingsGr.getValue('live_agent_enabled');\n\t\t_chatSettings['live_agent_enabled'] = {\n\t\t\tvalue: (isLiveAgentEnabled == \"0\") ? false : (isLiveAgentEnabled == \"1\") ? true : isLiveAgentEnabled,\n\t\t\tdisplayValue: settingsGr.getDisplayValue('live_agent_enabled')\n\t\t};\n\n\t\tresult.chat_setup = _chatSettings;\n\t} else {\n\t\t// TODO : Domain handling and update error message\n\t\tresult.chat_setup = {\n\t\t\terror: gs.getMessage('Unable to fetch chat settings. Contact system administrator for details')\n\t\t};\n\t}\n\n\treturn result;\n\n\n\tfunction isInSelectedScope(gr) {\n\t\tvar currentScope = gs.getCurrentScopeName();\n\t\tvar grScope = gr.getValue('sys_scope');\n\t\treturn currentScope == grScope;\n\t}\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_7080c513c34a0110fc869bc8a840dd00","api_name":"sn_oe_sfs.CI chat settings","mutates_server_data":"false","name":"CI chat settings","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Activity Pattern Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Activity Pattern sys id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Deflection Configuration Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Deflection Configuration sys id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get Deflection Pattern Details","sys_updated_on":"2021-11-20 16:33:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"717e8d7e8731b010a4a2c077f6cb0bb4","sys_updated_by":"admin","sys_created_on":"2021-08-09 18:10:40","sys_name":"Get Deflection Pattern Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"31","sys_tags":"","script":"function transform(input) {\n\n    function getActivityPatternDetails(sysId) {\n        var activityPatternGR = new GlideRecord('ssa_activity_pattern');\n        activityPatternGR.addQuery(\"sys_id\", sysId);\n        activityPatternGR.query();\n        var patternData = {};\n        if (activityPatternGR.next()) {\n            patternData.name = activityPatternGR.getValue(\"name\");\n            patternData.outcome = activityPatternGR.getValue(\"outcome\");\n            patternData.activity_table = activityPatternGR.primary_activity.activity_source_table.getValue();\n            patternData.feed_conditions = activityPatternGR.primary_activity.feed_conditions.getValue();\n        }\n        return patternData;\n    }\n\n    function getDeflectionConfigDetails(sysId) {\n        var deflection_configuration_GR = new GlideRecord('ssa_deflection_configuration');\n        deflection_configuration_GR.addQuery(\"sys_id\", sysId);\n        deflection_configuration_GR.query();\n        if (deflection_configuration_GR.next()) {\n            return {\n                \"id\": sysId,\n                \"name\": deflection_configuration_GR.getDisplayValue(\"name\")\n            };\n        }\n        return \"\";\n    }\n\n    function getApplicationScope(dfConfigId, patternId) {\n        var gr = new GlideRecord(\"ssa_deflection_pattern\");\n        gr.addQuery('deflection_configuration', dfConfigId);\n        gr.addQuery('activity_pattern', patternId);\n        gr.query();\n        if (gr.next()) {\n            return gr.getDisplayValue(\"sys_scope\");\n        }\n        return \"\";\n    }\n\n    var response = {\n        \"name\": \"\",\n        \"outcome\": \"20\",\n        \"primary_activity_table\": \"--None--\",\n        \"filter_conditions\": \"\",\n        \"deflection_config_name\": \"\",\n        \"deflection_config_id\": \"\",\n        \"alert\": \"\",\n        \"outcome_choices\": GlideScriptChoiceList.getChoiceList('ssa_activity_pattern', 'outcome')\n    };\n\n    var activityPatternId = input.activityPatternId;\n    var deflectionConfigId = input.deflectionConfigId;\n    var defConfigDetails = getDeflectionConfigDetails(deflectionConfigId);\n    if (defConfigDetails != \"\") {\n        response[\"deflection_config_name\"] = defConfigDetails.name;\n        response[\"deflection_config_id\"] = defConfigDetails.id;\n    }\n\n    if (activityPatternId != \"-1\") {\n        var userScope = gs.getCurrentApplicationId();\n        userScope = userScope == 'rhino.global' ? 'global' : userScope;\n        var recordScope = getApplicationScope(defConfigDetails.id, activityPatternId);\n        var clickHereLink = \"/ssa_activity_pattern.do?sys_id=\" + activityPatternId;\n        if (userScope != 'global' || recordScope != 'Global')\n            response[\"alert\"] = gs.getMessage(\"<p>This record is in the {0} application. To edit this record click \" + '<a href = {1} target = \"_blank\" style = \"color:RGB(1,89,107)\">here</a><p>', [recordScope, clickHereLink]);\n\n        var activityPatternDetails = getActivityPatternDetails(activityPatternId);\n        if (activityPatternDetails) {\n            response[\"name\"] = activityPatternDetails.name;\n            response[\"outcome\"] = activityPatternDetails.outcome;\n            response[\"primary_activity_table\"] = activityPatternDetails.activity_table;\n            response[\"filter_conditions\"] = activityPatternDetails.feed_conditions;\n        }\n    }\n\n    return response;\n}","acl_failure_result":"","props":"[{\n  \"name\": \"activityPatternId\",\n  \"label\": \"Activity Pattern Id\",\n  \"description\": \"Activity Pattern sys id\",\n  \"readOnly\": false,\n  \"fieldType\": \"object\",\n  \"mandatory\": false,\n  \"defaultValue\": \"\"\n},\n{\n  \"name\": \"deflectionConfigId\",\n  \"label\": \"Deflection Configuration Id\",\n  \"description\": \"Deflection Configuration sys id\",\n  \"readOnly\": false,\n  \"fieldType\": \"object\",\n  \"mandatory\": false,\n  \"defaultValue\": \"\"\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sys_ux_data_broker_transform_717e8d7e8731b010a4a2c077f6cb0bb4","api_name":"global.Get Deflection Pattern Details","mutates_server_data":"false","name":"Get Deflection Pattern Details","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data manager add to exclusion payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Payload of exclusion metadata, sysIds, policy types, etc\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Adds to data manager exclusion list","sys_updated_on":"2024-05-07 11:09:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"71c277fecb99f11078520592a2e86611","sys_updated_by":"admin","sys_created_on":"2023-09-19 18:23:40","sys_name":"Data Manager save exclusion list","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"24","sys_tags":"","script":"function transform(input) {\n    var payload = input.payload;\n\n    var policyTypesList = payload.policyTypesList;\n    var recordSelection = payload.recordSelection;\n    var dataFilter = payload.dataFilter;\n    var encodedQuery = \"\";\n    if (global.JSUtil.notNil(dataFilter.encoded_query)) {\n        encodedQuery = dataFilter.encoded_query + \"^\";\n    }\n\n    var query = \"\";\n    if (global.JSUtil.notNil(recordSelection.query)) {\n        query = recordSelection.query;\n    }\n\n    var queryFilter = {\n        \"table\": recordSelection.table,\n        \"encoded_query\": recordSelection.allRecordsSelected ? encodedQuery + query : query\n    };\n    var isExclusionQueued = false;\n    var totalCount = 0;\n    var proxy = new sn_cmdb_ws.CMDBWsDMPolicyTypeManager();\n    for (var i = 0; i < policyTypesList.length; i++) {\n        var policyTypeId = policyTypesList[i].itemId;\n        var recordsSelected = recordSelection.selectionCount;\n        var wrapperFunction = function() {\n            return proxy.addRecordToExclusionListUsingQueryFilter(policyTypeId, queryFilter, recordsSelected);\n        };\n        var intermediateCount = new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Add to exclusion save list for policy type \" + policyTypesList[i].label, wrapperFunction);\n        if (intermediateCount < 0)\n            isExclusionQueued = true;\n        else\n            totalCount += intermediateCount;\n    }\n    return {\n        \"insertedRecordCount\": isExclusionQueued ? -1 : totalCount\n    };\n\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"payload\",\r\n    \"label\": \"Data manager add to exclusion payload\",\r\n    \"fieldType\": \"json\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Payload of exclusion metadata, sysIds, policy types, etc\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_71c277fecb99f11078520592a2e86611","api_name":"sn_cmdb_ws.Data Manager save exclusion list","mutates_server_data":"true","name":"Data Manager save exclusion list","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Experience Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Knowledge Fetch Result\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Properties for the Activity UI Macroponent content\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Result of fetch for knowledge record\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Transform output of Playbook Knowledge Card Fetch to component property format","sys_updated_on":"2021-08-31 18:55:01","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"720267bbc3023010948404186e40dd3f","sys_updated_by":"admin","sys_created_on":"2021-08-25 18:01:25","sys_name":"Playbook Experience Playbook Knowledge Card Output","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    var experienceProperties = input.experienceProperties || {};\n    var fetchResult = input.fetchResult || {};\n\n    var knowledgeTable = (experienceProperties.knowledge_table && experienceProperties.knowledge_table.value) || \"\";\n\n    var knowledgeResult = (\n        fetchResult.data &&\n        fetchResult.data.GlideRecord_Query &&\n        fetchResult.data.GlideRecord_Query[knowledgeTable] &&\n        fetchResult.data.GlideRecord_Query[knowledgeTable]._results &&\n        fetchResult.data.GlideRecord_Query[knowledgeTable]._results[0]\n    ) || {};\n    var shortDescription = (knowledgeResult.short_description && knowledgeResult.short_description.displayValue) || {};\n    var snippetHTML = (knowledgeResult.text && knowledgeResult.text.value) || \"\";\n    var updated = (knowledgeResult.sys_updated_on && knowledgeResult.sys_updated_on.displayValue) || \"\";\n    var views = (knowledgeResult.sys_view_count && knowledgeResult.sys_view_count.displayValue) || \"\";\n\n    var footerLabel = gs.getMessage(\"Updated {0}  {1} views\", [updated, views]);\n\n    function getFooterLabelRichText(label) {\n        return '<p className=\"now-card-footer-p\"><span className=\"now-line-height-crop\"><span className=\"now-card-footer-label\" title=\"' + label + '\">' + label + '</span></span></p>';\n    }\n\n    return {\n        heading: {\n            label: shortDescription\n        },\n        snippet: snippetHTML.replace(/<[^>]+>/g, ''),\n        footerLabelRichText: getFooterLabelRichText(footerLabel)\n    };\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"fetchResult\",\n    \"label\": \"Knowledge Fetch Result\",\n    \"description\": \"Result of fetch for knowledge record\",\n    \"readOnly\": false,\n    \"fieldType\": \"json\",\n    \"mandatory\": true\n  },\n  {\n    \"name\": \"experienceProperties\",\n    \"label\": \"Experience Properties\",\n    \"description\": \"Properties for the Activity UI Macroponent content\",\n    \"readOnly\": false,\n    \"fieldType\": \"json\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_update_name":"sys_ux_data_broker_transform_720267bbc3023010948404186e40dd3f","api_name":"sn_playbook_exp.Playbook Experience Playbook Knowledge Card Output","mutates_server_data":"false","name":"Playbook Experience Playbook Knowledge Card Output","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Task IDs\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-25 18:46:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"72344b38731471103f3cc3ed8ff6a78f","sys_updated_by":"admin","sys_created_on":"2023-07-25 16:45:01","sys_name":"De-Duplication Template Remove Tasks","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar taskIds = input.taskIds.split(',');\n\n\tvar util = new global.CMDBDuplicateTemplateUtils();\n\tresult = util.removeTemplateFromTasks(taskIds); \n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"taskIds\",\r\n      \"label\": \"Task IDs\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_72344b38731471103f3cc3ed8ff6a78f","api_name":"sn_cmdb_ws.De-Duplication Template Remove Tasks","mutates_server_data":"true","name":"De-Duplication Template Remove Tasks","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data manager properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Properties\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Resets all the Data manager properties to its corresponding default value","sys_updated_on":"2023-10-09 20:36:47","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"727e15d7b7693110c44580408e11a975","sys_updated_by":"admin","sys_created_on":"2023-10-03 07:08:40","sys_name":"Data Manager Reset to Default Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var wrapperFn = function() {\n\t\tvar properties = input.properties;\n        var proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n        proxy.resetToDefaultProperties(properties);\n    };\n\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Reset to Default Properties\", wrapperFn);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"properties\",\r\n    \"label\": \"Properties\",\r\n    \"fieldType\": \"array\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Data manager properties\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_727e15d7b7693110c44580408e11a975","api_name":"sn_cmdb_ws.Data Manager Reset to Default Properties","mutates_server_data":"true","name":"Data Manager Reset to Default Properties","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Phone Numbers\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Phone numbers array\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-10-31 19:49:50","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"72b0e7e44349f110377050e01fb8f249","sys_updated_by":"admin","sys_created_on":"2023-08-31 07:03:52","sys_name":"Validate user phone number","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\tvar numbers = input.phoneNumbers;\n\tvar userId = gs.getUserID();\n\n\tvar invalidNumbers = {\n\t\tnumbers: [],\n\t\tisValid: true\n\t};\n\n\tif (!numbers || !numbers.length) return invalidNumbers;\n\n\tfor (var numberIdx = 0; numberIdx < numbers.length; numberIdx++) {\n\t\tvar number = numbers[numberIdx];\n\t\tif (!(new global.PhoneNumberValidationUtils().validatePhoneNumberForSysUser(number))) {\n\t\t\tinvalidNumbers.isValid = false;\n\t\t\tinvalidNumbers.numbers.push(number);\n\t\t}\n\t}\n\n\tif (invalidNumbers.numbers.length) {\n\t\tinvalidNumbers.numbers = invalidNumbers.numbers.join(\",\");\n\t}\n\n\treturn invalidNumbers;\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"phoneNumbers\",\r\n    \"label\": \"Phone Numbers\",\r\n    \"description\": \"Phone numbers array\",\r\n    \"fieldType\": \"json\",\r\n    \"valueType\": \"object\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_72b0e7e44349f110377050e01fb8f249","api_name":"sn_uib_on_call.Validate user phone number","mutates_server_data":"false","name":"Validate user phone number","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Incident Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Incident SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record Table Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Requestor User Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-01-11 11:56:03","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"72be2d6053810110a487ddeeff7b12d0","sys_updated_by":"admin","sys_created_on":"2022-01-11 10:13:39","sys_name":"CollabChannelUtils","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) { \n\tvar output = {};\n\toutput.channelData = new sn_sow_collab.SowCollabUtils().handleChannelRedirect(input.recordSysId, input.tableName, input.requestorData);\n\treturn output;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"recordSysId\",\n    \"label\": \"Incident SysId\",\n    \"description\": \"Incident Sys Id\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"tableName\",\n    \"label\": \"Record Table Name\",\n    \"description\": \"Record Table Name\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"requestorData\",\n    \"label\": \"Requestor User Data\",\n    \"description\": \"Requestor User Data\",\n    \"fieldType\": \"json\",\n    \"valueType\": \"object\",\n    \"readOnly\": false,\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_update_name":"sys_ux_data_broker_transform_72be2d6053810110a487ddeeff7b12d0","api_name":"sn_sow_collab.CollabChannelUtils","mutates_server_data":"false","name":"CollabChannelUtils","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Shift Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-10-16 05:13:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7311cca3eb713110b2378d835d522863","sys_updated_by":"admin","sys_created_on":"2023-10-16 05:13:17","sys_name":"Update shift name","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tif (input.sysId && input.name) {\n\t\tvar shiftGr = new GlideRecord('cmn_rota');\n\t\tif (shiftGr.get(input.sysId)) {\n\t\t\tshiftGr.name = input.name + \"\";\n\t\t\tshiftGr.update();\n\t\t}\n\t}\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"sysId\",\r\n    \"label\": \"Shift Sys Id\",\r\n    \"description\": \"Shift Sys Id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"name\",\r\n    \"label\": \"Shift name\",\r\n    \"description\": \"Shift name\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_7311cca3eb713110b2378d835d522863","api_name":"sn_uib_on_call.Update shift name","mutates_server_data":"false","name":"Update shift name","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Role\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected users\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-02-08 15:07:18","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"735dec2043d0821016817a372ab8f212","sys_updated_by":"admin","sys_created_on":"2024-02-08 07:18:49","sys_name":"Assign role to users","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n\t  var rolesUtility = new SDRolesUtility();\n    return rolesUtility.assignSDRole(input.selectedUsers, input.role);    \n}","acl_failure_result":"","props":"[{\n    \"name\": \"selectedUsers\",\n    \"label\": \"Selected users\",\n    \"readOnly\": false,\n    \"fieldType\": \"object\"\n  },{\n     \"name\": \"role\",\n    \"label\": \"Role\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"defaultValue\": \"\"\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_update_name":"sys_ux_data_broker_transform_735dec2043d0821016817a372ab8f212","api_name":"sn_sd.Assign role to users","mutates_server_data":"true","name":"Assign role to users","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Checks whether user has read access on the given record or not ","sys_updated_on":"2024-10-15 07:33:18","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"736e0ca843811210c04d8772d9b8f287","sys_updated_by":"admin","sys_created_on":"2024-10-01 08:15:36","sys_name":"Check read access on record","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var table = input.table;\n    var sysId = input.sysId;\n    if (!table || table === \"\" || !sysId || sysId === \"\") {\n        return false;\n    }\n    var gr = new GlideRecord(table);\n    gr.get(sysId);\n\n    return gr.isValidRecord() && gr.canRead();\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"SysId\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_736e0ca843811210c04d8772d9b8f287","api_name":"sn_sow_itsm_common.Check read access on record","mutates_server_data":"false","name":"Check read access on record","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-10-18 07:24:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7413aaee9f401210afb85c1eca0a1cb0","sys_updated_by":"admin","sys_created_on":"2024-08-19 07:09:09","sys_name":"Available Products for Monitoring Offensiveness","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"83","sys_tags":"","script":"function transform() {\n    try {\n        var naaUtil = new sn_nowassist_admin.NowAdminAssistUtil();\n        var grUtil = new sn_nowassist_admin.NowAssistAdminGuardrails();\n        var metaUtil = new sn_nowassist_admin.NowAdminAssistMetadata();\n        var availableProducts = [];\n        var activeProducts = [];\n        var workflows = naaUtil.getWorkflows();\n        workflows.forEach(function(workflow) {\n            var allProducts = naaUtil.getProducts(workflow?.id);\n            //Adding skills under workflows\n            if (allProducts.length === 0 && workflow?.id !== metaUtil.PLATFORM_WORKFLOW_ID) {\n                allProducts.push(workflow);\n            }\n            allProducts.forEach(function(product) {\n\n                var skills = naaUtil.getSkillsOfProduct(product?.id);\n                if (skills.length !== 0) {\n                    // Check if atleast one skill is active\n                    var isActive = false;\n                    for (let skill of skills) {\n                        if (skill?.active) {\n                            isActive = true;\n                        }\n                    }\n                    // Get Detection Impact of the product\n                    var result = grUtil.getDetectionImpact(skills, metaUtil.NOW_ASSIST_GUARDIAN?.OFFENSIVENESS_TYPE);\n                    if (result?.detectionImpact === metaUtil.NOW_ASSIST_GUARDIAN.OFF || result?.detectionImpact === \"\") {\n                        if (isActive) {\n                            var offensivenessDescription;\n                            switch (product?.name) {\n                                case 'ITSM':\n                                case 'CSM':\n                                case 'HRSD':\n                                case 'Security Operations':\n                                case 'FSM':\n                                case 'PSDS':\n                                    offensivenessDescription = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Add logging and the option to block offensive content for Now Assist for {name} summarization and generation skills.\", {\n                                        name: product?.name\n                                    });\n                                    break;\n                                case 'FSO':\n                                case 'LSD':\n                                    offensivenessDescription = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Add logging and the option to block offensive content for Now Assist for {name} summarization skills.\", {\n                                        name: product?.name\n                                    });\n                                    break;\n                                case 'Creator':\n                                    offensivenessDescription = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Add logging and the option to block offensive content for Now Assist for {name} for the catalog item generation skill.\", {\n                                        name: product?.name\n                                    });\n                                    break;\n                                case 'Sourcing and Procurement Operations':\n                                    offensivenessDescription = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Add logging and the option to block offensive content for Now Assist for SPO summarization and conversational intake skills.\");\n                                    break;\n                                case 'Supplier Lifecycle Operations':\n                                    offensivenessDescription = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Add logging and the option to block offensive content for Now Assist for SLO summarization skills.\");\n                                    break;\n                                case 'Accounts Payable Operations':\n                                    offensivenessDescription = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Add logging and the option to block offensive content for Now Assist for APO summarization skills.\");\n                                    break;\n                                case 'ITOM':\n                                    offensivenessDescription = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Add logging and the option to block offensive content for Now Assist for {name} alert skills.\", {\n                                        name: product?.name\n                                    });\n                                    break;\n                                case 'SPM':\n                                    offensivenessDescription = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Add logging and the option to block offensive content for Now Assist for {name} summarization and docs skills.\", {\n                                        name: product?.name\n                                    });\n                                    break;\n                                case 'CMDB':\n                                    offensivenessDescription = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Add logging and the option to block offensive content for Now Assist for {name} configuration item summarization skill.\", {\n                                        name: product?.name\n                                    });\n                                    break;\n                                case 'Other':\n                                    offensivenessDescription = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Add logging and the option to block offensive content for custom skills created with Now Assist Skill Kit.\");\n                                    break;\n                                default:\n                                    offensivenessDescription = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Add logging and the option to block offensive content for Now Assist for {name} skills.\", {\n                                        name: product?.name\n                                    });\n                                    break;\n                            }\n                            availableProducts.push({\n                                id: product?.id,\n                                name: product?.name,\n                                description: offensivenessDescription,\n                            });\n                        }\n                    } else {\n                        activeProducts.push({\n                            id: product?.id,\n                            name: product?.name,\n                            controlSettingData: result,\n                            isActive: isActive\n                        });\n                    }\n                }\n            });\n        });\n        return {\n            availableProducts: availableProducts,\n            activeProducts: activeProducts\n        };\n    } catch (error) {\n        gs.error(\"Error in getting products for Monitoring offensiveness data broker :\" + error.toString());\n    }\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_7413aaee9f401210afb85c1eca0a1cb0","api_name":"sn_nowassist_admin.Available Products for Monitoring Offensiveness","mutates_server_data":"false","name":"Available Products for Monitoring Offensiveness","output_schema":"","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"Disable Spell Checking\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Converts disable spell check input value to boolean if string type is found","sys_updated_on":"2022-10-14 14:21:02","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"74d44119c32211105afe6e070440dd4e","sys_updated_by":"admin","sys_created_on":"2022-10-14 00:50:41","sys_name":"Transform disable spell check input data to boolean ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    var disableSpellCheckBooleanValue = input.disableSpellCheck;\n    if (typeof disableSpellCheckBooleanValue === 'string') {\n        return disableSpellCheckBooleanValue.trim().toLowerCase() === 'true';\n    }\n    return disableSpellCheckBooleanValue ;\n}","acl_failure_result":"","props":"[\r\n\r\n    {\r\n        \"name\": \"disableSpellCheck\",\r\n        \"label\": \"Disable Spell Checking\",\r\n        \"description\": \"Disable Spell Checking\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": false\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_74d44119c32211105afe6e070440dd4e","api_name":"global.Transform disable spell check input data to boolean ","mutates_server_data":"false","name":"Transform disable spell check input data to boolean ","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-18 22:24:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"76338eb3433021101f401daa5ab8f230","sys_updated_by":"admin","sys_created_on":"2023-02-10 20:03:32","sys_name":"HermesTestPorts","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\tvar hd = new HermesDiagnostics();\n\toutput = JSON.parse(hd.getTestPorts(true));\n\treturn output;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/03d4abbf04312210559073c06a02f7f9","value":"03d4abbf04312210559073c06a02f7f9"},"sys_update_name":"sys_ux_data_broker_transform_76338eb3433021101f401daa5ab8f230","api_name":"global.HermesTestPorts","mutates_server_data":"false","name":"HermesTestPorts","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2021-10-12 08:50:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"763398f66d223810f8772a5d501182f6","sys_updated_by":"admin","sys_created_on":"2021-09-15 20:36:46","sys_name":"Get CTA Cards Content","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c2a7835187123010a4a2c077f6cb0bc0","value":"c2a7835187123010a4a2c077f6cb0bc0"},"sys_created_by":"maint","sys_mod_count":"3","sys_tags":"","script":"function transform(){\n\tif (!GlidePluginManager.isActive(\"com.glide.cs.chatbot\"))\n\t    return [];\n\tvar obj = new CILandingPageCTACardsProcessor();\n\n\treturn obj.getAllCards();\n\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c2a7835187123010a4a2c077f6cb0bc0","value":"c2a7835187123010a4a2c077f6cb0bc0"},"sys_update_name":"sys_ux_data_broker_transform_763398f66d223810f8772a5d501182f6","api_name":"sn_ci_landing_exp.Get CTA Cards Content","mutates_server_data":"false","name":"Get CTA Cards Content","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Filter Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-03 16:24:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"76c8b6e37f4c5210b23326d6ac866571","sys_updated_by":"admin","sys_created_on":"2024-08-22 11:08:35","sys_name":"Get Sample Phrases","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n   \n\tvar filterId = input.filterId;\n   \n\ttry {\n    if(gs.nil(filterId)){\n          return null;\n    }\n        \n    var nowAssistGuardianFilterUtil = new sn_nowassist_admin.NowAssistGuardianFilterUtil();\n\t\tvar result = [];\n\t\tresult = nowAssistGuardianFilterUtil.getSamplePhrasesByFilterId(filterId);\n\t\tfor(var i=0;i<result.length;i++){\n\t\t\tresult[i].isEdit = false;\n\t\t}\n\t\t\n    return {samplePhrases: result};\n    } catch (e) {\n      gs.error(\"Failed to fetch Sample Phrases - \" + e.toString());\n      return null;\n    }\n\t\n}","acl_failure_result":"","props":"[\n {\n        \"name\": \"filterId\",\n        \"label\": \"Filter Id\",\n        \"description\": \"Filter Id\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_76c8b6e37f4c5210b23326d6ac866571","api_name":"sn_nowassist_admin.Get Sample Phrases","mutates_server_data":"false","name":"Get Sample Phrases","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Task ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 19:18:16","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"76ee448b77310110ee0d0cc2fa5a9919","sys_updated_by":"maint","sys_created_on":"2022-02-25 04:29:53","sys_name":"Validate data management task record","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    var wrapperFn = function() {\n        var uiProxy = new sn_cmdb_ws.CMDBWsDMTaskUIProxy();\n\t\treturn uiProxy.validateTaskAssignmentToCurrentUser(input.taskId);\n    };\n\n\tvar DM = new CMDBWsDMConstants();\n    return new CMDBWsDataBrokerHandler().execute(DM.DM_ERROR_SOURCE, \"Validate data management task record\", wrapperFn);\n}","acl_failure_result":"","props":"[\r\n{\r\n\"name\": \"taskId\",\r\n\"label\": \"Task ID\",\r\n\"description\": \"Task ID\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"string\",\r\n\"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_76ee448b77310110ee0d0cc2fa5a9919","api_name":"sn_cmdb_ws.Validate data management task record","mutates_server_data":"false","name":"Validate data management task record","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"A map with field and value to create the record as per remedial action parameter definition\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Execution request id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Remedial action params\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of the remedial action execution record\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-03-04 13:55:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"76ef04df43c92110cd5b8beeaab8f271","sys_updated_by":"admin","sys_created_on":"2023-02-21 08:51:56","sys_name":"SOW Remediate create record","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_created_by":"admin","sys_mod_count":"28","sys_tags":"","script":"function transform(inputs) {\n    var changeRemedialActionUtil = new sn_sow_inc.ChangeRemedialActionUtil();\n    return changeRemedialActionUtil.createChange(inputs.remedialActionParams, inputs.remedialActionExecutionId);\n}","acl_failure_result":"","props":"[{\r\n    \"name\": \"remedialActionParams\",\r\n    \"label\": \"Remedial action params\",\r\n    \"description\": \"A map with field and value to create the record as per remedial action parameter definition\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"remedialActionExecutionId\",\r\n    \"label\": \"Execution request id\",\r\n    \"description\": \"Sys id of the remedial action execution record\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_update_name":"sys_ux_data_broker_transform_76ef04df43c92110cd5b8beeaab8f271","api_name":"sn_sow_inc.SOW Remediate create record","mutates_server_data":"true","name":"SOW Remediate create record","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-07-01 13:08:03","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"770f53769f430210afb85c1eca0a1c27","sys_updated_by":"admin","sys_created_on":"2024-07-01 13:08:03","sys_name":"Check if Dark Theme Selected","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var user = gs.getUser();\n    var themeValue = user.getPreference('glide.ui.polaris.theme.variant');\n   return themeValue === \"e09ef7ae07103010e03948f78ad3002c\";\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_770f53769f430210afb85c1eca0a1c27","api_name":"sn_nowassist_admin.Check if Dark Theme Selected","mutates_server_data":"false","name":"Check if Dark Theme Selected","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Group\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Group Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-07-01 08:31:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"773600ed531271105dd2ddeeff7b12cb","sys_updated_by":"admin","sys_created_on":"2023-11-03 20:57:46","sys_name":"Get group rotas","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\tvar onCallCommon = new global.OnCallCommon();\n\tvar onCallEscalation = new global.OnCallEscalation();\n\tvar res = [];\n\n\tvar rotaGr = new GlideRecord('cmn_rota');\n\trotaGr.addEncodedQuery(\"state=draft^NQactive=true\");\n\trotaGr.addQuery('group', input.group + \"\");\n\trotaGr.query();\n\n\twhile(rotaGr.next()) {\n\t\tvar rotaDetails = onCallCommon.toJS(rotaGr, ['sys_id', 'name']);\n\t\tvar escType = onCallEscalation.getEscalationType(rotaDetails.sys_id.value);\n\t\trotaDetails[\"escType\"] = escType || \"\";\n\t\tres.push(rotaDetails);\n\t}\n\n\treturn res;\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t\t\"name\": \"group\",\r\n\t\t\"label\": \"Group\",\r\n\t\t\"description\": \"Group Sys ID\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true,\r\n\t\t\"defaultValue\": \"\"\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_773600ed531271105dd2ddeeff7b12cb","api_name":"sn_uib_on_call.Get group rotas","mutates_server_data":"false","name":"Get group rotas","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Hermes Service\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Is Internal\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Topic Name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-15 05:02:13","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"77568960430121101f401daa5ab8f246","sys_updated_by":"admin","sys_created_on":"2023-02-12 23:32:57","sys_name":"HermesTopicData","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"66","sys_tags":"","script":"function transform(input) {\n\tvar output = {\n\t\t\"topic\": topicName,\n\t\t\"internal\": isInternal,\n\t\t\"timestamp\": \"\"\n    };\n\ttry {\n\t\tvar inspector = new sn_hermes.HermesTopicInspector();\n\t\tvar topicName = input.topicName;\n\t\tvar isInternal = input.isInternal != null ? input.isInternal : false;\n\t\tvar service = input.service;\n\t\tgs.info(\"blabla \"+service);\n\t\tif (topicName) {\n\t\t\tvar message = inspector.getLastMessageFromTopicForService(topicName, isInternal, service);\n\t\t\tif (message == null) {\n\t\t\t\treturn output;\n\t\t\t}\n\t\t\tvar msgTime = message.getTimestamp();\n\t\t\tif (msgTime)\n\t\t\t\toutput.timestamp = msgTime.toString();\n\t\t}\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}","acl_failure_result":"","props":"[\r\n{\r\n\"name\":\"topicName\",\r\n\"label\":\"Topic Name\",\r\n\"fieldType\":\"string\"\r\n},\r\n{\r\n\"name\":\"isInternal\",\r\n\"label\":\"Is Internal\",\r\n\"fieldType\":\"boolean\"\r\n},\r\n{\r\n\"name\":\"service\",\r\n\"label\":\"Hermes Service\",\r\n\"fieldType\":\"string\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/03d4abbf04312210559073c06a02f7f9","value":"03d4abbf04312210559073c06a02f7f9"},"sys_update_name":"sys_ux_data_broker_transform_77568960430121101f401daa5ab8f246","api_name":"global.HermesTopicData","mutates_server_data":"false","name":"HermesTopicData","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Is Display Password\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Password\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-10 12:50:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"77c5e4079f790210d9e5328dda0a1c16","sys_updated_by":"admin","sys_created_on":"2024-04-30 14:49:10","sys_name":"Get PWD Reset Success Page Data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    return new sn_uib_pwd_reset.PwdResetUXFSuccessProcessor().getPasswordToDisplay(input.token, input.password,input.isDisplayPassword);\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n{\r\n      \"name\": \"password\",\r\n      \"label\": \"Password\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false\r\n  },\r\n{\r\n      \"name\": \"isDisplayPassword\",\r\n      \"label\": \"Is Display Password\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"boolean\", \r\n      \"mandatory\": false\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_77c5e4079f790210d9e5328dda0a1c16","api_name":"sn_uib_pwd_reset.Get PWD Reset Success Page Data","mutates_server_data":"false","name":"Get PWD Reset Success Page Data","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Shift Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ShiftSysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-10 11:06:49","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7848bf3f53813110ad0fddeeff7b12c9","sys_updated_by":"admin","sys_created_on":"2023-09-10 11:01:37","sys_name":"Delete shift","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\tif (input.shiftSysId) {\n\t\tvar shiftGr = new GlideRecord('cmn_rota');\n\t\tshiftGr.addQuery('sys_id', input.shiftSysId);\n\t\tshiftGr.query();\n\t\tif (shiftGr.next())\n\t\t\tshiftGr.deleteRecord();\n\t}\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"shiftSysId\",\r\n    \"label\": \"ShiftSysId\",\r\n    \"description\": \"Shift Sys Id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_7848bf3f53813110ad0fddeeff7b12c9","api_name":"sn_uib_on_call.Delete shift","mutates_server_data":"false","name":"Delete shift","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Required user roles\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Check whether user has given roles or not","sys_updated_on":"2023-09-20 05:42:34","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"78505c35b7ea1010f03e9b7ade11a91b","sys_updated_by":"admin","sys_created_on":"2020-08-11 01:28:08","sys_name":"Check for user roles","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/e92e72c9b7021010e54deb56ee11a9bf","value":"e92e72c9b7021010e54deb56ee11a9bf"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\tvar output = {};\n\tvar roles = (input.roles || \"\").split(\",\");\n\tif(roles && roles.length > 0) {\n\t\tvar size = roles.length;\n\t\tfor(var i = 0; i < size; i++) {\n\t\t\tif(roles[i]) {\n\t\t\t\toutput[roles[i]] = roles[i] === 'catalog_builder_editor_blank_template' ? false : gs.hasRole(roles[i]);\n\t\t\t}\n\t\t}\n\t}\n\treturn output;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"roles\",\r\n    \"label\": \"Required user roles\",\r\n    \"description\": \"\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e92e72c9b7021010e54deb56ee11a9bf","value":"e92e72c9b7021010e54deb56ee11a9bf"},"sys_update_name":"sys_ux_data_broker_transform_78505c35b7ea1010f03e9b7ade11a91b","api_name":"sn_catalog_builder.Check for user roles","mutates_server_data":"false","name":"Check for user roles","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Hermes Service\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"is Internal\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-15 02:44:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"78655b76437021101f401daa5ab8f212","sys_updated_by":"admin","sys_created_on":"2023-02-07 23:30:30","sys_name":"HermesTopics","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"45","sys_tags":"","script":"function transform(input) {\n    var output = [];\n\tvar service = input.service;\n    var inspector = new sn_hermes.HermesTopicInspector();\n\tvar namespace = input.isInternal == false? 'snc': 'sni';\n    var topicsInfo = inspector.getAllTopicsForService( service, namespace);\n\tvar topics = topicsInfo.getTopics();\n\n    if (topics.length > 0) {\n        for (i = 0; i < topics.length; i++) {\n            var topic = topics[i];\n\t\t\tvar name = topic.getName().toString();\n\t\t\toutput.push({\"topic\":name});\n        }\n    }\n    return output;\n}","acl_failure_result":"","props":"[{\r\n\"name\":\"service\",\r\n\"label\":\"Hermes Service\",\r\n\"fieldType\":\"string\"\r\n},\r\n{\r\n\"name\":\"isInternal\",\r\n\"label\":\"is Internal\",\r\n\"fieldType\":\"boolean\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/03d4abbf04312210559073c06a02f7f9","value":"03d4abbf04312210559073c06a02f7f9"},"sys_update_name":"sys_ux_data_broker_transform_78655b76437021101f401daa5ab8f212","api_name":"global.HermesTopics","mutates_server_data":"false","name":"HermesTopics","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Fetch critical updates overdue in last 30 days and due soon in next 60 days","sys_updated_on":"2023-08-22 21:59:23","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"791e8462433b2510adf71f062bb8f24d","sys_updated_by":"maint","sys_created_on":"2023-07-05 17:29:54","sys_name":"Critical Updates Timeline","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\n    var returnObj = {};\n    var dueDateObjectsArray = [];\n    var rangeArray = [];\n    var isEmpty = false;\n    var previousDate = '';\n\n    var todaysDate = new GlideDateTime();\n    todaysDate.getLocalDate();\n\n    var currentDateTime = new GlideDateTime();\n    currentDateTime.getLocalDate();\n    currentDateTime.addDays(-30);\n\n    previousDate = currentDateTime.getLocalDate();\n    var startTime = currentDateTime.getDisplayValue();\n\n    currentDateTime.addDays(91);\n    var endTime = currentDateTime.getDisplayValue();\n\n    var eventList = CriticalUpdatesConstants.TIMELINE_EVENTS.EVENTS;\n    for (var key in eventList) {\n        var timestampArray = [];\n        var timestampArr = [];\n        var rangesArr = [];\n\n        var eventName = eventList[key];\n        if (CriticalUpdatesConstants.TIMELINE_EVENTS.EVENTS_COLOR.hasOwnProperty(key)) {\n            var eventColor = CriticalUpdatesConstants.TIMELINE_EVENTS.EVENTS_COLOR[key];\n        }\n\n        if (eventName == CriticalUpdatesConstants.TIMELINE_EVENTS.EVENTS.DUE_SOON) {\n            timestampArr = getRecords(todaysDate, endTime);\n            rangesArr.push({\n                \"start\": todaysDate.getNumericValue(),\n                \"end\": currentDateTime.getNumericValue(),\n                \"description\": CriticalUpdatesConstants.TIMELINE_EVENTS.EVENTS.DUE_SOON\n            });\n        } else {\n            timestampArr = getRecords(startTime, todaysDate);\n            rangesArr.push({\n                \"start\": previousDate.getNumericValue(),\n                \"end\": todaysDate.getNumericValue(),\n                \"description\": CriticalUpdatesConstants.TIMELINE_EVENTS.EVENTS.OVERDUE\n            });\n        }\n        var localizedEventName = gs.getMessage(\"{0}\", [eventName]);\n        dueDateObjectsArray.push({\n            \"name\": eventName,\n            \"icon\": 'starFill',\n            \"label\": localizedEventName,\n            \"color\": eventColor,\n            \"size\": \"xl\",\n            \"labelPlural\": localizedEventName,\n            \"events\": timestampArr,\n            \"isVisible\": true\n        });\n\n        rangeArray.push({\n            \"name\": eventName,\n            \"label\": localizedEventName,\n            \"color\": eventColor,\n            \"ranges\": rangesArr,\n            \"isVisible\": true\n        });\n    }\n\n    isEmpty = !dueDateObjectsArray.length;\n\n    returnObj = {\n        startDateTime: previousDate.getNumericValue(),\n        endDateTime: currentDateTime.getNumericValue(),\n        isEmpty: isEmpty,\n        dueDateObjectsArray: dueDateObjectsArray,\n        rangeArray: rangeArray\n    };\n\n    return returnObj;\n\n    function getRecords(startTime, endTime) {\n        var gr = new GlideRecord('sn_critical_update');\n        gr.addQuery('up_due_date', '>=', startTime);\n        gr.addQuery('up_due_date', '<=', endTime);\n        gr.addQuery('up_update_status', '!=', 'acknowledged');\n        gr.addQuery('up_active', true);\n        gr.query();\n        while (gr.next()) {\n            var sysId = gr.sys_id.toString();\n            var gdt = new GlideDateTime(gr.up_due_date);\n            gdt.getLocalDate();\n            timestampArray.push({\n                \"timestamp\": gdt.getNumericValue(),\n                \"description\": gr.up_name.getDisplayValue() + \" \" + eventName,\n                \"id\": sysId\n            });\n        }\n\n        return timestampArray;\n    }\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/983e67b304752210559073c06a02f755","value":"983e67b304752210559073c06a02f755"},"sys_update_name":"sys_ux_data_broker_transform_791e8462433b2510adf71f062bb8f24d","api_name":"global.Critical Updates Timeline","mutates_server_data":"false","name":"Critical Updates Timeline","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"gformLastRefresh\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-10-20 23:29:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7b02c902e1173010f87710c901e3230b","sys_updated_by":"admin","sys_created_on":"2021-10-20 22:56:15","sys_name":"Record Information - Walk-up Interaction","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/2290bab1eb4e3010e0ef83c45e5228b5","value":"2290bab1eb4e3010e0ef83c45e5228b5"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    var intGr = new GlideRecord(input.table);\n\n    if (intGr.get(input.sysId) && intGr.canRead()) {\n        var interactionInfo = new WalkupInteractionInfo(intGr);\n        return interactionInfo.getRecordInfo();\n    }\n\n    return {};\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"gformLastRefresh\",\r\n  \"label\": \"gformLastRefresh\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"integer\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/2290bab1eb4e3010e0ef83c45e5228b5","value":"2290bab1eb4e3010e0ef83c45e5228b5"},"sys_update_name":"sys_ux_data_broker_transform_7b02c902e1173010f87710c901e3230b","api_name":"sn_sow_walkup.Record Information - Walk-up Interaction","mutates_server_data":"false","name":"Record Information - Walk-up Interaction","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Schedule Entry Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Schedule Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ScheduleSysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"scheduleEntrySysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Deletes a schedule entry record from the appropriate table","sys_updated_on":"2024-09-05 12:22:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7b49bfcb431012108c5fa32d68b8f2d5","sys_updated_by":"admin","sys_created_on":"2024-09-02 12:51:24","sys_name":"Delete schedule entry record","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n    var scheduleSysId = input.scheduleSysId;\n    var scheduleEntrySysId = input.scheduleEntrySysId;\n    if (gs.nil(scheduleSysId) || gs.nil(scheduleEntrySysId)) return false;\n    var scheduleEntryGr = new GlideRecord('cmn_schedule_span');\n    scheduleEntryGr.addQuery('sys_id', scheduleEntrySysId);\n    scheduleEntryGr.query();\n    if (scheduleEntryGr.next()) {\n        var scheduleEntryScheduleSysId = scheduleEntryGr.getValue('schedule');\n        if (scheduleSysId === scheduleEntryScheduleSysId) {\n            //delete this entry from cmn schedule span table directly\n            if (scheduleEntryGr.canDelete()) {\n                return scheduleEntryGr.deleteRecord();\n            }\n        } else {\n            //get the record from cmn other schedule table and then delete that record \n            var otherScheduleGr = new GlideRecord('cmn_other_schedule');\n            otherScheduleGr.addQuery('child_schedule', scheduleEntryScheduleSysId);\n            otherScheduleGr.addQuery('schedule', scheduleSysId);\n            otherScheduleGr.query();\n            if (otherScheduleGr.next()) {\n                if (otherScheduleGr.canDelete()) {\n                    return otherScheduleGr.deleteRecord();\n                }\n            }\n        }\n    }\n    return false;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"scheduleSysId\",\r\n        \"label\": \"ScheduleSysId\",\r\n        \"description\": \"Schedule Sys Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"scheduleEntrySysId\",\r\n        \"label\": \"scheduleEntrySysId\",\r\n        \"description\": \"Schedule Entry Sys Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/15672bfb04b12210559073c06a02f7e3","value":"15672bfb04b12210559073c06a02f7e3"},"sys_update_name":"sys_ux_data_broker_transform_7b49bfcb431012108c5fa32d68b8f2d5","api_name":"global.Delete schedule entry record","mutates_server_data":"false","name":"Delete schedule entry record","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Priority\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Priority value\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update best practices priority","sys_updated_on":"2023-12-27 01:20:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7b51f52643937110adf71f062bb8f20a","sys_updated_by":"maint","sys_created_on":"2023-12-27 00:23:08","sys_name":"BP Priority Update","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var id = input.sys_id;\n    var priorityValue = input.priority_value;\n    var gr = new GlideRecord(\"sn_vsc_best_practice_configurations\");\n    gr.addQuery(\"sys_id\", id);\n    gr.query();\n    if (gr.next()) {\n        gr.priority = priorityValue;\n        gr.update();\n    }\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"sys_id\",\r\n    \"label\": \"ID\",\r\n    \"description\": \"ID\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true\r\n  },\r\n {\r\n    \"name\": \"priority_value\",\r\n    \"label\": \"Priority\",\r\n    \"description\": \"Priority value\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_7b51f52643937110adf71f062bb8f20a","api_name":"sn_vsc.BP Priority Update","mutates_server_data":"false","name":"BP Priority Update","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[{\"message\":\"GraphQL Data\",\"comment\":\"\"}]","batch_exclude":"false","description":"View Template resolver block of EVAM. Performs following key activities -\r\na) retrieves the actual view component prop-field map, prop-action map corresponding to each data-item that it gets as input from EVAM Data Fetcher\r\nb) runs over each data-item to\r\n- resolve values for view component props using prop-field lookup\r\n- translate or sanitize static values for view component prop\r\n- resolve view component action from prop-action lookup\r\nc) returns list of component with resolved propValues to render each data-item","sys_updated_on":"2020-11-04 21:17:01","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7b652701773300108d070d74c81061b8","sys_updated_by":"admin","sys_created_on":"2020-03-25 23:03:11","sys_name":"Bind data to component prop","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"54","sys_tags":"","script":"function transform(input) {\n\tvar compositeData = input\n\t\t.graphqlData\n\t\t.data\n\t\t.GlideCompositeData_Query\n\t\t.getCompositeData;\n\n\tif (!compositeData) {\n\t\treturn null;\n\t}\n\n\tvar templateIds = [];\n\n\tcompositeData\n\t\t.items\n\t\t.forEach(function (item) {\n\t\t\tif (templateIds.indexOf(item.template) === -1) {\n\t\t\t\ttemplateIds.push(item.template);\n\t\t\t}\n\t\t});\n\n\tvar templates = [];\n\tvar gr = new GlideRecord(\"sys_ux_composite_data_template\");\n\tgr.addQuery(\"sys_id\", \"IN\", templateIds.toString());\n\tgr.addActiveQuery();\n\tgr.query();\n\twhile (gr.next()) {\n\t\tvar template = {\"id\": gr.getUniqueValue(),\n\t\t\t\t\t\t\"template\" : JSON.parse(gr.getValue(\"template\"))};\n\n\t\ttemplates.push(template);\n\t}\n\n\tvar result = [];\n\tcompositeData\n\t\t.items\n\t\t.forEach(function (item) {\n\t\t\tfor (template in templates) {\n\t\t\t\ttemplateObj = templates[template];\n\t\t\t\tif (templateObj.id.indexOf(item.template) > -1) {\n\t\t\t\t\tvar propMap = {};\n\t\t\t\t\titem.props.forEach(function(fieldValue) {\n\t\t\t\t\t\tif (fieldValue.name === 'sys_id')\n\t\t\t\t\t\t\tpropMap['sysId'] = fieldValue.value;\n\t\t\t\t\t\tpropMap[fieldValue.name] = fieldValue.value;\n\t\t\t\t\t});\n\n\t\t\t\t\tvar templateResult = {\n\t\t\t\t\t\t\"template\": templateObj.template.component,\n\t\t\t\t\t\t\"propValues\": getPropValues(propMap, item.actions, templateObj.template)\n\t\t\t\t\t};\n\n\t\t\t\t\tresult.push(templateResult);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\n\tfunction getPropValues(propMap, actions, template) {\n\t\tvar propValues = {};\n\t\tgetPropsFromFieldMappings(propValues, propMap, template.mappings);\n\t\tgetPropsFromStaticValues(propValues, template.staticValues);\n\t\tgetPropsFromActionMappings(propValues, propMap, actions, template.actionMappings);\n\t\treturn propValues;\n\t}\n\n\tfunction getPropsFromFieldMappings(result, propMap, propFieldMappings) {\n\t\tfor (var prop in propFieldMappings) {\n\t\t\tif (propFieldMappings.hasOwnProperty(prop)) {\n\t\t\t\tresult[prop] = propMap[propFieldMappings[prop]] || '';\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getPropsFromStaticValues(result, staticPropValues) {\n\t\tfor (var prop in staticPropValues) {\n\t\t\tif (staticPropValues.hasOwnProperty(prop)) {\n\t\t\t\tresult[prop] = getTranslatedStaticValues(staticPropValues[prop]);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getTranslatedStaticValues(propVal) {\n\t\tif (propVal === null || typeof propVal !== 'object')\n\t\t\treturn '';\n\t\tvar propValKey = GlideStringUtil.escapeHTML(propVal.key);\n\t\treturn propVal.translatable ? gs.getMessage(propValKey) : propValKey;\n\t}\n\n\tfunction getPropsFromActionMappings(result, propMap, actions, actionMappings) {\n\t\tvar actionMap = {};\n\t\tactions.forEach(function(action) {\n\t\t\tactionMap[action.name] = action;\n\t\t});\n\n\t\tfor (var prop in actionMappings) {\n\n\t\t\tif (actionMappings.hasOwnProperty(prop)) {\n\t\t\t\tvar mappedActions = actionMappings[prop];\n\n\t\t\t\tif (Array.isArray(mappedActions)) {\n\t\t\t\t\tvar actionArr = [];\n\t\t\t\t\tmappedActions.forEach(function(actionName) {\n\t\t\t\t\t\tvar processedAction = getProcessedAction(actionMap, actionName, propMap);\n\t\t\t\t\t\tif (processedAction)\n\t\t\t\t\t\t\tactionArr.push(processedAction);\n\t\t\t\t\t});\n\t\t\t\t\tresult[prop] = actionArr;\n\t\t\t\t} else {\n\t\t\t\t\tresult[prop] = getProcessedAction(actionMap, mappedActions, propMap);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tresult['model'] = propMap;\n\t}\n\n\tfunction getProcessedAction(actionMap, actionName, propMap) {\n\t\ttry {\n\t\t\tvar action = actionMap[actionName] ? JSON.parse(JSON.stringify(actionMap[actionName])) : null;\n\t\t\tif (action === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar actionType = action.actionType;\n\t\t\tif (actionType !== \"uxf_client_action\") {\n\t\t\t\treturn action;\n\t\t\t}\n\n\t\t\tvar actionPayloadMapFieldValues = action.actionPayloadMap;\n\t\t\taction.actionPayload = resolveActionPayloadDataBinding(propMap, JSON.parse(action.actionPayload), actionPayloadMapFieldValues);\n\t\t\tdelete(action.actionPayloadMap);\n\n\t\t\treturn action;\n\t\t} catch (e) {\n\t\t\tgs.logError(\"Error resolving/processing declarative action: \" + e);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tfunction resolveActionPayloadDataBinding(propMap, actionPayload, actionPayloadMapFieldValues) {\n\t\tvar actionPayloadMap = {};\n\t\tactionPayloadMapFieldValues.forEach(function(fieldValue) {\n\t\t\tvar key = fieldValue.name;\n\t\t\tvar value = fieldValue.value;\n\t\t\tif (/{{.*}}/.test(value)) {\n\t\t\t\tvar dynamicBindingVar = value.match(/{{(.*)}}/)[1];\n\t\t\t\tvalue = propMap[dynamicBindingVar] || '';\n\t\t\t} else {\n\t\t\t\tvalue = GlideStringUtil.escapeHTML(value);\n\t\t\t}\n\t\t\tactionPayloadMap[key] = value;\n\t\t});\n\t\tvar resolvedActionPayload = {};\n\t\tfor (var key in actionPayload) {\n\t\t\tif (actionPayload.hasOwnProperty(key)) {\n\t\t\t\tvar value = actionPayload[key];\n\t\t\t\tif (/{{.*}}/.test(value)) {\n\t\t\t\t\tresolvedActionPayload[key] = actionPayloadMap[key] || '';\n\t\t\t\t} else {\n\t\t\t\t\tresolvedActionPayload[key] = GlideStringUtil.escapeHTML(value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn resolvedActionPayload;\n\t}\n\n\treturn {\n\t\tpage_cursor: compositeData.page_cursor,\n\t\tpage_size: compositeData.page_size,\n\t\tpage_number: compositeData.page_number,\n\t\tis_last_page: compositeData.is_last_page,\n\t\tall_actions: compositeData.all_actions,\n\t\tselected_filter: compositeData.selected_filter,\n\t\titems: result,\n\t\tavailable_filters: compositeData.filters\n\t};\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"graphqlData\",\r\n        \"label\": \"GraphQL Data\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8218a73304f12210559073c06a02f779","value":"8218a73304f12210559073c06a02f779"},"sys_update_name":"sys_ux_data_broker_transform_7b652701773300108d070d74c81061b8","api_name":"global.Bind data to component prop","mutates_server_data":"false","name":"Bind data to component prop","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Change Types\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-11 20:31:55","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7ba43d6c4fce8210ce81aa6b43ce0bc4","sys_updated_by":"admin","sys_created_on":"2024-05-05 12:23:10","sys_name":"service map - is changed","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/aef78b43372331103e9ac0f234c067c9","value":"aef78b43372331103e9ac0f234c067c9"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\n    if (!input.id || !input.changeTypes)\n        return;\n\n    let parameters = {\n        changeTypes: JSON.stringify(input.changeTypes),\n        id: input.id\n    };\n\n    const isChangedResultStr = new global.ApplicationServiceGraphDataAPIs().getApplicationServiceApiResponse(\"isChanged\", parameters);\n    if (!isChangedResultStr)\n        return null;\n\n    let isChangedResultJSON = JSON.parse(isChangedResultStr);\n    if (isChangedResultJSON.types)\n        isChangedResultJSON.types = JSON.parse(isChangedResultJSON.types);\n\n    return isChangedResultJSON;\n}","acl_failure_result":"","props":"[ {\r\n            \"name\": \"changeTypes\",\r\n            \"label\": \"Change Types\",\r\n            \"description\": \"Change Types\",\r\n            \"readOnly\": false,\r\n            \"fieldType\": \"json\",\r\n            \"mandatory\": true,\r\n            \"defaultValue\": \"\"\r\n            },\r\n            {\r\n            \"name\": \"id\",\r\n            \"label\": \"ID\",\r\n            \"description\": \"ID\",\r\n            \"readOnly\": false,\r\n            \"fieldType\": \"string\",\r\n            \"mandatory\": true,\r\n            \"defaultValue\": \"\"\r\n            }\r\n]\r\n        ","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aef78b43372331103e9ac0f234c067c9","value":"aef78b43372331103e9ac0f234c067c9"},"sys_update_name":"sys_ux_data_broker_transform_7ba43d6c4fce8210ce81aa6b43ce0bc4","api_name":"sn_app_service_ext.service map - is changed","mutates_server_data":"false","name":"service map - is changed","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Manual Refresh\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Manual refresh data and ignore cache\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-22 20:17:50","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7bb458a477051110ee0d0cc2fa5a99f1","sys_updated_by":"admin","sys_created_on":"2022-07-29 00:28:16","sys_name":"Get My Work Task Count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"14","sys_tags":"","script":"function transform(input) {\n\tvar manualRefresh = false;\n\tif (global.JSUtil.notNil(input) && input.manualRefresh === true) {\n\t\tmanualRefresh = true;\n\t}\n\n\treturn new sn_cmdb_ws.CMDBWsLandingPageUtil().getMyWorkTaskCount(manualRefresh);\n}","acl_failure_result":"","props":"[\r\n    {\r\n      \"name\": \"manualRefresh\",\r\n      \"label\": \"Manual Refresh\",\r\n      \"description\": \"Manual refresh data and ignore cache\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"boolean\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": false\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_7bb458a477051110ee0d0cc2fa5a99f1","api_name":"sn_cmdb_ws.Get My Work Task Count","mutates_server_data":"false","name":"Get My Work Task Count","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Assignee\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Assignment Group\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Assignment group to assign to\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Comments\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys ids of the records to be reassigned\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User to assign the task to\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysIds\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-19 17:29:23","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7bce0dbb531901105016ddeeff7b12ce","sys_updated_by":"admin","sys_created_on":"2022-02-02 20:23:22","sys_name":"Update Task Assignment","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"44","sys_tags":"","script":"function transform(input) {\n\t// TODO: need to verify with PM if we want to continue the email notifications on reassign\n\t// \tif (gr.update()) {\n\t// \t\tvar usersList = util.getUsersWithDataManagerAdminRole();\n\t// \t\tif (gs.hasRole(\"admin\") || gs.hasRole(\"maint\") || gs.hasRole(\"data_manager_admin\")) {\n\t// \t\t\tassignmentInfo.isCurrentUserDMAdmin = true;\n\t// \t\t}\n\t// \t\tif (input.assignmentGroup === '' && input.assignee === '') { // SEND TO ADMIN case\n\t// \t\t\tgs.eventQueue(util.NOTIFICATION_EVENTS.TASK_SEND_TO_ADMIN, gr, usersList.toString(), JSON.stringify(assignmentInfo));\n\t// \t\t} else if (input.assignee !== '' && input.assignee !== gs.getUserID()) {\n\t// \t\t\tgs.eventQueue(util.NOTIFICATION_EVENTS.TASK_REASSIGN, gr, input.assignee.toString(), JSON.stringify(assignmentInfo));\n\t// \t\t}\n\t// \t}\n\n\tvar wrapperFn = function() {\n\t\tvar taskIds = input.sysIds;\n\t\tvar assignee = input.assignee;\n\t\tvar assignmentGroup = input.assignmentGroup;\n\t\tvar comments = input.comments;\n\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMTaskUIProxy();\n\t\ttaskIds.forEach(function(taskId) {\n\t\t\tproxy.reassignTask(taskId, assignmentGroup, assignee, comments);\n\t\t});\n\t};\n\n\treturn new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Update DM task assignments\", wrapperFn);\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\":\"sysIds\",\r\n      \"label\":\"sysIds\",\r\n      \"description\":\"Sys ids of the records to be reassigned\",\r\n      \"fieldType\":\"Array\",\r\n      \"mandatory\":true\r\n  },\r\n  {\r\n      \"name\":\"assignee\",\r\n      \"label\":\"Assignee\",\r\n      \"description\":\"User to assign the task to\",\r\n      \"fieldType\":\"string\",\r\n      \"mandatory\":false\r\n  },\r\n  {\r\n      \"name\":\"assignmentGroup\",\r\n      \"label\":\"Assignment Group\",\r\n      \"description\":\"Assignment group to assign to\",\r\n      \"fieldType\":\"string\",\r\n      \"mandatory\":false\r\n  },\r\n  {\r\n      \"name\":\"comments\",\r\n      \"label\":\"Comments\",\r\n      \"description\":\"Comments\",\r\n      \"fieldType\":\"string\",\r\n      \"mandatory\":false\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_7bce0dbb531901105016ddeeff7b12ce","api_name":"sn_cmdb_ws.Update Task Assignment","mutates_server_data":"true","name":"Update Task Assignment","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Interaction Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record type table name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Script to link the record with the interaction.","sys_updated_on":"2021-08-26 16:27:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7c174090539230109d03ddeeff7b1280","sys_updated_by":"admin","sys_created_on":"2021-08-26 15:26:00","sys_name":"Associate To Interaction Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar interactionSysId = input.interactionSysId;\n\tvar recordType = input.recordType;\n\tvar recordSysId = input.recordSysId;\n\tif (!interactionSysId || !recordSysId)\n\t\treturn;\n\t\n\tvar irrGr = new GlideRecord('interaction_related_record');\n\tirrGr.addQuery('interaction' , interactionSysId);\n\tirrGr.addQuery('document_table' , recordType);\n\tirrGr.addQuery('task' , recordSysId);\n\tirrGr.query();\n\t\n\tif (!irrGr.canCreate() || irrGr.hasNext())\n\t\treturn;\n\tirrGr.interaction = interactionSysId;\n\tirrGr.document_table = recordType;\n\tirrGr.task = recordSysId;\n\tirrGr.insert();\n}","acl_failure_result":"","props":"[\r\n    {\r\n      \"name\": \"interactionSysId\",\r\n      \"label\": \"Interaction Sys Id\",\r\n      \"description\": \"Interaction Sys Id\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true\r\n    }, {\r\n      \"name\": \"recordType\",\r\n      \"label\": \"Record type\",\r\n      \"description\": \"Record type table name\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false\r\n    }, {\r\n      \"name\": \"recordSysId\",\r\n      \"label\": \"Record Sys Id\",\r\n      \"description\": \"Record Sys Id\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_update_name":"sys_ux_data_broker_transform_7c174090539230109d03ddeeff7b1280","api_name":"sn_sow_interaction.Associate To Interaction Transform","mutates_server_data":"true","name":"Associate To Interaction Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysId of the indicator taken from URL params.\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This data broker returns the project ids associated to any contributing KPI.","sys_updated_on":"2023-09-04 05:05:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7c23834753032110a891ddeeff7b1253","sys_updated_by":"admin","sys_created_on":"2023-05-31 13:11:08","sys_name":"Get PO projects for contributing KPI","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n\n    function getAllPOProjects(content_tree) {\n        if (!content_tree.hasOwnProperty(\"children\")) {\n            var projectId = sdPOUtils.getPOProjectId(content_tree.id);\n            if (projectId && projectIds.indexOf(projectId) == -1)\n                projectIds.push(projectId);\n            return;\n        }\n        content_tree.children.forEach(function(eachChild) {\n            getAllPOProjects(eachChild);\n        });\n    }\n\n    function getPOProjectDetails(projectId) {\n        var projectDetails = {};\n        projectDetails.projectId = projectId.toString();\n        projectDetails.table = sdPOUtils.getPOProjectEntityTable(projectId).toString();\n        var versionFields = sdPOUtils.getLatestPOProjectVersionFields(projectId);\n        projectDetails.version = versionFields.version.toString();\n        projectDetails.total_records = parseInt(versionFields.total_records);\n        return projectDetails;\n    }\n\n    var sdHelperUtils = new sn_sd.SDHelperUtils();\n    var sdPOUtils = new sn_sd.SDProcessOptimizationHelperUtils();\n    var output = [];\n    var projectIds = [];\n    var sysId = input.sysId;\n\n    if (!sysId)\n        return '';\n    if (sdHelperUtils.getIndicatorLevel(sysId) == \"contributing\") {\n        var projectId = sdPOUtils.getPOProjectId(sysId);\n        if (projectId)\n            projectIds.push(projectId);\n    } else {\n        var payload = {};\n        payload.uuid = sysId;\n        payload.selectedId = null;\n        payload.buValue = sdHelperUtils.getServiceGroup(sysId);\n        payload.playbook = \"false\";\n        payload.showInactiveKPIs = false;\n        payload.skipCheck = true;\n        var content_tree = new sn_sd.ContentTreeUtil().createCountContentTree(payload)[0].content_tree[0];\n        getAllPOProjects(content_tree);\n    }\n\n    for (var i = 0; i < projectIds.length; i++) {\n        var projectDetails = getPOProjectDetails(projectIds[i]);\n        output.push(projectDetails);\n    }\n    if (output.length == 0)\n        return '';\n\n    // For August 5.0 release, only one project is considered.\n    return output[0];\n\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"sysId\",\n      \"label\": \"Sys Id\",\n      \"description\": \"SysId of the indicator taken from URL params.\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_update_name":"sys_ux_data_broker_transform_7c23834753032110a891ddeeff7b1253","api_name":"sn_sd.Get PO projects for contributing KPI","mutates_server_data":"false","name":"Get PO projects for contributing KPI","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"End date for the conversations\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"From Date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Start date for the conversations\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"To Date\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-19 07:30:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7c3e588b77b64210a102da3ccd5a997c","sys_updated_by":"admin","sys_created_on":"2024-06-19 07:22:09","sys_name":"Fetch Deflection Metrics Trend","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    return new VaAdminConsoleMetrics().getDeflections(input.from_date, input.to_date);\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"from_date\",\n    \"label\": \"From Date\",\n    \"description\": \"Start date for the conversations\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"to_date\",\n    \"label\": \"To Date\",\n    \"description\": \"End date for the conversations\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_7c3e588b77b64210a102da3ccd5a997c","api_name":"sn_oe_sfs.Fetch Deflection Metrics Trend","mutates_server_data":"false","name":"Fetch Deflection Metrics Trend","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Ace app config Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Ace app config id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Macroponent Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Root Macroponent\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Root Macroponent to clone\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"isNewPage\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"screenType Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-04-13 12:15:42","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7c9baa8deb19011090fa99602a522864","sys_updated_by":"admin","sys_created_on":"2022-01-25 14:15:32","sys_name":"Patch ACE page","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"17","sys_tags":"","script":"function transform(input) {\n    var util = new sn_ace.ACEAppBuilderUtilV2();\n    if (input.isNewPage) \n        util.createContentBlock(input.aceAppConfig, input.pageId);\n    \n    var context = util._patchPage(input.aceAppConfig, input.pageId, input.macroponentId, input.screenType, input.rootMacroponent, input.isNewPage);\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"aceAppConfig\",\r\n    \"label\": \"Ace app config Id\",\r\n    \"description\": \"Ace app config id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"pageId\",\r\n    \"label\": \"Page Id\",\r\n    \"description\": \"Page id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"macroponentId\",\r\n    \"label\": \"Macroponent Id\",\r\n    \"description\": \"Macroponent Id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"screenType\",\r\n    \"label\": \"screenType Id\",\r\n    \"description\": \"screenType Id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n {\r\n    \"name\": \"isNewPage\",\r\n    \"label\": \"isNewPage\",\r\n    \"description\": \"isNewPage\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"boolean\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": false\r\n  }, \r\n  {\r\n    \"name\": \"rootMacroponent\",\r\n    \"label\": \"Root Macroponent\",\r\n    \"description\": \"Root Macroponent to clone\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_7c9baa8deb19011090fa99602a522864","api_name":"sn_ace.Patch ACE page","mutates_server_data":"true","name":"Patch ACE page","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2022-10-28 00:20:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7d07993aeb621110116a378ab55228c5","sys_updated_by":"admin","sys_created_on":"2022-10-18 17:56:56","sys_name":"SSO Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"46","sys_tags":"","script":"function transform(input) {\n    return new CIUtil().getSSOConfigurationStatus();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_7d07993aeb621110116a378ab55228c5","api_name":"sn_oe_sfs.SSO Status","mutates_server_data":"false","name":"SSO Status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"timeOff sys id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-14 13:13:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7d5dbc82eb7b2110b5673d9f7f522803","sys_updated_by":"admin","sys_created_on":"2023-07-04 07:37:18","sys_name":"Remove TimeOff","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    if (input.sysId) {\n        return new OCTimeOffUtil().remove(input.sysId);\n    }\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"timeOff sys id\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_7d5dbc82eb7b2110b5673d9f7f522803","api_name":"sn_uib_on_call.Remove TimeOff","mutates_server_data":"false","name":"Remove TimeOff","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Translator Configuration","sys_updated_on":"2024-05-22 09:38:35","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7dde4df79fc60210f0b32e5af90a1c93","sys_updated_by":"admin","sys_created_on":"2024-05-15 11:56:58","sys_name":"Translator Configuration","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n    var translatorConfiguration = \"\";\n    try {\n        var translatorConfigurationSysId = gs.getProperty(\"com.snc.gen_ai.translator_configuration.sys_id\", \"\");\n        if (gs.nil(translatorConfigurationSysId)) {\n            translatorConfiguration = \"ServiceNow\";\n        } else {\n            var translatorConfigurationGr = new GlideRecord(\"sn_dt_translator_configuration\");\n            translatorConfigurationGr.get(translatorConfigurationSysId);\n            translatorConfigurationGr.query();\n            if (translatorConfigurationGr.getRowCount() === 0) {\n                translatorConfiguration = \"INVALID\";\n            }\n            if (translatorConfigurationGr.next()) {\n                translatorConfiguration = translatorConfigurationGr.getValue('name');\n            }\n        }\n    } catch (e) {\n        gs.error('Failed to get Translator Configuration');\n    }\n    return translatorConfiguration;\n\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_7dde4df79fc60210f0b32e5af90a1c93","api_name":"sn_nowassist_admin.Translator Configuration","mutates_server_data":"false","name":"Translator Configuration","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7e2bdd3f7702111023651605bc5a9962","sys_updated_by":"admin","sys_created_on":"2022-09-27 00:15:20","sys_name":"MS allow query edit","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\treturn util.allowQueryEdit();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_7e2bdd3f7702111023651605bc5a9962","api_name":"sn_cmdb_ws.MS allow query edit","mutates_server_data":"false","name":"MS allow query edit","output_schema":"","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"Global Search View Config ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search Application Configuration ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-10-24 16:10:03","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7e7ece495fd9921087a2067660731365","sys_updated_by":"maint","sys_created_on":"2024-10-15 16:59:50","sys_name":"Get Global Search Configurations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n    var GLOBAL_SEARCH_VIEW_CONFIG_CACHE = 'sys_aw_global_search_config_databroker_cache';\n    var SEARCH_CONFIG_CACHE = 'search_context_config_databroker_cache';\n\n    function getGlobalSearchViewConfig(globalSearchViewConfigId) {\n        if (globalSearchViewConfigId == '')\n            return null;\n\n        var cachedValue = GlideCacheManager.get(GLOBAL_SEARCH_VIEW_CONFIG_CACHE, input.globalSearchViewConfigId);\n        if (cachedValue != null)\n            return cachedValue;\n\n        var gr = new GlideRecord('sys_aw_global_search_config');\n        var exists = gr.get(input.globalSearchViewConfigId);\n        if (!exists) {\n            gs.error(\"sys_aw_global_search_config was not found. sysId=\" + globalSearchViewConfigId);\n            return null;\n        }\n        var workspace_fields = ['recent_items_count', 'recent_terms_count', 'recent_ttl_in_days', 'tab_overview_items_per_section', 'tab_drilldown_items_per_page'];\n        var workspaceConfigs = {\n            sys_id: globalSearchViewConfigId,\n            name: gr.getValue('name')\n        };\n        for (var field in workspace_fields) {\n            var fieldName = workspace_fields[field];\n            workspaceConfigs[fieldName] = parseInt(gr.getValue(fieldName));\n        }\n        GlideCacheManager.put(GLOBAL_SEARCH_VIEW_CONFIG_CACHE, globalSearchViewConfigId, workspaceConfigs);\n\n        return workspaceConfigs;\n    }\n\n    function getSearchSourcesFromConfigId(globalSearchDataConfigId) {\n        if (globalSearchDataConfigId == '')\n            return null;\n\n        var cachedValue = GlideCacheManager.get(SEARCH_CONFIG_CACHE, globalSearchDataConfigId);\n        if (cachedValue != null)\n            return cachedValue;\n\n        var gr = new GlideRecord('m2m_search_context_config_search_source')\n        gr.addQuery('search_context_config', globalSearchDataConfigId);\n        gr.addNotNullQuery('source.name');\n        gr.addQuery('source.active', true);\n        gr.orderBy('order');\n        gr.query();\n        var sources = [];\n        while (gr.next()) {\n            sources.push({\n                'order': {\n                    'value': parseInt(gr.getValue('order'))\n                },\n                'source': {\n                    'value': gr.getValue('source'),\n                    'displayValue': gr.getDisplayValue('source')\n                }\n            });\n        }\n        GlideCacheManager.put(SEARCH_CONFIG_CACHE, globalSearchDataConfigId, sources);\n\n        return sources;\n    }\n\n    function getUserPreferences(preferences) {\n        var user_preferences = {};\n        var user = gs.getUser();\n        for (var preference in preferences) {\n            var preferenceName = preferences[preference];\n            user_preferences[preferenceName] = user.getPreference(preferenceName);\n        }\n        return user_preferences;\n    }\n\n    return {\n        global_search_configs: getGlobalSearchViewConfig(input.globalSearchViewConfigId),\n        search_sources: getSearchSourcesFromConfigId(input.globalSearchDataConfigId),\n        user_preferences: getUserPreferences(['ts.match'])\n    };\n}","acl_failure_result":"","props":"[{\r\n        \"name\": \"globalSearchViewConfigId\",\r\n        \"label\": \"Global Search View Config ID\",\r\n        \"description\": \"Global Search View Config ID\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"reference\",\r\n        \"defaultValue\": \"\",\r\n        \"typeMetadata\": {\r\n            \"reference\": \"sys_aw_global_search_config\"\r\n        }\r\n    },\r\n    {\r\n        \"name\": \"globalSearchDataConfigId\",\r\n        \"label\": \"Search Application Configuration ID\",\r\n        \"description\": \"Search Application Configuration ID\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"reference\",\r\n        \"defaultValue\": \"\",\r\n        \"typeMetadata\": {\r\n            \"reference\": \"sys_search_context_config\"\r\n        }\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_7e7ece495fd9921087a2067660731365","api_name":"global.Get Global Search Configurations","mutates_server_data":"false","name":"Get Global Search Configurations","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Group Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Group id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-09 22:06:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7ec12d4d778335109998bb6bbd5a99a7","sys_updated_by":"admin","sys_created_on":"2023-12-09 21:10:25","sys_name":"Member of Group","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    if (input.group) {\n        return new OCTimeOffUtil().isUserMemberofGroup(input.group);\n    }\n}","acl_failure_result":"","props":"[\r\n {\r\n    \"name\": \"group\",\r\n    \"label\": \"Group Id\",\r\n    \"description\": \"Group id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_7ec12d4d778335109998bb6bbd5a99a7","api_name":"sn_uib_on_call.Member of Group","mutates_server_data":"false","name":"Member of Group","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"gformLastRefresh\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-11-22 10:33:01","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7f34a70745b33010f877bf74562637b5","sys_updated_by":"maint","sys_created_on":"2021-11-18 09:50:39","sys_name":"Record Information - Request","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/ff5e8e53c3a53010965e070e9140ddb2","value":"ff5e8e53c3a53010965e070e9140ddb2"},"sys_created_by":"maint","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n\tvar reqMgmtGr = new GlideRecord(input.table); //we can re-use this same transform for sc_request, sc_req_item, and sc_task\n\tif (reqMgmtGr.get(input.sysId) && reqMgmtGr.canRead()) {\n\t\tif (input.table == 'sc_request') {\n\t\t\tvar reqInfo = new RequestInfo(reqMgmtGr);\n\t\t\treturn reqInfo.getRecordInfo();\n\t\t} else if (input.table == 'sc_req_item') {\n\t\t\tvar ritmInfo = new RequestedItemInfo(reqMgmtGr);\n\t\t\treturn ritmInfo.getRecordInfo();\n\t\t} else {\n\t\t\tvar scTaskInfo = new CatalogTaskInfo(reqMgmtGr);\n\t\t\treturn scTaskInfo.getRecordInfo();\n\t\t}\n\t}\n\treturn {};\n}","acl_failure_result":"","props":"[\n{\n  \"name\": \"table\",\n  \"label\": \"Table\",\n  \"description\": \"\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n},\n{\n  \"name\": \"sysId\",\n  \"label\": \"Sys Id\",\n  \"description\": \"\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n},\n{\n  \"name\": \"gformLastRefresh\",\n  \"label\": \"gformLastRefresh\",\n  \"description\": \"\",\n  \"readOnly\": false,\n  \"fieldType\": \"integer\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ff5e8e53c3a53010965e070e9140ddb2","value":"ff5e8e53c3a53010965e070e9140ddb2"},"sys_update_name":"sys_ux_data_broker_transform_7f34a70745b33010f877bf74562637b5","api_name":"sn_sow_req.Record Information - Request","mutates_server_data":"false","name":"Record Information - Request","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"KB sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Source sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"KM's new 3 column layout record page to fetch implicit/embedded queries set by KMRecordPageUtils#setEmbeddedQueries","sys_updated_on":"2024-03-21 18:47:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"7fa593828785465025f299b73cbb3511","sys_updated_by":"admin","sys_created_on":"2024-03-21 18:17:06","sys_name":"KM Record Page Fetch Embedded Queries","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(params) {\n    if (gs.nil(params.source_sys_id) || gs.nil(params.kb_sys_id) || params.kb_sys_id != '-1') {\n        return {\n            success: false\n        };\n\t}\n\t\n    var answer = new global.KMRecordPageUtils().getEmbeddedQueries(params.source_sys_id);\n    return {\n        success: true,\n        content: answer\n    };\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"source_sys_id\",\n        \"label\": \"Source sys ID\",\n        \"description\": \"Source sys ID\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n    {\n        \"name\": \"kb_sys_id\",\n        \"label\": \"KB sys ID\",\n        \"description\": \"KB sys ID\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_7fa593828785465025f299b73cbb3511","api_name":"sn_km_uib.KM Record Page Fetch Embedded Queries","mutates_server_data":"false","name":"KM Record Page Fetch Embedded Queries","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Configuration item\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Determines if an asset is available in the DEX dashboard to evaluate link visibility in an interaction record.","sys_updated_on":"2024-09-25 21:39:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8040335aa3a30210e9715824d51e6122","sys_updated_by":"admin","sys_created_on":"2024-07-24 21:34:48","sys_name":"Get DEX Asset Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"22","sys_tags":"","script":"function transform(input) {\n    var isPluginActive = GlidePluginManager().isActive(\"sn_dex\");\n    if (!input || !input.ci || !isPluginActive) return [];\n    var incomingIds = input.ci;\n    var availabilityArray = [];\n\n    for (var i = 0; i < incomingIds.length; i++) {\n        try {\n            var check = new sn_dex.DEXCommonUtils().isDexApplicable(incomingIds[i]).available;\n            availabilityArray.push(check);\n        } catch (e) {\n            gs.error(\"Error retrieving availability for asset: \" + incomingIds[i]);\n            availabilityArray.push(false);\n        }\n    }\n    return {\"isPluginActive\": isPluginActive, \"availabilityArray\": availabilityArray};\n}\n","acl_failure_result":"","props":"[\n  {\n    \"name\": \"ci\",\n    \"label\": \"Configuration item\",\n    \"description\": \"\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_8040335aa3a30210e9715824d51e6122","api_name":"sn_sow_itsm_common.Get DEX Asset Status","mutates_server_data":"false","name":"Get DEX Asset Status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Attestation Task ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Closes an attestation task.","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"804a5babb761011071b980408e11a95f","sys_updated_by":"maint","sys_created_on":"2022-02-14 22:12:18","sys_name":"Close Attestation Task","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"34","sys_tags":"","script":"function transform(input) {\t\n\tvar taskId = input.taskId;\n\tvar util = new sn_cmdb_ws.CMDBAttestationUtil();\n\tvar smartDetectionUtil = new sn_cmdb_ws.CMDBAttestationSmartDetectionUtil();\n\t\n\tvar result = {};\n\tvar totalCICount = 0;\n\tvar attestedCICount = 0;\n\tvar rejectedCICount = 0;\n\tvar nextScheduledReview = \"\";\n\t\n\tvar outputArr = util.getCountBasedOnAttestationStatus(taskId);\n\tfor (var i = 0; i < outputArr.length; i++) {\n\t\ttotalCICount += outputArr[i].count;\n\t\tif (outputArr[i].attestation_status === util.ACTIONS_MAPPING[\"attest\"].attestation_status) {\n\t\t\tattestedCICount = outputArr[i].count;\n\t\t} else if (outputArr[i].attestation_status === util.ACTIONS_MAPPING[\"reject\"].attestation_status) {\n\t\t\trejectedCICount = outputArr[i].count;\n\t\t}\n\t}\n\t\n\tutil.updateAttestationCount(taskId);\n\tvar taskState = util.getTaskState(taskId);\n\n\tvar taskGr = new GlideRecord('cmdb_data_management_task');\n\ttaskGr.get(taskId);\n\tvar sysTriggerGr = new GlideRecord('sys_trigger');\n\tsysTriggerGr.addQuery('document_key', taskGr.getDisplayValue(\"policy_id.policy_execution_job.sys_id\"));\n\tsysTriggerGr.query();\n\tif (sysTriggerGr.next()) {\n\t\tnextScheduledReview = sysTriggerGr.getValue(\"next_action\");\n\n\t\tvar gd = new GlideDate();\n\t\tgd.setValue(nextScheduledReview);\n\t\tnextScheduledReview = gd.getByFormat(gs.getDateTimeFormat()); // format as per user's date time preference\n\t}\n\ttotalCICount += taskState.excludedCis + taskState.duplicateCis\n\tresult.totalCICount = totalCICount;\n\tresult.attestedCICount = attestedCICount;\n\tresult.rejectedCICount = rejectedCICount;\n\tresult.duplicateCICount = taskState.duplicateCis;\n\tresult.excludedCICount = taskState.excludedCis;\n\tresult.nextScheduledReview = nextScheduledReview;\n\t\n\tvar comments = gs.getMessage(\"Summary of activities:\\n\");\n\tcomments += gs.getMessage(\"Total CIs: {0}\\n\", [totalCICount.toString()]);\n\tcomments += gs.getMessage(\"Attested CIs: {0}\\n\", [attestedCICount.toString()]);\n\tcomments += gs.getMessage(\"Rejected CIs: {0}\\n\", [rejectedCICount.toString()]);\n\tcomments += gs.getMessage(\"Excluded CIs: {0}\\n\", [taskState.excludedCis.toString()]);\n\tcomments += gs.getMessage(\"Duplicate CIs: {0}\\n\", [taskState.duplicateCis.toString()]);\n\ttaskGr.comments = comments;\n\n\ttaskGr.setValue('state', util.TASK_STATE.CLOSED_COMPLETE); // set task state to closed complete\n\tif (taskGr.update()) {\n\t\tvar usersList = util.getUsersWithDataManagerAdminRole();\n\t\tgs.eventQueue(util.NOTIFICATION_EVENTS.TASK_COMPLETED, taskGr, usersList.toString(), JSON.stringify(result));\n\t}\n\treturn result;\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"taskId\",\r\n  \"label\": \"Task ID\",\r\n  \"description\": \"Attestation Task ID\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_804a5babb761011071b980408e11a95f","api_name":"sn_cmdb_ws.Close Attestation Task","mutates_server_data":"true","name":"Close Attestation Task","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Query Json\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Query SysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Create a multisource query given a queryJson payload","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"806e01565d3dd110f877f39f69261afd","sys_updated_by":"maint","sys_created_on":"2022-09-09 21:12:51","sys_name":"Multisource create query","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar result = {\n\t\terror: null,\n\t\tstatus : 'success',\n\t\tmessage : null\n\t};\n\t\n\tvar queryJson = input.query_json;\n\tif(!queryJson) {\n\t\tresult.status = 'failure';\n\t\tresult.error = \"query_json is missing\";\n\t\treturn result;\n\t}\n\t\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tresult = util.createQuery(queryJson);\n\t\n\treturn result;\n\t\n}","acl_failure_result":"","props":"[\n {\n    \"name\": \"query_json\",\n    \"label\": \"Query Json\",\n    \"description\": \"Query SysId\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_806e01565d3dd110f877f39f69261afd","api_name":"sn_cmdb_ws.Multisource create query","mutates_server_data":"true","name":"Multisource create query","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Config Identifier Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Supports granular configurations both within and across Workspaces\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Workspace App Id\",\n  \"comment\" : \"\"\n}]","batch_exclude":"false","description":"This is an admin configured set of related lists to display on the related items aggregate view. Also contains the metadata for the sort select item that is displayed on the detailed view","sys_updated_on":"2024-08-27 06:39:26","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"809779b477ca4110960ced43ba5a9924","sys_updated_by":"admin","sys_created_on":"2022-03-02 22:36:14","sys_name":"Get Related Lists","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"28","sys_tags":"","script":"function transform(input) {\n\n    var workspaceId = input.workspaceId;\n    var configIdentifierId = input.configIdentifierId;\n\n    var SORT_DIRECTION = {\n        ASC: \"asc\",\n        DESC: \"desc\",\n        ASCENDING: gs.getMessage(\"Ascending\"),\n        DESCENDING: gs.getMessage(\"Descending\")\n    };\n\n    var result = {\n        errors: [],\n        relatedLists: []\n    };\n\n    try {\n        var tmpResult = new UnifiedMapHelper().getRelatedList(workspaceId, configIdentifierId);\n        if (tmpResult.success) {\n            var lists = tmpResult.result;\n            var allSelectComponentData = {};\n            lists.forEach(function(record) {\n                var selectComponentData = [];\n                var sortFieldArray = record.sort_fields ? record.sort_fields.split(\",\") : [];\n                sortFieldArray.forEach(function(sortField) {\n                    // push a Descending and Ascending sort for each sort field to the sort select item data\n                    var gr = new GlideRecord(record.tableName + \"\");\n                    var label = gr.getElement(sortField + \"\").getLabel();\n                    selectComponentData.push({\n                        id: sortField,\n                        label: label\n                    });\n                });\n                allSelectComponentData[record.sys_id] = selectComponentData;\n            });\n            result.relatedLists = {\n                original: lists,\n                allSelectComponentData: allSelectComponentData\n            };\n        } else {\n            //TODO: map with user-friendly error messages WRT tmpResult.error.code\n            result.errors.push(tmpResult.error.message);\n        }\n    } catch (error) {\n        result.errors.push(error.toString());\n    }\n\n    return result;\n}","acl_failure_result":"{\n\t\"message\":\"User does not have required roles to perform this action.\"\n}","props":"[\n  {\n    \"name\": \"workspaceId\",\n    \"label\": \"Workspace App Id\",\n    \"fieldType\": \"string\",\n    \"readOnly\": false,\n    \"mandatory\": true,\n    \"description\": \"Workspace App Id\"\n  },{\n    \"name\": \"configIdentifierId\",\n    \"label\": \"Config Identifier Id\",\n    \"fieldType\": \"string\",\n    \"readOnly\": false,\n    \"mandatory\": false,\n    \"description\": \"Supports granular configurations both within and across Workspaces\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_809779b477ca4110960ced43ba5a9924","api_name":"sn_cmdb_ws.Get Related Lists","mutates_server_data":"false","name":"Get Related Lists","output_schema":"","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"Evam Config ID for Search Results\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-11-05 23:45:57","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8097cc437311101052c7d5fdbdf6a77d","sys_updated_by":"admin","sys_created_on":"2020-06-13 18:48:05","sys_name":"Get Table Fields from Composite Metadata ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"16","sys_tags":"","script":"function transform(input) {\n    var evamId = input.searchEvamConfigId;\n    if (!evamId || evamId.trim() == \"\") {\n        gs.error('Transform script \"Get Table Fields from Composite Metadata\" called with invalid input for searchEvamConfigId. Provided value: ' + evamId);\n        return \"\";\n    }\n    var tableToFieldsMap = sn_search.ScriptableAISearchRequestedFieldsUtil.getTableFieldsFromEVAMDefinition(evamId);\n    return JSON.stringify(tableToFieldsMap);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"searchEvamConfigId\",\r\n    \"label\": \"Evam Config ID for Search Results\",\r\n    \"description\": \"Evam Config ID for Search Results\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"reference\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\",\r\n    \"typeMetadata\": {\r\n      \"reference\": \"sys_ux_composite_data\"\r\n    }\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_8097cc437311101052c7d5fdbdf6a77d","api_name":"global.Get Table Fields from Composite Metadata ","mutates_server_data":"false","name":"Get Table Fields from Composite Metadata ","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Checks if the given de-duplication template can be unpublished","sys_updated_on":"2023-09-28 18:17:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"80b6b85d73e131103f3cc3ed8ff6a7ff","sys_updated_by":"admin","sys_created_on":"2023-09-26 23:12:01","sys_name":"De-duplication template can unpublish","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"/*\n\tCheck whether or not we can unpublish the template.\n*/\nfunction transform(input) {\n\tvar result = true;\n\tvar templateSysId = input.templateSysId;\n\n\t/*\n\t\tCheck if the template has been put in the running queue\n\t\tor is in running state\n\t*/\n\tvar gr = new GlideRecord('reconcile_duplicate_template_run');\n\tgr.addQuery('template', templateSysId);\n\tgr.addEncodedQuery('stateINdraft,ready,running');\n\tgr.query();\n\n\tif (gr.getRowCount() > 0) {\n\t\tresult = false;\n\t}\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_80b6b85d73e131103f3cc3ed8ff6a7ff","api_name":"sn_cmdb_ws.De-duplication template can unpublish","mutates_server_data":"false","name":"De-duplication template can unpublish","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Script that returns instance properties necessary for generation of CSR and fetching CA root","sys_updated_on":"2023-03-13 05:17:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8183b33443e1211041a0e8625ab8f2f0","sys_updated_by":"admin","sys_created_on":"2023-03-11 03:20:16","sys_name":"PKI Instance Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/76f9d51369115083f4ea77aab1677cc0","value":"76f9d51369115083f4ea77aab1677cc0"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\tvar instanceProperties = {};\n\tinstanceProperties.uri = gs.getProperty('glide.servlet.uri');\n\treturn instanceProperties;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/76f9d51369115083f4ea77aab1677cc0","value":"76f9d51369115083f4ea77aab1677cc0"},"sys_update_name":"sys_ux_data_broker_transform_8183b33443e1211041a0e8625ab8f2f0","api_name":"sn_app_skytale.PKI Instance Properties","mutates_server_data":"false","name":"PKI Instance Properties","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"csr\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"endpoint\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-05-04 23:00:29","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"81eb2e7743d9611041a0e8625ab8f2d9","sys_updated_by":"admin","sys_created_on":"2023-03-07 19:33:00","sys_name":"PKI Certificate Signer ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/76f9d51369115083f4ea77aab1677cc0","value":"76f9d51369115083f4ea77aab1677cc0"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\treturn new ProxyPKISigner().signCertificate(input.csr);\n}","acl_failure_result":"","props":"[{\r\n\"name\": \"csr\",\r\n\"label\": \"csr\",\r\n\"description\": \"\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"object\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n},\r\n{\r\n\"name\": \"endpoint\",\r\n\"label\": \"endpoint\",\r\n\"description\": \"\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"object\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/76f9d51369115083f4ea77aab1677cc0","value":"76f9d51369115083f4ea77aab1677cc0"},"sys_update_name":"sys_ux_data_broker_transform_81eb2e7743d9611041a0e8625ab8f2d9","api_name":"sn_app_skytale.PKI Certificate Signer ","mutates_server_data":"true","name":"PKI Certificate Signer ","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"gformLastRefresh\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-04-25 22:11:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"824cc0a4eb323010e69783402a5228fb","sys_updated_by":"admin","sys_created_on":"2021-09-21 06:36:22","sys_name":"Record Page Routes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c72e8e76c1fcf010f877e1de0b6be358","value":"c72e8e76c1fcf010f877e1de0b6be358"},"sys_created_by":"admin","sys_mod_count":"109","sys_tags":"","script":"function transform(input) {\n    var result = {};\n\n    var eps = new GlideScriptedExtensionPoint().getExtensions(\"sn_sow_record.SOWRouteUtil\");\n    for (var i = 0; i < eps.length; i++) {\n        if (eps[i].handles(input.table, input.sysId)) {\n            result = eps[i].getRecordRoutes(input.table, input.sysId);\n            break;\n        }\n    }\n    return result;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"gformLastRefresh\",\r\n  \"label\": \"gformLastRefresh\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"integer\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c72e8e76c1fcf010f877e1de0b6be358","value":"c72e8e76c1fcf010f877e1de0b6be358"},"sys_update_name":"sys_ux_data_broker_transform_824cc0a4eb323010e69783402a5228fb","api_name":"sn_sow_record.Record Page Routes","mutates_server_data":"false","name":"Record Page Routes","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"sysId of team\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"teamId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"userIds\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Add members to a team","sys_updated_on":"2023-11-29 16:44:53","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8254ff8553be3110bdf7ddeeff7b124a","sys_updated_by":"admin","sys_created_on":"2023-11-27 21:30:55","sys_name":"Add team members","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","sys_mod_count":"20","sys_tags":"","script":"function transform(input) {\n    return addTeamMembers(input.teamId, input.userIds);\n\n    function addTeamMembers(teamId, userIds) {\n        if (!teamId || !userIds.length)\n            return { error: gs.getMessage(\"invalid input\") };\n\n        var teamGr = new GlideRecordSecure('sys_user_group');\n        teamGr.get(teamId);\n        if (!teamGr.canWrite())\n            return { error: gs.getMessage(\"no write access\")};\n\n        var resp = [];\n\n        /* GR insert is restricted if session user does not have write access to the group */\n        var gr = new GlideRecord('sys_user_grmember');\n        for (var i = 0; i < userIds.length; i++) {\n            gr.initialize();\n            gr.setValue('group', teamId);\n            gr.setValue('user', userIds[i]);\n            resp.push(gr.insert());\n        }\n\n        return resp;\n    }\n}","acl_failure_result":"","props":"\r\n[\r\n  {\r\n    \"name\": \"teamId\",\r\n    \"label\": \"teamId\",\r\n    \"description\": \"sysId of team\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"userIds\",\r\n    \"label\": \"userIds\",\r\n    \"description\": \"userIds\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"array\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"[]\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sys_ux_data_broker_transform_8254ff8553be3110bdf7ddeeff7b124a","api_name":"sn_sow.Add team members","mutates_server_data":"true","name":"Add team members","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"End Date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"End date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Start Date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Start date\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-27 22:29:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"825519eb65701110f8774dfa2cfd1d11","sys_updated_by":"maint","sys_created_on":"2022-07-26 01:54:55","sys_name":"VSC Compare Scans","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var obj = new sn_vsc.SCComparisonUtil();\n    var poll = new sn_vsc.VscPollForStatus();\n    var comparisonType = new sn_vsc.SecurityCenterConstants().hardening_comparison;\n    obj.lookForComparison(input.start_date, input.end_date);\n    var payload = input.start_date + ',' + input.end_date;\n    var status = poll.getProcessStatus(payload, comparisonType);\n    if (status == \"complete\") {\n        // Get comparison record\n        var grComp = new GlideRecord(\"sn_vsc_user_comparisons\");\n        grComp.addQuery('usr_name', payload);\n        grComp.query();\n        var sysId;\n        if (grComp.next()) {\n            sysId = grComp.sys_id.toString();\n        }\n        return sysId;\n    }\n\n    return status;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"start_date\",\n    \"label\": \"Start Date\",\n    \"description\": \"Start date\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  },\n\n{\n    \"name\": \"end_date\",\n    \"label\": \"End Date\",\n    \"description\": \"End date\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_825519eb65701110f8774dfa2cfd1d11","api_name":"sn_vsc.VSC Compare Scans","mutates_server_data":"false","name":"VSC Compare Scans","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Action to perform on the shift escalation record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift Escalation Action\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-07 10:53:43","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"82af3d49377231108f2beacc74924b98","sys_updated_by":"admin","sys_created_on":"2023-11-27 13:07:33","sys_name":"Update Shift Escalation Policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    if (input && input.shiftEscalationAction) {\n        var action = input.shiftEscalationAction.action;\n        var policyId = input.shiftEscalationAction.escalationPolicyId;\n        var groupId = input.shiftEscalationAction.groupId;\n        if (gs.nil(action) || gs.nil(policyId) || gs.nil(groupId))\n            return;\n        if (!(new global.OnCallSecurityNG().rotaMgrAccess(groupId)))\n            return;\n        return new sn_uib_on_call.OnCallEscalationPolicyUIBUtils().updateShiftEscalationPolicy(action, policyId);\n    }\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"shiftEscalationAction\",\r\n    \"label\": \"Shift Escalation Action\",\r\n    \"description\": \"Action to perform on the shift escalation record\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"json\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_82af3d49377231108f2beacc74924b98","api_name":"sn_uib_on_call.Update Shift Escalation Policy","mutates_server_data":"false","name":"Update Shift Escalation Policy","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-08-28 09:02:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"82da00a5eb831110246b83402a522850","sys_updated_by":"admin","sys_created_on":"2022-11-08 11:51:31","sys_name":"SOW - Announcements Aggregate","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(inputs) {\n    var total = 0;\n    var m2mGr = new GlideRecord('sys_ux_composite_data_m2m_datasource');\n    //Fetching the EVAM definition referenced in Announcements - EVAM Data Resource to keep the total in sync.\n    m2mGr.addQuery('dataset', 'bb194caac3023010965e070e9140dd50');\n    m2mGr.query();\n    while (m2mGr.next()) {\n        var gr = new GlideRecord('sys_ux_composite_datasource');\n        if (gr.get(m2mGr.datasource)) {\n            var aggGr = new GlideAggregate(gr.table);\n            aggGr.addAggregate('COUNT');\n            if (!aggGr.canRead())\n                continue;\n            aggGr.addEncodedQuery(gr.condition, true);\n            aggGr.query();\n            if (aggGr.next())\n                total = total + parseInt(aggGr.getAggregate('COUNT'));\n        }\n    }\n\n    return total;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sys_ux_data_broker_transform_82da00a5eb831110246b83402a522850","api_name":"sn_sow.SOW - Announcements Aggregate","mutates_server_data":"false","name":"SOW - Announcements Aggregate","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Task IDs\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-08-15 21:17:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"83338338731471103f3cc3ed8ff6a71a","sys_updated_by":"admin","sys_created_on":"2023-07-25 16:42:39","sys_name":"De-Duplication Template Add Tasks","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar taskIds = input.taskIds.split(',');\n\tvar templateId = input.templateSysId;\n\n\tvar util = new global.CMDBDuplicateTemplateUtils();\n\tresult = util.addTasksToTemplate(templateId, taskIds); \n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n   {\r\n      \"name\": \"taskIds\",\r\n      \"label\": \"Task IDs\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_83338338731471103f3cc3ed8ff6a71a","api_name":"sn_cmdb_ws.De-Duplication Template Add Tasks","mutates_server_data":"true","name":"De-Duplication Template Add Tasks","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Caller ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Recent Query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-08-05 11:07:12","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"83d35524439882108ade1febb7b8f24f","sys_updated_by":"admin","sys_created_on":"2024-02-08 11:17:32","sys_name":"Get Caller Records","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"93","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.callerId || !input.table || !gs.tableExists(input.table)) return [];\n    var table = input.table;\n    const HARDWARE = \"alm_hardware\";\n    const COMPUTER_CLASS = \"cmdb_ci_computer\";\n    const INCIDENT = \"incident\";\n    const INTERACTION = \"interaction\";\n    const ALM_ASSET = \"alm_asset\";\n    var callerRecords = [];\n    var callerField = (table == INCIDENT) ? \"caller_id\" : (table == INTERACTION) ? \"opened_for\" : \"assigned_to\";\n    var sysId = input.sysId;\n    var gr = new GlideRecord(table);\n    if (table != ALM_ASSET) {\n        gr.addEncodedQuery(input.recentQuery,true);\n        gr.orderByDesc('sys_created_on');\n    }\n    gr.query(callerField, input.callerId);\n    gr.setLimit(10);\n    gr.query();\n    while (gr.next()) {\n        if (sysId && sysId == gr.getValue('sys_id')) continue;\n        var record = {\n            'table': table,\n            'sys_id': gr.getValue('sys_id')\n        };\n        if (table == ALM_ASSET) {\n            record[\"display_name\"] = gr.display_name.getDisplayValue();\n            record[\"class\"] = gr.getValue('sys_class_name');\n            record[\"labelled\"] = [];\n            record[\"computer_sysid\"] = gr.ci.sys_id.toString();\n            if (record[\"class\"] === HARDWARE) {\n                record[\"hardware_class\"] = gr.ci.sys_class_name.toString();\n                if (gr.getValue('asset_tag')) record[\"labelled\"].push({\n                    \"label\": gr.asset_tag.getLabel(),\n                    \"value\": gr.getValue('asset_tag')\n                });\n                if (gr.getValue('serial_number')) record[\"labelled\"].push({\n                    \"label\": gr.serial_number.getLabel(),\n                    \"value\": gr.getValue('serial_number')\n                });\n                if (record[\"hardware_class\"] === COMPUTER_CLASS) {\n                    if (gr.ci.name.toString()) record[\"labelled\"].push({\n                        \"label\": gr.ci.name.getLabel(),\n                        \"value\": gr.ci.name.toString()\n                    });\n                    if (gr.ci.os.toString()) record[\"labelled\"].push({\n                        \"label\": gr.ci.os.getLabel(),\n                        \"value\": gr.ci.os.toString()\n                    });\n                    if (gr.ci.os_version.toString()) record[\"labelled\"].push({\n                        \"label\": gr.ci.os_version.getLabel(),\n                        \"value\": gr.ci.os_version.toString()\n                    });\n                }\n            } else continue;\n        } else {\n            record[\"number\"] = gr.getValue('number');\n            record[\"sys_created_on\"] = gr.getValue('sys_created_on');\n            record[\"short_description\"] = gr.getValue('short_description');\n            if (table == INCIDENT) {\n                record[\"priority\"] = gr.getValue(\"priority\");\n                record[\"priority_label\"] = gr.getDisplayValue(\"priority\");\n                record[\"labelled_row_one\"] = [];\n                record[\"labelled_row_two\"] = [];\n                if (gr.getValue('priority')) record[\"labelled_row_one\"].push({\n                    \"label\": gr.priority.getLabel(),\n                    \"value\": gr.getDisplayValue('priority')\n                });\n                if (gr.getValue('sys_created_on')) {\n\t\t\t\t\tvar gdt = new GlideDateTime(gr.getValue('sys_created_on'));\n\t\t\t\t\tvar dateOnly = gdt.getDate().getDisplayValue();\n                    record[\"labelled_row_one\"].push({\n                        \"label\": gs.getMessage(\"Opened\"),\n                        \"value\": dateOnly\n                    });\n                }\n                if (gr.getValue('state')) record[\"labelled_row_two\"].push({\n                    \"label\": gr.state.getLabel(),\n                    \"value\": gr.getDisplayValue('state')\n                });\n                if (gr.getValue('assignment_group')) record[\"labelled_row_two\"].push({\n                    \"label\": gr.assignment_group.getLabel(),\n                    \"value\": gr.getDisplayValue('assignment_group')\n                });\n            }\n            if (table == INTERACTION) {\n                record[\"labelled\"] = [];\n                record[\"type\"] = gr.getValue(\"type\");\n                record[\"interaction_type_label\"] = gr.getDisplayValue(\"type\") + \" - \";\n                if (gr.getValue('sys_created_on')) {\n\t\t\t\t\tvar gdt = new GlideDateTime(gr.getValue('sys_created_on'));\n\t\t\t\t\tvar dateOnly = gdt.getDate().getDisplayValue();\n                    record[\"labelled\"].push({\n                        \"label\": gs.getMessage(\"Opened\"),\n                        \"value\": dateOnly\n                    });\n                }\n                if (gr.getValue('state')) record[\"labelled\"].push({\n                    \"label\": gr.state.getLabel(),\n                    \"value\": gr.getDisplayValue('state')\n                });\n            }\n        }\n        callerRecords.push(record);\n    }\n    return callerRecords;\n}","acl_failure_result":"","props":"[\n{\n  \"name\": \"table\",\n  \"label\": \"Table\",\n  \"description\": \"\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n},\n{\n  \"name\": \"callerId\",\n  \"label\": \"Caller ID\",\n  \"description\": \"\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n},\n{\n  \"name\": \"recentQuery\",\n  \"label\": \"Recent Query\",\n  \"description\": \"\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": false,\n  \"defaultValue\": \"\"\n},\n{\n  \"name\": \"sysId\",\n  \"label\": \"sysId\",\n  \"description\": \"\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": false,\n  \"defaultValue\": \"\"\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_83d35524439882108ade1febb7b8f24f","api_name":"sn_sow_itsm_common.Get Caller Records","mutates_server_data":"false","name":"Get Caller Records","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record to edit\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-06-10 08:32:32","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"83d63134eb0051102b57e530695228a1","sys_updated_by":"admin","sys_created_on":"2022-06-10 08:32:32","sys_name":"Get IAR Configuration Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var result = new global.CPIARUtils().getResolutionConfigDetails(input.recordId);\n    return result;\n}","acl_failure_result":"","props":"[\r\n {\r\n  \"name\": \"recordId\",\r\n  \"label\": \"Record\",\r\n  \"description\": \"Record to edit\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sys_ux_data_broker_transform_83d63134eb0051102b57e530695228a1","api_name":"sn_oe_sfs.Get IAR Configuration Details","mutates_server_data":"false","name":"Get IAR Configuration Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Security token\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysID of verification\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Verification ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-04-14 09:38:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"847d643d9fa10210d9e5328dda0a1c9f","sys_updated_by":"admin","sys_created_on":"2024-04-14 07:50:34","sys_name":"Get Initial Email Verification Data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n  return new sn_uib_pwd_reset.PwdResetUXFEmailVerificationProcessor().getInitialData(input.token, input.verificationId);\n}\n","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"token\",\r\n        \"label\": \"Token\",\r\n        \"description\": \"Security token\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    } ,{\r\n        \"name\": \"verificationId\",\r\n        \"label\": \"Verification ID\",\r\n        \"description\": \"SysID of verification\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_847d643d9fa10210d9e5328dda0a1c9f","api_name":"sn_uib_pwd_reset.Get Initial Email Verification Data","mutates_server_data":"false","name":"Get Initial Email Verification Data","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Request Payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Request payload to be used for calling debug log API\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-04-10 04:33:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"84b4614577c22110eba8fe21fe5a9943","sys_updated_by":"admin","sys_created_on":"2023-04-05 08:49:11","sys_name":"Get access debug logs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_created_by":"admin","sys_mod_count":"17","sys_tags":"","script":"function transform(input) {\n    var debugLogAPI = new sn_identity.IdentitySecurityApi();\n    return debugLogAPI.getDebugLog(input.requestPayload);\n}","acl_failure_result":"","props":"[ \r\n{\r\n        \"name\": \"requestPayload\",\r\n        \"label\": \"Request Payload\",\r\n        \"description\": \"Request payload to be used for calling debug log API\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_update_name":"sys_ux_data_broker_transform_84b4614577c22110eba8fe21fe5a9943","api_name":"sn_access_analyzer.Get access debug logs","mutates_server_data":"true","name":"Get access debug logs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2021-07-27 15:48:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"84e80c8973e130102d1d2f163cf6a70e","sys_updated_by":"admin","sys_created_on":"2021-07-22 16:18:48","sys_name":"Consumable Substates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform() {\n\tvar current_language = gs.getSession().getLanguage();\n\tvar results = [];\n\tnew global.GlideQuery('sys_choice')\n\t.where('name', 'alm_asset')\n\t.where('element', 'substatus')\n\t.where('dependent_value', '6')\n\t.where('value', 'NOT IN', ['pre_allocated','pending_transfer','pending_install'])\n\t.where('language', current_language)\n\t.select('value', 'sys_id', 'label')\n\t.forEach(function(substate) {\n\t\tvar data = {};\n        data['id'] = substate.value;\n        data['label'] = substate.label;\n        results.push(data);\t\n\t});\n\treturn results;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_84e80c8973e130102d1d2f163cf6a70e","api_name":"sn_itam_workspace.Consumable Substates","mutates_server_data":"false","name":"Consumable Substates","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"data object containing hardening settings\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"VSC Update Hardening Settings","sys_updated_on":"2022-11-18 22:57:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8544f1fdf4301110f877aaa553ca2b02","sys_updated_by":"admin","sys_created_on":"2022-07-20 17:39:42","sys_name":"VSC Update Hardening Settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    // Fetch updated configurations or responses from user in input variable and pass the input to VSCComplianceUtil to run the remediation script \n    var resultData = input.data || {};\n    var util = new VSCComplianceUtil();\n    // Return success message if the property value has been changed.\n    var result = util.activateConfigurations(resultData);\n    if (result == \"success\") {\n        return \"success\";\n    } else if (result == '') {//for configurations for type plugin or tabular doesn't need security_admin elevation\n        return \"success\";\n    } else {\n        return \"error\";\n    }\n}","acl_failure_result":"","props":"[\n  {\n  \"name\": \"data\",\n  \"label\": \"Data\",\n  \"description\": \"data object containing hardening settings\",\n  \"readOnly\": false,\n  \"fieldType\": \"object\",\n  \"mandatory\": false,\n  \"defaultValue\": {}\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_8544f1fdf4301110f877aaa553ca2b02","api_name":"sn_vsc.VSC Update Hardening Settings","mutates_server_data":"false","name":"VSC Update Hardening Settings","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-13 01:11:00","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"85faf47c77d9b11067d6f350ff5a991a","sys_updated_by":"admin","sys_created_on":"2023-09-12 23:50:56","sys_name":"De-Duplication Template Get Library","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\n\tvar templateId = input.templateSysId;\n\tvar gr = new GlideRecord('reconcile_duplicate_template');\n\tgr.get(templateId);\n\tvar library = gr.getValue('library');\n\treturn {\"library\" : library};\n\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_85faf47c77d9b11067d6f350ff5a991a","api_name":"sn_cmdb_ws.De-Duplication Template Get Library","mutates_server_data":"true","name":"De-Duplication Template Get Library","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2025-04-01 20:36:43","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"868ca5b693282210b019362791891809","sys_updated_by":"admin","sys_created_on":"2025-03-31 14:19:47","sys_name":"Restart Customer Action","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    new global.CriticalUpdateUtil().triggerNewPlaybookUponRestart(input.sys_id);\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"sys_id\",\r\n    \"label\": \"ID\",\r\n    \"description\": \"ID\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/983e67b304752210559073c06a02f755","value":"983e67b304752210559073c06a02f755"},"sys_update_name":"sys_ux_data_broker_transform_868ca5b693282210b019362791891809","api_name":"global.Restart Customer Action","mutates_server_data":"false","name":"Restart Customer Action","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys id of task record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name of task record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-10-20 10:02:28","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"86fc51e5473875103f3fd922736d43f3","sys_updated_by":"admin","sys_created_on":"2023-08-21 13:41:54","sys_name":"Get Task Communication Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0d2383dd53687510b256ddeeff7b12b8","value":"0d2383dd53687510b256ddeeff7b12b8"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.taskTable || !input.taskSysId)\n        return {};\n    return new CommunicationManagementUXFControllerUtil().getCommunicationDetails(input.taskTable, input.taskSysId);\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"taskTable\",\r\n      \"label\": \"Task Table\",\r\n      \"description\": \"Table name of task record\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"incident\"\r\n  },\r\n  {\r\n      \"name\": \"taskSysId\",\r\n      \"label\": \"Task Sys Id\",\r\n      \"description\": \"Sys id of task record\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0d2383dd53687510b256ddeeff7b12b8","value":"0d2383dd53687510b256ddeeff7b12b8"},"sys_update_name":"sys_ux_data_broker_transform_86fc51e5473875103f3fd922736d43f3","api_name":"sn_uib_tcm.Get Task Communication Details","mutates_server_data":"false","name":"Get Task Communication Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Class of the CI\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Config Identifier Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysId of the CI\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Workspace App Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"class of the CI to lookup\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysid of the CI to lookup\",\n  \"comment\" : \"\"\n},{\n  \"message\" : \"Supports granular configurations both within and across Workspaces\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get all members for a given dynamic CI group","sys_updated_on":"2024-09-06 22:19:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"87dae54377813110f563bfba4f5a99f5","sys_updated_by":"admin","sys_created_on":"2023-09-07 17:06:30","sys_name":"CMDB get dynamic CI group members","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"// returns array of all the configured CI properties as objects. These are for related CIs to the dynamic CI Group.\nfunction transform(input) {\n\tvar result = {\n\t\terrors: [],\n\t\tsysid: '',\n\t\t\"class\": '',\n\t\tdynamic_ci_group_members: ''\n\t};\n\t\n\ttry {\n\t\tvar sysid = input.sysid;\n\t\tvar cls = input.cls;\n\t\tvar workspaceId = input.workspaceId;\n\t\tvar configIdentifierId = input.configIdentifierId;\n\t\tif (!sysid || !sysid.length || !sysid[0]) {\n\t\t\tresult.errors.push('sysid is missing');\n\t\t}\n\t\tif (!cls || !cls.length || !cls[0]) {\n\t\t\tresult.errors.push('class is missing');\n\t\t}\n\t\t\n\t\tif (!workspaceId) {\n\t\t\tresult.errors.push('Workspace App Id is missing');\n\t\t}\n\n\t\tif (!result.errors.length) {\n\t\t\tresult.sysid = sysid;\n\t\t\tresult['class'] = cls;\n\t\t\tvar response = new UnifiedMapHelper().getDynamicCiGroupMembers({\n\t\t\t\tsysId: sysid, \n\t\t\t\tcls: cls,\n\t\t\t\tworkspaceId: workspaceId, \n\t\t\t\tconfigIdentifierId: configIdentifierId\n\t\t\t});\n\t\t\tif (response.success) {\n\t\t\t\tresult.dynamic_ci_group_members = response.result;\n\t\t\t} else {\n\t\t\t\tresult.errors.push(response.error.message);\n\t\t\t}\n\t\t}\n\t\t\n\t} catch (error) {\n\t\tresult.errors.push(error.toString());\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"sysid\",\r\n    \"label\": \"SysId of the CI\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"sysid of the CI to lookup\"\r\n  },\r\n  {\r\n    \"name\": \"cls\",\r\n    \"label\": \"Class of the CI\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"class of the CI to lookup\"\r\n  },\r\n  {\r\n      \"name\": \"workspaceId\",\r\n      \"label\": \"Workspace App Id\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": true,\r\n      \"description\": \"Workspace App Id\"\r\n   },\r\n   {\r\n      \"name\": \"configIdentifierId\",\r\n      \"label\": \"Config Identifier Id\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": false,\r\n      \"description\": \"Supports granular configurations both within and across Workspaces\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_87dae54377813110f563bfba4f5a99f5","api_name":"sn_cmdb_ws.CMDB get dynamic CI group members","mutates_server_data":"false","name":"CMDB get dynamic CI group members","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Show Now Assist Skills KPI Card in Admin Home if a BU plugin is installed","sys_updated_on":"2024-04-18 07:17:42","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"87fd217353433110453cddeeff7b1262","sys_updated_by":"admin","sys_created_on":"2023-12-18 11:03:25","sys_name":"Show Now Assist Skills KPI Card","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1163fa730f102010e8c940c1df767e8c","value":"1163fa730f102010e8c940c1df767e8c"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform() {\n    var isBUPluginInstalled = false;\n    try {\n        const skillConfigUtil = new sn_nowassist_admin.NowAssistSkillConfig();\n        if (skillConfigUtil.isBUPluginInstalled) {\n            isBUPluginInstalled = skillConfigUtil.isBUPluginInstalled();\n        } else {\n            isBUPluginInstalled = GlidePluginManager.isActive('sn_genai_platform') || GlidePluginManager.isActive('sn_now_creator');\n        }\n\n    } catch (e) {\n        gs.error('Failed to validate if BU plugin is installed');\n    }\n    return isBUPluginInstalled;\n\n\n\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1163fa730f102010e8c940c1df767e8c","value":"1163fa730f102010e8c940c1df767e8c"},"sys_update_name":"sys_ux_data_broker_transform_87fd217353433110453cddeeff7b1262","api_name":"sn_admin_center.Show Now Assist Skills KPI Card","mutates_server_data":"false","name":"Show Now Assist Skills KPI Card","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"End Date Time\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Group\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Start Date Time\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"TimeZone\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-30 13:30:35","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"87ff25f3eba32110b5673d9f7f5228cd","sys_updated_by":"admin","sys_created_on":"2023-06-27 11:34:47","sys_name":"My TimeOff Requests","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n    if (input.startDateTime && input.endDateTime) {\n        return new OCTimeOffUtil().list(input.startDateTime, input.endDateTime, input.timeZone, input.group);\n    }\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"startDateTime\",\r\n  \"label\": \"Start Date Time\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"endDateTime\",\r\n  \"label\": \"End Date Time\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"timeZone\",\r\n  \"label\": \"TimeZone\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"group\",\r\n  \"label\": \"Group\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_87ff25f3eba32110b5673d9f7f5228cd","api_name":"sn_uib_on_call.My TimeOff Requests","mutates_server_data":"false","name":"My TimeOff Requests","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Data broker to check if we want to display cmdb_ci data only for the coverage charts","sys_updated_on":"2024-01-22 17:19:42","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"880ac72f731131103f3cc3ed8ff6a789","sys_updated_by":"admin","sys_created_on":"2023-09-21 23:20:54","sys_name":"Multisource Get Is CMDB Only","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\tvar isCmdbOnly = gs.getProperty('sn_cmdb_ws.ms.calculate_cmdb_only', false);\n\tif (isCmdbOnly == 'true')\n\t\treturn true;\n\treturn false;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_880ac72f731131103f3cc3ed8ff6a789","api_name":"sn_cmdb_ws.Multisource Get Is CMDB Only","mutates_server_data":"false","name":"Multisource Get Is CMDB Only","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Custom role can access the add and edit event ","sys_updated_on":"2024-11-07 07:07:28","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"882da41693591210bee512f9848918aa","sys_updated_by":"admin","sys_created_on":"2024-10-19 07:05:57","sys_name":"CalendarUserRole","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform() {\n\n    var rolesFromProperty = gs.getProperty('nextui_calendar.user.role');\n\n    if (gs.nil(rolesFromProperty))\n        return false;\n\n    return gs.hasRole(rolesFromProperty);\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/15672bfb04b12210559073c06a02f7e3","value":"15672bfb04b12210559073c06a02f7e3"},"sys_update_name":"sys_ux_data_broker_transform_882da41693591210bee512f9848918aa","api_name":"global.CalendarUserRole","mutates_server_data":"false","name":"CalendarUserRole","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Multisource get CMDB Groups","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8868900a7779111023651605bc5a99f1","sys_updated_by":"admin","sys_created_on":"2022-09-08 22:38:27","sys_name":"MS get CMDB Groups","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tvar results = util.getAndTransformCMDBGroups();\n\t\n\treturn results;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_8868900a7779111023651605bc5a99f1","api_name":"sn_cmdb_ws.MS get CMDB Groups","mutates_server_data":"false","name":"MS get CMDB Groups","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Parent Page\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-08-12 12:36:19","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"88acfbfad439f010f877680f9acc201a","sys_updated_by":"admin","sys_created_on":"2021-08-10 07:03:01","sys_name":"Refresh Important Actions","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4d8039d0533130106b86ddeeff7b128b","value":"4d8039d0533130106b86ddeeff7b128b"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var parentPage = input.parentPage;\n    var resObj = new sn_itam_recomm.ImportantActionUtils().refreshImpActionsDataForDashboard(parentPage);\n    if (resObj.cards_metadata && resObj.cards_metadata.length > 0) {\n        for (var i = 0; i < resObj.cards_metadata.length; i++) {\n            if (gs.nil(resObj.cards_metadata[i].metaData2)) {\n                resObj.cards_metadata[i].hideMetaData2 = true;\n            }\n        }\n    }\n    return resObj;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"parentPage\",\r\n  \"label\": \"Parent Page\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4d8039d0533130106b86ddeeff7b128b","value":"4d8039d0533130106b86ddeeff7b128b"},"sys_update_name":"sys_ux_data_broker_transform_88acfbfad439f010f877680f9acc201a","api_name":"sn_itam_recomm.Refresh Important Actions","mutates_server_data":"false","name":"Refresh Important Actions","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Defective\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Description\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Quantity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Return quantity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Return reason\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-04-25 06:31:09","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"88d11cb6e0f23010fa9bf5091feb0adf","sys_updated_by":"maint","sys_created_on":"2021-09-28 06:52:39","sys_name":"Return transfer order","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"maint","sys_mod_count":"16","sys_tags":"","script":"function transform(input) {\n    var isDefective = input.defective;\n\tvar quantity = parseInt(input.quantity, 10);\n    var rto = new global.TransferOrderReturn();\n    var tol = new GlideRecord('alm_transfer_order_line');\n    tol.get(input.sysId);\n\tvar rtol = rto.returnItemsFromTransferOrderLine(tol, quantity, input.reason, isDefective);\n\tgs.addInfoMessage(gs.getMessage('Created return transfer order line'));\n\treturn rtol.getValue('sys_id');\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"quantity\",\n    \"label\": \"Return quantity\",\n   \"fieldType\": \"string\",\n    \"description\": \"Quantity\",\n    \"readOnly\": false,\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"reason\",\n    \"label\": \"Return reason\",\n   \"fieldType\": \"text\",\n    \"description\": \"Description\",\n    \"readOnly\": false,\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"defective\",\n    \"label\": \"Defective\",\n    \"fieldType\": \"boolean\",\n    \"description\": \"Defective\",\n    \"readOnly\": false,\n    \"mandatory\": false,\n    \"defaultValue\": \"false\"\n  },\n {\n    \"name\": \"sysId\",\n    \"label\": \"Sys Id\",\n    \"fieldType\": \"string\",\n    \"description\": \"Sys id\",\n    \"readOnly\": false,\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_88d11cb6e0f23010fa9bf5091feb0adf","api_name":"sn_itam_workspace.Return transfer order","mutates_server_data":"true","name":"Return transfer order","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Process Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Will activate a particular process\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-04-08 06:36:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"88f229bbeb9102107626211f1a522881","sys_updated_by":"admin","sys_created_on":"2024-04-08 06:36:33","sys_name":"Guided setup activate process","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1cb77a801b9af01039c155f3604bcb9e","value":"1cb77a801b9af01039c155f3604bcb9e"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"  function transform(input) {\n      var result = {\n          \"success\": false,\n          \"errors\": []\n      };\n      if (input.processId) {\n          activeResponse = sn_pad.PDAutomationProvider.activateProcess(input.processId);\n          if (activeResponse.state == \"SUCCESS\") {\n              result.success = true;\n          } else {\n              result.errors.push(activeResponse.errors);\n          }\n      }\n      return result;\n  }","acl_failure_result":"{\r\n    \"message\":\"User does not have required ACL to perform this action.\"\r\n}","props":"[\r\n    {\r\n        \"name\": \"processId\",\r\n        \"label\": \"Process Id\",\r\n        \"description\": \"Will activate a particular process\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1cb77a801b9af01039c155f3604bcb9e","value":"1cb77a801b9af01039c155f3604bcb9e"},"sys_update_name":"sys_ux_data_broker_transform_88f229bbeb9102107626211f1a522881","api_name":"sn_ads_setup.Guided setup activate process","mutates_server_data":"true","name":"Guided setup activate process","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Current task sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Check eligibility for smart detection and eligible CI information","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"89c170d3b735011094bb21208e11a9d4","sys_updated_by":"maint","sys_created_on":"2022-02-26 01:32:18","sys_name":"Check smart detection eligibility","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"39","sys_tags":"","script":"function transform(input) {\n    var taskId = input.taskId;\n\n    var smartDetectionUtil = new sn_cmdb_ws.CMDBAttestationSmartDetectionUtil();\n\n    var isSmartDetectionDisabled = smartDetectionUtil.isSmartDetectionDisabled();\n    var isEligibleForSmartDetection = smartDetectionUtil.isEligibleForSmartDetection();\n    var result = {};\n\n    if (!isSmartDetectionDisabled && isEligibleForSmartDetection) {\n        result = smartDetectionUtil.getTaskState(taskId);\n        result.smartDetectionFilter = smartDetectionUtil.getSmartDetectionFilter();\n\n\t\tvar smartDetectionEligibleCisInfo = smartDetectionUtil.getSmartDetectionEligibleCIsInfo(taskId);\n\n        if (result.smartDetectionAccepted) {\n            result.activateSmartDetection = false;\n\n            // if the smart detection has been accepted but all the CIs have been moved to Not Yet Reviewed and some CIs are eligible for smart detection, retrigger the flow\n            var attestationStatusCount = smartDetectionUtil.getCountBasedOnAttestationStatus(taskId);\n            var allCisInNotYetReviewedState = attestationStatusCount &&\n                attestationStatusCount.length === 1 &&\n                attestationStatusCount[0].attestation_status === smartDetectionUtil.ATTESTATION_STATUS.NOT_YET_REVIEWED &&\n                attestationStatusCount[0].count > 0;\n\n            if (allCisInNotYetReviewedState && smartDetectionEligibleCisInfo.ciCount > 0) {\n                result.activateSmartDetection = true;\n            }\n        } else {\n\t\t\t// insert smart detection state if the state is empty\n\t\t\tif (!result.runOn) {\n\t\t\t\tsmartDetectionUtil.insertOrUpdateSmartDetectionState(taskId, false, smartDetectionEligibleCisInfo.ciCount, result.hidePopupUserPref);\n\t\t\t}\n            result.activateSmartDetection = !result.hidePopupUserPref;\n            result.ciCount = smartDetectionEligibleCisInfo.ciCount;\n            result.lastDiscovered = smartDetectionEligibleCisInfo.lastDiscovered;\n            result.runOn = smartDetectionEligibleCisInfo.runOn;\n        }\n    } else {\n        result.activateSmartDetection = false;\n    }\n\n    result.smartDetectionDisabled = isSmartDetectionDisabled;\n    result.smartDetectionEligible = isEligibleForSmartDetection;\n    return result;\n}","acl_failure_result":"","props":"[{\r\n \"name\": \"taskId\",\r\n  \"label\": \"Current task sysId\",\r\n  \"description\": \"Current task sysId\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_89c170d3b735011094bb21208e11a9d4","api_name":"sn_cmdb_ws.Check smart detection eligibility","mutates_server_data":"false","name":"Check smart detection eligibility","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"new subscription threshold value\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"threshold\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Updates subscription_threshold property in sys_properties table","sys_updated_on":"2023-05-31 17:17:41","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"89ef5c5f43022110805a71f1cbb8f289","sys_updated_by":"admin","sys_created_on":"2023-04-12 03:01:12","sys_name":"Update Threshold property","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_created_by":"admin","sys_mod_count":"16","sys_tags":"","script":"/**\n * Data broker to modify sn_sub_man.u_subscription_threshold sys_property to new threshold value\n * @param {object} input - input.threshold -> new threshold value\n */\nfunction transform(input) {\n    const gr = new GlideRecord(\"sys_properties\");\n    gr.addQuery(\"name\", \"sn_sub_man.u_subscription_threshold\");\n    gr.query();\n    const hasNext = gr.next();\n    gr.setValue(\"value\", input.threshold);\n\n    if (hasNext) {\n        gr.update();\n    } else {\n        gr.setValue(\"type\", \"integer\");\n        gr.setValue(\"name\", \"sn_sub_man.u_subscription_threshold\");\n        gr.insert();\n    }\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\":\"threshold\",\r\n      \"label\":\"threshold\",\r\n      \"description\":\"new subscription threshold value\",\r\n      \"fieldType\":\"string\",\r\n      \"mandatory\":true\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_update_name":"sys_ux_data_broker_transform_89ef5c5f43022110805a71f1cbb8f289","api_name":"sn_sub_man.Update Threshold property","mutates_server_data":"false","name":"Update Threshold property","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"List of selected group ids\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of the subscription\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"groupIds\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"subscriptionId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to remove groups from subscription","sys_updated_on":"2024-06-04 22:21:16","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8a44bb8b434361101f6d73e60db8f2d4","sys_updated_by":"admin","sys_created_on":"2023-05-31 16:44:00","sys_name":"Remove Groups from Subscription","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_created_by":"maint","sys_mod_count":"18","sys_tags":"","script":"/**\n * Data broker to remove groups from subscription\n * @param {object} input - Gets subscriptionId and groupIds as input as defined in the Properties\n * @return {string}\n */\nfunction transform(input) {\n    const subscriptionId = input.subscriptionId;\n    const groupIds = input.groupIds;\n\n    if (!subscriptionId || subscriptionId.length === 0 || !groupIds || groupIds.length === 0) {\n        // Counter-intuitively, this script gets called multiple times and often with an empty group list\n        // Returning 'false' here will make other scripts think that the allocation failed and display error messages\n        // Returning 'true' with the input guard is necessary for the downstream behavior to work as desired.\n        return 'true';\n    }\n\n    const maxEntityCountToProcessSync = parseInt(gs.getProperty('sn_sub_man.remove_group_max_entity_count_for_sync', 500));\n\n    const groupAllocationService = new sn_sub_man.GroupAllocationService();\n    const entityCount = groupAllocationService.getEntityCountByGroupIds(groupIds);\n\n    if (entityCount > maxEntityCountToProcessSync) {\n        // Execute sync\n        groupAllocationService.removeGroupsFromSubscription(groupIds, subscriptionId);\n\n        // Execute async\n        const steps = gs\n            .getProperty('sn_sub_man.add_group_async_steps', 'removeGroupMembersFromSubscription,executePartialUpdateForGroups')\n            .split(',');\n        const args = {\n            subscriptionId: subscriptionId,\n            groupIds: groupIds\n        };\n\n        gs.eventQueue('sn_sub_man.rm_groups_from_subscription', null, JSON.stringify(steps), JSON.stringify(args));\n\n        const asyncInfoMessage = sn_i18n.Message.getMessage('Subscription Management', 'An update job has started and will continue in the background. Allocations will be updated when the process completes. Refresh the page and check allocations in a few minutes.');\n        gs.addInfoMessage(asyncInfoMessage);\n    } else {\n        // Execute sync\n        groupAllocationService.removeGroupsFromSubscription(groupIds, subscriptionId);\n        groupAllocationService.removeGroupMembersFromSubscription(groupIds, subscriptionId);\n        groupAllocationService.executePartialUpdateForGroups(groupIds);\n    }\n\n    return 'true';\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\":\"subscriptionId\",\r\n      \"label\":\"subscriptionId\",\r\n      \"description\":\"Sys id of the subscription\",\r\n      \"fieldType\":\"string\",\r\n      \"mandatory\":true\r\n   },\r\n{\r\n      \"name\":\"groupIds\",\r\n      \"label\":\"groupIds\",\r\n      \"description\":\"List of selected group ids\",\r\n      \"fieldType\":\"array\",\r\n      \"mandatory\":true\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_update_name":"sys_ux_data_broker_transform_8a44bb8b434361101f6d73e60db8f2d4","api_name":"sn_sub_man.Remove Groups from Subscription","mutates_server_data":"false","name":"Remove Groups from Subscription","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Knowledge article id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Knowledge article table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Publish knowledge article\r\n","sys_updated_on":"2022-04-19 09:57:30","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8a9fd33b77c20110dc25a5ed5b5a9945","sys_updated_by":"admin","sys_created_on":"2022-03-12 13:47:36","sys_name":"Publish knowledge article","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function publish(input){\n\tif(gs.nil(input) || gs.nil(input.articleId) || gs.nil(input.articleTable))\n\t\treturn false;\n\treturn new global.KnowledgeUIAction().publishArticleById(input.articleTable,input.articleId);\n}","acl_failure_result":"","props":"[\r\n     {\r\n        \"name\": \"articleId\",\r\n        \"label\": \"Knowledge article id\",\r\n        \"description\": \"Knowledge article id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n     {\r\n        \"name\": \"articleTable\",\r\n        \"label\": \"Knowledge article table\",\r\n        \"description\": \"Knowledge article table\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]\r\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_8a9fd33b77c20110dc25a5ed5b5a9945","api_name":"sn_km_uib.Publish knowledge article","mutates_server_data":"false","name":"Publish knowledge article","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Property Value\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Title\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"choices\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-12-08 16:44:44","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8aa3403d5b900110ab933520b881c7ae","sys_updated_by":"admin","sys_created_on":"2021-12-08 16:44:44","sys_name":"label stacked with choices","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1872ee045b100110ab933520b881c727","value":"1872ee045b100110ab933520b881c727"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar displayValue = input.prop_value;\n\tif (input.choices) {\n\t\tvar keyMap = getChoices(input.choices);\n\t\t//var keyMap = {};\n\t\tdisplayValue = keyMap[displayValue];\n\t}\n\t\n\treturn [\n    {\"label\":input.title,\n    \"value\":[\n      {\"type\":\"string\",\"value\":displayValue}\n    ]}\n  ];\n\t\n\t\n\tfunction getChoices(choices) {\n\t\tvar keyMap = {};\n\t\tvar items = choices.split(', ');\n\t\tfor (var i=0; i<items.length; i++) {\n\t\t\tvar item = items[i].split('=');\n\t\t\tkeyMap[item[1]] = item[0];\n\t\t}\n\t\treturn keyMap;\n\t}\n}\n\n","acl_failure_result":"","props":"[{\r\n\"name\":\"title\",\r\n\"label\":\"Title\",\r\n\"fieldType\":\"string\",\r\n\"defaultValue\":\"title\"\r\n},\r\n{\r\n\"name\":\"prop_value\",\r\n\"label\":\"Property Value\",\r\n\"fieldType\":\"integer\",\r\n\"defaultValue\":\"testing\"\r\n},\r\n{\r\n\"name\":\"choices\",\r\n\"label\":\"choices\",\r\n\"fieldType\":\"string\",\r\n\"defaultValue\":\"\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1872ee045b100110ab933520b881c727","value":"1872ee045b100110ab933520b881c727"},"sys_update_name":"sys_ux_data_broker_transform_8aa3403d5b900110ab933520b881c7ae","api_name":"sn_fdih_dashboards.label stacked with choices","mutates_server_data":"false","name":"label stacked with choices","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Query Json\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Query Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Query SysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update a multisource query given query sys id and a queryJson payload","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8b1e01565d3dd110f877f39f69261af9","sys_updated_by":"maint","sys_created_on":"2022-09-09 21:11:42","sys_name":"Multisource update query","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar result = {\n\t\terror: null,\n\t\tstatus : 'success',\n\t\tmessage : null\n\t};\n\t\n\tvar querySysId = input.query_sys_id;\n\tif (!querySysId) {\n\t\tresult.status = 'failure';\n\t\tresult.error = \"query_sys_id is missing\";\n\t\treturn result;\n\t}\n\t\n\tvar queryJson = input.query_json;\n\tif(!queryJson) {\n\t\tresult.status = 'failure';\n\t\tresult.error = \"query_json is missing\";\n\t\treturn result;\n\t}\n\t\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tresult = util.updateQuery(querySysId,queryJson);\n\t\n\treturn result;\n\t\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"query_sys_id\",\n    \"label\": \"Query Sys Id\",\n    \"description\": \"Query SysId\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n {\n    \"name\": \"query_json\",\n    \"label\": \"Query Json\",\n    \"description\": \"Query SysId\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_8b1e01565d3dd110f877f39f69261af9","api_name":"sn_cmdb_ws.Multisource update query","mutates_server_data":"true","name":"Multisource update query","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Display field values\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Display fields\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Encoded query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search config\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search term\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The search term used to lookup\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"limit\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"offset\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Perform a search for records given an advanced search configuration.","sys_updated_on":"2024-09-20 17:10:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8b2a6055675302102257c98f06b420aa","sys_updated_by":"admin","sys_created_on":"2024-07-08 18:29:16","sys_name":"Lookup advanced search","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3552a6ee392fa110740d28303df22c0a","value":"3552a6ee392fa110740d28303df22c0a"},"sys_created_by":"admin","sys_mod_count":"107","sys_tags":"","script":"function transform(input) {\n    const results = [];\n    const {\n        searchConfig,\n        table,\n        searchTerm,\n        displayFields,\n        offset,\n        encodedQuery,\n        limit\n    } = input;\n    const {\n        referenceTables\n    } = searchConfig;\n\n    if (!searchConfig || !gs.tableExists(table) || searchTerm.length < 3)\n        return [];\n\n    const createIsValidFieldFilter = gr => field => gr.isValidField(field);\n    const isReferenceField = (gr, field) => gr.isValidField(field) && gr.getElement(field)?.getED()?.getInternalType() === 'reference';\n    const getReferenceFieldDisplayName = (gr, field) => new GlideRecordSecure(gr.getElement(field)?.getReferenceTable())?.getDisplayName();\n\n    const getReferenceDisplayNameMap = (gr, fields) => {\n        if (!gr || !fields)\n            return;\n\n        return fields.reduce((displayNameMap, field) => {\n            if (isReferenceField(gr, field) && !displayNameMap.has(field)) {\n                const displayName = getReferenceFieldDisplayName(gr, field);\n                if (displayName)\n                    displayNameMap.set(field, displayName);\n            }\n\n            return displayNameMap;\n        }, new Map());\n    };\n\n    const referenceSysIds = [];\n    if (referenceTables) {\n        for (const referenceTable in referenceTables) {\n            const referenceTableConfig = referenceTables[referenceTable];\n            const {\n                referenceFields\n            } = referenceTableConfig;\n\n            // Ensure valid table and fields are passed in\n            if (!gs.tableExists(referenceTable) || !referenceFields)\n                continue;\n\n            const gr = new GlideRecordSecure(referenceTable);\n            gr.initialize();\n\n            const referenceFieldList = referenceFields.split(',');\n            const validReferenceFields = referenceFieldList.filter(function(field) {\n                const glideElement = gr.getElement(field);\n\n                // Ensure the field is a valid reference field type and is a reference\n                // to the lookup table\n                return gr.isValidField(field) &&\n                    glideElement.getED().getInternalType() === 'reference' &&\n                    glideElement.getReferenceTable() === table;\n            });\n\n            if (!validReferenceFields.length)\n                continue;\n\n            const exactMatchSearchFieldList = referenceTableConfig\n                .exactMatchSearchFields\n                ?.split(\",\")\n                ?.filter(createIsValidFieldFilter(gr));\n\n            const startsWithSearchFieldList = referenceTableConfig\n                .startsWithSearchFields\n                ?.split(\",\")\n                ?.filter(createIsValidFieldFilter(gr));\n\n            // Ensure valid search fields\n            if (\n                !exactMatchSearchFieldList?.length &&\n                !startsWithSearchFieldList?.length\n            ) continue;\n\n            const exactMatchReferenceDisplayNameMap = getReferenceDisplayNameMap(gr, exactMatchSearchFieldList);\n            const startsWithReferenceDisplayNameMap = getReferenceDisplayNameMap(gr, startsWithSearchFieldList);\n\n            let grOr;\n\n            // Exact match field queries\n            if (exactMatchSearchFieldList?.length) {\n                grOr = gr.addQuery(exactMatchSearchFieldList[0], searchTerm);\n                exactMatchSearchFieldList.forEach((field, index) => {\n                    if (exactMatchReferenceDisplayNameMap?.has(field))\n                        grOr.addOrCondition(`${field}.${exactMatchReferenceDisplayNameMap.get(field)}`, searchTerm);\n\n                    index !== 0 && grOr.addOrCondition(field, searchTerm);\n                });\n            }\n\n            // Starts with field queries\n            if (startsWithSearchFieldList?.length) {\n                if (!grOr)\n                    grOr = gr.addQuery(startsWithSearchFieldList[0], \"STARTSWITH\", searchTerm);\n                else\n                    grOr.addOrCondition(startsWithSearchFieldList[0], \"STARTSWITH\", searchTerm);\n                startsWithSearchFieldList.forEach((field, index) => {\n                    if (startsWithReferenceDisplayNameMap?.has(field))\n                        grOr.addOrCondition(`${field}.${startsWithReferenceDisplayNameMap.get(field)}`, \"STARTSWITH\", searchTerm);\n\n                    index !== 0 && grOr.addOrCondition(field, \"STARTSWITH\", searchTerm);\n                });\n            }\n            gr.query();\n\n            while (gr.next()) {\n                validReferenceFields.forEach(function(field) {\n                    const value = gr.getValue(field);\n                    if (value)\n                        referenceSysIds.push(value);\n                });\n            }\n        }\n    }\n\n    const gr = new GlideRecordSecure(table);\n    gr.initialize();\n\n    const exactMatchFieldList = searchConfig\n        .exactMatchSearchFields\n        ?.split(\",\")\n        ?.filter(createIsValidFieldFilter(gr));\n\n    const startsWithSearchFieldList = searchConfig\n        .startsWithSearchFields\n        ?.split(\",\")\n        .filter(createIsValidFieldFilter(gr));\n\n    if (!referenceSysIds?.length &&\n        !exactMatchFieldList?.length &&\n        !startsWithSearchFieldList?.length)\n        return [];\n\n    const exactMatchReferenceDisplayNameMap = getReferenceDisplayNameMap(gr, exactMatchFieldList);\n    const startsWithReferenceDisplayNameMap = getReferenceDisplayNameMap(gr, startsWithSearchFieldList);\n\n    let grOr;\n\n    // Exact match field queries\n    if (exactMatchFieldList?.length) {\n        grOr = gr.addQuery(exactMatchFieldList[0], searchTerm);\n        exactMatchFieldList.forEach((field, index) => {\n            if (exactMatchReferenceDisplayNameMap?.has(field))\n                grOr.addOrCondition(`${field}.${exactMatchReferenceDisplayNameMap.get(field)}`, searchTerm);\n\n            index !== 0 && grOr.addOrCondition(field, searchTerm);\n        });\n    }\n\n    // Starts with field queries\n    if (startsWithSearchFieldList?.length) {\n        if (!grOr)\n            grOr = gr.addQuery(startsWithSearchFieldList[0], \"STARTSWITH\", searchTerm);\n        else\n            grOr.addOrCondition(startsWithSearchFieldList[0], \"STARTSWITH\", searchTerm);\n        startsWithSearchFieldList.forEach((field, index) => {\n            if (startsWithReferenceDisplayNameMap?.has(field))\n                grOr.addOrCondition(`${field}.${startsWithReferenceDisplayNameMap.get(field)}`, \"STARTSWITH\", searchTerm);\n\n            index !== 0 && grOr.addOrCondition(field, \"STARTSWITH\", searchTerm);\n        });\n    }\n\n    // Reference sys_ids\n    if (referenceSysIds.length) {\n        if (!grOr)\n            gr.addQuery('sys_id', 'IN', referenceSysIds.join(','));\n        else\n            grOr.addOrCondition('sys_id', 'IN', referenceSysIds.join(','));\n    }\n\n    if (encodedQuery)\n        gr.addQuery(encodedQuery);\n\n    gr.setLimit(limit);\n    gr.chooseWindow(offset, limit);\n\n    gr.query();\n\n    // Deduplicated display field list \n    const displayFieldsList = Array.from(new Set([\n        // Include the table display field in the results\n        gr.getDisplayName(),\n        ...displayFields.split(',')\n    ]));\n\n    // Construct results based on display fields\n    while (gr.next()) {\n        const result = {};\n\n        if (displayFieldsList.length) {\n            displayFieldsList.forEach(function(field, index) {\n                const fieldName = field;\n\n                const fieldResult = {};\n\n                fieldResult.value = gr.getValue(fieldName);\n                fieldResult.displayValue = gr.getDisplayValue(fieldName);\n\n                const glideElement = gr.getElement(fieldName);\n\n                fieldResult.label = glideElement.getLabel();\n                fieldResult.internalType = glideElement.getED().getInternalType();\n\n                if (fieldResult.internalType === 'reference') {\n                    fieldResult.referenceTable = glideElement.getReferenceTable();\n                    fieldResult.referenceValue = gr.getValue(field);\n                    fieldResult.referenceDisplayValue = gr.getDisplayValue(field);\n                }\n\n                result[fieldName] = fieldResult;\n            });\n        }\n\n        const rowData = {};\n        rowData.displayValue = gr.getDisplayValue();\n        rowData.uniqueValue = gr.getUniqueValue();\n\n        result._row_data = rowData;\n        result._isAdvancedSearch = true;\n\n        results.push(result);\n    }\n\n    return results;\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"table\",\n    \"label\": \"Table name\",\n    \"description\": \"\",\n    \"readOnly\": false,\n    \"fieldType\": \"table_name\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"searchConfig\",\n    \"label\": \"Search config\",\n    \"description\": \"\",\n    \"readOnly\": false,\n    \"fieldType\": \"object\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"searchTerm\",\n    \"label\": \"Search term\",\n    \"description\": \"The search term used to lookup\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"displayFields\",\n    \"label\": \"Display fields\",\n    \"description\": \"Display field values\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"offset\",\n    \"label\": \"offset\",\n    \"description\": \"\",\n    \"readOnly\": false,\n    \"fieldType\": \"number\",\n    \"mandatory\": true,\n    \"defaultValue\": \"0\"\n  },\n  {\n    \"name\": \"limit\",\n    \"label\": \"limit\",\n    \"description\": \"\",\n    \"readOnly\": false,\n    \"fieldType\": \"number\",\n    \"mandatory\": true,\n    \"defaultValue\": \"1000\"\n  },\n  {\n    \"name\": \"encodedQuery\",\n    \"label\": \"Encoded query\",\n    \"description\": \"\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3552a6ee392fa110740d28303df22c0a","value":"3552a6ee392fa110740d28303df22c0a"},"sys_update_name":"sys_ux_data_broker_transform_8b2a6055675302102257c98f06b420aa","api_name":"sn_record_lookup.Lookup advanced search","mutates_server_data":"false","name":"Lookup advanced search","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Enable Emojis\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enable Legacy Support\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enable Teams\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enable participant suggestions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enabled\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enables sidebar discussion on interaction, and task based records if not customised\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"enable MS Teams Integration for collab chat\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"enable collab chat\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"enable emojis for collab chat\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"enable participant suggestions\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Create or update collab chat settings record","sys_updated_on":"2024-05-30 17:01:25","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8b768c30c34321104c13cc57bb40dd71","sys_updated_by":"admin","sys_created_on":"2023-05-23 23:56:54","sys_name":"Create or Update Collab Chat Settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n\tconst enableEmojis = input.enable_emojis.value;\n\tconst enableTeams = input.enable_teams.value;\n\tconst enabled = input.enabled.value;\n\tconst enableParticipantSuggestions = input.enable_participant_suggestions.value;\n\tconst enableLegacySupport = input.enable_legacy_support.value;\n\treturn sn_collab.CollabChatScriptObject.createOrUpdateSettingsRecord(enabled, enableTeams, enableEmojis, enableParticipantSuggestions, enableLegacySupport);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"enable_emojis\",\r\n    \"label\": \"Enable Emojis\",\r\n    \"description\": \"enable emojis for collab chat\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"boolean\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"enable_teams\",\r\n    \"label\": \"Enable Teams\",\r\n    \"description\": \"enable MS Teams Integration for collab chat\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"boolean\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"enabled\",\r\n    \"label\": \"Enabled\",\r\n    \"description\": \"enable collab chat\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"boolean\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"enable_participant_suggestions\",\r\n    \"label\": \"Enable participant suggestions\",\r\n    \"description\": \"enable participant suggestions\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"boolean\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"enable_legacy_support\",\r\n    \"label\": \"Enable Legacy Support\",\r\n    \"description\": \"Enables sidebar discussion on interaction, and task based records if not customised\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"boolean\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_8b768c30c34321104c13cc57bb40dd71","api_name":"sn_oe_sfs.Create or Update Collab Chat Settings","mutates_server_data":"true","name":"Create or Update Collab Chat Settings","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Subscription url params\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"URL params\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-07-01 08:49:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8b78119d53673110b6ccddeeff7b127c","sys_updated_by":"admin","sys_created_on":"2024-01-04 11:47:45","sys_name":"Get on call subscription url","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(inputs) {\n    var params = inputs.urlParams;\n    if (!params || !params.groupId) return;\n\n    var result = {};\n    var ocTeamsCalendarUtil = new sn_uib_on_call.OnCallTeamsCalendarUtil();\n    var ocRotaICalUIB = new sn_uib_on_call.OCRotaICalendarUIB();\n    ocTeamsCalendarUtil.clearErrorMessages();\n    if (!params.rotaId || !params.userId) return;\n    result.url = ocRotaICalUIB.getMemberCalendarUIPageURL(params.groupId, params.rotaId, params.userId);\n    result.errorMessages = ocTeamsCalendarUtil.getErrorMessages();\n    return result;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"urlParams\",\r\n    \"label\": \"URL params\",\r\n    \"description\": \"Subscription url params\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"json\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_8b78119d53673110b6ccddeeff7b127c","api_name":"sn_uib_on_call.Get on call subscription url","mutates_server_data":"false","name":"Get on call subscription url","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data Egress Trend Date Filter Condition.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Date Filter Condition\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Returns Data Egress Overview Trends for a selected time.","sys_updated_on":"2024-10-15 08:23:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8bc275e6ffa102105408ffffffffff86","sys_updated_by":"admin","sys_created_on":"2024-04-16 21:19:13","sys_name":"Data Egress Overview Trends","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\nvar trendDataArr = [];\nvar trendDataObj = {};\nvar trendValArr = [];\nvar counter = 0;\nvar divisor = 1;\nvar suffixes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"];\nvar source_type_api = ['APIJSONV2', 'APIREST', 'APISOAP'];\nvar source_type_export = ['EXPORTSET', 'EXPORTURI']; //Re-check the logic\nvar apiTrendByDate = {};\nvar exportTrendByDate = {};\n\nvar sourceCategoryMappings = {\n\t\"EXPORTURI\" : \"Export\",\n\t\"EXPORTSET\" : \"Export\",\n\t\"APIREST\" : \"API\",\n\t\"APISOAP\" : \"API\",\n\t\"APIJSONV2\" : \"API\"\n};\nvar dateFilterConditon = input.dateFilterCondition || \"sys_created_onBETWEENjavascript:gs.beginningOfLast12Months()@javascript:gs.endOfYesterday()\";\nvar ga = new GlideAggregate(\"data_egress_count\");\nga.addEncodedQuery(dateFilterConditon, true);\nga.query();\nwhile(ga.next()) {\n\tvar sourceType = ga.getValue('source');\n\tvar sourceCategory = sourceCategoryMappings[sourceType];\n\tif (!trendDataObj[sourceCategory]) {\n\t\ttrendDataObj[sourceCategory] = {\n        \"data\": [],\n        \"metadata\": {\n            \"eventData\": {\n                \"indicatorSysid\": \"fb007202d7130100b96d45a3ce6103b4\"\n            },\n            \"dataSourceLabel\": \"\",\n            \"series\": [\n                {\n                    \"label\": \"\",\n                    \"id\": \"value\",\n                    \"type\": \"value\"\n                }\n            ],\n            \"aggregate\": {\n                \"fieldType\": \"decimal\"\n            },\n            \"format\": {\n                \"unitFormat\": \"{0}\",\n                \"frequency\": \"daily\",\n                \"precision\": 2\n            }\n        },\n        \"thresholds\": [],\n        \"comments\": []\n    };\n\t\ttrendDataObj[sourceCategory].metadata.dataSourceLabel = sourceCategory;\n\t}\n\tvar timeStampVar = new GlideDateTime(ga.getValue(\"agg_period\")).getNumericValue();\n\tvar trendVal = ga.getValue('aggregation_value');\n\tif (timeStampVar > 0 && trendVal > 0) {\n\t\tvar trendData = {\n                \"timestamp\":  timeStampVar,\n                \"value\": trendVal\n    };\n\tif (sourceCategory === \"API\") {\n\t\tif (apiTrendByDate[timeStampVar]) {\n\t\t\tapiTrendByDate[timeStampVar].value = parseInt(apiTrendByDate[timeStampVar].value) + parseInt(trendVal);\n\t\t} else {\n\t\t\tapiTrendByDate[timeStampVar] = trendData;\n\t\t}\n\t} else if (sourceCategory === \"Export\") {\n\t\tif (exportTrendByDate[timeStampVar]) {\n\t\t\texportTrendByDate[timeStampVar].value = parseInt(exportTrendByDate[timeStampVar].value) + parseInt(trendVal);\n\t\t} else {\n\t\t\texportTrendByDate[timeStampVar] = trendData;\n\t\t}\n\t}\n\t}\n}\ntrendValArr = Object.keys(apiTrendByDate).sort().map((ele) => {\n\ttrendDataObj[\"API\"].data.push({\"timestamp\" : apiTrendByDate[ele].timestamp , \"value\" : apiTrendByDate[ele].value});\n\treturn apiTrendByDate[ele].value;\n\t});\ntrendValArr = trendValArr.concat(Object.keys(exportTrendByDate).map((ele) => {\n\ttrendDataObj[\"Export\"].data.push({\"timestamp\" : exportTrendByDate[ele].timestamp , \"value\" : exportTrendByDate[ele].value});\n\treturn exportTrendByDate[ele].value;\n\t}));\n\nif (trendValArr.length > 0) {\n\tvar trendValuesSorted = trendValArr.sort((a, b) => a- b);\n    var tVal = trendValuesSorted[0];\n    while (tVal > 999) {\n      tVal = tVal/1000;\n      counter = counter + 1;\n\t  divisor = divisor*1000;\n    }\n}\n\nfor (var myObj in trendDataObj) {\n\tvar sourceObj = trendDataObj[myObj];\n    sourceObj.data = sourceObj.data.sort((a, b) => a.timestamp - b.timestamp);\n\tif (counter > 0) {\n\t\tsourceObj.data = sourceObj.data.map((ele) => ({\"timestamp\":  ele.timestamp, \"value\" : (ele.value/divisor)}));\n\t}\n    trendDataArr.push(sourceObj);\n}\nreturn {\"dataTrend\" : trendDataArr, \"dataMetric\" : \"Data Exported (in \" + suffixes[counter] +\")\"};\n}\t","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"dateFilterCondition\",\r\n        \"label\": \"Date Filter Condition\",\r\n        \"description\": \"Data Egress Trend Date Filter Condition.\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_update_name":"sys_ux_data_broker_transform_8bc275e6ffa102105408ffffffffff86","api_name":"sn_ih_usage_app.Data Egress Overview Trends","mutates_server_data":"false","name":"Data Egress Overview Trends","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"End Date Time\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"End date and time of the event in DEFAULT_DATETIME_FORMAT = YYYY-MM-DD HH:mm:ss\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Is Convert Date To ScheduleDateTime\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Start Date Time\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Start date and time of the event in DEFAULT_DATETIME_FORMAT = YYYY-MM-DD HH:mm:ss\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Time Zone\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"TimeZone (optional)\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"True if the date should be converted to ScheduleDateTime; False if ScheduleDateTime value needs to be convereted to date\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Convert Date to ScheduleDateTime","sys_updated_on":"2023-03-24 04:48:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8c0463224334211089418f2c8ab8f27b","sys_updated_by":"admin","sys_created_on":"2023-02-07 05:56:59","sys_name":"DateConverter","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"44","sys_tags":"","script":"function transform(input) {\n\n    var convertDateToScheduleDateTime = function(input) {\n        var response = {};\n        var startDateTime = new GlideDateTime(input.startDateTime);\n        var endDateTime = new GlideDateTime(input.endDateTime);\n\t\t//datetime in current timezone\n        if (gs.nil(input.timeZone)) {\n            response.startDateTime = new ScheduleDateTimeUtil().convertGlideDateTimetoScheduleDateTime(startDateTime);\n            response.endDateTime = new ScheduleDateTimeUtil().convertGlideDateTimetoScheduleDateTime(endDateTime);\n            return response;\n        }\n\t\t//datetime in utc\n        response.startDateTime = new ScheduleDateTimeUtil().convertGlideDateTimetoScheduleDateTimeForTZ(startDateTime, input.timeZone);\n        response.endDateTime = new ScheduleDateTimeUtil().convertGlideDateTimetoScheduleDateTimeForTZ(endDateTime, input.timeZone);\n        return response;\n    };\n\n    var convertScheduleDateTimeToDate = function(input) {\n        var response = {};\n        response.startDateTime = new ScheduleDateTimeUtil().convertScheduleDateTimeForTZ(input.startDateTime, input.timeZone);\n        response.endDateTime = new ScheduleDateTimeUtil().convertScheduleDateTimeForTZ(input.endDateTime, input.timeZone);\n        return response;\n    };\n\n    if (input.isConvertToScheduleDateTime) {\n        return convertDateToScheduleDateTime(input);\n    }\n    return convertScheduleDateTimeToDate(input);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"startDateTime\",\r\n    \"label\": \"Start Date Time\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": false,\r\n\"defaultValue\" : \"\",\r\n    \"description\": \"Start date and time of the event in DEFAULT_DATETIME_FORMAT = YYYY-MM-DD HH:mm:ss\"\r\n  },\r\n {\r\n    \"name\": \"endDateTime\",\r\n    \"label\": \"End Date Time\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": false,\r\n\"defaultValue\" : \"\",\r\n    \"description\": \"End date and time of the event in DEFAULT_DATETIME_FORMAT = YYYY-MM-DD HH:mm:ss\"\r\n  },\r\n{\r\n    \"name\": \"timeZone\",\r\n    \"label\": \"Time Zone\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": false,\r\n\"defaultValue\" : \"\",\r\n    \"description\": \"TimeZone (optional)\"\r\n  },\r\n{\r\n    \"name\": \"isConvertToScheduleDateTime\",\r\n    \"label\": \"Is Convert Date To ScheduleDateTime\",\r\n    \"fieldType\": \"boolean\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": false,\r\n\"defaultValue\" : false,\r\n    \"description\": \"True if the date should be converted to ScheduleDateTime; False if ScheduleDateTime value needs to be convereted to date\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/15672bfb04b12210559073c06a02f7e3","value":"15672bfb04b12210559073c06a02f7e3"},"sys_update_name":"sys_ux_data_broker_transform_8c0463224334211089418f2c8ab8f27b","api_name":"global.DateConverter","mutates_server_data":"false","name":"DateConverter","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Filter Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-26 16:07:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8cb6b2c97fd4d210b23326d6ac8665e2","sys_updated_by":"admin","sys_created_on":"2024-08-27 02:53:33","sys_name":"Get Review Page Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n    var util = new sn_nowassist_admin.NowAdminAssistUtil();\n    var filterId = input.filterId;\n    try {\n        if (gs.nil(filterId)) {\n            return null;\n        }\n        var nowAssistGuardianFilterUtil = new sn_nowassist_admin.NowAssistGuardianFilterUtil();\n\n        var filterDetails = nowAssistGuardianFilterUtil.getGenAIFilterByFilterId(filterId);\n\n        var samplePhrases = nowAssistGuardianFilterUtil.getSamplePhrasesByFilterId(filterId);\n\n        var deploymentChannels = nowAssistGuardianFilterUtil.getActiveVADeploymentChannels(filterId);\n        \n        return {\n            filterDetails: filterDetails,\n            samplePhrases: samplePhrases,\n            deploymentChannels: deploymentChannels?.activeVa,\n\t\t\t      activeDeploymentChannelsCount: deploymentChannels?.activeVaCount\n        };\n    } catch (e) {\n        gs.error(\"Failed fetch Sensitive Filter Details- \" + e.toString());\n        return {};\n    }\n\n}","acl_failure_result":"","props":"[\n {\n        \"name\": \"filterId\",\n        \"label\": \"Filter Id\",\n        \"description\": \"Filter Id\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_8cb6b2c97fd4d210b23326d6ac8665e2","api_name":"sn_nowassist_admin.Get Review Page Details","mutates_server_data":"false","name":"Get Review Page Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Payload\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-02-22 09:58:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8ce6acbb531002108741ddeeff7b125d","sys_updated_by":"admin","sys_created_on":"2024-02-18 09:12:26","sys_name":"Update indicator description & conditions","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n\n    var payload = input.payload;\n    for (var key in payload) {\n        if (payload.hasOwnProperty(key)) {\n            var gr = new GlideRecord(\"pa_indicators\");\n            gr.get(key);\n            if (payload[key].description != undefined)\n                gr.description = payload[key].description;\n            if (payload[key].condition != undefined)\n                gr.conditions = payload[key].condition;\n            gr.update();\n        }\n    }\n\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"payload\",\r\n      \"label\": \"Payload\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"json\",\r\n      \"valueType\": \"object\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_update_name":"sys_ux_data_broker_transform_8ce6acbb531002108741ddeeff7b125d","api_name":"sn_sd.Update indicator description & conditions","mutates_server_data":"true","name":"Update indicator description & conditions","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Shifts\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shifts array\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-10 06:04:09","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8d2f2a7b53013110ad0fddeeff7b125e","sys_updated_by":"admin","sys_created_on":"2023-09-10 05:42:02","sys_name":"Publish shifts","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var shifts = input.shifts;\n    for (var i = 0; i < shifts.length; i++) {\n        var shiftGr = new GlideRecord('cmn_rota');\n        shiftGr.addQuery('sys_id', shifts[i].sysId);\n        shiftGr.query();\n        if (shiftGr.next()) {\n            shiftGr.setValue('state', '');\n            shiftGr.setValue('active', 'true');\n            shiftGr.update();\n        }\n    }\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"shifts\",\r\n    \"label\": \"Shifts\",\r\n    \"description\": \"Shifts array\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"array\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": []\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_8d2f2a7b53013110ad0fddeeff7b125e","api_name":"sn_uib_on_call.Publish shifts","mutates_server_data":"false","name":"Publish shifts","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Library Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get list of running templates","sys_updated_on":"2023-09-24 22:42:02","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8d40e7ef53cc31108cabddeeff7b124f","sys_updated_by":"admin","sys_created_on":"2023-07-21 21:45:43","sys_name":"Get running dedupe templates ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"54","sys_tags":"","script":"function transform(input) {\n    var result = [];\n\tvar response = {};\n    var rdt = new GlideRecord('reconcile_duplicate_template_run');\n\tif(input.librarySysId) {\n\t\trdt.addQuery('template.library', input.librarySysId);\n\t}\n\trdt.addEncodedQuery('stateINdraft,ready,running');\n    rdt.query();\n\n    while (rdt.next()) {\n        var templateDetail = {};\n        templateDetail['template_name'] = rdt.template.name.toString() + \" (\" +rdt.getValue(\"run_id\") + \")\";\n        templateDetail['template_class'] = getTableLabel(rdt.template.table.getDisplayValue());\n        templateDetail['template_run_sys_id'] = rdt.sys_id.toString();\n\t\ttemplateDetail['template_run_start_time'] = rdt.getDisplayValue('started');\n        templateDetail['template_task_count'] = getTaskDetails(rdt.sys_id);\n\t\ttemplateDetail['template_task_run_state'] = rdt.getValue('state');\n\t\ttemplateDetail['template_task_errors'] = rdt.getValue('errors');\n\t\ttemplateDetail['template_task_skipped'] = rdt.getValue('skipped');\n\t\ttemplateDetail['template_task_processed'] = rdt.getValue('processed');\n\t\t\n        result.push(templateDetail);\n    }\n\n    function getTaskDetails(templateRun) {\n        var res = {};\n        var rdtr = new GlideAggregate('reconcile_duplicate_template_task_run');\n        rdtr.addQuery('run', templateRun);\n        rdtr.addAggregate('COUNT', 'state');\n        rdtr.orderBy('state');\n        rdtr.query();\n        var total = 0;\n        var nonComplete = 0;\n        while (rdtr.next()) {\n            var stateCount = rdtr.getAggregate('COUNT', 'state');\n            var state = rdtr.getValue('state');\n            if (state == 'ready' || state == 'running') {\n                nonComplete = parseInt(nonComplete) + parseInt(stateCount);\n            }\n            total = parseInt(total) + parseInt(stateCount);\n        }\n        res['total'] = total;\n        res['complete'] = parseInt(total) - parseInt(nonComplete);\n        return res;\n    }\n\n    function getTableLabel(table) {\n        var dbo = new GlideRecord('sys_db_object');\n        dbo.addQuery('name', table);\n        dbo.query();\n        if (dbo.next()) {\n            return dbo.getValue('label');\n        }\n        return null;\n    }\n\n\tresult.sort(function(temp1, temp2) {\n        if(temp1.template_task_count.total >= temp2.template_task_count.total) {\n\t\t\treturn -1;\n\t\t} else {\n\t\t\treturn 1;\n\t\t}\n\t});\n\tresponse.templateDetails = result;\n\tresponse.lastUpdatedInfoText = gs.getMessage(\"Last updated: {0}\", new GlideDateTime().getDisplayValue());\n    return response;\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"librarySysId\",\r\n      \"label\": \"Library Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"false\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_8d40e7ef53cc31108cabddeeff7b124f","api_name":"sn_cmdb_ws.Get running dedupe templates ","mutates_server_data":"false","name":"Get running dedupe templates ","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-02 17:48:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8dff72fa97a38510712f3da71153af9a","sys_updated_by":"admin","sys_created_on":"2022-05-22 22:40:57","sys_name":"Fetch Channel Config Data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\nvar output = {};\nvar sowCollabUtils = new sn_sow_collab.SowCollabUtils();\nvar tokenData = sowCollabUtils.getChannelConfigData(\"isTokenAvailable\", '');\noutput.isTokenAvailable = tokenData[0];\noutput.refreshDuration = Math.max(sowCollabUtils.getChannelConfigData(\"fetchRefreshDuration\", ''), GlideApplicationProperty.getValue(\"sn_sow_collab.user_presence_refresh_duration\", 180));\nreturn output;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_update_name":"sys_ux_data_broker_transform_8dff72fa97a38510712f3da71153af9a","api_name":"sn_sow_collab.Fetch Channel Config Data","mutates_server_data":"false","name":"Fetch Channel Config Data","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Include None Option\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Library Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"For given library, get all the associated templates","sys_updated_on":"2023-10-04 19:13:57","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8e4aedd3738431103f3cc3ed8ff6a76b","sys_updated_by":"admin","sys_created_on":"2023-07-20 18:28:07","sys_name":"De-duplication Template get all templates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"26","sys_tags":"","script":"function transform(input) {\n    /*\n    \tGiven the library sysID, fetch all the associated templates\n    */\n    var result = {};\n\tvar templates = [];\n\n\t// on Edit assigned tasks page, we want to include this option,\n\t// but in Remediate modal, we do not want to display it\n\tif (input.includeNoneOption && input.includeNoneOption == true) {\n\t\tvar noneTemplate = {\n\t\t\tid: \"none\",\n\t\t\tlabel: gs.getMessage(\"Select a template\"),\n\t\t\tsublabel: ''\n\t\t};\n\n\t\ttemplates.push(noneTemplate);\n\t}\n\n\tvar library = input.librarySysId;\n    if (library == '') {\n        var gr = new GlideRecord('reconcile_duplicate_template');\n\t\tgr.addQuery('state', 'published');\n        gr.query();\n        while (gr.next()) {\n            var label = gr.getValue('name');\n            var id = gr.getUniqueValue();\n            var template = {\n                id: id,\n                label: label,\n                sublabel: '',\n            };\n            templates.push(template);\n        }\n    } else {\n\t\tvar util = new sn_cmdb_ws.DedupeTemplateLibraryUtil();\n        var templatesForLibrary = util.getTemplatesByLibrary(library, '');\n        for (var i = 0; i < templatesForLibrary.length; i++) {\n            var curTemplate = templatesForLibrary[i];\n            if (curTemplate.state == \"Not Published\") {\n                continue;\n            }\n            var templateObject = {\n                id: curTemplate.sys_id,\n                label: curTemplate.name,\n                sublabel: ''\n            };\n            templates.push(templateObject);\n        }\n    }\n    result = {\n        templates: templates\n    };\n    return result;\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"librarySysId\",\r\n      \"label\": \"Library Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"false\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n   {\r\n      \"name\": \"includeNoneOption\",\r\n      \"label\": \"Include None Option\",\r\n      \"description\": \"Include None Option\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"boolean\",\r\n      \"mandatory\": \"false\",\r\n      \"defaultValue\": \"false\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_8e4aedd3738431103f3cc3ed8ff6a76b","api_name":"sn_cmdb_ws.De-duplication Template get all templates","mutates_server_data":"false","name":"De-duplication Template get all templates","output_schema":"","sys_policy":""},{"private":"false","required_translations":"","batch_exclude":"false","description":"Retrieves label-id item pairs for the selected table and element.","sys_updated_on":"2024-04-19 15:19:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8e8b6d6353211010cbc2ddeeff7b12cc","sys_updated_by":"admin","sys_created_on":"2020-06-28 01:47:20","sys_name":"Data Driven Items","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"30","sys_tags":"","script":"function transform(input) {\n\tvar td = GlideTableDescriptor.get(input.table);\n    var element = (input.element || \"\").trim();\n    if (gs.nil(element))\n        element = td.getDisplayName();\n\n\tvar ed = td.getElementDescriptor(element);\n    var items = [];\n    var selectedItems = [];\n\t\n    var result = {\n        \"label\": ed.getLabel(),\n        \"tooltip\": ed.getHint(),\n        \"items\": items,\n        \"selectedItems\": selectedItems\n    };\n\n\tvar depVal = (input.dependentValue || \"\").trim();\n\tvar ser = new GlideXMLChoiceListSerializer();\n\tvar cl = ser.getChoiceList(ed.getTableName(), ed.getName(), depVal, null);\n\tfor (var i = 0; i < cl.size(); i++) {\n\t\tvar c = cl.getChoice(i);\n\t\tvar label = c.getLabel();\n\t\tvar id = c.getValue();\n\t\titems.push({\n\t\t\t\"label\": label,\n\t\t\t\"id\": id\n\t\t});\n        if (selectedItems.length == 0)\n\t\t\tselectedItems.push(id);\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"table_name\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"element\",\r\n  \"label\": \"Element\",\r\n  \"description\": \"Element to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"field\",\r\n  \"mandatory\": false,\r\n  \"typeMetadata\": {\r\n        \"table\": \"@table\"\r\n  }\r\n},\r\n {\r\n  \"name\": \"dependentValue\",\r\n  \"label\": \"Dependent value\",\r\n  \"description\": \"Dependent value to look up (eg for subcategory field dependentValue may be either software or hardware)\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \" \"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a6932bf304312210559073c06a02f796","value":"a6932bf304312210559073c06a02f796"},"sys_update_name":"sys_ux_data_broker_transform_8e8b6d6353211010cbc2ddeeff7b12cc","api_name":"global.Data Driven Items","mutates_server_data":"false","name":"Data Driven Items","output_schema":"","sys_policy":""},{"private":"false","required_translations":"","batch_exclude":"false","description":"Get list of reasons for creating article feedback","sys_updated_on":"2020-10-18 17:17:53","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8ee6edc27352101036fe41244ef6a7c8","sys_updated_by":"admin","sys_created_on":"2020-07-30 16:09:50","sys_name":"Get list of reasons for creating article feedback","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var kbGraphQLUtil = new global.KBGraphQLUtilSNC();\n    var resultObj = kbGraphQLUtil.getFeedbackChoiceList();\n    var outputObj = {\n        choices: [],\n        selectedChoice: []\n    };\n    if (!gs.nil(resultObj) && !gs.nil(resultObj.feedbackChoiceList)) {\n        for (var i = 0; i < resultObj.feedbackChoiceList.length; i++) {\n            outputObj.choices.push({\n                id: resultObj.feedbackChoiceList[i].value,\n                label: resultObj.feedbackChoiceList[i].label\n            });\n\n            if (resultObj.feedbackChoiceList[i].value == '4') {\n                outputObj.selectedChoice.push(resultObj.feedbackChoiceList[i].value);\n\n            }\n        }\n    }\n    return outputObj;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_8ee6edc27352101036fe41244ef6a7c8","api_name":"sn_km_uib.Get list of reasons for creating article feedback","mutates_server_data":"false","name":"Get list of reasons for creating article feedback","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"System property val\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Update value of security banner announcement setting property\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update sn_vsc.configure_security_banner_announcements property based on setting changes from security announcement modal settings.","sys_updated_on":"2024-05-20 17:41:16","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8f6c8ce9ec920210f877d4df7f51c1cb","sys_updated_by":"maint","sys_created_on":"2024-05-20 17:41:16","sys_name":"Configure security banner announcement settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var res = \"\";\n    var gr = new GlideRecord('sys_properties');\n    if (gr.get('name', 'sn_vsc.configure_security_banner_announcements')) {\n    gr.setValue('value', input.data);\n    var isUpdated = gr.update();\n    if (isUpdated != null)\n        res = 'success';\n    else\n        res = 'fail';\n\n    }\n    return res;\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"data\",\n        \"label\": \"System property val\",\n        \"description\": \"Update value of security banner announcement setting property\",\n        \"readOnly\": false,\n        \"fieldType\": \"boolean\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_8f6c8ce9ec920210f877d4df7f51c1cb","api_name":"sn_vsc.Configure security banner announcement settings","mutates_server_data":"false","name":"Configure security banner announcement settings","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get Collab Chat settings from sys_cs_collab_settings and relevant sys_properties records","sys_updated_on":"2024-05-27 08:45:01","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8f71e391c35701103f4fcd7b7940dd37","sys_updated_by":"admin","sys_created_on":"2022-05-05 22:44:41","sys_name":"CI Collab Chat Settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"74","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tresult.sys_cs_collab_settings = {};\n\tresult.setupStatus = \"\";\n\tvar readOnly = false;\n\tvar _chatSettings = {};\n\tvar fields = {}; \n\tvar collabSettingDto = sn_collab.CollabChatScriptObject.getCollabChatSettingForCurrentDomain();\n\tif (collabSettingDto) {\n\t\t_chatSettings['sys_id'] = collabSettingDto.sysId;\n\t\tfields['enable_emojis'] = { value: collabSettingDto.emojisEnabled };\t\n\t\tfields['enable_teams'] = { value: collabSettingDto.teamsEnabled };\n\t\tfields['enabled'] = { value: collabSettingDto.enabled };\n\t\tfields['enable_participant_suggestions'] = {value: collabSettingDto.expertFinderEnabled };\n\t\tfields['enable_legacy_support'] = {value: collabSettingDto.enableLegacySupport };\n\t\t_chatSettings['fields'] = fields;\t\n\n\t\tif (_chatSettings.readOnly && gs.getCurrentScopeName() != collabSettingDto.sysScope) {\n\t\t\tvar expectedScope = collabSettingDto.sysScope || 'CP Standard Feature Set';\n\t\t\tresult.crossScopeMessage = gs.getMessage('This page can only be edited when {0} is the current application. Change the scope to make any updates.', '<strong>' + expectedScope + '</strong>');\n\t\t\tresult.readOnly = true;\n\t\t}\n\t\t\n\t\tresult.sys_cs_collab_settings = _chatSettings;\n\t\t\n\t} else {\n\t\t// if there is no collab settings record for the domain then set them all to false\n\t\t_chatSettings['sys_id'] = '-1';\n\t\tfields['enable_emojis'] = { value: false };\n\t\tfields['enable_teams'] = { value: false };\n\t\tfields['enabled'] = { value: false };\n\t\tfields['enable_participant_suggestions'] = { value: false };\n\t\tfields['enable_legacy_support'] = { value: true };\n\t\t_chatSettings['fields'] = fields;\n\t\tresult.sys_cs_collab_settings = _chatSettings;\n\t}\n\t\n\tvar propertiesGr = new GlideRecord('sys_properties');\n\tpropertiesGr.addQuery('name', 'com.glide.cs.collab.enabled');\n\tpropertiesGr.query();\n\tif(propertiesGr.next()) {\n\t\tif(!propertiesGr.canWrite() && !isInSelectedScope(propertiesGr)) {\n\t\t\tvar expectedScope = propertiesGr.getDisplayValue('sys_scope') || 'CP Standard Feature Set';\n\t\t\tresult.crossScopeMessage = gs.getMessage('This page can only be edited when {0} is the current application. Change the scope to make any updates.', '<strong>' + expectedScope + '</strong>');\n\t\t\tresult.readOnly = true;\n\t\t}\n\t\t\n\t\tvar sys_properties = {};\n\t\tsys_properties[propertiesGr.getValue('name')] = {\n\t\t\tsys_id: propertiesGr.getUniqueValue(),\n\t\t\tname: propertiesGr.getValue('name'),\n\t\t\tvalue: propertiesGr.getValue('value')\n\t\t};\n\t\t\n\t\treadOnly = readOnly || !propertiesGr.canWrite();\n\t\t\n\t\tresult.sys_properties = sys_properties;\n\t} else {\n\t\tresult['error'] = gs.getMessage('Unable to fetch chat settings. Contact system administrator for details');\n\t\treadOnly = true;\n\t}\n\t\n\tvar providerApplicationGr = new GlideRecord('sys_cs_collab_provider_application');\n\tproviderApplicationGr.query();\n\tvar providerApplications = {};\n\t\n\twhile(providerApplicationGr.next()){\n\t\tvar providerApplication = {}; //in future change to store multiple providerApplications\n\t\tproviderApplication.setup_status =  providerApplicationGr.getValue('setup_status');\n\t\tproviderApplication.sys_id =  providerApplicationGr.getUniqueValue();\n\t\tproviderApplication.provider = providerApplicationGr.getValue('provider');\n\t\tproviderApplications[providerApplicationGr.getValue('name')] = providerApplication;\n\n\t\tresult.setupStatus = providerApplication.setup_status;\n\t\t\n\t\tif(result.setupStatus == \"incomplete\") {\n\t\t\tresult.dataImportingMessage = gs.getMessage(\"Were loading your data. Well email you once your integration is ready to use.\");\n\t\t\tresult.currentProviderAppId = providerApplicationGr.getUniqueValue();\n\t\t} else if (result.setupStatus == \"error\") {\n\t\t\tresult.dataImportingMessage = gs.getMessage(\"Weve run into a technical issue. Please verify your API permissions on Azure and try again.\");\n\t\t}\n\t}\n\t\n\tresult.providerApplications = providerApplications;\n\tresult.readOnly = readOnly;\n\treturn result;\n\n\tfunction isInSelectedScope(gr) {\n\t\tvar currentScope = gs.getCurrentScopeName();\n\t\tvar grScope = gr.getValue('sys_scope');\n\t\treturn currentScope == grScope;\n\t}\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_8f71e391c35701103f4fcd7b7940dd37","api_name":"global.CI Collab Chat Settings","mutates_server_data":"false","name":"CI Collab Chat Settings","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-18 15:50:34","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"8ff54d7c770ab11031e3b3c64b5a9984","sys_updated_by":"admin","sys_created_on":"2023-10-20 07:25:18","sys_name":"UDC NAP properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8a841f2bc42f457e8809ea71d35e821f","value":"8a841f2bc42f457e8809ea71d35e821f"},"sys_created_by":"maint","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n    const isPanelEnabled = UDCGenAIUtils.isPanelEnabled();\n\n    if (!isPanelEnabled) {\n        return {\n            userCanUseNowAssist: false,\n            nowAssistPanelMacroponents: [],\n            napInitConfigOverride: {}\n        };\n    }\n\n    const {\n        canUseSkill,\n        macroponents,\n        napInitConfigOverride\n    } = UDCGenAIUtils.getAppGenNAPConfig();\n\n    return {\n        userCanUseNowAssist: canUseSkill,\n        nowAssistPanelMacroponents: macroponents,\n        napInitConfigOverride\n    };\n}","acl_failure_result":"","props":"[ ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8a841f2bc42f457e8809ea71d35e821f","value":"8a841f2bc42f457e8809ea71d35e821f"},"sys_update_name":"sys_ux_data_broker_transform_8ff54d7c770ab11031e3b3c64b5a9984","api_name":"sn_udc.UDC NAP properties","mutates_server_data":"false","name":"UDC NAP properties","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-08-19 13:50:18","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"90202d9457011110403e8f90ac94f924","sys_updated_by":"admin","sys_created_on":"2022-07-28 10:35:30","sys_name":"Change Conflict Count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n\tvar returnConflicts = [];\n\n\tif (!input.sysId)\n\t\treturn returnConflicts;\n\n\tvar conflictGr = new GlideAggregate('conflict');\n\tconflictGr.addQuery('change', input.sysId);\n\tconflictGr.addAggregate('COUNT', 'type');\n\tconflictGr.groupBy('type');\n\tconflictGr.query();\n\twhile (conflictGr.next()) {\n\t\tvar categoryData = {};\n\t\tcategoryData.type = conflictGr.getDisplayValue('type');\n\t\tcategoryData.value = conflictGr.getValue('type');\n\t\tcategoryData.count = conflictGr.getAggregate('COUNT', 'type');\n\t\treturnConflicts.push(categoryData);\n\t}\n\treturn returnConflicts;\n}","acl_failure_result":"","props":"[\n{\n  \"name\": \"sysId\",\n  \"label\": \"SysId\",\n  \"description\": \"Sys Id\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_update_name":"sys_ux_data_broker_transform_90202d9457011110403e8f90ac94f924","api_name":"sn_sow_chg.Change Conflict Count","mutates_server_data":"false","name":"Change Conflict Count","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys ID of record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table to look up\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Generate record history data by invoking RecordHistoryDataGenerator() with table and sysId of current record.","sys_updated_on":"2023-03-08 21:34:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9041db5777c92110a8b1f335ae5a9955","sys_updated_by":"admin","sys_created_on":"2023-02-21 22:43:42","sys_name":"Generate record history data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b6278788c342111082c603db7940dd4f","value":"b6278788c342111082c603db7940dd4f"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n\tif (!input || !input.table || !input.sysId)\n        return {};\n\n\tvar recordHistoryDataGenerator = new global.RecordHistoryDataGenerator();\n\n\treturn {\n\t\thistorySetId : recordHistoryDataGenerator.generateHistoryData(input.table, input.sysId),\n\t\trefreshRequest : recordHistoryDataGenerator.generateRefreshRequest()\n\t};\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"table_name\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"Sys ID of record\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b6278788c342111082c603db7940dd4f","value":"b6278788c342111082c603db7940dd4f"},"sys_update_name":"sys_ux_data_broker_transform_9041db5777c92110a8b1f335ae5a9955","api_name":"sn_record_page.Generate record history data","mutates_server_data":"true","name":"Generate record history data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"","batch_exclude":"false","description":"Transform validates the openframe configuration and returns true - if valid configuration found otherwise returns false.\r\n","sys_updated_on":"2020-09-27 22:57:09","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9086546073ab101021461f477bf6a748","sys_updated_by":"admin","sys_created_on":"2020-09-25 22:01:17","sys_name":"Validate openframe configuration","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1fce1c6473ab101021461f477bf6a771","value":"1fce1c6473ab101021461f477bf6a771"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n    var isOpenframeConfigValid = false;\n\n\t// check if the sn_openframe is active or not\n    if (!GlidePluginManager.isActive('com.sn_openframe')) {\n        return { isOpenframeConfigValid: false };\n    }\n\n\t// check for sn_openframe_user role\n    if (!gs.hasRole('sn_openframe_user')) {\n        return { isOpenframeConfigValid: false };\n    }\n\n\t// when both role & plugin conditions exist, determine the openframe configuration\n    isOpenframeConfigValid = !gs.nil((new sn_openframe.OpenFrameAjaxUtility()).checkAccessOpenframe().config);\n\n    return {isOpenframeConfigValid: isOpenframeConfigValid};\n\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1fce1c6473ab101021461f477bf6a771","value":"1fce1c6473ab101021461f477bf6a771"},"sys_update_name":"sys_ux_data_broker_transform_9086546073ab101021461f477bf6a748","api_name":"sn_openframe_intg.Validate openframe configuration","mutates_server_data":"false","name":"Validate openframe configuration","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"This is the broker that helps us get the information for the instance of instance has zero in progress practices, uncompleted ones, etc","sys_updated_on":"2024-02-20 19:40:42","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"90c03765434331103b465dc36ab8f26c","sys_updated_by":"admin","sys_created_on":"2023-12-11 20:48:18","sys_name":"SC Get best practices' progress level information","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar progressInfo = {\n\t\t\"isNew\" : false,\n\t\t\"allCompleted\" : false,\n\t\t\"most_recentlyUpdated_bpName\" :  null,\n\t\t\"most_recentlyUpdated_bpSysId\" : null\n\t};\n\tvar scConstants = new sn_vsc.SecurityCenterConstants();;\n\tvar bpTable = scConstants.BEST_PRACTICES_CONFIG;\n\n\tvar bestPracticesGr = new GlideRecord(bpTable);\n\tvar encodedQueries = scConstants.bestPracticesEncodedQueries;\n\tbestPracticesGr.addEncodedQuery(encodedQueries[\"getAllActiveNotRemovedRecords\"]);\n\tbestPracticesGr.query();\n\tvar totalActiveRecords = bestPracticesGr.getRowCount();\n\t\n\t// if all active records are completed, then we will show a success variation of next up section in the UI\n\tbestPracticesGr = new GlideRecord(bpTable);\n\tbestPracticesGr.addEncodedQuery(encodedQueries[\"getAllActiveCompletedRecords\"]);\n\tbestPracticesGr.query();\n\tif (bestPracticesGr.getRowCount() == totalActiveRecords) {\n\t\tprogressInfo[\"allCompleted\"] = true;\n\t\treturn progressInfo;\n\t}\n\n\t// if one of all the active records are in progress, then get the most recently updated best practice details\n\tbestPracticesGr = new GlideRecord(bpTable);\n\tbestPracticesGr.addEncodedQuery(encodedQueries[\"getAllActiveInProgressRecords\"]);\n\tbestPracticesGr.orderByDesc('sys_updated_on');\n\tbestPracticesGr.query();\n\tif (bestPracticesGr.getRowCount() > 0) {\n\t\tbestPracticesGr.next();\n\t\tprogressInfo[\"most_recentlyUpdated_bpName\"] = bestPracticesGr.getDisplayValue(\"name\");\n\t\tprogressInfo[\"most_recentlyUpdated_bpSysId\"] = bestPracticesGr.getDisplayValue(\"sys_id\");\n\t\treturn progressInfo;\n\t}\n\n\t// if all the active records are in open state, then we should show the build a foundation variation of the next up section in the UI\n\tbestPracticesGr = new GlideRecord(bpTable);\n\tbestPracticesGr.addEncodedQuery(encodedQueries[\"getAllOpenStateRecords\"]);\n\tbestPracticesGr.query();\n\tif (bestPracticesGr.getRowCount() == totalActiveRecords) {\n\t\tprogressInfo[\"isNew\"] = true;\t\n\t\treturn progressInfo;\n\t}\n\n\t// for all other situations we will default to the new state - \"build a foundation\"\n\tprogressInfo[\"isNew\"] = true;\n\treturn progressInfo;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_90c03765434331103b465dc36ab8f26c","api_name":"sn_vsc.SC Get best practices' progress level information","mutates_server_data":"false","name":"SC Get best practices' progress level information","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Table Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table whose extensions you want to look up\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Retrieve the tables that extend the input table","sys_updated_on":"2022-10-14 21:26:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"910e99a5432211108b2b53c5abb8f242","sys_updated_by":"admin","sys_created_on":"2022-10-14 21:24:56","sys_name":"Look Up Table Extensions","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    return {\n        tableExtensions: j2js(GlideDBObjectManager.get().getTableExtensions(input.table))\n\t};\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"table\",\r\n        \"label\": \"Table Name\",\r\n        \"description\": \"Table whose extensions you want to look up\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"table_name\",\r\n        \"mandatory\": true\r\n    }\r\n]\r\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d02e63b304752210559073c06a02f777","value":"d02e63b304752210559073c06a02f777"},"sys_update_name":"sys_ux_data_broker_transform_910e99a5432211108b2b53c5abb8f242","api_name":"global.Look Up Table Extensions","mutates_server_data":"false","name":"Look Up Table Extensions","output_schema":"[{\r\n    \"name\": \"tableExtensions\",\r\n    \"label\": \"Table extensions\",\r\n    \"description\": \"List of tables that extent the input table\",\r\n    \"readOnly\": true,\r\n    \"fieldType\": \"array\"\r\n}]","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Input payload needed to create/update team preferences data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Team preferences data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-06 15:07:57","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9147659953a6f510ad0fddeeff7b1208","sys_updated_by":"admin","sys_created_on":"2023-11-15 19:37:34","sys_name":"Save team preferences","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"33","sys_tags":"","script":"function transform(inputs) {\n    if (!inputs.teamPreferencesData.groupId)\n        return;\n    if (!(new global.OnCallSecurityNG().rotaMgrAccess(inputs.teamPreferencesData.groupId)))\n        return {};\n    var allowRotaOverlapMapping = {\n        \"yes\": \"yes\",\n        \"no\": \"no\",\n        \"default_no\": \"default\",\n        \"default_yes\": \"default\"\n    };\n    var groupPrefGr = new GlideRecord('on_call_group_preference');\n    groupPrefGr.addQuery('group', inputs.teamPreferencesData.groupId);\n    groupPrefGr.setLimit(1);\n    groupPrefGr.query();\n    if (groupPrefGr.next()) {\n        var rotaManagersArray = inputs.teamPreferencesData.rotaManagers;\n        var idsArray = rotaManagersArray.map(function(manager) {\n            return manager.id;\n        });\n        var idsString = idsArray.join(', ');\n        groupPrefGr.setValue('rota_managers', idsString);\n        groupPrefGr.setValue('pto_approval_config', inputs.teamPreferencesData.ptoApprovalConfig);\n        groupPrefGr.allow_rota_overlap = allowRotaOverlapMapping[inputs.teamPreferencesData.allowRotaOverlap];\n        if (inputs.teamPreferencesData.allowRotaOverlap == \"yes\" || inputs.teamPreferencesData.allowRotaOverlap == \"default_yes\") {\n            groupPrefGr.escalation_rule_rota_overlap = inputs.teamPreferencesData.escalationRuleRotaOverlap;\n        }\n        if (inputs.teamPreferencesData.firstDayOfWeek) {\n            groupPrefGr.setValue('first_day_of_the_week', inputs.teamPreferencesData.firstDayOfWeek);\n        }\n        groupPrefGr.update();\n    } else {\n        groupPrefGr.initialize();\n        groupPrefGr.group = inputs.teamPreferencesData.groupId;\n        var newRotaManagersArray = inputs.teamPreferencesData.rotaManagers;\n        var newUserIdsArray = newRotaManagersArray.map(function(manager) {\n            return manager.id;\n        });\n        var newUserIdsString = newUserIdsArray.join(', ');\n        groupPrefGr.rota_managers = newUserIdsString;\n        groupPrefGr.pto_approval_config = inputs.teamPreferencesData.ptoApprovalConfig;\n        groupPrefGr.allow_rota_overlap = allowRotaOverlapMapping[inputs.teamPreferencesData.allowRotaOverlap];\n        if (inputs.teamPreferencesData.allowRotaOverlap == \"yes\" || inputs.teamPreferencesData.allowRotaOverlap == \"default_yes\") {\n            groupPrefGr.escalation_rule_rota_overlap = inputs.teamPreferencesData.escalationRuleRotaOverlap;\n        }\n        if (inputs.teamPreferencesData.firstDayOfWeek) {\n            groupPrefGr.setValue('first_day_of_the_week', inputs.teamPreferencesData.firstDayOfWeek);\n        }\n        groupPrefGr.insert();\n    }\n}","acl_failure_result":"","props":"[\r\n   {\t\t\"name\": \"teamPreferencesData\",\r\n\t\t\"label\": \"Team preferences data\",\r\n\t\t\"description\": \"Input payload needed to create/update team preferences data\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"json\",\r\n\t\t\"mandatory\": true,\r\n\t\t\"defaultValue\": {}\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_9147659953a6f510ad0fddeeff7b1208","api_name":"sn_uib_on_call.Save team preferences","mutates_server_data":"false","name":"Save team preferences","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Content Block Record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Context Key Values\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Context key-value pairs to be updated\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record to edit\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update the ACE Content Block Context","sys_updated_on":"2022-05-31 13:12:16","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9167fffc53e6051039acddeeff7b1253","sys_updated_by":"admin","sys_created_on":"2022-03-28 04:19:39","sys_name":"Update ACE Content Block Context","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\tgs.debug(\"[Update ACE Content Block Context] Inputs: {0}\", JSON.stringify(input));\n\t\n    if (input.fields == {}) {\n        return;\n    }\n\tvar contentBlockId = input.recordId;\n\tvar contextValuesToSet = input.fields;\n\t\n\tvar ciUtil = new sn_oe_sfs.CIUtil();\n\tciUtil.setContentBlockContext(contentBlockId, contextValuesToSet);\n}","acl_failure_result":"","props":"[\r\n {\r\n  \"name\": \"recordId\",\r\n  \"label\": \"Content Block Record\",\r\n  \"description\": \"Record to edit\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"reference\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\",\r\n  \"typeMetadata\": {\"reference\": \"sn_ace_content_block\"}\r\n},\r\n  {\r\n    \"name\": \"fields\",\r\n    \"label\": \"Context Key Values\",\r\n    \"description\": \"Context key-value pairs to be updated\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"json\", \r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\",\r\n    \"typeMetadata\": {\r\n        \"table\": \"sn_ace_content_block\"\r\n    }\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_9167fffc53e6051039acddeeff7b1253","api_name":"sn_oe_sfs.Update ACE Content Block Context","mutates_server_data":"true","name":"Update ACE Content Block Context","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Context id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"query\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-03-24 11:32:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"916c9419773d2110583f78dabd5a992a","sys_updated_by":"admin","sys_created_on":"2023-03-24 11:15:25","sys_name":"SOW Remediate get playbook activity context","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var output = [];\n    var contextId = input.context_id;\n    var query = input.query;\n    var playbookUtil = new sn_sow_inc.SOWRemedialActionPlaybookUtil();\n    var activityGr = playbookUtil.getActivityGrFromPlaybookContext(contextId, query);\n    while (activityGr.next()) {\n        var obj = {\n            'label': activityGr.getDisplayValue('label'),\n            'lane': activityGr.getDisplayValue('lane'),\n            'sys_created_on': activityGr.getDisplayValue('sys_created_on'),\n            'sys_updated_on': activityGr.getDisplayValue('sys_updated_on')\n        }\n        output.push(obj);\n    }\n    return output;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"context_id\",\r\n  \"label\": \"Context id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"query\",\r\n  \"label\": \"query\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_update_name":"sys_ux_data_broker_transform_916c9419773d2110583f78dabd5a992a","api_name":"sn_sow_inc.SOW Remediate get playbook activity context","mutates_server_data":"false","name":"SOW Remediate get playbook activity context","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Policy ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Security Policy ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"SC Activate Security Policy","sys_updated_on":"2024-05-21 14:10:47","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"916de90a930602103c67134732891818","sys_updated_by":"maint","sys_created_on":"2024-05-10 03:39:31","sys_name":"SC Activate Security Policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var id = input.sys_id;\n    var gr = new GlideRecord(\"sn_vsc_security_policy\");\n    gr.addQuery(\"sys_id\", id);\n    gr.query();\n    if (gr.next()) {\n        if (gr.status == \"active\") {\n            gr.status = \"inactive\";\n        } else {\n            gr.status = \"active\";\n        }\n        gr.update();\n    }\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"sys_id\",\n    \"label\": \"Policy ID\",\n    \"description\": \"Security Policy ID\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_916de90a930602103c67134732891818","api_name":"sn_vsc.SC Activate Security Policy","mutates_server_data":"false","name":"SC Activate Security Policy","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"List of property names\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Properties\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetches system props for unified map in required format","sys_updated_on":"2024-10-21 12:53:00","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9199a7367fd5121061d13705bc866569","sys_updated_by":"admin","sys_created_on":"2024-10-21 10:01:09","sys_name":"Lookup System Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var properties = input.properties.trim().split(',');\n\n    var result = {\n        properties: {},\n        errors: []\n    };\n\n    try {\n        if (!properties || !properties.length) {\n            result.errors.push('the properties param is missing');\n        } else {\n            properties.forEach(function(name) {\n                result.properties[name] = gs.getProperty(name);\n            });\n        }\n    } catch (error) {\n        result.errors.push(error.toString());\n    }\n\n    return result;\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"properties\",\n    \"label\": \"Properties\",\n    \"fieldType\": \"string\",    \n    \"readOnly\": false,\n    \"mandatory\": true,\n    \"defaultValue\": \"\",\n    \"description\": \"List of property names\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_9199a7367fd5121061d13705bc866569","api_name":"sn_nowassist_admin.Lookup System Properties","mutates_server_data":"false","name":"Lookup System Properties","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Search Filters\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This returns data to generate View all link for global search. This checks if the indexed source is type internal and only then returns the data","sys_updated_on":"2023-04-05 20:07:18","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9234fc91734311105afea11cff148b39","sys_updated_by":"admin","sys_created_on":"2022-11-07 20:06:41","sys_name":"Generate View All Link if a search filter is present","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    if (input.searchFilters.length > 2) {\n\t\t// The input is recieved as a string\n\t\tvar searchFilters = input.searchFilters.match(/[0-9a-zA-Z]+/g);\n\t\tvar searchFilterRecord = new GlideRecord('sys_search_filter');\n\t\tsearchFilterRecord.get(searchFilters[0]);\n\t\tvar searchSources = new GlideRecord('ais_search_source');\n\t\tsearchSources.get(searchFilterRecord.getValue('ais_search_source'));\t\n\t\tvar conditionOnSearchSource = searchSources.getValue('condition');\n\t\tvar indexSource = searchSources.getValue('datasource'); \n\t\tvar indexedSource = new GlideRecord('ais_datasource');\n\t\tindexedSource.get('source', indexSource);\n\t\tif(indexedSource.getValue('type').toString() === 'internal'){\n\t\t\tvar dataToGenerateViewAllLink = {'conditionOnSearchSource' : conditionOnSearchSource , 'indexedSource': indexSource};\n\t\t\treturn dataToGenerateViewAllLink;\n\t\t}\n    }\n    return [];\n}","acl_failure_result":"","props":"[\r\n    {\r\n      \"name\": \"searchFilters\",\r\n      \"label\": \"Search Filters\",\r\n      \"description\": \"Search Filters\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_9234fc91734311105afea11cff148b39","api_name":"global.Generate View All Link if a search filter is present","mutates_server_data":"false","name":"Generate View All Link if a search filter is present","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n            \"message\" : \"Array of Sys ID\",\n            \"comment\" : \"\"\n            }, {\n            \"message\" : \"Takes array of topic sys_ids irrespective of taxonomy\",\n            \"comment\" : \"\"\n            } ]","batch_exclude":"false","description":"","sys_updated_on":"2023-02-12 13:54:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"92daaad0440d2510f87744f9957088a1","sys_updated_by":"admin","sys_created_on":"2023-02-12 12:41:55","sys_name":"Generate net selection from topic ids","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var sysIdArray = input.sysIdArray;\n\n    function topicToTaxonomyMapping(_sysIdArray) {\n        var _topicToTaxonomy = {};\n\n        for (var i = 0; i < _sysIdArray.length; ++i) {\n            var gr = new GlideRecord('topic');\n            gr.get(_sysIdArray[i]);\n            _topicToTaxonomy[_sysIdArray[i]] = gr.taxonomy.toString();\n        }\n\n        return _topicToTaxonomy;\n    }\n\n    function taxonomyToTopicGrouping(_topicToTaxonomy) {\n        var _taxonomyGroup = {};\n        for (var _topic in _topicToTaxonomy) {\n            var taxonomy = _topicToTaxonomy[_topic];\n            if (taxonomy in _taxonomyGroup) {\n                _taxonomyGroup[taxonomy].push(_topic);\n            } else {\n                _taxonomyGroup[taxonomy] = [_topic];\n            }\n        }\n        return _taxonomyGroup;\n    }\n\n    function transformInputForListSelector(input) {\n\n        function search(sys_id, array_obj) {\n            for (var i = 0; i < array_obj.length; i++) {\n                if (array_obj[i].id == sys_id) {\n                    var obj_i = {\n                        \"id\": array_obj[i].id,\n                        \"label\": array_obj[i].label\n                    };\n                    return [obj_i];\n                }\n                var response_array = undefined;\n                if (array_obj[i].items.length) {\n                    response_array = search(sys_id, array_obj[i].items);\n                }\n                if (response_array && response_array.length) {\n                    response_array.unshift({\n                        \"id\": array_obj[i].id,\n                        \"label\": array_obj[i].label\n                    });\n                    return response_array;\n                }\n            }\n            return undefined;\n        }\n\n        function operation2(sys_id_arr, topicResponse) {\n            var obj_selected = [];\n\n            for (var _i = 0; _i < sys_id_arr.length; ++_i) {\n                var search_i = search(sys_id_arr[_i], topicResponse);\n                if (search_i && search_i.length) {\n                    obj_selected.unshift(search_i);\n                }\n            }\n            \n            return obj_selected;\n        }\n\n        return operation2(input.sysIdArray, input.topicResponse);\n    }\n\n    function operation(sys_id_arr) {\n        var topicToTaxonomy = topicToTaxonomyMapping(sys_id_arr);\n        var taxonomyToTopicGroup = taxonomyToTopicGrouping(topicToTaxonomy);\n\n        var netSelection = {};\n        for (var taxonomy in taxonomyToTopicGroup) {\n            var _sysIdArray2 = taxonomyToTopicGroup[taxonomy];\n            var topicHierarcy = new global.TaxonomyUtil().getTopicsHierarchy(taxonomy);\n            topicHierarcy = (topicHierarcy == null) ? [] : topicHierarcy;\n\n            var selectedTopicsObject = transformInputForListSelector({ sysIdArray: _sysIdArray2, topicResponse: topicHierarcy });\n            netSelection[taxonomy] = selectedTopicsObject;\n        }\n        return netSelection;\n    }\n\n    return operation(sysIdArray);\n}","acl_failure_result":"","props":"[\n            {\n            \"name\": \"sysIdArray\",\n            \"label\": \"Array of Sys ID\",\n            \"description\": \"Takes array of topic sys_ids irrespective of taxonomy\",\n            \"readOnly\": false,\n            \"fieldType\": \"json\",\n            \"mandatory\": true,\n            \"defaultValue\": []\n            }\n            ]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/92ed237304752210559073c06a02f7a0","value":"92ed237304752210559073c06a02f7a0"},"sys_update_name":"sys_ux_data_broker_transform_92daaad0440d2510f87744f9957088a1","api_name":"global.Generate net selection from topic ids","mutates_server_data":"false","name":"Generate net selection from topic ids","output_schema":"[\n            {\n            \"name\": \"netSelection\",\n            \"label\": \"Net Selection object\",\n            \"description\": \"Object with key as taxonomy ID value as topics belonging to the respective taxonomy\",\n            \"readOnly\": true,\n            \"fieldType\": \"json\"\n            }\n            ]","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Policy type sys id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get available subflows based on a policy type","sys_updated_on":"2023-08-31 21:02:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"93852bb6a3f03110d49f9bd2361e6198","sys_updated_by":"admin","sys_created_on":"2023-08-25 20:56:15","sys_name":"Data Manager Get Available Subflows","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFunction = function() {\n\t\tvar policyTypeSysId = input.policyTypeSysId;\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n\t\treturn proxy.getSubflows(policyTypeSysId);\n\t};\n\n\treturn new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Get Available Subflows\", wrapperFunction);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"policyTypeSysId\",\r\n    \"label\": \"Policy type sys id\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_93852bb6a3f03110d49f9bd2361e6198","api_name":"sn_cmdb_ws.Data Manager Get Available Subflows","mutates_server_data":"false","name":"Data Manager Get Available Subflows","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9389143b778e511023651605bc5a99a7","sys_updated_by":"admin","sys_created_on":"2022-09-26 19:28:38","sys_name":"MS show settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\treturn util.showSettings();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_9389143b778e511023651605bc5a99a7","api_name":"sn_cmdb_ws.MS show settings","mutates_server_data":"false","name":"MS show settings","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Plugin ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-11-15 16:06:59","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"93aa817f34035110f877339ba5f48b51","sys_updated_by":"maint","sys_created_on":"2022-11-15 16:06:59","sys_name":"VSC Biometric Plugin Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\treturn { \n\t\tid: input.pluginId, \n\t\tactive: GlidePluginManager.isActive(input.pluginId)\n\t};\n}","acl_failure_result":"","props":"[ \n{\n        \"name\": \"pluginId\",\n        \"label\": \"Plugin ID\",\n        \"description\": \"Plugin ID\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": false,\n        \"defaultValue\": \"com.devsnc_sn_catalog_form\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_93aa817f34035110f877339ba5f48b51","api_name":"sn_vsc.VSC Biometric Plugin Status","mutates_server_data":"false","name":"VSC Biometric Plugin Status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"","batch_exclude":"false","description":"","sys_updated_on":"2020-11-01 16:53:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"93ff309e0f201010ad4437a98b767e8a","sys_updated_by":"admin","sys_created_on":"2020-05-05 08:06:54","sys_name":"Visual Board Load Data Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/706afb822bf7975884b8ae878de7baeb","value":"706afb822bf7975884b8ae878de7baeb"},"sys_created_by":"admin","sys_mod_count":"107","sys_tags":"","script":"function transform(input) {\n    var graphqlOutputPayload = input.graphqlOutputPayload;\n    var recordTypeToEvamTemplate = input.recordTypeToEvamTemplate;\n    if (graphqlOutputPayload) {\n        //  var board = graphqlOutputPayload.data.GlideVisualBoard_Query.getBoard;\n        var board = graphqlOutputPayload.result;\n        if (board) {\n            // Default tags\n            board.cardTag = 'sn-vtb-card';\n            board.cardDraggable = true;\n            board.cardDragPlaceholderTag = 'sn-vtb-card-src-placeholder';\n            board.cardDropPlaceholderTag = 'sn-vtb-card-dest-placeholder';\n            board.cardConfigOverride = {\n                placeholderCard: {\n                    draggable: false,\n                    tag: 'sn-vtb-freeform-card-editable'\n                }\n            };\n\n            board.laneHeaderTag = 'sn-vtb-lane-header';\n            board.laneFooterTag = 'sn-vtb-lane-footer';\n            board.laneDraggable = true;\n            board.laneDragPlaceholderTag = 'sn-vtb-lane-src-placeholder';\n            board.laneDropPlaceholderTag = 'sn-vtb-lane-dest-placeholder';\n            board.laneConfigOverride = {\n                addNewLane_sysId: {\n                    draggable: false,\n                    droppable: false,\n                    hide_in_reorder: true,\n                    tag_lane_header: 'sn-vtb-add-lane',\n                    tag_lane_footer: 'div'\n                }\n            };\n\n            board.swimlaneHeaderTag = 'sn-vtb-swimlane-header';\n            board.swimlaneHeaderCloneTag = 'sn-vtb-swimlane-header-clone';\n            board.swimlaneDraggable = true;\n            board.swimlaneDragPlaceholderTag = 'sn-vtb-swimlane-src-placeholder';\n            board.swimlaneDropPlaceholderTag = 'sn-vtb-swimlane-dest-placeholder';\n            board.swimlaneConfigOverride = {\n                addNewSwimlane_sysId: {\n                    draggable: false,\n                    droppable: false,\n                    hide_in_reorder: true,\n                    tag_swimlane_header: 'sn-vtb-add-swimlane'\n                }\n            };\n\n            board.loadTagsFromUxf = true;\n\n            board.useArrowNavigation = true;\n            board.arrowNavigableElements =\n                '.now-card,.sn-vtb-lane-header,.swimlane-add-btn,.lane-add-btn,.add-card,.sn-vtb-swimlane-header .container';\n            board.wrapperDomEvents = [{\n                on: [\n                    'sn-lane-header',\n                    'sn-card-wrapper',\n                    'sn-swimlane-header',\n                    'lane-footer-container',\n                ],\n                events: ['keydown'],\n                action: 'VTB#WRAPPER_DOM_ACTION_PERFORMED',\n            }];\n\n            board.customScrollOptions = {\n                'enableScroll': false,\n                'scrollTrackCSS': {\n                    'margin-bottom': '30px'\n                },\n            };\n\n            board._style_ = {\n                'sn-board': {\n                    'background-color': '#B5D1C5'\n                }\n            };\n\n            // EVAM template\n            if (recordTypeToEvamTemplate) {\n                board.recordTypeToEvamTemplate = recordTypeToEvamTemplate;\n            }\n\n            if (board.lastSynchronized) {\n                board.last_synchronized = {\n                    'present': board.lastSynchronized.dateTime\n                };\n                delete board.lastSynchronized;\n            }\n\n            if (board.listViewName) {\n                board.list_view_name = {\n                    'present': board.listViewName\n                };\n                delete board.listViewName;\n            }\n\t\t\t\n\t\t\tif(board.sysUpdatedOn) {\n\t\t\t\tboard.sys_updated_on = board.sysUpdatedOn.dateTime;\n\t\t\t\tdelete board.sysUpdatedOn;\n\t\t\t}\n\n            /*var laneDiscriminators = board.lane_discriminators = {};\n            if (board.laneDiscriminators) {\n                board.laneDiscriminators.forEach(function(ld) {\n                    laneDiscriminators[ld.name] = ld.value;\n                });\n                delete board.laneDiscriminators;\n            }*/\n\n            // Users \n            if (board.assignees) {\n                board.assignees.forEach(function(user) {\n                    user.isMember = false;\n                });\n            }\n\n            if (board.members) {\n                board.members.forEach(function(user) {\n                    user.isMember = true;\n                });\n            }\n            board.users = [].concat(board.assignees).concat(board.members);\n\n            // Labels\n            board.labels = board.labels || [];\n\n            // Cards\n            if (board.cards) {\n                board.cards.forEach(function(card) {\n                    card.attachments = card.attachments || [];\n\t\t\t\t\tif(card.sysUpdatedOn) {\n\t\t\t\t\t\tcard.sys_updated_on = card.sysUpdatedOn.dateTime;\n\t\t\t\t\t\tdelete card.sysUpdatedOn;\n\t\t\t\t\t}\n                   \n                   /* var newRecord = {};\n                    card.record.forEach(function(field) {\n                        var fieldValue;\n                        if (field.value.hasOwnProperty('string')) {\n                            fieldValue = field.value.string;\n                        } else if (field.value.hasOwnProperty('boolean')) {\n                            fieldValue = field.value['boolean'];\n                        } else {\n                            fieldValue = field.value;\n\n                            // If the fieldValue is [empty string] or [\"single element\"]\n                            if (fieldValue.value && fieldValue.value.length === 1) fieldValue.value = fieldValue.value[0];\n                        }\n                        newRecord[field.name] = fieldValue;\n                    });\n                    card.record = newRecord; */\n\n                    if (card.record.short_description)\n                        card.title = card.record.short_description.display_value;\n                });\n            }\n\n            board.hidden_lanes = board.hidden_lanes || '';\n            if (board.hidden_lanes !== '') {\n                board.hidden_lanes = board.hidden_lanes.split('-');\n            } else {\n                board.hidden_lanes = [];\n            }\n\n            if (board.lanes) {\n                var swimlanes = board.lanes\n                    .filter(function(lane) {\n                        return lane.is_swim_lane;\n                    });\n\n                var lanes = board.lanes\n                    .filter(function(lane) {\n                        return !lane.is_swim_lane;\n                    });\n\n                board.lanes = lanes;\n                board.swimlanes = swimlanes;\n            }\n\n            // Add order to cards in each lane\n            board.lanes.forEach(function(lane) {\n                board.cards\n                    .filter(function(card) {\n                        return card.lane_id === lane.id;\n                    })\n                    .sort(function(a, b) {\n                        return a.order - b.order;\n                    })\n                    .forEach(function(card, cardIndex) {\n                        card.order = cardIndex;\n                    });\n            });\n\n            return {\n                \"board\": board\n            };\n        }\n    }\n    return;\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"graphqlOutputPayload\",\n    \"label\": \"grap\",\n    \"fieldType\": \"json\",\n    \"valueType\": \"object\",\n    \"readOnly\": false,\n    \"mandatory\": true,\n    \"description\": \"Graphql Query Output\"\n  },\n{\n  \"name\": \"recordTypeToEvamTemplate\",\n    \"label\": \"Record type to EVAM template\",\n     \"fieldType\": \"json\",\n     \"valueType\": \"object\",\n    \"readOnly\": false,\n    \"mandatory\": false,\n    \"description\": \"Record type to EVAM template\",\n    \"defaultValue\": null\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/706afb822bf7975884b8ae878de7baeb","value":"706afb822bf7975884b8ae878de7baeb"},"sys_update_name":"sys_ux_data_broker_transform_93ff309e0f201010ad4437a98b767e8a","api_name":"sn_vtb.Visual Board Load Data Transform","mutates_server_data":"false","name":"Visual Board Load Data Transform","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"User SysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-21 12:35:02","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"940653a653280210abd8ddeeff7b127e","sys_updated_by":"admin","sys_created_on":"2024-02-27 11:07:02","sys_name":"Get PWD Reset SDesk Processes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\tvar result = new sn_uib_pwd_reset.PwdResetUXFIdentifyProcessor().getProcess(input.userSysId);\n\treturn result;\n}","acl_failure_result":"","props":"[{\r\n      \"name\": \"userSysId\",\r\n      \"label\": \"User SysId\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_940653a653280210abd8ddeeff7b127e","api_name":"sn_uib_pwd_reset.Get PWD Reset SDesk Processes","mutates_server_data":"false","name":"Get PWD Reset SDesk Processes","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"ACE Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ACE configured page route\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"BlockContext\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page Params\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page Route\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page parameters(optional and required)\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"blockcontext parameters(optional and required)\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to fetch the contentTree and   blockContenxt in Admin Console Framework  controller.","sys_updated_on":"2023-09-14 15:45:01","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9441ff4c69e36910f8775b2a2b5190b1","sys_updated_by":"admin","sys_created_on":"2023-06-16 05:20:34","sys_name":"Controller ACE Fetch Content Blocks","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"maint","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    function getContentBlocksLegacy(appConfigGr) {\n        var appConfig = appConfigGr.getValue('app_config');\n        return new ACEAppBuilderUtilV2().getContentBlocks(input.page_route, input.page_params, appConfig, false, false, false);\n    }\n\n    /**\n     * Fetch content blocks from bundle only if ace version is v2 and the sys_property to disable\n     * bundle fetch is false.\n     */\n    function shouldFetchContentBlocksFromBundle(pageGr) {\n        return gs.getProperty('ace.disable_page_bundle_fetch.' + input.page_route, false + \"\") == \"false\" &&\n            pageGr.ace_app.version == 'v2';\n    }\n\n    function isApplicationACEV1(appConfigGr, pageGr) {\n\t\tvar appVersion = appConfigGr.getValue('version');\n        var pageVersion = pageGr.getValue('version');\n        \n        if (pageVersion && pageVersion.toLowerCase() === 'v2')\n            return false;\n        if (appVersion && appVersion.toLowerCase() === 'v2')\n            return false;\n\n        return true;\n    }\n\n    if (!input || !input.application_id || !input.page_route) return [];\n    var contentBlocks = [];\n    var appConfigGr = new GlideRecord('sn_ace_app_config');\n    if (!appConfigGr.get(input.application_id))\n        return [];\n\n    var pageGr = new GlideRecord('sn_ace_page');\n    if (!pageGr.get(input.page_route))\n        return [];\n\n    //interceptor for legacy v1 application\n    if (isApplicationACEV1(appConfigGr, pageGr)) {\n        var blocks = new ACEAppBuilderUtil().getContentBlocks(input.page_route, input.page_params);\n        blocks.forEach(function(cb) {\n            cb.isRoot = true;\n        });\n        return blocks;\n    }\n\n    var aceAppBuilderUtil = new ACEAppBuilderUtilV2();\n    var aceGlobalUtil = new global.ACEAppBuilderGlobalScopedUtil();\n\n    try {\n        var cbPageParams = {\n            'pageParams': input.page_params,\n\t\t\t'blockcontext':input.block_context\n        };\n\n        if (shouldFetchContentBlocksFromBundle(pageGr)) {\n            contentBlocks = aceGlobalUtil.getDecompressedPageBundle(pageGr.getValue('bundle'));\n\t\t\taceAppBuilderUtil.processReusableBlocks(contentBlocks, cbPageParams);\n\t\t\taceAppBuilderUtil.mergeContentBlockContext(contentBlocks);\n            if (contentBlocks && contentBlocks.length) {\n                contentBlocks = aceAppBuilderUtil.eagerlyEvaluateDataBlocks(contentBlocks, cbPageParams);\n                cbPageParams = aceAppBuilderUtil.addDataBlockParamsToScriptVariables(contentBlocks, cbPageParams);\n                contentBlocks = aceAppBuilderUtil.processCachedContentBlocks(contentBlocks, cbPageParams);\n            } else {\n                contentBlocks = getContentBlocksLegacy(appConfigGr);\n            }\n        } else {\n            contentBlocks = getContentBlocksLegacy(appConfigGr);\n        }\n    } catch (e) {\n        gs.error(\"ACE Fetch Content Blocks: Error in parsing page composition: \" + e.toString());\n        contentBlocks = getContentBlocksLegacy(appConfigGr);\n    }\n\n    contentBlocks.forEach(function(cb) {\n        cb.isRoot = true;\n    });\n    return contentBlocks;\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"application_id\",\n      \"label\": \"Application Id\",\n      \"description\": \"ACE Application Id\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"page_route\",\n      \"label\": \"Page Route\",\n      \"description\": \"ACE configured page route\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"page_params\",\n      \"label\": \"Page Params\",\n      \"description\": \"Page parameters(optional and required)\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": false,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"block_context\",\n      \"label\": \"BlockContext\",\n      \"description\": \"blockcontext parameters(optional and required)\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": false,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_9441ff4c69e36910f8775b2a2b5190b1","api_name":"sn_ace.Controller ACE Fetch Content Blocks","mutates_server_data":"true","name":"Controller ACE Fetch Content Blocks","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get benchmark indicators category names and total opted in indicators ","sys_updated_on":"2024-03-05 17:10:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"948d989493d4861066b7f6833389180e","sys_updated_by":"admin","sys_created_on":"2024-02-07 11:30:46","sys_name":"Get benchmark indicators category and data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n    var gr = new GlideRecord('sn_bm_common_indicator');\n    gr.addQuery('generate_global_scores', true);\n    gr.orderBy('category.order');\n    gr.query();\n    var result = {};\n    while (gr.next()) {\n        if (!result.hasOwnProperty(gr.category)) {\n            result[gr.category] = {};\n            result[gr.category]['opted_in'] = 0;\n            result[gr.category]['opted_out'] = 0;\n            result[gr.category]['name'] = gr.getDisplayValue('category');\n\n        }\n        if (gr.active)\n            result[gr.category]['opted_in'] = result[gr.category]['opted_in'] + 1;\n        else\n            result[gr.category]['opted_out'] = result[gr.category]['opted_out'] + 1;\n\n    }\n    var arr = [];\n\n    for (var key in result) {\n        result[key]['sys_id'] = key;\n        result[key]['total'] = result[key]['opted_in'] + result[key]['opted_out'];\n\n\n        var groupGr = new GlideRecord(\"sn_bm_common_indicator_group\");\n        groupGr.addQuery('category', key);\n        groupGr.orderByDesc('order');\n        groupGr.query();\n        groupGr.next();\n        var groups = \"\"+groupGr.name;\n        while (groupGr.next()) {\n            groups = groupGr.name + \", \" + groups;\n        }\n        result[key]['groups'] = groups;\n        arr.push(result[key]);\n    }\n\n    return arr;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_update_name":"sys_ux_data_broker_transform_948d989493d4861066b7f6833389180e","api_name":"sn_sd.Get benchmark indicators category and data","mutates_server_data":"false","name":"Get benchmark indicators category and data","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-18 16:17:12","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"955bd6abeb8b211094bbb5d5d8522805","sys_updated_by":"admin","sys_created_on":"2023-06-01 23:54:39","sys_name":"Get integration dropdown options","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"28","sys_tags":"","script":"function transform() {\n    var util = new sn_cmdb_ws.CMDBWsPerfInsightsUtil();\n    var gr = util.getIntegrationAggDataGr('', util.COLS.APPLICATION);\n\n    if (!gr.hasNext()) {\n        return {};\n    }\n\n    var OUTLIER = gs.getMessage(\"Outlier\");\n    var NON_OUTLIER = gs.getMessage(\"Non-outlier\");\n\n    var result = {\n        processingRate: {\n            allOptions: [],\n            defaultOption: null\n        },\n        importCount: {\n            allOptions: [],\n            defaultOption: null\n        }\n    };\n\n    var processingRateOutlierApplications = [];\n    var processingRateNonOutlierApplications = [];\n    var importCountOutlierApplications = [];\n    var importCountNonOutlierApplications = [];\n\n    var _aggData = [];\n    var _appIds = {};\n    var _appIdToName = {};\n\n    while (gr.next()) {\n        var feature = gr.getValue(util.COLS.CHART);\n        var count = gr.getValue(util.COLS.COUNT);\n        var applicationId = gr.getValue(util.COLS.APPLICATION);\n        var hasOutlier = count > 0;\n        _aggData.push({\n            feature: feature,\n            applicationId: applicationId,\n            hasOutlier: hasOutlier\n        });\n        _appIds[applicationId] = true;\n    }\n\n    var uniqueAppIds = Object.keys(_appIds);\n\n    while (uniqueAppIds.length > 0) {\n        var appGr = new GlideRecord(util.TABLES.CMDB_INST_APPLICATION);\n        appGr.addQuery(util.COLS.SYS_ID, \"IN\", uniqueAppIds.splice(0, 1000));\n        appGr.query();\n\n        while (appGr.next()) {\n            _appIdToName[appGr.getUniqueValue()] = appGr.getDisplayValue();\n        }\n    }\n\n    for (var d in _aggData) {\n        var feature = _aggData[d].feature;\n        var applicationId = _aggData[d].applicationId;\n        var hasOutlier = _aggData[d].hasOutlier;\n        var label = _appIdToName[applicationId];\n\n        var dropdownOption = {\n            id: applicationId,\n            label: label\n        };\n\n        if (feature === util.SUB_CATEGORY.INTEGRATION_PROCESSING_RATE_OUTLIER) {\n            if (hasOutlier) {\n                processingRateOutlierApplications.push(dropdownOption);\n            } else {\n                processingRateNonOutlierApplications.push(dropdownOption);\n            }\n        } else if (feature === util.SUB_CATEGORY.INTEGRATION_ROWS_OUTLIER) {\n            if (hasOutlier) {\n                importCountOutlierApplications.push(dropdownOption);\n            } else {\n                importCountNonOutlierApplications.push(dropdownOption);\n            }\n        }\n    }\n\n    if (processingRateOutlierApplications.length > 0) {\n        result.processingRate.allOptions.push({\n            id: 'processing_rate_outlier',\n            label: OUTLIER,\n            children: processingRateOutlierApplications\n        });\n    }\n\n    if (processingRateNonOutlierApplications.length > 0) {\n        result.processingRate.allOptions.push({\n            id: 'processing_rate_non_outlier',\n            label: NON_OUTLIER,\n            children: processingRateNonOutlierApplications\n        });\n    }\n\n    if (importCountOutlierApplications.length > 0) {\n        result.importCount.allOptions.push({\n            id: 'import_count_outlier',\n            label: OUTLIER,\n            children: importCountOutlierApplications\n        });\n    }\n\n    if (importCountNonOutlierApplications.length > 0) {\n        result.importCount.allOptions.push({\n            id: 'import_count_non_outlier',\n            label: NON_OUTLIER,\n            children: importCountNonOutlierApplications\n        });\n    }\n\n    result.processingRate.defaultOption = [result.processingRate.allOptions[0].children[0]];\n    result.importCount.defaultOption = [result.importCount.allOptions[0].children[0]];\n\n    return result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_955bd6abeb8b211094bbb5d5d8522805","api_name":"sn_cmdb_ws.Get integration dropdown options","mutates_server_data":"false","name":"Get integration dropdown options","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Retrieves the instance name for event tracking","sys_updated_on":"2024-02-13 19:01:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"95fdfc5243500210411546c8dbb8f227","sys_updated_by":"maint","sys_created_on":"2024-02-13 19:01:14","sys_name":"Get Instance","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/74fdcd7a437121109fa864cec7b8f27b","value":"74fdcd7a437121109fa864cec7b8f27b"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input){return gs.getProperty('instance_name');}\n","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/74fdcd7a437121109fa864cec7b8f27b","value":"74fdcd7a437121109fa864cec7b8f27b"},"sys_update_name":"sys_ux_data_broker_transform_95fdfc5243500210411546c8dbb8f227","api_name":"sn_async_dashboard.Get Instance","mutates_server_data":"false","name":"Get Instance","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"New Library Description\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"New Library Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update de-duplication template library","sys_updated_on":"2023-09-21 01:23:23","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"96a15e3493c93110f769fa60748918a7","sys_updated_by":"admin","sys_created_on":"2023-08-31 19:56:10","sys_name":"De-Duplication Library Update","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar libraryName = input.newLibraryName;\n\tvar libraryDescription = input.newLibraryDescription;\n\tvar sysId = input.sysId;\n    var util = new sn_cmdb_ws.DedupeTemplateLibraryUtil();\n\tresult = util.updateLibrary(sysId, libraryName, libraryDescription);\n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"sysId\",\r\n      \"label\": \"Sys Id\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n{\r\n      \"name\": \"newLibraryName\",\r\n      \"label\": \"New Library Name\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n   {\r\n      \"name\": \"newLibraryDescription\",\r\n      \"label\": \"New Library Description\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"false\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_96a15e3493c93110f769fa60748918a7","api_name":"sn_cmdb_ws.De-Duplication Library Update","mutates_server_data":"true","name":"De-Duplication Library Update","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Genius Result Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-09 20:39:09","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"973639ac9f7102104403089c8a0a1cba","sys_updated_by":"admin","sys_created_on":"2024-04-23 02:12:40","sys_name":"Generate actions for citations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"24","sys_tags":"","script":"function transform(input) {\n    var results = input.geniusResults;\n    if (!results)\n        return null;\n    var citationsresult = {};\n    results.items.forEach(function(geniusResultCard) {\n        if (!geniusResultCard.propValues.citations)\n            return;\n        var citations = JSON.parse(geniusResultCard.propValues.citations);\n\n        var clickActions = geniusResultCard.propValues.actions;\n        if (!clickActions)\n            return;\n        var citationModArray = {};\n        var viewArticleAction = {};\n        var actionToAdd = {};\n        clickActions.forEach(function(action) {\n            if (action.name === 'view_article') {\n                actionToAdd = action;\n            }\n        });\n\n        citations.forEach(function(citation) {\n            var citationActionPayload = {\n                'table': citation.table,\n                'sys_id': citation.sys_id,\n                'url': citation.url\n            };\n            actionToAdd.actionPayload = Object.assign({}, citationActionPayload);\n            citation.action = Object.assign({}, actionToAdd);\n        });\n\n        var citationspart2 = citations;\n        geniusResultCard.propValues.citations = JSON.stringify(citationspart2);\n\n    });\n    return results;\n\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"geniusResults\",\r\n        \"label\": \"Genius Result Data\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_973639ac9f7102104403089c8a0a1cba","api_name":"global.Generate actions for citations","mutates_server_data":"false","name":"Generate actions for citations","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"NLU Driver\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"nlu_driver\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update system properties","sys_updated_on":"2021-08-06 08:08:34","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"985e6b53532530106d43ddeeff7b127d","sys_updated_by":"admin","sys_created_on":"2021-07-30 08:48:26","sys_name":"Update System Properties (NLU Settings)","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"24","sys_tags":"","script":"function transform(input) {\n    if (input.nlu_driver == 'Please Select') {\n        return;\n    }\n    var isServiceNowNLU = (input.nlu_driver == 'ServiceNow NLU');\n    var properties = [{\n            \"key\": \"com.glide.cs.entity_confidence_threshold\",\n            \"value\": isServiceNowNLU ? 0.01 : 0.7\n        },\n        {\n            \"key\": \"com.glide.cs.intent_confidence_delta\",\n            \"value\": isServiceNowNLU ? 0.0 : 0.5\n        },\n        {\n            \"key\": \"com.glide.cs.intent_confidence_threshold\",\n            \"value\": isServiceNowNLU ? 0.01 : 0.1\n        }\n    ];\n\n    properties.forEach(function(prop) {\n        gs.setProperty(prop.key, prop.value);\n    });\n    return properties;\n\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"nlu_driver\",\n      \"label\": \"nlu_driver\",\n      \"description\": \"NLU Driver\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": false,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sys_ux_data_broker_transform_985e6b53532530106d43ddeeff7b127d","api_name":"global.Update System Properties (NLU Settings)","mutates_server_data":"true","name":"Update System Properties (NLU Settings)","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Request JSON\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Request object\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"API to fetch links to upcoming tasks and events","sys_updated_on":"2022-01-28 09:44:12","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"99d5067eb7e23010965e56bf7e11a97d","sys_updated_by":"admin","sys_created_on":"2021-09-16 05:08:27","sys_name":"Upcoming Links Data Resource","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n    var request = input.request;\n    if (gs.nil(request)) {\n        throw gs.getMessage(\"Request not passed in\");\n    }\n\trequest = 'string' == typeof request ? JSON.parse(request) : request;\n\tvar data = new sn_sow.SOWUpcomingLinksService().process(request);\n    return data;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"request\",\r\n        \"label\": \"Request JSON\",\r\n        \"description\": \"Request object\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"json\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"{ \\\"from\\\": \\\"beginningOfToday\\\", \\\"to\\\": \\\"endOfToday\\\"}\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sys_ux_data_broker_transform_99d5067eb7e23010965e56bf7e11a97d","api_name":"sn_sow.Upcoming Links Data Resource","mutates_server_data":"false","name":"Upcoming Links Data Resource","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Json input to show list of all stockrooms with name of the stockroom as label a","sys_updated_on":"2021-07-27 15:43:41","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9a4deff873a130102d1d2f163cf6a73e","sys_updated_by":"admin","sys_created_on":"2021-07-22 14:59:33","sys_name":"Stockrooms - All","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"function transform(input) {\n\tvar results = [];\n\tnew global.GlideQuery('alm_stockroom')\n\t.select('name', 'sys_id', 'location$DISPLAY')\n\t.forEach(function(stockroom) {\n\t\tvar data = {};\n\t\tdata['id'] = stockroom.sys_id;\n\t\tdata['label'] = stockroom.name;\n\t\tdata['sublabel'] = stockroom.location$DISPLAY;\n\t\tresults.push(data);\n\t});\n\treturn results;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_9a4deff873a130102d1d2f163cf6a73e","api_name":"sn_itam_workspace.Stockrooms - All","mutates_server_data":"false","name":"Stockrooms - All","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Verification ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-14 07:06:28","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9b65b23b937d4a109086849c54891810","sys_updated_by":"admin","sys_created_on":"2024-05-03 09:08:41","sys_name":"Get Personal Data Verification Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    return new sn_uib_pwd_reset.PwdResetCommonUXFVerificationProcessor().getPersonalDataVerificationDetails(input.verificationId, input.token);\n}","acl_failure_result":"","props":"[{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n{\r\n      \"name\": \"verificationId\",\r\n      \"label\": \"Verification ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_9b65b23b937d4a109086849c54891810","api_name":"sn_uib_pwd_reset.Get Personal Data Verification Details","mutates_server_data":"false","name":"Get Personal Data Verification Details","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"ICT Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-12 17:55:12","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9b808c93043cca10f877eb0e76ed1aea","sys_updated_by":"admin","sys_created_on":"2024-03-12 13:37:48","sys_name":"Get sidebar chat id","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0d2383dd53687510b256ddeeff7b12b8","value":"0d2383dd53687510b256ddeeff7b12b8"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    var output = {};\n    if (!input.ictSysId)\n    \treturn output;\n    var collabRecordGr = new GlideRecord('sys_cs_collab_record');\n    collabRecordGr.addQuery('document', input.ictSysId);\n    collabRecordGr.setLimit(1);\n    collabRecordGr.query();\n    var chatSysId;\n    if (collabRecordGr.next())\n        chatSysId = collabRecordGr.getValue('collab_chat');\n    output.chatSysId = chatSysId;\n\n    return output;\n}","acl_failure_result":"","props":"[\n\t{\n\t  \"name\": \"ictSysId\",\n          \"label\": \"ICT Sys Id\",\n          \"description\": \"ICT Sys Id\",\n          \"readOnly\": false,\n          \"fieldType\": \"string\",\n          \"mandatory\": true\n\t}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0d2383dd53687510b256ddeeff7b12b8","value":"0d2383dd53687510b256ddeeff7b12b8"},"sys_update_name":"sys_ux_data_broker_transform_9b808c93043cca10f877eb0e76ed1aea","api_name":"sn_uib_tcm.Get sidebar chat id","mutates_server_data":"false","name":"Get sidebar chat id","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n      \"message\" : \"Members Data\",\n      \"comment\" : \"\"\n    }, {\n      \"message\" : \"Roster members data\",\n      \"comment\" : \"\"\n    } ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-22 06:42:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9be6c4bd43aa71102bb850e01fb8f20a","sys_updated_by":"admin","sys_created_on":"2023-11-17 01:56:14","sys_name":"Save/Update Roster Member details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n  return new sn_uib_on_call.OnCallMembersDetails().generateRostersAndMembers(input.membersData);\n}","acl_failure_result":"","props":"[  {\n            \"name\": \"membersData\",\n            \"label\": \"Members Data\",\n            \"description\": \"Roster members data\",\n            \"readOnly\": false,\n            \"fieldType\": \"json\",\n            \"valueType\": \"object\",\n            \"mandatory\": true,\n            \"defaultValue\": \"\"\n        } ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_9be6c4bd43aa71102bb850e01fb8f20a","api_name":"sn_uib_on_call.Save/Update Roster Member details","mutates_server_data":"false","name":"Save/Update Roster Member details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Parent Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Parent Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Related list orientation\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-01-02 06:39:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9c0f04b143ac7110cc25ff53e9b8f209","sys_updated_by":"admin","sys_created_on":"2023-08-09 16:22:50","sys_name":"[SOW] Get Related List Configuration","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c72e8e76c1fcf010f877e1de0b6be358","value":"c72e8e76c1fcf010f877e1de0b6be358"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var rlConfig = [];\n\tvar relatedListLayout = input.relatedListLayout;\n\n    if (input.parentSysId == -1 || (relatedListLayout && relatedListLayout != \"vertical\")) {\n        return rlConfig;\n    }\n\n    var extns = new GlideScriptedExtensionPoint().getExtensions(\"sn_sow_record.SOWRouteUtil\");\n    if (extns.length > 0) {\n        for (var i = 0; i < extns.length; i++) {\n            if (extns[i].handles(input.parentTable, input.parentSysId)) {\n                try {\n                    rlConfig = extns[i].getRelatedListConfig(input.parentTable, input.parentSysId);\n                    if (typeof rlConfig != \"undefined\")\n                        return rlConfig;\n                } catch(e) {\n                    break;\n                }\n                break;\n            }\n        }\n    }\n\n    return [{\n        \"label\": gs.getMessage(\"Related records\"),\n        \"id\": \"sow_related_records\",\n        \"exclusionList\": null,\n        \"inclusionList\": null\n    }];\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"parentTable\",\r\n  \"label\": \"Parent Table\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"parentSysId\",\r\n  \"label\": \"Parent Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"relatedListLayout\",\r\n  \"label\": \"Related list orientation\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c72e8e76c1fcf010f877e1de0b6be358","value":"c72e8e76c1fcf010f877e1de0b6be358"},"sys_update_name":"sys_ux_data_broker_transform_9c0f04b143ac7110cc25ff53e9b8f209","api_name":"sn_sow_record.[SOW] Get Related List Configuration","mutates_server_data":"false","name":"[SOW] Get Related List Configuration","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Filter test results by date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Filter test results by service\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Service\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"endDate\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"startDate\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Hermes Diagnostics test results for all configured services and the past 7 days\r\n","sys_updated_on":"2024-07-10 16:54:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9c3f4251438f021057521daa5ab8f209","sys_updated_by":"admin","sys_created_on":"2024-06-26 15:14:49","sys_name":"TestsPerServiceAndDate","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"129","sys_tags":"","script":"/**\n * JSON returned is formatted for the \"Vertical Bar\" visualization type\n * Grouped by tests and status codes (success/fail)\n */\nfunction transform(input) {\n    if (input.service == \"\" || input.startDate == \"\" || input.endDate == \"\")\n        return []; //no filters defined\n    \n    var start = input.startDate;\n    var end = input.endDate;\n    var rangeStart = start.split(\" \");\n    var rangeEnd = end.split(\" \");\n    var status = new GlideAggregate('hermes_system_status');\n    status.addEncodedQuery(\"service_name=\" + input.service + \"^sys_created_onBETWEENjavascript:gs.dateGenerate('\" + rangeStart[0] + \"','\" + rangeStart[1] + \"')@javascript:gs.dateGenerate('\" + rangeEnd[0] + \"','\" + rangeEnd[1] + \"')\");\n    status.groupBy(\"name\");\n    status.groupBy(\"status_code\");\n    status.orderByAggregate(\"COUNT\", \"status_code\");\n    status.addAggregate(\"COUNT\", \"status_code\");\n    status.query();\n    var testResults = [];\n    var elements = [];\n    var tests = [];\n    while (status.next()) {\n        var name = status.getValue(\"name\");\n        var column = {\n            \"name\": name,\n            \"status_code\": status.getValue(\"status_code\"),\n            \"value\": status.getAggregate(\"COUNT\", \"status_code\"),\n\n        };\n        if (tests.indexOf(name) == -1)\n            tests.push(name);\n\n        testResults.push(column);\n    }\n    for (key in tests) {\n        var columnValue = tests[key];\n        elements.push({\n            \"eventData\": {\n                \"query\": \"name=\" + columnValue,\n                \"querySegments\": [{\n                    \"field\": \"name\",\n                    \"values\": [\n                        columnValue,\n                    ]\n                }]\n            },\n            \"id\": columnValue,\n            \"label\": columnValue,\n        });\n    }\n\n    var metadata = {\n        \"eventData\": {\n            \"table\": \"hermes_system_status\"\n        },\n        \"groupBy\": [{\n                \"elements\": elements,\n                \"id\": \"name\",\n                \"fieldType\": \"string\",\n                \"label\": \"Name\",\n            },\n            {\n                \"label\": \"Status Code\",\n                \"elements\": [{\n                        \"label\": \"failed\",\n                        \"id\": \"failed\",\n                        \"query\": \"status_code=failed\",\n                        \"querySegments\": [{\n                            \"field\": \"status_code\",\n                            \"values\": [\n                                \"failed\"\n                            ]\n                        }]\n                    },\n                    {\n                        \"label\": \"success\",\n                        \"id\": \"success\",\n                        \"query\": \"status_code=success\",\n                        \"querySegments\": [{\n                            \"field\": \"status_code\",\n                            \"values\": [\n                                \"success\"\n                            ]\n                        }]\n                    }\n                ],\n                \"id\": \"status_code\",\n                \"fieldType\": \"string\",\n\n            }\n        ],\n        \"aggregateBy\": 4,\n        \"format\": {\n            \"unitFormat\": \"{0}\"\n        },\n        \"aggregateFunction\": \"COUNT\",\n    };\n\n    var results = [{\n        \"data\": testResults,\n        \"metadata\": metadata,\n    }];\n\n    return results;\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"service\",\r\n  \"label\": \"Service\",\r\n  \"description\": \"Filter test results by service\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"hermes-internal\"\r\n},\r\n{\r\n \"name\": \"startDate\",\r\n  \"label\": \"startDate\",\r\n  \"description\": \"Filter test results by date\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n \"name\": \"endDate\",\r\n  \"label\": \"endDate\",\r\n  \"description\": \"Filter test results by date\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/03d4abbf04312210559073c06a02f7f9","value":"03d4abbf04312210559073c06a02f7f9"},"sys_update_name":"sys_ux_data_broker_transform_9c3f4251438f021057521daa5ab8f209","api_name":"global.TestsPerServiceAndDate","mutates_server_data":"false","name":"TestsPerServiceAndDate","output_schema":"{\r\n\"data\":[]\r\n}","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Config Identifier Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record sys id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Supports granular configurations both within and across Workspaces\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Workspace App Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"CMDB check life cycle stage for unified map based on configuration in operational life cycle table.","sys_updated_on":"2024-09-19 01:46:26","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9c6bd01677703110f563bfba4f5a9947","sys_updated_by":"admin","sys_created_on":"2023-08-23 17:34:38","sys_name":"CMDB check life cycle stage for unified map","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\tvar result = {\n\t\terrors: [],\n\t\tisValidLifeCycleStage : false\n\t};\n\ttry {\n\t\n\t\tif(!input || !input.record || !input.workspaceId) {\n\t\t\treturn result;\n\t\t}\n\t\tvar workspaceId = input.workspaceId;\n\t\tvar configIdentifierId = input.configIdentifierId;\n\t\tvar lifeCycleStageInclusionList;\n\t\tvar mapBase = new sn_cmdb_ws.MapBase();\n\t\tvar mapService = new sn_cmdb_ws.MapService();\n\t\tlifeCycleStageInclusionList = mapService.getLifeCycleStageInclusionList(\n\t\t\tmapBase.OPERATIONAL_LIFE_CYCLE_STAGE_MODE.VIEW,\n\t\t\tworkspaceId,\n\t\t\tconfigIdentifierId\n\t\t);\n\t\tvar gr = new GlideRecord(mapBase.NODE_MAP_TABLE.CMDB_CI);\n\t\tgr.query(mapBase.COL_SYS_ID, input.record);\n\t\tif(lifeCycleStageInclusionList) {\n\t\t\tgr.addNullQuery(mapBase.COL_LIFE_CYCLE_STAGE).addOrCondition(mapBase.COL_LIFE_CYCLE_STAGE, mapBase.IN_OP, lifeCycleStageInclusionList);\n\t\t}\n\t\tgr.setLimit(1);\n\t\tgr.query();\n\t\tif(gr.hasNext()) {\n\t\t\tresult.isValidLifeCycleStage = true;\n\t\t}\n\t} catch (error) {\n\t\tresult.errors.push(error.toString());\n\t}\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n    {\r\n      \"name\": \"record\",\r\n      \"label\": \"Record\",\r\n      \"description\": \"Record sys id\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n    },\r\n    {\r\n      \"name\": \"workspaceId\",\r\n      \"label\": \"Workspace App Id\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": true,\r\n      \"description\": \"Workspace App Id\"\r\n   },\r\n   {\r\n      \"name\": \"configIdentifierId\",\r\n      \"label\": \"Config Identifier Id\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": false,\r\n      \"description\": \"Supports granular configurations both within and across Workspaces\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_9c6bd01677703110f563bfba4f5a9947","api_name":"sn_cmdb_ws.CMDB check life cycle stage for unified map","mutates_server_data":"false","name":"CMDB check life cycle stage for unified map","output_schema":"","sys_policy":""},{"private":"false","required_translations":"","batch_exclude":"false","description":"Portal App Shell Transform Databroker for the Dynamic Menu Items","sys_updated_on":"2022-08-25 11:29:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9c7458c5536111101c7eddeeff7b12f9","sys_updated_by":"admin","sys_created_on":"2022-08-24 09:33:59","sys_name":"Portal AppShell Menu Provider","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7db24612c331101080d6d3658940dd47","value":"7db24612c331101080d6d3658940dd47"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\treturn (new app_shell_portal.PortalAppShellProvider()).process(input);\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"appId\",\r\n        \"label\": \"Application id\",\r\n        \"description\": \"sys_Id of the application\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7db24612c331101080d6d3658940dd47","value":"7db24612c331101080d6d3658940dd47"},"sys_update_name":"sys_ux_data_broker_transform_9c7458c5536111101c7eddeeff7b12f9","api_name":"app_shell_portal.Portal AppShell Menu Provider","mutates_server_data":"false","name":"Portal AppShell Menu Provider","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Name of the table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Pre Fetch User Values\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Set true/false to fetch user inputs from table & sys_id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of the record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-08-24 11:26:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9dd0b726c3b170104b8e88c7c840dd11","sys_updated_by":"admin","sys_created_on":"2021-08-09 11:20:16","sys_name":"CI Record UIB Config","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n  var output = null;\n  try {\n    if (!input || !input.table || !input.sys_id || !input.pre_fetch_user_values) return output;\n    output = new CIRecordPagePropsUtil().getFields(input.table, input.sys_id, input.pre_fetch_user_values);\n    return output;\n  } catch (e) {\n    return output;\n  }\n}\n","acl_failure_result":"","props":"[\n  {\n    \"name\": \"table\",\n    \"label\": \"Table\",\n    \"description\": \"Name of the table\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"sys_id\",\n    \"label\": \"Sys Id\",\n    \"description\": \"Sys id of the record\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"pre_fetch_user_values\",\n    \"label\": \"Pre Fetch User Values\",\n    \"description\": \"Set true/false to fetch user inputs from table & sys_id\",\n    \"readOnly\": false,\n    \"fieldType\": \"boolean\",\n    \"mandatory\": true,\n    \"defaultValue\": true\n  }\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sys_ux_data_broker_transform_9dd0b726c3b170104b8e88c7c840dd11","api_name":"global.CI Record UIB Config","mutates_server_data":"false","name":"CI Record UIB Config","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"checks whether notify plugin installed","sys_updated_on":"2023-12-04 07:07:43","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9ddf605393fa311062e412f984891809","sys_updated_by":"admin","sys_created_on":"2023-12-04 06:59:35","sys_name":"Check Notify Plugin Installed","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input){\n\treturn GlidePluginManager.isActive('com.snc.notify');\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_9ddf605393fa311062e412f984891809","api_name":"sn_uib_on_call.Check Notify Plugin Installed","mutates_server_data":"false","name":"Check Notify Plugin Installed","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"aceAppId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"loadDemoData\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-03-14 02:39:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9e20ba81eb59011090fa99602a52281d","sys_updated_by":"admin","sys_created_on":"2022-01-25 14:25:08","sys_name":"Create ACE pages","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"59","sys_tags":"","script":"function transform(input) {\n    var output = [];\n    var CONSTANTS = new ACEAppBuilderMetaData();\n    var util = new sn_ace.ACEAppBuilderUtil();\n    var baseGr = new GlideRecord(CONSTANTS.TABLES.PAGE);\n    // ACE Base Experience Config ID\n    baseGr.addQuery('ace_app', CONSTANTS.ACE_BASE_EXPERIENCE_CONFIG_ID);\n    baseGr.orderBy('path');\n    baseGr.query();\n    var SEARCH_PAGE_ID;\n    while (baseGr.next()) {\n        if (input.loadDemoData || (CONSTANTS.UNUSED_PAGES_LIST.indexOf(baseGr.getValue('name')) == -1)) {\n            var page = {\n                name: baseGr.getValue('name'),\n                template: baseGr.getValue('sys_id'),\n                path: baseGr.getValue('path'),\n                rootMacroponentId: ''\n            };\n            var screenGr = new GlideRecord('sys_ux_screen');\n            screenGr.addQuery('screen_type', baseGr.route.screen_type.toString());\n            screenGr.query();\n            if (screenGr.next()) {\n                page.rootMacroponentId = screenGr.macroponent.toString() || '';\n                var urlParams = util.getFieldsAndParams(baseGr.route.toString());\n                page.fields = urlParams.fields;\n                page.params = urlParams.params;\n            }\n            var gr = new GlideRecord(CONSTANTS.TABLES.PAGE);\n            gr.initialize();\n            gr.name = page.name;\n            gr.ace_app = input.aceAppId;\n            gr.path = page.path;\n            gr.template = page.template;\n            if (gr.canCreate()) {\n                page.sys_id = gr.insert();\n                if (page.name === CONSTANTS.SEARCH_PAGE_NAME) {\n                    SEARCH_PAGE_ID = gr.getUniqueValue();\n                }\n                output.push(JSON.parse(JSON.stringify(page)));\n            }\n        }\n    }\n\n    // Creating App levele Content Blocks\n    util._createContentBlock(input.aceAppId, input.aceAppId, CONSTANTS.ACE_BASE_EXPERIENCE_CONFIG_ID, CONSTANTS.TABLES.APP_CONFIG, SEARCH_PAGE_ID);\n\n    return output;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"loadDemoData\",\n    \"label\": \"loadDemoData\",\n    \"description\": \"loadDemoData\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"aceAppId\",\n    \"label\": \"aceAppId\",\n    \"description\": \"aceAppId\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_9e20ba81eb59011090fa99602a52281d","api_name":"sn_ace.Create ACE pages","mutates_server_data":"true","name":"Create ACE pages","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Data broker to get meta data for contract tabs","sys_updated_on":"2022-02-28 17:27:16","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9e47d2c4a302011021fd885716fcdac1","sys_updated_by":"admin","sys_created_on":"2022-02-28 16:50:05","sys_name":"Contract mgmt tabs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    return new AssetWorkspaceUtil().getContractTabs();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_9e47d2c4a302011021fd885716fcdac1","api_name":"sn_itam_workspace.Contract mgmt tabs","mutates_server_data":"false","name":"Contract mgmt tabs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"First Result Date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Second Result Date\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Pass 2 scan results date to perform scan comparison","sys_updated_on":"2022-09-23 01:22:29","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9ecb72d218c11110f877bf1085ef72b2","sys_updated_by":"maint","sys_created_on":"2022-08-03 22:24:33","sys_name":"VSC Scan Comparison","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    if (!input) {\n        return '';\n    }\n    if (!input.date1.contains(null) && !input.date2.contains(null)) {\n        //Get scan comparison results\n        var sysId = \"\";\n        var obj = new sn_vsc.ScanComparisonUtil();\n        var poll = new sn_vsc.VscPollForStatus();\n        var firstResult = obj.checkTableForResult(input.date1);\n        var secondResult = obj.checkTableForResult(input.date2);\n        obj.lookForComparison(firstResult, secondResult);\n        var grR1 = new GlideRecord('scan_result');\n        grR1.get(firstResult);\n        var result1 = grR1.number;\n        var gr2 = new GlideRecord('scan_result');\n        gr2.get(secondResult);\n        var result2 = gr2.number;\n        var payload = result1 + ',' + result2;\n        var comparisonType = new sn_vsc.SecurityCenterConstants().scan_comparison;\n        var status = poll.getProcessStatus(payload, comparisonType);\n        if (status == \"complete\") {\n            // Get comparison record\n            var grComp = new GlideRecord(\"sn_vsc_scan_comparisons\");\n            grComp.addQuery('scn_comp', payload);\n            grComp.query();\n            if (grComp.next()) {\n                sysId = grComp.sys_id.toString();\n            }\n            return sysId;\n        }\n\n        return status;\n    }\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"date1\",\n    \"label\": \"First Result Date\",\n    \"description\": \"First Result Date\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  },\n{\n    \"name\": \"date2\",\n    \"label\": \"Second Result Date\",\n    \"description\": \"Second Result Date\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_9ecb72d218c11110f877bf1085ef72b2","api_name":"sn_vsc.VSC Scan Comparison","mutates_server_data":"false","name":"VSC Scan Comparison","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Timestamp\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"timestamp\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-01-12 06:41:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9fdd08ca7720311085f8dbad6b5a9937","sys_updated_by":"admin","sys_created_on":"2023-08-10 10:57:18","sys_name":"Now Assist Summary Skill Status Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform() {\n    var res = new sn_nowassist_admin.NowAdminAssistUtil().getSkillStatus();\n    return res;\n\t\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"timestamp\",\n        \"label\": \"Timestamp\",\n        \"description\": \"timestamp\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": false,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_9fdd08ca7720311085f8dbad6b5a9937","api_name":"sn_nowassist_admin.Now Assist Summary Skill Status Transform","mutates_server_data":"false","name":"Now Assist Summary Skill Status Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Related List\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-26 11:39:13","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9fed3704b79a02102191bea0be11a9cb","sys_updated_by":"admin","sys_created_on":"2024-05-16 19:18:53","sys_name":"Problem Task Count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54a81ee10b11301039dd818393673a5c","value":"54a81ee10b11301039dd818393673a5c"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n\tif (!input.sysId || !input.relatedList)\n\t\treturn [];\n\n\tvar returnListData = [];\n\tfor (var i = 0; i < input.relatedList.length; i++) {\n\t\tvar tableData = input.relatedList[i];\n\t\tvar countGr = new GlideRecordSecure(tableData.relatedTable);\n\t\tcountGr.addEncodedQuery(tableData.fixedQuery);\n\t\tif (tableData.query)\n\t\t\tcountGr.addEncodedQuery(tableData.query);\n\n\t\tcountGr.query();\n\t\tif (countGr.next())\n\t\t\ttableData.count = countGr.getRowCount();\n\t\telse\n\t\t\ttableData.count = 0;\n\n\t\treturnListData.push(tableData);\n\t}\n\treturn returnListData;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"SysId\",\r\n  \"description\": \"Sys Id\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"relatedList\",\r\n  \"label\": \"Related List\",\r\n  \"description\": \"Related List\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54a81ee10b11301039dd818393673a5c","value":"54a81ee10b11301039dd818393673a5c"},"sys_update_name":"sys_ux_data_broker_transform_9fed3704b79a02102191bea0be11a9cb","api_name":"sn_sow_problem.Problem Task Count","mutates_server_data":"false","name":"Problem Task Count","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Parent Page\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Returns the Important Actions for a given dashboard and domain","sys_updated_on":"2021-08-12 12:57:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"9fef4402d43d3010f877680f9acc20e1","sys_updated_by":"admin","sys_created_on":"2021-08-07 05:40:29","sys_name":"Get Important Actions For Dashboard","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4d8039d0533130106b86ddeeff7b128b","value":"4d8039d0533130106b86ddeeff7b128b"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var parentPage = input.parentPage;\n    var resObj = new sn_itam_recomm.ImportantActionUtils().getImportantActionCardsMetadata(parentPage);\n    if (resObj.cards_metadata && resObj.cards_metadata.length > 0) {\n        for (var i = 0; i < resObj.cards_metadata.length; i++) {\n            if (gs.nil(resObj.cards_metadata[i].metaData2)) {\n                resObj.cards_metadata[i].hideMetaData2 = true;\n            }\n        }\n    }\n    return resObj;\n}","acl_failure_result":"","props":"[\n{\n  \"name\": \"parentPage\",\n  \"label\": \"Parent Page\",\n  \"fieldType\": \"string\",\n  \"mandatory\": true\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4d8039d0533130106b86ddeeff7b128b","value":"4d8039d0533130106b86ddeeff7b128b"},"sys_update_name":"sys_ux_data_broker_transform_9fef4402d43d3010f877680f9acc20e1","api_name":"sn_itam_recomm.Get Important Actions For Dashboard","mutates_server_data":"false","name":"Get Important Actions For Dashboard","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"App Config Data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Route Record Data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys_ux_app_config for current experience\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-01-23 15:41:59","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"a0f1ef18c3d10110a86b4fb9c840dde7","sys_updated_by":"admin","sys_created_on":"2022-01-23 10:15:43","sys_name":"Get Variables for Page Creation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n    var output = {\n        fields: [],\n        optional_parameters: [],\n        appConfigId: ''\n    };\n\n    if (input.routeData.length) {\n        var fields = input.routeData[0].fields.value;\n        var optionalParams = input.routeData[0].optional_parameters.value;\n        if (fields) {\n            fields.split(',').forEach(function(field) {\n                output.fields.push({\n                    name: field\n                });\n            });\n        }\n        if (optionalParams) {\n            optionalParams.split(',').forEach(function(optionalParam) {\n                output.optional_parameters.push({\n                    name: optionalParam\n                });\n            });\n        }\n    }\n\n    if (input.appConfigData.length) {\n        output.appConfigId = input.appConfigData[0].app_config.value;\n    }\n\n    return output;\n}","acl_failure_result":"","props":"[{\n\t\"name\": \"routeData\",\n\t\"label\": \"Route Record Data\",\n\t\"description\": \"Route Record Data\",\n\t\"readOnly\": false,\n\t\"fieldType\": \"object\",\n\t\"mandatory\": true,\n\t\"defaultValue\": \"\"\n}, {\n\t\"name\": \"appConfigData\",\n\t\"label\": \"App Config Data\",\n\t\"description\": \"sys_ux_app_config for current experience\",\n\t\"readOnly\": false,\n\t\"fieldType\": \"object\",\n\t\"mandatory\": false,\n\t\"defaultValue\": \"\"\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_a0f1ef18c3d10110a86b4fb9c840dde7","api_name":"sn_ace.Get Variables for Page Creation","mutates_server_data":"false","name":"Get Variables for Page Creation","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Studio app namespace\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2025-03-06 13:15:55","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"a1292dcff35a121000baad941484cac5","sys_updated_by":"admin","sys_created_on":"2024-12-10 12:30:23","sys_name":"Get user preferences","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8a841f2bc42f457e8809ea71d35e821f","value":"8a841f2bc42f457e8809ea71d35e821f"},"sys_created_by":"admin","sys_mod_count":"18","sys_tags":"","script":"function transform(input) {\n    let studioAppNamespace;\n\n    try {\n        // TODO: Remove the below code once DEF0589428 is fixed\n        const studioShellConfig = input?.studioAppNamespace ? JSON.parse(input.studioAppNamespace) : null;\n        studioAppNamespace = studioShellConfig?.studioAppNamespace;\n    } catch (error) {\n        gs.error(`Error parsing studioAppNamespace: ${error.message}`);\n        return {};\n    }\n\n    if (!studioAppNamespace) {\n        return {};\n    }\n\n    const user = gs.getUser();\n    const userSysId = user.getID();\n\n    const preferences = [{\n            name: 'scope.based.tab.grouping.enabled',\n            preferenceKey: `${studioAppNamespace}.scope.based.tab.grouping.enabled`,\n            defaultValue: null,\n        },\n        {\n            name: 'recentSearches',\n            preferenceKey: `${studioAppNamespace}.${userSysId}.recentSearches`,\n            defaultValue: [],\n            transformPreferenceValue: (key, value) => UDCUtil.removeOldRecentSearches(key, value)\n        },\n        {\n            name: 'themeVariant',\n            preferenceKey: 'glide.ui.udc.theme.variant',\n            defaultValue: null,\n        },\n        {\n            name: 'showFileParentCategories',\n            preferenceKey: `${studioAppNamespace}.${userSysId}.showFileParentCategories`,\n            defaultValue: true\n        }\n    ];\n\n    const userPreferences = preferences.reduce((acc, {\n        preferenceKey,\n        defaultValue,\n        transformPreferenceValue\n    }) => {\n        let preferenceValue = user.getPreference(preferenceKey); // Fetch the preference first\n\n        if (typeof transformPreferenceValue === 'function')\n            preferenceValue = transformPreferenceValue(preferenceKey, preferenceValue);\n\n        acc[preferenceKey] = preferenceValue != null ? preferenceValue : defaultValue;\n        return acc;\n    }, {});\n\n    return {\n        userPreferences\n    };\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"studioAppNamespace\",\r\n        \"label\": \"Studio app namespace\",\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8a841f2bc42f457e8809ea71d35e821f","value":"8a841f2bc42f457e8809ea71d35e821f"},"sys_update_name":"sys_ux_data_broker_transform_a1292dcff35a121000baad941484cac5","api_name":"sn_udc.Get user preferences","mutates_server_data":"false","name":"Get user preferences","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get unmapped custom application count","sys_updated_on":"2023-06-21 16:00:21","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"a302ffb943232110805a71f1cbb8f2fd","sys_updated_by":"admin","sys_created_on":"2023-06-21 16:00:21","sys_name":"Get unmapped custom application count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"/**\n * Data broker to get Get unmapped custom application count\n * @return {number} custom application count\n */\nfunction transform() {\n    var count = new GlideAggregate('ua_custom_table_inventory');\n    count.addEncodedQuery('app_nameISNOTEMPTY^table_refISNOTEMPTY^subscription_entitlementISEMPTY^table_ref.sys_scope!=global');\n    count.addAggregate('COUNT(DISTINCT', 'app_name');\n    count.query();\n\n    return count.getRowCount();\n\n}","acl_failure_result":"","props":"[]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_update_name":"sys_ux_data_broker_transform_a302ffb943232110805a71f1cbb8f2fd","api_name":"sn_sub_man.Get unmapped custom application count","mutates_server_data":"false","name":"Get unmapped custom application count","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Selected template Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Checks whether the user has access to edit a template","sys_updated_on":"2023-09-20 05:40:02","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"a45718400f231010e54d6b198b767e9d","sys_updated_by":"admin","sys_created_on":"2020-09-24 08:32:19","sys_name":"Check edit access on catalog template","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/e92e72c9b7021010e54deb56ee11a9bf","value":"e92e72c9b7021010e54deb56ee11a9bf"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\treturn new global.GlobalServiceCatalogUtil().canEditTemplate(input.templateId);\n}","acl_failure_result":"","props":"[{\r\n\t\t\t\"name\": \"templateId\",\r\n\t\t\t\"label\": \"Selected template Id\",\r\n\t\t\t\"description\": \"\",\r\n\t\t\t\"readOnly\": false,\r\n\t\t\t\"fieldType\": \"string\",\r\n\t\t\t\"mandatory\":false,\r\n\t\t\t\"defaultValue\":\"\"\r\n\t\t\t}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e92e72c9b7021010e54deb56ee11a9bf","value":"e92e72c9b7021010e54deb56ee11a9bf"},"sys_update_name":"sys_ux_data_broker_transform_a45718400f231010e54d6b198b767e9d","api_name":"sn_catalog_builder.Check edit access on catalog template","mutates_server_data":"false","name":"Check edit access on catalog template","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"name of class\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"MS get attributes","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"a4e8b95d7731111023651605bc5a990a","sys_updated_by":"admin","sys_created_on":"2022-09-06 21:44:40","sys_name":"MS get attributes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar table = input.table;\n\tif (!table) {\n\t\treturn null; //throw proper error\n\t}\n\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tvar results = util.getAndTransformColumns(table);\n\t\n\treturn results;\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"table\",\r\n  \"label\": \"table\",\r\n  \"description\": \"name of class\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"String\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_a4e8b95d7731111023651605bc5a990a","api_name":"sn_cmdb_ws.MS get attributes","mutates_server_data":"false","name":"MS get attributes","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-03-10 09:53:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"a504c070436de510cd5b8beeaab8f2ca","sys_updated_by":"admin","sys_created_on":"2023-03-10 09:52:35","sys_name":"SOW Remediate validate standard change model","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(inputs) {\n    var changeRemedialActionUtil = new sn_sow_inc.ChangeRemedialActionUtil();\n    return changeRemedialActionUtil.isChangeModelFavorable();\n}","acl_failure_result":"","props":"[]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_update_name":"sys_ux_data_broker_transform_a504c070436de510cd5b8beeaab8f2ca","api_name":"sn_sow_inc.SOW Remediate validate standard change model","mutates_server_data":"true","name":"SOW Remediate validate standard change model","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"SysID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysID of record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-17 14:27:26","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"a6314a3b9f4a0210d9e5328dda0a1c35","sys_updated_by":"admin","sys_created_on":"2024-05-15 15:35:20","sys_name":"PWD Reset Access Check","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n  return new sn_uib_pwd_reset.PwdResetUXFMainProcessor().canAccess(input.table, input.sysID);\n}\n","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"table\",\r\n        \"label\": \"Table\",\r\n        \"description\": \"Table\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    } ,{\r\n        \"name\": \"sysID\",\r\n        \"label\": \"SysID\",\r\n        \"description\": \"SysID of record\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_a6314a3b9f4a0210d9e5328dda0a1c35","api_name":"sn_uib_pwd_reset.PWD Reset Access Check","mutates_server_data":"false","name":"PWD Reset Access Check","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Payload of custom definition fields (definitionId, tableName, queryCondition, activeFlag).\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Retirement custom definition fields\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-21 03:22:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"a693e68353d1f110fdadddeeff7b12c7","sys_updated_by":"admin","sys_created_on":"2023-09-20 07:11:34","sys_name":"Data Manager Update Retirement Custom Definition","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFn = function() {\n\t\tvar payload = input.payload;\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n\t\tproxy.updateRetirementCustomDefinition(payload.definitionId, payload.tableName, payload.queryCondition, payload.activeFlag);\n\t};\n\n\treturn new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Update Retirement Custom Definition\", wrapperFn);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"payload\",\r\n    \"label\": \"Retirement custom definition fields\",\r\n    \"fieldType\": \"json\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Payload of custom definition fields (definitionId, tableName, queryCondition, activeFlag).\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_a693e68353d1f110fdadddeeff7b12c7","api_name":"sn_cmdb_ws.Data Manager Update Retirement Custom Definition","mutates_server_data":"true","name":"Data Manager Update Retirement Custom Definition","output_schema":"","sys_policy":""},{"private":"false","required_translations":"","batch_exclude":"false","description":"Get encoded query based on source and target table mappings to prefill fields on knowledge form","sys_updated_on":"2020-10-08 14:14:18","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"a896570d531710108ce6ddeeff7b127e","sys_updated_by":"admin","sys_created_on":"2020-09-15 15:05:16","sys_name":"Get encoded query to prefill knowledge form","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var query = '';\n    if (input.source && input.source != '' && input.target && input.target != '' && input.sourceId && input.sourceId != '') {\n        if (input.source == 'sn_customerservice_case') {\n            var gr = new GlideRecord(input.source);\n            gr.get(input.sourceId);\n            gr.query();\n            query += new global.KBAjax().getTableMappingAsQueryWithParams(input.source, input.sourceId, input.target, '', true);\n            query += '^short_description=' + gr.getValue('short_description') + '^source=' + input.sourceId;\n\n        } else\n            query += new global.KBAjax().getTableMappingAsQueryWithParams(input.source, input.sourceId, input.target, '', false);\n    }\n    if (input.knowledge_base && input.knowledge_base != '') {\n      if(query != '')\n        query += '^kb_knowledge_base=' + input.knowledge_base;\n      else\n        query += 'kb_knowledge_base=' + input.knowledge_base;\n      if(input.sourceId && input.sourceId != '')\n        query += '^source=' + input.sourceId;\n    }\n    return query;\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"source\",\n    \"label\": \"Source table\",\n    \"description\": \"Source table\",\n    \"readOnly\": false,\n    \"fieldType\": \"table_name\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"sourceId\",\n    \"label\": \"Source ID\",\n    \"description\": \"Source ID\",\n    \"readOnly\": false,\n    \"fieldType\": \"reference\",\n    \"valueType\": \"string\",\n    \"typeMetadata\": {\n      \"reference\": \"@source\"\n    },\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"target\",\n    \"label\": \"Target table\",\n    \"description\": \"Target table\",\n    \"readOnly\": false,\n    \"fieldType\": \"table_name\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"knowledge_base\",\n    \"label\": \"Knowledge base  ID\",\n    \"description\": \"Knowledge base  ID\",\n    \"readOnly\": false,\n    \"fieldType\": \"reference\",\n    \"valueType\": \"string\",\n    \"typeMetadata\": {\n      \"reference\": \"kb_knowledge_base\"\n    },\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  }\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_a896570d531710108ce6ddeeff7b127e","api_name":"sn_km_uib.Get encoded query to prefill knowledge form","mutates_server_data":"false","name":"Get encoded query to prefill knowledge form","output_schema":"[\n  {\n    \"name\": \"query\",\n    \"label\": \"Encoded query\",\n    \"description\": \"Encoded query\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\"\n  }\n]","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Multisource Get Query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SYS ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"a8e810c177f99110b9f7f350ff5a9912","sys_updated_by":"admin","sys_created_on":"2022-09-05 20:07:04","sys_name":"Multisource Get Query","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tvar sys_id = input.sys_id;\n\treturn util.getQuery(sys_id);\n}","acl_failure_result":"","props":"[\r\n    {\r\n      \"name\": \"sys_id\",\r\n      \"label\": \"SYS ID\",\r\n      \"description\": \"Multisource Get Query\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false\r\n    }\r\n ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_a8e810c177f99110b9f7f350ff5a9912","api_name":"sn_cmdb_ws.Multisource Get Query","mutates_server_data":"true","name":"Multisource Get Query","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Base Article ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Replacement Article ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This data broker retires the knowledge article and replaces it with another article if provided.","sys_updated_on":"2022-04-25 08:20:43","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"a9d81e41c3030110c92609c77d40dd50","sys_updated_by":"admin","sys_created_on":"2022-04-22 12:34:14","sys_name":"Retire Knowledge","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var retireKnowledge = function(articleId) {\n        var kbKnowledge = new global.KBKnowledge();\n        kbKnowledge.retireKnowledgeById(articleId);\n    };\n\n    var retireKnowledgeWithReplacement = function(baseArticleId, replacementArticleId) {\n        var kbKnowledge = new global.KBKnowledge();\n        kbKnowledge.retireKnowledgeWithReplacementByIds(baseArticleId, replacementArticleId);\n    };\n\n    gs.nil(input.replacementArticleId) ? retireKnowledge(input.baseArticleId) : retireKnowledgeWithReplacement(input.baseArticleId, input.replacementArticleId);\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"baseArticleId\",\r\n  \"label\": \"Base Article ID\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"replacementArticleId\",\r\n  \"label\": \"Replacement Article ID\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_a9d81e41c3030110c92609c77d40dd50","api_name":"sn_km_uib.Retire Knowledge","mutates_server_data":"true","name":"Retire Knowledge","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-11 06:55:22","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"aa5144d0531531108f2bddeeff7b12ff","sys_updated_by":"admin","sys_created_on":"2023-09-11 06:55:22","sys_name":"[SOW] Get Record Page Tabs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c72e8e76c1fcf010f877e1de0b6be358","value":"c72e8e76c1fcf010f877e1de0b6be358"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\treturn new sn_sow_record.SOWRecordTabUtil().getHorizontalTabsInfo();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c72e8e76c1fcf010f877e1de0b6be358","value":"c72e8e76c1fcf010f877e1de0b6be358"},"sys_update_name":"sys_ux_data_broker_transform_aa5144d0531531108f2bddeeff7b12ff","api_name":"sn_sow_record.[SOW] Get Record Page Tabs","mutates_server_data":"false","name":"[SOW] Get Record Page Tabs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Library Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"libraryDescription\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Create de-duplication template library","sys_updated_on":"2023-09-21 00:47:25","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"aaf4b01493c1b110f769fa6074891825","sys_updated_by":"admin","sys_created_on":"2023-08-29 23:56:27","sys_name":"De-Duplication Library Create","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar libraryName = input.libraryName;\n\tvar libraryDescription = input.libraryDescription;\n    var util = new sn_cmdb_ws.DedupeTemplateLibraryUtil();\n\tresult = util.createLibrary(libraryName, libraryDescription);\n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"libraryName\",\r\n      \"label\": \"Library Name\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n{\r\n      \"name\": \"libraryDescription\",\r\n      \"label\": \"libraryDescription\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"false\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_aaf4b01493c1b110f769fa6074891825","api_name":"sn_cmdb_ws.De-Duplication Library Create","mutates_server_data":"true","name":"De-Duplication Library Create","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get policy event type to show all the trigger/events while creating a new policy","sys_updated_on":"2024-06-14 23:30:53","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ab8103d3933582103c67134732891875","sys_updated_by":"maint","sys_created_on":"2024-05-01 21:14:00","sys_name":"Get Policy Event Type","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var events = [];\n    var gr = new GlideRecord(\"sn_vsc_security_policy_event_type\");\n    gr.query();\n    while (gr.next()) {\n\tevents.push({\n\t\t\"id\": gr.getValue('sys_id').toString(),\n\t\t\"name\": gr.getDisplayValue(\"name\"),\n\t\t\"description\": gr.getDisplayValue(\"description\")\n\t});\n    }\n    return events;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_ab8103d3933582103c67134732891875","api_name":"sn_vsc.Get Policy Event Type","mutates_server_data":"false","name":"Get Policy Event Type","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Comma separated list of sys ids. If left empty then all stuck jobs in sys_trigger will be deleted.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Ids\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Deletes stuck scheduled jobs from sys_trigger","sys_updated_on":"2024-05-31 16:48:26","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"acdc2b6043e6421073e946c8dbb8f2b3","sys_updated_by":"admin","sys_created_on":"2024-05-30 17:38:05","sys_name":"Delete Stuck Scheduled Jobs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/74fdcd7a437121109fa864cec7b8f27b","value":"74fdcd7a437121109fa864cec7b8f27b"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    try {\n\t\tvar utils = new AsyncDashboardUtils();\n        var sysIdsInput = input.sys_ids;\n\n        if (sysIdsInput == \"\") {\n            var sysIds = [];\n\n            var stuckJobs = utils.getStuckJobs();\n\n            while (stuckJobs.next()) {\n                sysIds.push(stuckJobs.getUniqueValue());\n            }\n\n            sysIds.forEach(function(sys_id) {\n                utils.deleteRecord(sys_id);\n            });\n        } else {\n            var sysIdsInputArr = sysIdsInput.split(\",\");\n            sysIdsInputArr.forEach(function(sys_id) {\n                utils.deleteRecord(sys_id);\n            });\n        }\n    } catch (ex) {\n        gs.error(\"Error deleting stuck scheduled jobs: \" + ex);\n    }\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"sys_ids\",\r\n      \"label\": \"Sys Ids\",\r\n      \"description\": \"Comma separated list of sys ids. If left empty then all stuck jobs in sys_trigger will be deleted.\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/74fdcd7a437121109fa864cec7b8f27b","value":"74fdcd7a437121109fa864cec7b8f27b"},"sys_update_name":"sys_ux_data_broker_transform_acdc2b6043e6421073e946c8dbb8f2b3","api_name":"sn_async_dashboard.Delete Stuck Scheduled Jobs","mutates_server_data":"true","name":"Delete Stuck Scheduled Jobs","output_schema":"","sys_policy":""},{"private":"true","required_translations":"","batch_exclude":"false","description":"Splits the comma separated version string to an output obj for Version Data GraphQL","sys_updated_on":"2020-07-22 10:10:19","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"acdd38212d061010f877da264b7037bf","sys_updated_by":"admin","sys_created_on":"2020-07-16 13:37:23","sys_name":"Split article version sysids","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var outputResultObj = {};\n    if (!gs.nil(input.versions)) {\n        var outputResultArray = input.versions.split(',');\n        if (!gs.nil(outputResultArray) && outputResultArray.length == 2) {\n            outputResultObj = {\n                \"firstVersion\": outputResultArray[0],\n                \"secondVersion\": outputResultArray[1]\n            };\n        }\n    }\n    return outputResultObj;\n}","acl_failure_result":"","props":" [ \n{\n        \"name\": \"versions\",\n        \"label\": \"Versions\",\n        \"description\": \"\",\n        \"readOnly\": false,\n        \"fieldType\": \"object\",\n        \"mandatory\": false,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_acdd38212d061010f877da264b7037bf","api_name":"sn_km_uib.Split article version sysids","mutates_server_data":"false","name":"Split article version sysids","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Task ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task ID of the non-lifecycle task (Attestation or Certification)\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Assigns the task to the current user performing the action and moves it to WIP if necessary","sys_updated_on":"2024-01-10 20:08:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ad04686feb110110e13ab007385228ba","sys_updated_by":"admin","sys_created_on":"2022-02-01 22:39:45","sys_name":"Review non-lifecycle task action","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n\tvar taskId = input.taskId;\n\tvar gr = new GlideRecord('cmdb_data_management_task');\n\tif (gr.get(taskId)) {\n\t\tvar hasChange = false;\n\t\tif (gr.getValue('assigned_to') === null) {\n\t\t\tgr.setValue('assigned_to', gs.getUserID()); // set task to current logged in user\n\t\t\thasChange = true;\n\t\t}\n\t\tvar state = gr.getValue('state');\n\t\tif (state == '1' || state == '-5') { // Pending or open state\n\t\t\tgr.setValue('state', '2'); // Work in progress\n\t\t\thasChange = true;\n\t\t}\n\t\tif (hasChange) {\n\t\t\tgr.update();\n\t\t}\n\t}\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"taskId\",\r\n  \"label\": \"Task ID\",\r\n  \"description\": \"Task ID of the non-lifecycle task (Attestation or Certification)\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}]\r\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_ad04686feb110110e13ab007385228ba","api_name":"sn_cmdb_ws.Review non-lifecycle task action","mutates_server_data":"false","name":"Review non-lifecycle task action","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"token\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"verificationId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-04 10:19:12","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ad0e8c1a9351021086ac849c548918ee","sys_updated_by":"admin","sys_created_on":"2024-04-03 08:36:13","sys_name":"Get Personal Data Confirmation Verification Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\treturn new sn_uib_pwd_reset.PwdResetCommonUXFVerificationProcessor().getPersonalConfirmationVerificationDetails(input.verificationId, input.token);\n}","acl_failure_result":"","props":"[{\r\n      \"name\": \"token\",\r\n      \"label\": \"token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n{\r\n      \"name\": \"verificationId\",\r\n      \"label\": \"verificationId\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_ad0e8c1a9351021086ac849c548918ee","api_name":"sn_uib_pwd_reset.Get Personal Data Confirmation Verification Details","mutates_server_data":"false","name":"Get Personal Data Confirmation Verification Details","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Best practice Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys_id of the best practice\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Mark best practice as in-progress ","sys_updated_on":"2024-01-29 02:37:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ad2a04915380021053a6ddeeff7b1254","sys_updated_by":"maint","sys_created_on":"2024-01-29 02:27:01","sys_name":"SC Reopen Best Practice","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transfor(input) {\n    var res = \"\";\n    var gr = new GlideRecord('sn_vsc_best_practice_configurations');\n    var recId = input.bp_id;\n    if (gr.get(recId)) {\n        gr.setValue('status', \"in_progress\");\n        var isUpdated = gr.update();\n        if (isUpdated != null) {\n            res = 'success';\n        } else {\n            res = 'fail';\n        }\n    }\n    return res;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"bp_id\",\r\n        \"label\": \"Best practice Id\",\r\n        \"description\": \"Sys_id of the best practice\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_ad2a04915380021053a6ddeeff7b1254","api_name":"sn_vsc.SC Reopen Best Practice","mutates_server_data":"false","name":"SC Reopen Best Practice","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Check if the agent chat configuration for any of the the NAVA assistants have their public flag as true","sys_updated_on":"2024-10-15 17:55:00","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ad766754c5a24e10f877bd6ed319e971","sys_updated_by":"admin","sys_created_on":"2024-05-29 22:30:59","sys_name":"Check if any assistants are public","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"13","sys_tags":"","script":"function transform() {\n\tvar result = {};\n\tvar publicAgentSysIds = Object.keys(new sn_oe_sfs.CIUtil().getPublicAccessListData().name);\n\tresult[\"genaiInstalled\"] = GlidePluginManager.isActive(\"com.glide.cs.genai\");\n\tresult[\"publicActive\"] = publicAgentSysIds.length > 0;\n\tresult[\"publicAgentSysIds\"] = publicAgentSysIds;\n\treturn result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_ad766754c5a24e10f877bd6ed319e971","api_name":"sn_oe_sfs.Check if any assistants are public","mutates_server_data":"false","name":"Check if any assistants are public","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"skill Config Object\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-27 09:52:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ada17aab93050210aa5730f1648918d3","sys_updated_by":"admin","sys_created_on":"2024-03-26 07:30:13","sys_name":"Transform skill config data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"function transform(input) {\n\tskillConfigObj = JSON.parse(input.skillConfigObj);\n    var extensions = new GlideScriptedExtensionPoint().getExtensions(\"sn_nowassist_admin.NowAssistAdminExtUtil\");\n    if (extensions && extensions.length > 0) {\n        for (var i = 0; i < extensions.length; i++) {\n            var extension = extensions[i];\n            if (extension.hasMatchingCondition(skillConfigObj)) {\n                return extension.getReviewPayload(skillConfigObj, input.payload);\n            }\n        }\n    }\n    //default implementation\n    var util = new sn_nowassist_admin.NowAdminAssistUtil();\n    return util.getReviewPayload(skillConfigObj, input.payload);\n}","acl_failure_result":"","props":"[\r\n {\r\n    \"name\": \"skillConfigObj\",\r\n    \"label\": \"skill Config Object\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\",\r\n    \"description\": \"skill Config Object\"\r\n  },\r\n  {\r\n    \"name\": \"payload\",\r\n    \"label\": \"Payload\",\r\n    \"fieldType\": \"json\",\r\n    \"valueType\": \"object\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"{}\",\r\n    \"description\": \"Payload\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_ada17aab93050210aa5730f1648918d3","api_name":"sn_nowassist_admin.Transform skill config data","mutates_server_data":"false","name":"Transform skill config data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Group\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId of the group\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-11 16:07:35","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ada76a6df54f3510f877baa9bf82b43a","sys_updated_by":"admin","sys_created_on":"2023-12-11 15:30:56","sys_name":"Get First Day of Week","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var ocCalUtils = new global.OCCalendarUtils();\n    var startDayOfWeek = 1;\n\n    if (ocCalUtils && ocCalUtils.getGroupFirstDayOfWeek && input.group)\n        startDayOfWeek = ocCalUtils.getGroupFirstDayOfWeek(input.group + \"\");\n    else if (ocCalUtils && ocCalUtils.getSystemFirstDayOfWeek)\n        startDayOfWeek = ocCalUtils.getSystemFirstDayOfWeek();\n\n    return parseInt(startDayOfWeek) - 1;\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"group\",\n    \"label\": \"Group\",\n    \"description\": \"sysId of the group\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_ada76a6df54f3510f877baa9bf82b43a","api_name":"sn_uib_on_call.Get First Day of Week","mutates_server_data":"false","name":"Get First Day of Week","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Selected Suite\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Suite\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get suite name from suite id","sys_updated_on":"2022-11-16 01:26:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ada94b77340b5110f877339ba5f48b06","sys_updated_by":"maint","sys_created_on":"2022-11-16 01:23:54","sys_name":"SC Get Suite Label","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var suiteName = \"\";\n    var gr = new GlideAggregate('scan_check_suite');\n    gr.addQuery(\"sys_id\", input.suite);\n    gr.query();\n    if (gr.next()) {\n        suiteName = gr.name.getDisplayValue().toString();\n    }\n\treturn suiteName;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"suite\",\n    \"label\": \"Suite\",\n    \"description\": \"Selected Suite\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_ada94b77340b5110f877339ba5f48b06","api_name":"sn_vsc.SC Get Suite Label","mutates_server_data":"false","name":"SC Get Suite Label","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Property Value\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Enable/Disable Dynamic Translation by updating property sn_generative_ai.disable_dynamic_translation","sys_updated_on":"2024-05-17 07:13:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ae136f639fca0210f0b32e5af90a1c1f","sys_updated_by":"admin","sys_created_on":"2024-05-15 04:09:35","sys_name":"Enable Disable Dynamic Translation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"27","sys_tags":"","script":"function transform(input) {\n    var value = input.prop_value;\n    if (gs.nil(value))\n        return;\n\n    try {\n        var util = new sn_generative_ai.GenAIDynamicTranslationUtil();\n        var result = util.updateInstanceLevelDTSwitch(value);\n\t\t    return result;\n    } catch (error) {\n        gs.error(\"Failed to enable/disable dynamic translation\" + error);\n\t\t    return error.toString();\n    }\n}","acl_failure_result":"","props":"[\n{\n      \"name\": \"prop_value\",\n      \"label\": \"Property Value\",\n      \"description\": \"Property Value\",\n      \"readOnly\": false,\n      \"fieldType\": \"boolean\",\n      \"mandatory\": true,\n      \"defaultValue\": false\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_ae136f639fca0210f0b32e5af90a1c1f","api_name":"sn_nowassist_admin.Enable Disable Dynamic Translation","mutates_server_data":"true","name":"Enable Disable Dynamic Translation","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Caller Details\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Edited Response\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Is Response Edited\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Log Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-06 11:50:44","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ae1f77dd53093110c690ddeeff7b123a","sys_updated_by":"admin","sys_created_on":"2023-09-02 17:07:07","sys_name":"Send feedback to GenAI","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    var constants = {\n        NOW_ASSIST_ITSM_PLUGIN: 'com.sn.itsm.gen.ai'\n    };\n    if (GlidePluginManager.isActive(constants.NOW_ASSIST_ITSM_PLUGIN))\n        new sn_itsm_gen_ai.NowAssistItsmGenAIUtils().sendFeedback(input.logId, input.isResponseEdited, input.editedResponse, input.callerDetails);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"logId\",\r\n    \"label\": \"Log Id\",\r\n    \"description\": \"Log Id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"isResponseEdited\",\r\n    \"label\": \"Is Response Edited\",\r\n    \"description\": \"Is Response Edited\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"editedResponse\",\r\n    \"label\": \"Edited Response\",\r\n    \"description\": \"Edited Response\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"callerDetails\",\r\n    \"label\": \"Caller Details\",\r\n    \"description\": \"Caller Details\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_ae1f77dd53093110c690ddeeff7b123a","api_name":"sn_sow_itsm_common.Send feedback to GenAI","mutates_server_data":"true","name":"Send feedback to GenAI","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"array of edges\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"edgeList\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get extended connection properties for service mapping  CIs","sys_updated_on":"2024-02-22 23:35:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ae833b07ffa53110f563bb63aad33e9e","sys_updated_by":"admin","sys_created_on":"2023-10-03 01:10:45","sys_name":"CMDB unified map get SM connection props","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"// returns array of edges with associate connection properties\nfunction transform(input) {\n\tvar result = {\n\t\terrors: [],\n\t\tedgePropsList: []\n\t};\n\t\n\ttry {\n\t\tvar edgeList = input.edgeList;\n\t\tif (!edgeList.edges || edgeList.edges.length === 0) {\n\t\t\tresult.errors.push('edges is missing');\n\t\t}\n\t\t\n\t\tif (!result.errors.length) {\n\t\t\tvar response = new UnifiedMapHelper().getSMConnectionDetails(edgeList);\n\t\t\tif (response.success) {\n\t\t\t\tresult.edgePropsList = response.result;\n\t\t\t} else {\n\t\t\t\tresult.errors.push(response.error.message);\n\t\t\t}\n\t\t}\n\t\t\n\t} catch (error) {\n\t\tresult.errors.push(error.toString());\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"edgeList\",\r\n    \"label\": \"edgeList\",\r\n    \"description\": \"array of edges\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"Array\",\r\n    \"mandatory\": true\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_ae833b07ffa53110f563bb63aad33e9e","api_name":"sn_cmdb_ws.CMDB unified map get SM connection props","mutates_server_data":"false","name":"CMDB unified map get SM connection props","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"This is used to get all PA job log completed date time.","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"af338ad5b7312110b87e80408e11a92f","sys_updated_by":"admin","sys_created_on":"2023-03-24 18:49:57","sys_name":"Get PA job log completed info","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.CMDBWorkspaceUtil();\n\treturn util.getCMDBWsPAJobsLastCompletedInfo();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_af338ad5b7312110b87e80408e11a92f","api_name":"sn_cmdb_ws.Get PA job log completed info","mutates_server_data":"false","name":"Get PA job log completed info","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Adj End Date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Adj Start Date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Payment\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Rate\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Rate Details\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Type\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Adjusts the date and amount of a Contract","sys_updated_on":"2022-03-09 08:07:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"afe88c1a68064110fa9bed826ab680ce","sys_updated_by":"admin","sys_created_on":"2022-03-07 07:02:25","sys_name":"Contract Adjustment","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n    var adjStart = '';\n    var adjEnd = '';\n    var gd = new GlideDate();\n    if (!gs.nil(input.adjStartDate)) {\n        gd.setDisplayValue(input.adjStartDate);\n        adjStart = gd.getValue();\n    }\n    if (!gs.nil(input.adjEndDate)) {\n        gd.setDisplayValue(input.adjEndDate);\n        adjEnd = gd.getValue();\n    }\n    var contractGq = new GlideRecord(\"ast_contract\");\n    contractGq.get(input.sysId);\n    contractGq.starts = adjStart;\n    contractGq.ends = adjEnd;\n    contractGq.payment_amount = input.adjAmount;\n    contractGq.update();\n\t\n\tif(input.rate){\n\t\tvar rateDetails = input.rateDetails;\n\t\tvar prop = Object.getOwnPropertyNames(rateDetails);\n\t\tvar length = prop.length;\n\t\tfor(var i = 0; i < length; i++){\n\t\t\tvar data = rateDetails[prop[i]];\n\t\t\tvar record = new GlideRecord(\"fm_contract_rate_card\");\n\t\t\trecord.get(prop[i]);\n\t\t\trecord.name = data.name;\n\t\t\trecord.base_cost = data.base_cost;\n\t\t\trecord.start_date = data.start_date;\n\t\t\trecord.end_date = data.end_date;\n\t\t\trecord.update();\n\t\t}\n\t}\t\n    return;\n}","acl_failure_result":"","props":"[\r\n      {\r\n       \"name\": \"type\",\r\n        \"label\": \"Type\",\r\n         \"fieldType\": \"string\",\r\n         \"mandatory\":true\r\n       },\r\n\t{\r\n\t  \"name\": \"sysId\",\r\n\t  \"label\": \"Sys ID\",\r\n\t  \"fieldType\": \"string\",\r\n\t  \"mandatory\": true\r\n\t},\r\n         {\r\n\t  \"name\": \"adjAmount\",\r\n\t  \"label\": \"Payment\",\r\n\t  \"fieldType\": \"string\",\r\n\t  \"mandatory\": true\r\n\t},\r\n\t{\r\n\t\t\"name\": \"adjStartDate\",\r\n\t\t\"label\": \"Adj Start Date\",\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true\r\n\t},\r\n\t{\r\n\t\t\"name\": \"adjEndDate\",\r\n\t\t\"label\": \"Adj End Date\",\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true\r\n\t},\r\n        {\r\n\t\t\"name\": \"rateDetails\",\r\n\t\t\"label\": \"Rate Details\",\r\n\t\t\"fieldType\": \"string\"\r\n\t},\r\n        {\r\n\t\t\"name\": \"rate\",\r\n\t\t\"label\": \"Rate\",\r\n\t\t\"fieldType\": \"string\"\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_afe88c1a68064110fa9bed826ab680ce","api_name":"sn_itam_workspace.Contract Adjustment","mutates_server_data":"true","name":"Contract Adjustment","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2022-02-25 07:01:18","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b09aa0fda3b1011021fd885716fcda14","sys_updated_by":"admin","sys_created_on":"2022-02-21 09:08:55","sys_name":"Contract renewal details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"function transform() {\n    var assetWSUtils = new sn_itam_workspace.AssetWorkspaceUtil();\n    var adjTyperesults = assetWSUtils.getRenwalCostAdjustmentTypes();\n    var renewOptions = assetWSUtils.getRenewOptions();\n    var details = {\n        adjTypes: adjTyperesults,\n        options: renewOptions,\n    };\n    return details;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_b09aa0fda3b1011021fd885716fcda14","api_name":"sn_itam_workspace.Contract renewal details","mutates_server_data":"false","name":"Contract renewal details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table to look up\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"True up the table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-09-17 04:45:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b09c0b47c362301021f5e81aa840dda5","sys_updated_by":"admin","sys_created_on":"2021-09-17 04:45:11","sys_name":"Table Access Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar output = {};\n\tvar table = input.table;\n\tvar sysId = input.sysId;\n\tif(table) {\n\t\tvar grObj = new GlideRecord(table);\n\t\tif(sysId) {\n\t\t\tgrObj.get(sysId);\n\t\t}\n\t\toutput.canRead = grObj.canRead();\n\t\toutput.canWrite = grObj.canWrite();\n\t\toutput.canCreate = grObj.canCreate();\n\t\toutput.canDelete = grObj.canDelete();\n\t}\n\treturn output;\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t\t\"name\": \"table\",\r\n\t\t\"label\": \"Table\",\r\n\t\t\"description\": \"Table to look up\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"table_name\",\r\n\t\t\"mandatory\": true\r\n\t},\r\n\t{\r\n\t\t\"name\": \"sysId\",\r\n\t\t\"label\": \"Sys Id\",\r\n\t\t\"description\": \"True up the table\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": false\r\n\t} \r\n] ","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_b09c0b47c362301021f5e81aa840dda5","api_name":"sn_itam_workspace.Table Access Transform","mutates_server_data":"false","name":"Table Access Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Activity State\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Advanced Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Associated Record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Associated Record Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Associated Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Experience Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Experience Properties from the Activity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Lane Context\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Parent Record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Parent Record Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Parent Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Playbook Context\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Playbook Experience Playbook Card Declarative Model","sys_updated_on":"2021-10-04 20:12:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b0ac34330716301051ff3342cfd300ff","sys_updated_by":"admin","sys_created_on":"2021-09-06 15:56:35","sys_name":"Playbook Experience Playbook Card Declarative Model","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n\tvar advanced = input.advanced || {};\n\n\tvar declarativeModel = {};\n\tif (\n\t\tinput.activityState &&\n\t\tadvanced.activityType &&\n\t\tinput.laneContext &&\n\t\tinput.laneContext.state\n\t) {\n\t\tdeclarativeModel = {\n\t\t\tstate: advanced.inUIBuilder ? input.activityState : input.activityState.value,\n\t\t\ttype: advanced.activityType.value,\n\t\t\tsysId: input.associatedRecord,\n\t\t\ttable: input.associatedTable,\n\t\t\tparentTable: input.parentTable,\n\t\t\tparentSysId: input.parentRecord,\n\t\t\tcontextId: advanced.contextId,\n\t\t\tstage_name: input.laneContext.name,\n\t\t\tstage_title: input.laneContext.title,\n\t\t\tstage_status: input.laneContext.state.value,\n\t\t\tstage_order: input.laneContext.order,\n\t\t\tplaybook_status:\n\t\t\t\tinput.playbookContext && input.playbookContext.state,\n\t\t\tplaybook_context_id:\n\t\t\t\tinput.playbookContext && input.playbookContext.contextId,\n\t\t\tmodel_id: \"ca57d12e730333004a905ee515f6a7b2\",\n\t\t};\n\n\t\tadvanced.authorizedActions.forEach(function(action) {\n\t\t\tif (typeof action === \"string\")\n\t\t\t\tdeclarativeModel[\"can_\" + action] = true;\n\t\t});\n\n\t\tfor (var key in input.experienceProperties) {\n\t\t\tvar value = input.experienceProperties[key].value;\n\t\t\t// special handling for list type activity type\n\t\t\tif (\n\t\t\t\tadvanced.activityType.value ===\n\t\t\t\t\t\"fdbeceb95b61001070e4492c11f91a28\" &&\n\t\t\t\tkey === \"table\"\n\t\t\t)\n\t\t\t\tkey = \"list_table\";\n\n\t\t\tdeclarativeModel[key] = value;\n\t\t}\n\t}\n\n\treturn declarativeModel;\n}\n","acl_failure_result":"","props":"[\n\t{\n\t\t\"name\": \"associatedTable\",\n\t\t\"label\": \"Associated Table\",\n\t\t\"description\": \"Associated Record Table\",\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"associatedRecord\",\n\t\t\"label\": \"Associated Record\",\n\t\t\"description\": \"Associated Record\",\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"parentTable\",\n\t\t\"label\": \"Parent Table\",\n\t\t\"description\": \"Parent Record Table\",\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"parentRecord\",\n\t\t\"label\": \"Parent Record\",\n\t\t\"description\": \"Parent Record\",\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"activityState\",\n\t\t\"label\": \"Activity State\",\n\t\t\"description\": \"Activity State\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"json\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"laneContext\",\n\t\t\"label\": \"Lane Context\",\n\t\t\"description\": \"Lane Context\",\n\t\t\"fieldType\": \"json\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"playbookContext\",\n\t\t\"label\": \"Playbook Context\",\n\t\t\"description\": \"Playbook Context\",\n\t\t\"fieldType\": \"json\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"experienceProperties\",\n\t\t\"label\": \"Experience Properties\",\n\t\t\"description\": \"Experience Properties from the Activity\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"json\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"advanced\",\n\t\t\"label\": \"Advanced Properties\",\n\t\t\"description\": \"Advanced Properties\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"json\",\n\t\t\"mandatory\": true\n\t}\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_update_name":"sys_ux_data_broker_transform_b0ac34330716301051ff3342cfd300ff","api_name":"sn_playbook_exp.Playbook Experience Playbook Card Declarative Model","mutates_server_data":"false","name":"Playbook Experience Playbook Card Declarative Model","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template Sys IDs\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-08-01 19:16:09","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b0b20991731031103f3cc3ed8ff6a776","sys_updated_by":"admin","sys_created_on":"2023-07-26 20:39:33","sys_name":"De-Duplication Template Run","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var result = {};\n    var templateIds = input.templateSysIds;\n    if (templateIds.length == 0) {\n        return result;\n    }\n    for (var i = 0; i < templateIds.length; i++) {\n        var templateId = templateIds[i];\n        result = sn_cmdb.DuplicateTemplate.runTemplate(templateId);\n    }\n    return result;\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysIds\",\r\n      \"label\": \"Template Sys IDs\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"array\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_b0b20991731031103f3cc3ed8ff6a776","api_name":"sn_cmdb_ws.De-Duplication Template Run","mutates_server_data":"true","name":"De-Duplication Template Run","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Record sysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get checklist data","sys_updated_on":"2023-11-06 05:00:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b0d2a0d543d631106049228caab8f262","sys_updated_by":"admin","sys_created_on":"2023-11-03 04:23:55","sys_name":"Get Checklist","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\n    var output = new sn_sow.ChecklistUtils().getCheckList(input.sysId);\n\n    return output;\n\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"sysId\",\r\n    \"label\": \"Sys Id\",\r\n    \"description\": \"Record sysId\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sys_ux_data_broker_transform_b0d2a0d543d631106049228caab8f262","api_name":"sn_sow.Get Checklist","mutates_server_data":"false","name":"Get Checklist","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"array of tables\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"tables\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b15098b353172110c176ddeeff7b1275","sys_updated_by":"admin","sys_created_on":"2023-06-14 18:19:57","sys_name":"Multisource get fields","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\t\n\tvar tables = input.tables;\n\tif (!tables) {\n\t\treturn null; //throw proper error \n\t}\n\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tvar results = util.getAndTransformColumnsForTables(tables);\n\t\n\treturn results;\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"tables\",\r\n  \"label\": \"tables\",\r\n  \"description\": \"array of tables\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"Array\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_b15098b353172110c176ddeeff7b1275","api_name":"sn_cmdb_ws.Multisource get fields","mutates_server_data":"false","name":"Multisource get fields","output_schema":"","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"Perform this search as a semantic search\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Set Semantic Search\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Converts \"setSemanticSearch\" input value to boolean if string type is found","sys_updated_on":"2023-08-01 20:54:29","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b171d521431431103444f03a5ab8f29f","sys_updated_by":"admin","sys_created_on":"2023-07-27 16:19:02","sys_name":"Transform set semantic search input data to boolean","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var setSemanticSearchBooleanValue = input.setSemanticSearch;\n    if (typeof setSemanticSearchBooleanValue === 'string') {\n        return setSemanticSearchBooleanValue.trim().toLowerCase() === 'true';\n    }\n    return setSemanticSearchBooleanValue ;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"setSemanticSearch\",\r\n        \"label\": \"Set Semantic Search\",\r\n        \"description\": \"Perform this search as a semantic search\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": false\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_b171d521431431103444f03a5ab8f29f","api_name":"global.Transform set semantic search input data to boolean","mutates_server_data":"false","name":"Transform set semantic search input data to boolean","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Search term for device table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search term for group table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search term for user table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"String to filter cmn_notif_device records by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"String to filter sys_user records by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"String to filter sys_user_group records by\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-07-23 16:16:22","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b236ee145336b110ad0fddeeff7b12b7","sys_updated_by":"admin","sys_created_on":"2023-11-25 08:06:11","sys_name":"Get users, groups and devices","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n    var res = {};\n    var users = [];\n    var groups = [];\n    var devices = [];\n\n    var audienceOptions = new sn_uib_on_call.OnCallEscalationPolicyUIBUtils().getAudienceOptions();\n    var userOptions = audienceOptions.users;\n    var groupOptions = audienceOptions.groups;\n    var deviceOptions = audienceOptions.devices;\n\n    if (userOptions.hide || userOptions.disable)\n        users = [];\n    else {\n        var userGr = new GlideRecord('sys_user');\n        if (input.userSearchTerm) userGr.addEncodedQuery('nameLIKE' + input.userSearchTerm);\n        userGr.addActiveQuery();\n        userGr.setLimit(25);\n        userGr.orderBy('name');\n        userGr.query();\n        while (userGr.next()) {\n            users.push({\n                \"id\": userGr.getValue('sys_id'),\n                \"label\": userGr.getValue('name')\n            });\n        }\n    }\n\n    if (groupOptions.hide || groupOptions.disable)\n        groups = [];\n    else {\n        var groupGr = new GlideRecord('sys_user_group');\n        if (input.groupSearchTerm) groupGr.addEncodedQuery('nameLIKE' + input.groupSearchTerm);\n        groupGr.addActiveQuery();\n        groupGr.setLimit(25);\n        groupGr.orderBy('name');\n        groupGr.query();\n        while (groupGr.next()) {\n            groups.push({\n                \"id\": groupGr.getValue('sys_id'),\n                \"label\": groupGr.getValue('name')\n            });\n        }\n    }\n\n    if (deviceOptions.hide || deviceOptions.disable)\n        devices = [];\n    else {\n        var deviceGr = new GlideRecord('cmn_notif_device');\n        if (input.deviceSearchTerm) deviceGr.addEncodedQuery('nameLIKE' + input.deviceSearchTerm);\n        deviceGr.addActiveQuery();\n        deviceGr.setLimit(25);\n        deviceGr.orderBy('name');\n        deviceGr.query();\n        while (deviceGr.next()) {\n            devices.push({\n                \"id\": deviceGr.getValue('sys_id'),\n                \"label\": deviceGr.getValue('name')\n            });\n        }\n    }\n\n    res.users = users;\n    res.groups = groups;\n    res.devices = devices;\n    res.options = audienceOptions;\n    return res;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"userSearchTerm\",\r\n  \"label\": \"Search term for user table\",\r\n  \"description\": \"String to filter sys_user records by\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"groupSearchTerm\",\r\n  \"label\": \"Search term for group table\",\r\n  \"description\": \"String to filter sys_user_group records by\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"deviceSearchTerm\",\r\n  \"label\": \"Search term for device table\",\r\n  \"description\": \"String to filter cmn_notif_device records by\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_b236ee145336b110ad0fddeeff7b12b7","api_name":"sn_uib_on_call.Get users, groups and devices","mutates_server_data":"false","name":"Get users, groups and devices","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Metrics\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Predefined list of values to be written to the log. These needs to be a match or be a subset of the canned list of values the table is managing.\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Capture performance metrics by writing them to the system logs (goes out to splunk) and also to a cmdb table. The table allows for updates (vs just inserts) when the same dataset comes in from lagging async calls that slow down page load.","sys_updated_on":"2024-01-31 23:56:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b2a819f177633110f563bfba4f5a99ac","sys_updated_by":"admin","sys_created_on":"2024-01-06 01:42:52","sys_name":"Capture performance metrics","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n    var metrics = input.metrics;\n\tvar perfService = new CMDBPerfLogService();\n    try {\n        if (!metrics) {\n            perfService.logErrorMessage(\"Supplied input metrics are missing.\");\n        } else {\n            //Create log Entry\n            perfService.createSplunkLogEntry(metrics, perfService.APP_NAME.UNIFIED_MAP_KEY);\n            perfService.insertIntoUMPerfTable(metrics);\n        }\n    } catch (error) {\n        perfService.logErrorMessage(perfService.APP_NAME.UNIFIED_MAP, \"Error capturing performance metrics. \" + error.toString());\n    }\n\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"metrics\",\r\n      \"label\": \"Metrics\",\r\n      \"fieldType\": \"json\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": true,\r\n      \"description\": \"Predefined list of values to be written to the log. These needs to be a match or be a subset of the canned list of values the table is managing.\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_b2a819f177633110f563bfba4f5a99ac","api_name":"sn_cmdb_ws.Capture performance metrics","mutates_server_data":"true","name":"Capture performance metrics","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"payload data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This saves name and description of a skill config","sys_updated_on":"2024-03-20 18:23:29","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b2ec0ab193450210aa5730f164891845","sys_updated_by":"admin","sys_created_on":"2024-03-20 18:22:00","sys_name":"Save skill config general details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.payload)\n        return false;\n    var util = new sn_nowassist_admin.NowAdminAssistUtil();\n    var response = util.saveSkillConfigGeneralDetailsAPI(input.payload);\n    return response;\n}","acl_failure_result":"","props":"[\r\n  {\r\n        \"name\": \"payload\",\r\n        \"label\": \"Payload\",\r\n        \"description\": \"payload data\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"json\",\r\n        \"valueType\": \"object\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_b2ec0ab193450210aa5730f164891845","api_name":"sn_nowassist_admin.Save skill config general details","mutates_server_data":"true","name":"Save skill config general details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Validates if the document with given sys_id has an attachment. Also verifies if the extension of the file attachment is of type font. ","sys_updated_on":"2022-11-21 10:41:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b3a0302899d5d110f87718b4c7c8ec49","sys_updated_by":"admin","sys_created_on":"2022-08-10 12:04:48","sys_name":"Validate Attachment","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    var allowedFontExtensions = ['ttf', 'otf', 'woff', 'woff2'];\n    var output = {\n        result: false,\n        error: ''\n    };\n    var sysId = input.sysId;\n    var gr = new GlideRecord('sys_attachment');\n    gr.addQuery('table_sys_id', sysId);\n    gr.query();\n\t\n\t// Multiple attachments not allowed\n\tif (gr.getRowCount() > 1) {\n\t\toutput.error = gs.getMessage('Multiple attachments found. Please upload a single font file.');\n\t\treturn output;\n\t}\n\t\n    if (gr.next()) {\n        var fileName = gr.getValue('file_name');\n        var fileExtension = fileName.split('.').pop();\n        if (allowedFontExtensions.indexOf(fileExtension) > -1) {\n            output.result = true;\n        } else {\n            output.error = gs.getMessage('Invalid file extension.');\n        }\n    } else {\n        output.error = gs.getMessage('File attachment not found.');\n    }\n    return output;\n}","acl_failure_result":"","props":"[\n   {\n      \"name\":\"sysId\",\n      \"label\":\"sysId\",\n      \"description\":\"sysId\",\n      \"readOnly\":false,\n      \"fieldType\":\"string\",\n      \"mandatory\":true,\n      \"defaultValue\":\"\"\n   }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_b3a0302899d5d110f87718b4c7c8ec49","api_name":"global.Validate Attachment","mutates_server_data":"true","name":"Validate Attachment","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2022-03-08 01:01:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b4da0c22c3420110fc869bc8a840dd7f","sys_updated_by":"admin","sys_created_on":"2022-03-08 01:01:14","sys_name":"CI Request AI Search","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform() {\n    var grS = new GlideAggregate('sys_service');\n    if (grS.isValid()) {\n        grS.addQuery('name', 'AISearch');\n        if (grS.getCount() > 0)\n            return true;\n        else\n            return new sn_ais.InfrastructureApi().requestAis();\n    }\n    return false;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_b4da0c22c3420110fc869bc8a840dd7f","api_name":"sn_oe_sfs.CI Request AI Search","mutates_server_data":"true","name":"CI Request AI Search","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Comma separated list of sys ids. If left empty then all permanent error jobs in sys_trigger will be recovered.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Ids\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Recovers permanent error scheduled jobs from sys_trigger","sys_updated_on":"2024-06-03 18:17:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b4eb80b8432a421073e946c8dbb8f259","sys_updated_by":"admin","sys_created_on":"2024-05-30 19:54:23","sys_name":"Recover Permanent Error Scheduled Jobs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/74fdcd7a437121109fa864cec7b8f27b","value":"74fdcd7a437121109fa864cec7b8f27b"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    try {\n        var sysIdsInput = input.sys_ids;\n        var utils = new AsyncDashboardUtils();\n\n        if (sysIdsInput == \"\") {\n            var sysIds = [];\n\n            var permanentErrorRecords = utils.getPermanentErrorJobs();\n\n            while (permanentErrorRecords.next()) {\n                sysIds.push(permanentErrorRecords.getUniqueValue());\n            }\n\n            sysIds.forEach(function(sys_id) {\n                utils.recoverRecord(sys_id);\n            });\n        } else {\n            var sysIdsInputArr = sysIdsInput.split(\",\");\n            sysIdsInputArr.forEach(function(sys_id) {\n                utils.recoverRecord(sys_id);\n            });\n        }\n    } catch (ex) {\n        gs.error(\"Error recovering permanent error scheduled jobs: \" + ex);\n    }\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"sys_ids\",\r\n      \"label\": \"Sys Ids\",\r\n      \"description\": \"Comma separated list of sys ids. If left empty then all permanent error jobs in sys_trigger will be recovered.\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/74fdcd7a437121109fa864cec7b8f27b","value":"74fdcd7a437121109fa864cec7b8f27b"},"sys_update_name":"sys_ux_data_broker_transform_b4eb80b8432a421073e946c8dbb8f259","api_name":"sn_async_dashboard.Recover Permanent Error Scheduled Jobs","mutates_server_data":"true","name":"Recover Permanent Error Scheduled Jobs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Document ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Document Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Interaction Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Operation\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"If allowed by the current configuration, create an interaction related record relating the given interactionSysID to the given documentTable/documentSysID. The relationship will be created with the given operation (e.g. \"Viewed\") which will help determine whether the creation is allowed.","sys_updated_on":"2023-03-24 11:07:45","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b4f3c6866f29211026b95d3a945b36a6","sys_updated_by":"maint","sys_created_on":"2023-03-14 16:23:54","sys_name":"create_interaction_relationship","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\tsn_interaction.RelatedRecord.createOrUpdate(input.interactionSysID, input.documentTable, input.documentID, input.operation);\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"interactionSysID\",\r\n  \"label\": \"Interaction Sys ID\",\r\n  \"description\": \"Interaction Sys ID\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"documentTable\",\r\n  \"label\": \"Document Table\",\r\n  \"description\": \"Document Table\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"documentID\",\r\n  \"label\": \"Document ID\",\r\n  \"description\": \"Document ID\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"operation\",\r\n  \"label\": \"Operation\",\r\n  \"description\": \"Operation\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/989c2b7b04352210559073c06a02f7cc","value":"989c2b7b04352210559073c06a02f7cc"},"sys_update_name":"sys_ux_data_broker_transform_b4f3c6866f29211026b95d3a945b36a6","api_name":"global.create_interaction_relationship","mutates_server_data":"true","name":"create_interaction_relationship","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Skill Config record Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Skill config Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetch the skill configuration data for the skill guided setup in Now assist admin console application.","sys_updated_on":"2023-10-11 07:56:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b4fc73e9433131106b5f90cfd7b8f29a","sys_updated_by":"admin","sys_created_on":"2023-10-10 18:28:09","sys_name":"Now Assist Admin Fetch Skill Config","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n\ttry {\n\t\tvar nowAdminAssistUtil = new sn_nowassist_admin.NowAdminAssistUtil();\n\t\treturn nowAdminAssistUtil.getSkillConfig(input.sys_id);\n\t} catch(e) {\n\t\tgs.error(\"Failed fetch Skill Configuration - \" + e);\n\t\tthrow new Error(\"Failed to fetch skill configuration\");\n\t}\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"sys_id\",\r\n    \"label\": \"Skill config Sys ID\",\r\n    \"description\": \"Skill Config record Sys ID\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_b4fc73e9433131106b5f90cfd7b8f29a","api_name":"sn_nowassist_admin.Now Assist Admin Fetch Skill Config","mutates_server_data":"false","name":"Now Assist Admin Fetch Skill Config","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"returns overdue certification and attestation task counts","sys_updated_on":"2023-08-28 23:24:43","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b5552bbbcbbc751078520592a2e8660f","sys_updated_by":"admin","sys_created_on":"2023-08-28 23:24:43","sys_name":"Get Cert and Attest overdue tasks","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\treturn CMDBWsDMUtil.getCertAttestOverdueTasksBlock();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_b5552bbbcbbc751078520592a2e8660f","api_name":"sn_cmdb_ws.Get Cert and Attest overdue tasks","mutates_server_data":"false","name":"Get Cert and Attest overdue tasks","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-08-10 02:18:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b5e69eb9772031101b803a91fa5a99c5","sys_updated_by":"admin","sys_created_on":"2023-08-10 02:18:07","sys_name":"Get KPI Details Page Params","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar metricsUtil = new sn_vsc.SCMetricsUtil();\n\treturn metricsUtil.getKPIPageParams();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_b5e69eb9772031101b803a91fa5a99c5","api_name":"sn_vsc.Get KPI Details Page Params","mutates_server_data":"false","name":"Get KPI Details Page Params","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Field Values\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Field Values to update\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"live agent setup record id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update 'sys_cs_live_agent setup'","sys_updated_on":"2022-11-03 09:54:49","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b5ed753f773211104646d99dbd5a9923","sys_updated_by":"admin","sys_created_on":"2022-11-03 09:37:36","sys_name":"Update Chat Settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var util = new global.ACEAppBuilderGlobalScopedUtil();\n    util.updateRecord('sys_cs_live_agent_setup', input.record_id, input.field_values);\n\n}","acl_failure_result":"","props":"[{\n        \"name\": \"record_id\",\n        \"label\": \"Record Id\",\n        \"description\": \"live agent setup record id\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n  {\n  \"name\": \"field_values\",\n  \"label\": \"Field Values\",\n  \"description\": \"Field Values to update\",\n  \"readOnly\": false,\n  \"fieldType\": \"object\",\n  \"mandatory\": false,\n  \"defaultValue\": \"\"\n\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_b5ed753f773211104646d99dbd5a9923","api_name":"sn_oe_sfs.Update Chat Settings","mutates_server_data":"true","name":"Update Chat Settings","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get the de-duplication tasks that were manually assigned to a template by the user","sys_updated_on":"2023-11-10 00:25:44","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b66fa799734071103f3cc3ed8ff6a726","sys_updated_by":"admin","sys_created_on":"2023-07-14 22:59:55","sys_name":"De-Duplication Template Get manually associated tasks","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"18","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar items = [];\n\n\tvar template = input.templateSysId;\n\n\tif (template && template.length > 0) {\n\t\tvar limit = gs.getProperty('sn_cmdb_ws.dedupetemplate.max_task_query_limit');\n\n\t\t// if limit is not set or it is set to an invalid value, go with the default value of 50\n\t\tif (!limit || limit <= 0 ) {\n\t\t\tlimit = 50;\n\t\t}\n\n\t\tvar gr = new GlideRecord('reconcile_duplicate_task');\n\t\tgr.addQuery('template', template);\n\t\t// for user assigned tasks, only show open tasks\n\t\tgr.addQuery('state', 1);\n\t\tgr.orderByDesc('sys_updated_on');\n\t\tgr.setLimit(limit);\n\t\tgr.query();\n\n\t\twhile (gr.next()) {\n\t\t\tvar item = (new GetDedupeTaskInfo()).getTaskInfo(gr);\n\t\t\tif (item) {\n\t\t\t\titems.push(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tresult = {'items': items,\n\t\t'template': template};\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_b66fa799734071103f3cc3ed8ff6a726","api_name":"sn_cmdb_ws.De-Duplication Template Get manually associated tasks","mutates_server_data":"false","name":"De-Duplication Template Get manually associated tasks","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Table name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name to get the recommended group\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-05-22 17:35:03","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b673e74ceb836110249e8d835d5228dd","sys_updated_by":"admin","sys_created_on":"2023-05-22 07:47:57","sys_name":"Get recommended group watch fields","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7e3c2481539260100c54ddeeff7b127b","value":"7e3c2481539260100c54ddeeff7b127b"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n\tvar result = [];\n\tif (!input.table_name)\n\t\treturn result;\n\ttry {\n\t\tvar epoints = new GlideScriptedExtensionPoint().getExtensions(\"sn_sow_on_call.ExpertsOnCallTabConfig\");\n\t\tfor (var i = 0; i < epoints.length; i++){\n\t\t\tvar point = epoints[i];\n\t\t\tif (point.getTableName() === input.table_name) {\n\t\t\t\tresult = point.getRecommendedFieldWatchList();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} \n\t} catch(ex) {\n\t\tgs.error(\"Error running extension points!\");\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"table_name\",\r\n      \"label\": \"Table name\",\r\n      \"description\": \"Table name to get the recommended group\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7e3c2481539260100c54ddeeff7b127b","value":"7e3c2481539260100c54ddeeff7b127b"},"sys_update_name":"sys_ux_data_broker_transform_b673e74ceb836110249e8d835d5228dd","api_name":"sn_sow_on_call.Get recommended group watch fields","mutates_server_data":"false","name":"Get recommended group watch fields","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ACE Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"search config block id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-02-15 13:34:44","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b6b686866b510110da18ec188e44af6d","sys_updated_by":"admin","sys_created_on":"2022-01-28 14:10:16","sys_name":"ACE Fetch Search Config","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n    if (!input || !input.application_id || !input.search_config_block_id) return [];\n    var searchContexts = new ACEAppBuilderUtil().getSearchContexts(input.application_id, input.search_config_block_id);\n\n    return searchContexts;\n}","acl_failure_result":"","props":"[ {\n      \"name\": \"application_id\",\n      \"label\": \"Application Id\",\n      \"description\": \"ACE Application Id\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n},\n {\n      \"name\": \"search_config_block_id\",\n      \"label\": \"search config block id\",\n      \"description\": \"search config block id\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_b6b686866b510110da18ec188e44af6d","api_name":"sn_ace.ACE Fetch Search Config","mutates_server_data":"false","name":"ACE Fetch Search Config","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Group\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Is  record page\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Is it from the record page\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId of the group\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-07-01 08:47:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b7d776bd77972110ef9645cfbd5a997c","sys_updated_by":"admin","sys_created_on":"2023-06-09 01:29:23","sys_name":"Calendar On Load","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"73","sys_tags":"","script":"function transform(inputs) {\n    var buildGroupObj = function(groupGr) {\n        var groupSettingMap = new global.OCRosterSpanApprovalUtil().getPTOApprovalAndCoverageStatusByGroups([groupGr.getValue('sys_id') + \"\"]);\n        return {\n            \"id\": groupGr.getValue('sys_id'),\n            \"label\": groupGr.getValue('name'),\n            \"editable\": new global.OCCalendarUtils().canWriteByGroupSysId(groupGr.getValue('sys_id')) + \"\",\n            \"isApprovalRequired\": groupSettingMap[groupGr.getValue('sys_id') + \"\"].isPTOAccessible + \"\",\n            \"isProposedCoverMandatory\": groupSettingMap[groupGr.getValue('sys_id') + \"\"].isProposedCoverMandatory + \"\",\n        };\n    };\n    var result = {};\n    var ocTeamsCalendarUtil = new sn_uib_on_call.OnCallTeamsCalendarUtil();\n    ocTeamsCalendarUtil.clearErrorMessages();\n    var userGroup = inputs.group;\n    var userGroupsList = gs.getUser().getMyGroups();\n    if (!gs.nil(userGroup))\n        userGroupsList.push(userGroup);\n    var userGroups = [];\n    var userGroupGr = new GlideRecord('sys_user_group');\n    userGroupGr.addEncodedQuery(\"managerDYNAMIC90d1921e5f510100a9ad2572f2b477fe^ORsys_idIN\" + userGroupsList.join(\",\"));\n    userGroupGr.query();\n    while (userGroupGr.next()) {\n        userGroups.push(buildGroupObj(userGroupGr));\n    }\n    if (!inputs.isRecordPage)\n        userGroups = userGroups.sort(function(a, b) {\n            return a.label.localeCompare(b.label);\n        });\n    var defaultGroup = {};\n    if (userGroups.length == 0) {\n        var groupGr = new GlideRecord('sys_user_group');\n        groupGr.addActiveQuery();\n        groupGr.orderBy('name');\n        groupGr.setLimit(1);\n        groupGr.query();\n        if (groupGr.next()) {\n            defaultGroup = buildGroupObj(groupGr);\n        }\n    } else if (!gs.nil(userGroup)) {\n        var urlParamGroupGr = new GlideRecord('sys_user_group');\n        if (urlParamGroupGr.get(userGroup)) {\n            defaultGroup = buildGroupObj(urlParamGroupGr);\n        }\n    } else if (userGroups.length > 0 && !inputs.isRecordPage) {\n        var firstGroup = userGroups[0];\n        var firstGroupHasShifts = hasShifts(firstGroup.id);\n        if (!firstGroupHasShifts) {\n            var groupWithShifts = userGroups.find(function(group) {\n                return hasShifts(group.id);\n            });\n            if (groupWithShifts) {\n                userGroups = userGroups.filter(function(group) {\n                    return group.id !== groupWithShifts.id;\n                });\n\n                userGroups.unshift(groupWithShifts);\n            }\n        }\n    }\n    result.userGroups = userGroups;\n    result.userGroupsList = gs.getUser().getMyGroups();\n    result.defaultGroup = defaultGroup;\n    result.groups = new global.OCRotationV2().getGroups() || [];\n    result.timeZones = new global.OnCallCommon().getTimezoneList();\n\n    result.supportsNewSubscriptionURL = (gs.getProperty('itsm_family_release_version_check', 0) >= 25);\n    result.supportsGroupLevelSubscriptionWithSSO = (gs.getProperty('itsm_family_release_version_check', 0) >= 26);\n\n    result.errorMessages = ocTeamsCalendarUtil.getErrorMessages();\n\n    return result;\n\n    function hasShifts(groupId) {\n        var aggregate = new GlideAggregate('cmn_rota');\n        aggregate.addQuery('group', groupId);\n        aggregate.addAggregate('COUNT');\n        aggregate.query();\n        return aggregate.next() && aggregate.getAggregate('COUNT') > 0;\n    }\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"group\",\r\n    \"label\": \"Group\",\r\n    \"description\": \"sysId of the group\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"isRecordPage\",\r\n    \"label\": \"Is  record page\",\r\n    \"description\": \"Is it from the record page\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"boolean\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": false\r\n  }\r\n\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_b7d776bd77972110ef9645cfbd5a997c","api_name":"sn_uib_on_call.Calendar On Load","mutates_server_data":"false","name":"Calendar On Load","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Selected Suite\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Suite\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"date\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"result date\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-11-18 19:14:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b89c8570775311108bd73a91fa5a998a","sys_updated_by":"admin","sys_created_on":"2022-11-18 18:49:17","sys_name":"VSC Get Scan Summary Result","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var result = '';\n    var gr = new GlideRecord('sn_vsc_scan_summary');\n    gr.addQuery('suite', input.suite);\n    gr.addQuery('result_created_on', input.date);\n    gr.query();\n    if (gr.next()) {\n        result = gr.getValue('result');\n    } else {\n        var gr_latest = new GlideRecord('scan_suite_execution');\n        gr_latest.addQuery('suite', input.suite);\n        gr_latest.orderByDesc('sys_created_on');\n        gr_latest.setLimit(1);\n        gr_latest.query();\n        if (gr_latest.next()) {\n            result = gr_latest.getValue('result');\n        }\n    }\n    return result;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"suite\",\n    \"label\": \"Suite\",\n    \"description\": \"Selected Suite\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  },\n{\n    \"name\": \"date\",\n    \"label\": \"date\",\n    \"description\": \"result date\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_b89c8570775311108bd73a91fa5a998a","api_name":"sn_vsc.VSC Get Scan Summary Result","mutates_server_data":"false","name":"VSC Get Scan Summary Result","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data filter sys_id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Encoded query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Encoded query to execute with the data filter turned on and off\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Number of runs to collect mean and median query time\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Number of times the query runs\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys_id of the data filter to analyze\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Compute the change in query performance when the supplied data filter is turned on and off","sys_updated_on":"2024-10-05 01:54:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b906a079ff710210f93c840d03cb1404","sys_updated_by":"admin","sys_created_on":"2024-04-26 17:35:20","sys_name":"Get Security Data Filter Metrics","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"161","sys_tags":"","script":"function transform(input) {\n    var errorMessages = \"\";\n\n    //validating dataFilterId to avoid a roundtrip\n    if (!input.dataFilterId) {\n        errorMessages = gs.getMessage(\"No data filter selected to perform analysis\");\n        return {\"errors\": errorMessages};\n    }\n\n    // run performance analysis\n    var perfAnalysis = new sn_sec_diag.DataFilterPerformanceAnalysis();\n    var perfFilterStats = perfAnalysis.runPerfomanceAnalysis(input.dataFilterId, input.encodedQuery, input.numberOfQueryRuns);\n\n    errorMessages = setErrorMessages(perfFilterStats.errors);\n    if (errorMessages.length > 0)\n        return {\"errors\": errorMessages};\n\n    var perfFilterOffStats = {\n        median: perfFilterStats[\"perfFilterOffStats.median\"],\n        mean: perfFilterStats[\"perfFilterOffStats.mean\"],\n        min: perfFilterStats[\"perfFilterOffStats.min\"],\n        max: perfFilterStats[\"perfFilterOffStats.max\"]\n    };\n    var perfFilterOnStats = {\n        median: perfFilterStats[\"perfFilterOnStats.median\"],\n        mean: perfFilterStats[\"perfFilterOnStats.mean\"],\n        min: perfFilterStats[\"perfFilterOnStats.min\"],\n        max: perfFilterStats[\"perfFilterOnStats.max\"]\n    };\n\n    return {\n        \"perfFilterOffStats\": perfFilterOffStats,\n        \"perfFilterOnStats\": perfFilterOnStats,\n        \"medianPerfChangePct\": perfFilterStats.medianPerfChangePct,\n        \"meanPerfChangePct\": perfFilterStats.meanPerfChangePct,\n        \"filterId\": input.dataFilterId,\n        \"errors\": errorMessages\n    };\n\n    function setErrorMessages(errorArr) {\n        var errorString = \"\";\n        if (errorArr != null && errorArr !== 'undefined') {\n            errorArr.forEach(function(message) {\n                errorString += message + \".  \";\n            });\n        }\n\n        return errorString;\n    }\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"dataFilterId\",\r\n      \"label\": \"Data filter sys_id\",\r\n      \"description\": \"sys_id of the data filter to analyze\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n  {\r\n      \"name\": \"encodedQuery\",\r\n      \"label\": \"Encoded query\",\r\n      \"description\": \"Encoded query to execute with the data filter turned on and off\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"\"\r\n  },\r\n {\r\n      \"name\": \"numberOfQueryRuns\",\r\n      \"label\": \"Number of times the query runs\",\r\n      \"description\": \"Number of runs to collect mean and median query time\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"number\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": 0\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bec96fbb04f12210559073c06a02f740","value":"bec96fbb04f12210559073c06a02f740"},"sys_update_name":"sys_ux_data_broker_transform_b906a079ff710210f93c840d03cb1404","api_name":"global.Get Security Data Filter Metrics","mutates_server_data":"true","name":"Get Security Data Filter Metrics","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"CI Filter Type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"CI Filter type selected in the dropdown\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This data broker gets the chart table definition payload with the correct filter applied","sys_updated_on":"2024-08-22 22:32:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b921145950009a10f877511550def931","sys_updated_by":"admin","sys_created_on":"2024-08-14 23:14:31","sys_name":"Get multisource filtered chart data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n\tvar ciFilterType = input.ciFilterType;\n\tresult = {\n\t\t\"result\": {},\n\t\t\"input\": ciFilterType,\n\t\t\"errorMessage\": \"\"\n\t};\n\n\tvar util = new sn_cmdb_ws.MultisourceDashboardChartFilterUtil(ciFilterType);\n\n\tif (!util.isCiFilterTypeValid()) {\n\t\tresult.errorMessage = \"CI Filter type has invalid value: \" + ciFilterType;\n\t} else {\n\t\tvar chartData = util.getChartInformation();\n\t\tresult.result = chartData;\n\t}\n\n\treturn result;\n}","acl_failure_result":"","props":"[{\n  \"name\": \"ciFilterType\",\n  \"label\": \"CI Filter Type\",\n  \"description\": \"CI Filter type selected in the dropdown\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_b921145950009a10f877511550def931","api_name":"sn_cmdb_ws.Get multisource filtered chart data","mutates_server_data":"false","name":"Get multisource filtered chart data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Rota\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys ID of the cmn_rota\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-27 13:01:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b92a8f9c537631108f2bddeeff7b120a","sys_updated_by":"admin","sys_created_on":"2023-11-25 10:33:15","sys_name":"Get Escalation Policy for Rota","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var rotaId = input.rotaId;\n    if (gs.nil(rotaId))\n        return {\n            active_policies: [],\n            inactive_policies: []\n        };\n    return new sn_uib_on_call.OnCallEscalationPolicyUIBUtils().getEscalationPolicyDetailsForSidePanel(rotaId);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"rotaId\",\r\n    \"label\": \"Rota\",\r\n    \"description\": \"Sys ID of the cmn_rota\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_b92a8f9c537631108f2bddeeff7b120a","api_name":"sn_uib_on_call.Get Escalation Policy for Rota","mutates_server_data":"false","name":"Get Escalation Policy for Rota","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This is used to get records summary counts for the given task","sys_updated_on":"2023-09-06 00:18:12","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b94a35195311011071b9ddeeff7b124f","sys_updated_by":"maint","sys_created_on":"2022-01-26 05:31:29","sys_name":"Get Task records summary count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"22","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFn = function() {\n\t\tvar DM = new CMDBWsDMConstants();\n\t\tvar taskUiProxy = new CMDBWsDMTaskUIProxy();\n\t\tvar taskSysId = input.sysId;\n\t\tvar policyTypeInfo = taskUiProxy.getPolicyTypeForTask(taskSysId);\n\t\tif (policyTypeInfo.sys_id == DM.OOB_POLICY_TYPES.ATTESTATION.sys_id) {\n\t\t\tvar attestationUtil = new sn_cmdb_ws.CMDBAttestationUtil();\n\t\t\treturn attestationUtil.getCisSummaryCount(taskSysId);\n\t\t} else {\n\t\t\treturn taskUiProxy.getTaskRecordSummary(taskSysId);\n\t\t}\n\t};\n\n\treturn new CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Get Task records summary count\", wrapperFn);\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys ID\",\r\n  \"description\": \"Task Sys ID\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_b94a35195311011071b9ddeeff7b124f","api_name":"sn_cmdb_ws.Get Task records summary count","mutates_server_data":"false","name":"Get Task records summary count","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Tranlsations for Review & Attach article guidance texts!","sys_updated_on":"2024-08-01 11:06:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b992565e43ef0210b35904836ab8f28a","sys_updated_by":"admin","sys_created_on":"2024-07-24 14:44:44","sys_name":"Attach article - Translations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/e44100732ce74110f8771fb93f5c7ccd","value":"e44100732ce74110f8771fb93f5c7ccd"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    return {\n        \"attach-article-comment\": gs.getMessage(\"Attach and add link in comment\"),\n        \"attach-article-email\": gs.getMessage(\"Attach and add link in email\"),\n        \"attach-article-worknotes\": gs.getMessage(\"Add link in work note\"),\n        \"read-full-article\": gs.getMessage(\"Read article\"),\n        \"copy-link\": gs.getMessage(\"Copy link\"),\n        \"read-article-full-view\": gs.getMessage(\"Read article in full view\"),\n        \"mark-article-helpful\": gs.getMessage(\"Mark article as helpful\"),\n        \"flag-article\": gs.getMessage(\"Flag article\"),\n        \"copy-link-detailed-experience\": gs.getMessage(\"Copy link\"),\n        \"send-chat\": gs.getMessage(\"Send in chat\"),\n        \"send-private-chat\": gs.getMessage(\"Send in private chat\")\n    };\n\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e44100732ce74110f8771fb93f5c7ccd","value":"e44100732ce74110f8771fb93f5c7ccd"},"sys_update_name":"sys_ux_data_broker_transform_b992565e43ef0210b35904836ab8f28a","api_name":"sn_guidances.Attach article - Translations","mutates_server_data":"false","name":"Attach article - Translations","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Provide setup id for migration\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Setup Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-11-25 09:11:29","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"b9abffa7eb8502107626211f1a522881","sys_updated_by":"admin","sys_created_on":"2024-03-26 12:54:06","sys_name":"Guided setup migration to pad","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1cb77a801b9af01039c155f3604bcb9e","value":"1cb77a801b9af01039c155f3604bcb9e"},"sys_created_by":"admin","sys_mod_count":"29","sys_tags":"","script":"function transform(input) {\n\n    var padUtils = new global.PADUtilsSI();\n    var setupMigrationUtil = new sn_ads_setup.SNHelpSetupMigrationUtil();\n    var pdProcessService = new global.PDProcessService();\n    var snHelpService = new global.SNHelpService();\n    var constants = new sn_ads_setup.SNHelpSetupConstantProvider();\n    var result = {\n        'setups': [],\n        'errors': []\n    };\n    var activeResponse = {};\n\tconst setupId = input.setupId;\n\n    var hg = new GlideRecord('help_guidance');\n    hg.addActiveQuery();\n    hg.addQuery('type', 'global_setup');\n    hg.addNullQuery('process_definition');\n\tif (setupId) {\n\t\thg.addQuery('sys_id', setupId);\n\t}\n    snHelpService.setWorkflowFromDiffScope(hg, false);\n    hg.query();\n\n    if (hg.getRowCount() <= 0)\n        return result;\n\n    if (!padUtils.isPADAuthorizedUser() && !padUtils.userIsPADDelegatedDev()) {\n        result.errors.push('An error occurred while migrating setup: User not authorised');\n        return result;\n    }\n\n    gs.info('Guided Setup Migration to PAD: Started');\n\n    while (hg.next()) {\n        var guidanceId = hg.sys_id;\n        try {\n            var processId = gs.generateGUID();\n            var processMetaDataObj = setupMigrationUtil.getProcessMetaData(hg, processId);\n\n            var createdProcess = pdProcessService.createProcess({\n                process: processMetaDataObj.process,\n                lanes: processMetaDataObj.lanes,\n                activities: processMetaDataObj.activities\n            });\n            hg.setValue('process_definition', createdProcess.process.sys_id.value);\n\n            if (hg.getValue('status') == constants.setupStatus.PUBLISHED)\n                activeResponse = sn_pad.PDAutomationProvider.activateProcess(createdProcess.process.sys_id.value);\n\n            setupMigrationUtil.deleteInteractionRecords(guidanceId);\n\n            if (activeResponse.state == \"SUCCESS\") {\n                result.setups.push(guidanceId);\n                gs.info('Guided Setup Migrated And Published Successfully! ' + guidanceId);\n            } else if (activeResponse.errors) {\n                var stepErrors = activeResponse.errors.join(',');\n                gs.info('Error occurred during activation of Guided Setup! ' + guidanceId + 'Errors: ' + stepErrors);\n                hg.setValue('status', constants.setupStatus.DRAFT);\n            }\n            hg.update();\n        } catch (e) {\n            gs.error('An error occurred while migrating setup: ' + guidanceId + ' Error:' + e.message);\n            result.errors.push('Migration Failed:' + hg.sys_name + ', Please contact your administrator!');\n        }\n    }\n\n    gs.info('Guided Setup Migration to PAD: Finished');\n    return result;\n}","acl_failure_result":"{\r\n    \"message\":\"User does not have required ACL to perform this action.\"\r\n}","props":"[\r\n    {\r\n        \"name\": \"setupId\",\r\n        \"label\": \"Setup Id\",\r\n        \"description\": \"Provide setup id for migration\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1cb77a801b9af01039c155f3604bcb9e","value":"1cb77a801b9af01039c155f3604bcb9e"},"sys_update_name":"sys_ux_data_broker_transform_b9abffa7eb8502107626211f1a522881","api_name":"sn_ads_setup.Guided setup migration to pad","mutates_server_data":"false","name":"Guided setup migration to pad","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Determines if asset actions are updated or not for a given incident.","sys_updated_on":"2021-12-14 06:06:01","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ba3785be533b3010ae50ddeeff7b128e","sys_updated_by":"admin","sys_created_on":"2021-11-17 03:42:51","sys_name":"Incomplete Asset actions","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\tvar hasIncompleteAssetActions = false;\n\tif(GlidePluginManager.isActive(\"com.sn_hamp\")) {\n\t\tvar gr = new GlideRecord(\"incident\");\n\t\tif(gr.get(input.sysId)) {\n\t\t\tvar itsmCommonHAM = new global.ITSMCommonHAM(gr);\n\t\t\thasIncompleteAssetActions = itsmCommonHAM.hasEmptyAssetAction() || itsmCommonHAM.isSwappedCIEmpty();\n\t\t}\n\t}\n\treturn {\n\t\thasIncompleteAssetActions: hasIncompleteAssetActions\n\t};\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_update_name":"sys_ux_data_broker_transform_ba3785be533b3010ae50ddeeff7b128e","api_name":"sn_sow_inc.Incomplete Asset actions","mutates_server_data":"false","name":"Incomplete Asset actions","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-07-22 14:40:50","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ba3bf7617727021084ef1aceca5a9955","sys_updated_by":"admin","sys_created_on":"2024-07-22 14:19:17","sys_name":"Get session errors","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar error_messages = new sn_uib_on_call.OnCallTeamsCalendarUtil().getErrorMessages();\n\treturn {\"error_messages\": error_messages};\n}","acl_failure_result":"","props":"[]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_ba3bf7617727021084ef1aceca5a9955","api_name":"sn_uib_on_call.Get session errors","mutates_server_data":"false","name":"Get session errors","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-04-05 00:12:43","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ba3fd778854e2110f87787e1c4f537ad","sys_updated_by":"maint","sys_created_on":"2023-04-04 23:03:29","sys_name":"GetRESTAPIScriptAccess","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var accessVal = \"private\";\n\tvar pluginId = 'com.glide.rest.policy';\n    var gr = new GlideRecord('sys_script_include');\n    // get the access of RESTAPIServiceInfo \n    if (gr.get('694a273e670210106fcfecccb585ef08')) {\n        accessVal = gr.getValue(\"access\");\n    }\n\treturn { \n\t\tid: pluginId,\n\t\tactive: GlidePluginManager.isActive(pluginId),\n\t\tscriptAccess: accessVal\n\t};\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_ba3fd778854e2110f87787e1c4f537ad","api_name":"sn_vsc.GetRESTAPIScriptAccess","mutates_server_data":"false","name":"GetRESTAPIScriptAccess","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Languages\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"languages\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Enable/Disable DT  for a Language","sys_updated_on":"2024-08-21 08:50:55","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bb0652fb9f0e0210f0b32e5af90a1cdb","sys_updated_by":"admin","sys_created_on":"2024-05-15 17:06:05","sys_name":"Enable/Disable DT for a Language","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n    var dtLanguages = input.dt_languages;\n    if (gs.nil(dtLanguages))\n        return;\n\n    try {\n        if (dtLanguages.length > 0) {\n            dtLanguages.forEach((dt_language) => {\n                var dtGr = new GlideRecord('sys_cs_dynamic_translation_virtual_agent');\n                dtGr.addQuery('language', dt_language.language_id);\n                dtGr.query();\n                if (dtGr.next()) {\n                    var id = dtGr.getUniqueValue();\n                    var naaGlobalUtil = new global.NowAssistAdminGlobalScopedUtil();\n                    naaGlobalUtil.updateRecord(\"sys_cs_dynamic_translation_virtual_agent\", id, {\n                        dt_enabled: dt_language.dt_enabled\n                    });\n                }\n            });\n        }\n    } catch (e) {\n        gs.error(\"Failed to enable/disable dynamic translation for a language\");\n    }\n}","acl_failure_result":"","props":"[\n{\n      \"name\": \"dt_languages\",\n      \"label\": \"languages\",\n      \"description\": \"Languages\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": true,\n      \"defaultValue\": false\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_bb0652fb9f0e0210f0b32e5af90a1cdb","api_name":"sn_nowassist_admin.Enable/Disable DT for a Language","mutates_server_data":"true","name":"Enable/Disable DT for a Language","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Library Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-13 03:02:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bbc13e147755711067d6f350ff5a99cd","sys_updated_by":"admin","sys_created_on":"2023-09-11 19:14:54","sys_name":"De-Duplication Template Add to Library","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"16","sys_tags":"","script":"function transform(input) {\n\n\tvar templateId = input.templateSysId;\n\tvar libraryId = input.librarySysId;\n\tvar util = new DedupeTemplateLibraryUtil();\n\tvar result = util.addTemplateToLibrary(templateId,libraryId);\n\treturn result; \n\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n   {\r\n      \"name\": \"librarySysId\",\r\n      \"label\": \"Library Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"json\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_bbc13e147755711067d6f350ff5a99cd","api_name":"sn_cmdb_ws.De-Duplication Template Add to Library","mutates_server_data":"true","name":"De-Duplication Template Add to Library","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table of the record to look up\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"This value will be used to find matches against for the display name of the records.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"value\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Gets the matching record count for a given value on the display name.","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bbf323048f913410960c53ac37bdee01","sys_updated_by":"admin","sys_created_on":"2021-07-07 19:26:32","sys_name":"Get Record Count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"// returns true/false if the fields exists or not\nfunction transform(input) {\n\tvar result = {\n\t\terrors: [],\n\t\ttable: '',\n\t\tfield: '',\n\t\tvalue: '',\n\t\tcount: 0\n\t};\n\t\n\ttry {\n\t\tvar table = input.table;\n\t\tvar value = input.value;\n\n\t\tif (!table || !table.length || !table[0]) {\n\t\t\tresult.errors.push('Table is missing.');\n\t\t}\n\t\tif (!value || !value.length || !value[0]) {\n\t\t\tresult.errors.push('Value is missing.');\n\t\t}\n\t\t\n\t\tif (!result.errors.length) {\n\t\t\tresult.table = table;\n\t\t\tresult.value = value;\n\t\t\tvar ga = new GlideAggregate(table);\n\t\t\tvar displayColumn = getDisplayColumn(table);\n\t\t\tresult.field = displayColumn;\n\t\t\tga.addQuery(displayColumn, value);\n\t\t\tga.query();\n\t\t\tif (ga.next()) {\n\t\t\t\tvar count = parseInt(ga.getRowCount());\n\t\t\t\tresult.count = count;\n\t\t\t\tif (count === 1) {\n\t\t\t\t\tvar gr = new GlideRecord(table);\n\t\t\t\t\tgr.addQuery(displayColumn, value);\n\t\t\t\t\tgr.query();\n\t\t\t\t\tgr.next();\n\t\t\t\t\tresult.sysid = gr.getUniqueValue();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (error) {\n\t\tresult.errors.push(error.toString());\n\t}\n\t\n\treturn result;\n\t\n\t\n\tfunction getDisplayColumn(tableName) {\n\t\tvar gr = new GlideRecord(\"sys_dictionary\");\n\t\tgr.addQuery(\"name\", tableName);\n\t\tgr.addQuery(\"display\", true);\n\t\tgr.query();\n\t\tif (gr.next()) {\n\t\t\tif (gr.hasNext()) {\n\t\t\t\treturn undefined; // not unique\n\t\t\t}\n\t\t\treturn gr.element.toString();\n\t\t}\n\n\t\tvar tu = new TableUtils(tableName); \n\t\tvar tables = tu.getTables(); \n\t\tvar arrayUtil = new ArrayUtil();\n\t\tvar parentTables = arrayUtil.convertArray(tables);\n\t\tif (parentTables.length > 1) {\n\t\t\tvar answer = getDisplayColumn(parentTables[1]);\n\t\t\tif (answer) {\n\t\t\t\treturn answer;\n\t\t\t}\n\t\t}\n\n\t\tgr = new GlideRecord(tableName);\n\t\tgr.initialize();\n\t\tif (gr.isValidField(\"name\")) {\n\t\t\treturn \"name\";\n\t\t}\n\t\tif (gr.isValidField(\"u_name\")) {\n\t\t\treturn \"u_name\";\n\t\t}\t\t\t\n\t\treturn \"sys_id\";\n\t}\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table of the record to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"table_name\",\r\n  \"mandatory\": true\r\n}, {\r\n  \"name\": \"value\",\r\n  \"label\": \"value\",\r\n  \"description\": \"This value will be used to find matches against for the display name of the records.\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_bbf323048f913410960c53ac37bdee01","api_name":"global.Get Record Count","mutates_server_data":"false","name":"Get Record Count","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Parent Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Parent Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Related Lists Data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Tab Name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-04-21 12:37:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bc82fcbb0bd330106237818393673a37","sys_updated_by":"admin","sys_created_on":"2021-10-26 09:02:01","sys_name":"Related List Tabs Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c72e8e76c1fcf010f877e1de0b6be358","value":"c72e8e76c1fcf010f877e1de0b6be358"},"sys_created_by":"admin","sys_mod_count":"14","sys_tags":"","script":"function transform(input) {\n    var relatedLists = [], extnLists = [];\n    var lists = input.relatedLists || [];\n\n    var extns = new GlideScriptedExtensionPoint().getExtensions(\"sn_sow_record.SOWRouteUtil\");\n    if (extns.length > 0) {\n        for (var i = 0; i < extns.length; i++) {\n            if (extns[i].handles(input.parentTable, input.parentSysId)) {\n                extnLists = extns[i].getListsForRelatedListTab(input.relatedLists, input.parentTable, input.tabName);\n                if (typeof extnLists != \"undefined\")\n                    lists = extnLists;\n                break;\n            }\n        }\n    }\n\n    var count = 0;\n    for (var j = 0; j < lists.length; j++) {\n        if (lists[j].visible) {\n            relatedLists.push({\n                id: count++,\n                value: {\n                    title: lists[j].displayName,\n                    table: lists[j].table,\n                    filter: lists[j].fixedQuery,\n                    relatedListName: lists[j].value,\n                    view: lists[j].view,\n                    actionConfigId: lists[j].actionConfigId,\n                    refreshRequested: lists[j].refreshRequested,\n                    count: lists[j].count\n                },\n                label: lists[j].displayName + \" (\" + lists[j].count + \")\"\n            });\n        }\n    }\n\n    return relatedLists;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"relatedLists\",\r\n  \"label\": \"Related Lists Data\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"object\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"parentTable\",\r\n  \"label\": \"Parent Table\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"parentSysId\",\r\n  \"label\": \"Parent Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"tabName\",\r\n  \"label\": \"Tab Name\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c72e8e76c1fcf010f877e1de0b6be358","value":"c72e8e76c1fcf010f877e1de0b6be358"},"sys_update_name":"sys_ux_data_broker_transform_bc82fcbb0bd330106237818393673a37","api_name":"sn_sow_record.Related List Tabs Transform","mutates_server_data":"false","name":"Related List Tabs Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Calendar Timezone\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Date range\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Date range for fetching calendar spans\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Format\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Format of the result from the getSpan API \",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Groups\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Timezone\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-04-10 07:58:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bcd687a077932510ef9645cfbd5a99e7","sys_updated_by":"admin","sys_created_on":"2023-06-05 05:15:15","sys_name":"On Call Get Spans","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"69","sys_tags":"","script":"function transform(input) {\n    var ocTeamsCalendarUtil = new sn_uib_on_call.OnCallTeamsCalendarUtil();\n    ocTeamsCalendarUtil.clearErrorMessages();\n    var result = {};\n    if (input.group_ids && input.date_range && input.date_range.from && input.date_range.to)\n        result = ocTeamsCalendarUtil.getSpans(input);\n    else\n      return result;\n\n    function getCurrentDateTime(targetTimezone) {\n        var gr = new GlideScheduleDateTime();\n        var currentTime = gr.convertTimeZone(gs.getSession().getTimeZoneName(), targetTimezone);\n        var gdt = new GlideDateTime();\n        gdt.setDisplayValue(currentTime);\n        return gdt.getDisplayValueInternal();\n    }\n    var groups = input.group_ids;\n    var rotaIds = [];\n    var rotaMembers = {};\n    var rotaGR = new GlideRecord('cmn_rota');\n    rotaGR.addQuery('group', 'IN', groups);\n    rotaGR.query();\n    while (rotaGR.next()) {\n        rotaIds.push(rotaGR.getUniqueValue());\n    }\n\n    var curUserId = gs.getUserID();\n    var curUserRotas = [];\n\n    for (var i = 0; i < rotaIds.length; i++) {\n        var memberGR = new GlideAggregate('cmn_rota_member');\n        memberGR.addQuery('roster.rota', rotaIds[i]);\n        memberGR.addQuery('member.active', true);\n        memberGR.groupBy('member');\n        memberGR.query();\n        rotaMembers[rotaIds[i]] = [];\n        while (memberGR.next()) {\n            var userId = memberGR.getValue('member');\n            if (userId == curUserId && curUserRotas.indexOf(rotaIds[i]) == -1) {\n                curUserRotas.push(rotaIds[i]); \n            }\n            var user = {\n                id: userId,\n                name: memberGR.getDisplayValue('member'),\n                avatar: ocTeamsCalendarUtil.getUserAvatar(userId)\n\n            };\n            rotaMembers[rotaIds[i]].push(user);\n        }\n\n    }\n\n\n    result.rotaMembers = rotaMembers;\n    result.curUserRotas = curUserRotas;\n    result.rotaIds = rotaIds.join(',');\n    result.current_date_time = getCurrentDateTime(input.target_tz);\n    result.errorMessages = ocTeamsCalendarUtil.getErrorMessages();\n\n    return result;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"date_range\",\n    \"label\": \"Date range\",\n    \"description\": \"Date range for fetching calendar spans\",\n    \"readOnly\": false,\n    \"fieldType\": \"json\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"target_tz\",\n    \"label\": \"Timezone\",\n    \"description\": \"Calendar Timezone\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"group_ids\",\n    \"label\": \"Groups\",\n    \"description\": \"Groups\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"format\",\n    \"label\": \"Format\",\n    \"description\": \"Format of the result from the getSpan API \",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"dhtmlx\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_bcd687a077932510ef9645cfbd5a99e7","api_name":"sn_uib_on_call.On Call Get Spans","mutates_server_data":"false","name":"On Call Get Spans","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Field\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Field to be used for linking\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Source table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id of the source record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys_id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Transform to save link data to session to be read from Business Rule to link the change back to the originating record","sys_updated_on":"2021-09-30 14:11:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bd0d375f23f230101488dc1756bf6581","sys_updated_by":"admin","sys_created_on":"2021-09-30 13:14:22","sys_name":"Transform for linking change request","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_created_by":"admin","sys_mod_count":"18","sys_tags":"","script":"function transform(input) {\n\tvar target = {};\n\ttarget.table = input.table;\n\ttarget.sysid = input.sysId;\n\ttarget.field = input.field;\n\tgs.getSession().putClientData('change_link', JSON.stringify(target));\n\treturn target;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"table\",\r\n        \"label\": \"table\",\r\n        \"description\": \"Source table\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"sysId\",\r\n        \"label\": \"sys_id\",\r\n        \"description\": \"Sys Id of the source record\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"field\",\r\n        \"label\": \"Field\",\r\n        \"description\": \"Field to be used for linking\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_update_name":"sys_ux_data_broker_transform_bd0d375f23f230101488dc1756bf6581","api_name":"sn_sow_chg.Transform for linking change request","mutates_server_data":"false","name":"Transform for linking change request","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table  to check\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Checks if case type plugin installed, and if property \"sn_csm_case_types.service_definition_select\" is true , and a service definition exists for that table exactly","sys_updated_on":"2023-02-27 21:55:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bd6694bb43012110614fb6ef4bb8f264","sys_updated_by":"admin","sys_created_on":"2023-02-22 22:24:54","sys_name":"onNewServiceDefinitionSelectTransform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4b2d950b87c220109bada7da0acb0baa","value":"4b2d950b87c220109bada7da0acb0baa"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    if (!(GlidePluginManager.isActive(\"com.snc.csm_case_types\") && new sn_csm_case_types.CaseTypeHelper().isServiceDefinitionSelectionEnabled()))\n        return false;\n\t//hardcode for case task tables only\n    var tableHierarchy = new GlideTableHierarchy(input.table);\n    if (tableHierarchy.getHierarchy().indexOf(\"sn_customerservice_task\") === -1) {\n        return false;\n    }\n    return new sn_csm_case_types.CaseTypeHelper().hasServiceDefinitionSelectionDefined(input.table);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"table\",\r\n    \"label\": \"Table\",\r\n    \"description\": \"Table  to check\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"table_name\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4b2d950b87c220109bada7da0acb0baa","value":"4b2d950b87c220109bada7da0acb0baa"},"sys_update_name":"sys_ux_data_broker_transform_bd6694bb43012110614fb6ef4bb8f264","api_name":"sn_uib_dyn_rel_rec.onNewServiceDefinitionSelectTransform","mutates_server_data":"true","name":"onNewServiceDefinitionSelectTransform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get Plugins Info","sys_updated_on":"2021-11-24 15:26:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bdb6a59777c6301039ac088b3a1061de","sys_updated_by":"maint","sys_created_on":"2021-08-23 19:35:03","sys_name":"CI GS Plugins","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) { \n\t\n\tvar payload = [\n\t\t{\n\t\t\tid : \"com.glide.cs.chatbot\",\n\t\t\tdisplayName : \"Virtual Agent\",\n\t\t\tname : \"Glide Virtual Agent\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin : true,\n\t\t\tisStoreApp : false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.cs.chatbot\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.glide.interaction.awa\",\n\t\t\tdisplayName : \"Agent Chat\",\n\t\t\tname : \"Agent Chat\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin : true,\n\t\t\tisStoreApp : false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.interaction.awa\"\n\t\t},\n\t\t{\n\t\t\tid : \"sn_ci_analytics\",\n\t\t\tdisplayName : \"Conversational Analytics\",\n\t\t\tname : \"Conversational Analytics\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin : false,\n\t\t\tisStoreApp : true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/c53ca02a73c310108564b17afef6a7c0\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.snc.va_topic_recommender\",\n\t\t\tdisplayName : \"Topic Recommendations\",\n\t\t\tname : \"Virtual Agent Topic Recommendations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin : false,\n\t\t\tisStoreApp : true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/87c995fd53d21010a813ddeeff7b12e1\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.snc.itsm.virtualagent\",\n\t\t\tdisplayName : \"ITSM Virtual Agent Conversations\",\n\t\t\tname : \"ITSM Virtual Agent Conversations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin : false,\n\t\t\tisStoreApp : true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/134450a0b3781300787162ac16a8dc1e\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.sn_csm.virtualagent\",\n\t\t\tdisplayName : \"Customer Service Virtual Agent Conversations\",\n\t\t\tname : \"Customer Service Virtual Agent Conversations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin:true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.sn_csm.virtualagent\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.sn_hr_virtual_agent\",\n\t\t\tdisplayName : \"HR Scoped App: Virtual Agent Conversations\",\n\t\t\tname : \"HR Service Delivery Virtual Agent conversations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin:false,\n\t\t\tisStoreApp: true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/c8c5545573d8130000e588e54cf6a71a\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.snc.universal_request.va\",\n\t\t\tdisplayName : \"Universal Request: Virtual Agent Conversations\",\n\t\t\tname : \"Universal Request: Virtual Agent Conversations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.snc.universal_request.va\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.sn_fsm.virtualagent\",\n\t\t\tdisplayName : \"Field Service Management Virtual Agent Conversations\",\n\t\t\tname : \"Field Service Virtual Agent Conversations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin:false,\n\t\t\tisStoreApp: true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/b7d7aa2ab7ae10105f48228dce11a9d5\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.snc.ppm_virtualagent\",\n\t\t\tdisplayName : \"Virtual Agent for PPM\",\n\t\t\tname : \"Virtual Agent for PPM\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin:false,\n\t\t\tisStoreApp: true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/1fc89d065321101023beddeeff7b123c\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.glide.isc_virtualagent\",\n\t\t\tdisplayName : \"ISC Virtual Agent Conversations\",\n\t\t\tname : \"ISC Virtual Agent Conversations\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.isc_virtualagent\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.glide.awa.agent_affinity\",\n\t\t\tdisplayName : \"Agent Affinity\",\n\t\t\tname : \"Advanced Work Assignment - Agent Affinity\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.awa.agent_affinity\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.glide.messaging.awa\",\n\t\t\tdisplayName : \"Conversational Messaging\",\n\t\t\tname : \"Conversational Messaging\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.messaging.awa\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.snc.pa.awa\",\n\t\t\tdisplayName : \"Performance Analytics Content Pack for AWA\",\n\t\t\tname : \"Performance Analytics - Content Pack - Advanced Work Assignment\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.snc.pa.awa\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.sn.va.profanity\",\n\t\t\tdisplayName : \"Profanity filter for agent chat\",\n\t\t\tname : \"Profanity filter for agent chat\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: false,\n\t\t\tisStoreApp: true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/77d07c3b7352201076d81f8afaf6a7bb\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.glide.sensitive_data_handling\",\n\t\t\tdisplayName : \"Sensitive Data Handling\",\n\t\t\tname : \"Sensitive Data Handling\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: true,\n\t\t\tisStoreApp: false,\n\t\t\tappLink : \"/nav_to.do?uri=$allappsmgmt.do?sysparm_search=com.glide.sensitive_data_handling\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.sn_va_appt_scheduler\",\n\t\t\tdisplayName : \"Conversational Appointment Booking\",\n\t\t\tname : \"Conversational Appointment Booking\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: false,\n\t\t\tisStoreApp: true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/94cbb983db2e2010a59666041b961964\"\n\t\t},\n\t\t{\n\t\t\tid : \"com.snc.csm.engagement_center\",\n\t\t\tdisplayName : \"Engagement Messenger\",\n\t\t\tname : \"Engagement Messenger\",\n\t\t\tisInstalled : \"\",\n\t\t\tisPlugin: false,\n\t\t\tisStoreApp: true,\n\t\t\tappLink : \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/85cc1c10872a1010fb4b3a0548cb0bf2\"\n\t\t}\n\t];\n\t\n\tvar result = {\n\t\tavailablePlugins: [],\n\t\tinstalledPlugins: []\n\t};\n\t\n\tfor(var i=0; i<payload.length; i++) {\n\t\tvar link = {\n\t\t\t\"label\": \"\",\n\t\t\t\"value\": {\n\t\t\t\t\"href\": \"\"\n\t\t\t},\n\t\t\t\"type\": \"external\"\n\t\t};\n\t\tlink.label = payload[i].displayName;\n\t\tlink.value.href = payload[i].appLink;\n\t\tpayload[i].isInstalled = GlidePluginManager.isActive(payload[i].id);\n\t\tif(payload[i].isInstalled)\n\t\t\tresult.installedPlugins.push(link);\n\t\telse\n\t\t\tresult.availablePlugins.push(link);\n\t}\n\t\n\treturn result;\n\t\n}\n","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sys_ux_data_broker_transform_bdb6a59777c6301039ac088b3a1061de","api_name":"global.CI GS Plugins","mutates_server_data":"false","name":"CI GS Plugins","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Asset ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Provides all lifecycle events associated with an asset like incidents, requests etc.","sys_updated_on":"2021-09-21 06:16:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bdb77a08c332301012f6eb1e9840dd97","sys_updated_by":"admin","sys_created_on":"2021-09-20 05:50:13","sys_name":"GetAssetLifecycleEvents","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n  if(input.assetSysId === null || input.assetSysId === \"-1\") {\n\t\treturn null;\n\t}\n\tvar recordCount= new global.GlideQuery(input.table).where('sys_id',input.assetSysId).count();\n\tif(recordCount === null || recordCount === 0) {\n\t\treturn null;\n\t}\n\tvar scriptq = new sn_itam_workspace.AssetLifecycleEventsUtil;\n\tvar eventJson = scriptq.getLifecycleJSON(input.table, input.assetSysId);\n\treturn eventJson.length > 0?eventJson:null;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"assetSysId\",\r\n  \"label\": \"Asset ID\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_bdb77a08c332301012f6eb1e9840dd97","api_name":"sn_itam_workspace.GetAssetLifecycleEvents","mutates_server_data":"false","name":"GetAssetLifecycleEvents","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Encoded Query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Policy Type ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The encoded query for the data manager policy\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The policy type ID for the given data manager policy\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The target table for the data manager policy\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetches the data filter encoded query for a data manager policy. Executed by sn_cmdb_ws.CMDBWsDataBrokerHandler for standardized error handling.","sys_updated_on":"2024-07-01 05:55:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"be5cc31f4328b91017b739603ab8f2fd","sys_updated_by":"admin","sys_created_on":"2023-08-14 22:01:28","sys_name":"Get data filter encoded query","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"49","sys_tags":"","script":"function transform(input) {\n    var wrapperFunction = function() {\n        var proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n        var completedDataFilter = proxy.buildDataFilterForPreview(\n            input.policyTypeId,\n            input.table,\n            input.encodedQuery\n        );\n\n        completedDataFilter.recordCount = \"\";\n        completedDataFilter.excludedCount = \"\";\n        var gr = new GlideRecord(completedDataFilter.table);\n        completedDataFilter.tableLabel = gr.getClassDisplayValue();\n        return completedDataFilter;\n    };\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Get data filter encoded query\", wrapperFunction);\n}","acl_failure_result":"","props":"[\r\n    {\r\n       \"name\": \"table\",\r\n       \"label\": \"Table\",\r\n       \"fieldType\": \"json\",\r\n       \"readOnly\": false,\r\n       \"mandatory\": true,\r\n       \"description\": \"The target table for the data manager policy\"\r\n    },\r\n    {\r\n        \"name\": \"policyTypeId\",\r\n        \"label\": \"Policy Type ID\",\r\n        \"fieldType\": \"json\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": true,\r\n        \"description\": \"The policy type ID for the given data manager policy\"\r\n     },\r\n     {\r\n        \"name\": \"encodedQuery\",\r\n        \"label\": \"Encoded Query\",\r\n        \"fieldType\": \"json\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": true,\r\n        \"description\": \"The encoded query for the data manager policy\"\r\n     }\r\n ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_be5cc31f4328b91017b739603ab8f2fd","api_name":"sn_cmdb_ws.Get data filter encoded query","mutates_server_data":"true","name":"Get data filter encoded query","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Payload of custom definition fields (tableName, queryCondition, activeFlag).\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Retirement custom definition fields\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-20 07:11:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"be702a8f5391f110fdadddeeff7b1221","sys_updated_by":"admin","sys_created_on":"2023-09-20 07:10:34","sys_name":"Data Manager Create Retirement Custom Definition","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFn = function() {\n\t\tvar payload = input.payload;\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n\t\tvar definitionId = proxy.addRetirementCustomDefinition(payload.tableName, payload.queryCondition, payload.activeFlag);\n\n\t\treturn {\n\t\t\tdefinitionId: definitionId\n\t\t};\n\t};\n\n\treturn new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Create Retirement Custom Definition\", wrapperFn);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"payload\",\r\n    \"label\": \"Retirement custom definition fields\",\r\n    \"fieldType\": \"json\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Payload of custom definition fields (tableName, queryCondition, activeFlag).\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_be702a8f5391f110fdadddeeff7b1221","api_name":"sn_cmdb_ws.Data Manager Create Retirement Custom Definition","mutates_server_data":"true","name":"Data Manager Create Retirement Custom Definition","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"VSC calculate compliance and Refresh Score ","sys_updated_on":"2022-11-28 18:41:55","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"be71a86394301110f8773b287b8ede8d","sys_updated_by":"maint","sys_created_on":"2022-07-25 22:06:46","sys_name":"VSC Refresh Score","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar constants = new sn_vsc.SecurityCenterConstants();\n    //get PA job logs row count before execution\n    function getRowCount() {\n        var gr_logs = new GlideRecord(new sn_vsc.SecurityCenterConstants().PAJobLogs);\n        gr_logs.query();\n        return gr_logs.next() ? gr_logs.getRowCount() : '0';\n    }\n\n    var previousCount = getRowCount();\n    // get VSC calculate compliance job and execute it.\n    var compliance_job = new GlideRecord('sysauto_script');\n    if (compliance_job.get('sys_id', constants.SCMonthlyJob)) {\n        gs.executeNow(compliance_job);\n    }\n\n    //poll for 200ms to get collected state\n    var timeBeforePolling = new Date().getTime();\n    var newCount = getRowCount();\n    while (newCount === previousCount) {\n        var newTime = new Date().getTime();\n        if (newTime > timeBeforePolling + 200) {\n            newCount = getRowCount();\n        }\n    }\n\n    timeBeforePolling = new Date().getTime();\n    var state = checkState();\n    while (state === \"collecting\") {\n        newTime = new Date().getTime();\n        if (newTime > timeBeforePolling + 500) {\n            state = checkState();\n        }\n    }\n\n    function checkState() {\n        var gr_logs = new GlideRecord(new sn_vsc.SecurityCenterConstants().PAJobLogs);\n        gr_logs.orderByDesc('sys_created_on');\n        gr_logs.setLimit(1);\n        gr_logs.query();\n        if (gr_logs.next()) {\n            return gr_logs.state.toString();\n        }\n    }\n\n    if (state !== \"collecting\") {\n        return state;\n    }\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_be71a86394301110f8773b287b8ede8d","api_name":"sn_vsc.VSC Refresh Score","mutates_server_data":"false","name":"VSC Refresh Score","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Function name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sends the function name to call\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Upgrade management data broker to get upgrade details of current instance","sys_updated_on":"2024-10-15 06:58:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"be92062c9f3412107e91971b8a0a1c28","sys_updated_by":"admin","sys_created_on":"2024-09-19 06:17:24","sys_name":"Upgrade Management - Get Upgrade Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/62336aa2cc80d210f877639778ef1feb","value":"62336aa2cc80d210f877639778ef1feb"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"function transform(input) {\n\tif(input.functionName === \"getUpgradeDetails\") {\n\t\tvar data = new global.UpgradeManagementApiUtil().getUpgradeDetails();\n\n\t\treturn data;\n\t} else if(input.functionName === \"getPredictedSkippedRecordsUrl\") {\n\t\tvar data = new global.UpgradeManagementApiUtil().getPredictedSkippedRecordsUrl();\n\n\t\treturn data;\n\t} else if(input.functionName === \"getSkippedRecordsUrl\") {\n\t\tvar data = new global.UpgradeManagementApiUtil().getSkippedRecordsUrl();\n\n\t\treturn data;\n\t} else if(input.functionName === \"checkIfATFInstalled\") {\n\t\tvar data = new global.UpgradeManagementApiUtil().checkIfATFInstalled();\n\n\t\treturn data;\n\t}\n\n\tvar data = new global.UpgradeManagementApiUtil().getUpgradeDetails();\n\n\treturn data;\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"functionName\",\r\n      \"label\": \"Function name\",\r\n      \"description\": \"Sends the function name to call\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"getUpgradeDetails\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/62336aa2cc80d210f877639778ef1feb","value":"62336aa2cc80d210f877639778ef1feb"},"sys_update_name":"sys_ux_data_broker_transform_be92062c9f3412107e91971b8a0a1c28","api_name":"sn_upgrade_mgmt.Upgrade Management - Get Upgrade Details","mutates_server_data":"false","name":"Upgrade Management - Get Upgrade Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Quantity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-09-09 12:14:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bea36f6ebc423010fa9b0ad59e917a6d","sys_updated_by":"admin","sys_created_on":"2021-08-21 20:45:08","sys_name":"Create Split Asset Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"18","sys_tags":"","script":"function transporm(input) {\n\tvar quantity = parseInt(input.quantity, 10);\n\tvar newAssetSysID = new global.PreAllocatedAssets().splitRecord(input.sysId,quantity);\n\treturn newAssetSysID;\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t\t\"name\": \"sysId\",\r\n\t\t\"label\": \"Record Sys ID\",\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true\t\r\n\t},\r\n\t{\r\n\t\t\"name\": \"quantity\",\r\n\t\t\"label\": \"Quantity\",\r\n\t\t\"fieldType\": \"number\",\r\n\t\t\"mandatory\": true\t\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_bea36f6ebc423010fa9b0ad59e917a6d","api_name":"sn_itam_workspace.Create Split Asset Transform","mutates_server_data":"false","name":"Create Split Asset Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Current Page\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Feature flags\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enable infinite scrolling\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"When enabled, the list will have infinite scrolling and pagination will be hidden. User can scroll through all the rows in the table without having to click through pages.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"If there is a transform script defined, you can optionally provide arguments that can be accessed within the transform script\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"If you would like to edit how the data is displayed, you can provide a sysID to a script that will be run after the default transform script. In your custom script, you can toggle feature flags, edit column or row ordering, add custom data, et cetera.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Limit\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Limit of record count.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Lists GraphQL\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Request Metadata\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Row Limit Options\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected Menu Item\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Transform Script\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Transform script arguments\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"recordCountLimit\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-12-27 00:16:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bedd47564367111041505119ebb8f2bd","sys_updated_by":"admin","sys_created_on":"2022-12-06 06:20:16","sys_name":"Now List Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/015dd2fa796d247253ef940e685b9ebd","value":"015dd2fa796d247253ef940e685b9ebd"},"sys_created_by":"admin","sys_mod_count":"113","sys_tags":"","script":"function transform(input) {\n\tfunction menuTransform(input) {\n\t\ttry {\n\t\t\tconst {\n\t\t\t\tlistMenuLayout,\n\t\t\t} = input.graphqlData.data.GlideNowListLayoutComposite_Query.getNowListLayoutComposite;\n\n\t\t\tif (!listMenuLayout) return null;\n\n\t\t\tvar listMenuData = listMenuLayout.listMenu;\n\t\t\tvar listTreeContent = [];\n\t\t\tvar myListTreeContent = [];\n\t\t\tvar expandedItems = [];\n\t\t\tvar listMenuItems = {}; // key value pairs of all list menu items for easy access in state when reacting to actions in controller\n\t\t\tvar MY_LIST_ID = 'my_lists';\n\t\t\tvar MY_LIST_SHARED_ID = 'shared_lists';\n\t\t\tvar MY_LIST_OPENED_BY_LINK_ID = 'lists_opened_by_link';\n\t\t\tvar selectedListMenuItem = listMenuData.selectedListMenuItem || {};\n\t\t\tvar selectedTabId = listMenuData.selectedListMenuItem\n\t\t\t\t? listMenuData.selectedListMenuItem.targetTable\n\t\t\t\t: 'sys_ux_list';\n\n\t\t\tvar isExternalUser = gs.getUser().getUserRoles().includes('snc_external');\n\n\t\t\tfunction mapOldFlagsToNewFlags(flags, menuItem) {\n\t\t\t\tvar wrapCellContent;\n\t\t\t\tif (flags.overrideWordWrapUserPref) {\n\t\t\t\t\twrapCellContent = flags.wordWrap ? 'wrapOn' : 'wrapOff';\n\t\t\t\t} else {\n\t\t\t\t\twrapCellContent = 'useLineBreaksUserPref';\n\t\t\t\t}\n\t\t\t\tvar fetchHighlightedValues =\n\t\t\t\t\tflags.hideHighlightedValues === false;\n\n\t\t\t\treturn {\n\t\t\t\t\tenableCellEditing: flags.hideInlineEditing !== true,\n\t\t\t\t\tenableCellFiltering: true, // menu items cant set this, value is always true\n\t\t\t\t\tenableColumnFiltering: flags.hideColumnFiltering !== true,\n\t\t\t\t\tenableColumnGrouping: flags.hideColumnGrouping !== true,\n\t\t\t\t\tenableColumnResizing: flags.hideColumnResizing !== true,\n\t\t\t\t\tenableColumnSorting: flags.hideColumnSorting !== true,\n\t\t\t\t\tenableDeclarativeActions: flags.hideListActions !== true,\n\t\t\t\t\tenableEmptyStateImage: flags.hideEmptyStateImage !== true,\n\t\t\t\t\tenableHighlightContent: flags.hideHighlightContent !== true,\n\t\t\t\t\tenableLinks: flags.hideLinks !== true,\n\t\t\t\t\tenableQuickEdit: flags.hideQuickEdit !== true,\n\t\t\t\t\tenableReferenceLinks: flags.hideReferenceLinks !== true,\n\t\t\t\t\tenableRowSelector: flags.hideRowSelector !== true,\n\t\t\t\t\tenableRowDragDrop: flags.hideDragAndDrop !== true,\n\t\t\t\t\tenableSelectAll: flags.hideSelectAll !== true,\n\t\t\t\t\tfetchHighlightedValues: fetchHighlightedValues,\n\t\t\t\t\thighlightContent: flags.highlightContent,\n\t\t\t\t\tmaxCharacters: flags.maxCharacters,\n\t\t\t\t\tonlyEnableSelectionWhenRequiredByActions: true, // menu items cant set this, value is always true,\n\t\t\t\t\tshowTitle: flags.hideTitle !== true,\n\t\t\t\t\tshowColumnPersonalization:\n\t\t\t\t\t\tflags.hidePersonalization !== true,\n\t\t\t\t\tshowRecordCountBadge: flags.hideRecordCountBadge !== true,\n\t\t\t\t\tshowSubtitle: flags.hideLastRefreshedText !== true,\n\t\t\t\t\tshowRefreshButton: flags.hideRefreshButton !== true,\n\t\t\t\t\tshowHeader: flags.hideHeader !== true,\n\t\t\t\t\tshowFilterButton: flags.hidePanelButton !== true,\n \t\t\t\t\tshowPagination: flags.hidePagination !== true,\n\t\t\t\t\tshowPages: flags.hidePages !== true,\n\t\t\t\t\tshowRange: flags.hideRange !== true,\n\t\t\t\t\tshowPreviousPage: flags.hidePreviousPage !== true,\n\t\t\t\t\tshowNextPage: flags.hideNextPage !== true,\n\t\t\t\t\tshowFirstPage: flags.hideFirstPage !== true,\n\t\t\t\t\tshowLastPage: flags.hideLastPage !== true,\n\t\t\t\t\tshowRowsPerPageSelector:\n\t\t\t\t\t\tflags.hideRowsPerPageSelector !== true,\n\t\t\t\t\tshowRowCount: flags.hideRowCount !== true,\n\t\t\t\t\twrapCellContent: wrapCellContent,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfunction transformMenuItem(menuItem) {\n\t\t\t\tmenuItem.featureFlags = mapOldFlagsToNewFlags(\n\t\t\t\t\tmenuItem.featureFlags || {},\n\t\t\t\t\tmenuItem\n\t\t\t\t);\n\t\t\t\tvar groupBy = menuItem.groupByColumn;\n\t\t\t\tmenuItem.query =\n\t\t\t\t\t(menuItem.conditions || '') +\n\t\t\t\t\t(groupBy ? '^GROUPBY' + groupBy : '');\n\t\t\t}\n\n\t\t\tlistMenuData.categoryItems.forEach(function (category, index, arr) {\n\t\t\t\tif (category.children.length == 0) return;\n\t\t\t\tif (category.isExpanded) expandedItems.push([category.id]);\n\t\t\t\tvar children = [];\n\t\t\t\tcategory.children.forEach(function (child) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tObject.keys(selectedListMenuItem).length > 0 &&\n\t\t\t\t\t\tselectedListMenuItem.id === child.id\n\t\t\t\t\t) {\n\t\t\t\t\t\tvar actions = [];\n\t\t\t\t\t\tif (!isExternalUser) {\n\t\t\t\t\t\t\tactions.push({\n\t\t\t\t\t\t\t\ticon: 'ellipsis-vertical-fill',\n\t\t\t\t\t\t\t\tlabel: 'Show Options',\n\t\t\t\t\t\t\t\tclickActionType: 'NOW_LIST_MENU#SHOW_ACTION_OPTIONS'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchildren.push({\n\t\t\t\t\t\t\tid: child.id,\n\t\t\t\t\t\t\tlabel: child.displayValue,\n\t\t\t\t\t\t\tactions: actions,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchildren.push({\n\t\t\t\t\t\t\tid: child.id,\n\t\t\t\t\t\t\tlabel: child.displayValue,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\ttransformMenuItem(child);\n\t\t\t\t\tlistMenuItems[child.id] = child;\n\t\t\t\t});\n\t\t\t\tlistTreeContent.push({\n\t\t\t\t\tid: category.id,\n\t\t\t\t\tlabel: category.displayValue,\n\t\t\t\t\tactionable: false,\n\t\t\t\t\tchildren: children,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (!isExternalUser) {\n\t\t\t\tmyListTreeContent.push({\n\t\t\t\t\tid: MY_LIST_ID,\n\t\t\t\t\tlabel: sn_i18n.Message.getMessage('sn_now_list_common', 'Created by me'),\n\t\t\t\t\tactionable: false,\n\t\t\t\t\tdisableDrag: true,\n\t\t\t\t\tdisableDrop: true,\n\t\t\t\t\tchildren: listMenuData.menuItems.filter(menuItem => !menuItem.openedByLink).map(function (child) {\n\t\t\t\t\t\tchild.selectionPath.unshift(MY_LIST_ID);\n\t\t\t\t\t\tvar statuses = [];\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tchild.sharedUsers.length > 0 ||\n\t\t\t\t\t\t\tchild.sharedGroups.length > 0\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tstatuses.push({\n\t\t\t\t\t\t\t\ttype: 'icon',\n\t\t\t\t\t\t\t\ticon: 'group-outline',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet content = {\n\t\t\t\t\t\t\tid: child.id,\n\t\t\t\t\t\t\tlabel: child.displayValue,\n\t\t\t\t\t\t\tstatuses: statuses, // We should include statuses even if not current selected list\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tselectedListMenuItem &&\n\t\t\t\t\t\t\tselectedListMenuItem.id === child.id\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tselectedListMenuItem.selectionPath.unshift(MY_LIST_ID);\n\t\t\t\t\t\t\tcontent.actions = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ticon: 'ellipsis-vertical-fill',\n\t\t\t\t\t\t\t\t\tlabel: 'Show Options',\n\t\t\t\t\t\t\t\t\tclickActionType:\n\t\t\t\t\t\t\t\t\t\t'NOW_LIST_MENU#SHOW_ACTION_OPTIONS',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttransformMenuItem(child);\n\t\t\t\t\t\tlistMenuItems[child.id] = child;\n\t\t\t\t\t\treturn content;\n\t\t\t\t\t}),\n\t\t\t\t});\n\t\t\t\tmyListTreeContent.push({\n\t\t\t\t\tid: MY_LIST_SHARED_ID,\n\t\t\t\t\tlabel: gs.getMessage('Shared with me'),\n\t\t\t\t\tactionable: false,\n\t\t\t\t\tdisableDrag: true,\n\t\t\t\t\tdisableDrop: true,\n\t\t\t\t\tchildren: listMenuData.sharedMenuItems.map(function (menuItem) {\n\t\t\t\t\t\tlet content = {\n\t\t\t\t\t\t\tid: menuItem.id,\n\t\t\t\t\t\t\tlabel: menuItem.displayValue,\n\t\t\t\t\t\t\tdisableDrag: true,\n\t\t\t\t\t\t\tdisableDrop: true,\n\t\t\t\t\t\t};\n\t\t\t\t\t\tmenuItem.selectionPath.unshift(MY_LIST_SHARED_ID);\n\t\t\t\t\t\ttransformMenuItem(menuItem);\n\t\t\t\t\t\tlistMenuItems[menuItem.id] = menuItem;\n\t\t\t\t\t\t// if selectedItem is shared item, append shared id to selection path\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tselectedListMenuItem &&\n\t\t\t\t\t\t\tselectedListMenuItem.id === menuItem.id\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tselectedListMenuItem.selectionPath.unshift(\n\t\t\t\t\t\t\t\tMY_LIST_SHARED_ID\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontent.actions = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ticon: 'ellipsis-vertical-fill',\n\t\t\t\t\t\t\t\t\tlabel: 'Show Options',\n\t\t\t\t\t\t\t\t\tclickActionType:\n\t\t\t\t\t\t\t\t\t\t'NOW_LIST_MENU#SHOW_ACTION_OPTIONS',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn content;\n\t\t\t\t\t}),\n\t\t\t\t});\n\n\t\t\t\tmyListTreeContent.push({\n\t\t\t\t\tid: MY_LIST_OPENED_BY_LINK_ID,\n\t\t\t\t\tlabel: gs.getMessage(\"Opened by link\"),\n\t\t\t\t\tactionable: false,\n\t\t\t\t\tdisableDrag: true,\n\t\t\t\t\tdisableDrop: true,\n\t\t\t\t\tchildren: listMenuData.menuItems.filter(menuItem => menuItem.openedByLink).map(function(menuItem) {\n\t\t\t\t\t\tlet content = {\n\t\t\t\t\t\t\tid: menuItem.id,\n\t\t\t\t\t\t\tlabel: menuItem.displayValue,\n\t\t\t\t\t\t\tdisableDrag: true,\n\t\t\t\t\t\t\tdisableDrop: true,\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmenuItem.selectionPath.unshift(MY_LIST_OPENED_BY_LINK_ID);\n\t\t\t\t\t\ttransformMenuItem(menuItem);\n\t\t\t\t\t\tlistMenuItems[menuItem.id] = menuItem;\n\t\t\t\t\t\t// if selectedItem is opened by link, append id to the selection path\n\t\t\t\t\t\tif (selectedListMenuItem && selectedListMenuItem.id === menuItem.id) {\n\t\t\t\t\t\t\tselectedListMenuItem.selectionPath.unshift(MY_LIST_OPENED_BY_LINK_ID);\n\t\t\t\t\t\t\tcontent.actions = [{\n\t\t\t\t\t\t\t\t\ticon: 'ellipsis-vertical-fill',\n\t\t\t\t\t\t\t\t\tlabel: 'Show Options',\n\t\t\t\t\t\t\t\t\tclickActionType: 'NOW_LIST_MENU#SHOW_ACTION_OPTIONS'\n\t\t\t\t\t\t\t}];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn content;\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\tif (Object.keys(selectedListMenuItem).length > 0) {\n\t\t\t\t\tselectedListMenuItem['actionItems'] = [];\n\t\t\t\t\tselectedListMenuItem['actionItems'].push({\n\t\t\t\t\t\tid: 'save_a_copy',\n\t\t\t\t\t\tlabel: gs.getMessage('Save a copy'),\n\t\t\t\t\t});\n\t\t\t\t\tif (\n\t\t\t\t\t\tselectedTabId == 'sys_ux_my_list' &&\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tselectedListMenuItem.selectionPath.indexOf(MY_LIST_SHARED_ID) == -1 ||\n\t\t\t\t\t\t\tselectedListMenuItem.selectionPath.indexOf(MY_LIST_OPENED_BY_LINK_ID) == -1\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tselectedListMenuItem['actionItems'].push(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'rename',\n\t\t\t\t\t\t\t\tlabel: gs.getMessage('Rename'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'share',\n\t\t\t\t\t\t\t\tlabel: gs.getMessage('Share'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'delete',\n\t\t\t\t\t\t\t\tlabel: gs.getMessage('Delete'),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttransformMenuItem(selectedListMenuItem);\n\t\t\tvar myListExpandedItems = myListTreeContent.map(\n\t\t\t\t(listTreeContent) => [listTreeContent.id]\n\t\t\t);\n\t\t\texpandedItems.push(...myListExpandedItems);\n\n\t\t\tvar tabs = [{\n\t\t\t\tlabel: gs.getMessage(\"Default Lists\"),\n\t\t\t\ttreeContent: listTreeContent,\n\t\t\t\ttabActions: [],\n\t\t\t\treorderable: false,\n\t\t\t\tid: 'sys_ux_list',\n\t\t\t\temptyStateConfig: {\n\t\t\t\t\t\ttitle: gs.getMessage(\"No lists available\"),\n\t\t\t\t\t\tcontent: gs.getMessage(\"You can request list access from your admin.\"),\n\t\t\t\t}\n\t\t\t}];\n\n\t\t\tif (!isExternalUser) {\n\t\t\t\ttabs.push({\n\t\t\t\t\tlabel: gs.getMessage(\"My Lists\"),\n\t\t\t\t\ttreeContent: myListTreeContent,\n\t\t\t\t\ttabActions: [{\n\t\t\t\t\t\tkey: \"create-new-list\",\n\t\t\t\t\t\tlabel: gs.getMessage(\"Create new list\")\n\t\t\t\t\t}],\n\t\t\t\t\treorderable: true,\n\t\t\t\t\tid: 'sys_ux_my_list',\n\t\t\t\t\temptyStateConfig: {\n\t\t\t\t\t\ttitle: gs.getMessage(\"No lists created yet\"),\n\t\t\t\t\t\tcontent: gs.getMessage(\"To create a custom list, select Add new list.\"),\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar result = {\n\t\t\t\t// Array of tabs. Each with a label, tree content in the form that content tree expects\n\t\t\t\ttabs: tabs,\n\t\t\t\t// Current selected list menu item\n\t\t\t\texpandedItems: expandedItems,\n\t\t\t\tselectedListMenuItem: selectedListMenuItem,\n\t\t\t\tfeatureFlags: selectedListMenuItem.featureFlags,\n\t\t\t\tselectedTabId: selectedTabId,\n\t\t\t\tmenuItems: listMenuItems,\n\t\t\t\tloading: false,\n\t\t\t\tcanUserAccessList: listMenuData.canUserAccessList,\n\t\t\t\tisListIdValid: listMenuData.isListIdValid,\n\t\t\t\tlistOwner: listMenuData.listOwner,\n\t\t\t};\n\n\t\t\treturn result;\n\t\t} catch (error) {\n\t\t\tthrow new Error(\n\t\t\t\t'List menu controller data broker transform error: ' +\n\t\t\t\t\terror.message\n\t\t\t);\n\t\t}\n\t}\n\n\tconst isColumnGrouped = function (columnName, groupedColumn, isGrouped) {\n\t\treturn isGrouped && groupedColumn === columnName;\n\t};\n\n\tconst getColumnSort = function(orderBys, columnName) {\n\t    return orderBys.find(({\n\t        column_name\n\t    }) => column_name === columnName);\n\t};\n\n\tconst isColumnFiltered = function (field, fieldCountMap) {\n\t\treturn fieldCountMap[field] > 0;\n\t};\n\n\tconst getIsAllGroupsCollapsed = function (table, groupByColumn, userPref) {\n\t\tlet preferenceName =\n\t\t\t'workspace.list.' +\n\t\t\ttable +\n\t\t\t'.groupBy.' +\n\t\t\tgroupByColumn +\n\t\t\t'.defaultAsOpen';\n\t\tlet prefIndex = userPref\n\t\t\t.map(function (pref) {\n\t\t\t\treturn pref.name;\n\t\t\t})\n\t\t\t.indexOf(preferenceName);\n\t\tif (prefIndex < 0) return true;\n\t\tlet userPrefValue = userPref[prefIndex].value;\n\t\tif (userPrefValue == null) return true;\n\t\treturn userPrefValue === 'false';\n\t};\n\n\tconst getExceptionGroupIds = function (table, groupByColumn, userPref) {\n\t\tlet preferenceName =\n\t\t\t'workspace.list.' +\n\t\t\ttable +\n\t\t\t'.groupBy.' +\n\t\t\tgroupByColumn +\n\t\t\t'.exceptions';\n\t\tlet prefIndex = userPref\n\t\t\t.map(function (pref) {\n\t\t\t\treturn pref.name;\n\t\t\t})\n\t\t\t.indexOf(preferenceName);\n\t\tif (prefIndex < 0) return [];\n\t\tlet exceptions = userPref[prefIndex].value || '';\n\t\tif (!exceptions) return [];\n\t\treturn exceptions.split(',');\n\t};\n\n\tconst buildFieldCountMap = function (encodedQuery) {\n\t\tlet decodedQuery = JSON.parse(gs.base64Decode(encodedQuery));\n\t\tlet fieldMap = {};\n\t\tfunction countFields(items) {\n\t\t\titems.forEach(function (item) {\n\t\t\t\tif (item.subpredicates) {\n\t\t\t\t\tcountFields(item.subpredicates);\n\t\t\t\t} else {\n\t\t\t\t\tfieldMap[item.field] = fieldMap[item.field] + 1 || 1;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcountFields(decodedQuery.predicates);\n\t\treturn fieldMap;\n\t};\n\n\tconst buildOrderByArray = function(encodedQuery, orderByColumn, orderByIsDescending) {\n\t    const decodedQuery = JSON.parse(gs.base64Decode(encodedQuery));\n\t    const orderBys = decodedQuery.order_by;\n\t    if (orderBys.length === 0 && orderByColumn) {\n\t        orderBys.push({\n\t            ascending: !orderByIsDescending,\n\t            column_name: orderByColumn\n\t        });\n\t    }\n\n\t    return orderBys;\n\t};\n\n\tconst areAllGroupsExpandedOrCollapsed = function (\n\t\texpandAllGroups,\n\t\texceptionGroupIds,\n\t\tkey\n\t) {\n\t\tif (!(exceptionGroupIds.indexOf(key) > -1)) {\n\t\t\treturn expandAllGroups;\n\t\t}\n\t\treturn !expandAllGroups;\n\t};\n\n\tconst setCellValues = function (row) {\n\t\tlet cells = {};\n\t\tlet highlightedData = row.highlightedData || [];\n\t\tlet transformedHighlightedData = highlightedData.map(function (value) {\n\t\t\tlet newHighlightedObject = {\n\t\t\t\tcolor: value.colorName,\n\t\t\t\tvariant: value.variantName,\n\t\t\t};\n\t\t\tfor (let key in value) {\n\t\t\t\tif (key !== 'colorName' && key !== 'variantName') {\n\t\t\t\t\tnewHighlightedObject[key] = value[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn newHighlightedObject;\n\t\t});\n\t\tlet highlightedValue = {};\n\t\ttransformedHighlightedData.forEach(function (item) {\n\t\t\thighlightedValue[item.field] = item;\n\t\t});\n\t\trow.cells.forEach(function (cell) {\n\t\t\tswitch (cell.value.type) {\n\t\t\t\tcase 'boolean':\n\t\t\t\t\tcell.value.value = cell.value.value == 'true';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'number':\n\t\t\t\t\tvar cellValue = cell.value.value;\n\t\t\t\t\tcell.value.value = cellValue ? parseFloat(cellValue) : null;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pills':\n\t\t\t\t\tcell.value.value = cell.value.pills;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcell.value.highlightedValue = highlightedValue[cell.name];\n\t\t\tcells[cell.name] = cell.value;\n\t\t});\n\t\treturn cells;\n\t};\n\n\tconst foundDAsRequiringSelection = function (actions) {\n\t\tlet found = null;\n\t\tfor (let i = 0, l = actions.length; i < l; i++) {\n\t\t\tlet action = actions[i];\n\t\t\tif (action.recordSelectionRequired === true) {\n\t\t\t\tfound = action;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (action.groupedActions) {\n\t\t\t\tif (foundDAsRequiringSelection(action.groupedActions)) {\n\t\t\t\t\tfound = action;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn found !== null;\n\t};\n\n\ttry {\n\t\tconst {\n\t\t\tcurrentPage,\n\t\t\tlimit,\n\t\t\trecordCountLimit,\n\t\t\trequestMetadata,\n\t\t\trowLimitOptions,\n\t\t\tenableInfiniteScroll,\n\t\t\ttransformScriptArgs = {},\n\t\t\ttransformScriptSysId,\n\t\t\tnestBy\n\t\t} = input;\n\n\t\tlet { featureFlags = {} } = input;\n\n\t\tconst {\n\t\t\tdeclarativeActionsLayout: declarativeActions,\n\t\t\tfuzzyListCount,\n\t\t\tnowListLayout,\n\t\t} = input.graphqlData.data.GlideNowListLayoutComposite_Query.getNowListLayoutComposite;\n\n\t\tconst listMenuTransform = menuTransform(input);\n\t\tconst menuItem = listMenuTransform?.selectedListMenuItem;\n\n\t\tlet result = {\n\t\t\trecordCountLimit,\n\t\t\trowLimitOptions,\n\t\t\trequestMetadata: {\n\t\t\t\t...requestMetadata,\n\t\t\t\tcurrentPage,\n\t\t\t\tlimit,\n\t\t\t},\n\t\t\tlistMenuTransform,\n\t\t\tGlideClientScriptingEnvironment_Query:\n\t\t\t\tinput.graphqlData.data.GlideClientScriptingEnvironment_Query,\n\t\t\tGlideDomain_Query: input.graphqlData.data.GlideDomain_Query,\n\t\t\tGlideUIScript_Query: input.graphqlData.data.GlideUIScript_Query,\n\t\t\tGlideRegisteredModalQuery_Query:\n\t\t\t\tinput.graphqlData.data.GlideRegisteredModalQuery_Query,\n\t\t};\n\n\t\tif (!nowListLayout) {\n\t\t\treturn result;\n\t\t}\n\n\t\tconst {\n\t\t\tcolumnDefinitions,\n\t\t\tlegacyListLayout,\n\t\t\trowDefinitions,\n\t\t\ttableMetadata,\n\t\t\ttableMetadata: {\n\t\t\t\tencodedConcatenatedQuery,\n\t\t\t\tencodedFixedQuery,\n\t\t\t\tencodedQuery,\n\t\t\t\tgroupByDisplayValue,\n\t\t\t\tgroupedColumn,\n\t\t\t\tisChoiceAggregate,\n\t\t\t\tisDBView,\n\t\t\t\tisGrouped,\n\t\t\t\tisOmitCount,\n\t\t\t\tareColumnsPersonalized,\n\t\t\t\torderByColumn,\n\t\t\t\torderByIsDescending,\n\t\t\t\tpreferences,\n\t\t\t},\n\t\t} = nowListLayout;\n\n\t\tif (menuItem) {\n\t\t\ttableMetadata.table = menuItem.table;\n\t\t\ttableMetadata.query = menuItem.query;\n\t\t\ttableMetadata.columns = menuItem.columns;\n\t\t\ttableMetadata.view = menuItem.view;\n\t\t\ttableMetadata.tableLabel = menuItem.label;\n\t\t\ttableMetadata.listId = menuItem.id;\n\t\t\tfeatureFlags = {\n\t\t\t\t...featureFlags,\n\t\t\t\t...menuItem.featureFlags,\n\t\t\t};\n\t\t}\n\n\t\tlet expandAllGroups = false;\n\t\tlet exceptionGroupIds = [];\n\t\tconst { table: tableName } = tableMetadata;\n\n\t\tif (isGrouped) {\n\t\t\tlet isAllGroupsCollapsed = getIsAllGroupsCollapsed(\n\t\t\t\ttableName,\n\t\t\t\tgroupedColumn,\n\t\t\t\tpreferences\n\t\t\t);\n\t\t\texceptionGroupIds = getExceptionGroupIds(\n\t\t\t\ttableName,\n\t\t\t\tgroupedColumn,\n\t\t\t\tpreferences\n\t\t\t);\n\t\t\texpandAllGroups = !isAllGroupsCollapsed;\n\t\t}\n\n\t\tconst fieldCountMap = buildFieldCountMap(encodedConcatenatedQuery);\n\t\tconst orderBys = buildOrderByArray(encodedQuery, orderByColumn, orderByIsDescending);\n\t\tcolumnDefinitions.columnHeaderTextTooltip = gs.getMessage('Sort');\n\t\tcolumnDefinitions.columnFilterCustomValueEditorEmittedActions = [\"NOW_BUTTON#CLICKED\"];\n\t\tconst NO_CELL_FILTER_COLUMNS = [\"related_tags\"];\n\t\tcolumnDefinitions.columns.forEach(function (column) {\n\t\t\tif (\n\t\t\t\tcolumn.metadata.isFilterable &&\n\t\t\t\tfeatureFlags.enableCellFiltering &&\n\t\t\t\t!NO_CELL_FILTER_COLUMNS.includes(column.metadata.internalType)\n\t\t\t) {\n\t\t\t\tvar cellActions = [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'show_matching',\n\t\t\t\t\t\tlabel: gs.getMessage('Show matching'),\n\t\t\t\t\t\taction: 'LIST_CTRL#SHOW_MATCHING_CLICKED',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'filter_out',\n\t\t\t\t\t\tlabel: gs.getMessage('Filter out'),\n\t\t\t\t\t\taction: 'LIST_CTRL#FILTER_OUT_CLICKED',\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t\tcolumn.cellActions = cellActions;\n\t\t\t}\n\t\t\tvar doColumnFiltering =\n\t\t\t\tcolumn.metadata.isFilterable &&\n\t\t\t\tfeatureFlags.enableColumnFiltering;\n\t\t\tvar doColumnGrouping =\n\t\t\t\tcolumn.metadata.isGroupable &&\n\t\t\t\tfeatureFlags.enableColumnGrouping && nestBy !== column.key ;\n\t\t\tif (doColumnGrouping) {\n\t\t\t\tif (isColumnGrouped(column.key, groupedColumn, isGrouped)) {\n\t\t\t\t\tcolumn.columnHeaderActions = [{\n\t\t\t\t\t\tid: 'ungroup_by_column',\n\t\t\t\t\t\tlabel: gs.getMessage('Ungroup by {0}', column.label),\n\t\t\t\t\t\taction: 'GROUP_BY_COLUMN',\n\t\t\t\t\t}];\n\t\t\t\t} else {\n\t\t\t\t\tcolumn.columnHeaderActions = [{\n\t\t\t\t\t\tid: 'group_by_column',\n\t\t\t\t\t\tlabel: gs.getMessage('Group by {0}', column.label),\n\t\t\t\t\t\taction: 'GROUP_BY_COLUMN',\n\t\t\t\t\t}];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcolumn.columnHeaderActions = [];\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!column.metadata.isSortable ||\n\t\t\t\tfeatureFlags.enableColumnSorting === false\n\t\t\t) {\n\t\t\t\tcolumn.headerTextDisabled = true;\n\t\t\t}\n\t\t\tif (!column.icons)\n\t\t\t\tcolumn.icons = {\n\t\t\t\t\tendIcons: [],\n\t\t\t\t};\n\t\t\tif (!column.icons.endIcons) column.icons.endIcons = [];\n\n\t\t\tif (!column.sortDirection) {\n\t\t\t\tcolumn.sortDirection = \"none\";\n\t\t\t}\n\n\t\t\tconst columnSort = getColumnSort(orderBys, column.key);\n\t\t\tif (columnSort) {\n\t\t\t\tvar sortIcons = [];\n\t\t\t\tcolumn.metadata.isSorted = true;\n\t\t\t\tcolumn.metadata.isDescending = !columnSort.ascending;;\n\t\t\t\tsortIcons.push({\n\t\t\t\t\tvalue: !columnSort.ascending\n\t\t\t\t\t\t? 'sort-descending-fill'\n\t\t\t\t\t\t: 'sort-ascending-fill',\n\t\t\t\t});\n\t\t\t\tcolumn.icons.endIcons = sortIcons.concat(column.icons.endIcons);\n\n\t\t\t\tcolumn.sortDirection = orderByIsDescending ? \"descending\" : \"ascending\";\n\t\t\t} else {\n\t\t\t\tcolumn.sortDirection = \"none\";\n\t\t\t}\n\t\t\tif (isColumnFiltered(column.key, fieldCountMap)) {\n\t\t\t\tcolumn.metadata.isFiltered = true;\n\t\t\t\tcolumn.icons.endIcons.push({\n\t\t\t\t\tvalue: 'filter-fill',\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcolumn.metadata.isFiltered = false;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tcolumn.metadata.isGroupable &&\n\t\t\t\tisColumnGrouped(column.key, groupedColumn, isGrouped)\n\t\t\t) {\n\t\t\t\tvar groupIcons = [];\n\t\t\t\tgroupIcons.push({\n\t\t\t\t\tvalue: 'folder-fill',\n\t\t\t\t});\n\t\t\t\tcolumn.icons.endIcons = column.icons.endIcons.concat(\n\t\t\t\t\tgroupIcons\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\trowDefinitions.rows.forEach(function (row) {\n\t\t\tif (row.type === 'grouped') {\n\t\t\t\tvar children = row.children;\n\t\t\t\trow.groupActions = [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'show_all',\n\t\t\t\t\t\tlabel: 'Show All',\n\t\t\t\t\t\taction: 'NOW_LIST#GROUP_SHOW_ALL',\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t\tif (isChoiceAggregate) {\n\t\t\t\t\t// When grouped by choice, choices can have the same value across different tables\n\t\t\t\t\t// For example, lets say we are on task table. On task table we have a choice defined as\n\t\t\t\t\t// value: 1, display: New. On incident we can have value:1, display: Open. Because they\n\t\t\t\t\t// have the same value, we have to make sure to give a unique key. In this case a combination\n\t\t\t\t\t// of the value, displayvalue, and the choice table.\n\t\t\t\t\t// eg:\n\t\t\t\t\t//    taskNew1\n\t\t\t\t\t//    incidentOpen1\n\t\t\t\t\tvar choiceTable =\n\t\t\t\t\t\trow.nowListGroupedRowMetaData.groupChoiceTable;\n\t\t\t\t\trow.key = choiceTable + groupByDisplayValue + row.key;\n\t\t\t\t}\n\t\t\t\trow.groupedRowLabel =\n\t\t\t\t\tgroupByDisplayValue + ': ' + row.groupedRowLabel;\n\t\t\t\trow.isGroupExpanded =\n\t\t\t\t\texceptionGroupIds.length == 0\n\t\t\t\t\t\t? expandAllGroups\n\t\t\t\t\t\t: areAllGroupsExpandedOrCollapsed(\n\t\t\t\t\t\t\t\texpandAllGroups,\n\t\t\t\t\t\t\t\texceptionGroupIds,\n\t\t\t\t\t\t\t\trow.key\n\t\t\t\t\t\t  );\n\t\t\t\tif (children.length > 0) {\n\t\t\t\t\tchildren.forEach(function (row) {\n\t\t\t\t\t\trow.cells = setCellValues(row);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\trow.cells = setCellValues(row);\n\t\t\t}\n\t\t});\n\n\t\tif (featureFlags.enableQuickEdit !== false) {\n\t\t\trowDefinitions.actions = {\n\t\t\t\tactionsItems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'quick-edit',\n\t\t\t\t\t\ticon: 'pencil-outline',\n\t\t\t\t\t\tlabel: gs.getMessage('Edit form'),\n\t\t\t\t\t\taction: 'QUICK_EDIT_FORM_OPENED',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t}\n\t\tif (\n\t\t\tfeatureFlags.enableHighlightContent &&\n\t\t\tfeatureFlags.highlightContent &&\n\t\t\tfeatureFlags.highlightContent.patterns\n\t\t) {\n\t\t\trowDefinitions.highlightedContent =\n\t\t\t\tfeatureFlags.highlightContent.patterns;\n\t\t}\n\n\t\tif (featureFlags.enableReferenceLinks === false) {\n\t\t\tif (columnDefinitions?.columns) {\n\t\t\t\tcolumnDefinitions.columns.forEach(function (column, index) {\n\t\t\t\t\t// disable all reference links having column type as link, person or url but ignore first column\n\t\t\t\t\tif (\n\t\t\t\t\t\tcolumn.metadata?.internalType === 'reference' &&\n\t\t\t\t\t\tindex !== 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tcolumn.disabled = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tvar tableLabel = tableMetadata.tableLabel;\n\n\t\tconst preTransformScriptResults = {\n\t\t\tcolumnDefinitions,\n\t\t\trowDefinitions,\n\t\t\tdeclarativeActions,\n\t\t\ttableName\n\t\t};\n\n\t\tconst utils = new sn_now_list_common.ListTransformUtils();\n\t\tconst processed = transformScriptSysId\n\t\t\t? utils.processTransform(\n\t\t\t\t\ttransformScriptSysId,\n\t\t\t\t\ttransformScriptArgs,\n\t\t\t\t\tpreTransformScriptResults,\n\t\t\t\t\tfeatureFlags\n\t\t\t  )\n\t\t\t: utils.processFeatureFlags(\n\t\t\t\t\tpreTransformScriptResults,\n\t\t\t\t\tfeatureFlags\n\t\t\t  );\n\n\t\tconst actions = processed.declarativeActions\n\t\t\t? processed.declarativeActions.declarativeActions || []\n\t\t\t: [];\n\t\tconst hasDAsRequiringSelection = foundDAsRequiringSelection(actions);\n\n\t\treturn {\n\t\t\t...result,\n\t\t\tcolumnDefinitions: processed.columnDefinitions,\n\t\t\trowDefinitions: processed.rowDefinitions,\n\t\t\tdeclarativeActions: processed.declarativeActions,\n\t\t\ttableLabel,\n\t\t\texpandAllGroups : enableInfiniteScroll ? false : expandAllGroups,\n\t\t\ttableMetadata,\n\t\t\tenableInfiniteScroll,\n\t\t\tencodedQuery,\n\t\t\tencodedConcatenatedQuery,\n\t\t\tencodedFixedQuery,\n\t\t\tenableOmitCount: isOmitCount,\n\t\t\tareColumnsPersonalized,\n\t\t\tisDBView,\n\t\t\tlegacyListLayout,\n\t\t\tfeatureFlags,\n\t\t\thasDAsRequiringSelection,\n\t\t\tlistCount: {\n\t\t\t\tgetListCount: fuzzyListCount,\n\t\t\t},\n\t\t};\n\t} catch (error) {\n\t\tthrow new Error(\n\t\t\t'List controller data broker transform error: ' + error.message\n\t\t);\n\t}\n}\n","acl_failure_result":"","props":"\r\n      [\r\n        {\r\n          \"name\": \"currentPage\",\r\n          \"label\": \"Current Page\",\r\n          \"fieldType\": \"number\",\r\n          \"mandatory\": true\r\n        },\r\n\t{\r\n\t  \"name\": \"enableInfiniteScroll\",\r\n\t  \"label\": \"Enable Infinite Scroll\",\r\n\t  \"description\": \"When enabled, the list will have infinite scrolling and pagination will be hidden. User can scroll through all the rows in the table without having to click through pages.\",\r\n\t  \"readOnly\": false,\r\n\t  \"fieldType\": \"boolean\",\r\n\t  \"mandatory\": false,\r\n\t  \"defaultValue\": false\r\n        },\r\n        {\r\n          \"name\": \"featureFlags\",\r\n          \"label\": \"Feature flags\",\r\n          \"fieldType\": \"object\",\r\n          \"mandatory\": false\r\n        },\r\n        {\r\n          \"name\": \"graphqlData\",\r\n          \"label\": \"Lists GraphQL\",\r\n          \"fieldType\": \"object\",\r\n          \"mandatory\": true\r\n        },\r\n        {\r\n          \"name\": \"limit\",\r\n          \"label\": \"Limit\",\r\n          \"fieldType\": \"number\",\r\n          \"mandatory\": true\r\n        },\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\": \"nestBy\",\r\n\t\t\t\t\t\"label\": \"Nest by\",\r\n\t\t\t\t\t\"description\": \"\",\r\n\t\t\t\t\t\"readOnly\": \"false\",\r\n\t\t\t\t\t\"fieldType\": \"string\",\r\n\t\t\t\t\t\"mandatory\": false,\r\n\t\t\t\t\t\"defaultValue\": \"\"\r\n   \t\t\t },\r\n        {\r\n          \"name\": \"rowLimitOptions\",\r\n          \"label\": \"Row Limit Options\",\r\n          \"fieldType\": \"object\",\r\n          \"mandatory\": true\r\n        },\r\n        {\r\n            \"name\": \"recordCountLimit\",\r\n            \"label\": \"recordCountLimit\",\r\n            \"description\": \"Limit of record count.\",\r\n            \"readOnly\": false,\r\n            \"fieldType\": \"number\",\r\n            \"mandatory\": false,\r\n            \"defaultValue\": null\r\n        },\r\n        {\r\n          \"name\": \"requestMetadata\",\r\n          \"label\": \"Request Metadata\",\r\n          \"fieldType\": \"json\",\r\n          \"mandatory\": false\r\n        },\r\n        {\r\n          \"name\": \"selectedMenuItem\",\r\n          \"label\": \"Selected Menu Item\",\r\n          \"fieldType\": \"object\",\r\n          \"mandatory\": false\r\n        },\r\n        {\r\n            \"name\": \"transformScriptArgs\",\r\n            \"label\": \"Transform script arguments\",\r\n            \"description\": \"If there is a transform script defined, you can optionally provide arguments that can be accessed within the transform script\",\r\n            \"readOnly\": false,\r\n            \"fieldType\": \"object\",\r\n            \"mandatory\": false\r\n        },\r\n        {\r\n          \"name\": \"transformScriptSysId\",\r\n          \"label\": \"Transform Script\",\r\n          \"description\": \"If you would like to edit how the data is displayed, you can provide a sysID to a script that will be run after the default transform script. In your custom script, you can toggle feature flags, edit column or row ordering, add custom data, et cetera.\",\r\n          \"readOnly\": false,\r\n          \"fieldType\": \"reference\",\r\n          \"typeMetadata\": {\r\n            \"reference\": \"sys_script_include\"\r\n          }\r\n        }\r\n      ]\r\n    ","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/015dd2fa796d247253ef940e685b9ebd","value":"015dd2fa796d247253ef940e685b9ebd"},"sys_update_name":"sys_ux_data_broker_transform_bedd47564367111041505119ebb8f2bd","api_name":"global.Now List Transform","mutates_server_data":"false","name":"Now List Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Communication Task sys ids\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Number of participants to be fetched for sidebar discussions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Participants Limit\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of current record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name of current record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys ids of all the associated communication tasks\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetches all Sidebar discussions and Microsoft teams chats for input record","sys_updated_on":"2024-05-17 13:46:40","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bf7cb3f0e956a550f877a925412c065a","sys_updated_by":"admin","sys_created_on":"2023-04-17 10:45:57","sys_name":"Fetch all collaboration chats","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_created_by":"admin","sys_mod_count":"58","sys_tags":"","script":"function transform(input) {\n    var table = input.table;\n    var sysId = input.sysId;\n    if (!table || !sysId)\n        return;\n\n    var sidebarChatUtils = null,\n        isSidebarSupportedOnSOW = false;\n    if (GlidePluginManager.isActive('sn_oe_sfs')) {\n        sidebarChatUtils = new SOWSidebarChatUtils();\n        isSidebarSupportedOnSOW = sidebarChatUtils.isSidebarSupportedOnSOW(table, sysId);\n    }\n\n    var maxChats = gs.getProperty('sn_sow_collab.max_chats_in_collaboration_tab', 500);\n\n    var totalSidebarChats = isSidebarSupportedOnSOW ? parseInt(sidebarChatUtils.getNumberOfChats(table, sysId, input.commTaskIds)) : 0;\n    var sowCollabUtils = new SowCollabUtils();\n    var totalTeamsChats = parseInt(sowCollabUtils.getNumberOfChats(table, sysId, input.commTaskIds));\n    var limitsMap = distributeEvenly({\n        sidebarLimit: totalSidebarChats,\n        teamsLimit: totalTeamsChats,\n    }, maxChats);\n    var sidebarLimit = limitsMap.sidebarLimit;\n    var teamsLimit = limitsMap.teamsLimit;\n    var sidebarChats = isSidebarSupportedOnSOW ? sidebarChatUtils.getChatsForRecord(table, sysId, input.participantsLimit, null, sidebarLimit, input.commTaskIds) : [];\n    var teamsChats = sowCollabUtils.getPanelCardProps(sysId, null, input.commTaskIds, teamsLimit);\n    var chats = sidebarChats.concat(teamsChats);\n\n    // Sort chats based on last updated on\n    chats.sort(function(chat1, chat2) {\n        var dt1 = new GlideDateTime(chat1.updatedOn);\n        var dt2 = new GlideDateTime(chat2.updatedOn);\n        return dt2.compareTo(dt1);\n    });\n\n    return {\n        \"isTeamsPluginActive\": sowCollabUtils.isTeamsITPluginActive(),\n        \"isSidebarSupportedOnSOW\": isSidebarSupportedOnSOW,\n        \"chats\": chats,\n        \"numberOfSidebarChats\": sidebarChats.length,\n        \"numberOfTeamsChats\": teamsChats.length\n    };\n\n    function distributeEvenly(map, maxLimit) {\n        var keys = Object.keys(map);\n        var total = 0;\n        keys.forEach(function(key) {\n            total = total + map[key];\n        });\n\n        if (total < maxLimit)\n            return map;\n        else {\n            var extraChatsSize = total - maxLimit;\n            var chatLimit = parseInt(maxLimit / keys.length);\n            keys.forEach(function(key) {\n                if (extraChatsSize > 0) {\n                    if (map[key] > chatLimit) {\n                        var extraChatsInItem = map[key] - chatLimit;\n                        if (extraChatsInItem > extraChatsSize) {\n                            map[key] = map[key] - extraChatsSize;\n                            extraChatsSize = 0;\n                        } else {\n                            extraChatsSize = extraChatsSize - (map[key] - chatLimit);\n                            map[key] = chatLimit;\n                        }\n                    }\n                }\n            });\n        }\n        return map;\n    }\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table name of current record\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n    \"name\": \"sysId\",\r\n    \"label\": \"Sys Id\",\r\n    \"description\": \"Sys id of current record\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"participantsLimit\",\r\n    \"label\": \"Participants Limit\",\r\n    \"description\": \"Number of participants to be fetched for sidebar discussions\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"Int\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"commTaskIds\",\r\n    \"label\": \"Communication Task sys ids\",\r\n    \"description\": \"sys ids of all the associated communication tasks\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"array\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_update_name":"sys_ux_data_broker_transform_bf7cb3f0e956a550f877a925412c065a","api_name":"sn_sow_collab.Fetch all collaboration chats","mutates_server_data":"false","name":"Fetch all collaboration chats","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"List Menu GraphQL Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This is to transform list menu graphql response data into listMenuModel JSON","sys_updated_on":"2024-12-03 18:19:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bf931a54434431106760319a6bb8f282","sys_updated_by":"admin","sys_created_on":"2023-10-30 14:07:11","sys_name":"List Menu GQL Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/015dd2fa796d247253ef940e685b9ebd","value":"015dd2fa796d247253ef940e685b9ebd"},"sys_created_by":"admin","sys_mod_count":"24","sys_tags":"","script":"function transform(input) {\n    try {\n        var listMenuData = input.listMenuGraphqlData.data.GlideUxListMenuLayout_Query.getListMenuLayout.listMenu;\n\n        var listTreeContent = [];\n        var myListTreeContent = [];\n        var expandedItems = [];\n        var listMenuItems = {}; // key value pairs of all list menu items for easy access in state when reacting to actions in controller\n        var MY_LIST_ID = \"my_lists\";\n        var MY_LIST_SHARED_ID = \"shared_lists\";\n        var MY_LIST_OPENED_BY_LINK_ID = 'lists_opened_by_link';\n        var selectedListMenuItem = listMenuData.selectedListMenuItem || {};\n        var selectedTabId = listMenuData.selectedListMenuItem ? listMenuData.selectedListMenuItem.targetTable : 'sys_ux_list';\n\n        var isExternalUser = gs.getUser().getUserRoles().includes('snc_external');\n\n        function mapOldFlagsToNewFlags(flags, menuItem) {\n            var wrapCellContent;\n            if (flags.overrideWordWrapUserPref) {\n                wrapCellContent = flags.wordWrap ? \"wrapOn\" : \"wrapOff\";\n            } else {\n                wrapCellContent = \"useLineBreaksUserPref\";\n            }\n\n            var fetchHighlightedValues = flags.hideHighlightedValues === false;\n            if (menuItem.runHighlightedValuesQuery === null) {\n                fetchHighlightedValues = flags.hideHighlightedValues === false;\n            } else {\n                fetchHighlightedValues = menuItem.runHighlightedValuesQuery;\n            }\n\n            return {\n                enableCellEditing: flags.hideInlineEditing !== true,\n                enableCellFiltering: true, // menu items cant set this, value is always true\n                enableColumnFiltering: flags.hideColumnFiltering !== true,\n                enableColumnGrouping: flags.hideColumnGrouping !== true,\n                enableColumnResizing: flags.hideColumnResizing !== true,\n                enableColumnSorting: flags.hideColumnSorting !== true,\n                enableDeclarativeActions: flags.hideListActions !== true,\n                enableEmptyStateImage: flags.hideEmptyStateImage !== true,\n                enableHighlightContent: flags.hideHighlightContent !== true,\n                enableLinks: flags.hideLinks !== true,\n                enableQuickEdit: flags.hideQuickEdit !== true,\n                enableReferenceLinks: flags.hideReferenceLinks !== true,\n                enableRowSelector: flags.hideRowSelector !== true,\n                enableRowDragDrop: flags.hideDragAndDrop !== true,\n                enableSelectAll: flags.hideSelectAll !== true,\n                fetchHighlightedValues: fetchHighlightedValues,\n                highlightContent: flags.highlightContent,\n                maxCharacters: flags.maxCharacters,\n                onlyEnableSelectionWhenRequiredByActions: true, // menu items cant set this, value is always true,\n                showTitle: flags.hideTitle !== true,\n                showColumnPersonalization: flags.hidePersonalization !== true,\n                showRecordCountBadge: flags.hideRecordCountBadge !== true,\n                showSubtitle: flags.hideLastRefreshedText !== true,\n                showRefreshButton: flags.hideRefreshButton !== true,\n                showHeader: flags.hideHeader !== true,\n                showFilterButton: flags.hidePanelButton !== true,\n                showPagination: flags.hidePagination !== true,\n                showPages: flags.hidePages !== true,\n                showRange: flags.hideRange !== true,\n                showPreviousPage: flags.hidePreviousPage !== true,\n                showNextPage: flags.hideNextPage !== true,\n                showFirstPage: flags.hideFirstPage !== true,\n                showLastPage: flags.hideLastPage !== true,\n                showRowsPerPageSelector: flags.hideRowsPerPageSelector !== true,\n                showRowCount: flags.hideRowCount !== true,\n                wrapCellContent: wrapCellContent\n            };\n        }\n\n        function transformMenuItem(menuItem) {\n            menuItem.featureFlags = mapOldFlagsToNewFlags(menuItem.featureFlags || {}, menuItem);\n            var groupBy = menuItem.groupByColumn;\n            menuItem.query = (menuItem.conditions || '') + (groupBy ? '^GROUPBY' + groupBy : '');\n        }\n\n        listMenuData.categoryItems.forEach(function(category, index, arr) {\n            if (category.children.length == 0) return;\n\n            if (category.isExpanded) expandedItems.push([category.id]);\n\n            var children = [];\n\n\n            category.children.forEach(function(child) {\n                if (Object.keys(selectedListMenuItem).length > 0 && selectedListMenuItem.id === child.id) {\n                    var actions = [];\n                    if (!isExternalUser) {\n                        actions.push({\n                            icon: 'ellipsis-vertical-fill',\n                            label: 'Show Options',\n                            clickActionType: 'NOW_LIST_MENU#SHOW_ACTION_OPTIONS'\n                        });\n                    }\n                    children.push({\n                        id: child.id,\n                        label: child.displayValue,\n                        actions: actions,\n                    });\n                } else {\n                    children.push({\n                        id: child.id,\n                        label: child.displayValue\n                    });\n                }\n                transformMenuItem(child);\n                listMenuItems[child.id] = child;\n            });\n\n            listTreeContent.push({\n                id: category.id,\n                label: category.displayValue,\n                actionable: false,\n                children: children\n            });\n\n        });\n\n        if (!isExternalUser) {\n            myListTreeContent.push({\n                id: MY_LIST_ID,\n                label: sn_i18n.Message.getMessage('sn_now_list_common', 'Created by me'),\n                actionable: false,\n                disableDrag: true,\n                disableDrop: true,\n                children: listMenuData.menuItems.filter(menuItem => !menuItem.openedByLink).map(function(child) {\n                    child.selectionPath.unshift(MY_LIST_ID);\n                    var statuses = [];\n\n                    if (child.sharedUsers.length > 0 || child.sharedGroups.length > 0) {\n                        statuses.push({\n                            \"type\": \"icon\",\n                            \"icon\": \"group-outline\",\n                        })\n                    }\n                    let content = {\n                        id: child.id,\n                        label: child.displayValue,\n                        statuses: statuses // We should include statuses even if not current selected list\n                    };\n\n                    if (selectedListMenuItem && selectedListMenuItem.id === child.id) {\n                        selectedListMenuItem.selectionPath.unshift(MY_LIST_ID);\n                        content.actions = [{\n                            icon: 'ellipsis-vertical-fill',\n                            label: 'Show Options',\n                            clickActionType: 'NOW_LIST_MENU#SHOW_ACTION_OPTIONS'\n                        }];\n                    }\n\n                    transformMenuItem(child);\n                    listMenuItems[child.id] = child;\n                    return content;\n                })\n            });\n            myListTreeContent.push({\n                id: MY_LIST_SHARED_ID,\n                label: gs.getMessage(\"Shared with me\"),\n                actionable: false,\n                disableDrag: true,\n                disableDrop: true,\n                children: listMenuData.sharedMenuItems.map(function(menuItem) {\n                    let content = {\n                        id: menuItem.id,\n                        label: menuItem.displayValue,\n                        disableDrag: true,\n                        disableDrop: true,\n                    }\n                    menuItem.selectionPath.unshift(MY_LIST_SHARED_ID);\n                    transformMenuItem(menuItem);\n                    listMenuItems[menuItem.id] = menuItem;\n                    // if selectedItem is shared item, append shared id to selection path\n                    if (selectedListMenuItem && selectedListMenuItem.id === menuItem.id) {\n                        selectedListMenuItem.selectionPath.unshift(MY_LIST_SHARED_ID);\n                        content.actions = [{\n                            icon: 'ellipsis-vertical-fill',\n                            label: 'Show Options',\n                            clickActionType: 'NOW_LIST_MENU#SHOW_ACTION_OPTIONS'\n                        }];\n                    }\n                    return content;\n                })\n            });\n\n            myListTreeContent.push({\n                id: MY_LIST_OPENED_BY_LINK_ID,\n                label: gs.getMessage(\"Opened by link\"),\n                actionable: false,\n                disableDrag: true,\n                disableDrop: true,\n                children: listMenuData.menuItems.filter(menuItem => menuItem.openedByLink).map(function(menuItem) {\n                    let content = {\n                        id: menuItem.id,\n                        label: menuItem.displayValue,\n                        disableDrag: true,\n                        disableDrop: true,\n                    }\n                    menuItem.selectionPath.unshift(MY_LIST_OPENED_BY_LINK_ID);\n                    transformMenuItem(menuItem);\n                    listMenuItems[menuItem.id] = menuItem;\n                    // if selectedItem is opened by link, append id to the selection path\n                    if (selectedListMenuItem && selectedListMenuItem.id === menuItem.id) {\n                        selectedListMenuItem.selectionPath.unshift(MY_LIST_OPENED_BY_LINK_ID);\n                        content.actions = [{\n                                icon: 'ellipsis-vertical-fill',\n                                label: 'Show Options',\n                                clickActionType: 'NOW_LIST_MENU#SHOW_ACTION_OPTIONS'\n                        }];\n                    }\n                    return content;\n                })\n            });\n\n            if (Object.keys(selectedListMenuItem).length > 0) {\n                selectedListMenuItem[\"actionItems\"] = [];\n                selectedListMenuItem[\"actionItems\"].push({\n                    id: \"save_a_copy\",\n                    label: gs.getMessage(\"Save a copy\")\n                });\n\n                if (\n                    selectedTabId == 'sys_ux_my_list' &&\n                    (\n                        selectedListMenuItem.selectionPath.indexOf(MY_LIST_SHARED_ID) == -1 ||\n                        selectedListMenuItem.selectionPath.indexOf(MY_LIST_OPENED_BY_LINK_ID) == -1\n                    )\n                ) {\n                    selectedListMenuItem[\"actionItems\"].push({\n                        id: \"rename\",\n                        label: gs.getMessage(\"Rename\")\n                    }, {\n                        id: \"share\",\n                        label: gs.getMessage(\"Share\")\n                    }, {\n                        id: \"delete\",\n                        label: gs.getMessage(\"Delete\")\n                    });\n                }\n            }\n        }\n\n        transformMenuItem(selectedListMenuItem);\n        var myListExpandedItems = myListTreeContent.map(listTreeContent => [listTreeContent.id]);\n        expandedItems.push(...myListExpandedItems);\n\n        var tabs = [{\n            label: gs.getMessage(\"Default Lists\"),\n            treeContent: listTreeContent,\n            tabActions: [],\n            reorderable: false,\n            id: 'sys_ux_list',\n            emptyStateConfig: {\n                title: gs.getMessage(\"No lists available\"),\n                content: gs.getMessage(\"You can request list access from your admin.\"),\n            }\n        }];\n\n        if (!isExternalUser) {\n            tabs.push({\n                label: gs.getMessage(\"My Lists\"),\n                treeContent: myListTreeContent,\n                tabActions: [{\n                    key: \"create-new-list\",\n                    label: gs.getMessage(\"Create new list\")\n                }],\n                reorderable: true,\n                id: 'sys_ux_my_list',\n                emptyStateConfig: {\n                    title: gs.getMessage(\"No lists created yet\"),\n                    content: gs.getMessage(\"To create a custom list, select Add new list.\"),\n                }\n            });\n        }\n\n        var result = {\n            // Array of tabs. Each with a label, tree content in the form that content tree expects\n            tabs: tabs,\n            // Current selected list menu item\n            expandedItems: expandedItems,\n            selectedListMenuItem: selectedListMenuItem,\n            featureFlags: selectedListMenuItem.featureFlags,\n            selectedTabId: selectedTabId,\n            menuItems: listMenuItems,\n            loading: false,\n            canUserAccessList: listMenuData.canUserAccessList,\n            isListIdValid: listMenuData.isListIdValid,\n            listOwner: listMenuData.listOwner,\n        };\n\n        return result;\n    } catch (error) {\n        throw new Error(\"List menu controller data broker transform error: \" + error.message);\n    }\n}","acl_failure_result":"","props":" [\n        {\n            \"name\": \"listMenuGraphqlData\",\n            \"label\": \"List Menu GraphQL Data\",\n            \"fieldType\": \"object\",\n            \"mandatory\": true\n        }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/015dd2fa796d247253ef940e685b9ebd","value":"015dd2fa796d247253ef940e685b9ebd"},"sys_update_name":"sys_ux_data_broker_transform_bf931a54434431106760319a6bb8f282","api_name":"sn_now_list_common.List Menu GQL Transform","mutates_server_data":"false","name":"List Menu GQL Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"GlideAggregate_Query object\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-08-24 04:40:25","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"bfa4335153d630109d03ddeeff7b1218","sys_updated_by":"admin","sys_created_on":"2021-08-30 10:57:24","sys_name":"Transform Task Aggregation Response","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\tif (input.aggregateObject.data.GlideAggregate_Query.length) {\n\t\tfor (var i = 0; i < input.aggregateObject.data.GlideAggregate_Query.length; i++) {\n\t\t\tvar obj = input.aggregateObject.data.GlideAggregate_Query[i];\n\t\t\t\n\t\t\tif(obj.count == 1) {\n\t\t\t\tinput.aggregateObject.data.GlideAggregate_Query[i].groupBy[0].plural = obj.groupBy[0].displayValue.toLowerCase();\n\t\t\t} else {\n\t\t\t\tvar userLanguage = gs.getSession().getLanguage();\n\t\t\t\tvar sd = new GlideRecord('sys_documentation');\n\t\t\t\tsd.addQuery('name', obj.groupBy[0].value);\n\t\t\t\tsd.addQuery('language', userLanguage);\n\t\t\t\tsd.addNullQuery('element');\n\t\t\t\tsd.query();\n\t\t\t\tsd.next();\n\t\t\t\tinput.aggregateObject.data.GlideAggregate_Query[i].groupBy[0].plural = sd.plural.toLowerCase();\n\t\t\t}\n\t\t}\n\t}\n\treturn input.aggregateObject;\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t  \"name\": \"aggregateObject\",\r\n\t  \"label\": \"GlideAggregate_Query object\",\r\n\t  \"description\": \"\",\r\n\t  \"readOnly\": false,\r\n\t  \"fieldType\": \"object\",\r\n\t  \"mandatory\": false\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_update_name":"sys_ux_data_broker_transform_bfa4335153d630109d03ddeeff7b1218","api_name":"sn_sow_interaction.Transform Task Aggregation Response","mutates_server_data":"false","name":"Transform Task Aggregation Response","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Channels Data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Deleted Devices\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Deleted devices array\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-05-22 02:20:40","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c0381a0c434ba1102bb850e01fb8f22f","sys_updated_by":"admin","sys_created_on":"2023-05-22 02:20:40","sys_name":"Save user delivery channels","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\treturn new sn_uib_on_call.OnCallContactPref().saveUserContacts(input.channelsData, input.deletedDevices);\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"channelsData\",\n    \"label\": \"Channels Data\",\n    \"description\": \"Channels Data\",\n    \"fieldType\": \"json\",\n    \"valueType\": \"object\",\n    \"readOnly\": false,\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"deletedDevices\",\n    \"label\": \"Deleted Devices\",\n    \"description\": \"Deleted devices array\",\n    \"fieldType\": \"json\",\n    \"valueType\": \"object\",\n    \"readOnly\": false,\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_c0381a0c434ba1102bb850e01fb8f22f","api_name":"sn_uib_on_call.Save user delivery channels","mutates_server_data":"false","name":"Save user delivery channels","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-05 14:45:16","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c14029d553e2851039acddeeff7b12bb","sys_updated_by":"admin","sys_created_on":"2022-03-29 06:43:59","sys_name":"CI Landing Page Data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"21","sys_tags":"","script":"function transform() {\n    var result = {};\n\n    function getNumberOfActiveTopics() {\n        var _count = 0;\n        if (GlidePluginManager.isActive(\"com.glide.cs.chatbot\") || GlidePluginManager.isActive(\"com.glide.cs.chatbot.lite\")) {\n            var gr = new GlideAggregate('sys_cs_topic');\n            gr.addQuery(\"is_system_topic\", false);\n            gr.addQuery(\"type\", \"!=\", \"TOPIC_BLOCK\");\n            gr.addQuery(\"type\", \"!=\", \"SETUP_TOPIC\");\n            gr.addQuery(\"active\", true);\n            gr.addAggregate(\"COUNT\");\n            gr.query();\n            _count = gr.next() ? gr.getAggregate('COUNT') : 0;\n        }\n        return _count;\n    }\n\n    var queAndAnsData = [{\n        \"Question\": gs.getMessage(\"How do you currently handle incoming user requests?\"),\n        \"Answer\": gs.getMessage(\"Perhaps customer service reps field support requests on the phone or through email. You might also have a system in place to track the resolution of these issues. Whatever the case, reviewing your customer or employee support infrastructure will make the transition to a conversational platform as seamless as possible.\")\n    }, {\n        \"Question\": gs.getMessage(\"What type of agents do you want to handle these requests?\"),\n        \"Answer\": gs.getMessage(\"Both bots and live agents can work together to offer a best-in-class user support experience. Bots are effective at resolving the most frequent questions and requests. With these common issues out of the way, your live agents will be freed up to tackle the more complicated user needs.\")\n    }, {\n        \"Question\": gs.getMessage(\"Where do you want to offer support to your users?\"),\n        \"Answer\": gs.getMessage(\"Your bot and live agents can meet users right where they arefor example, in an employee portal or a third-party messaging app, like Microsoft Teams. Consider which channels are utilized most frequently in your organization, so your users wont have to go far to get the help they need.\")\n    }, {\n        \"Question\": gs.getMessage(\"What types of information do you have to support users?\"),\n        \"Answer\": gs.getMessage(\"Depending on the issue or request, users will need different types of information. For example, they may need a status update on a ticket, a relevant article from your community forum, in-depth guidance on ordering an item, and more. The scope of knowledge your organization provides will significantly impact your chat support experience.\")\n    }, {\n        \"Question\": gs.getMessage(\"What are your bot goals?\"),\n        \"Answer\": gs.getMessage(\"So, youre aware that bots can reduce costs, deflect common requests, and offer off-hours support. But what exactly are you hoping a bot will achieve for your organization? Spend some time defining the chat performance metrics for your unique use case, so that you can craft your bot with purpose.\")\n    }, ];\n\n    var active_topics_count = getNumberOfActiveTopics();\n    var topics_msg = GlidePluginManager.isActive(\"com.glide.cs.chatbot\") ? active_topics_count != \"0\" ? gs.getMessage(\"{0} active topics\", [active_topics_count]) : gs.getMessage(\"View pre-built topics\") : gs.getMessage(\"View your bot's topics\");\n\n    result[\"topics_msg\"] = topics_msg;\n    result[\"que_and_ans\"] = queAndAnsData;\n    result[\"see_more\"] = gs.getMessage(\"See more\");\n    result[\"show_less\"] = gs.getMessage(\"Show less\");\n    result[\"try_your_bot\"] = gs.getMessage(\"Test your bot\");\n    result[\"installation_successful\"] = gs.getMessage(\"Installation successful!.\");\n    result[\"installation_failed\"] = gs.getMessage(\"Install Failed!\");\n    result[\"installation_failed_suffix\"] = gs.getMessage(\"Your installation could not complete.\");\n\n    result[\"isChatbotInstalled\"] = GlidePluginManager.isActive(\"com.glide.cs.chatbot\");\n    result[\"installation_conflict_msg\"] = gs.getMessage('Application installation is unavailable because another operation is running');\n    result[\"installation_warning_message\"] = gs.getMessage('Something went wrong while tracking the progress. Please check the status');\n    result[\"here\"] = gs.getMessage('here');\n    result[\"remaining\"] = gs.getMessage('remaining');\n    result[\"achieved\"] = gs.getMessage('Achieved');\n    result[\"good_start\"] = gs.getMessage('Off to a good start');\n    result[\"keep_it_up\"] = gs.getMessage('Let\\'s keep it up!');\n    result[\"almost_there\"] = gs.getMessage('Almost there!');\n    result[\"your_a_machine\"] = gs.getMessage('Your a machine!');\n    result[\"completed\"] = gs.getMessage(' Completed');\n    result['build_now_assist'] = gs.getMessage('Build a Virtual Agent with Now Assist');\n    result['create_now_assist'] = gs.getMessage('Create a new Virtual Agent that uses Now Assist skills.');\n    result['guided_setup_turned_on'] = gs.getMessage('Now Assist in Virtual Agent is active');\n    result['guided_setup_turned_off'] = gs.getMessage('Now Assist in Virtual Agent is inactive');\n    result['guided_setup_turned_on_button'] = gs.getMessage('Manage');\n    result['guided_setup_turned_off_button'] = gs.getMessage('Turn on');\n\n    return result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_c14029d553e2851039acddeeff7b12bb","api_name":"sn_oe_sfs.CI Landing Page Data","mutates_server_data":"false","name":"CI Landing Page Data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Optional Query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"View\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"view\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-04-04 07:04:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c1b0ec1bebe6c110da1861c59c5228b7","sys_updated_by":"admin","sys_created_on":"2022-04-04 07:04:38","sys_name":"CI Get List and Record details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var tableName = input.table && input.table.trim();\n    if (!tableName) return {};\n\tvar sysId = input.sysId;\n\treturn new sn_oe_sfs.CIListAndRecordPagePropsUtil().getPageProps(tableName, sysId, input.optional_query, input.view);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"table\",\r\n    \"label\": \"Table name\",\r\n    \"description\": \"Table name\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"sysId\",\r\n    \"label\": \"Sys Id\",\r\n    \"description\": \"Sys Id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"optional_query\",\r\n    \"label\": \"Optional Query\",\r\n    \"description\": \"Optional Query\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n {\r\n    \"name\": \"view\",\r\n    \"label\": \"View\",\r\n    \"description\": \"view\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]\r\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_c1b0ec1bebe6c110da1861c59c5228b7","api_name":"sn_oe_sfs.CI Get List and Record details","mutates_server_data":"false","name":"CI Get List and Record details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Product Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-08-23 12:51:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c1c018839f441210afb85c1eca0a1ce3","sys_updated_by":"admin","sys_created_on":"2024-08-20 09:42:51","sys_name":"Get Product Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n    try {\n        var util = new sn_nowassist_admin.NowAdminAssistUtil();\n        return {\n            name: util.getSkillFamilyName(input?.productId),\n        };\n    } catch (error) {\n        gs.info(\"Error in getting product details : \" + error.toString());\n    }\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"productId\",\r\n        \"label\": \"Product Id\",\r\n        \"description\": \"Product Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_c1c018839f441210afb85c1eca0a1ce3","api_name":"sn_nowassist_admin.Get Product Details","mutates_server_data":"false","name":"Get Product Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Get zone speific time for specified timezone\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User timezone\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-28 16:11:45","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c1faeb1e53a030109d03ddeeff7b12ee","sys_updated_by":"admin","sys_created_on":"2021-06-07 12:57:25","sys_name":"Now TimeZone","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\n    var tz = input.timezone;\n    if (!tz)\n        tz = gs.getProperty('glide.sys.default.tz') || 'America/Los_Angeles';\n\n    return tz;\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t  \"name\": \"timezone\",\r\n\t  \"label\": \"User timezone\",\r\n\t  \"description\": \"Get zone speific time for specified timezone\",\r\n\t  \"readOnly\": false,\r\n\t  \"fieldType\": \"string\",\r\n\t  \"mandatory\": false\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_update_name":"sys_ux_data_broker_transform_c1faeb1e53a030109d03ddeeff7b12ee","api_name":"sn_sow_interaction.Now TimeZone","mutates_server_data":"false","name":"Now TimeZone","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Optional timestamp to force refresh of data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Policy SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Refresh timestamp\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The sys_id the policy or runtime attributes record for the policy\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Given a execution sys_id get the data manager policy details including the actual policy sys_id","sys_updated_on":"2024-05-07 11:09:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c1fb7528438db51017b739603ab8f2ba","sys_updated_by":"admin","sys_created_on":"2023-08-30 23:38:38","sys_name":"Get Data Manager Policy Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"59","sys_tags":"","script":"function transform(input) {\n    var DM = new CMDBWsDMConstants();\n\n    var wrapperFunction = function() {\n        var policySysId;\n\t\tif (input.policySysId  + \"\" == \"-1\" || !input.policySysId) {\n\t\t\treturn {\n\t\t\t\t\"policyData\": {}\n\t\t\t};\n\t\t}\n        // check if this sysId is the runtime attribute table sys_id otherwise assum it's policy sys_id\n        gr = new GlideRecord(DM.RUNTIME_ATTRIBUTE.TABLE);\n        if (gr.get(input.policySysId)) {\n            policySysId = gr.policy.sys_id + \"\";\n        } else {\n            policySysId = input.policySysId;\n        }\n\n        var proxy = new CMDBWsDMPolicyUIProxy();\n        var policyData = proxy.getPolicyInfo(policySysId);\n\n        // populate label data for policy type\n        var gr = new GlideRecord(\"cmdb_policy_type\");\n        gr.get(policyData.general_info.cmdb_policy_type + \"\");\n        policyData.policyTypeLabel = gr.getDisplayValue(\"name\");\n\n        // populate label for assignment\n        var unknownAssignment = sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"Unknown Assignment\");\n        // workaround for a legacy bug. When users select specific group in the legacy angular data manager\n        // the task assignment type is populated with user_group_field instead of specific_user_group\n        if (policyData.assignment.task_assignment_type === DM.POLICY.TASK_ASSIGNMENT_TYPE_OPTIONS.SPECIFIC_GROUP ||\n            policyData.assignment.user_group) {\n            gr = new GlideRecord(\"sys_user_group\");\n            if (!gr.get(policyData.assignment.user_group)) {\n                policyData.userGroupDisplayValue = unknownAssignment;\n            } else {\n                policyData.userGroupDisplayValue = gr.getDisplayValue(\"name\") || unknownAssignment;\n            }\n        } else if (policyData.assignment.task_assignment_type === DM.POLICY.TASK_ASSIGNMENT_TYPE_OPTIONS.SPECIFIC_USER) {\n            gr = new GlideRecord(\"sys_user\");\n            if (!gr.get(policyData.assignment.user)) {\n                policyData.userDisplayValue = unknownAssignment;\n            } else {\n                policyData.userDisplayValue = gr.getDisplayValue(\"name\") || unknownAssignment;\n            }\n        } else if (policyData.assignment.task_assignment_type === DM.POLICY.TASK_ASSIGNMENT_TYPE_OPTIONS.GROUP_FIELD) {\n            gr = new GlideRecord(\"sys_dictionary\");\n            if (!gr.get(policyData.assignment.task_management_group)) {\n                policyData.taskGroupDisplayValue = unknownAssignment;\n            } else {\n                policyData.taskGroupDisplayValue = gr.getDisplayValue(\"column_label\") || unknownAssignment;\n            }\n        } else if (policyData.assignment.task_assignment_type === DM.POLICY.TASK_ASSIGNMENT_TYPE_OPTIONS.USER_FIELD) {\n            gr = new GlideRecord(\"sys_dictionary\");\n            if (!gr.get(policyData.assignment.task_management_user)) {\n                policyData.taskUserDisplayValue = unknownAssignment;\n            } else {\n                policyData.taskUserDisplayValue = gr.getDisplayValue(\"column_label\") || unknownAssignment;\n            }\n        } else {\n            policyData.unknownAssignment = unknownAssignment;\n        }\n\n        // populate label for subflow\n        if (policyData.options.subflow) {\n            gr = new GlideRecord(\"sys_hub_flow\");\n            gr.get(policyData.options.subflow + \"\");\n            policyData.subflowDisplayValue = gr.getDisplayValue(\"name\");\n        }\n\n        // populate label for created on date\n        gr = new GlideRecord(\"cmdb_data_management_policy\");\n        gr.get(policySysId);\n        policyData.sys_created_on = gr.sys_created_on + \"\";\n\n        // populate label for schedule\n        var scheduleUtil = new CMDBWsDMScheduleDisplayUtil();\n        var scheduleLabel = scheduleUtil.getScheduleLabel(policyData.schedule);\n        if (!scheduleLabel && policyData.schedule.run_type) {\n            policyData.scheduleDisplayValue =\n                sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"Unknown Schedule\");\n        } else {\n            policyData.scheduleDisplayValue = scheduleLabel;\n        }\n\n        // update the updated_on flag for the client display\n        var gdt = new GlideDateTime(policyData.updated_on);\n        policyData.policyUpdated = gs.getMessage(\"Last saved: {0}\", gdt.getDisplayValue());\n\n        return {\n            \"policyData\": policyData\n        };\n    };\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Get data manager policy details\", wrapperFunction);\n}","acl_failure_result":"","props":"[\r\n    {\r\n       \"name\": \"policySysId\",\r\n       \"label\": \"Policy SysId\",\r\n       \"fieldType\": \"string\",\r\n       \"readOnly\": false,\r\n       \"mandatory\": true,\r\n       \"description\": \"The sys_id the policy or runtime attributes record for the policy\"\r\n    },\r\n    {\r\n       \"name\": \"refresh_timestamp\",\r\n       \"label\": \"Refresh timestamp\",\r\n       \"description\": \"Optional timestamp to force refresh of data\",\r\n       \"readOnly\": false,\r\n       \"fieldType\": \"string\",\r\n       \"mandatory\": false,\r\n       \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_c1fb7528438db51017b739603ab8f2ba","api_name":"sn_cmdb_ws.Get Data Manager Policy Details","mutates_server_data":"false","name":"Get Data Manager Policy Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-05 22:50:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c2ac6fa873d071103f3cc3ed8ff6a733","sys_updated_by":"admin","sys_created_on":"2023-07-25 01:03:54","sys_name":"De-Duplication Template Get","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tif(!input.templateSysId || input.templateSysId == ''){\n\t\treturn {};\n\t}\n\n\tif(input.templateSysId == 'new'){\n\t\t// get default values\n\t\tvar defaultRecord = new GlideRecord(\"reconcile_duplicate_template\");\n\t\tdefaultRecord.newRecord();\n\t\treturn {\n\t\t\t\"script\" : defaultRecord.getValue('script')\n\t\t};\n\t\t\n\t}\n\n\n\tvar templateId = input.templateSysId;\n    \n\tresult = sn_cmdb.DuplicateTemplate.getTemplate(templateId);\n\n\tif(result) {\n\t\tvar templateUtil = new DedupeTemplateUtil();\n\t\tresult.conditions = templateUtil.getTemplateConditions(templateId);\n\t\t\n\t\tvar scriptInfo = templateUtil.getTemplateScript(templateId);\n\t\tresult.advanced = false;\n\t\tif(scriptInfo.advanced == '1')\n\t\t\tresult.advanced = true;\n\t\tresult.script = scriptInfo.script;\n\n\t}\n\n\tvar gr = new GlideRecord('reconcile_duplicate_template');\n\tgr.get(templateId);\n\tvar library = gr.getValue('library');\n\tresult.library = library;\n\n\n\n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_c2ac6fa873d071103f3cc3ed8ff6a733","api_name":"sn_cmdb_ws.De-Duplication Template Get","mutates_server_data":"true","name":"De-Duplication Template Get","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Name of the table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Pre Fetch User Values\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Set true/false to fetch user inputs from table & sys_id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of the record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-03-31 10:11:19","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c322acceeba60110da1861c59c5228d4","sys_updated_by":"admin","sys_created_on":"2022-03-31 09:59:14","sys_name":"CI Record slushbucket","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n  var output = null;\n  try {\n    if (!input || !input.table || !input.sys_id || !input.pre_fetch_user_values) return output;\n    output = new CIPropsUtil().getFields(input.table, input.sys_id, input.pre_fetch_user_values);\n    return output;\n  } catch (e) {\n    return output;\n  }\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"table\",\r\n    \"label\": \"Table\",\r\n    \"description\": \"Name of the table\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"sys_id\",\r\n    \"label\": \"Sys Id\",\r\n    \"description\": \"Sys id of the record\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"pre_fetch_user_values\",\r\n    \"label\": \"Pre Fetch User Values\",\r\n    \"description\": \"Set true/false to fetch user inputs from table & sys_id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"boolean\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": true\r\n  }\r\n]\r\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_c322acceeba60110da1861c59c5228d4","api_name":"sn_oe_sfs.CI Record slushbucket","mutates_server_data":"false","name":"CI Record slushbucket","output_schema":"","sys_policy":""},{"private":"true","required_translations":"[ ]","batch_exclude":"false","description":"This Transform Script is to get info of user Timezone and transform date into desired format","sys_updated_on":"2024-10-18 10:15:44","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c33470e17f201210f156df857d866502","sys_updated_by":"admin","sys_created_on":"2024-09-09 16:52:13","sys_name":"Transform Sample Metrics Collection Date","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"36","sys_tags":"","script":"function transform(input) {\n    var jsonResponse = {\n        maxCollectionDate: '',\n        formattedMaxCollectionDate: '',\n        top10TablesByStorage: ''\n    };\n\n    // Filter Query for Primary Database or Primary Database Gateway/Shard\n    var primaryDBFilter = 'db_size_stats_id.storage_type=7376690077d042107d6b5631dc5a99f1^ORdb_size_stats_id.storage_type=8896690077d042107d6b5631dc5a99f8^sample_period_type=day';\n\n    // Running Glide Aggregate Query to get Recent Sample Collection Date\n    var sptsGA = new GlideAggregate('sys_physical_table_stats');\n    sptsGA.addQuery(primaryDBFilter);\n    sptsGA.setGroup(false);\n    sptsGA.addAggregate('MAX', 'sample_period_start');\n    sptsGA.query();\n\n    // Fetch the max collection date if available\n    if (sptsGA.next()) {\n        var maxCollectionDate = sptsGA.getAggregate('MAX', 'sample_period_start');\n        jsonResponse.maxCollectionDate = new GlideDateTime(maxCollectionDate).getDisplayValueInternal();\n    }\n\n    // Return early if no max collection date found\n    if (!jsonResponse.maxCollectionDate) {\n        return jsonResponse;\n    }\n\n    try {\n        // Create GlideDateTime object from maxCollectionDate\n        var gdt = new GlideDateTime(maxCollectionDate);\n\n        // Format the date for DM Console Subheader with the user's time zone\n        var displayValue = gdt.getDisplayValueLang('long');\n        if (displayValue) {\n            var timeZone = gs.getSession().getTimeZoneShortName();\n            jsonResponse.formattedMaxCollectionDate = `Data as per ${displayValue} ${timeZone}`;\n        }\n\n    } catch (error) {\n        gs.error(\"Error in transform function for Data Management Console: \" + error.message);\n    }\n\n    // Get filter query for top 10 tables  \n    const spts = new GlideAggregate(\"sys_physical_table_stats\");\n    spts.addQuery(\"sample_period_start\", new GlideDateTime(maxCollectionDate));\n    spts.addQuery(primaryDBFilter);\n    spts.addAggregate(\"SUM\", \"table_size_in_gb\");\n    spts.groupBy(\"table_group\");\n    spts.orderByAggregate(\"SUM\", \"table_size_in_gb\");\n    spts.setLimit(9);\n    spts.query();\n\n    const top10tableGroups = [];\n    while (spts.next()) {\n        top10tableGroups.push(spts.getValue(\"table_group\"));\n    }\n    const top10filterQuery = top10tableGroups.map(group => `table_group=${group}`).join('^OR');\n    jsonResponse.top10TablesByStorage = top10filterQuery;\n\n    return jsonResponse;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d32e27b304752210559073c06a02f750","value":"d32e27b304752210559073c06a02f750"},"sys_update_name":"sys_ux_data_broker_transform_c33470e17f201210f156df857d866502","api_name":"global.Transform Sample Metrics Collection Date","mutates_server_data":"false","name":"Transform Sample Metrics Collection Date","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Chat Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Chat Type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Number of participants to be fetched for sidebar discussions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Participants Limit\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Participants Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of chat record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of current record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of sidebar chat participant\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name of current record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Type of chat to be fetched, valid values: microsoft_teams_chat or sidebar_discussion\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetch one collab chat of type \"sidebar_discussion\" or \"microsoft_teams_chat\"","sys_updated_on":"2023-07-02 17:48:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c35293bc936e21105f5effbd1dba1086","sys_updated_by":"admin","sys_created_on":"2023-04-29 18:01:09","sys_name":"Fetch one collab chat","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_created_by":"admin","sys_mod_count":"16","sys_tags":"","script":"function transform(input) {\n    var type = input.type;\n    var chatSysId = input.chatSysId;\n    var table = input.table;\n    var sysId = input.sysId;\n    var participantSysId = input.participantSysId;\n    if (!table || !sysId || !type || (!chatSysId && !participantSysId))\n        return;\n\n    var isSidebarPluginActive = GlidePluginManager.isActive('sn_oe_sfs');\n    if (isSidebarPluginActive && type == \"sidebar_discussion\" && gs.nil(chatSysId)) {\n        var member = new GlideRecord('sys_cs_collab_member');\n        if (member.get(participantSysId))\n            chatSysId = member.getValue('collab_chat');\n    }\n\n    if (gs.nil(chatSysId))\n        return [];\n\n    if (isSidebarPluginActive && type == \"sidebar_discussion\")\n        return new SOWSidebarChatUtils().getChatsForRecord(table, sysId, input.participantsLimit, chatSysId);\n    if (type == \"microsoft_teams_chat\")\n        return new SowCollabUtils().getPanelCardProps(sysId, chatSysId);\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table name of current record\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n    \"name\": \"sysId\",\r\n    \"label\": \"Sys Id\",\r\n    \"description\": \"Sys id of current record\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"chatSysId\",\r\n    \"label\": \"Chat Sys Id\",\r\n    \"description\": \"Sys id of chat record\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"type\",\r\n    \"label\": \"Chat Type\",\r\n    \"description\": \"Type of chat to be fetched, valid values: microsoft_teams_chat or sidebar_discussion\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"participantSysId\",\r\n    \"label\": \"Participants Sys Id\",\r\n    \"description\": \"Sys id of sidebar chat participant\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n{\r\n    \"name\": \"participantsLimit\",\r\n    \"label\": \"Participants Limit\",\r\n    \"description\": \"Number of participants to be fetched for sidebar discussions\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"Int\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]\r\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_update_name":"sys_ux_data_broker_transform_c35293bc936e21105f5effbd1dba1086","api_name":"sn_sow_collab.Fetch one collab chat","mutates_server_data":"false","name":"Fetch one collab chat","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Group Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"On-Call Group Name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-11-22 14:55:32","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c3e0c8a600377410f877f4fb60521bce","sys_updated_by":"maint","sys_created_on":"2021-11-16 04:07:52","sys_name":"Fetch On-Call Groups Available","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7e3c2481539260100c54ddeeff7b127b","value":"7e3c2481539260100c54ddeeff7b127b"},"sys_created_by":"maint","sys_mod_count":"17","sys_tags":"","script":"function transform(input) {\n    var output = [];\n    var labels = [];\n    if (input.groupName) {\n        var gr = new GlideRecord('cmn_rota');\n        gr.addActiveQuery();\n        gr.addQuery('group.name', 'CONTAINS', input.groupName + '');\n        gr.query();\n        while (gr.next()) {\n            var obj = {};\n            obj.id = gr.group.sys_id + '';\n            obj.label = gr.group.name + '';\n            if (labels.indexOf(gr.group.sys_id + '') === -1) {\n                labels.push(gr.group.sys_id + '');\n                output.push(obj);\n            }\n        }\n\t}\n    return output;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"groupName\",\n    \"label\": \"Group Name\",\n    \"description\": \"On-Call Group Name\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7e3c2481539260100c54ddeeff7b127b","value":"7e3c2481539260100c54ddeeff7b127b"},"sys_update_name":"sys_ux_data_broker_transform_c3e0c8a600377410f877f4fb60521bce","api_name":"sn_sow_on_call.Fetch On-Call Groups Available","mutates_server_data":"false","name":"Fetch On-Call Groups Available","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Fetching geo routing details","sys_updated_on":"2024-10-11 09:23:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c3e366af7f2012100a3426d6ac8665a1","sys_updated_by":"admin","sys_created_on":"2024-09-16 06:06:09","sys_name":"Lookup Geo Routing Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    try {\n        var result = sn_one_extend.GenerativeAIUtility.getGeoRoutingDetails();\n        result = typeof result === \"string\" ? JSON.parse(result) : result;\n        return result.geoRoutingEnabled;\n    } catch (error) {\n        gs.error(\"Failed to fetch geo routing details :\" + error.toString());\n        return error.toString();\n    }\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_c3e366af7f2012100a3426d6ac8665a1","api_name":"sn_nowassist_admin.Lookup Geo Routing Details","mutates_server_data":"false","name":"Lookup Geo Routing Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Class Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Class name to filter results\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Date Type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Id of type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Metric\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Metric to search on\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Type: class, service, group\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get the pie chart data for the CMDB Health Dashboard Submetrics page","sys_updated_on":"2024-04-05 22:15:52","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c3e811c3a3d502105c01b6ae041e6108","sys_updated_by":"admin","sys_created_on":"2024-04-05 21:56:37","sys_name":"CMDB Health Get pie chart data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\tvar util = new sn_cmdb_ws.CMDBWsHealthDashboardUtil();\n\tvar id = input.id;\n\tvar dataType = input.dataType;\n\tvar metric = input.metric;\n\tvar className = input.className;\n\treturn util.getPieCharts(dataType,id,metric,className);\n}","acl_failure_result":"","props":"[\r\n    {\r\n      \"name\": \"dataType\",\r\n      \"label\": \"Date Type\",\r\n      \"description\": \"Type: class, service, group\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false\r\n    },\r\n   {\r\n      \"name\": \"id\",\r\n      \"label\": \"ID\",\r\n      \"description\": \"Id of type\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false\r\n    },\r\n   {\r\n      \"name\": \"className\",\r\n      \"label\": \"Class Name\",\r\n      \"description\": \"Class name to filter results\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false\r\n    },\r\n   {\r\n      \"name\": \"metric\",\r\n      \"label\": \"Metric\",\r\n      \"description\": \"Metric to search on\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false\r\n    }\r\n ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_c3e811c3a3d502105c01b6ae041e6108","api_name":"sn_cmdb_ws.CMDB Health Get pie chart data","mutates_server_data":"false","name":"CMDB Health Get pie chart data","output_schema":"","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"GraphQL Data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Show Comments\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Show Flag\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Show Helpful\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Show Rating\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Show Related Articles\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Transform the knowledge record details.","sys_updated_on":"2024-08-20 06:21:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c414d189c74250108ad4010703c26003","sys_updated_by":"admin","sys_created_on":"2020-07-15 01:59:12","sys_name":"KB details transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n\tvar data = input.graphqlData.data.AppKnowledge_Query.getArticleDetails;\n\n\t/*\n\tControl various feature/functionality on article view  page on the base of page level and global properties. If page level properties are not defined for a given workspace/experience, then it will be controlled by global properties. If defined for a given workspace, then both page level and global properties will be honored by performing 'and' operation between two.\n\t*/\n\n\tdata.showStarRating = global.JSUtil.nil(input.showRating) ? data.showStarRating  : data.showStarRating && input.showRating;\n\tdata.showYNRating = global.JSUtil.nil(input.showHelpful) ? data.showYNRating  : data.showYNRating && input.showHelpful;\n\tdata.showFlag = global.JSUtil.nil(input.showFlag) ? data.showFlag  : data.showFlag && input.showFlag;\n\tdata.showFeedbackComments = global.JSUtil.nil(input.showComments) ? data.showFeedbackComments  : data.showFeedbackComments && input.showComments;\n\tdata.showRelatedArticles = global.JSUtil.nil(input.showRelatedArticles) ? true  : input.showRelatedArticles;\n\n\tvar versionInfo = {};\n\tvar selectedVersion = [];\n\tvar versions = [];\n\tvar versionData = data.versionDetails;\n\tvar versionHistory = versionData.history;\n\tif(versionData.isInstalled && versionData.isEnabled)\n\t\tfor(var i=0;i<versionHistory.length;i++){\n\t\t\tvar version = {};\n\t\t\tversion.id = versionHistory[i].sysId;\n\t\t\tversion.label = versionHistory[i].versionNumber;\n\t\t\tversion.sysClassName = versionHistory[i].sysClassName;\n\n\t\t\tversions.push(version);\n\t\t}\n\tversionInfo.versions=versions;\n\t\n\tvar articleInfo = data.articleInfo;\n\tif(versions.length>0){\n\t\tversionInfo.isHiddenVersion = false;\n\t\tselectedVersion.push(data.articleSysId);\n\t}\n\tversionInfo.selectedVersion = selectedVersion;\n\tdata.versionInfo =versionInfo;\n\t\n\tvar languageInfo = {};\n\tvar selectedLangVersion = [];\n\tvar langVersions = [];\n\tvar languageDetails = data.languageDetails;\n\tfor(i=0;i<languageDetails.length;i++){\n\t\tvar langVersion = {};\n\t\tlangVersion.id = languageDetails[i].sysId;\n\t\tlangVersion.label = languageDetails[i].label;\n\t\t\n\t\tlangVersions.push(langVersion);\n\t\tif(languageDetails[i].selected)\n\t\t\tselectedLangVersion.push(languageDetails[i].sysId);\n\t\t}\n\tlanguageInfo.langVersions=langVersions;\n\tif(langVersions.length>0){\n\t\tlanguageInfo.isHiddenVersion = false;\n\t}\n\tlanguageInfo.selectedLangVersion = selectedLangVersion;\n\tdata.languageInfo =languageInfo;\n\t\n\tvar secondaryFields = [];\n\t\n\tvar field1 = {};\n\tfield1.type = \"timeToRead\";\n\tfield1.icon = \"clock-outline\";\n\tfield1.text = \"\";\n\tfield1.column = \"timeToRead\";\n\tfield1.screenReaderText = gs.getMessage(\"Article takes {0} minutes to read\");\n\tsecondaryFields.push(field1);\n\t\n\tvar field2 = {};\n\tfield2.type = \"date\";\n\tfield2.icon = \"calendar-outline\";\n\tfield2.text = gs.getMessage(\"Updated {0}\");\n\tfield2.value = articleInfo.sysUpdatedOn;\n\tfield2.column = \"sysUpdatedOn\";\n\tsecondaryFields.push(field2);\n\t\n\tif(articleInfo.sysViewCount != '-1') {\n\t\tvar field3 = {};\n\t\tfield3.type = \"string\";\n\t\tfield3.icon = \"eye-outline\";\n\t\tfield3.column = \"viewCount\";\n\t\tif(articleInfo.sysViewCount == 1){\n\t\t\tfield3.text = gs.getMessage(\"{0} view\",articleInfo.sysViewCount);\n\t\t\tfield3.screenReaderText = gs.getMessage(\"Article has {0} view\",articleInfo.sysViewCount);\n\t\t}\n\t\telse{\n\t\t\tfield3.text = gs.getMessage(\"{0} views\",articleInfo.sysViewCount);\n\t\t\tfield3.screenReaderText = gs.getMessage(\"Article has {0} views\",articleInfo.sysViewCount);\n\t\t}\n\t\tsecondaryFields.push(field3);\n\t}\n\t\n\tif(data.showStarRating && articleInfo.rating != '-1') {\n\t\tvar field4 = {};\n\t\tfield4.type = \"string\";\n\t\tfield4.icon = \"star-outline\";\n\t\tfield4.column = \"rating\";\n\t\tfield4.text = gs.getMessage(\"Average rating {0}/5\",articleInfo.rating);\n\t\tfield4.screenReaderText = gs.getMessage(\"Article has average rating - {0} out of 5 stars\",articleInfo.rating);\n\t\tsecondaryFields.push(field4);\n\t}\n\t\n\tdata.secondaryFields = secondaryFields;\n\t\n\tif(articleInfo.displayAttachments){\n\t\tvar attachments = new GlideRecord('sys_attachment');\n\t\tattachments.addQuery('table_sys_id', data.articleSysId);\n\t\tattachments.addQuery('table_name', articleInfo.sysClassName);\n\t\tattachments.query();\n\t\tarticleInfo.hasAttachments = attachments.next();\n\t}\n\t\n\treturn data;\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"showHelpful\",\n        \"label\": \"Show Helpful\",\n        \"description\": \"Show Helpful\",\n        \"readOnly\": false,\n        \"fieldType\": \"boolean\",\n        \"mandatory\": false,\n        \"defaultValue\": \"true\"\n    },\n    {\n        \"name\": \"showRating\",\n        \"label\": \"Show Rating\",\n        \"description\": \"Show Rating\",\n        \"readOnly\": false,\n        \"fieldType\": \"boolean\",\n        \"mandatory\": false,\n        \"defaultValue\": \"true\"\n    },\n    {\n        \"name\": \"showFlag\",\n        \"label\": \"Show Flag\",\n        \"description\": \"Show Flag\",\n        \"readOnly\": false,\n        \"fieldType\": \"boolean\",\n        \"mandatory\": false,\n        \"defaultValue\": \"true\"\n    },\n    {\n        \"name\": \"showRelatedArticles\",\n        \"label\": \"Show Related Articles\",\n        \"description\": \"Show Related Articles\",\n        \"readOnly\": false,\n        \"fieldType\": \"boolean\",\n        \"mandatory\": false,\n        \"defaultValue\": \"true\"\n    },\n    {\n        \"name\": \"showComments\",\n        \"label\": \"Show Comments\",\n        \"description\": \"Show Comments\",\n        \"readOnly\": false,\n        \"fieldType\": \"boolean\",\n        \"mandatory\": false,\n        \"defaultValue\": \"true\"\n    },\n    {\n        \"name\": \"graphqlData\",\n        \"label\": \"GraphQL Data\",\n        \"description\": \"\",\n        \"readOnly\": false,\n        \"fieldType\": \"object\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_c414d189c74250108ad4010703c26003","api_name":"sn_km_uib.KB details transform","mutates_server_data":"false","name":"KB details transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-27 15:06:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c44562c5534bb510c10eddeeff7b123c","sys_updated_by":"admin","sys_created_on":"2023-12-10 02:03:07","sys_name":"Get workflows for trigger rule","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform (input) {\n\tvar workFlows = [];\n\tworkFlows = new sn_uib_on_call.OnCallTriggerRule().getWorkflows();\n\treturn {workFlows, defaultFlow : gs.getProperty(\"sn_uib_on_call.workflow_for_trigger_rule\")};\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_c44562c5534bb510c10eddeeff7b123c","api_name":"sn_uib_on_call.Get workflows for trigger rule","mutates_server_data":"false","name":"Get workflows for trigger rule","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Detection Impact\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Configure Prompt injection for Now Assist Admin Skills","sys_updated_on":"2024-11-13 07:29:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c450ae1d9f28921050df2e5af90a1c58","sys_updated_by":"admin","sys_created_on":"2024-09-09 06:03:44","sys_name":"Configure Prompt injection for Skills","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"48","sys_tags":"","script":"function transform(input) {\n    var detectionImpact = input.detectionImpact;\n    if (gs.nil(detectionImpact)) {\n        return;\n    }\n\n    var isUpdated = false;\n\n    try {\n        // var naaUtil = new sn_nowassist_admin.NowAdminAssistUtil();\n        var guardrailsUtil = new sn_nowassist_admin.NowAssistAdminGuardrails();\n        var CONSTANTS = new sn_nowassist_admin.NowAdminAssistMetadata();\n        var NAA_GUARDIAN_CONSTANTS = CONSTANTS.NOW_ASSIST_GUARDIAN;\n\n        // var controlSettingDataGr = new GlideRecord('sys_gen_ai_control_setting_data');\n        // controlSettingDataGr.addQuery(\"control_setting.name\", NAA_GUARDIAN_CONSTANTS.PROMPT_INJECTION_TYPE);\n        // controlSettingDataGr.query();\n\n        // var skills = [];\n        // if (controlSettingDataGr.hasNext()) {\n        //     while (controlSettingDataGr.next()) {\n        //         var skillConfigId = controlSettingDataGr?.control_data?.target?.toString();\n        //         skills.push({ id: skillConfigId });\n        //     }\n        // } else {\n        //     skills = naaUtil.getAllActiveSkills();\n        // }\n\n        // var result = guardrailsUtil.updateDetectionImpact(skills, detectionImpact, NAA_GUARDIAN_CONSTANTS.PROMPT_INJECTION_TYPE);\n        var result = guardrailsUtil.updateDetectionImpactForPromptInjection(detectionImpact);\n\n        //Check if the detection impact is Updated\n        var piControlSettingData = guardrailsUtil._getControlSettingDataByType(NAA_GUARDIAN_CONSTANTS.PROMPT_INJECTION_TYPE);\n        var newDetectionImpact = piControlSettingData && piControlSettingData[\"detectionImpact\"];\n\n        if (newDetectionImpact === detectionImpact) {\n            isUpdated = true;\n        } else {\n            gs.error(\"Failed to update detection impact.\");\n        }\n\n    } catch (error) {\n        gs.error(\"Error updating detection impact: \" + error.toString());\n    }\n\n    return isUpdated;\n}","acl_failure_result":"","props":"[\n{\n      \"name\": \"detectionImpact\",\n      \"label\": \"Detection Impact\",\n      \"description\": \"Detection Impact\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": false\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_c450ae1d9f28921050df2e5af90a1c58","api_name":"sn_nowassist_admin.Configure Prompt injection for Skills","mutates_server_data":"true","name":"Configure Prompt injection for Skills","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"gformLastRefresh\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-27 13:23:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c4b31b34a740011003396c94d17901f0","sys_updated_by":"admin","sys_created_on":"2021-11-23 19:04:52","sys_name":"Record Information - Change","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n\tif (!input || !input.table || !input.sysId)\n\t\treturn { error: gs.getMessage('ERROR table: {0} sysId: {1}', [input.table, input.sysId]) };\n\n\tvar changeGr = new GlideRecordSecure(input.table);\n    if (changeGr.get(input.sysId) && changeGr.canRead()) {\n        var changeInfo = new ChangeInfo(changeGr);\n        return changeInfo.getRecordInfo();\n    }\n\n    return {};\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"gformLastRefresh\",\r\n  \"label\": \"gformLastRefresh\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"integer\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_update_name":"sys_ux_data_broker_transform_c4b31b34a740011003396c94d17901f0","api_name":"sn_sow_chg.Record Information - Change","mutates_server_data":"false","name":"Record Information - Change","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"End of Last Month","sys_updated_on":"2024-04-07 19:13:15","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c4c6c32fff1102105408ffffffffff9b","sys_updated_by":"admin","sys_created_on":"2024-04-07 19:13:15","sys_name":"End of Last Month","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input){\n\tvar endOfMonth = gs.endOfLastMonth();\n\treturn endOfMonth.split(' ')[0];\n}\t","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_update_name":"sys_ux_data_broker_transform_c4c6c32fff1102105408ffffffffff9b","api_name":"sn_ih_usage_app.End of Last Month","mutates_server_data":"false","name":"End of Last Month","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Checks if current user has sn_nowassist_admin.user role","sys_updated_on":"2024-06-20 06:07:25","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c5189d5b9f720210afb85c1eca0a1c01","sys_updated_by":"admin","sys_created_on":"2024-06-20 06:07:25","sys_name":"NowAssistAdminUser","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var util = new NowAdminAssistUtil();\n    return util.isNowAssistAdminUser();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_c5189d5b9f720210afb85c1eca0a1c01","api_name":"sn_nowassist_admin.NowAssistAdminUser","mutates_server_data":"false","name":"NowAssistAdminUser","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"List of group ids added to the  subscription\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of the subscription\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"groupIdList\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"subscriptionId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get allocated user and group counts on allocating the groups specified in groupIdList to the subscription. This is not the total allocation count","sys_updated_on":"2024-09-09 16:12:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c52c63ea436a61101f6d73e60db8f26b","sys_updated_by":"maint","sys_created_on":"2023-05-05 07:16:19","sys_name":"Get Allocated User and Groups Counts","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_created_by":"maint","sys_mod_count":"24","sys_tags":"","script":"/**\n * Data broker to get group and user counts currently being added to the subscription\n * @param {object} input - Gets subscriptionId and groupIds as input as defined in the Properties\n * @return {object} with user and group counts\n */\nfunction transform(input) {\n    let returnVal = {};\n    if ((!input.groupIdList) || (input.groupIdList.length === 0))\n        return returnVal;\n\n    if (!gs.nil(input.subscriptionId)) {\n        try {\n            returnVal = new global.GlideQuery('sn_sub_man_st_subscribed_groups')\n                .where('group', 'IN', input.groupIdList)\n                .where('subscription.sys_id', input.subscriptionId)\n                .aggregate('count')\n                .aggregate('sum', 'active_users_count_int')\n                .selectOne()\n                .get();\n\n\n        } catch (err) {\n            const errMessage = 'Could not add get allocated user and group counts for subscription Id: ' + input.subscriptionId;\n            gs.addErrorMessage(errMessage + ' with error ' + err.message);\n            return {\n                'error': errMessage\n            };\n        }\n    }\n    return returnVal;\n\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\":\"subscriptionId\",\r\n      \"label\":\"subscriptionId\",\r\n      \"description\":\"Sys id of the subscription\",\r\n      \"fieldType\":\"string\",\r\n      \"mandatory\":true\r\n   },\r\n {\r\n      \"name\":\"groupIdList\",\r\n      \"label\":\"groupIdList\",\r\n      \"description\":\"List of group ids added to the  subscription\",\r\n      \"fieldType\":\"array\",\r\n      \"mandatory\":true\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_update_name":"sys_ux_data_broker_transform_c52c63ea436a61101f6d73e60db8f26b","api_name":"sn_sub_man.Get Allocated User and Groups Counts","mutates_server_data":"false","name":"Get Allocated User and Groups Counts","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This is used to get task to ci table name","sys_updated_on":"2023-09-20 04:34:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c62cfd4753513110c445ddeeff7b125d","sys_updated_by":"admin","sys_created_on":"2023-09-20 04:30:23","sys_name":"Get task to ci table name","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\tvar DM = new CMDBWsDMConstants();\n\tvar wrapperFn = function() {\n\n\t\tvar taskUiProxy = new CMDBWsDMTaskUIProxy();\n\t\tvar taskSysId = input.sysId;\n\t\treturn taskUiProxy.getTaskToCiTableName(taskSysId);\n\t};\n\n\treturn new CMDBWsDataBrokerHandler().execute(DM.DM_ERROR_SOURCE, \"Get task to ci table name\", wrapperFn);\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys ID\",\r\n  \"description\": \"Task Sys ID\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_c62cfd4753513110c445ddeeff7b125d","api_name":"sn_cmdb_ws.Get task to ci table name","mutates_server_data":"false","name":"Get task to ci table name","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Check whether the conversational coverage section should be shown to the user in catalog builder homepage","sys_updated_on":"2023-12-14 13:20:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c6a5c0a6774331105e3db2a07b5a99be","sys_updated_by":"admin","sys_created_on":"2023-12-14 06:20:10","sys_name":"Check visibility of conversational coverage section","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/e92e72c9b7021010e54deb56ee11a9bf","value":"e92e72c9b7021010e54deb56ee11a9bf"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    //Conversational coverage section is displayed in catalog builder homepage only if 'Catalog Conversational Coverage' plugin is installed and user has catalog_admin role\n    return GlidePluginManager.isActive(\"sn_catalog_con_cov\") && gs.hasRole(\"catalog_admin\");\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e92e72c9b7021010e54deb56ee11a9bf","value":"e92e72c9b7021010e54deb56ee11a9bf"},"sys_update_name":"sys_ux_data_broker_transform_c6a5c0a6774331105e3db2a07b5a99be","api_name":"sn_catalog_builder.Check visibility of conversational coverage section","mutates_server_data":"false","name":"Check visibility of conversational coverage section","output_schema":"","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"Optional timestamp to force refresh of data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Refresh timestamp\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetches tab configuration for Data Manager Policies list page tabs, including translated tab labels, counts, and each tab's table and filter","sys_updated_on":"2024-06-18 06:08:18","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c6f9933053e83510fdadddeeff7b12e9","sys_updated_by":"admin","sys_created_on":"2023-08-07 05:29:47","sys_name":"DM - Get Policies tabs config","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"42","sys_tags":"","script":"function transform(input) {\n    var DM = new CMDBWsDMConstants();\n    var WS = new CMDBWsConstants();\n\n    var PUBLISHED_POLICIES = sn_i18n.Message.getMessage('sn_cmdb_ws', 'Published policies');\n    var DRAFT_POLICIES = sn_i18n.Message.getMessage('sn_cmdb_ws', 'Draft policies');\n    var DEACTIVATED_POLICIES = sn_i18n.Message.getMessage('sn_cmdb_ws', 'De-activated policies');\n    var POLICIES_FAILING_EVALUATION = sn_i18n.Message.getMessage('sn_cmdb_ws', 'Policies failing evaluation');\n    var EXCLUDE_OOB_DEPENDENT_POLICY_TYPE_FILTER = \"\" + DM.RUNTIME_ATTRIBUTE.POLICY + \".\" + DM.CMDB_POLICY_TYPE_CATEGORIES.CMDB_POLICY_TYPE + \"!=\" + DM.OOB_POLICY_TYPES.DEPENDENT_CI_ARCHIVE.sys_id + \"^\" + \n    DM.RUNTIME_ATTRIBUTE.POLICY + \".\" + DM.CMDB_POLICY_TYPE_CATEGORIES.CMDB_POLICY_TYPE + \"!=\" + DM.OOB_POLICY_TYPES.DEPENDENT_CI_DELETION.sys_id + \"^\" +\n    DM.RUNTIME_ATTRIBUTE.POLICY + \".\" + DM.CMDB_POLICY_TYPE_CATEGORIES.CMDB_POLICY_TYPE + \"!=\" + DM.OOB_POLICY_TYPES.DEPENDENT_CI_RETIRE.sys_id + \"\";\n    var ACTION_CONFIG = {\n        DM_DRAFT_DEACTIVATED_POLICY_ACTIONS: '66e3c307531731101152ddeeff7b12fa'\n    };\n\n    var TAB_CONFIGS = {\n        'PUBLISHED_POLICIES_TAB': {\n            label: PUBLISHED_POLICIES,\n            fields: {\n                columns: [\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.' + DM.POLICY.NAME,\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.' + DM.POLICY.TYPE,\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.' + DM.POLICY.TASK_ASSIGNMENT_TYPE,\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.' + DM.POLICY.ASSIGNEE,\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.' + DM.POLICY.DESCRIPTION\n                ].join(),\n                fixedFilter: DM.RUNTIME_ATTRIBUTE.STATUS + \"=\" + DM.RUNTIME_ATTRIBUTE.STATUS_OPTIONS.PUBLISHED + \"^\" + EXCLUDE_OOB_DEPENDENT_POLICY_TYPE_FILTER,\n                hideVisContainer: false,\n                view: '',\n                listTitle: PUBLISHED_POLICIES,\n                table: DM.RUNTIME_ATTRIBUTE.TABLE,\n                hideSelectAllOption: true,\n                actionConfig: \"\"\n            }\n        },\n        'DRAFT_POLICIES_TAB': {\n            label: DRAFT_POLICIES,\n            fields: {\n                columns: [\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.' + DM.POLICY.NAME,\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.sys_created_on',\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.' + DM.POLICY.TYPE,\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.' + DM.POLICY.DESCRIPTION\n                ].join(),\n                fixedFilter: DM.RUNTIME_ATTRIBUTE.STATUS + \"=\" + DM.RUNTIME_ATTRIBUTE.STATUS_OPTIONS.DRAFT + \"^\" + EXCLUDE_OOB_DEPENDENT_POLICY_TYPE_FILTER,\n                hideVisContainer: true,\n                view: '',\n                listTitle: DRAFT_POLICIES,\n                table: DM.RUNTIME_ATTRIBUTE.TABLE,\n                query: \"ORDERBYDESC\" + DM.RUNTIME_ATTRIBUTE.POLICY + '.sys_created_on',\n                hideSelectAllOption: false,\n                actionConfig: ACTION_CONFIG.DM_DRAFT_DEACTIVATED_POLICY_ACTIONS\n            }\n        },\n        'DEACTIVATED_POLICIES_TAB': {\n            label: DEACTIVATED_POLICIES,\n            fields: {\n                columns: [\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.' + DM.POLICY.NAME,\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.' + DM.POLICY.TYPE,\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.sys_created_by',\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.sys_updated_by',\n                    DM.RUNTIME_ATTRIBUTE.POLICY + '.sys_updated_on',\n                ].join(),\n                fixedFilter: DM.RUNTIME_ATTRIBUTE.STATUS + \"=\" + DM.RUNTIME_ATTRIBUTE.STATUS_OPTIONS.INACTIVE + \"^\" + EXCLUDE_OOB_DEPENDENT_POLICY_TYPE_FILTER,\n                hideVisContainer: true,\n                view: '',\n                listTitle: DEACTIVATED_POLICIES,\n                table: DM.RUNTIME_ATTRIBUTE.TABLE,\n                hideSelectAllOption: false,\n                actionConfig: ACTION_CONFIG.DM_DRAFT_DEACTIVATED_POLICY_ACTIONS\n            }\n        },\n        'FAILING_EVALUATION_TAB': {\n            label: POLICIES_FAILING_EVALUATION,\n            fields: {\n                view: 'cmdb_ws',\n                hideVisContainer: true,\n                listTitle: POLICIES_FAILING_EVALUATION,\n                table: DM.POLICY_FAILING_EVALUATION.TABLE,\n                hideSelectAllOption: true,\n                actionConfig: \"\"\n            }\n        }\n    };\n\n    var result = [];\n\n    Object.keys(TAB_CONFIGS).forEach(function(key) {\n        var obj = TAB_CONFIGS[key];\n        var count = 0;\n        var ga = new GlideAggregate(obj.fields.table);\n        ga.addEncodedQuery(obj.fields.fixedFilter, true);\n        ga.addAggregate(WS.COUNT_AGGREGATE);\n        ga.query();\n        if (ga.next()) {\n            count = ga.getAggregate(WS.COUNT_AGGREGATE);\n            if (count > 0)\n                obj.count = count;\n        }\n        result.push(obj);\n    });\n\n    return result;\n}","acl_failure_result":"","props":"[{\r\n     \"name\": \"refresh_timestamp\",\r\n     \"label\": \"Refresh timestamp\",\r\n     \"description\": \"Optional timestamp to force refresh of data\",\r\n     \"readOnly\": false,\r\n     \"fieldType\": \"string\",\r\n     \"mandatory\": false,\r\n     \"defaultValue\": \"\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_c6f9933053e83510fdadddeeff7b12e9","api_name":"sn_cmdb_ws.DM - Get Policies tabs config","mutates_server_data":"false","name":"DM - Get Policies tabs config","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2022-10-13 10:13:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c755881b77033010e1a656387d5a9910","sys_updated_by":"admin","sys_created_on":"2021-10-12 05:53:43","sys_name":"Model types","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    var tables = [gs.getMessage('cmdb_application_product_model'), gs.getMessage('cmdb_model_bundle'), gs.getMessage('cmdb_consumable_product_model'), gs.getMessage('cmdb_contract_product_model'), gs.getMessage('cmdb_facility_product_model'), gs.getMessage('cmdb_hardware_product_model'), gs.getMessage('cmdb_service_product_model')];\n    var displayNames = [gs.getMessage('Application'), gs.getMessage('Bundle'), gs.getMessage('Consumable'), gs.getMessage('Contract'), gs.getMessage('Facility'), gs.getMessage('Hardware'), gs.getMessage('Service')];\n    var results = [];\n    if (!AssetWorkspaceUtil.isSamActive()) {\n        tables.push(gs.getMessage('cmdb_software_product_model'));\n        displayNames.push(gs.getMessage('Software'));\n    }\n\tif (global.AssetUtils.IS_ITAM_COMMON_ACTIVE && sn_itam_common.ITAMCommonPalletsUtil) {\n\t\ttables.push(gs.getMessage('cmdb_model_pallet'));\n        displayNames.push(gs.getMessage('Pallet'));\n\t}\n    for (var i = 0; i < tables.length; i++) {\n        var data = {};\n        data['id'] = tables[i];\n        data['label'] = displayNames[i];\n        data['checked'] = false;\n        results.push(data);\n    }\n    results[0].checked = true;\n\n    return results;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_c755881b77033010e1a656387d5a9910","api_name":"sn_itam_workspace.Model types","mutates_server_data":"false","name":"Model types","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"plugins\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-04-18 17:13:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c7d26da6c37201104b8e88c7c840dd61","sys_updated_by":"admin","sys_created_on":"2022-04-14 14:12:29","sys_name":"ACE Update Available Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\t\n\tvar result = {};\n\tif (!input.payload) {\n        return result;\n    }\n\t\n    function getPluginOrAppDetails(id, type, pluginName) {\n        var details = {\n            name: pluginName || id,\n            currentVersion: '',\n            newerVersion: '',\n            pluginId: id,\n            hasDemoData: false\n        };\n        if (type === 'application') {\n            var gr_store_app = new GlideRecord('sys_store_app');\n            gr_store_app.addQuery('sys_id', id);\n            gr_store_app.query();\n            if (gr_store_app.next()) {\n                details.currentVersion = gr_store_app.getValue('version');\n                details.newerVersion = gr_store_app.getValue('latest_version');\n                details.name = gr_store_app.getValue('name');\n                details.pluginId = gr_store_app.getValue('scope');\n                details.hasDemoData = gr_store_app.getValue('demo_data') == 'has_demo_data' ? true : false;\n            }\n        }\n        return details;\n    }\n    \n    try {\n        var pluginDetails = JSON.parse(input.payload.plugins);\n        var plugins = Object.keys(pluginDetails).map(function(plugin) {\n            var details = getPluginOrAppDetails(plugin, pluginDetails[plugin], input.payload.pluginName);\n            var isInstalled = GlidePluginManager.isActive(details.pluginId);\n            return {\n                id: plugin,\n                type: pluginDetails[plugin],\n                installed: isInstalled,\n                name: details.name,\n                version: details.version,\n                currentVersion: details.currentVersion,\n                newerVersion: details.newerVersion,\n                pluginId: details.pluginId,\n                hasDemoData: details.hasDemoData\n            };\n        });\n\n        result.plugins = plugins;\n\n        result.isUpdateAvailable = plugins.some(function(plugin) {\n            return plugin.installed && plugin.newerVersion && plugin.newerVersion != plugin.currentVersion;\n        });\n\n        if (input.payload.action == 'update' && result.isUpdateAvailable) {\n            result.status = 'ready to update';\n        }\n\n    } catch (e) {\n        gs.error('Unable to parse plugin(s) information' + e);\n    }\n    return result;\n\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"payload\",\n      \"label\": \"payload\",\n      \"description\": \"plugins\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_c7d26da6c37201104b8e88c7c840dd61","api_name":"sn_ace.ACE Update Available Details","mutates_server_data":"false","name":"ACE Update Available Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Languages configured for DT","sys_updated_on":"2024-05-15 12:45:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c803917f9fc60210f0b32e5af90a1cea","sys_updated_by":"admin","sys_created_on":"2024-05-15 12:14:07","sys_name":"Languages configured for DT","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var languages = [];\n    try {\n        var languageGr = new GlideRecord('sys_cs_dynamic_translation_virtual_agent');\n        languageGr.addQuery('dt_enabled', true);\n        languageGr.query();\n        while (languageGr.next()) {\n            languages.push({\n                'pillText': languageGr.getDisplayValue('language')\n            });\n        }\n    } catch (e) {\n        gs.error(\"Failed to get languages\");\n    }\n\n    return languages;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_c803917f9fc60210f0b32e5af90a1cea","api_name":"sn_nowassist_admin.Languages configured for DT","mutates_server_data":"false","name":"Languages configured for DT","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Action\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task CI Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-18 14:25:52","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c8dcfb884333021007a30d05a6b8f255","sys_updated_by":"admin","sys_created_on":"2024-07-30 08:47:56","sys_name":"Parse Proposed Change XML","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_created_by":"admin","sys_mod_count":"52","sys_tags":"","script":"function transform(input) {\n\n    function getCiEncodedQuery(obj) {\n        var parsedXml = obj.update_ci;\n        var fieldObj = parsedXml[Object.keys(parsedXml)[0]];\n\n        var index = 0;\n        var qry = '';\n        var encQry = '';\n\n        for (var fld in fieldObj) {\n            if (fieldObj[fld][\"@newValue\"] + '' !== 'NULL') {\n                qry = fld + '=' + fieldObj[fld][\"@newValue\"];\n                if (index === 0)\n                    encQry = qry;\n                else\n                    encQry += \"^\" + qry;\n\n                index++;\n            }\n        }\n\n        return encQry;\n    }\n\n    if (!input.taskCISysId || !input.action)\n        return {\n            error: gs.getMessage('ERROR')\n        };\n\n    var taskCiGr = new GlideRecordSecure(\"task_ci\");\n    if (!taskCiGr.get(input.taskCISysId))\n        return;\n\n    var ciGr = new GlideRecordSecure(taskCiGr.ci_item.getRefRecord().getTableName());\n    if (!ciGr.get(taskCiGr.ci_item))\n        return;\n\n    var proposedCiGr = new GlideRecordSecure(taskCiGr.ci_item.getRefRecord().getTableName());\n    if (!proposedCiGr.get(taskCiGr.ci_item))\n        return;\n\n    var ProposeChangeUtil = new global.ProposeChangeUtil();\n    var obj = ProposeChangeUtil.xmlHelper.toObject(taskCiGr.xml);\n\n    if (input.action === 'VIEW_PROPOSED_CHANGE') {\n        var rows = [];\n        var key = 0;\n\n        if (obj) {\n            proposedCiGr.applyEncodedQuery(getCiEncodedQuery(obj));\n\n            var parsedXml = obj.update_ci;\n            var fieldObj = parsedXml[Object.keys(parsedXml)[0]];\n\n            for (var field in fieldObj) {\n                if (fieldObj[field][\"@newValue\"] + '' !== 'NULL') {\n                    var currVals = {\n                        key: key,\n                        cells: {\n                            change: {\n                                highlightedValue: null,\n                                value: ciGr.getElement(field).getLabel()\n                            },\n                            current_value: {\n                                highlightedValue: null,\n                                value: fieldObj[field][\"@oldValue\"] ? ciGr.getDisplayValue(field) : \"-\"\n                            },\n                            proposed_value: {\n                                highlightedValue: null,\n                                value: fieldObj[field][\"@newValue\"] ? proposedCiGr.getDisplayValue(field) : \"-\"\n                            }\n                        }\n                    };\n                    rows.push(currVals);\n                    key++;\n                }\n            }\n        }\n\n        var valsToReturn = {\n            rows: rows,\n            updatedOn: taskCiGr.getDisplayValue(\"sys_updated_on\"),\n            currentCI: taskCiGr.getDisplayValue(\"ci_item\")\n        };\n\n        return valsToReturn;\n    } else if (input.action === 'PROPOSE_SINGLE_CHANGE') {\n        var CIData = {};\n        CIData.table = {};\n        CIData.template = {};\n\n        CIData.name = taskCiGr.getDisplayValue(\"ci_item\");\n        CIData.table.value = ciGr.getValue('sys_class_name');\n        CIData.table.displayValue = ciGr.getDisplayValue('sys_class_name');\n        CIData.template.dependentValue = ciGr.getValue('sys_class_name');\n        CIData.template.label = gs.getMessage('Proposed change');\n\n        var encQry = '';\n        if (obj) {\n            encQry = getCiEncodedQuery(obj);\n        }\n\n        CIData.template.value = encQry;\n        CIData.template.displayValue = encQry;\n\n        return CIData;\n    }\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"taskCISysId\",\r\n  \"label\": \"Task CI Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"action\",\r\n  \"label\": \"Action\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_update_name":"sys_ux_data_broker_transform_c8dcfb884333021007a30d05a6b8f255","api_name":"sn_sow_chg.Parse Proposed Change XML","mutates_server_data":"false","name":"Parse Proposed Change XML","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data Egress Trend Date Filter Condition.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Date Filter Condition\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Returns Data Egress count by Source","sys_updated_on":"2024-10-15 08:25:58","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c8e4159aff3202105408ffffffffffde","sys_updated_by":"admin","sys_created_on":"2024-06-17 03:22:04","sys_name":"Data Egress By Source Script","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar trendDataObj = {};\n\tvar sourceArr = [];\n\tvar dateFilterConditon = input.dateFilterCondition || \"sys_created_onBETWEENjavascript:gs.beginningOfLast12Months()@javascript:gs.endOfYesterday()\";\n\tvar ga = new GlideAggregate(\"data_egress_count\");\n\tga.addEncodedQuery(dateFilterConditon, true);\n\tga.query();\n\twhile(ga.next()) {\n\t\tvar sourceType = ga.getValue('source');\n\t\tif (!trendDataObj[sourceType]) {\n\t\t\ttrendDataObj[sourceType] = {\n                     \"sum\" : 0,\n                     \"groupBy\" : [{\n                          \"displayValue\" : sourceType,\n                          \"value\" : sourceType,\n                          \"field\" : \"source\" \n\n                     }]};\n\t\t}\n\t\tvar trendVal = ga.getValue('aggregation_value');\n\t\ttrendVal = trendDataObj[sourceType].sum + parseInt(trendVal);\n\t\ttrendDataObj[sourceType].sum = trendVal;\n\t}\n\tfor (var type in trendDataObj) {\n\t\tsourceArr.push(trendDataObj[type]);\n\t}\n\treturn {\"dataEgressBySource\" : sourceArr};\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"dateFilterCondition\",\r\n        \"label\": \"Date Filter Condition\",\r\n        \"description\": \"Data Egress Trend Date Filter Condition.\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/406f1bbca31c0e1b1ee8a5a06e29227a","value":"406f1bbca31c0e1b1ee8a5a06e29227a"},"sys_update_name":"sys_ux_data_broker_transform_c8e4159aff3202105408ffffffffffde","api_name":"sn_ih_usage_app.Data Egress By Source Script","mutates_server_data":"false","name":"Data Egress By Source Script","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"CI Record Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-02-27 19:10:26","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c90b74d653203010ee0dddeeff7b12ba","sys_updated_by":"admin","sys_created_on":"2021-06-07 00:09:42","sys_name":"Get CMDB Service Relationship","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c3a24cb1533320100764ddeeff7b121c","value":"c3a24cb1533320100764ddeeff7b121c"},"sys_created_by":"admin","sys_mod_count":"16","sys_tags":"","script":"function transform(input) {\n\tvar recordId = input.recordId;\n\n\tvar result = {};\n\n\tresult.tree = [\n\t\t{\"id\":\"biz_app_parent\", \"label\":\"Business Applications\", \"actionable\": false, \"children\":[]},\n\t\t{\"id\":\"biz_offer_parent\", \"label\":\"Business Service Offerings\", \"actionable\": false, \"children\":[]},\n\t\t{\"id\":\"tech_offer_parent\", \"label\":\"Technical Service Offerings\", \"actionable\": false, \"children\":[]},\n\t\t{\"id\":\"app_service_parent\", \"label\":\"Application Services\", \"actionable\": false, \"children\":[]}\n\t];\n\t\n\tvar addedCIs = {};\n\n\tvar gr = new GlideRecord('cmdb_rel_ci');\n\tgr.addQuery(\"child\", recordId);\n\tgr.addEncodedQuery(\"parent.sys_class_name=cmdb_ci_business_app^ORparent.sys_class_name=service_offering^ORparent.sys_class_nameINSTANCEOFcmdb_ci_service\");\n\tgr.query();\n\n\twhile (gr.next()) {\n\t\tvar parentName = gr.getDisplayValue('parent');\n\t\tvar parentId = gr.getValue('parent');\n\t\tif (addedCIs[parentId]) {\n\t\t\tcontinue;\n\t\t}\n\t\tvar parentClassName = gr.parent.sys_class_name;\n\t\tvar parentOfferType = gr.parent.service_classification;\n\t\tvar parentNode = {\"id\": parentId, \"label\": parentName, \"actionable\": true, \"children\":[]};\n\t\tif (parentClassName == 'cmdb_ci_business_app') {\n\t\t\tresult.tree[0].children.push(parentNode);\n\t\t\taddedCIs[parentId] = true;\n\t\t} else if (parentClassName == 'service_offering' && parentOfferType == 'Business Service') {\n\t\t\tresult.tree[1].children.push(parentNode);\n\t\t\taddedCIs[parentId] = true;\n\t\t} else if (parentClassName == 'service_offering' && parentOfferType == 'Technical Service') {\n\t\t\tresult.tree[2].children.push(parentNode);\n\t\t\taddedCIs[parentId] = true;\n\t\t} else if (parentOfferType == 'Application Service') {\n\t\t\tresult.tree[3].children.push(parentNode);\n\t\t\taddedCIs[parentId] = true;\n\t\t}\n\t}\n\t\n\tgr = new GlideRecord('cmdb_rel_ci');\n\tgr.addQuery(\"parent\", recordId);\n\tgr.addEncodedQuery(\"child.sys_class_name=cmdb_ci_business_app^ORchild.sys_class_name=service_offering^ORchild.sys_class_nameINSTANCEOFcmdb_ci_service\");\n\tgr.query();\n\n\twhile (gr.next()) {\n\t\tvar childName = gr.getDisplayValue('child');\n\t\tvar childId = gr.getValue('child');\n\t\tif (addedCIs[childId]) {\n\t\t\tcontinue;\n\t\t}\n\t\tvar childClassName = gr.child.sys_class_name;\n\t\tvar childOfferType = gr.child.service_classification;\n\t\tvar childNode = {\"id\": childId, \"label\": childName, \"actionable\": true, \"children\":[]};\n\t\tif (childClassName == 'cmdb_ci_business_app') {\n\t\t\tresult.tree[0].children.push(childNode);\n\t\t\taddedCIs[childId] = true;\n\t\t} else if (childClassName == 'service_offering' && childOfferType == 'Business Service') {\n\t\t\tresult.tree[1].children.push(childNode);\n\t\t\taddedCIs[childId] = true;\n\t\t} else if (childClassName == 'service_offering' && childOfferType == 'Technical Service') {\n\t\t\tresult.tree[2].children.push(childNode);\n\t\t\taddedCIs[childId] = true;\n\t\t} else if (childOfferType == 'Application Service') {\n\t\t\tresult.tree[3].children.push(childNode);\n\t\t\taddedCIs[childId] = true;\n\t\t}\n\t}\n\t\n\tvar assocGr = new GlideRecord('svc_ci_assoc');\n\tassocGr.addQuery('ci_id', recordId);\n\tassocGr.query();\n\twhile (assocGr.next()) {\n\t\tvar assocServiceId = assocGr.getValue('service_id');\n\t\tif (addedCIs[assocServiceId] || assocServiceId === recordId) {\n\t\t\tcontinue;\n\t\t}\n\t\tvar assocServiceName = assocGr.getDisplayValue('service_id');\n\t\tvar assocNode = {\"id\": assocServiceId, \"label\": assocServiceName, \"actionable\": true, \"children\":[]};\n\t\tresult.tree[3].children.push(assocNode);\n\t\taddedCIs[assocServiceId] = true;\n\t}\n\t\n\tresult.expanded = [];\n\tfor (var i = result.tree.length - 1; i >= 0; i--) {\n\t\t// If there are no relationships of this type, remove the group from the tree\n\t\tif (result.tree[i].children.length <= 0) {\n\t\t\tresult.tree.splice(i, 1);\n\t\t} else { // Otherwise make sure it is expanded on load\n\t\t\tresult.expanded.push([result.tree[i].id]);\n\t\t}\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"recordId\",\r\n  \"label\": \"Record ID\",\r\n  \"description\": \"CI Record Sys ID\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c3a24cb1533320100764ddeeff7b121c","value":"c3a24cb1533320100764ddeeff7b121c"},"sys_update_name":"sys_ux_data_broker_transform_c90b74d653203010ee0dddeeff7b12ba","api_name":"sn_cmdb_pg_templts.Get CMDB Service Relationship","mutates_server_data":"false","name":"Get CMDB Service Relationship","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2021-10-25 12:35:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c92f61657793301039ac088b3a106154","sys_updated_by":"maint","sys_created_on":"2021-10-19 12:54:08","sys_name":"CI Request AI Search","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c2a7835187123010a4a2c077f6cb0bc0","value":"c2a7835187123010a4a2c077f6cb0bc0"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform() {\n    var grS = new GlideAggregate('sys_service');\n    if (grS.isValid()) {\n        grS.addQuery('name', 'AISearch');\n        if (grS.getCount() > 0)\n            return true;\n        else\n            return new sn_ais.InfrastructureApi().requestAis();\n    }\n    return false;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c2a7835187123010a4a2c077f6cb0bc0","value":"c2a7835187123010a4a2c077f6cb0bc0"},"sys_update_name":"sys_ux_data_broker_transform_c92f61657793301039ac088b3a106154","api_name":"sn_ci_landing_exp.CI Request AI Search","mutates_server_data":"true","name":"CI Request AI Search","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Is oddity type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Request Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-27 14:08:21","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c98d251c43103110377050e01fb8f22a","sys_updated_by":"admin","sys_created_on":"2023-07-23 21:24:06","sys_name":"Add coverage","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"26","sys_tags":"","script":"function transform(input) {\n\tconst requestData = input.requestData;\n\tvar output;\n\tif (input.isOdditType) {\n\t\tvar gdtStart = new GlideDateTime();\n\t\tgdtStart.setDisplayValue(requestData.startSpanDate);\n\t\tgdtStart.add(1);\n\t\tvar gdtEnd = new GlideDateTime();\n\t\tgdtEnd.setDisplayValue(requestData.endSpanDate);\n\t\tgdtEnd.add(-1);\n\n\t\tvar gr = new GlideRecord(\"cmn_rota_roster\");\n\t\tif (gr.get(requestData.rosterId)) {\n\t\t\tvar schd = new GlideSchedule(gr.rota.schedule);\n\t\t\tvar startOverlapping = schd.isInSchedule(gdtStart);\n\t\t\tvar endOverlapping = schd.isInSchedule(gdtEnd);\n\t\t\t\n\t\t\tif (!startOverlapping && !endOverlapping) {\n\t\t\t\toutput = [{\n\t\t\t\t\tmessageType: \"error\",\n\t\t\t\t\tmessageContent: gs.getMessage(\"No schedules cover that time slot. Specify extra times for a Shift first.\")\n\t\t\t\t}];\n\t\t\t\treturn output;\n\t\t\t}\n\t\t}\n\t\tgdtStart.add(-1);\n\t\tgdtEnd.add(1);\n\n\t\toutput = new global.OnCallCommon().addOverride(gdtStart.getDisplayValueInternal(), gdtEnd.getDisplayValueInternal(), requestData.userId, requestData.rosterId, requestData.groupId);\n\t}\n\telse {\n\t\toutput = new sn_uib_on_call.OnCallOddityParser().saveTimeOffRequest(requestData);\n\t}\n\t\n\treturn output;\n}","acl_failure_result":"","props":"[{\r\n    \"name\": \"requestData\",\r\n    \"label\": \"Request Data\",\r\n    \"description\": \"Request Data\",\r\n    \"fieldType\": \"json\",\r\n    \"valueType\": \"object\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }, {\r\n      \"name\": \"isOdditType\",\r\n      \"label\": \"Is oddity type\",\r\n      \"description\": \"Is oddity type\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"boolean\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": false\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_c98d251c43103110377050e01fb8f22a","api_name":"sn_uib_on_call.Add coverage","mutates_server_data":"false","name":"Add coverage","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of current record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name of current record\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetches all Sidebar discussions and Microsoft Teams chats for source record","sys_updated_on":"2024-05-20 09:37:55","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c99421378351bd10b07240026daad317","sys_updated_by":"admin","sys_created_on":"2023-09-22 10:33:45","sys_name":"Fetch all direct collaboration chat","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0d2383dd53687510b256ddeeff7b12b8","value":"0d2383dd53687510b256ddeeff7b12b8"},"sys_created_by":"admin","sys_mod_count":"17","sys_tags":"","script":"function transform(input) {\n    var table = input.table;\n    var sysId = input.sysId;\n    if (!table || !sysId)\n        return;\n\n    var chatUtil = new CommunicationManagementUXFChatUtil();\n\n    var sidebarChat = chatUtil.fetchSidebarChatForRecord(table, sysId, 0, null, null, null, true) || [];\n    var teamsChat = chatUtil.fetchTeamsChatForRecord(sysId, null, null, null, true) || [];\n    var totalChat = teamsChat.concat(sidebarChat);\n    return {\n        \"chat\": totalChat,\n        \"isSidebarSupported\": chatUtil.isSidebarSupported(table, sysId),\n        \"isTeamsPluginActive\": chatUtil.isTeamsPluginActive()\n    };\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table name of current record\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n    \"name\": \"sysId\",\r\n    \"label\": \"Sys Id\",\r\n    \"description\": \"Sys id of current record\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0d2383dd53687510b256ddeeff7b12b8","value":"0d2383dd53687510b256ddeeff7b12b8"},"sys_update_name":"sys_ux_data_broker_transform_c99421378351bd10b07240026daad317","api_name":"sn_uib_tcm.Fetch all direct collaboration chat","mutates_server_data":"false","name":"Fetch all direct collaboration chat","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"SelectedTimeOffSysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id of Selected Timeoff\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"TimeZone\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User Timezone\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-05 16:55:35","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"c9e2ad78a3b67110bd3bd63f26fcdada","sys_updated_by":"admin","sys_created_on":"2023-11-26 16:17:59","sys_name":"Get TimeOff By Sys Id","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n    if (input.selectedTimeOffSysId && input.timeZone) {\n\t\treturn new OCTimeOffUtil().getTimeOff(input.selectedTimeOffSysId, input.timeZone);\n    }\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"selectedTimeOffSysId\",\r\n  \"label\": \"SelectedTimeOffSysId\",\r\n  \"description\": \"Sys Id of Selected Timeoff\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"timeZone\",\r\n  \"label\": \"TimeZone\",\r\n  \"description\": \"User Timezone\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_c9e2ad78a3b67110bd3bd63f26fcdada","api_name":"sn_uib_on_call.Get TimeOff By Sys Id","mutates_server_data":"false","name":"Get TimeOff By Sys Id","output_schema":"","sys_policy":"read"},{"private":"true","required_translations":"[ {\n  \"message\" : \"Search Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-03-23 18:28:40","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ca0af1685b2121103830fb8f9281c792","sys_updated_by":"admin","sys_created_on":"2023-03-10 00:02:17","sys_name":"Stringify search child documents","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar searchResults = input.searchData.searchResults;\n\t\n\tvar transformedSearchResults = searchResults.map(function(result) {\n\t\tvar columns = [];\n\t\tif (result.columns) {\n\t\t\tcolumns = result.columns.map(function(column) {\n\t\t\t\tif (column.fieldName == 'child_docs')\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfieldName: column.fieldName,\n\t\t\t\t\t\tvalue: JSON.stringify(column.value)\n\t\t\t\t\t};\n\n\t\t\t\treturn column;\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tsys_id: result.sys_id,\n\t\t\ttable: result.table,\n\t\t\tcolumns: columns\n\t\t};\n\t});\n\n\treturn {\n\t\tsearchResults: transformedSearchResults\n\t};\n}","acl_failure_result":"","props":"[\r\n     {\r\n        \"name\": \"searchData\",\r\n        \"label\": \"Search Data\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_ca0af1685b2121103830fb8f9281c792","api_name":"global.Stringify search child documents","mutates_server_data":"false","name":"Stringify search child documents","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"EVAM Definition ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"EVAM Definition ID of VA\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Locale\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search GraphQL Response\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2025-03-22 18:42:35","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ca46981343711210c0f140b805b8f2e4","sys_updated_by":"admin","sys_created_on":"2024-11-16 04:36:58","sys_name":"Generate Regular Search Results Templates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"25","sys_tags":"","script":"function transform(input) {\n    if (!input.searchGraphqlData) {\n        gs.error(\"Invalid empty value provided as input for searchGraphqlData. Check that the search executed successfully.\");\n        return {\n            items: []\n        };\n    }\n    if (!(\"searchResults\" in input.searchGraphqlData)) {\n        gs.error(\"No searchResults property exists on provided input to Generate Regular Search Results transform. Check that the search executed successfully.\");\n        return {\n            items: []\n        };\n    }\n    var evamDefinitionId = input.evamDefinitionId;\n    if (!evamDefinitionId) {\n        gs.error(\"No EVAM Definition ID provided as input to Generate Regular Search Results transform\");\n        return {\n            items: []\n        };\n    }\n\n    var searchResultsJson = input.searchGraphqlData.searchResults;\n    var locale = input.locale;\n\n    var searchResultTemplates = sn_search.ScriptableResultTemplateMapper.getRegularResultTemplates(\n        evamDefinitionId,\n        JSON.stringify(searchResultsJson),\n        locale\n    );\n\n    var searchResultTemplatesSearch = JSON.parse(searchResultTemplates);\n    var vaEvamDefinitionId = input.vaEvamDefinitionId;\n\n    //We dont want to send empty items when evam definition id is not sent to us\n    if (!vaEvamDefinitionId) {\n        gs.debug(\"No VA EVAM Definition ID provided as input to Generate Regular Search Results Templates transform.\");\n    }\n    //We only want to query & add VA items if VA evam definition id is sent to us\n    if (vaEvamDefinitionId) {\n        var searchResultTemplatesVA = sn_search.ScriptableResultTemplateMapper.getRegularResultTemplates(\n            vaEvamDefinitionId,\n            JSON.stringify(searchResultsJson),\n            locale\n        );\n\n        var searchResultTemplatesForVA = JSON.parse(searchResultTemplatesVA);\n        // We would only want to add if there is a need for handoff to VA and queryForConversationalCatalog is true\n        var searchResultsConfigBySysId = {};\n        searchResultsJson.forEach(function(searchResult) {\n            var searchResultItemId;\n            var searchResultConversationalParam;\n\n            for (searchResultColumnIdx in searchResult.columns) {\n                srObj = searchResult.columns[searchResultColumnIdx];\n                if (srObj.fieldName === 'sys_id')\n                    searchResultItemId = srObj.value;\n                if (srObj.fieldName === 'conversational')\n                    searchResultConversationalParam = srObj.value;\n                if (searchResultItemId && searchResultConversationalParam) {\n                    searchResultsConfigBySysId[searchResultItemId] = searchResultConversationalParam;\n                }\n\n\n            }\n\n        });\n        searchResultTemplatesSearch.forEach(function(searchResultTemplate) {\n            var sys_id = searchResultTemplate.propValues.model.sys_id;\n            searchResultTemplatesForVA.forEach(function(searchResultTemplateForVA) {\n                var VA_sys_id = searchResultTemplateForVA.propValues.model.sys_id;\n                if (sys_id == VA_sys_id) {\n                    searchResultTemplate.vaEvamItem = Object.assign({}, searchResultTemplateForVA);\n                }\n            });\n            var searchResultConversationalValue = searchResultsConfigBySysId[sys_id];\n            if (searchResultConversationalValue != null) {\n                searchResultTemplate.propValues.model.isConversational = searchResultConversationalValue;\n            }\n        });\n\n\n\n\n    }\n\n\n    return {\n        items: searchResultTemplatesSearch\n    };\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"evamDefinitionId\",\r\n        \"label\": \"EVAM Definition ID\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"searchGraphqlData\",\r\n        \"label\": \"Search GraphQL Response\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"locale\",\r\n        \"label\": \"Locale\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n {\r\n      \"name\": \"vaEvamDefinitionId\",\r\n      \"label\": \"EVAM Definition ID of VA\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"object\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_ca46981343711210c0f140b805b8f2e4","api_name":"global.Generate Regular Search Results Templates","mutates_server_data":"false","name":"Generate Regular Search Results Templates","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Execution Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-03-28 07:31:59","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ca9ecc2a77712110583f78dabd5a9922","sys_updated_by":"admin","sys_created_on":"2023-03-28 07:29:52","sys_name":"SOW Remediate Execute Action","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var remedialActionEngine = new sn_reacf.RemedialActionEngine();\n  remedialActionEngine.executeRemedialAction(input.execId);\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"execId\",\r\n        \"label\": \"Execution Id\",\r\n        \"description\": \"Execution Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_update_name":"sys_ux_data_broker_transform_ca9ecc2a77712110583f78dabd5a9922","api_name":"sn_sow_inc.SOW Remediate Execute Action","mutates_server_data":"true","name":"SOW Remediate Execute Action","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Task IDs\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-24 23:44:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"cb273366738031103f3cc3ed8ff6a79e","sys_updated_by":"admin","sys_created_on":"2023-07-18 20:41:15","sys_name":"De-Duplication Template Can Add Tasks To Template","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar taskIds = input.taskIds.split(',');\n\tvar templateId = input.templateSysId;\n\n\tresult = sn_cmdb.DuplicateTemplate.canAddTasksToTemplate(taskIds, templateId); \n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n   {\r\n      \"name\": \"taskIds\",\r\n      \"label\": \"Task IDs\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_cb273366738031103f3cc3ed8ff6a79e","api_name":"sn_cmdb_ws.De-Duplication Template Can Add Tasks To Template","mutates_server_data":"false","name":"De-Duplication Template Can Add Tasks To Template","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Best practice Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys_id of the best practice\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Mark best practice as complete ","sys_updated_on":"2024-01-03 06:19:29","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"cc8247f8776331101b803a91fa5a99d1","sys_updated_by":"maint","sys_created_on":"2024-01-03 06:02:55","sys_name":"SC Complete best practice","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transfor(input) {\n    var res = \"\";\n    var gr = new GlideRecord('sn_vsc_best_practice_configurations');\n    var recId = input.bp_id;\n    if (gr.get(recId)) {\n        gr.setValue('status', 'completed');\n        var isUpdated = gr.update();\n        if (isUpdated != null) {\n            res = 'success';\n        } else {\n            res = 'fail';\n        }\n    }\n    return res;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"bp_id\",\r\n        \"label\": \"Best practice Id\",\r\n        \"description\": \"Sys_id of the best practice\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_cc8247f8776331101b803a91fa5a99d1","api_name":"sn_vsc.SC Complete best practice","mutates_server_data":"false","name":"SC Complete best practice","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"","batch_exclude":"false","description":"","sys_updated_on":"2020-11-01 16:53:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ccadbc52b7311010ad44ea56ee11a92e","sys_updated_by":"admin","sys_created_on":"2020-07-06 11:15:04","sys_name":"Card Config Meta Data Query Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/706afb822bf7975884b8ae878de7baeb","value":"706afb822bf7975884b8ae878de7baeb"},"sys_created_by":"admin","sys_mod_count":"77","sys_tags":"","script":"function transform(input) {\n    var compositeDataId = input.compositeDataId;\n\t\n\t// Again Ignoring properties are resulting error\n    var config = {\n        recordTypeToEvamTemplate: {},\n\t\trecordTypeToFieldsMap: \"null\"\n    };\n\n    // compositeDataId optional parameter resolving to '@context.props.compositeDataId' if no value being passed.\n    if (compositeDataId && compositeDataId.charAt('0') == '@')\n        compositeDataId = null;\n\t\n    if (!compositeDataId)\n        return config;\n\t\n\tvar recordTypeToEvamTemplate = {};\n\tvar recordTypeToFieldsMap = [];\n\n    var m2mPredicateGR = new GlideRecord(\"sys_ux_composite_data_m2m_predicate_bundle\");\n    m2mPredicateGR.addQuery(\"dataset\", compositeDataId);\n    m2mPredicateGR.query();\n\n    while (m2mPredicateGR.next()) {\n\n        var predicateBundleId = m2mPredicateGR.getValue(\"predicate_bundle\");\n\n        if (predicateBundleId) {\n            var predicateGR = new GlideRecord(\"sys_ux_composite_data_template_predicate\");\n            predicateGR.addQuery(\"predicate_bundle\", predicateBundleId);\n            predicateGR.addActiveQuery();\n            predicateGR.query();\n            while (predicateGR.next()) {\n                var table = predicateGR.getValue(\"table\");\n                if (table) {\n                    var fieldList = predicateGR.getValue(\"field_list\");\n                    var fields = fieldList ? fieldList.split(\",\") : [];\n\n                    recordTypeToFieldsMap.push({\n                        recordType: table,\n                        fields: fields,\n                    });\n\n                    var uxTemplateId = predicateGR.getValue(\"ux_template\");\n                    if (uxTemplateId) {\n                        var templateGR = new GlideRecord(\"sys_ux_composite_data_template\");\n                        if (templateGR.get(uxTemplateId)) {\n                            var templateContent = templateGR.getValue(\"template\");\n                            if (templateContent) {\n                                try {\n                                    var record = recordTypeToEvamTemplate[table] = JSON.parse(templateContent);\n                                    record.fields = fields;\n                                } catch (e) {\n                                    // bad control character in string literal\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n\n    if (recordTypeToFieldsMap.length > 0) {\n\t\t//config.recordTypeToFieldsMap = recordTypeToFieldsMap;\n        config.recordTypeToFieldsMap = JSON.stringify(recordTypeToFieldsMap);\n        config.recordTypeToEvamTemplate = recordTypeToEvamTemplate;\n    }\n\n    return config;\n}","acl_failure_result":"","props":" [ \n  {\n    \"name\": \"compositeDataId\",\n    \"label\": \"Composite Data ID\",\n    \"description\": \"Composite Data ID\",\n    \"readOnly\": false,\n    \"fieldType\": \"reference\",\n    \"mandatory\": false,\n    \"typeMetadata\": {\n      \"reference\": \"sys_ux_composite_data\"\n    },\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/706afb822bf7975884b8ae878de7baeb","value":"706afb822bf7975884b8ae878de7baeb"},"sys_update_name":"sys_ux_data_broker_transform_ccadbc52b7311010ad44ea56ee11a92e","api_name":"sn_vtb.Card Config Meta Data Query Transform","mutates_server_data":"false","name":"Card Config Meta Data Query Transform","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Matched Tasks by Condition\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User Associated Tasks\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetch all the tasks via matching template conditions and user associated tasks. Calculate the total count by only counting unique tasks between both sets.","sys_updated_on":"2023-08-15 21:17:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ccb626a173d431103f3cc3ed8ff6a73e","sys_updated_by":"admin","sys_created_on":"2023-07-27 22:57:27","sys_name":"De-Duplication Template Get All Tasks Count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\tvar result = {\n\t\tmatchedTasks: 0,\n\t\tuserTasks: 0,\n\t\ttotalTasks: 0\n\t};\n\n\tvar matchedTasks = input.matchedTasks;\n\tvar userTasks = input.userTasks;\n\n\tif (!matchedTasks.items && !userTasks.items) {\n\t\treturn result;\n\t}\n\n\tif (!matchedTasks.items) {\n\t\tvar total = userTasks.items.length;\n\t\tresult.userTasks = total;\n\t\tresult.totalTasks = total;\n\t\treturn result;\n\t}\n\n\tif (!userTasks.items) {\n\t\ttotal = matchedTasks.items.length;\n\t\tresult.matchedTasks = total;\n\t\tresult.totalTasks = total;\n\t\treturn result;\n\t}\n\n\tvar matchedTasksCount = matchedTasks.items.length;;\n\tvar userTasksCount = userTasks.items.length;\n\n\tvar totalTasksCount = matchedTasksCount;\n\t// the total tasks count will not count the same tasks found in both sets again\n\tfor (var i = 0; i < userTasks.items.length; i++) {\n\t\tvar userItem = userTasks.items[i];\n\n\t\t// if matchedTasks via condition does not already contain an item in userTasks,\n\t\t// then we want to count it towards the total count\n\t\tvar contains = false;\n\t\tfor (var j = 0; j < matchedTasks.items.length; j++) {\n\t\t\tvar matchedItem = matchedTasks.items[j];\n\t\t\tif (userItem.sysId == matchedItem.sysId) {\n\t\t\t\tcontains = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!contains) {\n\t\t\ttotalTasksCount++;\n\t\t}\n\t}\n\n\tresult = {\n\t\tmatchedTasks: matchedTasksCount,\n\t\tuserTasks: userTasksCount,\n\t\ttotalTasks: totalTasksCount\n\t};\n\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"matchedTasks\",\r\n      \"label\": \"Matched Tasks by Condition\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"json\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n   {\r\n      \"name\": \"userTasks\",\r\n      \"label\": \"User Associated Tasks\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"json\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_ccb626a173d431103f3cc3ed8ff6a73e","api_name":"sn_cmdb_ws.De-Duplication Template Get All Tasks Count","mutates_server_data":"false","name":"De-Duplication Template Get All Tasks Count","output_schema":"","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"Converts all href's to javascript:void(0)\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"GraphQL Data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Transform Links\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-08-20 08:34:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ccf0fc39539210108bd7ddeeff7b125b","sys_updated_by":"admin","sys_created_on":"2020-07-29 17:40:20","sys_name":"Related Articles Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var records = input.graphqlData.data.snKmWsUib.relatedContent.getRelatedArticles;\n\tvar transformLinks = input.transformLinks;\n    var externalContentLabel = gs.getMessage(gs.getProperty('sn_km_intg.glide.knowman.external.ui_label_for_external_content', 'External Content')) || gs.getMessage('External Content');\n\n\n    var getFieldObject = function(field) {\n        var obj = {\n            tooltip: field.label,\n            type: \"string\",\n            text: field.displayValue,\n            icon: \"\"\n        };\n\n        switch (field.name) {\n            case \"rating\":\n                obj.type = \"rating\";\n\t\t\t\tobj.screenReaderText = gs.getMessage(\"Article has average rating - {0} out of 5 stars\",obj.text? obj.text: '0');\n                obj.tooltip = field.label + ' ' + field.displayValue;\n                break;\n\n            case \"workflow_state\":\n                obj.text = gs.getMessage(\"{0} State\",obj.text);\n                break;\n\n            case \"sys_view_count\":\n                obj.text = field.displayValue == 1 ? gs.getMessage(\"{0} View\",obj.text) : gs.getMessage(\"{0} Views\",obj.text);\n\t\t\t\tobj.screenReaderText = field.displayValue == 1? gs.getMessage(\"Article has {0} view\", field.displayValue) : gs.getMessage(\"Article has {0} views\", field.displayValue);\n                break;\n\t\t\t\t\n\t\t\tcase \"author\":\n\t\t\t\tif(obj.text)\n\t\t\t\t\tobj.screenReaderText = gs.getMessage(\"Authored by {0}\", obj.text);\n\t\t\t\tbreak;\n\n            case \"external\":\n                if (field.value == \"true\")\n                    obj.text = externalContentLabel;\n                else\n                    return null;\n                break;\n\n            default:\n                if (field.type == \"glide_date\" || field.type == \"glide_date_time\") {\n                    obj.type = \"timeago\";\n                    obj.text = field.value;\n\t\t\t\t\tobj.screenReaderText = gs.getMessage(\"updated\");\n                }\n        }\n        return obj;\n    };\n\n    var output = [];\n\n    records.forEach(function(rec) {\n        var secondaryFields = [];\n        rec.secondaryFields.forEach(function(item) {\n            var field = getFieldObject(item);\n            if (field != null) {\n                secondaryFields.push(field);\n            }\n        });\n        output.push({\n            icon: \"document-outline\",\n            title: {\n                label: rec.displayField,\n                href: transformLinks ? \"javascript:void(0)\" : rec.link,\n\t\t\t\tvariant: 'primary'\n            },\n            id: rec.id,\n            fields: secondaryFields\n        });\n\n\n    });\n    return output;\n}","acl_failure_result":"","props":"[{\n  \"name\": \"graphqlData\",\n  \"label\": \"GraphQL Data\",\n  \"description\": \"GraphQL Data\",\n  \"readOnly\": false,\n  \"fieldType\": \"object\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n\t},\n  {\n  \"name\": \"transformLinks\",\n  \"label\": \"Transform Links\",\n  \"description\": \"Converts all href's to javascript:void(0)\",\n  \"readOnly\": false,\n  \"fieldType\": \"boolean\",\n  \"mandatory\": false,\n  \"defaultValue\": true\n\t}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_ccf0fc39539210108bd7ddeeff7b125b","api_name":"sn_km_uib.Related Articles Transform","mutates_server_data":"false","name":"Related Articles Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table Name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to fetch details for the IAR configuration cards in the admin console","sys_updated_on":"2024-01-26 18:10:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"cdce016c87070110a4a2c077f6cb0bcf","sys_updated_by":"admin","sys_created_on":"2022-04-20 17:53:44","sys_name":"get IAR Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"29","sys_tags":"","script":"function transform(input) {\n    var res = [];\n    if (input.table_name != \"\") {\n        var gr = new GlideRecordSecure(input.table_name);\n        gr.addEncodedQuery(input.query);\n        gr.query();\n        while (gr.next()) {\n            var nowGr = new GlideRecordSecure(gr.getValue(\"target_table_name\"));\n            res.push({\n                \"heading\": nowGr.getClassDisplayValue(),\n                \"active\": gr.getValue(\"active\"),\n                \"status\": gr.getValue(\"active\")==\"1\"?gs.getMessage(\"Active\"):gs.getMessage(\"Inactive\"),\n                \"desc\": gr.getDisplayValue(\"condition\"),\n                \"button_label\": gs.getMessage(\"Edit configuration\"),\n                \"sysId\": gr.getValue(\"sys_id\")\n            });\n        }\n    }\n    return res;\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"table_name\",\n      \"label\": \"Table Name\",\n      \"description\": \"Table Name\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"query\",\n      \"label\": \"Query\",\n      \"description\": \"Query\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": false,\n      \"defaultValue\": \"\"\n  }\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sys_ux_data_broker_transform_cdce016c87070110a4a2c077f6cb0bcf","api_name":"sn_cp_sfs.get IAR Details","mutates_server_data":"false","name":"get IAR Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Is User Associated tab\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search term\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task number or class\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Search dedupe tasks using task number or class","sys_updated_on":"2023-10-03 19:09:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ce3dc6f773bc71103f3cc3ed8ff6a740","sys_updated_by":"admin","sys_created_on":"2023-08-28 16:59:07","sys_name":"De-duplication Template Task Search","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"18","sys_tags":"","script":"// returns array of matching tasks given search term on number or class (short description)\nfunction transform(input) {\n\tvar result = {\n\t\terrors: [],\n\t\tsearch: '',\n\t\ttasks: []\n\t};\n\n\tvar limit = gs.getProperty('sn_cmdb_ws.dedupetemplate.max_task_query_limit');\n\n\t// if limit is not set or it is set to an invalid value, go with the default value of 50\n\tif (!limit || limit <= 0 ) {\n\t\tlimit = 50;\n\t}\n\t\n\ttry {\n\t\tvar search = input.search;\n\t\tif (!search) {\n\t\t\tresult.errors.push('search term is missing');\n\t\t\treturn result;\n\t\t}\n\t\n\t\tresult.search = search;\n\t\tvar templateSysId = input.templateSysId;\n\t\tresult.template = templateSysId;\n\t\tvar isUserAssociatedTab = input.isUserAssociatedTab;\n\t\tresult.isUserAssociatedTab = isUserAssociatedTab;\n\n\t\tif (isUserAssociatedTab) {\n\t\t\t/*\n\t\t\t\tFor user assigned tab, do a simple search directly on de-dupe task table\n\t\t\t*/\n\t\t\tvar gr = new GlideRecordSecure('reconcile_duplicate_task');\n\t\t\tgr.addEncodedQuery('numberLIKE' + search + '^ORshort_descriptionLIKE' + search);\n\t\t\tgr.addQuery(\"template\", templateSysId);\n\t\t\t// for user assigned search, only allow search on open tasks\n\t\t\tgr.addQuery('state', 1);\n\t\t\tgr.orderByDesc('sys_updated_on');\n\t\t\tgr.setLimit(limit);\n\t\t\tgr.query();\n\t\t\twhile(gr.next()) {\n\t\t\t\tresult.tasks.push({\n\t\t\t\t\tid: gr.getUniqueValue(),\n\t\t\t\t\tlabel: gr.getValue('number'),\n\t\t\t\t\tsublabel: gr.getValue('short_description'),\n\t\t\t\t\tcount: gr.getValue('duplicate_count')\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\t/*\n\t\t\t\tIf we're on the suggested matches tab, then we want to do the search on the calculated table\n\t\t\t*/\n\t\t\tvar matchingItems = (new GetDedupeTaskInfo()).getMatchingTasks(templateSysId, search);\n\t\t\tresult.taskCount = matchingItems.length;\n\n\t\t\tfor (var i = 0; i < matchingItems.length; i++) {\n\t\t\t\tresult.tasks.push({\n\t\t\t\t\tid: matchingItems[i].sysId,\n\t\t\t\t\tlabel: matchingItems[i].number.label,\n\t\t\t\t\tsublabel: matchingItems[i].short_description.label,\n\t\t\t\t\tcount: matchingItems[i].ci_count.value\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t} catch (error) {\n\t\tresult.errors.push(error.toString());\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n  {\r\n     \"name\": \"search\",\r\n     \"label\": \"Search term\",\r\n     \"fieldType\": \"string\",\r\n     \"readOnly\": false,\r\n     \"mandatory\": true,\r\n     \"description\": \"Task number or class\"\r\n  },\r\n  {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n   {\r\n      \"name\": \"isUserAssociatedTab\",\r\n      \"label\": \"Is User Associated tab\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_ce3dc6f773bc71103f3cc3ed8ff6a740","api_name":"sn_cmdb_ws.De-duplication Template Task Search","mutates_server_data":"false","name":"De-duplication Template Task Search","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[{\"message\":\"Table\",\"comment\":\"\"},{\"message\":\"Optional Record\",\"comment\":\"\"},{\"message\":\"Optional Table\",\"comment\":\"\"},{\"message\":\"Record to lookup\",\"comment\":\"\"},{\"message\":\"Record\",\"comment\":\"\"},{\"message\":\"Table to lookup\",\"comment\":\"\"}]","batch_exclude":"false","description":"Given sys_id and table, retreive the relevant Related Record Context and its Related Records Definitions.","sys_updated_on":"2021-04-06 22:21:47","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ce76de065322201031cdddeeff7b12e0","sys_updated_by":"admin","sys_created_on":"2021-02-27 02:05:37","sys_name":"Fetch Related Record Definitions","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4b2d950b87c220109bada7da0acb0baa","value":"4b2d950b87c220109bada7da0acb0baa"},"sys_created_by":"admin","sys_mod_count":"77","sys_tags":"","script":"function transform(input) {\n\treturn new sn_uib_dyn_rel_rec.RelatedRecordsUtil().getRelatedRecordDefinitions(input.table, input.sysId, input.optional_table, input.optional_sysId);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"table\",\r\n    \"label\": \"Table\",\r\n    \"description\": \"Table to lookup\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n {\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Record\",\r\n  \"description\": \"Record to lookup\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n },\r\n{\r\n    \"name\": \"optional_table\",\r\n    \"label\": \"Optional Table\",\r\n    \"description\": \"Table to lookup\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n {\r\n  \"name\": \"optional_sysId\",\r\n  \"label\": \"Optional Record\",\r\n  \"description\": \"Record to lookup\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4b2d950b87c220109bada7da0acb0baa","value":"4b2d950b87c220109bada7da0acb0baa"},"sys_update_name":"sys_ux_data_broker_transform_ce76de065322201031cdddeeff7b12e0","api_name":"sn_uib_aw_addon.Fetch Related Record Definitions","mutates_server_data":"false","name":"Fetch Related Record Definitions","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"New Password\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-08 13:53:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"cea20f9d9f7d0210d9e5328dda0a1c57","sys_updated_by":"admin","sys_created_on":"2024-04-25 15:41:38","sys_name":"Initialize PWD Reset Workflow","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\treturn  new sn_uib_pwd_reset.PwdResetUXFResetProcessor().startResetFlow(input.token,input.newPassword);\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n{\r\n      \"name\": \"newPassword\",\r\n      \"label\": \"New Password\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_cea20f9d9f7d0210d9e5328dda0a1c57","api_name":"sn_uib_pwd_reset.Initialize PWD Reset Workflow","mutates_server_data":"true","name":"Initialize PWD Reset Workflow","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Native translation language\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update Native Translation Languages","sys_updated_on":"2024-09-11 14:21:28","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ceb9e1319fe0121050df2e5af90a1c09","sys_updated_by":"admin","sys_created_on":"2024-09-10 15:21:29","sys_name":"Update Native Translation Languages","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n    var NOWLLM_MODEL = 'llm_generic';\n    var languages = input.languages;\n    languages = languages.join(',');\n\n    try {\n        var nativeTranslationLangGr = new GlideRecord('sys_generative_ai_native_translation_langs');\n        nativeTranslationLangGr.addQuery('model.model', NOWLLM_MODEL);\n        nativeTranslationLangGr.query();\n        var count = nativeTranslationLangGr.getRowCount();\n        if (count > 0) {\n            if (nativeTranslationLangGr.next()) {\n                nativeTranslationLangGr.setValue('allowed_languages', languages);\n                nativeTranslationLangGr.update();\n            }\n        } else {\n            var modelConfigGr = new GlideRecord('sys_generative_ai_model_config');\n            modelConfigGr.addQuery('model', NOWLLM_MODEL);\n            modelConfigGr.query();\n            if (modelConfigGr.next()) {\n                var model = modelConfigGr.getUniqueValue();\n            }\n            if (!gs.nil(model)) {\n                nativeTranslationLangGr.setValue('allowed_languages', languages);\n                nativeTranslationLangGr.setValue('model', model);\n                nativeTranslationLangGr.insert();\n            }\n        }\n    } catch (error) {\n        gs.error(\"Failed to get Now LLM supported languages\" + error.toString());\n    }\n\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"languages\",\n        \"label\": \"Native translation language\",\n        \"description\": \"Native translation language\",\n        \"readOnly\": false,\n        \"fieldType\": \"array\",\n        \"mandatory\": true,\n        \"defaultValue\": []\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_ceb9e1319fe0121050df2e5af90a1c09","api_name":"sn_nowassist_admin.Update Native Translation Languages","mutates_server_data":"true","name":"Update Native Translation Languages","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get chat settings plugin status;\n  - Agent - Toolbar Quick actions\n  - Profanity plugin status","sys_updated_on":"2021-11-02 06:32:52","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"cf346bd453b2301033cdddeeff7b125e","sys_updated_by":"admin","sys_created_on":"2021-09-21 04:07:52","sys_name":"CI chat settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"25","sys_tags":"","script":"function transform(input) {\n\n    var result = {};\n\n    // Live agent settings\n    result.chat_setup = {};\n    var settingsGr = new GlideRecord('sys_cs_live_agent_setup');\n    settingsGr.query();\n    if (settingsGr.next() && settingsGr.canRead()) {\n        var _chatSettings = {\n            sys_id: settingsGr.getUniqueValue(),\n            readOnly: !settingsGr.canWrite()\n        };\n\n        if (_chatSettings.readOnly && !settingsGr.isInSelectedScope()) {\n            _chatSettings.crossScopeMessage = gs.getMessage('This page can only be edited when {0} is the current application. Change the scope to make any updates.',\n                '<strong>' + settingsGr.getTableScopeName() + '</strong>');\n        }\n\n        var _reqColumns = ['name', 'show_agent_details', 'show_agent_name_in_header', 'live_agent_enabled', 'allow_transcript_download', 'wait_status', 'agent_whisper', 'transfer_message', 'no_agent_available_message', 'emoji_enabled'];\n        _reqColumns.forEach(function(_column) {\n            var _value = settingsGr.getValue(_column);\n            _chatSettings[_column] = {\n                value: (_value == \"0\") ? false : (_value == \"1\") ? true : _value,\n                displayValue: settingsGr.getDisplayValue(_column)\n            };\n        });\n\n        // autopilot_client_messages_enabled - This column is added in 'Glide Virtual Agent'(com.glide.cs.chatbot) plugin\n        if (GlidePluginManager.isActive('com.glide.cs.chatbot')) {\n            var _autoPilotColumn = 'autopilot_client_messages_enabled';\n            var _value = settingsGr.getValue(_autoPilotColumn);\n            _chatSettings[_autoPilotColumn] = {\n                value: (_value == \"0\") ? false : (_value == \"1\") ? true : _value,\n                displayValue: settingsGr.getDisplayValue(_autoPilotColumn)\n            };\n        }\n\n        result.chat_setup = _chatSettings;\n\n        //Connect Plugin Detection\n        if (GlidePluginManager.isActive('com.glide.connect.support')) {\n            result.showLegacyConnect = true;\n            result.connectLink = {\n                label: gs.getMessage('Connect Support settings (previously Chat Setup)'),\n                url: '/nav_to.do?uri=%2Fsys_cs_live_agent_setup.do%3Fsys_id%3D'\n            };\n        }\n\n    } else {\n        // TODO : Domain handling and update error message\n        result.chat_setup = {\n            error: gs.getMessage(\"Unable to fetch chat settings. Contact system administrator for details\")\n        };\n    }\n\n    // Profanity detection plugin\n    result.isProfanityFilterInstalled = GlidePluginManager.isActive('com.sn.va.profanity');\n    if (result.isProfanityFilterInstalled) {\n        var flaggedWordsGR = new GlideAggregate(\"sys_cs_profane_word\");\n\t\tif (flaggedWordsGR.isValid()) {\n\t\t\tflaggedWordsGR.addAggregate('COUNT');\n\t\t\tflaggedWordsGR.query();\n\t\t\tvar _count = flaggedWordsGR.next() ? flaggedWordsGR.getAggregate('COUNT') : 0;\n\t\t\tresult.profanityFlaggedWordsText = gs.getMessage(\"Flagged words ({0})\", _count);\t\t\t\n\t\t}\n    } else {\n        // TODO: Maintain a central store (protected script include atleast) for all plugin related links used in admin console\n        result.profanityFilterAppLink = \"https://store.servicenow.com/sn_appstore_store.do#!/store/application/77d07c3b7352201076d81f8afaf6a7bb\";\n    }\n\n    // Workspace Quick Actions \n    if (GlidePluginManager.isActive('com.glide.quickactions')) {\n        var actionsGr = new GlideRecord('quickactions_workspace_action');\n        result.quickActionsAvailable = actionsGr.isValid() && actionsGr.canRead();\n        if (result.quickActionsAvailable) {\n            var actionssGR = new GlideAggregate(\"quickactions_workspace_action\");\n            actionssGR.addAggregate('COUNT');\n            actionssGR.query();\n            var actionsCount = actionssGR.next() ? actionssGR.getAggregate('COUNT') : 0;\n            result.quickActionsText = gs.getMessage(\"Quick actions ({0})\", actionsCount);\n        }\n    }\n\n    return result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sys_ux_data_broker_transform_cf346bd453b2301033cdddeeff7b125e","api_name":"global.CI chat settings","mutates_server_data":"false","name":"CI chat settings","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-19 01:28:02","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"cfed884847f85e10395a989c416d4387","sys_updated_by":"admin","sys_created_on":"2024-09-17 08:28:59","sys_name":"isGlobalAppCreationEnabled","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/50c45c69e0089cfa57aa73a642c702c7","value":"50c45c69e0089cfa57aa73a642c702c7"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform() {\n\treturn {\n\t\tisGlobalAppCreationEnabled: gs.getProperty('sn_g_app_creator.allow_global') === 'true'\n\t};\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/50c45c69e0089cfa57aa73a642c702c7","value":"50c45c69e0089cfa57aa73a642c702c7"},"sys_update_name":"sys_ux_data_broker_transform_cfed884847f85e10395a989c416d4387","api_name":"sn_studio_commons.isGlobalAppCreationEnabled","mutates_server_data":"false","name":"isGlobalAppCreationEnabled","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Retrieve current application scope of logged in user","sys_updated_on":"2022-09-28 04:37:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d0106f40431211108b2b53c5abb8f2e5","sys_updated_by":"admin","sys_created_on":"2022-09-28 04:37:11","sys_name":"Look Up Scope","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform() {\n    return {\n        applicationId: gs.getCurrentApplicationId()\n\t};\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d02e63b304752210559073c06a02f777","value":"d02e63b304752210559073c06a02f777"},"sys_update_name":"sys_ux_data_broker_transform_d0106f40431211108b2b53c5abb8f2e5","api_name":"global.Look Up Scope","mutates_server_data":"false","name":"Look Up Scope","output_schema":"[{\r\n    \"name\": \"applicationId\",\r\n    \"label\": \"Application ID\",\r\n    \"description\": \"The application currently selected in the application picker\",\r\n    \"readOnly\": true,\r\n    \"fieldType\": \"string\"\r\n}]","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id of Selected User\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-08 10:28:55","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d042d594a3cf311097f9d63f26fcdad6","sys_updated_by":"admin","sys_created_on":"2023-12-07 12:06:17","sys_name":"Get User Contact Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    if (!input.sysId) return;\n    var userGr = new global.OCRotation()._getUser(input.sysId);\n    var userContactDetails = {};\n    if (userGr) {\n        userContactDetails.avatar = userGr.getValue('avatar');\n        userContactDetails.email = userGr.getValue('email');\n        userContactDetails.phone = userGr.getValue('phone');\n        userContactDetails.name = userGr.getValue('name');\n        userContactDetails.mobile_phone = userGr.getValue('mobile_phone');\n        userContactDetails.active = userGr.getValue('active');\n    }\n    return userContactDetails;\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"sysId\",\r\n  \"description\": \"Sys Id of Selected User\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_d042d594a3cf311097f9d63f26fcdad6","api_name":"sn_uib_on_call.Get User Contact Details","mutates_server_data":"false","name":"Get User Contact Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Library Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-19 23:17:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d07e7df293493110f769fa6074891890","sys_updated_by":"admin","sys_created_on":"2023-09-06 23:42:29","sys_name":"De-duplication Template get library details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n    if (!input.librarySysId || input.librarySysId == '') {\n        return {};\n    }\n    var tgr = new GlideAggregate('reconcile_duplicate_template');\n    tgr.addAggregate('COUNT');\n    tgr.addQuery('library', input.librarySysId);\n    tgr.query();\n    var templateCount = 0;\n    var templateRunningCount = 0;\n    if (tgr.next()) {\n        templateCount = tgr.getAggregate('COUNT');\n    }\n    var trgr = new GlideAggregate('reconcile_duplicate_template_run');\n    trgr.addQuery('template.library', input.librarySysId);\n    trgr.addQuery('state', 'running');\n    trgr.addAggregate('COUNT');\n    trgr.query();\n    if (trgr.next()) {\n        templateRunningCount = trgr.getAggregate('COUNT');\n    }\n    var gr = new GlideRecord('sn_cmdb_ws_reconcile_duplicate_template_library');\n    gr.addQuery('sys_id', input.librarySysId);\n    gr.query();\n    if (gr.next()) {\n        return {\n            libraryDetails: {\n                name: gr.getValue('name'),\n                description: gr.getValue('description'),\n\t\t\t\ttemplateCount: templateCount,\n\t\t\t\ttemplateRunningCount: templateRunningCount\n            }\n        };\n    }\n    return {};\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"librarySysId\",\r\n      \"label\": \"Library Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_d07e7df293493110f769fa6074891890","api_name":"sn_cmdb_ws.De-duplication Template get library details","mutates_server_data":"false","name":"De-duplication Template get library details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get policy record data","sys_updated_on":"2024-06-14 23:28:02","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d0a3b896435d021039f15dc36ab8f236","sys_updated_by":"maint","sys_created_on":"2024-04-03 11:23:52","sys_name":"Get policy record details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    var id = input && input.sys_id;\n    if (!id) return {};\n    var gr = new GlideRecord(\"sn_vsc_security_policy\");\n    if (gr.get(id)) {\n      return {\n        \"name\" : gr.getDisplayValue(),\n        \"updated\" : gr.getDisplayValue(\"sys_updated_on\"),\n        \"updated_by\" : gr.getDisplayValue(\"sys_updated_by\"),\n        \"created\" : gr.getDisplayValue(\"sys_created_on\"),\n        \"created_by\" : gr.getDisplayValue(\"sys_created_by\")\n      };\n    } else {\n      return {};\n    }\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"sys_id\",\n    \"label\": \"ID\",\n    \"description\": \"ID\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_d0a3b896435d021039f15dc36ab8f236","api_name":"sn_vsc.Get policy record details","mutates_server_data":"false","name":"Get policy record details","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Source SysId\",\n  \"comment\" : \"\"\n},{\n  \"message\" : \"Source Table Name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-02 17:48:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d0b451f287aa21100c92bb38dabb3506","sys_updated_by":"admin","sys_created_on":"2023-05-05 13:56:15","sys_name":"Fetch Collaboration Section Dropdown Choices","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\n    var COLLABORATE_DROPDOWN_OPTIONS = \"sn_sow_collab.CollaborateDropdownOptions\";\n    var exPointImplementations = new GlideScriptedExtensionPoint().getExtensions(COLLABORATE_DROPDOWN_OPTIONS);\n    var sectionsMap = {};\n    if (exPointImplementations) {\n        for (var i = 0; i < exPointImplementations.length; i++) {\n            var handler = exPointImplementations[i];\n            handler.initialize();\n            if (typeof handler.getDropDownChoices !== 'function') {\n                return;\n            }\n            var dropdownPayload = handler.getDropDownChoices(input.tableName, input.recordSysId);\n            if (dropdownPayload.sectionId) {\n                if (!sectionsMap[dropdownPayload.sectionId]) {\n                    var section = {};\n                    section.id = dropdownPayload.sectionId;\n                    section.label = dropdownPayload.sectionLabel;\n                    section.children = [];\n                    sectionsMap[dropdownPayload.sectionId] = section;\n                }\n                sectionsMap[dropdownPayload.sectionId].children = dropdownPayload.children;\n            }\n        }\n    }\n    var collabDropdownSections = [];\n    Object.keys(sectionsMap).forEach(function(section) {\n        collabDropdownSections.push(sectionsMap[section]);\n    });\n    return collabDropdownSections;\n\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"recordSysId\",\n    \"label\": \"Source SysId\",\n    \"description\": \"Source SysId\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"tableName\",\n    \"label\": \"Source Table Name\",\n    \"description\": \"Source Table Name\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_update_name":"sys_ux_data_broker_transform_d0b451f287aa21100c92bb38dabb3506","api_name":"sn_sow_collab.Fetch Collaboration Section Dropdown Choices","mutates_server_data":"false","name":"Fetch Collaboration Section Dropdown Choices","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Query Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Query SysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Delete multisource query given query sys id","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d0c0d16377f8511023651605bc5a99f6","sys_updated_by":"admin","sys_created_on":"2022-07-26 01:39:39","sys_name":"Multisource delete query","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\tvar result = {\n\t\terror: null,\n\t\tstatus : 'success',\n\t\tmessage : null\n\t};\n\t\n\tvar querySysId = input.query_sys_id;\n\tif (!querySysId) {\n\t\tresult.status = 'failure';\n\t\tresult.error = \"query_sys_id is missing\";\n\t\treturn result;\n\t}\n\t\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tresult = util.deleteQuery(querySysId);\n\t\n\treturn result;\n\t\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"query_sys_id\",\r\n    \"label\": \"Query Sys Id\",\r\n    \"description\": \"Query SysId\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_d0c0d16377f8511023651605bc5a99f6","api_name":"sn_cmdb_ws.Multisource delete query","mutates_server_data":"true","name":"Multisource delete query","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Comma separated list of sys ids. If left empty then all stuck jobs in sys_trigger will be recovered.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Ids\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Recovers stuck scheduled jobs from sys_trigger","sys_updated_on":"2024-05-31 16:47:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d0c4d71043ae021073e946c8dbb8f25a","sys_updated_by":"admin","sys_created_on":"2024-05-29 21:13:23","sys_name":"Recover Stuck Scheduled Jobs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/74fdcd7a437121109fa864cec7b8f27b","value":"74fdcd7a437121109fa864cec7b8f27b"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n    try {\n\t\tvar utils = new AsyncDashboardUtils();\n        var sysIdsInput = input.sys_ids;\n\n        if (sysIdsInput == \"\") {\n            var sysIds = [];\n\n            var stuckJobs = utils.getStuckJobs();\n\n            while (stuckJobs.next()) {\n                sysIds.push(stuckJobs.getUniqueValue());\n            }\n\n            sysIds.forEach(function(sys_id) {\n                utils.recoverStuckRecord(sys_id);\n            });\n        } else {\n            var sysIdsInputArr = sysIdsInput.split(\",\");\n            sysIdsInputArr.forEach(function(sys_id) {\n                utils.recoverStuckRecord(sys_id);\n            });\n        }\n    } catch (ex) {\n        gs.error(\"Error recovering stuck scheduled jobs: \" + ex);\n    }\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"sys_ids\",\r\n      \"label\": \"Sys Ids\",\r\n      \"description\": \"Comma separated list of sys ids. If left empty then all stuck jobs in sys_trigger will be recovered.\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/74fdcd7a437121109fa864cec7b8f27b","value":"74fdcd7a437121109fa864cec7b8f27b"},"sys_update_name":"sys_ux_data_broker_transform_d0c4d71043ae021073e946c8dbb8f25a","api_name":"sn_async_dashboard.Recover Stuck Scheduled Jobs","mutates_server_data":"true","name":"Recover Stuck Scheduled Jobs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Data broker used for querying SRM Team requests for the SOW Team management page","sys_updated_on":"2024-05-30 00:46:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d110a371ebe67510ea6e4ee5b55228ab","sys_updated_by":"admin","sys_created_on":"2023-11-17 17:41:54","sys_name":"SOW Team management - Lookup Requests","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","sys_mod_count":"64","sys_tags":"","script":"function transform(input) {\n    if (!GlidePluginManager.isActive('com.snc.uib.sow_srm') || !GlidePluginManager.isActive('com.snc.uib.sow_srm_common')) {\n        return false;\n    }\n    var AVATAR_LIMIT = 11; // the number of avatars we want to show on the Team request cards\n\n    // transform the requests results for the SOW teams UX\n    var teamRequestList = new sn_sow_srm.SRMTeamManagement().getTeamRequests();\n\n    // and decorate the teamRequestList items with the additional fields\n    teamRequestList.forEach(function(teamRequest) {\n        // get the card fields. Handle the case of an existing or new team\n        // - existing team: assignment_group.name\n        // - new team name:\n        var item = new GlideRecordSecure('sc_req_item');\n        if (!!teamRequest.requested_item && item.get(teamRequest.requested_item.value)) {\n            switch (item.variables['create_team'] + '') {\n                case sn_sow_srm_common.SRMCommonConstants.TEAM_PROVISIONING.NEW_TEAM:\n                    handleCreateNewTeam(teamRequest, item.variables);\n                    break;\n\n                case sn_sow_srm_common.SRMCommonConstants.TEAM_PROVISIONING.EXISTING_TEAM:\n                    handleUseExistingTeam(teamRequest, item.variables);\n                    break;\n            }\n        }\n    });\n    return teamRequestList;\n\n\n    function handleCreateNewTeam(teamRequest, variables) {\n        for (var key in variables) {\n            var v = variables[key];\n\n            if (v != '' && !v.nil()) {\n                switch (key) {\n                    case 'manager':\n                        handleManager(teamRequest, v.toString());\n                        break;\n                    case 'members':\n                        handleMembersByIDs(teamRequest, v.toString());\n                        break;\n                    case 'email':\n                        handleEmail(teamRequest, v.toString());\n                        break;\n                }\n            }\n        }\n    }\n\n    function handleUseExistingTeam(teamRequest, variables) {\n        for (var key in variables) {\n            var v = variables[key];\n\n            if (v != '' && !v.nil()) {\n                switch (key) {\n                    case 'assignment_group':\n                        // handle 'existing team' registration\n                        handleAssignmentGroup(teamRequest, v.toString());\n                        break;\n                }\n            }\n        }\n    }\n\n    /**\n     * Update teamRequest by reference\n     */\n    function handleManager(teamRequest, sysId) {\n        var gr = new GlideRecord('sys_user'); // just getting manager name/sys_id. GlideRecord is low-risk\n        if (!gr.get(sysId))\n            return;\n\n        teamRequest['manager'] = {\n            \"value\": gr.getUniqueValue(),\n            \"displayValue\": gr.getDisplayValue()\n        };\n    }\n\n    function handleEmail(teamRequest, email) {\n        if (!email)\n            return;\n\n        teamRequest['email'] = {\n            \"value\": email,\n            \"displayValue\": email\n        };\n    }\n\n    function handleAssignmentGroup(teamRequest, assignmentGroup) {\n        var group = new GlideRecord('sys_user_group'); // No significant user-input. GlideRecord is low-risk\n        if (!group.get(assignmentGroup))\n            return false;\n\n        handleManager(teamRequest, group.getValue('manager'));\n        handleEmail(teamRequest, group.getValue('email'));\n        handleMembersByGroup(teamRequest, assignmentGroup);\n    }\n\n    /**\n     * Handles group members by comma separated string of userIds\n     */\n    function handleMembersByIDs(teamRequest, memberIds) {\n        if (gs.nil(memberIds))\n            return;\n\n        var members = memberIds.split(',');\n        teamRequest['members'] = {\n            \"members\": _getMembersByIDs(memberIds),\n            \"count\": members.length\n        };\n    }\n\n    function _getMembersByIDs(memberIds) {\n        var retval = [];\n        var gr = new GlideRecord('sys_user');\n        gr.addQuery('sys_id', 'IN', memberIds);\n        gr.orderBy('name');\n        gr.setLimit(AVATAR_LIMIT);\n        gr.query();\n        if (!gr.hasNext())\n            return;\n\n        while (gr.next()) {\n            var avatarPath = GlideAvatarFinder.getAvatarPath(gr.getUniqueValue());\n            if (avatarPath)\n                avatarPath = '/' + avatarPath;\n\n            retval.push({\n                \"sys_id\": gr.getUniqueValue(),\n                \"name\": gr.getValue('name'),\n                \"avatar\": avatarPath || ''\n            });\n        }\n        return retval;\n    }\n\n    /**\n     * Handles group members by groupId\n     */\n    function handleMembersByGroup(teamRequest, groupId) {\n        teamRequest['members'] = {\n            \"members\": _getMembersByGroup(groupId),\n            \"count\": _getMemberCountByGroup(groupId)\n        };\n    }\n\n    function _getMembersByGroup(groupId) {\n        var members = [];\n        var gr = new GlideRecord('sys_user_grmember');\n        gr.addQuery('group', groupId);\n        gr.setLimit(AVATAR_LIMIT);\n        gr.query();\n        if (!gr.hasNext())\n            return;\n\t\t\n        while (gr.next()) {\n            members.push(gr.getValue('user'));\n        }\n        return _getMembersByIDs(members);\n    }\n\n    function _getMemberCountByGroup(groupId) {\n        var count = new GlideAggregate('sys_user_grmember');\n        count.addQuery('group', groupId);\n        count.addAggregate('COUNT');\n        count.query();\n        var memberCount = 0;\n        if (count.next())\n            memberCount = count.getAggregate('COUNT');\n\n        return memberCount;\n    }\n}","acl_failure_result":"{\r\n   \"error\": true,   \r\n   \"message\":\"User does not have required ACL to perform this action.\"\r\n}","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sys_ux_data_broker_transform_d110a371ebe67510ea6e4ee5b55228ab","api_name":"sn_sow.SOW Team management - Lookup Requests","mutates_server_data":"false","name":"SOW Team management - Lookup Requests","output_schema":"[\r\n  {\r\n    \"_row_data\": {\r\n      \"displayValue\": \"adsfasfd\",\r\n      \"uniqueValue\": \"d76dbe2debaef110ea6e4ee5b55228e0\"\r\n    },\r\n    \"team_name\": {\r\n      \"value\": \"adsfasfd\",\r\n      \"displayValue\": \"adsfasfd\"\r\n    },\r\n    \"requested_item\": {\r\n      \"value\": \"5b5dfa2debaef110ea6e4ee5b552286d\",\r\n      \"displayValue\": \"RITM0010001\"\r\n    },\r\n    \"status\": {\r\n      \"value\": \"pending\",\r\n      \"displayValue\": \"Pending\"\r\n    },\r\n    \"manager\": {\r\n      \"value\": \"6816f79cc0a8016401c5a33be04be441\",\r\n      \"displayValue\": \"System Administrator\"\r\n    },\r\n    \"email\": {\r\n      \"value\": \"test@exmaple.com\",\r\n      \"displayValue\": \"test@exmaple.com\"\r\n    },\r\n    \"members\": {\r\n      \"members\": [\r\n        {\r\n          \"sys_id\": \"62826bf03710200044e0bfc8bcbe5df1\",\r\n          \"name\": \"Abel Tuter\",\r\n          \"avatar\": \"eb513744c3222010ae17dd981840dd97\"\r\n        },\r\n        {\r\n          \"sys_id\": \"0a826bf03710200044e0bfc8bcbe5d7a\",\r\n          \"name\": \"Adela Cervantsz\",\r\n          \"avatar\": \"58e13b44c3222010ae17dd981840ddd3\"\r\n        }\r\n      ],\r\n      \"count\": 3\r\n    }\r\n  }\r\n]","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ICP Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-25 17:32:16","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d125881b043cca10f877eb0e76ed1a3f","sys_updated_by":"admin","sys_created_on":"2024-03-12 13:58:07","sys_name":"Resolve ICP prefill participants for sidebar chat","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0d2383dd53687510b256ddeeff7b12b8","value":"0d2383dd53687510b256ddeeff7b12b8"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    var output = {};\n    if (!input.icpSysId)\n        return output;\n    var commManagementUtil = new sn_comm_management.CommunicationManagementUtil();\n    var users = commManagementUtil.getContactsForChat(input.icpSysId, 'incident_alert');\n    var incidentAlertGr = new GlideRecord('incident_alert');\n    if (incidentAlertGr.get(input.icpSysId)) {\n        var incidentSysId = incidentAlertGr.source_incident.toString();\n        var incidentGr = new GlideRecord('incident');\n        if (incidentGr.get(incidentSysId)) {\n            try {\n                var inputs = {};\n                inputs['incident'] = incidentGr; // GlideRecord of table: incident \n                inputs['users'] = users; // Array.String \n                var result = sn_fd.FlowAPI.getRunner().subflow('sn_uib_tcm.run_permission_check_action_for_prefilling_ict_sidebar_chat_users').inForeground().withInputs(inputs).run();\n                var outputs = result.getOutputs();\n                var allowed_users = outputs['allowed_users']; // Array.String\n                var error_message = outputs['error_message']; // String\n                output.users = allowed_users;\n                output.error_message = error_message;\n\n            } catch (ex) {\n                var message = ex.getMessage();\n                gs.error(message);\n            }\n        }\n    }\n\n    return output;\n}","acl_failure_result":"","props":"[\n\t{\n\t  \"name\": \"icpSysId\",\n          \"label\": \"ICP Sys Id\",\n          \"description\": \"ICP Sys Id\",\n          \"readOnly\": false,\n          \"fieldType\": \"string\",\n          \"mandatory\": true\n\t}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0d2383dd53687510b256ddeeff7b12b8","value":"0d2383dd53687510b256ddeeff7b12b8"},"sys_update_name":"sys_ux_data_broker_transform_d125881b043cca10f877eb0e76ed1a3f","api_name":"sn_uib_tcm.Resolve ICP prefill participants for sidebar chat","mutates_server_data":"false","name":"Resolve ICP prefill participants for sidebar chat","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"App Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"CI sysid\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Config Identifier Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Input data passed in specifically for Service mapping \",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Levels\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Perf Logging\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Reload timestamp\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Service mapping input data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Supports granular configurations both within and across Workspaces\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The workspace Id (aka appId)\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Timestamp used to trigger reload/re-fetch\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"number of levels up and down to traverse parent and child relationships\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"set this to true to capture performance metrics\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysid of the CI to get relationship data for\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get CIs and their connection data (aka. relationships) starting from a root CI outward.","sys_updated_on":"2024-09-11 20:23:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d12d63cc77668510960ced43ba5a99da","sys_updated_by":"admin","sys_created_on":"2022-03-25 19:53:07","sys_name":"Get Map Data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"132","sys_tags":"","script":"function transform(input) {\n    var perfMetrics;\n    if (input.perfLogging) {\n        //capture timestamps for\n        // 1) end of uxf getMap outbound call time\n        // 2) start of total backend time\n        var now = Date.now();\n        perfMetrics = {\n            uxf_getmap_outbound_call_time: { end: now },\n            total_backend_time: { start: now }\n        };\n    }\n    var unifiedMapHelper = new UnifiedMapHelper();\n    var sysid = input.sysid.trim();\n    var properties = unifiedMapHelper.getConfigPropertyValues({\n        workspaceId: input.appId,\n        configIdentifierId: input.configIdentifierId,\n        properties: ['unifiedmap.map_search_filter.default_levels', 'unifiedmap.map_search_filter.max_levels']\n    }).result;\n    var defaultLevels = properties['unifiedmap.map_search_filter.default_levels'];\n    var levels = parseInt(input.levels) || parseInt(defaultLevels);\n    var maxLevels = parseInt(properties['unifiedmap.map_search_filter.max_levels']);\n\n    if (levels > maxLevels) {\n        levels = maxLevels;\n    } else if (levels < 1) {\n        levels = 1;\n    }\n\n    var result = {\n        sysid: sysid,\n        levels: levels,\n        appId: input.appId,\n        perfLogging: input.perfLogging,\n        errors: [],\n        messages: [],\n        rawData: {}\n    };\n\n    try {\n        if (!sysid) {\n            var util = new MapErrorUtility();\n            result.errors.push({\n                code: util.CMDBUM_400_001,\n                message: util.ERROR_CODES['CMDBUM-400-001']\n            });\n        } else if (!levels) {\n            result.errors.push({\n                code: util.CMDBUM_400_003,\n                message: util.ERROR_CODES['CMDBUM-400-003']\n            });\n        } else {\n            var response = unifiedMapHelper.getMap({ \n                ciSysId: sysid, \n                level: levels, \n                appId: input.appId,\n                perfLogging: input.perfLogging,\n                serviceMappingInput: input.serviceMappingInput,\n                configIdentifierId: input.configIdentifierId\n            });\n            if (response.success) {\n                result.rawData = response.result;\n                result.messages = response.messages;\n            } else {\n                gs.error('CMDB Workspace - Unified Map - Error encountered fetching server data calling script include UnifiedMapHelper().getMap(' + sysid + ', ' + levels + '). ' + \n                    response.error.code + ': ' + response.error.message);\n                result.errors.push({\n                    code: response.error.code,\n                    message: response.error.message,\n                    uiMessage: response.error.uiMessage\n                });\n            }\n        }\n    } catch (error) {\n        result.errors.push(error.toString());\n    }\n\n    if (input.perfLogging) {\n        //capture timestamps for\n        // 1) end of total backend time\n        // 2) start of uxf inbound return time\n        var now2 = Date.now();\n        perfMetrics.total_backend_time.end = now2;\n        perfMetrics.uxf_getmap_inbound_return_time = { start: now2 };\n\n        //add perf times in this script to the perfMetrics returned from getMap\n        var deepMerge = function (obj1, obj2) {\n            var obj3 = {};\n\n            for (var key in obj1) {\n                if (obj1.hasOwnProperty(key)) {\n                    obj3[key] = obj1[key];\n                }\n            }\n\n            for (var key2 in obj2) {\n                if (obj2.hasOwnProperty(key2)) {\n                    if (typeof obj3[key2] === \"object\" && typeof obj2[key2] === \"object\") {\n                        obj3[key2] = deepMerge(obj3[key2], obj2[key2]);\n                    } else {\n                        obj3[key2] = obj2[key2];\n                    }\n                }\n            }\n\n            return obj3;\n        };\n        var combinedPerfMetrics = deepMerge(result.rawData.perfMetrics, perfMetrics);\n        result.rawData.perfMetrics = combinedPerfMetrics;\n    }\n    /* TODO: Add back commented lines  when mapDataFetchFailed flow enabled (STRY57881588 will address this)\n    if(result.errors && result.errors.length > 0) {\n        throw JSON.stringify(result);\n    }*/\n    return result;\n}","acl_failure_result":"{\r\n\t\"message\": \"User does not have required roles to perform this action.\"\r\n}","props":"[\r\n    {\r\n        \"name\": \"sysid\",\r\n        \"label\": \"CI sysid\",\r\n        \"fieldType\": \"string\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": true,\r\n        \"description\": \"sysid of the CI to get relationship data for\"\r\n    },\r\n    {\r\n        \"name\": \"levels\",\r\n        \"label\": \"Levels\",\r\n        \"fieldType\": \"number\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": true,\r\n        \"description\": \"number of levels up and down to traverse parent and child relationships\"\r\n    },\r\n    {\r\n        \"name\": \"perfLogging\",\r\n        \"label\": \"Perf Logging\",\r\n        \"fieldType\": \"boolean\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": false,\r\n        \"description\": \"set this to true to capture performance metrics\"\r\n    },\r\n    {\r\n        \"name\": \"appId\",\r\n        \"label\": \"App Id\",\r\n        \"fieldType\": \"string\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": true,\r\n        \"description\": \"The workspace Id (aka appId)\"\r\n    },\r\n    {\r\n        \"name\": \"reloadTimestamp\",\r\n        \"label\": \"Reload timestamp\",\r\n        \"fieldType\": \"string\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": false,\r\n        \"description\": \"Timestamp used to trigger reload/re-fetch\"\r\n    },\r\n    {\r\n        \"name\": \"serviceMappingInput\",\r\n        \"label\": \"Service mapping input data\",\r\n        \"fieldType\": \"string\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": false,\r\n        \"description\": \"Input data passed in specifically for Service mapping \"\r\n    },\r\n    {\r\n      \"name\": \"configIdentifierId\",\r\n      \"label\": \"Config Identifier Id\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": false,\r\n      \"description\": \"Supports granular configurations both within and across Workspaces\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_d12d63cc77668510960ced43ba5a99da","api_name":"sn_cmdb_ws.Get Map Data","mutates_server_data":"false","name":"Get Map Data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Optional Query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"View\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"view\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-03-17 22:01:29","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d142540b87510110a4a2c077f6cb0bee","sys_updated_by":"admin","sys_created_on":"2022-01-31 08:05:08","sys_name":"Get List and Record details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var tableName = input.table && input.table.trim();\n    if (!tableName) return {};\n\tvar sysId = input.sysId;\n\treturn new global.ListAndRecordPagePropsUtil().getPageProps(tableName, sysId, input.optional_query, input.view);\n\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"table\",\n    \"label\": \"Table name\",\n    \"description\": \"Table name\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"sysId\",\n    \"label\": \"Sys Id\",\n    \"description\": \"Sys Id\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"name\": \"optional_query\",\n    \"label\": \"Optional Query\",\n    \"description\": \"Optional Query\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  },\n {\n    \"name\": \"view\",\n    \"label\": \"View\",\n    \"description\": \"view\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  }\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_d142540b87510110a4a2c077f6cb0bee","api_name":"sn_ace.Get List and Record details","mutates_server_data":"false","name":"Get List and Record details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[{\n      \"message\" : \"ID\",\n      \"comment\" : \"\"\n    }, {\n      \"message\" : \"sys_id\",\n      \"comment\" : \"\"\n    }]","batch_exclude":"false","description":"Creating a response to deal with showcasing existing conditions attached with a policy","sys_updated_on":"2024-06-01 03:54:47","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d155e0df43820210c5155dc36ab8f270","sys_updated_by":"admin","sys_created_on":"2024-05-13 19:37:21","sys_name":"Get existing conditions for the policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"127","sys_tags":"","script":"function transform(input) {\n\tvar id = input && input.sys_id;\n    var resp = {\n        \"conditions_for_ui\": [],\n        \"existingConditionsOfPolicyIds\": []\n    };\n    if (id) {\n        var util = new SCSecurityPolicyUtil();\n        var res = util.getExistingPolicyConditions(id, \"sn_vsc_security_policy_condition\");\n        resp.conditions_for_ui = res.conditions_for_ui;\n        resp.existingConditionsOfPolicyIds = res.existingConditionsOfPolicyIds;\n    }\n    return resp;\n}","acl_failure_result":"","props":"[\n    {\n    \"name\": \"sys_id\",\n    \"label\": \"sys_id\",\n    \"description\": \"ID\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n    }\n    ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_d155e0df43820210c5155dc36ab8f270","api_name":"sn_vsc.Get existing conditions for the policy","mutates_server_data":"false","name":"Get existing conditions for the policy","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"ACE Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Route Params\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Route parameters\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to fetch the menu items for apps built in Admin Experience Framework","sys_updated_on":"2023-07-05 10:50:41","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d19d3dadeb64011090fa99602a52286f","sys_updated_by":"admin","sys_created_on":"2021-12-20 17:14:46","sys_name":"ACE Fetch Modules and Menu Items","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"20","sys_tags":"","script":"function transform(input) {\n    var CONSTANTS = new sn_ace.ACEAppBuilderMetaData();\n\n    function appendPageParams(contentTree) {\n        var children = contentTree;\n        while (children && children.length > 0) {\n            var nextChildren = [];\n            children.forEach(function(childItem) {\n                if (childItem.type.id == CONSTANTS.CONTENT_BLOCK_TYPES.NAV) {\n                    // Along with page parameters, replace title and \n                    // add icon to honour the existing contract.\n                    childItem.pageParams = input.current_route;\n                    childItem.label = childItem.title;\n                    childItem.icon = childItem.props_details.icon;\n                }\n                nextChildren = nextChildren.concat(childItem.children);\n                if (childItem.menu && childItem.menu.length > 0) {\n                    nextChildren = nextChildren.concat(childItem.menu);\n                }\n            });\n            children = nextChildren;\n        }\n    }\n\n    var onLoadData = {\n        ace_app_data: {},\n        modules: []\n    };\n    if (!input || !input.application_id)\n        return onLoadData;\n\n    var aceAppConfig = new GlideRecord('sn_ace_app_config');\n    if (!aceAppConfig.get(input.application_id))\n        return onLoadData;\n\n    var aceAppBuilderV2 = new ACEAppBuilderUtilV2();\n    if (aceAppBuilderV2.shouldFetchContentBlocksFromAppBundle(aceAppConfig)) {\n        var aceGlobalUtil = new global.ACEAppBuilderGlobalScopedUtil();\n        var bundle = aceAppConfig.getValue('bundle');\n        onLoadData = aceGlobalUtil.getDecompressedPageBundle(bundle);\n        var contentTree = onLoadData.modules;\n        var cbScriptVariables = {\n            pageParams: input.current_route || {},\n            blockcontext: input.block_context || {},\n            dataParams: input.data_params || {}\n        };\n        // To Execute visibility script / Post script on the entire content tree\n        var contentBlocks = aceAppBuilderV2.processCachedContentBlocks(contentTree, cbScriptVariables);\n        // Append page params to Nav items, to maintain the existing contract intact.\n        appendPageParams(contentBlocks);\n        onLoadData.modules = contentBlocks;\n        return onLoadData;\n    }\n\n    // If bundle is not available, then fallback to default way of fetching the modules and menu items.\n    var aceAppBuilder = new ACEAppBuilderUtil();\n    onLoadData = aceAppBuilder.getAceAppData(input.application_id, input.current_route);\n    return onLoadData;\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"application_id\",\n      \"label\": \"Application Id\",\n      \"description\": \"ACE Application Id\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n  {\n      \"name\": \"current_route\",\n      \"label\": \"Route Params\",\n      \"description\": \"Route parameters\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": false,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_d19d3dadeb64011090fa99602a52286f","api_name":"sn_ace.ACE Fetch Modules and Menu Items","mutates_server_data":"false","name":"ACE Fetch Modules and Menu Items","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-28 11:23:53","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d1e3835653b631108f2bddeeff7b1273","sys_updated_by":"admin","sys_created_on":"2023-12-01 15:15:41","sys_name":"Get Timezones and translations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n    var result = {\n        default_timezone: gs.getSession().getTimeZoneName(),\n        timezones: []\n    };\n    var timezones = new global.OnCallCommon().getTimezoneList();\n    var weekday_code = {};\n\n    //get suitable translations for single letter code for days of the week \n    weekday_code.sunday = sn_i18n.Message.getMessage(\"sn_on_call_schedule_weekday_sunday\", \"S{?Single letter abbreviation for the day Sunday}\");\n    weekday_code.monday = sn_i18n.Message.getMessage(\"sn_on_call_schedule_weekday_monday\", \"M{?Single letter abbreviation for the day Monday}\");\n    weekday_code.tuesday = sn_i18n.Message.getMessage(\"sn_on_call_schedule_weekday_tuesday\", \"T{?Single letter abbreviation for the day Tuesday}\");\n    weekday_code.wednesday = sn_i18n.Message.getMessage(\"sn_on_call_schedule_weekday_wednesday\", \"W{?Single letter abbreviation for the day Wednesday}\");\n    weekday_code.thursday = sn_i18n.Message.getMessage(\"sn_on_call_schedule_weekday_thursday\", \"T{?Single letter abbreviation for the day Thursday}\");\n    weekday_code.friday = sn_i18n.Message.getMessage(\"sn_on_call_schedule_weekday_friday\", \"F{?Single letter abbreviation for the day Friday}\");\n    weekday_code.saturday = sn_i18n.Message.getMessage(\"sn_on_call_schedule_weekday_saturday\", \"S{?Single letter abbreviation for the day Saturday}\");\n    result.weekday_code = weekday_code;\n\n    for (var time_zone = 0; time_zone < timezones.length; time_zone++) {\n        result.timezones.push({\n            \"id\": timezones[time_zone]['value'],\n            \"label\": timezones[time_zone]['name']\n        });\n    }\n    return result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_d1e3835653b631108f2bddeeff7b1273","api_name":"sn_uib_on_call.Get Timezones and translations","mutates_server_data":"false","name":"Get Timezones and translations","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Details of the escalation policy, step or contact preference record to be deleted\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record details\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-14 10:28:44","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d1ff9ab753ea31105dd2ddeeff7b12f6","sys_updated_by":"admin","sys_created_on":"2023-11-23 18:17:35","sys_name":"Delete escalation policy or related record","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n    var table = input.recordDetails.table;\n    var recordId = input.recordDetails.recordId;\n    var escalationPolicyData = input.recordDetails.escalationPolicyData;\n    if (gs.nil(table) || gs.nil(recordId) || gs.nil(escalationPolicyData)) return;\n\n    var ocEscPolicyUIBUtils = new sn_uib_on_call.OnCallEscalationPolicyUIBUtils();\n    var ocTeamsCalendarUtil = new sn_uib_on_call.OnCallTeamsCalendarUtil();\n    var result;\n\n    ocTeamsCalendarUtil.clearErrorMessages();\n\n    if (escalationPolicyData.escalation_policy_type && escalationPolicyData.escalation_policy_type !== \"custom\") {\n        result = ocEscPolicyUIBUtils.migrateToCustomEscalationPolicy(table, escalationPolicyData);\n    } else {\n        result = ocEscPolicyUIBUtils.deleteRecord(table, recordId);\n    }\n    result.errors = (ocTeamsCalendarUtil.getErrorMessages() || []).concat((result.errors || []));\n    if (result.success) {\n        if (!result.payload) result.payload = {};\n        result.payload.table = table;\n    }\n    return result;\n\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t\t\"name\": \"recordDetails\",\r\n\t\t\"label\": \"Record details\",\r\n\t\t\"description\": \"Details of the escalation policy, step or contact preference record to be deleted\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true,\r\n\t\t\"defaultValue\": \"\"\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_d1ff9ab753ea31105dd2ddeeff7b12f6","api_name":"sn_uib_on_call.Delete escalation policy or related record","mutates_server_data":"false","name":"Delete escalation policy or related record","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Parent Page\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-08-26 07:16:52","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d22f93a353313010249addeeff7b1201","sys_updated_by":"admin","sys_created_on":"2021-08-12 12:36:22","sys_name":"Get Important Actions Job Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4d8039d0533130106b86ddeeff7b128b","value":"4d8039d0533130106b86ddeeff7b128b"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var parentPage = input.parentPage;\n    return new sn_itam_recomm.ImportantActionUtils().getRefreshStatusOnDashboard(parentPage);\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"parentPage\",\r\n  \"label\": \"Parent Page\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4d8039d0533130106b86ddeeff7b128b","value":"4d8039d0533130106b86ddeeff7b128b"},"sys_update_name":"sys_ux_data_broker_transform_d22f93a353313010249addeeff7b1201","api_name":"sn_itam_recomm.Get Important Actions Job Status","mutates_server_data":"false","name":"Get Important Actions Job Status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Category Lists GraphQL\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-07-28 18:12:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d23c533a73e13010c01ce234c4f6a785","sys_updated_by":"admin","sys_created_on":"2021-07-28 18:12:27","sys_name":"Asset Catalog Category List Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input){\n\tvar list = input.graphqlData;\n\tvar results = [];\n\t\n\tfor(var i=0; i<list.length; i++){\n\t\tvar data = {};\n\t\tdata['id'] = list[i].sys_id.value;\n\t\tdata['label'] = list[i].title.value;\n\t\tdata['sublabel'] = list[i].sc_catalog.displayValue;\n\t\tresults.push(data);\n\t}\n\t\n\treturn results;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"graphqlData\",\r\n  \"label\": \"Category Lists GraphQL\",\r\n  \"fieldType\": \"object\",\r\n  \"mandatory\": true\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_d23c533a73e13010c01ce234c4f6a785","api_name":"sn_itam_workspace.Asset Catalog Category List Transform","mutates_server_data":"false","name":"Asset Catalog Category List Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get conversational settings admin console menu based on installed plugins","sys_updated_on":"2021-10-13 04:31:01","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d2924edf5399301033cdddeeff7b122d","sys_updated_by":"admin","sys_created_on":"2021-07-17 14:53:45","sys_name":"CI Admin Console Menu","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c2a7835187123010a4a2c077f6cb0bc0","value":"c2a7835187123010a4a2c077f6cb0bc0"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    var res = {\n        tabNameTranslations: {\n            home: gs.getMessage(\"Home\"),\n            chat_settings: gs.getMessage(\"Chat Settings\")\n        }\n    };\n    if (GlidePluginManager.isActive(\"com.glide.cs.chatbot\") || GlidePluginManager.isActive(\"com.glide.cs.chatbot.lite\")) {\n        var adminConsolePages = [];\n        // Home page\n        adminConsolePages.push({\n            id: \"general\",\n            label: gs.getMessage(\"General\")\n        });\n\n        // VA Branding and General settings pages\n        var csSettingsPlugin = \"com.glide.cs.settings\";\n        if (GlidePluginManager.isActive(csSettingsPlugin)) {\n            adminConsolePages.push({\n                id: \"virtual-agent\",\n                label: gs.getMessage(\"Virtual Agent\"),\n            });\n        }\n\n        // Agent chat page - require sys_cs_live_agent_setup\n        var liveAgentSettingsPlugin = \"com.glide.cs.live_agent_settings\";\n        if (GlidePluginManager.isActive(liveAgentSettingsPlugin)) {\n            adminConsolePages.push({\n                id: \"agent-chat\",\n                label: gs.getMessage(\"Agent Chat\"),\n            });\n        }\n        res[\"adminConsolePages\"] = adminConsolePages;\n    }\n\n    return res;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c2a7835187123010a4a2c077f6cb0bc0","value":"c2a7835187123010a4a2c077f6cb0bc0"},"sys_update_name":"sys_ux_data_broker_transform_d2924edf5399301033cdddeeff7b122d","api_name":"sn_ci_landing_exp.CI Admin Console Menu","mutates_server_data":"false","name":"CI Admin Console Menu","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Icon \",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Revert to default\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id of the menu item\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-02-24 10:12:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d29b9df6c39641104b8e88c7c840dd5f","sys_updated_by":"admin","sys_created_on":"2022-03-21 11:50:41","sys_name":"CI Upload Menu Item Icon","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    function deleteEntryFromAttachmentCleaner(attachmentSysId) {\n        // Find the sys_id from sys_attachment_cleaner_entry table\n        var gr = new GlideRecord('sys_attachment_cleaner_entry');\n        gr.addQuery('attachment', attachmentSysId);\n        gr.query();\n        if (gr.next()) {\n            // Delete the entry using Global scope\n            new global.ACEAppBuilderGlobalScopedUtil().deleteRecord('sys_attachment_cleaner_entry', gr.getUniqueValue());\n        }\n    }\n    try {\n        //input.icon = sys_attachment sys_id\n        if (!input || !input.sys_id || !input.icon) return [];\n        var updateUtil = new global.ACEAppBuilderGlobalScopedUtil();\n        var prop = {};\n        if (input.revert_to_default) {\n            prop.icon = '';\n            prop.display_default_icon = true;\n        } else {\n            prop.icon = input.icon;\n            prop.display_default_icon = false;\n        }\n        var update = updateUtil.updateRecord('va_branding_contact_menu', input.sys_id, prop);\n        if(update) deleteEntryFromAttachmentCleaner(input.icon);\n        return update;\n    } catch (e) {\n        return false;\n    }\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"sys_id\",\n      \"label\": \"Sys Id\",\n      \"description\": \"Sys Id of the menu item\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"icon\",\n      \"label\": \"Icon \",\n      \"description\": \"\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n        \"name\": \"revert_to_default\",\n        \"label\": \"Revert to default\",\n        \"description\": \"\",\n        \"readOnly\": false,\n        \"fieldType\": \"boolean\",\n        \"mandatory\": true,\n        \"defaultValue\": false\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_d29b9df6c39641104b8e88c7c840dd5f","api_name":"sn_oe_sfs.CI Upload Menu Item Icon","mutates_server_data":"true","name":"CI Upload Menu Item Icon","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Task Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-10-03 18:39:34","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d30db29e73c471103f3cc3ed8ff6a713","sys_updated_by":"admin","sys_created_on":"2023-07-18 18:08:28","sys_name":"De-Duplication Template Preview","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"35","sys_tags":"","script":"function transform(input) {\n    var response = {};\n    var templateId = input.templateSysId;\n    var taskId = input.taskId;\n\n    var result = sn_cmdb.DuplicateTemplate.preview(templateId, taskId);\n\n\tresponse.mergeRelations = result.mergeRelations;\n    response.related_tables_merged = result.relatedTablesMerged;\n    response.related_tables_merged_count = result.relatedTablesMerged.length;\n    response.attributesMap = result.resolvedFieldCIMap;\n\n    if (result.resolvedFieldCIMap) {\n        for (var i = 0; i < result.resolvedFieldCIMap.length; i++) {\n            var attribute = result.resolvedFieldCIMap[i];\n            var fieldValue = _attributeName('sys_id', attribute['sys_id']);\n            result.resolvedFieldCIMap[i].value = fieldValue;\n            result.resolvedFieldCIMap[i].url = 'cmdb_ci.do?sys_id='+attribute['sys_id']\n        }\n    }\n    response.master_ci_info = {\n        'sys_id': result.masterCI,\n        'name': _attributeName('sys_id', result.masterCI),\n        'url': 'cmdb_ci.do?sys_id='+result.masterCI\n    };\n    var duplicate_ci_list = [];\n    var obj = result.allClassCIMap;\n    for (var key in obj) {\n        if (Array.isArray(obj[key])) {\n            var index = obj[key].indexOf(result.masterCI);\n            if (index !== -1) {\n                obj[key].splice(index, 1);\n            }\n            for (var l = 0; l < obj[key].length; l++) {\n                duplicate_ci_list.push({\n                    'sys_id': obj[key][l],\n                    'name': _attributeName('sys_id', obj[key][l]),\n                    'url': 'cmdb_ci.do?sys_id='+obj[key][l]\n                });\n            }\n        }\n    }\n    response.duplicate_ci_info_list = duplicate_ci_list;\n    var duplicate_ci_updates = result.duplicateCIUpdates;\n    response.duplicate_ci_updates_info = [];\n    for (var k = 0; k < duplicate_ci_updates.length; k++) {\n        response.duplicate_ci_updates_info.push({\n            'element_label': duplicate_ci_updates[k]['element_label'],\n\t\t\t'element_value': duplicate_ci_updates[k]['display'] ? duplicate_ci_updates[k]['display'] : duplicate_ci_updates[k]['value']\n        });\n    }\n\n    if (result.duplicateCIAction == 'delete') {\n        response.deleted_cis_count = duplicate_ci_list.length;\n    } else if(result.duplicateCIAction == 'update'){\n        response.updated_cis_count = duplicate_ci_list.length;\n\n    }\n\n    function _attributeName(field, sysId) {\n        var gr = new GlideRecord('cmdb_ci');\n        gr.addQuery(field, sysId);\n        gr.query();\n        if (gr.next()) {\n            return gr.getDisplayValue('name');\n        }\n        return null;\n    }\n    return response;\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n   {\r\n      \"name\": \"taskId\",\r\n      \"label\": \"Task Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_d30db29e73c471103f3cc3ed8ff6a713","api_name":"sn_cmdb_ws.De-Duplication Template Preview","mutates_server_data":"true","name":"De-Duplication Template Preview","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys_id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"To fetch the qualifying notifications for a security policy. Will return all the eligible notifications that a polciy with a \"trigger_type\" can have","sys_updated_on":"2024-06-01 00:12:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d349994143a20210a0d25dc36ab8f2e6","sys_updated_by":"admin","sys_created_on":"2024-05-31 20:10:00","sys_name":"Get eligible notifications for the security policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    var id = input && input.sys_id;\n    var resp = {\n        \"notifications\": []\n    };\n    if (id) {\n        var scConstants = new sn_vsc.SecurityCenterConstants();\n        var util = new SCSecurityPolicyUtil();\n        var res = util.getEligiblePolicyNotifications(id, scConstants.SECURITY_POLICY, scConstants.SECURITY_POLICY_NOTIFICATIONS_HUB_CATEGORY);\n        resp.notifications = res;\n    }\n    return resp;\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"sys_id\",\r\n    \"label\": \"sys_id\",\r\n    \"description\": \"ID\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_d349994143a20210a0d25dc36ab8f2e6","api_name":"sn_vsc.Get eligible notifications for the security policy","mutates_server_data":"false","name":"Get eligible notifications for the security policy","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Library Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search Term\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search term\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"De-duplication Template get library tree","sys_updated_on":"2023-12-01 20:23:02","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d3761db693853110f769fa6074891890","sys_updated_by":"admin","sys_created_on":"2023-09-06 20:42:53","sys_name":"De-duplication Template get library tree","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"80","sys_tags":"","script":"function transform(input) {\n    var searchTerm = input.searchTerm;\n    var libraryMap = {};\n    var gr = new GlideRecord('reconcile_duplicate_template');\n    gr.addQuery('state', \"!=\", \"retired\");\n\n\t//case when library dropdown is selected\n    if (input.librarySysId) {\n        gr.addQuery('library', input.librarySysId);\n    }\n\n\t//Add search term query, can match both library name and template name\n    if (searchTerm) {\n        gr.addEncodedQuery('libraryLIKE' + searchTerm + '^ORnameLIKE' + searchTerm);\n    }\n    gr.query();\n    while (gr.next()) {\n        var libraryId = gr.getValue('library');\n        //excluding template which do not have associated library\n        if (!libraryId) {\n            continue;\n        }\n        var library = {};\n        if (libraryMap[libraryId]) {\n            library = libraryMap[libraryId];\n        } else {\n            library.id = libraryId;\n            library.label = gr.library.name.toString();\n            library.subLabel = gr.library.description.toString();\n            library.expanded = false;\n            if (searchTerm) {\n                library.expanded = true;\n            }\n            library.children = [];\n            libraryMap[libraryId] = library;\n        }\n        var template = {\n            id: gr.getUniqueValue(),\n            label: gr.getValue('name'),\n            type: 'template',\n            sublabel: ''\n        };\n        var templateStateValue = gr.getValue('state');\n        var templateStateDisplayValue = gr.getDisplayValue('state');\n        if (templateStateValue == 'published') {\n            var tgr = new GlideRecord('reconcile_duplicate_template_run');\n            tgr.addQuery('template', gr.getUniqueValue());\n\t\t\ttgr.addEncodedQuery('stateINdraft,ready,running');\n            tgr.orderBy(this.SYS_UPDATED_ON);\n            tgr.query();\n            if (tgr.next()) {\n\t\t\t\ttemplate.highlightedValueProps = [{\n                \"label\": \"Running\",\n                \"color\": \"blue\"\n            }];\n            }\n        }\n        else if (templateStateValue == 'draft') {\n            template.highlightedValueProps = [{\n                \"label\": \"Not published\",\n                \"color\": \"gray\"\n            }];\n        } \n        library.children.push(template);\n    }\n    //add remaining libraries with no templates associated with them\n    var util = new sn_cmdb_ws.DedupeTemplateLibraryUtil();\n    var libraries = util.getLibraries(searchTerm, '');\n    for (var i = 0;i<libraries.length;i++) {\n        var libraryNode = {};\n        var librarySysId = libraries[i].sys_id;\n\t\t\n\t\tif(input.librarySysId && input.librarySysId != librarySysId){\n\t\t\tcontinue;\n\t\t}\n        if (libraryMap[librarySysId]) {\n            continue;\n        }\n        libraryNode.id = librarySysId;\n        libraryNode.label = libraries[i].name;\n        libraryNode.subLabel = libraries[i].description;\n        libraryNode.expanded = false;\n        libraryNode.children = [];\n        libraryMap[librarySysId] = libraryNode;\n    }\n    var treeValues = [];\n    for (var key in libraryMap) {\n        treeValues.push(libraryMap[key]);\n    }\n    return {\n        libraryTree: treeValues\n    };\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"searchTerm\",\r\n      \"label\": \"Search Term\",\r\n      \"description\": \"Search term\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"false\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n   {\r\n      \"name\": \"librarySysId\",\r\n      \"label\": \"Library Sys Id\",\r\n      \"description\": \"Library Sys Id\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"false\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_d3761db693853110f769fa6074891890","api_name":"sn_cmdb_ws.De-duplication Template get library tree","mutates_server_data":"false","name":"De-duplication Template get library tree","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Check if we want to only show open tasks in queries","sys_updated_on":"2023-10-03 18:09:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d3c6f79773e531103f3cc3ed8ff6a7d6","sys_updated_by":"admin","sys_created_on":"2023-10-03 18:09:15","sys_name":"De-duplication Template Show only open tasks","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\treturn (new GetDedupeTaskInfo()).showOnlyOpenTasks();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_d3c6f79773e531103f3cc3ed8ff6a7d6","api_name":"sn_cmdb_ws.De-duplication Template Show only open tasks","mutates_server_data":"false","name":"De-duplication Template Show only open tasks","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get sn_vsc.configure_security_banner_announcements property value.","sys_updated_on":"2024-05-20 23:37:21","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d41f1da5ec1a0210f877d4df7f51c184","sys_updated_by":"maint","sys_created_on":"2024-05-20 23:37:21","sys_name":"Read security banner announcement setting property","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    return gs.getProperty(\"sn_vsc.configure_security_banner_announcements\", \"true\") == \"false\"? false : true;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_d41f1da5ec1a0210f877d4df7f51c184","api_name":"sn_vsc.Read security banner announcement setting property","mutates_server_data":"false","name":"Read security banner announcement setting property","output_schema":"","sys_policy":"read"},{"private":"true","required_translations":"[ {\n  \"message\" : \"EVAM Definition ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Locale\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search GraphQL Response\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"VA EVAM Definition ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2025-03-31 02:28:47","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d4b8085343311210c0f140b805b8f296","sys_updated_by":"admin","sys_created_on":"2024-11-16 03:38:18","sys_name":"Build Genius Result Templates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"21","sys_tags":"","script":"function transform(input) {\n    if (!input.searchGraphqlData) {\n        gs.error(\"Invalid empty value provided as input for searchGraphqlData. Check that the search executed successfully.\");\n        return {\n            items: []\n        };\n    }\n    if (!(\"geniusResults\" in input.searchGraphqlData)) {\n        gs.error(\"No geniusResults property exists on provided input to Build Genius Result Templates transform. Check that the search executed successfully.\");\n        return {\n            items: []\n        };\n    }\n\n    var evamDefinitionId = input.evamDefinitionId;\n    if (!evamDefinitionId) {\n        gs.error(\"No EVAM Definition ID provided as input to Build Genius Result Templates transform.\");\n        return {\n            items: []\n        };\n    }\n\n    function swapCitationVersionForSingleString(value) {\n        var regex = /\\[\\{.*?\\}\\]/g; // Matches the stringified JSON within brackets\n        return value.replace(regex, function(match) {\n            try {\n                var citationJSON = JSON.parse(match);\n                if (citationJSON && citationJSON[0] && citationJSON[0].replacementV1) {\n                    return citationJSON[0].replacementV1;\n                } else {\n                    return match; // Return the original match if replacementV1 is missing or JSON is invalid\n                }\n            } catch (e) {\n                var backupRegex = /replacementV1.*\\\"(.*\\[\\d{1,2}?\\].*)\\\"/;\n                var backupMatch = match.match(backupRegex);\n                if (backupMatch && backupMatch[1]) {\n                    return backupMatch[1];\n                } else {\n                    gs.error(\"Error during citation replacement - unable to parse citation JSON: \", e);\n                    return match; // Return the original match if JSON parsing fails\n                }\n            }\n        });\n    }\n\n    function swapCitationVersionForV1(geniusResultsJson) {\n        var fieldsToReplace = ['answer', 'answer_markdown', 'raw_citations'];\n        for (var i = 0; i < geniusResultsJson.length; i++) {\n            var grJson = geniusResultsJson[i];\n            for (var colIndex = 0; colIndex < grJson.data.length; colIndex++) {\n                var col = grJson.data[colIndex];\n                if (fieldsToReplace.indexOf(col.fieldName) > -1) {\n                    var newValue;\n                    var newDiplayValue;\n                    if (col.fieldName == 'raw_citations') {\n                        var citationsJSON = JSON.parse(col.value);\n                        var newCitations = [];\n                        for (var citationIndx = 0; citationIndx < citationsJSON.length; citationIndx++) {\n                            citationsJSON[citationIndx].content = swapCitationVersionForSingleString(\n                                citationsJSON[citationIndx].content\n                            );\n                            newCitations.push(citationsJSON[citationIndx]);\n                        }\n                        newValue = JSON.stringify(newCitations);\n                        newDiplayValue = newValue; // value and display value are the same for raw_citations\n                    } else {\n                        newValue = swapCitationVersionForSingleString(col.value);\n                        newDiplayValue = swapCitationVersionForSingleString(col.displayValue);\n                    }\n                    col.value = newValue;\n                    col.displayValue = newDiplayValue;\n                    grJson.data[colIndex] = col;\n                }\n            }\n            geniusResultsJson[i] = grJson;\n        }\n        return geniusResultsJson;\n    }\n\n    var geniusResultsJson = input.searchGraphqlData.geniusResults;\n    var locale = input.locale;\n\n    var geniusResultTemplates = sn_search.ScriptableResultTemplateMapper.getGeniusResultTemplates(\n        evamDefinitionId,\n        JSON.stringify(geniusResultsJson),\n        locale\n    );\n    var geniusResultTemplatesSearch = JSON.parse(geniusResultTemplates);\n    var vaEvamDefinitionId = input.vaEvamDefinitionId;\n    var queryForConversationalCatalog = input.queryForConversationalCatalog;\n    //We dont want to send empty items when evam definition id is not sent to us\n    if (!vaEvamDefinitionId) {\n        gs.debug(\"No VA EVAM Definition ID provided as input to Build Genius Result Templates transform.\");\n    }\n\n    //We only want to query & add VA items if VA evam definition id is sent to us\n    if (vaEvamDefinitionId) {\n        var grJsonForVA = geniusResultsJson;\n\n        // Need this for the handoff to VA when portal is using citation format v2, but VA is using v1\n        if (parseInt(gs.getProperty(\"glide.search.va_handoff_citation_version\", \"1\")) < 2) {\n            grJsonForVA = swapCitationVersionForV1(geniusResultsJson);\n        }\n\n        var geniusResultTemplatesVA = sn_search.ScriptableResultTemplateMapper.getGeniusResultTemplates(\n            vaEvamDefinitionId,\n            JSON.stringify(grJsonForVA),\n            locale\n        );\n\n        var geniusResultTemplatesForVA = JSON.parse(geniusResultTemplatesVA);\n\n        geniusResultTemplatesSearch.forEach(function(geniusResultTemplate) {\n            var sys_id = geniusResultTemplate.propValues.model.sys_id;\n            geniusResultTemplatesForVA.forEach(function(geniusResultVA) {\n                var VA_sys_id = geniusResultVA.propValues.model.sys_id;\n                if (sys_id == VA_sys_id) {\n                    geniusResultTemplate.vaEvamItem = Object.assign({}, geniusResultVA);\n                }\n            });\n\n        });\n    }\n    return {\n        items: geniusResultTemplatesSearch\n    };\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"evamDefinitionId\",\r\n        \"label\": \"EVAM Definition ID\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"searchGraphqlData\",\r\n        \"label\": \"Search GraphQL Response\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"locale\",\r\n        \"label\": \"Locale\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n {\r\n      \"name\": \"vaEvamDefinitionId\",\r\n      \"label\": \"VA EVAM Definition ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"object\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_transform_d4b8085343311210c0f140b805b8f296","api_name":"global.Build Genius Result Templates","mutates_server_data":"false","name":"Build Genius Result Templates","output_schema":"[\r\n  {\r\n    \"name\": \"geniusResultsTemplates\",\r\n    \"label\": \"Genius Results Templates\",\r\n    \"description\": \"Genius Results Templates\",\r\n    \"origin\": {\r\n      \"type\": \"data\",\r\n      \"id\": \"geniusResultsTemplates\"\r\n    }\r\n  }\r\n]","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2021-12-07 17:10:44","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d4f1f61353400110a487ddeeff7b1288","sys_updated_by":"admin","sys_created_on":"2021-12-01 11:01:29","sys_name":"Fetch User Time Format ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7e3c2481539260100c54ddeeff7b127b","value":"7e3c2481539260100c54ddeeff7b127b"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\tvar userGr = new GlideRecord('sys_user');\n\tuserGr.get( gs.getUserID() + '');\n\tvar userDateFormat = userGr.getValue('date_format');\n\treturn !gs.nil(userDateFormat) ? userDateFormat : gs.getProperty('glide.sys.date_format');\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7e3c2481539260100c54ddeeff7b127b","value":"7e3c2481539260100c54ddeeff7b127b"},"sys_update_name":"sys_ux_data_broker_transform_d4f1f61353400110a487ddeeff7b1288","api_name":"sn_sow_on_call.Fetch User Time Format ","mutates_server_data":"false","name":"Fetch User Time Format ","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get all the dates wheere score is collected","sys_updated_on":"2024-09-27 22:28:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d5456092871751105bbecaa5cebb35c9","sys_updated_by":"maint","sys_created_on":"2022-11-23 07:50:02","sys_name":"Get All Score Dates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    var dates = [];\n    var gr = new GlideRecord('sn_vsc_hardening_compliance_scores');\n    gr.orderByDesc('harc_collected');\n    gr.query();\n    while (gr.next()) {\n        var date = gr.getDisplayValue('harc_collected');\n        dates.push(date);\n    }\n    return dates;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_d5456092871751105bbecaa5cebb35c9","api_name":"sn_vsc.Get All Score Dates","mutates_server_data":"false","name":"Get All Score Dates","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Canvas user Presence and Encryption Context\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Canvas user session\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Session transform data broker to shape the \"@context.session\" data.","sys_updated_on":"2024-02-27 07:47:50","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d59c47c8c3271010ebed34897940dd6c","sys_updated_by":"admin","sys_created_on":"2020-09-24 21:43:53","sys_name":"Canvas_User_Session_DB_Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"28","sys_tags":"","script":"function transform(input) {\n    /**\n     * structure the output of transform method in desired format:\n     *\n     * {\n     *    \"isLoggedIn\": true,\n     *    \"user\": {\n     *      \"sys_id\": \"6816f79cc0a8016401c5a33be04be441\",\n     *      \"firstName\": \"System\",\n     *      \"lastName\": \"Administrator\",\n     *      \"fullName\": \"System Administrator\",\n\t *      \"userName\": \"admin\"\n     *      \"roles\": [\"admin\"],\n     *      \"avatar\": \"c148e1d13741310042106710ce41f149.iix?t=small\",\n     *      \"initials\": \"SA\",\n     *      \"timeZone\": \"America/Los_Angeles\",\n     *      \"timeFormat\": \"HH:mm:ss\",\n\t *      \"dateFormat\": \"MM-dd-yyyy\"\n     *      \"language\": \"en\",\n     *      \"domain\": \"global\",\n     *    },\n     *    \"properties\": {\n     *      \"sessionTimeout\": { \"value\": \"30\" },\n     *      \"sessionTimeleft\": { \"value\": \"2\" },\n     *      \"activeSessionTimeleft\": { \"value\": \"2\" },\n     *      \"trackingEnabled\": { \"value\": \"true\" },\n     *      \"forgetMe\": { \"value\": \"true\" },\n     *      \"awaEnabled\": { \"value\": \"false\" },\n     *      \"ambSessionLogout\": { \"value\": \"true\" }\n     *    }\n     *\n     * }\n     **/\n    /*\n     * Fetches user's domain\n     */\n    function getUserDomain() {\n        var userGr = new GlideRecord(\"sys_user\");\n        userGr.get(gs.getUserID());\n        return userGr.getValue(\"sys_domain\");\n    }\n\tfunction _safelyGet(obj, dotPath) {\n\t\tif (typeof(obj) !== \"object\" || typeof(dotPath) !== \"string\") {\n\t\t\tenvLogger.error(\"User transform error: invalid input \" + obj, dotPath);\n\t\t\treturn null;\n\t\t}\n\t\tvar foundProp = obj;\n\t\tvar path = dotPath.split(\".\");\n\t\tfor (var i = 0; i < path.length; i++) {\n\t\t\tif (!foundProp[path[i]])\n\t\t\t\treturn null;\n\n\t\t\tfoundProp = foundProp[path[i]];\n\t\t}\n\t\treturn foundProp;\n\t}\n\n    function processGQLResults(graphqlObject, presenceEncryptObj) {\n        var userLoggedIn = isUserLoggedIn();\n        // In the case of a guest user we retreive limited info. Do not want to log an error.\n        if (!graphqlObject.data.GlideDomain_Query) {\n            var partialOutput = {\n\t\t\t\tisLoggedIn: userLoggedIn\n\t\t\t};\n\t\t\tif (userLoggedIn){\n\t\t\t\tpartialOutput[\"user\"] = {\n\t\t\t\t\tfullName: gs.getUser().getFullName(),\n\t\t\t\t\tdisplayName: gs.getUserDisplayName(),\n\t\t\t\t\tsys_id: gs.getUserID(),\n\t\t\t\t\timpersonatingUserId: gs.getImpersonatingUserName(),\n\t\t\t\t\tisImpersonating: GlideImpersonate().isImpersonating()\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn partialOutput;\n        }\n        var user = graphqlObject.data.GlideDomain_Query.user,\n            domain = getUserDomain();\n        user[\"domain\"] = domain;\n\t\tuser[\"displayName\"] = gs.getUserDisplayName();\n\n\t\tif (presenceEncryptObj.data && presenceEncryptObj.data.now) {\n\t\t\tuser[\"encryptionContexts\"] = presenceEncryptObj.data.now.uxf_user.encryptionContexts;\n\t\t\tuser[\"presence\"] = presenceEncryptObj.data.now.uxf_user.presence;\n\t\t}\n\n        return {\n            isLoggedIn: userLoggedIn,\n            user: user,\n            properties: {\n                sessionTimeout: graphqlObject.data.GlideDomain_Query.sessionTimeout,\n                sessionTimeleft: graphqlObject.data.GlideDomain_Query.sessionTimeleft,\n                activeSessionTimeleft: graphqlObject.data.GlideDomain_Query.activeSessionTimeleft,\n                trackingEnabled: graphqlObject.data.GlideDomain_Query.trackingEnabled,\n                forgetMe: graphqlObject.data.GlideDomain_Query.forgetMe,\n                awaEnabled: gs.getProperty('glide.awa.enabled', false),\n                ambSessionLogout: gs.getProperty('com.glide.amb.session.logout', true)\n            }\n        };\n    }\n    function isUserLoggedIn() {\n        var request = GlideTransaction.get().getRequest();\n        var isUserLoggedIn = UxFrameworkScriptables.isLoggedIn(request);\n\t\treturn isUserLoggedIn && isUserLoggedIn !== null ? isUserLoggedIn : false;\n    }\n    try {\n        return processGQLResults(input.graphqlOutputPayload, input.userPresenceEncryptContext);\n    } catch (e) {\n        gs.error('Error parsing GraphQL object', e);\n    }\n    return {\n        isLoggedIn: isUserLoggedIn()\n    };\n}","acl_failure_result":"","props":"[\r\n            {\r\n                \"name\": \"graphqlOutputPayload\",\r\n                \"label\": \"Canvas user session\",\r\n                \"description\": \"\",\r\n                \"readOnly\": false,\r\n                \"fieldType\": \"object\",\r\n                \"mandatory\": false,\r\n                \"defaultValue\": \"\"\r\n            },\r\n            {\r\n                \"name\": \"userPresenceEncryptContext\",\r\n                \"label\": \"Canvas user Presence and Encryption Context\",\r\n                \"description\": \"\",\r\n                \"readOnly\": false,\r\n                \"fieldType\": \"object\",\r\n                \"mandatory\": false,\r\n                \"defaultValue\": \"\"\r\n            }\r\n ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f193e7f304312210559073c06a02f725","value":"f193e7f304312210559073c06a02f725"},"sys_update_name":"sys_ux_data_broker_transform_d59c47c8c3271010ebed34897940dd6c","api_name":"global.Canvas_User_Session_DB_Transform","mutates_server_data":"false","name":"Canvas_User_Session_DB_Transform","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"data object containing hardening settings\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"SC update hardening settings","sys_updated_on":"2022-11-18 00:18:52","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d5fde0e053131110f904ddeeff7b1256","sys_updated_by":"admin","sys_created_on":"2022-11-17 21:59:23","sys_name":"SC update settings compliance","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var resultData = input.data || {};\n    var util = new VSCComplianceUtil();\n    util.activateSpecialConfigs(resultData);\n\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"data\",\r\n  \"label\": \"Data\",\r\n  \"description\": \"data object containing hardening settings\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"object\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": {}\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_d5fde0e053131110f904ddeeff7b1256","api_name":"sn_vsc.SC update settings compliance","mutates_server_data":"false","name":"SC update settings compliance","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Search filters\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search terms\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Should fetch\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Source sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Source table name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Invoke Search API to find relevant tasks","sys_updated_on":"2024-07-22 17:08:44","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d6772c0eeb224650782af146bad0cded","sys_updated_by":"admin","sys_created_on":"2024-06-03 19:07:34","sys_name":"Tasks Search","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(params) {\n    if (gs.nil(params) || params.should_fetch === false)\n        return {\n            success: false\n        };\n\n    if (!GlidePluginManager.isActive(\"sn_km_gen_ai\"))\n        return {\n            success: false\n        };\n\n    if (gs.nil(params) || (gs.nil(params.search_terms) && gs.nil(params.source_sys_id)))\n        return {\n            success: false\n        };\n\n    try {\n        var answer = {\n            order: [],\n            data: {}\n        };\n        var searchResult = null;\n\t\tvar api = new sn_km_gen_ai.KMSearchService();\n        if (!gs.nil(params.source_sys_id)) {\n            searchResult = api.searchSimilarTasks(params.source_sys_id, params.source_table);\n        } else if (!gs.nil(params.search_terms)) {\n            searchResult = api.searchText(params.search_terms, params.search_filters.split(','));\n        }\n\n        if (searchResult != null) {\n            var filters = [];\n            for (var idx in searchResult) {\n                var id = searchResult[idx].sysId;\n                answer.order.push(id);\n                filters.push('sys_id=' + id);\n            }\n            if (filters.length > 0) {\n                answer.data = new sn_km_uib.KMGenAITaskSearchUtil().getData(searchResult[0].table, filters);\n            }\n        }\n    } catch (error) {\n        gs.error('Tasks Search error: ' + error);\n        return {\n            success: false,\n            error: error\n        };\n    }\n\n    return {\n        success: true,\n        content: answer\n    };\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"source_table\",\n        \"label\": \"Source table name\",\n        \"description\": \"Source table name\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    },\n    {\n        \"name\": \"source_sys_id\",\n        \"label\": \"Source sys ID\",\n        \"description\": \"Source sys ID\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": false,\n        \"defaultValue\": \"\"\n    },\n {\n        \"name\": \"search_terms\",\n        \"label\": \"Search terms\",\n        \"description\": \"Search terms\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": false,\n        \"defaultValue\": \"\"\n    },\n {\n        \"name\": \"search_filters\",\n        \"label\": \"Search filters\",\n        \"description\": \"Search filters\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": false,\n        \"defaultValue\": \"\"\n    },\n {\n        \"name\": \"should_fetch\",\n        \"label\": \"Should fetch\",\n        \"description\": \"Should fetch\",\n        \"readOnly\": false,\n        \"fieldType\": \"boolean\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_d6772c0eeb224650782af146bad0cded","api_name":"sn_km_uib.Tasks Search","mutates_server_data":"false","name":"Tasks Search","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-25 18:46:37","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d710b7ec73d071103f3cc3ed8ff6a75c","sys_updated_by":"admin","sys_created_on":"2023-07-25 01:18:16","sys_name":"De-Duplication Template Unpublish","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar result = {};\n\tvar templateId = input.templateSysId;\n\n\tresult = sn_cmdb.DuplicateTemplate.unPublishTemplate(templateId);\n\treturn result; \n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_d710b7ec73d071103f3cc3ed8ff6a75c","api_name":"sn_cmdb_ws.De-Duplication Template Unpublish","mutates_server_data":"true","name":"De-Duplication Template Unpublish","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-12 04:18:29","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d7ba49f153033110b6ccddeeff7b12e4","sys_updated_by":"admin","sys_created_on":"2023-12-12 03:34:53","sys_name":"Get country calling codes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var res = [];\n    var phoneTerritoryGr = new GlideRecord('sys_phone_territory');\n    phoneTerritoryGr.orderBy('name');\n    phoneTerritoryGr.query();\n    while (phoneTerritoryGr.next()) {\n        var phoneTerritory = {};\n        phoneTerritory.name = {\n            \"value\": phoneTerritoryGr.getValue('name'),\n            \"displayValue\": phoneTerritoryGr.getDisplayValue('name')\n        };\n        phoneTerritory.ccc = {\n            \"value\": phoneTerritoryGr.getValue('ccc'),\n            \"displayValue\": phoneTerritoryGr.getDisplayValue('ccc')\n        };\n        phoneTerritory._row_data = {\n            \"uniqueValue\": phoneTerritoryGr.getUniqueValue(),\n            \"displayValue\": phoneTerritoryGr.getDisplayValue('name')\n        };\n        res.push(phoneTerritory);\n    }\n    return res;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_d7ba49f153033110b6ccddeeff7b12e4","api_name":"sn_uib_on_call.Get country calling codes","mutates_server_data":"false","name":"Get country calling codes","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Conditions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Look up search conditions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Max results\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Maximum dropdown values to be shown\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search term\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"String to filter results by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table to look up\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d7ccef4153a101105016ddeeff7b1230","sys_updated_by":"admin","sys_created_on":"2022-02-07 05:13:25","sys_name":"Get Users for Typeahead","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"30","sys_tags":"","script":"function transform(input) {\n\tvar table = input.table;\n\tvar dotWalkPrefix = 'user.';\n\tvar encodedQuery = '';\n\tif (input.encodedQuery && input.encodedQuery.length)\n\t\tencodedQuery = input.encodedQuery;\n\tif (input.searchTerm && encodedQuery.length) {\n\t\tencodedQuery = encodedQuery + '^' + dotWalkPrefix + 'nameLIKE' + input.searchTerm;\n\t} else if (input.searchTerm) {\n\t\tencodedQuery = dotWalkPrefix + 'nameLIKE' + input.searchTerm;\n\t}\n\tvar gr = new GlideRecord(table);\n\tgr.addEncodedQuery(encodedQuery);\n\tgr.addActiveQuery();\n\tgr.orderBy(dotWalkPrefix + 'name');\n\tgr.query();\n\tvar rowCount = gr.getRowCount();\n\tvar label = '';\n\tif (rowCount === 0) {\n\t\tlabel = gs.getMessage('No results found');\n\t} else if (rowCount <= parseInt(input.limit, 10)) {\n\t\tlabel = gs.getMessage('Showing 1-{0} of {0}', [rowCount]);\n\t} else {\n\t\tlabel = gs.getMessage('Showing 1-{0} of {1}', [input.limit, rowCount]);\n\t\tgr.setLimit(parseInt(input.limit, 10));\n\t\tgr.query();\n\t}\n\tvar dropdownvalues = [];\n\twhile (gr.next()) {\n\t\tdropdownvalues.push({\n\t\t\tid: gr.getDisplayValue(dotWalkPrefix + 'sys_id'),\n\t\t\tlabel: gr.getDisplayValue(dotWalkPrefix + 'name'),\n\t\t\tsublabel: gr.getDisplayValue(dotWalkPrefix + 'title'),\n\t\t\tavatarProps: {\n\t\t\t\tuserName: gr.getDisplayValue(dotWalkPrefix + 'name'),\n\t\t\t\timageSrc: gr.getDisplayValue(dotWalkPrefix + 'avatar')\n\t\t\t}\n\t\t});\n\t}\n\treturn [{ id: 0, label: label, children: dropdownvalues }];\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"table_name\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"encodedQuery\",\r\n  \"label\": \"Conditions\",\r\n  \"description\": \"Look up search conditions\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"searchTerm\",\r\n  \"label\": \"Search term\",\r\n  \"description\": \"String to filter results by\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"limit\",\r\n  \"label\": \"Max results\",\r\n  \"description\": \"Maximum dropdown values to be shown\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n \"defaultValue\": \"25\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_d7ccef4153a101105016ddeeff7b1230","api_name":"sn_cmdb_ws.Get Users for Typeahead","mutates_server_data":"false","name":"Get Users for Typeahead","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Now LLM Model  Supported Languages","sys_updated_on":"2024-09-11 13:51:00","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d7eb19b99f60121050df2e5af90a1c1d","sys_updated_by":"admin","sys_created_on":"2024-09-10 14:21:38","sys_name":"Now LLM Model  Supported Languages","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"22","sys_tags":"","script":"function transform(input) {\n    var modelSupportedLanguages = [];\n    var languages = [];\n    try {\n        var languagesGr = new GlideRecord('sys_language');\n        languagesGr.addActiveQuery();\n        languagesGr.query();\n        while (languagesGr.next()) {\n            languages.push(languagesGr.getUniqueValue());\n        }\n\n        var modelConfigGr = new GlideRecord('sys_generative_ai_model_config');\n        modelConfigGr.addQuery('model', 'llm_generic');\n        modelConfigGr.query();\n        if (modelConfigGr.next()) {\n            var languageId = modelConfigGr.getValue('supported_languages');\n            var languageLabel = modelConfigGr.getDisplayValue('supported_languages');\n\n            var languageIds = languageId.split(',');\n            var languageLabels = languageLabel.split(',');\n\n            languageIds.forEach(function(id, index) {\n                var label = languageLabels[index];\n                if (languages.includes(id)) {\n                    modelSupportedLanguages.push({\n                        id: id,\n                        label: label\n                    });\n                }\n            });\n        }\n    } catch (error) {\n        gs.error(\"Failed to get Now LLM supported languages: \" + error.toString());\n    }\n    return modelSupportedLanguages;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_d7eb19b99f60121050df2e5af90a1c1d","api_name":"sn_nowassist_admin.Now LLM Model  Supported Languages","mutates_server_data":"false","name":"Now LLM Model  Supported Languages","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-08-23 14:57:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d8473c849f141210afb85c1eca0a1c43","sys_updated_by":"admin","sys_created_on":"2024-08-23 14:57:36","sys_name":"Get TrustBuilder Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform() {\n    try {\n        var guardUtil = new sn_nowassist_admin.NowAssistAdminGuardrails();\n        return guardUtil.isTrustBuilderEnabled();\n\n    } catch (error) {\n        gs.error(\"Error in getting Trust Builder status data broker :\" + error.toString());\n    }\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_d8473c849f141210afb85c1eca0a1c43","api_name":"sn_nowassist_admin.Get TrustBuilder Status","mutates_server_data":"false","name":"Get TrustBuilder Status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-22 09:42:26","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d8a9d7aa53280210abd8ddeeff7b1230","sys_updated_by":"admin","sys_created_on":"2024-02-27 11:16:01","sys_name":"Get PWD Reset Identify Page Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\tvar result = new sn_uib_pwd_reset.PwdResetUXFIdentifyProcessor().getToken();\n\treturn result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_d8a9d7aa53280210abd8ddeeff7b1230","api_name":"sn_uib_pwd_reset.Get PWD Reset Identify Page Details","mutates_server_data":"false","name":"Get PWD Reset Identify Page Details","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Enable experience switcher\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enables Experience Switcher for a studio\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetches list of experienes to be shown in Experiene Switcher for a Studio only if enableExperienceSwitcher is configured true","sys_updated_on":"2024-12-04 12:14:49","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d9080441ff511210363bffffffffff33","sys_updated_by":"admin","sys_created_on":"2024-10-15 07:06:17","sys_name":"UDC Get experiences list","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8a841f2bc42f457e8809ea71d35e821f","value":"8a841f2bc42f457e8809ea71d35e821f"},"sys_created_by":"admin","sys_mod_count":"18","sys_tags":"","script":"function transform(input) {\n    // TODO: once DEF0589428 is resolved by uxf, update condition to input.enableExperienceSwitcher\n    if (JSON.parse((input.enableExperienceSwitcher)).enableExperienceSwitcher) {\n        return sn_udc.ExperienceConfiguration.getExperienceList();\n    }\n    return [];\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"enableExperienceSwitcher\",\r\n        \"label\": \"Enable experience switcher\",\r\n        \"description\": \"Enables Experience Switcher for a studio\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": false\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8a841f2bc42f457e8809ea71d35e821f","value":"8a841f2bc42f457e8809ea71d35e821f"},"sys_update_name":"sys_ux_data_broker_transform_d9080441ff511210363bffffffffff33","api_name":"sn_udc.UDC Get experiences list","mutates_server_data":"false","name":"UDC Get experiences list","output_schema":"[\r\n    {\r\n        \"name\": \"experiences\",\r\n        \"label\": \"experiences\",\r\n        \"description\": \"List of experiences to be shown\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"array\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": []\r\n    }\r\n]","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Verify that NLU Workbench plugin is active and past version 7.0.1 so that it includes the NLUWB admin console","sys_updated_on":"2023-06-20 21:15:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d9107aa57c676110f877fdcf100b3b62","sys_updated_by":"admin","sys_created_on":"2023-06-20 16:25:51","sys_name":"Get NLUWB plugin status and version","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"function transform() {\n\tvar result = {};\n\n\tresult.active = GlidePluginManager.isActive('sn_nlu_workbench');\n\tresult.admin_console_version = false;\n\n\tvar nluPlugin = new GlideRecord('sys_store_app');\n\tnluPlugin.addQuery('scope', 'sn_nlu_workbench');\n\tnluPlugin.query();\n\n\t// Check if NLUWB plugin version includes their admin console (anything past 7.0.1)\n\tif (nluPlugin.next()) {\n\t\tresult.admin_console_version = Number(nluPlugin.getValue('version').replaceAll('.','')) >= 701 ? true : false;\n\t}\n\n\treturn result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sys_ux_data_broker_transform_d9107aa57c676110f877fdcf100b3b62","api_name":"global.Get NLUWB plugin status and version","mutates_server_data":"false","name":"Get NLUWB plugin status and version","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Field typeahead value\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Field typeahead value set in UI\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Name of the selected table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-04-06 05:14:13","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"d9607ab477f12110eba8fe21fe5a9939","sys_updated_by":"admin","sys_created_on":"2023-03-23 09:37:02","sys_name":"Get fields in table","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_created_by":"admin","sys_mod_count":"17","sys_tags":"","script":"function transform(input) {\n    var results = [];\n    var typeaheadValue = input.fieldTypeaheadValue;\n    var gr = new GlideRecord(input.table);\n    var fields = gr.getElements();\n\n    for (var i = 0; i < fields.length; i++) {\n        var fieldLabel = fields[i].getED().getLabel();\n        var fieldName = fields[i].getED().getName();\n\n        if (!typeaheadMatchesFieldLabel(typeaheadValue, fieldLabel) || fieldExistsInResults(results, fieldName)) {\n            continue;\n        }\n\n        results.push({\n            \"label\": fieldLabel,\n            \"name\": fieldName\n        });\n    }\n\n    results.sort(function(a, b) {\n        a = a.label.toLowerCase();\n        b = b.label.toLowerCase();\n        return (a < b) ? -1 : (a > b) ? 1 : 0;\n    });\n    return results;\n\n    function typeaheadMatchesFieldLabel(typeaheadValue, fieldLabel) {\n        // if typeaheadValue is nil, always return true since all fields should be displayed\n        return gs.nil(typeaheadValue) ? true : !gs.nil(fieldLabel) &&\n            fieldLabel.toLowerCase().startsWith(typeaheadValue.toLowerCase());\n    }\n\n    function fieldExistsInResults(results, fieldName) {\n        return results.some(function(result) {\n            return result.name === fieldName;\n        });\n    }\n}","acl_failure_result":"","props":"[ \r\n{\r\n        \"name\": \"table\",\r\n        \"label\": \"Table\",\r\n        \"description\": \"Name of the selected table\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"table_name\",\r\n        \"mandatory\": true\r\n    },\r\n{\r\n        \"name\": \"fieldTypeaheadValue\",\r\n        \"label\": \"Field typeahead value\",\r\n        \"description\": \"Field typeahead value set in UI\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_update_name":"sys_ux_data_broker_transform_d9607ab477f12110eba8fe21fe5a9939","api_name":"sn_access_analyzer.Get fields in table","mutates_server_data":"false","name":"Get fields in table","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Conditions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Field to show as label\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Field to sort rows by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Fields to show as sublabel\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Label field\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Look up search conditions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Max results\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Maximum dropdown values to be shown\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Order by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Reapeater Row Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Row to be updated\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sort type\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sort type (asc/desc)\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sublabel fields\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table to look up\",\n  \"comment\" : \"\"\n} , {\n  \"message\" : \"a to z\",\n  \"comment\" : \"\"\n} , {\n  \"message\" : \"z to a\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-01-01 17:41:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"da568f73733130102d1d2f163cf6a705","sys_updated_by":"admin","sys_created_on":"2021-08-13 05:26:14","sys_name":"Get dropdown items for Select/typeahead","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\tvar dropdownValues = new sn_itam_workspace.AssetWorkspaceUtil().getDropwdownValues(input);\n\tif (input.repeaterRowId === null)\n\t\treturn dropdownValues;\n\tvar output = {'repeaterRowId': input.repeaterRowId, 'dropdownValues': dropdownValues};\n\treturn output;\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"table_name\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"encodedQuery\",\r\n  \"label\": \"Conditions\",\r\n  \"description\": \"Look up search conditions\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"condition_string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\",\r\n  \"typeMetadata\": {\r\n        \"table\": \"@table\"\r\n  }\r\n},\r\n{\r\n  \"name\": \"label\",\r\n  \"label\": \"Label field\",\r\n  \"description\": \"Field to show as label\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"field\",\r\n  \"mandatory\": true,\r\n  \"typeMetadata\": {\r\n        \"table\": \"@table\"\r\n}\r\n},\r\n{\r\n  \"name\": \"sublabel\",\r\n  \"label\": \"Sublabel fields\",\r\n  \"description\": \"Fields to show as sublabel\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"field_list\",\r\n  \"mandatory\": false,\r\n  \"typeMetadata\": {\r\n        \"table\": \"@table\"\r\n  }\r\n},\r\n{\r\n  \"name\": \"orderBy\",\r\n  \"label\": \"Order by\",\r\n  \"description\": \"Field to sort rows by\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"field\",\r\n  \"mandatory\": false,\r\n  \"typeMetadata\": {\r\n        \"table\": \"@table\"\r\n}\r\n},\r\n{\r\n  \"name\": \"sortType\",\r\n  \"label\": \"Sort type (asc/desc)\",\r\n  \"description\": \"Sort type\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"asc\",\r\n  \"typeMetadata\": {\r\n        \"choices\": [{\"label\": \"a to z\", \"value\": \"asc\" },{\"label\": \"z to a\", \"value\": \"desc\" }]\r\n  }\r\n},\r\n{\r\n  \"name\": \"limit\",\r\n  \"label\": \"Max results\",\r\n  \"description\": \"Maximum dropdown values to be shown\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n \"defaultValue\": \"25\"\r\n},\r\n{\r\n  \"name\": \"repeaterRowId\",\r\n  \"label\": \"Reapeater Row Id\",\r\n  \"description\": \"Row to be updated\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"number\",\r\n   \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n \"defaultValue\": null\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_da568f73733130102d1d2f163cf6a705","api_name":"sn_itam_workspace.Get dropdown items for Select/typeahead","mutates_server_data":"false","name":"Get dropdown items for Select/typeahead","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"App Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Class of the CI\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Config Identifier Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Supports granular configurations both within and across Workspaces\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysId of the CI\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The workspace Id (aka appId)\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"class of the CI to lookup\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysid of the CI to lookup\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Gets the admin configured CI attributes for the given sysid.","sys_updated_on":"2024-09-17 20:05:15","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"db5027fb77ad0110960ced43ba5a9908","sys_updated_by":"admin","sys_created_on":"2022-02-15 19:37:07","sys_name":"Get Extended Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"50","sys_tags":"","script":"// returns array of all the configured CI properties as objects. These are for the extended properties on the Node Map page.\nfunction transform(input) {\n\tvar result = {\n\t\terrors: [],\n\t\tsysid: '',\n\t\t\"class\": '',\n\t\textended_properties: ''\n\t};\n\t\n\ttry {\n\t\tvar sysid = input.sysid;\n\t\tvar cls = input.cls;\n\t\tvar configIdentifierId = input.configIdentifierId;\n\t\tvar appId = input.appId;\n\n\t\tif (!sysid || !sysid.length) {\n\t\t\tresult.errors.push('sysid is missing');\n\t\t}\n\t\tif (!cls || !cls.length || !cls[0]) {\n\t\t\tresult.errors.push('class is missing');\n\t\t}\n\t\tif (!appId || !appId.length) {\n\t\t\tresult.errors.push('appId is missing');\n\t\t}\n\t\t\n\t\tif (!result.errors.length) {\n\t\t\tresult.sysid = sysid;\n\t\t\tresult['class'] = cls;\n\t\t\tresult.appId = appId;\n\t\t\tresult.configIdentifierId = configIdentifierId;\n\n\t\t\tvar response = new UnifiedMapHelper().getCiDetails({\n\t\t\t\tciSysId: sysid,\n\t\t\t\tciClass: cls,\n\t\t\t\tconfigIdentifierId: configIdentifierId,\n\t\t\t\tappId: appId\n\t\t\t});\n\t\t\tif (response.success) {\n\t\t\t\tresult.raw = response.result;\n\t\t\t\tresult.extended_properties = Object.keys(response.result).map(function(o) {\n\t\t\t\t\tvar res = response.result[o];\n\t\t\t\t\tvar value = {};\n\t\t\t\t\tif(Object.keys(res.highlightedStyle).length > 0) {\n\t\t\t\t\t\tvalue = {\n\t\t\t\t\t\t\t\"type\": \"highlighted-value\",\n\t\t\t\t\t\t\t\"label\": res.value,\n\t\t\t\t\t\t\t\"color\": res.highlightedStyle.colorName,\n\t\t\t\t\t\t\t\"showIcon\": res.highlightedStyle.showIcon,\n\t\t\t\t\t\t\t\"icon\": res.highlightedStyle.iconName,\n\t\t\t\t\t\t\t\"variant\": res.highlightedStyle.variantName\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue  = {\n\t\t\t\t\t\t\t\"type\":  \"string\",\n\t\t\t\t\t\t\t\"value\": res.value\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\t\"label\": res.label,\n\t\t\t\t\t\t\"value\": value\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresult.errors.push(response.error);\n\t\t\t}\n\t\t}\n\t\t\n\t} catch (error) {\n\t\tresult.errors.push(response.error);\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"sysid\",\r\n        \"label\": \"SysId of the CI\",\r\n        \"fieldType\": \"string\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": true,\r\n        \"description\": \"sysid of the CI to lookup\"\r\n    },\r\n    {\r\n        \"name\": \"cls\",\r\n        \"label\": \"Class of the CI\",\r\n        \"fieldType\": \"string\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": true,\r\n        \"description\": \"class of the CI to lookup\"\r\n    },\r\n    {\r\n        \"name\": \"configIdentifierId\",\r\n        \"label\": \"Config Identifier Id\",\r\n        \"fieldType\": \"string\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": false,\r\n        \"description\": \"Supports granular configurations both within and across Workspaces\"\r\n    },\r\n    {\r\n        \"name\": \"appId\",\r\n        \"label\": \"App Id\",\r\n        \"fieldType\": \"string\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": true,\r\n        \"description\": \"The workspace Id (aka appId)\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_db5027fb77ad0110960ced43ba5a9908","api_name":"sn_cmdb_ws.Get Extended Properties","mutates_server_data":"false","name":"Get Extended Properties","output_schema":"","sys_policy":""},{"private":"true","required_translations":"[ ]","batch_exclude":"false","description":"This transform data resource checks if tier2 storage is enabled  on the instance or not.","sys_updated_on":"2024-09-20 09:44:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"dbd1e5677f0012100dcc9ff45d86651c","sys_updated_by":"admin","sys_created_on":"2024-08-22 04:51:08","sys_name":"Transform Check Tier2 Storage Enabled","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\treturn GlidePluginManager.isActive(\"com.glide.auxdb.offload\");\n}","acl_failure_result":"{\r\n    \"output\": false\r\n}","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d32e27b304752210559073c06a02f750","value":"d32e27b304752210559073c06a02f750"},"sys_update_name":"sys_ux_data_broker_transform_dbd1e5677f0012100dcc9ff45d86651c","api_name":"global.Transform Check Tier2 Storage Enabled","mutates_server_data":"false","name":"Transform Check Tier2 Storage Enabled","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Reason for the revocation\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"certIds\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"revocationReason\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys ids of certificates to revoke\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Revokes certificates based on sysIds","sys_updated_on":"2023-09-06 14:29:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"dc9804984309311041a0e8625ab8f28b","sys_updated_by":"admin","sys_created_on":"2023-08-29 20:41:46","sys_name":"IPKICertificateRevoke","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/76f9d51369115083f4ea77aab1677cc0","value":"76f9d51369115083f4ea77aab1677cc0"},"sys_created_by":"admin","sys_mod_count":"22","sys_tags":"","script":"function transform(input) {\n\n    var failedIds = [];\n    for (var i = 0; i < input.certIds.length; i++) {\n        var certId = input.certIds[i];\n        var revocationResult = new IPKIHermesRevokeCertificate().revokeCertificate(certId, input.revocationReason);\n        var parsedResult = JSON.parse(revocationResult);\n        if (parsedResult.success === false) {\n            failedIds.push(certId);\n        }\n    }\n\n    var result = {};\n    if (failedIds.length > 0) {\n        var errorMessage = \"Failed to revoke certificates with sys id: \" + failedIds.join(\", \");\n        result.success = false;\n        result.message = errorMessage;\n        return result;\n    }\n\n    result.success = true;\n    return result;\n}","acl_failure_result":"","props":"[{\r\n\"name\": \"certIds\",\r\n\"label\": \"certIds\",\r\n\"description\": \"sys ids of certificates to revoke\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"object\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n},\r\n{\r\n\"name\": \"revocationReason\",\r\n\"label\": \"revocationReason\",\r\n\"description\": \"Reason for the revocation\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"string\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"unspecified\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/76f9d51369115083f4ea77aab1677cc0","value":"76f9d51369115083f4ea77aab1677cc0"},"sys_update_name":"sys_ux_data_broker_transform_dc9804984309311041a0e8625ab8f28b","api_name":"sn_app_skytale.IPKICertificateRevoke","mutates_server_data":"true","name":"IPKICertificateRevoke","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Module\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-02-16 12:23:25","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"dce339694388021016817a372ab8f2ba","sys_updated_by":"admin","sys_created_on":"2024-01-30 04:45:45","sys_name":"Fetch list of roles","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_created_by":"admin","sys_mod_count":"26","sys_tags":"","script":"function transform(input) {\n    var rolesUtility = new SDRolesUtility();\n    var response = {};\n    if (input.module == 'success-dashboard' || input.module == 'operational-success') {\n        response.roles = rolesUtility.createDropdownList(rolesUtility.getSDRolesList());\n        response.donutData = rolesUtility.getAggregateData(rolesUtility.getSDRolesList());\n    }\n    if (input.module == 'benchmarks') {\n        response.roles = rolesUtility.createDropdownList(rolesUtility.getBMRolesList());\n        response.donutData = rolesUtility.getAggregateData(rolesUtility.getBMRolesList());\n    }\n    if (response.roles) {\n        response.selectedRole = response.roles[0].id;\n        response.selectedRoleLabel = response.roles[0].label;\n    }\n    return response;\n}","acl_failure_result":"","props":"[{\r\n    \"name\": \"module\",\r\n    \"label\": \"Module\",\r\n    \"description\": \"\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"benchmarks\"\r\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_update_name":"sys_ux_data_broker_transform_dce339694388021016817a372ab8f2ba","api_name":"sn_sd.Fetch list of roles","mutates_server_data":"false","name":"Fetch list of roles","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get the counts of certification schedules that are not migrated yet","sys_updated_on":"2023-12-08 18:49:09","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"dce473a8538331101152ddeeff7b1244","sys_updated_by":"admin","sys_created_on":"2023-12-08 18:34:47","sys_name":"Data Manager Get Cert Schedules Counts","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n  var wrapperFunction = function() {\n    var proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n    return proxy.getCertSchedulesCounts();\n  };\n\n  return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager - Get Certification Schedules Counts\", wrapperFunction);\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_dce473a8538331101152ddeeff7b1244","api_name":"sn_cmdb_ws.Data Manager Get Cert Schedules Counts","mutates_server_data":"false","name":"Data Manager Get Cert Schedules Counts","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Skill Config Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get UI action details for delivery step for custom skills","sys_updated_on":"2024-09-26 10:39:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"dd3a40f0933e4210aa5730f164891816","sys_updated_by":"admin","sys_created_on":"2024-06-12 06:03:32","sys_name":"Get UI action details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"33","sys_tags":"","script":"function transform(input) {\n    var util = new sn_nowassist_admin.SkillBuilderNaaUtils();\n    var uiDetails = util.getUiActionDeliverySetting(input.skillConfigId);\n    var uiActionDescription = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Show {skill_name} in the Core UI using a UI action button as a trigger.\", {\n        skill_name: uiDetails.skill_name\n    });\n    var subTitle = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Display {skill_name} output in Core UI or in Now Assist panel.\", {\n        skill_name: uiDetails.skill_name\n    });\n    var uiActionData = util.getUiActionState(uiDetails.ui_action_id);\n    var uiActionState = !gs.nil(uiActionData) ? uiActionData.active === \"true\" : false;\n    var uiActionLink = !gs.nil(uiActionData) ? uiDetails.ui_action_link : \"\";\n\n    const {\n        is_scope_not_matched,\n        user_scope,\n        record_scope,\n        record_scope_name,\n        user_scope_name,\n        canWrite\n    } = new global.ListAndRecordPagePropsUtil().getPageProps('sys_ui_action', uiDetails.ui_action_id);\n\n    var uiScopeNameMessage = sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"<b>Note:</b> You are activating skill in the <b>{user_scope_name}</b> scope. To be able to customize display of the skill in Core UI, change the scope to <b>{record_scope_name}</b> scope. \", {\n        user_scope_name: user_scope_name,\n        record_scope_name: record_scope_name\n    });\n\n    var roles = util.getUiActionRoles(uiDetails.ui_action_id);\n\n    return {\n        uiActionDescription,\n        uiActionState,\n        is_scope_not_matched,\n        uiActionLink,\n        uiScopeNameMessage,\n        subTitle,\n        roles\n    };\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"skillConfigId\",\r\n        \"label\": \"Skill Config Id\",\r\n        \"description\": \"Skill Config Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_dd3a40f0933e4210aa5730f164891816","api_name":"sn_nowassist_admin.Get UI action details","mutates_server_data":"false","name":"Get UI action details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Fetch the user current session domain details for the skill guided setup in Now assist admin console application.","sys_updated_on":"2024-05-28 19:55:32","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"dd3b217143d602106b5f90cfd7b8f2e7","sys_updated_by":"admin","sys_created_on":"2024-05-21 19:13:17","sys_name":"Get User Session Domain","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n\ttry {\n\t\tvar sessionDomainDetails = {\n\t\t\tdomainId: \"global\",\n\t\t\tdomainName: \"Global\"\n\t\t};\n\n\t\tsessionDomainDetails.domainId = gs.getSession().getCurrentDomainID() || \"global\";\n\n        if(sessionDomainDetails.domainId && sessionDomainDetails.domainId !== \"global\") {\n\t\t\tvar nowAdminAssistUtil = new sn_nowassist_admin.NowAdminAssistUtil();\n            sessionDomainDetails.domainName = nowAdminAssistUtil.getDomainName(sessionDomainDetails.domainId);\n        }\n\t\t\n\t\treturn sessionDomainDetails;\n\t} catch(e) {\n\t\tgs.error(\"Failed to fetch the user session domain details - \" + e);\n\t\tthrow new Error(\"Failed to fetch the user session domain details\");\n\t}\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_dd3b217143d602106b5f90cfd7b8f2e7","api_name":"sn_nowassist_admin.Get User Session Domain","mutates_server_data":"false","name":"Get User Session Domain","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Group\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId of the group\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-08 14:23:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"dd6bbeac374731108f2beacc74924b30","sys_updated_by":"admin","sys_created_on":"2023-12-08 14:23:04","sys_name":"Calendar Access","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(inputs) {\n    var result = {\n        hasCreateShiftAccess: false,\n    };\n    var userGroup = inputs.group;\n    if (gs.nil(userGroup))\n        return result;\n\n\tresult.hasCreateShiftAccess = (new global.OnCallSecurityNG().rotaMgrAccess(userGroup));\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"group\",\r\n    \"label\": \"Group\",\r\n    \"description\": \"sysId of the group\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_dd6bbeac374731108f2beacc74924b30","api_name":"sn_uib_on_call.Calendar Access","mutates_server_data":"false","name":"Calendar Access","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-08-01 22:56:00","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"dd901d49533302105347ddeeff7b121a","sys_updated_by":"maint","sys_created_on":"2024-08-01 22:56:00","sys_name":"Get BP Info","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar ouput = {};\n\tvar gr = new GlideRecord(\"sn_vsc_best_practice_configurations\");\n\tgr.query('active', true);\n\tgr.query();\n\touput.total = gr.getRowCount();\n\tgr.addQuery();\n\tgr.query('status', 'completed');\n\touput.completed = gr.getRowCount();\n\treturn ouput;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_dd901d49533302105347ddeeff7b121a","api_name":"sn_vsc.Get BP Info","mutates_server_data":"false","name":"Get BP Info","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"payload\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"plugins\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-04-19 11:44:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"de01a775533201102958ddeeff7b12f9","sys_updated_by":"admin","sys_created_on":"2022-04-12 15:31:17","sys_name":"ACE Plugin Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"29","sys_tags":"","script":"function transform(input) {\n    var result = {};\n\n    if (!input.payload) {\n        return result;\n    }\n\n\n    function getPluginOrAppDetails(id, type, pluginName, pluginDetail, mode) {\n        var details = {\n            name: pluginName || id,\n            currentVersion: '',\n            newerVersion: '',\n            pluginId: id,\n            hasDemoData: false\n        };\n        if (type === 'application') {\n            switch (mode) {\n                case 'install': {\n                    var grApp = new GlideRecord('sys_app_version');\n                    grApp.addQuery('source_app_id', id);\n                    grApp.query();\n                    while (grApp.next()) {\n                        var version = grApp.getValue('version');\n                        if (!(details.currentVersion) || (new sn_appclient.VersionComparator().isUpgrade(\n                                details.currentVersion,\n                                version\n                            ))) {\n                            // for applications use app scope as pluginId\n                            details.pluginId = grApp.getValue('scope');\n                            details.name = grApp.getValue('name');\n                            details.currentVersion = version;\n                            details.hasDemoData = grApp.getValue('demo_data') == 'has_demo_data' ? true : false;\n                        }\n                    }\n                    break;\n                }\n                case 'update': {\n                    var gr_store_app = new GlideRecord('sys_store_app');\n                    gr_store_app.addQuery('sys_id', id);\n                    gr_store_app.query();\n                    if (gr_store_app.next()) {\n                        details.currentVersion = gr_store_app.getValue('version');\n                        details.newerVersion = gr_store_app.getValue('latest_version');\n                        details.name = gr_store_app.getValue('name');\n                        details.pluginId = gr_store_app.getValue('scope');\n                        details.hasDemoData = gr_store_app.getValue('demo_data') == 'has_demo_data' ? true : false;\n                    }\n                    break;\n                }\n            }\n\n        } else if (type == \"plugin\" && pluginDetail) {\n            details.currentVersion = pluginDetail.version;\n            details.name = pluginDetail.name || id;\n            details.hasDemoData = pluginDetail.hasDemoData;\n        }\n        return details;\n    }\n\n    try {\n\n        var payload = input.payload || {};\n        var pluginInfo = payload.plugins;\n        var pluginDetails = payload.pluginDetails || {};\n\n        var plugins = Object.keys(pluginInfo).map(function(plugin) {\n            var details = getPluginOrAppDetails(plugin, pluginInfo[plugin], payload.pluginName, pluginDetails[plugin], payload.action);\n            var isInstalled = GlidePluginManager.isActive(details.pluginId);\n            return {\n                id: plugin,\n                type: pluginInfo[plugin],\n                installed: isInstalled,\n                name: details.name,\n                version: details.version,\n                currentVersion: details.currentVersion,\n                newerVersion: details.newerVersion,\n                pluginId: details.pluginId,\n                hasDemoData: details.hasDemoData\n            };\n        });\n\n        result.plugins = plugins;\n\n        var progressId = payload.progress_id;\n        if (progressId) {\n            result.status = 'installing';\n        } else {\n            result.status = plugins.some(function(p) {\n                return !p.installed;\n            }) ? 'ready to install' : 'installed';\n        }\n\n        result.isUpdateAvailable = plugins.some(function(plugin) {\n            return result.status == 'installed' && plugin.newerVersion && plugin.newerVersion != plugin.currentVersion;\n        });\n\n        if (payload.action == 'update' && result.isUpdateAvailable) {\n            result.status = 'ready to update';\n        }\n\n    } catch (e) {\n        gs.error('Unable to parse plugin(s) information' + e);\n    }\n    return result;\n\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"payload\",\n      \"label\": \"payload\",\n      \"description\": \"plugins\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_de01a775533201102958ddeeff7b12f9","api_name":"sn_ace.ACE Plugin Details","mutates_server_data":"true","name":"ACE Plugin Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Selected Suite\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Suite\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get Scan Suite Results Execution Dates","sys_updated_on":"2024-08-20 20:49:53","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"de55021e8740111061ee083f37cb0bb1","sys_updated_by":"admin","sys_created_on":"2022-06-15 01:24:24","sys_name":"VSC Get Scan Suite Result Execution Dates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n    var results = [];\n    if (!input.suite) {\n        return results;\n    }\n    var gr_suite = new GlideRecord('scan_suite_execution');\n    gr_suite.orderByDesc('sys_created_on');\n    gr_suite.addQuery('suite.sys_id', input.suite);\n    gr_suite.query();\n    for (var i = 0; i < 9; i++) {\n        if (gr_suite.next()) {\n            var resultNumber = gr_suite.getDisplayValue(\"result\").toString();\n            var res = new GlideRecord('scan_result');\n            res.addQuery(\"number\", resultNumber);\n            res.query();\n            if (res.next()) {\n                var resultId = res.sys_id.toString();\n\t\tvar label = res.sys_created_on.getDisplayValue();\n\t\tvar gdt = new GlideDateTime(label);\n\t\tvar created_date = gdt.getDate().toString();\n                var time = gdt.getTime();\n\t\tvar created_time = time.getByFormat('HH:mm:ss').toString();\n                results.push({\n                    \"label\": created_date,\n                    \"id\": resultId,\n                    \"time\": created_time,\n                    \"result\": resultNumber\n                });\n            }\n        }\n    }\n\n    results.sort(function(a, b) {\n        a = a.result.toUpperCase();\n        b = b.result.toUpperCase();\n        return (a > b) ? -1 : (a < b) ? 1 : 0;\n    });\n\n    if (results.length == 9) {\n        results.push({\n            \"label\": \"More Dates\",\n            \"id\": \"123\",\n            \"time\": \"\",\n            \"result\": \"\"\n        });\n    }\n\n    return results;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"suite\",\n    \"label\": \"Suite\",\n    \"description\": \"Selected Suite\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_de55021e8740111061ee083f37cb0bb1","api_name":"sn_vsc.VSC Get Scan Suite Result Execution Dates","mutates_server_data":"false","name":"VSC Get Scan Suite Result Execution Dates","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"StartIndex\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"endIndex\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"profile_sys_id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-10 10:05:30","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"de91494f4351611061d09a549cb8f20b","sys_updated_by":"admin","sys_created_on":"2023-03-05 03:52:37","sys_name":"Clone Fetch Table Data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/31774a2953839110a6f8ddeeff7b12cb","value":"31774a2953839110a6f8ddeeff7b12cb"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n\n    if (!input || !input.table_name || !input.startIndex) return [];\n\n    var adminUtils = new AdminCloneUtil();\n    var sys_profile_sys = adminUtils.SYSTEM_PROFILE_SYS_ID;\n\n\n    var result = {};\n    var gr = new GlideRecord(input.table_name);\n    gr.addEncodedQuery(\"profile.sys_id=\" + input.profile_sys_id + \"^ORprofile.sys_id=\" + this.SYSTEM_PROFILE_SYS_ID, true);\n    gr.query();\n    var cloneDefinitionsData = [];\n    while (gr.next()) {\n        row_data = [gr.sys_id.toString(), gr.getDisplayValue(row_name)];\n        cloneDefinitionsData.push(row_data);\n    }\n    //var data = cloneDefinitionsData.length;\n    return cloneDefinitionsData;\n\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"table_name\",\n      \"label\": \"Table Name\",\n      \"description\": \"Table Name\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"startIndex\",\n      \"label\": \"StartIndex\",\n      \"description\": \"StartIndex\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"0\"\n  },\n{\n      \"name\": \"endIndex\",\n      \"label\": \"endIndex\",\n      \"description\": \"endIndex\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"10\"\n  },\n{\n      \"name\": \"profile_sys_id\",\n      \"label\": \"profile_sys_id\",\n      \"description\": \"profile_sys_id\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"10\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/31774a2953839110a6f8ddeeff7b12cb","value":"31774a2953839110a6f8ddeeff7b12cb"},"sys_update_name":"sys_ux_data_broker_transform_de91494f4351611061d09a549cb8f20b","api_name":"sn_instance_clone.Clone Fetch Table Data","mutates_server_data":"false","name":"Clone Fetch Table Data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Table Name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get the available assignment types","sys_updated_on":"2023-10-09 04:25:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"dee59cdca32d3110d49f9bd2361e6195","sys_updated_by":"admin","sys_created_on":"2023-09-23 18:07:30","sys_name":"Data Manager Get Assignment Types","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFunction = function() {\n\t\tvar tableName = input.tableName;\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n\t\tvar assignmentTypes = [];\n\n\t\tvar results = proxy.getAssignmentTypeOptions(tableName);\n\t\tfor (var i = 0; i < results.length; i++) {\n\t\t\tassignmentTypes.push(results[i]);\n\t\t}\n\t\t\n\t\treturn assignmentTypes;\n\t};\n\n\treturn new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager Get Assignment Types\", wrapperFunction);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"tableName\",\r\n    \"label\": \"Table Name\",\r\n    \"fieldType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_dee59cdca32d3110d49f9bd2361e6195","api_name":"sn_cmdb_ws.Data Manager Get Assignment Types","mutates_server_data":"false","name":"Data Manager Get Assignment Types","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Group Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-06 15:01:04","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"df42a62d53263110ad0fddeeff7b12e2","sys_updated_by":"admin","sys_created_on":"2023-11-16 18:35:08","sys_name":"Get group preferences data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"51","sys_tags":"","script":"function transform(inputs) {\n    var result = {};\n    if (!inputs.groupId)\n        return {};\n    if (!(new global.OnCallSecurityNG().rotaMgrAccess(inputs.groupId)))\n        return {};\n    var ptoRequests = {\n        \"not_allowed\": gs.getMessage(\"Not allowed\"),\n        \"with_approval\": gs.getMessage(\"With approval\"),\n        \"without_approval\": gs.getMessage(\"Without approval\")\n    };\n    var scheduleOverlaps = {\n        \"true\": gs.getMessage(\"Yes\"),\n        \"false\": gs.getMessage(\"No\")\n    };\n    var escalationRules = {\n        \"start\": gs.getMessage(\"Escalate to outgoing shift\"),\n        \"end\": gs.getMessage(\"Escalate to incoming shift\"),\n        \"all\": gs.getMessage(\"Escalate to all shifts\")\n    };\n    var days = {\n        \"1\": gs.getMessage(\"Sunday\"),\n        \"2\": gs.getMessage(\"Monday\"),\n        \"3\": gs.getMessage(\"Tuesday\"),\n        \"4\": gs.getMessage(\"Wednesday\"),\n        \"5\": gs.getMessage(\"Thursday\"),\n        \"6\": gs.getMessage(\"Friday\"),\n        \"7\": gs.getMessage(\"Saturday\")\n    };\n    var defaultPtoRequest = gs.getProperty('com.snc.on_call_rotation.pto.configuration');\n    var defaultShiftScheduleOverlap = gs.getProperty('com.snc.on_call_rotation.allow_rota_overlap');\n    var defaultEscalationRuleOnShiftOverlap = gs.getProperty('com.snc.on_call_rotation.escalation_rule_rota_overlap');\n    var defaultSelectedFirstDayOfWeek = new global.OCCalendarUtils().getSystemFirstDayOfWeek();\n    var ptoRequestsDropdownItems = [{\n            id: 'default',\n            label: gs.getMessage('System default ({0})', [ptoRequests[defaultPtoRequest]])\n        },\n        {\n            id: 'with_approval',\n            label: ptoRequests['with_approval']\n        },\n        {\n            id: 'without_approval',\n            label: ptoRequests['without_approval']\n        },\n        {\n            id: 'not_allowed',\n            label: ptoRequests['not_allowed']\n        }\n    ];\n\n    var shiftScheduleOverlapDropdownItems = [{\n            id: (defaultShiftScheduleOverlap == \"true\") ? 'default_yes' : 'default_no',\n            label: gs.getMessage('System default ({0})', [scheduleOverlaps[defaultShiftScheduleOverlap]])\n        },\n        {\n            id: 'yes',\n            label: scheduleOverlaps['true']\n        },\n        {\n            id: 'no',\n            label: scheduleOverlaps['false']\n        }\n    ];\n\n    var escalationRuleDropdownItems = [{\n            id: 'default',\n            label: gs.getMessage('System default ({0})', [escalationRules[defaultEscalationRuleOnShiftOverlap]])\n        },\n        {\n            id: 'start',\n            label: escalationRules['start']\n        },\n        {\n            id: 'end',\n            label: escalationRules['end']\n        },\n        {\n            id: 'all',\n            label: escalationRules['all']\n        }\n    ];\n    var rotaStartDayDropdownItems = [{\n            id: '0',\n            label: gs.getMessage('System default ({0})', [days[Math.floor(defaultSelectedFirstDayOfWeek)]])\n        },\n        {\n            id: '1',\n            label: days['1']\n        },\n        {\n            id: '2',\n            label: days['2']\n        },\n        {\n            id: '3',\n            label: days['3']\n        },\n        {\n            id: '4',\n            label: days['4']\n        },\n        {\n            id: '5',\n            label: days['5']\n        },\n        {\n            id: '6',\n            label: days['6']\n        },\n        {\n            id: '7',\n            label: days['7']\n        }\n    ];\n    var firstDayOfWeekExists = false;\n    var dictionaryGr = new GlideRecord('sys_dictionary');\n    dictionaryGr.addQuery('name', 'on_call_group_preference');\n    dictionaryGr.addQuery('element', 'first_day_of_the_week');\n    dictionaryGr.setLimit(1);\n    dictionaryGr.query();\n    if (dictionaryGr.next())\n        firstDayOfWeekExists = true;\n    var groupPrefGr = new GlideRecord('on_call_group_preference');\n    groupPrefGr.addQuery('group', inputs.groupId);\n    groupPrefGr.setLimit(1);\n    groupPrefGr.query();\n    if (groupPrefGr.next()) {\n        var rotaManagers = groupPrefGr.getValue('rota_managers');\n        var selectedRotaManagers = [];\n        var userGr = new GlideRecord('sys_user');\n        userGr.addQuery('sys_id', 'IN', rotaManagers);\n        userGr.query();\n        while (userGr.next()) {\n            selectedRotaManagers.push({\n                id: userGr.getUniqueValue(),\n                label: userGr.getValue('name')\n            });\n        }\n        result.ptoRequestsDropdownItems = ptoRequestsDropdownItems;\n        result.shiftScheduleOverlapDropdownItems = shiftScheduleOverlapDropdownItems;\n        result.escalationRuleDropdownItems = escalationRuleDropdownItems;\n        result.selectedRotaManagers = selectedRotaManagers;\n        result.ptoRequests = groupPrefGr.getValue('pto_approval_config') ? groupPrefGr.getValue('pto_approval_config') : gs.getProperty('com.snc.on_call_rotation.pto.configuration');\n        if (firstDayOfWeekExists) {\n            var selectedFirstDayOfWeek = groupPrefGr.getValue('first_day_of_the_week') || '0';\n            result.firstDayOfWeek = selectedFirstDayOfWeek;\n            result.firstDayOfWeekDropdownItems = rotaStartDayDropdownItems;\n        }\n        result.firstDayOfWeekExists = firstDayOfWeekExists;\n        var allowShiftScheduleOverlap = groupPrefGr.getValue('allow_rota_overlap');\n\t\tallowShiftScheduleOverlap = (allowShiftScheduleOverlap == 'default') ? shiftScheduleOverlapDropdownItems[0].id : allowShiftScheduleOverlap;\n        result.allowShiftScheduleOverlap = allowShiftScheduleOverlap;\n        var selectedDropdownItem;\n        for (var i = 0; i < shiftScheduleOverlapDropdownItems.length; i++) {\n            if (shiftScheduleOverlapDropdownItems[i].id === allowShiftScheduleOverlap) {\n                selectedDropdownItem = shiftScheduleOverlapDropdownItems[i];\n                break;\n            }\n        }\n        result.rotaOverlapValue = selectedDropdownItem.id;\n        if (result.allowShiftScheduleOverlap) {\n            result.escalationRule = groupPrefGr.getValue('escalation_rule_rota_overlap') ? groupPrefGr.getValue('escalation_rule_rota_overlap') : gs.getProperty('com.snc.on_call_rotation.escalation_rule_rota_overlap');\n        }\n    } else {\n        result.ptoRequestsDropdownItems = ptoRequestsDropdownItems;\n        result.shiftScheduleOverlapDropdownItems = shiftScheduleOverlapDropdownItems;\n        result.escalationRuleDropdownItems = escalationRuleDropdownItems;\n        result.ptoRequests = 'default';\n        result.allowShiftScheduleOverlap = shiftScheduleOverlapDropdownItems[0].id;\n        result.rotaOverlapValue = shiftScheduleOverlapDropdownItems[0].id;\n\n        result.firstDayOfWeekExists = firstDayOfWeekExists;\n        if (firstDayOfWeekExists) {\n            result.firstDayOfWeek = '0';\n            result.firstDayOfWeekDropdownItems = rotaStartDayDropdownItems;\n        }\n\n    }\n    return result;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"groupId\",\r\n        \"label\": \"Group Id\",\r\n        \"description\": \"Group Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    } \r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_df42a62d53263110ad0fddeeff7b12e2","api_name":"sn_uib_on_call.Get group preferences data","mutates_server_data":"false","name":"Get group preferences data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Asset Function\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Quantity\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"State\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Substate\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-09-14 10:28:01","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"df4e7c449cd23010fa9bccc407a63b5b","sys_updated_by":"admin","sys_created_on":"2021-08-26 00:35:24","sys_name":"Consumable Split Data Broker","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n\tvar consumableSysId = input.sysId;\n\tvar quantity = input.quantity;\n\tvar recGr = new GlideRecord('alm_consumable');\n\tif(recGr.get(consumableSysId)) {\n\t\tvar isUpdateSuccessful = new global.Consumables().split(\n\t\t\tconsumableSysId,\n\t\t\tquantity,\n\t\t\t6,\n\t\t\tinput.substatus,\n\t\t\trecGr.parent,\n\t\t\trecGr.stockroom,\n\t\t\trecGr.location,\n\t\t\trecGr.assigned_to,\n\t\t\tinput.assetFunction\n\t\t);\n\t\tif (isUpdateSuccessful) {\n\t\t\tif (quantity === '1') {\n\t\t\t\tgs.addInfoMessage(gs.getMessage('{0} asset has been split', quantity));\n\t\t\t} else {\n\t\t\t\tgs.addInfoMessage(gs.getMessage('{0} assets have been split', quantity));\n\t\t\t}\n\t\t}\n\t}\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t  \"name\": \"sysId\",\r\n\t  \"label\": \"Sys ID\",\r\n\t  \"fieldType\": \"string\",\r\n\t  \"mandatory\": true\r\n\t},\r\n\t{\r\n\t\t\"name\": \"status\",\r\n\t\t\"label\": \"State\",\r\n\t\t\"fieldType\": \"number\",\r\n\t\t\"mandatory\": true\r\n\t},\r\n\t{\r\n\t\t\"name\": \"quantity\",\r\n\t\t\"label\": \"Quantity\",\r\n\t\t\"fieldType\": \"number\",\r\n\t\t\"mandatory\": true\r\n\t},\r\n\t{\r\n\t\t\"name\": \"substatus\",\r\n\t\t\"label\": \"Substate\",\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true\r\n\t},\r\n\t{\r\n\t\t\"name\": \"assetFunction\",\r\n\t\t\"label\": \"Asset Function\",\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_df4e7c449cd23010fa9bccc407a63b5b","api_name":"sn_itam_workspace.Consumable Split Data Broker","mutates_server_data":"true","name":"Consumable Split Data Broker","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[{\"message\":\"Table\",\"comment\":\"\"},{\"message\":\"Table  to check\",\"comment\":\"\"}]","batch_exclude":"false","description":"Checks if table has a text index","sys_updated_on":"2021-03-19 00:46:48","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"df8d6c975332201031cdddeeff7b12eb","sys_updated_by":"admin","sys_created_on":"2021-03-15 02:18:49","sys_name":"Has Text Index","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4b2d950b87c220109bada7da0acb0baa","value":"4b2d950b87c220109bada7da0acb0baa"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input)  {\n\tvar indexed = new GlideRecord(\"ts_index_name\");\n\tindexed.addQuery(\"table\", \"IN\", new GlideTableHierarchy(input.table).getTables());\n\tindexed.query();\n\treturn ret = indexed.hasNext();\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"table\",\r\n    \"label\": \"Table\",\r\n    \"description\": \"Table  to check\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"table_name\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4b2d950b87c220109bada7da0acb0baa","value":"4b2d950b87c220109bada7da0acb0baa"},"sys_update_name":"sys_ux_data_broker_transform_df8d6c975332201031cdddeeff7b12eb","api_name":"sn_uib_aw_addon.Has Text Index","mutates_server_data":"true","name":"Has Text Index","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Creating a data contract  for all the critical updates in one go. ","sys_updated_on":"2023-09-19 00:00:50","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"df90d774430031103b465dc36ab8f2ee","sys_updated_by":"maint","sys_created_on":"2023-07-13 07:24:34","sys_name":"Critical Updates Data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar statusTabSetConfig = [];\n\tvar allUpdatesConfig = CriticalUpdatesConstants.UPDATES_VIEW.ALL_UPDATES_CONFIG;\n\tvar highlightedColorConfig = CriticalUpdatesConstants.UPDATES_VIEW.HIGHLIGHTED_CONFIG;\n\tvar encodedQueriesWithLabels =  CriticalUpdatesConstants.UPDATES_VIEW.ENCODED_QUERIES_WITH_LABELS;\n\tencodedQueriesWithLabels.forEach(function(encodedQueryWithLabel, index){\n\t\tvar gr = new GlideRecord(CriticalUpdatesConstants.TABLE_CONSTANTS.TABLE);\n\t\tgr.addEncodedQuery(encodedQueryWithLabel[\"query\"]);\n\t\tgr.query();\n\t\tstatusTabSetConfig.push({\n\t\t\t\"icon\":\"\",\n\t\t\t\"label\":encodedQueryWithLabel[\"label_for_tabs\"],\n\t\t\t\"count\":gr.getRowCount(),\n\t\t\t\"fields\":null\n\t\t});\n\t\twhile (gr.next()) {\n\t\t\tvar priority, priorityLabel, highlightedColorType;\n\t\t\tpriority = gr.getValue(\"up_update_priority\");\n\t\t\tpriorityLabel = gr.getDisplayValue(\"up_update_priority\");\n\t\t\thighlightedColorType = priority ? highlightedColorConfig[priority] : '';\n\t\t\tallUpdatesConfig[encodedQueryWithLabel[\"label_for_data_key\"]].push({\n\t\t\t\t\"sysId\" : gr.getValue(\"sys_id\"),\n\t\t\t\t\"priority\" : priorityLabel,\n\t\t\t\t\"highlightedColorType\" : highlightedColorType,\n\t\t\t\t\"status\" : gr.getDisplayValue(\"up_update_status\"),\n\t\t\t\t\"title\" : gr.getDisplayValue(\"up_name\"),\n\t\t\t\t\"summary\" : gr.getDisplayValue(\"up_summary\"),\n\t\t\t\t\"dueDate\" : gr.getDisplayValue(\"up_due_date\")\n\t\t\t});\n\t\t}\n\t});\n\tallUpdatesConfig.tabSetsConfig = statusTabSetConfig;\n\treturn allUpdatesConfig;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/983e67b304752210559073c06a02f755","value":"983e67b304752210559073c06a02f755"},"sys_update_name":"sys_ux_data_broker_transform_df90d774430031103b465dc36ab8f2ee","api_name":"global.Critical Updates Data","mutates_server_data":"false","name":"Critical Updates Data","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Optional timestamp to force refresh of data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Refresh timestamp\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Gets card and tab filter metadata for My work landing page.","sys_updated_on":"2024-09-10 11:07:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e1159487eb3431100c0bb5d5d8522823","sys_updated_by":"admin","sys_created_on":"2023-08-26 00:22:46","sys_name":"Get My work page filter metadata","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"91","sys_tags":"","script":"function transform(input) {\n    var wrapperFn = function() {\n        var WS = new CMDBWsConstants();\n        var DM = new CMDBWsDMConstants();\n\n        var isAdmin = gs.hasRole(WS.ROLES.SN_CMDB_ADMIN) || gs.hasRole(WS.ROLES.ADMIN) || gs.hasRole(WS.ROLES.MAINT);\n\n        var IS_OVERDUE = DM.TASK_FILTERS.IS_OVERDUE;\n        var IS_WORK_IN_PROGRESS = DM.TASK_FILTERS.IS_WORK_IN_PROGRESS;\n        var IS_OPEN = DM.TASK_FILTERS.IS_OPEN;\n        var IS_NOT_CLOSED = DM.TASK_FILTERS.IS_NOT_CLOSED;\n        var ASSIGNED_TO_IS_EMPTY = DM.TASK_FILTERS.ASSIGNED_TO_IS_EMPTY;\n        var ASSIGNMENT_GROUP_IS_EMPTY = DM.TASK_FILTERS.ASSIGNMENT_GROUP_IS_EMPTY;\n        var IS_ATTESTATION_TASK = DM.TASK_FILTERS.IS_ATTESTATION_TASK;\n        var IS_APPROVAL_TASK = DM.TASK_FILTERS.IS_APPROVAL_TASK;\n        var IS_CERTIFICATION_TASK = DM.TASK_FILTERS.IS_CERTIFICATION_TASK;\n\n        var TABS = {\n            ATTESTATION_TASKS: {\n                KEY: 'attestation_tasks',\n                TAB_LABEL: sn_i18n.Message.getMessage(\"sn_cmdb_ws\", 'Attestation tasks'),\n                LIST_TITLE: sn_i18n.Message.getMessage(\"sn_cmdb_ws\", 'Attestation tasks'),\n                VIEW: \"852ce648a399021065729bd2361e61a0\"\n            },\n            CERTIFICATION_TASKS: {\n                KEY: 'certification_tasks',\n                TAB_LABEL: sn_i18n.Message.getMessage(\"sn_cmdb_ws\", 'Certification tasks'),\n                LIST_TITLE: sn_i18n.Message.getMessage(\"sn_cmdb_ws\", 'Certification tasks'),\n                VIEW: \"f68a2aaaa315021065729bd2361e61c3\"\n            },\n            APPROVAL_TASKS: {\n                KEY: 'approval_tasks',\n                TAB_LABEL: sn_i18n.Message.getMessage(\"sn_cmdb_ws\", 'All other tasks'),\n                LIST_TITLE: sn_i18n.Message.getMessage(\"sn_cmdb_ws\", 'Approval tasks'),\n                VIEW: \"7e7ea20ca399021065729bd2361e6187\"\n            }\n        };\n\n        var ACTION_CONFIG = {\n            DEFAULT: '0679fc44eb8d31100c0bb5d5d85228da',\n            CANCELLABLE_TASK: '9bc4bc00eb8d31100c0bb5d5d8522890'\n        };\n\n        var CARDS = {\n            TOTAL: {\n                KEY: 'total',\n                LABEL: sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"Total tasks\"),\n                ARIA_CONFIG: {\n                    \"aria-label\": sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"Apply total tasks filter to lists\")\n                }\n            },\n            IN_PROGRESS: {\n                KEY: \"in_progress\",\n                LABEL: sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"In progress\"),\n                ARIA_CONFIG: {\n                    \"aria-label\": sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"Apply in progress tasks filter to lists\")\n                }\n            },\n            OVERDUE: {\n                KEY: 'overdue',\n                LABEL: sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"Overdue\"),\n                ARIA_CONFIG: {\n                    \"aria-label\": sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"Apply overdue tasks filter to lists\")\n                }\n            },\n            NOT_STARTED: {\n                KEY: \"not_started\",\n                LABEL: sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"Not started\"),\n                ARIA_CONFIG: {\n                    \"aria-label\": sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"Apply not started tasks filter to lists\")\n                }\n            },\n            UNASSIGNED: {\n                KEY: \"unassigned\",\n                LABEL: sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"Unassigned\"),\n                ARIA_CONFIG: {\n                    \"aria-label\": sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"Apply unassigned tasks filter to lists\")\n                }\n            }\n        };\n\n        // var featureUtil = new CMDBWsFeatureSupportUtil();\n        // var isNewDMSupported = featureUtil.supportsFeature(featureUtil.FEATURE_IDS.DATA_MANAGER.ID);\n\n        var proxy = new sn_cmdb_ws.CMDBWsDMTaskUIProxy();\n        var assignmentFilter = '';\n        assignmentFilter = proxy.getTaskAssignmentFilterQuery();\n\n        // if (!isNewDMSupported) {\n        //     assignmentFilter += \"^\" + IS_ATTESTATION_TASK;\n        // }\n\n        var taskTypeFilter = WS.OPERATORS.AND + IS_ATTESTATION_TASK + WS.OPERATORS.OR + IS_APPROVAL_TASK + WS.OPERATORS.OR + IS_CERTIFICATION_TASK;\n\n        var cardsMetadata = [{\n                key: CARDS.TOTAL.KEY,\n                label: CARDS.TOTAL.LABEL,\n                filter: assignmentFilter + WS.OPERATORS.AND + IS_NOT_CLOSED,\n                ariaConfig: CARDS.TOTAL.ARIA_CONFIG,\n                selected: true\n            },\n            {\n                key: CARDS.IN_PROGRESS.KEY,\n                label: CARDS.IN_PROGRESS.LABEL,\n                filter: assignmentFilter + WS.OPERATORS.AND + IS_WORK_IN_PROGRESS,\n                ariaConfig: CARDS.IN_PROGRESS.ARIA_CONFIG,\n            },\n            {\n                key: CARDS.OVERDUE.KEY,\n                label: CARDS.OVERDUE.LABEL,\n                filter: assignmentFilter + WS.OPERATORS.AND + IS_NOT_CLOSED + WS.OPERATORS.AND + IS_OVERDUE,\n                ariaConfig: CARDS.OVERDUE.ARIA_CONFIG,\n            },\n            {\n                key: CARDS.NOT_STARTED.KEY,\n                label: CARDS.NOT_STARTED.LABEL,\n                filter: assignmentFilter + WS.OPERATORS.AND + IS_OPEN,\n                ariaConfig: CARDS.NOT_STARTED.ARIA_CONFIG,\n            }\n        ];\n\n        if (isAdmin) {\n            cardsMetadata.push({\n                key: CARDS.UNASSIGNED.KEY,\n                label: CARDS.UNASSIGNED.LABEL,\n                filter: IS_NOT_CLOSED + WS.OPERATORS.AND + ASSIGNED_TO_IS_EMPTY + WS.OPERATORS.AND + ASSIGNMENT_GROUP_IS_EMPTY,\n                ariaConfig: CARDS.UNASSIGNED.ARIA_CONFIG,\n            });\n        }\n\n        var taskCounts = CMDBWsDMUtil.getMyWorkTaskCounts(assignmentFilter, isAdmin, input.refresh_timestamp);\n\n        for (var i = 0; i < cardsMetadata.length; i++) {\n            cardsMetadata[i].value = taskCounts[cardsMetadata[i].key];\n\t\t\tswitch (cardsMetadata[i].key) {\n\t\t\t\tcase CARDS.TOTAL.KEY:\n\t\t\t\t\tcardsMetadata[i].ariaConfigContainer = sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"{count} total tasks\", {\n\t\t\t\t\t\tcount: taskCounts[cardsMetadata[i].key].toString()\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase CARDS.IN_PROGRESS.KEY:\n\t\t\t\t\tcardsMetadata[i].ariaConfigContainer = sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"{count} in progress tasks\", {\n\t\t\t\t\t\tcount: taskCounts[cardsMetadata[i].key].toString()\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase CARDS.OVERDUE.KEY:\n\t\t\t\t\tcardsMetadata[i].ariaConfigContainer = sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"{count} overdue tasks\", {\n\t\t\t\t\t\tcount: taskCounts[cardsMetadata[i].key].toString()\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase CARDS.NOT_STARTED.KEY:\n\t\t\t\t\tcardsMetadata[i].ariaConfigContainer = sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"{count} not started tasks\", {\n\t\t\t\t\t\tcount: taskCounts[cardsMetadata[i].key].toString()\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase CARDS.UNASSIGNED.KEY:\n\t\t\t\t\tcardsMetadata[i].ariaConfigContainer = sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"{count} unassigned tasks\", {\n\t\t\t\t\t\tcount: taskCounts[cardsMetadata[i].key].toString()\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n        }\n\n        var defaultCardFilter = cardsMetadata[0].filter;\n\n        var attestationListConfigMetadata = {\n            'default': ACTION_CONFIG.DEFAULT\n        };\n        attestationListConfigMetadata[CARDS.IN_PROGRESS.KEY] = ACTION_CONFIG.CANCELLABLE_TASK;\n        attestationListConfigMetadata[CARDS.NOT_STARTED.KEY] = ACTION_CONFIG.CANCELLABLE_TASK;\n\n        var certificationListConfigMetadata = {\n            'default': ACTION_CONFIG.DEFAULT\n        };\n        certificationListConfigMetadata[CARDS.IN_PROGRESS.KEY] = ACTION_CONFIG.CANCELLABLE_TASK;\n        certificationListConfigMetadata[CARDS.NOT_STARTED.KEY] = ACTION_CONFIG.CANCELLABLE_TASK;\n\n        var approvaltaskListConfigMetadata = {\n            'default': ACTION_CONFIG.DEFAULT\n        };\n        approvaltaskListConfigMetadata[CARDS.NOT_STARTED.KEY] = ACTION_CONFIG.CANCELLABLE_TASK;\n\n        var tabsMetadata = [{\n                key: TABS.CERTIFICATION_TASKS.KEY,\n                label: TABS.CERTIFICATION_TASKS.TAB_LABEL,\n                fields: {\n                    listTitle: TABS.CERTIFICATION_TASKS.LIST_TITLE,\n                    tabFilter: IS_CERTIFICATION_TASK,\n                    actionConfig: ACTION_CONFIG.DEFAULT,\n                    actionConfigMetadata: certificationListConfigMetadata,\n                    updated: Date.now(),\n                    view: TABS.CERTIFICATION_TASKS.VIEW\n                }\n            },\n            {\n                key: TABS.ATTESTATION_TASKS.KEY,\n                label: TABS.ATTESTATION_TASKS.TAB_LABEL,\n                fields: {\n                    listTitle: TABS.ATTESTATION_TASKS.LIST_TITLE,\n                    tabFilter: IS_ATTESTATION_TASK,\n                    actionConfig: ACTION_CONFIG.DEFAULT,\n                    actionConfigMetadata: attestationListConfigMetadata,\n                    updated: Date.now(),\n                    view: TABS.ATTESTATION_TASKS.VIEW\n                }\n            },\n            {\n                key: TABS.APPROVAL_TASKS.KEY,\n                label: TABS.APPROVAL_TASKS.TAB_LABEL,\n                fields: {\n                    listTitle: TABS.APPROVAL_TASKS.LIST_TITLE,\n                    tabFilter: IS_APPROVAL_TASK,\n                    actionConfig: ACTION_CONFIG.DEFAULT,\n                    actionConfigMetadata: approvaltaskListConfigMetadata,\n                    updated: Date.now(),\n                    view: TABS.APPROVAL_TASKS.VIEW\n                }\n            }\n        ];\n\n        for (var j = 0; j < tabsMetadata.length; j++) {\n            var filter = defaultCardFilter + WS.OPERATORS.AND + tabsMetadata[j].fields.tabFilter;\n            tabsMetadata[j].fields.filter = filter;\n            tabsMetadata[j].count = taskCounts[tabsMetadata[j].key];\n        }\n\n        var certificationExceptionsFilter = '';\n        var certificationExceptionsMessage = '';\n        if (isAdmin) {\n            //TODO: verify if the assignment filter is necessary, if not this will be removed\n            //certificationExceptionsFilter = proxy.getTaskAssignmentFilterQuery(DM.CERTIFICATION_ATTRIBUTE_STATUS.TASK);\n            //certificationExceptionsFilter += WS.OPERATORS.AND + DM.CERTIFICATION_ATTRIBUTE_STATUS.STATUS + DM.QUERY_FILTERS.EQUAL + DM.CERTIFICATION_ATTRIBUTE_STATUS.STATUS_OPTIONS.FAILED;\n            certificationExceptionsFilter += DM.CERTIFICATION_ATTRIBUTE_STATUS.STATUS + DM.QUERY_FILTERS.EQUAL + DM.CERTIFICATION_ATTRIBUTE_STATUS.STATUS_OPTIONS.FAILED;\n            var certExceptionCount = CMDBWsDMUtil.getRowCount(DM.CERTIFICATION_ATTRIBUTE_STATUS.TABLE, certificationExceptionsFilter, false);\n            if (certExceptionCount > 0) {\n                certificationExceptionsMessage = sn_i18n.Message.getMessage(\"sn_cmdb_ws\", \"There are {0} certification exceptions\", {\n                    0: certExceptionCount.toString()\n                });\n            }\n        }\n\n        return {\n            cardsMetadata: cardsMetadata,\n            tabsMetadata: tabsMetadata,\n            updatedTime: sn_i18n.Message.getMessage(\"sn_cmdb_ws\", 'Last updated: {0}', {\n                0: taskCounts.updated\n            }),\n            certificationExceptionsMessage: certificationExceptionsMessage,\n            certificationExceptionsFilter: certificationExceptionsFilter\n        };\n    };\n\n    return new CMDBWsDataBrokerHandler().execute(\"Get My work page filter metadata\", \"sn_cmdb_ws_dm\", wrapperFn);\n}","acl_failure_result":"","props":"[{\r\n     \"name\": \"refresh_timestamp\",\r\n     \"label\": \"Refresh timestamp\",\r\n     \"description\": \"Optional timestamp to force refresh of data\",\r\n     \"readOnly\": false,\r\n     \"fieldType\": \"string\",\r\n     \"mandatory\": false,\r\n     \"defaultValue\": \"\"\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_e1159487eb3431100c0bb5d5d8522823","api_name":"sn_cmdb_ws.Get My work page filter metadata","mutates_server_data":"false","name":"Get My work page filter metadata","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Hermes Diagnostics test results for all configured services for the past 7 days","sys_updated_on":"2024-07-10 16:54:16","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e116a117438f021057521daa5ab8f2bb","sys_updated_by":"admin","sys_created_on":"2024-07-02 17:22:46","sys_name":"TestsForAllServices","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"28","sys_tags":"","script":"/**\n * JSON returned is formatted for the \"Vertical Bar\" visualization type\n * Grouped by date and status codes (success/fail)\n */\nfunction transform(input) {\n    var endDate = new GlideDate();\n    var tmpDate = new GlideDate();\n    tmpDate.addDaysLocalTime(-6);\n    var startDate = new GlideDate(tmpDate);\n    var start = (startDate.getDisplayValue());\n    var end = (endDate.getDisplayValue());\n    var status = new GlideAggregate('hermes_system_status');\n    status.addEncodedQuery(\"sys_created_onBETWEENjavascript:gs.dateGenerate('\" + start + \"','00:00:00')@javascript:gs.dateGenerate('\" + end + \"','23:59:59')\");\n    status.addAggregate(\"COUNT\", \"status_code\");\n    status.addTrend(\"sys_created_on\", \"date\");\n    status.query();\n    var testResults = [];\n    var elements = [];\n    var tests = [];\n    while (status.next()) {\n        var name = status.getValue(\"timeref\");\n        var column = {\n            \"name\": name,\n            \"status_code\": status.getValue(\"status_code\"),\n            \"value\": status.getAggregate(\"COUNT\", \"status_code\"),\n\n        };\n        if (tests.indexOf(name) == -1)\n            tests.push(name);\n\n        testResults.push(column);\n    }\n    for (key in tests) {\n        var columnValue = tests[key];\n        elements.push({\n            \"eventData\": {\n                \"query\": \"sys_created_on=\" + columnValue,\n                \"querySegments\": [{\n                    \"field\": \"sys_created_on\",\n                    \"values\": [\n                        columnValue,\n                    ]\n                }]\n            },\n            \"id\": columnValue,\n            \"label\": columnValue,\n        });\n    }\n\n    var metadata = {\n        \"eventData\": {\n            \"table\": \"hermes_system_status\"\n        },\n        \"groupBy\": [{\n                \"elements\": elements,\n                \"id\": \"name\",\n                \"fieldType\": \"string\",\n                \"label\": \"Name\",\n            },\n            {\n                \"label\": \"Status Code\",\n                \"elements\": [{\n                        \"label\": \"failed\",\n                        \"id\": \"fail\",\n                        \"query\": \"status_code=failed\",\n                        \"querySegments\": [{\n                            \"field\": \"status_code\",\n                            \"values\": [\n                                \"fail\"\n                            ]\n                        }]\n                    },\n                    {\n                        \"label\": \"success\",\n                        \"id\": \"success\",\n                        \"query\": \"status_code=success\",\n                        \"querySegments\": [{\n                            \"field\": \"status_code\",\n                            \"values\": [\n                                \"success\"\n                            ]\n                        }]\n                    }\n                ],\n                \"id\": \"status_code\",\n                \"fieldType\": \"string\",\n\n            }\n        ],\n        \"aggregateBy\": 4,\n        \"format\": {\n            \"unitFormat\": \"{0}\"\n        },\n        \"aggregateFunction\": \"COUNT\",\n    };\n\n    var results = [{\n        \"data\": testResults,\n        \"metadata\": metadata,\n    }];\n\n    return results;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/03d4abbf04312210559073c06a02f7f9","value":"03d4abbf04312210559073c06a02f7f9"},"sys_update_name":"sys_ux_data_broker_transform_e116a117438f021057521daa5ab8f2bb","api_name":"global.TestsForAllServices","mutates_server_data":"false","name":"TestsForAllServices","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Return the logged in user for the session along with the user roles.","sys_updated_on":"2022-04-01 05:55:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e12d5b8e5b26011011ca51d11581c78f","sys_updated_by":"admin","sys_created_on":"2022-03-31 23:45:41","sys_name":"Get User Info","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1163fa730f102010e8c940c1df767e8c","value":"1163fa730f102010e8c940c1df767e8c"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    return {\n        userId: gs.getUserID(),\n        userRoles: gs.getUser().getRoles()\n    };\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1163fa730f102010e8c940c1df767e8c","value":"1163fa730f102010e8c940c1df767e8c"},"sys_update_name":"sys_ux_data_broker_transform_e12d5b8e5b26011011ca51d11581c78f","api_name":"sn_admin_center.Get User Info","mutates_server_data":"false","name":"Get User Info","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Is StatusBar Enabled\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Retrieves current/session scope and its updateSet if statusBar is enabled for a studio.","sys_updated_on":"2025-01-20 12:09:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e12dbe79ff031210363bffffffffffb1","sys_updated_by":"admin","sys_created_on":"2025-01-13 04:14:07","sys_name":"Get current scope and updateset","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8a841f2bc42f457e8809ea71d35e821f","value":"8a841f2bc42f457e8809ea71d35e821f"},"sys_created_by":"admin","sys_mod_count":"15","sys_tags":"","script":"function transform(input) {\n    let isStatusBarEnabled = false;\n    let sessionScopeAndUpdateSet = {};\n\n    try {\n        // TODO: Remove the below code once DEF0589428 is fixed\n        const studioShellConfig = input?.isStatusBarEnabled ?\n            JSON.parse(input.isStatusBarEnabled) :\n            null;\n        isStatusBarEnabled = studioShellConfig?.enableStatusBar ?? false;\n    } catch (error) {\n        gs.error(`Error parsing isStatusBarEnabled: ${error.message}`);\n    }\n\n    if (isStatusBarEnabled) {\n        sessionScopeAndUpdateSet = global.UDCGlobal.getCurrentScopeAndUpdateSet();\n        sessionScopeAndUpdateSet.scopeOfLastModifiedUpdateSet = DeveloperSessionWatch.getCurrentUpdateSetScopeForUser();\n    }\n\n    return sessionScopeAndUpdateSet;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"isStatusBarEnabled\",\r\n        \"label\": \"Is StatusBar Enabled\",\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": false\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8a841f2bc42f457e8809ea71d35e821f","value":"8a841f2bc42f457e8809ea71d35e821f"},"sys_update_name":"sys_ux_data_broker_transform_e12dbe79ff031210363bffffffffffb1","api_name":"sn_udc.Get current scope and updateset","mutates_server_data":"false","name":"Get current scope and updateset","output_schema":"[{\r\n    \"name\": \"sessionScopeAndUpdateSet\",\r\n    \"label\": \"Get session scope and its update set\",\r\n    \"readOnly\": true,\r\n    \"fieldType\": \"object\"\r\n}]","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Admin Center App Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Business Objective Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page Path\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page path\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-04-02 17:19:40","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e1732a8eb7a241109cfe23508e11a9b1","sys_updated_by":"admin","sys_created_on":"2022-03-31 19:25:38","sys_name":"Admin Center Header Data Broker","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1163fa730f102010e8c940c1df767e8c","value":"1163fa730f102010e8c940c1df767e8c"},"sys_created_by":"admin","sys_mod_count":"13","sys_tags":"","script":"function transform(input) {\n    var inputBusinessObjectiveId = input.business_objective_id;\n    var inputApplicationId = input.application_id;\n\n    var headerUtil = new AdminCenterUtil();\n\n    var content = {\n        businessObjectiveData: headerUtil.getBusinessObjectiveData(inputBusinessObjectiveId),\n        applicationData: headerUtil.getApplicationData(inputApplicationId)\n    };\n\n    var breadcrumb = [headerUtil.generateItsmBusinessObjectivesBreadcrumbItem()];\n    if (inputBusinessObjectiveId) {\n        breadcrumb.push(headerUtil.generateBusinessObjectiveDetailsBreadcrumbItem(inputBusinessObjectiveId));\n        if (inputApplicationId) {\n            breadcrumb.push(headerUtil.generateApplicationDetailsBreadcrumbItem(inputBusinessObjectiveId, inputApplicationId));\n        }\n    }\n\n    return {\n        content: content,\n        breadcrumb: breadcrumb,\n        copyLink: headerUtil.generatePageURL(input.page_path)\n    };\n}","acl_failure_result":"","props":"[{\r\n      \"name\": \"page_path\",\r\n      \"label\": \"Page Path\",\r\n      \"description\": \"Page path\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n{\r\n      \"name\": \"business_objective_id\",\r\n      \"label\": \"Business Objective Id\",\r\n      \"description\": \"Business Objective Id\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"\"\r\n  },\r\n  {\r\n      \"name\": \"application_id\",\r\n      \"label\": \"Application Id\",\r\n      \"description\": \"Admin Center App Id\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false,\r\n      \"defaultValue\": \"\"\r\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1163fa730f102010e8c940c1df767e8c","value":"1163fa730f102010e8c940c1df767e8c"},"sys_update_name":"sys_ux_data_broker_transform_e1732a8eb7a241109cfe23508e11a9b1","api_name":"sn_admin_center.Admin Center Header Data Broker","mutates_server_data":"false","name":"Admin Center Header Data Broker","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2021-09-14 16:58:40","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e1ce9e3f9c823010fa9bccc407a63b65","sys_updated_by":"admin","sys_created_on":"2021-08-25 12:52:54","sys_name":"Get Asset Function Choices","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\tvar results = [];\n\tvar gr = new GlideRecord('sys_choice');\n\tvar current_language = gs.getSession().getLanguage();\n\tgr.addQuery('name', 'alm_asset');\n\tgr.addQuery('element', 'asset_function');\n\tgr.addQuery('language', current_language);\n\tgr.addQuery('value', 'NOT IN', ['asset_bundle']);\n\tgr.query();\n\n\tresults.push({\n\t\t'id' : 'none',\n\t\t'value' : '',\n\t\t'label' : gs.getMessage('-- None --')\n\t});\n\n\twhile (gr.next()) {\n\t\tresults.push({\n\t\t\t'id' : gr.value.toString(),\n\t\t\t'value' : gr.value.toString(),\n\t\t\t'label' : gr.label.toString()\n\t\t});\n\t}\n\treturn results;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_e1ce9e3f9c823010fa9bccc407a63b65","api_name":"sn_itam_workspace.Get Asset Function Choices","mutates_server_data":"false","name":"Get Asset Function Choices","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-26 17:44:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e20d9d9c53821110f6fdddeeff7b12be","sys_updated_by":"admin","sys_created_on":"2022-09-16 04:14:24","sys_name":"CMDB Workspace Resolve Routes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"21","sys_tags":"","script":"function transform(input) {\n    var table = input.table;\n    var sysId = input.sysId;\n    var gr;\n    var routeObj = {};\n\n    var TABLES = {\n        // data manager\n        CMDB_DM_TASK: \"cmdb_data_management_task\",\n        CMDB_DM_POLICY_EXECUTION: \"cmdb_data_management_policy_execution\",\n        CMDB_DM_POLICY: \"cmdb_data_management_policy\",\n        CMDB_DM_RUNTIME_ATTRIBUTES: \"cmdb_data_management_policy_runtime_attributes\",\n        CMDB_DEDUPE_TASK: \"reconcile_duplicate_task\",\n\n\n        // multisource tables\n        CMDB_MULTISOURCE_DATA: \"cmdb_multisource_data\",\n        SN_CMDB_WS_MS_DISCOVERY_SOURCES_NOT_REPORTING: \"sn_cmdb_ws_ms_discovery_sources_not_reporting\",\n        SN_CMDB_WS_MS_DATA_MISMATCH: \"sn_cmdb_ws_ms_data_mismatch\",\n        SN_CMDB_WS_MS_CIS_WITH_SINGLE_SOURCE: \"sn_cmdb_ws_ms_cis_with_single_source\",\n        SN_CMDB_WS_MS_CIS_BY_NUMBER_OF_SOURCES: \"sn_cmdb_ws_ms_cis_by_number_of_sources\"\n    };\n\n    var ROUTE = {\n        LIST: \"list\",\n        DM_POLICY_FORM: 'data-manager-policy-form',\n        TASK_DETAILS: 'task-detail',\n        DM_POLICY_DETAILS: 'data-manager-policy-details',\n        DM_POLICY_EXECUTION_DETAILS: 'data-manager-policy-execution',\n        RECORD: 'record',\n        MULTISOURCE_PREVIEW: 'cmdb-360-multisource-data-preview',\n        DE_DUPE_TASK_DETAILS:'remediate-duplicate-task'\n    };\n\n    if (!gs.nil(table) && !gs.nil(sysId)) {\n\t\trouteObj = {\n\t\t\troute: '',\n\t\t\tfields: {},\n\t\t\tparams: {},\n\t\t\tredirect: false,\n\t\t\tpassiveNavigation: false,\n\t\t\ttargetRoute: 'current',\n\t\t\texternal: {},\n\t\t\ttitle: ''\n\t\t}\n        gr = new GlideRecordSecure(table);\n        var canWrite = gr.canWrite();\n        var canRead = gr.canRead();\n        if (gr.get(sysId)) {\n            if (table == TABLES.CMDB_MULTISOURCE_DATA || table == TABLES.SN_CMDB_WS_MS_DISCOVERY_SOURCES_NOT_REPORTING || table == TABLES.SN_CMDB_WS_MS_DATA_MISMATCH ||\n                table == TABLES.SN_CMDB_WS_MS_CIS_WITH_SINGLE_SOURCE || table == TABLES.SN_CMDB_WS_MS_CIS_BY_NUMBER_OF_SOURCES) {\n                var ciSysId = gr.getValue('ci');\n                var classTable = gr.getValue('class');\n                if (ciSysId && classTable) {\n                    routeObj.route = ROUTE.MULTISOURCE_PREVIEW;\n                    routeObj.fields = {\n                        table: classTable,\n                        sys_id: ciSysId\n                    };\n                    return routeObj;\n                }\n            } else if (table == TABLES.CMDB_DM_TASK && canWrite) {\n                routeObj.route = ROUTE.TASK_DETAILS;\n                routeObj.fields = {\n                    sysId: sysId\n                };\n            } else if ((table == TABLES.CMDB_DM_POLICY || table == TABLES.CMDB_DM_RUNTIME_ATTRIBUTES) && canWrite) {\n                routeObj.route = ROUTE.DM_POLICY_DETAILS;\n                routeObj.fields = {\n                    policyRuntimeAttributesSysId: sysId\n                };\n            } else if (table == TABLES.CMDB_DM_POLICY_EXECUTION && canRead) {\n                routeObj.route = ROUTE.DM_POLICY_EXECUTION_DETAILS;\n                routeObj.fields = {\n                    sysId: sysId\n                };\n            }  else if (table == TABLES.CMDB_DEDUPE_TASK && canRead) {\n            routeObj.route = ROUTE.DE_DUPE_TASK_DETAILS;\n            routeObj.fields = {\n                table: table,\n                sysId: sysId\n            };\n        }else { // catch all for all reference links\n                routeObj.route = ROUTE.RECORD;\n                routeObj.fields = {\n                    table: table,\n                    sysId: sysId\n                };\n            }\n            routeObj.title = gr.getDisplayValue();\n        }\n    }\n\n    return routeObj;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_e20d9d9c53821110f6fdddeeff7b12be","api_name":"sn_cmdb_ws.CMDB Workspace Resolve Routes","mutates_server_data":"false","name":"CMDB Workspace Resolve Routes","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Suite\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Suite Execution\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-08-12 23:04:05","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e23b9115f9d55110f877ab289c5a046e","sys_updated_by":"maint","sys_created_on":"2022-08-12 23:04:05","sys_name":"VSC Execute Scan","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\t// run scan for suite and return progress Id\n\tvar scan = new sn_instance_scan.ScanInstance();\n\treturn scan.triggerSuiteScan(input.suite);\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"suite\",\n    \"label\": \"Suite\",\n    \"description\": \"Suite Execution\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_e23b9115f9d55110f877ab289c5a046e","api_name":"sn_vsc.VSC Execute Scan","mutates_server_data":"false","name":"VSC Execute Scan","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"User SysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-07-30 12:25:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e23b94003ce31110f8770595aecb47ca","sys_updated_by":"admin","sys_created_on":"2022-11-28 17:38:07","sys_name":"Get task aggregation query","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_created_by":"admin","sys_mod_count":"14","sys_tags":"","script":"function transform(input) {\n    var output = {};\n    var sowInteractionUtils = new SOWInteractionUtils();\n    output.taskQuery = sowInteractionUtils.getTaskAggregationQuery(input.userSysId);\n    output.numberOfDays = sowInteractionUtils.getNumberOfDays();\n    var taskGr = new GlideRecord('task');\n    taskGr.addEncodedQuery(output.taskQuery, true);\n    taskGr.setLimit(1);\n    taskGr.query();\n    output.hasTasks = taskGr.hasNext();\n    output.isDRRPluginInstalled = GlidePluginManager.isActive('com.snc.uib.sn_dyn_rel_rec');\n    return output;\n}","acl_failure_result":"","props":"[\n\t{\n\t   \"name\": \"userSysId\",\n          \"label\": \"User SysId\",\n          \"description\": \"User SysId\",\n          \"readOnly\": false,\n          \"fieldType\": \"string\",\n          \"mandatory\": true\n\t}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/47b2ca6053983010ff67ddeeff7b12bd","value":"47b2ca6053983010ff67ddeeff7b12bd"},"sys_update_name":"sys_ux_data_broker_transform_e23b94003ce31110f8770595aecb47ca","api_name":"sn_sow_interaction.Get task aggregation query","mutates_server_data":"false","name":"Get task aggregation query","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Deactivaton Filter Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"deactivaton Filter Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-11 16:47:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e312482c7fe452100a3426d6ac866506","sys_updated_by":"admin","sys_created_on":"2024-09-06 10:40:27","sys_name":"Deactivate Filter ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n   \n    var filterId = input.deactivatonFilterId;\n    try {\n        if(gs.nil(filterId)){\n          return null;\n        }\n        var nowAssistGuardianFilterUtil = new sn_nowassist_admin.NowAssistGuardianFilterUtil();\n        return nowAssistGuardianFilterUtil.changeFilterStatus(filterId, false);      \n        \n    } catch (e) {\n        gs.error(\"Failed fetch Sensitive Filter - \" + e.toString());\n        return null;\n    }\n\n}","acl_failure_result":"","props":"[\n {\n        \"name\": \"deactivatonFilterId\",\n        \"label\": \"deactivaton Filter Id\",\n        \"description\": \"Deactivaton Filter Id\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_e312482c7fe452100a3426d6ac866506","api_name":"sn_nowassist_admin.Deactivate Filter ","mutates_server_data":"true","name":"Deactivate Filter ","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Column that the hierarchy is based on. If this property is not set, the list will be rendered as a flattend list\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Current Page\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enable Infinite Scroll\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enable cell filtering\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enable column filtering\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enable column grouping\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enable column sorting\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enable declarative actions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enable quick edit\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enable reference links\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enables the ability to access the cell filter popover to filter cells by 'show matching' and 'filter out'\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enables the ability to filter a list from the table header\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enables the ability to group a list from the table header\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Enables the ability to sort a list by clicking on the column header\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Feature flags\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Filter\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Group By\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Limit of record count.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"List Menu Configuration ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Many declarative actions require selection of one or more records. When enabled, this property hides the checkboxes on the list if there are no such actions in the action bar.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Menu Loaded\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Name of target table to fetch records from\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Nest by column\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Number of rows to fetch\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Only enable selection when required by actions\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Request Metadata\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Set to false to skip loading the menu when a configuration ID is provided\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The ID of the configuration from sys_ux_list_menu_config table you want to populate the list menu with.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The quick edit feature allows you to click on a row action icon to open up a panel in which you can edit the associated record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Users can edit or remove this filter. If you set a fixed filter, this filter adds more conditions that further specify which records to display.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"When enabled, declarative actions will be fetched and displayed in an action bar in the header\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"When enabled, reference field links will be active\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"When enabled, the list will have infinite scrolling and pagination will be hidden. User can scroll through all the rows in the table without having to click through pages.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"listInstanceId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"listType\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"pageId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"recordCountLimit\",\n  \"comment\" : \"\"\n},{\n  \"message\" : \"currentPageForChild\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"rowLimit\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Column filtering popover display. DO NOT USE.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"DO NOT USE, DEPRECATED. Determines which actions users can take from a column header action popover. Users can access the popover to filter the list with data in the column, group the list by column data, both, or neither.\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Now List Input Transform to handle prequery data transforms","sys_updated_on":"2025-03-27 00:00:00","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e364ad62ff100210397cffffffffffa3","sys_updated_by":"admin","sys_created_on":"2024-09-25 16:28:34","sys_name":"Now List Input Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/015dd2fa796d247253ef940e685b9ebd","value":"015dd2fa796d247253ef940e685b9ebd"},"sys_created_by":"admin","sys_mod_count":"64","sys_tags":"","script":"function transform(input) {\n    const {\n\t\tconfigurationId,\n\t\tenableCellFiltering,\n\t\tenableColumnSorting,\n\t\tenableDeclarativeActions,\n\t\tenableReferenceLinks,\n\t\tenableQuickEdit,\n\t\tfeatureFlags: currentFeatureFlags,\n\t\tgroupBy,\n\t\tlimit,\n\t\tmenuLoaded,\n\t\tonlyEnableSelectionWhenRequiredByActions,\n\t\trequestMetadata: {\n\t\t\trequestId\n\t\t},\n\t\ttable,\n\t\tlistType,\n    childQuery,\n    currentPageForChild,\n    nestBy,\n    expandAllGroups,\n    childrenRowLimit,\n    enableBadgeCount,\n    enableInfiniteScroll,\n    columnFilteringPopoverDisplay,\n    } = input;\n    let currentGrouping = enableInfiniteScroll ? '' : groupBy;\n    var {\n        query,\n        fixedQuery,\n        currentPage\n    } = input;\n    var {\n        enableRowDragDrop,\n        enableSelectAll,\n        enableToggleAllGroups\n    } = currentFeatureFlags;\n\n  let {\n    enableColumnFiltering,\n    enableColumnGrouping,\n  } = input;\n\n  switch (columnFilteringPopoverDisplay) {\n    case 'allowBoth':\n        enableColumnFiltering = true;\n        enableColumnGrouping = true;\n        break;\n    case 'allowOnlyFiltering':\n        enableColumnFiltering = true;\n        enableColumnGrouping = false;\n        break;\n    case 'allowOnlyGrouping':\n        enableColumnFiltering = false;\n        enableColumnGrouping = true;\n        break;\n    case 'disallowColumnFilteringPopover':\n        enableColumnFiltering = false;\n        enableColumnGrouping = false;\n        break;\n    default:\n      break;\n  }\n\tconst firstLoad = requestId === null;\n\n  if(firstLoad && enableInfiniteScroll) {\n    currentPage = 0;\n  }\n  \n   const featureFlags =\n\t\tfirstLoad\n\t\t?\n\t\t\t{\n\t\t\t\t...currentFeatureFlags,\n\t\t\t\tenableSelectAll: enableInfiniteScroll ? false : enableSelectAll !== false,\n\t\t\t\tenableRowDragDrop: enableInfiniteScroll ? false : enableRowDragDrop !== false,\n\t\t\t\tenableCellFiltering: enableCellFiltering !== false,\n\t\t\t\tenableColumnFiltering: enableColumnFiltering !== false,\n\t\t\t\tenableColumnGrouping: enableInfiniteScroll ? false : enableColumnGrouping !== false,\n\t\t\t\tenableColumnSorting: enableColumnSorting !== false,\n\t\t\t\tenableDeclarativeActions: enableDeclarativeActions !== false,\n\t\t\t\tenableQuickEdit: enableQuickEdit !== false,\n\t\t\t\tenableReferenceLinks: enableReferenceLinks !== false,\n\t\t\t\tenableToggleAllGroups: (enableInfiniteScroll || nestBy) ? false : enableToggleAllGroups !== false,\n\t\t\t\tenableRowSelector: true,\n\t\t\t\tonlyEnableSelectionWhenRequiredByActions: onlyEnableSelectionWhenRequiredByActions !== false,\n\t\t\t}\n\t\t: \tcurrentFeatureFlags;\n\n   function getRowLimitData() {\n\tconst JAVA_MAX_INT_LIMIT = 2147483647;\n        const rowsPerPage = gs.getProperty('glide.ui.per_page');\n        let rowLimitOptions = [10, 20, 50, 100];\n        let rowLimit;\n        if (rowsPerPage && rowsPerPage.trim()) {\n            rowLimitOptions = Array.from(\n                new Set(\n                    rowsPerPage\n                    .split(',')\n                    .map(Number)\n                    .filter(isValidLimitValue)\n                )\n            );\n        }\n\n        function isValidLimitValue(val) {\n            return Number.isInteger(val) && val > 0 && val <= JAVA_MAX_INT_LIMIT;\n        }\n\n        function addLimitToOptions(val) {\n            if (isValidLimitValue(val) && !rowLimitOptions.includes(val)) {\n                rowLimitOptions.push(val);\n            }\n        }\n\n        function getRowCountPreference() {\n            let rowLimitUserPref = gs.getUser().getPreference('rowcount') || 0;\n            if (rowLimitUserPref) {\n                rowLimitUserPref = parseInt(rowLimitUserPref);\n                rowLimitUserPref = rowLimitOptions.includes(rowLimitUserPref) ?\n                    rowLimitUserPref :\n                    0;\n            }\n            return rowLimitUserPref;\n        }\n        //add limit if not exists\n        addLimitToOptions(limit);\n        rowLimit = limit || getRowCountPreference();\n        if (!rowLimit || rowLimit > JAVA_MAX_INT_LIMIT) {\n            //add default limit to limit options\n            rowLimit = 20;\n            addLimitToOptions(rowLimit);\n        }\n        rowLimitOptions = rowLimitOptions.sort(function (a,b) {\n            return a-b;\n\t});\n        return {\n            rowLimitOptions,\n            rowLimit\n        };\n    }\n\n     const {\n        rowLimit: configuredRowlimit,\n        rowLimitOptions\n    } = getRowLimitData();\n\n\tconst rowLimit = enableInfiniteScroll ? 200 : configuredRowlimit;\n\n\tconst GROUP_BY_LIMIT = 20;\n\n    function isGrouped (query) {\n\t\tconst groupRegex = /\\^GROUPBY[a-z_]+\\^|\\^GROUPBY[a-z_]+$|^GROUPBY[a-z_]+\\^|^GROUPBY[a-z_]+$/;\n\t\tconst regex = new RegExp(groupRegex);\n\t\treturn regex.exec(query) != null;\n\t}\n\n    function getOffset (page, _limit, q) {\n\t\tconst grouped = isGrouped(q);\n\n\t\tif (grouped) return parseInt(page) * GROUP_BY_LIMIT;\n\n\t\treturn page * _limit;\n\t}\n\n\tconst offset = getOffset(currentPage, rowLimit, query);\n\n    // DEF0601769: If live-list is enabled, set recordCountLimit to liveListThreshold\n    // to prevent fuzzyCount from interfering with live-list functionality.\n\tlet { recordCountLimit } = input;\n\tconst ignoreTotalCount = Number.isInteger(recordCountLimit) && recordCountLimit >= 0;\n\tconst isLiveListEnabled = gs.getProperty('glide.lists.live_list_enabled', 'false') === 'true';\n\tif (ignoreTotalCount && isLiveListEnabled) {\n\t\trecordCountLimit = parseInt(gs.getProperty('glide.lists.live_list_threshold', 20000));\n\t}\n\n\t// 1 is added to identify if recordCountLimit <= total number of records and so to decide if \"+\"\n\t// should be appended to the displayed count or not\n\t// Case (when total records > rowLimit > recordCountLimit):\n\t// page has more records to display than the recordCountLimit, and so to the graphQL we send rowLimit + offset.\n\tconst adjustedRecordCountLimit = ignoreTotalCount\n\t\t? rowLimit > recordCountLimit\n\t\t\t? rowLimit + 1 + offset\n\t\t\t\t: recordCountLimit + 1 + offset\n\t\t\t: null;\n\t\n   // While fetching child rows, we use query as full query and set fixedQuery to empty\n   const isNestedChildrenRow = childQuery && nestBy;\n   const childOffset = 0;\n   const childLimit = childrenRowLimit;\n   var totalItemsFetched;\n   if (isNestedChildrenRow) {\n     query = childQuery;\n     if (query.includes('GROUPBY')) {\n            var delimiterIndex = query.indexOf('^');\n            query = query.substring(delimiterIndex + 1, query.length);\n            delimiterIndex = query.indexOf('^');\n            query = delimiterIndex > -1 ? query.substring(delimiterIndex + 1, query.length) : query;\n      }\n     fixedQuery = '';\n     // Here we calculate total items to be fetched by multiplying Child Limit with page number and then adding childlimit.\n     totalItemsFetched = (currentPageForChild) ? (childLimit * currentPageForChild) + childLimit : childLimit;\n  }\n\treturn {\n\t\t...input,\n    currentPage,\n    fixedQuery: fixedQuery,\n\t\tallowSharing: configurationId?.length > 0 && !menuLoaded,\n\t\tfeatureFlags,\n\t\tignoreTotalCount,\n\t\tisDeclarativeActionsRequired: featureFlags.enableDeclarativeActions,\n    limit: isNestedChildrenRow ? totalItemsFetched : rowLimit,\n\t\toffset: isNestedChildrenRow ? childOffset : offset,\n\t\tquery: query.includes('GROUPBY') || !currentGrouping ? query : `${query}^GROUPBY${groupBy}`,\n\t\trecordCountLimit: adjustedRecordCountLimit,\n\t\trowLimitOptions,\n    currentPageForChild,\n\t\ttable: configurationId && !menuLoaded ? '' : table,\n\t\tsource: listType === 'related' ? 'related_list' : 'list',\n\t};\n}","acl_failure_result":"","props":"[\r\n      {\r\n        \"name\": \"configurationId\",\r\n        \"label\": \"List Menu Configuration ID\",\r\n        \"fieldType\": \"string\",\r\n        \"valueType\": \"string\",\r\n        \"readOnly\": false,\r\n        \"mandatory\": false,\r\n        \"description\": \"The ID of the configuration from sys_ux_list_menu_config table you want to populate the list menu with.\"\r\n      },\r\n      {\r\n        \"name\": \"currentPage\",\r\n        \"label\": \"Current Page\",\r\n        \"description\": \"Current Page\",\r\n        \"readOnly\": \"false\",\r\n        \"fieldType\": \"number\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": 0\r\n      },  \r\n      {\r\n        \"name\": \"enableCellFiltering\",\r\n        \"label\": \"Enable cell filtering\",\r\n        \"description\": \"Enables the ability to access the cell filter popover to filter cells by 'show matching' and 'filter out'\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n      },\r\n      {\r\n        \"name\": \"enableColumnFiltering\",\r\n        \"label\": \"Enable column filtering\",\r\n        \"description\": \"Enables the ability to filter a list from the table header\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n      },\r\n      {\r\n        \"name\": \"enableColumnGrouping\",\r\n        \"label\": \"Enable column grouping\",\r\n        \"description\": \"Enables the ability to group a list from the table header\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n      },\r\n      {\r\n        \"name\": \"childQuery\",\r\n        \"label\": \"Child query\",\r\n        \"description\": \"Query based on which children are fetched when nestBy property is set\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n      },\r\n      {\r\n        \"name\": \"currentPageForChild\",\r\n        \"label\": \"Current Page for Child\",\r\n        \"description\": \"Keeps track of current page for child rows\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"number\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": 0\r\n      },\r\n       {\r\n        \"name\": \"fixedQuery\",\r\n        \"label\": \"Fixed query\",\r\n        \"description\": \"Adds a query condition to further specify which records to display.\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n      },\r\n      {\r\n        \"name\": \"enableColumnSorting\",\r\n        \"label\": \"Enable column sorting\",\r\n        \"description\": \"Enables the ability to sort a list by clicking on the column header\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n      },\r\n      {\r\n        \"name\": \"enableDeclarativeActions\",\r\n        \"label\": \"Enable declarative actions\",\r\n        \"description\": \"When enabled, declarative actions will be fetched and displayed in an action bar in the header\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n      },\r\n      {\r\n        \"name\": \"enableQuickEdit\",\r\n        \"label\": \"Enable quick edit\",\r\n        \"description\": \"The quick edit feature allows you to click on a row action icon to open up a panel in which you can edit the associated record\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n      },\r\n      {\r\n        \"name\": \"enableReferenceLinks\",\r\n        \"label\": \"Enable reference links\",\r\n        \"description\": \"When enabled, reference field links will be active\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n      },\r\n      {\r\n        \"name\": \"featureFlags\",\r\n        \"label\": \"Feature flags\",\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": false\r\n      },\r\n      {\r\n        \"name\": \"groupBy\",\r\n        \"label\": \"Group By\",\r\n        \"description\": \"\",\r\n        \"readOnly\": \"false\",\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n      },\r\n      {\r\n        \"name\": \"nestBy\",\r\n        \"label\": \"Nest by column\",\r\n        \"description\": \"Column that the hierarchy is based on. If this property is not set, the list will be rendered as a flattend list\",\r\n        \"readOnly\": \"false\",\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n      },\r\n      {\r\n        \"name\": \"childrenRowLimit\",\r\n        \"label\": \"Fetch Children Count\",\r\n        \"description\": \"Sets the number of children fetched for a parent row.\",\r\n        \"readOnly\": \"false\",\r\n        \"fieldType\": \"number\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": 10\r\n      },\r\n      {\r\n        \"name\": \"enableBadgeCount\",\r\n        \"label\": \"Enable badge count\",\r\n        \"description\": \"Show/Hide the badge count of parent row\",\r\n        \"readOnly\": \"false\",\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n      },\r\n      {\r\n        \"name\": \"limit\",\r\n        \"label\": \"rowLimit\",\r\n        \"description\": \"Number of rows to fetch\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"number\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": 0\r\n      },\r\n      {\r\n        \"name\": \"listInstanceId\",\r\n        \"label\": \"listInstanceId\",\r\n        \"description\": \"\",\r\n        \"readOnly\": \"false\",\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n      },\r\n      {\r\n        \"name\": \"listType\",\r\n        \"label\": \"listType\",\r\n        \"description\": \"\",\r\n        \"readOnly\": \"false\",\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n      },\r\n      {\r\n        \"name\": \"menuLoaded\",\r\n        \"label\": \"Menu Loaded\",\r\n        \"description\": \"Set to false to skip loading the menu when a configuration ID is provided\",\r\n        \"fieldType\": \"boolean\",\r\n        \"valueType\": \"boolean\",\r\n        \"readOnly\": \"false\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": false\r\n      },\r\n      {\r\n        \"name\": \"onlyEnableSelectionWhenRequiredByActions\",\r\n        \"label\": \"Only enable selection when required by actions\",\r\n        \"description\": \"Many declarative actions require selection of one or more records. When enabled, this property hides the checkboxes on the list if there are no such actions in the action bar.\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n      },\r\n      {\r\n        \"name\": \"pageId\",\r\n        \"label\": \"pageId\",\r\n        \"description\": \"\",\r\n        \"readOnly\": \"false\",\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n      },\r\n      {\r\n        \"name\": \"query\",\r\n        \"label\": \"Filter\",\r\n        \"description\": \"Users can edit or remove this filter. If you set a fixed filter, this filter adds more conditions that further specify which records to display.\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"condition_string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n      },\r\n      {\r\n        \"name\": \"recordCountLimit\",\r\n        \"label\": \"recordCountLimit\",\r\n        \"description\": \"Limit of record count.\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"number\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": null\r\n      },\r\n      {\r\n        \"name\": \"requestMetadata\",\r\n        \"label\": \"Request Metadata\",\r\n        \"description\": \"Request Metadata\",\r\n        \"readOnly\": \"true\",\r\n        \"fieldType\": \"json\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": null\r\n      },\r\n      {\r\n          \"name\": \"enableInfiniteScroll\",\r\n          \"label\": \"Enable Infinite Scroll\",\r\n          \"description\": \"When enabled, the list will have infinite scrolling and pagination will be hidden. User can scroll through all the rows in the table without having to click through pages.\",\r\n          \"readOnly\": false,\r\n          \"fieldType\": \"boolean\",\r\n          \"valueType\": \"boolean\",\r\n          \"mandatory\": false,\r\n          \"defaultValue\": null\r\n      },\r\n      {\r\n        \"name\": \"table\",\r\n        \"label\": \"Table\",\r\n        \"description\": \"Name of target table to fetch records from\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"table_name\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"task\"\r\n      },\r\n      {\r\n        \"name\": \"appId\",\r\n        \"label\": \"Application Id\",\r\n        \"description\": \"Workspace Application Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"String\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": null\r\n      },\r\n      {\r\n        \"name\": \"columnFilteringPopoverDisplay\",\r\n        \"label\": \"Column filtering popover display. DO NOT USE.\",\r\n        \"description\": \"DO NOT USE, DEPRECATED. Determines which actions users can take from a column header action popover. Users can access the popover to filter the list with data in the column, group the list by column data, both, or neither.\",\r\n        \"readOnly\": \"false\",\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n      }\n    ]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/015dd2fa796d247253ef940e685b9ebd","value":"015dd2fa796d247253ef940e685b9ebd"},"sys_update_name":"sys_ux_data_broker_transform_e364ad62ff100210397cffffffffffa3","api_name":"sn_now_list_common.Now List Input Transform","mutates_server_data":"false","name":"Now List Input Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Timestamp\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"timestamp\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-01-12 07:15:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e36d08ca7720311085f8dbad6b5a9933","sys_updated_by":"admin","sys_created_on":"2023-08-10 10:56:10","sys_name":"Now Assist Summary Plugin Status Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform() {\n    var res = new sn_nowassist_admin.NowAdminAssistUtil().getPluginStatus();\n    return res;\n\t\n}","acl_failure_result":"","props":"[\n    {\n        \"name\": \"timestamp\",\n        \"label\": \"Timestamp\",\n        \"description\": \"timestamp\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": false,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_e36d08ca7720311085f8dbad6b5a9933","api_name":"sn_nowassist_admin.Now Assist Summary Plugin Status Transform","mutates_server_data":"false","name":"Now Assist Summary Plugin Status Transform","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2022-08-29 08:15:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e3776f8a778111104646d99dbd5a9922","sys_updated_by":"admin","sys_created_on":"2022-08-03 07:06:24","sys_name":"AWA Admin Console Data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform() {\n    var result = {};\n\n    var queAndAnsData = [{\n        \"Question\": gs.getMessage(\"What kind of queues would work best for your team?\"),\n        \"Answer\": gs.getMessage(\"A queue is a collection of work items waiting to be assigned to an agent, and you get to decide how those work items are grouped. Perhaps your teams work items would be best organized by department, customer type, or an agents skillset. Whatever the case, take some time to strategize around which queues would best serve your agents and your users.\")\n    }, {\n        \"Question\": gs.getMessage(\"How will you define your assignment groups?\"),\n        \"Answer\": gs.getMessage(\"Like queues, assignment groups can be fully customized to fit the needs of your org. In the case of assignment groups, however, youll be categorizing agents based on their skillset. For example, you might have a group of expert-level agents who are available from 9am-5pm during the workweek, and another group of agents who can provide basic support outside of regular business hours.\")\n    }, {\n        \"Question\": gs.getMessage(\"What skills does your team have?\"),\n        \"Answer\": gs.getMessage(\"A skill is just a parameterusually a language or a level of product expertiseused to automatically assign a work item to the right agent. You might want to survey your agents to get a sense of what skills they have. The more you know about your support teams skillset, the better support youll be able to provide.\")\n    }, {\n        \"Question\": gs.getMessage(\"Which skills will be optional, and which will be mandatory?\"),\n        \"Answer\": gs.getMessage(\"Mandatory skills are nonnegotiable for users. For example, a Spanish-speaking user absolutely needs an agent who speaks Spanish. Optional skills, on the other hand, are certainly helpful, but not as critical. Be sure to configure a skill-based routing approach that honors your users must-haves while still accounting for the skills that will make for a superior support experience.\")\n    }, {\n        \"Question\": gs.getMessage(\"How could your key performance indicators (KPIs) impact your queues?\"),\n        \"Answer\": gs.getMessage(\"For example, you might have a service-level agreement (SLA) that entitles certain users to a higher standard of support. With dedicated VIP queues and assignment groups, you can meet your SLAs and exceed your KPIs.\")\n    }];\n\n    result[\"que_and_ans\"] = queAndAnsData;\n    result[\"isAwaInstalled\"] = GlidePluginManager.isActive(\"com.glide.awa\");\n\n    return result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_e3776f8a778111104646d99dbd5a9922","api_name":"sn_oe_sfs.AWA Admin Console Data","mutates_server_data":"false","name":"AWA Admin Console Data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Request Detail\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-04-04 17:54:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e381a59a531d82103919ddeeff7b1207","sys_updated_by":"admin","sys_created_on":"2024-04-03 14:42:10","sys_name":"Pwd Reset Verify All Verifications","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\treturn new sn_uib_pwd_reset.PwdResetUXFVerifyProcessor().verifyAllVerifications(input.token, input.reqDetail);\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },{\r\n        \"name\": \"reqDetail\",\r\n        \"label\": \"Request Detail\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_e381a59a531d82103919ddeeff7b1207","api_name":"sn_uib_pwd_reset.Pwd Reset Verify All Verifications","mutates_server_data":"true","name":"Pwd Reset Verify All Verifications","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Check for DT for Virtual Agent","sys_updated_on":"2024-07-05 07:52:52","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e3bef47f9f460210f0b32e5af90a1cba","sys_updated_by":"admin","sys_created_on":"2024-05-15 10:46:37","sys_name":"DT for Virtual Agent Plugin Availability","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"18","sys_tags":"","script":"function transform(input) {\n    var response = {};\n    try {\n\t\tresponse[\"isBUPluginActive\"] = GlidePluginManager.isActive('sn_generative_ai');\n\t\tresponse[\"isDTPluginActive\"] = GlidePluginManager.isActive('com.glide.cs.dynamic.translation.virtual_agent');\n    } catch (e) {\n        gs.error('Failed to get Dynamic translation for Virtual Agent plugin status');\n    }\n    return response;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_e3bef47f9f460210f0b32e5af90a1cba","api_name":"sn_nowassist_admin.DT for Virtual Agent Plugin Availability","mutates_server_data":"false","name":"DT for Virtual Agent Plugin Availability","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table to look up\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Retrieve table label for  input table name","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e451fdd57738911023651605bc5a996b","sys_updated_by":"admin","sys_created_on":"2022-07-19 04:09:22","sys_name":"Get table label","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n\tvar result = \"default\";\n\t\n\tif (!input.table) {\n\t\treturn results;\n\t}\n\t\n\tswitch(input.table) {\n\t\tcase \"cmdb_multisource_query_result\":\t\n\t\t\tresult = gs.getMessage(\"CMDB 360 Query Results\");\n\t\t\tbreak;\n\t\tcase \"cmdb_multisource_query_result_diff_record\":\n\t\t\tresult = gs.getMessage(\"CMDB 360 Query Diff Results\");\n\t\t\tbreak;\n\t\tcase \"cmdb_multisource_query_result_ms_record\":\n\t\t\tresult = gs.getMessage(\"CMDB 360 Query CI/Discovery Source Results\");\n\t\t\tbreak;\n\t\tdefault : {\n\t\t\tvar fields = new GlideRecord('sys_db_object');\n\t\t\tfields.addQuery('name', input.table);\n\t\t\tfields.query();\n\t\n\t\t\tif(fields.next()) {\n\t\t\t\tresult = fields.getValue(\"label\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\treturn result;\n\t\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"table_name\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_e451fdd57738911023651605bc5a996b","api_name":"sn_cmdb_ws.Get table label","mutates_server_data":"false","name":"Get table label","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get application operation queue status","sys_updated_on":"2024-03-15 17:59:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e47a33de77a50110fd0faeca78106179","sys_updated_by":"maint","sys_created_on":"2022-02-22 17:19:35","sys_name":"Get Operation Queue Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\tvar state = sn_ale_queue.AppOperationQueue.getAppOperationQueueStatus();\n\tvar healthMonitorStatus = sn_ale_queue.AppOperationHealth.isHealthMonitorActive();\n\tvar result = {};\n\n\tvar ga = new GlideAggregate('sys_execution_tracker');\n\tga.addQuery('type', 'sys.applifecycle.operation');\n\tga.addAggregate('COUNT');\n\tga.addQuery('state', '0');\n\tga.query();\n\tvar queueDepth = 0;\n\tif (ga.next())\n\t\tqueueDepth = ga.getAggregate('COUNT');\n\n\tif (state === 'idle or running') {\n\t\tif (queueDepth == 0)\n\t\t\tresult.queue_status = gs.getMessage('Idle');\n\t\telse\n\t\t\tresult.queue_status = gs.getMessage('Running');\n\t} else\n\t\tresult.queue_status = gs.getMessage(state);\n\n\tresult.queue_depth = queueDepth;\n\n\tif (state === 'idle or running' || state === 'upgrade paused') {\n\t\tresult.is_paused = false;\n\t\tresult.pause_or_resume_button_label = gs.getMessage('Pause');\n\t\tresult.pause_or_resume_button_tooltip = gs.getMessage('Pause Operation Queue');\n\t} else {\n\t\tresult.is_paused = true;\n\t\tresult.pause_or_resume_button_label = gs.getMessage('Resume');\n\t\tresult.pause_or_resume_button_tooltip = gs.getMessage('Resume Operation Queue');\n\t}\n\n\tresult.healthMonitorStatus = healthMonitorStatus;\n\n\treturn result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/528d27ff04352210559073c06a02f737","value":"528d27ff04352210559073c06a02f737"},"sys_update_name":"sys_ux_data_broker_transform_e47a33de77a50110fd0faeca78106179","api_name":"global.Get Operation Queue Status","mutates_server_data":"false","name":"Get Operation Queue Status","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Get time for specified timezone\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User timezone\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-31 00:16:22","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e4bf2714a3ea02104bb05824d51e61e2","sys_updated_by":"admin","sys_created_on":"2024-05-29 23:12:21","sys_name":"Now TimeZone","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\n    var tz = input.timezone;\n    if (!tz)\n        tz = gs.getProperty('glide.sys.default.tz') || 'America/Los_Angeles';\n\n    return tz;\n}","acl_failure_result":"","props":"[\n\t{\n\t  \"name\": \"timezone\",\n\t  \"label\": \"User timezone\",\n\t  \"description\": \"Get time for specified timezone\",\n\t  \"readOnly\": false,\n\t  \"fieldType\": \"string\",\n\t  \"mandatory\": false\n\t}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_e4bf2714a3ea02104bb05824d51e61e2","api_name":"sn_sow_itsm_common.Now TimeZone","mutates_server_data":"false","name":"Now TimeZone","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Security center changed hardening settings most affected Security Area and Priority from previous score to current score","sys_updated_on":"2022-08-30 22:25:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e53fc1cb9c215110f8771131ec8d011d","sys_updated_by":"maint","sys_created_on":"2022-08-30 18:57:31","sys_name":"VSC Get Security Area and Priority","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\t//Get most affected securityArea and most affected Priority\n\tvar result = [];\n\tvar obj = new sn_vsc.SCComparisonUtil();\n\tvar securityArea = obj.mostRepeatedSecurityArea();\n\tvar priority = obj.getAllPriorityForSecurityArea(securityArea);\n\tresult.push({\n\t\t\"securityArea\": securityArea,\n\t\t\"priority\": priority\n\t});\n\treturn result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_e53fc1cb9c215110f8771131ec8d011d","api_name":"sn_vsc.VSC Get Security Area and Priority","mutates_server_data":"false","name":"VSC Get Security Area and Priority","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-06-20 10:22:42","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e59a9acf77be4210a102da3ccd5a99dc","sys_updated_by":"admin","sys_created_on":"2024-06-19 16:20:50","sys_name":"Check visibility of VA metrics","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    return new sn_oe_sfs.CIUtil().isInStage3();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_e59a9acf77be4210a102da3ccd5a99dc","api_name":"sn_oe_sfs.Check visibility of VA metrics","mutates_server_data":"false","name":"Check visibility of VA metrics","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"User\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get the default dates of a comparison from \"sn_vsc_user_comparisons\" for the logged in user. \n","sys_updated_on":"2022-09-10 04:59:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e6478212c9319110f8772e958ddfc0a2","sys_updated_by":"maint","sys_created_on":"2022-09-10 01:21:50","sys_name":"VSC Default dates of hardening comparisons","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input){\n\tvar vscGetDatesObj = new sn_vsc.VscGetHardeningComparisonDatesForUser();\n\treturn vscGetDatesObj.getDatesForUser(input.user_name);\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"user_name\",\n    \"label\": \"User\",\n    \"description\": \"User\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false\n  } \n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_e6478212c9319110f8772e958ddfc0a2","api_name":"sn_vsc.VSC Default dates of hardening comparisons","mutates_server_data":"false","name":"VSC Default dates of hardening comparisons","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Filter Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-25 13:37:51","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e64890b97f1852100a3426d6ac866524","sys_updated_by":"admin","sys_created_on":"2024-08-28 23:11:54","sys_name":"Get Filter Topic Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n\n    var filterId = input.filterId;\n    try {\n        if (gs.nil(filterId)) {\n            return null;\n        }\n        var isConversationalStudioInstalled = false;\n        var nowAssistGuardianFilterUtil = new sn_nowassist_admin.NowAssistGuardianFilterUtil();\n        isConversationalStudioInstalled = new GlidePluginManager().isActive('com.sn_conversational_studio');\n        return {\n                filterDetails: nowAssistGuardianFilterUtil.getGenAIFilterByFilterId(filterId),\n                cbTopicId : nowAssistGuardianFilterUtil.getFilterCbTopicId(filterId),\n                isConversationalStudioInstalled: isConversationalStudioInstalled\n        };\n    } catch (e) {\n        gs.error(\"Failed fetch Sensitive Filter - \" + e.toString());\n        return null;\n    }\n\n}","acl_failure_result":"","props":"[\n {\n        \"name\": \"filterId\",\n        \"label\": \"Filter Id\",\n        \"description\": \"Filter Id\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n    }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_e64890b97f1852100a3426d6ac866524","api_name":"sn_nowassist_admin.Get Filter Topic Details","mutates_server_data":"false","name":"Get Filter Topic Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Shift Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-07-29 14:16:26","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e64c274137f631108f2beacc74924ba7","sys_updated_by":"admin","sys_created_on":"2023-11-27 20:57:08","sys_name":"Create Shift","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"45","sys_tags":"","script":"function transform(input) {\n    var output = {\n            success: false,\n            partial_success: false,\n            error_messages: [],\n            data: []\n        },\n        resp = {},\n        errors = [];\n\n    var onCallCreationWizardUtils = new global.OnCallCreationWizardUtils();\n    var ocsNg = new global.OnCallSecurityNG();\n    var ocTeamsCalendarUtil = new sn_uib_on_call.OnCallTeamsCalendarUtil();\n\n    function unEscapeErrorMessages(msgs) {\n        var errors = [];\n        if (msgs.length != 0) {\n            msgs.forEach(function(msg) {\n                errors.push(msg.replaceAll(/&#39;/g, \"'\"));\n            }, this);\n        }\n        return errors;\n    }\n\n    function removeEntry(tableName, sysId) {\n        if (gs.nil(tableName) || gs.nil(sysId))\n            return;\n\n        var rotaGr = new GlideRecord(tableName);\n        if (rotaGr.get(sysId))\n            rotaGr.deleteRecord();\n    }\n\n    var shiftData = input.shiftData;\n    if (shiftData && shiftData.type) {\n        var type = shiftData.type;\n        if (gs.nil(shiftData.group)) {\n            output.error_messages = [gs.getMessage(\"Group Sys Id not provided\")];\n            return output;\n        }\n        if (!ocsNg.rotaMgrAccess(shiftData.group))\n            return output;\n\n        ocTeamsCalendarUtil.clearErrorMessages();\n        if (type == 'use_shift_template') {\n\n            var onCallRotation = new global.OnCallRotation();\n\n            if (gs.nil(shiftData.name)) {\n                output.error_messages = [gs.getMessage(\"Shift name is not provided\")];\n                return output;\n            }\n\n            if (gs.nil(shiftData.schedule_template)) {\n                output.error_messages = [gs.getMessage(\"Schedule Template is not provided\")];\n                return output;\n            }\n\n            try {\n                var startDate = new GlideDate().getDisplayValueInternal();\n                var overlappingRota = onCallRotation._getExistingSpanOverlappingRota(shiftData.group, shiftData.schedule_template, new GlideDateTime(startDate));\n                if (global.JSUtil.notNil(overlappingRota)) {\n                    output.error_messages = [gs.getMessage(\"Cannot create the shift, The selected schedule overlaps with the '{0}' rotation schedule.\", [overlappingRota])];\n                    return output;\n                }\n\n                resp = onCallCreationWizardUtils.createUpdateShiftFromTemplates([{\n                    \"name\": shiftData.name,\n                    \"schedule_type\": \"schedule_template\",\n                    \"start_date\": startDate,\n                    \"schedule_template\": shiftData.schedule_template,\n                    \"specify_holiday\": false,\n                    \"send_reminders\": true,\n                    \"reminder_lead_time\": 2,\n                    \"coverage_lead_type\": \"weekly\",\n                    \"coverage_interval\": 12,\n                    \"index\": 0\n                }], shiftData.group);\n\n                errors = ocTeamsCalendarUtil.getErrorMessages();\n                if (errors.length)\n                    output.error_messages = unEscapeErrorMessages(errors);\n                else {\n                    output.success = true;\n                    output.error_messages = [];\n                    output.data = resp.rotaData;\n                }\n                return output;\n            } catch (e) {\n                output.error_messages = [e.message];\n                return output;\n            }\n        }\n        if (type == 'use_schedule_template') {\n            var schedule = \"\",\n                records = shiftData.records,\n                group = shiftData.group,\n                rotaData = [];\n\n            if (gs.nil(records) || !Array.isArray(records) || records.length == 0) {\n                output.error_messages = [gs.getMessage(\"Shifts Information not provided\")];\n                return output;\n            }\n            for (var i = 0; i < records.length; i++) {\n                var shift = records[i];\n                if (shift.ignore)\n                    continue;\n\n                var isAllDay = shift.all_day;\n                var gdt = new GlideDateTime();\n                var gd = new GlideDate();\n                gd.setDisplayValue(gdt.getLocalDate());\n                if (!isAllDay) {\n                    shift.start_date_time = gd.getDisplayValue() + \" \" + shift.start_time;\n                    gdt.addDaysLocalTime(parseInt(shift.end_time_day));\n                    gd.setDisplayValue(gdt.getLocalDate());\n                    shift.end_date_time = gd.getDisplayValue() + \" \" + shift.end_time;\n\n                    gdt.setDisplayValue(shift.start_date_time);\n                    shift.start_date_time = gdt.getDisplayValueInternal();\n\n                    gdt.setDisplayValue(shift.end_date_time);\n                    shift.end_date_time = gdt.getDisplayValueInternal();\n                } else {\n                    var formattedDate = gd.getByFormat(\"yyyy-MM-dd\");\n                    shift.start_date_time = formattedDate + \" 00:00:00\";\n                    shift.end_date_time = formattedDate + \" 23:59:59\";\n                }\n                delete shift.start_time;\n                delete shift.end_time;\n                delete shift.end_time_day;\n                try {\n                    resp = onCallCreationWizardUtils.createUpdateShiftFromTemplates([shift], group);\n                    errors = ocTeamsCalendarUtil.getErrorMessages();\n                    if (errors.length) {\n                        output.data = resp.rotaData;\n                        output.success = true;\n                        output.partial_success = true;\n                        output.error_messages = unEscapeErrorMessages(errors);\n                        return output;\n                    }\n                    if (resp && resp.rotaData && resp.rotaData[0]) {\n                        schedule = resp.rotaData[0].schedule && resp.rotaData[0].schedule.value;\n                        rotaData.push(resp.rotaData[0]);\n                    }\n                } catch (e) {\n                    output.error_messages = [e.message];\n                    return output;\n                }\n            }\n            if (output.error_messages && output.error_messages.length)\n                return output;\n            return {\n                success: true,\n                error_messages: [],\n                partial_success: false,\n                data: rotaData\n            };\n        }\n\n        if (type == 'create_new_shift') {\n            if (shiftData.all_day) {\n                var stDate = new GlideDate();\n                stDate.setDisplayValue(shiftData.start_date);\n                shiftData.start_date_time = stDate.getByFormat(\"yyyy-MM-dd\") + \" 00:00:00\";\n                shiftData.end_date_time = stDate.getByFormat(\"yyyy-MM-dd\") + \" 23:59:59\";\n            }\n            var glideDateTime = new GlideDateTime();\n            glideDateTime.setDisplayValue(shiftData.start_date_time);\n            shiftData.start_date_time = glideDateTime.getDisplayValueInternal();\n            shiftData.start_date = glideDateTime.getLocalDate();\n            glideDateTime.setDisplayValue(shiftData.end_date_time);\n            shiftData.end_date_time = glideDateTime.getDisplayValueInternal();\n            try {\n                resp = onCallCreationWizardUtils.createUpdateShiftFromTemplates([shiftData], shiftData.group);\n                var result = {\n                        \"errorMessages\": [],\n                        \"shift_details\": {}\n                    },\n                    daysOfWeek = {\n                        'monday': '1',\n                        'tuesday': '2',\n                        'wednesday': '3',\n                        'thursday': '4',\n                        'friday': '5',\n                        'saturday': '6',\n                        'sunday': '7'\n                    };\n                var inputData = {\n                    shift_id: (resp && resp.rotaData && resp.rotaData[0] && resp.rotaData[0].sys_id.value) || \"\",\n                    shift_details: {\n                        repeat_type: shiftData.repeat_type,\n                        repeat_number: shiftData.repeat_number\n                    }\n                };\n                if (!gs.nil(shiftData.repeats_until) && shiftData.repeat_type != \"never\")\n                    inputData.shift_details.repeats_until_iso = shiftData.repeats_until.split(\"T\")[0];\n\n                if (!gs.nil(shiftData.selected_holiday_schedule))\n                    inputData.shift_details.selected_holiday_schedule = shiftData.selected_holiday_schedule;\n\n                var responseData = new sn_uib_on_call.ShiftUtility().updateShiftDetails(inputData, null, result, daysOfWeek);\n                if (responseData.errorMessages && responseData.errorMessages.length != 0) {\n                    removeEntry('cmn_rota', inputData.shift_id);\n                    output.error_messages = [responseData.errorMessages[0]];\n                    return output;\n                }\n                return {\n                    success: true,\n                    error_messages: [],\n                    partial_success: false,\n                    data: resp.rotaData\n                };\n            } catch (e) {\n                output.error_messages = [e.message];\n                return output;\n            }\n        }\n    }\n    return output;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"shiftData\",\r\n    \"label\": \"Shift Data\",\r\n    \"description\": \"Shift Data\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"json\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_e64c274137f631108f2beacc74924ba7","api_name":"sn_uib_on_call.Create Shift","mutates_server_data":"false","name":"Create Shift","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Returns whether the current instance is prod or sub prod.","sys_updated_on":"2024-05-29 02:05:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e6bdcf4077a20210c2123a91fa5a9985","sys_updated_by":"admin","sys_created_on":"2024-05-29 02:05:08","sys_name":"GetInstanceStatus","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var instanceId = gs.getProperty('instance_id');\n    var defaultTabId = '';\n    var defaultDashboardId = '';\n    var gr = new GlideRecord('sn_mif_instance');\n    gr.addQuery('instance_id', instanceId);\n    gr.query();\n    if (gr.next()) {\n        var isProd = gr.is_prod;\n        if (isProd) {\n            return true;\n        }\n    }\n    return false;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_e6bdcf4077a20210c2123a91fa5a9985","api_name":"sn_vsc.GetInstanceStatus","mutates_server_data":"false","name":"GetInstanceStatus","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"limit\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"limit end index of the query\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"offset\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"start index of the query\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get multisource saved queries from the scriptable API, using offsets and limit","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e6f6be067778111023651605bc5a996f","sys_updated_by":"admin","sys_created_on":"2022-07-21 17:59:41","sys_name":"MS get queries","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n\tvar offset = input.offset;\n\tif (!offset) {\n\t\toffset = 0;\n\t}\n\tvar limit = input.limit;\n\tvar util = new sn_cmdb_ws.MultisourceUtil();\n\tvar results = util.getAndTransformQueries(offset,limit);\n\t\n\treturn results;\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"offset\",\r\n  \"label\": \"offset\",\r\n  \"description\": \"start index of the query\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"Integer\",\r\n  \"mandatory\": false\r\n},\r\n {\r\n  \"name\": \"limit\",\r\n  \"label\": \"limit\",\r\n  \"description\": \"limit end index of the query\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"Integer\",\r\n  \"mandatory\": false\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_e6f6be067778111023651605bc5a996f","api_name":"sn_cmdb_ws.MS get queries","mutates_server_data":"false","name":"MS get queries","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Input Args\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Input args for backend java function\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-14 19:46:34","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e72d967a43f421101f401daa5ab8f2f3","sys_updated_by":"admin","sys_created_on":"2023-02-07 19:22:59","sys_name":"HermesTestStatus","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n\tvar output = {};\n\tvar service = input.args;\n\t// gs.log();\n\tvar hd = new HermesDiagnostics();\n\toutput = JSON.parse(hd.getTestMessageForService(service));\n\treturn output;\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"args\",\r\n        \"label\": \"Input Args\",\r\n        \"description\": \"Input args for backend java function\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"json\",\r\n        \"valueType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/03d4abbf04312210559073c06a02f7f9","value":"03d4abbf04312210559073c06a02f7f9"},"sys_update_name":"sys_ux_data_broker_transform_e72d967a43f421101f401daa5ab8f2f3","api_name":"global.HermesTestStatus","mutates_server_data":"false","name":"HermesTestStatus","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-11-13 08:13:16","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e73fdd729f2e4210dcf52e5af90a1c1a","sys_updated_by":"admin","sys_created_on":"2024-06-06 07:04:23","sys_name":"Write With Now Assist Application Usage","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"65","sys_tags":"","script":"function transform() {\n    var wwwna_application_enabled = [];\n    var wwwna_application_available = [];\n\n    try {\n        var util = new sn_nowassist_admin.NowAdminAssistUtil();\n        var wwnaSkills = util.wwnaSkills();\n\n        wwnaSkills.forEach((wwnaSkill) => {\n            var skillFamily = wwnaSkill.skillFamily;\n            var skillConfigId = wwnaSkill.skillConfigId;\n            var workflow = wwnaSkill.workflow;\n            var product = wwnaSkill.product;\n            var feature = wwnaSkill.feature;\n            var skillDetails = wwnaSkill.skillDetails;\n            var skillName = wwnaSkill.skillName;\n            var featureId = wwnaSkill.featureId;\n            var status = wwnaSkill.status;\n\n            var skillNavigationURL = \"now/now-assist-admin/skills/\" + featureId;\n            var skillConfigNavigationURL = \"now/now-assist-admin/skill-guided-setup/\" + skillConfigId;\n\n            var rowPayload = {\n                \"key\": skillConfigId,\n                \"cells\": {\n                    \"product\": {\n                        \"value\": product\n                    },\n                    \"workflow\": {\n                        \"value\": workflow\n                    },\n                    \"feature\": {\n                        \"value\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", feature)\n                    },\n                    \"skill\": {\n                        \"value\": skillName\n                    },\n                    \"status\": {\n                        \"componentProps\": {\n                            \"color\": skillDetails['colour'],\n                            \"label\": skillDetails['label'],\n                            \"variant\": \"tertiary\",\n                            \"icon\": \"circle-fill\"\n                        }\n                    },\n                    \"action\": {\n                        \"componentProps\": {\n                            \"label\": (status === \"true\" || status === \"1\") ? sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Manage\") : sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Activate skill\"),\n                            \"href\": (status === \"true\" || status === \"1\") ? skillConfigNavigationURL : skillNavigationURL,\n                            \"opens-window\": false\n                        }\n                    }\n                }\n            };\n\n            if (status === \"true\" || status === \"1\") {\n                if (!wwwna_application_enabled.some(item => item.key === skillConfigId)) {\n                    wwwna_application_enabled.push(rowPayload);\n                }\n            } else {\n                if (!wwwna_application_available.some(item => item.key === skillConfigId)) {\n                    wwwna_application_available.push(rowPayload);\n                }\n            }\n        });\n\n\t\tvar actionColumn =   {\n\t\t\t\"cellEditingDisabled\": true,\n\t\t\t\"componentTag\": \"now-text-link\",\n\t\t\t\"key\": \"action\",\n\t\t\t\"label\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Action\"),\n\t\t\t\"type\": \"custom\"\n\t\t}\n\n        var columnDefinitions = {\n\n            \"columns\": [{\n                    \"cellEditingDisabled\": true,\n                    \"key\": \"product\",\n                    \"label\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Product name\"),\n                    \"type\": \"string\"\n                },\n                {\n                    \"cellEditingDisabled\": true,\n                    \"key\": \"workflow\",\n                    \"label\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Product workflow\"),\n                    \"type\": \"string\"\n                },\n                {\n                    \"cellEditingDisabled\": true,\n                    \"key\": \"feature\",\n                    \"label\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Used in\"),\n                    \"type\": \"string\"\n                },\n                {\n                    \"cellEditingDisabled\": true,\n                    \"key\": \"skill\",\n                    \"label\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Uses Now Assist skill\"),\n                    \"type\": \"string\"\n                },\n                {\n                    \"cellEditingDisabled\": true,\n                    \"componentTag\": \"now-highlighted-value\",\n                    \"key\": \"status\",\n                    \"label\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Skill status\"),\n                    \"type\": \"custom\"\n                }\n            ]\n        }\n\n\t\t!util.isNowAssistAdminUser() && (columnDefinitions.columns.push(actionColumn));\n\n        return {\n\t\t\tcolumnDefinitions : columnDefinitions,\n            availableWWNASkills: wwwna_application_available,\n            enabledWWNASkills: wwwna_application_enabled,\n            wwwnaEnabled: (wwwna_application_available.length > 0 || wwwna_application_enabled.length > 0) ? true : false\n        };\n    } catch (error) {\n        gs.error(\"Failed to get WWNA configured skills\" + error.toString());\n    }\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_e73fdd729f2e4210dcf52e5af90a1c1a","api_name":"sn_nowassist_admin.Write With Now Assist Application Usage","mutates_server_data":"false","name":"Write With Now Assist Application Usage","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[{\"message\":\"EVAM Broker\",\"comment\":\"\"},{\"message\":\"Graphql Query Output\",\"comment\":\"\"}]","batch_exclude":"false","description":"Used to transform EVAM data to fit design of unified nav data row cards.","sys_updated_on":"2022-07-11 16:48:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e76c9b781b213010d46eea48624bcb30","sys_updated_by":"system","sys_created_on":"2021-07-22 13:04:47","sys_name":"Data row evam broker - My Requests","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/ead9fb5f8b27a051aa71b35163745b82","value":"ead9fb5f8b27a051aa71b35163745b82"},"sys_created_by":"system","sys_mod_count":"10","sys_tags":"","script":"function transform(input) {\n\tfor(var i = 0; i < input.evambroker.items.length; i++){\n\t\tvar model = input.evambroker.items[i].propValues;\n\t\tvar currDate = new GlideDateTime();\n\t\tvar dueDate = new GlideDateTime();\n\t\tvar price = model.model.price;\n\t\t\n\t\tvar noValueMessage = gs.getMessage(\"N/A\");\n\t\tvar buttonLabel = model.titleLabel;\n\t\tvar detailValueOne = model.detailValueOne || noValueMessage;\n\t\tvar detailValueTwo = model.detailValueTwo || noValueMessage;\n\n\t\tif (model.highlightedHeaderLabel) {\n\t\t\tif (model.detailLabelOne && model.detailLabelTwo) \n\t\t\t\tbuttonLabel = gs.getMessage(\n\t\t\t\t\t\"{0}, {1}, {2}: {3}, {4}: {5}\",\n\t\t\t\t\t[\n\t\t\t\t\t\tmodel.titleLabel,\n\t\t\t\t\t\tmodel.highlightedHeaderLabel,\n\t\t\t\t\t\tmodel.detailLabelOne,\n\t\t\t\t\t\tdetailValueOne,\n\t\t\t\t\t\tmodel.detailLabelTwo,\n\t\t\t\t\t\tdetailValueTwo\n\t\t\t\t\t]\n\t\t\t\t);\n\t\t\telse if (model.detailLabelOne)\n\t\t\t\tbuttonLabel = gs.getMessage(\n\t\t\t\t\t\"{0}, {1}, {2}: {3}\",\n\t\t\t\t\t[\n\t\t\t\t\t\tmodel.titleLabel,\n\t\t\t\t\t\tmodel.highlightedHeaderLabel,\n\t\t\t\t\t\tmodel.detailLabelOne,\n\t\t\t\t\t\tdetailValueOne\n\t\t\t\t\t]\n\t\t\t\t);\n\t\t\telse if (model.detailLabelTwo)\n\t\t\t\tbuttonLabel = gs.getMessage(\n\t\t\t\t\t\"{0}, {1}, {2}: {3}\",\n\t\t\t\t\t[\n\t\t\t\t\t\tmodel.titleLabel,\n\t\t\t\t\t\tmodel.highlightedHeaderLabel,\n\t\t\t\t\t\tmodel.detailLabelTwo,\n\t\t\t\t\t\tdetailValueTwo\n\t\t\t\t\t]\n\t\t\t\t);\n\t\t\telse\n\t\t\t\tbuttonLabel = gs.getMessage(\n\t\t\t\t\t\"{0}, {1}\",\n\t\t\t\t\t[\n\t\t\t\t\t\tmodel.titleLabel,\n\t\t\t\t\t\tmodel.highlightedHeaderLabel\n\t\t\t\t\t]\n\t\t\t\t);\n\t\t} else if (model.detailLabelOne && model.detailLabelTwo)\n\t\t\tbuttonLabel = gs.getMessage(\n\t\t\t\t\"{0}, {1}: {2}, {3}: {4}\",\n\t\t\t\t[\n\t\t\t\t\tmodel.titleLabel,\n\t\t\t\t\tmodel.detailLabelOne,\n\t\t\t\t\tdetailValueOne,\n\t\t\t\t\tmodel.detailLabelTwo,\n\t\t\t\t\tdetailValueTwo\n\t\t\t\t]\n\t\t\t);\n\t\telse if (model.detailLabelOne)\n\t\t\tbuttonLabel = gs.getMessage(\n\t\t\t\t\"{0}, {1}: {2}\",\n\t\t\t\t[\n\t\t\t\t\tmodel.titleLabel,\n\t\t\t\t\tmodel.detailLabelOne,\n\t\t\t\t\tdetailValueOne\n\t\t\t\t]\n\t\t\t);\n\t\telse if (model.detailLabelTwo)\n\t\t\tbuttonLabel = gs.getMessage(\n\t\t\t\t\"{0}, {1}: {2}\",\n\t\t\t\t[\n\t\t\t\t\tmodel.titleLabel,\n\t\t\t\t\tmodel.detailLabelTwo,\n\t\t\t\t\tdetailValueTwo\n\t\t\t\t]\n\t\t\t);\n\t\t\n\t\tmodel.buttonLabel = buttonLabel;\n\n\t\tdueDate.setValue(model.model.due_date);\n\t\tvar dueDateValue = dueDate.getValue();\n\t\tif(model.model.table == \"sc_req_item\"){\n\t\t\tif(model.model.due_date != \"\"){\n\t\t\t\tmodel.highlightedHeaderLabel = gs.getMessage(\"Completion date: {0}\", model.model.due_date);\n\t\t\t\tif (model.model.due_date.includes('ago')) { \n\t\t\t\t\tmodel.highlightedHeaderBkgColor = \"critical\";\n\t\t\t\t} else if (dueDate.isValid() && currDate.getDisplayValue() > dueDate.getDisplayValue()){\n\t\t\t\t\tmodel.highlightedHeaderBkgColor = \"critical\";\n\t\t\t\t} \n\t\t\t}\n\t\t\tif(model.model.recurring_frequency != null)\n\t\t\t\tmodel.subtitle = model.subtitle + \" + \" + model.model.recurring_price + \" \" + model.model.recurring_frequency;\n\t\t\tif(price && price.substring(1) == \"0.00\" && model.model.recurring_frequency == null )\n\t\t\t\tmodel.subtitle = \" \";\n\t\t} else{\n\t\t\tif(model.model.due_date != \"\"){\n\t\t\t\tmodel.highlightedHeaderLabel = gs.getMessage(\"Completion date: {0}\", model.model.due_date);\n\t\t\t\tif (model.model.due_date.includes('ago')) { \n\t\t\t\t\tmodel.highlightedHeaderBkgColor = \"critical\";\n\t\t\t\t} else if (dueDate.isValid() && currDate.getDisplayValue() > dueDate.getDisplayValue()){\n\t\t\t\t\tmodel.highlightedHeaderBkgColor = \"critical\";\n\t\t\t\t} \n\t\t\t}\n\t\t}\n\t}\n\treturn input;\n}","acl_failure_result":"","props":"[\n  {\n    \"name\": \"evambroker\",\n    \"label\": \"EVAM Broker\",\n    \"fieldType\": \"json\",\n    \"valueType\": \"object\",\n    \"readOnly\": false,\n    \"mandatory\": true,\n    \"description\": \"Graphql Query Output\"\n  }\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ead9fb5f8b27a051aa71b35163745b82","value":"ead9fb5f8b27a051aa71b35163745b82"},"sys_update_name":"sys_ux_data_broker_transform_e76c9b781b213010d46eea48624bcb30","api_name":"polaris_app_shell.Data row evam broker - My Requests","mutates_server_data":"false","name":"Data row evam broker - My Requests","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-07-31 21:50:57","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e77d7e5087618110a4a2c077f6cb0bbc","sys_updated_by":"admin","sys_created_on":"2022-02-04 17:46:01","sys_name":"Get Template Meta Data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n    var output = {\n        templateRouteId: '',\n        templateMacroponentId: '',\n        templateMacroponentConfig: ''\n    };\n\n    var pageGr = new GlideRecord('sn_ace_page');\n    if (pageGr.get(input.templateId)) {\n        output.templateRouteId = pageGr.route.toString();\n    }\n\n    var screenGr = new GlideRecord('sys_ux_screen');\n    screenGr.addQuery('screen_type', pageGr.route.screen_type.toString());\n    screenGr.query();\n    if (screenGr.next()) {\n        output.templateMacroponentId = screenGr.macroponent.toString();\n        output.templateMacroponentConfig = screenGr.macroponent_config.toString();\n    }\n    return output;\n}","acl_failure_result":"","props":"[{\n\t\"name\": \"templateId\",\n\t\"label\": \"Template Id\",\n\t\"description\": \"Template Id\",\n\t\"readOnly\": false,\n\t\"fieldType\": \"string\",\n\t\"mandatory\": true,\n\t\"defaultValue\": \"\"\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_e77d7e5087618110a4a2c077f6cb0bbc","api_name":"sn_ace.Get Template Meta Data","mutates_server_data":"false","name":"Get Template Meta Data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Data broker used for querying saved filters for the SOW Team management page","sys_updated_on":"2023-11-07 10:55:29","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e7c22622eb9ef510ea6e4ee5b55228c9","sys_updated_by":"admin","sys_created_on":"2023-11-07 10:53:55","sys_name":"SOW Team management - Lookup Filters","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\treturn new sn_sow.SOWTeamManagement().getFilters();\n}","acl_failure_result":"{\r\n   \"error\": true,   \r\n   \"message\":\"User does not have required ACL to perform this action.\"\r\n}","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sys_ux_data_broker_transform_e7c22622eb9ef510ea6e4ee5b55228c9","api_name":"sn_sow.SOW Team management - Lookup Filters","mutates_server_data":"false","name":"SOW Team management - Lookup Filters","output_schema":"[\r\n  {\r\n    \"filterCondition\": \"managerDYNAMIC90d1921e5f510100a9ad2572f2b477fe^ORsys_idINjavascript:gs.getUser().getMyGroups()\",\r\n    \"id\": \"your_teams\",\r\n    \"label\": \"Your teams\",\r\n    \"searchPlaceholder\": \"Search your teams\",\r\n    \"subLabel\": null\r\n  },\r\n  {\r\n    \"filterCondition\": \"typeLIKEc419b12deb412110ea6e4ee5b552282b\",\r\n    \"id\": \"all_srm_teams\",\r\n    \"label\": \"All SRM teams\",\r\n    \"searchPlaceholder\": \"Search all SRM teams \",\r\n    \"subLabel\": \"Lists all the teams on Service Reliability Management (SRM). Your ability to take actions in each team will depend on permissions for that team.\"\r\n  },\r\n  {\r\n    \"filterCondition\": null,\r\n    \"id\": \"all_teams\",\r\n    \"label\": \"All teams\",\r\n    \"searchPlaceholder\": \"Search all teams\",\r\n    \"subLabel\": \"Lists all the teams you have access to view. Your ability to take actions in each team will depend on permissions for that team.\"\r\n  }\r\n]","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Filter\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetches list headers as per the table name","sys_updated_on":"2023-03-21 13:52:49","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e836abb3eb692110da1861c59c522896","sys_updated_by":"admin","sys_created_on":"2023-03-20 10:08:42","sys_name":"Clone Get List Header","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/31774a2953839110a6f8ddeeff7b12cb","value":"31774a2953839110a6f8ddeeff7b12cb"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    var tableName = input.table && input.table.trim();\n\tvar filter = input.filter && input.filter.trim();\n    if (!tableName) return {};\n\treturn new sn_instance_clone.AdminCloneUtil().getCloneProfileDefinitionDetails(tableName,filter);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"table\",\r\n    \"label\": \"Table name\",\r\n    \"description\": \"Table name\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n {\r\n    \"name\": \"filter\",\r\n    \"label\": \"Filter\",\r\n    \"description\": \"Filter\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/31774a2953839110a6f8ddeeff7b12cb","value":"31774a2953839110a6f8ddeeff7b12cb"},"sys_update_name":"sys_ux_data_broker_transform_e836abb3eb692110da1861c59c522896","api_name":"sn_instance_clone.Clone Get List Header","mutates_server_data":"false","name":"Clone Get List Header","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"List of Plugin IDs, comma separated, selected item defaulted to first one\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Plugin IDs\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Transform script that checks if each of the plugins in a list of comma separated plugins, is active.\nThe first active plugin, when going from left to right, defines the default selected item in a Select component.","sys_updated_on":"2022-04-22 10:56:07","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e88c279ac4a23010fa9bc026c5e9f893","sys_updated_by":"admin","sys_created_on":"2021-09-14 23:09:51","sys_name":"Domain Plugins Check","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"maint","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n\tvar items = [];\n\tvar selectedItems = [];\n\tvar result = result = {\n\t\t\"items\": items,\n\t\t\"selectedItem\": selectedItems\n\t};\n\tvar plugins = {};\n\tplugins['com.snc.pa.domain_support'] = {\"label\": 'DomainSupport',\"id\": 'domain_support'};\n\tplugins['com.glide.domain.msp_extensions.installer'] = {\"label\": 'DomainExtension',\"id\": 'domain_extension'};\n\tplugins['com.sn_pa_domain_filter'] = {\"label\": 'DomainFilter',\"id\": 'domain_filter'};\n\t\n\tvar element = (input.pluginIds || \"\").trim();\n\n\tif (!gs.nil(element)) {\n\t\tvar inputItems = [];\n\t\tinputItems = input.pluginIds.split(',');\n\n\t\tfor (var i = 0; i < inputItems.length; i++) {\n\t\t\tvar id = inputItems[i];\n\t\t\tif (!gs.nil(id)){\n\t\t\t\tvar active = GlidePluginManager.isActive(id);\n\t\t\t\tif (active){\n\t\t\t\t\tif (!gs.nil(plugins[id])){\n\t\t\t\t\t\titems.push(plugins[id]);\n\t\t\t\t\t\tif (selectedItems.length == 0) {\n\t\t\t\t\t\t\tselectedItems.push(plugins[id]['id']);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n}","acl_failure_result":"{\n    \"message\":\"User does not have required ACL to perform this action.\"\n}","props":"[\n{\n        \"name\": \"pluginIds\",\n        \"label\": \"Plugin IDs\",\n        \"description\": \"List of Plugin IDs, comma separated, selected item defaulted to first one\",\n        \"readOnly\": false,\n        \"fieldType\": \"string\",\n        \"mandatory\": true,\n        \"defaultValue\": \"\"\n }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_e88c279ac4a23010fa9bc026c5e9f893","api_name":"sn_itam_workspace.Domain Plugins Check","mutates_server_data":"false","name":"Domain Plugins Check","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[{\"message\":\"Interaction Sys ID\",\"comment\":\"\"}]","batch_exclude":"false","description":"","sys_updated_on":"2021-03-25 20:00:00","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e8cd12f353362010149eddeeff7b1222","sys_updated_by":"admin","sys_created_on":"2021-03-16 23:35:29","sys_name":"InteractionWrapUpTimer","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4ebff608c8d5f6968c0b7a713456a51a","value":"4ebff608c8d5f6968c0b7a713456a51a"},"sys_created_by":"admin","sys_mod_count":"67","sys_tags":"","script":"function transform(input) {\n    var returnObject = {};\n\n    var interactionSysID = input.interactionSysID;\n    var interaction = new GlideRecord('interaction');\n    interaction.get(interactionSysID);\n\n    var state = interaction.getValue('state');\n    var assignedTo = interaction.getValue('assigned_to');\n    // The timer only shows up in state wrap up, when the login user is the assigned user.\n    if (state === 'wrap_up' && gs.getUserID() === assignedTo) {\n\n        var util = new global.WrapUpInteractionUtil();\n        var isShowWrapUpTimerEnabled = util.isShowWrapUpTimerEnabled(interaction);\n        if (!isShowWrapUpTimerEnabled)\n            return returnObject;\n\n        var wrapUpDuration = util.getWrapUpDuration(interaction);\n        var stateChangedOn = interaction.getValue('state_changed_on');\n        var end = new GlideDateTime(stateChangedOn).getNumericValue() + wrapUpDuration * 1000;\n        var now = new GlideDateTime().getNumericValue();\n        var timeLeftOnMillisecond = end - now;\n\n        if (timeLeftOnMillisecond <= 0)\n            return returnObject;\n\n        returnObject[\"timeLeftOnMillisecond\"] = timeLeftOnMillisecond;\n        returnObject[\"wrapUpDuration\"] = wrapUpDuration;\n    }\n    return returnObject;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"interactionSysID\",\r\n  \"label\": \"Interaction Sys ID\",\r\n  \"description\": \"Interaction Sys ID\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4ebff608c8d5f6968c0b7a713456a51a","value":"4ebff608c8d5f6968c0b7a713456a51a"},"sys_update_name":"sys_ux_data_broker_transform_e8cd12f353362010149eddeeff7b1222","api_name":"global.InteractionWrapUpTimer","mutates_server_data":"false","name":"InteractionWrapUpTimer","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Attempt Data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Deleted Attempts\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Deleted attempts array\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Preference SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User preference sys_id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-19 08:36:14","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e8e0d21093f621106dabfa4e1dba103f","sys_updated_by":"admin","sys_created_on":"2023-05-10 10:14:11","sys_name":"Save user contact preferences","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\treturn new sn_uib_on_call.OnCallContactPref().saveUserContactAttempts(input.attemptData, input.preferenceSysId, input.deletedAttempts);\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"preferenceSysId\",\n    \"label\": \"Preference SysId\",\n    \"description\": \"User preference sys_id\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n},\n{\n    \"name\": \"attemptData\",\n    \"label\": \"Attempt Data\",\n    \"description\": \"Attempt Data\",\n    \"fieldType\": \"json\",\n    \"valueType\": \"object\",\n    \"readOnly\": false,\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  },\n{\n    \"name\": \"deletedAttempts\",\n    \"label\": \"Deleted Attempts\",\n    \"description\": \"Deleted attempts array\",\n    \"fieldType\": \"json\",\n    \"valueType\": \"object\",\n    \"readOnly\": false,\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_e8e0d21093f621106dabfa4e1dba103f","api_name":"sn_uib_on_call.Save user contact preferences","mutates_server_data":"false","name":"Save user contact preferences","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-18 07:39:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e968b58153193110fdadddeeff7b12b7","sys_updated_by":"admin","sys_created_on":"2023-09-13 22:54:58","sys_name":"Get assignment groups with DM users","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    var wrapperFn = function() {\n        var proxy = new sn_cmdb_ws.CMDBWsDMPolicyUIProxy();\n        var groups = proxy.getDataManagerUserGroups();\n        var options = [];\n        for (var i = 0; i < groups.length; i++) {\n            options.push({\n                \"id\": groups[i].value,\n                \"label\": groups[i].name\n            });\n        }\n        return options;\n    };\n\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Get assignment groups with DM users\", wrapperFn);\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_e968b58153193110fdadddeeff7b12b7","api_name":"sn_cmdb_ws.Get assignment groups with DM users","mutates_server_data":"false","name":"Get assignment groups with DM users","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Application id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Current route of the application\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Fetch Static Routes\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Fields\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Params\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Previous breadcrumb item route\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Previous selected content route info\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Route\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected L1 toolbar\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Selected toolbar button configuration\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys_Id of the application\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Breadcrumb items provider","sys_updated_on":"2022-09-19 14:22:43","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e995e9f0c3722010ea04a5a1d840ddea","sys_updated_by":"admin","sys_created_on":"2021-03-07 11:35:05","sys_name":"Breadcrumbs Items provider","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4524dc30c331101080d6d3658940dd22","value":"4524dc30c331101080d6d3658940dd22"},"sys_created_by":"admin","sys_mod_count":"34","sys_tags":"","script":"function transform(input) {\n\treturn new sn_app_shell_aw.BreadcrumbItemsProvider().process(input);\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"appId\",\r\n        \"label\": \"Application id\",\r\n        \"description\": \"sys_Id of the application\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"selectedToolbarItem\",\r\n        \"label\": \"Selected L1 toolbar\",\r\n        \"description\": \"Selected toolbar button configuration\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"route\",\r\n        \"label\": \"Route\",\r\n        \"description\": \"Current route of the application\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"fields\",\r\n        \"label\": \"Fields\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"params\",\r\n        \"label\": \"Params\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"fetchStaticRoutes\",\r\n        \"label\": \"Fetch Static Routes\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": true\r\n    },\r\n    {\r\n        \"name\": \"prevBreadcrumbRoute\",\r\n        \"label\": \"Previous breadcrumb item route\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n    },\r\n    {\r\n        \"name\": \"prevSelectedContent\",\r\n        \"label\": \"Previous selected content route info\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4524dc30c331101080d6d3658940dd22","value":"4524dc30c331101080d6d3658940dd22"},"sys_update_name":"sys_ux_data_broker_transform_e995e9f0c3722010ea04a5a1d840ddea","api_name":"sn_app_shell_aw.Breadcrumbs Items provider","mutates_server_data":"false","name":"Breadcrumbs Items provider","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2021-10-12 07:32:47","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"e9ad84d50be1301021fd092db4673aaa","sys_updated_by":"admin","sys_created_on":"2021-07-23 11:35:24","sys_name":"Asset types","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"16","sys_tags":"","script":"function transform(input) {\n\tvar tables =[gs.getMessage('Hardware'),gs.getMessage('Consumable'),gs.getMessage('License'),gs.getMessage('Facility')];\n\tvar results =[];\n\tif(AssetWorkspaceUtil.isHAMActive())\n\t\t{\n\t\t\ttables.push(gs.getMessage('Bundle'));\n\t\t}\n\tif(AssetWorkspaceUtil.isSamActive()){\n\t\ttables = tables.filter(function(item) {\n\t\t\treturn item !== gs.getMessage('License');\n\t\t});\n\t}\n  if (global.AssetUtils.IS_ITAM_COMMON_ACTIVE && sn_itam_common.ITAMCommonPalletsUtil) {\n\t\ttables.push(gs.getMessage('Pallet'));\n\t}\n\tfor(var i = 0;i<tables.length;i++){\n\t\tvar data = {};\n\t\tdata['id'] = tables[i].toLowerCase();\n\t\tdata['label'] = tables[i];\n\t\tdata['checked'] = false;\n\t\tresults.push(data);\n\t}\n\tresults[0].checked = true;\n\t\n  return results;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_e9ad84d50be1301021fd092db4673aaa","api_name":"sn_itam_workspace.Asset types","mutates_server_data":"false","name":"Asset types","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Checks whether request translation mode is not enabled and user has required role to see translation message","sys_updated_on":"2022-10-19 21:25:45","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ea6065fc535211106a42ddeeff7b1245","sys_updated_by":"admin","sys_created_on":"2022-10-19 21:25:45","sys_name":"Check request translation mode is not enabled","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/e92e72c9b7021010e54deb56ee11a9bf","value":"e92e72c9b7021010e54deb56ee11a9bf"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    return GlidePluginManager.isActive(\"com.glide.localization_framework\")? new global.LFCatalogBuilderUtils().canShowTranslationMessagePostSubmit(): false;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e92e72c9b7021010e54deb56ee11a9bf","value":"e92e72c9b7021010e54deb56ee11a9bf"},"sys_update_name":"sys_ux_data_broker_transform_ea6065fc535211106a42ddeeff7b1245","api_name":"sn_catalog_builder.Check request translation mode is not enabled","mutates_server_data":"false","name":"Check request translation mode is not enabled","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Access analyzer request object\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Debug log API response\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Object containing all data of the request\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Request sys_id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Response payload received from debug log API\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sys_id of the existing Access Analyzer Request, used for Reanalyze action\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-10-31 08:13:52","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ea812a8177822110eba8fe21fe5a9990","sys_updated_by":"admin","sys_created_on":"2023-04-05 12:53:30","sys_name":"Save request and debug logs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n    var aaUtil = new sn_access_analyzer.AccessAnalyzerUtil();\n    var requestGR;\n    if (input.requestId != null) {\n        requestGR = new GlideRecord(\"sn_access_analyzer_request\");\n        requestGR.addQuery(\"sys_id\", input.requestId);\n        requestGR.query();\n        if (requestGR.next()) {\n            requestGR.setValue(\"last_run\", new GlideDateTime());\n            requestGR.update();\n            aaUtil.saveResult(input.debugLogAPIResponse, requestGR);\n            return {\n                \"requestId\": input.requestId\n            };\n        }\n    } else {\n        input.request.last_run = new GlideDateTime();\n        requestGR = aaUtil.saveRequest(input.request);\n        var entityName = new sn_access_analyzer.AccessAnalyzeExecutor().getEntityName(requestGR);\n        requestGR.setValue(\"analyzed_by\", requestGR.analyze_by + \": \" + entityName);\n        requestGR.update();\n        aaUtil.saveResult(input.debugLogAPIResponse, requestGR);\n        return {\n            \"requestId\": requestGR.getUniqueValue()\n        };\n    }\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"request\",\r\n    \"label\": \"Access analyzer request object\",\r\n    \"description\": \"Object containing all data of the request\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": false\r\n  },\r\n  {\r\n    \"name\": \"debugLogAPIResponse\",\r\n    \"label\": \"Debug log API response\",\r\n    \"description\": \"Response payload received from debug log API\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true\r\n  },\r\n  {\r\n    \"name\": \"requestId\",\r\n    \"label\": \"Request sys_id\",\r\n    \"description\": \"sys_id of the existing Access Analyzer Request, used for Reanalyze action\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_update_name":"sys_ux_data_broker_transform_ea812a8177822110eba8fe21fe5a9990","api_name":"sn_access_analyzer.Save request and debug logs","mutates_server_data":"true","name":"Save request and debug logs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Advanced Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Associated Record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Associated Record Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Associated Record Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Associated Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Experience Properties\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Form Fields Required\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Properties for the Activity UI Macroponent content\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Transforms Activity UI Properties into Playbook Experience Form Connected Properties","sys_updated_on":"2021-11-04 21:11:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"eaedf8370716301051ff3342cfd30016","sys_updated_by":"admin","sys_created_on":"2021-09-06 16:02:12","sys_name":"Playbook Experience Form Properties","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n\tvar experienceProperties = input.experienceProperties || {};\n\n\tvar form_view = experienceProperties.form_view || {};\n\tvar template_fields = experienceProperties.template_fields || {};\n\tvar form_fields = experienceProperties.form_fields || { value: \"\" };\n\n\tvar advanced = input.advanced || {};\n\tvar formApi = advanced.formApi || {};\n\n\tvar formFieldsRequired = advanced.inUIBuilder ? true : input.formFieldsRequired === true;\n\n\treturn {\n\t\ttable: input.associatedTable,\n\t\tsysId: input.associatedRecord,\n\t\tforcedViewName: form_view.value || \"\",\n\t\tquery: template_fields.value || \"\",\n\t\tfieldInclusionList: form_fields.value && form_fields.value.length\n\t\t\t? form_fields.value.split(\",\")\n\t\t\t: [],\n\t\tshowFieldList: !formFieldsRequired,\n\t\tlegacyWorkspaceId: advanced.workspaceConfigId,\n\t\tvalidateRequested: formApi.requestValidation,\n\t\trefreshRequested: formApi.requestReload,\n\t\tsubmitAction: formApi.requestSubmitAction,\n\t\tuserSession: advanced.userSession\n\t};\n}\n","acl_failure_result":"","props":"[\n\t{\n\t\t\"name\": \"associatedTable\",\n\t\t\"label\": \"Associated Table\",\n\t\t\"description\": \"Associated Record Table\",\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"associatedRecord\",\n\t\t\"label\": \"Associated Record\",\n\t\t\"description\": \"Associated Record Sys Id\",\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"experienceProperties\",\n\t\t\"label\": \"Experience Properties\",\n\t\t\"description\": \"Properties for the Activity UI Macroponent content\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"json\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"advanced\",\n\t\t\"label\": \"Advanced Properties\",\n\t\t\"description\": \"Advanced Properties\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"json\",\n\t\t\"mandatory\": true\n\t},\n\t{\n\t\t\"name\": \"formFieldsRequired\",\n\t\t\"label\": \"Form Fields Required\",\n\t\t\"description\": \"Form Fields Required\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"boolean\",\n\t\t\"mandatory\": true\n\t}\n]\n","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c524e101b6e0010affd0e55cc4bcbed","value":"8c524e101b6e0010affd0e55cc4bcbed"},"sys_update_name":"sys_ux_data_broker_transform_eaedf8370716301051ff3342cfd30016","api_name":"sn_playbook_exp.Playbook Experience Form Properties","mutates_server_data":"false","name":"Playbook Experience Form Properties","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-28 16:32:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"eb10117b53c90210abd8ddeeff7b12eb","sys_updated_by":"admin","sys_created_on":"2024-03-26 19:00:11","sys_name":"Pwd Reset Security Token Validator","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\treturn new sn_uib_pwd_reset.PwdResetUXFUtil().getSecurityValidationResult(input.token);\n}","acl_failure_result":"","props":"[{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_eb10117b53c90210abd8ddeeff7b12eb","api_name":"sn_uib_pwd_reset.Pwd Reset Security Token Validator","mutates_server_data":"false","name":"Pwd Reset Security Token Validator","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-27 11:29:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ebd9a1cb7f481210b23326d6ac866508","sys_updated_by":"admin","sys_created_on":"2024-08-20 16:04:39","sys_name":"Fetch Filter Array","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"29","sys_tags":"","script":"function transform(input) {\n    try {\n        var nowAdminAssistUtil = new sn_nowassist_admin.NowAdminAssistUtil();\n        var nowAssistGuardianFilterUtil = new sn_nowassist_admin.NowAssistGuardianFilterUtil();\n        var rowDetails = [];\n        var columnDefinitions = {};\n        var inactiveFilters = [];\n        var genAIFilters = [];\n        genAIFilters = nowAssistGuardianFilterUtil.getGenAIFilters();\n        var activeGenAIFiltersCount = 0;\n\n        for (let i = 0; i < genAIFilters.length; i++) {\n            if (genAIFilters[i].isActive) {\n                activeGenAIFiltersCount = activeGenAIFiltersCount + 1;\n                var status = genAIFilters[i].isActive;\n                var name = genAIFilters[i].name;\n\t\t\t\tvar product = genAIFilters[i].product;\n                var priorityOrder = genAIFilters[i].filterGroupOrder;\n                var filterCategories = genAIFilters[i].filterGroup;\n                var filterId = genAIFilters[i].filterId;\n                var lastUpdatedOn = genAIFilters[i].lastUpdatedOn;\n\n                var rowPayload = {\n                    \"key\": filterId,\n                    \"cells\": {\n                        \"status\": {\n                            \"componentProps\": {\n                                \"color\": 'positive',\n                                \"label\": \"Active\",\n                                \"variant\": \"tertiary\",\n                                \"icon\": \"presence-fill\"\n                            }\n                        },\n                        \"name\": {\n                            \"value\": name,\n                        },\n\t\t\t\t\t\t\"product\":{\n\t\t\t\t\t\t\t\"value\": product,\n\t\t\t\t\t\t},\n                        \"priorityOrder\": {\n                            \"value\": priorityOrder,\n                        },\n                        \"filterCategories\": {\n                            \"value\": filterCategories,\n                        },\n                        \"lastUpdatedOn\": {\n                            \"value\": lastUpdatedOn\n                        }\n                    }\n                };\n\n                rowDetails.push(rowPayload);\n\n            } else {\n                inactiveFilters.push(genAIFilters[i]);\n            }\n        }\n\n\n        columnDefinitions = {\n\n            \"columns\": [{\n                    \"cellEditingDisabled\": true,\n                    \"key\": \"status\",\n                    \"componentTag\": \"now-highlighted-value\",\n                    \"label\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Status\"),\n                    \"type\": \"custom\"\n                }, {\n                    \"cellEditingDisabled\": true,\n                    \"key\": \"name\",\n                    \"label\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Name\"),\n                    \"type\": \"string\"\n                },\n\t\t\t\t{\n                    \"cellEditingDisabled\": true,\n                    \"key\": \"product\",\n                    \"label\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Product\"),\n                    \"type\": \"string\"\n                },\n                {\n                    \"cellEditingDisabled\": true,\n                    \"key\": \"priorityOrder\",\n                    \"label\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Priority order\"),\n                    \"type\": \"string\"\n                },\n                {\n                    \"cellEditingDisabled\": true,\n                    \"key\": \"filterCategories\",\n                    \"label\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Filter categories\"),\n                    \"type\": \"string\"\n                },\n                {\n                    \"cellEditingDisabled\": true,\n                    \"key\": \"lastUpdatedOn\",\n                    \"label\": sn_i18n.Message.getMessage(\"sn_nowassist_admin\", \"Last updated on\"),\n                    \"type\": \"date\"\n\n                }\n            ]\n        };\n\n        return {\n            rowPayload: rowDetails,\n            columnDefinitions: columnDefinitions,\n            activeGenAIFiltersCount: activeGenAIFiltersCount,\n            genAIFilters: inactiveFilters\n        };\n    } catch (e) {\n        gs.error(\"Failed fetch  Filter - \" + e.toString());\n        return null;\n    }\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_ebd9a1cb7f481210b23326d6ac866508","api_name":"sn_nowassist_admin.Fetch Filter Array","mutates_server_data":"false","name":"Fetch Filter Array","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ACE Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ACE configured page route\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page Params\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page Route\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page parameters(optional and required)\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to fetch the sections & cards for apps built in Admin Console Framework","sys_updated_on":"2023-11-16 11:45:55","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ec081a2a87ff701027ff97d73cbb3523","sys_updated_by":"admin","sys_created_on":"2021-12-21 09:50:47","sys_name":"ACE Fetch Content Blocks","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"43","sys_tags":"","script":"function transform(input) {\n\n    function getContentBlocksLegacy(appConfigGr) {\n        var appConfig = appConfigGr.getValue('app_config');\n        return new ACEAppBuilderUtilV2().getContentBlocks(input.page_route, input.page_params, appConfig, false, false, false);\n    }\n\n    function getClientContext(pageGR) {\n        try {\n            var clientContext = pageGR.getValue('client_context');\n            if (typeof clientContext == 'string') {\n                clientContext = JSON.parse(clientContext);\n            }\n            return clientContext;\n        } catch (e) {\n            gs.error(\"ACEDesignTimeError: Failed to parse client context: \" + e.toString());\n        }\n    }\n\n    function convertToNormalFormat(customObject) {\n        var jsonObject = {};\n        for (var key in customObject) {\n            if (customObject[key] && customObject[key].type === \"MAP_CONTAINER\") {\n                jsonObject[key] = convertToNormalFormat(customObject[key].container);\n            } else {\n                jsonObject[key] = customObject[key];\n            }\n        }\n        return jsonObject;\n    }\n\n    /**\n     * Fetch content blocks from bundle only if ace version is v2 and the sys_property to disable\n     * bundle fetch is false.\n     */\n    function shouldFetchContentBlocksFromBundle(pageGr) {\n        return gs.getProperty('ace.disable_page_bundle_fetch.' + input.page_route, false + \"\") == \"false\" &&\n            pageGr.ace_app.version == 'v2';\n    }\n\n    function isApplicationACEV1(appConfigGr, pageGr) {\n        var appVersion = appConfigGr.getValue('version');\n        var pageVersion = pageGr.getValue('version');\n\n        if (pageVersion && pageVersion.toLowerCase() === 'v2')\n            return false;\n        if (appVersion && appVersion.toLowerCase() === 'v2')\n            return false;\n\n        return true;\n    }\n\n    if (!input || !input.application_id || !input.page_route) return [];\n    var contentBlocks = [];\n    var appConfigGr = new GlideRecord('sn_ace_app_config');\n    if (!appConfigGr.get(input.application_id))\n        return [];\n\n    var pageGr = new GlideRecord('sn_ace_page');\n    if (!pageGr.get(input.page_route))\n        return [];\n\n    //interceptor for legacy v1 application\n    if (isApplicationACEV1(appConfigGr, pageGr)) {\n        var blocks = new ACEAppBuilderUtil().getContentBlocks(input.page_route, input.page_params);\n        blocks.forEach(function(cb) {\n            cb.isRoot = true;\n        });\n        return blocks;\n    }\n\n    var aceAppBuilderUtil = new ACEAppBuilderUtilV2();\n    var aceGlobalUtil = new global.ACEAppBuilderGlobalScopedUtil();\n\tvar blockContext = getClientContext(pageGr);\n\tif (blockContext) {\n\t\tblockContext = convertToNormalFormat(blockContext);\n\t}\n\n    try {\n        var cbPageParams = {\n            'pageParams': input.page_params,\n            'blockcontext': blockContext\n        };\n\n        if (shouldFetchContentBlocksFromBundle(pageGr)) {\n            contentBlocks = aceGlobalUtil.getDecompressedPageBundle(pageGr.getValue('bundle'));\n            aceAppBuilderUtil.processReusableBlocks(contentBlocks, cbPageParams);\n            aceAppBuilderUtil.mergeContentBlockContext(contentBlocks);\n            if (contentBlocks && contentBlocks.length) {\n                contentBlocks = aceAppBuilderUtil.eagerlyEvaluateDataBlocks(contentBlocks, cbPageParams);\n                cbPageParams = aceAppBuilderUtil.addDataBlockParamsToScriptVariables(contentBlocks, cbPageParams);\n                contentBlocks = aceAppBuilderUtil.processCachedContentBlocks(contentBlocks, cbPageParams);\n            } else {\n                contentBlocks = getContentBlocksLegacy(appConfigGr);\n            }\n        } else {\n            contentBlocks = getContentBlocksLegacy(appConfigGr);\n        }\n    } catch (e) {\n        gs.error(\"ACE Fetch Content Blocks: Error in parsing page composition: \" + e.toString());\n        contentBlocks = getContentBlocksLegacy(appConfigGr);\n    }\n\n    contentBlocks.forEach(function(cb) {\n        cb.isRoot = true;\n    });\n    return contentBlocks;\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"application_id\",\n      \"label\": \"Application Id\",\n      \"description\": \"ACE Application Id\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"page_route\",\n      \"label\": \"Page Route\",\n      \"description\": \"ACE configured page route\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"page_params\",\n      \"label\": \"Page Params\",\n      \"description\": \"Page parameters(optional and required)\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": false,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_ec081a2a87ff701027ff97d73cbb3523","api_name":"sn_ace.ACE Fetch Content Blocks","mutates_server_data":"false","name":"ACE Fetch Content Blocks","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Service ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Check if the given Service ID is a class or not","sys_updated_on":"2024-04-09 22:11:03","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ec12c2d0a36902105c01b6ae041e6169","sys_updated_by":"admin","sys_created_on":"2024-04-09 22:11:03","sys_name":"CMDB Health - Check if service is a class","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar gr = new GlideRecord(input.id);\n\treturn gr.isValid();\n}","acl_failure_result":"","props":"[\r\n  {\r\n      \"name\": \"id\",\r\n      \"label\": \"Service ID\",\r\n      \"description\": \"Service ID\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": false\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_ec12c2d0a36902105c01b6ae041e6169","api_name":"sn_cmdb_ws.CMDB Health - Check if service is a class","mutates_server_data":"false","name":"CMDB Health - Check if service is a class","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"CI Admin Console - Translations","sys_updated_on":"2022-10-21 07:34:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ec322d7653a1301033cdddeeff7b1281","sys_updated_by":"admin","sys_created_on":"2021-07-28 09:39:17","sys_name":"CI Admin Console - Translations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n    return {\n        \"on\": gs.getMessage(\"on\"),\n        \"off\": gs.getMessage(\"off\").toLowerCase(),\n        \"activate\": gs.getMessage(\"Activate\"),\n        \"deflection_settings_activate\": gs.getMessage(\"Tracking of deflection metrics in Virtual Agent is enabled\"),\n        \"deflection_settings_deactivate\": gs.getMessage(\"Tracking of deflection metrics in Virtual Agent is disabled\"),\n        \"deflection_pattern_success\": gs.getMessage(\"Deflection Pattern changes saved successfully\"),\n        \"deflection_config_success\": gs.getMessage(\"Deflection Configuration changes saved successfully\"),\n        \"deflection_alert\": gs.getMessage(\"The following mandatory fields are not filled in:\\nName\"),\n        \"chat_settings_success\": gs.getMessage(\"Agent Chat settings saved successfully\"),\n        \"chat_notification_success\": gs.getMessage(\"Chat client notification settings saved successfully\"),\n        \"update_failed\": gs.getMessage(\"Something went wrong while updating the settings, please refresh the page\"),\n        \"virtual_agent\": gs.getMessage(\"Virtual Agent\"),\n        \"nlu\": gs.getMessage(\"Natural Language Understanding (NLU)\"),\n        \"nlu_settings_success\": gs.getMessage(\"NLU settings saved successfully\"),\n        \"upgrade_alert\": gs.getMessage(\"Please upgrade to access all features. Contact your account executive for more information\"),\n        \"mandatory_alert\": gs.getMessage(\"Please fill all the mandatory fields\"),\n        \"icon\": gs.getMessage(\"Icon\"),\n        \"label\": gs.getMessage(\"Label\"),\n        \"type\": gs.getMessage(\"Type\"),\n        \"value\": gs.getMessage(\"Value\"),\n        \"conversation_history_settings\": gs.getMessage(\"Conversation History Settings\"),\n        \"conversation_history_settings_success\": gs.getMessage(\"Conversation history settings saved successfully\")\n    };\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sys_ux_data_broker_transform_ec322d7653a1301033cdddeeff7b1281","api_name":"global.CI Admin Console - Translations","mutates_server_data":"false","name":"CI Admin Console - Translations","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Target table name\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"This Data Broker fetches writable Knowledge Bases along with their associated languages","sys_updated_on":"2024-10-07 07:48:47","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ec40da771bdc52902c5d6240604bcbdf","sys_updated_by":"admin","sys_created_on":"2024-09-04 13:02:23","sys_name":"Fetch Writable Knowledge Base","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    \n\tfunction addIDAndLabelToKnowledgeBases(knowledgeBases){\n\t\tvar kbList = [];\n\t\tknowledgeBases.forEach(function(knowledgeBase){\n\t\t\tkbList.push({\n\t\t\t\tid : knowledgeBase.sysId,\n\t\t\t\tlabel : knowledgeBase.name\n\t\t\t});\n\t\t});\n\t\treturn kbList;\n\t}\n\n\tfunction addIDAndLabelOnKnowledgeBaseToLanguageMap(knowledgeBaseToLanguagesMap){\n\t\tvar kbIDToLanguageMap = {};\n\t\t\n\t\tfor(var kbSysId in knowledgeBaseToLanguagesMap){\n\t\t\tvar languages = knowledgeBaseToLanguagesMap[kbSysId];\n\t\t\tvar kbLanguages = [];\n\t\t\tlanguages.forEach(function(language){\n\t\t\t\tkbLanguages.push({\n\t\t\t\t\tid : language.id,\n\t\t\t\t\tlabel : language.name\n\t\t\t\t});\n\t\t\t});\n\t\t\tkbIDToLanguageMap[kbSysId] = kbLanguages;\n\t\t}\n\n\t\treturn kbIDToLanguageMap;\n\t}\n\t\n\tvar utils = new sn_km_gen_ai.KnowledgeGenAIUtils();\n\tvar canShowLanguagePicker = utils.canShowLanguagePicker();\n\tvar data = utils.getKnowledgeBaseWithLanguage(input.target_table);\n\t\n\tdata['kbList'] = [];\n\tdata['kbIdToLanguageMap'] = {};\n\t\n\tif(canShowLanguagePicker){\n\t\tdata['kbList'] = addIDAndLabelToKnowledgeBases(data['knowledgeBaseList']);\n\t\tdata['kbIdToLanguageMap'] = addIDAndLabelOnKnowledgeBaseToLanguageMap(data['knowledgeBaseToLanguagesMap']);\n\t}\n\n\tdata['canShowLanguagePicker'] = canShowLanguagePicker;\n    return data;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"target_table\",\r\n    \"label\": \"Target table name\",\r\n    \"description\": \"Target table name\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69b1da7e45311410f87746a114805d2d","value":"69b1da7e45311410f87746a114805d2d"},"sys_update_name":"sys_ux_data_broker_transform_ec40da771bdc52902c5d6240604bcbdf","api_name":"sn_km_uib.Fetch Writable Knowledge Base","mutates_server_data":"false","name":"Fetch Writable Knowledge Base","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"User Contact Preference SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User Preference SysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-07 13:52:09","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ec56286287026110de52a64d0ebb3570","sys_updated_by":"admin","sys_created_on":"2023-04-09 19:24:49","sys_name":"Get User Contact Preferences","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var userData = new sn_uib_on_call.OnCallContactPref().getUserPreference(input.userPrefSysId ? input.userPrefSysId : \"\");\n\n\tif (userData.hasOwnProperty('userPreference') && userData.userPreference.length > 1) {\n\t\tvar preferences = userData.userPreference.sort((a, b) => a.userPreferenceDetails.name.display_value.charCodeAt(0) - b.userPreferenceDetails.name.display_value.charCodeAt(0));\n\t\tuserData.userPreference = preferences;\n\t}\n\n\treturn userData;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"userPrefSysId\",\n    \"label\": \"User Preference SysId\",\n    \"description\": \"User Contact Preference SysId\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_ec56286287026110de52a64d0ebb3570","api_name":"sn_uib_on_call.Get User Contact Preferences","mutates_server_data":"false","name":"Get User Contact Preferences","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Users\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-04-04 10:14:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ed88ab804358421016817a372ab8f282","sys_updated_by":"admin","sys_created_on":"2024-02-07 07:39:45","sys_name":"Fetch active users","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n    var rolesUtility = new SDRolesUtility();\n    var usersWithRole = [];\n    for (var x = 0; x < input.users.length; x++) \n        if (input.users[x].inherited == 'false')\n            usersWithRole.push(input.users[x].userId);\n    var usersList = rolesUtility.getActiveUsersList();\n    for (x = 0; x < usersList.length; x++)\n        if (usersWithRole.indexOf(usersList[x].id) > -1)\n            usersList[x].disabled = true;\n    return {\n        usersList: usersList\n    };\n}","acl_failure_result":"","props":"[{\n    \"name\": \"users\",\n    \"label\": \"Users\",\n    \"description\": \"\",\n    \"readOnly\": false,\n    \"fieldType\": \"object\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  }]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_update_name":"sys_ux_data_broker_transform_ed88ab804358421016817a372ab8f282","api_name":"sn_sd.Fetch active users","mutates_server_data":"false","name":"Fetch active users","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"View\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-09-03 09:06:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"edde73dd53093110c690ddeeff7b12d3","sys_updated_by":"admin","sys_created_on":"2023-09-02 17:06:12","sys_name":"Get sow modal data by GenAI","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var constants = {\n        NOW_ASSIST_ITSM_PLUGIN: 'com.sn.itsm.gen.ai'\n    };\n    if (!GlidePluginManager.isActive(constants.NOW_ASSIST_ITSM_PLUGIN))\n        return null;\n    return new sn_itsm_gen_ai.NowAssistItsmGenAIUtils().fetchModalDataByGenAI(input.table, input.sysId, input.view);\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"table\",\r\n    \"label\": \"Table name\",\r\n    \"description\": \"Table name\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"sysId\",\r\n    \"label\": \"Sys Id\",\r\n    \"description\": \"Sys Id\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"view\",\r\n    \"label\": \"View\",\r\n    \"description\": \"View\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sys_ux_data_broker_transform_edde73dd53093110c690ddeeff7b12d3","api_name":"sn_sow_itsm_common.Get sow modal data by GenAI","mutates_server_data":"false","name":"Get sow modal data by GenAI","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Data broker to check of the adaptive authentication plugin is active or not","sys_updated_on":"2022-09-13 10:14:12","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ee5c9b5b77311110f9818d8bbe5a999f","sys_updated_by":"admin","sys_created_on":"2022-09-13 10:09:02","sys_name":"Check Adaptive Authentication plugin","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\treturn GlidePluginManager.isActive(\"com.snc.adaptive_authentication\");\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f2473bbf04b52210559073c06a02f7f3","value":"f2473bbf04b52210559073c06a02f7f3"},"sys_update_name":"sys_ux_data_broker_transform_ee5c9b5b77311110f9818d8bbe5a999f","api_name":"global.Check Adaptive Authentication plugin","mutates_server_data":"false","name":"Check Adaptive Authentication plugin","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Escalation set sys id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-21 21:32:59","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"eec4af5153a231105dd2ddeeff7b128c","sys_updated_by":"admin","sys_created_on":"2023-11-16 05:35:10","sys_name":"Get custom escalation policy details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"24","sys_tags":"","script":"function transform(input) {\n    if (!input.escalationSetId) return {};\n\n    var onCallEscalationPolicyUIBUtils = new sn_uib_on_call.OnCallEscalationPolicyUIBUtils();\n    return onCallEscalationPolicyUIBUtils.getCustomEscalationPolicyDetails(input.escalationSetId);\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t\t\"name\": \"escalationSetId\",\r\n\t\t\"label\": \"Escalation set sys id\",\r\n\t\t\"description\": \"Escalation set sys id\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true,\r\n\t\t\"defaultValue\": \"\"\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_eec4af5153a231105dd2ddeeff7b128c","api_name":"sn_uib_on_call.Get custom escalation policy details","mutates_server_data":"false","name":"Get custom escalation policy details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get total purchase count for GenAI products","sys_updated_on":"2023-09-25 21:52:49","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"eef18d4043693110805a71f1cbb8f223","sys_updated_by":"admin","sys_created_on":"2023-09-23 03:00:54","sys_name":"Get total purchase count for GenAI products","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"/**\n * Data broker to get total purchase count for GenAI products\n * @return {number} custom application count\n */\nfunction transform() {\n    var totalPurchaseCount = 0;\n    \n    // get total purchase count for all the GenAI products\n    var gr = new GlideRecord('subscription_entitlement');\n    gr.addQuery('start_date', '<=', new GlideDate());\n    gr.addQuery('end_date', '>=', new GlideDate());\n    // entitlement_type=0 -> primary subscription, entitlement_type=1 -> secondary metered subscription\n    gr.addEncodedQuery('entitlement_type=0^ORentitlement_type=1^meter_type=assist');\n    gr.query();\n    while(gr.next()) {\n        var purchaseCount = parseInt(gr.getValue('purchased_count'));\n        totalPurchaseCount = purchaseCount + totalPurchaseCount;\n    }\n\n    return totalPurchaseCount;\n}","acl_failure_result":"","props":"[]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_update_name":"sys_ux_data_broker_transform_eef18d4043693110805a71f1cbb8f223","api_name":"sn_sub_man.Get total purchase count for GenAI products","mutates_server_data":"false","name":"Get total purchase count for GenAI products","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Logged In User\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"SC Get User Assigned Comparison","sys_updated_on":"2024-08-21 16:22:17","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ef8423f587f55d10e6cf40809bbb35db","sys_updated_by":"admin","sys_created_on":"2022-09-08 19:01:22","sys_name":"SC Get User Assigned Comparison","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    var results = [];\n\n    if (!input.user) {\n        return results;\n    }\n\n    var resultNumbers = [];\n    var comparisonNumbers = \"\";\n    var suiteId = \"\";\n    var gr_comp = new GlideRecord('sn_vsc_scan_comparisons');\n    var eQ = \"scn_listLIKE\" + input.user;\n    gr_comp.addEncodedQuery(eQ);\n    gr_comp.query();\n    if (gr_comp.next()) {\n        comparisonNumbers = gr_comp.getDisplayValue(\"scn_comp\").toString();\n        suiteId = gr_comp.scn_suite.toString();\n    } else {\n        var comp = new GlideRecord('sn_vsc_scan_comparisons');\n        comp.addQuery('scn_default', true);\n        comp.query();\n        if (comp.next()) {\n            comparisonNumbers = comp.getDisplayValue(\"scn_comp\").toString();\n            suiteId = comp.scn_suite.toString();\n        }\n    }\n    resultNumbers = comparisonNumbers.split(\",\");\n\n    var resultIds = [];\n    for (var res in resultNumbers) {\n        var gr_res = new GlideRecord('scan_result');\n        gr_res.addQuery(\"number\", resultNumbers[res]);\n        gr_res.query();\n        if (gr_res.next()) {\n            var sysId = gr_res.sys_id.toString();\n            resultIds.push(sysId);\n        }\n    }\n\n    //Get result id and number for the comparison that user is assigned to\n    for (var id in resultIds) {\n        var gr_suite = new GlideRecord('scan_suite_execution');\n        gr_suite.addQuery('result', resultIds[id]);\n        gr_suite.query();\n        while (gr_suite.next()) {\n            var resultId = resultIds[id];\n            var label = gr_suite.sys_created_on.getDisplayValue();\n            var gdt = new GlideDateTime(label);\n            var created_date = gdt.getDate().toString();\n            var time = gdt.getTime();\n            var created_time = time.getByFormat('HH:mm:ss').toString();\n            var resultNumber = resultNumbers[id];\n            results.push({\n                \"label\": created_date,\n                \"id\": resultId,\n                \"time\": created_time,\n                \"result\": resultNumber\n            });\n        }\n    }\n    results.push({\n        \"suite\": suiteId\n    });\n\n    return results;\n}","acl_failure_result":"","props":"[\n{\n    \"name\": \"user\",\n    \"label\": \"User\",\n    \"description\": \"Logged In User\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_ef8423f587f55d10e6cf40809bbb35db","api_name":"sn_vsc.SC Get User Assigned Comparison","mutates_server_data":"false","name":"SC Get User Assigned Comparison","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Category Selected\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Model Record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-10 14:03:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ef970dc81c48b110fa9b99447d3f95a2","sys_updated_by":"admin","sys_created_on":"2023-07-10 13:32:14","sys_name":"Assets - Create Catalog Item","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var mSysId = input.mSysId;\n    var catSysId = input.catSysId;\n\tvar table = input.table;\n    var type = '';\n\n\tif(table === 'cmdb_hardware_product_model' || table === 'cmdb_consumable_product_model') {\n\t\ttype = 'pc_hardware_cat_item';\n\t} else if(table === 'cmdb_software_product_model') {\n\t\ttype = 'pc_software_cat_item';\n\t} else {\n\t\ttype = 'pc_product_cat_item';\n\t}\n\tvar gr = new GlideRecord('cmdb_model');\n\t/*\n\t* To prevent multiple catalog items from being created\n\t* when the same Publish UI action is executed more than once\n\t*/\n\tif(gr.get(mSysId) && gs.nil(gr.product_catalog_item)) {\n\t\tgr.product_catalog_item = (new global.ProductCatalogUtils()).createProductCatalog(gr, catSysId, 'model', type);\n\t\tvar sysId = gr.product_catalog_item;\n\t\tgr.update();\n\t\t// Add location variable to the hardware catalog item published if HAM is active and indoor mapping is enabled\n\t\tif (type === 'pc_hardware_cat_item' && GlidePluginManager.isActive('com.sn_hamp') && sn_hamp.HAMRitmUtils.prototype.addLocationVariable) {\n\t\t\tnew sn_hamp.HAMRitmUtils().addLocationVariable(sysId);\n\t\t}\n\t}\n\treturn;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"mSysId\",\r\n  \"label\": \"Model Record\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"catSysId\",\r\n  \"label\": \"Category Selected\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n},\r\n{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_ef970dc81c48b110fa9b99447d3f95a2","api_name":"sn_itam_workspace.Assets - Create Catalog Item","mutates_server_data":"true","name":"Assets - Create Catalog Item","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Creates a record into Progress monitor table and triggers data certification schedules migration","sys_updated_on":"2023-12-20 23:19:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"efb94902b70b3110115280408e11a94f","sys_updated_by":"admin","sys_created_on":"2023-12-12 22:00:44","sys_name":"Data Manager Create progress and trigger migration","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform() {\n\tvar wrapperFunction = function() {\n\t\tvar progressMonitorUtil = new sn_cmdb_ws.CMDBWsProgressMonitorUtil();\n\t\tvar DM = new sn_cmdb_ws.CMDBWsDMConstants();\n\t\tvar progressId = progressMonitorUtil.createProgress(DM.EVENTS.MIGRATE_CERT_SCHEDULES);\n\t\tgs.eventQueue(DM.EVENTS.MIGRATE_CERT_SCHEDULES, current, progressId);\n\n\t\treturn progressId;\n\t};\n\t\n\treturn new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager - Create progress record and trigger migrate Certification Schedules event\", wrapperFunction);\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_efb94902b70b3110115280408e11a94f","api_name":"sn_cmdb_ws.Data Manager Create progress and trigger migration","mutates_server_data":"true","name":"Data Manager Create progress and trigger migration","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Returns information if task communication management plugin is installed in the instance","sys_updated_on":"2023-10-11 08:21:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f001f27147b939103f3fd922736d4307","sys_updated_by":"admin","sys_created_on":"2023-10-11 07:33:36","sys_name":"Is Task Communication Management plugin active","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0d2383dd53687510b256ddeeff7b12b8","value":"0d2383dd53687510b256ddeeff7b12b8"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    return GlidePluginManager.isActive('com.snc.task_communication_management');\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0d2383dd53687510b256ddeeff7b12b8","value":"0d2383dd53687510b256ddeeff7b12b8"},"sys_update_name":"sys_ux_data_broker_transform_f001f27147b939103f3fd922736d4307","api_name":"sn_uib_tcm.Is Task Communication Management plugin active","mutates_server_data":"false","name":"Is Task Communication Management plugin active","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Process SysId\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User SysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-03-06 14:06:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f0685f2a53280210abd8ddeeff7b12e4","sys_updated_by":"admin","sys_created_on":"2024-02-27 11:13:05","sys_name":"PWD Reset SDesk User Identification ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar result = new sn_uib_pwd_reset.PwdResetUXFIdentifyProcessor().identifyUser(input.userSysId, input.processSysId, input.token);\n\treturn result;\n}","acl_failure_result":"","props":"[{\r\n      \"name\": \"userSysId\",\r\n      \"label\": \"User SysId\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n{\r\n      \"name\": \"processSysId\",\r\n      \"label\": \"Process SysId\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },\r\n{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_f0685f2a53280210abd8ddeeff7b12e4","api_name":"sn_uib_pwd_reset.PWD Reset SDesk User Identification ","mutates_server_data":"true","name":"PWD Reset SDesk User Identification ","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Array of sysIds for the CIs to get related items for\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"CI sysids\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Config Identifier Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Workspace App Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Supports granular configurations both within and across Workspaces\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get aggregate counts for all related item records for the configured tables (configured tables are in sn_cmdb_ws_node_map_related_item).","sys_updated_on":"2024-09-06 22:19:27","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f082481577c20110960ced43ba5a9934","sys_updated_by":"admin","sys_created_on":"2022-03-04 03:22:31","sys_name":"Get Related Item Counts","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"70","sys_tags":"","script":"function transform(input) {\n\tvar result = {\n\t\terrors: [],\n\t\tcounts: [],\n\t\tsysids: []\n\t};\n\t\n\ttry {\n\t\tvar sysids = input.sysids;\n\t\tvar workspaceId = input.workspaceId;\n\t\tvar configIdentifierId = input.configIdentifierId;\n\t\tresult.sysids = sysids;\n\t\t\n\t\tvar response = new UnifiedMapHelper().getRelatedList(workspaceId, configIdentifierId);\n\t\tif (!response.success) {\n\t\t\tresult.errors.push('There was an error fetching the preconfigured related lists. ' + response.error.message);\n\t\t} else if (response.result.length === 0) {\n\t\t\t// the user has chosen to hide all related items categories, return an empty result (not a failure)\n\t\t\treturn result;\n\t\t}\n\t\tvar tmpResult = new UnifiedMapHelper().getRelatedListAggregate(sysids, response.result);\n\t\tif (tmpResult.success) {\n\t\t\tresult.counts = tmpResult.result;\n\t\t\t//modify this section to whatever it needs to be for related items panel\n\t\t\tresult.counts = result.counts.map(function(item){\n\t\t\t\treturn {\n\t\t\t\t\t\"value\": {\n\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\"value\": item.count\n\t\t\t\t\t},\n\t\t\t\t\t\"name\": item.name, //needed for caching\n\t\t\t\t\t\"sysId\": item.sys_id,\n\t\t\t\t\t\"ariaLabel\": item.ariaLabel\n\t\t\t\t};\n\t\t\t});\n\t\t} else {\n\t\t\t//TODO: map with user-friendly error messages WRT tmpResult.error.code\n\t\t\tresult.errors.push(tmpResult.error.message);\n\t\t}\n\t\t\n\t} catch (error) {\n\t\tresult.errors.push(error.toString());\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"{\r\n\t\"message\":\"User does not have required roles to perform this action.\"\r\n}","props":"[\r\n   {\r\n      \"name\": \"sysids\",\r\n      \"label\": \"CI sysids\",\r\n      \"fieldType\": \"json\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": true,\r\n      \"description\": \"Array of sysIds for the CIs to get related items for\"\r\n   },\r\n   {\r\n      \"name\": \"workspaceId\",\r\n      \"label\": \"Workspace App Id\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": true,\r\n      \"description\": \"Workspace App Id\"\r\n   },\r\n   {\r\n      \"name\": \"configIdentifierId\",\r\n      \"label\": \"Config Identifier Id\",\r\n      \"fieldType\": \"string\",\r\n      \"readOnly\": false,\r\n      \"mandatory\": false,\r\n      \"description\": \"Supports granular configurations both within and across Workspaces\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_f082481577c20110960ced43ba5a9934","api_name":"sn_cmdb_ws.Get Related Item Counts","mutates_server_data":"false","name":"Get Related Item Counts","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table of the record to look up\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"The record count for a given execution Id will be returned\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"executionId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Gets the matching record count for a given execution id query","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f1223d197738911023651605bc5a994b","sys_updated_by":"admin","sys_created_on":"2022-07-19 04:13:37","sys_name":"Get Multisource Record Count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar result = {\n\t\terrors: [],\n\t\ttable: '',\n\t\tvalue: '',\n\t\tcount: 0\n\t};\n\t\n\ttry {\n\t\tvar table = input.table;\n\t\tvar executionId = input.executionId;\n\n\t\tif (!table || !table.length || !table[0]) {\n\t\t\tresult.errors.push('Table is missing.');\n\t\t}\n\t\tif (!executionId || !executionId.length || !executionId[0]) {\n\t\t\tresult.errors.push('executionId is missing.');\n\t\t}\n\t\t\n\t\tif (!result.errors.length) {\n\t\t\tresult.table = table;\n\t\t\tresult.value = executionId;\n\t\t\tvar ga = new GlideAggregate(table);\n\t\t\tga.addEncodedQuery(\"execution_id.sys_id=\"+executionId, true);\n\t\t\tga.query();\n\t\t\tif (ga.next()) {\n\t\t\t\tvar count = parseInt(ga.getRowCount());\n\t\t\t\tresult.count = count;\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t} catch (error) {\n\t\tresult.errors.push(error.toString());\n\t}\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"table\",\r\n  \"label\": \"Table\",\r\n  \"description\": \"Table of the record to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"table_name\",\r\n  \"mandatory\": true\r\n}, {\r\n  \"name\": \"executionId\",\r\n  \"label\": \"executionId\",\r\n  \"description\": \"The record count for a given execution Id will be returned\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_f1223d197738911023651605bc5a994b","api_name":"sn_cmdb_ws.Get Multisource Record Count","mutates_server_data":"false","name":"Get Multisource Record Count","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Pause Queue\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Status of operation queue\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Set application operation queue status\r\nPass \"true\" to pause the operation queue, or \"false\" to resume the operation queue","sys_updated_on":"2022-02-22 17:33:32","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f12784be77e10110fd0faeca78106180","sys_updated_by":"admin","sys_created_on":"2022-02-22 17:33:32","sys_name":"Set Operation Queue Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\treturn sn_ale_queue.AppOperationQueue.pauseOrResumeOperationQueue(input.pause_queue);\n}","acl_failure_result":"","props":"[ \r\n  {\r\n        \"name\": \"pause_queue\",\r\n        \"label\": \"Pause Queue\",\r\n        \"description\": \"Status of operation queue\",\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/528d27ff04352210559073c06a02f737","value":"528d27ff04352210559073c06a02f737"},"sys_update_name":"sys_ux_data_broker_transform_f12784be77e10110fd0faeca78106180","api_name":"global.Set Operation Queue Status","mutates_server_data":"true","name":"Set Operation Queue Status","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"This is the broker that works as an interface to fetch all the best practices based on filters applied on the best practices' homepage.\r\n","sys_updated_on":"2023-12-11 20:46:25","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f162c8a7437231103b465dc36ab8f249","sys_updated_by":"maint","sys_created_on":"2023-12-04 22:32:18","sys_name":"SC Get filtered list of best practices","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\tvar best_practices = {\n\t\t\"totalCount\" : 0,\n\t\t\"filteredPractices\" : []\n\t};\n\tvar bestPracticesGr = new GlideRecord(\"sn_vsc_best_practice_configurations\");\n\tvar encodedQueries = new sn_vsc.SecurityCenterConstants().bestPracticesEncodedQueries;\n\tbestPracticesGr.addEncodedQuery(encodedQueries[\"getAllActiveNotRemovedRecords\"]);\n\tbestPracticesGr.query();\n\tbest_practices[\"totalCount\"] = bestPracticesGr.getRowCount();\n        /**\n    \t  * All the business logic to pull in the filtered ( if any from the homepage ) list of all the best practices\n    \t  * \n\t*/\n\t// We need to put the filter from the input param and glide query it for the following ( only when we will pick up grid view )\n\t// bestPracticeObj.query(); // Filter from input param when grid is on\n\tvar filteredList = [];\n\twhile (bestPracticesGr.next()) {\n\t\t// This object will grow as soon as the grid view is implemented\n\t\tvar bestPracticeObj = {};\n\t\tbestPracticeObj[\"name\"] = bestPracticesGr.getDisplayValue(\"name\").toString();\n\t\tbestPracticeObj[\"maturity_level\"] = bestPracticesGr.getDisplayValue(\"maturity_level\").toString();\n\t\tfilteredList.push(bestPracticeObj);\n\t}\n\tbest_practices[\"filteredPractices\"] = filteredList;\n\treturn best_practices;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_f162c8a7437231103b465dc36ab8f249","api_name":"sn_vsc.SC Get filtered list of best practices","mutates_server_data":"false","name":"SC Get filtered list of best practices","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Is Prompt injection enabled for a Now Assist Admin Skill","sys_updated_on":"2024-10-03 09:46:35","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f2214b9d9f24d21050df2e5af90a1c56","sys_updated_by":"admin","sys_created_on":"2024-09-09 08:26:35","sys_name":"Is Prompt Injection Enabled","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"25","sys_tags":"","script":"function transform(input) {\n    try {\n        var naaUtil = new sn_nowassist_admin.NowAdminAssistUtil();\n        var guardrailsUtil = new sn_nowassist_admin.NowAssistAdminGuardrails();\n        var CONSTANTS = new sn_nowassist_admin.NowAdminAssistMetadata();\n        var NAA_GUARDIAN_CONSTANTS = CONSTANTS.NOW_ASSIST_GUARDIAN;\n        var isPromptInjectionEnabled = false;\n        var detectionImpact = \"\";\n\n        var activeSkills = naaUtil.getAllActiveSkills();\n\n        // if (!activeSkills.length) {\n            var piControlSettingData = guardrailsUtil._getControlSettingDataByType(NAA_GUARDIAN_CONSTANTS.PROMPT_INJECTION_TYPE);\n            detectionImpact = piControlSettingData && piControlSettingData[\"detectionImpact\"];\n        // } else {\n        //     var detectionImpactPayload = guardrailsUtil.getDetectionImpact(activeSkills, NAA_GUARDIAN_CONSTANTS.PROMPT_INJECTION_TYPE);\n        //     detectionImpact = detectionImpactPayload?.detectionImpact || \"\";\n\n        // }\n        if (detectionImpact === NAA_GUARDIAN_CONSTANTS.MONITOR || detectionImpact === NAA_GUARDIAN_CONSTANTS.BLOCK) {\n            isPromptInjectionEnabled = true;\n        }\n\n    } catch (error) {\n        gs.error(\"NowAssistAdminGuardrails : Error while fetching prompt injection enabled status: \" + error.toString());\n    }\n\n    return {\n        activeSkillsCount: activeSkills.length,\n        isPromptInjectionEnabled: isPromptInjectionEnabled\n    };\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_f2214b9d9f24d21050df2e5af90a1c56","api_name":"sn_nowassist_admin.Is Prompt Injection Enabled","mutates_server_data":"false","name":"Is Prompt Injection Enabled","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Relationship Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-08-26 15:38:42","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f2369550536030100764ddeeff7b12a6","sys_updated_by":"admin","sys_created_on":"2021-05-31 20:59:33","sys_name":"Get CI Infrastructure Relationship Tree","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c3a24cb1533320100764ddeeff7b121c","value":"c3a24cb1533320100764ddeeff7b121c"},"sys_created_by":"admin","sys_mod_count":"42","sys_tags":"","script":"function transform(input) {\n\t\n\tfunction _getParentString(rel) {\n\t\tif (rel.level > 1) {\n\t\t\treturn \"[\" + _getParentNames(rel.parents) + \" \\u21E2 ] \";\n\t\t}\n\t\treturn \"\";\n\t}\n\t\n\tfunction _getParentNames(parentArr) {\n\t\tvar parentNames = [];\n\t\tfor (var i = 0; i < parentArr.length; i++) {\n\t\t\tparentNames.push(parentArr[i].name);\n\t\t}\n\t\t\n\t\treturn parentNames.sort().join(\", \");\n\t}\n\t\n\tvar result = {};\n\tvar entries = JSON.parse(input.relData).relations;\n\n\tvar items = [];\n\tvar expandedItems = [];\n\tentries.forEach(function(entry) {\n\t\tvar category = {};\n\t\tcategory.id = entry.relationTypeSysId + entry.ciClassDisplayName;\n\t\tcategory.relationTypeDesc = entry.relationTypeDesc;\n\t\tcategory.label = entry.relationTypeDesc + \" - \" + entry.ciClassDisplayName;\n\t\tcategory.children = [];\n\t\texpandedItems.push([category.id]);\n\t\tentry.relations.forEach(function(rel) {\n\t\t\tvar node = {};\n\t\t\tnode.id = rel.childSysId;\n\t\t\tnode.ciName = rel.childName;\n\t\t\tnode.label = \"[L\" + rel.level + \"] \" + _getParentString(rel) + rel.childName;\n\t\t\tnode.actionable = true;\n\t\t\tnode.table = entry.ciSysClass;\n\t\t\tnode.sysId = rel.childSysId;\n\t\t\tnode.children = [];\n\t\t\tcategory.children.push(node);\n\t\t});\n\t\tcategory.children.sort(function compare(a, b) {\n\t\t\treturn a.label.localeCompare(b.label);\n\t\t});\n\t\titems.push(category);\n\t});\n\t\n\titems.sort(function compare(a, b) {\n\t\treturn a.relationTypeDesc.localeCompare(b.relationTypeDesc);\n\t});\n\t\n\tresult.items = items;\n\tresult.expandedItems = expandedItems;\n\t\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"relData\",\r\n  \"label\": \"Relationship Data\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"object\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c3a24cb1533320100764ddeeff7b121c","value":"c3a24cb1533320100764ddeeff7b121c"},"sys_update_name":"sys_ux_data_broker_transform_f2369550536030100764ddeeff7b12a6","api_name":"sn_cmdb_pg_templts.Get CI Infrastructure Relationship Tree","mutates_server_data":"false","name":"Get CI Infrastructure Relationship Tree","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[{\"message\":\"Actions to DA template\",\"comment\":\"\"},{\"message\":\"Record type to DA template\",\"comment\":\"\"}]","batch_exclude":"false","description":"Used to convert VTB subcomponent actions to a DA mapping input for sn-vtb","sys_updated_on":"2021-02-23 12:46:13","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f2a136fc53922010c5e2ddeeff7b12d0","sys_updated_by":"admin","sys_created_on":"2021-02-10 20:55:25","sys_name":"Visual Board subcomponent actions to DA templates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/706afb822bf7975884b8ae878de7baeb","value":"706afb822bf7975884b8ae878de7baeb"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n    var daTemplateToActionName = JSON.parse(input.daTemplateToActionName);\n    var config = {\n        daActionMapping: {}\n    };\n    if (!daTemplateToActionName)\n        return config;\n    var assignmentIds = [];\n    for (var assignmentId in daTemplateToActionName)\n        assignmentIds.push(assignmentId);\n\n    if (!assignmentIds.length)\n        return config;\n\n    var assignmentGR = new GlideRecord(\"sys_declarative_action_assignment\");\n    assignmentGR.addQuery(\"sys_id\", assignmentIds);\n    assignmentGR.addActiveQuery();\n    assignmentGR.query();\n    var daActionMapping = {};\n    while (assignmentGR.next()) {\n        var clientActionId = assignmentGR.getValue(\"client_action\");\n        if (clientActionId) {\n            var payloadDef = new GlideRecord(\"sys_declarative_action_payload_definition\");\n            if (payloadDef.get(clientActionId)) {\n                var actionId = assignmentGR.getUniqueValue();\n                daActionMapping[daTemplateToActionName[actionId]] = {\n                    \"assignmentId\": actionId,\n                    \"name\": payloadDef.getValue(\"action_key\"),\n                    \"label\": assignmentGR.getValue(\"label\"),\n                    \"actionType\": \"uxf_client_action\",\n                    \"actionDispatch\": payloadDef.getValue(\"action_key\"),\n                    \"actionPayload\": payloadDef.getValue(\"payload_template\")\n                };\n            }\n        }\n    }\n    config.daActionMapping = daActionMapping;\n    return config;\n}","acl_failure_result":"","props":"[\r\n{\r\n    \"name\": \"daTemplateToActionName\",\r\n    \"label\": \"Actions to DA template\",\r\n     \"fieldType\": \"json\",\r\n     \"valueType\": \"object\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": false,\r\n    \"description\": \"Record type to DA template\",\r\n    \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/706afb822bf7975884b8ae878de7baeb","value":"706afb822bf7975884b8ae878de7baeb"},"sys_update_name":"sys_ux_data_broker_transform_f2a136fc53922010c5e2ddeeff7b12d0","api_name":"sn_vtb.Visual Board subcomponent actions to DA templates","mutates_server_data":"false","name":"Visual Board subcomponent actions to DA templates","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2022-12-20 22:17:22","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f2eda05b4da31110f877386ac954f60f","sys_updated_by":"admin","sys_created_on":"2022-12-08 21:38:22","sys_name":"SC Get Summary Score Details ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var prevScore = 0;\n    var currScore = 0;\n    var currScoreDate = \"\";\n    var arrowDir = \"\";\n    var prevScoreDate = \"\";\n    var updatedSettings = 0;\n    var n = 0;\n\n    // get last 2 compliance scores and their calculation date\n    var gr = new GlideRecord('sn_vsc_hardening_compliance_scores');\n    gr.orderByDesc('harc_collected');\n    gr.query();\n\n    while (gr.next()) {\n        if (n == 0) {\n            currScore = parseInt(gr.getValue('harc_score'));\n            currScoreDate = new GlideDateTime(gr.getValue(\"harc_collected\")).getDisplayValue();\n        } else {\n            // if there is more than 1 record with same date in hardening compliance score, get previous scan date not equal to current scan date \n            var prevHarcDate = new GlideDateTime(gr.getValue(\"harc_collected\")).getDisplayValue();\n            if (prevHarcDate.split(\" \")[0] != currScoreDate.split(\" \")[0]) {\n                prevScore = parseInt(gr.getValue('harc_score'));\n                prevScoreDate = prevHarcDate;\n                break;\n            }\n\n        }\n        n++;\n    }\n\n    // if there is no previous run/score, set it with current compliance score \n    if (prevScore == 0) {\n\tprevScore = currScore;\n        prevScoreDate = currScoreDate;\n    }\n\n    // set the arrow direction based on current and previous score\n    if (currScore < prevScore) {\n        arrowDir = \"down\";\n    } else if (currScore > prevScore) {\n        arrowDir = \"up\";\n    }\n\n    // get the most affected security area and priority of updated settings\n    var scUtil = new sn_vsc.SCComparisonUtil();\n    if (currScoreDate != prevScoreDate) { //ensure changed settings are from different dates\n        var grSettings = scUtil.getUpdatedSettings(currScoreDate, prevScoreDate);\n        if (grSettings) {\n            updatedSettings = grSettings.getRowCount();\n        }\n\n        var securityArea = scUtil.mostRepeatedSecurityArea(currScoreDate, prevScoreDate);\n        var priority = scUtil.getAllPriorityForSecurityArea(securityArea, currScoreDate, prevScoreDate);\n    }\n\t\n\n    // return all the summary data \n    return [{\n        \"changeFromPrev\": currScore - prevScore,\n        \"currScore\": currScore + \"%\",\n        \"prevScore\": prevScore + \"%\",\n        \"arrowDirection\": arrowDir,\n        \"previousScoreDate\": prevScoreDate,\n        \"updatedSettings\": updatedSettings,\n        \"securityArea\": securityArea,\n        \"priority\": priority\n    }];\n\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sys_ux_data_broker_transform_f2eda05b4da31110f877386ac954f60f","api_name":"sn_vsc.SC Get Summary Score Details ","mutates_server_data":"false","name":"SC Get Summary Score Details ","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Context session user preferences\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Current user preferences\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id of the UX Page Registry.\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"UX Application Page Registry SysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Transform UX Application page properties, application page authorization routes, and current user preferences.","sys_updated_on":"2021-09-14 16:05:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f46d1b58534210105a20ddeeff7b125f","sys_updated_by":"admin","sys_created_on":"2020-07-13 05:02:24","sys_name":"UX Application Page Properties & Auth Routes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7be88b365b3801be77a72fb359d185cb","value":"7be88b365b3801be77a72fb359d185cb"},"sys_created_by":"admin","sys_mod_count":"195","sys_tags":"","script":"function transform(input) {\n    var result = {},\n        k = undefined,\n        GLOBAL_KEY = 'global',\n        JSON_TYPE = 'json',\n        pagePropUtil = new UXPagePropertyUtil(),\n        properties,\n        authRoutes,\n        userPrefs;\n\n    /**!\n     * @name getAuthRoutes\n     * @description Retrieves the authorization routes defined for the UX application.\n     *\n     * @param uxAppAuthRoutesGQL\n     * @return {{auth_routes: ({}|any)}}\n     */\n    function getAuthRoutes(uxPageRegistrySysId) {\n        var routes = {};\n        if (!uxPageRegistrySysId)\n            return routes;\n        var gr = new GlideRecord('sys_ux_page_registry');\n        gr.addQuery('sys_id', uxPageRegistrySysId);\n        gr.query();\n        if (gr.next()) {\n            routes['auth_routes'] = _processAuthRoutes(JSON.parse(gr.getValue('auth_routes')));\n        }\n        return routes;\n    }\n\n    function _processAuthRoutes(routes) {\n        var authRoutes = {},\n            loginModal = null;\n\n        if (!routes || routes.length === 0)\n            return authRoutes;\n\n        for (key in routes) {\n            if (key === \"loginModalViewport\") {\n                loginModal = authRoutes['loginModal'] ? authRoutes['loginModal'] : {};\n                loginModal['viewportElementId'] = routes['loginModalViewport'];\n                authRoutes['loginModal'] = loginModal;\n            } else if (key === \"loginModalRoute\") {\n                loginModal = authRoutes['loginModal'] ? authRoutes['loginModal'] : {};\n                loginModal['route'] = routes['loginModalRoute'];\n                authRoutes['loginModal'] = loginModal;\n            } else {\n                authRoutes[key] = routes[key];\n            }\n        }\n        return authRoutes;\n    }\n\n    /**!\n     * @name getProperties\n     * @description Retrieves the authorization routes defined for the UX application.\n     *\n     * @param uxAppPagePropertiesGQL\n     */\n    function getProperties(uxPageRegistrySysId) {\n        var uxPageProperties = {},\n            uxPageProperty = undefined,\n            routeKey;\n        if (!uxPageRegistrySysId)\n            return uxPageProperties;\n        var properties = new GlideRecord('sys_ux_page_property');\n        properties.addQuery('page', uxPageRegistrySysId);\n        properties.query();\n\n        // apply transform to process all properties as\n        // - \"global\" if route is empty or null\n        // - \"route~<fileds_count>\" [\"home~0\"] if route is home\n        while (properties.next()) {\n\t\t\trouteKey = getRouteKey(properties);\n\t\t\tuxPageProperty = properties.getValue('name');\n\t\t\tif (uxPageProperties.hasOwnProperty(uxPageProperty)) {\n\t\t\t\tif (uxPageProperties[uxPageProperty].hasOwnProperty(GLOBAL_KEY) && routeKey === GLOBAL_KEY) {\n\t\t\t\t\t//handle property extensions for global\n\t\t\t\t\t//for array\n\t\t\t\t\tif (Object.prototype.toString.call(uxPageProperties[uxPageProperty][GLOBAL_KEY]) === \"[object Array]\") {\n\t\t\t\t\t\tuxPageProperties[uxPageProperty][GLOBAL_KEY] = uxPageProperties[uxPageProperty][GLOBAL_KEY].concat(transformProperty(properties)[GLOBAL_KEY]);\n\t\t\t\t\t} else if (Object.prototype.toString.call(uxPageProperties[uxPageProperty][GLOBAL_KEY]) === \"[object Object]\") {\n\t\t\t\t\t\t// for objects\n\t\t\t\t\t\tuxPageProperties[uxPageProperty][GLOBAL_KEY] =\n\t\t\t\t\t\t\tUXPagePropertyUtil.deepMerge(\n\t\t\t\t\t\t\tuxPageProperties[uxPageProperty][GLOBAL_KEY],\n\t\t\t\t\t\t\ttransformProperty(properties)[GLOBAL_KEY]\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t} else if (uxPageProperties[uxPageProperty].hasOwnProperty(routeKey)) {\n\t\t\t\t\t// handle property extensions for route\n\t\t\t\t\t// for array\n\t\t\t\t\tif (Object.prototype.toString.call(uxPageProperties[uxPageProperty][routeKey]) === \"[object Array]\") {\n\t\t\t\t\t\tuxPageProperties[uxPageProperty][routeKey] = uxPageProperties[uxPageProperty][routeKey].concat(transformProperty(properties)[routeKey]);\n\t\t\t\t\t} else if (Object.prototype.toString.call(uxPageProperties[uxPageProperty][routeKey]) === \"[object Object]\") {\n\t\t\t\t\t\t// for objects\n\t\t\t\t\t\tuxPageProperties[uxPageProperty][routeKey] =\n\t\t\t\t\t\t\tUXPagePropertyUtil.deepMerge(\n\t\t\t\t\t\t\tuxPageProperties[uxPageProperty][routeKey],\n\t\t\t\t\t\t\ttransformProperty(properties)[routeKey]\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// handle route property for non-extensions\n\t\t\t\t\tuxPageProperties[uxPageProperty][routeKey] = transformProperty(properties)[routeKey];\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tuxPageProperties[uxPageProperty] = transformProperty(properties);\n\t\t\t}\n            \n        }\n\n        // merge the global and route property for the configured routes\n        for (uxPageProperty in uxPageProperties) {\n            if (uxPageProperties.hasOwnProperty(uxPageProperty)) {\n                Object.keys(uxPageProperties[uxPageProperty]).forEach(function (routeKey) {\n                    if (routeKey !== GLOBAL_KEY) {\n                        uxPageProperties[uxPageProperty][routeKey] =\n                            UXPagePropertyUtil.deepMerge(\n                                uxPageProperties[uxPageProperty][GLOBAL_KEY],\n                                uxPageProperties[uxPageProperty][routeKey]\n                            );\n                    }\n                });\n            }\n        }\n\n        return uxPageProperties;\n    }\n\n    /**!\n     * @name getRouteKey\n     * @description Generates the routeKey for property based on the routes.\n     *\n     *  example:\n     *  - A routeKey for the \"home\" route will be transformed as\n     *   'home~0': {}\n     *  - A routeKey for route empty/null will be transformed as\n     *    'global': {}\n     *\n     * @param property\n     */\n    function getRouteKey(property) {\n        var routeRecord = property.route.getRefRecord();\n        var route = routeRecord.isValidRecord() ? routeRecord.getValue('route_type') : '';\n        var fields = routeRecord.isValidRecord() ? routeRecord.getValue('fields') : '';\n        var routeKey = '',\n            fieldCount = 0;\n        if (route) {\n            fieldCount = fields ? fields.split(',').length : 0;\n            routeKey = route + '~' + fieldCount;\n        } else {\n            routeKey = GLOBAL_KEY;\n        }\n        return routeKey;\n    }\n\n    /**!\n     * Transform the property to include the route specific information. A property that doesn't have any routes\n     *  are termed as \"global\" and applicable for all routes.\n     *\n     *  example:\n     *  - A property defined for the \"home\" route will be transformed as\n     *   'home~0': {}\n     *  - A property without any route will be transformed as\n     *    'global': {}\n     *\n     * @param property\n     */\n    function transformProperty(property) {\n        var value, routeKey, transformed = {};\n\n        // Format the route key if it exist. The route key will be of format `${route_name}~${fieldCount}`\n        routeKey = getRouteKey(property);\n\n        // json property type\n        if (property.getValue('type') === JSON_TYPE) {\n            value = property.value ? JSON.parse(property.getValue('value')) : '{}';\n        } else {\n            value = property.getValue('value');\n        }\n        transformed[routeKey] = value;\n        return transformed;\n    }\n\n    /**\n     * Retrieve the authorization routes & properties and build the transform returning result object\n     */\n    authRoutes = getAuthRoutes(input.uxPageRegistrySysId);\n    properties = getProperties(input.uxPageRegistrySysId);\n\n    // process the specific properties for roles, apply canCreate, primaryTab, etc. data conditions\n    for (k in properties) {\n        UXPagePropertyUtil.handleTranslations(properties[k]);\n        if (properties.hasOwnProperty(k) && k === 'chrome_tab') {\n            result[k] = pagePropUtil.processChromeTab(properties['chrome_toolbar'], properties[k]);\n        } else if (properties.hasOwnProperty(k) && k === 'chrome_header') {\n            result[k] = pagePropUtil.processChromeHeader(properties[k], authRoutes);\n        } else if (properties.hasOwnProperty(k) && k === 'chrome_toolbar') {\n            result[k] = pagePropUtil.processChromeToolbar(properties[k]);\n        } else if (properties.hasOwnProperty(k) && k === 'chrome_menu') {\n            result[k] = pagePropUtil.processChromeMenu(properties[k]);\n        } else if (properties.hasOwnProperty(k) && k === 'global_search_configurations') {\n            var headerConfig = {};\n            if (properties.hasOwnProperty('chrome_header')){\n                headerConfig = properties['chrome_header'];\n            }\n            result[k] = pagePropUtil.processSearch(properties[k], headerConfig);\n        } else if (properties.hasOwnProperty(k)) {\n            result[k] = properties[k];\n        }\n    }\n    // include auth routes\n    result['auth_routes'] = authRoutes['auth_routes'];\n    \n\t// include chrome_header's notificationEnabled as a single object for easy exposure to Polaris\n    var notificationEnabledValue = UXPagePropertyUtil.get(properties, 'chrome_header.global.privatePage.notificationsEnabled');\n\tresult['chrome_notificationsEnabled'] = { 'global': notificationEnabledValue };\n\n    return result;\n}","acl_failure_result":"","props":"[\r\n {\r\n    \"name\": \"uxPageRegistrySysId\",\r\n    \"label\": \"UX Application Page Registry SysId\",\r\n    \"fieldType\": \"string\",\r\n    \"valueType\": \"string\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Sys Id of the UX Page Registry.\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7be88b365b3801be77a72fb359d185cb","value":"7be88b365b3801be77a72fb359d185cb"},"sys_update_name":"sys_ux_data_broker_transform_f46d1b58534210105a20ddeeff7b125f","api_name":"sn_canvas_core.UX Application Page Properties & Auth Routes","mutates_server_data":"false","name":"UX Application Page Properties & Auth Routes","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Fetch encoded log query for Prompt Injection","sys_updated_on":"2024-10-03 12:09:25","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f4d1ab6e9fa01210bc1d5c1eca0a1c4e","sys_updated_by":"admin","sys_created_on":"2024-09-13 08:07:16","sys_name":"Fetch encoded log query for Prompt Injection","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform() {\n    try {\n        var naaUtil = new sn_nowassist_admin.NowAdminAssistUtil();\n        var guardUtil = new sn_nowassist_admin.NowAssistAdminGuardrails();\n        // var skillIdList = [];\n        // var workflows = naaUtil.getWorkflows();\n        // workflows.forEach(function(workflow) {\n        //     var products = naaUtil.getProducts(workflow?.id);\n        //     if (products.length === 0) {\n        //         products.push(workflow);\n        //     }\n        //     products.forEach(function(product) {\n        //         var features = naaUtil.getFeatures(product?.id);\n        //         features.forEach(function(feature) {\n        //             var skills = naaUtil.getSkills(feature.id);\n        //             skills.forEach(function(skill) {\n        //                 skillIdList.push(skill.id);\n        //             });\n        //         });\n        //     });\n        // });\n        // var url = guardUtil.getExportURL(skillIdList, guardUtil.PROMPT_INJECTION_METRIC_NAME);\n        var url = guardUtil.getExportURL([], guardUtil.PROMPT_INJECTION_METRIC_NAME);\n        return {\n            path: url\n        };\n    } catch (error) {\n        gs.error(\"Error occurred in fetching encoded log query for Prompt Injection data broker : \" + error.toString());\n    }\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_f4d1ab6e9fa01210bc1d5c1eca0a1c4e","api_name":"sn_nowassist_admin.Fetch encoded log query for Prompt Injection","mutates_server_data":"true","name":"Fetch encoded log query for Prompt Injection","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Returns benchmarks opt-in status.","sys_updated_on":"2024-05-28 05:38:03","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f5157a7753120210393addeeff7b1247","sys_updated_by":"admin","sys_created_on":"2024-05-28 05:38:03","sys_name":"Get benchmarks opt-in status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3214b661c3eb211062ebf69f05013160","value":"3214b661c3eb211062ebf69f05013160"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n    var bu = new sn_benchmarks.BenchmarkScoreUtil();\n    return bu.getOptIn();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3214b661c3eb211062ebf69f05013160","value":"3214b661c3eb211062ebf69f05013160"},"sys_update_name":"sys_ux_data_broker_transform_f5157a7753120210393addeeff7b1247","api_name":"sn_benchmarks.Get benchmarks opt-in status","mutates_server_data":"false","name":"Get benchmarks opt-in status","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Shift\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Shift id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Template id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Template table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Template table to look up\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Template to look up\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get on call esc template details based on given template id and table name","sys_updated_on":"2023-12-11 09:52:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f60acfa44332b110b8cf8beeaab8f20b","sys_updated_by":"admin","sys_created_on":"2023-11-26 05:10:58","sys_name":"Get on call esc template details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    if (!input.templateTable || !input.templateId)\n        return {};\n    var onCallEscalationPolicyUIBUtils = new sn_uib_on_call.OnCallEscalationPolicyUIBUtils();\n    if (input.templateTable == \"on_call_template_escalation_policy\") {\n        if (!input.shiftId)\n            return {\n                errorMsg: gs.getMessage(\"Shift is required to apply template\")\n            };\n        return onCallEscalationPolicyUIBUtils.getEscalationPolicyTemplateDetails(input.templateId, input.shiftId);\n    } else if (input.templateTable == \"on_call_template_contact_preference\")\n        return onCallEscalationPolicyUIBUtils.getContactPreferenceTemplateDetails(input.templateId);\n}","acl_failure_result":"","props":"[\r\n  {\r\n  \"name\": \"templateTable\",\r\n  \"label\": \"Template table\",\r\n  \"description\": \"Template table to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"table_name\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},{\r\n  \"name\": \"templateId\",\r\n  \"label\": \"Template id\",\r\n  \"description\": \"Template to look up\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"shiftId\",\r\n  \"label\": \"Shift id\",\r\n  \"description\": \"Shift\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_f60acfa44332b110b8cf8beeaab8f20b","api_name":"sn_uib_on_call.Get on call esc template details","mutates_server_data":"false","name":"Get on call esc template details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Data broker to populate the parameters in the Asset estate tabs having list views based on index of tabs","sys_updated_on":"2021-12-10 13:37:03","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f653ed850b12301021fd092db4673a9f","sys_updated_by":"admin","sys_created_on":"2021-08-29 06:11:20","sys_name":"Asset estate tabs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"14","sys_tags":"","script":"function transform(input) {\n    if (AssetWorkspaceUtil.isHAMActive()) {\n\t\treturn new sn_hamp.HAMAssetWorkspaceUtil().getAssetEstateTabs();\n    } else {\n        return new AssetWorkspaceUtil().getAssetEstateTabs();\n    }\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_f653ed850b12301021fd092db4673a9f","api_name":"sn_itam_workspace.Asset estate tabs","mutates_server_data":"false","name":"Asset estate tabs","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Comments\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of the current record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table of the current record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-07 04:32:35","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f6af07937776301058119a372e5a99aa","sys_updated_by":"admin","sys_created_on":"2021-09-30 09:57:22","sys_name":"Reject business process","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"17","sys_tags":"","script":"function tranform(input) {\n    if (input.comments && input.table == \"cmdb_ci_business_process\" && new global.BusinessProcessUtils().canShowApproveOrRejectButton(input.sysId)) {\n        var gr = new GlideRecord('sysapproval_approver');\n        gr.addQuery('source_table', input.table);\n        gr.addQuery('document_id', input.sysId);\n        gr.addQuery('approver', gs.getUser().getID());\n        gr.addQuery('state', 'requested');\n        gr.query();\n        if (gr.next()) {\n            gr.setValue('state', 'rejected');\n            gr.comments = input.comments;\n            gr.update();\n            new ApprovalUserFeedback().rejected(gr);\n        }\n    }\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\":\"table\",\r\n      \"label\":\"Table\",\r\n      \"description\":\"Table of the current record\",\r\n      \"fieldType\":\"table_name\",\r\n      \"mandatory\":true\r\n   },\r\n   {\r\n      \"name\":\"sysId\",\r\n      \"label\":\"sysId\",\r\n      \"description\":\"Sys id of the current record\",\r\n      \"fieldType\":\"string\",\r\n      \"mandatory\":true\r\n   },\r\n{\r\n      \"name\":\"comments\",\r\n      \"label\":\"Comments\",\r\n      \"description\":\"Comments\",\r\n      \"fieldType\":\"string\",\r\n      \"mandatory\":true\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1eddeb3304752210559073c06a02f787","value":"1eddeb3304752210559073c06a02f787"},"sys_update_name":"sys_ux_data_broker_transform_f6af07937776301058119a372e5a99aa","api_name":"global.Reject business process","mutates_server_data":"false","name":"Reject business process","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Fetch the content url for users who are new to Catalog Builder or would like a refresher on creating a catalog item based on the following system property:\r\nglide.sc.builder.content_url","sys_updated_on":"2022-03-03 11:25:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f710351f0f5310101527008c07767efb","sys_updated_by":"admin","sys_created_on":"2020-09-22 07:04:17","sys_name":"Fetch the content url for catalog builder homepage","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/e92e72c9b7021010e54deb56ee11a9bf","value":"e92e72c9b7021010e54deb56ee11a9bf"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n\treturn gs.getProperty('glide.sc.builder.content_url', 'api/now/v1/context_doc_url/Catalog_Builder');\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e92e72c9b7021010e54deb56ee11a9bf","value":"e92e72c9b7021010e54deb56ee11a9bf"},"sys_update_name":"sys_ux_data_broker_transform_f710351f0f5310101527008c07767efb","api_name":"sn_catalog_builder.Fetch the content url for catalog builder homepage","mutates_server_data":"false","name":"Fetch the content url for catalog builder homepage","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Max results\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Maximum dropdown values to be shown\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search term\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"String to filter results by\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId of team\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"teamId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Fetch candidates for team membership","sys_updated_on":"2023-11-29 16:44:30","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f73433c553be3110bdf7ddeeff7b12d7","sys_updated_by":"admin","sys_created_on":"2023-11-27 21:30:36","sys_name":"Fetch team candidates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n    return fetchTeamCandidates(input.teamId, input.searchTerm, input.limit);\n\n    function fetchTeamCandidates(teamId, searchTerm, limit) {\n        var gr = new GlideRecordSecure('sys_user');\n        gr.addActiveQuery();\n        var resp = [];\n\n        var teamMemberIds = _fetchMemberIds(teamId);\n        if (teamMemberIds.length > 0)\n            gr.addQuery('sys_id', 'NOT IN', teamMemberIds);\n\n        if (searchTerm)\n            gr.addQuery('name', 'CONTAINS', searchTerm);\n\n        gr.orderBy('name');\n\n        if (limit)\n            gr.setLimit(limit);\n\n        gr.query();\n        while (gr.next()) {\n            /* response is designed for list item prop e.g. typeahead-multi */\n            resp.push({\n                id: gr.getUniqueValue(),\n                label: gr.getValue('name'),\n                sublabel: gr.getValue('email')\n            });\n        }\n\n        return resp;\n    }\n\n    function _fetchMemberIds(teamId) {\n        if (!teamId)\n            return [];\n\n        var memberIds = [];\n        var gr = new GlideRecordSecure('sys_user_grmember');\n        gr.addQuery('group', teamId);\n        gr.query();\n        while (gr.next()) {\n            memberIds.push(gr.getValue('user'));\n        }\n\n        return memberIds;\n    }\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"teamId\",\r\n    \"label\": \"teamId\",\r\n    \"description\": \"sysId of team\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"searchTerm\",\r\n    \"label\": \"Search term\",\r\n    \"description\": \"String to filter results by\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"limit\",\r\n    \"label\": \"Max results\",\r\n    \"description\": \"Maximum dropdown values to be shown\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": false,\r\n    \"defaultValue\": \"250\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sys_ux_data_broker_transform_f73433c553be3110bdf7ddeeff7b12d7","api_name":"sn_sow.Fetch team candidates","mutates_server_data":"false","name":"Fetch team candidates","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get the list of all tables which can be selected for certification policies","sys_updated_on":"2024-01-05 18:14:06","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f763a276435731106d8a8ef0dab8f263","sys_updated_by":"admin","sys_created_on":"2023-12-27 22:37:56","sys_name":"Data Manager Get Certification Table Options","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"7","sys_tags":"","script":"function transform(input) {\n    var wrapperFunction = function() {\n        var tableOptions = [];\n        var constants = new CMDBWsConstants();\n        var gr = new GlideRecord(constants.TABLES.SYS_DB_OBJECT);\n        gr.orderBy(constants.COLS.NAME);\n        gr.query();\n\n        while (gr.next()) {\n            var tableName = gr.getValue(constants.COLS.NAME);\n            var tableLabel = gr.getValue(constants.COLS.LABEL);\n\t\t\tvar tableGr = new GlideRecord(tableName);\n            if (tableGr.isValid() && tableGr.canRead()) {\n                tableOptions.push({\n                    \"id\": tableName,\n                    \"label\": tableLabel,\n                    \"sublabel\": tableName\n                });\n            }\n        }\n\n        return tableOptions;\n    };\n\n    return new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Data Manager - Get Certification Table Options\", wrapperFunction);\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_f763a276435731106d8a8ef0dab8f263","api_name":"sn_cmdb_ws.Data Manager Get Certification Table Options","mutates_server_data":"false","name":"Data Manager Get Certification Table Options","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Template Sys ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Checks if the given de-duplication template can be published","sys_updated_on":"2023-10-04 20:39:01","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f769f411732531103f3cc3ed8ff6a772","sys_updated_by":"admin","sys_created_on":"2023-09-26 23:14:03","sys_name":"De-duplication template can publish","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"/*\n\tCheck whether or not we can publish the template.\n*/\nfunction transform(input) {\n\tvar result = true;\n\tvar templateSysId = input.templateSysId;\n\n\tvar requiredAttributes = ['name', 'table', 'master_ci_option', 'merge_relations', 'merge_related_items', 'duplicate_ci_action'];\n\t/*\n\t\tCheck if the required attributes are set\n\t*/\n\n\t/*\n\t\tAbhishek's check for missing requirements in Java layer:\n\n\t\tprivate static final List<String> fRequiredAttributes = \n\t\tList.of(NAME, TABLE, MASTER_CI_OPTION, MERGE_RELATIONS, MERGE_RELATED_ITEMS, DUPLICATE_CI_ACTION);\n\t\tList<String> missingAttributes = Lists.newArrayList();\n\n\t\tGlideRecord gr = new GlideRecord(RECONCILE_DUPLICATE_TEMPLATE);\n\t\tif (gr.get(fTemplateId)) {\n\t\t\tfRequiredAttributes.forEach(attribute -> {\n\t\t\t\tif (StringUtil.nil(gr.getValue(attribute))) {\n\t\t\t\t\tmissingAttributes.add(attribute);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn missingAttributes;\n\t*/\n\n\tvar gr = new GlideRecord('reconcile_duplicate_template');\n\tif (gr.get(templateSysId)) {\n\t\trequiredAttributes.forEach(function(attribute) {\n\t\t\tvar attributeValue = gr.getValue(attribute);\n\t\t\tif (!attributeValue) {\n\t\t\t\t result = false;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn result;\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"templateSysId\",\r\n      \"label\": \"Template Sys ID\",\r\n      \"description\": \"\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"true\",\r\n      \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_f769f411732531103f3cc3ed8ff6a772","api_name":"sn_cmdb_ws.De-duplication template can publish","mutates_server_data":"false","name":"De-duplication template can publish","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"ACE Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"ACE configured page route\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Application Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page Params\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page Route\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Page parameters(optional and required)\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to fetch the sections & cards for apps built in Admin Console Framework","sys_updated_on":"2024-09-06 05:19:54","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f779f69c47a8d6905e0819e0236d43d0","sys_updated_by":"admin","sys_created_on":"2024-09-06 05:19:54","sys_name":"V2 ACE Fetch Content Blocks","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\n    function getContentBlocksLegacy(appConfigGr) {\n        var appConfig = appConfigGr.getValue('app_config');\n        return new ACEAppBuilderUtilV2().getContentBlocks(input.page_route, input.page_params, appConfig, false, false, false);\n    }\n\n\n    function getClientContext(pageGR) {\n        try {\n            var clientContext = pageGR.getValue('client_context');\n            if (typeof clientContext == 'string') {\n                clientContext = JSON.parse(clientContext);\n                if (!clientContext.__ace_internal__) {\n                    clientContext.__ace_internal__ = {\n                        'loadTime': Date.now()\n                    };\n                }\n            }\n            return clientContext;\n        } catch (e) {\n            gs.error(\"ACEDesignTimeError: Failed to parse client context: \" + e.toString());\n        }\n    }\n\n    function convertToNormalFormat(customObject) {\n        var jsonObject = {};\n        for (var key in customObject) {\n            if (customObject[key] && customObject[key].type === \"MAP_CONTAINER\") {\n                jsonObject[key] = convertToNormalFormat(customObject[key].container);\n            } else {\n                jsonObject[key] = customObject[key];\n            }\n        }\n        return jsonObject;\n    }\n\n    /**\n     * Fetch content blocks from bundle only if ace version is v2 and the sys_property to disable\n     * bundle fetch is false.\n     */\n    function shouldFetchContentBlocksFromBundle(pageGr) {\n        return gs.getProperty('ace.disable_page_bundle_fetch.' + input.page_route, false + \"\") == \"false\" &&\n            pageGr.ace_app.version == 'v2';\n    }\n\n    function isApplicationACEV1(appConfigGr, pageGr) {\n        var appVersion = appConfigGr.getValue('version');\n        var pageVersion = pageGr.getValue('version');\n\n        if (pageVersion && pageVersion.toLowerCase() === 'v2')\n            return false;\n        if (appVersion && appVersion.toLowerCase() === 'v2')\n            return false;\n\n        return true;\n    }\n\n    if (!input || !input.application_id || !input.page_route) return [];\n    var contentBlocks = [];\n    var appConfigGr = new GlideRecord('sn_ace_app_config');\n    if (!appConfigGr.get(input.application_id))\n        return [];\n\n    var pageGr = new GlideRecord('sn_ace_page');\n    if (!pageGr.get(input.page_route))\n        return [];\n\n    //interceptor for legacy v1 application\n    if (isApplicationACEV1(appConfigGr, pageGr)) {\n        var blocks = new ACEAppBuilderUtil().getContentBlocks(input.page_route, input.page_params);\n        blocks.forEach(function(cb) {\n            cb.isRoot = true;\n        });\n        return blocks;\n    }\n\n    var aceAppBuilderUtil = new ACEAppBuilderUtilV2();\n    var aceGlobalUtil = new global.ACEAppBuilderGlobalScopedUtil();\n    var blockContext = getClientContext(pageGr);\n    if (blockContext) {\n        blockContext = convertToNormalFormat(blockContext);\n    }\n\n    try {\n        var cbPageParams = {\n            'pageParams': input.page_params,\n            'blockcontext': blockContext\n        };\n\n        if (shouldFetchContentBlocksFromBundle(pageGr)) {\n            contentBlocks = aceGlobalUtil.getDecompressedPageBundle(pageGr.getValue('bundle'));\n            aceAppBuilderUtil.processReusableBlocks(contentBlocks, cbPageParams);\n            aceAppBuilderUtil.mergeContentBlockContext(contentBlocks);\n            if (contentBlocks && contentBlocks.length) {\n                contentBlocks = aceAppBuilderUtil.eagerlyEvaluateDataBlocks(contentBlocks, cbPageParams);\n                cbPageParams = aceAppBuilderUtil.addDataBlockParamsToScriptVariables(contentBlocks, cbPageParams);\n                contentBlocks = aceAppBuilderUtil.processCachedContentBlocks(contentBlocks, cbPageParams);\n            } else {\n                contentBlocks = getContentBlocksLegacy(appConfigGr);\n            }\n        } else {\n            contentBlocks = getContentBlocksLegacy(appConfigGr);\n        }\n    } catch (e) {\n        gs.error(\"ACE Fetch Content Blocks: Error in parsing page composition: \" + e.toString());\n        contentBlocks = getContentBlocksLegacy(appConfigGr);\n    }\n\n    var result = {};\n    contentBlocks.forEach(function(cb) {\n        cb.isRoot = true;\n    });\n    result.contentBlocks = contentBlocks || [];\n    result.blockContext = blockContext;\n    return result;\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"application_id\",\n      \"label\": \"Application Id\",\n      \"description\": \"ACE Application Id\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"page_route\",\n      \"label\": \"Page Route\",\n      \"description\": \"ACE configured page route\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"page_params\",\n      \"label\": \"Page Params\",\n      \"description\": \"Page parameters(optional and required)\",\n      \"readOnly\": false,\n      \"fieldType\": \"json\",\n      \"valueType\": \"object\",\n      \"mandatory\": false,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5df6db91ebe4011090fa99602a52289e","value":"5df6db91ebe4011090fa99602a52289e"},"sys_update_name":"sys_ux_data_broker_transform_f779f69c47a8d6905e0819e0236d43d0","api_name":"sn_ace.V2 ACE Fetch Content Blocks","mutates_server_data":"true","name":"V2 ACE Fetch Content Blocks","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"All Day\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Coverage member sys id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Description of timeOff\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"End Date Time\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"End time of timeOff\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Full day timeOff\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Member\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Member sys id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Notes\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Proposed Cover\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Start Date Time\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Start time of timeOff\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of timeOff\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Time zone\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"TimeZone\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-14 11:32:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f7851e84eb0c3510b5673d9f7f52284c","sys_updated_by":"admin","sys_created_on":"2023-07-10 19:16:15","sys_name":"Update TimeOff","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n\tif (input.sysId) {\n\t\treturn new OCTimeOffUtil().update(input);\n\t}\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"Sys Id\",\r\n  \"description\": \"Sys id of timeOff\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"startDateTime\",\r\n  \"label\": \"Start Date Time\",\r\n  \"description\": \"Start time of timeOff\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"endDateTime\",\r\n  \"label\": \"End Date Time\",\r\n  \"description\": \"End time of timeOff\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"member\",\r\n  \"label\": \"Member\",\r\n  \"description\": \"Member sys id\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"proposedCover\",\r\n  \"label\": \"Proposed Cover\",\r\n  \"description\": \"Coverage member sys id\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"notes\",\r\n  \"label\": \"Notes\",\r\n  \"description\": \"Description of timeOff\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"timeZone\",\r\n  \"label\": \"TimeZone\",\r\n  \"description\": \"Time zone\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": \"\"\r\n},\r\n{\r\n  \"name\": \"allDay\",\r\n  \"label\": \"All Day\",\r\n  \"description\": \"Full day timeOff\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"boolean\",\r\n  \"mandatory\": false,\r\n  \"defaultValue\": false\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_f7851e84eb0c3510b5673d9f7f52284c","api_name":"sn_uib_on_call.Update TimeOff","mutates_server_data":"false","name":"Update TimeOff","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Languages enabled for Native Translation","sys_updated_on":"2024-10-24 13:21:50","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f78ed88a9f60121050df2e5af90a1c4f","sys_updated_by":"admin","sys_created_on":"2024-09-11 04:31:35","sys_name":"Languages enabled for Native Translation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"13","sys_tags":"","script":"function transform(input) {\n    var languages = {};\n    var installedLanguages = [];\n\tvar enabledLanguagesId = [];\n    var enabledLanguagesLabel = [];\n    try {\n        var languagesGr = new GlideRecord('sys_language');\n        languagesGr.addActiveQuery();\n        languagesGr.query();\n        while (languagesGr.next()) {\n            installedLanguages.push(languagesGr.getUniqueValue());\n        }\n        var nativeTranslationLangGr = new GlideRecord('sys_generative_ai_native_translation_langs');\n        nativeTranslationLangGr.addQuery('model.model', 'llm_generic');\n        nativeTranslationLangGr.query();\n\n        if (nativeTranslationLangGr.next()) {\n            var languageId = nativeTranslationLangGr.getValue('allowed_languages').split(',');\n            var languageLabel = nativeTranslationLangGr.getDisplayValue('allowed_languages').split(',');\n            languageId.forEach(function(id, index) {\n                var label = languageLabel[index];\n                if (installedLanguages.includes(id)) {\n                    enabledLanguagesId.push(id);\n                    enabledLanguagesLabel.push(label);\n                }\n\n            });\n\n            if (!gs.nil(languageId)) {\n                languages = {\n                    id: enabledLanguagesId.join(','),\n                    label: enabledLanguagesLabel.join(',')\n                }\n            }\n\n        }\n    } catch (error) {\n        gs.error(\"Failed to get languages enabled for native translation\" + error.toString());\n    }\n    return languages;\n\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_f78ed88a9f60121050df2e5af90a1c4f","api_name":"sn_nowassist_admin.Languages enabled for Native Translation","mutates_server_data":"false","name":"Languages enabled for Native Translation","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Dashboard Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"dashboard names\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-07-02 10:52:31","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f85b75374338c21016817a372ab8f275","sys_updated_by":"admin","sys_created_on":"2024-03-14 11:51:49","sys_name":"IsConfigurationPossible","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_created_by":"admin","sys_mod_count":"11","sys_tags":"","script":"function transform(input) {\n    var response = {};\n    var dashboards = input.dashboardId;\n    for (var i = 0; i < input.dashboardId.length; i++) {\n        response[dashboards[i]] = false;\n        if (dashboards[i] == 'benchmarks')\n            response[dashboards[i]] = new GlidePluginManager().isActive('sn_benchmarks');\n        var grObj = new GlideRecord('sys_db_object');\n        if (dashboards[i] == 'success-dashboard' && gs.getUser().hasRole(\"sn_sd.success_dashboard_admin\")) {\n            if (grObj.get('name', 'sn_sd_service_group')) {\n                var grServiceGroup = new GlideAggregate('sn_sd_service_group');\n                grServiceGroup.addAggregate(\"COUNT\");\n                grServiceGroup.query();\n                grServiceGroup.next();\n                response[dashboards[i]] = grServiceGroup.getAggregate(\"COUNT\") > 0;\n            }\n        }\n        if (dashboards[i] == 'operational-success' && gs.getUser().hasRole(\"sn_sd.success_dashboard_admin\")) {\n            if (grObj.get('name', 'sn_sd_kpi_category')) {\n                var grKpiCategory = new GlideAggregate('sn_sd_kpi_category');\n                grKpiCategory.addAggregate(\"COUNT\");\n                grKpiCategory.addQuery('dashboard_type', 'operational_success');\n                grKpiCategory.query();\n                grKpiCategory.next();\n                response[dashboards[i]] = grKpiCategory.getAggregate(\"COUNT\") > 0;\n            }\n        }\n    }\n    return response;\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"dashboardId\",\r\n  \"label\": \"Dashboard Id\",\r\n  \"description\": \"dashboard names\",\r\n  \"readOnly\": false,\r\n  \"mandatory\": true,\r\n  \"defaultValue\": []\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3cc85c0107303010c7d559bf1ad30022","value":"3cc85c0107303010c7d559bf1ad30022"},"sys_update_name":"sys_ux_data_broker_transform_f85b75374338c21016817a372ab8f275","api_name":"sn_sd.IsConfigurationPossible","mutates_server_data":"false","name":"IsConfigurationPossible","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Table Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table to check if it's one of cmdb_ci tables\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Given a table, this returns whether the table is an extension of cmdb_ci or not.","sys_updated_on":"2023-10-06 18:33:23","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f8679bd4ebf131100c0bb5d5d8522840","sys_updated_by":"maint","sys_created_on":"2023-10-06 18:30:02","sys_name":"Check if table is extension of cmdb_ci","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"maint","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n    var table = input.table;\n    if (!table) {\n        return {\n            result: false\n        };\n    }\n    var util = new sn_cmdb_pg_templts.CMDBPageTemplatesUtility();\n    return {\n        result: util.isExtensionOfCmdbCi(table)\n    };\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"table\",\r\n    \"label\": \"Table Name\",\r\n    \"fieldType\": \"json\",\r\n    \"readOnly\": false,\r\n    \"mandatory\": true,\r\n    \"description\": \"Table to check if it's one of cmdb_ci tables\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_f8679bd4ebf131100c0bb5d5d8522840","api_name":"sn_cmdb_ws.Check if table is extension of cmdb_ci","mutates_server_data":"false","name":"Check if table is extension of cmdb_ci","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"builds and returns result table to primary CI mapping","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f8850262772e25104d0a1605bc5a99df","sys_updated_by":"admin","sys_created_on":"2023-05-04 22:52:32","sys_name":"Get result table primary ci map","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"1","sys_tags":"","script":"function transform(input) {\n\tvar insightUtil = new sn_cmdb_ws.CMDBWsInsightUtil();\n\treturn insightUtil.buildResultTablePrimaryCiMap();\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_f8850262772e25104d0a1605bc5a99df","api_name":"sn_cmdb_ws.Get result table primary ci map","mutates_server_data":"false","name":"Get result table primary ci map","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys id of the record of the task record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task ID\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-20 22:02:32","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f99e4620539331102a13ddeeff7b1288","sys_updated_by":"admin","sys_created_on":"2023-12-20 21:22:30","sys_name":"DM - Submit certification task","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFn = function() {\n\t\tvar proxy = new sn_cmdb_ws.CMDBWsDMTaskUIProxy();\n\t\treturn proxy.submitCertificationTask(input.task_id);\n\t};\n\treturn new sn_cmdb_ws.CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Submit certification task\", wrapperFn);\n}","acl_failure_result":"","props":"[ \r\n  {\r\n     \"name\": \"task_id\",\r\n     \"label\": \"Task ID\",\r\n     \"description\": \"Sys id of the record of the task record\",\r\n     \"readOnly\": false,\r\n     \"fieldType\": \"string\",\r\n     \"mandatory\": true,\r\n     \"defaultValue\": \"\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_f99e4620539331102a13ddeeff7b1288","api_name":"sn_cmdb_ws.DM - Submit certification task","mutates_server_data":"true","name":"DM - Submit certification task","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n\"message\" : \"Recommended Participants\",\n\"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-07-02 17:48:38","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f9ac75e5872b4110dcc2b8c4dabb35e7","sys_updated_by":"admin","sys_created_on":"2022-05-18 20:24:10","sys_name":"Refresh User Presence","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\nvar output = {};\nvar sowCollabUtils = new sn_sow_collab.SowCollabUtils();\noutput.userData = sowCollabUtils.refreshUserPreference(input.recommendedParticipants);\nreturn output;\n}","acl_failure_result":"","props":"[ \n{\n    \"name\": \"recommendedParticipants\",\n    \"label\": \"Recommended Participants\",\n    \"description\": \"Recommended Participants\",\n    \"readOnly\": false,\n    \"fieldType\": \"array\",\n    \"mandatory\": true,\n    \"defaultValue\": \"[]\"\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/fa27a0dd53423010bf68ddeeff7b12ac","value":"fa27a0dd53423010bf68ddeeff7b12ac"},"sys_update_name":"sys_ux_data_broker_transform_f9ac75e5872b4110dcc2b8c4dabb35e7","api_name":"sn_sow_collab.Refresh User Presence","mutates_server_data":"false","name":"Refresh User Presence","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Comma separated list of task ids\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Task IDs\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Cancels data manager task","sys_updated_on":"2023-09-13 22:20:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"f9d38888b751411094bb21208e11a9e8","sys_updated_by":"maint","sys_created_on":"2022-01-21 23:19:13","sys_name":"Cancel data manager task","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"19","sys_tags":"","script":"function transform(input) {\n\tvar wrapperFn = function () {\n\t\tvar taskIds = input.taskIds;\n\t\tvar _taskIds = taskIds.split(\",\");\n\t\tfor (var i = 0; i < _taskIds.length; i++) {\n\t\t\tvar uiProxy = new sn_cmdb_ws.CMDBWsDMTaskUIProxy();\n\t\t\tuiProxy.cancelTask(_taskIds[i]);\n\t\t}\n\t};\n\n\treturn new CMDBWsDataBrokerHandler().execute(\"sn_cmdb_ws_dm\", \"Cancel data manager task\", wrapperFn);\n}","acl_failure_result":"","props":"[{\r\n  \"name\": \"taskIds\",\r\n  \"label\": \"Task IDs\",\r\n  \"description\": \"Comma separated list of task ids\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_f9d38888b751411094bb21208e11a9e8","api_name":"sn_cmdb_ws.Cancel data manager task","mutates_server_data":"true","name":"Cancel data manager task","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Workspace\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-05-17 08:50:36","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fa55d21a53c50210abd8ddeeff7b12fc","sys_updated_by":"admin","sys_created_on":"2024-03-22 08:12:21","sys_name":"Get PWD Reset Verify Page Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"6","sys_tags":"","script":"function transform(input) {\n\treturn new sn_uib_pwd_reset.PwdResetUXFVerifyProcessor().getPageInfo(input.token, input.workspace);\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  },{\r\n        \"name\": \"workspace\",\r\n        \"label\": \"Workspace\",\r\n        \"description\": \"Workspace\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_fa55d21a53c50210abd8ddeeff7b12fc","api_name":"sn_uib_pwd_reset.Get PWD Reset Verify Page Details","mutates_server_data":"false","name":"Get PWD Reset Verify Page Details","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Active\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Active or deactive\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Record to edit\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Target table to edit\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Enable IAR Record","sys_updated_on":"2022-06-10 12:22:24","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fa7980af87ab0110a4a2c077f6cb0bfb","sys_updated_by":"admin","sys_created_on":"2022-05-24 17:29:49","sys_name":"EnableIARRecord","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"8","sys_tags":"","script":"function transform(input) {\n    var gr = new GlideRecord(input.table);\n    gr.addQuery(\"sys_id\", input.recordId);\n    gr.query();\n    var gr1 = new global.ACEAppBuilderGlobalScopedUtil();\n    if (gr.next()) {\n       var result =  gr1.updateRecord(input.table, input.recordId, {\n            active: input.active\n        });\n    }\n\tvar grNew = new GlideRecord(input.table);\n    grNew.addQuery(\"sys_id\", input.recordId);\n\tgrNew.query();\n\tif (grNew.next()) {\n\t\tvar activeFlag = grNew.getValue('active') == '1' ? true : false;\n\t\treturn activeFlag == input.active;\n    }\n\treturn false;\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"table\",\r\n    \"label\": \"Table\",\r\n    \"description\": \"Target table to edit\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n {\r\n  \"name\": \"recordId\",\r\n  \"label\": \"Record\",\r\n  \"description\": \"Record to edit\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n},\r\n {\r\n  \"name\": \"active\",\r\n  \"label\": \"Active\",\r\n  \"description\": \"Active or deactive\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"boolean\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sys_ux_data_broker_transform_fa7980af87ab0110a4a2c077f6cb0bfb","api_name":"sn_oe_sfs.EnableIARRecord","mutates_server_data":"true","name":"EnableIARRecord","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2023-11-23 21:36:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fa9dee3f53267110ad0fddeeff7b12cb","sys_updated_by":"admin","sys_created_on":"2023-11-23 19:30:37","sys_name":"Get comm channels","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    var res = [];\n    var icons = {\n        \"email\": \"envelope-outline\",\n        \"voice\": \"phone-outline\",\n        \"sms\": \"chat-outline\",\n        \"teams\": \"microsoft-teams-outline\",\n        \"mobile_notification\": \"cellphone-outline\",\n        \"slack\": \"slack-outline\"\n    };\n    res.push({\n        'label': gs.getMessage('Email'),\n        'id': 'email',\n        'icon': icons['email'],\n        'selected': false,\n        'sys_id': '8478457a5f322300fe7ca184ff466622'\n    });\n    var onCallCommon = new global.OnCallCommon();\n    if (onCallCommon.isNotifyPluginInstalled()) {\n        res.push({\n            'label': gs.getMessage('Call'),\n            'id': 'voice',\n            'icon': icons['voice'],\n            'selected': false,\n            'sys_id': 'b23a01ba5f322300fe7ca184ff4666e8'\n        }, {\n            'label': gs.getMessage('SMS'),\n            'id': 'sms',\n            'icon': icons['sms'],\n            'selected': false,\n            'sys_id': '283a41ba5f322300fe7ca184ff46666d'\n        });\n    }\n    if (onCallCommon.isTeamsPluginInstalled())\n        res.push({\n            'label': gs.getMessage('MS Teams'),\n            'id': 'teams',\n            'icon': icons['teams'],\n            'selected': false,\n            'sys_id': '4b0edbf51baaf010b8fbeb15624bcbfd'\n        });\n    if (onCallCommon.isMobilePushInstalled())\n        res.push({\n            'label': gs.getMessage('Mobile app push notification'),\n            'id': 'mobile_notification',\n            'icon': icons['mobile_notification'],\n            'selected': false,\n            'sys_id': '27435c0cc3013010f208ce72a740dd26'\n        });\n    if (onCallCommon.isSlackPluginInstalled())\n        res.push({\n            'label': 'Slack',\n            'id': 'slack',\n            'icon': icons['slack'],\n            'selected': false,\n            'sys_id': 'aae9b9a8c7430010819d18b1c7c260dd'\n        });\n\n    return res;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_fa9dee3f53267110ad0fddeeff7b12cb","api_name":"sn_uib_on_call.Get comm channels","mutates_server_data":"false","name":"Get comm channels","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"description\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-12 05:44:22","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"faa48bed538bb110ad0fddeeff7b12c9","sys_updated_by":"admin","sys_created_on":"2023-12-11 17:35:53","sys_name":"Activate shift","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"5","sys_tags":"","script":"function transform(input) {\n    var sysId = input.sysId;\n    if (!sysId) return;\n    var rotaGr = new GlideRecord('cmn_rota');\n    if (rotaGr.get(sysId)) {\n        rotaGr.setValue('active', true);\n        rotaGr.update();\n    }\n}","acl_failure_result":"","props":"[\r\n{\r\n  \"name\": \"sysId\",\r\n  \"label\": \"sysId\",\r\n  \"description\": \"description\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_faa48bed538bb110ad0fddeeff7b12c9","api_name":"sn_uib_on_call.Activate shift","mutates_server_data":"true","name":"Activate shift","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Group Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Group sys id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Manager level\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2023-12-21 10:40:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"faa8de9853833110ad0fddeeff7b1251","sys_updated_by":"admin","sys_created_on":"2023-12-07 17:11:44","sys_name":"Get manager value","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_created_by":"admin","sys_mod_count":"16","sys_tags":"","script":"function transform(input) {\n    var result = {};\n    if (!input.groupSysId || !input.managerLevel) return result;\n\n    var sysId = input.groupSysId;\n    var managerLevel = input.managerLevel;\n    var onCallEscalationPolicyUIBUtils = new sn_uib_on_call.OnCallEscalationPolicyUIBUtils();\n    result.name = onCallEscalationPolicyUIBUtils.getManagerName(sysId, managerLevel);\n    result.levels = parseInt(onCallEscalationPolicyUIBUtils.getManagerLevels(sysId), 10);\n    return result;\n}","acl_failure_result":"","props":"[\r\n\t{\r\n\t\t\"name\": \"groupSysId\",\r\n\t\t\"label\": \"Group Sys Id\",\r\n\t\t\"description\": \"Group sys id\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"string\",\r\n\t\t\"mandatory\": true,\r\n\t\t\"defaultValue\": \"\"\r\n\t},\r\n      {\r\n\t\t\"name\": \"managerLevel\",\r\n\t\t\"label\": \"Manager level\",\r\n\t\t\"description\": \"Manager level\",\r\n\t\t\"readOnly\": false,\r\n\t\t\"fieldType\": \"integer\",\r\n\t\t\"mandatory\": true,\r\n\t\t\"defaultValue\": {}\r\n\t}\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7d5488e85342211039ddddeeff7b1229","value":"7d5488e85342211039ddddeeff7b1229"},"sys_update_name":"sys_ux_data_broker_transform_faa8de9853833110ad0fddeeff7b1251","api_name":"sn_uib_on_call.Get manager value","mutates_server_data":"false","name":"Get manager value","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Token\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-04-25 08:10:40","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fb3cb57e536582101c02ddeeff7b121a","sys_updated_by":"admin","sys_created_on":"2024-04-17 16:16:32","sys_name":"Get PWD Reset Page Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_created_by":"admin","sys_mod_count":"2","sys_tags":"","script":"function transform(input) {\n\treturn  new sn_uib_pwd_reset.PwdResetUXFResetProcessor().getPageInfo(input.token);\n}","acl_failure_result":"","props":"[\r\n{\r\n      \"name\": \"token\",\r\n      \"label\": \"Token\",\r\n      \"description\": \"\",\r\n      \"readOnly\": false,\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": true,\r\n      \"defaultValue\": \"\"\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/75a67dbd9350021077d0ca32b38918b3","value":"75a67dbd9350021077d0ca32b38918b3"},"sys_update_name":"sys_ux_data_broker_transform_fb3cb57e536582101c02ddeeff7b121a","api_name":"sn_uib_pwd_reset.Get PWD Reset Page Details","mutates_server_data":"false","name":"Get PWD Reset Page Details","output_schema":"","sys_policy":"read"},{"private":"false","required_translations":"[ {\n  \"message\" : \"Action\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Action name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Object containing payload data\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Payload\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"1. Get access results","sys_updated_on":"2024-06-04 11:53:39","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fb527711930502102a0d4c5284891859","sys_updated_by":"admin","sys_created_on":"2024-03-19 12:24:16","sys_name":"Access simulator data broker","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\n    const aaUtil = new sn_access_analyzer.AccessAnalyzerUtil();\n\n    const SimulatorUtil = {\n\n        getAccessResult: (payload) => aaUtil.getDebugLog(payload.request, payload.includeDetails),\n\n        saveSimulatorSetting: aaUtil.saveSimulatorSetting,\n\n        /** \n         * Below method will call \"simulateAccess\" scriptable API and validate the request.\n         * It will provide validation result if any error occurs else it will give debug logs.\n         */\n        getSimulatedResult: (payload) => aaUtil.getSimulatedResult(payload.request, payload.includeDetails),\n\n        isInheritedRole: aaUtil.isInheritedRole,\n\n        getAccessSimulatorChanges: (payload) => aaUtil.getAccessSimulatorChanges(payload)\n    };\n\n    return {\n        request: input,\n        result: SimulatorUtil[input.action](input.payload)\n    };\n}","acl_failure_result":"","props":"[\r\n  {\r\n    \"name\": \"action\",\r\n    \"label\": \"Action\",\r\n    \"description\": \"Action name\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"string\",\r\n    \"mandatory\": true\r\n  },\r\n {\r\n    \"name\": \"payload\",\r\n    \"label\": \"Payload\",\r\n    \"description\": \"Object containing payload data\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": true\r\n  }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/21d5e77677171110638cfe21fe5a993c","value":"21d5e77677171110638cfe21fe5a993c"},"sys_update_name":"sys_ux_data_broker_transform_fb527711930502102a0d4c5284891859","api_name":"sn_access_analyzer.Access simulator data broker","mutates_server_data":"true","name":"Access simulator data broker","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Related List\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"SysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-11 13:27:44","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fc9c5b2857c51110403e8f90ac94f9e1","sys_updated_by":"admin","sys_created_on":"2022-07-29 14:17:41","sys_name":"Change Impact Count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\tif (!input.sysId || !input.relatedList)\n\t\treturn [];\n\n\tvar returnListData = [];\n\tfor (var i = 0; i < input.relatedList.length; i++) {\n\t\tvar tableData = input.relatedList[i];\n\t\tvar countGr = new GlideRecordSecure(tableData.table);\n\t\tif (tableData.countQuery)\n\t\t\tcountGr.addEncodedQuery(tableData.countQuery, true);\n\t\telse\n\t\t\tcountGr.addQuery('task', input.sysId);\n\n\t\tcountGr.query();\n\t\tif (countGr.next())\n\t\t\ttableData.count = countGr.getRowCount();\n\t\telse\n\t\t\ttableData.count = 0;\n\n\t\treturnListData.push(tableData);\n\t}\n\treturn returnListData;\n}","acl_failure_result":"","props":"[\n{\n  \"name\": \"sysId\",\n  \"label\": \"SysId\",\n  \"description\": \"Sys Id\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n},\n{\n  \"name\": \"relatedList\",\n  \"label\": \"Related List\",\n  \"description\": \"Related List\",\n  \"readOnly\": false,\n  \"fieldType\": \"string\",\n  \"mandatory\": true,\n  \"defaultValue\": \"\"\n}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bccbdbb023213010785ddc1756bf6579","value":"bccbdbb023213010785ddc1756bf6579"},"sys_update_name":"sys_ux_data_broker_transform_fc9c5b2857c51110403e8f90ac94f9e1","api_name":"sn_sow_chg.Change Impact Count","mutates_server_data":"false","name":"Change Impact Count","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Detection Impact\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Product Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2024-09-25 07:52:20","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fc9dca8f9fc81210afb85c1eca0a1c9a","sys_updated_by":"admin","sys_created_on":"2024-08-20 18:50:35","sys_name":"Update Detection Impact","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_created_by":"admin","sys_mod_count":"59","sys_tags":"","script":"function transform(input) {\n    try {\n        var naaUtil = new sn_nowassist_admin.NowAdminAssistUtil();\n        var grUtil = new sn_nowassist_admin.NowAssistAdminGuardrails();\n        var metaUtil = new sn_nowassist_admin.NowAdminAssistMetadata();\n        var skills = naaUtil.getSkillsOfProduct(input?.productId);\n        var totalResult = [];\n        totalResult.push(...grUtil.updateDetectionImpact(skills, input?.detectionImpact, metaUtil.NOW_ASSIST_GUARDIAN?.OFFENSIVENESS_TYPE));\n        const success = totalResult.every(obj => obj.status === \"success\");\n        return success;\n    } catch (error) {\n        gs.error(\"Error occurred while updating detection impact : \" + error.toString());\n    }\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"productId\",\r\n        \"label\": \"Product Id\",\r\n        \"description\": \"Product Id\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\":\"detectionImpact\",\r\n        \"label\":\"Detection Impact\",\r\n        \"description\" : \"Detection Impact\",\r\n        \"readOnly\":\"false\",\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c395aaa53003110453cddeeff7b123c","value":"7c395aaa53003110453cddeeff7b123c"},"sys_update_name":"sys_ux_data_broker_transform_fc9dca8f9fc81210afb85c1eca0a1c9a","api_name":"sn_nowassist_admin.Update Detection Impact","mutates_server_data":"true","name":"Update Detection Impact","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Sys Id\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Data broker to fetch data required for Branding Settings page in CI Admin Console","sys_updated_on":"2024-08-21 04:58:56","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fd4cb9fdc35a01104b8e88c7c840dd0d","sys_updated_by":"admin","sys_created_on":"2022-03-18 11:42:39","sys_name":"CI Branding Settings Helper","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","sys_mod_count":"68","sys_tags":"","script":"function transform(input) {\n\n    function _getUploadedFileName(attachmentSysId) {\n        var gr = new GlideRecord('sys_attachment');\n        if (gr.get(attachmentSysId)) return gr.getValue('file_name');\n        return 'icon';\n    }\n\n    function _getCategories() {\n        var categories = [{\n                'id': 'category_#0',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Main chat window'),\n                'icons': [{\n                        'icon_value': 'new-conversation',\n                        'default_icon': '/new-conversation.svg',\n                        'display_state': 'input'\n                    },\n                    {\n                        'icon_value': 'end-conversation',\n                        'default_icon': '/end-conversation.svg',\n                        'display_state': 'input'\n                    },\n                    {\n                        'icon_value': 'contact-support',\n                        'default_icon': '/contact-support.svg',\n                        'display_state': 'input'\n                    },\n                    {\n                        'icon_value': 'emoji',\n                        'default_icon': '/emoji.svg',\n                        'display_state': 'input'\n                    },\n                    {\n                        'icon_value': 'send',\n                        'default_icon': '/send.svg',\n                        'display_state': 'input'\n                    },\n                    {\n                        'icon_value': 'attachment',\n                        'default_icon': '/attachment.svg',\n                        'display_state': 'input'\n                    },\n                    {\n                        'icon_value': 'masked',\n                        'default_icon': '/masked.svg',\n                        'display_state': 'input'\n                    },\n                    {\n                        'icon_value': 'unmasked',\n                        'default_icon': '/unmasked.svg',\n                        'display_state': 'input'\n                    },\n                ]\n            },\n            {\n                'id': 'category_#1',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'All topics window'),\n                'icons': [{\n                        'icon_value': 'topic-list-back',\n                        'default_icon': '/topic-list-back.svg',\n                        'display_state': 'topicListOpen'\n                    },\n                    {\n                        'icon_value': 'topic-list-search',\n                        'default_icon': '/topic-list-search.svg',\n                        'display_state': 'topicListOpen'\n                    }\n                ]\n            },\n            {\n                'id': 'category_#2',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Support menu'),\n                'icons': [{\n                        'icon_value': 'contact-support-close',\n                        'default_icon': '/contact-support-close.svg',\n                        'display_state': 'contactSupportMenuOpen'\n                    },\n                    {\n                        'icon_value': 'audio-alert',\n                        'default_icon': '/audio-alert.svg',\n                        'display_state': 'contactSupportMenuOpen'\n                    },\n                    {\n                        'icon_value': 'notification',\n                        'default_icon': '/notification.svg',\n                        'display_state': 'contactSupportMenuOpen'\n                    },\n                    {\n                        'icon_value': 'attachment',\n                        'default_icon': '/notification.svg',\n                        'display_state': 'contactSupportMenuOpen'\n                    }\n                ]\n            },\n            {\n                'id': 'category_#3',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'End conversation page'),\n                'icons': [{\n                    'icon_value': 'modal-close',\n                    'default_icon': '/modal-close.svg',\n                    'display_state': 'modalOpen'\n                }]\n            }\n        ];\n        return categories;\n    }\n\n    function _getIconCategory(id) {\n        var categories = _getCategories();\n        for (var i = 0; i < categories.length; i++) {\n            var icons = categories[i].icons;\n            for (var j = 0; j < icons.length; j++) {\n                if (icons[j].icon_value == id) return {\n                    'category_id': categories[i].id,\n                    'icon': icons[j]\n                };\n            }\n        }\n        return null;\n    }\n\n    function _getIcons() {\n        var response = {};\n        var gr = new GlideRecord('va_branding_contact_menu');\n        gr.addQuery('branding', input.sysId);\n        gr.addQuery('type', 'icon');\n        gr.query();\n        while (gr.next()) {\n            var iconId = gr.getValue('value');\n            var categoryData = _getIconCategory(iconId);\n            if (!categoryData) continue;\n            var category = categoryData.category_id;\n            if (response[category] == undefined) response[category] = {};\n            var _iconPayload = {\n                'id': gr.getUniqueValue(),\n                'label': gr.getDisplayValue('label'),\n                'highlight_icon': iconId,\n                'display_state': categoryData.icon.display_state,\n                'default_icon': categoryData.icon.default_icon,\n                'default_icon_url': categoryData.icon.default_icon,\n                'display_default_icon': gr.getValue('display_default_icon') == '1',\n                '__type': 'icon_data'\n            };\n            if (gr.getValue('display_default_icon').toString() == 'true') {\n                _iconPayload.icon = _iconPayload.default_icon;\n                _iconPayload.icon_url = _iconPayload.default_icon_url;\n                _iconPayload.icon_file_name = _getUploadedFileName(_iconPayload.default_icon);\n            } else {\n                _iconPayload.icon = gr.getValue('icon');\n                _iconPayload.icon_url = (gr.getDisplayValue('icon') ? ('/' + gr.getDisplayValue('icon')) : '');\n                _iconPayload.icon_file_name = _getUploadedFileName(gr.getValue('icon'));\n\n\n\n            }\n            response[category][iconId] = _iconPayload;\n        }\n        return response;\n    }\n\n    function parseIconResponse() {\n        var response = [];\n        var categories = _getCategories();\n        var groupedIcons = _getIcons();\n        categories.forEach(function(category) {\n            response.push({\n                '__type': 'group_name',\n                'label': category.label,\n                'id': null\n            });\n            category.icons.forEach(function(icon, index) {\n                if (groupedIcons[category.id] && groupedIcons[category.id][icon.icon_value]) {\n                    var iconData = groupedIcons[category.id][icon.icon_value];\n                    iconData.__odd = (index % 2 == 0);\n                    response.push(iconData);\n                }\n            });\n        });\n        return response;\n    }\n\n    function _fetchStandardMenuItems() {\n        var response = [];\n        var gr = new GlideRecord('va_branding_contact_menu');\n        var query = 'type!=Icon^ORtype=NULL^branding=' + GlideStringUtil.escapeQueryTermSeparator(input.sysId);\n        gr.addEncodedQuery(query, true);\n        gr.query();\n        while (gr.next()) {\n            response.push({\n                'icon': gr.getDisplayValue('icon'),\n                'label': gr.getDisplayValue('label'),\n                'type': gr.getDisplayValue('type'),\n                'value': gr.getValue('value'),\n                'sys_id': gr.getUniqueValue()\n            });\n        }\n        return response;\n    }\n\n    function getMenuItems() {\n        return {\n            'translated_headers': {\n                'icon': sn_i18n.Message.getMessage(\"sn_oe_sfs\",\"Icon\"),\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",\"Label\"),\n                'type': sn_i18n.Message.getMessage(\"sn_oe_sfs\",\"Type\"),\n                'value': sn_i18n.Message.getMessage(\"sn_oe_sfs\",\"Value\")\n            },\n            'menu_items': _fetchStandardMenuItems()\n        };\n    }\n\n    function parseIconsPayloadForWebclinetProp(payload) {\n        return payload.reduce(function(acc, item) {\n            if (item.__type == 'icon_data') {\n                acc[item.highlight_icon] = item.icon_url ? item.icon : null;\n            }\n            return acc;\n        }, {});\n    }\n\n    function getColorFieldsWithGroups() {\n        return [{\n                'type': 'header',\n                'key': '',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Chat Window'),\n                'odd': true,\n                'default_value': null\n            },\n            {\n                'type': 'color',\n                'key': 'header_bg_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Chat Header Background'),\n                'odd': true,\n                'default_value': '#4E7D88'\n            },\n            {\n                'type': 'color',\n                'key': 'bg_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Chat Background'),\n                'odd': false,\n                'default_value': '#ffffff'\n            },\n            {\n                'type': 'color',\n                'key': 'menu_icon_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Menu Icon'),\n                'odd': true,\n                'default_value': '#ffffff'\n            },\n            {\n                'type': 'color',\n                'key': 'header_font_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Chat Header Font'),\n                'odd': false,\n                'default_value': '#ffffff'\n            },\n            {\n                'type': 'color',\n                'key': 'input_bg_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Input Background'),\n                'odd': true,\n                'default_value': '#fafafa'\n            },\n            {\n                'type': 'header',\n                'key': '',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Chat messages'),\n                'odd': true,\n                'default_value': null\n            },\n            {\n                'type': 'color',\n                'key': 'bubble_bg_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'User Bubble Background'),\n                'odd': true,\n                'default_value': '#68A1AF'\n            },\n            {\n                'type': 'color',\n                'key': 'agent_bubble_bg_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Agent Bubble Background'),\n                'odd': false,\n                'default_value': '#E9EDF1'\n            },\n            {\n                'type': 'color',\n                'key': 'bot_bubble_bg_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Bot Bubble Background'),\n                'odd': true,\n                'default_value': '#E9EDF1'\n            },\n            {\n                'type': 'color',\n                'key': 'link_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Link'),\n                'odd': false,\n                'default_value': '#68A1AF'\n            },\n            {\n                'type': 'color',\n                'key': 'button_bg_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Button Background'),\n                'odd': true,\n                'default_value': '#fff'\n            },\n            {\n                'type': 'color',\n                'key': 'notification_bg',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Notification Background'),\n                'odd': false,\n                'default_value': null\n            },\n            {\n                'type': 'color',\n                'key': 'bubble_font_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'User Bubble Font'),\n                'odd': true,\n                'default_value': '#ffffff'\n            },\n            {\n                'type': 'color',\n                'key': 'agent_bubble_font_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Agent Bubble Font'),\n                'odd': false,\n                'default_value': '#343D47'\n            },\n            {\n                'type': 'color',\n                'key': 'bot_bubble_font_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Bot Bubble Font'),\n                'odd': true,\n                'default_value': '#343D47'\n            },\n            {\n                'type': 'color',\n                'key': 'disabled_link_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Link disabled'),\n                'odd': false,\n                'default_value': '#B8B8B8'\n            },\n            {\n                'type': 'color',\n                'key': 'notification_txt',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Notification Text'),\n                'odd': true,\n                'default_value': null\n            },\n            {\n                'type': 'header',\n                'key': '',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Others'),\n                'odd': true,\n                'default_value': null\n            },\n            {\n                'type': 'color',\n                'key': 'system_message_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'System message'),\n                'odd': true,\n                'default_value': '#7f8e9f'\n            },\n            {\n                'type': 'color',\n                'key': 'category_bg_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Category background'),\n                'odd': false,\n                'default_value': '#efeff4'\n            },\n            {\n                'type': 'color',\n                'key': 'seperator_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Separator'),\n                'odd': true,\n                'default_value': '#B8B8B8'\n            },\n            {\n                'type': 'color',\n                'key': 'timestamp_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Time Stamp'),\n                'odd': false,\n                'default_value': '#767676'\n            },\n            {\n                'type': 'color',\n                'key': 'category_font_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Category font'),\n                'odd': true,\n                'default_value': '#6d6d72'\n            },\n            {\n                'type': 'color',\n                'key': 'load_animation_color',\n                'label': sn_i18n.Message.getMessage(\"sn_oe_sfs\",'Loading Animation'),\n                'odd': false,\n                'default_value': '#293e40'\n            }\n        ];\n    }\n\n    function getDefaultBrandingSettings() {\n        var brandingSettings = {\n            'header_label': 'Now Support',\n            'menu_title': 'Contact Support',\n            'msg_delay': '500',\n            'support_email': 'support@servicenow.com',\n            'support_email_label': 'Send Email to Customer Support',\n            'support_hours_label': 'Contact Live Agent',\n            'support_phone': '1-800-245-6000',\n            'support_phone_label': 'Call Support (Daily 5AM - 11 PM)',\n            'type_presence_delay': '1000',\n            'va_logo': '735f7f1c73203300e985658b4cf6a78b.iix',\n            'notification_txt': '#0F78C4',\n            'notification_bg': '#efeff4',\n            'requestor_client_version': 'DEBUG_VERSION'\n        };\n        var colorFields = getColorFieldsWithGroups();\n        colorFields.forEach(function(color) {\n            if (color.key) {\n                brandingSettings[color.key] = color.default_value;\n            }\n        });\n        return brandingSettings;\n    }\n\n    /* Helper APIs */\n    var api = {\n        'menu_item_icons': null,\n        'menu_item_standard': null,\n        'webclient_icons_prop': null,\n        'color_fields_with_groups': null,\n        'branding_settings': null\n    };\n\n    if (!input.sysId) return api;\n    api.menu_item_icons = parseIconResponse();\n    api.menu_item_standard = getMenuItems();\n    api.webclient_icons_prop = parseIconsPayloadForWebclinetProp(api.menu_item_icons);\n    api.color_fields_with_groups = getColorFieldsWithGroups();\n    api.branding_settings = getDefaultBrandingSettings();\n    return api;\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"sysId\",\n      \"label\": \"Sys Id\",\n      \"description\": \"\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_ux_data_broker_transform_fd4cb9fdc35a01104b8e88c7c840dd0d","api_name":"sn_oe_sfs.CI Branding Settings Helper","mutates_server_data":"false","name":"CI Branding Settings Helper","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Record Sys ID\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Source\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2022-10-12 05:34:10","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fd93776c87e25110a4b9ca29dabb3568","sys_updated_by":"admin","sys_created_on":"2022-10-12 05:34:10","sys_name":"On-Call Escalation Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7e3c2481539260100c54ddeeff7b127b","value":"7e3c2481539260100c54ddeeff7b127b"},"sys_created_by":"admin","sys_mod_count":"0","sys_tags":"","script":"function transform(input) {\n\treturn new sn_sow_on_call.OnCallEscalationSOWUtil().getEscalationDetails(input.source, input.table);\n}","acl_failure_result":"","props":"[\n\t{\n\t\t\"name\": \"source\",\n\t\t\"label\": \"Source\",\n\t\t\"description\": \"Record Sys ID\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": \"\"\n\t},\n        {\n\t\t\"name\": \"table\",\n\t\t\"label\": \"Table\",\n\t\t\"description\": \"Table\",\n\t\t\"readOnly\": false,\n\t\t\"fieldType\": \"string\",\n\t\t\"mandatory\": true,\n\t\t\"defaultValue\": \"\"\n\t}\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7e3c2481539260100c54ddeeff7b127b","value":"7e3c2481539260100c54ddeeff7b127b"},"sys_update_name":"sys_ux_data_broker_transform_fd93776c87e25110a4b9ca29dabb3568","api_name":"sn_sow_on_call.On-Call Escalation Details","mutates_server_data":"false","name":"On-Call Escalation Details","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Property Name\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Property Value\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Update IAR System Properties","sys_updated_on":"2022-05-09 13:18:11","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fdb47d2c873a8110a4a2c077f6cb0bdf","sys_updated_by":"admin","sys_created_on":"2022-04-08 10:22:44","sys_name":"Update IAR system Property","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"12","sys_tags":"","script":"function transform(input) {\n\tvar iarStatus = gs.getProperty(input.prop_name) === \"true\" ? true : false;\n    if (input.prop_name !== \"\" && input.prop_value !== \"\" && input.prop_value !== iarStatus) {\n        var aceUtil = new global.ACEAppBuilderGlobalScopedUtil();\n        aceUtil.updateRecord(\"sys_properties\", \"b592097d531210107a1cddeeff7b120c\", {\n            value: input.prop_value\n        });\n    }\n\treturn [];\n}","acl_failure_result":"","props":"[\n  {\n      \"name\": \"prop_name\",\n      \"label\": \"Property Name\",\n      \"description\": \"Property Name\",\n      \"readOnly\": false,\n      \"fieldType\": \"string\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  },\n{\n      \"name\": \"prop_value\",\n      \"label\": \"Property Value\",\n      \"description\": \"Property Value\",\n      \"readOnly\": false,\n      \"fieldType\": \"boolean\",\n      \"mandatory\": true,\n      \"defaultValue\": \"\"\n  }\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sys_ux_data_broker_transform_fdb47d2c873a8110a4a2c077f6cb0bdf","api_name":"sn_cp_sfs.Update IAR system Property","mutates_server_data":"false","name":"Update IAR system Property","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"Get homepage information such as plugins, active configurations, system properties, and return in the format { thing: active }","sys_updated_on":"2023-05-24 21:46:18","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fe03fea4f4c3e510f8774237d5e73ff9","sys_updated_by":"admin","sys_created_on":"2023-05-23 17:35:28","sys_name":"Get homepage information","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","sys_mod_count":"23","sys_tags":"","script":"function transform() {\n\tvar result = {\n\t\t'itsm_active': false,\n\t\t'hr_active': false,\n\t\t'hr_all_active': false,\n\t\t'notifications_enabled': false,\n\t\t'ais_enabled': false,\n\t\t'va_enabled': false\n\t};\n\n\t// plugin enabled check\n\tvar plugins = [\n\t\t'com.glide.cs.chatbot',\n\t\t'sn_itsm_va',\n\t\t'sn_iar_hr',\n\t\t'com.snc.notify.twilio_direct',\n\t\t'com.sn.va.teams',\n\t\t'com.sn.va.slack'\n\t];\n\tplugins.forEach(function(plugin) {\n\t\tresult[plugin.replaceAll('.', '_')] = GlidePluginManager.isActive(plugin);\n\t});\n\n\t// check itsm iar active\n\tvar gr = new GlideRecord('sys_cs_auto_resolution_configuration');\n\tgr.addActiveQuery();\n\tgr.addQuery('target_table_name', 'incident');\n\tgr.query();\n\twhile (gr.next()) {\n\t\tresult.itsm_active = true;\n\t}\n\n\t// check hr iar active\n\tvar hr_inactive = false;\n\tgr = new GlideRecord('sys_cs_auto_resolution_configuration');\n\tgr.addQuery('target_table_name', 'CONTAINS', 'sn_hr');\n\tgr.query();\n\twhile (gr.next()) {\n\t\tif (gr.getValue('active') == true) result.hr_active = true;\n\t\tif (gr.getValue('active') == false) hr_inactive = true;\n\t}\n\tif (result.hr_active && !hr_inactive) result.hr_all_active = true;\n\t\n\t// notifications enabled check\n\tgr = new GlideRecord('sys_cs_channel');\n\tgr.get('ea0cb816732110104a905ee515f6a7b5'); // mweb channel\n\tresult.notifications_enabled = gr.getValue('enable_notification') == \"1\" ? true : false;\n\n\t// va on portal check\n\tgr = new GlideRecord('sp_agent_chat_config');\n\tgr.addActiveQuery();\n\tgr.query();\n\tif (gr.next()) {\n\t\tresult.va_enabled = true;\n\t}\n\n\t// ai search check\n\tresult.ais_enabled = new sn_ais.StatusApi().isAisEnabled();\n\n\treturn result;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sys_ux_data_broker_transform_fe03fea4f4c3e510f8774237d5e73ff9","api_name":"sn_oe_sfs.Get homepage information","mutates_server_data":"false","name":"Get homepage information","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Filter\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"List of filters need to be applied\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"","sys_updated_on":"2021-08-27 10:56:43","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fe436190532530103676ddeeff7b12c3","sys_updated_by":"admin","sys_created_on":"2021-07-20 15:00:52","sys_name":"HAM - Missing data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_created_by":"admin","sys_mod_count":"4","sys_tags":"","script":"function transform(input) {\n\treturn {\n        \"missingData\": new AssetWorkspaceUtil().getMissingData(input)\n    };\n}","acl_failure_result":"","props":"[\r\n{\r\n        \"name\": \"filter\",\r\n        \"label\": \"Filter\",\r\n        \"description\": \"List of filters need to be applied\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/54b90b435d70f410f87728dca52fcfea","value":"54b90b435d70f410f87728dca52fcfea"},"sys_update_name":"sys_ux_data_broker_transform_fe436190532530103676ddeeff7b12c3","api_name":"sn_itam_workspace.HAM - Missing data","mutates_server_data":"false","name":"HAM - Missing data","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Identifier to return response in required format, if empty, returns response in default format\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"On-call shift\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Output format\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Sys id of the user to fetch shift, if empty, returns the current user's shift information\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"To fetch WFO shift if true\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"To fetch on-call shift if true\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"User Id\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Wfo shift\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Return agent's shift information if WFO is activated otherwise return On-Call shift information.","sys_updated_on":"2024-07-29 09:55:08","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fefabcf3c7143010d7e818b1c7c26078","sys_updated_by":"admin","sys_created_on":"2021-05-30 05:57:21","sys_name":"Get service desk agent shift","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_created_by":"admin","sys_mod_count":"13","sys_tags":"","script":"function transform(input) {\n    var userId = gs.nil(input.user_id) ? gs.getUserID() : input.user_id;\n    var serviceDeskAgentShift = new SOWServiceDeskAgentShift();\n    var outputFormat = gs.nil(input.output_format) ? serviceDeskAgentShift.FORMAT.SERVICE_DESK_HEADER : input.output_format;\n    return serviceDeskAgentShift.getUpcomingShift(userId, outputFormat, input.wfo_shift, input.on_call_shift);\n}","acl_failure_result":"","props":"[\r\n    {\r\n        \"name\": \"user_id\",\r\n        \"label\": \"User Id\",\r\n        \"description\": \"Sys id of the user to fetch shift, if empty, returns the current user's shift information\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    },\r\n  {\r\n        \"name\": \"output_format\",\r\n        \"label\": \"Output format\",\r\n        \"description\": \"Identifier to return response in required format, if empty, returns response in default format\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"string\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": \"\"\r\n    },\r\n   {\r\n        \"name\": \"wfo_shift\",\r\n        \"label\": \"Wfo shift\",\r\n        \"description\": \"To fetch WFO shift if true\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n    },\r\n   {\r\n        \"name\": \"on_call_shift\",\r\n        \"label\": \"On-call shift\",\r\n        \"description\": \"To fetch on-call shift if true\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": false,\r\n        \"defaultValue\": true\r\n    }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/49aff4bb733320103e366238edf6a70f","value":"49aff4bb733320103e366238edf6a70f"},"sys_update_name":"sys_ux_data_broker_transform_fefabcf3c7143010d7e818b1c7c26078","api_name":"sn_sow_inc.Get service desk agent shift","mutates_server_data":"false","name":"Get service desk agent shift","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Include All Option\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Include All Options\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Include None Option\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search Term\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search term\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get list of De-duplication template libraries. Provided search term value, only returns the libraries with name matching the serch term.","sys_updated_on":"2023-09-27 23:39:43","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ff82b1de93303110f769fa607489185e","sys_updated_by":"admin","sys_created_on":"2023-08-23 23:22:25","sys_name":"De-duplication Template get all libraries","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"13","sys_tags":"","script":"function transform(input) {\n    var util = new sn_cmdb_ws.DedupeTemplateLibraryUtil();\n    var libraries = util.getLibraries(input.searchTerm, '');\n    var result = [];\n\n    for (var i = 0; i < libraries.length; i++) {\n        var library = {};\n        library.id = libraries[i].sys_id;\n        library.label = libraries[i].name;\n        library.subLabel = libraries[i].description;\n        result.push(library);\n    }\n    result.sort(function(r1, r2) {\n        if (r1.label < r2.label) {\n            return -1;\n        } else {\n            return 1;\n        }\n    });\n    if (input.includeAllOptions && input.includeAllOptions == true) {\n        var allTemplatesSelection = {\n            'id': '',\n            'label': gs.getMessage('All libraries'),\n            'subLabel': gs.getMessage('All libraries')\n        };\n        result.unshift(allTemplatesSelection);\n    }\n\n\tif (input.includeNoneOption && input.includeNoneOption == true) {\n\t\tvar noneLibrary = {\n\t\t\tid: \"none\",\n\t\t\tlabel: gs.getMessage(\"Select a library\"),\n\t\t\tsubLabel: ''\n\t\t};\n\t\tresult.unshift(noneLibrary);\n\t}\n\n    return {\n        result: result\n    };\n}","acl_failure_result":"","props":"[\r\n   {\r\n      \"name\": \"searchTerm\",\r\n      \"label\": \"Search Term\",\r\n      \"description\": \"Search term\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"string\",\r\n      \"mandatory\": \"false\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n{\r\n      \"name\": \"includeAllOptions\",\r\n      \"label\": \"Include All Options\",\r\n      \"description\": \"Include All Option\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"boolean\",\r\n      \"mandatory\": \"false\",\r\n      \"defaultValue\": \"\"\r\n   },\r\n{\r\n      \"name\": \"includeNoneOption\",\r\n      \"label\": \"Include None Option\",\r\n      \"description\": \"Include None Option\",\r\n      \"readOnly\": \"false\",\r\n      \"fieldType\": \"boolean\",\r\n      \"mandatory\": \"false\",\r\n      \"defaultValue\": \"false\"\r\n   }\r\n]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_ff82b1de93303110f769fa607489185e","api_name":"sn_cmdb_ws.De-duplication Template get all libraries","mutates_server_data":"false","name":"De-duplication Template get all libraries","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Current task sysId\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","description":"Get smart detection eligible CIs info","sys_updated_on":"2023-09-12 23:55:33","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"ffac0869b742811094bb21208e11a9f6","sys_updated_by":"admin","sys_created_on":"2022-03-04 22:35:52","sys_name":"Get smart detection eligible CIs info","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"3","sys_tags":"","script":"function transform(input) {\n    var taskId = input.taskId;\n\t\n\tvar smartDetectionUtil = new sn_cmdb_ws.CMDBAttestationSmartDetectionUtil();\n\treturn smartDetectionUtil.getSmartDetectionEligibleCIsInfo(taskId);\n}","acl_failure_result":"","props":"[{\r\n \"name\": \"taskId\",\r\n  \"label\": \"Current task sysId\",\r\n  \"description\": \"Current task sysId\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}]","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_ffac0869b742811094bb21208e11a9f6","api_name":"sn_cmdb_ws.Get smart detection eligible CIs info","mutates_server_data":"false","name":"Get smart detection eligible CIs info","output_schema":"","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","description":"","sys_updated_on":"2024-01-19 22:46:46","sys_class_name":"sys_ux_data_broker_transform","schema_version":"1.0.0","sys_id":"fff56cb87712111078521605bc5a99df","sys_updated_by":"admin","sys_created_on":"2022-09-29 22:57:24","sys_name":"Total cis with single source","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","sys_mod_count":"9","sys_tags":"","script":"function transform(input) {\n\t\n\tvar filterValueMap = {};\n    var ga = new GlideAggregate(\"sn_cmdb_ws_ms_ci_dashboard_data\");\n    ga.addEncodedQuery(\"chart=cis_with_single_source^state=2\");\n    ga.addAggregate(\"SUM\", \"value\");\n    ga.groupBy(\"filter\");\n    ga.query();\n    while (ga.next()) {\n        filterValueMap[ga.getValue('filter')] = ga.getAggregate(\"SUM\", \"value\");\n    }\n    return filterValueMap;\n}","acl_failure_result":"","props":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_transform_fff56cb87712111078521605bc5a99df","api_name":"sn_cmdb_ws.Total cis with single source","mutates_server_data":"false","name":"Total cis with single source","output_schema":"","sys_policy":""}]}