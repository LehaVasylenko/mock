{"result":[{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"10fea73f9f5c73001bb9baac757fcfd9\",r=\"65b30395a9fe3dba003277a7b660b5db\",t=function t(e){for(var r,t,o=\"\".concat(e),a=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(n)||(i=\"=\",n%1);){if((t=o.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=i.charAt(63&r>>8-n%1*8)}return a.toString()},o=function o(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,a=0;a<e.length;a++)e.charAt(a)!==r||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function a(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var n=function n(e,r){return{text:e,vars:r}},i=function i(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,n=e.artifactTable,i=e.hasNewArtifact,c=e.debugInfo,d=e.featureFlags,s={text:r,level:t,help:o,originSysId:a,hasNewArtifact:i,table:n,debugInfo:c};return\"true\"===(null==d?void 0:d.translatedLogs)?s:l(s)},l=function l(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text};function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var d=function d(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,a=o(e,\"^\"),n=[],i=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e){throw _e},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e2){l=!0,n=_e2},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}(a);try{var l=function l(){var e=t.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,n=arguments[1],i=0;i<a;i++){var l=o[i];if(r.call(n,l,i,o))return t?i:l}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";n.push(e)};for(i.s();!(t=i.n()).done;)l()}catch(e){i.e(e)}finally{i.f()}return n.join(\"^\")};function s(e){return s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},s(e)}var u=function u(e){return{durationFormat:p(a(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},m=function m(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=p(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},p=function p(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var n in t)void 0!==o[t[n]]&&e[n]!==o[t[n]]&&(a=!0,o[t[n]]=e[n]);return!!a&&o},g=function g(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},f=function f(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},v=(f(\"content_block_static\",\"com.glide.cms.RenderBlock\"),f(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),f(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),f(\"\",\"com.glide.ui.portal.RenderReport\"),f(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),b=(f(v.group,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.group2,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.single,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.multi,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.date,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.bool,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),f(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),f(v.debug,\"com.glideapp.home.RenderHomepagePublishers\"),f(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"\",\"com.glide.ui.portal.RenderDashboard\"),f(\"report\",\"com.glide.ui.portal.RenderJavascript\"),f(\"\",\"com.glide.ui.portal.RenderJavascript\"),f(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),f(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),f(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),f(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),h=function h(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},y=function y(e,r){var t={message:n(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(i({message:n(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(i(t))&&e.migrationNotes.push(i(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},_=function _(l,c,p,f){var _,w=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(i({message:n(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(l,c),R=function(o,n){var i,l,c,p,g=(p=o.table,t(\"table\".concat(p).concat(new Date().getTime()).concat(1e8*Math.random()))),f=t(g+new Date().getTime()+1e8*Math.random()),v={type:\"default\"};if(o.upper_limit&&\"\"!==o.upper_limit&&o.lower_limit&&\"\"!==o.lower_limit){var b=e,h=r;\"minimize\"!==o.direction&&(b=r,h=e);var y=parseInt(o.upper_limit,10);v={type:\"singleColor\",values:[{color:\"fec1eb7b9f5c73001bb9baac757fcf6c\",metric:f,rules:[{operator:\"<\",order:100,color:b,value1:parseInt(o.lower_limit,10)},{operator:\"<\",order:200,color:\"65b30254a9fe3dba00b44ce0710382b3\",value1:y},{operator:\">=\",order:300,color:h,value1:y}]}]}}var _=function(e,r,t,o,a){var n={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},i={durationFormattingProperties:u,numberFormattingProperties:m};switch(a){case\"heatmap\":case\"box\":return\"glide_duration\"===t?n:i.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===s(e)&&i.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return i.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var c in e)if(i[c]&&e[c]&&Object.keys(e[c]).length>0){var d=Object.keys(e[c])[0];return i[c](e[c][d],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:n}(JSON.parse(o.formatting_configuration||\"{}\"),parseInt(o.decimal_precision,10),o.aggregateFieldType,o.aggregate,o.type);return{applyDateRange:!1,bareBorder:!1,colorConfig:v,configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:o.table,filterQuery:d(o.filter),reportSourceSysId:null===(i=o.report_source)||void 0===i?void 0:i.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:g,dataCategories:[\"trend\",\"group\",\"simple\"]}],dateFormat:\"default\",description:\"\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,followFilters:!0,groupBy:null,headerTitle:o.showTitle?o.title:\"\",hideMatrixAggregate:!1,innerRadius:.7,metrics:[a({dataSource:g,id:f,aggregateFunction:(null===(l=o.aggregate)||void 0===l?void 0:l.length)>0?o.aggregate:\"COUNT\",aggregateField:null!==(c=o.aggregate)&&void 0!==c&&c.startsWith(\"COUNT\")?void 0:o.sumfield,axisId:\"primary\"},_)],minValue:\"true\"!==o.gauge_autoscale&&o.from&&\"\"!==o.from?o.from:0,maxValue:\"true\"!==o.gauge_autoscale&&o.to&&\"\"!==o.to?o.to:void 0,newReporting:!1,numberOfPeriods:3,period:\"M\",scoreType:null,showAbsolutePeriod:!1,showBorder:o.showBorder,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:o.showHeader,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,showZero:!0,sortByOrder:\"desc\",telemetry:\"null\",trendBy:null,valueLabelSize:\"md\",wrapTitle:!1}}(a(c,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(f)));return!R||w?l.migratingFromJava&&f?h(c,f):(_=\"report\",function(e,r,t,o){var l;return(l=_===b?function(){for(var e in v)if(v[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(i({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===_||_===b?function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?h(r,o):y(e,{static_content:g(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> widget.\"))})}(e,a(r,{type:l}),0,o):function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?h(r,o):y(e,{static_content:g(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var a,l,c,d;if(e.migratingFromJava&&o)return h(r,o);var s=\"\";null!=r&&r.type?s=r.type:null!=o&&null!==(a=o.type)&&void 0!==a&&a.value?s=null==o||null===(l=o.type)||void 0===l?void 0:l.value:null!=o&&null!==(c=o.renderer)&&void 0!==c&&c.value&&(s=o.renderer.value);var u=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(i({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),y(e,{static_content:g(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(s,\": \").concat(u,\"</span> widget.\"))})}(e,r,0,o)})(l,c,p,f):(function(e,r,t){if(e.additional_groupby){t.showAdditionalGroupBySelector=!0;var a=o(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),t.additionalGroupByConfig=[],a.forEach(function(e){t.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(c,0,R),{component_id:\"63f050cf050137731a828878839e0b33\",component_props:R})};this.run=function(e,r,t,o,a){var n,i={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],c=_(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return c.migrationNotes=i.migrationNotes,c};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"014520e7b7232110997a9f78ce11a9ad","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:26:41","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/037bd8ea3013833fd049186779528b70","value":"037bd8ea3013833fd049186779528b70"},"key":"solidGaugeReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=_e?_e:\"\",\"::\").concat(null!=r?r:\"\")},r=(e(\"content_block_static\",\"com.glide.cms.RenderBlock\"),e(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),e(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),e(\"\",\"com.glide.ui.portal.RenderReport\"),e(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),t=(e(-1,\"com.glideapp.home.RenderHomepagePublishers\"),e(4,\"com.glideapp.home.RenderHomepagePublishers\"),e(r,\"com.glideapp.home.RenderHomepagePublishers\"),e(2,\"com.glideapp.home.RenderHomepagePublishers\"),e(3,\"com.glideapp.home.RenderHomepagePublishers\"),e(5,\"com.glideapp.home.RenderHomepagePublishers\"),e(6,\"com.glideapp.home.RenderHomepagePublishers\"),e(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderDashboard\"),e(\"report\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderJavascript\"),e(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),e(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),e(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),i=\"\",o=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(o)||(n=\"=\",o%1);){if((t=a.charCodeAt(o+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,i+=n.charAt(63&r>>8-o%1*8)}return i.toString()});function a(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}var i=function i(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}},o=function o(e,r){return{text:e,vars:r}},n=function n(e){var r=e.message,t=e.level,a=e.tooltip,i=e.originalArtifactSysId,o=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,d=e.featureFlags,c={text:r,level:t,help:a,originSysId:i,hasNewArtifact:n,table:o,debugInfo:l};return\"true\"===(null==d?void 0:d.translatedLogs)?c:s(c)},s=function s(e){var r,t,a,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==a?a:e.text},l=\"sys_choice\";function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var c=function c(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,a=function(e,r){if(void 0===e)return[];for(var t=[],a=0,i=0;i<e.length;i++)\"^\"!==e.charAt(i)||(t.push(e.substring(a,i)),a=i+1);return a<=e.length&&t.push(e.substring(a,e.length)),t}(e),i=[],o=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,i=function i(){};return{s:i,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,_n=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){s=!0,o=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw o}}}}(a);try{var n=function n(){var e=t.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),i=a.length>>>0,o=arguments[1],n=0;n<i;n++){var s=a[n];if(r.call(o,s,n,a))return t?n:s}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";i.push(e)};for(o.s();!(t=o.n()).done;)n()}catch(e){o.e(e)}finally{o.f()}return i.join(\"^\")},u=/[0-9a-f]{32}/,m=function e(r,t,a){var i,s,d,c,m,p,g=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(m=r.breakdown)&&void 0!==m&&m.value&&(d=r.breakdown_level2.value),!c&&r.element&&(c=r.element_level2)):(null!==(p=r.breakdown)&&void 0!==p&&p.value&&(d=r.breakdown.value),!c&&r.element&&(c=r.element)),d&&c&&\"unmatched\"!==c){var v=r.indexes.sys_id[d][0],f=c;r.indexes.sys_id[v.dimension.value][0].facts_table===l&&u.test(c)&&(f=r.indexes.sys_id[f][0].value);var h,_={sysId:d,elementSysIds:[f]};\"true\"===r.manual_elements&&_.elementSysIds.concat(null===(h=r.indexes.widget_elements[r.sys_id])||void 0===h?void 0:h.map(function(e){return\"unassigned\"===e.element?g:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(_.elementsFilterSysId=r.elements_filter.value,_.elementSysIds=[]),a.breakdowns.push(_)}else if(null!==(i=r.breakdown)&&void 0!==i&&i.value){var b=r.indexes.sys_id[d][0],y=r.indexes.sys_id[b.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(y.facts_table===l||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:[g]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:d,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var R,S,I;r.indexes.widget_elements&&0!==(null!==(R=null===(S=r.indexes.widget_elements[r.sys_id])||void 0===S?void 0:S.length)&&void 0!==R?R:0)?a.breakdowns.push({sysId:d,elementSysIds:null===(I=r.indexes.widget_elements[r.sys_id])||void 0===I?void 0:I.map(function(e){return\"unassigned\"===e.element?g:e.element})}):r.dashboard.migrationNotes.push(n({message:o(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:d,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(y.facts_table===l||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[g],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(s=r.breakdown_level2)&&void 0!==s&&s.value&&!t?e(r,!0,a):a},p=function p(e){var r,i,s,l,d,u,p=e.props,g=e.indexes,v=e.dashboard,f=e.showSparkline,h=e.showChange,_=e.showTarget,b=e.showGapPercentage,y=e.showScoreDate,w=e.showChangePercentage,R=m(a(p,{indexes:g,dashboard:v}));if(R.doMigration){\"periods_back\"===p.lastscore_compare&&v.migrationNotes.push(n({message:o(\"This visualization is in compatibility mode because the compare score with previous periods feature is not supported.\"),level:1,originalArtifactSysId:p.sys_id,artifactTable:null==p?void 0:p.sys_table_name,featureFlags:v.featureFlags}));var S,I,T=(S=null===(r=p.indicator)||void 0===r?void 0:r.value,t(\"indicator\".concat(S).concat(new Date().getTime()).concat(1e8*Math.random()))),k=t(T+new Date().getTime()+1e8*Math.random()),A=g.sys_id[null===(i=p.indicator)||void 0===i?void 0:i.value][0],P=\"realtime\"===p.visualization,x=\"1\"===A.type,F=void 0===A.show_realtime_score?x&&P:x&&\"true\"===A.show_realtime_score;return{showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,enableDrilldown:!0,newReporting:!1,showSparkline:f,dataPassthrough:null,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,showMaximumRange:!1,enableRealTimeUpdate:F,scoreType:null,useRelativeScoreTime:F,showScoreUpdateTime:F,colorConfig:{type:\"default\"},scoreSize:\"auto\",showFilterIcon:\"true\"===p.follow_element,followFilters:\"true\"===p.follow_element,headingPosition:null,showChange:h,showTarget:_,showGapPercentage:b,showScoreDate:!F&&y,showChangePercentage:w,showChangeFrom:!0,showZero:!1,description:p.description,dataSources:[{allowRealTime:P&&x,allowTotalValue:x,indicatorType:A.type,isScriptedIndicator:!1,label:A.name,filter:c(p.filter),sourceType:\"indicator\",uuid:{breakdowns:R.breakdowns,indicator:null===(s=p.indicator)||void 0===s?void 0:s.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:T,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[{dataSource:T,id:k,aggregateIndicator:null!==(l=null===(d=p.aggregate)||void 0===d?void 0:d.value)&&void 0!==l?l:\"\",frequency:parseInt(null!==(u=null==A?void 0:A.frequency)&&void 0!==u?u:\"10\",10),numberFormat:a((I=parseInt(A.precision,10),{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=I?I:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}),{abbreviationEnabled:!1,numberInTooltipsEnabled:!1,thousandSeparatorEnabled:!0}),axisId:\"primary\"}],headerTitle:p.showTitle?p.sys_name:\"\"}}v.migrationNotes.push(n({message:o(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:p.sys_id,artifactTable:null==p?void 0:p.sys_table_name,featureFlags:v.featureFlags}))},g=function g(e,r,t,s){!function(e,r,t){for(var a=0,i=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:o(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:o(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<i.length;a++){var s=i[a];s.shouldLog&&e.migrationNotes.push(n(s.message))}}(e,r);var l=!1,d=!1,c=!1,u=!1,m=!1,g=!1;switch(r.template){case\"template1\":case\"template2\":case\"\":l=!0,g=!0,d=!0,u=!0;break;case\"template3\":g=!0,d=!0,u=!0,c=!0,m=!0;break;default:if(e.migratingFromJava&&s)return i(r,s);throw new Error(\"Don't know what kind of template that is? Dashboard \".concat(e.sys_id,\" Element: \").concat(r.sys_name))}var v,f=function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(s),h=p({props:a(r,f),showSparkline:l,showChange:d,showTarget:c,showChangePercentage:u,showGapPercentage:m,showScoreDate:g,indexes:t,dashboard:e});return h?{component_id:\"d24d53f60350de7a652caf3188a46ed2\",component_props:h}:e.migratingFromJava&&s?i(r,s):function(e,r){var t={message:o(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(n({message:o(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(n(t))&&e.migrationNotes.push(n(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(v=\"ERROR: Cannot migrate PA Single Score widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(v,\"</p>\"))})};this.run=function(e,r,t,a,i){var o,n={migratingFromJava:!0,migrationNotes:[],featureFlags:i,migratingSingleArtifact:!0},s=null===(o=e.sys_id[t])||void 0===o?void 0:o[0],l=g(n,s,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return l.migrationNotes=n.migrationNotes,l};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"014f8797a3d031108d80ad2f241e61b7","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:58:02","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/d24d53f60350de7a652caf3188a46ed2","value":"d24d53f60350de7a652caf3188a46ed2"},"key":"realtimePAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r){return{text:_e,vars:r}},r=function r(e){var r=e.message,o=e.level,i=e.tooltip,t=e.originalArtifactSysId,c=e.artifactTable,n=e.hasNewArtifact,s=e.debugInfo,l=e.featureFlags,d={text:r,level:o,help:i,originSysId:t,hasNewArtifact:n,table:c,debugInfo:s};return\"true\"===(null==l?void 0:l.translatedLogs)?d:a(d)},a=function a(e){var r,a,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},o=function o(e,r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},i=(o(\"content_block_static\",\"com.glide.cms.RenderBlock\"),o(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),o(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),o(\"\",\"com.glide.ui.portal.RenderReport\"),o(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1);o(-1,\"com.glideapp.home.RenderHomepagePublishers\"),o(4,\"com.glideapp.home.RenderHomepagePublishers\"),o(i,\"com.glideapp.home.RenderHomepagePublishers\"),o(2,\"com.glideapp.home.RenderHomepagePublishers\"),o(3,\"com.glideapp.home.RenderHomepagePublishers\"),o(5,\"com.glideapp.home.RenderHomepagePublishers\"),o(6,\"com.glideapp.home.RenderHomepagePublishers\"),o(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),o(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glide.ui.portal.RenderDashboard\"),o(\"report\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glide.ui.portal.RenderJavascript\"),o(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),o(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),o(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),o(\"METRIC\",\"com.snc.treemap.TreemapRenderer\");var t=function t(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},c=function c(a,o,i,_c){var n,s,l,d;return a.migratingFromJava&&_c?t(o,_c):function(a,o){var i={message:e(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags};return\"true\"===(null==o?void 0:o.conditional)&&a.migrationNotes.push(r({message:e(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags})),-1===a.migrationNotes.indexOf(r(i))&&a.migrationNotes.push(r(i)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==o?void 0:o.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==o?void 0:o.sys_id)}}}(a,{static_content:(d=\"<b>Unsupported migration: \".concat(null!==(n=null!==(s=o.name)&&void 0!==s?s:o.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=o&&o.type?o.type:null==_c||null===(l=_c.type)||void 0===l?void 0:l.value,\"</span> report.\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(d,\"</p>\"))})};this.run=function(a,o,i,n,s){var l,d={migratingFromJava:!0,migrationNotes:[],featureFlags:s,migratingSingleArtifact:!0},p=function(a,o,i,n){return a.migratingFromJava&&n?t(o,n):(a.migrationNotes.push(r({message:e(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags})),c(a,o))}(d,null===(l=a.sys_id[i])||void 0===l?void 0:l[0],0,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return p.migrationNotes=d.migrationNotes,p};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"02c4ec63b7232110997a9f78ce11a90a","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:24:34","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/2d56f06d55f46bbd4e79b5e624beb940","value":"2d56f06d55f46bbd4e79b5e624beb940"},"key":"histReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nfunction r(e){return r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&\"function\"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?\"symbol\":typeof r},r(e)}function e(e,n,t){var o;return o=function(e,n){if(\"object\"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,\"string\");if(\"object\"!=r(o))return o;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(n),(n=\"symbol\"==r(o)?o:String(o))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function n(r,e){var _n=\"undefined\"!=typeof Symbol&&r[Symbol.iterator]||r[\"@@iterator\"];if(!_n){if(Array.isArray(r)||(_n=function(r,e){if(r){if(\"string\"==typeof r)return t(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return\"Object\"===n&&r.constructor&&(n=r.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(r):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(r,e):void 0}}(r))||e&&r&&\"number\"==typeof r.length){_n&&(r=_n);var o=0,i=function i(){};return{s:i,n:function n(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function e(r){throw r},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,u=!0,s=!1;return{s:function s(){_n=_n.call(r)},n:function n(){var r=_n.next();return u=r.done,r},e:function e(r){s=!0,a=r},f:function f(){try{u||null==_n[\"return\"]||_n[\"return\"]()}finally{if(s)throw a}}}}function t(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}this.run=function(r,t,o,i,a){return function(r,t,o){var i,a={},u=n(t);try{var s=function s(){var t=i.value;try{var o,u,s,l,c,d,f=n(r.dashboard[t].filter(function(r){return\"pa_dashboards_permissions\"===r.sys_class_name}).filter(function(r){return r.dashboard.value===t}));try{for(f.s();!(d=f.n()).done;){var y,v,p,m,b=d.value,g=void 0;if(b.user)g=\"user\";else if(b.role)g=\"role\";else{if(!b.group)continue;g=\"group\"}a[t]||(a[t]=[]),a[t].push((e(m={dashboard:(void 0,t),sys_id:\"\".concat(t,\"-permission-\").concat(a[t].length),update_guid:\"\".concat(t,\"-permission-update-guid-\").concat(a[t].length),can_write:\"true\"===b.write?\"1\":\"0\",can_read:\"1\",can_share:\"true\"===b.write?\"1\":\"0\",group:\"\",role:\"\",user:\"\",owner:\"0\"},g,b[g].value),e(m,\"sys_scope\",null!==(y=null===(v=b.sys_scope)||void 0===v?void 0:v.value)&&void 0!==y?y:b.sys_scope),e(m,\"package\",null===(p=b.sys_package)||void 0===p?void 0:p.value),m))}}catch(r){f.e(r)}finally{f.f()}a[t]||(a[t]=[]),null!==(o=r.sys_id[t][0])&&void 0!==o&&null!==(u=o.owner)&&void 0!==u&&u.value&&a[t].push({dashboard:(void 0,t),sys_id:\"\".concat(t,\"-permission-\").concat(a[t].length),update_guid:\"\".concat(t,\"-permission-update-guid-\").concat(a[t].length),can_write:\"1\",can_read:\"1\",can_share:\"1\",group:\"\",role:\"\",user:r.sys_id[t][0].owner.value,owner:\"1\",sys_scope:null!==(s=null===(l=r.sys_id[t][0].sys_scope)||void 0===l?void 0:l.value)&&void 0!==s?s:r.sys_id[t][0].sys_scope,\"package\":null===(c=r.sys_id[t][0].sys_package)||void 0===c?void 0:c.value})}catch(r){console.error(\"Failed to migration permissions for dashboard: \",t,r.toString())}};for(u.s();!(i=u.n()).done;)s()}catch(r){u.e(r)}finally{u.f()}return a}(r,o)};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"04f7818243c13110e313ac4b96b8f265","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-09-04 11:42:03","sys_name":"","sys_scope":"","macroponent":"","key":"dashboardPermissionsScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,a,t){return\"com.glideapp.home.RenderHomepagePublishers\"===a&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=a?a:\"\"):\"\".concat(null!=_e?_e:\"\",\"::\").concat(null!=a?a:\"\")},a=(e(\"content_block_static\",\"com.glide.cms.RenderBlock\"),e(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),e(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),e(\"\",\"com.glide.ui.portal.RenderReport\"),e(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),t=(e(-1,\"com.glideapp.home.RenderHomepagePublishers\"),e(4,\"com.glideapp.home.RenderHomepagePublishers\"),e(a,\"com.glideapp.home.RenderHomepagePublishers\"),e(2,\"com.glideapp.home.RenderHomepagePublishers\"),e(3,\"com.glideapp.home.RenderHomepagePublishers\"),e(5,\"com.glideapp.home.RenderHomepagePublishers\"),e(6,\"com.glideapp.home.RenderHomepagePublishers\"),e(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderDashboard\"),e(\"report\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderJavascript\"),e(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),e(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),e(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var a,t,r=\"\".concat(e),i=\"\",o=0,s=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";r.charAt(o)||(s=\"=\",o%1);){if((t=r.charCodeAt(o+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");a=a<<8|t,i+=s.charAt(63&a>>8-o%1*8)}return i.toString()});function r(){for(var e={},a=arguments.length,t=new Array(a),r=0;r<a;r++)t[r]=arguments[r];return t.forEach(function(a){Object.assign(e,a)}),e}var i=function i(e,a){return{text:e,vars:a}},o=function o(e){var a=e.message,t=e.level,r=e.tooltip,i=e.originalArtifactSysId,o=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,d=e.featureFlags,c={text:a,level:t,help:r,originSysId:i,hasNewArtifact:n,table:o,debugInfo:l};return\"true\"===(null==d?void 0:d.translatedLogs)?c:s(c)},s=function s(e){var a,t,r,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(a=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==a?a:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(r=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==r?r:e.text},n=\"sys_choice\",l=/[0-9a-f]{32}/,d=function e(a,t,r){var s,d,c,u,m,g,p=\"unmatched\";if(r||(r={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(m=a.breakdown)&&void 0!==m&&m.value&&(c=a.breakdown_level2.value),!u&&a.element&&(u=a.element_level2)):(null!==(g=a.breakdown)&&void 0!==g&&g.value&&(c=a.breakdown.value),!u&&a.element&&(u=a.element)),c&&u&&\"unmatched\"!==u){var _=a.indexes.sys_id[c][0],v=u;a.indexes.sys_id[_.dimension.value][0].facts_table===n&&l.test(u)&&(v=a.indexes.sys_id[v][0].value);var h,b={sysId:c,elementSysIds:[v]};\"true\"===a.manual_elements&&b.elementSysIds.concat(null===(h=a.indexes.widget_elements[a.sys_id])||void 0===h?void 0:h.map(function(e){return\"unassigned\"===e.element?p:e.element})),a.elements_filter&&\"\"!==a.elements_filter&&!t&&(b.elementsFilterSysId=a.elements_filter.value,b.elementSysIds=[]),r.breakdowns.push(b)}else if(null!==(s=a.breakdown)&&void 0!==s&&s.value){var f=a.indexes.sys_id[c][0],y=a.indexes.sys_id[f.dimension.value][0];if(\"breakdown\"===a.type){var w;if(!t)if(!a.elements_filter||\"\"===a.elements_filter&&\"true\"!==a.manual_elements){if(null!==(w=a.breakdown_level2)&&void 0!==w&&w.value){if(y.facts_table===n||\"pa_buckets\"===y.facts_table)return r.doMigration=!1,r;r.breakdowns.push({sysId:c,elementSysIds:[p]})}}else if(a.elements_filter&&\"\"!==a.elements_filter)r.breakdowns.push({sysId:c,elementsFilterSysId:!t&&a.elements_filter.value});else if(\"true\"===a.manual_elements){var R,S,I;a.indexes.widget_elements&&0!==(null!==(R=null===(S=a.indexes.widget_elements[a.sys_id])||void 0===S?void 0:S.length)&&void 0!==R?R:0)?r.breakdowns.push({sysId:c,elementSysIds:null===(I=a.indexes.widget_elements[a.sys_id])||void 0===I?void 0:I.map(function(e){return\"unassigned\"===e.element?p:e.element})}):a.dashboard.migrationNotes.push(o({message:i(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:a.dashboard.featureFlags}))}(0===r.breakdowns.length||t)&&(r.groupBy={groupByField:c,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(y.facts_table===n||\"pa_buckets\"===y.facts_table)return r.doMigration=!1,r;r.breakdowns.push({sysId:c,elementSysIds:!t&&\"\"!==a.elements_filter&&a.elements_filter?[]:[p],elementsFilterSysId:!t&&\"\"!==a.elements_filter&&a.elements_filter?a.elements_filter.value:void 0})}}return null!==(d=a.breakdown_level2)&&void 0!==d&&d.value&&!t?e(a,!0,r):r},c=function c(e){var a=e.autoScale,s=e.chartTitle,n=e.timeSeries,l=e.indicatorSysId,c=e.showHeader,u=e.showTitle,m=e.showBorder,g=e.from,p=e.to,_=e.indexes,v=e.d,h=e.sys_id,b=e.widget,f=e.sortDirection,y=e.sortBy,w=e.follow_element,R=d(r(b,{indexes:_,dashboard:v}));if(R.doMigration){var S,I=t(\"indicator\".concat(l).concat(new Date().getTime()).concat(1e8*Math.random())),T=t(I+new Date().getTime()+1e8*Math.random()),k=_.sys_id[l][0],A={applyDateRange:!1,bareBorder:!1,configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:\"1\"===k.type,allowTotalValue:\"1\"===k.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:I,indicatorType:k.type,isScriptedIndicator:!1,label:k.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:R.breakdowns,indicator:l}}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:\"true\"===w,gaugeArcAngle:\"180\",groupBy:null,headerTitle:u?s:\"\",hideMatrixAggregate:!1,innerRadius:.7,maxValue:p,metrics:[{aggregateFunction:n,axisId:\"primary\",dataSource:I,id:T,numberFormat:(S=parseInt(k.precision,10),{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=S?S:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1})}],minValue:g,newReporting:!1,numberOfPeriods:3,period:\"M\",rangesConfig:{},scoreLabel:\"none\",scoreType:null,showAbsolutePeriod:!1,showBorder:m,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:c,showHeaderSeparator:!1,showLabelFirst:!1,showMaximumRange:!1,showMetricLabel:!1,showRangeLabels:!1,showRangeLimit:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,showZero:!0,sortBy:y,sortByOrder:f,telemetry:\"null\",trendBy:null,valueLabelSize:\"md\",wrapTitle:!1};return a&&(A.minValue=0,A.maxValue=null),A}v.migrationNotes.push(o({message:i(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:h,artifactTable:null==b?void 0:b.sys_table_name,featureFlags:v.featureFlags}))},u=function u(e,a,t,s){!function(e,a,t){for(var r=0,s=[{shouldLog:\"true\"===a.show_visualization_selector,message:{message:i(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===a.show_range_selector,message:{message:i(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:e.featureFlags}}];r<s.length;r++){var n=s[r];n.shouldLog&&e.migrationNotes.push(o(n.message))}}(e,a);var n,l=function(e){var a,t,r,i,o,s,n=e.name,l=\"true\"===e.gauge_autoscale,d=parseInt(e.gauge_from,10),c=parseInt(e.gauge_to,10),u=null===(a=e.aggregate)||void 0===a?void 0:a.value,m=null===(t=e.indicator)||void 0===t?void 0:t.value,g=null===(r=e.tag)||void 0===r?void 0:r.value,p=null===(i=e.breakdown)||void 0===i?void 0:i.value,_=null===(o=e.breakdown_level2)||void 0===o?void 0:o.value,v=e.element,h=e.element_level2,b=null===(s=e.elements_filter)||void 0===s?void 0:s.value,f=\"true\"===e.manual_elements,y=e.sort_direction,w=e.sort_on;return{autoScale:l,chartTitle:n,timeSeries:u,indicatorSysId:m,indicatorGroupSysId:g,breakdownSysId:p,breakdown2SysId:_,elementSysId:v,element2SysId:h,elementFilter:b,manualElements:f,from:d,to:c,sys_id:e.sys_id,sortDirection:y,sortBy:w}}(a),d=c(r(l,{d:e,indexes:t,widget:a},function(e){var a=!0,t=!0;return null!=e&&e.show_title&&(a=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:a,showHeader:!0,showBorder:t}}(s)));return d?{component_id:\"037bd8ea3013833fd049186779528b70\",component_props:d}:e.migratingFromJava&&s?function(e,a){var t=function(e){var a={};for(var t in e){var r;null!==(r=e[t])&&void 0!==r&&r.value?a[t]=e[t].value:\"string\"==typeof e[t]&&(a[t]=e[t])}return a}(a),r={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(r.paWidgetSysId=e.sys_id,r.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:r}}(a,s):function(e,a){var t={message:i(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==a?void 0:a.conditional)&&e.migrationNotes.push(o({message:i(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(o(t))&&e.migrationNotes.push(o(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==a?void 0:a.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==a?void 0:a.sys_id)}}}(e,{static_content:(n=\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==a?void 0:a.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(n,\"</p>\"))})};this.run=function(e,a,t,r,i){var o,s={migratingFromJava:!0,migrationNotes:[],featureFlags:i,migratingSingleArtifact:!0},n=null===(o=e.sys_id[t])||void 0===o?void 0:o[0],l=u(s,n,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return l.migrationNotes=s.migrationNotes,l};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"07aa07dfa39031108d80ad2f241e61fb","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:37:58","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/63f050cf050137731a828878839e0b33","value":"63f050cf050137731a828878839e0b33"},"key":"dialPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"d24d53f60350de7a652caf3188a46ed2\",r=function r(e){for(var r,t,o=\"\".concat(e),a=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(n)||(i=\"=\",n%1);){if((t=o.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=i.charAt(63&r>>8-n%1*8)}return a.toString()};function t(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var o=function o(e,r){return{text:e,vars:r}},a=function a(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,i=e.artifactTable,l=e.hasNewArtifact,s=e.debugInfo,c=e.featureFlags,d={text:r,level:t,help:o,originSysId:a,hasNewArtifact:l,table:i,debugInfo:s};return\"true\"===(null==c?void 0:c.translatedLogs)?d:n(d)},n=function n(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text};function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var l=function l(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,o=function(e,r){if(void 0===e)return[];for(var t=[],o=0,a=0;a<e.length;a++)\"^\"!==e.charAt(a)||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t}(e),a=[],n=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e){throw _e},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,l=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return l=e.done,e},e:function e(_e2){s=!0,n=_e2},f:function f(){try{l||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw n}}}}(o);try{var l=function l(){var e=t.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,n=arguments[1],i=0;i<a;i++){var l=o[i];if(r.call(n,l,i,o))return t?i:l}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";a.push(e)};for(n.s();!(t=n.n()).done;)l()}catch(e){n.e(e)}finally{n.f()}return a.join(\"^\")};var s=function s(e){return{durationFormat:d(t(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},c=function c(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=d(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},d=function d(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var n in t)void 0!==o[t[n]]&&e[n]!==o[t[n]]&&(a=!0,o[t[n]]=e[n]);return!!a&&o};var u=function u(o){var a=o.reportId,n=o.chartTitle,i=o.title,d=o.titleVerticalAlignment,u=(o.showChartTitle,o.aggregate),p=o.table,g=o.filter,v=o.showZero,f=o.description,h=(o.chartSize,o.formattingConfiguration),b=o.indexes,_=o.color,y=o.reportSource,w=o.dashboard,R=o.aggregateField,S=(o.showHeader,o.showTitle),T=o.showBorder,F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},A=function(e){return r(\"table\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))}(p),P=function(e){return r(e+new Date().getTime()+1e8*Math.random())}(A),I={type:\"default\"};null!=b&&b.sys_report_mpivot_rule&&null!=b&&b.sys_report_mpivot_rule[a]?I={type:\"singleColor\",values:[{color:_,metric:P,rules:b.sys_report_mpivot_rule[a].map(function(e){var r;return{operator:e.operator,order:e.order,value1:e.value1,value2:e.value2,color:null===(r=e.color_id)||void 0===r?void 0:r.value}})}]}:_&&\"65b30218a9fe3dba0120df8611520d97\"!==_&&(I={type:\"singleColor\",values:[{color:_,metric:P,rules:[]}]});for(var C=function(e){var r=function(e,r,t,o,a){var n={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},i={durationFormattingProperties:s,numberFormattingProperties:c};for(var l in e)if(i[l]&&e[l]&&Object.keys(e[l]).length>0){var d=Object.keys(e[l])[0];return i[l](e[l][d],r)}return n}(e);return e.numberFormattingProperties&&0===Object.keys(e.numberFormattingProperties).length?t(r,{numberFormat:{customFormat:!0,abbreviationEnabled:!1,numberInTooltipsEnabled:!1,thousandSeparatorEnabled:!0}}):r}(h),J={filterConfigurations:\"@state.parFilters\",scoreSize:\"auto\",headingPosition:\"bottom\"===d?\"bottom\":\"top\",sparklineStyle:\"area\",scoreIcon:\"\",iconStyle:\"background\",showScoreDate:!1,useRelativeScoreTime:!1,showScoreUpdateTime:!1,showZero:\"true\"===v,newReporting:!1,showHeader:!0,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,showBorder:T,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,sortByOrder:\"desc\",showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:!1,period:\"M\",dateFormat:\"default\",description:f,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,colorConfig:I,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:p,filterQuery:l(g),reportSourceSysId:y,preferredVisualizations:[e],id:A,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[t({dataSource:A,id:P,aggregateFunction:(null==u?void 0:u.length)>0?u:\"COUNT\",aggregateField:\"COUNT\"===u?void 0:R,axisId:\"primary\",label:i},C)],headerTitle:S?\"\"!==n&&n?n:i:\"\"},N=[m],O=0;O<N.length;O++)J=N[O](w,J,F);return J},m=function m(e,r,o){var a,n=\"true\"===(null==o||null===(a=o.real_time)||void 0===a?void 0:a.value),i=r.useRelativeScoreTime!==n||r.showScoreUpdateTime!==n||r.enableRealTimeUpdate!==n;return r.useRelativeScoreTime=n,r.showScoreUpdateTime=n,r.enableRealTimeUpdate=n,i?t(r):r},p=function p(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},g=function g(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},v=(g(\"content_block_static\",\"com.glide.cms.RenderBlock\"),g(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),g(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),g(\"\",\"com.glide.ui.portal.RenderReport\"),g(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),f=(g(v.group,\"com.glideapp.home.RenderHomepagePublishers\"),g(v.group2,\"com.glideapp.home.RenderHomepagePublishers\"),g(v.single,\"com.glideapp.home.RenderHomepagePublishers\"),g(v.multi,\"com.glideapp.home.RenderHomepagePublishers\"),g(v.date,\"com.glideapp.home.RenderHomepagePublishers\"),g(v.bool,\"com.glideapp.home.RenderHomepagePublishers\"),g(v.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),g(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),g(v.debug,\"com.glideapp.home.RenderHomepagePublishers\"),g(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),g(\"\",\"com.glide.ui.portal.RenderDashboard\"),g(\"report\",\"com.glide.ui.portal.RenderJavascript\"),g(\"\",\"com.glide.ui.portal.RenderJavascript\"),g(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),g(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),g(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),g(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),h=function h(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},b=function b(e,r){var t={message:o(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(a({message:o(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(a(t))&&e.migrationNotes.push(a(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}};this.run=function(r,n,i,l,s){var c,d={migratingFromJava:!0,migrationNotes:[],featureFlags:s,migratingSingleArtifact:!0},m=function(r,n,i,l){var s,c,d,m=n.title,g=n.show_chart_title,_=n.chart_title,y=n.title_vertical_alignment,w=n.aggregate;try{d=JSON.parse(\"\"==n.formatting_configuration||null==n.formatting_configuration?\"{}\":n.formatting_configuration)}catch(e){console.log(\"Unable to transform json 1\",e.toString(),n),d={}}var R=n.table,S=n.filter,T=n.show_zero,F=n.description,A=n.chart_size,P=null===(s=n.score_color)||void 0===s?void 0:s.value,I=null===(c=n.report_source)||void 0===c?void 0:c.value,C=n.sumfield;n.list_ui_view&&\"\"!==n.list_ui_view&&r.migrationNotes.push(a({message:o(\"This visualization is migrated without a drilldown list view because this functionality is not supported.\"),level:2,originalArtifactSysId:n.sys_id,artifactTable:null==n?void 0:n.sys_table_name,featureFlags:r.featureFlags}));var J,N=u(t({chartTitle:_,title:m,showChartTitle:g,titleVerticalAlignment:y,aggregate:w,table:R,filter:S,showZero:T,description:F,chartSize:A,formattingConfiguration:d,indexes:i,reportId:n.sys_id,color:P,reportSource:I,aggregateField:C,dashboard:r},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(l)),l);return N?{component_id:e,component_props:N}:r.migratingFromJava&&l?h(n,l):(J=\"report\",function(e,r,n,i){var l;return(l=J===f?function(){for(var e in v)if(v[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(a({message:o(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===J||J===f?function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?h(r,o):b(e,{static_content:p(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> widget.\"))})}(e,t(r,{type:l}),0,i):function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?h(r,o):b(e,{static_content:p(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> report.\"))})}(e,r,0,i)):function(e,r,t,n){var i,l,s,c;if(e.migratingFromJava&&n)return h(r,n);var d=\"\";null!=r&&r.type?d=r.type:null!=n&&null!==(i=n.type)&&void 0!==i&&i.value?d=null==n||null===(l=n.type)||void 0===l?void 0:l.value:null!=n&&null!==(s=n.renderer)&&void 0!==s&&s.value&&(d=n.renderer.value);var u=null==n||null===(c=n.title)||void 0===c?void 0:c.value;return e.migrationNotes.push(a({message:o(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),b(e,{static_content:p(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(d,\": \").concat(u,\"</span> widget.\"))})}(e,r,0,i)})(r,n,i,l)}(d,null===(c=r.sys_id[i])||void 0===c?void 0:c[0],r,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return m.migrationNotes=d.migrationNotes,m};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"07ba592ab7232110997a9f78ce11a90f","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-23 12:47:34","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/d24d53f60350de7a652caf3188a46ed2","value":"d24d53f60350de7a652caf3188a46ed2"},"key":"singleScoreReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(_e,\"</p>\")},r=function r(e,_r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===_r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=_r?_r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=_r?_r:\"\")},a=(r(\"content_block_static\",\"com.glide.cms.RenderBlock\"),r(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),r(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),r(\"\",\"com.glide.ui.portal.RenderReport\"),r(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),o=(r(a.group,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.group2,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.single,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.multi,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.date,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.bool,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),r(a.debug,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderDashboard\"),r(\"report\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderJavascript\"),r(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),r(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),r(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),r(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"widget\"),t=\"filter\",i=function i(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},n=function n(e,r){return{text:e,vars:r}},c=function c(e){var r=e.message,a=e.level,o=e.tooltip,t=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,c=e.debugInfo,s=e.featureFlags,d={text:r,level:a,help:o,originSysId:t,hasNewArtifact:n,table:i,debugInfo:c};return\"true\"===(null==s?void 0:s.translatedLogs)?d:l(d)},l=function l(e){var r,a,o,t;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==o?o:e.text},s=function s(e,r){var a={message:n(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(c({message:n(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(c(a))&&e.migrationNotes.push(c(a)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}};this.run=function(r,l,d,u,p){var m,g={migratingFromJava:!0,migrationNotes:[],featureFlags:p,migratingSingleArtifact:!0},v=function(r,l,d,u){return r.migratingFromJava&&u?i(l,u):(p=o,function(r,l,d,u){var m;return(m=p===t?function(){for(var e in a)if(a[e]===(null==l?void 0:l.type))return e}():null==l?void 0:l.type)?(r.migrationNotes.push(c({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==l?void 0:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:r.featureFlags})),p===o||p===t?function(r,a,o,t){var n,c,l;return r.migratingFromJava&&t?i(a,t):s(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(n=null!==(c=a.name)&&void 0!==c?c:a.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> widget.\"))})}(r,function(){for(var e={},r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return a.forEach(function(r){Object.assign(e,r)}),e}(l,{type:m}),0,u):function(r,a,o,t){var n,c,l;return r.migratingFromJava&&t?i(a,t):s(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(n=null!==(c=a.name)&&void 0!==c?c:a.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> report.\"))})}(r,l,0,u)):function(r,a,o,t){var l,d,u,p;if(r.migratingFromJava&&t)return i(a,t);var m=\"\";null!=a&&a.type?m=a.type:null!=t&&null!==(l=t.type)&&void 0!==l&&l.value?m=null==t||null===(d=t.type)||void 0===d?void 0:d.value:null!=t&&null!==(u=t.renderer)&&void 0!==u&&u.value&&(m=t.renderer.value);var g=null==t||null===(p=t.title)||void 0===p?void 0:p.value;return r.migrationNotes.push(c({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:r.featureFlags})),s(r,{static_content:e(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(m,\": \").concat(g,\"</span> widget.\"))})}(r,l,0,u)})(r,l,d,u);var p}(g,null===(m=r.sys_id[d])||void 0===m?void 0:m[0],r,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return v.migrationNotes=g.migrationNotes,v};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"0c0b4b93a3d031108d80ad2f241e6133","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:39:24","sys_name":"","sys_scope":"","macroponent":"","key":"funnelPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r){return{text:_e,vars:r}},r=function r(e){var r=e.message,o=e.level,i=e.tooltip,t=e.originalArtifactSysId,c=e.artifactTable,n=e.hasNewArtifact,s=e.debugInfo,l=e.featureFlags,d={text:r,level:o,help:i,originSysId:t,hasNewArtifact:n,table:c,debugInfo:s};return\"true\"===(null==l?void 0:l.translatedLogs)?d:a(d)},a=function a(e){var r,a,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},o=function o(e,r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},i=(o(\"content_block_static\",\"com.glide.cms.RenderBlock\"),o(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),o(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),o(\"\",\"com.glide.ui.portal.RenderReport\"),o(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1);o(-1,\"com.glideapp.home.RenderHomepagePublishers\"),o(4,\"com.glideapp.home.RenderHomepagePublishers\"),o(i,\"com.glideapp.home.RenderHomepagePublishers\"),o(2,\"com.glideapp.home.RenderHomepagePublishers\"),o(3,\"com.glideapp.home.RenderHomepagePublishers\"),o(5,\"com.glideapp.home.RenderHomepagePublishers\"),o(6,\"com.glideapp.home.RenderHomepagePublishers\"),o(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),o(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glide.ui.portal.RenderDashboard\"),o(\"report\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glide.ui.portal.RenderJavascript\"),o(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),o(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),o(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),o(\"METRIC\",\"com.snc.treemap.TreemapRenderer\");var t=function t(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},c=function c(a,o,i,_c){var n,s,l,d;return a.migratingFromJava&&_c?t(o,_c):function(a,o){var i={message:e(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags};return\"true\"===(null==o?void 0:o.conditional)&&a.migrationNotes.push(r({message:e(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags})),-1===a.migrationNotes.indexOf(r(i))&&a.migrationNotes.push(r(i)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==o?void 0:o.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==o?void 0:o.sys_id)}}}(a,{static_content:(d=\"<b>Unsupported migration: \".concat(null!==(n=null!==(s=o.name)&&void 0!==s?s:o.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=o&&o.type?o.type:null==_c||null===(l=_c.type)||void 0===l?void 0:l.value,\"</span> report.\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(d,\"</p>\"))})};this.run=function(a,o,i,n,s){var l,d={migratingFromJava:!0,migrationNotes:[],featureFlags:s,migratingSingleArtifact:!0},p=function(a,o,i,n){return a.migratingFromJava&&n?t(o,n):(a.migrationNotes.push(r({message:e(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags})),c(a,o))}(d,null===(l=a.sys_id[i])||void 0===l?void 0:l[0],0,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return p.migrationNotes=d.migrationNotes,p};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"14746867b7232110997a9f78ce11a92d","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:23:05","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/2d56f06d55f46bbd4e79b5e624beb940","value":"2d56f06d55f46bbd4e79b5e624beb940"},"key":"controlReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e={DAY:1,WEEK:2,MONTH:3,QUARTER:4,FQ:5,YEAR:6,FY:7,WEEK2DATE:8,MONTH2DATE:9,QUARTER2DATE:10,FQ2DATE:11,YEAR2DATE:12,FY2DATE:13,WEEK_PLUS:14,MONTH_PLUS:15,QUARTER_PLUS:16,FQ_PLUS:17,YEAR_PLUS:18,FY_PLUS:19},r=10,t=20,a=40,o=60,n=65,i=80,l=85,s={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},d=function d(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},c=(d(\"content_block_static\",\"com.glide.cms.RenderBlock\"),d(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),d(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),d(\"\",\"com.glide.ui.portal.RenderReport\"),d(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),u=(d(-1,\"com.glideapp.home.RenderHomepagePublishers\"),d(4,\"com.glideapp.home.RenderHomepagePublishers\"),d(c,\"com.glideapp.home.RenderHomepagePublishers\"),d(2,\"com.glideapp.home.RenderHomepagePublishers\"),d(3,\"com.glideapp.home.RenderHomepagePublishers\"),d(5,\"com.glideapp.home.RenderHomepagePublishers\"),d(6,\"com.glideapp.home.RenderHomepagePublishers\"),d(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),d(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glide.ui.portal.RenderDashboard\"),d(\"report\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glide.ui.portal.RenderJavascript\"),d(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),d(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),d(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),d(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),o=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(n)||(i=\"=\",n%1);){if((t=a.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,o+=i.charAt(63&r>>8-n%1*8)}return o.toString()});function m(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,n=arguments[1],i=0;i<o;i++){var l=a[i];if(r.call(n,l,i,a))return t?i:l}}var p=function p(e,r){return{text:e,vars:r}},g=function g(e){var r=e.message,t=e.level,a=e.tooltip,o=e.originalArtifactSysId,n=e.artifactTable,i=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,d={text:r,level:t,help:a,originSysId:o,hasNewArtifact:i,table:n,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?d:v(d)},v=function v(e){var r,t,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},f=\"sys_choice\",h=function h(e){return u(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},_=function _(e){return u(e+new Date().getTime()+1e8*Math.random())},y=/[0-9a-f]{32}/,b=function b(e){return{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=e?e:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}};function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=t){var a,o,n,i,l=[],s=!0,d=!1;try{if(n=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(a=n.call(t)).done)&&(l.push(a.value),l.length!==r);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=t[\"return\"]&&(i=t[\"return\"](),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,r)||R(e,r)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function T(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=R(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function R(e,r){if(e){if(\"string\"==typeof e)return A(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,r):void 0}}function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var I=function e(r,t,a){var o,n,i,l,s,d,c=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(s=r.breakdown)&&void 0!==s&&s.value&&(i=r.breakdown_level2.value),!l&&r.element&&(l=r.element_level2)):(null!==(d=r.breakdown)&&void 0!==d&&d.value&&(i=r.breakdown.value),!l&&r.element&&(l=r.element)),i&&l&&\"unmatched\"!==l){var u=r.indexes.sys_id[i][0],m=l;r.indexes.sys_id[u.dimension.value][0].facts_table===f&&y.test(l)&&(m=r.indexes.sys_id[m][0].value);var v,h={sysId:i,elementSysIds:[m]};\"true\"===r.manual_elements&&h.elementSysIds.concat(null===(v=r.indexes.widget_elements[r.sys_id])||void 0===v?void 0:v.map(function(e){return\"unassigned\"===e.element?c:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(h.elementsFilterSysId=r.elements_filter.value,h.elementSysIds=[]),a.breakdowns.push(h)}else if(null!==(o=r.breakdown)&&void 0!==o&&o.value){var _=r.indexes.sys_id[i][0],b=r.indexes.sys_id[_.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(b.facts_table===f||\"pa_buckets\"===b.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:i,elementSysIds:[c]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:i,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var T,R,A;r.indexes.widget_elements&&0!==(null!==(T=null===(R=r.indexes.widget_elements[r.sys_id])||void 0===R?void 0:R.length)&&void 0!==T?T:0)?a.breakdowns.push({sysId:i,elementSysIds:null===(A=r.indexes.widget_elements[r.sys_id])||void 0===A?void 0:A.map(function(e){return\"unassigned\"===e.element?c:e.element})}):r.dashboard.migrationNotes.push(g({message:p(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:i,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(b.facts_table===f||\"pa_buckets\"===b.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:i,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[c],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(n=r.breakdown_level2)&&void 0!==n&&n.value&&!t?e(r,!0,a):a};function S(e,r){if(null!=r&&r.value&&\"column\"===e)return\"vertical_bar\";switch(e){case\"column_total\":case\"column\":case\"stacked\":return\"bar\";default:return e}}function k(d){var c=m(Object.keys(e),function(r){return e[r]===parseInt(d,10)});switch(e[c]){case e.DAY:return{frequency:r,frequencyInterval:c,dateRange:s.HOURLY};case e.WEEK:case e.WEEK2DATE:case e.WEEK_PLUS:return{frequency:t,frequencyInterval:c,dateRange:s.MONTHLY};case e.MONTH:case e.MONTH2DATE:case e.MONTH_PLUS:return{frequency:a,frequencyInterval:c,dateRange:s.MONTHLY};case e.QUARTER:case e.QUARTER2DATE:case e.QUARTER_PLUS:return{frequency:o,frequencyInterval:c,dateRange:s.YEARLY};case e.FQ:case e.FQ2DATE:case e.FQ_PLUS:return{frequency:n,frequencyInterval:c,dateRange:s.YEARLY};case e.YEAR:case e.YEAR2DATE:case e.YEAR_PLUS:return{frequency:i,frequencyInterval:c,dateRange:s.YEARLY};case e.FY:case e.FY2DATE:case e.FY_PLUS:return{frequency:l,frequencyInterval:c,dateRange:s.YEARLY};default:return{frequency:r,frequencyInterval:\"\",dateRange:s.YEARLY}}}var x=function x(e){e.colorType;var r,t,a,o,n=e.colorPalette,i=e.chartColor,l=e.showDataLabel,d=(e.showLegend,e.showTotal),c=e.yAxisTitle,u=e.yAxisFrom,v=e.yAxisTo,y=e.sysId,R=e.indicator,A=(e.element,e.breakdown),x=e.aggregate,E=e.sort_direction,F=e.sort_on,P=(e.breakdown_level2,e.color_scheme,e.description),B=e.name,O=e.showTitle,C=e.showHeader,L=e.showBorder,N=e.d,Y=e.indexes,D=e.showTarget,M=e.showThresholds,H=e.showTrend,J=e.showConfidence,U=e.showForecast,q=e.showComments,G=e.chartType,z=e.label,j=e.followElement,Q=F,V=E,W=A.value,K=null===(r=Y.sys_id[W])||void 0===r?void 0:r[0],Z=null===(t=Y.sys_id[null==K||null===(a=K.dimension)||void 0===a?void 0:a.value])||void 0===t?void 0:t[0],X=null==Z?void 0:Z.facts_table,$=X===f,ee=\"pa_buckets\"===X;\"default\"===F&&(Q=$?\"choice\":ee?\"bucket\":\"name\"),-1===[\"name\",\"value\",\"default\"].indexOf(F)&&(Q=\"value\",V=\"desc\",N.migrationNotes.push(g({message:p(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:y,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:N.featureFlags})));var re=I(e);if(re.doMigration){var te,ae,oe=10;if(null!=x&&x.value){var ne=k(Y.sys_id[null==x?void 0:x.value][0].interval);oe=ne.frequency,te=ne.frequencyInterval,ae=ne.dateRange}var ie=function(e,r){var t={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},a=function a(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),a=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(a,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))t.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){t.showAbsolutePeriod=!0,t.startTime=a(null==e?void 0:e.from),t.endTime=a(null==e?void 0:e.to);var o=new Date;new Date(t.startTime)>o&&!t.endTime?t.endTime=t.startTime:t.startTime&&!t.endTime?t.useCurrentDateForEnd=!0:!t.startTime&&t.endTime&&(t.showMaximumRange=!0,t.endTime=null)}else{t.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var n=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),i=m(Object.keys(s),function(e){return s[e]===n},!0),l=m(Object.keys(s),function(e){return s[e]===r},!0);t.period=i<l?r:n}return t}(e.timePeriod,ae),le={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",colorConfig:{type:\"default\"},configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[],dateFormat:\"default\",description:P,disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null==ie?void 0:ie.endTime,extensionType:S(G,A),filterConfigurations:\"@state.parFilters\",followFilters:!0,showFilterAsSeparateSeries:\"separate\"===e.multiple_elements_view,groupBy:[],headerTitle:O?B:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!1,hideYAxis2:!1,hideYAxis3:!1,hideYAxis4:!1,legendExpandToFit:!0,legendHorizontalAlignment:\"center\",legendPosition:\"bottom\",lineStrokeWidth:\"2\",metrics:[],filterPerMetric:[],newReporting:!1,numberOfPeriods:null==ie?void 0:ie.numberOfPeriods,period:null==ie?void 0:ie.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null==ie?void 0:ie.showAbsolutePeriod,useCurrentDateForEnd:null==ie?void 0:ie.useCurrentDateForEnd,showBorder:L,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:q,showConfidenceBand:J,showDataLabels:l,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:U,showForecastRange:!1,showGapPercentage:null,showHeader:C,showHeaderSeparator:!1,showLegend:!0,showLegendValue:!1,showMaximumRange:null==ie?void 0:ie.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:D,showThreshold:M,showTotalAggregate:!1,showTotalValue:d,showTrend:H,showXGrid:!0,showYGrid:!0,showContinuousLine:!1,sortBy:Q,sortByOrder:V,startTime:null==ie?void 0:ie.startTime,telemetry:\"null\",trendBy:{},wrapTitle:!1,yAxis0Title:c,yAxis0To:v,yAxis0From:u,yAxisStyle:\"default\",allowChangeDateRange:!1,showDateRangeByDefault:!1},se=h(null==R?void 0:R.value),de=_(se),ce=Y.sys_id[null==R?void 0:R.value][0],ue={},me={metricId:de,dataSourceId:se};ue[\"\".concat(null==R?void 0:R.value,\":\").concat(JSON.stringify(re.breakdowns))]=me,le.dataSources=[{allowRealTime:\"1\"===ce.type,allowTotalValue:\"1\"===ce.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:se,indicatorType:ce.type,isScriptedIndicator:!1,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:re.breakdowns,indicator:null==R?void 0:R.value}}],re.groupBy&&(re.groupBy.dataSource=se,re.groupBy.metric=de,re.groupBy.isChoice=$,re.groupBy.isPaBucket=ee,le.groupBy=[{disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[re.groupBy],hideZeroValues:!1}]),le.metrics=[{dataSource:se,id:de,aggregateIndicator:null!==(o=null==x?void 0:x.value)&&void 0!==o?o:\"\",frequency:oe,frequencyInterval:te,label:z,numberFormat:b(parseInt(ce.precision,10)),chartType:S(G),axisId:\"primary\"}],le.filterPerMetric=[{metricId:de,value:j}],\"column\"==G&&null!=A&&A.value?le.dataLabelPosition=\"middle\":le.trendBy={trendByFields:[{field:\"anything\",metric:de}],trendByFrequency:\"date\",trendByMinuteInterval:null};var pe=function(e,r,t,a,o,n,i){var l,s=null!==(l=e.widget_indicators[r])&&void 0!==l?l:[];s.sort(function(e,r){return parseInt(e.order,10)-parseInt(r.order,10)});try{var d,c=T(s);try{for(c.s();!(d=c.n()).done;){var u,m,v=d.value;if(\"true\"!==v.follow_element){var f=null===(u=v.indicator)||void 0===u?void 0:u.value;e.sys_id[f][0].name,n.migrationNotes.push(g({message:p(\"This visualization is in compatibility mode because the additional indicators follow elements feature is not supported.\"),level:1,originalArtifactSysId:r,artifactTable:null===(m=e.sys_id[r][0])||void 0===m?void 0:m.sys_table_name,featureFlags:n.featureFlags}))}}}catch(e){c.e(e)}finally{c.f()}}catch(e){console.error(\"ERROR: Error occurred while handling widget indicators for widget: \".concat(i||r))}var y,w=!1,R={},A=T(s);try{for(A.s();!(y=A.n()).done;){var x,E,F,P=y.value,B=I({breakdown:P.breakdown,breakdown_level2:P.breakdown_level2,element:P.element,element_level2:P.element_level2,indexes:e,elements_filter:P.elements_filter,manual_elements:P.manual_elements}),O=void 0,C=void 0,L=e.sys_id[null===(x=P.indicator)||void 0===x?void 0:x.value][0];if(o[\"\".concat(null===(E=P.indicator)||void 0===E?void 0:E.value,\":\").concat(JSON.stringify(B.breakdowns))]){var N,Y;O=o[\"\".concat(null===(N=P.indicator)||void 0===N?void 0:N.value,\":\").concat(JSON.stringify(B.breakdowns))].dataSourceId,C=o[\"\".concat(null===(Y=P.indicator)||void 0===Y?void 0:Y.value,\":\").concat(JSON.stringify(B.breakdowns))].metricId}else{var D,M,H,J,U;O=h(null===(D=P.indicator)||void 0===D?void 0:D.value),C=_(O),o[null===(M=P.indicator)||void 0===M?void 0:M.value]={metricId:C,dataSourceId:O},t.dataSources.push({allowRealTime:\"1\"===L.type,allowTotalValue:\"1\"===L.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:O,indicatorType:L.type,isScriptedIndicator:!1,label:L.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:B.breakdowns,indicator:null===(H=P.indicator)||void 0===H?void 0:H.value}});var q=\"primary\";\"true\"===P.second_y_axis&&(t.yAxis1Title=P.label,t.yAxis1Position=\"right\",t.yAxis1From=\"\",t.yAxis1To=\"\",q=\"axis1\");var G=10,z=void 0,j=null!==(J=null===(U=P.aggregate)||void 0===U?void 0:U.value)&&void 0!==J?J:\"\";if(j){var Q,V=k((null===(Q=e.sys_id[j])||void 0===Q?void 0:Q[0]).interval);G=V.frequency,z=V.frequencyInterval}var W={dataSource:O,id:C,aggregateIndicator:j,frequency:G,frequencyInterval:z,label:P.label,numberFormat:b(parseInt(L.precision,10)),chartType:S(P.chart_type),axisId:q},K={field:\"anything\",metric:C};\"stacked\"===P.chart_type&&(w=!0),t.metrics.push(W),t.filterPerMetric.push({metricId:C,value:\"true\"===(null==P?void 0:P.follow_element)}),t.trendBy.trendByFields.push(K)}B.groupBy&&(B.groupBy.dataSource=O,B.groupBy.metric=C,t.groupBy.push({disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[B.groupBy],hideZeroValues:!1})),\"\"!==P.color&&null!==(F=P.color)&&void 0!==F&&F.value&&(R[C]=P.color.value)}}catch(e){A.e(e)}finally{A.f()}return(t.metrics.length>1||t.groupBy.length>0)&&(t.showTarget=!1,t.showTrend=!1,t.showConfidenceBand=!1,t.showThreshold=!1,t.showComment=!1),{hasStackedColumn:w,widgetColors:R}}(Y,y,le,0,ue,N,B),ge=pe.hasStackedColumn,ve=pe.widgetColors;if(le.filterPerMetric.some(function(e){return null==e?void 0:e.value})||(le.followFilters=!1,le.showFilterIcon=!1),ge&&(le.extensionType=\"bar\",le.chartVariation=\"stacked\"),n&&n.length>0&&0===Object.keys(ve).length)le.colorConfig={type:\"palette\",palette:n};else if(le.metrics.length>1){var fe,he;fe=n&&n.length>0?w(null!==(he=Y.sys_id[n])&&void 0!==he?he:[],1)[0]:w(Y.sys_id[\"68d08c72d700210096614251ce61039e\"],1)[0];for(var _e=[],ye=0;ye<32;ye++){var be=\"color_\".concat(ye+1);if(\"\"===fe[be])break;_e.push(fe[be].value)}var we=0;le.colorConfig={type:\"colorsPerMetric\",values:le.metrics.map(function(e){var r;return e.id===de&&null!=i&&i.value?r=i.value:ve[e.id]?r=ve[e.id]:(r=_e[we%_e.length],we+=1),{metric:e.id,color:r}})}}else i&&1===le.metrics.length&&(le.colorConfig={type:\"singleColor\",values:[{color:i.value,metric:de}]});return le}N.migrationNotes.push(g({message:p(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:y,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:N.featureFlags}))},E=function E(e){switch(e.extensionType){case\"trend\":case\"bar\":return\"2bd5dc19a7ad083941b7c992a966dd78\";case\"line\":return\"18ac962264404bcc0039359d184b15f3\";case\"area\":return\"aba8630dc2ccc9b3c1774af1b6820696\";case\"step\":return\"7fa5f7264941fabfb1542985da30e0b8\";case\"spline\":return\"0f1e76928c4814e1430774fb864003f0\";case\"vertical_bar\":return\"23051643b7e03010097cb81cde11a910\"}};function F(e){return e?parseInt(e).toString():\"10\"}var P=function P(e,r,t,a){!function(e,r,t){for(var a=0,o=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:p(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:p(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<o.length;a++){var n=o[a];n.shouldLog&&e.migrationNotes.push(g(n.message))}}(e,r);var o,n=function(e){var r=e.indicator,t=e.element,a=e.show_data_labels,o=e.breakdown,n=e.aggregate,i=e.sort_direction,l=e.sort_on,s=e.breakdown_level2,d=e.element_level2,c=e.color_scheme,u=e.description,m=e.name,p=e.showTitle,g=e.type,v=e.period,f=e.date_from,h=e.date_to,_=e.show_range_selector,y=e.show_breakdown_selector,b=null==c?void 0:c.value,w=\"true\"===a,T=e.field,R=\"true\"===e.show_legend,A=e.set_color,I=\"true\"===e.show_total,S=e.yaxis_title,k=e.yaxis_from,x=e.yaxis_to,E=\"true\"===e.include_target,F=\"true\"===e.include_thresholds,P=\"true\"===e.include_trend,B=\"true\"===e.include_confidence,O=\"true\"===e.include_forecast,C=\"true\"===e.include_comments,L=e.compare_main_label,N=e.chart_color,Y=\"true\"===e.follow_element,D=e.multiple_elements_view,M={period:v,from:f,to:h};return{colorType:A,colorPalette:b,chartColor:N,showDataLabel:w,groupBy:T,showLegend:R,showTotal:I,yAxisTitle:S,yAxisFrom:k,yAxisTo:x,sysId:e.sys_id,indicator:r,element:t,show_data_labels:a,breakdown:o,aggregate:n,sort_direction:i,sort_on:l,breakdown_level2:s,color_scheme:c,description:u,name:m,showTitle:p,type:g,element_level2:d,timePeriod:M,showTarget:E,showThresholds:F,showTrend:P,showConfidence:B,showForecast:O,showComments:C,chartType:e.visualization,label:L,show_range_selector:_,followElement:Y,multiple_elements_view:D,show_breakdown_selector:y}}(r),i=function(e){return x(e)}(function(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}(n,{d:e,indexes:t},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(a)));return i?(function(e,r,t,a){var o;if(\"breakdown\"===r.type)if(void 0!==a.groupBy&&a.groupBy.length>0){var n=a.groupBy[0].maxNumberOfGroups;a.groupBy[0].maxNumberOfGroups=r.show_top_x?parseInt(r.show_top_x).toString():F(n)}else if(void 0!==a.breakdowns&&a.breakdowns.length>0){var i=a.breakdowns[0].perPage;a.breakdowns[0].perPage=r.show_top_x?parseInt(r.show_top_x).toString():F(i)}else e.migrationNotes.push(g({message:p(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===r.show_breakdown_selector){var l=r.indicator.value,s=null===(o=t.indicator_breakdowns)||void 0===o?void 0:o[l];a.additionalGroupByConfig=(null==s?void 0:s.map(function(e){var r,a,o=null===(r=t.sys_id[null===(a=e.breakdown)||void 0===a?void 0:a.value])||void 0===r?void 0:r[0];return{id:null==o?void 0:o.sys_id,metricLabel:null==o?void 0:o.name}}))||[]}else a.additionalGroupByConfig=[]}(e,r,t,i),{component_id:E(i),component_props:i}):e.migratingFromJava&&a?function(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}}(r,a):function(e,r){var t={message:p(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(g({message:p(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(g(t))&&e.migrationNotes.push(g(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(o=\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(o,\"</p>\"))})};this.run=function(e,r,t,a,o){var n,i={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=P(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"16bb0fd3a3d031108d80ad2f241e615e","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:42:34","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/18ac962264404bcc0039359d184b15f3","value":"18ac962264404bcc0039359d184b15f3"},"key":"linePAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),a=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(n)||(i=\"=\",n%1);){if((t=o.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=i.charAt(63&r>>8-n%1*8)}return a.toString()},r=function r(e,_r){return void 0!==e&&void 0!==_r&&e.indexOf(_r)>-1},t=function t(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,a=0;a<e.length;a++)e.charAt(a)!==r||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function o(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var a=function a(e,r){return{text:e,vars:r}},n=function n(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,n=e.artifactTable,l=e.hasNewArtifact,s=e.debugInfo,d=e.featureFlags,c={text:r,level:t,help:o,originSysId:a,hasNewArtifact:l,table:n,debugInfo:s};return\"true\"===(null==d?void 0:d.translatedLogs)?c:i(c)},i=function i(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text};function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var s=function s(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var o,a=t(e,\"^\"),n=[],i=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e3){s=!0,n=_e3},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw n}}}}(a);try{var s=function s(){var e=o.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,n=arguments[1],i=0;i<a;i++){var l=o[i];if(r.call(n,l,i,o))return t?i:l}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";n.push(e)};for(i.s();!(o=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}return n.join(\"^\")};var d=function d(e){return{durationFormat:u(o(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},c=function c(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=u(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},u=function u(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var n in t)void 0!==o[t[n]]&&e[n]!==o[t[n]]&&(a=!0,o[t[n]]=e[n]);return!!a&&o},m=function m(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},p=function p(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},g=(p(\"content_block_static\",\"com.glide.cms.RenderBlock\"),p(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),p(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),p(\"\",\"com.glide.ui.portal.RenderReport\"),p(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),f=(p(g.group,\"com.glideapp.home.RenderHomepagePublishers\"),p(g.group2,\"com.glideapp.home.RenderHomepagePublishers\"),p(g.single,\"com.glideapp.home.RenderHomepagePublishers\"),p(g.multi,\"com.glideapp.home.RenderHomepagePublishers\"),p(g.date,\"com.glideapp.home.RenderHomepagePublishers\"),p(g.bool,\"com.glideapp.home.RenderHomepagePublishers\"),p(g.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),p(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),p(g.debug,\"com.glideapp.home.RenderHomepagePublishers\"),p(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),p(\"\",\"com.glide.ui.portal.RenderDashboard\"),p(\"report\",\"com.glide.ui.portal.RenderJavascript\"),p(\"\",\"com.glide.ui.portal.RenderJavascript\"),p(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),p(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),p(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),p(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),v=function v(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},b=function b(e,r){var t={message:a(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(n({message:a(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(n(t))&&e.migrationNotes.push(n(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},h=function h(i,l,u,p){var h=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(n({message:a(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(i,l);if(\"STDDEV\"===(null==l?void 0:l.aggregate))return i.migratingFromJava&&p?v(l,p):b(i,{static_content:m(\"<b>Unsupported Aggregation:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==l?void 0:l.type,\"</span> report because Standard Deviation aggregation is not supported.\"))});var _,y=function(t,a,n){var i,l,u,m=(l=a.table,e(\"table\".concat(l).concat(new Date().getTime()).concat(1e8*Math.random()))),p=e(m+new Date().getTime()+1e8*Math.random()),g=function(e,r,t,o,a){var n={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},i={durationFormattingProperties:d,numberFormattingProperties:c};for(var l in e)if(i[l]&&e[l]&&Object.keys(e[l]).length>0){var s=Object.keys(e[l])[0];return i[l](e[l][s],r)}return n}(\"\"===a.formatting_configuration?\"{}\":a.formatting_configuration);switch(a.legend_horizontal_alignment){case\"right\":case\"left\":u=a.legend_horizontal_alignment;break;default:u=\"bottom\"}var f,v,b=(f=a.filter,v={sortBy:\"value\",sortByOrder:\"desc\"},r(f,\"ORDERBY\")&&r(f,\"ASC\")&&(v.sortByOrder=\"asc\"),v);return{additionalGroupByConfig:[],applyDateRange:!1,bareBorder:!1,colorConfig:{type:\"default\"},contextMenuActions:[],dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:s(a.filter),id:m,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"table\",tableOrViewName:a.table}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:[{categoryIndex:0,disableRanges:!1,groupBy:[{dataSource:m,groupByField:a.column,isChoice:!1,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1},{categoryIndex:1,disableRanges:!1,groupBy:[{dataSource:m,groupByField:a.row,isChoice:!0,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1},\"\"!==a.field&&a.field?{categoryIndex:2,disableRanges:!1,groupBy:[{dataSource:m,groupByField:a.field,isChoice:!0,isPaBucket:!1,isRange:!1}],hideZeroValues:!1,maxNumberOfGroups:10,showOthers:\"true\"===a.others,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\"}:{disableRanges:!1}],hideMatrixAggregate:!1,legendPosition:u,metrics:[o({aggregateFunction:(null===(i=a.aggregate)||void 0===i?void 0:i.length)>0?a.aggregate:\"COUNT\",aggregateField:\"COUNT\"!==a.aggregate?a.sumfield:void 0,axisId:\"primary\",dataSource:m,id:p},g)],newReporting:!1,numberOfPeriods:3,noDebounce:!1,period:\"M\",scoreType:null,showAbsolutePeriod:!1,showAdditionalGroupBySelector:!1,showBorder:!0,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:a.showHeader,headerTitle:a.showTitle?a.title:\"\",showHeaderSeparator:!1,showLegend:\"true\"===a.show_legend,showMaximumRange:!1,showMetricLabel:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:b.sortBy,sortByOrder:b.sortByOrder,telemetry:null,wrapTitle:!1}}(0,o(l,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(p)));return!y||h?i.migratingFromJava&&p?v(l,p):(_=\"report\",function(e,r,t,i){var l;return(l=_===f?function(){for(var e in g)if(g[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(n({message:a(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===_||_===f?function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?v(r,o):b(e,{static_content:m(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> widget.\"))})}(e,o(r,{type:l}),0,i):function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?v(r,o):b(e,{static_content:m(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> report.\"))})}(e,r,0,i)):function(e,r,t,o){var i,l,s,d;if(e.migratingFromJava&&o)return v(r,o);var c=\"\";null!=r&&r.type?c=r.type:null!=o&&null!==(i=o.type)&&void 0!==i&&i.value?c=null==o||null===(l=o.type)||void 0===l?void 0:l.value:null!=o&&null!==(s=o.renderer)&&void 0!==s&&s.value&&(c=o.renderer.value);var u=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(n({message:a(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),b(e,{static_content:m(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(c,\": \").concat(u,\"</span> widget.\"))})}(e,r,0,i)})(i,l,u,p):(function(e,r,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var a=t(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),o.additionalGroupByConfig=[],a.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(l,0,y),{component_id:\"50dbc52a13c8b4691f7c60e0246bf28c\",component_props:y})};this.run=function(e,r,t,o,a){var n,i={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=h(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"1ee36067b7232110997a9f78ce11a94f","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:20:46","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/50dbc52a13c8b4691f7c60e0246bf28c","value":"50dbc52a13c8b4691f7c60e0246bf28c"},"key":"bubbleReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"8","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),a=\"\",i=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(i)||(n=\"=\",i%1);){if((t=o.charCodeAt(i+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=n.charAt(63&r>>8-i%1*8)}return a.toString()},r=function r(e,_r){return void 0!==e&&void 0!==_r&&e.indexOf(_r)>-1},t=function t(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,a=0;a<e.length;a++)e.charAt(a)!==r||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function o(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,i=arguments[1],n=0;n<a;n++){var l=o[n];if(r.call(i,l,n,o))return t?n:l}}function a(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var i=function i(e,r){return{text:e,vars:r}},n=function n(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,s=e.debugInfo,d=e.featureFlags,u={text:r,level:t,help:o,originSysId:a,hasNewArtifact:n,table:i,debugInfo:s};return\"true\"===(null==d?void 0:d.translatedLogs)?u:l(u)},l=function l(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text};function s(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){l=!0,i=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var u=function u(r){return e(\"table\".concat(r).concat(new Date().getTime()).concat(1e8*Math.random()))},c=function c(r){return e(r+new Date().getTime()+1e8*Math.random())},p=function p(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var a,i=t(e,\"^\"),n=[],l=s(i);try{var d=function d(){var e=a.value;if(o(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";n.push(e)};for(l.s();!(a=l.n()).done;)d()}catch(e){l.e(e)}finally{l.f()}return n.join(\"^\")};function m(e){return m=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},m(e)}var g=function g(e){return{durationFormat:v(a(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},f=function f(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=v(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},v=function v(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var i in t)void 0!==o[t[i]]&&e[i]!==o[t[i]]&&(a=!0,o[t[i]]=e[i]);return!!a&&o},y=function y(e,r,t,o,a){var i={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},n={durationFormattingProperties:g,numberFormattingProperties:f};switch(a){case\"heatmap\":case\"box\":return\"glide_duration\"===t?i:n.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===m(e)&&n.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return n.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(n[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return n[s](e[s][d],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:i},b=function b(e){return e.join(\":\")},h=function h(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")};function _(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var w=function w(e,t,l){var d,m,g,f,v,h,w,R,S,F,T,A,P=\"bar\"===e.type,x=12;\"-1\"===e.other_threshold?x=\"ALL\":e.other_threshold>-2&&(x=e.other_threshold);var I,O,B=y(e.formatting_configuration,parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregateType),C=u(e.table),N=c(C),E=p(e.filter),J={sortBy:\"value\",sortByOrder:\"desc\"};r(e.filter,\"^ORDERBY\")&&(I=e.filter,O={sortBy:\"value\",sortByOrder:\"desc\"},r(I,\"ORDERBY\")&&r(I,\"ASC\")&&(O.sortByOrder=\"asc\"),J=O);var M={},k=b([e.table,null===(d=e.report_source)||void 0===d?void 0:d.value,E]);M[k]={metricId:N,dataSourceId:C,metricColor:null===(m=e.color)||void 0===m?void 0:m.value};var H,U={configVersion:\"23.0.0-ci-SNAPSHOT\",yAxisHidden:!1,yAxisPosition:P||\"true\"!==e.x_axis_opposite?\"bottom\":\"top\",yAxisShowGrid:!0,xAxisWrapLabels:!1,xAxisMaxLabelSize:100,xAxisTruncationType:\"end\",yAxisStyle:\"clean\",showLegend:\"true\"===e.show_legend,showLegendValue:!1,legendPosition:\"bottom\",legendHorizontalAlignment:\"center\",legendExpandToFit:!1,showDataLabels:\"true\"===e.show_chart_data_label,dataLabelPosition:\"true\"===e.show_data_label_position_middle?\"middle\":\"top\",showStackedValues:\"none\",showOverlappingLabels:!1,newReporting:!1,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:E,reportSourceSysId:null===(g=e.report_source)||void 0===g?void 0:g.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:C,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[a({dataSource:C,id:N,label:(null===(f=e.series_name_text)||void 0===f?void 0:f.length)>0?e.series_name_text:void 0,aggregateFunction:(null===(v=e.aggregate)||void 0===v?void 0:v.length)>0?e.aggregate:\"COUNT\",aggregateField:\"COUNT\"===e.aggregate&&\"\"!==e.sumfield?void 0:e.sumfield,axisId:\"primary\"},B)],groupBy:[e.field&&e.field.length>0?{groupBy:[{dataSource:C,groupByField:e.field,isRange:null!==(h=null===(w=e.groupByMetadata)||void 0===w?void 0:w.isRange)&&void 0!==h&&h,isChoice:\"choice\"===(null===(R=e.groupByMetadata)||void 0===R?void 0:R.type),isPaBucket:!1}],maxNumberOfGroups:null!==(S=e.groupByMetadata)&&void 0!==S&&S.isRange?\"ALL\":x,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null===(F=e.groupByMetadata)||void 0===F||!F.isRange)&&\"true\"===e.others}:void 0],sortBy:J.sortBy,sortByOrder:J.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",yAxisTitle:e.y_axis_title,xAxisTitle:e.x_axis_title,yAxisFrom:e.y_axis_from,yAxisTo:e.y_axis_to,showDataTable:\"true\"==e.display_grid};H=e.additional_groupby||\"true\"!==e.bar_unstack&&e.trend_field&&\"\"!==e.trend_field?\"stacked\":\"grouped\",U.chartVariation=H,e.trend_field&&\"\"!==e.trend_field&&U.groupBy.push({groupBy:[{dataSource:C,groupByField:e.trend_field,isRange:e.trendMetadata.isRange,isChoice:\"choice\"===e.trendMetadata.type,isPaBucket:!1}]});var D,L=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return _(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n2=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n2=e.done,e},e:function e(_e5){l=!0,i=_e5},f:function f(){try{_n2||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}(null!==(A=l.report_layers[e.sys_id])&&void 0!==A?A:[]);try{var j=function j(){var t,i,n,l,s=D.value,d=U.dataSources.map(function(e){return e.tableOrViewName}).concat(U.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),m=p(s.filter);k=b([s.table,null===(t=s.report_source)||void 0===t?void 0:t.value,m,s.sys_id]);var g=function(e,r,t){return o(Object.keys(e),function(e){return e===r})?e[r].dataSourceId:u(t)}(M,k,s.table);M[k]={metricId:c(g),dataSourceId:g,metricColor:null==s||null===(i=s.color)||void 0===i?void 0:i.value};var f,v=function(e,r,t){var a=o(e,function(e){return e.id===r}),i=!1;return a&&a.filterQuery===t||(i=!0),i}(U.dataSources,g,m);if((!r(d,s.table)&&!r(d,s.report_source)||v)&&U.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:s.table,filterQuery:m,reportSourceSysId:null===(f=s.report_source)||void 0===f?void 0:f.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:g,dataCategories:[\"trend\",\"group\",\"simple\"]}),U.metrics.push(a({dataSource:M[k].dataSourceId,id:M[k].metricId,aggregateFunction:s.aggregate,aggregateField:\"COUNT\"===s.aggregate&&\"\"!==s.sumfield?void 0:s.sumfield,axisId:\"primary\",label:(null===(n=s.series_name_text)||void 0===n?void 0:n.length)>0?s.series_name_text:void 0},y(s.formatting_configuration,parseInt(e.decimal_precision,10),s.aggregateFieldType,s.aggregateType))),(null===(l=s.field)||void 0===l?void 0:l.length)>0){var h={dataSource:M[k].dataSourceId,groupByField:s.field,isRange:!1,isChoice:!1,isPaBucket:!1},_=!1;U.groupBy[0].groupBy.forEach(function(e){_=_||e.dataSource==h.dataSource&&e.groupByField==h.groupByField}),_||U.groupBy[0].groupBy.push(h)}};for(L.s();!(D=L.n()).done;)j()}catch(e){L.e(e)}finally{L.f()}return U.colorConfig=function(e){var r=e.colorPalette,t=e.colorType,a=e.dashboard,l=e.reportId,d=e.enableColorPerMetric,u=e.singleColor,c=e.metrics,p=e.colorList,m=e.metricMap;if(c&&m&&!a.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var g={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)g.type=\"palette\",g.palette=r;else if(\"several_colors\"===t)!p||Array.isArray(p)&&!o(p,function(e){return\"\"!==e})?g.type=\"chartColor\":a.migrationNotes.push(n({message:i(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:i(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:l,artifactTable:\"sys_report\",featureFlags:a.featureFlags}));else if(\"chart_colors\"===t)g.type=\"chartColor\";else if(\"one_color\"===t&&((null==u?void 0:u.length)>0||o(Object.keys(null!=m?m:{}),function(e){var r;return(null===(r=m[e].metricColor)||void 0===r?void 0:r.length)>0})))if(m){for(var f=d?\"colorsPerMetric\":\"singleColor\",v=[],y=0,b=Object.keys(m);y<b.length;y++){var h,_=b[y];v.push({metric:m[_].metricId,color:null!==(h=m[_].metricColor)&&void 0!==h?h:\"de699435d7033100b4964ebfae610331\"})}g.type=f,g.values=v}else{var w,R=[],S=s(null!=c?c:[]);try{for(S.s();!(w=S.n()).done;){var F=w.value;R.push({color:u,metric:F})}}catch(e){S.e(e)}finally{S.f()}g.type=\"singleColor\",g.values=R}return g}({colorPalette:null===(T=e.color_palette)||void 0===T?void 0:T.value,colorType:e.set_chart_color||e.set_color,dashboard:t,reportId:e.sys_id,singleColor:e.color.value,colorList:e.colors,enableColorPerMetric:!1,metricMap:M}),U},R=function R(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},S=(R(\"content_block_static\",\"com.glide.cms.RenderBlock\"),R(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),R(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),R(\"\",\"com.glide.ui.portal.RenderReport\"),R(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),F=(R(S.group,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.group2,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.single,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.multi,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.date,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.bool,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),R(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),R(S.debug,\"com.glideapp.home.RenderHomepagePublishers\"),R(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),R(\"\",\"com.glide.ui.portal.RenderDashboard\"),R(\"report\",\"com.glide.ui.portal.RenderJavascript\"),R(\"\",\"com.glide.ui.portal.RenderJavascript\"),R(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),R(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),R(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),R(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),T=function T(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},A=function A(e,r){var t={message:i(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(n({message:i(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(n(t))&&e.migrationNotes.push(n(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},P=function P(e,r,o,l){var s,d=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(n({message:i(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(e,r);if(d)return e.migratingFromJava&&l?T(r,l):(s=\"report\",function(e,r,t,o){var l;return(l=s===F?function(){for(var e in S)if(S[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(n({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===s||s===F?function(e,r,t,o){var a,i,n;return e.migratingFromJava&&o?T(r,o):A(e,{static_content:h(\"<b>Unsupported migration: \".concat(null!==(a=null!==(i=r.name)&&void 0!==i?i:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> widget.\"))})}(e,a(r,{type:l}),0,o):function(e,r,t,o){var a,i,n;return e.migratingFromJava&&o?T(r,o):A(e,{static_content:h(\"<b>Unsupported migration: \".concat(null!==(a=null!==(i=r.name)&&void 0!==i?i:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var a,l,s,d;if(e.migratingFromJava&&o)return T(r,o);var u=\"\";null!=r&&r.type?u=r.type:null!=o&&null!==(a=o.type)&&void 0!==a&&a.value?u=null==o||null===(l=o.type)||void 0===l?void 0:l.value:null!=o&&null!==(s=o.renderer)&&void 0!==s&&s.value&&(u=o.renderer.value);var c=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(n({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),A(e,{static_content:h(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(u,\": \").concat(c,\"</span> widget.\"))})}(e,r,0,o)})(e,r,o,l);var u=w(a(r,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(l)),e,o);return function(e,r,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var a=t(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),o.additionalGroupByConfig=[],a.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(r,0,u),{component_id:\"bar\"===r.type?\"23051643b7e03010097cb81cde11a910\":\"85855283b7e03010097cb81cde11a91d\",component_props:u}};this.run=function(e,r,t,o,a){var i,n={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(i=e.sys_id[t])||void 0===i?void 0:i[0],s=P(n,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=n.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"20a17899431131106e3f864e3ab8f23c","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-09-14 12:25:39","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/23051643b7e03010097cb81cde11a910","value":"23051643b7e03010097cb81cde11a910"},"key":"verticalBarReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"metricBase\",r={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},t=function t(e){for(var r,t,o=\"\".concat(e),i=\"\",a=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(a)||(n=\"=\",a%1);){if((t=o.charCodeAt(a+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,i+=n.charAt(63&r>>8-a%1*8)}return i.toString()},o=function o(e,r){return void 0!==e&&void 0!==r&&e.indexOf(r)>-1},i=function i(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,i=0;i<e.length;i++)e.charAt(i)!==r||(t.push(e.substring(o,i)),o=i+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function a(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),i=o.length>>>0,a=arguments[1],n=0;n<i;n++){var l=o[n];if(r.call(a,l,n,o))return t?n:l}}function n(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var l=function l(e,r){return{text:e,vars:r}},s=function s(e){var r=e.message,t=e.level,o=e.tooltip,i=e.originalArtifactSysId,a=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,u={text:r,level:t,help:o,originSysId:i,hasNewArtifact:n,table:a,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?u:d(u)},d=function d(e){var r,t,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},u=\"sys_report\";function c(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,_n=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){l=!0,a=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw a}}}}function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var g=function g(e){return t(\"table\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},p=function p(e){return t(e+new Date().getTime()+1e8*Math.random())},f=function f(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,o=i(e,\"^\"),n=[],l=c(o);try{var s=function s(){var e=t.value;if(a(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";n.push(e)};for(l.s();!(t=l.n()).done;)s()}catch(e){l.e(e)}finally{l.f()}return n.join(\"^\")};function v(e){return v=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},v(e)}var h=function h(e){return{durationFormat:b(n(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},y=function y(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=b(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},b=function b(e,r,t){var o=JSON.parse(JSON.stringify(r)),i=!1;for(var a in t)void 0!==o[t[a]]&&e[a]!==o[t[a]]&&(i=!0,o[t[a]]=e[a]);return!!i&&o},_=function _(e,r,t,o,i){var a={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},n={durationFormattingProperties:h,numberFormattingProperties:y};switch(i){case\"heatmap\":case\"box\":return\"glide_duration\"===t?a:n.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===v(e)&&n.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return n.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(n[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return n[s](e[s][d],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:a},w=function w(e){return e.join(\":\")},T=function T(e,r,t){return a(Object.keys(e),function(e){return e===r})?e[r].dataSourceId:g(t)},A=function A(e,r,t){var o=a(e,function(e){return e.id===r}),i=!1;return o&&o.filterQuery===t||(i=!0),i};function R(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return F(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?F(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,_n2=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n2=e.done,e},e:function e(_e5){l=!0,a=_e5},f:function f(){try{_n2||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw a}}}}function F(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function S(e){switch(e){case\"line_bar\":return\"bar\";case\"step_line\":return\"step\";default:return e}}var x=function x(e,t){var o={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},i=function i(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),o=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(o,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))o.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){o.showAbsolutePeriod=!0,o.startTime=i(null==e?void 0:e.from),o.endTime=i(null==e?void 0:e.to);var n=new Date;new Date(o.startTime)>n&&!o.endTime?o.endTime=o.startTime:o.startTime&&!o.endTime?o.useCurrentDateForEnd=!0:!o.startTime&&o.endTime&&(o.showMaximumRange=!0,o.endTime=null)}else{o.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var l=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),s=a(Object.keys(r),function(e){return r[e]===l},!0),d=a(Object.keys(r),function(e){return r[e]===t},!0);o.period=s<d?t:l}return o},O=function O(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},I=function I(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},P=(I(\"content_block_static\",\"com.glide.cms.RenderBlock\"),I(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),I(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),I(\"\",\"com.glide.ui.portal.RenderReport\"),I(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),C=(I(P.group,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.group2,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.single,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.multi,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.date,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.bool,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),I(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),I(P.debug,\"com.glideapp.home.RenderHomepagePublishers\"),I(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"\",\"com.glide.ui.portal.RenderDashboard\"),I(\"report\",\"com.glide.ui.portal.RenderJavascript\"),I(\"\",\"com.glide.ui.portal.RenderJavascript\"),I(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),I(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),I(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),I(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),B=function B(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},N=function N(e,r){var t={message:l(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(s({message:l(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(s(t))&&e.migrationNotes.push(s(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},E=function E(r,t,d,m){var v,h=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(s({message:l(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(r,t),y=function(e){var r,t,o,a,n=e.table,l=e.aggregateFieldType,s=e.filter,d=e.groupByMetadata,u=e.chart_title||e.title,c=null===(r=e.color_palette)||void 0===r?void 0:r.value,m=e.show_chart_data_label,g=e.field,p=e.legend_horizontal_alignment,f=e.legend_vertical_alignment,v=e.show_legend,h=e.decimal_precision,y=e.show_chart_border,b=e.source_type,_=e.aggregate,w=e.other_threshold,T=e.sumfield,A=i(e.colors,\",\"),R=e.set_color,F=null===(t=e.color)||void 0===t?void 0:t.value,S=e.show_chart_total,x=e.trend_field,O=e.interval,I=e.x_axis_title,P=e.x_axis_display_grid,C=e.y_axis_display_grid,B=e.y_axis_title,N=e.y_axis_from,E=e.y_axis_to,k=e.y_axis_opposite,D=e.show_marker;try{a=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(r){console.log(\"Unable to transform json 2\",r.toString(),e),a={}}var J=null===(o=e.report_source)||void 0===o?void 0:o.value,M=e.is_real_time,H=e.bar_unstack,U=e.series_name_text,L={};try{var j;e.custom_config&&\"\"!==e.custom_config&&(L=null===(j=JSON.parse(e.custom_config))||void 0===j?void 0:j.transforms)}catch(r){console.log(\"Unable to transform widget.custom_config to json \",r.toString(),e.custom_config),L={}}var G=e.start_time,z=e.end_time,V=e.display_grid;return{table:n,chartTitle:u,colorType:R,colorPalette:c,singleColor:F,showDataLabel:m,groupBy:g,legendVerticalAlignment:f,legendHorizontalAlignment:p,showLegend:v,numberOfPeriods:h,showChartBorder:y,sourceType:b,aggregateType:_,otherThreshold:w,filter:s,aggregateField:T,colors:A,showTotal:S,trendBy:x,trendInterval:O,xAxisTitle:I,xAxisShowGrid:P,yAxisShowGrid:C,yAxisTitle:B,yAxisFrom:N,yAxisTo:E,yAxisOpposite:k,formattingConfiguration:a,reportSource:J,reportId:e.sys_id,isRealTime:M,isGroupedBars:H,aggregateFieldType:l,dataSetName:U,groupByMetadata:d,customConfig:L,startTime:G,endTime:z,showMarkers:D,showDataTable:V}}(t),b=function(r){var t,i=function(r){var t,i,d,m,v,h,y,b,F=r.table,O=r.chartTitle,I=r.colorPalette,P=r.showDataLabel,C=r.groupBy,B=r.showOthers,N=r.legendHorizontalAlignment,E=r.legendVerticalAlignment,k=r.numberOfPeriods,D=(r.showChartBorder,r.sourceType),J=r.aggregateType,M=r.otherThreshold,H=r.filter,U=r.showLegend,L=r.aggregateField,j=r.colorType,G=r.trendBy,z=r.trendInterval,V=r.xAxisTitle,Y=r.xAxisShowGrid,W=r.yAxisShowGrid,Z=r.yAxisTitle,Q=r.yAxisFrom,q=r.yAxisTo,X=r.yAxisOpposite,$=r.formattingConfiguration,K=r.reportSource,ee=r.reportId,re=r.aggregateFieldType,te=r.d,oe=r.showHeader,ie=r.showTitle,ae=r.showBorder,ne=r.indexes,le=(r.dataSetName,r.groupByMetadata),se=r.singleColor,de=r.customConfig,ue=r.startTime,ce=r.endTime,me=r.colors,ge=r.showMarkers,pe=r.showDataTable,fe=function(e,r){var t,i=\"value\",a=\"desc\";if(o(e,\"ORDERBY\")&&(i=\"name\",o(e,\"DESC\")||(a=\"asc\")),r&&!o(e,\"ORDERBY\")){var n=r.type,l=r.internalType;a=\"asc\",\"date\"===(t=n)||\"datetime\"===t||\"due_date\"===t||\"glide_date\"===t||\"glide_date_time\"===t||\"glide_precise_time\"===t?i=\"report_range\":function(e){return\"integer\"===e||\"decimal\"===e||\"numeric\"===e||\"float\"===e||\"domain_number\"===e||\"auto_increment\"===e||\"percent_complete\"===e}(n)?i=\"value\":\"choice\"===n&&\"integer\"===l?i=\"choice\":\"reference\"===n||\"choice\"===n&&\"string\"===l?i=\"name\":a=\"desc\"}return{sortBy:i,sortByOrder:a}}(H,le),ve=f(H),he=function(e,r){var t={register:\"\",horizontal:\"\",orientation:\"vertical\"};function o(){t.horizontal=\"center\",\"left\"===e&&(t.horizontal=\"start\"),\"right\"===e&&(t.horizontal=\"end\")}return\"right\"===e?(t.register=\"right\",t.horizontal=\"center\"):\"left\"===e&&(t.register=\"left\",t.horizontal=\"center\"),\"bottom\"===r||\"center\"===r||\"middle\"===e?(t.register=\"bottom\",t.orientation=\"horizontal\",o()):\"top\"===r&&(t.orientation=\"horizontal\",t.register=\"top\",o()),t}(N,E),ye=function(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(r){return e}}(M),be=_($,parseInt(k,10),re,J),_e=g(F),we=p(_e),Te={},Ae=w([F,null==K?void 0:K.value,ve]);Te[Ae]={metricId:we,dataSourceId:_e,metricColor:se};var Re,Fe=!1;switch(z){case\"dayofweek\":b=\"dayOfWeek\",Fe=!0;break;case\"hour\":b=\"hourOfDay\",Fe=!0;break;default:b=z}if(32===z.length&&(b=z),\"metricbase\"===D){var Se={period:0===(null==ue?void 0:ue.indexOf(\"P\"))?ue.slice(1):\"between\",from:ue,to:ce};k=(Re=x(Se,\"1D\")).numberOfPeriods,D=e,delete be.durationFormat,delete be.dateFormat,delete be.stringFormat}var xe={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:ve,id:_e,isDatabaseView:!1,label:void 0,reportSourceSysId:K,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===D||0===D.length?\"table\":D,tableOrViewName:D!==e?F:void 0,table:D===e?F:void 0}],dateFormat:\"default\",disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null===(t=Re)||void 0===t?void 0:t.endTime,extensionType:\"area\",filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:(null!==(i=null==C?void 0:C.length)&&void 0!==i?i:0)>0?[{disableRanges:!1,groupBy:[{dataSource:_e,groupByField:C,isChoice:\"choice\"===(null==le?void 0:le.type),isPaBucket:!1,isRange:null==le?void 0:le.isRange,metric:we}],hideZeroValues:!1,maxNumberOfGroups:null!=le&&le.isRange?\"ALL\":ye,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==le||!le.isRange)&&\"true\"===B}]:[],headerTitle:ie?O:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!0,hideYAxis2:!0,hideYAxis3:!0,hideYAxis4:!0,legendExpandToFit:!0,legendHorizontalAlignment:he.horizontal,legendPosition:he.register,lineStrokeWidth:\"2\",metrics:[n({aggregateFunction:(null==J?void 0:J.length)>0?J:\"COUNT\",axisId:\"primary\",dataSource:_e,id:we,label:void 0,transforms:de},be)],newReporting:!1,numberOfPeriods:parseInt(k,10),period:null===(d=Re)||void 0===d?void 0:d.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null===(m=Re)||void 0===m?void 0:m.showAbsolutePeriod,showBorder:ae,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===P,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:null,showHeader:oe,showHeaderSeparator:!1,showLegend:\"true\"===U,showLegendValue:!1,showMaximumRange:null===(v=Re)||void 0===v?void 0:v.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showContinuousLine:!0,enableAddZerosAtApi:Fe,showMarkers:\"true\"===ge,showTotalValue:null,showTrend:!1,showXGrid:\"true\"===Y,showYGrid:\"true\"===W,sortBy:fe.sortBy,sortByOrder:fe.sortByOrder,startTime:null===(h=Re)||void 0===h?void 0:h.startTime,telemetry:\"null\",trendBy:{trendByFields:[{field:G,metric:we}],trendByFrequency:b,trendByMinuteInterval:null},wrapTitle:!1,xAxisTitle:V,yAxis0From:Q,yAxis0Position:\"true\"===X?\"right\":\"left\",yAxis0Title:Z,yAxis0To:q,showDataTable:\"true\"===pe};L&&\"COUNT\"!==J&&\"\"!==L&&(xe.metrics[0].aggregateField=L);var Oe,Ie=R(null!==(y=ne.report_layers[ee])&&void 0!==y?y:[]);try{for(Ie.s();!(Oe=Ie.n()).done;){var Pe,Ce,Be,Ne,Ee=Oe.value,ke=xe.dataSources.map(function(e){return e.tableOrViewName}).concat(xe.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),De=f(Ee.filter);Ae=w([F,null==K?void 0:K.value,De,Ee.sys_id]);var Je=T(Te,Ae,Ee.table);Te[Ae]={metricId:p(Je),dataSourceId:Je,metricColor:null===(Pe=Ee.color)||void 0===Pe?void 0:Pe.value};var Me,He=A(xe.dataSources,Je,De);if((!o(ke,Ee.table)&&!o(ke,Ee.report_source)||He)&&xe.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:Ee.table,filterQuery:De,reportSourceSysId:null===(Me=Ee.report_source)||void 0===Me?void 0:Me.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:Je,dataCategories:[\"trend\",\"group\",\"simple\"]}),xe.metrics.push(n({dataSource:Te[Ae].dataSourceId,id:Te[Ae].metricId,aggregateFunction:Ee.aggregate,aggregateField:\"COUNT\"===Ee.aggregate&&\"\"!==Ee.sumfield?void 0:Ee.sumfield,axisId:\"primary\",label:(null===(Ce=Ee.series_name_text)||void 0===Ce?void 0:Ce.length)>0?Ee.series_name_text:void 0,chartType:S(Ee.type)},_(Ee.formatting_configuration,parseInt(k,10),Ee.aggregateFieldType,Ee.aggregateType))),(null===(Be=Ee.trend_field)||void 0===Be?void 0:Be.length)>0&&xe.trendBy.trendByFields.push({field:Ee.trend_field,metric:Te[Ae].metricId}),(null===(Ne=Ee.field)||void 0===Ne?void 0:Ne.length)>0||xe.groupBy.length>0)return void te.migrationNotes.push(s({message:l(\"This visualization is in compatibility mode because the group by configuration is not supported for this metric.\"),level:1,originalArtifactSysId:ee,artifactTable:u,featureFlags:te.featureFlags}))}}catch(e){Ie.e(e)}finally{Ie.f()}return xe.colorConfig=function(e){var r=e.colorPalette,t=e.colorType,o=e.dashboard,i=e.reportId,n=e.enableColorPerMetric,d=e.singleColor,m=e.metrics,g=e.colorList,p=e.metricMap;if(m&&p&&!o.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var f={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)f.type=\"palette\",f.palette=r;else if(\"several_colors\"===t)!g||Array.isArray(g)&&!a(g,function(e){return\"\"!==e})?f.type=\"chartColor\":o.migrationNotes.push(s({message:l(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:l(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:i,artifactTable:u,featureFlags:o.featureFlags}));else if(\"chart_colors\"===t)f.type=\"chartColor\";else if(\"one_color\"===t&&((null==d?void 0:d.length)>0||a(Object.keys(null!=p?p:{}),function(e){var r;return(null===(r=p[e].metricColor)||void 0===r?void 0:r.length)>0})))if(p){for(var v=n?\"colorsPerMetric\":\"singleColor\",h=[],y=0,b=Object.keys(p);y<b.length;y++){var _,w=b[y];h.push({metric:p[w].metricId,color:null!==(_=p[w].metricColor)&&void 0!==_?_:\"de699435d7033100b4964ebfae610331\"})}f.type=v,f.values=h}else{var T,A=[],R=c(null!=m?m:[]);try{for(R.s();!(T=R.n()).done;){var F=T.value;A.push({color:d,metric:F})}}catch(e){R.e(e)}finally{R.f()}f.type=\"singleColor\",f.values=A}return f}({colorPalette:I,colorType:j,dashboard:te,reportId:ee,singleColor:se,colorList:me,enableColorPerMetric:!0,metricMap:Te}),xe}(r);if(i){var d=r.indexes,m=r.reportId;return(null!==(t=d.report_layers[m])&&void 0!==t?t:[]).length>0||\"true\"===r.isGroupedBars?i.chartVariation=\"side-by-side\":i.chartVariation=\"stacked\",i.extensionType=\"bar\",i}}(n(y,{d:r,indexes:d},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(m)));return!b||h?r.migratingFromJava&&m?B(t,m):(v=\"report\",function(e,r,t,o){var i;return(i=v===C?function(){for(var e in P)if(P[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===v||v===C?function(e,r,t,o){var i,a,n;return e.migratingFromJava&&o?B(r,o):N(e,{static_content:O(\"<b>Unsupported migration: \".concat(null!==(i=null!==(a=r.name)&&void 0!==a?a:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> widget.\"))})}(e,n(r,{type:i}),0,o):function(e,r,t,o){var i,a,n;return e.migratingFromJava&&o?B(r,o):N(e,{static_content:O(\"<b>Unsupported migration: \".concat(null!==(i=null!==(a=r.name)&&void 0!==a?a:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var i,a,n,d;if(e.migratingFromJava&&o)return B(r,o);var u=\"\";null!=r&&r.type?u=r.type:null!=o&&null!==(i=o.type)&&void 0!==i&&i.value?u=null==o||null===(a=o.type)||void 0===a?void 0:a.value:null!=o&&null!==(n=o.renderer)&&void 0!==n&&n.value&&(u=o.renderer.value);var c=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),N(e,{static_content:O(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(u,\": \").concat(c,\"</span> widget.\"))})}(e,r,0,o)})(r,t,d,m):(function(e,r,t){if(e.additional_groupby){t.showAdditionalGroupBySelector=!0;var o=i(e.additional_groupby,\",\");-1===o.indexOf(e.field)&&o.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&o.push(e.trend_field),t.additionalGroupByConfig=[],o.forEach(function(e){t.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(t,0,b),{component_id:\"2bd5dc19a7ad083941b7c992a966dd78\",component_props:b})};this.run=function(e,r,t,o,i){var a,n={migratingFromJava:!0,migrationNotes:[],featureFlags:i,migratingSingleArtifact:!0},l=null===(a=e.sys_id[t])||void 0===a?void 0:a[0],s=E(n,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=n.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"2214e067b7232110997a9f78ce11a927","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:21:36","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/2bd5dc19a7ad083941b7c992a966dd78","value":"2bd5dc19a7ad083941b7c992a966dd78"},"key":"lineBarReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"22","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"2d56f06d55f46bbd4e79b5e624beb940\",t=\"d24d53f60350de7a652caf3188a46ed2\",r=\"96abe7e38d8790718022c5630a92176c\",a=\"a2b0596cec6b9d49dd1ff9bf76b5084b\",o=\"3809c6583b8dd540a0bf735ed493bae2\",i=\"226449101138d0dff1abe0e1566c8b2a\",n=\"aba8630dc2ccc9b3c1774af1b6820696\",l=\"2bd5dc19a7ad083941b7c992a966dd78\",s=\"18ac962264404bcc0039359d184b15f3\",d=\"0f1e76928c4814e1430774fb864003f0\",u=\"7fa5f7264941fabfb1542985da30e0b8\",c=\"23051643b7e03010097cb81cde11a910\",g=\"53e0a2b49e3ff92ba54ea7ea6f0d0583\",p=\"d1f6c60ce95607ea1ef236430d5fdec9\",m=\"0805a7bf91a93efbdf0a975b38b01051\",f=\"037bd8ea3013833fd049186779528b70\",v=\"259e0221ff18a75c5f5f0fb28fa5d32f\",h=\"9d31ba4d773ce32ef350d4555b673f6e\",y=\"10fea73f9f5c73001bb9baac757fcfd9\",_=\"65b30395a9fe3dba003277a7b660b5db\",b=/^[a-fA-F0-9]{32}(\\u0007)?/,w=\"metricBase\",T={DAY:1,WEEK:2,MONTH:3,QUARTER:4,FQ:5,YEAR:6,FY:7,WEEK2DATE:8,MONTH2DATE:9,QUARTER2DATE:10,FQ2DATE:11,YEAR2DATE:12,FY2DATE:13,WEEK_PLUS:14,MONTH_PLUS:15,QUARTER_PLUS:16,FQ_PLUS:17,YEAR_PLUS:18,FY_PLUS:19},S=10,A=20,F=40,C=60,R=65,I=80,O=85,x={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},N=\"single_score\",B=\"donut\",E=\"semi_donut\",P=\"area\",k=\"line_bar\",D=\"spline\",M=\"step_line\",L=\"pivot_v2\",G=\"pivot\",U=\"horizontal_bar\",H=\"vertical_bar\",J=\"heatmap\",j=\"angular_gauge\",V=\"solid_gauge\",z=\"trend\",Y=[N,\"pie\",B,E,P,k,D,M,G,L,\"bar\",U,H,J,j,V,z,\"box\"],q=function q(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},W=function W(e,t,r){return\"com.glideapp.home.RenderHomepagePublishers\"===t&&r&&!Number.isNaN(parseInt(r,10))?\"\".concat(null!=r?r:\"\",\"::\").concat(null!=t?t:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=t?t:\"\")},Q=W(\"content_block_static\",\"com.glide.cms.RenderBlock\"),Z=W(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),X=W(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),K=\"com.glide.ui.portal.RenderReport\",$=W(\"\",K),ee=W(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),te=W(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),re=W(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),ae=W(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),oe=W(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),ie=W(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),ne=W(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),le=W(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),se=W(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),de={group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"},ue=W(de.group,\"com.glideapp.home.RenderHomepagePublishers\"),ce=W(de.group2,\"com.glideapp.home.RenderHomepagePublishers\"),ge=W(de.single,\"com.glideapp.home.RenderHomepagePublishers\"),pe=W(de.multi,\"com.glideapp.home.RenderHomepagePublishers\"),me=W(de.date,\"com.glideapp.home.RenderHomepagePublishers\"),fe=W(de.bool,\"com.glideapp.home.RenderHomepagePublishers\"),ve=W(de.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),he=W(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),ye=W(de.debug,\"com.glideapp.home.RenderHomepagePublishers\"),_e=W(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),be=W(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),we=W(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),Te=W(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),Se=W(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),Ae=W(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),Fe=W(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),Ce=W(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),Re=W(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),Ie=W(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),Oe=W(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),xe=W(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),Ne=W(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),Be=W(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),Ee=W(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),Pe=W(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),ke=W(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),De=W(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),Me=W(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),Le=W(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),Ge=W(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),Ue=W(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),He=W(\"\",\"com.glide.ui.portal.RenderDashboard\"),Je=W(\"report\",\"com.glide.ui.portal.RenderJavascript\"),je=W(\"\",\"com.glide.ui.portal.RenderJavascript\"),Ve=W(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),ze=W(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),Ye=W(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),qe=W(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),We=\"widget\",Qe=\"report\",Ze=\"filter\",Xe=function Xe(e){for(var t,r,a=\"\".concat(e),o=\"\",i=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(i)||(n=\"=\",i%1);){if((r=a.charCodeAt(i+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");t=t<<8|r,o+=n.charAt(63&t>>8-i%1*8)}return o.toString()},Ke=function Ke(e,t){return void 0!==e&&void 0!==t&&e.indexOf(t)>-1},$e=function $e(e,t){if(void 0===e)return[];if(1!==t.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var r=[],a=0,o=0;o<e.length;o++)e.charAt(o)!==t||(r.push(e.substring(a,o)),a=o+1);return a<=e.length&&r.push(e.substring(a,e.length)),r};function et(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof t)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,i=arguments[1],n=0;n<o;n++){var l=a[n];if(t.call(i,l,n,a))return r?n:l}}function tt(){for(var e={},t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.forEach(function(t){Object.assign(e,t)}),e}var rt=function rt(e,t){var r=function(e){var t={};for(var r in e){var a;null!==(a=e[r])&&void 0!==a&&a.value?t[r]=e[r].value:\"string\"==typeof e[r]&&(t[r]=e[r])}return t}(t),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:r.portal_widget_sys_id,portalPreferences:r,widgetTitle:r.title,showHeader:!r.show_header||\"true\"===r.show_header,showBorder:!r.show_border||\"true\"===r.show_border,showTitle:!r.show_title||\"true\"===r.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:m,component_props:a}},at=function at(e,t){return{text:e,vars:t}},ot=function ot(e){var t=e.message,r=e.level,a=e.tooltip,o=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,d={text:t,level:r,help:a,originSysId:o,hasNewArtifact:n,table:i,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?d:it(d)},it=function it(e){var t,r,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(t=null===(r=e.text)||void 0===r?void 0:r.text)&&void 0!==t?t:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},nt=\"sys_portal\",lt=\"sys_report\",st=\"sys_choice\";function dt(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ut(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n=e.done,e},e:function e(_e3){l=!0,i=_e3},f:function f(){try{_n||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var ct=\"STDDEV\",gt=function gt(e){return Xe(\"table\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},pt=function pt(e){return Xe(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},mt=function mt(e){return Xe(e+new Date().getTime()+1e8*Math.random())},ft=function ft(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(t){return e}},vt=function vt(e){var t={sortBy:\"value\",sortByOrder:\"desc\"};return Ke(e,\"ORDERBY\")&&Ke(e,\"ASC\")&&(t.sortByOrder=\"asc\"),t},ht=function ht(e){var t=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var r,a=$e(e,\"^\"),o=[],i=dt(a);try{var n=function n(){var e=r.value;if(et(t,function(t){return e.substring(0,t.length)===t}))return\"continue\";o.push(e)};for(i.s();!(r=i.n()).done;)n()}catch(e){i.e(e)}finally{i.f()}return o.join(\"^\")},yt=function yt(e,t){var r={register:\"\",horizontal:\"\",orientation:\"vertical\"};function a(){r.horizontal=\"center\",\"left\"===e&&(r.horizontal=\"start\"),\"right\"===e&&(r.horizontal=\"end\")}return\"right\"===e?(r.register=\"right\",r.horizontal=\"center\"):\"left\"===e&&(r.register=\"left\",r.horizontal=\"center\"),\"bottom\"===t||\"center\"===t||\"middle\"===e?(r.register=\"bottom\",r.orientation=\"horizontal\",a()):\"top\"===t&&(r.orientation=\"horizontal\",r.register=\"top\",a()),r},_t=function _t(e){var t=e.colorPalette,r=e.colorType,a=e.dashboard,o=e.reportId,i=e.enableColorPerMetric,n=e.singleColor,l=e.metrics,s=e.colorList,d=e.metricMap;if(l&&d&&!a.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var u={type:\"default\"};if(t&&\"color_palette\"===r&&\"aa558ab3d7732100fa6c0c12ce610377\"!==t)u.type=\"palette\",u.palette=t;else if(\"several_colors\"===r)!s||Array.isArray(s)&&!et(s,function(e){return\"\"!==e})?u.type=\"chartColor\":a.migrationNotes.push(ot({message:at(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:at(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:o,artifactTable:lt,featureFlags:a.featureFlags}));else if(\"chart_colors\"===r)u.type=\"chartColor\";else if(\"one_color\"===r&&((null==n?void 0:n.length)>0||et(Object.keys(null!=d?d:{}),function(e){var t;return(null===(t=d[e].metricColor)||void 0===t?void 0:t.length)>0})))if(d){for(var c=i?\"colorsPerMetric\":\"singleColor\",g=[],p=0,m=Object.keys(d);p<m.length;p++){var f,v=m[p];g.push({metric:d[v].metricId,color:null!==(f=d[v].metricColor)&&void 0!==f?f:\"de699435d7033100b4964ebfae610331\"})}u.type=c,u.values=g}else{var h,y=[],_=dt(null!=l?l:[]);try{for(_.s();!(h=_.n()).done;){var b=h.value;y.push({color:n,metric:b})}}catch(e){_.e(e)}finally{_.f()}u.type=\"singleColor\",u.values=y}return u},bt=/[0-9a-f]{32}/;function wt(e){return wt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},wt(e)}var Tt=function Tt(e){return{durationFormat:At(tt(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},St=function St(e,t){var r={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=t?t:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},a=At(null!=e?e:r,r,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!a){if(void 0===t)return{numberFormat:r};if(2!==t)return{numberFormat:{customFormat:!1}}}return{numberFormat:a}},At=function At(e,t,r){var a=JSON.parse(JSON.stringify(t)),o=!1;for(var i in r)void 0!==a[r[i]]&&e[i]!==a[r[i]]&&(o=!0,a[r[i]]=e[i]);return!!o&&a},Ft=function Ft(e,t,r,a,o){var i={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},n={durationFormattingProperties:Tt,numberFormattingProperties:St};switch(o){case\"heatmap\":case\"box\":return\"glide_duration\"===r?i:n.numberFormattingProperties(void 0,t);default:if(\"glide_duration\"===r){if(\"object\"===wt(e)&&n.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return n.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(n[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return n[s](e[s][d],t)}}return\"integer\"===r&&\"COUNT\"!==a&&\"COUNT(DISTINCT\"!==a&&t?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:t,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:i},Ct=function Ct(e){return{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=e?e:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}},Rt=function Rt(e){return e.join(\":\")},It=function It(e,t,r){var a=!!et(Object.keys(e),function(e){return e===t});return a?e[t].dataSourceId:gt(r)},Ot=function Ot(e,t,r){var a=et(e,function(e){return e.id===t}),o=!1;return a&&a.filterQuery===r||(o=!0),o};function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=r){var a,o,i,n,l=[],s=!0,d=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=r[\"return\"]&&(n=r[\"return\"](),Object(n)!==n))return}finally{if(d)throw o}}return l}}(e,t)||Bt(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Nt(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=Bt(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e4){throw _e4},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n2=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n2=e.done,e},e:function e(_e5){l=!0,i=_e5},f:function f(){try{_n2||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}function Bt(e,t){if(e){if(\"string\"==typeof e)return Et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Et(e,t):void 0}}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Pt(e){switch(e){case\"line_bar\":return\"bar\";case\"step_line\":return\"step\";default:return e}}var kt=function kt(e){var t,r,a,o,i,n,l,s,d=e.table,u=e.chartTitle,c=e.colorPalette,g=e.showDataLabel,p=e.groupBy,m=e.showOthers,f=e.legendHorizontalAlignment,v=e.legendVerticalAlignment,h=e.numberOfPeriods,y=(e.showChartBorder,e.sourceType),_=e.aggregateType,b=e.otherThreshold,T=e.filter,S=e.showLegend,A=e.aggregateField,F=e.colorType,C=e.trendBy,R=e.trendInterval,I=e.xAxisTitle,O=e.xAxisShowGrid,x=e.yAxisShowGrid,N=e.yAxisTitle,B=e.yAxisFrom,E=e.yAxisTo,P=e.yAxisOpposite,k=e.formattingConfiguration,D=e.reportSource,M=e.reportId,L=e.aggregateFieldType,G=e.d,U=e.showHeader,H=e.showTitle,J=e.showBorder,j=e.indexes,V=(e.dataSetName,e.groupByMetadata),z=e.singleColor,Y=e.customConfig,q=e.startTime,W=e.endTime,Q=e.colors,Z=e.showMarkers,X=e.showDataTable,K=function(e,t){var r,a=\"value\",o=\"desc\";if(Ke(e,\"ORDERBY\")&&(a=\"name\",Ke(e,\"DESC\")||(o=\"asc\")),t&&!Ke(e,\"ORDERBY\")){var i=t.type,n=t.internalType;o=\"asc\",\"date\"===(r=i)||\"datetime\"===r||\"due_date\"===r||\"glide_date\"===r||\"glide_date_time\"===r||\"glide_precise_time\"===r?a=\"report_range\":function(e){return\"integer\"===e||\"decimal\"===e||\"numeric\"===e||\"float\"===e||\"domain_number\"===e||\"auto_increment\"===e||\"percent_complete\"===e}(i)?a=\"value\":\"choice\"===i&&\"integer\"===n?a=\"choice\":\"reference\"===i||\"choice\"===i&&\"string\"===n?a=\"name\":o=\"desc\"}return{sortBy:a,sortByOrder:o}}(T,V),$=ht(T),ee=yt(f,v),te=ft(b),re=Ft(k,parseInt(h,10),L,_),ae=gt(d),oe=mt(ae),ie={},ne=Rt([d,null==D?void 0:D.value,$]);ie[ne]={metricId:oe,dataSourceId:ae,metricColor:z};var le,se=!1;switch(R){case\"dayofweek\":s=\"dayOfWeek\",se=!0;break;case\"hour\":s=\"hourOfDay\",se=!0;break;default:s=R}if(32===R.length&&(s=R),\"metricbase\"===y){var de={period:0===(null==q?void 0:q.indexOf(\"P\"))?q.slice(1):\"between\",from:q,to:W};h=(le=Mt(de,\"1D\")).numberOfPeriods,y=w,delete re.durationFormat,delete re.dateFormat,delete re.stringFormat}var ue={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:$,id:ae,isDatabaseView:!1,label:void 0,reportSourceSysId:D,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===y||0===y.length?\"table\":y,tableOrViewName:y!==w?d:void 0,table:y===w?d:void 0}],dateFormat:\"default\",disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null===(t=le)||void 0===t?void 0:t.endTime,extensionType:\"area\",filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:(null!==(r=null==p?void 0:p.length)&&void 0!==r?r:0)>0?[{disableRanges:!1,groupBy:[{dataSource:ae,groupByField:p,isChoice:\"choice\"===(null==V?void 0:V.type),isPaBucket:!1,isRange:null==V?void 0:V.isRange,metric:oe}],hideZeroValues:!1,maxNumberOfGroups:null!=V&&V.isRange?\"ALL\":te,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==V||!V.isRange)&&\"true\"===m}]:[],headerTitle:H?u:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!0,hideYAxis2:!0,hideYAxis3:!0,hideYAxis4:!0,legendExpandToFit:!0,legendHorizontalAlignment:ee.horizontal,legendPosition:ee.register,lineStrokeWidth:\"2\",metrics:[tt({aggregateFunction:(null==_?void 0:_.length)>0?_:\"COUNT\",axisId:\"primary\",dataSource:ae,id:oe,label:void 0,transforms:Y},re)],newReporting:!1,numberOfPeriods:parseInt(h,10),period:null===(a=le)||void 0===a?void 0:a.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null===(o=le)||void 0===o?void 0:o.showAbsolutePeriod,showBorder:J,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===g,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:null,showHeader:U,showHeaderSeparator:!1,showLegend:\"true\"===S,showLegendValue:!1,showMaximumRange:null===(i=le)||void 0===i?void 0:i.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showContinuousLine:!0,enableAddZerosAtApi:se,showMarkers:\"true\"===Z,showTotalValue:null,showTrend:!1,showXGrid:\"true\"===O,showYGrid:\"true\"===x,sortBy:K.sortBy,sortByOrder:K.sortByOrder,startTime:null===(n=le)||void 0===n?void 0:n.startTime,telemetry:\"null\",trendBy:{trendByFields:[{field:C,metric:oe}],trendByFrequency:s,trendByMinuteInterval:null},wrapTitle:!1,xAxisTitle:I,yAxis0From:B,yAxis0Position:\"true\"===P?\"right\":\"left\",yAxis0Title:N,yAxis0To:E,showDataTable:\"true\"===X};A&&\"COUNT\"!==_&&\"\"!==A&&(ue.metrics[0].aggregateField=A);var ce,ge=Nt(null!==(l=j.report_layers[M])&&void 0!==l?l:[]);try{for(ge.s();!(ce=ge.n()).done;){var pe,me,fe,ve,he=ce.value,ye=ue.dataSources.map(function(e){return e.tableOrViewName}).concat(ue.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),_e=ht(he.filter);ne=Rt([d,null==D?void 0:D.value,_e,he.sys_id]);var be=It(ie,ne,he.table);ie[ne]={metricId:mt(be),dataSourceId:be,metricColor:null===(pe=he.color)||void 0===pe?void 0:pe.value};var we,Te=Ot(ue.dataSources,be,_e);if((!Ke(ye,he.table)&&!Ke(ye,he.report_source)||Te)&&ue.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:he.table,filterQuery:_e,reportSourceSysId:null===(we=he.report_source)||void 0===we?void 0:we.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:be,dataCategories:[\"trend\",\"group\",\"simple\"]}),ue.metrics.push(tt({dataSource:ie[ne].dataSourceId,id:ie[ne].metricId,aggregateFunction:he.aggregate,aggregateField:\"COUNT\"===he.aggregate&&\"\"!==he.sumfield?void 0:he.sumfield,axisId:\"primary\",label:(null===(me=he.series_name_text)||void 0===me?void 0:me.length)>0?he.series_name_text:void 0,chartType:Pt(he.type)},Ft(he.formatting_configuration,parseInt(h,10),he.aggregateFieldType,he.aggregateType))),(null===(fe=he.trend_field)||void 0===fe?void 0:fe.length)>0&&ue.trendBy.trendByFields.push({field:he.trend_field,metric:ie[ne].metricId}),(null===(ve=he.field)||void 0===ve?void 0:ve.length)>0||ue.groupBy.length>0)return void G.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the group by configuration is not supported for this metric.\"),level:1,originalArtifactSysId:M,artifactTable:lt,featureFlags:G.featureFlags}))}}catch(e){ge.e(e)}finally{ge.f()}return ue.colorConfig=_t({colorPalette:c,colorType:F,dashboard:G,reportId:M,singleColor:z,colorList:Q,enableColorPerMetric:!0,metricMap:ie}),ue},Dt=function e(t,r,a){var o,i,n,l,s,d,u=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),r?(null!==(s=t.breakdown)&&void 0!==s&&s.value&&(n=t.breakdown_level2.value),!l&&t.element&&(l=t.element_level2)):(null!==(d=t.breakdown)&&void 0!==d&&d.value&&(n=t.breakdown.value),!l&&t.element&&(l=t.element)),n&&l&&\"unmatched\"!==l){var c=t.indexes.sys_id[n][0],g=l;t.indexes.sys_id[c.dimension.value][0].facts_table===st&&bt.test(l)&&(g=t.indexes.sys_id[g][0].value);var p,m={sysId:n,elementSysIds:[g]};\"true\"===t.manual_elements&&m.elementSysIds.concat(null===(p=t.indexes.widget_elements[t.sys_id])||void 0===p?void 0:p.map(function(e){return\"unassigned\"===e.element?u:e.element})),t.elements_filter&&\"\"!==t.elements_filter&&!r&&(m.elementsFilterSysId=t.elements_filter.value,m.elementSysIds=[]),a.breakdowns.push(m)}else if(null!==(o=t.breakdown)&&void 0!==o&&o.value){var f=t.indexes.sys_id[n][0],v=t.indexes.sys_id[f.dimension.value][0];if(\"breakdown\"===t.type){var h;if(!r)if(!t.elements_filter||\"\"===t.elements_filter&&\"true\"!==t.manual_elements){if(null!==(h=t.breakdown_level2)&&void 0!==h&&h.value){if(v.facts_table===st||\"pa_buckets\"===v.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:n,elementSysIds:[u]})}}else if(t.elements_filter&&\"\"!==t.elements_filter)a.breakdowns.push({sysId:n,elementsFilterSysId:!r&&t.elements_filter.value});else if(\"true\"===t.manual_elements){var y,_,b;t.indexes.widget_elements&&0!==(null!==(y=null===(_=t.indexes.widget_elements[t.sys_id])||void 0===_?void 0:_.length)&&void 0!==y?y:0)?a.breakdowns.push({sysId:n,elementSysIds:null===(b=t.indexes.widget_elements[t.sys_id])||void 0===b?void 0:b.map(function(e){return\"unassigned\"===e.element?u:e.element})}):t.dashboard.migrationNotes.push(ot({message:at(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:t.dashboard.featureFlags}))}(0===a.breakdowns.length||r)&&(a.groupBy={groupByField:n,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(v.facts_table===st||\"pa_buckets\"===v.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:n,elementSysIds:!r&&\"\"!==t.elements_filter&&t.elements_filter?[]:[u],elementsFilterSysId:!r&&\"\"!==t.elements_filter&&t.elements_filter?t.elements_filter.value:void 0})}}return null!==(i=t.breakdown_level2)&&void 0!==i&&i.value&&!r?e(t,!0,a):a},Mt=function Mt(e,t){var r={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},a=function a(e){if(\"0\"===e||\"00000000\"===e)return null;var t=e.substring(0,4),r=e.substring(4,6),a=e.substring(6,8);return\"\".concat(t,\"-\").concat(r,\"-\").concat(a,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))r.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){r.showAbsolutePeriod=!0,r.startTime=a(null==e?void 0:e.from),r.endTime=a(null==e?void 0:e.to);var o=new Date;new Date(r.startTime)>o&&!r.endTime?r.endTime=r.startTime:r.startTime&&!r.endTime?r.useCurrentDateForEnd=!0:!r.startTime&&r.endTime&&(r.showMaximumRange=!0,r.endTime=null)}else{r.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var i=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),n=et(Object.keys(x),function(e){return x[e]===i},!0),l=et(Object.keys(x),function(e){return x[e]===t},!0);r.period=n<l?t:i}return r};function Lt(e,t){if(null!=t&&t.value&&\"column\"===e)return\"vertical_bar\";switch(e){case\"column_total\":case\"column\":case\"stacked\":return\"bar\";default:return e}}function Gt(e){var t=et(Object.keys(T),function(t){return T[t]===parseInt(e,10)});switch(T[t]){case T.DAY:return{frequency:S,frequencyInterval:t,dateRange:x.HOURLY};case T.WEEK:case T.WEEK2DATE:case T.WEEK_PLUS:return{frequency:A,frequencyInterval:t,dateRange:x.MONTHLY};case T.MONTH:case T.MONTH2DATE:case T.MONTH_PLUS:return{frequency:F,frequencyInterval:t,dateRange:x.MONTHLY};case T.QUARTER:case T.QUARTER2DATE:case T.QUARTER_PLUS:return{frequency:C,frequencyInterval:t,dateRange:x.YEARLY};case T.FQ:case T.FQ2DATE:case T.FQ_PLUS:return{frequency:R,frequencyInterval:t,dateRange:x.YEARLY};case T.YEAR:case T.YEAR2DATE:case T.YEAR_PLUS:return{frequency:I,frequencyInterval:t,dateRange:x.YEARLY};case T.FY:case T.FY2DATE:case T.FY_PLUS:return{frequency:O,frequencyInterval:t,dateRange:x.YEARLY};default:return{frequency:S,frequencyInterval:\"\",dateRange:x.YEARLY}}}var Ut=function Ut(e){e.colorType;var t,r,a,o,i=e.colorPalette,n=e.chartColor,l=e.showDataLabel,s=(e.showLegend,e.showTotal),d=e.yAxisTitle,u=e.yAxisFrom,c=e.yAxisTo,g=e.sysId,p=e.indicator,m=(e.element,e.breakdown),f=e.aggregate,v=e.sort_direction,h=e.sort_on,y=(e.breakdown_level2,e.color_scheme,e.description),_=e.name,b=e.showTitle,w=e.showHeader,T=e.showBorder,S=e.d,A=e.indexes,F=e.showTarget,C=e.showThresholds,R=e.showTrend,I=e.showConfidence,O=e.showForecast,x=e.showComments,N=e.chartType,B=e.label,E=e.followElement,P=h,k=v,D=m.value,M=null===(t=A.sys_id[D])||void 0===t?void 0:t[0],L=null===(r=A.sys_id[null==M||null===(a=M.dimension)||void 0===a?void 0:a.value])||void 0===r?void 0:r[0],G=null==L?void 0:L.facts_table,U=G===st,H=\"pa_buckets\"===G;\"default\"===h&&(P=U?\"choice\":H?\"bucket\":\"name\"),-1===[\"name\",\"value\",\"default\"].indexOf(h)&&(P=\"value\",k=\"desc\",S.migrationNotes.push(ot({message:at(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:g,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:S.featureFlags})));var J=Dt(e);if(J.doMigration){var j,V,z=10;if(null!=f&&f.value){var Y=Gt(A.sys_id[null==f?void 0:f.value][0].interval);z=Y.frequency,j=Y.frequencyInterval,V=Y.dateRange}var q=Mt(e.timePeriod,V),W={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",colorConfig:{type:\"default\"},configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[],dateFormat:\"default\",description:y,disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null==q?void 0:q.endTime,extensionType:Lt(N,m),filterConfigurations:\"@state.parFilters\",followFilters:!0,showFilterAsSeparateSeries:\"separate\"===e.multiple_elements_view,groupBy:[],headerTitle:b?_:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!1,hideYAxis2:!1,hideYAxis3:!1,hideYAxis4:!1,legendExpandToFit:!0,legendHorizontalAlignment:\"center\",legendPosition:\"bottom\",lineStrokeWidth:\"2\",metrics:[],filterPerMetric:[],newReporting:!1,numberOfPeriods:null==q?void 0:q.numberOfPeriods,period:null==q?void 0:q.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null==q?void 0:q.showAbsolutePeriod,useCurrentDateForEnd:null==q?void 0:q.useCurrentDateForEnd,showBorder:T,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:x,showConfidenceBand:I,showDataLabels:l,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:O,showForecastRange:!1,showGapPercentage:null,showHeader:w,showHeaderSeparator:!1,showLegend:!0,showLegendValue:!1,showMaximumRange:null==q?void 0:q.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:F,showThreshold:C,showTotalAggregate:!1,showTotalValue:s,showTrend:R,showXGrid:!0,showYGrid:!0,showContinuousLine:!1,sortBy:P,sortByOrder:k,startTime:null==q?void 0:q.startTime,telemetry:\"null\",trendBy:{},wrapTitle:!1,yAxis0Title:d,yAxis0To:c,yAxis0From:u,yAxisStyle:\"default\",allowChangeDateRange:!1,showDateRangeByDefault:!1},Q=pt(null==p?void 0:p.value),Z=mt(Q),X=A.sys_id[null==p?void 0:p.value][0],K={},$={metricId:Z,dataSourceId:Q};K[\"\".concat(null==p?void 0:p.value,\":\").concat(JSON.stringify(J.breakdowns))]=$,W.dataSources=[{allowRealTime:\"1\"===X.type,allowTotalValue:\"1\"===X.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:Q,indicatorType:X.type,isScriptedIndicator:!1,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:J.breakdowns,indicator:null==p?void 0:p.value}}],J.groupBy&&(J.groupBy.dataSource=Q,J.groupBy.metric=Z,J.groupBy.isChoice=U,J.groupBy.isPaBucket=H,W.groupBy=[{disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[J.groupBy],hideZeroValues:!1}]),W.metrics=[{dataSource:Q,id:Z,aggregateIndicator:null!==(o=null==f?void 0:f.value)&&void 0!==o?o:\"\",frequency:z,frequencyInterval:j,label:B,numberFormat:Ct(parseInt(X.precision,10)),chartType:Lt(N),axisId:\"primary\"}],W.filterPerMetric=[{metricId:Z,value:E}],\"column\"==N&&null!=m&&m.value?W.dataLabelPosition=\"middle\":W.trendBy={trendByFields:[{field:\"anything\",metric:Z}],trendByFrequency:\"date\",trendByMinuteInterval:null};var ee=function(e,t,r,a,o,i,n){var l,s=null!==(l=e.widget_indicators[t])&&void 0!==l?l:[];s.sort(function(e,t){return parseInt(e.order,10)-parseInt(t.order,10)});try{var d,u=Nt(s);try{for(u.s();!(d=u.n()).done;){var c,g,p=d.value;if(\"true\"!==p.follow_element){var m=null===(c=p.indicator)||void 0===c?void 0:c.value;e.sys_id[m][0].name,i.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the additional indicators follow elements feature is not supported.\"),level:1,originalArtifactSysId:t,artifactTable:null===(g=e.sys_id[t][0])||void 0===g?void 0:g.sys_table_name,featureFlags:i.featureFlags}))}}}catch(e){u.e(e)}finally{u.f()}}catch(e){console.error(\"ERROR: Error occurred while handling widget indicators for widget: \".concat(n||t))}var f,v=!1,h={},y=Nt(s);try{for(y.s();!(f=y.n()).done;){var _,b,w,T=f.value,S=Dt({breakdown:T.breakdown,breakdown_level2:T.breakdown_level2,element:T.element,element_level2:T.element_level2,indexes:e,elements_filter:T.elements_filter,manual_elements:T.manual_elements}),A=void 0,F=void 0,C=e.sys_id[null===(_=T.indicator)||void 0===_?void 0:_.value][0];if(o[\"\".concat(null===(b=T.indicator)||void 0===b?void 0:b.value,\":\").concat(JSON.stringify(S.breakdowns))]){var R,I;A=o[\"\".concat(null===(R=T.indicator)||void 0===R?void 0:R.value,\":\").concat(JSON.stringify(S.breakdowns))].dataSourceId,F=o[\"\".concat(null===(I=T.indicator)||void 0===I?void 0:I.value,\":\").concat(JSON.stringify(S.breakdowns))].metricId}else{var O,x,N,B,E;A=pt(null===(O=T.indicator)||void 0===O?void 0:O.value),F=mt(A),o[null===(x=T.indicator)||void 0===x?void 0:x.value]={metricId:F,dataSourceId:A},r.dataSources.push({allowRealTime:\"1\"===C.type,allowTotalValue:\"1\"===C.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:A,indicatorType:C.type,isScriptedIndicator:!1,label:C.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:S.breakdowns,indicator:null===(N=T.indicator)||void 0===N?void 0:N.value}});var P=\"primary\";\"true\"===T.second_y_axis&&(r.yAxis1Title=T.label,r.yAxis1Position=\"right\",r.yAxis1From=\"\",r.yAxis1To=\"\",P=\"axis1\");var k=10,D=void 0,M=null!==(B=null===(E=T.aggregate)||void 0===E?void 0:E.value)&&void 0!==B?B:\"\";if(M){var L,G=Gt((null===(L=e.sys_id[M])||void 0===L?void 0:L[0]).interval);k=G.frequency,D=G.frequencyInterval}var U={dataSource:A,id:F,aggregateIndicator:M,frequency:k,frequencyInterval:D,label:T.label,numberFormat:Ct(parseInt(C.precision,10)),chartType:Lt(T.chart_type),axisId:P},H={field:\"anything\",metric:F};\"stacked\"===T.chart_type&&(v=!0),r.metrics.push(U),r.filterPerMetric.push({metricId:F,value:\"true\"===(null==T?void 0:T.follow_element)}),r.trendBy.trendByFields.push(H)}S.groupBy&&(S.groupBy.dataSource=A,S.groupBy.metric=F,r.groupBy.push({disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[S.groupBy],hideZeroValues:!1})),\"\"!==T.color&&null!==(w=T.color)&&void 0!==w&&w.value&&(h[F]=T.color.value)}}catch(e){y.e(e)}finally{y.f()}return(r.metrics.length>1||r.groupBy.length>0)&&(r.showTarget=!1,r.showTrend=!1,r.showConfidenceBand=!1,r.showThreshold=!1,r.showComment=!1),{hasStackedColumn:v,widgetColors:h}}(A,g,W,0,K,S,_),te=ee.hasStackedColumn,re=ee.widgetColors;if(W.filterPerMetric.some(function(e){return null==e?void 0:e.value})||(W.followFilters=!1,W.showFilterIcon=!1),te&&(W.extensionType=\"bar\",W.chartVariation=\"stacked\"),i&&i.length>0&&0===Object.keys(re).length)W.colorConfig={type:\"palette\",palette:i};else if(W.metrics.length>1){var ae,oe;ae=i&&i.length>0?xt(null!==(oe=A.sys_id[i])&&void 0!==oe?oe:[],1)[0]:xt(A.sys_id[\"68d08c72d700210096614251ce61039e\"],1)[0];for(var ie=[],ne=0;ne<32;ne++){var le=\"color_\".concat(ne+1);if(\"\"===ae[le])break;ie.push(ae[le].value)}var se=0;W.colorConfig={type:\"colorsPerMetric\",values:W.metrics.map(function(e){var t;return e.id===Z&&null!=n&&n.value?t=n.value:re[e.id]?t=re[e.id]:(t=ie[se%ie.length],se+=1),{metric:e.id,color:t}})}}else n&&1===W.metrics.length&&(W.colorConfig={type:\"singleColor\",values:[{color:n.value,metric:Z}]});return W}S.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:g,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:S.featureFlags}))},Ht=function Ht(e){var t=Ut(e);if(t)return t.chartVariation=e.stacked?\"stacked\":\"side-by-side\",t},Jt=function Jt(e){switch(e.extensionType){case\"trend\":case\"bar\":return l;case\"line\":return s;case\"area\":return n;case\"step\":return u;case\"spline\":return d;case\"vertical_bar\":return c}},jt=function jt(e,t,r){var a,o=\"true\"===(null==r||null===(a=r.real_time)||void 0===a?void 0:a.value),i=t.useRelativeScoreTime!==o||t.showScoreUpdateTime!==o||t.enableRealTimeUpdate!==o;return t.useRelativeScoreTime=o,t.showScoreUpdateTime=o,t.enableRealTimeUpdate=o,i?tt(t):t},Vt=function Vt(e,r,a){var o,i,n,l;if(null!=r&&r._override&&(null!==(o=null==r||null===(i=r._override)||void 0===i||null===(n=i.macroponent)||void 0===n?void 0:n.value)&&void 0!==o?o:null==r||null===(l=r._override)||void 0===l?void 0:l.macroponent)!==t)return r;var s=r.migrationRaw.component_props;return r.migrationRaw.component_props=jt(e,r.migrationRaw.component_props,a),s===r.migrationRaw.component_props||(r.widget_type=\"unlinked_stored_component\",delete r.migrationRaw.stored_component_sys_id,e.migrationNotes.push(ot({message:at(\"This visualization has been copied from the library to retain the Real time update functionality on this dashboard.\"),level:2,tooltip:at(\"Changes made to this visualization on this dashboard, are not propagated to the library.\"),originalArtifactSysId:a.portal_section,artifactTable:nt,debugInfo:JSON.stringify({dashboardWidget:r}),featureFlags:e.featureFlags}))),r},zt=function zt(t,r){var a={message:at(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:t.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&t.migrationNotes.push(ot({message:at(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:t.featureFlags})),-1===t.migrationNotes.indexOf(ot(a))&&t.migrationNotes.push(ot(a)),{component_id:e,component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},Yt=function Yt(e,t,r,a){var o,i,n,l;if(e.migratingFromJava&&a)return rt(t,a);var s=\"\";null!=t&&t.type?s=t.type:null!=a&&null!==(o=a.type)&&void 0!==o&&o.value?s=null==a||null===(i=a.type)||void 0===i?void 0:i.value:null!=a&&null!==(n=a.renderer)&&void 0!==n&&n.value&&(s=a.renderer.value);var d=null==a||null===(l=a.title)||void 0===l?void 0:l.value;return e.migrationNotes.push(ot({message:at(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),zt(e,{static_content:q(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(s,\": \").concat(d,\"</span> widget.\"))})},qt=function qt(e,t,r,a){var o,i,n;return e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"<b>Unsupported migration: \".concat(null!==(o=null!==(i=t.name)&&void 0!==i?i:t.sys_name)&&void 0!==o?o:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=t&&t.type?t.type:null==a||null===(n=a.type)||void 0===n?void 0:n.value,\"</span> report.\"))})},Wt=function Wt(e,t,r,a){var o,i,n;return e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"<b>Unsupported migration: \".concat(null!==(o=null!==(i=t.name)&&void 0!==i?i:t.sys_name)&&void 0!==o?o:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=t&&t.type?t.type:null==a||null===(n=a.type)||void 0===n?void 0:n.value,\"</span> widget.\"))})},Qt=function Qt(e){return function(t,r,a,o){var i;return i=e===Ze?function(){for(var e in de)if(de[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type,i?(t.migrationNotes.push(ot({message:at(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:t.featureFlags})),e===We||e===Ze?Wt(t,tt(r,{type:i}),0,o):qt(t,r,0,o)):Yt(t,r,0,o)}},Zt=function Zt(e,t,r){var a,o=null==t||null===(a=t.widget_navigation)||void 0===a?void 0:a[e.sys_id];if(o){var i=o.filter(function(e){return\"true\"===e.active}).sort(function(e,t){return\"\"==e.order&&\"\"!=t.order?-1:\"\"==t.order&&\"\"!=e.order?1:e.order===t.order?e.label.localeCompare(t.label):e.order-t.order});o=i[0],Object.assign(r.component_props,{chartInteractionAction:\"goToUrl\",chartInteractionActionGoToURLInput:o.value,chartInteractionActionGoToURLPageName:o.label})}},Xt=function Xt(e,t){var r;return!e.migratingSingleArtifact&&\"true\"===((null==t||null===(r=t.publisher_widget)||void 0===r?void 0:r.value)||\"false\")},Kt=function Kt(e,t,r){return Xt(e,r)?(t.chartInteractionAction=\"applyAsFilter\",t):t},$t=function $t(e,t,i){return Xt(e,i)&&Ke([r,a,o],t.migrationRaw.component_id)?(t.migrationRaw.component_props=Kt(e,t.migrationRaw.component_props,i),t.widget_type=\"unlinked_stored_component\",delete t.migrationRaw.stored_component_sys_id,e.migrationNotes.push(ot({message:at(\"This visualization has been copied from the library to retain the Act as filter functionality on this dashboard.\"),level:2,tooltip:at(\"Changes made to this visualization on this dashboard, are not propagated to the library.\"),originalArtifactSysId:i.portal_section,artifactTable:nt,debugInfo:JSON.stringify({dashboardWidget:t}),featureFlags:e.featureFlags})),t):t};function er(e){return er=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},er(e)}var tr=function tr(e){return\"<p>\".concat(\"object\"===er(e)&&e.text?e.debugInfo?\"\".concat(e.text,\" ( \").concat(e.debugInfo,\" )\"):e.text:e,\"</p>\")},rr=function rr(e,t){var r=tt({x:0,y:0,h:500,w:500,tabindex:t},zt(e,{static_content:e.migrationNotes.map(tr).join(\"\")}));return{tab:{name:\"Log Info\",order:t,layout:[r]},widgets:[{migrationRaw:r}],page:{}}},ar=at(\"Dashboard migrated without the \\\"Restrict to roles\\\" configuration. Update the sharing information on the migrated dashboard.\"),or=at(\"Dashboard migrated without the dashboard \\\"Group\\\" configuration because this functionality is not supported.\"),ir=at(\"This visualization is migrated without header and title custom colors because this functionality is not supported.\");function nr(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lr(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e6){throw _e6},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n3=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n3=e.done,e},e:function e(_e7){l=!0,i=_e7},f:function f(){try{_n3||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var sr=function sr(e,t,r,a,o,i,n,l){return{type:\"table\",encodedQuery:null!=i?i:void 0,table:{id:e,label:null!=t?t:void 0,hierarchy:\"true\"===n||!0===n||void 0},field:r?{id:r,type:null!=o?o:void 0,label:null!=a?a:void 0,reference:null!=l?l:\"\"}:void 0}},dr=function dr(e,t){var r=e.breakdownSysId,a=e.breakdownSourceName,o=e.isChoice,i=e.type,n=e.factsTable,l=e.field,s=e.target;return{type:\"pa\",breakdown:{sysId:r,breakdownSourceName:null!=a?a:void 0,isOfChoiceType:void 0!==o?o:void 0,type:null!=i?i:void 0,factsTable:null!=n?n:void 0,field:null!=l?l:void 0,targetTable:null!=s?s:void 0}}};function ur(e){switch(e){case\"1\":return\"selectors\";case\"4\":return\"typeahead\";default:return\"pill\"}}var cr=function cr(e,t,r){var a,o,i,n,l,s,d,u,c,g,p,m,f,v,h,y=e.sys_id,_=e.table,b=e.display_field,w=e.name,T=(e.type,e.ui_control_type),S=(e.boolean_table,e.boolean_field,e.conditions),A=(e.cascading_filter_reference_field,e.parent),F=e.publisher_reference,C=arguments.length>3&&void 0!==arguments[3]&&arguments[3];A?(n=\"reference\"===(null===(s=r.filter_cascading[A.value])||void 0===s||null===(d=s[0])||void 0===d?void 0:d.displayFieldType)?b:void 0,l=null===(u=r.filter_cascading[A.value])||void 0===u||null===(c=u[0])||void 0===c?void 0:c.displayFieldReference):(n=\"reference\"===(null===(g=r.filter_reference)||void 0===g||null===(p=g[null==F?void 0:F.value])||void 0===p||null===(m=p[0])||void 0===m?void 0:m.displayFieldType)?b:void 0,l=null===(f=r.filter_cascading[A.value])||void 0===f||null===(v=f[0])||void 0===v?void 0:v.displayFieldReference),h=n&&l?sr(l,void 0,void 0,void 0,\"reference\",S):sr(_,void 0,n,void 0,\"reference\",S);var R=null!==(a=(null!==(o=null===(i=r.filter_cascading_target)||void 0===i?void 0:i[y])&&void 0!==o?o:[]).map(function(e){return sr(null==e?void 0:e.target_table,void 0,null==e?void 0:e.filter_field,void 0,\"reference\",void 0,C)},w,\"reference\"))&&void 0!==a?a:[];1===R.length&&(R[0].field.reference=_);var I=function(e,t,r,a){var o,i;return e?\"reference\"===(null===(o=a.filter_cascading[e])||void 0===o||null===(i=o[0])||void 0===i?void 0:i.displayFieldType)?{filterM2MConfigurations:[{filterId:e.concat(\"-filter\"),following:!0,filterM2MTable:a.filter_cascading[e][0].table,fromField:a.filter_cascading[e][0].cascading_filter_reference_field,toField:r}]}:{filtersFollowing:[e.concat(\"-filter\")],filterM2MConfigurations:[]}:{}}(null==A?void 0:A.value,0,b,r);return{filterId:\"\".concat(y,\"-filter\"),filterName:w,filterComponentType:\"singleselect\",isShowSelectedValueInPill:!0,datasource:h,targets:R,defaultSelectedItems:[],dateFilterView:\"calendar-reldates\",sort:\"ASC\",enableClearFilter:!0,maxElements:500,filterElementLayout:\"vertical\",filterElementType:ur(T),selectedElements:[],cascadingConfig:I}},gr=function gr(e,t,r){var a=e.name,o=e.sys_id;return{filterId:\"\".concat(o,\"-filter\"),filterName:a,isShowSelectedValueInPill:!0,sort:\"ASC\",enableClearFilter:!0,enableResetToDefault:!0,maxElements:500,filterElementLayout:\"vertical\",datasource:\"{}\"}};function pr(e){switch(e){case\"135_Current hour@javascript:gs.hoursAgoStart(0)@javascript:gs.hoursAgoEnd(0)\":return{label:\"Current hour\",range:\"SN_DYNAMIC_DATERANGE__CURRENT_HOUR\"};case\"150_Current minute@javascript:gs.minutesAgoStart(0)@javascript:gs.minutesAgoEnd(0)\":return{label:\"Current minute\",range:\"SN_DYNAMIC_DATERANGE__CURRENT_MINUTE\"};case\"060_Last 12 months@javascript:gs.monthsAgoStart(12)@javascript:gs.endOfThisMonth()\":return{label:\"Last 12 months\",range:\"SN_DYNAMIC_DATERANGE__LAST_12_MONTH\"};case\"130_Last 120 days@javascript:gs.daysAgoStart(120)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 120 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_120_DAYS\"};case\"160_Last 15 minutes@javascript:gs.minutesAgoStart(15)@javascript:gs.minutesAgoEnd(0)\":return{label:\"Last 15 minutes\",range:\"SN_DYNAMIC_DATERANGE__LAST_15_MINUTES\"};case\"145_Last 2 hours@javascript:gs.hoursAgo(2)@javascript:gs.hoursAgo(0)\":return{label:\"Last 2 hours\",range:\"SN_DYNAMIC_DATERANGE__LAST_2_HOURS\"};case\"075_Last 2 quarters@javascript:gs.quartersAgoStart(1)@javascript:gs.endOfThisQuarter()\":return{label:\"Last 2 quarters\",range:\"SN_DYNAMIC_DATERANGE__LAST_2_QUARTERS\"};case\"105_Last 2 years@javascript:gs.beginningOfLastYear()@javascript:gs.endOfThisYear()\":return{label:\"Last 2 years\",range:\"SN_DYNAMIC_DATERANGE__LAST_2_YEARS\"};case\"045_Last 3 months@javascript:gs.monthsAgoStart(3)@javascript:gs.endOfThisMonth()\":return{label:\"Last 3 months\",range:\"SN_DYNAMIC_DATERANGE__LAST_3_MONTH\"};case\"115_Last 30 days@javascript:gs.daysAgoStart(30)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 30 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_30_DAYS\"};case\"165_Last 30 minutes@javascript:gs.minutesAgoStart(30)@javascript:gs.minutesAgoEnd(0)\":return{label:\"Last 30 minutes\",range:\"SN_DYNAMIC_DATERANGE__LAST_30_MINUTES\"};case\"170_Last 45 minutes@javascript:gs.minutesAgoStart(45)@javascript:gs.minutesAgoEnd(0)\":return{label:\"Last 45 minutes\",range:\"SN_DYNAMIC_DATERANGE__LAST_45_MINUTES\"};case\"050_Last 6 months@javascript:gs.monthsAgoStart(6)@javascript:gs.endOfThisMonth()\":return{label:\"Last 6 months\",range:\"SN_DYNAMIC_DATERANGE__LAST_6_MONTH\"};case\"120_Last 60 days@javascript:gs.daysAgoStart(60)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 60 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_60_DAYS\"};case\"110_Last 7 days@javascript:gs.daysAgoStart(7)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 7 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_7_DAYS\"};case\"055_Last 9 months@javascript:gs.monthsAgoStart(9)@javascript:gs.endOfThisMonth()\":return{label:\"Last 9 months\",range:\"SN_DYNAMIC_DATERANGE__LAST_9_MONTH\"};case\"125_Last 90 days@javascript:gs.daysAgoStart(90)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 90 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_90_DAYS\"};case\"140_Last hour@javascript:gs.hoursAgoStart(1)@javascript:gs.hoursAgoEnd(1)\":return{label:\"Last hour\",range:\"SN_DYNAMIC_DATERANGE__LAST_HOUR\"};case\"155_Last minute@javascript:gs.minutesAgoStart(1)@javascript:gs.minutesAgoEnd(1)\":return{label:\"Last minute\",range:\"SN_DYNAMIC_DATERANGE__LAST_MINUTE\"};case\"035_Last month@javascript:gs.beginningOfLastMonth()@javascript:gs.endOfLastMonth()\":return{label:\"Last month\",range:\"SN_DYNAMIC_DATERANGE__LAST_MONTH\"};case\"070_Last quarter@javascript:gs.quartersAgoStart(1)@javascript:gs.quartersAgoEnd(1)\":return{label:\"Last quarter\",range:\"SN_DYNAMIC_DATERANGE__LAST_QUARTER\"};case\"020_Last week@javascript:gs.beginningOfLastWeek()@javascript:gs.endOfLastWeek()\":return{label:\"Last week\",range:\"SN_DYNAMIC_DATERANGE__LAST_WEEK\"};case\"100_Last year@javascript:gs.beginningOfLastYear()@javascript:gs.endOfLastYear()\":return{label:\"Last year\",range:\"SN_DYNAMIC_DATERANGE__LAST_YEAR\"};case\"085_Next 2 quarters@javascript:gs.quartersAgoStart(-1)@javascript:gs.quartersAgoEnd(-2)\":return{label:\"Next 2 quarters\",range:\"SN_DYNAMIC_DATERANGE__NEXT_2_QUARTERS\"};case\"040_Next month@javascript:gs.beginningOfNextMonth()@javascript:gs.endOfNextMonth()\":return{label:\"Next month\",range:\"SN_DYNAMIC_DATERANGE__NEXT_MONTH\"};case\"080_Next quarter@javascript:gs.quartersAgoStart(-1)@javascript:gs.quartersAgoEnd(-1)\":return{label:\"Next quarter\",range:\"SN_DYNAMIC_DATERANGE__NEXT_QUARTER\"};case\"025_Next week@javascript:gs.beginningOfNextWeek()@javascript:gs.endOfNextWeek()\":return{label:\"Next week\",range:\"SN_DYNAMIC_DATERANGE__NEXT_WEEK\"};case\"095_Next year@javascript:gs.beginningOfNextYear()@javascript:gs.endOfNextYear()\":return{label:\"Next year\",range:\"SN_DYNAMIC_DATERANGE__NEXT_YEAR\"};case\"175_One year ago@javascript:gs.monthsAgo(12)@javascript:gs.endOfThisMonth()\":return{label:\"One year ago\",range:\"SN_DYNAMIC_DATERANGE__ONE_YEAR_AGO\"};case\"030_This month@javascript:gs.beginningOfThisMonth()@javascript:gs.endOfThisMonth()\":return{label:\"This month\",range:\"SN_DYNAMIC_DATERANGE__THIS_MONTH\"};case\"065_This quarter@javascript:gs.beginningOfThisQuarter()@javascript:gs.endOfThisQuarter()\":return{label:\"This quarter\",range:\"SN_DYNAMIC_DATERANGE__THIS_QUARTER\"};case\"015_This week@javascript:gs.beginningOfThisWeek()@javascript:gs.endOfThisWeek()\":return{label:\"This week\",range:\"SN_DYNAMIC_DATERANGE__THIS_WEEK\"};case\"090_This year@javascript:gs.beginningOfThisYear()@javascript:gs.endOfThisYear()\":return{label:\"This year\",range:\"SN_DYNAMIC_DATERANGE__THIS_YEAR\"};case\"001_Today@javascript:gs.daysAgoStart(0)@javascript:gs.daysAgoEnd(0)\":return{label:\"Today\",range:\"SN_DYNAMIC_DATERANGE__TODAY\"};case\"010_Tomorrow@javascript:gs.daysAgoStart(-1)@javascript:gs.daysAgoEnd(-1)\":return{label:\"Tomorrow\",range:\"SN_DYNAMIC_DATERANGE__TOMORROW\"};case\"005_Yesterday@javascript:gs.daysAgoStart(1)@javascript:gs.daysAgoEnd(1)\":return{label:\"Yesterday\",range:\"SN_DYNAMIC_DATERANGE__YESTERDAY\"}}}function mr(e,t,r,a,o){switch(e){case 4:case\"4\":case 3:case\"3\":!function(e,t,r,a){e.filterComponentType=\"multiselect\",e.filterElementType=\"pill\"}(t);break;case 1:case\"1\":!function(e,t,r,a){e.filterComponentType=\"singleselect\",e.filterElementType=\"selectors\"}(t);break;case 2:case\"2\":!function(e,t,r,a){e.filterComponentType=\"singleselect\",e.filterElementType=\"pill\"}(t)}}function fr(e,t){for(var r in t){var a=t[r];if(Array.isArray(a)&&a.some(function(t){return t.breakdown.value===e.breakdownSysId}))return!0}return!1}var vr=function vr(e,t,r,a){var o=function(e,t,r){switch(e.type){case 5:case\"5\":return function(e,t,r){var a=e.boolean_table,o=e.default_boolean_field,i=e.boolean_field,n=e.allow_extended_table,l=gr(e);return l.filterComponentType=\"boolean\",!0!==o&&!1!==o&&\"true\"!==o&&\"false\"!==o||(l.defaultBoolean=o.toString()),l.targets=[sr(a,void 0,i,void 0,\"boolean\",void 0,n)],l}(e);case 3:case\"3\":return function(e,t,r){var a=e.default_date_filter,o=e.date_filter,i=e.allow_extended_table,n=e.sys_id,l=gr(e);if(l.dateFilterView=\"calendar-reldates\",l.filterComponentType=\"date\",r.filter_reference){var s=r.filter_reference[n];if((null==s?void 0:s.length)>0){var d,u=[],c=nr(s);try{for(c.s();!(d=c.n()).done;){var g=d.value,p=g.date_field,m=g.date_table,f=g.fieldType;u.push(sr(m,void 0,p,void 0,null!=f?f:\"glide_date_time\",void 0,i))}}catch(e){c.e(e)}finally{c.f()}l.targets=u}}else console.error(\"No filter_reference index found when migrating date filters\"),t.migrationNotes.push(ot({message:at(\"The date filter cannot be migrated because we cannot find the target configuration. It can be configured manually in a new filter.\"),level:2,originalArtifactSysId:n,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}));function v(e){var t,r=[],a=nr(e);try{for(a.s();!(t=a.n()).done;){var o=pr(t.value);o&&r.push(o)}}catch(e){a.e(e)}finally{a.f()}return r}if((null==a?void 0:a.length)>0){var h=$e(a,\",\");l.defaultSelectedDateRange=v(h)[0],h.length>1&&t.migrationNotes.push(ot({message:at(\"The multiple default date values on interactive filters cannot be migrated. Only one default value is selected.\"),level:2,originalArtifactSysId:n,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}))}else l.defaultSelectedDateRange={range:\"\",label:\"Custom range\"};if((null==o?void 0:o.length)>0){var y=$e(o,\",\");l.allowedDateRanges=v(y)}return l}(e,t,r);case 1:case\"1\":return function(e,t,r){var a=e.source_field,o=e.source_table,i=e.allow_extended_table,n=e.sys_id,l=e.ui_control_type,s=e.exclusion_choice_list,d=e.default_choice,u=gr(e);if(u.datasource=sr(o,void 0,a,void 0,\"choice\"),u.targets=[sr(o,void 0,a,void 0,\"choice\",void 0,i)],null!=r&&r.choices_by_table){if((null==s?void 0:s.length)>0){var c,g,p,m,f=null==r||null===(c=r.choices_by_table[null!==(g=null===(p=e.sourceFieldMetadata)||void 0===p?void 0:p.table)&&void 0!==g?g:o])||void 0===c?void 0:c.filter(function(t){var r,o;return(null==t?void 0:t.element)===(null!==(r=null===(o=e.sourceFieldMetadata)||void 0===o?void 0:o.field)&&void 0!==r?r:a)}),v=$e(s,\",\"),h=[],y=nr(f);try{for(y.s();!(m=y.n()).done;){var _=m.value;null!=_&&_.value&&h.push({value:_.value,selected:!Ke(v,_.sys_id)})}}catch(e){y.e(e)}finally{y.f()}u.datasource.choices=h}if((null==d?void 0:d.length)>0){var b,w,T,S,A=$e(d,\",\"),F=[],C=nr(null==r||null===(b=r.choices_by_table[null!==(w=null===(T=e.sourceFieldMetadata)||void 0===T?void 0:T.table)&&void 0!==w?w:o])||void 0===b?void 0:b.filter(function(e){return Ke(A,null==e?void 0:e.sys_id)}));try{for(C.s();!(S=C.n()).done;){var R=S.value;F.push({id:R.value,label:R.label,available:!0,unknown:!1,empty:!1})}}catch(e){C.e(e)}finally{C.f()}u.defaultSelectedItems=F}}else console.error(\"No choices_by_table index found when migrating choice filters\"),(null==s?void 0:s.length)>0&&t.migrationNotes.push(ot({message:at(\"This interactive filter is migrated without the exclusion list information because we are unable to migrate its configuration.\"),level:1,originalArtifactSysId:n,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags})),(null==d?void 0:d.length)>0&&t.migrationNotes.push(ot({message:at(\"This interactive filter is migrated without the default choice list information because we are unable to migrate its configuration.\"),level:1,originalArtifactSysId:n,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}));return mr(l,u),u}(e,t,r);case 2:case\"2\":return function(e,t,r){var a=e.reference_table,o=e.allow_extended_table,i=e.reference_conditions,n=e.sys_id,l=e.ui_control_type,s=e.default_reference_field_value,d=gr(e);if(d.datasource=sr(a,void 0,void 0,void 0,void 0,i||void 0),d.filterComponentType=\"multiselect\",d.filterElementType=\"pill\",r.filter_reference){var u=r.filter_reference[n];if((null==u?void 0:u.length)>0){var c,g=[],p=nr(u);try{for(p.s();!(c=p.n()).done;){var m=c.value,f=m.reference_table,v=m.reference_field;g.push(sr(f,void 0,v,void 0,\"reference\",void 0,o,a))}}catch(e){p.e(e)}finally{p.f()}d.targets=g}else{var h=sr(a,void 0,void 0,void 0,\"reference\",void 0,o,void 0);h.primaryKey=\"sys_id\",d.targets=[h]}}else console.error(\"No filter_reference index found when migrating reference filters for widget\",e.name?e.name:n),t.migrationNotes.push(ot({message:at(\"This interactive filter cannot be migrated. It can be configured manually in a new filter.\"),level:0,originalArtifactSysId:n,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}));if((null==s?void 0:s.length)>0){var y,_=[],b=nr($e(s,\",\"));try{for(b.s();!(y=b.n()).done;){var w=y.value,T=r.sys_id[w],S=void 0;T&&T[0].sys_name&&(S=T[0].sys_name),_.push({id:w,available:!0,unknown:!1,empty:!1,label:S})}}catch(e){b.e(e)}finally{b.f()}d.defaultSelectedItems=_}return mr(\"1\"==l?\"2\":l,d),d}(e,t,r)}}(t||{},e,r);return o?{component_id:i,component_props:o}:Qt(Ze)(e,t,r,a)},hr=function hr(e,t){var r=e.table,a=e.chartTitle,o=e.colorPalette,i=e.showDataLabel,n=e.groupBy,l=e.showOthers,s=e.legendHorizontalAlignment,d=e.legendVerticalAlignment,u=e.numberOfPeriods,c=(e.showChartBorder,e.sourceType),g=e.aggregateType,p=e.otherThreshold,m=e.filter,f=e.showLegend,v=e.aggregateField,h=e.colorType,y=e.formattingConfiguration,_=e.reportId,b=e.reportSource,w=e.isRealTime,T=e.aggregateFieldType,S=e.showHeader,A=e.showTitle,F=e.showBorder,C=e.groupByMetadata,R=e.singleColor,I=e.d,O=e.showDataTable,x=vt(m),N=ht(m),B=yt(s,d),E=ft(p),P=Ft(y,parseInt(u,10),T,g),k=gt(r),D=mt(k),M={applyDateRange:!1,bareBorder:!1,colorConfig:_t({colorPalette:o,colorType:h,dashboard:I,reportId:_,singleColor:R,metrics:[D]}),configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"value\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:N,id:k,reportSourceSysId:b,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===c||0===c.length?\"table\":c,tableOrViewName:r}],dateFormat:\"default\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"add-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:\"true\"==w,filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:[{groupBy:[{dataSource:k,groupByField:n,isChoice:\"choice\"===(null==C?void 0:C.type)||!1,isPaBucket:!1,isRange:(null==C?void 0:C.isRange)||!1}],maxNumberOfGroups:null!=C&&C.isRange?\"ALL\":E,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==C||!C.isRange)&&\"true\"===l}],headerTitle:A?a:\"\",hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:B.horizontal,metrics:[tt({aggregateFunction:(null==g?void 0:g.length)>0?g:\"COUNT\",axisId:\"primary\",dataSource:k,id:D},P)],newReporting:!1,numberOfPeriods:parseInt(u,10),period:\"M\",registerOrientation:B.orientation,registerPosition:B.register,scoreType:null,showAbsolutePeriod:!1,showBorder:F,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"==i,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:S,showHeaderSeparator:!0,showMaximumRange:!1,showMetricLabel:!1,showRegister:\"true\"==f,showRegisterOnSameLine:!1,showRegisterPercentage:!0,showRegisterValue:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:x.sortBy,sortByOrder:x.sortByOrder,telemetry:\"null\",trendBy:null,truncationType:\"start\",wrapTitle:!0,showDataTable:\"true\"==O};return v&&\"COUNT\"!==g&&\"\"!==v&&(M.metrics[0].aggregateField=v),M},yr=function yr(e,t,r){var a,o,i=e.sys_id,n=e.indicator,l=e.show_data_labels,s=e.aggregate,d=e.sort_direction,u=e.sort_on,c=e.color_scheme,g=e.description,p=e.name,m=pt(null==n?void 0:n.value),f={type:\"default\"};null!=c&&c.value&&\"\"!==(null==c?void 0:c.value)&&(f={type:\"palette\",palette:null==c?void 0:c.value});var v=u;-1===[\"name\",\"value\"].indexOf(u)&&(v=\"value\",t.migrationNotes.push(ot({message:at(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:i,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags})));var h=Dt(tt(e,{indexes:r,dashboard:t}));if(h.doMigration){!h.groupBy&&h.breakdowns.length>0&&(h.groupBy={groupByField:h.breakdowns[0].sysId,isRange:!1,isChoice:!1,isPaBucket:!1});var y=r.sys_id[null==n?void 0:n.value][0],_={applyDateRange:!1,bareBorder:!1,colorConfig:f,configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"both\",dataPassthrough:null,dataSources:[{allowRealTime:\"1\"===y.type,allowTotalValue:\"1\"===y.type,indicatorType:y.type,isScriptedIndicator:!1,filterQuery:ht(e.filter),label:y.name,sourceType:\"indicator\",uuid:{breakdowns:h.breakdowns,indicator:null==n?void 0:n.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:m,dataCategories:[\"trend\",\"group\",\"simple\"]}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,followFilters:\"true\"===e.follow_element,groupBy:[],hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:\"center\",metrics:[{dataSource:m,id:mt(m),aggregateIndicator:null!==(a=null==s?void 0:s.value)&&void 0!==a?a:\"\",frequency:parseInt(null!==(o=null==y?void 0:y.frequency)&&void 0!==o?o:\"10\",10),numberFormat:Ct(parseInt(y.precision,10)),axisId:\"primary\"}],newReporting:!1,numberOfPeriods:3,period:\"M\",registerOrientation:\"horizontal\",registerPosition:\"bottom\",scoreType:null,showAbsolutePeriod:!1,showBorder:e.showBorder,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===l,showDataPassthrough:!1,showFilterIcon:\"true\"===e.follow_element,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:e.showHeader,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showRegister:!0,showRegisterOnSameLine:!1,showRegisterPercentage:!1,showRegisterValue:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:v,sortByOrder:d,telemetry:\"null\",trendBy:null,truncationType:\"end\",wrapTitle:!1,description:g,headerTitle:e.showTitle?p:\"\"};return h.groupBy&&(_.groupBy=[{maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[tt(h.groupBy,{dataSource:m})]}]),_}t.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:i,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}))},_r=function _r(e){var t=!0,r=!0;return null!=e&&e.show_title&&(t=\"true\"===e.show_title.value),null!=e&&e.show_border&&(r=\"true\"===e.show_border.value),{showTitle:t,showHeader:!0,showBorder:r}},br=function br(e){var t,r,a,o,i=e.table,n=e.aggregateFieldType,l=e.filter,s=e.groupByMetadata,d=e.chart_title||e.title,u=null===(t=e.color_palette)||void 0===t?void 0:t.value,c=e.show_chart_data_label,g=e.field,p=e.legend_horizontal_alignment,m=e.legend_vertical_alignment,f=e.show_legend,v=e.decimal_precision,h=e.show_chart_border,y=e.source_type,_=e.aggregate,b=e.other_threshold,w=e.sumfield,T=$e(e.colors,\",\"),S=e.set_color,A=e.show_chart_total,F=null===(r=e.color)||void 0===r?void 0:r.value;try{var C;o=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":null!==(C=e.formatting_configuration)&&void 0!==C?C:\"null\")}catch(t){console.log(\"Unable to transform json 4\",t.toString(),e),o={}}var R=null===(a=e.report_source)||void 0===a?void 0:a.value,I=e.is_real_time,O=e.display_grid;return{table:i,chartTitle:d,colorType:S,colorPalette:u,singleColor:F,showDataLabel:c,groupBy:g,legendVerticalAlignment:m,legendHorizontalAlignment:p,showLegend:f,numberOfPeriods:v,showChartBorder:h,sourceType:y,aggregateType:_,otherThreshold:b,filter:l,aggregateField:w,colors:T,showTotal:A,formattingConfiguration:o,reportSource:R,reportId:e.sys_id,isRealTime:I,aggregateFieldType:n,showOthers:e.others,groupByMetadata:s,showDataTable:O}},wr=function wr(e){var t,r,a,o,i=e.table,n=e.aggregateFieldType,l=e.filter,s=e.groupByMetadata,d=e.chart_title||e.title,u=null===(t=e.color_palette)||void 0===t?void 0:t.value,c=e.show_chart_data_label,g=e.field,p=e.legend_horizontal_alignment,m=e.legend_vertical_alignment,f=e.show_legend,v=e.decimal_precision,h=e.show_chart_border,y=e.source_type,_=e.aggregate,b=e.other_threshold,w=e.sumfield,T=$e(e.colors,\",\"),S=e.set_color,A=null===(r=e.color)||void 0===r?void 0:r.value,F=e.show_chart_total,C=e.trend_field,R=e.interval,I=e.x_axis_title,O=e.x_axis_display_grid,x=e.y_axis_display_grid,N=e.y_axis_title,B=e.y_axis_from,E=e.y_axis_to,P=e.y_axis_opposite,k=e.show_marker;try{o=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(t){console.log(\"Unable to transform json 2\",t.toString(),e),o={}}var D=null===(a=e.report_source)||void 0===a?void 0:a.value,M=e.is_real_time,L=e.bar_unstack,G=e.series_name_text,U={};try{var H;e.custom_config&&\"\"!==e.custom_config&&(U=null===(H=JSON.parse(e.custom_config))||void 0===H?void 0:H.transforms)}catch(t){console.log(\"Unable to transform widget.custom_config to json \",t.toString(),e.custom_config),U={}}var J=e.start_time,j=e.end_time,V=e.display_grid;return{table:i,chartTitle:d,colorType:S,colorPalette:u,singleColor:A,showDataLabel:c,groupBy:g,legendVerticalAlignment:m,legendHorizontalAlignment:p,showLegend:f,numberOfPeriods:v,showChartBorder:h,sourceType:y,aggregateType:_,otherThreshold:b,filter:l,aggregateField:w,colors:T,showTotal:F,trendBy:C,trendInterval:R,xAxisTitle:I,xAxisShowGrid:O,yAxisShowGrid:x,yAxisTitle:N,yAxisFrom:B,yAxisTo:E,yAxisOpposite:P,formattingConfiguration:o,reportSource:D,reportId:e.sys_id,isRealTime:M,isGroupedBars:L,aggregateFieldType:n,dataSetName:G,groupByMetadata:s,customConfig:U,startTime:J,endTime:j,showMarkers:k,showDataTable:V}},Tr=function Tr(e){var t=e.indicator,r=e.element,a=e.show_data_labels,o=e.breakdown,i=e.aggregate,n=e.sort_direction,l=e.sort_on,s=e.breakdown_level2,d=e.element_level2,u=e.color_scheme,c=e.description,g=e.name,p=e.showTitle,m=e.type,f=e.period,v=e.date_from,h=e.date_to,y=e.show_range_selector,_=e.show_breakdown_selector,b=null==u?void 0:u.value,w=\"true\"===a,T=e.field,S=\"true\"===e.show_legend,A=e.set_color,F=\"true\"===e.show_total,C=e.yaxis_title,R=e.yaxis_from,I=e.yaxis_to,O=\"true\"===e.include_target,x=\"true\"===e.include_thresholds,N=\"true\"===e.include_trend,B=\"true\"===e.include_confidence,E=\"true\"===e.include_forecast,P=\"true\"===e.include_comments,k=e.compare_main_label,D=e.chart_color,M=\"true\"===e.follow_element,L=e.multiple_elements_view,G={period:f,from:v,to:h};return{colorType:A,colorPalette:b,chartColor:D,showDataLabel:w,groupBy:T,showLegend:S,showTotal:F,yAxisTitle:C,yAxisFrom:R,yAxisTo:I,sysId:e.sys_id,indicator:t,element:r,show_data_labels:a,breakdown:o,aggregate:i,sort_direction:n,sort_on:l,breakdown_level2:s,color_scheme:u,description:c,name:g,showTitle:p,type:m,element_level2:d,timePeriod:G,showTarget:O,showThresholds:x,showTrend:N,showConfidence:B,showForecast:E,showComments:P,chartType:e.visualization,label:k,show_range_selector:y,followElement:M,multiple_elements_view:L,show_breakdown_selector:_}};function Sr(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return Ar(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ar(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e8){throw _e8},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n4=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n4=e.done,e},e:function e(_e9){l=!0,i=_e9},f:function f(){try{_n4||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Fr(e,t,r,a,o,i,n,l,s,d){if(console.info(\"Handling breakdown for\",{breakdownSysId:e,baseProps:r,elementSysId:a,elementFilter:o,showTopX:i,manualElements:n,sys_id:l,breakdown2SysId:s,element2SysId:d}),e){var u,c=t.sys_id[e][0];r.breakdowns.push({breakdownId:e,breakdownLabel:c.name,elementIds:a&&\"unmatched\"!==a?[a]:[],elementsFilterSysId:o,perPage:null!=i?i:1e3}),n&&r.breakdowns[r.breakdowns.length-1].elementIds.concat(null===(u=t.widget_elements[l])||void 0===u?void 0:u.map(function(e){return\"unassigned\"===e.element?void 0:e.element}).filter(function(e){return e}))}if(s){var g=t.sys_id[s][0];r.breakdowns.push({breakdownId:s,breakdownLabel:g.name,elementIds:d&&\"unmatched\"!==d?[d]:[],perPage:null!=i?i:1e3})}}function Cr(e){switch(e){case\"indicator_group\":case\"order\":case\"default\":return\"name\";default:return e}}function Rr(e,t,r,a){var o;if(\"breakdown\"===t.type)if(void 0!==a.groupBy&&a.groupBy.length>0){var i=a.groupBy[0].maxNumberOfGroups;a.groupBy[0].maxNumberOfGroups=t.show_top_x?parseInt(t.show_top_x).toString():Ir(i)}else if(void 0!==a.breakdowns&&a.breakdowns.length>0){var n=a.breakdowns[0].perPage;a.breakdowns[0].perPage=t.show_top_x?parseInt(t.show_top_x).toString():Ir(n)}else e.migrationNotes.push(ot({message:at(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===t.show_breakdown_selector){var l=t.indicator.value,s=null===(o=r.indicator_breakdowns)||void 0===o?void 0:o[l];a.additionalGroupByConfig=(null==s?void 0:s.map(function(e){var t,a,o=null===(t=r.sys_id[null===(a=e.breakdown)||void 0===a?void 0:a.value])||void 0===t?void 0:t[0];return{id:null==o?void 0:o.sys_id,metricLabel:null==o?void 0:o.name}}))||[]}else a.additionalGroupByConfig=[]}function Ir(e){return e?parseInt(e).toString():\"10\"}function Or(e,t,r){if(e.additional_groupby){r.showAdditionalGroupBySelector=!0;var a=$e(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),r.additionalGroupByConfig=[],a.forEach(function(e){r.additionalGroupByConfig.push({metricLabel:e,id:e})})}}var xr=function xr(e,t,r){for(var a=0,o=[{shouldLog:\"true\"===t.show_visualization_selector,message:{message:at(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===t.show_range_selector,message:{message:at(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags}}];a<o.length;a++){var i=o[a];i.shouldLog&&e.migrationNotes.push(ot(i.message))}},Nr=function Nr(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)},Br=function Br(e,t,r,a){xr(e,t);var o=function(e){var t,r,a,o,i,n,l=e.sort_direction,s=e.sort_on,d=e.name,u=e.description,c=e.sys_id,g=e.show_breakdown_selector,p=null===(t=e.aggregate)||void 0===t?void 0:t.value,m=null===(r=e.indicator)||void 0===r?void 0:r.value,f=null===(a=e.tag)||void 0===a?void 0:a.value,v=null===(o=e.breakdown)||void 0===o?void 0:o.value,h=null===(i=e.breakdown_level2)||void 0===i?void 0:i.value,y=e.element,_=e.element_level2,b=null===(n=e.elements_filter)||void 0===n?void 0:n.value;return{sort_direction:l,sort_on:s,indicatorSysId:m,breakdownSysId:v,manualElements:\"true\"===e.manual_elements,pageSize:parseInt(e.number_of_records,10),showBar:\"true\"===e.show_bar,showIndicator:\"true\"===e.show_total,showTopX:parseInt(e.show_top_x,10),followFilters:\"true\"===e.follow_element,followFilterIcon:\"true\"===e.follow_element,columns:{lastScore:\"true\"===e.column_current,change:\"true\"===e.column_change,bulletChart:\"true\"===e.column_bulletchart,changePercent:\"true\"===e.column_change_perc,trend:\"true\"===e.column_trend,gap:\"true\"===e.column_gap,gapPercent:\"true\"===e.column_gap_perc,target:\"true\"===e.column_target,multiScore:\"true\"===e.column_multiple},timeSeries:p,breakdown2SysId:h,elementSysId:y,element2SysId:_,name:d,description:u,elementFilter:b,sys_id:c,steps:parseInt(e.column_steps,10),stepSize:parseInt(e.column_stepsize,10),indicatorGroupSysId:f,showBreakdownSelector:g}}(t),i=function(e){var t=e.sort_direction,r=e.sort_on,a=e.indicatorSysId,o=e.breakdownSysId,i=e.manualElements,n=e.pageSize,l=e.showBar,s=e.showIndicator,d=e.showTopX,u=e.columns,c=e.timeSeries,g=e.breakdown2SysId,p=e.elementSysId,m=e.element2SysId,f=e.name,v=e.showHeader,h=e.showTitle,y=(e.showBorder,e.elementFilter),_=e.description,b=e.indexes,w=e.sys_id,T=e.d,S=e.steps,A=e.stepSize,F=e.indicatorGroupSysId,C=e.showBreakdownSelector;l&&T.migrationNotes.push(ot({message:at(\"This visualization is migrated without show bar configuration because this functionality is not supported.\"),level:2,originalArtifactSysId:w,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:T.featureFlags}));var R={aggregateId:null!=c?c:\"default\",breakdowns:[],colorSchemeId:\"\",description:_,enableDrilldown:!0,filterConfigurations:\"@state.parFilters\",heading:h?f:\"\",indicatorGroup:\"\",indicators:[],metrics:{},nestedBreakdown:!0,pageSize:n.toString(),query:\"\",scorecardType:\"list\",showAlternateRowColors:!1,showBookmarkedOnly:!1,showBreakdownsOnly:!s,showColumnDividers:!1,showFavorite:!0,followFilters:e.followFilters,showFilterElement:!1,showFilterIcon:e.followFilterIcon,showHeader:v,showIndicatorInfo:!0,sortBy:Cr(r),sortDir:t,sourceType:\"1\",swapBreakdownsAsColumns:!1,allowChangeBreakdown:\"true\"===C,breakdownVisibilitySelector:\"true\"===C};if(Fr(o,b,R,p,y,d,i,w,g,m),a){var I=b.sys_id[a][0];R.indicators.push({id:a,label:I.name}),R.sourceType=\"1\"}else if(F)R.showBreakdownsOnly=!0,R.indicatorGroup=F,R.sourceType=\"2\";else{var O,x=null!==(O=b.widget_indicators[w])&&void 0!==O?O:[];R.showBreakdownsOnly=!0,R.sourceType=\"1\",\"order\"===r&&function(e,t,r){var a=[],o=[];e.sort(function(e,r){var a,o,i,n,l=t.sys_id[null===(a=e.indicator)||void 0===a?void 0:a.value],s=t.sys_id[null===(o=r.indicator)||void 0===o?void 0:o.value],d=null!=l&&null!==(i=l[0])&&void 0!==i&&i.name?l[0].name:\"\",u=null!=s&&null!==(n=s[0])&&void 0!==n&&n.name?s[0].name:\"\";return d.localeCompare(u)}),\"desc\"===r.sort_direction&&e.reverse();var i,n=Sr(e);try{for(n.s();!(i=n.n()).done;){var l=i.value;l.order&&parseInt(l.order,10)>-1?o.push(l):a.push(l)}}catch(e){n.e(e)}finally{n.f()}o.sort(function(e,t){return parseInt(e.order,10)-parseInt(t.order,10)}),e.splice(0,e.length),Array.prototype.push.apply(e,o.concat(a))}(x,b,e);var N,B=Sr(x);try{for(B.s();!(N=B.n()).done;){var E,P,k,D,M=N.value;if((null==c?void 0:c.length)>0&&(null===(E=M.aggregate)||void 0===E||null===(P=E.value)||void 0===P?void 0:P.length)>0&&(null===(k=M.aggregate)||void 0===k?void 0:k.value)!==c)T.migrationNotes.push(ot({message:at(\"This visualization is migrated without the time series aggregation configuration because it does not match aggregation of the main metric.\"),level:1,originalArtifactSysId:w,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:T.featureFlags}));else if(null!==(D=M.indicator)&&void 0!==D&&D.value){var L,G,U=b.sys_id[M.indicator.value][0];R.indicators.push({id:M.indicator.value,label:M.label?M.label:U.name}),Fr(null===(L=M.breakdown)||void 0===L?void 0:L.value,b,R,M.element,void 0,void 0,!1,w,null===(G=M.breakdown_level2)||void 0===G?void 0:G.value,M.element_level2)}}}catch(e){B.e(e)}finally{B.f()}}if(u){R.metrics={fields:[]};for(var H=0,J=Object.keys(u);H<J.length;H++){var j=J[H];if(\"multiScore\"===j)R.metrics.multiScore={numberOfPeriods:S,periodStep:A,type:u.multiScore?\"CUSTOM_INTERVAL\":\"\"};else if(\"bulletChart\"===j){T.migrationNotes.push(ot({message:at(\"This visualization is migrated without bullet score because this functionality is not supported.\"),level:2,originalArtifactSysId:w,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:T.featureFlags}));continue}u[j]&&R.metrics.fields.push(j)}}return R}(tt(o,{d:e,indexes:r},_r(a)));return i?(Rr(e,t,r,i),{component_id:h,component_props:i}):e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)},Er=/ORDERBY[^.^]+\\./,Pr=[function(e){var t,r,a,o,i=e.dashboard,n=e.widget,l=(e.indexes,e.preferences);((null==l||null===(t=l.renderer)||void 0===t?void 0:t.value)===K||i.migratingFromJava)&&(\"true\"===(null==l||null===(r=l.publisher_widget)||void 0===r?void 0:r.value)&&i.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the act as filter feature is not supported on migration. It can be configured manually in a new visualization.\"),level:1,originalArtifactSysId:n.sys_id,artifactTable:n.sys_table_name,featureFlags:i.featureFlags})),null!=n&&null!==(a=n.report_drilldown)&&void 0!==a&&a.value&&i.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the report drilldown feature is not supported on migration. It can be configured manually in a new visualization.\"),level:1,originalArtifactSysId:n.sys_id,artifactTable:n.sys_table_name,featureFlags:i.featureFlags})),Er.test(null==n?void 0:n.filter)&&i.migrationNotes.push(ot({message:at(\"This visualization is migrated without sorting by dot-walked fields because this functionality is not supported.\"),level:2,originalArtifactSysId:n.sys_id,artifactTable:n.sys_table_name,featureFlags:i.featureFlags})),null!=n&&null!==(o=n.list_ui_view)&&void 0!==o&&o.value&&i.migrationNotes.push(ot({message:at(\"This visualization is migrated without a drilldown list view because this functionality is not supported.\"),level:2,originalArtifactSysId:n.sys_id,artifactTable:n.sys_table_name,featureFlags:i.featureFlags})))}],kr=function kr(e,t,r,a){for(var o=0,i=Pr;o<i.length;o++){var n=(0,i[o])({dashboard:e,widget:t,indexes:r,preferences:a});if(n)return n}},Dr=function Dr(i,n,s,d){var u=kr(i,n,s,d);if(u)return u;var c=function(e,i,n,s){switch(null==i?void 0:i.visualization){case\"pyramid\":return function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):(e.migrationNotes.push(ot({message:at(\"We are unable to migrate this component.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),Wt(e,t))}(e,i,0,s);case\"process\":return Nr(e,i,n,s);case\"word_cloud\":case\"treemap\":case\"spider\":case\"funnel\":case\"relative\":return function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}(e,i,n,s);case\"column_total\":return function(e,t,r,a){xr(e,t);var o=Tr(t),i=function(e){var t,r,a=Ut(e);if(a){a.chartVariation=\"side-by-side\";var o=a.dataSources[0].id,i=a.metrics[0],n=i.frequency,l=i.frequencyInterval,s=mt(o);return a.metrics.unshift({frequency:n,frequencyInterval:l,chartType:\"line\",numberFormat:{customFormat:!1},id:s,dataSource:o,aggregateIndicator:(null==e||null===(t=e.aggregate)||void 0===t?void 0:t.value)||\"\",label:\"Total\",axisId:\"primary\"}),null===(r=a.trendBy.trendByFields)||void 0===r||r.push({field:\"anything\",metric:s}),a}}(tt(o,{d:e,indexes:r},_r(a)));return i?(Rr(e,t,r,i),function(e,t,r){var a,o;r.showAdditionalGroupBySelector=!0,r.allowAdditionalGroupByPerMetric=!0;var i=null===(a=e.indicator)||void 0===a?void 0:a.value,n=null===(o=t.indicator_breakdowns)||void 0===o?void 0:o[i];r.additionalGroupByConfig=(null==n?void 0:n.map(function(e){var a,o,i,n,l,s=null===(a=t.sys_id[null===(o=e.breakdown)||void 0===o?void 0:o.value])||void 0===a?void 0:a[0];return{id:null==s?void 0:s.sys_id,label:null==s?void 0:s.name,metricId:null===(i=r.metrics[1])||void 0===i?void 0:i.id,metricLabel:(null===(n=r.metrics[1])||void 0===n?void 0:n.label)||(null===(l=r.dataSources[0])||void 0===l?void 0:l.label)}}))||[]}(o,r,i),{component_id:l,component_props:i}):e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA Total Column widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"donut\":return function(e,t,r,o){xr(e,t);var i=yr(tt(t,_r(o)),e,r);return i?(Rr(e,t,r,i),{component_id:a,component_props:i}):e.migratingFromJava&&o?rt(t,o):zt(e,{static_content:q(\"ERROR: Cannot migrate PA Donut widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"pie\":return function(e,t,a,o){xr(e,t);var i=yr(tt(t,_r(o)),e,a);return i?(Rr(e,t,a,i),{component_id:r,component_props:i}):e.migratingFromJava&&o?rt(t,o):zt(e,{static_content:q(\"ERROR: Cannot migrate PA Pie widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"semi_circle_donut\":return function(e,t,r,a){xr(e,t);var i=yr(tt(t,_r(a)),e,r);return i?(Rr(e,t,r,i),{component_id:o,component_props:i}):e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA Semi donut widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"area\":return function(e,t,r,a){xr(e,t);var o=Tr(t),i=Ut(tt(o,{d:e,indexes:r},_r(a)));return i?{component_id:Jt(i),component_props:i}:e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"column\":return function(e,t,r,a){xr(e,t);var o=Tr(t),i=Ht(tt(o,{d:e,indexes:r},_r(a)));return i?(Rr(e,t,r,i),{component_id:Jt(i),component_props:i}):e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"line\":return function(e,t,r,a){xr(e,t);var o,i=(o=tt(Tr(t),{d:e,indexes:r},_r(a)),Ut(o));return i?(Rr(e,t,r,i),{component_id:Jt(i),component_props:i}):e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"spline\":return function(e,t,r,a){xr(e,t);var o,i=(o=tt(Tr(t),{d:e,indexes:r},_r(a)),Ut(o));return i?{component_id:Jt(i),component_props:i}:e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"step\":return function(e,t,r,a){xr(e,t);var o,i=(o=tt(Tr(t),{d:e,indexes:r},_r(a)),Ut(o));return i?{component_id:Jt(i),component_props:i}:e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"stacked\":return function(e,t,r,a){xr(e,t);var o=Tr(t),i=Ht(tt(o,{d:e,indexes:r,stacked:!0},_r(a)));return i?(Rr(e,t,r,i),{component_id:Jt(i),component_props:i}):e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"scorecard\":return Br(e,i,n,s);case\"speedometer\":case\"dial\":return function(e,t,r,a){xr(e,t);var o=function(e){var t,r,a,o,i,n,l=e.name,s=\"true\"===e.gauge_autoscale,d=parseInt(e.gauge_from,10),u=parseInt(e.gauge_to,10),c=null===(t=e.aggregate)||void 0===t?void 0:t.value,g=null===(r=e.indicator)||void 0===r?void 0:r.value,p=null===(a=e.tag)||void 0===a?void 0:a.value,m=null===(o=e.breakdown)||void 0===o?void 0:o.value,f=null===(i=e.breakdown_level2)||void 0===i?void 0:i.value,v=e.element,h=e.element_level2,y=null===(n=e.elements_filter)||void 0===n?void 0:n.value,_=\"true\"===e.manual_elements,b=e.sort_direction,w=e.sort_on;return{autoScale:s,chartTitle:l,timeSeries:c,indicatorSysId:g,indicatorGroupSysId:p,breakdownSysId:m,breakdown2SysId:f,elementSysId:v,element2SysId:h,elementFilter:y,manualElements:_,from:d,to:u,sys_id:e.sys_id,sortDirection:b,sortBy:w}}(t),i=function(e){var t=e.autoScale,r=e.chartTitle,a=e.timeSeries,o=e.indicatorSysId,i=e.showHeader,n=e.showTitle,l=e.showBorder,s=e.from,d=e.to,u=e.indexes,c=e.d,g=e.sys_id,p=e.widget,m=e.sortDirection,f=e.sortBy,v=e.follow_element,h=Dt(tt(p,{indexes:u,dashboard:c}));if(h.doMigration){var y=pt(o),_=mt(y),b=u.sys_id[o][0],w={applyDateRange:!1,bareBorder:!1,configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:\"1\"===b.type,allowTotalValue:\"1\"===b.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:y,indicatorType:b.type,isScriptedIndicator:!1,label:b.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:h.breakdowns,indicator:o}}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:\"true\"===v,gaugeArcAngle:\"180\",groupBy:null,headerTitle:n?r:\"\",hideMatrixAggregate:!1,innerRadius:.7,maxValue:d,metrics:[{aggregateFunction:a,axisId:\"primary\",dataSource:y,id:_,numberFormat:Ct(parseInt(b.precision,10))}],minValue:s,newReporting:!1,numberOfPeriods:3,period:\"M\",rangesConfig:{},scoreLabel:\"none\",scoreType:null,showAbsolutePeriod:!1,showBorder:l,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:i,showHeaderSeparator:!1,showLabelFirst:!1,showMaximumRange:!1,showMetricLabel:!1,showRangeLabels:!1,showRangeLimit:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,showZero:!0,sortBy:f,sortByOrder:m,telemetry:\"null\",trendBy:null,valueLabelSize:\"md\",wrapTitle:!1};return t&&(w.minValue=0,w.maxValue=null),w}c.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:g,artifactTable:null==p?void 0:p.sys_table_name,featureFlags:c.featureFlags}))}(tt(o,{d:e,indexes:r,widget:t},_r(a)));return i?{component_id:f,component_props:i}:e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"latest\":case\"realtime\":case\"score\":return function(e,r,a,o){xr(e,r);var i=!1,n=!1,l=!1,s=!1,d=!1,u=!1;switch(r.template){case\"template1\":case\"template2\":case\"\":i=!0,u=!0,n=!0,s=!0;break;case\"template3\":u=!0,n=!0,s=!0,l=!0,d=!0;break;default:if(e.migratingFromJava&&o)return rt(r,o);throw new Error(\"Don't know what kind of template that is? Dashboard \".concat(e.sys_id,\" Element: \").concat(r.sys_name))}var c=function(e){var t,r,a,o,i,n,l=e.props,s=e.indexes,d=e.dashboard,u=e.showSparkline,c=e.showChange,g=e.showTarget,p=e.showGapPercentage,m=e.showScoreDate,f=e.showChangePercentage,v=Dt(tt(l,{indexes:s,dashboard:d}));if(v.doMigration){\"periods_back\"===l.lastscore_compare&&d.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the compare score with previous periods feature is not supported.\"),level:1,originalArtifactSysId:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:d.featureFlags}));var h=pt(null===(t=l.indicator)||void 0===t?void 0:t.value),y=mt(h),_=s.sys_id[null===(r=l.indicator)||void 0===r?void 0:r.value][0],b=\"realtime\"===l.visualization,w=\"1\"===_.type,T=void 0===_.show_realtime_score?w&&b:w&&\"true\"===_.show_realtime_score;return{showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,enableDrilldown:!0,newReporting:!1,showSparkline:u,dataPassthrough:null,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,showMaximumRange:!1,enableRealTimeUpdate:T,scoreType:null,useRelativeScoreTime:T,showScoreUpdateTime:T,colorConfig:{type:\"default\"},scoreSize:\"auto\",showFilterIcon:\"true\"===l.follow_element,followFilters:\"true\"===l.follow_element,headingPosition:null,showChange:c,showTarget:g,showGapPercentage:p,showScoreDate:!T&&m,showChangePercentage:f,showChangeFrom:!0,showZero:!1,description:l.description,dataSources:[{allowRealTime:b&&w,allowTotalValue:w,indicatorType:_.type,isScriptedIndicator:!1,label:_.name,filter:ht(l.filter),sourceType:\"indicator\",uuid:{breakdowns:v.breakdowns,indicator:null===(a=l.indicator)||void 0===a?void 0:a.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:h,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[{dataSource:h,id:y,aggregateIndicator:null!==(o=null===(i=l.aggregate)||void 0===i?void 0:i.value)&&void 0!==o?o:\"\",frequency:parseInt(null!==(n=null==_?void 0:_.frequency)&&void 0!==n?n:\"10\",10),numberFormat:tt(Ct(parseInt(_.precision,10)),{abbreviationEnabled:!1,numberInTooltipsEnabled:!1,thousandSeparatorEnabled:!0}),axisId:\"primary\"}],headerTitle:l.showTitle?l.sys_name:\"\"}}d.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:d.featureFlags}))}({props:tt(r,_r(o)),showSparkline:i,showChange:n,showTarget:l,showChangePercentage:s,showGapPercentage:d,showScoreDate:u,indexes:a,dashboard:e});return c?{component_id:t,component_props:c}:e.migratingFromJava&&o?rt(r,o):zt(e,{static_content:q(\"ERROR: Cannot migrate PA Single Score widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"pivot_scorecard\":return function(e,t,r,a){xr(e,t);var o=function(e){var t,r,a,o;return{breakdown:null===(t=e.pivot_breakdown)||void 0===t?void 0:t.value,timeseries:null===(r=e.aggregate)||void 0===r?void 0:r.value,breakdownOnY:\"true\"===e.flip_axes,elementFilter:null===(a=e.pivot_elements_filter)||void 0===a?void 0:a.value,colour:null===(o=e.color_scheme)||void 0===o?void 0:o.value,name:e.name,sys_id:e.sys_id,description:e.description}}(t);if(o.elementFilter)return e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate Pivot scorecard \".concat(o.name,\" sys_id: \").concat(null==t?void 0:t.sys_id,\" as we do not support pivot element filters\"))});var i=function(e){var t,r=e.breakdown,a=e.timeseries,o=e.breakdownOnY,i=e.elementFilter,n=(e.colour,e.name),l=e.sys_id,s=e.indexes,d=(e.d,e.showHeader),u=e.showTitle,c=(e.showBorder,e.description);r&&(t=s.sys_id[r][0]);var g={aggregateId:(null==a?void 0:a.length)>0?a:\"default\",breakdowns:r?[{breakdownId:r,breakdownLabel:t.name,elementIds:i&&\"unmatched\"!==i?[i]:[],perPage:20}]:[],colorSchemeId:\"\",description:c,enableDrilldown:!0,filterConfigurations:\"@state.parFilters\",followFilters:\"true\"===e.follow_element,heading:u?n:\"\",indicatorGroup:\"\",indicators:[],metrics:{fields:[\"lastScore\"]},nestedBreakdown:!0,pageSize:10,query:\"\",scorecardType:\"pivot\",showAlternateRowColors:!0,showBookmarkedOnly:!1,showBreakdownsOnly:!1,showColumnDividers:!1,showFavorite:!0,showFilterElement:!1,showFilterIcon:\"true\"===e.follow_element,showHeader:d,showIndicatorInfo:!0,sortBy:\"name\",sortDir:\"asc\",sourceType:\"1\",swapBreakdownsAsColumns:!o};if(s.widget_indicators_m2m[l]){var p=s.widget_indicators_m2m[l].sort(function(e,t){return parseInt(e.order,10)-parseInt(t.order,10)});p.length>g.pageSize&&(g.pageSize=p.length);var m,f=Sr(p);try{for(f.s();!(m=f.n()).done;){var v,h=m.value;if(null!==(v=h.indicator)&&void 0!==v&&v.value){var y=s.sys_id[h.indicator.value][0];g.indicators.push({id:y.sys_id,label:y.name})}}}catch(e){f.e(e)}finally{f.f()}}return g}(tt(o,{d:e,indexes:r},_r(a)));return i?(Rr(e,t,r,i),{component_id:h,component_props:i}):e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}(e,i,n,s);case\"heatmap\":return function(e,t,r,a){xr(e,t);var o=function(e,t,r){var a,o,i,n,l,s,d,u,c,g,p,m,f={type:\"default\"};null!==(a=e.max_color)&&void 0!==a&&a.value&&\"\"!==(null===(o=e.max_color)||void 0===o?void 0:o.value)&&(f={type:\"colorRange\",values:[{color:\"65b303c7a9fe3dba00629aff95ee3597\",id:\"minColor\"},{color:null===(m=e.max_color)||void 0===m?void 0:m.value,id:\"maxColor\"}]});var v=pt(null===(i=e.indicator)||void 0===i?void 0:i.value),h=mt(v),y=Dt(tt(e,{indexes:t,dashboard:r})),_=t.sys_id[null===(n=e.indicator)||void 0===n?void 0:n.value][0],b=vt(e.filter);return{showZero:\"true\"===e.show_data_labels,showDataLabels:\"true\"===e.show_data_labels,showLegend:\"true\"===e.show_legend,legendPosition:\"bottom\",colorConfig:f,newReporting:!1,dataSources:[{isScriptedIndicator:\"true\"===_.scripted,allowRealTime:\"1\"===_.type,allowTotalValue:\"1\"===_.type,indicatorType:_.type,label:_.name,sourceType:\"indicator\",filterQuery:ht(e.filter),preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],uuid:{breakdowns:y.breakdowns,indicator:null===(l=e.indicator)||void 0===l?void 0:l.value},id:v,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?null!==(s=e.name)&&void 0!==s?s:e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[{dataSource:v,id:h,aggregateIndicator:null!==(d=null===(u=e.aggregate)||void 0===u?void 0:u.value)&&void 0!==d?d:\"\",axisId:\"primary\",frequency:parseInt(null!==(c=null==_?void 0:_.frequency)&&void 0!==c?c:\"10\",10),numberFormat:Ct(parseInt(_.precision,10))}],groupBy:[{categoryIndex:0,groupBy:[{dataSource:v,groupByField:null===(g=e.breakdown)||void 0===g?void 0:g.value,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:\"true\"===e.others},{categoryIndex:1,groupBy:[{dataSource:v,groupByField:null===(p=e.breakdown_level2)||void 0===p?void 0:p.value,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1}],sortBy:b.sortBy,sortByOrder:b.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:\"true\"===e.follow_element,showFilterIcon:\"true\"===e.follow_element,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",configVersion:\"23.0.0-ci-SNAPSHOT\"}}(tt(t,_r(a)),r,e);return o?{component_id:p,component_props:o}:e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}(e,i,n,s);case\"pareto\":return function(e,t,r,a){xr(e,t);var o=function(e,t,r){var a=yr(e,t,r);return a.metrics[0].chartType=\"pareto\",a}(tt(t,_r(a)),e,r);return o?(Rr(e,t,r,o),{component_id:g,component_props:o}):e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);default:i.visualization&&e.migrationNotes.push(ot({message:at(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==i?void 0:i.sys_id,artifactTable:null==i?void 0:i.sys_table_name,featureFlags:e.featureFlags}))}}(i,n,s,d);return c&&c.component_id!=m&&c.component_id!=e?(Zt(n,s,c),c):i.migratingFromJava&&d?rt(n,d):zt(i,{static_content:q(\"<b>Unknown widget type:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==n?void 0:n.type,\"</span> widget with viz <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null==n?void 0:n.visualization,\"</span> because there is no mapping.\"))})},Mr=function Mr(e,t){var r=hr(e),a=\"true\"==e.showTotal;return a&&(r.showTotalValue=a,r.showRegister=!1),r};function Lr(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return Gr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gr(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e10){throw _e10},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n5=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n5=e.done,e},e:function e(_e11){l=!0,i=_e11},f:function f(){try{_n5||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Hr=function Hr(e,t,r){var a,o,i,n,l,s,d,u,c,g,p,m,f=\"bar\"===e.type,v=12;\"-1\"===e.other_threshold?v=\"ALL\":e.other_threshold>-2&&(v=e.other_threshold);var h=Ft(e.formatting_configuration,parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregateType),y=gt(e.table),_=mt(y),b=ht(e.filter),w={sortBy:\"value\",sortByOrder:\"desc\"};Ke(e.filter,\"^ORDERBY\")&&(w=vt(e.filter));var T={},S=Rt([e.table,null===(a=e.report_source)||void 0===a?void 0:a.value,b]);T[S]={metricId:_,dataSourceId:y,metricColor:null===(o=e.color)||void 0===o?void 0:o.value};var A,F={configVersion:\"23.0.0-ci-SNAPSHOT\",yAxisHidden:!1,yAxisPosition:f||\"true\"!==e.x_axis_opposite?\"bottom\":\"top\",yAxisShowGrid:!0,xAxisWrapLabels:!1,xAxisMaxLabelSize:100,xAxisTruncationType:\"end\",yAxisStyle:\"clean\",showLegend:\"true\"===e.show_legend,showLegendValue:!1,legendPosition:\"bottom\",legendHorizontalAlignment:\"center\",legendExpandToFit:!1,showDataLabels:\"true\"===e.show_chart_data_label,dataLabelPosition:\"true\"===e.show_data_label_position_middle?\"middle\":\"top\",showStackedValues:\"none\",showOverlappingLabels:!1,newReporting:!1,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:b,reportSourceSysId:null===(i=e.report_source)||void 0===i?void 0:i.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:y,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[tt({dataSource:y,id:_,label:(null===(n=e.series_name_text)||void 0===n?void 0:n.length)>0?e.series_name_text:void 0,aggregateFunction:(null===(l=e.aggregate)||void 0===l?void 0:l.length)>0?e.aggregate:\"COUNT\",aggregateField:\"COUNT\"===e.aggregate&&\"\"!==e.sumfield?void 0:e.sumfield,axisId:\"primary\"},h)],groupBy:[e.field&&e.field.length>0?{groupBy:[{dataSource:y,groupByField:e.field,isRange:null!==(s=null===(d=e.groupByMetadata)||void 0===d?void 0:d.isRange)&&void 0!==s&&s,isChoice:\"choice\"===(null===(u=e.groupByMetadata)||void 0===u?void 0:u.type),isPaBucket:!1}],maxNumberOfGroups:null!==(c=e.groupByMetadata)&&void 0!==c&&c.isRange?\"ALL\":v,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null===(g=e.groupByMetadata)||void 0===g||!g.isRange)&&\"true\"===e.others}:void 0],sortBy:w.sortBy,sortByOrder:w.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",yAxisTitle:e.y_axis_title,xAxisTitle:e.x_axis_title,yAxisFrom:e.y_axis_from,yAxisTo:e.y_axis_to,showDataTable:\"true\"==e.display_grid};A=e.additional_groupby||\"true\"!==e.bar_unstack&&e.trend_field&&\"\"!==e.trend_field?\"stacked\":\"grouped\",F.chartVariation=A,e.trend_field&&\"\"!==e.trend_field&&F.groupBy.push({groupBy:[{dataSource:y,groupByField:e.trend_field,isRange:e.trendMetadata.isRange,isChoice:\"choice\"===e.trendMetadata.type,isPaBucket:!1}]});var C,R=function(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return Ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ur(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e12){throw _e12},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n6=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n6=e.done,e},e:function e(_e13){l=!0,i=_e13},f:function f(){try{_n6||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}(null!==(m=r.report_layers[e.sys_id])&&void 0!==m?m:[]);try{var I=function I(){var t,r,a,o,i=C.value,n=F.dataSources.map(function(e){return e.tableOrViewName}).concat(F.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),l=ht(i.filter);S=Rt([i.table,null===(t=i.report_source)||void 0===t?void 0:t.value,l,i.sys_id]);var s=It(T,S,i.table);T[S]={metricId:mt(s),dataSourceId:s,metricColor:null==i||null===(r=i.color)||void 0===r?void 0:r.value};var d,u=Ot(F.dataSources,s,l);if((!Ke(n,i.table)&&!Ke(n,i.report_source)||u)&&F.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:i.table,filterQuery:l,reportSourceSysId:null===(d=i.report_source)||void 0===d?void 0:d.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:s,dataCategories:[\"trend\",\"group\",\"simple\"]}),F.metrics.push(tt({dataSource:T[S].dataSourceId,id:T[S].metricId,aggregateFunction:i.aggregate,aggregateField:\"COUNT\"===i.aggregate&&\"\"!==i.sumfield?void 0:i.sumfield,axisId:\"primary\",label:(null===(a=i.series_name_text)||void 0===a?void 0:a.length)>0?i.series_name_text:void 0},Ft(i.formatting_configuration,parseInt(e.decimal_precision,10),i.aggregateFieldType,i.aggregateType))),(null===(o=i.field)||void 0===o?void 0:o.length)>0){var c={dataSource:T[S].dataSourceId,groupByField:i.field,isRange:!1,isChoice:!1,isPaBucket:!1},g=!1;F.groupBy[0].groupBy.forEach(function(e){g=g||e.dataSource==c.dataSource&&e.groupByField==c.groupByField}),g||F.groupBy[0].groupBy.push(c)}};for(R.s();!(C=R.n()).done;)I()}catch(e){R.e(e)}finally{R.f()}return F.colorConfig=_t({colorPalette:null===(p=e.color_palette)||void 0===p?void 0:p.value,colorType:e.set_chart_color||e.set_color,dashboard:t,reportId:e.sys_id,singleColor:e.color.value,colorList:e.colors,enableColorPerMetric:!1,metricMap:T}),F},Jr=function Jr(e){null==e&&(e=\"\");var t=$e(e,\",\"),r=\"\";return Ke(t,\"name\")?r=r.concat(\"name,\"):Ke(t,\"number\")?r=r.concat(\"number,\"):r=r.concat(\",\"),Ke(t,\"short_description\")&&!Ke(r,\"short_description\")&&(r=r.concat(\"short_description,\")),r.endsWith(\",\")&&(r=r.slice(0,-1)),r},jr=function jr(e,t){return Vr(e,t)},Vr=function Vr(e,t){var r=\"area\"==(null==t?void 0:t.type)||\"line_bar\"==(null==t?void 0:t.type)||\"spline\"==(null==t?void 0:t.type)||\"line\"==(null==t?void 0:t.type)||\"step_line\"==(null==t?void 0:t.type)||\"trend\"==(null==t?void 0:t.type),a=null==t?void 0:t.groupByMetadata;return!(!r||!a||\"glide_duration\"!=a.internalType&&\"glide_date_time\"!=a.internalType&&\"glide_date\"!=a.internalType||(e.migrationNotes.push(ot({message:at(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),0))};function zr(e){return zr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},zr(e)}function Yr(e,t,r){return t=function(e){var t=function(e,t){if(\"object\"!=zr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,\"string\");if(\"object\"!=zr(a))return a;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==zr(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qr,Wr=function Wr(i,h,b,w){var T=kr(i,h,b,w);if(T)return T;var S=function(e,i,m,h){if(jr(e,i)||function(e,t){var r;return!(null==t||null===(r=t.report_drilldown)||void 0===r||!r.value||null!=e&&e.featureFlags&&null!=e&&e.featureFlags.drillDownC2C&&\"false\"!==(null==e?void 0:e.featureFlags.drillDownC2C)||(e.migrationNotes.push(ot({message:at(\"A report on this dashboard has an unmigrated drilldown configuration. You can configure the drilldowns in the Visualization Designer.\"),level:1,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),0))}(e,i))return e.migratingFromJava&&h?rt(i,h):zt(e,{static_content:q(\"<b>Unknown report type:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==i?void 0:i.title,\"</span>, drilldown reports are not supported.\"))});switch(null==i?void 0:i.type){case N:return function(e,r,a,o){var i,n,l,s=r.title,d=r.show_chart_title,u=r.chart_title,c=r.title_vertical_alignment,g=r.aggregate;try{l=JSON.parse(\"\"==r.formatting_configuration||null==r.formatting_configuration?\"{}\":r.formatting_configuration)}catch(e){console.log(\"Unable to transform json 1\",e.toString(),r),l={}}var p=r.table,m=r.filter,f=r.show_zero,v=r.description,h=r.chart_size,y=null===(i=r.score_color)||void 0===i?void 0:i.value,_=null===(n=r.report_source)||void 0===n?void 0:n.value,b=r.sumfield;r.list_ui_view&&\"\"!==r.list_ui_view&&e.migrationNotes.push(ot({message:at(\"This visualization is migrated without a drilldown list view because this functionality is not supported.\"),level:2,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}));var w=function(e){var r=e.reportId,a=e.chartTitle,o=e.title,i=e.titleVerticalAlignment,n=(e.showChartTitle,e.aggregate),l=e.table,s=e.filter,d=e.showZero,u=e.description,c=(e.chartSize,e.formattingConfiguration),g=e.indexes,p=e.color,m=e.reportSource,f=e.dashboard,v=e.aggregateField,h=(e.showHeader,e.showTitle),y=e.showBorder,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},b=gt(l),w=mt(b),T={type:\"default\"};null!=g&&g.sys_report_mpivot_rule&&null!=g&&g.sys_report_mpivot_rule[r]?T={type:\"singleColor\",values:[{color:p,metric:w,rules:g.sys_report_mpivot_rule[r].map(function(e){var t;return{operator:e.operator,order:e.order,value1:e.value1,value2:e.value2,color:null===(t=e.color_id)||void 0===t?void 0:t.value}})}]}:p&&\"65b30218a9fe3dba0120df8611520d97\"!==p&&(T={type:\"singleColor\",values:[{color:p,metric:w,rules:[]}]});for(var S=function(e){var t=Ft(e);return e.numberFormattingProperties&&0===Object.keys(e.numberFormattingProperties).length?tt(t,{numberFormat:{customFormat:!0,abbreviationEnabled:!1,numberInTooltipsEnabled:!1,thousandSeparatorEnabled:!0}}):t}(c),A={filterConfigurations:\"@state.parFilters\",scoreSize:\"auto\",headingPosition:\"bottom\"===i?\"bottom\":\"top\",sparklineStyle:\"area\",scoreIcon:\"\",iconStyle:\"background\",showScoreDate:!1,useRelativeScoreTime:!1,showScoreUpdateTime:!1,showZero:\"true\"===d,newReporting:!1,showHeader:!0,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,showBorder:y,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,sortByOrder:\"desc\",showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:!1,period:\"M\",dateFormat:\"default\",description:u,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,colorConfig:T,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:l,filterQuery:ht(s),reportSourceSysId:m,preferredVisualizations:[t],id:b,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[tt({dataSource:b,id:w,aggregateFunction:(null==n?void 0:n.length)>0?n:\"COUNT\",aggregateField:\"COUNT\"===n?void 0:v,axisId:\"primary\",label:o},S)],headerTitle:h?\"\"!==a&&a?a:o:\"\"},F=[jt],C=0;C<F.length;C++)A=F[C](f,A,_);return A}(tt({chartTitle:u,title:s,showChartTitle:d,titleVerticalAlignment:c,aggregate:g,table:p,filter:m,showZero:f,description:v,chartSize:h,formattingConfiguration:l,indexes:a,reportId:r.sys_id,color:y,reportSource:_,aggregateField:b,dashboard:e},_r(o)),o);return w?{component_id:t,component_props:w}:e.migratingFromJava&&o?rt(r,o):Qt(Qe)(e,r,a,o)}(e,i,m,h);case\"pie\":return function(e,t,a,o){var i=jr(e,t),n=br(t),l=hr(tt(n,{d:e},_r(o)));return!l||i?e.migratingFromJava&&o?rt(t,o):Qt(Qe)(e,t,a,o):(Or(t,0,l),{component_id:r,component_props:Kt(e,l,o)})}(e,i,m,h);case B:return function(e,t,r,o){var i=jr(e,t),n=br(t),l=Mr(tt(n,{d:e},_r(o)));return!l||i?e.migratingFromJava&&o?rt(t,o):Qt(Qe)(e,t,r,o):(Or(t,0,l),{component_id:a,component_props:Kt(e,l,o)})}(e,i,m,h);case E:return function(e,t,r,a){var i=jr(e,t),n=br(t),l=Mr(tt(n,{d:e},_r(a)));return!l||i?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,l),{component_id:o,component_props:Kt(e,l,a)})}(e,i,m,h);case P:return function(e,t,r,a){var o=jr(e,t),i=wr(t),l=kt(tt(i,{d:e,indexes:r},_r(a)));return!l||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,l),{component_id:n,component_props:l})}(e,i,m,h);case k:return function(e,t,r,a){var o=jr(e,t),i=function(e){var t,r=kt(e);if(r){var a=e.indexes,o=e.reportId;return(null!==(t=a.report_layers[o])&&void 0!==t?t:[]).length>0||\"true\"===e.isGroupedBars?r.chartVariation=\"side-by-side\":r.chartVariation=\"stacked\",r.extensionType=\"bar\",r}}(tt(wr(t),{d:e,indexes:r},_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_id:l,component_props:i})}(e,i,m,h);case\"line\":return function(e,t,r,a){var o=jr(e,t),i=function(e){var t=kt(e);if(t)return t.extensionType=\"line\",t}(tt(wr(t),{d:e,indexes:r},_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_id:s,component_props:i})}(e,i,m,h);case D:return function(e,t,r,a){var o=jr(e,t),i=function(e){var t=kt(e);if(t)return t.extensionType=\"spline\",t}(tt(wr(t),{d:e,indexes:r},_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_id:d,component_props:i})}(e,i,m,h);case M:return function(e,t,r,a){var o=jr(e,t),i=function(e){var t=kt(e);if(t)return t.extensionType=\"step\",t}(tt(wr(t),{d:e,indexes:r},_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_id:u,component_props:i})}(e,i,m,h);case\"list\":return function(e,t,r,a){var o=jr(e,t),i=function(e){var t,r=e.table,a=e.filter,o=e.chart_title||e.title,i=e.field,n=e.field_list,l=e.show_chart_title,s=null===(t=e.report_source)||void 0===t?void 0:t.value,d=e.additional_groupby;return{table:r,filter:a,chartTitle:o,groupBy:i,columns:n,showChartTitle:l,reportSource:s,reportId:e.sys_id,additionalGroupBy:d}}(t),n=function(e){var t,r=e.columns,a=e.groupBy,o=e.filter,i=e.chartTitle,n=e.table,l=e.reportSource,s=e.reportId,d=e.d,u=e.indexes,c=e.showHeader,g=e.showTitle,p=e.showBorder,m=e.additionalGroupBy,f=\"\";if(l){var v=u.sys_id[l];!v||v.length<1?d.migrationNotes.push(ot({message:at(\"The dashboard has missing report source configuration.\"),level:2,originalArtifactSysId:s,artifactTable:lt,featureFlags:d.featureFlags})):(n=v[0].table,f=v[0].filter)}var h=r;a&&(h=h.concat(\",\",a)),m&&(h=h.concat(\",\",m));var y=$e(h,\",\");h=function(e){for(var t=[],r=0;r<e.length;r++){for(var a=!1,o=0;o<t.length;o++)if(e[r]===t[o]){a=!0;break}a||t.push(e[r])}return t}(y).join(\",\");var _=null!==(t=y.length)&&void 0!==t?t:0;return 0===_&&(_=100),{columns:h,fixedQuery:f,groupByField:a,hideColumnFiltering:!1,hideColumnGrouping:!1,hideColumnReorder:!1,hideColumnResizing:!1,hideColumnSorting:!1,hideDotwalk:!1,hideEmptyStateImage:!1,hideHeader:!c,hideHighlightContent:!1,hideHighlightedValues:!1,hideInlineEditing:!1,hideLastRefreshedText:!0,hideLinks:!1,hidePersonalization:!0,hideRefreshButton:!1,hideRowSelector:!1,hideTitle:!g,hideTitleRowCount:!1,hideViewAll:!1,highlightContent:{color:\"\",patterns:[]},highlightedValueConfigId:\"\",followFilters:!0,limit:20,listTitle:i,maxCharLimit:4e3,maxColumns:_,overrideWordWrapUserPref:!1,query:o,refreshRequested:\"\",table:n,wordWrap:!1,showBorder:p,isDashboard:!0}}(tt(i,{d:e,indexes:r},_r(a)));return!n||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,n),{component_id:\"2b1c080881e05dc63b917044290b233f\",component_props:n})}(e,i,m,h);case L:case G:return function(e,t,r,a){var o=jr(e,t),i=function(e){var t,r,a,o,i=e.aggregate,n=e.aggregateFieldType,l=e.filter,s=e.column,d=e.row,u=e.table,c=e.sumfield,g=e.chart_title||e.title,p=null===(t=e.color_palette)||void 0===t?void 0:t.value,m=$e(e.colors,\",\"),f=e.set_color,v=null===(r=e.color)||void 0===r?void 0:r.value;try{o=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(t){console.log(\"Unable to transform json 3\",t.toString(),e),o={}}var h=null===(a=e.report_source)||void 0===a?void 0:a.value,y=e.other_threshold,_=e.source_type,b=\"true\"===e.others,w=\"true\"===e.show_zero,T=\"true\"===e.display_column_lines,S=\"true\"===e.display_row_lines,A=\"true\"===e.pivot_expanded;return{aggregate:i,aggregateFieldType:n,filter:l,column:s,row:d,table:u,chartTitle:g,colorPalette:p,colors:m,singleColor:v,colorType:f,formattingConfiguration:o,reportSource:h,otherThreshold:y,sysId:e.sys_id,sourceType:_,aggregateField:c,showOthers:b,showZero:w,showColLines:T,showRowLines:S,showExpanded:A}}(t),n=function(e){var t,r=e.filter,a=e.formattingConfiguration,o=e.aggregate,i=e.aggregateFieldType,n=e.table,l=e.column,s=e.row,d=e.chartTitle,u=e.reportSource,c=e.otherThreshold,g=e.sysId,p=e.sourceType,m=e.showOthers,f=e.aggregateField,v=e.showHeader,h=e.showTitle,y=e.showBorder,_=e.showZero,b=e.showColLines,w=e.showRowLines,T=e.showExpanded,S=e.indexes,A=ht(r),F=ft(c),C=Ft(a,void 0,i,o),R=gt(n),I=mt(R),O={applyDateRange:!1,bareBorder:!1,colorConfig:{type:\"default\"},dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:A,id:R,reportSourceSysId:u,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===p||0===p.length?\"table\":p,tableOrViewName:n}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,freezeFirstColumn:!1,freezeFooter:!1,freezeHeader:!0,groupBy:[],headerTitle:h?d:\"\",hideMatrixAggregate:!1,metrics:[tt({aggregateField:f,aggregateFunction:(null==o?void 0:o.length)>0?o:\"COUNT\",axisId:\"primary\",dataSource:R,id:I},C)],newReporting:!0,numberOfPeriods:3,period:\"M\",scoreType:\"latest\",showAbsolutePeriod:!1,showAlternateColumnColors:!1,showAlternateRowColors:!0,showBorder:y,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showColumnAggregate:!0,showColumnDividers:b,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!0,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:v,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showPivotExpanded:T,showRowAggregate:!0,showRowDividers:w,showSecondGroupAggregate:!0,showSparkline:!1,showSubAggregate:!0,showTarget:!1,showThreshold:!1,showTotalAggregate:!0,showTrend:!1,showZero:_,sortBy:\"choice\",sortByOrder:\"asc\",telemetry:\"null\",truncateColumnHeader:!0,truncateFirstColumn:!0,wrapColumnHeader:!1,wrapTitle:!1},x=Lr($e(l,\",\"));try{for(x.s();!(t=x.n()).done;){var N=t.value;O.groupBy.push({categoryIndex:0,disableRanges:!0,groupBy:[{dataSource:R,groupByField:N,isChoice:!1,isPaBucket:!1,isRange:!1}],hideZeroValues:!1,maxNumberOfGroups:F,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:m})}}catch(e){x.e(e)}finally{x.f()}var B,E=Lr($e(s,\",\"));try{for(E.s();!(B=E.n()).done;){var P=B.value;O.groupBy.push({categoryIndex:1,disableRanges:!0,groupBy:[{dataSource:R,groupByField:P,isChoice:!1,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:\"ALL\"})}}catch(e){E.e(e)}finally{E.f()}var k=S.sys_report_mpivot_rule[g];if((null==k?void 0:k.length)>0){var D;O.colorConfig={type:\"singleColor\",values:[{color:null===(D=k[0].color_id)||void 0===D?void 0:D.value,metric:I,rules:[]}]};var M,L=Lr(k);try{for(L.s();!(M=L.n()).done;){var G,U,H=M.value;O.colorConfig.values[0].rules.push({operator:H.operator,order:100,color:null===(G=H.color_id)||void 0===G?void 0:G.value,value1:H.value1,value2:H.value2,backgroundColor:null===(U=H.bg_color_id)||void 0===U?void 0:U.value})}}catch(e){L.e(e)}finally{L.f()}}var J,j=Lr(O.metrics);try{for(j.s();!(J=j.n()).done;){var V=J.value;\"COUNT\"===V.aggregateFunction&&delete V.aggregateField}}catch(e){j.e(e)}finally{j.f()}return O}(tt(i,{d:e,indexes:r},_r(a)));return!n||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,n),{component_id:\"06f6aacbd1818110f877d87436272684\",component_props:n})}(e,i,m,h);case\"control\":case\"tbox\":return function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):(e.migrationNotes.push(ot({message:at(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),qt(e,t))}(e,i,0,h);case\"box\":return function(e,r,a,o){var i=function(e){var t,r=e.table,a=e.source_type,o=e.title,i=e.description,n=e.field,l=e.trend_field,s=e.additional_groupby,d=e.y_axis_title,u=e.x_axis_title,c=e.y_axis_opposite,g=e.y_axis_display_grid,p=e.y_axis_from,m=e.y_axis_to,f=e.x_axis_label_size,v=e.aggregate,h=e.aggregateFieldType,y=e.filter,_=e.sumfield,b=e.decimal_precision,w=e.formatting_configuration,T=e.type,S=e.trendMetadata,A=e.report_source;try{t=JSON.parse(\"\"==w||null==w?\"{}\":null!=w?w:\"null\")}catch(r){console.log(\"Unable to transform json 4\",r.toString(),e),t={}}var F=m||0===m;return{formattingConfiguration:t,chartTitle:o,description:i,sourceType:a,table:r,decimalPrecision:parseInt(b,10),groupBy:n,measuredBy:l,additionalGroupBy:s,yAxisTitle:d,yAxisPosition:\"false\"===c?\"left\":\"right\",yAxisShowGrid:\"true\"===g,yAxisFrom:p||0===p?parseInt(p,10):null,yAxisTo:F?parseInt(m,10):null,yAxisStyle:\"default\",xAxisTitle:u,xAxisMaxLabelSize:f,aggregate:v,aggregateFieldType:h,filter:y,aggregateField:_,type:T,trendMetadata:S,reportSource:null==A?void 0:A.value}}(r),n=function(e){var r,a=e.chartTitle,o=e.title,i=e.table,n=e.filter,l=e.showZero,s=e.description,d=e.formattingConfiguration,u=e.reportSource,c=e.aggregateField,g=e.showTitle,p=e.measuredBy,m=e.groupBy,f=e.yAxisTitle,v=e.yAxisPosition,h=e.yAxisShowGrid,y=e.yAxisFrom,_=e.yAxisTo,b=e.yAxisStyle,w=e.xAxisTitle,T=e.decimalPrecision,S=e.aggregateFieldType,A=e.aggregate,F=e.type,C=e.trendMetadata,R=gt(i),I=mt(R),O=\"value\",x=\"desc\";Ke(n,\"ORDERBY\")&&(O=\"name\",Ke(n,\"DESC\")||(x=\"asc\"));var N=Ft(d,T,S,A,F),B={chart:{type:\"boxplot\"},legend:{align:\"center\",enabled:!1,layout:\"horizontal\",verticalAlign:\"bottom\"},plotOptions:{boxplot:{fillColor:\"rgb(var(--now-datavis_color--accessibility-0, 255,255,255))\",lineWidth:1,medianWidth:2,stroke:\"rgb(var(--now-datavis_color--qualitative-0, 10,184,217))\",strokeWidth:\"1px\",whiskerWidth:2},series:{colorByPoint:!1,marker:{fillColor:\"rgb(var(--now-datavis_color--qualitative-1, 255,87,48))\",radius:4,symbol:\"circle\"}}},series:[{dataLabels:{enabled:!1}}],tooltip:{enabled:!0},xAxis:{categories:[],labels:{style:{textOverflow:\"ellipsis\",whitespace:\"nowrap\",width:\"100px\"}},lineColor:\"rgb(var(--now-datavis_color_chart--tertiary, 143,149,161))\",lineWidth:1,tickWidth:1,title:{},visible:!0},yAxis:{gridLineWidth:!0,labels:{enabled:!0,style:{lineWidth:1,tickWidth:0}},lineWidth:0,min:0,opposite:!1,tickWidth:0,title:{text:\"\".concat(i,\" \").concat((null==C?void 0:C.label)||\"\")},visible:!0}};return Yr(r={filterConfigurations:\"@state.parFilters\",scoreSize:\"auto\",sparklineStyle:\"area\",scoreIcon:\"\",iconStyle:\"background\",showScoreDate:!1,useRelativeScoreTime:!1,showScoreUpdateTime:!1,showZero:\"true\"===l,newReporting:!1,showHeader:!0,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,showBorder:!0,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,sortBy:O,sortByOrder:x,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:!1,period:\"M\",dateFormat:\"default\",description:s,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,colorConfig:{type:\"default\"},dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:i,filterQuery:ht(n),reportSourceSysId:u,preferredVisualizations:[t],id:R,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[tt({dataSource:R,id:I,aggregateFunction:(null==A?void 0:A.length)>0?A:\"COUNT\",aggregateField:\"COUNT\"===A?void 0:c,axisId:\"primary\",label:o},N)]},\"groupBy\",[{categoryIndex:0,groupBy:[{dataSource:R,groupByField:m,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1},{categoryIndex:1,groupBy:[{dataSource:R,groupByField:p,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1}]),Yr(r,\"headerTitle\",g?a:\"\"),Yr(r,\"backgroundRefreshInterval\",\"\"),Yr(r,\"chartInteractionEnabled\",!0),Yr(r,\"chartInteractionAction\",\"goToData\"),Yr(r,\"config\",B),Yr(r,\"yAxisHidden\",!1),Yr(r,\"yAxisTitle\",f),Yr(r,\"yAxisPosition\",v),Yr(r,\"yAxisShowGrid\",h),Yr(r,\"yAxisFrom\",y),Yr(r,\"yAxisTo\",_),Yr(r,\"yAxisStyle\",b),Yr(r,\"xAxisTitle\",w),r}(tt(i,_r(o)));return n?(Or(r,0,n),{component_id:\"c5d01636ff2602109bd2ffffffffff0a\",component_props:n}):e.migratingFromJava&&o?(e.migrationNotes.push(ot({message:at(\"Something went wrong with new properties.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),rt(r,o)):Qt(Qe)(e,r,a,o)}(e,i,m,h);case\"pareto\":return function(e,t,r,a){if(jr(e,t))return e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a);var o=function(e,t,r){var a=Hr(e,t,r);return\"palette\"===a.colorConfig.type&&(t.migrationNotes.push(ot({message:at(\"This content was migrated with the default color palette. Custom palettes are not currently supported for the {0} visualization in Platform Analytics.\",e.title),level:2,originalArtifactSysId:null==e?void 0:e.sys_id,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags})),a.colorConfig.type=\"default\"),a.yAxisStyle=\"clean\",a}(tt(t,_r(a)),e,r);return Or(t,0,o),{component_id:g,component_props:o}}(e,i,m,h);case\"hist\":case\"funnel\":case\"pyramid\":case\"map\":return function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):(e.migrationNotes.push(ot({message:at(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),qt(e,t))}(e,i,0,h);case\"bar\":case U:case H:return function(e,t,r,a){if(jr(e,t))return e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a);var o=Hr(tt(t,_r(a)),e,r);return Or(t,0,o),{component_id:\"bar\"===t.type?c:\"85855283b7e03010097cb81cde11a91d\",component_props:o}}(e,i,m,h);case J:return function(e,t,r,a){var o=jr(e,t),i=function(e,t){var r,a,o,i,n,l,s,d,u,c=gt(e.table),g=mt(c),p={type:\"default\"};\"true\"===e.use_color_heatmap&&\"65b303c7a9fe3dba00629aff95ee3597\"!==(null===(r=e.axis_min_color)||void 0===r?void 0:r.value)&&\"b0d449b3d7332100fa6c0c12ce610383\"!==(null===(a=e.axis_max_color)||void 0===a?void 0:a.value)&&null!==(o=e.axis_min_color)&&void 0!==o&&o.value&&null!==(i=e.axis_max_color)&&void 0!==i&&i.value&&(p={type:\"colorRange\",values:[{color:null===(d=e.axis_min_color)||void 0===d?void 0:d.value,id:\"minColor\"},{color:null===(u=e.axis_max_color)||void 0===u?void 0:u.value,id:\"maxColor\"}]});var m=Ft(JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration),parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregate,e.type),f=12;\"-1\"===e.other_threshold?f=\"ALL\":e.other_threshold>-2&&(f=e.other_threshold);var v=vt(e.filter);return{showZero:\"true\"===e.show_zero,showDataLabels:\"true\"===e.show_chart_data_label,showLegend:!0,legendPosition:\"bottom\",colorConfig:p,newReporting:!1,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:ht(e.filter),reportSourceSysId:null===(n=e.report_source)||void 0===n?void 0:n.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:c,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?null!==(l=e.name)&&void 0!==l?l:e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[tt({dataSource:c,id:g,aggregateFunction:(null===(s=e.aggregate)||void 0===s?void 0:s.length)>0?e.aggregate:\"COUNT\",aggregateField:\"COUNT\"!==e.aggregate?e.sumfield:void 0,axisId:\"primary\"},m)],groupBy:[{categoryIndex:0,groupBy:[{dataSource:c,groupByField:e.column,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:f,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:\"true\"===e.others,disableRanges:!1},{categoryIndex:1,groupBy:[{dataSource:c,groupByField:e.row,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:f,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,disableRanges:!1}],sortBy:v.sortBy,sortByOrder:v.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",configVersion:\"23.0.0-ci-SNAPSHOT\"}}(tt(t,_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_props:i,component_id:p})}(e,i,m,h);case j:return function(e,t,r,a){var o=jr(e,t),i=function(e){var t,r=e.aggregate,a=e.aggregateFieldType,o=e.filter,i=e.table,n=e.sumfield,l=e.direction,s=e.chart_title||e.title,d=null===(t=e.report_source)||void 0===t?void 0:t.value,u=e.source_type;return{decimalPrecision:parseInt(e.decimal_precision,10),sourceType:u,reportSource:d,chartTitle:s,aggregate:r,aggregateFieldType:a,filter:o,table:i,sumfield:n,autoScale:\"true\"===e.gauge_autoscale,lowerLimit:e.lower_limit,upperLimit:e.upper_limit,direction:l,from:parseInt(e.from,10),to:parseInt(e.to,10)}}(t),n=function(e){var t,r=e.decimalPrecision,a=e.sourceType,o=e.reportSource,i=e.chartTitle,n=e.aggregate,l=e.aggregateFieldType,s=e.filter,d=e.table,u=e.sumfield,c=e.autoScale,g=e.lowerLimit,p=e.upperLimit,m=e.direction,f=e.showHeader,v=e.showTitle,h=e.showBorder,y=e.from,_=e.to,b=(e.indexes,vt(s)),w=ht(s),T=Ft(void 0,r,l,n),S=gt(d),A=mt(S),F={applyDateRange:!1,bareBorder:!1,configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:w,id:S,isDatabaseView:!1,reportSourceSysId:o,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===a||0===a.length?\"table\":a,tableOrViewName:d}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,gaugeArcAngle:\"180\",groupBy:null,headerTitle:v?i:\"\",hideMatrixAggregate:!1,innerRadius:.7,maxValue:_,metrics:[tt({aggregateFunction:(null===(t=e.aggregate)||void 0===t?void 0:t.length)>0?e.aggregate:\"COUNT\",axisId:\"primary\",dataSource:S,id:A},T)],minValue:y,newReporting:!1,numberOfPeriods:3,period:\"M\",rangesConfig:{},scoreLabel:\"none\",scoreType:null,showAbsolutePeriod:!1,showBorder:h,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:f,showHeaderSeparator:!1,showLabelFirst:!1,showMaximumRange:!1,showMetricLabel:!1,showRangeLabels:!1,showRangeLimit:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,showZero:!0,sortByOrder:b.sortByOrder,telemetry:\"null\",trendBy:null,valueLabelSize:\"md\",wrapTitle:!1};return c&&(F.minValue=0,F.maxValue=null),u&&\"COUNT\"!==n&&\"\"!==u&&(F.metrics[0].aggregateField=u),(null==p?void 0:p.length)>0&&g.length>0&&(F.rangesConfig={data:[{label:\"Lower Limit\",maxValue:g,order:0},{label:\"Upper Limit\",maxValue:p,minValue:g,order:1},{minValue:p,order:2}],type:\"maximize\"===m?\"red_to_green\":\"green_to_red\"}),F}(tt(i,{d:e,indexes:r},_r(a)));return!n||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,n),{component_id:f,component_props:n})}(e,i,m,h);case V:return function(e,t,r,a){var o=jr(e,t),i=function(e,t){var r,a,o,i=gt(e.table),n=mt(i),l={type:\"default\"};if(e.upper_limit&&\"\"!==e.upper_limit&&e.lower_limit&&\"\"!==e.lower_limit){var s=y,d=_;\"minimize\"!==e.direction&&(s=_,d=y);var u=parseInt(e.upper_limit,10);l={type:\"singleColor\",values:[{color:\"fec1eb7b9f5c73001bb9baac757fcf6c\",metric:n,rules:[{operator:\"<\",order:100,color:s,value1:parseInt(e.lower_limit,10)},{operator:\"<\",order:200,color:\"65b30254a9fe3dba00b44ce0710382b3\",value1:u},{operator:\">=\",order:300,color:d,value1:u}]}]}}var c=Ft(JSON.parse(e.formatting_configuration||\"{}\"),parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregate,e.type);return{applyDateRange:!1,bareBorder:!1,colorConfig:l,configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:ht(e.filter),reportSourceSysId:null===(r=e.report_source)||void 0===r?void 0:r.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:i,dataCategories:[\"trend\",\"group\",\"simple\"]}],dateFormat:\"default\",description:\"\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,followFilters:!0,groupBy:null,headerTitle:e.showTitle?e.title:\"\",hideMatrixAggregate:!1,innerRadius:.7,metrics:[tt({dataSource:i,id:n,aggregateFunction:(null===(a=e.aggregate)||void 0===a?void 0:a.length)>0?e.aggregate:\"COUNT\",aggregateField:null!==(o=e.aggregate)&&void 0!==o&&o.startsWith(\"COUNT\")?void 0:e.sumfield,axisId:\"primary\"},c)],minValue:\"true\"!==e.gauge_autoscale&&e.from&&\"\"!==e.from?e.from:0,maxValue:\"true\"!==e.gauge_autoscale&&e.to&&\"\"!==e.to?e.to:void 0,newReporting:!1,numberOfPeriods:3,period:\"M\",scoreType:null,showAbsolutePeriod:!1,showBorder:e.showBorder,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:e.showHeader,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,showZero:!0,sortByOrder:\"desc\",telemetry:\"null\",trendBy:null,valueLabelSize:\"md\",wrapTitle:!1}}(tt(t,_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_id:\"63f050cf050137731a828878839e0b33\",component_props:i})}(e,i,m,h);case\"bubble\":return function(e,t,r,a){var o=jr(e,t);if((null==t?void 0:t.aggregate)===ct)return e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"<b>Unsupported Aggregation:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==t?void 0:t.type,\"</span> report because Standard Deviation aggregation is not supported.\"))});var i=function(e,t,r){var a,o,i=gt(t.table),n=mt(i),l=Ft(\"\"===t.formatting_configuration?\"{}\":t.formatting_configuration);switch(t.legend_horizontal_alignment){case\"right\":case\"left\":o=t.legend_horizontal_alignment;break;default:o=\"bottom\"}var s=vt(t.filter);return{additionalGroupByConfig:[],applyDateRange:!1,bareBorder:!1,colorConfig:{type:\"default\"},contextMenuActions:[],dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:ht(t.filter),id:i,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"table\",tableOrViewName:t.table}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:[{categoryIndex:0,disableRanges:!1,groupBy:[{dataSource:i,groupByField:t.column,isChoice:!1,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1},{categoryIndex:1,disableRanges:!1,groupBy:[{dataSource:i,groupByField:t.row,isChoice:!0,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1},\"\"!==t.field&&t.field?{categoryIndex:2,disableRanges:!1,groupBy:[{dataSource:i,groupByField:t.field,isChoice:!0,isPaBucket:!1,isRange:!1}],hideZeroValues:!1,maxNumberOfGroups:10,showOthers:\"true\"===t.others,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\"}:{disableRanges:!1}],hideMatrixAggregate:!1,legendPosition:o,metrics:[tt({aggregateFunction:(null===(a=t.aggregate)||void 0===a?void 0:a.length)>0?t.aggregate:\"COUNT\",aggregateField:\"COUNT\"!==t.aggregate?t.sumfield:void 0,axisId:\"primary\",dataSource:i,id:n},l)],newReporting:!1,numberOfPeriods:3,noDebounce:!1,period:\"M\",scoreType:null,showAbsolutePeriod:!1,showAdditionalGroupBySelector:!1,showBorder:!0,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:t.showHeader,headerTitle:t.showTitle?t.title:\"\",showHeaderSeparator:!1,showLegend:\"true\"===t.show_legend,showMaximumRange:!1,showMetricLabel:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:s.sortBy,sortByOrder:s.sortByOrder,telemetry:null,wrapTitle:!1}}(0,tt(t,_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_id:\"50dbc52a13c8b4691f7c60e0246bf28c\",component_props:i})}(e,i,m,h);case\"calendar\":return function(e,t,r,a){var o,i,n=jr(e,t),l={table:(o=tt(t,_r(a))).table,reportSource:null===(i=o.report_source)||void 0===i?void 0:i.value,encodedQuery:o.filter,startDateField:o.trend_field,endDateField:\"\",eventDisplayFields:Jr(o.field_list),componentTitle:o.title,followFilters:!0,showFilterOverview:!0,showDescription:!0,componentDescription:\"\",viewType:\"MONTH\",eventColor:\"\",filterConfigurations:[]};return!l||n?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,l),{component_id:v,component_props:l})}(e,i,m,h);case z:return function(e,t,r,a){var o=jr(e,t),i=wr(t);if((null==i?void 0:i.aggregateType)===ct)return e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"<b>Unsupported Aggregation:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==t?void 0:t.type,\"</span> report because Standard Deviation aggregation is not supported.\"))});var n=function(e){var t=kt(e);if(t)return t.extensionType=\"bar\",t.legendExpandToFit=!1,t}(tt(i,{d:e,indexes:r},_r(a)));return!n||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,n),{component_id:l,component_props:n})}(e,i,m,h);default:return e.migratingFromJava&&h?rt(i,h):zt(e,{static_content:q(\"<b>Unknown report type:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==i?void 0:i.type,\"</span> report because there is no mapping.\"))})}}(i,h,b,w);S&&S.component_id!==m&&S.component_id!==e&&Zt(h,b,S);var A=Ke(Y,h.type);return S&&S.component_id!==m&&S.component_id!==e&&A&&function(e,t,r,a,o){var i,n,l,s,d;if(null!=e&&null!==(i=e.report_drilldown)&&void 0!==i&&i.value){var u,c,g,p,m=null==e||null===(n=e.report_drilldown)||void 0===n?void 0:n.value,f=null===(l=r.sys_id[m])||void 0===l?void 0:l[0],v=Wr(a,f,r,o);u=t,c=null==t||null===(s=t.metrics)||void 0===s||null===(d=s[0])||void 0===d?void 0:d.id,(g=v).component_props.label=null===(p=g.component_props)||void 0===p?void 0:p.headerTitle,u.chartInteractionEnabled=!0,u.chartInteractionAction=\"drillDownToChart\",u.chartToChart={},u.chartToChart[c]={macroponentId:g.component_id,properties:g.component_props}}}(h,S.component_props,b,i,w),S},Qr=function Qr(e,t,r,a){var o,n=kr(e,t,r,a);if(n)return n;switch(null==t?void 0:t.type){case 6:case\"6\":return\"true\"!==(null===(o=e.featureFlags)||void 0===o?void 0:o.cascadingFilter)&&e.migratingFromJava?Qt(Ze)(e,t,r,a):function(e,t,r,a){var o,n,l,s,d,u,c=void 0!==r.filter_reference[t.sys_id]&&r.filter_reference[t.sys_id].length>0?r.filter_reference[t.sys_id][0]:{},g=cr(c,e,r);if(!g)return unsupportedFilterMigration(e,t,r,void 0);g.cascading_filter=c,g.cascading_filter_target=r.filter_cascading_target[g.cascading_filter.sys_id],g.child_filters=[],g.filterCanvasOrder={};for(var p=g.cascading_filter.sys_id,m=0;r.filter_cascading[p];){var f;g.filterCanvasOrder[p]=m,m++;var v=r.filter_cascading[p][0];v.component_id=i;var h=v.sys_id,y=!(null!==(f=r.filter_cascading[h])&&void 0!==f&&f.length||\"true\"!==t.allow_extended_table&&!0!==t.allow_extended_table);v.component_props=cr(v,e,r,y),g.child_filters.push(v),p=h}g.filterCanvasOrder[p]=m,g.targets||(g.targets=[]);var _=null===(o=g.child_filters)||void 0===o||null===(n=o.filter(function(e){return e.parent.value===g.cascading_filter.sys_id})[0])||void 0===n?void 0:n.table,b=null===(l=g.child_filters)||void 0===l||null===(s=l.filter(function(e){return e.parent.value===g.cascading_filter.sys_id})[0])||void 0===s?void 0:s.conditions,w=null===(d=g.child_filters)||void 0===d||null===(u=d.filter(function(e){return e.parent.value===g.cascading_filter.sys_id})[0])||void 0===u?void 0:u.cascading_filter_reference_field;return g.targets.push(sr(_,\"\",w,\"\",\"reference\",b)),g.child_filters.forEach(function(e){if(0===e.component_props.targets.length){var t,r,a;e.component_props.targets=[];var o=null===(t=g.child_filters.filter(function(t){return t.parent.value===e.sys_id})[0])||void 0===t?void 0:t.table,i=null===(r=g.child_filters.filter(function(t){return t.parent.value===e.sys_id})[0])||void 0===r?void 0:r.cascading_filter_reference_field,n=null===(a=g.child_filters.filter(function(t){return t.parent.value===e.sys_id})[0])||void 0===a?void 0:a.conditions;e.component_props.targets.push(sr(o,\"\",i,\"\",\"reference\",n))}}),{component_id:i,component_props:g}}(e,t,r);default:return vr(e,t,r)}};function Zr(e){return Zr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Zr(e)}function Xr(e,t,r){return t=function(e){var t=function(e,t){if(\"object\"!=Zr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,\"string\");if(\"object\"!=Zr(a))return a;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==Zr(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kr=(Xr(qr={},$,function(e,t,r,a){return Wr(e,t,r,a)}),Xr(qr,Je,function(e,t,r,a){return Kr[$](e,t,r,a)}),Xr(qr,te,function(e,t,r){return Nr(e,t,r)}),Xr(qr,ee,function(e,t,r,a){return Dr(e,t,r,a)}),Xr(qr,re,function(e,t,r,a){return Kr[ee](e,t,r,a)}),Xr(qr,oe,function(e,t,r,a){return Kr[ee](e,t,r,a)}),Xr(qr,ie,function(e,t,r,a){return Kr[re](e,t,r,a)}),Xr(qr,ue,Qt(Ze)),Xr(qr,ce,Qt(Ze)),Xr(qr,ge,Qr),Xr(qr,pe,Qr),Xr(qr,me,Qr),Xr(qr,fe,Qr),Xr(qr,ve,Qr),Xr(qr,he,Qt(Ze)),Xr(qr,ye,Qt(Ze)),Xr(qr,ae,function(e,t,r,a){return\"true\"===(null==t?void 0:t.is_compare_chart)?e.migratingFromJava&&a?rt(t,a):(e.migrationNotes.push(ot({message:at(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),Wt(e,t)):Kr[re](e,t,r,a)}),Xr(qr,Z,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,X,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,ne,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,le,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,se,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,_e,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,be,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,we,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Te,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Se,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ae,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Fe,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ce,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Re,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ie,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Oe,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,xe,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ne,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Be,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ee,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Pe,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,ke,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,De,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Me,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Le,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ge,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ue,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,He,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,je,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ve,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,ze,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ye,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,qe,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Q,zt),qr);function $r(r){var a=[ue,ce,ge,pe,me,fe,ve,he,ye],o=[le,ae,$,Je,ee,re,oe,ie],n=[Z,Q,X],l=[\"4ffa0563c0a80006004a70868bf1dc6c\",\"5003ffe3c0a80006008c5655e98bf520\",\"50578ef9c0a80006005ee11e0d61cb8f\",\"4ffb9d1ec0a8000600198cd7a8117d25\"];return function(s,d,u,c){var g,p,m,f,v,h=W(null==c||null===(g=c.type)||void 0===g?void 0:g.value,null==c||null===(p=c.renderer)||void 0===p?void 0:p.value,null==d?void 0:d.type);return\"-2\"===(null==c||null===(m=c.sys_id)||void 0===m?void 0:m.value)&&-1!==a.indexOf(h)?{component_id:i,component_props:{filterName:\"Label\",filterComponentType:\"singleselect\",dateFilterView:\"calendar-reldates\",sort:\"ASC\",filterElementType:\"pill\",isShowSelectedValueInPill:!0,filterElementLayout:\"vertical\",enableResetToDefault:!1,enableClearFilter:!0,maxElements:500,filterConfigurations:\"@state.parFilters\",contextMenuActions:[],noDebounce:!0,selectedElements:[]}}:\"-1\"===(null==c||null===(f=c.sys_id)||void 0===f?void 0:f.value)&&-1!==o.indexOf(h)?{component_id:t,component_props:{configVersion:\"23.0.0-ci-SNAPSHOT\",filterConfigurations:\"@state.parFilters\",scoreSize:\"md\",headingPosition:\"top\",sparklineStyle:\"area\",scoreIcon:\"\",iconStyle:\"background\",showScoreDate:!1,useRelativeScoreTime:!1,showScoreUpdateTime:!1,showZero:!0,newReporting:!0,showHeader:!0,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,showBorder:!0,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,sortByOrder:\"desc\",showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",groupBy:null,trendBy:null}}:-1!==l.indexOf(null==c||null===(v=c.sys_id)||void 0===v?void 0:v.value)&&-1!==n.indexOf(h)?{component_id:e,component_props:{}}:r.apply(this,[s,d,u,c])}}for(var ea in Kr)\"function\"==typeof Kr[ea]&&(Kr[ea]=$r(Kr[ea]));var ta=function ta(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;switch(null==e?void 0:e.type){case t:case\"single_score\":return ra(e,r,{minHeight:7});case\"score\":if(\"template1\"===e.template||\"\"===e.template||\"template2\"===e.template)return ra(e,r,{minHeight:14});break;case v:case\"calendar\":return ra(e,r,{minHeight:62,minWidth:32})}return ra(e,r,{childComponentCount:a+1,order:o})},ra=function ra(e,t,r){var a,o,i,n=r.xFactor,l=void 0===n?4:n,s=r.yFactor,d=void 0===s?4:s,u=r.hFactor,c=void 0===u?1.7:u,g=r.wFactor,p=void 0===g?4:g,m=r.minHeight,f=r.minWidth,v=r.childComponentCount,h=void 0===v?1:v,y=r.order,_=void 0===y?0:y;function b(){var r;return h<1&&(h=1),(null!==(r=null==e?void 0:e.pane)&&void 0!==r?r:t).height*c/h}var w={x:(null!==(a=null==e?void 0:e.pane)&&void 0!==a?a:t).posx*l,y:(null!==(o=null==e?void 0:e.pane)&&void 0!==o?o:t).posy*d+_*Math.round(b()),h:b(),w:(null!==(i=null==e?void 0:e.pane)&&void 0!==i?i:t).width*p};return m&&w.h<m&&(w.h=m),f&&w.h<f&&(w.w=f),w};function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}global.window={},this.run=function(e,t,r,a){t.migrationNotes=[],\"true\"!==(null==a?void 0:a.translatedLogs)&&t.migrationNotes.push(\"<b>Dashboard Migration Logs:</b>\"),t.name&&\"\"!==t.name||(t.name=\"Untitled\"),t.migratingFromJava=r,t.featureFlags=a,function(e){var t,r,a;(null===(t=e.restrict_to_roles)||void 0===t?void 0:t.length)>0&&!e.migratingFromJava&&e.migrationNotes.push(ot({message:ar,level:1,originalArtifactSysId:e.sys_id,artifactTable:e.sys_table_name,featureFlags:e.featureFlags})),(null===(r=e.group)||void 0===r||null===(a=r.value)||void 0===a?void 0:a.length)>0&&!e.migratingFromJava&&e.migrationNotes.push(ot({message:or,level:1,originalArtifactSysId:e.sys_id,artifactTable:e.sys_table_name,featureFlags:e.featureFlags}))}(t);var o=e.dashboard[t.sys_id],n=\"\";t.migratingFromJava||(n=\"untitled\"),void 0===o&&(o=[]);var l=o.filter(function(e){return\"pa_m2m_dashboard_tabs\"===e.sys_table_name}).sort(function(e,t){return e.order-t.order}).map(function(r){var a,o,i,l,s,d,u,c,g,p=null===(a=r.tab)||void 0===a?void 0:a.value,m=null===(o=e.sys_id[p])||void 0===o?void 0:o[0];m.name=m.name.replace(b,\"\"),console.info(\"Found tab\",p,m);var f,v,h,y,_,w=null===(i=e.sys_id[null==m||null===(l=m.page)||void 0===l?void 0:l.value])||void 0===i?void 0:i[0];f=null!=m&&null!==(s=m.canvas_page)&&void 0!==s&&s.value?null===(v=e.sys_id[null==m||null===(h=m.canvas_page)||void 0===h?void 0:h.value])||void 0===v?void 0:v[0]:null===(y=e.legacy_page[null==m||null===(_=m.page)||void 0===_?void 0:_.value])||void 0===y?void 0:y[0];var T=null!==(d=null===(u=e.grid_canvas[null===(c=f)||void 0===c?void 0:c.sys_id])||void 0===u?void 0:u.filter(function(e){return\"sys_grid_canvas_pane\"===e.sys_table_name}))&&void 0!==d?d:[];console.info(\"Found\",T.length,\"panes\",\"grid_canvas\",e.grid_canvas[null===(g=f)||void 0===g?void 0:g.sys_id],\"canvas\",f);var S=T.map(function(r){var a,o,i,l,s,d,u,c,g,p,m,f,v=\"sys_portal\"===r.sys_table_name?r.sys_id:null==r||null===(a=r.portal_widget)||void 0===a?void 0:a.value;if(v){console.info(\"Migrating portal_widget\",v);var h=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(function(t,r){return t[r[e]]=r,t},{})}(\"name\",e.portal_section[v]);if(h&&0!==Object.keys(h).length){!function(e,t){var r;null===(r=t.sys_id)||void 0===r||r.value,(t.title_color||t.header_color)&&e.migrationNotes.push(ot({message:ir,level:1,originalArtifactSysId:e.sys_id,artifactTable:e.sys_table_name,featureFlags:e.featureFlags}))}(t,h),h.portal_widget_sys_id=v;var y,_=null===(o=h.sys_id)||void 0===o?void 0:o.value;if(!_&&null!==(i=h.report_id)&&void 0!==i&&i.value?_=null===(y=h.report_id)||void 0===y?void 0:y.value:_?\"-1\"===_&&t.migrationNotes.push(ot({message:at(\"This content was not configured and is migrated as an unconfigured visualization.\"),level:2,originalArtifactSysId:r.sys_id,artifactTable:r.sys_table_name,tooltip:at(\"Configure this content in the Visualization Designer.\"),debugInfo:\"portal_widget_sys_id: \".concat(v),featureFlags:t.featureFlags})):t.migrationNotes.push(ot({message:at(\"The dashboard has a missing layout configuration record.\"),level:2,originalArtifactSysId:r.sys_id,artifactTable:r.sys_table_name,debugInfo:\"portal_widget_sys_id: \".concat(v),featureFlags:t.featureFlags})),console.info(\"Migrating pa_widget\",_),e.overrideMap&&e.overrideMap[_]){var b,w=e.overrideMap[_][0],T=w.sys_id,S=w.properties,A=w.macroponent,F=w.sys_domain,C=w.sys_domain_path,R=w.sys_name,I=ta({type:null==A?void 0:A.value},r),O=n;R&&(O=R),console.info(\"Got override for widget\",_,e.overrideMap[_]);try{b=\"string\"==typeof S?JSON.parse(S):S}catch(e){b=S}var x={sys_id:v,pane:r,domain:{domainSysId:null==F?void 0:F.value,domainPath:C},migrationRaw:tt(I,{stored_component_sys_id:T,component_props:b,component_id:null==A?void 0:A.value,portal_sys_id:v,stored_component_name:O}),widget_type:\"stored_component\",_override:e.overrideMap[_][0]};return function(e,t,r){for(var a=[$t,Vt],o=t,i=0;i<a.length;i++)o=a[i](e,o,r);return o}(t,x,h)}var N,B,E=null===(l=e.sys_id[_])||void 0===l?void 0:l[0];E||console.error(\"No widget found for preferences, trying to migrate anyway\",_),null!==(s=h.type)&&void 0!==s&&s.value&&(null==E?void 0:E.type)!==(null===(d=h.type)||void 0===d?void 0:d.value)&&\"pa_widgets\"===(null==E?void 0:E.sys_table_name)&&\"pa_widgets\"!==(null===(u=h.type)||void 0===u?void 0:u.value)&&(console.warn(\">> [CORRUPT PREFERENCES] Preference type: \",null===(N=h.type)||void 0===N?void 0:N.value,\" does not match widget type: \",E.type,\" Replacing preferences type with widget type for widget: \",E.sys_name),t.migrationNotes.push(\"[CORRUPT PREFERENCES] Preference type: \".concat(null===(B=h.type)||void 0===B?void 0:B.value,\" does not match widget type: \").concat(E.type,\". Replacing preferences type with widget type for widget: \").concat(E.sys_name)),h.type.value=E.type);var P,k,D=Kr[W(null==h||null===(c=h.type)||void 0===c?void 0:c.value,null==h||null===(g=h.renderer)||void 0===g?void 0:g.value,null==E?void 0:E.type)];if(!D&&(null!=E&&E.type||null!=h&&null!==(p=h.type)&&void 0!==p&&p.value||null!=h&&null!==(m=h.renderer)&&void 0!==m&&m.value)&&(D=Yt),D){var M,L,G,U,H,J,j,V,z,Y;try{Y=D(t,E,e,h)}catch(e){if(!t.migratingFromJava||!h)throw e;Y=rt(E,h)}var q,Q,Z,X,K,$,ee,te,re,ae,oe,ie,ne=ta(E,r,null===(M=Y)||void 0===M||null===(L=M.component_props)||void 0===L||null===(G=L.child_filters)||void 0===G?void 0:G.length,null===(U=Y)||void 0===U||null===(H=U.component_props)||void 0===H||null===(J=H.filterCanvasOrder)||void 0===J?void 0:J[null===(j=Y)||void 0===j||null===(V=j.component_props)||void 0===V||null===(z=V.cascading_filter)||void 0===z?void 0:z.sys_id]);return E?{sys_id:v,pane:r,widget:tt(E,{pane:r}),domain:{domainSysId:null==E||null===(q=E.sys_domain)||void 0===q?void 0:q.value,domainPath:null==E?void 0:E.sys_domain_path},migrationRaw:tt(ne,Y,{originalSysId:null==E?void 0:E.sys_id,component_props:null===(Q=Y)||void 0===Q?void 0:Q.component_props,widget_type:\"\".concat(W(null==h||null===(Z=h.type)||void 0===Z?void 0:Z.value,null==h||null===(X=h.renderer)||void 0===X?void 0:X.value,null==E?void 0:E.type),\"###\").concat(null==E?void 0:E.type),stored_component_name:null!==(K=null==E?void 0:E.sys_name)&&void 0!==K?K:n}),migrationRawAdditionalComponents:null===($=Y)||void 0===$||null===(ee=$.component_props)||void 0===ee||null===(te=ee.child_filters)||void 0===te?void 0:te.map(function(e,t){var a,o,i,l,s,d,u,c,g,p;return{sys_id:v,pane:r,widget:tt(E,{pane:r}),domain:{domainSysId:null==E||null===(a=E.sys_domain)||void 0===a?void 0:a.value,domainPath:null==E?void 0:E.sys_domain_path},migrationRaw:tt(ta(E,r,null===(o=Y)||void 0===o||null===(i=o.component_props)||void 0===i||null===(l=i.child_filters)||void 0===l?void 0:l.length,null===(s=Y)||void 0===s||null===(d=s.component_props)||void 0===d||null===(u=d.filterCanvasOrder)||void 0===u?void 0:u[null==e?void 0:e.sys_id]),Y,{originalSysId:null==e?void 0:e.sys_id,component_props:null==e?void 0:e.component_props,widget_type:\"\".concat(W(null==h||null===(c=h.type)||void 0===c?void 0:c.value,null==h||null===(g=h.renderer)||void 0===g?void 0:g.value,null==E?void 0:E.type),\"###\").concat(null==E?void 0:E.type),stored_component_name:null!==(p=null==e?void 0:e.sys_name)&&void 0!==p?p:n})}})}:{sys_id:v,pane:r,widget:{pane:r,preferences:h},migrationRaw:tt(ne,Y,{originalSysId:v,component_props:null===(re=Y)||void 0===re?void 0:re.component_props,preferences:h,widget_type:\"\".concat(W(null==h||null===(ae=h.type)||void 0===ae?void 0:ae.value,null==h||null===(oe=h.renderer)||void 0===oe?void 0:oe.value,null==E?void 0:E.type),\"###\").concat(null==E?void 0:E.type),stored_component_name:null!==(ie=null==E?void 0:E.sys_name)&&void 0!==ie?ie:n})}}if(console.error(\"Found not transformer for\",W(null==h||null===(P=h.type)||void 0===P?void 0:P.value,null==h||null===(k=h.renderer)||void 0===k?void 0:k.value,null==E?void 0:E.type),_),0===Object.keys(h).length){for(var le in e.portal_section)Object.keys(e.portal_section[le]).length;t.migrationNotes.push(ot({message:at(\"The dashboard has missing preferences configuration.\"),level:2,originalArtifactSysId:r.sys_id,artifactTable:r.sys_table_name,debugInfo:\"portal_widget_sys_id: \".concat(v),featureFlags:t.featureFlags}))}return{sys_id:v,domain:{domainSysId:null==E||null===(f=E.sys_domain)||void 0===f?void 0:f.value,domainPath:null==E?void 0:E.sys_domain_path},pane:r,widget:E,preferences:h}}}else console.info(\">>>> Dashboard\",t.name,\"has issue: Missing widget\",t.sys_id,v,\"You can probably ignore this if the dashboard is a duplicate\")}).filter(function(e){return e});return console.log(\">>> Migrated\",null==S?void 0:S.length,\"widgets for dashboard\",null==t?void 0:t.name,\"tab\",null==m?void 0:m.name),{tab:m,page:w,widgets:S}}),s=o.filter(function(e){return\"pa_m2m_dashboard_sources\"===e.sys_table_name}).map(function(r,a){var o,n,l,s,d,u=(null===(o=e.sys_id[null==r||null===(n=r.breakdown_source)||void 0===n?void 0:n.value])||void 0===o?void 0:o[0])||{},c=(e.dimension[u.sys_id]||[]).reduce(function(e,t){return e.some(function(e){return e.sys_id===t.sys_id})||e.push(t),e},[]),g=[],p=function(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return aa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aa(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e14){throw _e14},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n7=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n7=e.done,e},e:function e(_e15){l=!0,i=_e15},f:function f(){try{_n7||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}(c);try{for(p.s();!(d=p.n()).done;){var m,f=d.value,v=null===(m=e.breakdown[f.sys_id])||void 0===m?void 0:m.filter(function(e){return\"pa_breakdown_mappings\"===e.sys_table_name});null!=v&&v.length&&(g=g.concat(v))}}catch(e){p.e(e)}finally{p.f()}var h=function(e,t,r){var a,o,i=e.uniqueBreakdowns.map(function(e){return{breakdownSysId:e.sys_id,breakdownType:e.type}}),n=r.indicator_breakdowns,l=[],s=nr(i);try{for(s.s();!(o=s.n()).done;){var d=o.value;fr(d,n)&&l.push(d)}}catch(e){s.e(e)}finally{s.f()}var u=e.uniqueMappings.map(function(e){return{mappingTable:e.facts_table,field:e.field,fieldType:e.fieldType}}),c=e.dimension,g=c.name,p=c.facts_table,m=e.dashboardBreakdown,f=m.sys_id,v=(m.sys_name,e.linkedInteractiveFilter),h=gr({name:g,sys_id:f});function y(e){switch(e){case\"1\":case 1:return\"AUTOMATED\";case\"2\":case 2:return\"MANUAL\";case\"3\":case 3:return\"EXTERNAL\"}}var _={breakdownSysId:null===(a=i[0])||void 0===a?void 0:a.breakdownSysId,breakdownSourceName:g,isChoice:p===st,type:y(i[0].breakdownType),factsTable:(null==p?void 0:p.length)>0?p:void 0,field:\"sys_id\",target:p};h.datasource=dr(_);var b,w=nr(u);try{for(w.s();!(b=w.n()).done;){var T=b.value;T.mappingTable&&(h.targets||(h.targets=[]),h.targets.push(sr(T.mappingTable,void 0,T.field,void 0,p===st?\"choice\":T.fieldType)))}}catch(e){w.e(e)}finally{w.f()}for(var S=0,A=l;S<A.length;S++){var F=A[S];h.targets||(h.targets=[]),_.breakdownSysId=F.breakdownSysId,_.type=y(F.breakdownType),h.targets.push(dr(_))}if(v){var C,R;h.targets||(h.targets=[]);var I,O,x=vr(t,v,r,void 0);x&&(null==x||null===(C=x.component_props)||void 0===C||null===(R=C.targets)||void 0===R?void 0:R.length)>0?null===(I=x.component_props)||void 0===I||null===(O=I.targets)||void 0===O||O.forEach(function(e){h.targets.push(e)}):t.migrationNotes.push(ot({message:at(\"This breakdown filter cannot be migrated. It can be configured manually in a new filter.\"),level:0,originalArtifactSysId:f,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}))}return h.filterComponentType=\"multiselect\",h.filterElementType=\"pill\",h}({dimension:u,uniqueBreakdowns:c,uniqueMappings:(g||[]).reduce(function(e,t){return e.some(function(e){return e.facts_table===t.facts_table&&e.field===t.field})||e.push(t),e},[]),linkedInteractiveFilter:(null===(l=e.sys_id[null==r||null===(s=r.publisher)||void 0===s?void 0:s.value])||void 0===l?void 0:l[0])||void 0,dashboardBreakdown:r},t,e);return h?{sys_id:\"\".concat(t.sys_id,\"-wbf-\").concat(a),x:6*a,y:0,h:4,w:6,component_id:i,component_props:h,can_edit:!0,widget_type:\"topLevelFilter###'1'\"}:(t.migrationNotes.push(ot({message:at(\"The dashboard breakdown filter cannot be migrated. It can be configured manually in a new filter.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:r.sys_table_name,debugInfo:\"Dimension name: \".concat(u.name)})),null)}).filter(function(e){return e});return console.info(\">>> Returning migrated dashboard\"),tt(t,{tabs:r?l:l.concat(rr(t,l.length)),topLevelFilters:s})};var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};var answer=[];var indexes=JSON.parse(this.indexes);var dashboards=JSON.parse(this.dashboards);for(var dashboardIncrement=0;dashboardIncrement<dashboards.length;dashboardIncrement++){var tempAnswer;try{this.result=this.run(indexes,dashboards[dashboardIncrement],this.doNotAddLogTab,JSON.parse(this.featureFlags||\"null\"));tempAnswer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){tempAnswer={hasError:true,error:e,logs:logWrapper}}answer.push(tempAnswer)}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"25306c86a33131108d80ad2f241e61f9","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-10-11 15:35:55","sys_name":"","sys_scope":"","macroponent":"","key":"dashboardBatchScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e={DAY:1,WEEK:2,MONTH:3,QUARTER:4,FQ:5,YEAR:6,FY:7,WEEK2DATE:8,MONTH2DATE:9,QUARTER2DATE:10,FQ2DATE:11,YEAR2DATE:12,FY2DATE:13,WEEK_PLUS:14,MONTH_PLUS:15,QUARTER_PLUS:16,FQ_PLUS:17,YEAR_PLUS:18,FY_PLUS:19},r=10,t=20,a=40,o=60,n=65,i=80,l=85,s={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},d=function d(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},c=(d(\"content_block_static\",\"com.glide.cms.RenderBlock\"),d(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),d(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),d(\"\",\"com.glide.ui.portal.RenderReport\"),d(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),u=(d(-1,\"com.glideapp.home.RenderHomepagePublishers\"),d(4,\"com.glideapp.home.RenderHomepagePublishers\"),d(c,\"com.glideapp.home.RenderHomepagePublishers\"),d(2,\"com.glideapp.home.RenderHomepagePublishers\"),d(3,\"com.glideapp.home.RenderHomepagePublishers\"),d(5,\"com.glideapp.home.RenderHomepagePublishers\"),d(6,\"com.glideapp.home.RenderHomepagePublishers\"),d(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),d(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glide.ui.portal.RenderDashboard\"),d(\"report\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glide.ui.portal.RenderJavascript\"),d(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),d(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),d(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),d(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),o=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(n)||(i=\"=\",n%1);){if((t=a.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,o+=i.charAt(63&r>>8-n%1*8)}return o.toString()});function m(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,n=arguments[1],i=0;i<o;i++){var l=a[i];if(r.call(n,l,i,a))return t?i:l}}var p=function p(e,r){return{text:e,vars:r}},v=function v(e){var r=e.message,t=e.level,a=e.tooltip,o=e.originalArtifactSysId,n=e.artifactTable,i=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,d={text:r,level:t,help:a,originSysId:o,hasNewArtifact:i,table:n,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?d:g(d)},g=function g(e){var r,t,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},f=\"sys_choice\",h=function h(e){return u(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},_=function _(e){return u(e+new Date().getTime()+1e8*Math.random())},y=/[0-9a-f]{32}/,b=function b(e){return{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=e?e:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}};function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=t){var a,o,n,i,l=[],s=!0,d=!1;try{if(n=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(a=n.call(t)).done)&&(l.push(a.value),l.length!==r);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=t[\"return\"]&&(i=t[\"return\"](),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,r)||R(e,r)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function T(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=R(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function R(e,r){if(e){if(\"string\"==typeof e)return A(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,r):void 0}}function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var I=function e(r,t,a){var o,n,i,l,s,d,c=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(s=r.breakdown)&&void 0!==s&&s.value&&(i=r.breakdown_level2.value),!l&&r.element&&(l=r.element_level2)):(null!==(d=r.breakdown)&&void 0!==d&&d.value&&(i=r.breakdown.value),!l&&r.element&&(l=r.element)),i&&l&&\"unmatched\"!==l){var u=r.indexes.sys_id[i][0],m=l;r.indexes.sys_id[u.dimension.value][0].facts_table===f&&y.test(l)&&(m=r.indexes.sys_id[m][0].value);var g,h={sysId:i,elementSysIds:[m]};\"true\"===r.manual_elements&&h.elementSysIds.concat(null===(g=r.indexes.widget_elements[r.sys_id])||void 0===g?void 0:g.map(function(e){return\"unassigned\"===e.element?c:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(h.elementsFilterSysId=r.elements_filter.value,h.elementSysIds=[]),a.breakdowns.push(h)}else if(null!==(o=r.breakdown)&&void 0!==o&&o.value){var _=r.indexes.sys_id[i][0],b=r.indexes.sys_id[_.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(b.facts_table===f||\"pa_buckets\"===b.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:i,elementSysIds:[c]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:i,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var T,R,A;r.indexes.widget_elements&&0!==(null!==(T=null===(R=r.indexes.widget_elements[r.sys_id])||void 0===R?void 0:R.length)&&void 0!==T?T:0)?a.breakdowns.push({sysId:i,elementSysIds:null===(A=r.indexes.widget_elements[r.sys_id])||void 0===A?void 0:A.map(function(e){return\"unassigned\"===e.element?c:e.element})}):r.dashboard.migrationNotes.push(v({message:p(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:i,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(b.facts_table===f||\"pa_buckets\"===b.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:i,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[c],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(n=r.breakdown_level2)&&void 0!==n&&n.value&&!t?e(r,!0,a):a};function S(e,r){if(null!=r&&r.value&&\"column\"===e)return\"vertical_bar\";switch(e){case\"column_total\":case\"column\":case\"stacked\":return\"bar\";default:return e}}function E(d){var c=m(Object.keys(e),function(r){return e[r]===parseInt(d,10)});switch(e[c]){case e.DAY:return{frequency:r,frequencyInterval:c,dateRange:s.HOURLY};case e.WEEK:case e.WEEK2DATE:case e.WEEK_PLUS:return{frequency:t,frequencyInterval:c,dateRange:s.MONTHLY};case e.MONTH:case e.MONTH2DATE:case e.MONTH_PLUS:return{frequency:a,frequencyInterval:c,dateRange:s.MONTHLY};case e.QUARTER:case e.QUARTER2DATE:case e.QUARTER_PLUS:return{frequency:o,frequencyInterval:c,dateRange:s.YEARLY};case e.FQ:case e.FQ2DATE:case e.FQ_PLUS:return{frequency:n,frequencyInterval:c,dateRange:s.YEARLY};case e.YEAR:case e.YEAR2DATE:case e.YEAR_PLUS:return{frequency:i,frequencyInterval:c,dateRange:s.YEARLY};case e.FY:case e.FY2DATE:case e.FY_PLUS:return{frequency:l,frequencyInterval:c,dateRange:s.YEARLY};default:return{frequency:r,frequencyInterval:\"\",dateRange:s.YEARLY}}}var x=function x(e){e.colorType;var r,t,a,o,n=e.colorPalette,i=e.chartColor,l=e.showDataLabel,d=(e.showLegend,e.showTotal),c=e.yAxisTitle,u=e.yAxisFrom,g=e.yAxisTo,y=e.sysId,R=e.indicator,A=(e.element,e.breakdown),x=e.aggregate,F=e.sort_direction,k=e.sort_on,P=(e.breakdown_level2,e.color_scheme,e.description),O=e.name,C=e.showTitle,B=e.showHeader,L=e.showBorder,Y=e.d,N=e.indexes,D=e.showTarget,M=e.showThresholds,H=e.showTrend,J=e.showConfidence,U=e.showForecast,q=e.showComments,z=e.chartType,j=e.label,Q=e.followElement,G=k,V=F,W=A.value,K=null===(r=N.sys_id[W])||void 0===r?void 0:r[0],Z=null===(t=N.sys_id[null==K||null===(a=K.dimension)||void 0===a?void 0:a.value])||void 0===t?void 0:t[0],X=null==Z?void 0:Z.facts_table,$=X===f,ee=\"pa_buckets\"===X;\"default\"===k&&(G=$?\"choice\":ee?\"bucket\":\"name\"),-1===[\"name\",\"value\",\"default\"].indexOf(k)&&(G=\"value\",V=\"desc\",Y.migrationNotes.push(v({message:p(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:y,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:Y.featureFlags})));var re=I(e);if(re.doMigration){var te,ae,oe=10;if(null!=x&&x.value){var ne=E(N.sys_id[null==x?void 0:x.value][0].interval);oe=ne.frequency,te=ne.frequencyInterval,ae=ne.dateRange}var ie=function(e,r){var t={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},a=function a(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),a=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(a,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))t.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){t.showAbsolutePeriod=!0,t.startTime=a(null==e?void 0:e.from),t.endTime=a(null==e?void 0:e.to);var o=new Date;new Date(t.startTime)>o&&!t.endTime?t.endTime=t.startTime:t.startTime&&!t.endTime?t.useCurrentDateForEnd=!0:!t.startTime&&t.endTime&&(t.showMaximumRange=!0,t.endTime=null)}else{t.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var n=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),i=m(Object.keys(s),function(e){return s[e]===n},!0),l=m(Object.keys(s),function(e){return s[e]===r},!0);t.period=i<l?r:n}return t}(e.timePeriod,ae),le={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",colorConfig:{type:\"default\"},configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[],dateFormat:\"default\",description:P,disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null==ie?void 0:ie.endTime,extensionType:S(z,A),filterConfigurations:\"@state.parFilters\",followFilters:!0,showFilterAsSeparateSeries:\"separate\"===e.multiple_elements_view,groupBy:[],headerTitle:C?O:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!1,hideYAxis2:!1,hideYAxis3:!1,hideYAxis4:!1,legendExpandToFit:!0,legendHorizontalAlignment:\"center\",legendPosition:\"bottom\",lineStrokeWidth:\"2\",metrics:[],filterPerMetric:[],newReporting:!1,numberOfPeriods:null==ie?void 0:ie.numberOfPeriods,period:null==ie?void 0:ie.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null==ie?void 0:ie.showAbsolutePeriod,useCurrentDateForEnd:null==ie?void 0:ie.useCurrentDateForEnd,showBorder:L,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:q,showConfidenceBand:J,showDataLabels:l,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:U,showForecastRange:!1,showGapPercentage:null,showHeader:B,showHeaderSeparator:!1,showLegend:!0,showLegendValue:!1,showMaximumRange:null==ie?void 0:ie.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:D,showThreshold:M,showTotalAggregate:!1,showTotalValue:d,showTrend:H,showXGrid:!0,showYGrid:!0,showContinuousLine:!1,sortBy:G,sortByOrder:V,startTime:null==ie?void 0:ie.startTime,telemetry:\"null\",trendBy:{},wrapTitle:!1,yAxis0Title:c,yAxis0To:g,yAxis0From:u,yAxisStyle:\"default\",allowChangeDateRange:!1,showDateRangeByDefault:!1},se=h(null==R?void 0:R.value),de=_(se),ce=N.sys_id[null==R?void 0:R.value][0],ue={},me={metricId:de,dataSourceId:se};ue[\"\".concat(null==R?void 0:R.value,\":\").concat(JSON.stringify(re.breakdowns))]=me,le.dataSources=[{allowRealTime:\"1\"===ce.type,allowTotalValue:\"1\"===ce.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:se,indicatorType:ce.type,isScriptedIndicator:!1,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:re.breakdowns,indicator:null==R?void 0:R.value}}],re.groupBy&&(re.groupBy.dataSource=se,re.groupBy.metric=de,re.groupBy.isChoice=$,re.groupBy.isPaBucket=ee,le.groupBy=[{disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[re.groupBy],hideZeroValues:!1}]),le.metrics=[{dataSource:se,id:de,aggregateIndicator:null!==(o=null==x?void 0:x.value)&&void 0!==o?o:\"\",frequency:oe,frequencyInterval:te,label:j,numberFormat:b(parseInt(ce.precision,10)),chartType:S(z),axisId:\"primary\"}],le.filterPerMetric=[{metricId:de,value:Q}],\"column\"==z&&null!=A&&A.value?le.dataLabelPosition=\"middle\":le.trendBy={trendByFields:[{field:\"anything\",metric:de}],trendByFrequency:\"date\",trendByMinuteInterval:null};var pe=function(e,r,t,a,o,n,i){var l,s=null!==(l=e.widget_indicators[r])&&void 0!==l?l:[];s.sort(function(e,r){return parseInt(e.order,10)-parseInt(r.order,10)});try{var d,c=T(s);try{for(c.s();!(d=c.n()).done;){var u,m,g=d.value;if(\"true\"!==g.follow_element){var f=null===(u=g.indicator)||void 0===u?void 0:u.value;e.sys_id[f][0].name,n.migrationNotes.push(v({message:p(\"This visualization is in compatibility mode because the additional indicators follow elements feature is not supported.\"),level:1,originalArtifactSysId:r,artifactTable:null===(m=e.sys_id[r][0])||void 0===m?void 0:m.sys_table_name,featureFlags:n.featureFlags}))}}}catch(e){c.e(e)}finally{c.f()}}catch(e){console.error(\"ERROR: Error occurred while handling widget indicators for widget: \".concat(i||r))}var y,w=!1,R={},A=T(s);try{for(A.s();!(y=A.n()).done;){var x,F,k,P=y.value,O=I({breakdown:P.breakdown,breakdown_level2:P.breakdown_level2,element:P.element,element_level2:P.element_level2,indexes:e,elements_filter:P.elements_filter,manual_elements:P.manual_elements}),C=void 0,B=void 0,L=e.sys_id[null===(x=P.indicator)||void 0===x?void 0:x.value][0];if(o[\"\".concat(null===(F=P.indicator)||void 0===F?void 0:F.value,\":\").concat(JSON.stringify(O.breakdowns))]){var Y,N;C=o[\"\".concat(null===(Y=P.indicator)||void 0===Y?void 0:Y.value,\":\").concat(JSON.stringify(O.breakdowns))].dataSourceId,B=o[\"\".concat(null===(N=P.indicator)||void 0===N?void 0:N.value,\":\").concat(JSON.stringify(O.breakdowns))].metricId}else{var D,M,H,J,U;C=h(null===(D=P.indicator)||void 0===D?void 0:D.value),B=_(C),o[null===(M=P.indicator)||void 0===M?void 0:M.value]={metricId:B,dataSourceId:C},t.dataSources.push({allowRealTime:\"1\"===L.type,allowTotalValue:\"1\"===L.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:C,indicatorType:L.type,isScriptedIndicator:!1,label:L.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:O.breakdowns,indicator:null===(H=P.indicator)||void 0===H?void 0:H.value}});var q=\"primary\";\"true\"===P.second_y_axis&&(t.yAxis1Title=P.label,t.yAxis1Position=\"right\",t.yAxis1From=\"\",t.yAxis1To=\"\",q=\"axis1\");var z=10,j=void 0,Q=null!==(J=null===(U=P.aggregate)||void 0===U?void 0:U.value)&&void 0!==J?J:\"\";if(Q){var G,V=E((null===(G=e.sys_id[Q])||void 0===G?void 0:G[0]).interval);z=V.frequency,j=V.frequencyInterval}var W={dataSource:C,id:B,aggregateIndicator:Q,frequency:z,frequencyInterval:j,label:P.label,numberFormat:b(parseInt(L.precision,10)),chartType:S(P.chart_type),axisId:q},K={field:\"anything\",metric:B};\"stacked\"===P.chart_type&&(w=!0),t.metrics.push(W),t.filterPerMetric.push({metricId:B,value:\"true\"===(null==P?void 0:P.follow_element)}),t.trendBy.trendByFields.push(K)}O.groupBy&&(O.groupBy.dataSource=C,O.groupBy.metric=B,t.groupBy.push({disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[O.groupBy],hideZeroValues:!1})),\"\"!==P.color&&null!==(k=P.color)&&void 0!==k&&k.value&&(R[B]=P.color.value)}}catch(e){A.e(e)}finally{A.f()}return(t.metrics.length>1||t.groupBy.length>0)&&(t.showTarget=!1,t.showTrend=!1,t.showConfidenceBand=!1,t.showThreshold=!1,t.showComment=!1),{hasStackedColumn:w,widgetColors:R}}(N,y,le,0,ue,Y,O),ve=pe.hasStackedColumn,ge=pe.widgetColors;if(le.filterPerMetric.some(function(e){return null==e?void 0:e.value})||(le.followFilters=!1,le.showFilterIcon=!1),ve&&(le.extensionType=\"bar\",le.chartVariation=\"stacked\"),n&&n.length>0&&0===Object.keys(ge).length)le.colorConfig={type:\"palette\",palette:n};else if(le.metrics.length>1){var fe,he;fe=n&&n.length>0?w(null!==(he=N.sys_id[n])&&void 0!==he?he:[],1)[0]:w(N.sys_id[\"68d08c72d700210096614251ce61039e\"],1)[0];for(var _e=[],ye=0;ye<32;ye++){var be=\"color_\".concat(ye+1);if(\"\"===fe[be])break;_e.push(fe[be].value)}var we=0;le.colorConfig={type:\"colorsPerMetric\",values:le.metrics.map(function(e){var r;return e.id===de&&null!=i&&i.value?r=i.value:ge[e.id]?r=ge[e.id]:(r=_e[we%_e.length],we+=1),{metric:e.id,color:r}})}}else i&&1===le.metrics.length&&(le.colorConfig={type:\"singleColor\",values:[{color:i.value,metric:de}]});return le}Y.migrationNotes.push(v({message:p(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:y,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:Y.featureFlags}))},F=function F(e){switch(e.extensionType){case\"trend\":case\"bar\":return\"2bd5dc19a7ad083941b7c992a966dd78\";case\"line\":return\"18ac962264404bcc0039359d184b15f3\";case\"area\":return\"aba8630dc2ccc9b3c1774af1b6820696\";case\"step\":return\"7fa5f7264941fabfb1542985da30e0b8\";case\"spline\":return\"0f1e76928c4814e1430774fb864003f0\";case\"vertical_bar\":return\"23051643b7e03010097cb81cde11a910\"}},k=function k(e,r,t,a){!function(e,r,t){for(var a=0,o=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:p(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:p(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<o.length;a++){var n=o[a];n.shouldLog&&e.migrationNotes.push(v(n.message))}}(e,r);var o,n=function(e){var r=e.indicator,t=e.element,a=e.show_data_labels,o=e.breakdown,n=e.aggregate,i=e.sort_direction,l=e.sort_on,s=e.breakdown_level2,d=e.element_level2,c=e.color_scheme,u=e.description,m=e.name,p=e.showTitle,v=e.type,g=e.period,f=e.date_from,h=e.date_to,_=e.show_range_selector,y=e.show_breakdown_selector,b=null==c?void 0:c.value,w=\"true\"===a,T=e.field,R=\"true\"===e.show_legend,A=e.set_color,I=\"true\"===e.show_total,S=e.yaxis_title,E=e.yaxis_from,x=e.yaxis_to,F=\"true\"===e.include_target,k=\"true\"===e.include_thresholds,P=\"true\"===e.include_trend,O=\"true\"===e.include_confidence,C=\"true\"===e.include_forecast,B=\"true\"===e.include_comments,L=e.compare_main_label,Y=e.chart_color,N=\"true\"===e.follow_element,D=e.multiple_elements_view,M={period:g,from:f,to:h};return{colorType:A,colorPalette:b,chartColor:Y,showDataLabel:w,groupBy:T,showLegend:R,showTotal:I,yAxisTitle:S,yAxisFrom:E,yAxisTo:x,sysId:e.sys_id,indicator:r,element:t,show_data_labels:a,breakdown:o,aggregate:n,sort_direction:i,sort_on:l,breakdown_level2:s,color_scheme:c,description:u,name:m,showTitle:p,type:v,element_level2:d,timePeriod:M,showTarget:F,showThresholds:k,showTrend:P,showConfidence:O,showForecast:C,showComments:B,chartType:e.visualization,label:L,show_range_selector:_,followElement:N,multiple_elements_view:D,show_breakdown_selector:y}}(r),i=function(e){return x(e)}(function(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}(n,{d:e,indexes:t},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(a)));return i?{component_id:F(i),component_props:i}:e.migratingFromJava&&a?function(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}}(r,a):function(e,r){var t={message:p(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(v({message:p(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(v(t))&&e.migrationNotes.push(v(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(o=\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(o,\"</p>\"))})};this.run=function(e,r,t,a,o){var n,i={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=k(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"277f8b97a3d031108d80ad2f241e610d","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:59:02","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/0f1e76928c4814e1430774fb864003f0","value":"0f1e76928c4814e1430774fb864003f0"},"key":"splinePAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"1","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"2d56f06d55f46bbd4e79b5e624beb940\",t=\"2bd5dc19a7ad083941b7c992a966dd78\",r=\"0805a7bf91a93efbdf0a975b38b01051\",a=\"9d31ba4d773ce32ef350d4555b673f6e\",o={DAY:1,WEEK:2,MONTH:3,QUARTER:4,FQ:5,YEAR:6,FY:7,WEEK2DATE:8,MONTH2DATE:9,QUARTER2DATE:10,FQ2DATE:11,YEAR2DATE:12,FY2DATE:13,WEEK_PLUS:14,MONTH_PLUS:15,QUARTER_PLUS:16,FQ_PLUS:17,YEAR_PLUS:18,FY_PLUS:19},n=10,i=20,l=40,s=60,d=65,u=80,c=85,m={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},g=function g(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},p=function p(e,t,r){return\"com.glideapp.home.RenderHomepagePublishers\"===t&&r&&!Number.isNaN(parseInt(r,10))?\"\".concat(null!=r?r:\"\",\"::\").concat(null!=t?t:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=t?t:\"\")},v=(p(\"content_block_static\",\"com.glide.cms.RenderBlock\"),p(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),p(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),\"com.glide.ui.portal.RenderReport\"),f=(p(\"\",v),p(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),p(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),h=(p(f.group,\"com.glideapp.home.RenderHomepagePublishers\"),p(f.group2,\"com.glideapp.home.RenderHomepagePublishers\"),p(f.single,\"com.glideapp.home.RenderHomepagePublishers\"),p(f.multi,\"com.glideapp.home.RenderHomepagePublishers\"),p(f.date,\"com.glideapp.home.RenderHomepagePublishers\"),p(f.bool,\"com.glideapp.home.RenderHomepagePublishers\"),p(f.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),p(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),p(f.debug,\"com.glideapp.home.RenderHomepagePublishers\"),p(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),p(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),p(\"\",\"com.glide.ui.portal.RenderDashboard\"),p(\"report\",\"com.glide.ui.portal.RenderJavascript\"),p(\"\",\"com.glide.ui.portal.RenderJavascript\"),p(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),p(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),p(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),p(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"widget\"),y=\"filter\",w=function w(e){for(var t,r,a=\"\".concat(e),o=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(n)||(i=\"=\",n%1);){if((r=a.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");t=t<<8|r,o+=i.charAt(63&t>>8-n%1*8)}return o.toString()},_=function _(e,t){return void 0!==e&&void 0!==t&&e.indexOf(t)>-1};function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof t)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,n=arguments[1],i=0;i<o;i++){var l=a[i];if(t.call(n,l,i,a))return r?i:l}}function T(){for(var e={},t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.forEach(function(t){Object.assign(e,t)}),e}var S=function S(e,t){var a=function(e){var t={};for(var r in e){var a;null!==(a=e[r])&&void 0!==a&&a.value?t[r]=e[r].value:\"string\"==typeof e[r]&&(t[r]=e[r])}return t}(t),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:r,component_props:o}},R=function R(e,t){return{text:e,vars:t}},I=function I(e){var t=e.message,r=e.level,a=e.tooltip,o=e.originalArtifactSysId,n=e.artifactTable,i=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,d={text:t,level:r,help:a,originSysId:o,hasNewArtifact:i,table:n,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?d:A(d)},A=function A(e){var t,r,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(t=null===(r=e.text)||void 0===r?void 0:r.text)&&void 0!==t?t:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},F=\"sys_choice\";function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var C=function C(e){return w(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},B=function B(e){return w(e+new Date().getTime()+1e8*Math.random())},P=function P(e){var t=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var r,a=function(e,t){if(void 0===e)return[];for(var r=[],a=0,o=0;o<e.length;o++)\"^\"!==e.charAt(o)||(r.push(e.substring(a,o)),a=o+1);return a<=e.length&&r.push(e.substring(a,e.length)),r}(e),o=[],n=function(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return i=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{i||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw n}}}}(a);try{var i=function i(){var e=r.value;if(b(t,function(t){return e.substring(0,t.length)===t}))return\"continue\";o.push(e)};for(n.s();!(r=n.n()).done;)i()}catch(e){n.e(e)}finally{n.f()}return o.join(\"^\")},O=/[0-9a-f]{32}/,x=function x(e){return{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=e?e:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}};function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=r){var a,o,n,i,l=[],s=!0,d=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(a=n.call(r)).done)&&(l.push(a.value),l.length!==t);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=r[\"return\"]&&(i=r[\"return\"](),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||D(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function N(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=D(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e4){throw _e4},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return i=e.done,e},e:function e(_e5){l=!0,n=_e5},f:function f(){try{i||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw n}}}}function D(e,t){if(e){if(\"string\"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var M=function e(t,r,a){var o,n,i,l,s,d,u=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),r?(null!==(s=t.breakdown)&&void 0!==s&&s.value&&(i=t.breakdown_level2.value),!l&&t.element&&(l=t.element_level2)):(null!==(d=t.breakdown)&&void 0!==d&&d.value&&(i=t.breakdown.value),!l&&t.element&&(l=t.element)),i&&l&&\"unmatched\"!==l){var c=t.indexes.sys_id[i][0],m=l;t.indexes.sys_id[c.dimension.value][0].facts_table===F&&O.test(l)&&(m=t.indexes.sys_id[m][0].value);var g,p={sysId:i,elementSysIds:[m]};\"true\"===t.manual_elements&&p.elementSysIds.concat(null===(g=t.indexes.widget_elements[t.sys_id])||void 0===g?void 0:g.map(function(e){return\"unassigned\"===e.element?u:e.element})),t.elements_filter&&\"\"!==t.elements_filter&&!r&&(p.elementsFilterSysId=t.elements_filter.value,p.elementSysIds=[]),a.breakdowns.push(p)}else if(null!==(o=t.breakdown)&&void 0!==o&&o.value){var v=t.indexes.sys_id[i][0],f=t.indexes.sys_id[v.dimension.value][0];if(\"breakdown\"===t.type){var h;if(!r)if(!t.elements_filter||\"\"===t.elements_filter&&\"true\"!==t.manual_elements){if(null!==(h=t.breakdown_level2)&&void 0!==h&&h.value){if(f.facts_table===F||\"pa_buckets\"===f.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:i,elementSysIds:[u]})}}else if(t.elements_filter&&\"\"!==t.elements_filter)a.breakdowns.push({sysId:i,elementsFilterSysId:!r&&t.elements_filter.value});else if(\"true\"===t.manual_elements){var y,w,_;t.indexes.widget_elements&&0!==(null!==(y=null===(w=t.indexes.widget_elements[t.sys_id])||void 0===w?void 0:w.length)&&void 0!==y?y:0)?a.breakdowns.push({sysId:i,elementSysIds:null===(_=t.indexes.widget_elements[t.sys_id])||void 0===_?void 0:_.map(function(e){return\"unassigned\"===e.element?u:e.element})}):t.dashboard.migrationNotes.push(I({message:R(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:t.dashboard.featureFlags}))}(0===a.breakdowns.length||r)&&(a.groupBy={groupByField:i,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(f.facts_table===F||\"pa_buckets\"===f.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:i,elementSysIds:!r&&\"\"!==t.elements_filter&&t.elements_filter?[]:[u],elementsFilterSysId:!r&&\"\"!==t.elements_filter&&t.elements_filter?t.elements_filter.value:void 0})}}return null!==(n=t.breakdown_level2)&&void 0!==n&&n.value&&!r?e(t,!0,a):a};function J(e,t){if(null!=t&&t.value&&\"column\"===e)return\"vertical_bar\";switch(e){case\"column_total\":case\"column\":case\"stacked\":return\"bar\";default:return e}}function H(e){var t=b(Object.keys(o),function(t){return o[t]===parseInt(e,10)});switch(o[t]){case o.DAY:return{frequency:n,frequencyInterval:t,dateRange:m.HOURLY};case o.WEEK:case o.WEEK2DATE:case o.WEEK_PLUS:return{frequency:i,frequencyInterval:t,dateRange:m.MONTHLY};case o.MONTH:case o.MONTH2DATE:case o.MONTH_PLUS:return{frequency:l,frequencyInterval:t,dateRange:m.MONTHLY};case o.QUARTER:case o.QUARTER2DATE:case o.QUARTER_PLUS:return{frequency:s,frequencyInterval:t,dateRange:m.YEARLY};case o.FQ:case o.FQ2DATE:case o.FQ_PLUS:return{frequency:d,frequencyInterval:t,dateRange:m.YEARLY};case o.YEAR:case o.YEAR2DATE:case o.YEAR_PLUS:return{frequency:u,frequencyInterval:t,dateRange:m.YEARLY};case o.FY:case o.FY2DATE:case o.FY_PLUS:return{frequency:c,frequencyInterval:t,dateRange:m.YEARLY};default:return{frequency:n,frequencyInterval:\"\",dateRange:m.YEARLY}}}var z=function z(e){e.colorType;var t,r,a,o,n=e.colorPalette,i=e.chartColor,l=e.showDataLabel,s=(e.showLegend,e.showTotal),d=e.yAxisTitle,u=e.yAxisFrom,c=e.yAxisTo,g=e.sysId,p=e.indicator,v=(e.element,e.breakdown),f=e.aggregate,h=e.sort_direction,y=e.sort_on,w=(e.breakdown_level2,e.color_scheme,e.description),_=e.name,T=e.showTitle,S=e.showHeader,A=e.showBorder,k=e.d,P=e.indexes,O=e.showTarget,D=e.showThresholds,L=e.showTrend,z=e.showConfidence,G=e.showForecast,Y=e.showComments,U=e.chartType,q=e.label,V=e.followElement,j=y,Q=h,W=v.value,Z=null===(t=P.sys_id[W])||void 0===t?void 0:t[0],K=null===(r=P.sys_id[null==Z||null===(a=Z.dimension)||void 0===a?void 0:a.value])||void 0===r?void 0:r[0],X=null==K?void 0:K.facts_table,$=X===F,ee=\"pa_buckets\"===X;\"default\"===y&&(j=$?\"choice\":ee?\"bucket\":\"name\"),-1===[\"name\",\"value\",\"default\"].indexOf(y)&&(j=\"value\",Q=\"desc\",k.migrationNotes.push(I({message:R(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:g,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:k.featureFlags})));var te=M(e);if(te.doMigration){var re,ae,oe=10;if(null!=f&&f.value){var ne=H(P.sys_id[null==f?void 0:f.value][0].interval);oe=ne.frequency,re=ne.frequencyInterval,ae=ne.dateRange}var ie=function(e,t){var r={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},a=function a(e){if(\"0\"===e||\"00000000\"===e)return null;var t=e.substring(0,4),r=e.substring(4,6),a=e.substring(6,8);return\"\".concat(t,\"-\").concat(r,\"-\").concat(a,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))r.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){r.showAbsolutePeriod=!0,r.startTime=a(null==e?void 0:e.from),r.endTime=a(null==e?void 0:e.to);var o=new Date;new Date(r.startTime)>o&&!r.endTime?r.endTime=r.startTime:r.startTime&&!r.endTime?r.useCurrentDateForEnd=!0:!r.startTime&&r.endTime&&(r.showMaximumRange=!0,r.endTime=null)}else{r.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var n=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),i=b(Object.keys(m),function(e){return m[e]===n},!0),l=b(Object.keys(m),function(e){return m[e]===t},!0);r.period=i<l?t:n}return r}(e.timePeriod,ae),le={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",colorConfig:{type:\"default\"},configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[],dateFormat:\"default\",description:w,disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null==ie?void 0:ie.endTime,extensionType:J(U,v),filterConfigurations:\"@state.parFilters\",followFilters:!0,showFilterAsSeparateSeries:\"separate\"===e.multiple_elements_view,groupBy:[],headerTitle:T?_:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!1,hideYAxis2:!1,hideYAxis3:!1,hideYAxis4:!1,legendExpandToFit:!0,legendHorizontalAlignment:\"center\",legendPosition:\"bottom\",lineStrokeWidth:\"2\",metrics:[],filterPerMetric:[],newReporting:!1,numberOfPeriods:null==ie?void 0:ie.numberOfPeriods,period:null==ie?void 0:ie.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null==ie?void 0:ie.showAbsolutePeriod,useCurrentDateForEnd:null==ie?void 0:ie.useCurrentDateForEnd,showBorder:A,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:Y,showConfidenceBand:z,showDataLabels:l,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:G,showForecastRange:!1,showGapPercentage:null,showHeader:S,showHeaderSeparator:!1,showLegend:!0,showLegendValue:!1,showMaximumRange:null==ie?void 0:ie.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:O,showThreshold:D,showTotalAggregate:!1,showTotalValue:s,showTrend:L,showXGrid:!0,showYGrid:!0,showContinuousLine:!1,sortBy:j,sortByOrder:Q,startTime:null==ie?void 0:ie.startTime,telemetry:\"null\",trendBy:{},wrapTitle:!1,yAxis0Title:d,yAxis0To:c,yAxis0From:u,yAxisStyle:\"default\",allowChangeDateRange:!1,showDateRangeByDefault:!1},se=C(null==p?void 0:p.value),de=B(se),ue=P.sys_id[null==p?void 0:p.value][0],ce={},me={metricId:de,dataSourceId:se};ce[\"\".concat(null==p?void 0:p.value,\":\").concat(JSON.stringify(te.breakdowns))]=me,le.dataSources=[{allowRealTime:\"1\"===ue.type,allowTotalValue:\"1\"===ue.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:se,indicatorType:ue.type,isScriptedIndicator:!1,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:te.breakdowns,indicator:null==p?void 0:p.value}}],te.groupBy&&(te.groupBy.dataSource=se,te.groupBy.metric=de,te.groupBy.isChoice=$,te.groupBy.isPaBucket=ee,le.groupBy=[{disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[te.groupBy],hideZeroValues:!1}]),le.metrics=[{dataSource:se,id:de,aggregateIndicator:null!==(o=null==f?void 0:f.value)&&void 0!==o?o:\"\",frequency:oe,frequencyInterval:re,label:q,numberFormat:x(parseInt(ue.precision,10)),chartType:J(U),axisId:\"primary\"}],le.filterPerMetric=[{metricId:de,value:V}],\"column\"==U&&null!=v&&v.value?le.dataLabelPosition=\"middle\":le.trendBy={trendByFields:[{field:\"anything\",metric:de}],trendByFrequency:\"date\",trendByMinuteInterval:null};var ge=function(e,t,r,a,o,n,i){var l,s=null!==(l=e.widget_indicators[t])&&void 0!==l?l:[];s.sort(function(e,t){return parseInt(e.order,10)-parseInt(t.order,10)});try{var d,u=N(s);try{for(u.s();!(d=u.n()).done;){var c,m,g=d.value;if(\"true\"!==g.follow_element){var p=null===(c=g.indicator)||void 0===c?void 0:c.value;e.sys_id[p][0].name,n.migrationNotes.push(I({message:R(\"This visualization is in compatibility mode because the additional indicators follow elements feature is not supported.\"),level:1,originalArtifactSysId:t,artifactTable:null===(m=e.sys_id[t][0])||void 0===m?void 0:m.sys_table_name,featureFlags:n.featureFlags}))}}}catch(e){u.e(e)}finally{u.f()}}catch(e){console.error(\"ERROR: Error occurred while handling widget indicators for widget: \".concat(i||t))}var v,f=!1,h={},y=N(s);try{for(y.s();!(v=y.n()).done;){var w,_,b,T=v.value,S=M({breakdown:T.breakdown,breakdown_level2:T.breakdown_level2,element:T.element,element_level2:T.element_level2,indexes:e,elements_filter:T.elements_filter,manual_elements:T.manual_elements}),A=void 0,F=void 0,k=e.sys_id[null===(w=T.indicator)||void 0===w?void 0:w.value][0];if(o[\"\".concat(null===(_=T.indicator)||void 0===_?void 0:_.value,\":\").concat(JSON.stringify(S.breakdowns))]){var P,O;A=o[\"\".concat(null===(P=T.indicator)||void 0===P?void 0:P.value,\":\").concat(JSON.stringify(S.breakdowns))].dataSourceId,F=o[\"\".concat(null===(O=T.indicator)||void 0===O?void 0:O.value,\":\").concat(JSON.stringify(S.breakdowns))].metricId}else{var E,D,L,z,G;A=C(null===(E=T.indicator)||void 0===E?void 0:E.value),F=B(A),o[null===(D=T.indicator)||void 0===D?void 0:D.value]={metricId:F,dataSourceId:A},r.dataSources.push({allowRealTime:\"1\"===k.type,allowTotalValue:\"1\"===k.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:A,indicatorType:k.type,isScriptedIndicator:!1,label:k.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:S.breakdowns,indicator:null===(L=T.indicator)||void 0===L?void 0:L.value}});var Y=\"primary\";\"true\"===T.second_y_axis&&(r.yAxis1Title=T.label,r.yAxis1Position=\"right\",r.yAxis1From=\"\",r.yAxis1To=\"\",Y=\"axis1\");var U=10,q=void 0,V=null!==(z=null===(G=T.aggregate)||void 0===G?void 0:G.value)&&void 0!==z?z:\"\";if(V){var j,Q=H((null===(j=e.sys_id[V])||void 0===j?void 0:j[0]).interval);U=Q.frequency,q=Q.frequencyInterval}var W={dataSource:A,id:F,aggregateIndicator:V,frequency:U,frequencyInterval:q,label:T.label,numberFormat:x(parseInt(k.precision,10)),chartType:J(T.chart_type),axisId:Y},Z={field:\"anything\",metric:F};\"stacked\"===T.chart_type&&(f=!0),r.metrics.push(W),r.filterPerMetric.push({metricId:F,value:\"true\"===(null==T?void 0:T.follow_element)}),r.trendBy.trendByFields.push(Z)}S.groupBy&&(S.groupBy.dataSource=A,S.groupBy.metric=F,r.groupBy.push({disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[S.groupBy],hideZeroValues:!1})),\"\"!==T.color&&null!==(b=T.color)&&void 0!==b&&b.value&&(h[F]=T.color.value)}}catch(e){y.e(e)}finally{y.f()}return(r.metrics.length>1||r.groupBy.length>0)&&(r.showTarget=!1,r.showTrend=!1,r.showConfidenceBand=!1,r.showThreshold=!1,r.showComment=!1),{hasStackedColumn:f,widgetColors:h}}(P,g,le,0,ce,k,_),pe=ge.hasStackedColumn,ve=ge.widgetColors;if(le.filterPerMetric.some(function(e){return null==e?void 0:e.value})||(le.followFilters=!1,le.showFilterIcon=!1),pe&&(le.extensionType=\"bar\",le.chartVariation=\"stacked\"),n&&n.length>0&&0===Object.keys(ve).length)le.colorConfig={type:\"palette\",palette:n};else if(le.metrics.length>1){var fe,he;fe=n&&n.length>0?E(null!==(he=P.sys_id[n])&&void 0!==he?he:[],1)[0]:E(P.sys_id[\"68d08c72d700210096614251ce61039e\"],1)[0];for(var ye=[],we=0;we<32;we++){var _e=\"color_\".concat(we+1);if(\"\"===fe[_e])break;ye.push(fe[_e].value)}var be=0;le.colorConfig={type:\"colorsPerMetric\",values:le.metrics.map(function(e){var t;return e.id===de&&null!=i&&i.value?t=i.value:ve[e.id]?t=ve[e.id]:(t=ye[be%ye.length],be+=1),{metric:e.id,color:t}})}}else i&&1===le.metrics.length&&(le.colorConfig={type:\"singleColor\",values:[{color:i.value,metric:de}]});return le}k.migrationNotes.push(I({message:R(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:g,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:k.featureFlags}))},G=function G(e){var t=z(e);if(t)return t.chartVariation=e.stacked?\"stacked\":\"side-by-side\",t},Y=function Y(e){switch(e.extensionType){case\"trend\":case\"bar\":return t;case\"line\":return\"18ac962264404bcc0039359d184b15f3\";case\"area\":return\"aba8630dc2ccc9b3c1774af1b6820696\";case\"step\":return\"7fa5f7264941fabfb1542985da30e0b8\";case\"spline\":return\"0f1e76928c4814e1430774fb864003f0\";case\"vertical_bar\":return\"23051643b7e03010097cb81cde11a910\"}},U=function U(t,r){var a={message:R(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:t.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&t.migrationNotes.push(I({message:R(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:t.featureFlags})),-1===t.migrationNotes.indexOf(I(a))&&t.migrationNotes.push(I(a)),{component_id:e,component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},q=function q(e,t,r,a){var o,n,i;return e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"<b>Unsupported migration: \".concat(null!==(o=null!==(n=t.name)&&void 0!==n?n:t.sys_name)&&void 0!==o?o:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=t&&t.type?t.type:null==a||null===(i=a.type)||void 0===i?void 0:i.value,\"</span> widget.\"))})},V=function V(e){return function(t,r,a,o){var n;return(n=e===y?function(){for(var e in f)if(f[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(t.migrationNotes.push(I({message:R(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:t.featureFlags})),e===h||e===y?q(t,T(r,{type:n}),0,o):function(e,t,r,a){var o,n,i;return e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"<b>Unsupported migration: \".concat(null!==(o=null!==(n=t.name)&&void 0!==n?n:t.sys_name)&&void 0!==o?o:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=t&&t.type?t.type:null==a||null===(i=a.type)||void 0===i?void 0:i.value,\"</span> report.\"))})}(t,r,0,o)):function(e,t,r,a){var o,n,i,l;if(e.migratingFromJava&&a)return S(t,a);var s=\"\";null!=t&&t.type?s=t.type:null!=a&&null!==(o=a.type)&&void 0!==o&&o.value?s=null==a||null===(n=a.type)||void 0===n?void 0:n.value:null!=a&&null!==(i=a.renderer)&&void 0!==i&&i.value&&(s=a.renderer.value);var d=null==a||null===(l=a.title)||void 0===l?void 0:l.value;return e.migrationNotes.push(I({message:R(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),U(e,{static_content:g(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(s,\": \").concat(d,\"</span> widget.\"))})}(t,r,0,o)}},j=function j(e,t,r){var a,o,n=e.sys_id,i=e.indicator,l=e.show_data_labels,s=e.aggregate,d=e.sort_direction,u=e.sort_on,c=e.color_scheme,m=e.description,g=e.name,p=C(null==i?void 0:i.value),v={type:\"default\"};null!=c&&c.value&&\"\"!==(null==c?void 0:c.value)&&(v={type:\"palette\",palette:null==c?void 0:c.value});var f=u;-1===[\"name\",\"value\"].indexOf(u)&&(f=\"value\",t.migrationNotes.push(I({message:R(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:n,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags})));var h=M(T(e,{indexes:r,dashboard:t}));if(h.doMigration){!h.groupBy&&h.breakdowns.length>0&&(h.groupBy={groupByField:h.breakdowns[0].sysId,isRange:!1,isChoice:!1,isPaBucket:!1});var y=r.sys_id[null==i?void 0:i.value][0],w={applyDateRange:!1,bareBorder:!1,colorConfig:v,configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"both\",dataPassthrough:null,dataSources:[{allowRealTime:\"1\"===y.type,allowTotalValue:\"1\"===y.type,indicatorType:y.type,isScriptedIndicator:!1,filterQuery:P(e.filter),label:y.name,sourceType:\"indicator\",uuid:{breakdowns:h.breakdowns,indicator:null==i?void 0:i.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:p,dataCategories:[\"trend\",\"group\",\"simple\"]}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,followFilters:\"true\"===e.follow_element,groupBy:[],hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:\"center\",metrics:[{dataSource:p,id:B(p),aggregateIndicator:null!==(a=null==s?void 0:s.value)&&void 0!==a?a:\"\",frequency:parseInt(null!==(o=null==y?void 0:y.frequency)&&void 0!==o?o:\"10\",10),numberFormat:x(parseInt(y.precision,10)),axisId:\"primary\"}],newReporting:!1,numberOfPeriods:3,period:\"M\",registerOrientation:\"horizontal\",registerPosition:\"bottom\",scoreType:null,showAbsolutePeriod:!1,showBorder:e.showBorder,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===l,showDataPassthrough:!1,showFilterIcon:\"true\"===e.follow_element,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:e.showHeader,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showRegister:!0,showRegisterOnSameLine:!1,showRegisterPercentage:!1,showRegisterValue:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:f,sortByOrder:d,telemetry:\"null\",trendBy:null,truncationType:\"end\",wrapTitle:!1,description:m,headerTitle:e.showTitle?g:\"\"};return h.groupBy&&(w.groupBy=[{maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[T(h.groupBy,{dataSource:p})]}]),w}t.migrationNotes.push(I({message:R(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:n,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}))},Q=function Q(e){var t=!0,r=!0;return null!=e&&e.show_title&&(t=\"true\"===e.show_title.value),null!=e&&e.show_border&&(r=\"true\"===e.show_border.value),{showTitle:t,showHeader:!0,showBorder:r}},W=function W(e){var t=e.indicator,r=e.element,a=e.show_data_labels,o=e.breakdown,n=e.aggregate,i=e.sort_direction,l=e.sort_on,s=e.breakdown_level2,d=e.element_level2,u=e.color_scheme,c=e.description,m=e.name,g=e.showTitle,p=e.type,v=e.period,f=e.date_from,h=e.date_to,y=e.show_range_selector,w=e.show_breakdown_selector,_=null==u?void 0:u.value,b=\"true\"===a,T=e.field,S=\"true\"===e.show_legend,R=e.set_color,I=\"true\"===e.show_total,A=e.yaxis_title,F=e.yaxis_from,k=e.yaxis_to,C=\"true\"===e.include_target,B=\"true\"===e.include_thresholds,P=\"true\"===e.include_trend,O=\"true\"===e.include_confidence,x=\"true\"===e.include_forecast,E=\"true\"===e.include_comments,N=e.compare_main_label,D=e.chart_color,L=\"true\"===e.follow_element,M=e.multiple_elements_view,J={period:v,from:f,to:h};return{colorType:R,colorPalette:_,chartColor:D,showDataLabel:b,groupBy:T,showLegend:S,showTotal:I,yAxisTitle:A,yAxisFrom:F,yAxisTo:k,sysId:e.sys_id,indicator:t,element:r,show_data_labels:a,breakdown:o,aggregate:n,sort_direction:i,sort_on:l,breakdown_level2:s,color_scheme:u,description:c,name:m,showTitle:g,type:p,element_level2:d,timePeriod:J,showTarget:C,showThresholds:B,showTrend:P,showConfidence:O,showForecast:x,showComments:E,chartType:e.visualization,label:N,show_range_selector:y,followElement:L,multiple_elements_view:M,show_breakdown_selector:w}};function Z(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e6){throw _e6},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return i=e.done,e},e:function e(_e7){l=!0,n=_e7},f:function f(){try{i||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw n}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function X(e,t,r,a,o,n,i,l,s,d){if(console.info(\"Handling breakdown for\",{breakdownSysId:e,baseProps:r,elementSysId:a,elementFilter:o,showTopX:n,manualElements:i,sys_id:l,breakdown2SysId:s,element2SysId:d}),e){var u,c=t.sys_id[e][0];r.breakdowns.push({breakdownId:e,breakdownLabel:c.name,elementIds:a&&\"unmatched\"!==a?[a]:[],elementsFilterSysId:o,perPage:null!=n?n:1e3}),i&&r.breakdowns[r.breakdowns.length-1].elementIds.concat(null===(u=t.widget_elements[l])||void 0===u?void 0:u.map(function(e){return\"unassigned\"===e.element?void 0:e.element}).filter(function(e){return e}))}if(s){var m=t.sys_id[s][0];r.breakdowns.push({breakdownId:s,breakdownLabel:m.name,elementIds:d&&\"unmatched\"!==d?[d]:[],perPage:null!=n?n:1e3})}}function $(e){switch(e){case\"indicator_group\":case\"order\":case\"default\":return\"name\";default:return e}}function ee(e,t,r,a){var o;if(\"breakdown\"===t.type)if(void 0!==a.groupBy&&a.groupBy.length>0){var n=a.groupBy[0].maxNumberOfGroups;a.groupBy[0].maxNumberOfGroups=t.show_top_x?parseInt(t.show_top_x).toString():te(n)}else if(void 0!==a.breakdowns&&a.breakdowns.length>0){var i=a.breakdowns[0].perPage;a.breakdowns[0].perPage=t.show_top_x?parseInt(t.show_top_x).toString():te(i)}else e.migrationNotes.push(I({message:R(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===t.show_breakdown_selector){var l=t.indicator.value,s=null===(o=r.indicator_breakdowns)||void 0===o?void 0:o[l];a.additionalGroupByConfig=(null==s?void 0:s.map(function(e){var t,a,o=null===(t=r.sys_id[null===(a=e.breakdown)||void 0===a?void 0:a.value])||void 0===t?void 0:t[0];return{id:null==o?void 0:o.sys_id,metricLabel:null==o?void 0:o.name}}))||[]}else a.additionalGroupByConfig=[]}function te(e){return e?parseInt(e).toString():\"10\"}var re=function re(e,t,r){for(var a=0,o=[{shouldLog:\"true\"===t.show_visualization_selector,message:{message:R(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===t.show_range_selector,message:{message:R(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags}}];a<o.length;a++){var n=o[a];n.shouldLog&&e.migrationNotes.push(I(n.message))}},ae=function ae(e,t,r,o){re(e,t);var n=function(e){var t,r,a,o,n,i,l=e.sort_direction,s=e.sort_on,d=e.name,u=e.description,c=e.sys_id,m=e.show_breakdown_selector,g=null===(t=e.aggregate)||void 0===t?void 0:t.value,p=null===(r=e.indicator)||void 0===r?void 0:r.value,v=null===(a=e.tag)||void 0===a?void 0:a.value,f=null===(o=e.breakdown)||void 0===o?void 0:o.value,h=null===(n=e.breakdown_level2)||void 0===n?void 0:n.value,y=e.element,w=e.element_level2,_=null===(i=e.elements_filter)||void 0===i?void 0:i.value;return{sort_direction:l,sort_on:s,indicatorSysId:p,breakdownSysId:f,manualElements:\"true\"===e.manual_elements,pageSize:parseInt(e.number_of_records,10),showBar:\"true\"===e.show_bar,showIndicator:\"true\"===e.show_total,showTopX:parseInt(e.show_top_x,10),followFilters:\"true\"===e.follow_element,followFilterIcon:\"true\"===e.follow_element,columns:{lastScore:\"true\"===e.column_current,change:\"true\"===e.column_change,bulletChart:\"true\"===e.column_bulletchart,changePercent:\"true\"===e.column_change_perc,trend:\"true\"===e.column_trend,gap:\"true\"===e.column_gap,gapPercent:\"true\"===e.column_gap_perc,target:\"true\"===e.column_target,multiScore:\"true\"===e.column_multiple},timeSeries:g,breakdown2SysId:h,elementSysId:y,element2SysId:w,name:d,description:u,elementFilter:_,sys_id:c,steps:parseInt(e.column_steps,10),stepSize:parseInt(e.column_stepsize,10),indicatorGroupSysId:v,showBreakdownSelector:m}}(t),i=function(e){var t=e.sort_direction,r=e.sort_on,a=e.indicatorSysId,o=e.breakdownSysId,n=e.manualElements,i=e.pageSize,l=e.showBar,s=e.showIndicator,d=e.showTopX,u=e.columns,c=e.timeSeries,m=e.breakdown2SysId,g=e.elementSysId,p=e.element2SysId,v=e.name,f=e.showHeader,h=e.showTitle,y=(e.showBorder,e.elementFilter),w=e.description,_=e.indexes,b=e.sys_id,T=e.d,S=e.steps,A=e.stepSize,F=e.indicatorGroupSysId,k=e.showBreakdownSelector;l&&T.migrationNotes.push(I({message:R(\"This visualization is migrated without show bar configuration because this functionality is not supported.\"),level:2,originalArtifactSysId:b,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:T.featureFlags}));var C={aggregateId:null!=c?c:\"default\",breakdowns:[],colorSchemeId:\"\",description:w,enableDrilldown:!0,filterConfigurations:\"@state.parFilters\",heading:h?v:\"\",indicatorGroup:\"\",indicators:[],metrics:{},nestedBreakdown:!0,pageSize:i.toString(),query:\"\",scorecardType:\"list\",showAlternateRowColors:!1,showBookmarkedOnly:!1,showBreakdownsOnly:!s,showColumnDividers:!1,showFavorite:!0,followFilters:e.followFilters,showFilterElement:!1,showFilterIcon:e.followFilterIcon,showHeader:f,showIndicatorInfo:!0,sortBy:$(r),sortDir:t,sourceType:\"1\",swapBreakdownsAsColumns:!1,allowChangeBreakdown:\"true\"===k,breakdownVisibilitySelector:\"true\"===k};if(X(o,_,C,g,y,d,n,b,m,p),a){var B=_.sys_id[a][0];C.indicators.push({id:a,label:B.name}),C.sourceType=\"1\"}else if(F)C.showBreakdownsOnly=!0,C.indicatorGroup=F,C.sourceType=\"2\";else{var P,O=null!==(P=_.widget_indicators[b])&&void 0!==P?P:[];C.showBreakdownsOnly=!0,C.sourceType=\"1\",\"order\"===r&&function(e,t,r){var a=[],o=[];e.sort(function(e,r){var a,o,n,i,l=t.sys_id[null===(a=e.indicator)||void 0===a?void 0:a.value],s=t.sys_id[null===(o=r.indicator)||void 0===o?void 0:o.value],d=null!=l&&null!==(n=l[0])&&void 0!==n&&n.name?l[0].name:\"\",u=null!=s&&null!==(i=s[0])&&void 0!==i&&i.name?s[0].name:\"\";return d.localeCompare(u)}),\"desc\"===r.sort_direction&&e.reverse();var n,i=Z(e);try{for(i.s();!(n=i.n()).done;){var l=n.value;l.order&&parseInt(l.order,10)>-1?o.push(l):a.push(l)}}catch(e){i.e(e)}finally{i.f()}o.sort(function(e,t){return parseInt(e.order,10)-parseInt(t.order,10)}),e.splice(0,e.length),Array.prototype.push.apply(e,o.concat(a))}(O,_,e);var x,E=Z(O);try{for(E.s();!(x=E.n()).done;){var N,D,L,M,J=x.value;if((null==c?void 0:c.length)>0&&(null===(N=J.aggregate)||void 0===N||null===(D=N.value)||void 0===D?void 0:D.length)>0&&(null===(L=J.aggregate)||void 0===L?void 0:L.value)!==c)T.migrationNotes.push(I({message:R(\"This visualization is migrated without the time series aggregation configuration because it does not match aggregation of the main metric.\"),level:1,originalArtifactSysId:b,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:T.featureFlags}));else if(null!==(M=J.indicator)&&void 0!==M&&M.value){var H,z,G=_.sys_id[J.indicator.value][0];C.indicators.push({id:J.indicator.value,label:J.label?J.label:G.name}),X(null===(H=J.breakdown)||void 0===H?void 0:H.value,_,C,J.element,void 0,void 0,!1,b,null===(z=J.breakdown_level2)||void 0===z?void 0:z.value,J.element_level2)}}}catch(e){E.e(e)}finally{E.f()}}if(u){C.metrics={fields:[]};for(var Y=0,U=Object.keys(u);Y<U.length;Y++){var q=U[Y];if(\"multiScore\"===q)C.metrics.multiScore={numberOfPeriods:S,periodStep:A,type:u.multiScore?\"CUSTOM_INTERVAL\":\"\"};else if(\"bulletChart\"===q){T.migrationNotes.push(I({message:R(\"This visualization is migrated without bullet score because this functionality is not supported.\"),level:2,originalArtifactSysId:b,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:T.featureFlags}));continue}u[q]&&C.metrics.fields.push(q)}}return C}(T(n,{d:e,indexes:r},Q(o)));return i?(ee(e,t,r,i),{component_id:a,component_props:i}):e.migratingFromJava&&o?S(t,o):V(h)(e,t,r,o)},oe=/ORDERBY[^.^]+\\./,ne=[function(e){var t,r,a,o,n=e.dashboard,i=e.widget,l=(e.indexes,e.preferences);((null==l||null===(t=l.renderer)||void 0===t?void 0:t.value)===v||n.migratingFromJava)&&(\"true\"===(null==l||null===(r=l.publisher_widget)||void 0===r?void 0:r.value)&&n.migrationNotes.push(I({message:R(\"This visualization is in compatibility mode because the act as filter feature is not supported on migration. It can be configured manually in a new visualization.\"),level:1,originalArtifactSysId:i.sys_id,artifactTable:i.sys_table_name,featureFlags:n.featureFlags})),null!=i&&null!==(a=i.report_drilldown)&&void 0!==a&&a.value&&n.migrationNotes.push(I({message:R(\"This visualization is in compatibility mode because the report drilldown feature is not supported on migration. It can be configured manually in a new visualization.\"),level:1,originalArtifactSysId:i.sys_id,artifactTable:i.sys_table_name,featureFlags:n.featureFlags})),oe.test(null==i?void 0:i.filter)&&n.migrationNotes.push(I({message:R(\"This visualization is migrated without sorting by dot-walked fields because this functionality is not supported.\"),level:2,originalArtifactSysId:i.sys_id,artifactTable:i.sys_table_name,featureFlags:n.featureFlags})),null!=i&&null!==(o=i.list_ui_view)&&void 0!==o&&o.value&&n.migrationNotes.push(I({message:R(\"This visualization is migrated without a drilldown list view because this functionality is not supported.\"),level:2,originalArtifactSysId:i.sys_id,artifactTable:i.sys_table_name,featureFlags:n.featureFlags})))}],ie=function ie(o,n,i,l){var s=function(e,t,r,a){for(var o=0,n=ne;o<n.length;o++){var i=(0,n[o])({dashboard:e,widget:t,indexes:r,preferences:a});if(i)return i}}(o,n,i,l);if(s)return s;var d=function(e,r,o,n){switch(null==r?void 0:r.visualization){case\"pyramid\":return function(e,t,r,a){return e.migratingFromJava&&a?S(t,a):(e.migrationNotes.push(I({message:R(\"We are unable to migrate this component.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),q(e,t))}(e,r,0,n);case\"process\":case\"word_cloud\":case\"treemap\":case\"spider\":case\"funnel\":case\"relative\":return function(e,t,r,a){return e.migratingFromJava&&a?S(t,a):V(h)(e,t,r,a)}(e,r,o,n);case\"column_total\":return function(e,r,a,o){re(e,r);var n=W(r),i=function(e){var t,r,a=z(e);if(a){a.chartVariation=\"side-by-side\";var o=a.dataSources[0].id,n=a.metrics[0],i=n.frequency,l=n.frequencyInterval,s=B(o);return a.metrics.unshift({frequency:i,frequencyInterval:l,chartType:\"line\",numberFormat:{customFormat:!1},id:s,dataSource:o,aggregateIndicator:(null==e||null===(t=e.aggregate)||void 0===t?void 0:t.value)||\"\",label:\"Total\",axisId:\"primary\"}),null===(r=a.trendBy.trendByFields)||void 0===r||r.push({field:\"anything\",metric:s}),a}}(T(n,{d:e,indexes:a},Q(o)));return i?(ee(e,r,a,i),function(e,t,r){var a,o;r.showAdditionalGroupBySelector=!0,r.allowAdditionalGroupByPerMetric=!0;var n=null===(a=e.indicator)||void 0===a?void 0:a.value,i=null===(o=t.indicator_breakdowns)||void 0===o?void 0:o[n];r.additionalGroupByConfig=(null==i?void 0:i.map(function(e){var a,o,n,i,l,s=null===(a=t.sys_id[null===(o=e.breakdown)||void 0===o?void 0:o.value])||void 0===a?void 0:a[0];return{id:null==s?void 0:s.sys_id,label:null==s?void 0:s.name,metricId:null===(n=r.metrics[1])||void 0===n?void 0:n.id,metricLabel:(null===(i=r.metrics[1])||void 0===i?void 0:i.label)||(null===(l=r.dataSources[0])||void 0===l?void 0:l.label)}}))||[]}(n,a,i),{component_id:t,component_props:i}):e.migratingFromJava&&o?S(r,o):U(e,{static_content:g(\"ERROR: Cannot migrate PA Total Column widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"))})}(e,r,o,n);case\"donut\":return function(e,t,r,a){re(e,t);var o=j(T(t,Q(a)),e,r);return o?(ee(e,t,r,o),{component_id:\"a2b0596cec6b9d49dd1ff9bf76b5084b\",component_props:o}):e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"ERROR: Cannot migrate PA Donut widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,r,o,n);case\"pie\":return function(e,t,r,a){re(e,t);var o=j(T(t,Q(a)),e,r);return o?(ee(e,t,r,o),{component_id:\"96abe7e38d8790718022c5630a92176c\",component_props:o}):e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"ERROR: Cannot migrate PA Pie widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,r,o,n);case\"semi_circle_donut\":return function(e,t,r,a){re(e,t);var o=j(T(t,Q(a)),e,r);return o?(ee(e,t,r,o),{component_id:\"3809c6583b8dd540a0bf735ed493bae2\",component_props:o}):e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"ERROR: Cannot migrate PA Semi donut widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,r,o,n);case\"area\":return function(e,t,r,a){re(e,t);var o=W(t),n=z(T(o,{d:e,indexes:r},Q(a)));return n?{component_id:Y(n),component_props:n}:e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,r,o,n);case\"column\":return function(e,t,r,a){re(e,t);var o=W(t),n=G(T(o,{d:e,indexes:r},Q(a)));return n?(ee(e,t,r,n),{component_id:Y(n),component_props:n}):e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,r,o,n);case\"line\":return function(e,t,r,a){re(e,t);var o,n=(o=T(W(t),{d:e,indexes:r},Q(a)),z(o));return n?(ee(e,t,r,n),{component_id:Y(n),component_props:n}):e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,r,o,n);case\"spline\":return function(e,t,r,a){re(e,t);var o,n=(o=T(W(t),{d:e,indexes:r},Q(a)),z(o));return n?{component_id:Y(n),component_props:n}:e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,r,o,n);case\"step\":return function(e,t,r,a){re(e,t);var o,n=(o=T(W(t),{d:e,indexes:r},Q(a)),z(o));return n?{component_id:Y(n),component_props:n}:e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,r,o,n);case\"stacked\":return function(e,t,r,a){re(e,t);var o=W(t),n=G(T(o,{d:e,indexes:r,stacked:!0},Q(a)));return n?(ee(e,t,r,n),{component_id:Y(n),component_props:n}):e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,r,o,n);case\"scorecard\":return ae(e,r,o,n);case\"speedometer\":case\"dial\":return function(e,t,r,a){re(e,t);var o=function(e){var t,r,a,o,n,i,l=e.name,s=\"true\"===e.gauge_autoscale,d=parseInt(e.gauge_from,10),u=parseInt(e.gauge_to,10),c=null===(t=e.aggregate)||void 0===t?void 0:t.value,m=null===(r=e.indicator)||void 0===r?void 0:r.value,g=null===(a=e.tag)||void 0===a?void 0:a.value,p=null===(o=e.breakdown)||void 0===o?void 0:o.value,v=null===(n=e.breakdown_level2)||void 0===n?void 0:n.value,f=e.element,h=e.element_level2,y=null===(i=e.elements_filter)||void 0===i?void 0:i.value,w=\"true\"===e.manual_elements,_=e.sort_direction,b=e.sort_on;return{autoScale:s,chartTitle:l,timeSeries:c,indicatorSysId:m,indicatorGroupSysId:g,breakdownSysId:p,breakdown2SysId:v,elementSysId:f,element2SysId:h,elementFilter:y,manualElements:w,from:d,to:u,sys_id:e.sys_id,sortDirection:_,sortBy:b}}(t),n=function(e){var t=e.autoScale,r=e.chartTitle,a=e.timeSeries,o=e.indicatorSysId,n=e.showHeader,i=e.showTitle,l=e.showBorder,s=e.from,d=e.to,u=e.indexes,c=e.d,m=e.sys_id,g=e.widget,p=e.sortDirection,v=e.sortBy,f=e.follow_element,h=M(T(g,{indexes:u,dashboard:c}));if(h.doMigration){var y=C(o),w=B(y),_=u.sys_id[o][0],b={applyDateRange:!1,bareBorder:!1,configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:\"1\"===_.type,allowTotalValue:\"1\"===_.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:y,indicatorType:_.type,isScriptedIndicator:!1,label:_.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:h.breakdowns,indicator:o}}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:\"true\"===f,gaugeArcAngle:\"180\",groupBy:null,headerTitle:i?r:\"\",hideMatrixAggregate:!1,innerRadius:.7,maxValue:d,metrics:[{aggregateFunction:a,axisId:\"primary\",dataSource:y,id:w,numberFormat:x(parseInt(_.precision,10))}],minValue:s,newReporting:!1,numberOfPeriods:3,period:\"M\",rangesConfig:{},scoreLabel:\"none\",scoreType:null,showAbsolutePeriod:!1,showBorder:l,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:n,showHeaderSeparator:!1,showLabelFirst:!1,showMaximumRange:!1,showMetricLabel:!1,showRangeLabels:!1,showRangeLimit:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,showZero:!0,sortBy:v,sortByOrder:p,telemetry:\"null\",trendBy:null,valueLabelSize:\"md\",wrapTitle:!1};return t&&(b.minValue=0,b.maxValue=null),b}c.migrationNotes.push(I({message:R(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:m,artifactTable:null==g?void 0:g.sys_table_name,featureFlags:c.featureFlags}))}(T(o,{d:e,indexes:r,widget:t},Q(a)));return n?{component_id:\"037bd8ea3013833fd049186779528b70\",component_props:n}:e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,r,o,n);case\"latest\":case\"realtime\":case\"score\":return function(e,t,r,a){re(e,t);var o=!1,n=!1,i=!1,l=!1,s=!1,d=!1;switch(t.template){case\"template1\":case\"template2\":case\"\":o=!0,d=!0,n=!0,l=!0;break;case\"template3\":d=!0,n=!0,l=!0,i=!0,s=!0;break;default:if(e.migratingFromJava&&a)return S(t,a);throw new Error(\"Don't know what kind of template that is? Dashboard \".concat(e.sys_id,\" Element: \").concat(t.sys_name))}var u=function(e){var t,r,a,o,n,i,l=e.props,s=e.indexes,d=e.dashboard,u=e.showSparkline,c=e.showChange,m=e.showTarget,g=e.showGapPercentage,p=e.showScoreDate,v=e.showChangePercentage,f=M(T(l,{indexes:s,dashboard:d}));if(f.doMigration){\"periods_back\"===l.lastscore_compare&&d.migrationNotes.push(I({message:R(\"This visualization is in compatibility mode because the compare score with previous periods feature is not supported.\"),level:1,originalArtifactSysId:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:d.featureFlags}));var h=C(null===(t=l.indicator)||void 0===t?void 0:t.value),y=B(h),w=s.sys_id[null===(r=l.indicator)||void 0===r?void 0:r.value][0],_=\"realtime\"===l.visualization,b=\"1\"===w.type,S=void 0===w.show_realtime_score?b&&_:b&&\"true\"===w.show_realtime_score;return{showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,enableDrilldown:!0,newReporting:!1,showSparkline:u,dataPassthrough:null,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,showMaximumRange:!1,enableRealTimeUpdate:S,scoreType:null,useRelativeScoreTime:S,showScoreUpdateTime:S,colorConfig:{type:\"default\"},scoreSize:\"auto\",showFilterIcon:\"true\"===l.follow_element,followFilters:\"true\"===l.follow_element,headingPosition:null,showChange:c,showTarget:m,showGapPercentage:g,showScoreDate:!S&&p,showChangePercentage:v,showChangeFrom:!0,showZero:!1,description:l.description,dataSources:[{allowRealTime:_&&b,allowTotalValue:b,indicatorType:w.type,isScriptedIndicator:!1,label:w.name,filter:P(l.filter),sourceType:\"indicator\",uuid:{breakdowns:f.breakdowns,indicator:null===(a=l.indicator)||void 0===a?void 0:a.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:h,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[{dataSource:h,id:y,aggregateIndicator:null!==(o=null===(n=l.aggregate)||void 0===n?void 0:n.value)&&void 0!==o?o:\"\",frequency:parseInt(null!==(i=null==w?void 0:w.frequency)&&void 0!==i?i:\"10\",10),numberFormat:T(x(parseInt(w.precision,10)),{abbreviationEnabled:!1,numberInTooltipsEnabled:!1,thousandSeparatorEnabled:!0}),axisId:\"primary\"}],headerTitle:l.showTitle?l.sys_name:\"\"}}d.migrationNotes.push(I({message:R(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:d.featureFlags}))}({props:T(t,Q(a)),showSparkline:o,showChange:n,showTarget:i,showChangePercentage:l,showGapPercentage:s,showScoreDate:d,indexes:r,dashboard:e});return u?{component_id:\"d24d53f60350de7a652caf3188a46ed2\",component_props:u}:e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"ERROR: Cannot migrate PA Single Score widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,r,o,n);case\"pivot_scorecard\":return function(e,t,r,o){re(e,t);var n=function(e){var t,r,a,o;return{breakdown:null===(t=e.pivot_breakdown)||void 0===t?void 0:t.value,timeseries:null===(r=e.aggregate)||void 0===r?void 0:r.value,breakdownOnY:\"true\"===e.flip_axes,elementFilter:null===(a=e.pivot_elements_filter)||void 0===a?void 0:a.value,colour:null===(o=e.color_scheme)||void 0===o?void 0:o.value,name:e.name,sys_id:e.sys_id,description:e.description}}(t);if(n.elementFilter)return e.migratingFromJava&&o?S(t,o):U(e,{static_content:g(\"ERROR: Cannot migrate Pivot scorecard \".concat(n.name,\" sys_id: \").concat(null==t?void 0:t.sys_id,\" as we do not support pivot element filters\"))});var i=function(e){var t,r=e.breakdown,a=e.timeseries,o=e.breakdownOnY,n=e.elementFilter,i=(e.colour,e.name),l=e.sys_id,s=e.indexes,d=(e.d,e.showHeader),u=e.showTitle,c=(e.showBorder,e.description);r&&(t=s.sys_id[r][0]);var m={aggregateId:(null==a?void 0:a.length)>0?a:\"default\",breakdowns:r?[{breakdownId:r,breakdownLabel:t.name,elementIds:n&&\"unmatched\"!==n?[n]:[],perPage:20}]:[],colorSchemeId:\"\",description:c,enableDrilldown:!0,filterConfigurations:\"@state.parFilters\",followFilters:\"true\"===e.follow_element,heading:u?i:\"\",indicatorGroup:\"\",indicators:[],metrics:{fields:[\"lastScore\"]},nestedBreakdown:!0,pageSize:10,query:\"\",scorecardType:\"pivot\",showAlternateRowColors:!0,showBookmarkedOnly:!1,showBreakdownsOnly:!1,showColumnDividers:!1,showFavorite:!0,showFilterElement:!1,showFilterIcon:\"true\"===e.follow_element,showHeader:d,showIndicatorInfo:!0,sortBy:\"name\",sortDir:\"asc\",sourceType:\"1\",swapBreakdownsAsColumns:!o};if(s.widget_indicators_m2m[l]){var g=s.widget_indicators_m2m[l].sort(function(e,t){return parseInt(e.order,10)-parseInt(t.order,10)});g.length>m.pageSize&&(m.pageSize=g.length);var p,v=Z(g);try{for(v.s();!(p=v.n()).done;){var f,h=p.value;if(null!==(f=h.indicator)&&void 0!==f&&f.value){var y=s.sys_id[h.indicator.value][0];m.indicators.push({id:y.sys_id,label:y.name})}}}catch(e){v.e(e)}finally{v.f()}}return m}(T(n,{d:e,indexes:r},Q(o)));return i?(ee(e,t,r,i),{component_id:a,component_props:i}):e.migratingFromJava&&o?S(t,o):V(h)(e,t,r,o)}(e,r,o,n);case\"heatmap\":return function(e,t,r,a){re(e,t);var o=function(e,t,r){var a,o,n,i,l,s,d,u,c,m,g,p,v={type:\"default\"};null!==(a=e.max_color)&&void 0!==a&&a.value&&\"\"!==(null===(o=e.max_color)||void 0===o?void 0:o.value)&&(v={type:\"colorRange\",values:[{color:\"65b303c7a9fe3dba00629aff95ee3597\",id:\"minColor\"},{color:null===(p=e.max_color)||void 0===p?void 0:p.value,id:\"maxColor\"}]});var f,h,y=C(null===(n=e.indicator)||void 0===n?void 0:n.value),w=B(y),b=M(T(e,{indexes:t,dashboard:r})),S=t.sys_id[null===(i=e.indicator)||void 0===i?void 0:i.value][0],R=(f=e.filter,h={sortBy:\"value\",sortByOrder:\"desc\"},_(f,\"ORDERBY\")&&_(f,\"ASC\")&&(h.sortByOrder=\"asc\"),h);return{showZero:\"true\"===e.show_data_labels,showDataLabels:\"true\"===e.show_data_labels,showLegend:\"true\"===e.show_legend,legendPosition:\"bottom\",colorConfig:v,newReporting:!1,dataSources:[{isScriptedIndicator:\"true\"===S.scripted,allowRealTime:\"1\"===S.type,allowTotalValue:\"1\"===S.type,indicatorType:S.type,label:S.name,sourceType:\"indicator\",filterQuery:P(e.filter),preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],uuid:{breakdowns:b.breakdowns,indicator:null===(l=e.indicator)||void 0===l?void 0:l.value},id:y,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?null!==(s=e.name)&&void 0!==s?s:e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[{dataSource:y,id:w,aggregateIndicator:null!==(d=null===(u=e.aggregate)||void 0===u?void 0:u.value)&&void 0!==d?d:\"\",axisId:\"primary\",frequency:parseInt(null!==(c=null==S?void 0:S.frequency)&&void 0!==c?c:\"10\",10),numberFormat:x(parseInt(S.precision,10))}],groupBy:[{categoryIndex:0,groupBy:[{dataSource:y,groupByField:null===(m=e.breakdown)||void 0===m?void 0:m.value,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:\"true\"===e.others},{categoryIndex:1,groupBy:[{dataSource:y,groupByField:null===(g=e.breakdown_level2)||void 0===g?void 0:g.value,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1}],sortBy:R.sortBy,sortByOrder:R.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:\"true\"===e.follow_element,showFilterIcon:\"true\"===e.follow_element,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",configVersion:\"23.0.0-ci-SNAPSHOT\"}}(T(t,Q(a)),r,e);return o?{component_id:\"d1f6c60ce95607ea1ef236430d5fdec9\",component_props:o}:e.migratingFromJava&&a?S(t,a):V(h)(e,t,r,a)}(e,r,o,n);case\"pareto\":return function(e,t,r,a){re(e,t);var o=function(e,t,r){var a=j(e,t,r);return a.metrics[0].chartType=\"pareto\",a}(T(t,Q(a)),e,r);return o?(ee(e,t,r,o),{component_id:\"53e0a2b49e3ff92ba54ea7ea6f0d0583\",component_props:o}):e.migratingFromJava&&a?S(t,a):U(e,{static_content:g(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,r,o,n);default:r.visualization&&e.migrationNotes.push(I({message:R(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}))}}(o,n,i,l);return d&&d.component_id!=r&&d.component_id!=e?(function(e,t,r){var a,o=null==t||null===(a=t.widget_navigation)||void 0===a?void 0:a[e.sys_id];if(o){var n=o.filter(function(e){return\"true\"===e.active}).sort(function(e,t){return\"\"==e.order&&\"\"!=t.order?-1:\"\"==t.order&&\"\"!=e.order?1:e.order===t.order?e.label.localeCompare(t.label):e.order-t.order});o=n[0],Object.assign(r.component_props,{chartInteractionAction:\"goToUrl\",chartInteractionActionGoToURLInput:o.value,chartInteractionActionGoToURLPageName:o.label})}}(n,i,d),d):o.migratingFromJava&&l?S(n,l):U(o,{static_content:g(\"<b>Unknown widget type:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==n?void 0:n.type,\"</span> widget with viz <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null==n?void 0:n.visualization,\"</span> because there is no mapping.\"))})};this.run=function(e,t,r,a,o){for(var n=[],i=0;i<r.length;i++)try{var l,s=null===(l=e.sys_id[r[i]])||void 0===l?void 0:l[0],d={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0};if(s){var u=ie(d,s,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});u.migrationNotes=d.migrationNotes,u.oldSysId=r[i],n.push({answer:u,hasError:!1,oldSysId:r[i]})}}catch(e){n.push({error:e,hasError:!0,oldSysId:r[i]})}return n};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"33bf910aa33131108d80ad2f241e61ee","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-10-11 20:12:45","sys_name":"","sys_scope":"","macroponent":"","key":"paWidgetBatchScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"8","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e={DAY:1,WEEK:2,MONTH:3,QUARTER:4,FQ:5,YEAR:6,FY:7,WEEK2DATE:8,MONTH2DATE:9,QUARTER2DATE:10,FQ2DATE:11,YEAR2DATE:12,FY2DATE:13,WEEK_PLUS:14,MONTH_PLUS:15,QUARTER_PLUS:16,FQ_PLUS:17,YEAR_PLUS:18,FY_PLUS:19},r=10,t=20,a=40,o=60,n=65,i=80,l=85,s={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},d=function d(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},c=(d(\"content_block_static\",\"com.glide.cms.RenderBlock\"),d(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),d(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),d(\"\",\"com.glide.ui.portal.RenderReport\"),d(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),u=(d(-1,\"com.glideapp.home.RenderHomepagePublishers\"),d(4,\"com.glideapp.home.RenderHomepagePublishers\"),d(c,\"com.glideapp.home.RenderHomepagePublishers\"),d(2,\"com.glideapp.home.RenderHomepagePublishers\"),d(3,\"com.glideapp.home.RenderHomepagePublishers\"),d(5,\"com.glideapp.home.RenderHomepagePublishers\"),d(6,\"com.glideapp.home.RenderHomepagePublishers\"),d(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),d(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glide.ui.portal.RenderDashboard\"),d(\"report\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glide.ui.portal.RenderJavascript\"),d(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),d(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),d(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),d(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),o=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(n)||(i=\"=\",n%1);){if((t=a.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,o+=i.charAt(63&r>>8-n%1*8)}return o.toString()});function m(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,n=arguments[1],i=0;i<o;i++){var l=a[i];if(r.call(n,l,i,a))return t?i:l}}var p=function p(e,r){return{text:e,vars:r}},g=function g(e){var r=e.message,t=e.level,a=e.tooltip,o=e.originalArtifactSysId,n=e.artifactTable,i=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,d={text:r,level:t,help:a,originSysId:o,hasNewArtifact:i,table:n,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?d:v(d)},v=function v(e){var r,t,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},f=\"sys_choice\",h=function h(e){return u(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},_=function _(e){return u(e+new Date().getTime()+1e8*Math.random())},y=/[0-9a-f]{32}/,b=function b(e){return{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=e?e:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}};function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=t){var a,o,n,i,l=[],s=!0,d=!1;try{if(n=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(a=n.call(t)).done)&&(l.push(a.value),l.length!==r);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=t[\"return\"]&&(i=t[\"return\"](),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,r)||R(e,r)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function T(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=R(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function R(e,r){if(e){if(\"string\"==typeof e)return A(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,r):void 0}}function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var I=function e(r,t,a){var o,n,i,l,s,d,c=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(s=r.breakdown)&&void 0!==s&&s.value&&(i=r.breakdown_level2.value),!l&&r.element&&(l=r.element_level2)):(null!==(d=r.breakdown)&&void 0!==d&&d.value&&(i=r.breakdown.value),!l&&r.element&&(l=r.element)),i&&l&&\"unmatched\"!==l){var u=r.indexes.sys_id[i][0],m=l;r.indexes.sys_id[u.dimension.value][0].facts_table===f&&y.test(l)&&(m=r.indexes.sys_id[m][0].value);var v,h={sysId:i,elementSysIds:[m]};\"true\"===r.manual_elements&&h.elementSysIds.concat(null===(v=r.indexes.widget_elements[r.sys_id])||void 0===v?void 0:v.map(function(e){return\"unassigned\"===e.element?c:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(h.elementsFilterSysId=r.elements_filter.value,h.elementSysIds=[]),a.breakdowns.push(h)}else if(null!==(o=r.breakdown)&&void 0!==o&&o.value){var _=r.indexes.sys_id[i][0],b=r.indexes.sys_id[_.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(b.facts_table===f||\"pa_buckets\"===b.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:i,elementSysIds:[c]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:i,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var T,R,A;r.indexes.widget_elements&&0!==(null!==(T=null===(R=r.indexes.widget_elements[r.sys_id])||void 0===R?void 0:R.length)&&void 0!==T?T:0)?a.breakdowns.push({sysId:i,elementSysIds:null===(A=r.indexes.widget_elements[r.sys_id])||void 0===A?void 0:A.map(function(e){return\"unassigned\"===e.element?c:e.element})}):r.dashboard.migrationNotes.push(g({message:p(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:i,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(b.facts_table===f||\"pa_buckets\"===b.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:i,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[c],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(n=r.breakdown_level2)&&void 0!==n&&n.value&&!t?e(r,!0,a):a};function S(e,r){if(null!=r&&r.value&&\"column\"===e)return\"vertical_bar\";switch(e){case\"column_total\":case\"column\":case\"stacked\":return\"bar\";default:return e}}function k(d){var c=m(Object.keys(e),function(r){return e[r]===parseInt(d,10)});switch(e[c]){case e.DAY:return{frequency:r,frequencyInterval:c,dateRange:s.HOURLY};case e.WEEK:case e.WEEK2DATE:case e.WEEK_PLUS:return{frequency:t,frequencyInterval:c,dateRange:s.MONTHLY};case e.MONTH:case e.MONTH2DATE:case e.MONTH_PLUS:return{frequency:a,frequencyInterval:c,dateRange:s.MONTHLY};case e.QUARTER:case e.QUARTER2DATE:case e.QUARTER_PLUS:return{frequency:o,frequencyInterval:c,dateRange:s.YEARLY};case e.FQ:case e.FQ2DATE:case e.FQ_PLUS:return{frequency:n,frequencyInterval:c,dateRange:s.YEARLY};case e.YEAR:case e.YEAR2DATE:case e.YEAR_PLUS:return{frequency:i,frequencyInterval:c,dateRange:s.YEARLY};case e.FY:case e.FY2DATE:case e.FY_PLUS:return{frequency:l,frequencyInterval:c,dateRange:s.YEARLY};default:return{frequency:r,frequencyInterval:\"\",dateRange:s.YEARLY}}}var x=function x(e){e.colorType;var r,t,a,o,n=e.colorPalette,i=e.chartColor,l=e.showDataLabel,d=(e.showLegend,e.showTotal),c=e.yAxisTitle,u=e.yAxisFrom,v=e.yAxisTo,y=e.sysId,R=e.indicator,A=(e.element,e.breakdown),x=e.aggregate,E=e.sort_direction,F=e.sort_on,P=(e.breakdown_level2,e.color_scheme,e.description),B=e.name,O=e.showTitle,C=e.showHeader,L=e.showBorder,N=e.d,Y=e.indexes,D=e.showTarget,M=e.showThresholds,H=e.showTrend,J=e.showConfidence,U=e.showForecast,q=e.showComments,G=e.chartType,z=e.label,V=e.followElement,j=F,Q=E,W=A.value,K=null===(r=Y.sys_id[W])||void 0===r?void 0:r[0],Z=null===(t=Y.sys_id[null==K||null===(a=K.dimension)||void 0===a?void 0:a.value])||void 0===t?void 0:t[0],X=null==Z?void 0:Z.facts_table,$=X===f,ee=\"pa_buckets\"===X;\"default\"===F&&(j=$?\"choice\":ee?\"bucket\":\"name\"),-1===[\"name\",\"value\",\"default\"].indexOf(F)&&(j=\"value\",Q=\"desc\",N.migrationNotes.push(g({message:p(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:y,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:N.featureFlags})));var re=I(e);if(re.doMigration){var te,ae,oe=10;if(null!=x&&x.value){var ne=k(Y.sys_id[null==x?void 0:x.value][0].interval);oe=ne.frequency,te=ne.frequencyInterval,ae=ne.dateRange}var ie=function(e,r){var t={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},a=function a(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),a=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(a,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))t.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){t.showAbsolutePeriod=!0,t.startTime=a(null==e?void 0:e.from),t.endTime=a(null==e?void 0:e.to);var o=new Date;new Date(t.startTime)>o&&!t.endTime?t.endTime=t.startTime:t.startTime&&!t.endTime?t.useCurrentDateForEnd=!0:!t.startTime&&t.endTime&&(t.showMaximumRange=!0,t.endTime=null)}else{t.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var n=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),i=m(Object.keys(s),function(e){return s[e]===n},!0),l=m(Object.keys(s),function(e){return s[e]===r},!0);t.period=i<l?r:n}return t}(e.timePeriod,ae),le={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",colorConfig:{type:\"default\"},configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[],dateFormat:\"default\",description:P,disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null==ie?void 0:ie.endTime,extensionType:S(G,A),filterConfigurations:\"@state.parFilters\",followFilters:!0,showFilterAsSeparateSeries:\"separate\"===e.multiple_elements_view,groupBy:[],headerTitle:O?B:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!1,hideYAxis2:!1,hideYAxis3:!1,hideYAxis4:!1,legendExpandToFit:!0,legendHorizontalAlignment:\"center\",legendPosition:\"bottom\",lineStrokeWidth:\"2\",metrics:[],filterPerMetric:[],newReporting:!1,numberOfPeriods:null==ie?void 0:ie.numberOfPeriods,period:null==ie?void 0:ie.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null==ie?void 0:ie.showAbsolutePeriod,useCurrentDateForEnd:null==ie?void 0:ie.useCurrentDateForEnd,showBorder:L,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:q,showConfidenceBand:J,showDataLabels:l,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:U,showForecastRange:!1,showGapPercentage:null,showHeader:C,showHeaderSeparator:!1,showLegend:!0,showLegendValue:!1,showMaximumRange:null==ie?void 0:ie.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:D,showThreshold:M,showTotalAggregate:!1,showTotalValue:d,showTrend:H,showXGrid:!0,showYGrid:!0,showContinuousLine:!1,sortBy:j,sortByOrder:Q,startTime:null==ie?void 0:ie.startTime,telemetry:\"null\",trendBy:{},wrapTitle:!1,yAxis0Title:c,yAxis0To:v,yAxis0From:u,yAxisStyle:\"default\",allowChangeDateRange:!1,showDateRangeByDefault:!1},se=h(null==R?void 0:R.value),de=_(se),ce=Y.sys_id[null==R?void 0:R.value][0],ue={},me={metricId:de,dataSourceId:se};ue[\"\".concat(null==R?void 0:R.value,\":\").concat(JSON.stringify(re.breakdowns))]=me,le.dataSources=[{allowRealTime:\"1\"===ce.type,allowTotalValue:\"1\"===ce.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:se,indicatorType:ce.type,isScriptedIndicator:!1,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:re.breakdowns,indicator:null==R?void 0:R.value}}],re.groupBy&&(re.groupBy.dataSource=se,re.groupBy.metric=de,re.groupBy.isChoice=$,re.groupBy.isPaBucket=ee,le.groupBy=[{disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[re.groupBy],hideZeroValues:!1}]),le.metrics=[{dataSource:se,id:de,aggregateIndicator:null!==(o=null==x?void 0:x.value)&&void 0!==o?o:\"\",frequency:oe,frequencyInterval:te,label:z,numberFormat:b(parseInt(ce.precision,10)),chartType:S(G),axisId:\"primary\"}],le.filterPerMetric=[{metricId:de,value:V}],\"column\"==G&&null!=A&&A.value?le.dataLabelPosition=\"middle\":le.trendBy={trendByFields:[{field:\"anything\",metric:de}],trendByFrequency:\"date\",trendByMinuteInterval:null};var pe=function(e,r,t,a,o,n,i){var l,s=null!==(l=e.widget_indicators[r])&&void 0!==l?l:[];s.sort(function(e,r){return parseInt(e.order,10)-parseInt(r.order,10)});try{var d,c=T(s);try{for(c.s();!(d=c.n()).done;){var u,m,v=d.value;if(\"true\"!==v.follow_element){var f=null===(u=v.indicator)||void 0===u?void 0:u.value;e.sys_id[f][0].name,n.migrationNotes.push(g({message:p(\"This visualization is in compatibility mode because the additional indicators follow elements feature is not supported.\"),level:1,originalArtifactSysId:r,artifactTable:null===(m=e.sys_id[r][0])||void 0===m?void 0:m.sys_table_name,featureFlags:n.featureFlags}))}}}catch(e){c.e(e)}finally{c.f()}}catch(e){console.error(\"ERROR: Error occurred while handling widget indicators for widget: \".concat(i||r))}var y,w=!1,R={},A=T(s);try{for(A.s();!(y=A.n()).done;){var x,E,F,P=y.value,B=I({breakdown:P.breakdown,breakdown_level2:P.breakdown_level2,element:P.element,element_level2:P.element_level2,indexes:e,elements_filter:P.elements_filter,manual_elements:P.manual_elements}),O=void 0,C=void 0,L=e.sys_id[null===(x=P.indicator)||void 0===x?void 0:x.value][0];if(o[\"\".concat(null===(E=P.indicator)||void 0===E?void 0:E.value,\":\").concat(JSON.stringify(B.breakdowns))]){var N,Y;O=o[\"\".concat(null===(N=P.indicator)||void 0===N?void 0:N.value,\":\").concat(JSON.stringify(B.breakdowns))].dataSourceId,C=o[\"\".concat(null===(Y=P.indicator)||void 0===Y?void 0:Y.value,\":\").concat(JSON.stringify(B.breakdowns))].metricId}else{var D,M,H,J,U;O=h(null===(D=P.indicator)||void 0===D?void 0:D.value),C=_(O),o[null===(M=P.indicator)||void 0===M?void 0:M.value]={metricId:C,dataSourceId:O},t.dataSources.push({allowRealTime:\"1\"===L.type,allowTotalValue:\"1\"===L.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:O,indicatorType:L.type,isScriptedIndicator:!1,label:L.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:B.breakdowns,indicator:null===(H=P.indicator)||void 0===H?void 0:H.value}});var q=\"primary\";\"true\"===P.second_y_axis&&(t.yAxis1Title=P.label,t.yAxis1Position=\"right\",t.yAxis1From=\"\",t.yAxis1To=\"\",q=\"axis1\");var G=10,z=void 0,V=null!==(J=null===(U=P.aggregate)||void 0===U?void 0:U.value)&&void 0!==J?J:\"\";if(V){var j,Q=k((null===(j=e.sys_id[V])||void 0===j?void 0:j[0]).interval);G=Q.frequency,z=Q.frequencyInterval}var W={dataSource:O,id:C,aggregateIndicator:V,frequency:G,frequencyInterval:z,label:P.label,numberFormat:b(parseInt(L.precision,10)),chartType:S(P.chart_type),axisId:q},K={field:\"anything\",metric:C};\"stacked\"===P.chart_type&&(w=!0),t.metrics.push(W),t.filterPerMetric.push({metricId:C,value:\"true\"===(null==P?void 0:P.follow_element)}),t.trendBy.trendByFields.push(K)}B.groupBy&&(B.groupBy.dataSource=O,B.groupBy.metric=C,t.groupBy.push({disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[B.groupBy],hideZeroValues:!1})),\"\"!==P.color&&null!==(F=P.color)&&void 0!==F&&F.value&&(R[C]=P.color.value)}}catch(e){A.e(e)}finally{A.f()}return(t.metrics.length>1||t.groupBy.length>0)&&(t.showTarget=!1,t.showTrend=!1,t.showConfidenceBand=!1,t.showThreshold=!1,t.showComment=!1),{hasStackedColumn:w,widgetColors:R}}(Y,y,le,0,ue,N,B),ge=pe.hasStackedColumn,ve=pe.widgetColors;if(le.filterPerMetric.some(function(e){return null==e?void 0:e.value})||(le.followFilters=!1,le.showFilterIcon=!1),ge&&(le.extensionType=\"bar\",le.chartVariation=\"stacked\"),n&&n.length>0&&0===Object.keys(ve).length)le.colorConfig={type:\"palette\",palette:n};else if(le.metrics.length>1){var fe,he;fe=n&&n.length>0?w(null!==(he=Y.sys_id[n])&&void 0!==he?he:[],1)[0]:w(Y.sys_id[\"68d08c72d700210096614251ce61039e\"],1)[0];for(var _e=[],ye=0;ye<32;ye++){var be=\"color_\".concat(ye+1);if(\"\"===fe[be])break;_e.push(fe[be].value)}var we=0;le.colorConfig={type:\"colorsPerMetric\",values:le.metrics.map(function(e){var r;return e.id===de&&null!=i&&i.value?r=i.value:ve[e.id]?r=ve[e.id]:(r=_e[we%_e.length],we+=1),{metric:e.id,color:r}})}}else i&&1===le.metrics.length&&(le.colorConfig={type:\"singleColor\",values:[{color:i.value,metric:de}]});return le}N.migrationNotes.push(g({message:p(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:y,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:N.featureFlags}))},E=function E(e){switch(e.extensionType){case\"trend\":case\"bar\":return\"2bd5dc19a7ad083941b7c992a966dd78\";case\"line\":return\"18ac962264404bcc0039359d184b15f3\";case\"area\":return\"aba8630dc2ccc9b3c1774af1b6820696\";case\"step\":return\"7fa5f7264941fabfb1542985da30e0b8\";case\"spline\":return\"0f1e76928c4814e1430774fb864003f0\";case\"vertical_bar\":return\"23051643b7e03010097cb81cde11a910\"}};function F(e){return e?parseInt(e).toString():\"10\"}var P=function P(e,r,t,a){!function(e,r,t){for(var a=0,o=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:p(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:p(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<o.length;a++){var n=o[a];n.shouldLog&&e.migrationNotes.push(g(n.message))}}(e,r);var o,n=function(e){var r=e.indicator,t=e.element,a=e.show_data_labels,o=e.breakdown,n=e.aggregate,i=e.sort_direction,l=e.sort_on,s=e.breakdown_level2,d=e.element_level2,c=e.color_scheme,u=e.description,m=e.name,p=e.showTitle,g=e.type,v=e.period,f=e.date_from,h=e.date_to,_=e.show_range_selector,y=e.show_breakdown_selector,b=null==c?void 0:c.value,w=\"true\"===a,T=e.field,R=\"true\"===e.show_legend,A=e.set_color,I=\"true\"===e.show_total,S=e.yaxis_title,k=e.yaxis_from,x=e.yaxis_to,E=\"true\"===e.include_target,F=\"true\"===e.include_thresholds,P=\"true\"===e.include_trend,B=\"true\"===e.include_confidence,O=\"true\"===e.include_forecast,C=\"true\"===e.include_comments,L=e.compare_main_label,N=e.chart_color,Y=\"true\"===e.follow_element,D=e.multiple_elements_view,M={period:v,from:f,to:h};return{colorType:A,colorPalette:b,chartColor:N,showDataLabel:w,groupBy:T,showLegend:R,showTotal:I,yAxisTitle:S,yAxisFrom:k,yAxisTo:x,sysId:e.sys_id,indicator:r,element:t,show_data_labels:a,breakdown:o,aggregate:n,sort_direction:i,sort_on:l,breakdown_level2:s,color_scheme:c,description:u,name:m,showTitle:p,type:g,element_level2:d,timePeriod:M,showTarget:E,showThresholds:F,showTrend:P,showConfidence:B,showForecast:O,showComments:C,chartType:e.visualization,label:L,show_range_selector:_,followElement:Y,multiple_elements_view:D,show_breakdown_selector:y}}(r),i=function(e){var r=x(e);if(r)return r.chartVariation=e.stacked?\"stacked\":\"side-by-side\",r}(function(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}(n,{d:e,indexes:t,stacked:!0},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(a)));return i?(function(e,r,t,a){var o;if(\"breakdown\"===r.type)if(void 0!==a.groupBy&&a.groupBy.length>0){var n=a.groupBy[0].maxNumberOfGroups;a.groupBy[0].maxNumberOfGroups=r.show_top_x?parseInt(r.show_top_x).toString():F(n)}else if(void 0!==a.breakdowns&&a.breakdowns.length>0){var i=a.breakdowns[0].perPage;a.breakdowns[0].perPage=r.show_top_x?parseInt(r.show_top_x).toString():F(i)}else e.migrationNotes.push(g({message:p(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===r.show_breakdown_selector){var l=r.indicator.value,s=null===(o=t.indicator_breakdowns)||void 0===o?void 0:o[l];a.additionalGroupByConfig=(null==s?void 0:s.map(function(e){var r,a,o=null===(r=t.sys_id[null===(a=e.breakdown)||void 0===a?void 0:a.value])||void 0===r?void 0:r[0];return{id:null==o?void 0:o.sys_id,metricLabel:null==o?void 0:o.name}}))||[]}else a.additionalGroupByConfig=[]}(e,r,t,i),{component_id:E(i),component_props:i}):e.migratingFromJava&&a?function(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}}(r,a):function(e,r){var t={message:p(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(g({message:p(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(g(t))&&e.migrationNotes.push(g(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(o=\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(o,\"</p>\"))})};this.run=function(e,r,t,a,o){var n,i={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=P(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"3d3947dfa39031108d80ad2f241e615b","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:31:36","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/2bd5dc19a7ad083941b7c992a966dd78","value":"2bd5dc19a7ad083941b7c992a966dd78"},"key":"stackedPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e={DAY:1,WEEK:2,MONTH:3,QUARTER:4,FQ:5,YEAR:6,FY:7,WEEK2DATE:8,MONTH2DATE:9,QUARTER2DATE:10,FQ2DATE:11,YEAR2DATE:12,FY2DATE:13,WEEK_PLUS:14,MONTH_PLUS:15,QUARTER_PLUS:16,FQ_PLUS:17,YEAR_PLUS:18,FY_PLUS:19},r=10,t=20,a=40,o=60,n=65,i=80,l=85,s={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},d=function d(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},c=(d(\"content_block_static\",\"com.glide.cms.RenderBlock\"),d(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),d(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),d(\"\",\"com.glide.ui.portal.RenderReport\"),d(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),u=(d(-1,\"com.glideapp.home.RenderHomepagePublishers\"),d(4,\"com.glideapp.home.RenderHomepagePublishers\"),d(c,\"com.glideapp.home.RenderHomepagePublishers\"),d(2,\"com.glideapp.home.RenderHomepagePublishers\"),d(3,\"com.glideapp.home.RenderHomepagePublishers\"),d(5,\"com.glideapp.home.RenderHomepagePublishers\"),d(6,\"com.glideapp.home.RenderHomepagePublishers\"),d(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),d(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glide.ui.portal.RenderDashboard\"),d(\"report\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glide.ui.portal.RenderJavascript\"),d(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),d(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),d(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),d(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),o=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(n)||(i=\"=\",n%1);){if((t=a.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,o+=i.charAt(63&r>>8-n%1*8)}return o.toString()});function m(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,n=arguments[1],i=0;i<o;i++){var l=a[i];if(r.call(n,l,i,a))return t?i:l}}var p=function p(e,r){return{text:e,vars:r}},v=function v(e){var r=e.message,t=e.level,a=e.tooltip,o=e.originalArtifactSysId,n=e.artifactTable,i=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,d={text:r,level:t,help:a,originSysId:o,hasNewArtifact:i,table:n,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?d:g(d)},g=function g(e){var r,t,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},f=\"sys_choice\",h=function h(e){return u(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},_=function _(e){return u(e+new Date().getTime()+1e8*Math.random())},y=/[0-9a-f]{32}/,b=function b(e){return{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=e?e:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}};function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=t){var a,o,n,i,l=[],s=!0,d=!1;try{if(n=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(a=n.call(t)).done)&&(l.push(a.value),l.length!==r);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=t[\"return\"]&&(i=t[\"return\"](),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,r)||R(e,r)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function T(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=R(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function R(e,r){if(e){if(\"string\"==typeof e)return A(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,r):void 0}}function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var I=function e(r,t,a){var o,n,i,l,s,d,c=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(s=r.breakdown)&&void 0!==s&&s.value&&(i=r.breakdown_level2.value),!l&&r.element&&(l=r.element_level2)):(null!==(d=r.breakdown)&&void 0!==d&&d.value&&(i=r.breakdown.value),!l&&r.element&&(l=r.element)),i&&l&&\"unmatched\"!==l){var u=r.indexes.sys_id[i][0],m=l;r.indexes.sys_id[u.dimension.value][0].facts_table===f&&y.test(l)&&(m=r.indexes.sys_id[m][0].value);var g,h={sysId:i,elementSysIds:[m]};\"true\"===r.manual_elements&&h.elementSysIds.concat(null===(g=r.indexes.widget_elements[r.sys_id])||void 0===g?void 0:g.map(function(e){return\"unassigned\"===e.element?c:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(h.elementsFilterSysId=r.elements_filter.value,h.elementSysIds=[]),a.breakdowns.push(h)}else if(null!==(o=r.breakdown)&&void 0!==o&&o.value){var _=r.indexes.sys_id[i][0],b=r.indexes.sys_id[_.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(b.facts_table===f||\"pa_buckets\"===b.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:i,elementSysIds:[c]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:i,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var T,R,A;r.indexes.widget_elements&&0!==(null!==(T=null===(R=r.indexes.widget_elements[r.sys_id])||void 0===R?void 0:R.length)&&void 0!==T?T:0)?a.breakdowns.push({sysId:i,elementSysIds:null===(A=r.indexes.widget_elements[r.sys_id])||void 0===A?void 0:A.map(function(e){return\"unassigned\"===e.element?c:e.element})}):r.dashboard.migrationNotes.push(v({message:p(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:i,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(b.facts_table===f||\"pa_buckets\"===b.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:i,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[c],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(n=r.breakdown_level2)&&void 0!==n&&n.value&&!t?e(r,!0,a):a};function S(e,r){if(null!=r&&r.value&&\"column\"===e)return\"vertical_bar\";switch(e){case\"column_total\":case\"column\":case\"stacked\":return\"bar\";default:return e}}function E(d){var c=m(Object.keys(e),function(r){return e[r]===parseInt(d,10)});switch(e[c]){case e.DAY:return{frequency:r,frequencyInterval:c,dateRange:s.HOURLY};case e.WEEK:case e.WEEK2DATE:case e.WEEK_PLUS:return{frequency:t,frequencyInterval:c,dateRange:s.MONTHLY};case e.MONTH:case e.MONTH2DATE:case e.MONTH_PLUS:return{frequency:a,frequencyInterval:c,dateRange:s.MONTHLY};case e.QUARTER:case e.QUARTER2DATE:case e.QUARTER_PLUS:return{frequency:o,frequencyInterval:c,dateRange:s.YEARLY};case e.FQ:case e.FQ2DATE:case e.FQ_PLUS:return{frequency:n,frequencyInterval:c,dateRange:s.YEARLY};case e.YEAR:case e.YEAR2DATE:case e.YEAR_PLUS:return{frequency:i,frequencyInterval:c,dateRange:s.YEARLY};case e.FY:case e.FY2DATE:case e.FY_PLUS:return{frequency:l,frequencyInterval:c,dateRange:s.YEARLY};default:return{frequency:r,frequencyInterval:\"\",dateRange:s.YEARLY}}}var x=function x(e){e.colorType;var r,t,a,o,n=e.colorPalette,i=e.chartColor,l=e.showDataLabel,d=(e.showLegend,e.showTotal),c=e.yAxisTitle,u=e.yAxisFrom,g=e.yAxisTo,y=e.sysId,R=e.indicator,A=(e.element,e.breakdown),x=e.aggregate,F=e.sort_direction,k=e.sort_on,P=(e.breakdown_level2,e.color_scheme,e.description),O=e.name,C=e.showTitle,B=e.showHeader,L=e.showBorder,Y=e.d,N=e.indexes,D=e.showTarget,M=e.showThresholds,H=e.showTrend,J=e.showConfidence,U=e.showForecast,q=e.showComments,z=e.chartType,j=e.label,Q=e.followElement,G=k,V=F,W=A.value,K=null===(r=N.sys_id[W])||void 0===r?void 0:r[0],Z=null===(t=N.sys_id[null==K||null===(a=K.dimension)||void 0===a?void 0:a.value])||void 0===t?void 0:t[0],X=null==Z?void 0:Z.facts_table,$=X===f,ee=\"pa_buckets\"===X;\"default\"===k&&(G=$?\"choice\":ee?\"bucket\":\"name\"),-1===[\"name\",\"value\",\"default\"].indexOf(k)&&(G=\"value\",V=\"desc\",Y.migrationNotes.push(v({message:p(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:y,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:Y.featureFlags})));var re=I(e);if(re.doMigration){var te,ae,oe=10;if(null!=x&&x.value){var ne=E(N.sys_id[null==x?void 0:x.value][0].interval);oe=ne.frequency,te=ne.frequencyInterval,ae=ne.dateRange}var ie=function(e,r){var t={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},a=function a(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),a=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(a,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))t.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){t.showAbsolutePeriod=!0,t.startTime=a(null==e?void 0:e.from),t.endTime=a(null==e?void 0:e.to);var o=new Date;new Date(t.startTime)>o&&!t.endTime?t.endTime=t.startTime:t.startTime&&!t.endTime?t.useCurrentDateForEnd=!0:!t.startTime&&t.endTime&&(t.showMaximumRange=!0,t.endTime=null)}else{t.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var n=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),i=m(Object.keys(s),function(e){return s[e]===n},!0),l=m(Object.keys(s),function(e){return s[e]===r},!0);t.period=i<l?r:n}return t}(e.timePeriod,ae),le={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",colorConfig:{type:\"default\"},configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[],dateFormat:\"default\",description:P,disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null==ie?void 0:ie.endTime,extensionType:S(z,A),filterConfigurations:\"@state.parFilters\",followFilters:!0,showFilterAsSeparateSeries:\"separate\"===e.multiple_elements_view,groupBy:[],headerTitle:C?O:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!1,hideYAxis2:!1,hideYAxis3:!1,hideYAxis4:!1,legendExpandToFit:!0,legendHorizontalAlignment:\"center\",legendPosition:\"bottom\",lineStrokeWidth:\"2\",metrics:[],filterPerMetric:[],newReporting:!1,numberOfPeriods:null==ie?void 0:ie.numberOfPeriods,period:null==ie?void 0:ie.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null==ie?void 0:ie.showAbsolutePeriod,useCurrentDateForEnd:null==ie?void 0:ie.useCurrentDateForEnd,showBorder:L,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:q,showConfidenceBand:J,showDataLabels:l,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:U,showForecastRange:!1,showGapPercentage:null,showHeader:B,showHeaderSeparator:!1,showLegend:!0,showLegendValue:!1,showMaximumRange:null==ie?void 0:ie.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:D,showThreshold:M,showTotalAggregate:!1,showTotalValue:d,showTrend:H,showXGrid:!0,showYGrid:!0,showContinuousLine:!1,sortBy:G,sortByOrder:V,startTime:null==ie?void 0:ie.startTime,telemetry:\"null\",trendBy:{},wrapTitle:!1,yAxis0Title:c,yAxis0To:g,yAxis0From:u,yAxisStyle:\"default\",allowChangeDateRange:!1,showDateRangeByDefault:!1},se=h(null==R?void 0:R.value),de=_(se),ce=N.sys_id[null==R?void 0:R.value][0],ue={},me={metricId:de,dataSourceId:se};ue[\"\".concat(null==R?void 0:R.value,\":\").concat(JSON.stringify(re.breakdowns))]=me,le.dataSources=[{allowRealTime:\"1\"===ce.type,allowTotalValue:\"1\"===ce.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:se,indicatorType:ce.type,isScriptedIndicator:!1,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:re.breakdowns,indicator:null==R?void 0:R.value}}],re.groupBy&&(re.groupBy.dataSource=se,re.groupBy.metric=de,re.groupBy.isChoice=$,re.groupBy.isPaBucket=ee,le.groupBy=[{disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[re.groupBy],hideZeroValues:!1}]),le.metrics=[{dataSource:se,id:de,aggregateIndicator:null!==(o=null==x?void 0:x.value)&&void 0!==o?o:\"\",frequency:oe,frequencyInterval:te,label:j,numberFormat:b(parseInt(ce.precision,10)),chartType:S(z),axisId:\"primary\"}],le.filterPerMetric=[{metricId:de,value:Q}],\"column\"==z&&null!=A&&A.value?le.dataLabelPosition=\"middle\":le.trendBy={trendByFields:[{field:\"anything\",metric:de}],trendByFrequency:\"date\",trendByMinuteInterval:null};var pe=function(e,r,t,a,o,n,i){var l,s=null!==(l=e.widget_indicators[r])&&void 0!==l?l:[];s.sort(function(e,r){return parseInt(e.order,10)-parseInt(r.order,10)});try{var d,c=T(s);try{for(c.s();!(d=c.n()).done;){var u,m,g=d.value;if(\"true\"!==g.follow_element){var f=null===(u=g.indicator)||void 0===u?void 0:u.value;e.sys_id[f][0].name,n.migrationNotes.push(v({message:p(\"This visualization is in compatibility mode because the additional indicators follow elements feature is not supported.\"),level:1,originalArtifactSysId:r,artifactTable:null===(m=e.sys_id[r][0])||void 0===m?void 0:m.sys_table_name,featureFlags:n.featureFlags}))}}}catch(e){c.e(e)}finally{c.f()}}catch(e){console.error(\"ERROR: Error occurred while handling widget indicators for widget: \".concat(i||r))}var y,w=!1,R={},A=T(s);try{for(A.s();!(y=A.n()).done;){var x,F,k,P=y.value,O=I({breakdown:P.breakdown,breakdown_level2:P.breakdown_level2,element:P.element,element_level2:P.element_level2,indexes:e,elements_filter:P.elements_filter,manual_elements:P.manual_elements}),C=void 0,B=void 0,L=e.sys_id[null===(x=P.indicator)||void 0===x?void 0:x.value][0];if(o[\"\".concat(null===(F=P.indicator)||void 0===F?void 0:F.value,\":\").concat(JSON.stringify(O.breakdowns))]){var Y,N;C=o[\"\".concat(null===(Y=P.indicator)||void 0===Y?void 0:Y.value,\":\").concat(JSON.stringify(O.breakdowns))].dataSourceId,B=o[\"\".concat(null===(N=P.indicator)||void 0===N?void 0:N.value,\":\").concat(JSON.stringify(O.breakdowns))].metricId}else{var D,M,H,J,U;C=h(null===(D=P.indicator)||void 0===D?void 0:D.value),B=_(C),o[null===(M=P.indicator)||void 0===M?void 0:M.value]={metricId:B,dataSourceId:C},t.dataSources.push({allowRealTime:\"1\"===L.type,allowTotalValue:\"1\"===L.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:C,indicatorType:L.type,isScriptedIndicator:!1,label:L.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:O.breakdowns,indicator:null===(H=P.indicator)||void 0===H?void 0:H.value}});var q=\"primary\";\"true\"===P.second_y_axis&&(t.yAxis1Title=P.label,t.yAxis1Position=\"right\",t.yAxis1From=\"\",t.yAxis1To=\"\",q=\"axis1\");var z=10,j=void 0,Q=null!==(J=null===(U=P.aggregate)||void 0===U?void 0:U.value)&&void 0!==J?J:\"\";if(Q){var G,V=E((null===(G=e.sys_id[Q])||void 0===G?void 0:G[0]).interval);z=V.frequency,j=V.frequencyInterval}var W={dataSource:C,id:B,aggregateIndicator:Q,frequency:z,frequencyInterval:j,label:P.label,numberFormat:b(parseInt(L.precision,10)),chartType:S(P.chart_type),axisId:q},K={field:\"anything\",metric:B};\"stacked\"===P.chart_type&&(w=!0),t.metrics.push(W),t.filterPerMetric.push({metricId:B,value:\"true\"===(null==P?void 0:P.follow_element)}),t.trendBy.trendByFields.push(K)}O.groupBy&&(O.groupBy.dataSource=C,O.groupBy.metric=B,t.groupBy.push({disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[O.groupBy],hideZeroValues:!1})),\"\"!==P.color&&null!==(k=P.color)&&void 0!==k&&k.value&&(R[B]=P.color.value)}}catch(e){A.e(e)}finally{A.f()}return(t.metrics.length>1||t.groupBy.length>0)&&(t.showTarget=!1,t.showTrend=!1,t.showConfidenceBand=!1,t.showThreshold=!1,t.showComment=!1),{hasStackedColumn:w,widgetColors:R}}(N,y,le,0,ue,Y,O),ve=pe.hasStackedColumn,ge=pe.widgetColors;if(le.filterPerMetric.some(function(e){return null==e?void 0:e.value})||(le.followFilters=!1,le.showFilterIcon=!1),ve&&(le.extensionType=\"bar\",le.chartVariation=\"stacked\"),n&&n.length>0&&0===Object.keys(ge).length)le.colorConfig={type:\"palette\",palette:n};else if(le.metrics.length>1){var fe,he;fe=n&&n.length>0?w(null!==(he=N.sys_id[n])&&void 0!==he?he:[],1)[0]:w(N.sys_id[\"68d08c72d700210096614251ce61039e\"],1)[0];for(var _e=[],ye=0;ye<32;ye++){var be=\"color_\".concat(ye+1);if(\"\"===fe[be])break;_e.push(fe[be].value)}var we=0;le.colorConfig={type:\"colorsPerMetric\",values:le.metrics.map(function(e){var r;return e.id===de&&null!=i&&i.value?r=i.value:ge[e.id]?r=ge[e.id]:(r=_e[we%_e.length],we+=1),{metric:e.id,color:r}})}}else i&&1===le.metrics.length&&(le.colorConfig={type:\"singleColor\",values:[{color:i.value,metric:de}]});return le}Y.migrationNotes.push(v({message:p(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:y,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:Y.featureFlags}))},F=function F(e){switch(e.extensionType){case\"trend\":case\"bar\":return\"2bd5dc19a7ad083941b7c992a966dd78\";case\"line\":return\"18ac962264404bcc0039359d184b15f3\";case\"area\":return\"aba8630dc2ccc9b3c1774af1b6820696\";case\"step\":return\"7fa5f7264941fabfb1542985da30e0b8\";case\"spline\":return\"0f1e76928c4814e1430774fb864003f0\";case\"vertical_bar\":return\"23051643b7e03010097cb81cde11a910\"}},k=function k(e,r,t,a){!function(e,r,t){for(var a=0,o=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:p(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:p(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<o.length;a++){var n=o[a];n.shouldLog&&e.migrationNotes.push(v(n.message))}}(e,r);var o,n=function(e){var r=e.indicator,t=e.element,a=e.show_data_labels,o=e.breakdown,n=e.aggregate,i=e.sort_direction,l=e.sort_on,s=e.breakdown_level2,d=e.element_level2,c=e.color_scheme,u=e.description,m=e.name,p=e.showTitle,v=e.type,g=e.period,f=e.date_from,h=e.date_to,_=e.show_range_selector,y=e.show_breakdown_selector,b=null==c?void 0:c.value,w=\"true\"===a,T=e.field,R=\"true\"===e.show_legend,A=e.set_color,I=\"true\"===e.show_total,S=e.yaxis_title,E=e.yaxis_from,x=e.yaxis_to,F=\"true\"===e.include_target,k=\"true\"===e.include_thresholds,P=\"true\"===e.include_trend,O=\"true\"===e.include_confidence,C=\"true\"===e.include_forecast,B=\"true\"===e.include_comments,L=e.compare_main_label,Y=e.chart_color,N=\"true\"===e.follow_element,D=e.multiple_elements_view,M={period:g,from:f,to:h};return{colorType:A,colorPalette:b,chartColor:Y,showDataLabel:w,groupBy:T,showLegend:R,showTotal:I,yAxisTitle:S,yAxisFrom:E,yAxisTo:x,sysId:e.sys_id,indicator:r,element:t,show_data_labels:a,breakdown:o,aggregate:n,sort_direction:i,sort_on:l,breakdown_level2:s,color_scheme:c,description:u,name:m,showTitle:p,type:v,element_level2:d,timePeriod:M,showTarget:F,showThresholds:k,showTrend:P,showConfidence:O,showForecast:C,showComments:B,chartType:e.visualization,label:L,show_range_selector:_,followElement:N,multiple_elements_view:D,show_breakdown_selector:y}}(r),i=x(function(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}(n,{d:e,indexes:t},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(a)));return i?{component_id:F(i),component_props:i}:e.migratingFromJava&&a?function(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}}(r,a):function(e,r){var t={message:p(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(v({message:p(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(v(t))&&e.migrationNotes.push(v(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(o=\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(o,\"</p>\"))})};this.run=function(e,r,t,a,o){var n,i={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=k(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"42c607dfa39031108d80ad2f241e61f2","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:27:28","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/aba8630dc2ccc9b3c1774af1b6820696","value":"aba8630dc2ccc9b3c1774af1b6820696"},"key":"areaPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"metricBase\",r={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},t=function t(e){for(var r,t,o=\"\".concat(e),i=\"\",n=0,a=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(n)||(a=\"=\",n%1);){if((t=o.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,i+=a.charAt(63&r>>8-n%1*8)}return i.toString()},o=function o(e,r){return void 0!==e&&void 0!==r&&e.indexOf(r)>-1},i=function i(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,i=0;i<e.length;i++)e.charAt(i)!==r||(t.push(e.substring(o,i)),o=i+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function n(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),i=o.length>>>0,n=arguments[1],a=0;a<i;a++){var l=o[a];if(r.call(n,l,a,o))return t?a:l}}function a(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var l=function l(e,r){return{text:e,vars:r}},s=function s(e){var r=e.message,t=e.level,o=e.tooltip,i=e.originalArtifactSysId,n=e.artifactTable,a=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,u={text:r,level:t,help:o,originSysId:i,hasNewArtifact:a,table:n,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?u:d(u)},d=function d(e){var r,t,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},u=\"sys_report\";function c(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,a=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return a=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{a||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var g=function g(e){return t(\"table\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},p=function p(e){return t(e+new Date().getTime()+1e8*Math.random())},f=function f(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,o=i(e,\"^\"),a=[],l=c(o);try{var s=function s(){var e=t.value;if(n(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";a.push(e)};for(l.s();!(t=l.n()).done;)s()}catch(e){l.e(e)}finally{l.f()}return a.join(\"^\")};function v(e){return v=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},v(e)}var h=function h(e){return{durationFormat:b(a(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},y=function y(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=b(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},b=function b(e,r,t){var o=JSON.parse(JSON.stringify(r)),i=!1;for(var n in t)void 0!==o[t[n]]&&e[n]!==o[t[n]]&&(i=!0,o[t[n]]=e[n]);return!!i&&o},_=function _(e,r,t,o,i){var n={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},a={durationFormattingProperties:h,numberFormattingProperties:y};switch(i){case\"heatmap\":case\"box\":return\"glide_duration\"===t?n:a.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===v(e)&&a.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return a.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(a[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return a[s](e[s][d],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:n},w=function w(e){return e.join(\":\")},T=function T(e,r,t){return n(Object.keys(e),function(e){return e===r})?e[r].dataSourceId:g(t)},A=function A(e,r,t){var o=n(e,function(e){return e.id===r}),i=!1;return o&&o.filterQuery===t||(i=!0),i};function R(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return F(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?F(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,a=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return a=e.done,e},e:function e(_e5){l=!0,n=_e5},f:function f(){try{a||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function F(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function S(e){switch(e){case\"line_bar\":return\"bar\";case\"step_line\":return\"step\";default:return e}}var x=function x(e,t){var o={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},i=function i(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),o=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(o,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))o.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){o.showAbsolutePeriod=!0,o.startTime=i(null==e?void 0:e.from),o.endTime=i(null==e?void 0:e.to);var a=new Date;new Date(o.startTime)>a&&!o.endTime?o.endTime=o.startTime:o.startTime&&!o.endTime?o.useCurrentDateForEnd=!0:!o.startTime&&o.endTime&&(o.showMaximumRange=!0,o.endTime=null)}else{o.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var l=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),s=n(Object.keys(r),function(e){return r[e]===l},!0),d=n(Object.keys(r),function(e){return r[e]===t},!0);o.period=s<d?t:l}return o},O=function O(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},I=function I(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},P=(I(\"content_block_static\",\"com.glide.cms.RenderBlock\"),I(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),I(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),I(\"\",\"com.glide.ui.portal.RenderReport\"),I(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),C=(I(P.group,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.group2,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.single,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.multi,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.date,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.bool,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),I(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),I(P.debug,\"com.glideapp.home.RenderHomepagePublishers\"),I(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"\",\"com.glide.ui.portal.RenderDashboard\"),I(\"report\",\"com.glide.ui.portal.RenderJavascript\"),I(\"\",\"com.glide.ui.portal.RenderJavascript\"),I(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),I(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),I(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),I(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),B=function B(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},N=function N(e,r){var t={message:l(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(s({message:l(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(s(t))&&e.migrationNotes.push(s(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},E=function E(r,t,d,m){var v,h=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(s({message:l(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(r,t),y=function(e){var r,t,o,n,a=e.table,l=e.aggregateFieldType,s=e.filter,d=e.groupByMetadata,u=e.chart_title||e.title,c=null===(r=e.color_palette)||void 0===r?void 0:r.value,m=e.show_chart_data_label,g=e.field,p=e.legend_horizontal_alignment,f=e.legend_vertical_alignment,v=e.show_legend,h=e.decimal_precision,y=e.show_chart_border,b=e.source_type,_=e.aggregate,w=e.other_threshold,T=e.sumfield,A=i(e.colors,\",\"),R=e.set_color,F=null===(t=e.color)||void 0===t?void 0:t.value,S=e.show_chart_total,x=e.trend_field,O=e.interval,I=e.x_axis_title,P=e.x_axis_display_grid,C=e.y_axis_display_grid,B=e.y_axis_title,N=e.y_axis_from,E=e.y_axis_to,D=e.y_axis_opposite,k=e.show_marker;try{n=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(r){console.log(\"Unable to transform json 2\",r.toString(),e),n={}}var J=null===(o=e.report_source)||void 0===o?void 0:o.value,M=e.is_real_time,H=e.bar_unstack,U=e.series_name_text,L={};try{var j;e.custom_config&&\"\"!==e.custom_config&&(L=null===(j=JSON.parse(e.custom_config))||void 0===j?void 0:j.transforms)}catch(r){console.log(\"Unable to transform widget.custom_config to json \",r.toString(),e.custom_config),L={}}var z=e.start_time,G=e.end_time,Y=e.display_grid;return{table:a,chartTitle:u,colorType:R,colorPalette:c,singleColor:F,showDataLabel:m,groupBy:g,legendVerticalAlignment:f,legendHorizontalAlignment:p,showLegend:v,numberOfPeriods:h,showChartBorder:y,sourceType:b,aggregateType:_,otherThreshold:w,filter:s,aggregateField:T,colors:A,showTotal:S,trendBy:x,trendInterval:O,xAxisTitle:I,xAxisShowGrid:P,yAxisShowGrid:C,yAxisTitle:B,yAxisFrom:N,yAxisTo:E,yAxisOpposite:D,formattingConfiguration:n,reportSource:J,reportId:e.sys_id,isRealTime:M,isGroupedBars:H,aggregateFieldType:l,dataSetName:U,groupByMetadata:d,customConfig:L,startTime:z,endTime:G,showMarkers:k,showDataTable:Y}}(t),b=function(r){var t=function(r){var t,i,d,m,v,h,y,b,F=r.table,O=r.chartTitle,I=r.colorPalette,P=r.showDataLabel,C=r.groupBy,B=r.showOthers,N=r.legendHorizontalAlignment,E=r.legendVerticalAlignment,D=r.numberOfPeriods,k=(r.showChartBorder,r.sourceType),J=r.aggregateType,M=r.otherThreshold,H=r.filter,U=r.showLegend,L=r.aggregateField,j=r.colorType,z=r.trendBy,G=r.trendInterval,Y=r.xAxisTitle,V=r.xAxisShowGrid,W=r.yAxisShowGrid,Z=r.yAxisTitle,Q=r.yAxisFrom,q=r.yAxisTo,X=r.yAxisOpposite,$=r.formattingConfiguration,K=r.reportSource,ee=r.reportId,re=r.aggregateFieldType,te=r.d,oe=r.showHeader,ie=r.showTitle,ne=r.showBorder,ae=r.indexes,le=(r.dataSetName,r.groupByMetadata),se=r.singleColor,de=r.customConfig,ue=r.startTime,ce=r.endTime,me=r.colors,ge=r.showMarkers,pe=r.showDataTable,fe=function(e,r){var t,i=\"value\",n=\"desc\";if(o(e,\"ORDERBY\")&&(i=\"name\",o(e,\"DESC\")||(n=\"asc\")),r&&!o(e,\"ORDERBY\")){var a=r.type,l=r.internalType;n=\"asc\",\"date\"===(t=a)||\"datetime\"===t||\"due_date\"===t||\"glide_date\"===t||\"glide_date_time\"===t||\"glide_precise_time\"===t?i=\"report_range\":function(e){return\"integer\"===e||\"decimal\"===e||\"numeric\"===e||\"float\"===e||\"domain_number\"===e||\"auto_increment\"===e||\"percent_complete\"===e}(a)?i=\"value\":\"choice\"===a&&\"integer\"===l?i=\"choice\":\"reference\"===a||\"choice\"===a&&\"string\"===l?i=\"name\":n=\"desc\"}return{sortBy:i,sortByOrder:n}}(H,le),ve=f(H),he=function(e,r){var t={register:\"\",horizontal:\"\",orientation:\"vertical\"};function o(){t.horizontal=\"center\",\"left\"===e&&(t.horizontal=\"start\"),\"right\"===e&&(t.horizontal=\"end\")}return\"right\"===e?(t.register=\"right\",t.horizontal=\"center\"):\"left\"===e&&(t.register=\"left\",t.horizontal=\"center\"),\"bottom\"===r||\"center\"===r||\"middle\"===e?(t.register=\"bottom\",t.orientation=\"horizontal\",o()):\"top\"===r&&(t.orientation=\"horizontal\",t.register=\"top\",o()),t}(N,E),ye=function(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(r){return e}}(M),be=_($,parseInt(D,10),re,J),_e=g(F),we=p(_e),Te={},Ae=w([F,null==K?void 0:K.value,ve]);Te[Ae]={metricId:we,dataSourceId:_e,metricColor:se};var Re,Fe=!1;switch(G){case\"dayofweek\":b=\"dayOfWeek\",Fe=!0;break;case\"hour\":b=\"hourOfDay\",Fe=!0;break;default:b=G}if(32===G.length&&(b=G),\"metricbase\"===k){var Se={period:0===(null==ue?void 0:ue.indexOf(\"P\"))?ue.slice(1):\"between\",from:ue,to:ce};D=(Re=x(Se,\"1D\")).numberOfPeriods,k=e,delete be.durationFormat,delete be.dateFormat,delete be.stringFormat}var xe={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:ve,id:_e,isDatabaseView:!1,label:void 0,reportSourceSysId:K,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===k||0===k.length?\"table\":k,tableOrViewName:k!==e?F:void 0,table:k===e?F:void 0}],dateFormat:\"default\",disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null===(t=Re)||void 0===t?void 0:t.endTime,extensionType:\"area\",filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:(null!==(i=null==C?void 0:C.length)&&void 0!==i?i:0)>0?[{disableRanges:!1,groupBy:[{dataSource:_e,groupByField:C,isChoice:\"choice\"===(null==le?void 0:le.type),isPaBucket:!1,isRange:null==le?void 0:le.isRange,metric:we}],hideZeroValues:!1,maxNumberOfGroups:null!=le&&le.isRange?\"ALL\":ye,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==le||!le.isRange)&&\"true\"===B}]:[],headerTitle:ie?O:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!0,hideYAxis2:!0,hideYAxis3:!0,hideYAxis4:!0,legendExpandToFit:!0,legendHorizontalAlignment:he.horizontal,legendPosition:he.register,lineStrokeWidth:\"2\",metrics:[a({aggregateFunction:(null==J?void 0:J.length)>0?J:\"COUNT\",axisId:\"primary\",dataSource:_e,id:we,label:void 0,transforms:de},be)],newReporting:!1,numberOfPeriods:parseInt(D,10),period:null===(d=Re)||void 0===d?void 0:d.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null===(m=Re)||void 0===m?void 0:m.showAbsolutePeriod,showBorder:ne,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===P,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:null,showHeader:oe,showHeaderSeparator:!1,showLegend:\"true\"===U,showLegendValue:!1,showMaximumRange:null===(v=Re)||void 0===v?void 0:v.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showContinuousLine:!0,enableAddZerosAtApi:Fe,showMarkers:\"true\"===ge,showTotalValue:null,showTrend:!1,showXGrid:\"true\"===V,showYGrid:\"true\"===W,sortBy:fe.sortBy,sortByOrder:fe.sortByOrder,startTime:null===(h=Re)||void 0===h?void 0:h.startTime,telemetry:\"null\",trendBy:{trendByFields:[{field:z,metric:we}],trendByFrequency:b,trendByMinuteInterval:null},wrapTitle:!1,xAxisTitle:Y,yAxis0From:Q,yAxis0Position:\"true\"===X?\"right\":\"left\",yAxis0Title:Z,yAxis0To:q,showDataTable:\"true\"===pe};L&&\"COUNT\"!==J&&\"\"!==L&&(xe.metrics[0].aggregateField=L);var Oe,Ie=R(null!==(y=ae.report_layers[ee])&&void 0!==y?y:[]);try{for(Ie.s();!(Oe=Ie.n()).done;){var Pe,Ce,Be,Ne,Ee=Oe.value,De=xe.dataSources.map(function(e){return e.tableOrViewName}).concat(xe.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),ke=f(Ee.filter);Ae=w([F,null==K?void 0:K.value,ke,Ee.sys_id]);var Je=T(Te,Ae,Ee.table);Te[Ae]={metricId:p(Je),dataSourceId:Je,metricColor:null===(Pe=Ee.color)||void 0===Pe?void 0:Pe.value};var Me,He=A(xe.dataSources,Je,ke);if((!o(De,Ee.table)&&!o(De,Ee.report_source)||He)&&xe.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:Ee.table,filterQuery:ke,reportSourceSysId:null===(Me=Ee.report_source)||void 0===Me?void 0:Me.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:Je,dataCategories:[\"trend\",\"group\",\"simple\"]}),xe.metrics.push(a({dataSource:Te[Ae].dataSourceId,id:Te[Ae].metricId,aggregateFunction:Ee.aggregate,aggregateField:\"COUNT\"===Ee.aggregate&&\"\"!==Ee.sumfield?void 0:Ee.sumfield,axisId:\"primary\",label:(null===(Ce=Ee.series_name_text)||void 0===Ce?void 0:Ce.length)>0?Ee.series_name_text:void 0,chartType:S(Ee.type)},_(Ee.formatting_configuration,parseInt(D,10),Ee.aggregateFieldType,Ee.aggregateType))),(null===(Be=Ee.trend_field)||void 0===Be?void 0:Be.length)>0&&xe.trendBy.trendByFields.push({field:Ee.trend_field,metric:Te[Ae].metricId}),(null===(Ne=Ee.field)||void 0===Ne?void 0:Ne.length)>0||xe.groupBy.length>0)return void te.migrationNotes.push(s({message:l(\"This visualization is in compatibility mode because the group by configuration is not supported for this metric.\"),level:1,originalArtifactSysId:ee,artifactTable:u,featureFlags:te.featureFlags}))}}catch(e){Ie.e(e)}finally{Ie.f()}return xe.colorConfig=function(e){var r=e.colorPalette,t=e.colorType,o=e.dashboard,i=e.reportId,a=e.enableColorPerMetric,d=e.singleColor,m=e.metrics,g=e.colorList,p=e.metricMap;if(m&&p&&!o.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var f={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)f.type=\"palette\",f.palette=r;else if(\"several_colors\"===t)!g||Array.isArray(g)&&!n(g,function(e){return\"\"!==e})?f.type=\"chartColor\":o.migrationNotes.push(s({message:l(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:l(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:i,artifactTable:u,featureFlags:o.featureFlags}));else if(\"chart_colors\"===t)f.type=\"chartColor\";else if(\"one_color\"===t&&((null==d?void 0:d.length)>0||n(Object.keys(null!=p?p:{}),function(e){var r;return(null===(r=p[e].metricColor)||void 0===r?void 0:r.length)>0})))if(p){for(var v=a?\"colorsPerMetric\":\"singleColor\",h=[],y=0,b=Object.keys(p);y<b.length;y++){var _,w=b[y];h.push({metric:p[w].metricId,color:null!==(_=p[w].metricColor)&&void 0!==_?_:\"de699435d7033100b4964ebfae610331\"})}f.type=v,f.values=h}else{var T,A=[],R=c(null!=m?m:[]);try{for(R.s();!(T=R.n()).done;){var F=T.value;A.push({color:d,metric:F})}}catch(e){R.e(e)}finally{R.f()}f.type=\"singleColor\",f.values=A}return f}({colorPalette:I,colorType:j,dashboard:te,reportId:ee,singleColor:se,colorList:me,enableColorPerMetric:!0,metricMap:Te}),xe}(r);if(t)return t.extensionType=\"step\",t}(a(y,{d:r,indexes:d},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(m)));return!b||h?r.migratingFromJava&&m?B(t,m):(v=\"report\",function(e,r,t,o){var i;return(i=v===C?function(){for(var e in P)if(P[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===v||v===C?function(e,r,t,o){var i,n,a;return e.migratingFromJava&&o?B(r,o):N(e,{static_content:O(\"<b>Unsupported migration: \".concat(null!==(i=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(a=o.type)||void 0===a?void 0:a.value,\"</span> widget.\"))})}(e,a(r,{type:i}),0,o):function(e,r,t,o){var i,n,a;return e.migratingFromJava&&o?B(r,o):N(e,{static_content:O(\"<b>Unsupported migration: \".concat(null!==(i=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(a=o.type)||void 0===a?void 0:a.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var i,n,a,d;if(e.migratingFromJava&&o)return B(r,o);var u=\"\";null!=r&&r.type?u=r.type:null!=o&&null!==(i=o.type)&&void 0!==i&&i.value?u=null==o||null===(n=o.type)||void 0===n?void 0:n.value:null!=o&&null!==(a=o.renderer)&&void 0!==a&&a.value&&(u=o.renderer.value);var c=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),N(e,{static_content:O(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(u,\": \").concat(c,\"</span> widget.\"))})}(e,r,0,o)})(r,t,d,m):(function(e,r,t){if(e.additional_groupby){t.showAdditionalGroupBySelector=!0;var o=i(e.additional_groupby,\",\");-1===o.indexOf(e.field)&&o.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&o.push(e.trend_field),t.additionalGroupByConfig=[],o.forEach(function(e){t.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(t,0,b),{component_id:\"7fa5f7264941fabfb1542985da30e0b8\",component_props:b})};this.run=function(e,r,t,o,i){var n,a={migratingFromJava:!0,migrationNotes:[],featureFlags:i,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=E(a,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=a.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"456564a7b7232110997a9f78ce11a98a","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:27:14","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/7fa5f7264941fabfb1542985da30e0b8","value":"7fa5f7264941fabfb1542985da30e0b8"},"key":"stepLineReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"metricBase\",r={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},t=function t(e){for(var r,t,o=\"\".concat(e),i=\"\",n=0,a=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(n)||(a=\"=\",n%1);){if((t=o.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,i+=a.charAt(63&r>>8-n%1*8)}return i.toString()},o=function o(e,r){return void 0!==e&&void 0!==r&&e.indexOf(r)>-1},i=function i(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,i=0;i<e.length;i++)e.charAt(i)!==r||(t.push(e.substring(o,i)),o=i+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function n(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),i=o.length>>>0,n=arguments[1],a=0;a<i;a++){var l=o[a];if(r.call(n,l,a,o))return t?a:l}}function a(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var l=function l(e,r){return{text:e,vars:r}},s=function s(e){var r=e.message,t=e.level,o=e.tooltip,i=e.originalArtifactSysId,n=e.artifactTable,a=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,u={text:r,level:t,help:o,originSysId:i,hasNewArtifact:a,table:n,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?u:d(u)},d=function d(e){var r,t,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},u=\"sys_report\";function c(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,a=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return a=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{a||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var g=function g(e){return t(\"table\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},p=function p(e){return t(e+new Date().getTime()+1e8*Math.random())},f=function f(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,o=i(e,\"^\"),a=[],l=c(o);try{var s=function s(){var e=t.value;if(n(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";a.push(e)};for(l.s();!(t=l.n()).done;)s()}catch(e){l.e(e)}finally{l.f()}return a.join(\"^\")};function v(e){return v=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},v(e)}var h=function h(e){return{durationFormat:b(a(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},y=function y(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=b(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},b=function b(e,r,t){var o=JSON.parse(JSON.stringify(r)),i=!1;for(var n in t)void 0!==o[t[n]]&&e[n]!==o[t[n]]&&(i=!0,o[t[n]]=e[n]);return!!i&&o},_=function _(e,r,t,o,i){var n={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},a={durationFormattingProperties:h,numberFormattingProperties:y};switch(i){case\"heatmap\":case\"box\":return\"glide_duration\"===t?n:a.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===v(e)&&a.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return a.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(a[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return a[s](e[s][d],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:n},w=function w(e){return e.join(\":\")},T=function T(e,r,t){return n(Object.keys(e),function(e){return e===r})?e[r].dataSourceId:g(t)},A=function A(e,r,t){var o=n(e,function(e){return e.id===r}),i=!1;return o&&o.filterQuery===t||(i=!0),i};function R(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return F(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?F(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,a=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return a=e.done,e},e:function e(_e5){l=!0,n=_e5},f:function f(){try{a||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function F(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function S(e){switch(e){case\"line_bar\":return\"bar\";case\"step_line\":return\"step\";default:return e}}var x=function x(e,t){var o={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},i=function i(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),o=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(o,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))o.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){o.showAbsolutePeriod=!0,o.startTime=i(null==e?void 0:e.from),o.endTime=i(null==e?void 0:e.to);var a=new Date;new Date(o.startTime)>a&&!o.endTime?o.endTime=o.startTime:o.startTime&&!o.endTime?o.useCurrentDateForEnd=!0:!o.startTime&&o.endTime&&(o.showMaximumRange=!0,o.endTime=null)}else{o.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var l=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),s=n(Object.keys(r),function(e){return r[e]===l},!0),d=n(Object.keys(r),function(e){return r[e]===t},!0);o.period=s<d?t:l}return o},O=function O(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},I=function I(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},P=(I(\"content_block_static\",\"com.glide.cms.RenderBlock\"),I(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),I(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),I(\"\",\"com.glide.ui.portal.RenderReport\"),I(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),C=(I(P.group,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.group2,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.single,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.multi,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.date,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.bool,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),I(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),I(P.debug,\"com.glideapp.home.RenderHomepagePublishers\"),I(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"\",\"com.glide.ui.portal.RenderDashboard\"),I(\"report\",\"com.glide.ui.portal.RenderJavascript\"),I(\"\",\"com.glide.ui.portal.RenderJavascript\"),I(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),I(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),I(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),I(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),B=function B(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},N=function N(e,r){var t={message:l(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(s({message:l(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(s(t))&&e.migrationNotes.push(s(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},E=function E(r,t,d,m){var v,h=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(s({message:l(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(r,t),y=function(e){var r,t,o,n,a=e.table,l=e.aggregateFieldType,s=e.filter,d=e.groupByMetadata,u=e.chart_title||e.title,c=null===(r=e.color_palette)||void 0===r?void 0:r.value,m=e.show_chart_data_label,g=e.field,p=e.legend_horizontal_alignment,f=e.legend_vertical_alignment,v=e.show_legend,h=e.decimal_precision,y=e.show_chart_border,b=e.source_type,_=e.aggregate,w=e.other_threshold,T=e.sumfield,A=i(e.colors,\",\"),R=e.set_color,F=null===(t=e.color)||void 0===t?void 0:t.value,S=e.show_chart_total,x=e.trend_field,O=e.interval,I=e.x_axis_title,P=e.x_axis_display_grid,C=e.y_axis_display_grid,B=e.y_axis_title,N=e.y_axis_from,E=e.y_axis_to,D=e.y_axis_opposite,k=e.show_marker;try{n=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(r){console.log(\"Unable to transform json 2\",r.toString(),e),n={}}var J=null===(o=e.report_source)||void 0===o?void 0:o.value,M=e.is_real_time,H=e.bar_unstack,U=e.series_name_text,L={};try{var j;e.custom_config&&\"\"!==e.custom_config&&(L=null===(j=JSON.parse(e.custom_config))||void 0===j?void 0:j.transforms)}catch(r){console.log(\"Unable to transform widget.custom_config to json \",r.toString(),e.custom_config),L={}}var z=e.start_time,G=e.end_time,Y=e.display_grid;return{table:a,chartTitle:u,colorType:R,colorPalette:c,singleColor:F,showDataLabel:m,groupBy:g,legendVerticalAlignment:f,legendHorizontalAlignment:p,showLegend:v,numberOfPeriods:h,showChartBorder:y,sourceType:b,aggregateType:_,otherThreshold:w,filter:s,aggregateField:T,colors:A,showTotal:S,trendBy:x,trendInterval:O,xAxisTitle:I,xAxisShowGrid:P,yAxisShowGrid:C,yAxisTitle:B,yAxisFrom:N,yAxisTo:E,yAxisOpposite:D,formattingConfiguration:n,reportSource:J,reportId:e.sys_id,isRealTime:M,isGroupedBars:H,aggregateFieldType:l,dataSetName:U,groupByMetadata:d,customConfig:L,startTime:z,endTime:G,showMarkers:k,showDataTable:Y}}(t),b=function(r){var t=function(r){var t,i,d,m,v,h,y,b,F=r.table,O=r.chartTitle,I=r.colorPalette,P=r.showDataLabel,C=r.groupBy,B=r.showOthers,N=r.legendHorizontalAlignment,E=r.legendVerticalAlignment,D=r.numberOfPeriods,k=(r.showChartBorder,r.sourceType),J=r.aggregateType,M=r.otherThreshold,H=r.filter,U=r.showLegend,L=r.aggregateField,j=r.colorType,z=r.trendBy,G=r.trendInterval,Y=r.xAxisTitle,V=r.xAxisShowGrid,W=r.yAxisShowGrid,Z=r.yAxisTitle,Q=r.yAxisFrom,q=r.yAxisTo,X=r.yAxisOpposite,$=r.formattingConfiguration,K=r.reportSource,ee=r.reportId,re=r.aggregateFieldType,te=r.d,oe=r.showHeader,ie=r.showTitle,ne=r.showBorder,ae=r.indexes,le=(r.dataSetName,r.groupByMetadata),se=r.singleColor,de=r.customConfig,ue=r.startTime,ce=r.endTime,me=r.colors,ge=r.showMarkers,pe=r.showDataTable,fe=function(e,r){var t,i=\"value\",n=\"desc\";if(o(e,\"ORDERBY\")&&(i=\"name\",o(e,\"DESC\")||(n=\"asc\")),r&&!o(e,\"ORDERBY\")){var a=r.type,l=r.internalType;n=\"asc\",\"date\"===(t=a)||\"datetime\"===t||\"due_date\"===t||\"glide_date\"===t||\"glide_date_time\"===t||\"glide_precise_time\"===t?i=\"report_range\":function(e){return\"integer\"===e||\"decimal\"===e||\"numeric\"===e||\"float\"===e||\"domain_number\"===e||\"auto_increment\"===e||\"percent_complete\"===e}(a)?i=\"value\":\"choice\"===a&&\"integer\"===l?i=\"choice\":\"reference\"===a||\"choice\"===a&&\"string\"===l?i=\"name\":n=\"desc\"}return{sortBy:i,sortByOrder:n}}(H,le),ve=f(H),he=function(e,r){var t={register:\"\",horizontal:\"\",orientation:\"vertical\"};function o(){t.horizontal=\"center\",\"left\"===e&&(t.horizontal=\"start\"),\"right\"===e&&(t.horizontal=\"end\")}return\"right\"===e?(t.register=\"right\",t.horizontal=\"center\"):\"left\"===e&&(t.register=\"left\",t.horizontal=\"center\"),\"bottom\"===r||\"center\"===r||\"middle\"===e?(t.register=\"bottom\",t.orientation=\"horizontal\",o()):\"top\"===r&&(t.orientation=\"horizontal\",t.register=\"top\",o()),t}(N,E),ye=function(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(r){return e}}(M),be=_($,parseInt(D,10),re,J),_e=g(F),we=p(_e),Te={},Ae=w([F,null==K?void 0:K.value,ve]);Te[Ae]={metricId:we,dataSourceId:_e,metricColor:se};var Re,Fe=!1;switch(G){case\"dayofweek\":b=\"dayOfWeek\",Fe=!0;break;case\"hour\":b=\"hourOfDay\",Fe=!0;break;default:b=G}if(32===G.length&&(b=G),\"metricbase\"===k){var Se={period:0===(null==ue?void 0:ue.indexOf(\"P\"))?ue.slice(1):\"between\",from:ue,to:ce};D=(Re=x(Se,\"1D\")).numberOfPeriods,k=e,delete be.durationFormat,delete be.dateFormat,delete be.stringFormat}var xe={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:ve,id:_e,isDatabaseView:!1,label:void 0,reportSourceSysId:K,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===k||0===k.length?\"table\":k,tableOrViewName:k!==e?F:void 0,table:k===e?F:void 0}],dateFormat:\"default\",disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null===(t=Re)||void 0===t?void 0:t.endTime,extensionType:\"area\",filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:(null!==(i=null==C?void 0:C.length)&&void 0!==i?i:0)>0?[{disableRanges:!1,groupBy:[{dataSource:_e,groupByField:C,isChoice:\"choice\"===(null==le?void 0:le.type),isPaBucket:!1,isRange:null==le?void 0:le.isRange,metric:we}],hideZeroValues:!1,maxNumberOfGroups:null!=le&&le.isRange?\"ALL\":ye,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==le||!le.isRange)&&\"true\"===B}]:[],headerTitle:ie?O:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!0,hideYAxis2:!0,hideYAxis3:!0,hideYAxis4:!0,legendExpandToFit:!0,legendHorizontalAlignment:he.horizontal,legendPosition:he.register,lineStrokeWidth:\"2\",metrics:[a({aggregateFunction:(null==J?void 0:J.length)>0?J:\"COUNT\",axisId:\"primary\",dataSource:_e,id:we,label:void 0,transforms:de},be)],newReporting:!1,numberOfPeriods:parseInt(D,10),period:null===(d=Re)||void 0===d?void 0:d.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null===(m=Re)||void 0===m?void 0:m.showAbsolutePeriod,showBorder:ne,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===P,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:null,showHeader:oe,showHeaderSeparator:!1,showLegend:\"true\"===U,showLegendValue:!1,showMaximumRange:null===(v=Re)||void 0===v?void 0:v.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showContinuousLine:!0,enableAddZerosAtApi:Fe,showMarkers:\"true\"===ge,showTotalValue:null,showTrend:!1,showXGrid:\"true\"===V,showYGrid:\"true\"===W,sortBy:fe.sortBy,sortByOrder:fe.sortByOrder,startTime:null===(h=Re)||void 0===h?void 0:h.startTime,telemetry:\"null\",trendBy:{trendByFields:[{field:z,metric:we}],trendByFrequency:b,trendByMinuteInterval:null},wrapTitle:!1,xAxisTitle:Y,yAxis0From:Q,yAxis0Position:\"true\"===X?\"right\":\"left\",yAxis0Title:Z,yAxis0To:q,showDataTable:\"true\"===pe};L&&\"COUNT\"!==J&&\"\"!==L&&(xe.metrics[0].aggregateField=L);var Oe,Ie=R(null!==(y=ae.report_layers[ee])&&void 0!==y?y:[]);try{for(Ie.s();!(Oe=Ie.n()).done;){var Pe,Ce,Be,Ne,Ee=Oe.value,De=xe.dataSources.map(function(e){return e.tableOrViewName}).concat(xe.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),ke=f(Ee.filter);Ae=w([F,null==K?void 0:K.value,ke,Ee.sys_id]);var Je=T(Te,Ae,Ee.table);Te[Ae]={metricId:p(Je),dataSourceId:Je,metricColor:null===(Pe=Ee.color)||void 0===Pe?void 0:Pe.value};var Me,He=A(xe.dataSources,Je,ke);if((!o(De,Ee.table)&&!o(De,Ee.report_source)||He)&&xe.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:Ee.table,filterQuery:ke,reportSourceSysId:null===(Me=Ee.report_source)||void 0===Me?void 0:Me.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:Je,dataCategories:[\"trend\",\"group\",\"simple\"]}),xe.metrics.push(a({dataSource:Te[Ae].dataSourceId,id:Te[Ae].metricId,aggregateFunction:Ee.aggregate,aggregateField:\"COUNT\"===Ee.aggregate&&\"\"!==Ee.sumfield?void 0:Ee.sumfield,axisId:\"primary\",label:(null===(Ce=Ee.series_name_text)||void 0===Ce?void 0:Ce.length)>0?Ee.series_name_text:void 0,chartType:S(Ee.type)},_(Ee.formatting_configuration,parseInt(D,10),Ee.aggregateFieldType,Ee.aggregateType))),(null===(Be=Ee.trend_field)||void 0===Be?void 0:Be.length)>0&&xe.trendBy.trendByFields.push({field:Ee.trend_field,metric:Te[Ae].metricId}),(null===(Ne=Ee.field)||void 0===Ne?void 0:Ne.length)>0||xe.groupBy.length>0)return void te.migrationNotes.push(s({message:l(\"This visualization is in compatibility mode because the group by configuration is not supported for this metric.\"),level:1,originalArtifactSysId:ee,artifactTable:u,featureFlags:te.featureFlags}))}}catch(e){Ie.e(e)}finally{Ie.f()}return xe.colorConfig=function(e){var r=e.colorPalette,t=e.colorType,o=e.dashboard,i=e.reportId,a=e.enableColorPerMetric,d=e.singleColor,m=e.metrics,g=e.colorList,p=e.metricMap;if(m&&p&&!o.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var f={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)f.type=\"palette\",f.palette=r;else if(\"several_colors\"===t)!g||Array.isArray(g)&&!n(g,function(e){return\"\"!==e})?f.type=\"chartColor\":o.migrationNotes.push(s({message:l(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:l(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:i,artifactTable:u,featureFlags:o.featureFlags}));else if(\"chart_colors\"===t)f.type=\"chartColor\";else if(\"one_color\"===t&&((null==d?void 0:d.length)>0||n(Object.keys(null!=p?p:{}),function(e){var r;return(null===(r=p[e].metricColor)||void 0===r?void 0:r.length)>0})))if(p){for(var v=a?\"colorsPerMetric\":\"singleColor\",h=[],y=0,b=Object.keys(p);y<b.length;y++){var _,w=b[y];h.push({metric:p[w].metricId,color:null!==(_=p[w].metricColor)&&void 0!==_?_:\"de699435d7033100b4964ebfae610331\"})}f.type=v,f.values=h}else{var T,A=[],R=c(null!=m?m:[]);try{for(R.s();!(T=R.n()).done;){var F=T.value;A.push({color:d,metric:F})}}catch(e){R.e(e)}finally{R.f()}f.type=\"singleColor\",f.values=A}return f}({colorPalette:I,colorType:j,dashboard:te,reportId:ee,singleColor:se,colorList:me,enableColorPerMetric:!0,metricMap:Te}),xe}(r);if(t)return t.extensionType=\"line\",t}(a(y,{d:r,indexes:d},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(m)));return!b||h?r.migratingFromJava&&m?B(t,m):(v=\"report\",function(e,r,t,o){var i;return(i=v===C?function(){for(var e in P)if(P[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===v||v===C?function(e,r,t,o){var i,n,a;return e.migratingFromJava&&o?B(r,o):N(e,{static_content:O(\"<b>Unsupported migration: \".concat(null!==(i=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(a=o.type)||void 0===a?void 0:a.value,\"</span> widget.\"))})}(e,a(r,{type:i}),0,o):function(e,r,t,o){var i,n,a;return e.migratingFromJava&&o?B(r,o):N(e,{static_content:O(\"<b>Unsupported migration: \".concat(null!==(i=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(a=o.type)||void 0===a?void 0:a.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var i,n,a,d;if(e.migratingFromJava&&o)return B(r,o);var u=\"\";null!=r&&r.type?u=r.type:null!=o&&null!==(i=o.type)&&void 0!==i&&i.value?u=null==o||null===(n=o.type)||void 0===n?void 0:n.value:null!=o&&null!==(a=o.renderer)&&void 0!==a&&a.value&&(u=o.renderer.value);var c=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),N(e,{static_content:O(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(u,\": \").concat(c,\"</span> widget.\"))})}(e,r,0,o)})(r,t,d,m):(function(e,r,t){if(e.additional_groupby){t.showAdditionalGroupBySelector=!0;var o=i(e.additional_groupby,\",\");-1===o.indexOf(e.field)&&o.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&o.push(e.trend_field),t.additionalGroupByConfig=[],o.forEach(function(e){t.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(t,0,b),{component_id:\"18ac962264404bcc0039359d184b15f3\",component_props:b})};this.run=function(e,r,t,o,i){var n,a={migratingFromJava:!0,migrationNotes:[],featureFlags:i,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=E(a,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=a.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"46d4a8a7b7232110997a9f78ce11a911","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:24:51","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/18ac962264404bcc0039359d184b15f3","value":"18ac962264404bcc0039359d184b15f3"},"key":"lineReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),n=\"\",a=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(a)||(i=\"=\",a%1);){if((t=o.charCodeAt(a+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,n+=i.charAt(63&r>>8-a%1*8)}return n.toString()},r=function r(e,_r){if(void 0===e)return[];if(1!==_r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,n=0;n<e.length;n++)e.charAt(n)!==_r||(t.push(e.substring(o,n)),o=n+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function t(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var o=function o(e,r){return{text:e,vars:r}},n=function n(e){var r=e.message,t=e.level,o=e.tooltip,n=e.originalArtifactSysId,i=e.artifactTable,l=e.hasNewArtifact,s=e.debugInfo,u=e.featureFlags,c={text:r,level:t,help:o,originSysId:n,hasNewArtifact:l,table:i,debugInfo:s};return\"true\"===(null==u?void 0:u.translatedLogs)?c:a(c)},a=function a(e){var r,t,o,n;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(n=e.text)||void 0===n?void 0:n.text)&&void 0!==o?o:e.text};function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var l=function l(e){var t=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var o,n=r(e,\"^\"),a=[],l=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,n=function n(){};return{s:n,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,l=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return l=e.done,e},e:function e(_e3){s=!0,a=_e3},f:function f(){try{l||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw a}}}}(n);try{var s=function s(){var e=o.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),n=o.length>>>0,a=arguments[1],i=0;i<n;i++){var l=o[i];if(r.call(a,l,i,o))return t?i:l}}(t,function(r){return e.substring(0,r.length)===r}))return\"continue\";a.push(e)};for(l.s();!(o=l.n()).done;)s()}catch(e){l.e(e)}finally{l.f()}return a.join(\"^\")};function s(e){return s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},s(e)}var u=function u(e){return{durationFormat:d(t(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},c=function c(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=d(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},d=function d(e,r,t){var o=JSON.parse(JSON.stringify(r)),n=!1;for(var a in t)void 0!==o[t[a]]&&e[a]!==o[t[a]]&&(n=!0,o[t[a]]=e[a]);return!!n&&o},p=function p(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")};function m(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return g(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?g(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,n=function n(){};return{s:n,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,i=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e5){l=!0,a=_e5},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw a}}}}function g(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var f=function f(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},v=(f(\"content_block_static\",\"com.glide.cms.RenderBlock\"),f(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),f(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),f(\"\",\"com.glide.ui.portal.RenderReport\"),f(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),h=(f(v.group,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.group2,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.single,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.multi,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.date,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.bool,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),f(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),f(v.debug,\"com.glideapp.home.RenderHomepagePublishers\"),f(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"\",\"com.glide.ui.portal.RenderDashboard\"),f(\"report\",\"com.glide.ui.portal.RenderJavascript\"),f(\"\",\"com.glide.ui.portal.RenderJavascript\"),f(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),f(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),f(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),f(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),y=function y(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},b=function b(e,r){var t={message:o(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(n({message:o(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(n(t))&&e.migrationNotes.push(n(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},_=function _(a,i,d,g){var f,_=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),a=null==r?void 0:r.groupByMetadata;return!(!t||!a||\"glide_duration\"!=a.internalType&&\"glide_date_time\"!=a.internalType&&\"glide_date\"!=a.internalType||(e.migrationNotes.push(n({message:o(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(a,i),w=function(e){var t,o,n,a,i=e.aggregate,l=e.aggregateFieldType,s=e.filter,u=e.column,c=e.row,d=e.table,p=e.sumfield,m=e.chart_title||e.title,g=null===(t=e.color_palette)||void 0===t?void 0:t.value,f=r(e.colors,\",\"),v=e.set_color,h=null===(o=e.color)||void 0===o?void 0:o.value;try{a=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(r){console.log(\"Unable to transform json 3\",r.toString(),e),a={}}var y=null===(n=e.report_source)||void 0===n?void 0:n.value,b=e.other_threshold,_=e.source_type,w=\"true\"===e.others,R=\"true\"===e.show_zero,F=\"true\"===e.display_column_lines,T=\"true\"===e.display_row_lines,S=\"true\"===e.pivot_expanded;return{aggregate:i,aggregateFieldType:l,filter:s,column:u,row:c,table:d,chartTitle:m,colorPalette:g,colors:f,singleColor:h,colorType:v,formattingConfiguration:a,reportSource:y,otherThreshold:b,sysId:e.sys_id,sourceType:_,aggregateField:p,showOthers:w,showZero:R,showColLines:F,showRowLines:T,showExpanded:S}}(i),R=function(o){var n,a=o.filter,i=o.formattingConfiguration,d=o.aggregate,p=o.aggregateFieldType,g=o.table,f=o.column,v=o.row,h=o.chartTitle,y=o.reportSource,b=o.otherThreshold,_=o.sysId,w=o.sourceType,R=o.showOthers,F=o.aggregateField,T=o.showHeader,S=o.showTitle,A=o.showBorder,C=o.showZero,P=o.showColLines,O=o.showRowLines,I=o.showExpanded,x=o.indexes,J=l(a),B=function(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(r){return e}}(b),E=function(e,r,t,o,n){var a={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},i={durationFormattingProperties:u,numberFormattingProperties:c};if(\"glide_duration\"===t){if(\"object\"===s(e)&&i.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return i.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var d in e)if(i[d]&&e[d]&&Object.keys(e[d]).length>0){var p=Object.keys(e[d])[0];return i[d](e[d][p],r)}return a}(i,void 0,p),N=function(r){return e(\"table\".concat(r).concat(new Date().getTime()).concat(1e8*Math.random()))}(g),H=function(r){return e(r+new Date().getTime()+1e8*Math.random())}(N),k={applyDateRange:!1,bareBorder:!1,colorConfig:{type:\"default\"},dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:J,id:N,reportSourceSysId:y,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===w||0===w.length?\"table\":w,tableOrViewName:g}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,freezeFirstColumn:!1,freezeFooter:!1,freezeHeader:!0,groupBy:[],headerTitle:S?h:\"\",hideMatrixAggregate:!1,metrics:[t({aggregateField:F,aggregateFunction:(null==d?void 0:d.length)>0?d:\"COUNT\",axisId:\"primary\",dataSource:N,id:H},E)],newReporting:!0,numberOfPeriods:3,period:\"M\",scoreType:\"latest\",showAbsolutePeriod:!1,showAlternateColumnColors:!1,showAlternateRowColors:!0,showBorder:A,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showColumnAggregate:!0,showColumnDividers:P,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!0,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:T,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showPivotExpanded:I,showRowAggregate:!0,showRowDividers:O,showSecondGroupAggregate:!0,showSparkline:!1,showSubAggregate:!0,showTarget:!1,showThreshold:!1,showTotalAggregate:!0,showTrend:!1,showZero:C,sortBy:\"choice\",sortByOrder:\"asc\",telemetry:\"null\",truncateColumnHeader:!0,truncateFirstColumn:!0,wrapColumnHeader:!1,wrapTitle:!1},U=m(r(f,\",\"));try{for(U.s();!(n=U.n()).done;){var D=n.value;k.groupBy.push({categoryIndex:0,disableRanges:!0,groupBy:[{dataSource:N,groupByField:D,isChoice:!1,isPaBucket:!1,isRange:!1}],hideZeroValues:!1,maxNumberOfGroups:B,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:R})}}catch(e){U.e(e)}finally{U.f()}var M,j=m(r(v,\",\"));try{for(j.s();!(M=j.n()).done;){var L=M.value;k.groupBy.push({categoryIndex:1,disableRanges:!0,groupBy:[{dataSource:N,groupByField:L,isChoice:!1,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:\"ALL\"})}}catch(e){j.e(e)}finally{j.f()}var G=x.sys_report_mpivot_rule[_];if((null==G?void 0:G.length)>0){var V;k.colorConfig={type:\"singleColor\",values:[{color:null===(V=G[0].color_id)||void 0===V?void 0:V.value,metric:H,rules:[]}]};var z,Y=m(G);try{for(Y.s();!(z=Y.n()).done;){var Z,W,Q=z.value;k.colorConfig.values[0].rules.push({operator:Q.operator,order:100,color:null===(Z=Q.color_id)||void 0===Z?void 0:Z.value,value1:Q.value1,value2:Q.value2,backgroundColor:null===(W=Q.bg_color_id)||void 0===W?void 0:W.value})}}catch(e){Y.e(e)}finally{Y.f()}}var $,q=m(k.metrics);try{for(q.s();!($=q.n()).done;){var K=$.value;\"COUNT\"===K.aggregateFunction&&delete K.aggregateField}}catch(e){q.e(e)}finally{q.f()}return k}(t(w,{d:a,indexes:d},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(g)));return!R||_?a.migratingFromJava&&g?y(i,g):(f=\"report\",function(e,r,a,i){var l;return(l=f===h?function(){for(var e in v)if(v[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(n({message:o(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===f||f===h?function(e,r,t,o){var n,a,i;return e.migratingFromJava&&o?y(r,o):b(e,{static_content:p(\"<b>Unsupported migration: \".concat(null!==(n=null!==(a=r.name)&&void 0!==a?a:r.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> widget.\"))})}(e,t(r,{type:l}),0,i):function(e,r,t,o){var n,a,i;return e.migratingFromJava&&o?y(r,o):b(e,{static_content:p(\"<b>Unsupported migration: \".concat(null!==(n=null!==(a=r.name)&&void 0!==a?a:r.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> report.\"))})}(e,r,0,i)):function(e,r,t,a){var i,l,s,u;if(e.migratingFromJava&&a)return y(r,a);var c=\"\";null!=r&&r.type?c=r.type:null!=a&&null!==(i=a.type)&&void 0!==i&&i.value?c=null==a||null===(l=a.type)||void 0===l?void 0:l.value:null!=a&&null!==(s=a.renderer)&&void 0!==s&&s.value&&(c=a.renderer.value);var d=null==a||null===(u=a.title)||void 0===u?void 0:u.value;return e.migrationNotes.push(n({message:o(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),b(e,{static_content:p(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(c,\": \").concat(d,\"</span> widget.\"))})}(e,r,0,i)})(a,i,d,g):(function(e,t,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var n=r(e.additional_groupby,\",\");-1===n.indexOf(e.field)&&n.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&n.push(e.trend_field),o.additionalGroupByConfig=[],n.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(i,0,R),{component_id:\"06f6aacbd1818110f877d87436272684\",component_props:R})};this.run=function(e,r,t,o,n){var a,i={migratingFromJava:!0,migrationNotes:[],featureFlags:n,migratingSingleArtifact:!0},l=null===(a=e.sys_id[t])||void 0===a?void 0:a[0],s=_(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"470528a7b7232110997a9f78ce11a990","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:25:44","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/06f6aacbd1818110f877d87436272684","value":"06f6aacbd1818110f877d87436272684"},"key":"pivotV2ReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(_e,\"</p>\")},r=function r(e,_r,o){return\"com.glideapp.home.RenderHomepagePublishers\"===_r&&o&&!Number.isNaN(parseInt(o,10))?\"\".concat(null!=o?o:\"\",\"::\").concat(null!=_r?_r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=_r?_r:\"\")},o=(r(\"content_block_static\",\"com.glide.cms.RenderBlock\"),r(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),r(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),r(\"\",\"com.glide.ui.portal.RenderReport\"),r(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),t=(r(o.group,\"com.glideapp.home.RenderHomepagePublishers\"),r(o.group2,\"com.glideapp.home.RenderHomepagePublishers\"),r(o.single,\"com.glideapp.home.RenderHomepagePublishers\"),r(o.multi,\"com.glideapp.home.RenderHomepagePublishers\"),r(o.date,\"com.glideapp.home.RenderHomepagePublishers\"),r(o.bool,\"com.glideapp.home.RenderHomepagePublishers\"),r(o.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),r(o.debug,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderDashboard\"),r(\"report\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderJavascript\"),r(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),r(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),r(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),r(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"widget\"),a=\"filter\";function i(){for(var e={},r=arguments.length,o=new Array(r),t=0;t<r;t++)o[t]=arguments[t];return o.forEach(function(r){Object.assign(e,r)}),e}var n=function n(e,r){var o=function(e){var r={};for(var o in e){var t;null!==(t=e[o])&&void 0!==t&&t.value?r[o]=e[o].value:\"string\"==typeof e[o]&&(r[o]=e[o])}return r}(r),t={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:o.portal_widget_sys_id,portalPreferences:o,widgetTitle:o.title,showHeader:!o.show_header||\"true\"===o.show_header,showBorder:!o.show_border||\"true\"===o.show_border,showTitle:!o.show_title||\"true\"===o.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(t.paWidgetSysId=e.sys_id,t.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:t}},l=function l(e,r){return{text:e,vars:r}},s=function s(e){var r=e.message,o=e.level,t=e.tooltip,a=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,c={text:r,level:o,help:t,originSysId:a,hasNewArtifact:n,table:i,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?c:d(c)},d=function d(e){var r,o,t,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(t=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==t?t:e.text},c=function c(e,r){var o={message:l(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(s({message:l(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(s(o))&&e.migrationNotes.push(s(o)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}};function u(e,r){var o=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!o){if(Array.isArray(e)||(o=function(e,r){if(e){if(\"string\"==typeof e)return m(e,r);var o=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===o&&e.constructor&&(o=e.constructor.name),\"Map\"===o||\"Set\"===o?Array.from(e):\"Arguments\"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?m(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){o&&(e=o);var t=0,a=function a(){};return{s:a,n:function n(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,l=!1;return{s:function s(){o=o.call(e)},n:function n(){var e=o.next();return _n=e.done,e},e:function e(_e3){l=!0,i=_e3},f:function f(){try{_n||null==o[\"return\"]||o[\"return\"]()}finally{if(l)throw i}}}}function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=e[o];return t}function p(e,r,o,t,a,i,n,l,s,d){if(console.info(\"Handling breakdown for\",{breakdownSysId:e,baseProps:o,elementSysId:t,elementFilter:a,showTopX:i,manualElements:n,sys_id:l,breakdown2SysId:s,element2SysId:d}),e){var c,u=r.sys_id[e][0];o.breakdowns.push({breakdownId:e,breakdownLabel:u.name,elementIds:t&&\"unmatched\"!==t?[t]:[],elementsFilterSysId:a,perPage:null!=i?i:1e3}),n&&o.breakdowns[o.breakdowns.length-1].elementIds.concat(null===(c=r.widget_elements[l])||void 0===c?void 0:c.map(function(e){return\"unassigned\"===e.element?void 0:e.element}).filter(function(e){return e}))}if(s){var m=r.sys_id[s][0];o.breakdowns.push({breakdownId:s,breakdownLabel:m.name,elementIds:d&&\"unmatched\"!==d?[d]:[],perPage:null!=i?i:1e3})}}function g(e){switch(e){case\"indicator_group\":case\"order\":case\"default\":return\"name\";default:return e}}function v(e){return e?parseInt(e).toString():\"10\"}var f=function f(r,d,m,_f){!function(e,r,o){for(var t=0,a=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:l(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:l(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];t<a.length;t++){var i=a[t];i.shouldLog&&e.migrationNotes.push(s(i.message))}}(r,d);var _,b=function(e){var r,o,t,a,i,n,l=e.sort_direction,s=e.sort_on,d=e.name,c=e.description,u=e.sys_id,m=e.show_breakdown_selector,p=null===(r=e.aggregate)||void 0===r?void 0:r.value,g=null===(o=e.indicator)||void 0===o?void 0:o.value,v=null===(t=e.tag)||void 0===t?void 0:t.value,f=null===(a=e.breakdown)||void 0===a?void 0:a.value,_=null===(i=e.breakdown_level2)||void 0===i?void 0:i.value,b=e.element,h=e.element_level2,y=null===(n=e.elements_filter)||void 0===n?void 0:n.value;return{sort_direction:l,sort_on:s,indicatorSysId:g,breakdownSysId:f,manualElements:\"true\"===e.manual_elements,pageSize:parseInt(e.number_of_records,10),showBar:\"true\"===e.show_bar,showIndicator:\"true\"===e.show_total,showTopX:parseInt(e.show_top_x,10),followFilters:\"true\"===e.follow_element,followFilterIcon:\"true\"===e.follow_element,columns:{lastScore:\"true\"===e.column_current,change:\"true\"===e.column_change,bulletChart:\"true\"===e.column_bulletchart,changePercent:\"true\"===e.column_change_perc,trend:\"true\"===e.column_trend,gap:\"true\"===e.column_gap,gapPercent:\"true\"===e.column_gap_perc,target:\"true\"===e.column_target,multiScore:\"true\"===e.column_multiple},timeSeries:p,breakdown2SysId:_,elementSysId:b,element2SysId:h,name:d,description:c,elementFilter:y,sys_id:u,steps:parseInt(e.column_steps,10),stepSize:parseInt(e.column_stepsize,10),indicatorGroupSysId:v,showBreakdownSelector:m}}(d),h=function(e){var r=e.sort_direction,o=e.sort_on,t=e.indicatorSysId,a=e.breakdownSysId,i=e.manualElements,n=e.pageSize,d=e.showBar,c=e.showIndicator,m=e.showTopX,v=e.columns,f=e.timeSeries,_=e.breakdown2SysId,b=e.elementSysId,h=e.element2SysId,y=e.name,w=e.showHeader,I=e.showTitle,S=(e.showBorder,e.elementFilter),R=e.description,k=e.indexes,F=e.sys_id,T=e.d,A=e.steps,J=e.stepSize,P=e.indicatorGroupSysId,B=e.showBreakdownSelector;d&&T.migrationNotes.push(s({message:l(\"This visualization is migrated without show bar configuration because this functionality is not supported.\"),level:2,originalArtifactSysId:F,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:T.featureFlags}));var x={aggregateId:null!=f?f:\"default\",breakdowns:[],colorSchemeId:\"\",description:R,enableDrilldown:!0,filterConfigurations:\"@state.parFilters\",heading:I?y:\"\",indicatorGroup:\"\",indicators:[],metrics:{},nestedBreakdown:!0,pageSize:n.toString(),query:\"\",scorecardType:\"list\",showAlternateRowColors:!1,showBookmarkedOnly:!1,showBreakdownsOnly:!c,showColumnDividers:!1,showFavorite:!0,followFilters:e.followFilters,showFilterElement:!1,showFilterIcon:e.followFilterIcon,showHeader:w,showIndicatorInfo:!0,sortBy:g(o),sortDir:r,sourceType:\"1\",swapBreakdownsAsColumns:!1,allowChangeBreakdown:\"true\"===B,breakdownVisibilitySelector:\"true\"===B};if(p(a,k,x,b,S,m,i,F,_,h),t){var N=k.sys_id[t][0];x.indicators.push({id:t,label:N.name}),x.sourceType=\"1\"}else if(P)x.showBreakdownsOnly=!0,x.indicatorGroup=P,x.sourceType=\"2\";else{var C,H=null!==(C=k.widget_indicators[F])&&void 0!==C?C:[];x.showBreakdownsOnly=!0,x.sourceType=\"1\",\"order\"===o&&function(e,r,o){var t=[],a=[];e.sort(function(e,o){var t,a,i,n,l=r.sys_id[null===(t=e.indicator)||void 0===t?void 0:t.value],s=r.sys_id[null===(a=o.indicator)||void 0===a?void 0:a.value],d=null!=l&&null!==(i=l[0])&&void 0!==i&&i.name?l[0].name:\"\",c=null!=s&&null!==(n=s[0])&&void 0!==n&&n.name?s[0].name:\"\";return d.localeCompare(c)}),\"desc\"===o.sort_direction&&e.reverse();var i,n=u(e);try{for(n.s();!(i=n.n()).done;){var l=i.value;l.order&&parseInt(l.order,10)>-1?a.push(l):t.push(l)}}catch(e){n.e(e)}finally{n.f()}a.sort(function(e,r){return parseInt(e.order,10)-parseInt(r.order,10)}),e.splice(0,e.length),Array.prototype.push.apply(e,a.concat(t))}(H,k,e);var z,O=u(H);try{for(O.s();!(z=O.n()).done;){var E,G,L,U,j=z.value;if((null==f?void 0:f.length)>0&&(null===(E=j.aggregate)||void 0===E||null===(G=E.value)||void 0===G?void 0:G.length)>0&&(null===(L=j.aggregate)||void 0===L?void 0:L.value)!==f)T.migrationNotes.push(s({message:l(\"This visualization is migrated without the time series aggregation configuration because it does not match aggregation of the main metric.\"),level:1,originalArtifactSysId:F,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:T.featureFlags}));else if(null!==(U=j.indicator)&&void 0!==U&&U.value){var D,M,V=k.sys_id[j.indicator.value][0];x.indicators.push({id:j.indicator.value,label:j.label?j.label:V.name}),p(null===(D=j.breakdown)||void 0===D?void 0:D.value,k,x,j.element,void 0,void 0,!1,F,null===(M=j.breakdown_level2)||void 0===M?void 0:M.value,j.element_level2)}}}catch(e){O.e(e)}finally{O.f()}}if(v){x.metrics={fields:[]};for(var X=0,W=Object.keys(v);X<W.length;X++){var q=W[X];if(\"multiScore\"===q)x.metrics.multiScore={numberOfPeriods:A,periodStep:J,type:v.multiScore?\"CUSTOM_INTERVAL\":\"\"};else if(\"bulletChart\"===q){T.migrationNotes.push(s({message:l(\"This visualization is migrated without bullet score because this functionality is not supported.\"),level:2,originalArtifactSysId:F,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:T.featureFlags}));continue}v[q]&&x.metrics.fields.push(q)}}return x}(i(b,{d:r,indexes:m},function(e){var r=!0,o=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(o=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:o}}(_f)));return h?(function(e,r,o,t){var a;if(\"breakdown\"===r.type)if(void 0!==t.groupBy&&t.groupBy.length>0){var i=t.groupBy[0].maxNumberOfGroups;t.groupBy[0].maxNumberOfGroups=r.show_top_x?parseInt(r.show_top_x).toString():v(i)}else if(void 0!==t.breakdowns&&t.breakdowns.length>0){var n=t.breakdowns[0].perPage;t.breakdowns[0].perPage=r.show_top_x?parseInt(r.show_top_x).toString():v(n)}else e.migrationNotes.push(s({message:l(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===r.show_breakdown_selector){var d=r.indicator.value,c=null===(a=o.indicator_breakdowns)||void 0===a?void 0:a[d];t.additionalGroupByConfig=(null==c?void 0:c.map(function(e){var r,t,a=null===(r=o.sys_id[null===(t=e.breakdown)||void 0===t?void 0:t.value])||void 0===r?void 0:r[0];return{id:null==a?void 0:a.sys_id,metricLabel:null==a?void 0:a.name}}))||[]}else t.additionalGroupByConfig=[]}(r,d,m,h),{component_id:\"9d31ba4d773ce32ef350d4555b673f6e\",component_props:h}):r.migratingFromJava&&_f?n(d,_f):(_=t,function(r,d,u,m){var p;return(p=_===a?function(){for(var e in o)if(o[e]===(null==d?void 0:d.type))return e}():null==d?void 0:d.type)?(r.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==d?void 0:d.sys_id,artifactTable:null==d?void 0:d.sys_table_name,featureFlags:r.featureFlags})),_===t||_===a?function(r,o,t,a){var i,l,s;return r.migratingFromJava&&a?n(o,a):c(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(i=null!==(l=o.name)&&void 0!==l?l:o.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=o&&o.type?o.type:null==a||null===(s=a.type)||void 0===s?void 0:s.value,\"</span> widget.\"))})}(r,i(d,{type:p}),0,m):function(r,o,t,a){var i,l,s;return r.migratingFromJava&&a?n(o,a):c(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(i=null!==(l=o.name)&&void 0!==l?l:o.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=o&&o.type?o.type:null==a||null===(s=a.type)||void 0===s?void 0:s.value,\"</span> report.\"))})}(r,d,0,m)):function(r,o,t,a){var i,d,u,m;if(r.migratingFromJava&&a)return n(o,a);var p=\"\";null!=o&&o.type?p=o.type:null!=a&&null!==(i=a.type)&&void 0!==i&&i.value?p=null==a||null===(d=a.type)||void 0===d?void 0:d.value:null!=a&&null!==(u=a.renderer)&&void 0!==u&&u.value&&(p=a.renderer.value);var g=null==a||null===(m=a.title)||void 0===m?void 0:m.value;return r.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:r.featureFlags})),c(r,{static_content:e(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(p,\": \").concat(g,\"</span> widget.\"))})}(r,d,0,m)})(r,d,m,_f)};this.run=function(e,r,o,t,a){var i,n={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(i=e.sys_id[o])||void 0===i?void 0:i[0],s=f(n,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=n.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"51be8797a3d031108d80ad2f241e61c2","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:55:36","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/9d31ba4d773ce32ef350d4555b673f6e","value":"9d31ba4d773ce32ef350d4555b673f6e"},"key":"scorecardPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r){return{text:_e,vars:r}},r=function r(e){var r=e.message,o=e.level,i=e.tooltip,t=e.originalArtifactSysId,c=e.artifactTable,n=e.hasNewArtifact,s=e.debugInfo,l=e.featureFlags,d={text:r,level:o,help:i,originSysId:t,hasNewArtifact:n,table:c,debugInfo:s};return\"true\"===(null==l?void 0:l.translatedLogs)?d:a(d)},a=function a(e){var r,a,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},o=function o(e,r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},i=(o(\"content_block_static\",\"com.glide.cms.RenderBlock\"),o(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),o(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),o(\"\",\"com.glide.ui.portal.RenderReport\"),o(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1);o(-1,\"com.glideapp.home.RenderHomepagePublishers\"),o(4,\"com.glideapp.home.RenderHomepagePublishers\"),o(i,\"com.glideapp.home.RenderHomepagePublishers\"),o(2,\"com.glideapp.home.RenderHomepagePublishers\"),o(3,\"com.glideapp.home.RenderHomepagePublishers\"),o(5,\"com.glideapp.home.RenderHomepagePublishers\"),o(6,\"com.glideapp.home.RenderHomepagePublishers\"),o(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),o(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glide.ui.portal.RenderDashboard\"),o(\"report\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glide.ui.portal.RenderJavascript\"),o(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),o(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),o(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),o(\"METRIC\",\"com.snc.treemap.TreemapRenderer\");var t=function t(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},c=function c(a,o,i,_c){var n,s,l,d;return a.migratingFromJava&&_c?t(o,_c):function(a,o){var i={message:e(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags};return\"true\"===(null==o?void 0:o.conditional)&&a.migrationNotes.push(r({message:e(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags})),-1===a.migrationNotes.indexOf(r(i))&&a.migrationNotes.push(r(i)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==o?void 0:o.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==o?void 0:o.sys_id)}}}(a,{static_content:(d=\"<b>Unsupported migration: \".concat(null!==(n=null!==(s=o.name)&&void 0!==s?s:o.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=o&&o.type?o.type:null==_c||null===(l=_c.type)||void 0===l?void 0:l.value,\"</span> report.\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(d,\"</p>\"))})};this.run=function(a,o,i,n,s){var l,d={migratingFromJava:!0,migrationNotes:[],featureFlags:s,migratingSingleArtifact:!0},p=function(a,o,i,n){return a.migratingFromJava&&n?t(o,n):(a.migrationNotes.push(r({message:e(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags})),c(a,o))}(d,null===(l=a.sys_id[i])||void 0===l?void 0:l[0],0,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return p.migrationNotes=d.migrationNotes,p};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"55e4a8a7b7232110997a9f78ce11a9b5","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:25:04","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/9c8c44bd78fe5918950e0db8e286211d","value":"9c8c44bd78fe5918950e0db8e286211d"},"key":"mapReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),a=\"\",i=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(i)||(n=\"=\",i%1);){if((t=o.charCodeAt(i+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=n.charAt(63&r>>8-i%1*8)}return a.toString()},r=function r(e,_r){return void 0!==e&&void 0!==_r&&e.indexOf(_r)>-1},t=function t(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,a=0;a<e.length;a++)e.charAt(a)!==r||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function o(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,i=arguments[1],n=0;n<a;n++){var l=o[n];if(r.call(i,l,n,o))return t?n:l}}function a(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var i=function i(e,r){return{text:e,vars:r}},n=function n(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,s=e.debugInfo,d=e.featureFlags,u={text:r,level:t,help:o,originSysId:a,hasNewArtifact:n,table:i,debugInfo:s};return\"true\"===(null==d?void 0:d.translatedLogs)?u:l(u)},l=function l(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text};function s(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){l=!0,i=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var u=function u(r){return e(\"table\".concat(r).concat(new Date().getTime()).concat(1e8*Math.random()))},c=function c(r){return e(r+new Date().getTime()+1e8*Math.random())},p=function p(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var a,i=t(e,\"^\"),n=[],l=s(i);try{var d=function d(){var e=a.value;if(o(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";n.push(e)};for(l.s();!(a=l.n()).done;)d()}catch(e){l.e(e)}finally{l.f()}return n.join(\"^\")};function m(e){return m=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},m(e)}var g=function g(e){return{durationFormat:v(a(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},f=function f(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=v(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},v=function v(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var i in t)void 0!==o[t[i]]&&e[i]!==o[t[i]]&&(a=!0,o[t[i]]=e[i]);return!!a&&o},y=function y(e,r,t,o,a){var i={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},n={durationFormattingProperties:g,numberFormattingProperties:f};switch(a){case\"heatmap\":case\"box\":return\"glide_duration\"===t?i:n.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===m(e)&&n.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return n.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(n[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return n[s](e[s][d],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:i},b=function b(e){return e.join(\":\")},h=function h(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")};function _(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var w=function w(e,t,l){var d,m,g,f,v,h,w,R,S,F,T,A,P=\"bar\"===e.type,x=12;\"-1\"===e.other_threshold?x=\"ALL\":e.other_threshold>-2&&(x=e.other_threshold);var I,O,B=y(e.formatting_configuration,parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregateType),C=u(e.table),N=c(C),E=p(e.filter),J={sortBy:\"value\",sortByOrder:\"desc\"};r(e.filter,\"^ORDERBY\")&&(I=e.filter,O={sortBy:\"value\",sortByOrder:\"desc\"},r(I,\"ORDERBY\")&&r(I,\"ASC\")&&(O.sortByOrder=\"asc\"),J=O);var M={},k=b([e.table,null===(d=e.report_source)||void 0===d?void 0:d.value,E]);M[k]={metricId:N,dataSourceId:C,metricColor:null===(m=e.color)||void 0===m?void 0:m.value};var H,U={configVersion:\"23.0.0-ci-SNAPSHOT\",yAxisHidden:!1,yAxisPosition:P||\"true\"!==e.x_axis_opposite?\"bottom\":\"top\",yAxisShowGrid:!0,xAxisWrapLabels:!1,xAxisMaxLabelSize:100,xAxisTruncationType:\"end\",yAxisStyle:\"clean\",showLegend:\"true\"===e.show_legend,showLegendValue:!1,legendPosition:\"bottom\",legendHorizontalAlignment:\"center\",legendExpandToFit:!1,showDataLabels:\"true\"===e.show_chart_data_label,dataLabelPosition:\"true\"===e.show_data_label_position_middle?\"middle\":\"top\",showStackedValues:\"none\",showOverlappingLabels:!1,newReporting:!1,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:E,reportSourceSysId:null===(g=e.report_source)||void 0===g?void 0:g.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:C,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[a({dataSource:C,id:N,label:(null===(f=e.series_name_text)||void 0===f?void 0:f.length)>0?e.series_name_text:void 0,aggregateFunction:(null===(v=e.aggregate)||void 0===v?void 0:v.length)>0?e.aggregate:\"COUNT\",aggregateField:\"COUNT\"===e.aggregate&&\"\"!==e.sumfield?void 0:e.sumfield,axisId:\"primary\"},B)],groupBy:[e.field&&e.field.length>0?{groupBy:[{dataSource:C,groupByField:e.field,isRange:null!==(h=null===(w=e.groupByMetadata)||void 0===w?void 0:w.isRange)&&void 0!==h&&h,isChoice:\"choice\"===(null===(R=e.groupByMetadata)||void 0===R?void 0:R.type),isPaBucket:!1}],maxNumberOfGroups:null!==(S=e.groupByMetadata)&&void 0!==S&&S.isRange?\"ALL\":x,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null===(F=e.groupByMetadata)||void 0===F||!F.isRange)&&\"true\"===e.others}:void 0],sortBy:J.sortBy,sortByOrder:J.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",yAxisTitle:e.y_axis_title,xAxisTitle:e.x_axis_title,yAxisFrom:e.y_axis_from,yAxisTo:e.y_axis_to,showDataTable:\"true\"==e.display_grid};H=e.additional_groupby||\"true\"!==e.bar_unstack&&e.trend_field&&\"\"!==e.trend_field?\"stacked\":\"grouped\",U.chartVariation=H,e.trend_field&&\"\"!==e.trend_field&&U.groupBy.push({groupBy:[{dataSource:C,groupByField:e.trend_field,isRange:e.trendMetadata.isRange,isChoice:\"choice\"===e.trendMetadata.type,isPaBucket:!1}]});var D,L=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return _(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n2=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n2=e.done,e},e:function e(_e5){l=!0,i=_e5},f:function f(){try{_n2||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}(null!==(A=l.report_layers[e.sys_id])&&void 0!==A?A:[]);try{var j=function j(){var t,i,n,l,s=D.value,d=U.dataSources.map(function(e){return e.tableOrViewName}).concat(U.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),m=p(s.filter);k=b([s.table,null===(t=s.report_source)||void 0===t?void 0:t.value,m,s.sys_id]);var g=function(e,r,t){return o(Object.keys(e),function(e){return e===r})?e[r].dataSourceId:u(t)}(M,k,s.table);M[k]={metricId:c(g),dataSourceId:g,metricColor:null==s||null===(i=s.color)||void 0===i?void 0:i.value};var f,v=function(e,r,t){var a=o(e,function(e){return e.id===r}),i=!1;return a&&a.filterQuery===t||(i=!0),i}(U.dataSources,g,m);if((!r(d,s.table)&&!r(d,s.report_source)||v)&&U.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:s.table,filterQuery:m,reportSourceSysId:null===(f=s.report_source)||void 0===f?void 0:f.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:g,dataCategories:[\"trend\",\"group\",\"simple\"]}),U.metrics.push(a({dataSource:M[k].dataSourceId,id:M[k].metricId,aggregateFunction:s.aggregate,aggregateField:\"COUNT\"===s.aggregate&&\"\"!==s.sumfield?void 0:s.sumfield,axisId:\"primary\",label:(null===(n=s.series_name_text)||void 0===n?void 0:n.length)>0?s.series_name_text:void 0},y(s.formatting_configuration,parseInt(e.decimal_precision,10),s.aggregateFieldType,s.aggregateType))),(null===(l=s.field)||void 0===l?void 0:l.length)>0){var h={dataSource:M[k].dataSourceId,groupByField:s.field,isRange:!1,isChoice:!1,isPaBucket:!1},_=!1;U.groupBy[0].groupBy.forEach(function(e){_=_||e.dataSource==h.dataSource&&e.groupByField==h.groupByField}),_||U.groupBy[0].groupBy.push(h)}};for(L.s();!(D=L.n()).done;)j()}catch(e){L.e(e)}finally{L.f()}return U.colorConfig=function(e){var r=e.colorPalette,t=e.colorType,a=e.dashboard,l=e.reportId,d=e.enableColorPerMetric,u=e.singleColor,c=e.metrics,p=e.colorList,m=e.metricMap;if(c&&m&&!a.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var g={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)g.type=\"palette\",g.palette=r;else if(\"several_colors\"===t)!p||Array.isArray(p)&&!o(p,function(e){return\"\"!==e})?g.type=\"chartColor\":a.migrationNotes.push(n({message:i(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:i(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:l,artifactTable:\"sys_report\",featureFlags:a.featureFlags}));else if(\"chart_colors\"===t)g.type=\"chartColor\";else if(\"one_color\"===t&&((null==u?void 0:u.length)>0||o(Object.keys(null!=m?m:{}),function(e){var r;return(null===(r=m[e].metricColor)||void 0===r?void 0:r.length)>0})))if(m){for(var f=d?\"colorsPerMetric\":\"singleColor\",v=[],y=0,b=Object.keys(m);y<b.length;y++){var h,_=b[y];v.push({metric:m[_].metricId,color:null!==(h=m[_].metricColor)&&void 0!==h?h:\"de699435d7033100b4964ebfae610331\"})}g.type=f,g.values=v}else{var w,R=[],S=s(null!=c?c:[]);try{for(S.s();!(w=S.n()).done;){var F=w.value;R.push({color:u,metric:F})}}catch(e){S.e(e)}finally{S.f()}g.type=\"singleColor\",g.values=R}return g}({colorPalette:null===(T=e.color_palette)||void 0===T?void 0:T.value,colorType:e.set_chart_color||e.set_color,dashboard:t,reportId:e.sys_id,singleColor:e.color.value,colorList:e.colors,enableColorPerMetric:!1,metricMap:M}),U},R=function R(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},S=(R(\"content_block_static\",\"com.glide.cms.RenderBlock\"),R(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),R(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),R(\"\",\"com.glide.ui.portal.RenderReport\"),R(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),F=(R(S.group,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.group2,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.single,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.multi,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.date,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.bool,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),R(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),R(S.debug,\"com.glideapp.home.RenderHomepagePublishers\"),R(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),R(\"\",\"com.glide.ui.portal.RenderDashboard\"),R(\"report\",\"com.glide.ui.portal.RenderJavascript\"),R(\"\",\"com.glide.ui.portal.RenderJavascript\"),R(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),R(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),R(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),R(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),T=function T(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},A=function A(e,r){var t={message:i(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(n({message:i(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(n(t))&&e.migrationNotes.push(n(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},P=function P(e,r,o,l){var s,d=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(n({message:i(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(e,r);if(d)return e.migratingFromJava&&l?T(r,l):(s=\"report\",function(e,r,t,o){var l;return(l=s===F?function(){for(var e in S)if(S[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(n({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===s||s===F?function(e,r,t,o){var a,i,n;return e.migratingFromJava&&o?T(r,o):A(e,{static_content:h(\"<b>Unsupported migration: \".concat(null!==(a=null!==(i=r.name)&&void 0!==i?i:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> widget.\"))})}(e,a(r,{type:l}),0,o):function(e,r,t,o){var a,i,n;return e.migratingFromJava&&o?T(r,o):A(e,{static_content:h(\"<b>Unsupported migration: \".concat(null!==(a=null!==(i=r.name)&&void 0!==i?i:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var a,l,s,d;if(e.migratingFromJava&&o)return T(r,o);var u=\"\";null!=r&&r.type?u=r.type:null!=o&&null!==(a=o.type)&&void 0!==a&&a.value?u=null==o||null===(l=o.type)||void 0===l?void 0:l.value:null!=o&&null!==(s=o.renderer)&&void 0!==s&&s.value&&(u=o.renderer.value);var c=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(n({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),A(e,{static_content:h(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(u,\": \").concat(c,\"</span> widget.\"))})}(e,r,0,o)})(e,r,o,l);var u=w(a(r,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(l)),e,o);return function(e,r,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var a=t(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),o.additionalGroupByConfig=[],a.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(r,0,u),{component_id:\"bar\"===r.type?\"23051643b7e03010097cb81cde11a910\":\"85855283b7e03010097cb81cde11a91d\",component_props:u}};this.run=function(e,r,t,o,a){var i,n={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(i=e.sys_id[t])||void 0===i?void 0:i[0],s=P(n,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=n.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"563aecebb7232110997a9f78ce11a916","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:48:20","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/23051643b7e03010097cb81cde11a910","value":"23051643b7e03010097cb81cde11a910"},"key":"barReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"metricBase\",r={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},t=function t(e){for(var r,t,o=\"\".concat(e),i=\"\",n=0,a=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(n)||(a=\"=\",n%1);){if((t=o.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,i+=a.charAt(63&r>>8-n%1*8)}return i.toString()},o=function o(e,r){return void 0!==e&&void 0!==r&&e.indexOf(r)>-1},i=function i(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,i=0;i<e.length;i++)e.charAt(i)!==r||(t.push(e.substring(o,i)),o=i+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function n(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),i=o.length>>>0,n=arguments[1],a=0;a<i;a++){var l=o[a];if(r.call(n,l,a,o))return t?a:l}}function a(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var l=function l(e,r){return{text:e,vars:r}},s=function s(e){var r=e.message,t=e.level,o=e.tooltip,i=e.originalArtifactSysId,n=e.artifactTable,a=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,u={text:r,level:t,help:o,originSysId:i,hasNewArtifact:a,table:n,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?u:d(u)},d=function d(e){var r,t,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},u=\"sys_report\";function c(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,a=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return a=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{a||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var g=function g(e){return t(\"table\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},p=function p(e){return t(e+new Date().getTime()+1e8*Math.random())},f=function f(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,o=i(e,\"^\"),a=[],l=c(o);try{var s=function s(){var e=t.value;if(n(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";a.push(e)};for(l.s();!(t=l.n()).done;)s()}catch(e){l.e(e)}finally{l.f()}return a.join(\"^\")};function v(e){return v=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},v(e)}var h=function h(e){return{durationFormat:b(a(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},y=function y(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=b(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},b=function b(e,r,t){var o=JSON.parse(JSON.stringify(r)),i=!1;for(var n in t)void 0!==o[t[n]]&&e[n]!==o[t[n]]&&(i=!0,o[t[n]]=e[n]);return!!i&&o},_=function _(e,r,t,o,i){var n={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},a={durationFormattingProperties:h,numberFormattingProperties:y};switch(i){case\"heatmap\":case\"box\":return\"glide_duration\"===t?n:a.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===v(e)&&a.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return a.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(a[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return a[s](e[s][d],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:n},w=function w(e){return e.join(\":\")},T=function T(e,r,t){return n(Object.keys(e),function(e){return e===r})?e[r].dataSourceId:g(t)},A=function A(e,r,t){var o=n(e,function(e){return e.id===r}),i=!1;return o&&o.filterQuery===t||(i=!0),i};function R(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return F(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?F(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,a=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return a=e.done,e},e:function e(_e5){l=!0,n=_e5},f:function f(){try{a||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function F(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function S(e){switch(e){case\"line_bar\":return\"bar\";case\"step_line\":return\"step\";default:return e}}var x=function x(e,t){var o={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},i=function i(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),o=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(o,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))o.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){o.showAbsolutePeriod=!0,o.startTime=i(null==e?void 0:e.from),o.endTime=i(null==e?void 0:e.to);var a=new Date;new Date(o.startTime)>a&&!o.endTime?o.endTime=o.startTime:o.startTime&&!o.endTime?o.useCurrentDateForEnd=!0:!o.startTime&&o.endTime&&(o.showMaximumRange=!0,o.endTime=null)}else{o.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var l=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),s=n(Object.keys(r),function(e){return r[e]===l},!0),d=n(Object.keys(r),function(e){return r[e]===t},!0);o.period=s<d?t:l}return o},O=function O(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},I=function I(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},P=(I(\"content_block_static\",\"com.glide.cms.RenderBlock\"),I(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),I(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),I(\"\",\"com.glide.ui.portal.RenderReport\"),I(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),C=(I(P.group,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.group2,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.single,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.multi,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.date,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.bool,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),I(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),I(P.debug,\"com.glideapp.home.RenderHomepagePublishers\"),I(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"\",\"com.glide.ui.portal.RenderDashboard\"),I(\"report\",\"com.glide.ui.portal.RenderJavascript\"),I(\"\",\"com.glide.ui.portal.RenderJavascript\"),I(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),I(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),I(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),I(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),B=function B(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},N=function N(e,r){var t={message:l(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(s({message:l(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(s(t))&&e.migrationNotes.push(s(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},E=function E(r,t,d,m){var v,h=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(s({message:l(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(r,t),y=function(e){var r,t,o,n,a=e.table,l=e.aggregateFieldType,s=e.filter,d=e.groupByMetadata,u=e.chart_title||e.title,c=null===(r=e.color_palette)||void 0===r?void 0:r.value,m=e.show_chart_data_label,g=e.field,p=e.legend_horizontal_alignment,f=e.legend_vertical_alignment,v=e.show_legend,h=e.decimal_precision,y=e.show_chart_border,b=e.source_type,_=e.aggregate,w=e.other_threshold,T=e.sumfield,A=i(e.colors,\",\"),R=e.set_color,F=null===(t=e.color)||void 0===t?void 0:t.value,S=e.show_chart_total,x=e.trend_field,O=e.interval,I=e.x_axis_title,P=e.x_axis_display_grid,C=e.y_axis_display_grid,B=e.y_axis_title,N=e.y_axis_from,E=e.y_axis_to,D=e.y_axis_opposite,k=e.show_marker;try{n=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(r){console.log(\"Unable to transform json 2\",r.toString(),e),n={}}var J=null===(o=e.report_source)||void 0===o?void 0:o.value,M=e.is_real_time,H=e.bar_unstack,U=e.series_name_text,L={};try{var j;e.custom_config&&\"\"!==e.custom_config&&(L=null===(j=JSON.parse(e.custom_config))||void 0===j?void 0:j.transforms)}catch(r){console.log(\"Unable to transform widget.custom_config to json \",r.toString(),e.custom_config),L={}}var z=e.start_time,G=e.end_time,Y=e.display_grid;return{table:a,chartTitle:u,colorType:R,colorPalette:c,singleColor:F,showDataLabel:m,groupBy:g,legendVerticalAlignment:f,legendHorizontalAlignment:p,showLegend:v,numberOfPeriods:h,showChartBorder:y,sourceType:b,aggregateType:_,otherThreshold:w,filter:s,aggregateField:T,colors:A,showTotal:S,trendBy:x,trendInterval:O,xAxisTitle:I,xAxisShowGrid:P,yAxisShowGrid:C,yAxisTitle:B,yAxisFrom:N,yAxisTo:E,yAxisOpposite:D,formattingConfiguration:n,reportSource:J,reportId:e.sys_id,isRealTime:M,isGroupedBars:H,aggregateFieldType:l,dataSetName:U,groupByMetadata:d,customConfig:L,startTime:z,endTime:G,showMarkers:k,showDataTable:Y}}(t),b=function(r){var t=function(r){var t,i,d,m,v,h,y,b,F=r.table,O=r.chartTitle,I=r.colorPalette,P=r.showDataLabel,C=r.groupBy,B=r.showOthers,N=r.legendHorizontalAlignment,E=r.legendVerticalAlignment,D=r.numberOfPeriods,k=(r.showChartBorder,r.sourceType),J=r.aggregateType,M=r.otherThreshold,H=r.filter,U=r.showLegend,L=r.aggregateField,j=r.colorType,z=r.trendBy,G=r.trendInterval,Y=r.xAxisTitle,V=r.xAxisShowGrid,W=r.yAxisShowGrid,Z=r.yAxisTitle,Q=r.yAxisFrom,q=r.yAxisTo,X=r.yAxisOpposite,$=r.formattingConfiguration,K=r.reportSource,ee=r.reportId,re=r.aggregateFieldType,te=r.d,oe=r.showHeader,ie=r.showTitle,ne=r.showBorder,ae=r.indexes,le=(r.dataSetName,r.groupByMetadata),se=r.singleColor,de=r.customConfig,ue=r.startTime,ce=r.endTime,me=r.colors,ge=r.showMarkers,pe=r.showDataTable,fe=function(e,r){var t,i=\"value\",n=\"desc\";if(o(e,\"ORDERBY\")&&(i=\"name\",o(e,\"DESC\")||(n=\"asc\")),r&&!o(e,\"ORDERBY\")){var a=r.type,l=r.internalType;n=\"asc\",\"date\"===(t=a)||\"datetime\"===t||\"due_date\"===t||\"glide_date\"===t||\"glide_date_time\"===t||\"glide_precise_time\"===t?i=\"report_range\":function(e){return\"integer\"===e||\"decimal\"===e||\"numeric\"===e||\"float\"===e||\"domain_number\"===e||\"auto_increment\"===e||\"percent_complete\"===e}(a)?i=\"value\":\"choice\"===a&&\"integer\"===l?i=\"choice\":\"reference\"===a||\"choice\"===a&&\"string\"===l?i=\"name\":n=\"desc\"}return{sortBy:i,sortByOrder:n}}(H,le),ve=f(H),he=function(e,r){var t={register:\"\",horizontal:\"\",orientation:\"vertical\"};function o(){t.horizontal=\"center\",\"left\"===e&&(t.horizontal=\"start\"),\"right\"===e&&(t.horizontal=\"end\")}return\"right\"===e?(t.register=\"right\",t.horizontal=\"center\"):\"left\"===e&&(t.register=\"left\",t.horizontal=\"center\"),\"bottom\"===r||\"center\"===r||\"middle\"===e?(t.register=\"bottom\",t.orientation=\"horizontal\",o()):\"top\"===r&&(t.orientation=\"horizontal\",t.register=\"top\",o()),t}(N,E),ye=function(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(r){return e}}(M),be=_($,parseInt(D,10),re,J),_e=g(F),we=p(_e),Te={},Ae=w([F,null==K?void 0:K.value,ve]);Te[Ae]={metricId:we,dataSourceId:_e,metricColor:se};var Re,Fe=!1;switch(G){case\"dayofweek\":b=\"dayOfWeek\",Fe=!0;break;case\"hour\":b=\"hourOfDay\",Fe=!0;break;default:b=G}if(32===G.length&&(b=G),\"metricbase\"===k){var Se={period:0===(null==ue?void 0:ue.indexOf(\"P\"))?ue.slice(1):\"between\",from:ue,to:ce};D=(Re=x(Se,\"1D\")).numberOfPeriods,k=e,delete be.durationFormat,delete be.dateFormat,delete be.stringFormat}var xe={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:ve,id:_e,isDatabaseView:!1,label:void 0,reportSourceSysId:K,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===k||0===k.length?\"table\":k,tableOrViewName:k!==e?F:void 0,table:k===e?F:void 0}],dateFormat:\"default\",disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null===(t=Re)||void 0===t?void 0:t.endTime,extensionType:\"area\",filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:(null!==(i=null==C?void 0:C.length)&&void 0!==i?i:0)>0?[{disableRanges:!1,groupBy:[{dataSource:_e,groupByField:C,isChoice:\"choice\"===(null==le?void 0:le.type),isPaBucket:!1,isRange:null==le?void 0:le.isRange,metric:we}],hideZeroValues:!1,maxNumberOfGroups:null!=le&&le.isRange?\"ALL\":ye,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==le||!le.isRange)&&\"true\"===B}]:[],headerTitle:ie?O:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!0,hideYAxis2:!0,hideYAxis3:!0,hideYAxis4:!0,legendExpandToFit:!0,legendHorizontalAlignment:he.horizontal,legendPosition:he.register,lineStrokeWidth:\"2\",metrics:[a({aggregateFunction:(null==J?void 0:J.length)>0?J:\"COUNT\",axisId:\"primary\",dataSource:_e,id:we,label:void 0,transforms:de},be)],newReporting:!1,numberOfPeriods:parseInt(D,10),period:null===(d=Re)||void 0===d?void 0:d.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null===(m=Re)||void 0===m?void 0:m.showAbsolutePeriod,showBorder:ne,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===P,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:null,showHeader:oe,showHeaderSeparator:!1,showLegend:\"true\"===U,showLegendValue:!1,showMaximumRange:null===(v=Re)||void 0===v?void 0:v.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showContinuousLine:!0,enableAddZerosAtApi:Fe,showMarkers:\"true\"===ge,showTotalValue:null,showTrend:!1,showXGrid:\"true\"===V,showYGrid:\"true\"===W,sortBy:fe.sortBy,sortByOrder:fe.sortByOrder,startTime:null===(h=Re)||void 0===h?void 0:h.startTime,telemetry:\"null\",trendBy:{trendByFields:[{field:z,metric:we}],trendByFrequency:b,trendByMinuteInterval:null},wrapTitle:!1,xAxisTitle:Y,yAxis0From:Q,yAxis0Position:\"true\"===X?\"right\":\"left\",yAxis0Title:Z,yAxis0To:q,showDataTable:\"true\"===pe};L&&\"COUNT\"!==J&&\"\"!==L&&(xe.metrics[0].aggregateField=L);var Oe,Ie=R(null!==(y=ae.report_layers[ee])&&void 0!==y?y:[]);try{for(Ie.s();!(Oe=Ie.n()).done;){var Pe,Ce,Be,Ne,Ee=Oe.value,De=xe.dataSources.map(function(e){return e.tableOrViewName}).concat(xe.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),ke=f(Ee.filter);Ae=w([F,null==K?void 0:K.value,ke,Ee.sys_id]);var Je=T(Te,Ae,Ee.table);Te[Ae]={metricId:p(Je),dataSourceId:Je,metricColor:null===(Pe=Ee.color)||void 0===Pe?void 0:Pe.value};var Me,He=A(xe.dataSources,Je,ke);if((!o(De,Ee.table)&&!o(De,Ee.report_source)||He)&&xe.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:Ee.table,filterQuery:ke,reportSourceSysId:null===(Me=Ee.report_source)||void 0===Me?void 0:Me.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:Je,dataCategories:[\"trend\",\"group\",\"simple\"]}),xe.metrics.push(a({dataSource:Te[Ae].dataSourceId,id:Te[Ae].metricId,aggregateFunction:Ee.aggregate,aggregateField:\"COUNT\"===Ee.aggregate&&\"\"!==Ee.sumfield?void 0:Ee.sumfield,axisId:\"primary\",label:(null===(Ce=Ee.series_name_text)||void 0===Ce?void 0:Ce.length)>0?Ee.series_name_text:void 0,chartType:S(Ee.type)},_(Ee.formatting_configuration,parseInt(D,10),Ee.aggregateFieldType,Ee.aggregateType))),(null===(Be=Ee.trend_field)||void 0===Be?void 0:Be.length)>0&&xe.trendBy.trendByFields.push({field:Ee.trend_field,metric:Te[Ae].metricId}),(null===(Ne=Ee.field)||void 0===Ne?void 0:Ne.length)>0||xe.groupBy.length>0)return void te.migrationNotes.push(s({message:l(\"This visualization is in compatibility mode because the group by configuration is not supported for this metric.\"),level:1,originalArtifactSysId:ee,artifactTable:u,featureFlags:te.featureFlags}))}}catch(e){Ie.e(e)}finally{Ie.f()}return xe.colorConfig=function(e){var r=e.colorPalette,t=e.colorType,o=e.dashboard,i=e.reportId,a=e.enableColorPerMetric,d=e.singleColor,m=e.metrics,g=e.colorList,p=e.metricMap;if(m&&p&&!o.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var f={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)f.type=\"palette\",f.palette=r;else if(\"several_colors\"===t)!g||Array.isArray(g)&&!n(g,function(e){return\"\"!==e})?f.type=\"chartColor\":o.migrationNotes.push(s({message:l(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:l(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:i,artifactTable:u,featureFlags:o.featureFlags}));else if(\"chart_colors\"===t)f.type=\"chartColor\";else if(\"one_color\"===t&&((null==d?void 0:d.length)>0||n(Object.keys(null!=p?p:{}),function(e){var r;return(null===(r=p[e].metricColor)||void 0===r?void 0:r.length)>0})))if(p){for(var v=a?\"colorsPerMetric\":\"singleColor\",h=[],y=0,b=Object.keys(p);y<b.length;y++){var _,w=b[y];h.push({metric:p[w].metricId,color:null!==(_=p[w].metricColor)&&void 0!==_?_:\"de699435d7033100b4964ebfae610331\"})}f.type=v,f.values=h}else{var T,A=[],R=c(null!=m?m:[]);try{for(R.s();!(T=R.n()).done;){var F=T.value;A.push({color:d,metric:F})}}catch(e){R.e(e)}finally{R.f()}f.type=\"singleColor\",f.values=A}return f}({colorPalette:I,colorType:j,dashboard:te,reportId:ee,singleColor:se,colorList:me,enableColorPerMetric:!0,metricMap:Te}),xe}(r);if(t)return t.extensionType=\"spline\",t}(a(y,{d:r,indexes:d},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(m)));return!b||h?r.migratingFromJava&&m?B(t,m):(v=\"report\",function(e,r,t,o){var i;return(i=v===C?function(){for(var e in P)if(P[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===v||v===C?function(e,r,t,o){var i,n,a;return e.migratingFromJava&&o?B(r,o):N(e,{static_content:O(\"<b>Unsupported migration: \".concat(null!==(i=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(a=o.type)||void 0===a?void 0:a.value,\"</span> widget.\"))})}(e,a(r,{type:i}),0,o):function(e,r,t,o){var i,n,a;return e.migratingFromJava&&o?B(r,o):N(e,{static_content:O(\"<b>Unsupported migration: \".concat(null!==(i=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(a=o.type)||void 0===a?void 0:a.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var i,n,a,d;if(e.migratingFromJava&&o)return B(r,o);var u=\"\";null!=r&&r.type?u=r.type:null!=o&&null!==(i=o.type)&&void 0!==i&&i.value?u=null==o||null===(n=o.type)||void 0===n?void 0:n.value:null!=o&&null!==(a=o.renderer)&&void 0!==a&&a.value&&(u=o.renderer.value);var c=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),N(e,{static_content:O(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(u,\": \").concat(c,\"</span> widget.\"))})}(e,r,0,o)})(r,t,d,m):(function(e,r,t){if(e.additional_groupby){t.showAdditionalGroupBySelector=!0;var o=i(e.additional_groupby,\",\");-1===o.indexOf(e.field)&&o.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&o.push(e.trend_field),t.additionalGroupByConfig=[],o.forEach(function(e){t.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(t,0,b),{component_id:\"0f1e76928c4814e1430774fb864003f0\",component_props:b})};this.run=function(e,r,t,o,i){var n,a={migratingFromJava:!0,migrationNotes:[],featureFlags:i,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=E(a,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=a.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"58556067b7232110997a9f78ce11a9f5","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:26:54","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/0f1e76928c4814e1430774fb864003f0","value":"0f1e76928c4814e1430774fb864003f0"},"key":"splineReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"15","sys_updated_on":"2023-06-20 09:39:29","sys_tags":"","script":"Number.isNaN = function (n) {\r\n  return n != n;\r\n};\r\nObject.setPrototypeOf = function x (arg1, arg2) {\r\n  var o = {};\r\n  var k = Object.keys(arg1);\r\n  for(var i = 0;i < k.length;i++){\r\n    o[k[i]] = arg1[k[i]];\r\n  }\r\n  k = Object.keys(arg2);\r\n  for(var i = 0;i < k.length;i++){\r\n    o[k[i]] = arg1[k[i]];\r\n  }\r\n  return o;\r\n};\r\nObject.entries = function( obj ){\r\n    var ownProps = Object.keys( obj ),\r\n        i = ownProps.length,\r\n        resArray = new Array(i); // preallocate the Array\r\n    while (i--)\r\n      resArray[i] = [ownProps[i], obj[ownProps[i]]];\r\n    \r\n    return resArray;\r\n  };","sys_class_name":"par_coreui_migration_script","sys_id":"5e0ee954b7232110997a9f78ce11a9c8","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-16 14:25:00","sys_name":"","sys_scope":"","macroponent":"","key":"pollyFills","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=_e?_e:\"\",\"::\").concat(null!=r?r:\"\")},r=(e(\"content_block_static\",\"com.glide.cms.RenderBlock\"),e(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),e(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),e(\"\",\"com.glide.ui.portal.RenderReport\"),e(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),t=(e(-1,\"com.glideapp.home.RenderHomepagePublishers\"),e(4,\"com.glideapp.home.RenderHomepagePublishers\"),e(r,\"com.glideapp.home.RenderHomepagePublishers\"),e(2,\"com.glideapp.home.RenderHomepagePublishers\"),e(3,\"com.glideapp.home.RenderHomepagePublishers\"),e(5,\"com.glideapp.home.RenderHomepagePublishers\"),e(6,\"com.glideapp.home.RenderHomepagePublishers\"),e(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderDashboard\"),e(\"report\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderJavascript\"),e(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),e(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),e(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),i=\"\",o=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(o)||(n=\"=\",o%1);){if((t=a.charCodeAt(o+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,i+=n.charAt(63&r>>8-o%1*8)}return i.toString()});function a(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}var i=function i(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}},o=function o(e,r){return{text:e,vars:r}},n=function n(e){var r=e.message,t=e.level,a=e.tooltip,i=e.originalArtifactSysId,o=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,d=e.featureFlags,c={text:r,level:t,help:a,originSysId:i,hasNewArtifact:n,table:o,debugInfo:l};return\"true\"===(null==d?void 0:d.translatedLogs)?c:s(c)},s=function s(e){var r,t,a,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==a?a:e.text},l=\"sys_choice\";function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var c=function c(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,a=function(e,r){if(void 0===e)return[];for(var t=[],a=0,i=0;i<e.length;i++)\"^\"!==e.charAt(i)||(t.push(e.substring(a,i)),a=i+1);return a<=e.length&&t.push(e.substring(a,e.length)),t}(e),i=[],o=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,i=function i(){};return{s:i,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,_n=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){s=!0,o=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw o}}}}(a);try{var n=function n(){var e=t.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),i=a.length>>>0,o=arguments[1],n=0;n<i;n++){var s=a[n];if(r.call(o,s,n,a))return t?n:s}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";i.push(e)};for(o.s();!(t=o.n()).done;)n()}catch(e){o.e(e)}finally{o.f()}return i.join(\"^\")},u=/[0-9a-f]{32}/,m=function e(r,t,a){var i,s,d,c,m,p,g=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(m=r.breakdown)&&void 0!==m&&m.value&&(d=r.breakdown_level2.value),!c&&r.element&&(c=r.element_level2)):(null!==(p=r.breakdown)&&void 0!==p&&p.value&&(d=r.breakdown.value),!c&&r.element&&(c=r.element)),d&&c&&\"unmatched\"!==c){var v=r.indexes.sys_id[d][0],f=c;r.indexes.sys_id[v.dimension.value][0].facts_table===l&&u.test(c)&&(f=r.indexes.sys_id[f][0].value);var h,_={sysId:d,elementSysIds:[f]};\"true\"===r.manual_elements&&_.elementSysIds.concat(null===(h=r.indexes.widget_elements[r.sys_id])||void 0===h?void 0:h.map(function(e){return\"unassigned\"===e.element?g:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(_.elementsFilterSysId=r.elements_filter.value,_.elementSysIds=[]),a.breakdowns.push(_)}else if(null!==(i=r.breakdown)&&void 0!==i&&i.value){var b=r.indexes.sys_id[d][0],y=r.indexes.sys_id[b.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(y.facts_table===l||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:[g]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:d,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var R,S,I;r.indexes.widget_elements&&0!==(null!==(R=null===(S=r.indexes.widget_elements[r.sys_id])||void 0===S?void 0:S.length)&&void 0!==R?R:0)?a.breakdowns.push({sysId:d,elementSysIds:null===(I=r.indexes.widget_elements[r.sys_id])||void 0===I?void 0:I.map(function(e){return\"unassigned\"===e.element?g:e.element})}):r.dashboard.migrationNotes.push(n({message:o(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:d,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(y.facts_table===l||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[g],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(s=r.breakdown_level2)&&void 0!==s&&s.value&&!t?e(r,!0,a):a},p=function p(e){var r,i,s,l,d,u,p=e.props,g=e.indexes,v=e.dashboard,f=e.showSparkline,h=e.showChange,_=e.showTarget,b=e.showGapPercentage,y=e.showScoreDate,w=e.showChangePercentage,R=m(a(p,{indexes:g,dashboard:v}));if(R.doMigration){\"periods_back\"===p.lastscore_compare&&v.migrationNotes.push(n({message:o(\"This visualization is in compatibility mode because the compare score with previous periods feature is not supported.\"),level:1,originalArtifactSysId:p.sys_id,artifactTable:null==p?void 0:p.sys_table_name,featureFlags:v.featureFlags}));var S,I,T=(S=null===(r=p.indicator)||void 0===r?void 0:r.value,t(\"indicator\".concat(S).concat(new Date().getTime()).concat(1e8*Math.random()))),k=t(T+new Date().getTime()+1e8*Math.random()),A=g.sys_id[null===(i=p.indicator)||void 0===i?void 0:i.value][0],P=\"realtime\"===p.visualization,x=\"1\"===A.type,F=void 0===A.show_realtime_score?x&&P:x&&\"true\"===A.show_realtime_score;return{showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,enableDrilldown:!0,newReporting:!1,showSparkline:f,dataPassthrough:null,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,showMaximumRange:!1,enableRealTimeUpdate:F,scoreType:null,useRelativeScoreTime:F,showScoreUpdateTime:F,colorConfig:{type:\"default\"},scoreSize:\"auto\",showFilterIcon:\"true\"===p.follow_element,followFilters:\"true\"===p.follow_element,headingPosition:null,showChange:h,showTarget:_,showGapPercentage:b,showScoreDate:!F&&y,showChangePercentage:w,showChangeFrom:!0,showZero:!1,description:p.description,dataSources:[{allowRealTime:P&&x,allowTotalValue:x,indicatorType:A.type,isScriptedIndicator:!1,label:A.name,filter:c(p.filter),sourceType:\"indicator\",uuid:{breakdowns:R.breakdowns,indicator:null===(s=p.indicator)||void 0===s?void 0:s.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:T,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[{dataSource:T,id:k,aggregateIndicator:null!==(l=null===(d=p.aggregate)||void 0===d?void 0:d.value)&&void 0!==l?l:\"\",frequency:parseInt(null!==(u=null==A?void 0:A.frequency)&&void 0!==u?u:\"10\",10),numberFormat:a((I=parseInt(A.precision,10),{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=I?I:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}),{abbreviationEnabled:!1,numberInTooltipsEnabled:!1,thousandSeparatorEnabled:!0}),axisId:\"primary\"}],headerTitle:p.showTitle?p.sys_name:\"\"}}v.migrationNotes.push(n({message:o(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:p.sys_id,artifactTable:null==p?void 0:p.sys_table_name,featureFlags:v.featureFlags}))},g=function g(e,r,t,s){!function(e,r,t){for(var a=0,i=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:o(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:o(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<i.length;a++){var s=i[a];s.shouldLog&&e.migrationNotes.push(n(s.message))}}(e,r);var l=!1,d=!1,c=!1,u=!1,m=!1,g=!1;switch(r.template){case\"template1\":case\"template2\":case\"\":l=!0,g=!0,d=!0,u=!0;break;case\"template3\":g=!0,d=!0,u=!0,c=!0,m=!0;break;default:if(e.migratingFromJava&&s)return i(r,s);throw new Error(\"Don't know what kind of template that is? Dashboard \".concat(e.sys_id,\" Element: \").concat(r.sys_name))}var v,f=function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(s),h=p({props:a(r,f),showSparkline:l,showChange:d,showTarget:c,showChangePercentage:u,showGapPercentage:m,showScoreDate:g,indexes:t,dashboard:e});return h?{component_id:\"d24d53f60350de7a652caf3188a46ed2\",component_props:h}:e.migratingFromJava&&s?i(r,s):function(e,r){var t={message:o(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(n({message:o(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(n(t))&&e.migrationNotes.push(n(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(v=\"ERROR: Cannot migrate PA Single Score widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(v,\"</p>\"))})};this.run=function(e,r,t,a,i){var o,n={migratingFromJava:!0,migrationNotes:[],featureFlags:i,migratingSingleArtifact:!0},s=null===(o=e.sys_id[t])||void 0===o?void 0:o[0],l=g(n,s,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return l.migrationNotes=n.migrationNotes,l};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"5e4d40d2773431106e3f665d6a5a9909","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-23 15:48:05","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/d24d53f60350de7a652caf3188a46ed2","value":"d24d53f60350de7a652caf3188a46ed2"},"key":"scorePAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),a=\"\",i=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(i)||(n=\"=\",i%1);){if((t=o.charCodeAt(i+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=n.charAt(63&r>>8-i%1*8)}return a.toString()},r=function r(e,_r){return void 0!==e&&void 0!==_r&&e.indexOf(_r)>-1},t=function t(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,a=0;a<e.length;a++)e.charAt(a)!==r||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function o(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,i=arguments[1],n=0;n<a;n++){var l=o[n];if(r.call(i,l,n,o))return t?n:l}}function a(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var i=function i(e,r){return{text:e,vars:r}},n=function n(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,s=e.debugInfo,d=e.featureFlags,u={text:r,level:t,help:o,originSysId:a,hasNewArtifact:n,table:i,debugInfo:s};return\"true\"===(null==d?void 0:d.translatedLogs)?u:l(u)},l=function l(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text};function s(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){l=!0,i=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var u=function u(r){return e(\"table\".concat(r).concat(new Date().getTime()).concat(1e8*Math.random()))},c=function c(r){return e(r+new Date().getTime()+1e8*Math.random())},p=function p(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var a,i=t(e,\"^\"),n=[],l=s(i);try{var d=function d(){var e=a.value;if(o(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";n.push(e)};for(l.s();!(a=l.n()).done;)d()}catch(e){l.e(e)}finally{l.f()}return n.join(\"^\")};function m(e){return m=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},m(e)}var g=function g(e){return{durationFormat:v(a(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},f=function f(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=v(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},v=function v(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var i in t)void 0!==o[t[i]]&&e[i]!==o[t[i]]&&(a=!0,o[t[i]]=e[i]);return!!a&&o},y=function y(e,r,t,o,a){var i={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},n={durationFormattingProperties:g,numberFormattingProperties:f};switch(a){case\"heatmap\":case\"box\":return\"glide_duration\"===t?i:n.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===m(e)&&n.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return n.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(n[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return n[s](e[s][d],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:i},b=function b(e){return e.join(\":\")},h=function h(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")};function _(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var w=function w(e,t,l){var d,m,g,f,v,h,w,R,S,F,T,A,P=\"bar\"===e.type,x=12;\"-1\"===e.other_threshold?x=\"ALL\":e.other_threshold>-2&&(x=e.other_threshold);var I,O,B=y(e.formatting_configuration,parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregateType),C=u(e.table),N=c(C),E=p(e.filter),J={sortBy:\"value\",sortByOrder:\"desc\"};r(e.filter,\"^ORDERBY\")&&(I=e.filter,O={sortBy:\"value\",sortByOrder:\"desc\"},r(I,\"ORDERBY\")&&r(I,\"ASC\")&&(O.sortByOrder=\"asc\"),J=O);var M={},k=b([e.table,null===(d=e.report_source)||void 0===d?void 0:d.value,E]);M[k]={metricId:N,dataSourceId:C,metricColor:null===(m=e.color)||void 0===m?void 0:m.value};var H,U={configVersion:\"23.0.0-ci-SNAPSHOT\",yAxisHidden:!1,yAxisPosition:P||\"true\"!==e.x_axis_opposite?\"bottom\":\"top\",yAxisShowGrid:!0,xAxisWrapLabels:!1,xAxisMaxLabelSize:100,xAxisTruncationType:\"end\",yAxisStyle:\"clean\",showLegend:\"true\"===e.show_legend,showLegendValue:!1,legendPosition:\"bottom\",legendHorizontalAlignment:\"center\",legendExpandToFit:!1,showDataLabels:\"true\"===e.show_chart_data_label,dataLabelPosition:\"true\"===e.show_data_label_position_middle?\"middle\":\"top\",showStackedValues:\"none\",showOverlappingLabels:!1,newReporting:!1,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:E,reportSourceSysId:null===(g=e.report_source)||void 0===g?void 0:g.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:C,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[a({dataSource:C,id:N,label:(null===(f=e.series_name_text)||void 0===f?void 0:f.length)>0?e.series_name_text:void 0,aggregateFunction:(null===(v=e.aggregate)||void 0===v?void 0:v.length)>0?e.aggregate:\"COUNT\",aggregateField:\"COUNT\"===e.aggregate&&\"\"!==e.sumfield?void 0:e.sumfield,axisId:\"primary\"},B)],groupBy:[e.field&&e.field.length>0?{groupBy:[{dataSource:C,groupByField:e.field,isRange:null!==(h=null===(w=e.groupByMetadata)||void 0===w?void 0:w.isRange)&&void 0!==h&&h,isChoice:\"choice\"===(null===(R=e.groupByMetadata)||void 0===R?void 0:R.type),isPaBucket:!1}],maxNumberOfGroups:null!==(S=e.groupByMetadata)&&void 0!==S&&S.isRange?\"ALL\":x,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null===(F=e.groupByMetadata)||void 0===F||!F.isRange)&&\"true\"===e.others}:void 0],sortBy:J.sortBy,sortByOrder:J.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",yAxisTitle:e.y_axis_title,xAxisTitle:e.x_axis_title,yAxisFrom:e.y_axis_from,yAxisTo:e.y_axis_to,showDataTable:\"true\"==e.display_grid};H=e.additional_groupby||\"true\"!==e.bar_unstack&&e.trend_field&&\"\"!==e.trend_field?\"stacked\":\"grouped\",U.chartVariation=H,e.trend_field&&\"\"!==e.trend_field&&U.groupBy.push({groupBy:[{dataSource:C,groupByField:e.trend_field,isRange:e.trendMetadata.isRange,isChoice:\"choice\"===e.trendMetadata.type,isPaBucket:!1}]});var D,L=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return _(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n2=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n2=e.done,e},e:function e(_e5){l=!0,i=_e5},f:function f(){try{_n2||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}(null!==(A=l.report_layers[e.sys_id])&&void 0!==A?A:[]);try{var j=function j(){var t,i,n,l,s=D.value,d=U.dataSources.map(function(e){return e.tableOrViewName}).concat(U.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),m=p(s.filter);k=b([s.table,null===(t=s.report_source)||void 0===t?void 0:t.value,m,s.sys_id]);var g=function(e,r,t){return o(Object.keys(e),function(e){return e===r})?e[r].dataSourceId:u(t)}(M,k,s.table);M[k]={metricId:c(g),dataSourceId:g,metricColor:null==s||null===(i=s.color)||void 0===i?void 0:i.value};var f,v=function(e,r,t){var a=o(e,function(e){return e.id===r}),i=!1;return a&&a.filterQuery===t||(i=!0),i}(U.dataSources,g,m);if((!r(d,s.table)&&!r(d,s.report_source)||v)&&U.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:s.table,filterQuery:m,reportSourceSysId:null===(f=s.report_source)||void 0===f?void 0:f.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:g,dataCategories:[\"trend\",\"group\",\"simple\"]}),U.metrics.push(a({dataSource:M[k].dataSourceId,id:M[k].metricId,aggregateFunction:s.aggregate,aggregateField:\"COUNT\"===s.aggregate&&\"\"!==s.sumfield?void 0:s.sumfield,axisId:\"primary\",label:(null===(n=s.series_name_text)||void 0===n?void 0:n.length)>0?s.series_name_text:void 0},y(s.formatting_configuration,parseInt(e.decimal_precision,10),s.aggregateFieldType,s.aggregateType))),(null===(l=s.field)||void 0===l?void 0:l.length)>0){var h={dataSource:M[k].dataSourceId,groupByField:s.field,isRange:!1,isChoice:!1,isPaBucket:!1},_=!1;U.groupBy[0].groupBy.forEach(function(e){_=_||e.dataSource==h.dataSource&&e.groupByField==h.groupByField}),_||U.groupBy[0].groupBy.push(h)}};for(L.s();!(D=L.n()).done;)j()}catch(e){L.e(e)}finally{L.f()}return U.colorConfig=function(e){var r=e.colorPalette,t=e.colorType,a=e.dashboard,l=e.reportId,d=e.enableColorPerMetric,u=e.singleColor,c=e.metrics,p=e.colorList,m=e.metricMap;if(c&&m&&!a.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var g={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)g.type=\"palette\",g.palette=r;else if(\"several_colors\"===t)!p||Array.isArray(p)&&!o(p,function(e){return\"\"!==e})?g.type=\"chartColor\":a.migrationNotes.push(n({message:i(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:i(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:l,artifactTable:\"sys_report\",featureFlags:a.featureFlags}));else if(\"chart_colors\"===t)g.type=\"chartColor\";else if(\"one_color\"===t&&((null==u?void 0:u.length)>0||o(Object.keys(null!=m?m:{}),function(e){var r;return(null===(r=m[e].metricColor)||void 0===r?void 0:r.length)>0})))if(m){for(var f=d?\"colorsPerMetric\":\"singleColor\",v=[],y=0,b=Object.keys(m);y<b.length;y++){var h,_=b[y];v.push({metric:m[_].metricId,color:null!==(h=m[_].metricColor)&&void 0!==h?h:\"de699435d7033100b4964ebfae610331\"})}g.type=f,g.values=v}else{var w,R=[],S=s(null!=c?c:[]);try{for(S.s();!(w=S.n()).done;){var F=w.value;R.push({color:u,metric:F})}}catch(e){S.e(e)}finally{S.f()}g.type=\"singleColor\",g.values=R}return g}({colorPalette:null===(T=e.color_palette)||void 0===T?void 0:T.value,colorType:e.set_chart_color||e.set_color,dashboard:t,reportId:e.sys_id,singleColor:e.color.value,colorList:e.colors,enableColorPerMetric:!1,metricMap:M}),U},R=function R(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},S=(R(\"content_block_static\",\"com.glide.cms.RenderBlock\"),R(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),R(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),R(\"\",\"com.glide.ui.portal.RenderReport\"),R(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),F=(R(S.group,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.group2,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.single,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.multi,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.date,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.bool,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),R(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),R(S.debug,\"com.glideapp.home.RenderHomepagePublishers\"),R(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),R(\"\",\"com.glide.ui.portal.RenderDashboard\"),R(\"report\",\"com.glide.ui.portal.RenderJavascript\"),R(\"\",\"com.glide.ui.portal.RenderJavascript\"),R(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),R(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),R(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),R(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),T=function T(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},A=function A(e,r){var t={message:i(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(n({message:i(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(n(t))&&e.migrationNotes.push(n(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},P=function P(e,r,o,l){var s,d=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(n({message:i(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(e,r);if(d)return e.migratingFromJava&&l?T(r,l):(s=\"report\",function(e,r,t,o){var l;return(l=s===F?function(){for(var e in S)if(S[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(n({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===s||s===F?function(e,r,t,o){var a,i,n;return e.migratingFromJava&&o?T(r,o):A(e,{static_content:h(\"<b>Unsupported migration: \".concat(null!==(a=null!==(i=r.name)&&void 0!==i?i:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> widget.\"))})}(e,a(r,{type:l}),0,o):function(e,r,t,o){var a,i,n;return e.migratingFromJava&&o?T(r,o):A(e,{static_content:h(\"<b>Unsupported migration: \".concat(null!==(a=null!==(i=r.name)&&void 0!==i?i:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var a,l,s,d;if(e.migratingFromJava&&o)return T(r,o);var u=\"\";null!=r&&r.type?u=r.type:null!=o&&null!==(a=o.type)&&void 0!==a&&a.value?u=null==o||null===(l=o.type)||void 0===l?void 0:l.value:null!=o&&null!==(s=o.renderer)&&void 0!==s&&s.value&&(u=o.renderer.value);var c=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(n({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),A(e,{static_content:h(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(u,\": \").concat(c,\"</span> widget.\"))})}(e,r,0,o)})(e,r,o,l);var u=w(a(r,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(l)),e,o);return function(e,r,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var a=t(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),o.additionalGroupByConfig=[],a.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(r,0,u),{component_id:\"bar\"===r.type?\"23051643b7e03010097cb81cde11a910\":\"85855283b7e03010097cb81cde11a91d\",component_props:u}};this.run=function(e,r,t,o,a){var i,n={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(i=e.sys_id[t])||void 0===i?void 0:i[0],s=P(n,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=n.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"5f0aacebb7232110997a9f78ce11a9b1","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:47:53","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/85855283b7e03010097cb81cde11a91d","value":"85855283b7e03010097cb81cde11a91d"},"key":"horizontalBarReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=_e?_e:\"\",\"::\").concat(null!=r?r:\"\")},r=(e(\"content_block_static\",\"com.glide.cms.RenderBlock\"),e(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),e(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),e(\"\",\"com.glide.ui.portal.RenderReport\"),e(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),t=(e(-1,\"com.glideapp.home.RenderHomepagePublishers\"),e(4,\"com.glideapp.home.RenderHomepagePublishers\"),e(r,\"com.glideapp.home.RenderHomepagePublishers\"),e(2,\"com.glideapp.home.RenderHomepagePublishers\"),e(3,\"com.glideapp.home.RenderHomepagePublishers\"),e(5,\"com.glideapp.home.RenderHomepagePublishers\"),e(6,\"com.glideapp.home.RenderHomepagePublishers\"),e(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderDashboard\"),e(\"report\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderJavascript\"),e(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),e(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),e(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),o=\"\",i=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(i)||(n=\"=\",i%1);){if((t=a.charCodeAt(i+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,o+=n.charAt(63&r>>8-i%1*8)}return o.toString()});function a(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}var o=function o(e,r){return{text:e,vars:r}},i=function i(e){var r=e.message,t=e.level,a=e.tooltip,o=e.originalArtifactSysId,i=e.artifactTable,s=e.hasNewArtifact,l=e.debugInfo,d=e.featureFlags,c={text:r,level:t,help:a,originSysId:o,hasNewArtifact:s,table:i,debugInfo:l};return\"true\"===(null==d?void 0:d.translatedLogs)?c:n(c)},n=function n(e){var r,t,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},s=\"sys_choice\";function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var d=function d(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,a=function(e,r){if(void 0===e)return[];for(var t=[],a=0,o=0;o<e.length;o++)\"^\"!==e.charAt(o)||(t.push(e.substring(a,o)),a=o+1);return a<=e.length&&t.push(e.substring(a,e.length)),t}(e),o=[],i=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){s=!0,i=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw i}}}}(a);try{var n=function n(){var e=t.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,i=arguments[1],n=0;n<o;n++){var s=a[n];if(r.call(i,s,n,a))return t?n:s}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";o.push(e)};for(i.s();!(t=i.n()).done;)n()}catch(e){i.e(e)}finally{i.f()}return o.join(\"^\")},c=/[0-9a-f]{32}/,u=function e(r,t,a){var n,l,d,u,m,g,p=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(m=r.breakdown)&&void 0!==m&&m.value&&(d=r.breakdown_level2.value),!u&&r.element&&(u=r.element_level2)):(null!==(g=r.breakdown)&&void 0!==g&&g.value&&(d=r.breakdown.value),!u&&r.element&&(u=r.element)),d&&u&&\"unmatched\"!==u){var v=r.indexes.sys_id[d][0],f=u;r.indexes.sys_id[v.dimension.value][0].facts_table===s&&c.test(u)&&(f=r.indexes.sys_id[f][0].value);var h,_={sysId:d,elementSysIds:[f]};\"true\"===r.manual_elements&&_.elementSysIds.concat(null===(h=r.indexes.widget_elements[r.sys_id])||void 0===h?void 0:h.map(function(e){return\"unassigned\"===e.element?p:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(_.elementsFilterSysId=r.elements_filter.value,_.elementSysIds=[]),a.breakdowns.push(_)}else if(null!==(n=r.breakdown)&&void 0!==n&&n.value){var b=r.indexes.sys_id[d][0],y=r.indexes.sys_id[b.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(y.facts_table===s||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:[p]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:d,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var R,S,I;r.indexes.widget_elements&&0!==(null!==(R=null===(S=r.indexes.widget_elements[r.sys_id])||void 0===S?void 0:S.length)&&void 0!==R?R:0)?a.breakdowns.push({sysId:d,elementSysIds:null===(I=r.indexes.widget_elements[r.sys_id])||void 0===I?void 0:I.map(function(e){return\"unassigned\"===e.element?p:e.element})}):r.dashboard.migrationNotes.push(i({message:o(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:d,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(y.facts_table===s||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[p],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(l=r.breakdown_level2)&&void 0!==l&&l.value&&!t?e(r,!0,a):a},m=function m(e,r,n){var s,l,c=e.sys_id,m=e.indicator,g=e.show_data_labels,p=e.aggregate,v=e.sort_direction,f=e.sort_on,h=e.color_scheme,_=e.description,b=e.name,y=function(e){return t(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))}(null==m?void 0:m.value),w={type:\"default\"};null!=h&&h.value&&\"\"!==(null==h?void 0:h.value)&&(w={type:\"palette\",palette:null==h?void 0:h.value});var R=f;-1===[\"name\",\"value\"].indexOf(f)&&(R=\"value\",r.migrationNotes.push(i({message:o(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:c,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:r.featureFlags})));var S=u(a(e,{indexes:n,dashboard:r}));if(S.doMigration){!S.groupBy&&S.breakdowns.length>0&&(S.groupBy={groupByField:S.breakdowns[0].sysId,isRange:!1,isChoice:!1,isPaBucket:!1});var I,T,k=n.sys_id[null==m?void 0:m.value][0],A={applyDateRange:!1,bareBorder:!1,colorConfig:w,configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"both\",dataPassthrough:null,dataSources:[{allowRealTime:\"1\"===k.type,allowTotalValue:\"1\"===k.type,indicatorType:k.type,isScriptedIndicator:!1,filterQuery:d(e.filter),label:k.name,sourceType:\"indicator\",uuid:{breakdowns:S.breakdowns,indicator:null==m?void 0:m.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:y,dataCategories:[\"trend\",\"group\",\"simple\"]}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,followFilters:\"true\"===e.follow_element,groupBy:[],hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:\"center\",metrics:[{dataSource:y,id:(T=y,t(T+new Date().getTime()+1e8*Math.random())),aggregateIndicator:null!==(s=null==p?void 0:p.value)&&void 0!==s?s:\"\",frequency:parseInt(null!==(l=null==k?void 0:k.frequency)&&void 0!==l?l:\"10\",10),numberFormat:(I=parseInt(k.precision,10),{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=I?I:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}),axisId:\"primary\"}],newReporting:!1,numberOfPeriods:3,period:\"M\",registerOrientation:\"horizontal\",registerPosition:\"bottom\",scoreType:null,showAbsolutePeriod:!1,showBorder:e.showBorder,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===g,showDataPassthrough:!1,showFilterIcon:\"true\"===e.follow_element,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:e.showHeader,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showRegister:!0,showRegisterOnSameLine:!1,showRegisterPercentage:!1,showRegisterValue:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:R,sortByOrder:v,telemetry:\"null\",trendBy:null,truncationType:\"end\",wrapTitle:!1,description:_,headerTitle:e.showTitle?b:\"\"};return S.groupBy&&(A.groupBy=[{maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[a(S.groupBy,{dataSource:y})]}]),A}r.migrationNotes.push(i({message:o(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:c,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:r.featureFlags}))};function g(e){return e?parseInt(e).toString():\"10\"}var p=function p(e,r,t,n){!function(e,r,t){for(var a=0,n=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:o(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:o(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<n.length;a++){var s=n[a];s.shouldLog&&e.migrationNotes.push(i(s.message))}}(e,r);var s,l=m(a(r,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(n)),e,t);return l?(function(e,r,t,a){var n;if(\"breakdown\"===r.type)if(void 0!==a.groupBy&&a.groupBy.length>0){var s=a.groupBy[0].maxNumberOfGroups;a.groupBy[0].maxNumberOfGroups=r.show_top_x?parseInt(r.show_top_x).toString():g(s)}else if(void 0!==a.breakdowns&&a.breakdowns.length>0){var l=a.breakdowns[0].perPage;a.breakdowns[0].perPage=r.show_top_x?parseInt(r.show_top_x).toString():g(l)}else e.migrationNotes.push(i({message:o(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===r.show_breakdown_selector){var d=r.indicator.value,c=null===(n=t.indicator_breakdowns)||void 0===n?void 0:n[d];a.additionalGroupByConfig=(null==c?void 0:c.map(function(e){var r,a,o=null===(r=t.sys_id[null===(a=e.breakdown)||void 0===a?void 0:a.value])||void 0===r?void 0:r[0];return{id:null==o?void 0:o.sys_id,metricLabel:null==o?void 0:o.name}}))||[]}else a.additionalGroupByConfig=[]}(e,r,t,l),{component_id:\"a2b0596cec6b9d49dd1ff9bf76b5084b\",component_props:l}):e.migratingFromJava&&n?function(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}}(r,n):function(e,r){var t={message:o(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(i({message:o(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(i(t))&&e.migrationNotes.push(i(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(s=\"ERROR: Cannot migrate PA Donut widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(s,\"</p>\"))})};this.run=function(e,r,t,a,o){var i,n={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0},s=null===(i=e.sys_id[t])||void 0===i?void 0:i[0],l=p(n,s,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return l.migrationNotes=n.migrationNotes,l};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"60dac793a3d031108d80ad2f241e61b2","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:38:37","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/a2b0596cec6b9d49dd1ff9bf76b5084b","value":"a2b0596cec6b9d49dd1ff9bf76b5084b"},"key":"donutPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=_e?_e:\"\",\"::\").concat(null!=r?r:\"\")},r=(e(\"content_block_static\",\"com.glide.cms.RenderBlock\"),e(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),e(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),e(\"\",\"com.glide.ui.portal.RenderReport\"),e(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),t=(e(-1,\"com.glideapp.home.RenderHomepagePublishers\"),e(4,\"com.glideapp.home.RenderHomepagePublishers\"),e(r,\"com.glideapp.home.RenderHomepagePublishers\"),e(2,\"com.glideapp.home.RenderHomepagePublishers\"),e(3,\"com.glideapp.home.RenderHomepagePublishers\"),e(5,\"com.glideapp.home.RenderHomepagePublishers\"),e(6,\"com.glideapp.home.RenderHomepagePublishers\"),e(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderDashboard\"),e(\"report\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderJavascript\"),e(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),e(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),e(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),i=\"\",o=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(o)||(n=\"=\",o%1);){if((t=a.charCodeAt(o+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,i+=n.charAt(63&r>>8-o%1*8)}return i.toString()});function a(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}var i=function i(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}},o=function o(e,r){return{text:e,vars:r}},n=function n(e){var r=e.message,t=e.level,a=e.tooltip,i=e.originalArtifactSysId,o=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,d=e.featureFlags,c={text:r,level:t,help:a,originSysId:i,hasNewArtifact:n,table:o,debugInfo:l};return\"true\"===(null==d?void 0:d.translatedLogs)?c:s(c)},s=function s(e){var r,t,a,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==a?a:e.text},l=\"sys_choice\";function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var c=function c(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,a=function(e,r){if(void 0===e)return[];for(var t=[],a=0,i=0;i<e.length;i++)\"^\"!==e.charAt(i)||(t.push(e.substring(a,i)),a=i+1);return a<=e.length&&t.push(e.substring(a,e.length)),t}(e),i=[],o=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,i=function i(){};return{s:i,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,_n=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){s=!0,o=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw o}}}}(a);try{var n=function n(){var e=t.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),i=a.length>>>0,o=arguments[1],n=0;n<i;n++){var s=a[n];if(r.call(o,s,n,a))return t?n:s}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";i.push(e)};for(o.s();!(t=o.n()).done;)n()}catch(e){o.e(e)}finally{o.f()}return i.join(\"^\")},u=/[0-9a-f]{32}/,m=function e(r,t,a){var i,s,d,c,m,p,g=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(m=r.breakdown)&&void 0!==m&&m.value&&(d=r.breakdown_level2.value),!c&&r.element&&(c=r.element_level2)):(null!==(p=r.breakdown)&&void 0!==p&&p.value&&(d=r.breakdown.value),!c&&r.element&&(c=r.element)),d&&c&&\"unmatched\"!==c){var v=r.indexes.sys_id[d][0],f=c;r.indexes.sys_id[v.dimension.value][0].facts_table===l&&u.test(c)&&(f=r.indexes.sys_id[f][0].value);var h,_={sysId:d,elementSysIds:[f]};\"true\"===r.manual_elements&&_.elementSysIds.concat(null===(h=r.indexes.widget_elements[r.sys_id])||void 0===h?void 0:h.map(function(e){return\"unassigned\"===e.element?g:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(_.elementsFilterSysId=r.elements_filter.value,_.elementSysIds=[]),a.breakdowns.push(_)}else if(null!==(i=r.breakdown)&&void 0!==i&&i.value){var b=r.indexes.sys_id[d][0],y=r.indexes.sys_id[b.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(y.facts_table===l||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:[g]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:d,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var R,S,I;r.indexes.widget_elements&&0!==(null!==(R=null===(S=r.indexes.widget_elements[r.sys_id])||void 0===S?void 0:S.length)&&void 0!==R?R:0)?a.breakdowns.push({sysId:d,elementSysIds:null===(I=r.indexes.widget_elements[r.sys_id])||void 0===I?void 0:I.map(function(e){return\"unassigned\"===e.element?g:e.element})}):r.dashboard.migrationNotes.push(n({message:o(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:d,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(y.facts_table===l||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[g],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(s=r.breakdown_level2)&&void 0!==s&&s.value&&!t?e(r,!0,a):a},p=function p(e){var r,i,s,l,d,u,p=e.props,g=e.indexes,v=e.dashboard,f=e.showSparkline,h=e.showChange,_=e.showTarget,b=e.showGapPercentage,y=e.showScoreDate,w=e.showChangePercentage,R=m(a(p,{indexes:g,dashboard:v}));if(R.doMigration){\"periods_back\"===p.lastscore_compare&&v.migrationNotes.push(n({message:o(\"This visualization is in compatibility mode because the compare score with previous periods feature is not supported.\"),level:1,originalArtifactSysId:p.sys_id,artifactTable:null==p?void 0:p.sys_table_name,featureFlags:v.featureFlags}));var S,I,T=(S=null===(r=p.indicator)||void 0===r?void 0:r.value,t(\"indicator\".concat(S).concat(new Date().getTime()).concat(1e8*Math.random()))),k=t(T+new Date().getTime()+1e8*Math.random()),A=g.sys_id[null===(i=p.indicator)||void 0===i?void 0:i.value][0],P=\"realtime\"===p.visualization,x=\"1\"===A.type,F=void 0===A.show_realtime_score?x&&P:x&&\"true\"===A.show_realtime_score;return{showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,enableDrilldown:!0,newReporting:!1,showSparkline:f,dataPassthrough:null,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,showMaximumRange:!1,enableRealTimeUpdate:F,scoreType:null,useRelativeScoreTime:F,showScoreUpdateTime:F,colorConfig:{type:\"default\"},scoreSize:\"auto\",showFilterIcon:\"true\"===p.follow_element,followFilters:\"true\"===p.follow_element,headingPosition:null,showChange:h,showTarget:_,showGapPercentage:b,showScoreDate:!F&&y,showChangePercentage:w,showChangeFrom:!0,showZero:!1,description:p.description,dataSources:[{allowRealTime:P&&x,allowTotalValue:x,indicatorType:A.type,isScriptedIndicator:!1,label:A.name,filter:c(p.filter),sourceType:\"indicator\",uuid:{breakdowns:R.breakdowns,indicator:null===(s=p.indicator)||void 0===s?void 0:s.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:T,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[{dataSource:T,id:k,aggregateIndicator:null!==(l=null===(d=p.aggregate)||void 0===d?void 0:d.value)&&void 0!==l?l:\"\",frequency:parseInt(null!==(u=null==A?void 0:A.frequency)&&void 0!==u?u:\"10\",10),numberFormat:a((I=parseInt(A.precision,10),{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=I?I:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}),{abbreviationEnabled:!1,numberInTooltipsEnabled:!1,thousandSeparatorEnabled:!0}),axisId:\"primary\"}],headerTitle:p.showTitle?p.sys_name:\"\"}}v.migrationNotes.push(n({message:o(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:p.sys_id,artifactTable:null==p?void 0:p.sys_table_name,featureFlags:v.featureFlags}))},g=function g(e,r,t,s){!function(e,r,t){for(var a=0,i=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:o(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:o(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<i.length;a++){var s=i[a];s.shouldLog&&e.migrationNotes.push(n(s.message))}}(e,r);var l=!1,d=!1,c=!1,u=!1,m=!1,g=!1;switch(r.template){case\"template1\":case\"template2\":case\"\":l=!0,g=!0,d=!0,u=!0;break;case\"template3\":g=!0,d=!0,u=!0,c=!0,m=!0;break;default:if(e.migratingFromJava&&s)return i(r,s);throw new Error(\"Don't know what kind of template that is? Dashboard \".concat(e.sys_id,\" Element: \").concat(r.sys_name))}var v,f=function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(s),h=p({props:a(r,f),showSparkline:l,showChange:d,showTarget:c,showChangePercentage:u,showGapPercentage:m,showScoreDate:g,indexes:t,dashboard:e});return h?{component_id:\"d24d53f60350de7a652caf3188a46ed2\",component_props:h}:e.migratingFromJava&&s?i(r,s):function(e,r){var t={message:o(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(n({message:o(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(n(t))&&e.migrationNotes.push(n(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(v=\"ERROR: Cannot migrate PA Single Score widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(v,\"</p>\"))})};this.run=function(e,r,t,a,i){var o,n={migratingFromJava:!0,migrationNotes:[],featureFlags:i,migratingSingleArtifact:!0},s=null===(o=e.sys_id[t])||void 0===o?void 0:o[0],l=g(n,s,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return l.migrationNotes=n.migrationNotes,l};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"6c2f8797a3d031108d80ad2f241e61b3","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:57:27","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/d24d53f60350de7a652caf3188a46ed2","value":"d24d53f60350de7a652caf3188a46ed2"},"key":"latestPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r){return{text:_e,vars:r}},r=function r(e){var r=e.message,o=e.level,i=e.tooltip,t=e.originalArtifactSysId,c=e.artifactTable,n=e.hasNewArtifact,s=e.debugInfo,l=e.featureFlags,d={text:r,level:o,help:i,originSysId:t,hasNewArtifact:n,table:c,debugInfo:s};return\"true\"===(null==l?void 0:l.translatedLogs)?d:a(d)},a=function a(e){var r,a,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},o=function o(e,r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},i=(o(\"content_block_static\",\"com.glide.cms.RenderBlock\"),o(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),o(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),o(\"\",\"com.glide.ui.portal.RenderReport\"),o(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1);o(-1,\"com.glideapp.home.RenderHomepagePublishers\"),o(4,\"com.glideapp.home.RenderHomepagePublishers\"),o(i,\"com.glideapp.home.RenderHomepagePublishers\"),o(2,\"com.glideapp.home.RenderHomepagePublishers\"),o(3,\"com.glideapp.home.RenderHomepagePublishers\"),o(5,\"com.glideapp.home.RenderHomepagePublishers\"),o(6,\"com.glideapp.home.RenderHomepagePublishers\"),o(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),o(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glide.ui.portal.RenderDashboard\"),o(\"report\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glide.ui.portal.RenderJavascript\"),o(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),o(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),o(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),o(\"METRIC\",\"com.snc.treemap.TreemapRenderer\");var t=function t(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},c=function c(a,o,i,_c){var n,s,l,d;return a.migratingFromJava&&_c?t(o,_c):function(a,o){var i={message:e(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags};return\"true\"===(null==o?void 0:o.conditional)&&a.migrationNotes.push(r({message:e(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags})),-1===a.migrationNotes.indexOf(r(i))&&a.migrationNotes.push(r(i)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==o?void 0:o.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==o?void 0:o.sys_id)}}}(a,{static_content:(d=\"<b>Unsupported migration: \".concat(null!==(n=null!==(s=o.name)&&void 0!==s?s:o.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=o&&o.type?o.type:null==_c||null===(l=_c.type)||void 0===l?void 0:l.value,\"</span> report.\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(d,\"</p>\"))})};this.run=function(a,o,i,n,s){var l,d={migratingFromJava:!0,migrationNotes:[],featureFlags:s,migratingSingleArtifact:!0},p=function(a,o,i,n){return a.migratingFromJava&&n?t(o,n):(a.migrationNotes.push(r({message:e(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags})),c(a,o))}(d,null===(l=a.sys_id[i])||void 0===l?void 0:l[0],0,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return p.migrationNotes=d.migrationNotes,p};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"6e156ca7b7232110997a9f78ce11a93b","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:25:58","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/2d56f06d55f46bbd4e79b5e624beb940","value":"2d56f06d55f46bbd4e79b5e624beb940"},"key":"pyramidReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"metricBase\",r={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},t=function t(e){for(var r,t,o=\"\".concat(e),i=\"\",a=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(a)||(n=\"=\",a%1);){if((t=o.charCodeAt(a+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,i+=n.charAt(63&r>>8-a%1*8)}return i.toString()},o=function o(e,r){return void 0!==e&&void 0!==r&&e.indexOf(r)>-1},i=function i(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,i=0;i<e.length;i++)e.charAt(i)!==r||(t.push(e.substring(o,i)),o=i+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function a(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),i=o.length>>>0,a=arguments[1],n=0;n<i;n++){var l=o[n];if(r.call(a,l,n,o))return t?n:l}}function n(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var l=function l(e,r){return{text:e,vars:r}},s=function s(e){var r=e.message,t=e.level,o=e.tooltip,i=e.originalArtifactSysId,a=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,u={text:r,level:t,help:o,originSysId:i,hasNewArtifact:n,table:a,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?u:d(u)},d=function d(e){var r,t,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},u=\"sys_report\";function c(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,_n=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){l=!0,a=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw a}}}}function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var g=function g(e){return t(\"table\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},p=function p(e){return t(e+new Date().getTime()+1e8*Math.random())},f=function f(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,o=i(e,\"^\"),n=[],l=c(o);try{var s=function s(){var e=t.value;if(a(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";n.push(e)};for(l.s();!(t=l.n()).done;)s()}catch(e){l.e(e)}finally{l.f()}return n.join(\"^\")};function v(e){return v=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},v(e)}var h=function h(e){return{durationFormat:b(n(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},y=function y(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=b(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},b=function b(e,r,t){var o=JSON.parse(JSON.stringify(r)),i=!1;for(var a in t)void 0!==o[t[a]]&&e[a]!==o[t[a]]&&(i=!0,o[t[a]]=e[a]);return!!i&&o},_=function _(e,r,t,o,i){var a={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},n={durationFormattingProperties:h,numberFormattingProperties:y};switch(i){case\"heatmap\":case\"box\":return\"glide_duration\"===t?a:n.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===v(e)&&n.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return n.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(n[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return n[s](e[s][d],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:a},w=function w(e){return e.join(\":\")},T=function T(e,r,t){return a(Object.keys(e),function(e){return e===r})?e[r].dataSourceId:g(t)},A=function A(e,r,t){var o=a(e,function(e){return e.id===r}),i=!1;return o&&o.filterQuery===t||(i=!0),i};function R(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return F(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?F(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,_n2=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n2=e.done,e},e:function e(_e5){l=!0,a=_e5},f:function f(){try{_n2||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw a}}}}function F(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function S(e){switch(e){case\"line_bar\":return\"bar\";case\"step_line\":return\"step\";default:return e}}var x=function x(e,t){var o={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},i=function i(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),o=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(o,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))o.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){o.showAbsolutePeriod=!0,o.startTime=i(null==e?void 0:e.from),o.endTime=i(null==e?void 0:e.to);var n=new Date;new Date(o.startTime)>n&&!o.endTime?o.endTime=o.startTime:o.startTime&&!o.endTime?o.useCurrentDateForEnd=!0:!o.startTime&&o.endTime&&(o.showMaximumRange=!0,o.endTime=null)}else{o.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var l=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),s=a(Object.keys(r),function(e){return r[e]===l},!0),d=a(Object.keys(r),function(e){return r[e]===t},!0);o.period=s<d?t:l}return o},O=function O(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},I=function I(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},P=(I(\"content_block_static\",\"com.glide.cms.RenderBlock\"),I(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),I(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),I(\"\",\"com.glide.ui.portal.RenderReport\"),I(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),C=(I(P.group,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.group2,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.single,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.multi,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.date,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.bool,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),I(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),I(P.debug,\"com.glideapp.home.RenderHomepagePublishers\"),I(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"\",\"com.glide.ui.portal.RenderDashboard\"),I(\"report\",\"com.glide.ui.portal.RenderJavascript\"),I(\"\",\"com.glide.ui.portal.RenderJavascript\"),I(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),I(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),I(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),I(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),B=function B(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},N=function N(e,r){var t={message:l(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(s({message:l(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(s(t))&&e.migrationNotes.push(s(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},E=function E(r,t,d,m){var v,h=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(s({message:l(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(r,t),y=function(e){var r,t,o,a,n=e.table,l=e.aggregateFieldType,s=e.filter,d=e.groupByMetadata,u=e.chart_title||e.title,c=null===(r=e.color_palette)||void 0===r?void 0:r.value,m=e.show_chart_data_label,g=e.field,p=e.legend_horizontal_alignment,f=e.legend_vertical_alignment,v=e.show_legend,h=e.decimal_precision,y=e.show_chart_border,b=e.source_type,_=e.aggregate,w=e.other_threshold,T=e.sumfield,A=i(e.colors,\",\"),R=e.set_color,F=null===(t=e.color)||void 0===t?void 0:t.value,S=e.show_chart_total,x=e.trend_field,O=e.interval,I=e.x_axis_title,P=e.x_axis_display_grid,C=e.y_axis_display_grid,B=e.y_axis_title,N=e.y_axis_from,E=e.y_axis_to,D=e.y_axis_opposite,k=e.show_marker;try{a=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(r){console.log(\"Unable to transform json 2\",r.toString(),e),a={}}var J=null===(o=e.report_source)||void 0===o?void 0:o.value,M=e.is_real_time,H=e.bar_unstack,U=e.series_name_text,L={};try{var j;e.custom_config&&\"\"!==e.custom_config&&(L=null===(j=JSON.parse(e.custom_config))||void 0===j?void 0:j.transforms)}catch(r){console.log(\"Unable to transform widget.custom_config to json \",r.toString(),e.custom_config),L={}}var z=e.start_time,G=e.end_time,Y=e.display_grid;return{table:n,chartTitle:u,colorType:R,colorPalette:c,singleColor:F,showDataLabel:m,groupBy:g,legendVerticalAlignment:f,legendHorizontalAlignment:p,showLegend:v,numberOfPeriods:h,showChartBorder:y,sourceType:b,aggregateType:_,otherThreshold:w,filter:s,aggregateField:T,colors:A,showTotal:S,trendBy:x,trendInterval:O,xAxisTitle:I,xAxisShowGrid:P,yAxisShowGrid:C,yAxisTitle:B,yAxisFrom:N,yAxisTo:E,yAxisOpposite:D,formattingConfiguration:a,reportSource:J,reportId:e.sys_id,isRealTime:M,isGroupedBars:H,aggregateFieldType:l,dataSetName:U,groupByMetadata:d,customConfig:L,startTime:z,endTime:G,showMarkers:k,showDataTable:Y}}(t),b=function(r){var t,i,d,m,v,h,y,b,F=r.table,O=r.chartTitle,I=r.colorPalette,P=r.showDataLabel,C=r.groupBy,B=r.showOthers,N=r.legendHorizontalAlignment,E=r.legendVerticalAlignment,D=r.numberOfPeriods,k=(r.showChartBorder,r.sourceType),J=r.aggregateType,M=r.otherThreshold,H=r.filter,U=r.showLegend,L=r.aggregateField,j=r.colorType,z=r.trendBy,G=r.trendInterval,Y=r.xAxisTitle,V=r.xAxisShowGrid,W=r.yAxisShowGrid,Z=r.yAxisTitle,Q=r.yAxisFrom,q=r.yAxisTo,X=r.yAxisOpposite,$=r.formattingConfiguration,K=r.reportSource,ee=r.reportId,re=r.aggregateFieldType,te=r.d,oe=r.showHeader,ie=r.showTitle,ae=r.showBorder,ne=r.indexes,le=(r.dataSetName,r.groupByMetadata),se=r.singleColor,de=r.customConfig,ue=r.startTime,ce=r.endTime,me=r.colors,ge=r.showMarkers,pe=r.showDataTable,fe=function(e,r){var t,i=\"value\",a=\"desc\";if(o(e,\"ORDERBY\")&&(i=\"name\",o(e,\"DESC\")||(a=\"asc\")),r&&!o(e,\"ORDERBY\")){var n=r.type,l=r.internalType;a=\"asc\",\"date\"===(t=n)||\"datetime\"===t||\"due_date\"===t||\"glide_date\"===t||\"glide_date_time\"===t||\"glide_precise_time\"===t?i=\"report_range\":function(e){return\"integer\"===e||\"decimal\"===e||\"numeric\"===e||\"float\"===e||\"domain_number\"===e||\"auto_increment\"===e||\"percent_complete\"===e}(n)?i=\"value\":\"choice\"===n&&\"integer\"===l?i=\"choice\":\"reference\"===n||\"choice\"===n&&\"string\"===l?i=\"name\":a=\"desc\"}return{sortBy:i,sortByOrder:a}}(H,le),ve=f(H),he=function(e,r){var t={register:\"\",horizontal:\"\",orientation:\"vertical\"};function o(){t.horizontal=\"center\",\"left\"===e&&(t.horizontal=\"start\"),\"right\"===e&&(t.horizontal=\"end\")}return\"right\"===e?(t.register=\"right\",t.horizontal=\"center\"):\"left\"===e&&(t.register=\"left\",t.horizontal=\"center\"),\"bottom\"===r||\"center\"===r||\"middle\"===e?(t.register=\"bottom\",t.orientation=\"horizontal\",o()):\"top\"===r&&(t.orientation=\"horizontal\",t.register=\"top\",o()),t}(N,E),ye=function(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(r){return e}}(M),be=_($,parseInt(D,10),re,J),_e=g(F),we=p(_e),Te={},Ae=w([F,null==K?void 0:K.value,ve]);Te[Ae]={metricId:we,dataSourceId:_e,metricColor:se};var Re,Fe=!1;switch(G){case\"dayofweek\":b=\"dayOfWeek\",Fe=!0;break;case\"hour\":b=\"hourOfDay\",Fe=!0;break;default:b=G}if(32===G.length&&(b=G),\"metricbase\"===k){var Se={period:0===(null==ue?void 0:ue.indexOf(\"P\"))?ue.slice(1):\"between\",from:ue,to:ce};D=(Re=x(Se,\"1D\")).numberOfPeriods,k=e,delete be.durationFormat,delete be.dateFormat,delete be.stringFormat}var xe={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:ve,id:_e,isDatabaseView:!1,label:void 0,reportSourceSysId:K,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===k||0===k.length?\"table\":k,tableOrViewName:k!==e?F:void 0,table:k===e?F:void 0}],dateFormat:\"default\",disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null===(t=Re)||void 0===t?void 0:t.endTime,extensionType:\"area\",filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:(null!==(i=null==C?void 0:C.length)&&void 0!==i?i:0)>0?[{disableRanges:!1,groupBy:[{dataSource:_e,groupByField:C,isChoice:\"choice\"===(null==le?void 0:le.type),isPaBucket:!1,isRange:null==le?void 0:le.isRange,metric:we}],hideZeroValues:!1,maxNumberOfGroups:null!=le&&le.isRange?\"ALL\":ye,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==le||!le.isRange)&&\"true\"===B}]:[],headerTitle:ie?O:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!0,hideYAxis2:!0,hideYAxis3:!0,hideYAxis4:!0,legendExpandToFit:!0,legendHorizontalAlignment:he.horizontal,legendPosition:he.register,lineStrokeWidth:\"2\",metrics:[n({aggregateFunction:(null==J?void 0:J.length)>0?J:\"COUNT\",axisId:\"primary\",dataSource:_e,id:we,label:void 0,transforms:de},be)],newReporting:!1,numberOfPeriods:parseInt(D,10),period:null===(d=Re)||void 0===d?void 0:d.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null===(m=Re)||void 0===m?void 0:m.showAbsolutePeriod,showBorder:ae,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===P,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:null,showHeader:oe,showHeaderSeparator:!1,showLegend:\"true\"===U,showLegendValue:!1,showMaximumRange:null===(v=Re)||void 0===v?void 0:v.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showContinuousLine:!0,enableAddZerosAtApi:Fe,showMarkers:\"true\"===ge,showTotalValue:null,showTrend:!1,showXGrid:\"true\"===V,showYGrid:\"true\"===W,sortBy:fe.sortBy,sortByOrder:fe.sortByOrder,startTime:null===(h=Re)||void 0===h?void 0:h.startTime,telemetry:\"null\",trendBy:{trendByFields:[{field:z,metric:we}],trendByFrequency:b,trendByMinuteInterval:null},wrapTitle:!1,xAxisTitle:Y,yAxis0From:Q,yAxis0Position:\"true\"===X?\"right\":\"left\",yAxis0Title:Z,yAxis0To:q,showDataTable:\"true\"===pe};L&&\"COUNT\"!==J&&\"\"!==L&&(xe.metrics[0].aggregateField=L);var Oe,Ie=R(null!==(y=ne.report_layers[ee])&&void 0!==y?y:[]);try{for(Ie.s();!(Oe=Ie.n()).done;){var Pe,Ce,Be,Ne,Ee=Oe.value,De=xe.dataSources.map(function(e){return e.tableOrViewName}).concat(xe.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),ke=f(Ee.filter);Ae=w([F,null==K?void 0:K.value,ke,Ee.sys_id]);var Je=T(Te,Ae,Ee.table);Te[Ae]={metricId:p(Je),dataSourceId:Je,metricColor:null===(Pe=Ee.color)||void 0===Pe?void 0:Pe.value};var Me,He=A(xe.dataSources,Je,ke);if((!o(De,Ee.table)&&!o(De,Ee.report_source)||He)&&xe.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:Ee.table,filterQuery:ke,reportSourceSysId:null===(Me=Ee.report_source)||void 0===Me?void 0:Me.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:Je,dataCategories:[\"trend\",\"group\",\"simple\"]}),xe.metrics.push(n({dataSource:Te[Ae].dataSourceId,id:Te[Ae].metricId,aggregateFunction:Ee.aggregate,aggregateField:\"COUNT\"===Ee.aggregate&&\"\"!==Ee.sumfield?void 0:Ee.sumfield,axisId:\"primary\",label:(null===(Ce=Ee.series_name_text)||void 0===Ce?void 0:Ce.length)>0?Ee.series_name_text:void 0,chartType:S(Ee.type)},_(Ee.formatting_configuration,parseInt(D,10),Ee.aggregateFieldType,Ee.aggregateType))),(null===(Be=Ee.trend_field)||void 0===Be?void 0:Be.length)>0&&xe.trendBy.trendByFields.push({field:Ee.trend_field,metric:Te[Ae].metricId}),(null===(Ne=Ee.field)||void 0===Ne?void 0:Ne.length)>0||xe.groupBy.length>0)return void te.migrationNotes.push(s({message:l(\"This visualization is in compatibility mode because the group by configuration is not supported for this metric.\"),level:1,originalArtifactSysId:ee,artifactTable:u,featureFlags:te.featureFlags}))}}catch(e){Ie.e(e)}finally{Ie.f()}return xe.colorConfig=function(e){var r=e.colorPalette,t=e.colorType,o=e.dashboard,i=e.reportId,n=e.enableColorPerMetric,d=e.singleColor,m=e.metrics,g=e.colorList,p=e.metricMap;if(m&&p&&!o.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var f={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)f.type=\"palette\",f.palette=r;else if(\"several_colors\"===t)!g||Array.isArray(g)&&!a(g,function(e){return\"\"!==e})?f.type=\"chartColor\":o.migrationNotes.push(s({message:l(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:l(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:i,artifactTable:u,featureFlags:o.featureFlags}));else if(\"chart_colors\"===t)f.type=\"chartColor\";else if(\"one_color\"===t&&((null==d?void 0:d.length)>0||a(Object.keys(null!=p?p:{}),function(e){var r;return(null===(r=p[e].metricColor)||void 0===r?void 0:r.length)>0})))if(p){for(var v=n?\"colorsPerMetric\":\"singleColor\",h=[],y=0,b=Object.keys(p);y<b.length;y++){var _,w=b[y];h.push({metric:p[w].metricId,color:null!==(_=p[w].metricColor)&&void 0!==_?_:\"de699435d7033100b4964ebfae610331\"})}f.type=v,f.values=h}else{var T,A=[],R=c(null!=m?m:[]);try{for(R.s();!(T=R.n()).done;){var F=T.value;A.push({color:d,metric:F})}}catch(e){R.e(e)}finally{R.f()}f.type=\"singleColor\",f.values=A}return f}({colorPalette:I,colorType:j,dashboard:te,reportId:ee,singleColor:se,colorList:me,enableColorPerMetric:!0,metricMap:Te}),xe}(n(y,{d:r,indexes:d},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(m)));return!b||h?r.migratingFromJava&&m?B(t,m):(v=\"report\",function(e,r,t,o){var i;return(i=v===C?function(){for(var e in P)if(P[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===v||v===C?function(e,r,t,o){var i,a,n;return e.migratingFromJava&&o?B(r,o):N(e,{static_content:O(\"<b>Unsupported migration: \".concat(null!==(i=null!==(a=r.name)&&void 0!==a?a:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> widget.\"))})}(e,n(r,{type:i}),0,o):function(e,r,t,o){var i,a,n;return e.migratingFromJava&&o?B(r,o):N(e,{static_content:O(\"<b>Unsupported migration: \".concat(null!==(i=null!==(a=r.name)&&void 0!==a?a:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var i,a,n,d;if(e.migratingFromJava&&o)return B(r,o);var u=\"\";null!=r&&r.type?u=r.type:null!=o&&null!==(i=o.type)&&void 0!==i&&i.value?u=null==o||null===(a=o.type)||void 0===a?void 0:a.value:null!=o&&null!==(n=o.renderer)&&void 0!==n&&n.value&&(u=o.renderer.value);var c=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),N(e,{static_content:O(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(u,\": \").concat(c,\"</span> widget.\"))})}(e,r,0,o)})(r,t,d,m):(function(e,r,t){if(e.additional_groupby){t.showAdditionalGroupBySelector=!0;var o=i(e.additional_groupby,\",\");-1===o.indexOf(e.field)&&o.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&o.push(e.trend_field),t.additionalGroupByConfig=[],o.forEach(function(e){t.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(t,0,b),{component_id:\"aba8630dc2ccc9b3c1774af1b6820696\",component_props:b})};this.run=function(e,r,t,o,i){var a,n={migratingFromJava:!0,migrationNotes:[],featureFlags:i,migratingSingleArtifact:!0},l=null===(a=e.sys_id[t])||void 0===a?void 0:a[0],s=E(n,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=n.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"6f83a467b7232110997a9f78ce11a92a","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:19:12","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/aba8630dc2ccc9b3c1774af1b6820696","value":"aba8630dc2ccc9b3c1774af1b6820696"},"key":"areaReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r){return void 0!==_e&&void 0!==r&&_e.indexOf(r)>-1},r=function r(e,_r){if(void 0===e)return[];if(1!==_r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],i=0,o=0;o<e.length;o++)e.charAt(o)!==_r||(t.push(e.substring(i,o)),i=o+1);return i<=e.length&&t.push(e.substring(i,e.length)),t};function t(){for(var e={},r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return t.forEach(function(r){Object.assign(e,r)}),e}var i=function i(e,r){return{text:e,vars:r}},o=function o(e){var r=e.message,t=e.level,i=e.tooltip,o=e.originalArtifactSysId,n=e.artifactTable,l=e.hasNewArtifact,c=e.debugInfo,d=e.featureFlags,s={text:r,level:t,help:i,originSysId:o,hasNewArtifact:l,table:n,debugInfo:c};return\"true\"===(null==d?void 0:d.translatedLogs)?s:a(s)},a=function a(e){var r,t,i,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(i=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==i?i:e.text},n=function n(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},l=function l(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},c=(l(\"content_block_static\",\"com.glide.cms.RenderBlock\"),l(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),l(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),l(\"\",\"com.glide.ui.portal.RenderReport\"),l(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),l(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),l(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),l(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),l(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),l(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),l(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),l(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),l(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),d=(l(c.group,\"com.glideapp.home.RenderHomepagePublishers\"),l(c.group2,\"com.glideapp.home.RenderHomepagePublishers\"),l(c.single,\"com.glideapp.home.RenderHomepagePublishers\"),l(c.multi,\"com.glideapp.home.RenderHomepagePublishers\"),l(c.date,\"com.glideapp.home.RenderHomepagePublishers\"),l(c.bool,\"com.glideapp.home.RenderHomepagePublishers\"),l(c.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),l(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),l(c.debug,\"com.glideapp.home.RenderHomepagePublishers\"),l(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),l(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),l(\"\",\"com.glide.ui.portal.RenderDashboard\"),l(\"report\",\"com.glide.ui.portal.RenderJavascript\"),l(\"\",\"com.glide.ui.portal.RenderJavascript\"),l(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),l(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),l(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),l(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),s=function s(e,r){var t=function(e){var r={};for(var t in e){var i;null!==(i=e[t])&&void 0!==i&&i.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),i={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(i.paWidgetSysId=e.sys_id,i.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:i}},u=function u(e,r){var t={message:i(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(o({message:i(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(o(t))&&e.migrationNotes.push(o(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},p=function p(t){null==t&&(t=\"\");var i=r(t,\",\"),o=\"\";return e(i,\"name\")?o=o.concat(\"name,\"):e(i,\"number\")?o=o.concat(\"number,\"):o+=\",\",e(i,\"short_description\")&&!e(o,\"short_description\")&&(o=o.concat(\"short_description,\")),o.endsWith(\",\")&&(o=o.slice(0,-1)),o},m=function m(e,a,l,_m){var g,v,_,f=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),a=null==r?void 0:r.groupByMetadata;return!(!t||!a||\"glide_duration\"!=a.internalType&&\"glide_date_time\"!=a.internalType&&\"glide_date\"!=a.internalType||(e.migrationNotes.push(o({message:i(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(e,a),b=(g=t(a,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(_m)),{table:g.table,reportSource:null===(v=g.report_source)||void 0===v?void 0:v.value,encodedQuery:g.filter,startDateField:g.trend_field,endDateField:\"\",eventDisplayFields:p(g.field_list),componentTitle:g.title,followFilters:!0,showFilterOverview:!0,showDescription:!0,componentDescription:\"\",viewType:\"MONTH\",eventColor:\"\",filterConfigurations:[]});return!b||f?e.migratingFromJava&&_m?s(a,_m):(_=\"report\",function(e,r,a,l){var p;return(p=_===d?function(){for(var e in c)if(c[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(o({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===_||_===d?function(e,r,t,i){var o,a,l;return e.migratingFromJava&&i?s(r,i):u(e,{static_content:n(\"<b>Unsupported migration: \".concat(null!==(o=null!==(a=r.name)&&void 0!==a?a:r.sys_name)&&void 0!==o?o:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==i||null===(l=i.type)||void 0===l?void 0:l.value,\"</span> widget.\"))})}(e,t(r,{type:p}),0,l):function(e,r,t,i){var o,a,l;return e.migratingFromJava&&i?s(r,i):u(e,{static_content:n(\"<b>Unsupported migration: \".concat(null!==(o=null!==(a=r.name)&&void 0!==a?a:r.sys_name)&&void 0!==o?o:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==i||null===(l=i.type)||void 0===l?void 0:l.value,\"</span> report.\"))})}(e,r,0,l)):function(e,r,t,a){var l,c,d,p;if(e.migratingFromJava&&a)return s(r,a);var m=\"\";null!=r&&r.type?m=r.type:null!=a&&null!==(l=a.type)&&void 0!==l&&l.value?m=null==a||null===(c=a.type)||void 0===c?void 0:c.value:null!=a&&null!==(d=a.renderer)&&void 0!==d&&d.value&&(m=a.renderer.value);var g=null==a||null===(p=a.title)||void 0===p?void 0:p.value;return e.migrationNotes.push(o({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),u(e,{static_content:n(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(m,\": \").concat(g,\"</span> widget.\"))})}(e,r,0,l)})(e,a,l,_m):(function(e,t,i){if(e.additional_groupby){i.showAdditionalGroupBySelector=!0;var o=r(e.additional_groupby,\",\");-1===o.indexOf(e.field)&&o.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&o.push(e.trend_field),i.additionalGroupByConfig=[],o.forEach(function(e){i.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(a,0,b),{component_id:\"259e0221ff18a75c5f5f0fb28fa5d32f\",component_props:b})};this.run=function(e,r,t,i,o){var a,n={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0},l=null===(a=e.sys_id[t])||void 0===a?void 0:a[0],c=m(n,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return c.migrationNotes=n.migrationNotes,c};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"6ff3a467b7232110997a9f78ce11a92d","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:21:08","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/1de221250a27afba43b9b3b04594857f","value":"1de221250a27afba43b9b3b04594857f"},"key":"calendarReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=_e?_e:\"\",\"::\").concat(null!=r?r:\"\")},r=(e(\"content_block_static\",\"com.glide.cms.RenderBlock\"),e(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),e(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),e(\"\",\"com.glide.ui.portal.RenderReport\"),e(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),t=(e(-1,\"com.glideapp.home.RenderHomepagePublishers\"),e(4,\"com.glideapp.home.RenderHomepagePublishers\"),e(r,\"com.glideapp.home.RenderHomepagePublishers\"),e(2,\"com.glideapp.home.RenderHomepagePublishers\"),e(3,\"com.glideapp.home.RenderHomepagePublishers\"),e(5,\"com.glideapp.home.RenderHomepagePublishers\"),e(6,\"com.glideapp.home.RenderHomepagePublishers\"),e(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderDashboard\"),e(\"report\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderJavascript\"),e(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),e(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),e(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),o=\"\",i=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(i)||(n=\"=\",i%1);){if((t=a.charCodeAt(i+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,o+=n.charAt(63&r>>8-i%1*8)}return o.toString()});function a(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}var o=function o(e,r){return{text:e,vars:r}},i=function i(e){var r=e.message,t=e.level,a=e.tooltip,o=e.originalArtifactSysId,i=e.artifactTable,s=e.hasNewArtifact,l=e.debugInfo,d=e.featureFlags,c={text:r,level:t,help:a,originSysId:o,hasNewArtifact:s,table:i,debugInfo:l};return\"true\"===(null==d?void 0:d.translatedLogs)?c:n(c)},n=function n(e){var r,t,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},s=\"sys_choice\";function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var d=function d(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,a=function(e,r){if(void 0===e)return[];for(var t=[],a=0,o=0;o<e.length;o++)\"^\"!==e.charAt(o)||(t.push(e.substring(a,o)),a=o+1);return a<=e.length&&t.push(e.substring(a,e.length)),t}(e),o=[],i=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){s=!0,i=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw i}}}}(a);try{var n=function n(){var e=t.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,i=arguments[1],n=0;n<o;n++){var s=a[n];if(r.call(i,s,n,a))return t?n:s}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";o.push(e)};for(i.s();!(t=i.n()).done;)n()}catch(e){i.e(e)}finally{i.f()}return o.join(\"^\")},c=/[0-9a-f]{32}/,u=function e(r,t,a){var n,l,d,u,m,g,p=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(m=r.breakdown)&&void 0!==m&&m.value&&(d=r.breakdown_level2.value),!u&&r.element&&(u=r.element_level2)):(null!==(g=r.breakdown)&&void 0!==g&&g.value&&(d=r.breakdown.value),!u&&r.element&&(u=r.element)),d&&u&&\"unmatched\"!==u){var v=r.indexes.sys_id[d][0],f=u;r.indexes.sys_id[v.dimension.value][0].facts_table===s&&c.test(u)&&(f=r.indexes.sys_id[f][0].value);var h,_={sysId:d,elementSysIds:[f]};\"true\"===r.manual_elements&&_.elementSysIds.concat(null===(h=r.indexes.widget_elements[r.sys_id])||void 0===h?void 0:h.map(function(e){return\"unassigned\"===e.element?p:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(_.elementsFilterSysId=r.elements_filter.value,_.elementSysIds=[]),a.breakdowns.push(_)}else if(null!==(n=r.breakdown)&&void 0!==n&&n.value){var b=r.indexes.sys_id[d][0],y=r.indexes.sys_id[b.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(y.facts_table===s||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:[p]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:d,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var R,S,I;r.indexes.widget_elements&&0!==(null!==(R=null===(S=r.indexes.widget_elements[r.sys_id])||void 0===S?void 0:S.length)&&void 0!==R?R:0)?a.breakdowns.push({sysId:d,elementSysIds:null===(I=r.indexes.widget_elements[r.sys_id])||void 0===I?void 0:I.map(function(e){return\"unassigned\"===e.element?p:e.element})}):r.dashboard.migrationNotes.push(i({message:o(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:d,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(y.facts_table===s||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[p],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(l=r.breakdown_level2)&&void 0!==l&&l.value&&!t?e(r,!0,a):a},m=function m(e,r,n){var s,l,c=e.sys_id,m=e.indicator,g=e.show_data_labels,p=e.aggregate,v=e.sort_direction,f=e.sort_on,h=e.color_scheme,_=e.description,b=e.name,y=function(e){return t(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))}(null==m?void 0:m.value),w={type:\"default\"};null!=h&&h.value&&\"\"!==(null==h?void 0:h.value)&&(w={type:\"palette\",palette:null==h?void 0:h.value});var R=f;-1===[\"name\",\"value\"].indexOf(f)&&(R=\"value\",r.migrationNotes.push(i({message:o(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:c,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:r.featureFlags})));var S=u(a(e,{indexes:n,dashboard:r}));if(S.doMigration){!S.groupBy&&S.breakdowns.length>0&&(S.groupBy={groupByField:S.breakdowns[0].sysId,isRange:!1,isChoice:!1,isPaBucket:!1});var I,T,k=n.sys_id[null==m?void 0:m.value][0],A={applyDateRange:!1,bareBorder:!1,colorConfig:w,configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"both\",dataPassthrough:null,dataSources:[{allowRealTime:\"1\"===k.type,allowTotalValue:\"1\"===k.type,indicatorType:k.type,isScriptedIndicator:!1,filterQuery:d(e.filter),label:k.name,sourceType:\"indicator\",uuid:{breakdowns:S.breakdowns,indicator:null==m?void 0:m.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:y,dataCategories:[\"trend\",\"group\",\"simple\"]}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,followFilters:\"true\"===e.follow_element,groupBy:[],hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:\"center\",metrics:[{dataSource:y,id:(T=y,t(T+new Date().getTime()+1e8*Math.random())),aggregateIndicator:null!==(s=null==p?void 0:p.value)&&void 0!==s?s:\"\",frequency:parseInt(null!==(l=null==k?void 0:k.frequency)&&void 0!==l?l:\"10\",10),numberFormat:(I=parseInt(k.precision,10),{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=I?I:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}),axisId:\"primary\"}],newReporting:!1,numberOfPeriods:3,period:\"M\",registerOrientation:\"horizontal\",registerPosition:\"bottom\",scoreType:null,showAbsolutePeriod:!1,showBorder:e.showBorder,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===g,showDataPassthrough:!1,showFilterIcon:\"true\"===e.follow_element,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:e.showHeader,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showRegister:!0,showRegisterOnSameLine:!1,showRegisterPercentage:!1,showRegisterValue:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:R,sortByOrder:v,telemetry:\"null\",trendBy:null,truncationType:\"end\",wrapTitle:!1,description:_,headerTitle:e.showTitle?b:\"\"};return S.groupBy&&(A.groupBy=[{maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[a(S.groupBy,{dataSource:y})]}]),A}r.migrationNotes.push(i({message:o(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:c,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:r.featureFlags}))};function g(e){return e?parseInt(e).toString():\"10\"}var p=function p(e,r,t,n){!function(e,r,t){for(var a=0,n=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:o(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:o(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<n.length;a++){var s=n[a];s.shouldLog&&e.migrationNotes.push(i(s.message))}}(e,r);var s,l=m(a(r,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(n)),e,t);return l?(function(e,r,t,a){var n;if(\"breakdown\"===r.type)if(void 0!==a.groupBy&&a.groupBy.length>0){var s=a.groupBy[0].maxNumberOfGroups;a.groupBy[0].maxNumberOfGroups=r.show_top_x?parseInt(r.show_top_x).toString():g(s)}else if(void 0!==a.breakdowns&&a.breakdowns.length>0){var l=a.breakdowns[0].perPage;a.breakdowns[0].perPage=r.show_top_x?parseInt(r.show_top_x).toString():g(l)}else e.migrationNotes.push(i({message:o(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===r.show_breakdown_selector){var d=r.indicator.value,c=null===(n=t.indicator_breakdowns)||void 0===n?void 0:n[d];a.additionalGroupByConfig=(null==c?void 0:c.map(function(e){var r,a,o=null===(r=t.sys_id[null===(a=e.breakdown)||void 0===a?void 0:a.value])||void 0===r?void 0:r[0];return{id:null==o?void 0:o.sys_id,metricLabel:null==o?void 0:o.name}}))||[]}else a.additionalGroupByConfig=[]}(e,r,t,l),{component_id:\"3809c6583b8dd540a0bf735ed493bae2\",component_props:l}):e.migratingFromJava&&n?function(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}}(r,n):function(e,r){var t={message:o(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(i({message:o(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(i(t))&&e.migrationNotes.push(i(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(s=\"ERROR: Cannot migrate PA Semi donut widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(s,\"</p>\"))})};this.run=function(e,r,t,a,o){var i,n={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0},s=null===(i=e.sys_id[t])||void 0===i?void 0:i[0],l=p(n,s,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return l.migrationNotes=n.migrationNotes,l};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"750f8b97a3d031108d80ad2f241e6146","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:57:00","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/3809c6583b8dd540a0bf735ed493bae2","value":"3809c6583b8dd540a0bf735ed493bae2"},"key":"semiCircleDonutPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(_e,\"</p>\")},r=function r(e,_r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===_r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=_r?_r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=_r?_r:\"\")},a=(r(\"content_block_static\",\"com.glide.cms.RenderBlock\"),r(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),r(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),r(\"\",\"com.glide.ui.portal.RenderReport\"),r(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),o=(r(a.group,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.group2,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.single,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.multi,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.date,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.bool,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),r(a.debug,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderDashboard\"),r(\"report\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderJavascript\"),r(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),r(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),r(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),r(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"widget\"),t=\"filter\",i=function i(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},n=function n(e,r){return{text:e,vars:r}},c=function c(e){var r=e.message,a=e.level,o=e.tooltip,t=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,c=e.debugInfo,s=e.featureFlags,d={text:r,level:a,help:o,originSysId:t,hasNewArtifact:n,table:i,debugInfo:c};return\"true\"===(null==s?void 0:s.translatedLogs)?d:l(d)},l=function l(e){var r,a,o,t;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==o?o:e.text},s=function s(e,r){var a={message:n(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(c({message:n(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(c(a))&&e.migrationNotes.push(c(a)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}};this.run=function(r,l,d,u,p){var m,g={migratingFromJava:!0,migrationNotes:[],featureFlags:p,migratingSingleArtifact:!0},v=function(r,l,d,u){return r.migratingFromJava&&u?i(l,u):(p=o,function(r,l,d,u){var m;return(m=p===t?function(){for(var e in a)if(a[e]===(null==l?void 0:l.type))return e}():null==l?void 0:l.type)?(r.migrationNotes.push(c({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==l?void 0:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:r.featureFlags})),p===o||p===t?function(r,a,o,t){var n,c,l;return r.migratingFromJava&&t?i(a,t):s(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(n=null!==(c=a.name)&&void 0!==c?c:a.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> widget.\"))})}(r,function(){for(var e={},r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return a.forEach(function(r){Object.assign(e,r)}),e}(l,{type:m}),0,u):function(r,a,o,t){var n,c,l;return r.migratingFromJava&&t?i(a,t):s(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(n=null!==(c=a.name)&&void 0!==c?c:a.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> report.\"))})}(r,l,0,u)):function(r,a,o,t){var l,d,u,p;if(r.migratingFromJava&&t)return i(a,t);var m=\"\";null!=a&&a.type?m=a.type:null!=t&&null!==(l=t.type)&&void 0!==l&&l.value?m=null==t||null===(d=t.type)||void 0===d?void 0:d.value:null!=t&&null!==(u=t.renderer)&&void 0!==u&&u.value&&(m=t.renderer.value);var g=null==t||null===(p=t.title)||void 0===p?void 0:p.value;return r.migrationNotes.push(c({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:r.featureFlags})),s(r,{static_content:e(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(m,\": \").concat(g,\"</span> widget.\"))})}(r,l,0,u)})(r,l,d,u);var p}(g,null===(m=r.sys_id[d])||void 0===m?void 0:m[0],r,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return v.migrationNotes=g.migrationNotes,v};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"7b6f8b97a3d031108d80ad2f241e6150","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:58:46","sys_name":"","sys_scope":"","macroponent":"","key":"spiderPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r){return{text:_e,vars:r}},r=function r(e){var r=e.message,o=e.level,i=e.tooltip,t=e.originalArtifactSysId,c=e.artifactTable,n=e.hasNewArtifact,s=e.debugInfo,l=e.featureFlags,d={text:r,level:o,help:i,originSysId:t,hasNewArtifact:n,table:c,debugInfo:s};return\"true\"===(null==l?void 0:l.translatedLogs)?d:a(d)},a=function a(e){var r,a,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},o=function o(e,r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},i=(o(\"content_block_static\",\"com.glide.cms.RenderBlock\"),o(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),o(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),o(\"\",\"com.glide.ui.portal.RenderReport\"),o(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1);o(-1,\"com.glideapp.home.RenderHomepagePublishers\"),o(4,\"com.glideapp.home.RenderHomepagePublishers\"),o(i,\"com.glideapp.home.RenderHomepagePublishers\"),o(2,\"com.glideapp.home.RenderHomepagePublishers\"),o(3,\"com.glideapp.home.RenderHomepagePublishers\"),o(5,\"com.glideapp.home.RenderHomepagePublishers\"),o(6,\"com.glideapp.home.RenderHomepagePublishers\"),o(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),o(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glide.ui.portal.RenderDashboard\"),o(\"report\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glide.ui.portal.RenderJavascript\"),o(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),o(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),o(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),o(\"METRIC\",\"com.snc.treemap.TreemapRenderer\");var t=function t(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},c=function c(a,o,i,_c){var n,s,l,d;return a.migratingFromJava&&_c?t(o,_c):function(a,o){var i={message:e(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags};return\"true\"===(null==o?void 0:o.conditional)&&a.migrationNotes.push(r({message:e(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags})),-1===a.migrationNotes.indexOf(r(i))&&a.migrationNotes.push(r(i)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==o?void 0:o.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==o?void 0:o.sys_id)}}}(a,{static_content:(d=\"<b>Unsupported migration: \".concat(null!==(n=null!==(s=o.name)&&void 0!==s?s:o.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=o&&o.type?o.type:null==_c||null===(l=_c.type)||void 0===l?void 0:l.value,\"</span> report.\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(d,\"</p>\"))})};this.run=function(a,o,i,n,s){var l,d={migratingFromJava:!0,migrationNotes:[],featureFlags:s,migratingSingleArtifact:!0},p=function(a,o,i,n){return a.migratingFromJava&&n?t(o,n):(a.migrationNotes.push(r({message:e(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags})),c(a,o))}(d,null===(l=a.sys_id[i])||void 0===l?void 0:l[0],0,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return p.migrationNotes=d.migrationNotes,p};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"8294a067b7232110997a9f78ce11a934","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:23:45","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/2d56f06d55f46bbd4e79b5e624beb940","value":"2d56f06d55f46bbd4e79b5e624beb940"},"key":"funnelReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(_e,\"</p>\")},r=function r(e,_r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===_r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=_r?_r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=_r?_r:\"\")},a=(r(\"content_block_static\",\"com.glide.cms.RenderBlock\"),r(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),r(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),r(\"\",\"com.glide.ui.portal.RenderReport\"),r(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),o=(r(a.group,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.group2,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.single,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.multi,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.date,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.bool,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),r(a.debug,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderDashboard\"),r(\"report\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderJavascript\"),r(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),r(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),r(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),r(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"widget\"),t=\"filter\",i=function i(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},n=function n(e,r){return{text:e,vars:r}},c=function c(e){var r=e.message,a=e.level,o=e.tooltip,t=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,c=e.debugInfo,s=e.featureFlags,d={text:r,level:a,help:o,originSysId:t,hasNewArtifact:n,table:i,debugInfo:c};return\"true\"===(null==s?void 0:s.translatedLogs)?d:l(d)},l=function l(e){var r,a,o,t;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==o?o:e.text},s=function s(e,r){var a={message:n(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(c({message:n(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(c(a))&&e.migrationNotes.push(c(a)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}};this.run=function(r,l,d,u,p){var m,g={migratingFromJava:!0,migrationNotes:[],featureFlags:p,migratingSingleArtifact:!0},v=function(r,l,d,u){return r.migratingFromJava&&u?i(l,u):(p=o,function(r,l,d,u){var m;return(m=p===t?function(){for(var e in a)if(a[e]===(null==l?void 0:l.type))return e}():null==l?void 0:l.type)?(r.migrationNotes.push(c({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==l?void 0:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:r.featureFlags})),p===o||p===t?function(r,a,o,t){var n,c,l;return r.migratingFromJava&&t?i(a,t):s(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(n=null!==(c=a.name)&&void 0!==c?c:a.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> widget.\"))})}(r,function(){for(var e={},r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return a.forEach(function(r){Object.assign(e,r)}),e}(l,{type:m}),0,u):function(r,a,o,t){var n,c,l;return r.migratingFromJava&&t?i(a,t):s(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(n=null!==(c=a.name)&&void 0!==c?c:a.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> report.\"))})}(r,l,0,u)):function(r,a,o,t){var l,d,u,p;if(r.migratingFromJava&&t)return i(a,t);var m=\"\";null!=a&&a.type?m=a.type:null!=t&&null!==(l=t.type)&&void 0!==l&&l.value?m=null==t||null===(d=t.type)||void 0===d?void 0:d.value:null!=t&&null!==(u=t.renderer)&&void 0!==u&&u.value&&(m=t.renderer.value);var g=null==t||null===(p=t.title)||void 0===p?void 0:p.value;return r.migrationNotes.push(c({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:r.featureFlags})),s(r,{static_content:e(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(m,\": \").concat(g,\"</span> widget.\"))})}(r,l,0,u)})(r,l,d,u);var p}(g,null===(m=r.sys_id[d])||void 0===m?void 0:m[0],r,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return v.migrationNotes=g.migrationNotes,v};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"8450131ba3d031108d80ad2f241e6193","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 12:02:37","sys_name":"","sys_scope":"","macroponent":"","key":"wordCloudPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"226449101138d0dff1abe0e1566c8b2a\",a=function a(e,_a){return void 0!==e&&void 0!==_a&&e.indexOf(_a)>-1},t=function t(e,a){if(void 0===e)return[];if(1!==a.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],r=0,i=0;i<e.length;i++)e.charAt(i)!==a||(t.push(e.substring(r,i)),r=i+1);return r<=e.length&&t.push(e.substring(r,e.length)),t},r=function r(e,a){return{text:e,vars:a}},i=function i(e){var a=e.message,t=e.level,r=e.tooltip,i=e.originalArtifactSysId,l=e.artifactTable,s=e.hasNewArtifact,o=e.debugInfo,c=e.featureFlags,d={text:a,level:t,help:r,originSysId:i,hasNewArtifact:s,table:l,debugInfo:o};return\"true\"===(null==c?void 0:c.translatedLogs)?d:n(d)},n=function n(e){var a,t,r,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(a=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==a?a:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(r=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==r?r:e.text};function l(e,a){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,a){if(e){if(\"string\"==typeof e)return s(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,a):void 0}}(e))||a&&e&&\"number\"==typeof e.length){t&&(e=t);var r=0,i=function i(){};return{s:i,n:function n(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function e(_e){throw _e},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,l=!0,o=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return l=e.done,e},e:function e(_e2){o=!0,n=_e2},f:function f(){try{l||null==t[\"return\"]||t[\"return\"]()}finally{if(o)throw n}}}}function s(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=new Array(a);t<a;t++)r[t]=e[t];return r}var o=function o(e,a,t,r,i,n,l,s){return{type:\"table\",encodedQuery:null!=n?n:void 0,table:{id:e,label:null!=a?a:void 0,hierarchy:\"true\"===l||!0===l||void 0},field:t?{id:t,type:null!=i?i:void 0,label:null!=r?r:void 0,reference:null!=s?s:\"\"}:void 0}};function c(e){switch(e){case\"1\":return\"selectors\";case\"4\":return\"typeahead\";default:return\"pill\"}}var d=function d(e,a,t){var r,i,n,l,s,d,u,_,g,f,v,p,m,b,h,y=e.sys_id,A=e.table,N=e.display_field,T=e.name,E=(e.type,e.ui_control_type),S=(e.boolean_table,e.boolean_field,e.conditions),R=(e.cascading_filter_reference_field,e.parent),w=e.publisher_reference,I=arguments.length>3&&void 0!==arguments[3]&&arguments[3];R?(l=\"reference\"===(null===(d=t.filter_cascading[R.value])||void 0===d||null===(u=d[0])||void 0===u?void 0:u.displayFieldType)?N:void 0,s=null===(_=t.filter_cascading[R.value])||void 0===_||null===(g=_[0])||void 0===g?void 0:g.displayFieldReference):(l=\"reference\"===(null===(f=t.filter_reference)||void 0===f||null===(v=f[null==w?void 0:w.value])||void 0===v||null===(p=v[0])||void 0===p?void 0:p.displayFieldType)?N:void 0,s=null===(m=t.filter_cascading[R.value])||void 0===m||null===(b=m[0])||void 0===b?void 0:b.displayFieldReference),h=l&&s?o(s,void 0,void 0,void 0,\"reference\",S):o(A,void 0,l,void 0,\"reference\",S);var D=null!==(r=(null!==(i=null===(n=t.filter_cascading_target)||void 0===n?void 0:n[y])&&void 0!==i?i:[]).map(function(e){return o(null==e?void 0:e.target_table,void 0,null==e?void 0:e.filter_field,void 0,\"reference\",void 0,I)},T,\"reference\"))&&void 0!==r?r:[];1===D.length&&(D[0].field.reference=A);var j=function(e,a,t,r){var i,n;return e?\"reference\"===(null===(i=r.filter_cascading[e])||void 0===i||null===(n=i[0])||void 0===n?void 0:n.displayFieldType)?{filterM2MConfigurations:[{filterId:e.concat(\"-filter\"),following:!0,filterM2MTable:r.filter_cascading[e][0].table,fromField:r.filter_cascading[e][0].cascading_filter_reference_field,toField:t}]}:{filtersFollowing:[e.concat(\"-filter\")],filterM2MConfigurations:[]}:{}}(null==R?void 0:R.value,0,N,t);return{filterId:\"\".concat(y,\"-filter\"),filterName:T,filterComponentType:\"singleselect\",isShowSelectedValueInPill:!0,datasource:h,targets:D,defaultSelectedItems:[],dateFilterView:\"calendar-reldates\",sort:\"ASC\",enableClearFilter:!0,maxElements:500,filterElementLayout:\"vertical\",filterElementType:c(E),selectedElements:[],cascadingConfig:j}},u=function u(e,a,t){var r=e.name,i=e.sys_id;return{filterId:\"\".concat(i,\"-filter\"),filterName:r,isShowSelectedValueInPill:!0,sort:\"ASC\",enableClearFilter:!0,enableResetToDefault:!0,maxElements:500,filterElementLayout:\"vertical\",datasource:\"{}\"}};function _(e){switch(e){case\"135_Current hour@javascript:gs.hoursAgoStart(0)@javascript:gs.hoursAgoEnd(0)\":return{label:\"Current hour\",range:\"SN_DYNAMIC_DATERANGE__CURRENT_HOUR\"};case\"150_Current minute@javascript:gs.minutesAgoStart(0)@javascript:gs.minutesAgoEnd(0)\":return{label:\"Current minute\",range:\"SN_DYNAMIC_DATERANGE__CURRENT_MINUTE\"};case\"060_Last 12 months@javascript:gs.monthsAgoStart(12)@javascript:gs.endOfThisMonth()\":return{label:\"Last 12 months\",range:\"SN_DYNAMIC_DATERANGE__LAST_12_MONTH\"};case\"130_Last 120 days@javascript:gs.daysAgoStart(120)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 120 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_120_DAYS\"};case\"160_Last 15 minutes@javascript:gs.minutesAgoStart(15)@javascript:gs.minutesAgoEnd(0)\":return{label:\"Last 15 minutes\",range:\"SN_DYNAMIC_DATERANGE__LAST_15_MINUTES\"};case\"145_Last 2 hours@javascript:gs.hoursAgo(2)@javascript:gs.hoursAgo(0)\":return{label:\"Last 2 hours\",range:\"SN_DYNAMIC_DATERANGE__LAST_2_HOURS\"};case\"075_Last 2 quarters@javascript:gs.quartersAgoStart(1)@javascript:gs.endOfThisQuarter()\":return{label:\"Last 2 quarters\",range:\"SN_DYNAMIC_DATERANGE__LAST_2_QUARTERS\"};case\"105_Last 2 years@javascript:gs.beginningOfLastYear()@javascript:gs.endOfThisYear()\":return{label:\"Last 2 years\",range:\"SN_DYNAMIC_DATERANGE__LAST_2_YEARS\"};case\"045_Last 3 months@javascript:gs.monthsAgoStart(3)@javascript:gs.endOfThisMonth()\":return{label:\"Last 3 months\",range:\"SN_DYNAMIC_DATERANGE__LAST_3_MONTH\"};case\"115_Last 30 days@javascript:gs.daysAgoStart(30)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 30 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_30_DAYS\"};case\"165_Last 30 minutes@javascript:gs.minutesAgoStart(30)@javascript:gs.minutesAgoEnd(0)\":return{label:\"Last 30 minutes\",range:\"SN_DYNAMIC_DATERANGE__LAST_30_MINUTES\"};case\"170_Last 45 minutes@javascript:gs.minutesAgoStart(45)@javascript:gs.minutesAgoEnd(0)\":return{label:\"Last 45 minutes\",range:\"SN_DYNAMIC_DATERANGE__LAST_45_MINUTES\"};case\"050_Last 6 months@javascript:gs.monthsAgoStart(6)@javascript:gs.endOfThisMonth()\":return{label:\"Last 6 months\",range:\"SN_DYNAMIC_DATERANGE__LAST_6_MONTH\"};case\"120_Last 60 days@javascript:gs.daysAgoStart(60)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 60 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_60_DAYS\"};case\"110_Last 7 days@javascript:gs.daysAgoStart(7)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 7 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_7_DAYS\"};case\"055_Last 9 months@javascript:gs.monthsAgoStart(9)@javascript:gs.endOfThisMonth()\":return{label:\"Last 9 months\",range:\"SN_DYNAMIC_DATERANGE__LAST_9_MONTH\"};case\"125_Last 90 days@javascript:gs.daysAgoStart(90)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 90 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_90_DAYS\"};case\"140_Last hour@javascript:gs.hoursAgoStart(1)@javascript:gs.hoursAgoEnd(1)\":return{label:\"Last hour\",range:\"SN_DYNAMIC_DATERANGE__LAST_HOUR\"};case\"155_Last minute@javascript:gs.minutesAgoStart(1)@javascript:gs.minutesAgoEnd(1)\":return{label:\"Last minute\",range:\"SN_DYNAMIC_DATERANGE__LAST_MINUTE\"};case\"035_Last month@javascript:gs.beginningOfLastMonth()@javascript:gs.endOfLastMonth()\":return{label:\"Last month\",range:\"SN_DYNAMIC_DATERANGE__LAST_MONTH\"};case\"070_Last quarter@javascript:gs.quartersAgoStart(1)@javascript:gs.quartersAgoEnd(1)\":return{label:\"Last quarter\",range:\"SN_DYNAMIC_DATERANGE__LAST_QUARTER\"};case\"020_Last week@javascript:gs.beginningOfLastWeek()@javascript:gs.endOfLastWeek()\":return{label:\"Last week\",range:\"SN_DYNAMIC_DATERANGE__LAST_WEEK\"};case\"100_Last year@javascript:gs.beginningOfLastYear()@javascript:gs.endOfLastYear()\":return{label:\"Last year\",range:\"SN_DYNAMIC_DATERANGE__LAST_YEAR\"};case\"085_Next 2 quarters@javascript:gs.quartersAgoStart(-1)@javascript:gs.quartersAgoEnd(-2)\":return{label:\"Next 2 quarters\",range:\"SN_DYNAMIC_DATERANGE__NEXT_2_QUARTERS\"};case\"040_Next month@javascript:gs.beginningOfNextMonth()@javascript:gs.endOfNextMonth()\":return{label:\"Next month\",range:\"SN_DYNAMIC_DATERANGE__NEXT_MONTH\"};case\"080_Next quarter@javascript:gs.quartersAgoStart(-1)@javascript:gs.quartersAgoEnd(-1)\":return{label:\"Next quarter\",range:\"SN_DYNAMIC_DATERANGE__NEXT_QUARTER\"};case\"025_Next week@javascript:gs.beginningOfNextWeek()@javascript:gs.endOfNextWeek()\":return{label:\"Next week\",range:\"SN_DYNAMIC_DATERANGE__NEXT_WEEK\"};case\"095_Next year@javascript:gs.beginningOfNextYear()@javascript:gs.endOfNextYear()\":return{label:\"Next year\",range:\"SN_DYNAMIC_DATERANGE__NEXT_YEAR\"};case\"175_One year ago@javascript:gs.monthsAgo(12)@javascript:gs.endOfThisMonth()\":return{label:\"One year ago\",range:\"SN_DYNAMIC_DATERANGE__ONE_YEAR_AGO\"};case\"030_This month@javascript:gs.beginningOfThisMonth()@javascript:gs.endOfThisMonth()\":return{label:\"This month\",range:\"SN_DYNAMIC_DATERANGE__THIS_MONTH\"};case\"065_This quarter@javascript:gs.beginningOfThisQuarter()@javascript:gs.endOfThisQuarter()\":return{label:\"This quarter\",range:\"SN_DYNAMIC_DATERANGE__THIS_QUARTER\"};case\"015_This week@javascript:gs.beginningOfThisWeek()@javascript:gs.endOfThisWeek()\":return{label:\"This week\",range:\"SN_DYNAMIC_DATERANGE__THIS_WEEK\"};case\"090_This year@javascript:gs.beginningOfThisYear()@javascript:gs.endOfThisYear()\":return{label:\"This year\",range:\"SN_DYNAMIC_DATERANGE__THIS_YEAR\"};case\"001_Today@javascript:gs.daysAgoStart(0)@javascript:gs.daysAgoEnd(0)\":return{label:\"Today\",range:\"SN_DYNAMIC_DATERANGE__TODAY\"};case\"010_Tomorrow@javascript:gs.daysAgoStart(-1)@javascript:gs.daysAgoEnd(-1)\":return{label:\"Tomorrow\",range:\"SN_DYNAMIC_DATERANGE__TOMORROW\"};case\"005_Yesterday@javascript:gs.daysAgoStart(1)@javascript:gs.daysAgoEnd(1)\":return{label:\"Yesterday\",range:\"SN_DYNAMIC_DATERANGE__YESTERDAY\"}}}function g(e,a,t,r,i){switch(e){case 4:case\"4\":case 3:case\"3\":!function(e,a,t,r){e.filterComponentType=\"multiselect\",e.filterElementType=\"pill\"}(a);break;case 1:case\"1\":!function(e,a,t,r){e.filterComponentType=\"singleselect\",e.filterElementType=\"selectors\"}(a);break;case 2:case\"2\":!function(e,a,t,r){e.filterComponentType=\"singleselect\",e.filterElementType=\"pill\"}(a)}}var f=function f(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},v=function v(e,a,t){return\"com.glideapp.home.RenderHomepagePublishers\"===a&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=a?a:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=a?a:\"\")},p=(v(\"content_block_static\",\"com.glide.cms.RenderBlock\"),v(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),v(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),\"com.glide.ui.portal.RenderReport\"),m=(v(\"\",p),v(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),v(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),v(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),v(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),v(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),v(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),v(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),v(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),v(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),b=(v(m.group,\"com.glideapp.home.RenderHomepagePublishers\"),v(m.group2,\"com.glideapp.home.RenderHomepagePublishers\"),v(m.single,\"com.glideapp.home.RenderHomepagePublishers\"),v(m.multi,\"com.glideapp.home.RenderHomepagePublishers\"),v(m.date,\"com.glideapp.home.RenderHomepagePublishers\"),v(m.bool,\"com.glideapp.home.RenderHomepagePublishers\"),v(m.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),v(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),v(m.debug,\"com.glideapp.home.RenderHomepagePublishers\"),v(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),v(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),v(\"\",\"com.glide.ui.portal.RenderDashboard\"),v(\"report\",\"com.glide.ui.portal.RenderJavascript\"),v(\"\",\"com.glide.ui.portal.RenderJavascript\"),v(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),v(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),v(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),v(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),h=function h(e,a){var t=function(e){var a={};for(var t in e){var r;null!==(r=e[t])&&void 0!==r&&r.value?a[t]=e[t].value:\"string\"==typeof e[t]&&(a[t]=e[t])}return a}(a),r={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(r.paWidgetSysId=e.sys_id,r.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:r}},y=function y(e,a){var t={message:r(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==a?void 0:a.conditional)&&e.migrationNotes.push(i({message:r(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(i(t))&&e.migrationNotes.push(i(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==a?void 0:a.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==a?void 0:a.sys_id)}}},A=function A(e){return function(a,t,n,l){var s;return(s=e===b?function(){for(var e in m)if(m[e]===(null==t?void 0:t.type))return e}():null==t?void 0:t.type)?(a.migrationNotes.push(i({message:r(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:a.featureFlags})),\"widget\"===e||e===b?function(e,a,t,r){var i,n,l;return e.migratingFromJava&&r?h(a,r):y(e,{static_content:f(\"<b>Unsupported migration: \".concat(null!==(i=null!==(n=a.name)&&void 0!==n?n:a.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==r||null===(l=r.type)||void 0===l?void 0:l.value,\"</span> widget.\"))})}(a,function(){for(var e={},a=arguments.length,t=new Array(a),r=0;r<a;r++)t[r]=arguments[r];return t.forEach(function(a){Object.assign(e,a)}),e}(t,{type:s}),0,l):function(e,a,t,r){var i,n,l;return e.migratingFromJava&&r?h(a,r):y(e,{static_content:f(\"<b>Unsupported migration: \".concat(null!==(i=null!==(n=a.name)&&void 0!==n?n:a.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==r||null===(l=r.type)||void 0===l?void 0:l.value,\"</span> report.\"))})}(a,t,0,l)):function(e,a,t,n){var l,s,o,c;if(e.migratingFromJava&&n)return h(a,n);var d=\"\";null!=a&&a.type?d=a.type:null!=n&&null!==(l=n.type)&&void 0!==l&&l.value?d=null==n||null===(s=n.type)||void 0===s?void 0:s.value:null!=n&&null!==(o=n.renderer)&&void 0!==o&&o.value&&(d=n.renderer.value);var u=null==n||null===(c=n.title)||void 0===c?void 0:c.value;return e.migrationNotes.push(i({message:r(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:e.featureFlags})),y(e,{static_content:f(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(d,\": \").concat(u,\"</span> widget.\"))})}(a,t,0,l)}},N=function N(n,s,c,d){var f=function(e,n,s){switch(e.type){case 5:case\"5\":return function(e,a,t){var r=e.boolean_table,i=e.default_boolean_field,n=e.boolean_field,l=e.allow_extended_table,s=u(e);return s.filterComponentType=\"boolean\",!0!==i&&!1!==i&&\"true\"!==i&&\"false\"!==i||(s.defaultBoolean=i.toString()),s.targets=[o(r,void 0,n,void 0,\"boolean\",void 0,l)],s}(e);case 3:case\"3\":return function(e,a,n){var s=e.default_date_filter,c=e.date_filter,d=e.allow_extended_table,g=e.sys_id,f=u(e);if(f.dateFilterView=\"calendar-reldates\",f.filterComponentType=\"date\",n.filter_reference){var v=n.filter_reference[g];if((null==v?void 0:v.length)>0){var p,m=[],b=l(v);try{for(b.s();!(p=b.n()).done;){var h=p.value,y=h.date_field,A=h.date_table,N=h.fieldType;m.push(o(A,void 0,y,void 0,null!=N?N:\"glide_date_time\",void 0,d))}}catch(e){b.e(e)}finally{b.f()}f.targets=m}}else console.error(\"No filter_reference index found when migrating date filters\"),a.migrationNotes.push(i({message:r(\"The date filter cannot be migrated because we cannot find the target configuration. It can be configured manually in a new filter.\"),level:2,originalArtifactSysId:g,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:a.featureFlags}));function T(e){var a,t=[],r=l(e);try{for(r.s();!(a=r.n()).done;){var i=_(a.value);i&&t.push(i)}}catch(e){r.e(e)}finally{r.f()}return t}if((null==s?void 0:s.length)>0){var E=t(s,\",\");f.defaultSelectedDateRange=T(E)[0],E.length>1&&a.migrationNotes.push(i({message:r(\"The multiple default date values on interactive filters cannot be migrated. Only one default value is selected.\"),level:2,originalArtifactSysId:g,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:a.featureFlags}))}else f.defaultSelectedDateRange={range:\"\",label:\"Custom range\"};if((null==c?void 0:c.length)>0){var S=t(c,\",\");f.allowedDateRanges=T(S)}return f}(e,n,s);case 1:case\"1\":return function(e,n,s){var c=e.source_field,d=e.source_table,_=e.allow_extended_table,f=e.sys_id,v=e.ui_control_type,p=e.exclusion_choice_list,m=e.default_choice,b=u(e);if(b.datasource=o(d,void 0,c,void 0,\"choice\"),b.targets=[o(d,void 0,c,void 0,\"choice\",void 0,_)],null!=s&&s.choices_by_table){if((null==p?void 0:p.length)>0){var h,y,A,N,T=null==s||null===(h=s.choices_by_table[null!==(y=null===(A=e.sourceFieldMetadata)||void 0===A?void 0:A.table)&&void 0!==y?y:d])||void 0===h?void 0:h.filter(function(a){var t,r;return(null==a?void 0:a.element)===(null!==(t=null===(r=e.sourceFieldMetadata)||void 0===r?void 0:r.field)&&void 0!==t?t:c)}),E=t(p,\",\"),S=[],R=l(T);try{for(R.s();!(N=R.n()).done;){var w=N.value;null!=w&&w.value&&S.push({value:w.value,selected:!a(E,w.sys_id)})}}catch(e){R.e(e)}finally{R.f()}b.datasource.choices=S}if((null==m?void 0:m.length)>0){var I,D,j,M,L=t(m,\",\"),C=[],Y=l(null==s||null===(I=s.choices_by_table[null!==(D=null===(j=e.sourceFieldMetadata)||void 0===j?void 0:j.table)&&void 0!==D?D:d])||void 0===I?void 0:I.filter(function(e){return a(L,null==e?void 0:e.sys_id)}));try{for(Y.s();!(M=Y.n()).done;){var O=M.value;C.push({id:O.value,label:O.label,available:!0,unknown:!1,empty:!1})}}catch(e){Y.e(e)}finally{Y.f()}b.defaultSelectedItems=C}}else console.error(\"No choices_by_table index found when migrating choice filters\"),(null==p?void 0:p.length)>0&&n.migrationNotes.push(i({message:r(\"This interactive filter is migrated without the exclusion list information because we are unable to migrate its configuration.\"),level:1,originalArtifactSysId:f,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:n.featureFlags})),(null==m?void 0:m.length)>0&&n.migrationNotes.push(i({message:r(\"This interactive filter is migrated without the default choice list information because we are unable to migrate its configuration.\"),level:1,originalArtifactSysId:f,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:n.featureFlags}));return g(v,b),b}(e,n,s);case 2:case\"2\":return function(e,a,n){var s=e.reference_table,c=e.allow_extended_table,d=e.reference_conditions,_=e.sys_id,f=e.ui_control_type,v=e.default_reference_field_value,p=u(e);if(p.datasource=o(s,void 0,void 0,void 0,void 0,d||void 0),p.filterComponentType=\"multiselect\",p.filterElementType=\"pill\",n.filter_reference){var m=n.filter_reference[_];if((null==m?void 0:m.length)>0){var b,h=[],y=l(m);try{for(y.s();!(b=y.n()).done;){var A=b.value,N=A.reference_table,T=A.reference_field;h.push(o(N,void 0,T,void 0,\"reference\",void 0,c,s))}}catch(e){y.e(e)}finally{y.f()}p.targets=h}else{var E=o(s,void 0,void 0,void 0,\"reference\",void 0,c,void 0);E.primaryKey=\"sys_id\",p.targets=[E]}}else console.error(\"No filter_reference index found when migrating reference filters for widget\",e.name?e.name:_),a.migrationNotes.push(i({message:r(\"This interactive filter cannot be migrated. It can be configured manually in a new filter.\"),level:0,originalArtifactSysId:_,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:a.featureFlags}));if((null==v?void 0:v.length)>0){var S,R=[],w=l(t(v,\",\"));try{for(w.s();!(S=w.n()).done;){var I=S.value,D=n.sys_id[I],j=void 0;D&&D[0].sys_name&&(j=D[0].sys_name),R.push({id:I,available:!0,unknown:!1,empty:!1,label:j})}}catch(e){w.e(e)}finally{w.f()}p.defaultSelectedItems=R}return g(\"1\"==f?\"2\":f,p),p}(e,n,s)}}(s||{},n,c);return f?{component_id:e,component_props:f}:A(b)(n,s,c,d)},T=/ORDERBY[^.^]+\\./,E=[function(e){var a,t,n,l,s=e.dashboard,o=e.widget,c=(e.indexes,e.preferences);((null==c||null===(a=c.renderer)||void 0===a?void 0:a.value)===p||s.migratingFromJava)&&(\"true\"===(null==c||null===(t=c.publisher_widget)||void 0===t?void 0:t.value)&&s.migrationNotes.push(i({message:r(\"This visualization is in compatibility mode because the act as filter feature is not supported on migration. It can be configured manually in a new visualization.\"),level:1,originalArtifactSysId:o.sys_id,artifactTable:o.sys_table_name,featureFlags:s.featureFlags})),null!=o&&null!==(n=o.report_drilldown)&&void 0!==n&&n.value&&s.migrationNotes.push(i({message:r(\"This visualization is in compatibility mode because the report drilldown feature is not supported on migration. It can be configured manually in a new visualization.\"),level:1,originalArtifactSysId:o.sys_id,artifactTable:o.sys_table_name,featureFlags:s.featureFlags})),T.test(null==o?void 0:o.filter)&&s.migrationNotes.push(i({message:r(\"This visualization is migrated without sorting by dot-walked fields because this functionality is not supported.\"),level:2,originalArtifactSysId:o.sys_id,artifactTable:o.sys_table_name,featureFlags:s.featureFlags})),null!=o&&null!==(l=o.list_ui_view)&&void 0!==l&&l.value&&s.migrationNotes.push(i({message:r(\"This visualization is migrated without a drilldown list view because this functionality is not supported.\"),level:2,originalArtifactSysId:o.sys_id,artifactTable:o.sys_table_name,featureFlags:s.featureFlags})))}],S=function S(a,t,r,i){var n,l=function(e,a,t,r){for(var i=0,n=E;i<n.length;i++){var l=(0,n[i])({dashboard:e,widget:a,indexes:t,preferences:r});if(l)return l}}(a,t,r,i);if(l)return l;switch(null==t?void 0:t.type){case 6:case\"6\":return\"true\"!==(null===(n=a.featureFlags)||void 0===n?void 0:n.cascadingFilter)&&a.migratingFromJava?A(b)(a,t,r,i):function(a,t,r,i){var n,l,s,c,u,_,g=void 0!==r.filter_reference[t.sys_id]&&r.filter_reference[t.sys_id].length>0?r.filter_reference[t.sys_id][0]:{},f=d(g,a,r);if(!f)return unsupportedFilterMigration(a,t,r,void 0);f.cascading_filter=g,f.cascading_filter_target=r.filter_cascading_target[f.cascading_filter.sys_id],f.child_filters=[],f.filterCanvasOrder={};for(var v=f.cascading_filter.sys_id,p=0;r.filter_cascading[v];){var m;f.filterCanvasOrder[v]=p,p++;var b=r.filter_cascading[v][0];b.component_id=e;var h=b.sys_id,y=!(null!==(m=r.filter_cascading[h])&&void 0!==m&&m.length||\"true\"!==t.allow_extended_table&&!0!==t.allow_extended_table);b.component_props=d(b,a,r,y),f.child_filters.push(b),v=h}f.filterCanvasOrder[v]=p,f.targets||(f.targets=[]);var A=null===(n=f.child_filters)||void 0===n||null===(l=n.filter(function(e){return e.parent.value===f.cascading_filter.sys_id})[0])||void 0===l?void 0:l.table,N=null===(s=f.child_filters)||void 0===s||null===(c=s.filter(function(e){return e.parent.value===f.cascading_filter.sys_id})[0])||void 0===c?void 0:c.conditions,T=null===(u=f.child_filters)||void 0===u||null===(_=u.filter(function(e){return e.parent.value===f.cascading_filter.sys_id})[0])||void 0===_?void 0:_.cascading_filter_reference_field;return f.targets.push(o(A,\"\",T,\"\",\"reference\",N)),f.child_filters.forEach(function(e){if(0===e.component_props.targets.length){var a,t,r;e.component_props.targets=[];var i=null===(a=f.child_filters.filter(function(a){return a.parent.value===e.sys_id})[0])||void 0===a?void 0:a.table,n=null===(t=f.child_filters.filter(function(a){return a.parent.value===e.sys_id})[0])||void 0===t?void 0:t.cascading_filter_reference_field,l=null===(r=f.child_filters.filter(function(a){return a.parent.value===e.sys_id})[0])||void 0===r?void 0:r.conditions;e.component_props.targets.push(o(i,\"\",n,\"\",\"reference\",l))}}),{component_id:e,component_props:f}}(a,t,r);default:return N(a,t,r)}};this.run=function(e,a,t,r,i){for(var n=[],l=0;l<t.length;l++)try{var s,o=null===(s=e.sys_id[t[l]])||void 0===s?void 0:s[0],c={migratingFromJava:!0,migrationNotes:[],featureFlags:i,migratingSingleArtifact:!0};if(o){var d=S(c,o,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});d.migrationNotes=c.migrationNotes,d.oldSysId=t[l],n.push({answer:d,hasError:!1,oldSysId:t[l]})}}catch(e){n.push({error:e,hasError:!0,oldSysId:t[l]})}return n};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"8545608243413110e313ac4b96b8f2e8","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-09-04 09:11:22","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/226449101138d0dff1abe0e1566c8b2a","value":"226449101138d0dff1abe0e1566c8b2a"},"key":"filterMigrationScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"metricBase\",r={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},t=function t(e){for(var r,t,o=\"\".concat(e),i=\"\",n=0,a=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(n)||(a=\"=\",n%1);){if((t=o.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,i+=a.charAt(63&r>>8-n%1*8)}return i.toString()},o=function o(e,r){return void 0!==e&&void 0!==r&&e.indexOf(r)>-1},i=function i(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,i=0;i<e.length;i++)e.charAt(i)!==r||(t.push(e.substring(o,i)),o=i+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function n(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),i=o.length>>>0,n=arguments[1],a=0;a<i;a++){var l=o[a];if(r.call(n,l,a,o))return t?a:l}}function a(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var l=function l(e,r){return{text:e,vars:r}},s=function s(e){var r=e.message,t=e.level,o=e.tooltip,i=e.originalArtifactSysId,n=e.artifactTable,a=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,u={text:r,level:t,help:o,originSysId:i,hasNewArtifact:a,table:n,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?u:d(u)},d=function d(e){var r,t,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},u=\"sys_report\";function c(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,a=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return a=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{a||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var g=function g(e){return t(\"table\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},p=function p(e){return t(e+new Date().getTime()+1e8*Math.random())},f=function f(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,o=i(e,\"^\"),a=[],l=c(o);try{var s=function s(){var e=t.value;if(n(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";a.push(e)};for(l.s();!(t=l.n()).done;)s()}catch(e){l.e(e)}finally{l.f()}return a.join(\"^\")};function v(e){return v=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},v(e)}var h=function h(e){return{durationFormat:b(a(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},y=function y(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=b(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},b=function b(e,r,t){var o=JSON.parse(JSON.stringify(r)),i=!1;for(var n in t)void 0!==o[t[n]]&&e[n]!==o[t[n]]&&(i=!0,o[t[n]]=e[n]);return!!i&&o},_=function _(e,r,t,o,i){var n={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},a={durationFormattingProperties:h,numberFormattingProperties:y};switch(i){case\"heatmap\":case\"box\":return\"glide_duration\"===t?n:a.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===v(e)&&a.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return a.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(a[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return a[s](e[s][d],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:n},w=function w(e){return e.join(\":\")},T=function T(e,r,t){return n(Object.keys(e),function(e){return e===r})?e[r].dataSourceId:g(t)},A=function A(e,r,t){var o=n(e,function(e){return e.id===r}),i=!1;return o&&o.filterQuery===t||(i=!0),i};function R(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return F(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?F(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,a=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return a=e.done,e},e:function e(_e5){l=!0,n=_e5},f:function f(){try{a||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function F(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function S(e){switch(e){case\"line_bar\":return\"bar\";case\"step_line\":return\"step\";default:return e}}var x=function x(e,t){var o={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},i=function i(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),o=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(o,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))o.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){o.showAbsolutePeriod=!0,o.startTime=i(null==e?void 0:e.from),o.endTime=i(null==e?void 0:e.to);var a=new Date;new Date(o.startTime)>a&&!o.endTime?o.endTime=o.startTime:o.startTime&&!o.endTime?o.useCurrentDateForEnd=!0:!o.startTime&&o.endTime&&(o.showMaximumRange=!0,o.endTime=null)}else{o.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var l=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),s=n(Object.keys(r),function(e){return r[e]===l},!0),d=n(Object.keys(r),function(e){return r[e]===t},!0);o.period=s<d?t:l}return o},O=function O(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},I=function I(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},P=(I(\"content_block_static\",\"com.glide.cms.RenderBlock\"),I(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),I(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),I(\"\",\"com.glide.ui.portal.RenderReport\"),I(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),I(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),C=(I(P.group,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.group2,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.single,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.multi,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.date,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.bool,\"com.glideapp.home.RenderHomepagePublishers\"),I(P.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),I(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),I(P.debug,\"com.glideapp.home.RenderHomepagePublishers\"),I(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),I(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),I(\"\",\"com.glide.ui.portal.RenderDashboard\"),I(\"report\",\"com.glide.ui.portal.RenderJavascript\"),I(\"\",\"com.glide.ui.portal.RenderJavascript\"),I(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),I(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),I(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),I(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),B=function B(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},N=function N(e,r){var t={message:l(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(s({message:l(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(s(t))&&e.migrationNotes.push(s(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},E=function E(r,t,d,m){var v=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(s({message:l(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(r,t),h=function(e){var r,t,o,n,a=e.table,l=e.aggregateFieldType,s=e.filter,d=e.groupByMetadata,u=e.chart_title||e.title,c=null===(r=e.color_palette)||void 0===r?void 0:r.value,m=e.show_chart_data_label,g=e.field,p=e.legend_horizontal_alignment,f=e.legend_vertical_alignment,v=e.show_legend,h=e.decimal_precision,y=e.show_chart_border,b=e.source_type,_=e.aggregate,w=e.other_threshold,T=e.sumfield,A=i(e.colors,\",\"),R=e.set_color,F=null===(t=e.color)||void 0===t?void 0:t.value,S=e.show_chart_total,x=e.trend_field,O=e.interval,I=e.x_axis_title,P=e.x_axis_display_grid,C=e.y_axis_display_grid,B=e.y_axis_title,N=e.y_axis_from,E=e.y_axis_to,D=e.y_axis_opposite,k=e.show_marker;try{n=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(r){console.log(\"Unable to transform json 2\",r.toString(),e),n={}}var J=null===(o=e.report_source)||void 0===o?void 0:o.value,M=e.is_real_time,U=e.bar_unstack,H=e.series_name_text,L={};try{var j;e.custom_config&&\"\"!==e.custom_config&&(L=null===(j=JSON.parse(e.custom_config))||void 0===j?void 0:j.transforms)}catch(r){console.log(\"Unable to transform widget.custom_config to json \",r.toString(),e.custom_config),L={}}var z=e.start_time,G=e.end_time,V=e.display_grid;return{table:a,chartTitle:u,colorType:R,colorPalette:c,singleColor:F,showDataLabel:m,groupBy:g,legendVerticalAlignment:f,legendHorizontalAlignment:p,showLegend:v,numberOfPeriods:h,showChartBorder:y,sourceType:b,aggregateType:_,otherThreshold:w,filter:s,aggregateField:T,colors:A,showTotal:S,trendBy:x,trendInterval:O,xAxisTitle:I,xAxisShowGrid:P,yAxisShowGrid:C,yAxisTitle:B,yAxisFrom:N,yAxisTo:E,yAxisOpposite:D,formattingConfiguration:n,reportSource:J,reportId:e.sys_id,isRealTime:M,isGroupedBars:U,aggregateFieldType:l,dataSetName:H,groupByMetadata:d,customConfig:L,startTime:z,endTime:G,showMarkers:k,showDataTable:V}}(t);if(\"STDDEV\"===(null==h?void 0:h.aggregateType))return r.migratingFromJava&&m?B(t,m):N(r,{static_content:O(\"<b>Unsupported Aggregation:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==t?void 0:t.type,\"</span> report because Standard Deviation aggregation is not supported.\"))});var y,b=function(r){var t=function(r){var t,i,d,m,v,h,y,b,F=r.table,O=r.chartTitle,I=r.colorPalette,P=r.showDataLabel,C=r.groupBy,B=r.showOthers,N=r.legendHorizontalAlignment,E=r.legendVerticalAlignment,D=r.numberOfPeriods,k=(r.showChartBorder,r.sourceType),J=r.aggregateType,M=r.otherThreshold,U=r.filter,H=r.showLegend,L=r.aggregateField,j=r.colorType,z=r.trendBy,G=r.trendInterval,V=r.xAxisTitle,Y=r.xAxisShowGrid,W=r.yAxisShowGrid,Z=r.yAxisTitle,Q=r.yAxisFrom,q=r.yAxisTo,X=r.yAxisOpposite,$=r.formattingConfiguration,K=r.reportSource,ee=r.reportId,re=r.aggregateFieldType,te=r.d,oe=r.showHeader,ie=r.showTitle,ne=r.showBorder,ae=r.indexes,le=(r.dataSetName,r.groupByMetadata),se=r.singleColor,de=r.customConfig,ue=r.startTime,ce=r.endTime,me=r.colors,ge=r.showMarkers,pe=r.showDataTable,fe=function(e,r){var t,i=\"value\",n=\"desc\";if(o(e,\"ORDERBY\")&&(i=\"name\",o(e,\"DESC\")||(n=\"asc\")),r&&!o(e,\"ORDERBY\")){var a=r.type,l=r.internalType;n=\"asc\",\"date\"===(t=a)||\"datetime\"===t||\"due_date\"===t||\"glide_date\"===t||\"glide_date_time\"===t||\"glide_precise_time\"===t?i=\"report_range\":function(e){return\"integer\"===e||\"decimal\"===e||\"numeric\"===e||\"float\"===e||\"domain_number\"===e||\"auto_increment\"===e||\"percent_complete\"===e}(a)?i=\"value\":\"choice\"===a&&\"integer\"===l?i=\"choice\":\"reference\"===a||\"choice\"===a&&\"string\"===l?i=\"name\":n=\"desc\"}return{sortBy:i,sortByOrder:n}}(U,le),ve=f(U),he=function(e,r){var t={register:\"\",horizontal:\"\",orientation:\"vertical\"};function o(){t.horizontal=\"center\",\"left\"===e&&(t.horizontal=\"start\"),\"right\"===e&&(t.horizontal=\"end\")}return\"right\"===e?(t.register=\"right\",t.horizontal=\"center\"):\"left\"===e&&(t.register=\"left\",t.horizontal=\"center\"),\"bottom\"===r||\"center\"===r||\"middle\"===e?(t.register=\"bottom\",t.orientation=\"horizontal\",o()):\"top\"===r&&(t.orientation=\"horizontal\",t.register=\"top\",o()),t}(N,E),ye=function(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(r){return e}}(M),be=_($,parseInt(D,10),re,J),_e=g(F),we=p(_e),Te={},Ae=w([F,null==K?void 0:K.value,ve]);Te[Ae]={metricId:we,dataSourceId:_e,metricColor:se};var Re,Fe=!1;switch(G){case\"dayofweek\":b=\"dayOfWeek\",Fe=!0;break;case\"hour\":b=\"hourOfDay\",Fe=!0;break;default:b=G}if(32===G.length&&(b=G),\"metricbase\"===k){var Se={period:0===(null==ue?void 0:ue.indexOf(\"P\"))?ue.slice(1):\"between\",from:ue,to:ce};D=(Re=x(Se,\"1D\")).numberOfPeriods,k=e,delete be.durationFormat,delete be.dateFormat,delete be.stringFormat}var xe={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:ve,id:_e,isDatabaseView:!1,label:void 0,reportSourceSysId:K,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===k||0===k.length?\"table\":k,tableOrViewName:k!==e?F:void 0,table:k===e?F:void 0}],dateFormat:\"default\",disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null===(t=Re)||void 0===t?void 0:t.endTime,extensionType:\"area\",filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:(null!==(i=null==C?void 0:C.length)&&void 0!==i?i:0)>0?[{disableRanges:!1,groupBy:[{dataSource:_e,groupByField:C,isChoice:\"choice\"===(null==le?void 0:le.type),isPaBucket:!1,isRange:null==le?void 0:le.isRange,metric:we}],hideZeroValues:!1,maxNumberOfGroups:null!=le&&le.isRange?\"ALL\":ye,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==le||!le.isRange)&&\"true\"===B}]:[],headerTitle:ie?O:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!0,hideYAxis2:!0,hideYAxis3:!0,hideYAxis4:!0,legendExpandToFit:!0,legendHorizontalAlignment:he.horizontal,legendPosition:he.register,lineStrokeWidth:\"2\",metrics:[a({aggregateFunction:(null==J?void 0:J.length)>0?J:\"COUNT\",axisId:\"primary\",dataSource:_e,id:we,label:void 0,transforms:de},be)],newReporting:!1,numberOfPeriods:parseInt(D,10),period:null===(d=Re)||void 0===d?void 0:d.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null===(m=Re)||void 0===m?void 0:m.showAbsolutePeriod,showBorder:ne,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===P,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:null,showHeader:oe,showHeaderSeparator:!1,showLegend:\"true\"===H,showLegendValue:!1,showMaximumRange:null===(v=Re)||void 0===v?void 0:v.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showContinuousLine:!0,enableAddZerosAtApi:Fe,showMarkers:\"true\"===ge,showTotalValue:null,showTrend:!1,showXGrid:\"true\"===Y,showYGrid:\"true\"===W,sortBy:fe.sortBy,sortByOrder:fe.sortByOrder,startTime:null===(h=Re)||void 0===h?void 0:h.startTime,telemetry:\"null\",trendBy:{trendByFields:[{field:z,metric:we}],trendByFrequency:b,trendByMinuteInterval:null},wrapTitle:!1,xAxisTitle:V,yAxis0From:Q,yAxis0Position:\"true\"===X?\"right\":\"left\",yAxis0Title:Z,yAxis0To:q,showDataTable:\"true\"===pe};L&&\"COUNT\"!==J&&\"\"!==L&&(xe.metrics[0].aggregateField=L);var Oe,Ie=R(null!==(y=ae.report_layers[ee])&&void 0!==y?y:[]);try{for(Ie.s();!(Oe=Ie.n()).done;){var Pe,Ce,Be,Ne,Ee=Oe.value,De=xe.dataSources.map(function(e){return e.tableOrViewName}).concat(xe.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),ke=f(Ee.filter);Ae=w([F,null==K?void 0:K.value,ke,Ee.sys_id]);var Je=T(Te,Ae,Ee.table);Te[Ae]={metricId:p(Je),dataSourceId:Je,metricColor:null===(Pe=Ee.color)||void 0===Pe?void 0:Pe.value};var Me,Ue=A(xe.dataSources,Je,ke);if((!o(De,Ee.table)&&!o(De,Ee.report_source)||Ue)&&xe.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:Ee.table,filterQuery:ke,reportSourceSysId:null===(Me=Ee.report_source)||void 0===Me?void 0:Me.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:Je,dataCategories:[\"trend\",\"group\",\"simple\"]}),xe.metrics.push(a({dataSource:Te[Ae].dataSourceId,id:Te[Ae].metricId,aggregateFunction:Ee.aggregate,aggregateField:\"COUNT\"===Ee.aggregate&&\"\"!==Ee.sumfield?void 0:Ee.sumfield,axisId:\"primary\",label:(null===(Ce=Ee.series_name_text)||void 0===Ce?void 0:Ce.length)>0?Ee.series_name_text:void 0,chartType:S(Ee.type)},_(Ee.formatting_configuration,parseInt(D,10),Ee.aggregateFieldType,Ee.aggregateType))),(null===(Be=Ee.trend_field)||void 0===Be?void 0:Be.length)>0&&xe.trendBy.trendByFields.push({field:Ee.trend_field,metric:Te[Ae].metricId}),(null===(Ne=Ee.field)||void 0===Ne?void 0:Ne.length)>0||xe.groupBy.length>0)return void te.migrationNotes.push(s({message:l(\"This visualization is in compatibility mode because the group by configuration is not supported for this metric.\"),level:1,originalArtifactSysId:ee,artifactTable:u,featureFlags:te.featureFlags}))}}catch(e){Ie.e(e)}finally{Ie.f()}return xe.colorConfig=function(e){var r=e.colorPalette,t=e.colorType,o=e.dashboard,i=e.reportId,a=e.enableColorPerMetric,d=e.singleColor,m=e.metrics,g=e.colorList,p=e.metricMap;if(m&&p&&!o.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var f={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)f.type=\"palette\",f.palette=r;else if(\"several_colors\"===t)!g||Array.isArray(g)&&!n(g,function(e){return\"\"!==e})?f.type=\"chartColor\":o.migrationNotes.push(s({message:l(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:l(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:i,artifactTable:u,featureFlags:o.featureFlags}));else if(\"chart_colors\"===t)f.type=\"chartColor\";else if(\"one_color\"===t&&((null==d?void 0:d.length)>0||n(Object.keys(null!=p?p:{}),function(e){var r;return(null===(r=p[e].metricColor)||void 0===r?void 0:r.length)>0})))if(p){for(var v=a?\"colorsPerMetric\":\"singleColor\",h=[],y=0,b=Object.keys(p);y<b.length;y++){var _,w=b[y];h.push({metric:p[w].metricId,color:null!==(_=p[w].metricColor)&&void 0!==_?_:\"de699435d7033100b4964ebfae610331\"})}f.type=v,f.values=h}else{var T,A=[],R=c(null!=m?m:[]);try{for(R.s();!(T=R.n()).done;){var F=T.value;A.push({color:d,metric:F})}}catch(e){R.e(e)}finally{R.f()}f.type=\"singleColor\",f.values=A}return f}({colorPalette:I,colorType:j,dashboard:te,reportId:ee,singleColor:se,colorList:me,enableColorPerMetric:!0,metricMap:Te}),xe}(r);if(t)return t.extensionType=\"bar\",t.legendExpandToFit=!1,t}(a(h,{d:r,indexes:d},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(m)));return!b||v?r.migratingFromJava&&m?B(t,m):(y=\"report\",function(e,r,t,o){var i;return(i=y===C?function(){for(var e in P)if(P[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===y||y===C?function(e,r,t,o){var i,n,a;return e.migratingFromJava&&o?B(r,o):N(e,{static_content:O(\"<b>Unsupported migration: \".concat(null!==(i=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(a=o.type)||void 0===a?void 0:a.value,\"</span> widget.\"))})}(e,a(r,{type:i}),0,o):function(e,r,t,o){var i,n,a;return e.migratingFromJava&&o?B(r,o):N(e,{static_content:O(\"<b>Unsupported migration: \".concat(null!==(i=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(a=o.type)||void 0===a?void 0:a.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var i,n,a,d;if(e.migratingFromJava&&o)return B(r,o);var u=\"\";null!=r&&r.type?u=r.type:null!=o&&null!==(i=o.type)&&void 0!==i&&i.value?u=null==o||null===(n=o.type)||void 0===n?void 0:n.value:null!=o&&null!==(a=o.renderer)&&void 0!==a&&a.value&&(u=o.renderer.value);var c=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),N(e,{static_content:O(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(u,\": \").concat(c,\"</span> widget.\"))})}(e,r,0,o)})(r,t,d,m):(function(e,r,t){if(e.additional_groupby){t.showAdditionalGroupBySelector=!0;var o=i(e.additional_groupby,\",\");-1===o.indexOf(e.field)&&o.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&o.push(e.trend_field),t.additionalGroupByConfig=[],o.forEach(function(e){t.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(t,0,b),{component_id:\"2bd5dc19a7ad083941b7c992a966dd78\",component_props:b})};this.run=function(e,r,t,o,i){var n,a={migratingFromJava:!0,migrationNotes:[],featureFlags:i,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=E(a,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=a.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"889adfa4a31131108d80ad2f241e613b","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-09-12 16:47:08","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/2bd5dc19a7ad083941b7c992a966dd78","value":"2bd5dc19a7ad083941b7c992a966dd78"},"key":"trendReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),n=\"\",a=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(a)||(i=\"=\",a%1);){if((t=o.charCodeAt(a+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,n+=i.charAt(63&r>>8-a%1*8)}return n.toString()},r=function r(e,_r){if(void 0===e)return[];if(1!==_r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,n=0;n<e.length;n++)e.charAt(n)!==_r||(t.push(e.substring(o,n)),o=n+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function t(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var o=function o(e,r){return{text:e,vars:r}},n=function n(e){var r=e.message,t=e.level,o=e.tooltip,n=e.originalArtifactSysId,i=e.artifactTable,l=e.hasNewArtifact,s=e.debugInfo,u=e.featureFlags,c={text:r,level:t,help:o,originSysId:n,hasNewArtifact:l,table:i,debugInfo:s};return\"true\"===(null==u?void 0:u.translatedLogs)?c:a(c)},a=function a(e){var r,t,o,n;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(n=e.text)||void 0===n?void 0:n.text)&&void 0!==o?o:e.text};function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var l=function l(e){var t=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var o,n=r(e,\"^\"),a=[],l=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,n=function n(){};return{s:n,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,l=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return l=e.done,e},e:function e(_e3){s=!0,a=_e3},f:function f(){try{l||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw a}}}}(n);try{var s=function s(){var e=o.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),n=o.length>>>0,a=arguments[1],i=0;i<n;i++){var l=o[i];if(r.call(a,l,i,o))return t?i:l}}(t,function(r){return e.substring(0,r.length)===r}))return\"continue\";a.push(e)};for(l.s();!(o=l.n()).done;)s()}catch(e){l.e(e)}finally{l.f()}return a.join(\"^\")};function s(e){return s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},s(e)}var u=function u(e){return{durationFormat:d(t(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},c=function c(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=d(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},d=function d(e,r,t){var o=JSON.parse(JSON.stringify(r)),n=!1;for(var a in t)void 0!==o[t[a]]&&e[a]!==o[t[a]]&&(n=!0,o[t[a]]=e[a]);return!!n&&o},p=function p(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")};function m(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return g(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?g(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,n=function n(){};return{s:n,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,i=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e5){l=!0,a=_e5},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw a}}}}function g(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var f=function f(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},v=(f(\"content_block_static\",\"com.glide.cms.RenderBlock\"),f(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),f(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),f(\"\",\"com.glide.ui.portal.RenderReport\"),f(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),h=(f(v.group,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.group2,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.single,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.multi,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.date,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.bool,\"com.glideapp.home.RenderHomepagePublishers\"),f(v.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),f(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),f(v.debug,\"com.glideapp.home.RenderHomepagePublishers\"),f(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"\",\"com.glide.ui.portal.RenderDashboard\"),f(\"report\",\"com.glide.ui.portal.RenderJavascript\"),f(\"\",\"com.glide.ui.portal.RenderJavascript\"),f(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),f(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),f(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),f(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),y=function y(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},b=function b(e,r){var t={message:o(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(n({message:o(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(n(t))&&e.migrationNotes.push(n(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},_=function _(a,i,d,g){var f,_=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),a=null==r?void 0:r.groupByMetadata;return!(!t||!a||\"glide_duration\"!=a.internalType&&\"glide_date_time\"!=a.internalType&&\"glide_date\"!=a.internalType||(e.migrationNotes.push(n({message:o(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(a,i),w=function(e){var t,o,n,a,i=e.aggregate,l=e.aggregateFieldType,s=e.filter,u=e.column,c=e.row,d=e.table,p=e.sumfield,m=e.chart_title||e.title,g=null===(t=e.color_palette)||void 0===t?void 0:t.value,f=r(e.colors,\",\"),v=e.set_color,h=null===(o=e.color)||void 0===o?void 0:o.value;try{a=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(r){console.log(\"Unable to transform json 3\",r.toString(),e),a={}}var y=null===(n=e.report_source)||void 0===n?void 0:n.value,b=e.other_threshold,_=e.source_type,w=\"true\"===e.others,R=\"true\"===e.show_zero,F=\"true\"===e.display_column_lines,T=\"true\"===e.display_row_lines,S=\"true\"===e.pivot_expanded;return{aggregate:i,aggregateFieldType:l,filter:s,column:u,row:c,table:d,chartTitle:m,colorPalette:g,colors:f,singleColor:h,colorType:v,formattingConfiguration:a,reportSource:y,otherThreshold:b,sysId:e.sys_id,sourceType:_,aggregateField:p,showOthers:w,showZero:R,showColLines:F,showRowLines:T,showExpanded:S}}(i),R=function(o){var n,a=o.filter,i=o.formattingConfiguration,d=o.aggregate,p=o.aggregateFieldType,g=o.table,f=o.column,v=o.row,h=o.chartTitle,y=o.reportSource,b=o.otherThreshold,_=o.sysId,w=o.sourceType,R=o.showOthers,F=o.aggregateField,T=o.showHeader,S=o.showTitle,A=o.showBorder,C=o.showZero,P=o.showColLines,O=o.showRowLines,I=o.showExpanded,x=o.indexes,J=l(a),B=function(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(r){return e}}(b),E=function(e,r,t,o,n){var a={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},i={durationFormattingProperties:u,numberFormattingProperties:c};if(\"glide_duration\"===t){if(\"object\"===s(e)&&i.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return i.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var d in e)if(i[d]&&e[d]&&Object.keys(e[d]).length>0){var p=Object.keys(e[d])[0];return i[d](e[d][p],r)}return a}(i,void 0,p),N=function(r){return e(\"table\".concat(r).concat(new Date().getTime()).concat(1e8*Math.random()))}(g),H=function(r){return e(r+new Date().getTime()+1e8*Math.random())}(N),k={applyDateRange:!1,bareBorder:!1,colorConfig:{type:\"default\"},dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:J,id:N,reportSourceSysId:y,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===w||0===w.length?\"table\":w,tableOrViewName:g}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,freezeFirstColumn:!1,freezeFooter:!1,freezeHeader:!0,groupBy:[],headerTitle:S?h:\"\",hideMatrixAggregate:!1,metrics:[t({aggregateField:F,aggregateFunction:(null==d?void 0:d.length)>0?d:\"COUNT\",axisId:\"primary\",dataSource:N,id:H},E)],newReporting:!0,numberOfPeriods:3,period:\"M\",scoreType:\"latest\",showAbsolutePeriod:!1,showAlternateColumnColors:!1,showAlternateRowColors:!0,showBorder:A,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showColumnAggregate:!0,showColumnDividers:P,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!0,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:T,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showPivotExpanded:I,showRowAggregate:!0,showRowDividers:O,showSecondGroupAggregate:!0,showSparkline:!1,showSubAggregate:!0,showTarget:!1,showThreshold:!1,showTotalAggregate:!0,showTrend:!1,showZero:C,sortBy:\"choice\",sortByOrder:\"asc\",telemetry:\"null\",truncateColumnHeader:!0,truncateFirstColumn:!0,wrapColumnHeader:!1,wrapTitle:!1},U=m(r(f,\",\"));try{for(U.s();!(n=U.n()).done;){var D=n.value;k.groupBy.push({categoryIndex:0,disableRanges:!0,groupBy:[{dataSource:N,groupByField:D,isChoice:!1,isPaBucket:!1,isRange:!1}],hideZeroValues:!1,maxNumberOfGroups:B,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:R})}}catch(e){U.e(e)}finally{U.f()}var M,j=m(r(v,\",\"));try{for(j.s();!(M=j.n()).done;){var L=M.value;k.groupBy.push({categoryIndex:1,disableRanges:!0,groupBy:[{dataSource:N,groupByField:L,isChoice:!1,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:\"ALL\"})}}catch(e){j.e(e)}finally{j.f()}var G=x.sys_report_mpivot_rule[_];if((null==G?void 0:G.length)>0){var V;k.colorConfig={type:\"singleColor\",values:[{color:null===(V=G[0].color_id)||void 0===V?void 0:V.value,metric:H,rules:[]}]};var z,Y=m(G);try{for(Y.s();!(z=Y.n()).done;){var Z,W,Q=z.value;k.colorConfig.values[0].rules.push({operator:Q.operator,order:100,color:null===(Z=Q.color_id)||void 0===Z?void 0:Z.value,value1:Q.value1,value2:Q.value2,backgroundColor:null===(W=Q.bg_color_id)||void 0===W?void 0:W.value})}}catch(e){Y.e(e)}finally{Y.f()}}var $,q=m(k.metrics);try{for(q.s();!($=q.n()).done;){var K=$.value;\"COUNT\"===K.aggregateFunction&&delete K.aggregateField}}catch(e){q.e(e)}finally{q.f()}return k}(t(w,{d:a,indexes:d},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(g)));return!R||_?a.migratingFromJava&&g?y(i,g):(f=\"report\",function(e,r,a,i){var l;return(l=f===h?function(){for(var e in v)if(v[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(n({message:o(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===f||f===h?function(e,r,t,o){var n,a,i;return e.migratingFromJava&&o?y(r,o):b(e,{static_content:p(\"<b>Unsupported migration: \".concat(null!==(n=null!==(a=r.name)&&void 0!==a?a:r.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> widget.\"))})}(e,t(r,{type:l}),0,i):function(e,r,t,o){var n,a,i;return e.migratingFromJava&&o?y(r,o):b(e,{static_content:p(\"<b>Unsupported migration: \".concat(null!==(n=null!==(a=r.name)&&void 0!==a?a:r.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> report.\"))})}(e,r,0,i)):function(e,r,t,a){var i,l,s,u;if(e.migratingFromJava&&a)return y(r,a);var c=\"\";null!=r&&r.type?c=r.type:null!=a&&null!==(i=a.type)&&void 0!==i&&i.value?c=null==a||null===(l=a.type)||void 0===l?void 0:l.value:null!=a&&null!==(s=a.renderer)&&void 0!==s&&s.value&&(c=a.renderer.value);var d=null==a||null===(u=a.title)||void 0===u?void 0:u.value;return e.migrationNotes.push(n({message:o(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),b(e,{static_content:p(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(c,\": \").concat(d,\"</span> widget.\"))})}(e,r,0,i)})(a,i,d,g):(function(e,t,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var n=r(e.additional_groupby,\",\");-1===n.indexOf(e.field)&&n.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&n.push(e.trend_field),o.additionalGroupByConfig=[],n.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(i,0,R),{component_id:\"06f6aacbd1818110f877d87436272684\",component_props:R})};this.run=function(e,r,t,o,n){var a,i={migratingFromJava:!0,migrationNotes:[],featureFlags:n,migratingSingleArtifact:!0},l=null===(a=e.sys_id[t])||void 0===a?void 0:a[0],s=_(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"a01bd3e4a31131108d80ad2f241e61e0","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-09-12 16:49:51","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/06f6aacbd1818110f877d87436272684","value":"06f6aacbd1818110f877d87436272684"},"key":"pivotReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"70","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"2d56f06d55f46bbd4e79b5e624beb940\",t=\"d24d53f60350de7a652caf3188a46ed2\",r=\"96abe7e38d8790718022c5630a92176c\",a=\"a2b0596cec6b9d49dd1ff9bf76b5084b\",o=\"3809c6583b8dd540a0bf735ed493bae2\",i=\"226449101138d0dff1abe0e1566c8b2a\",n=\"aba8630dc2ccc9b3c1774af1b6820696\",l=\"2bd5dc19a7ad083941b7c992a966dd78\",s=\"18ac962264404bcc0039359d184b15f3\",d=\"0f1e76928c4814e1430774fb864003f0\",u=\"7fa5f7264941fabfb1542985da30e0b8\",c=\"23051643b7e03010097cb81cde11a910\",g=\"53e0a2b49e3ff92ba54ea7ea6f0d0583\",p=\"d1f6c60ce95607ea1ef236430d5fdec9\",m=\"0805a7bf91a93efbdf0a975b38b01051\",f=\"037bd8ea3013833fd049186779528b70\",v=\"259e0221ff18a75c5f5f0fb28fa5d32f\",h=\"9d31ba4d773ce32ef350d4555b673f6e\",y=\"10fea73f9f5c73001bb9baac757fcfd9\",_=\"65b30395a9fe3dba003277a7b660b5db\",b=/^[a-fA-F0-9]{32}(\\u0007)?/,w=\"metricBase\",T={DAY:1,WEEK:2,MONTH:3,QUARTER:4,FQ:5,YEAR:6,FY:7,WEEK2DATE:8,MONTH2DATE:9,QUARTER2DATE:10,FQ2DATE:11,YEAR2DATE:12,FY2DATE:13,WEEK_PLUS:14,MONTH_PLUS:15,QUARTER_PLUS:16,FQ_PLUS:17,YEAR_PLUS:18,FY_PLUS:19},S=10,A=20,F=40,C=60,R=65,I=80,O=85,x={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},N=\"single_score\",B=\"donut\",E=\"semi_donut\",P=\"area\",k=\"line_bar\",D=\"spline\",M=\"step_line\",L=\"pivot_v2\",G=\"pivot\",U=\"horizontal_bar\",H=\"vertical_bar\",J=\"heatmap\",j=\"angular_gauge\",V=\"solid_gauge\",z=\"trend\",Y=[N,\"pie\",B,E,P,k,D,M,G,L,\"bar\",U,H,J,j,V,z,\"box\"],q=function q(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},W=function W(e,t,r){return\"com.glideapp.home.RenderHomepagePublishers\"===t&&r&&!Number.isNaN(parseInt(r,10))?\"\".concat(null!=r?r:\"\",\"::\").concat(null!=t?t:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=t?t:\"\")},Q=W(\"content_block_static\",\"com.glide.cms.RenderBlock\"),Z=W(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),X=W(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),K=\"com.glide.ui.portal.RenderReport\",$=W(\"\",K),ee=W(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),te=W(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),re=W(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),ae=W(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),oe=W(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),ie=W(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),ne=W(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),le=W(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),se=W(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),de={group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"},ue=W(de.group,\"com.glideapp.home.RenderHomepagePublishers\"),ce=W(de.group2,\"com.glideapp.home.RenderHomepagePublishers\"),ge=W(de.single,\"com.glideapp.home.RenderHomepagePublishers\"),pe=W(de.multi,\"com.glideapp.home.RenderHomepagePublishers\"),me=W(de.date,\"com.glideapp.home.RenderHomepagePublishers\"),fe=W(de.bool,\"com.glideapp.home.RenderHomepagePublishers\"),ve=W(de.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),he=W(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),ye=W(de.debug,\"com.glideapp.home.RenderHomepagePublishers\"),_e=W(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),be=W(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),we=W(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),Te=W(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),Se=W(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),Ae=W(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),Fe=W(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),Ce=W(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),Re=W(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),Ie=W(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),Oe=W(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),xe=W(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),Ne=W(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),Be=W(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),Ee=W(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),Pe=W(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),ke=W(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),De=W(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),Me=W(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),Le=W(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),Ge=W(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),Ue=W(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),He=W(\"\",\"com.glide.ui.portal.RenderDashboard\"),Je=W(\"report\",\"com.glide.ui.portal.RenderJavascript\"),je=W(\"\",\"com.glide.ui.portal.RenderJavascript\"),Ve=W(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),ze=W(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),Ye=W(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),qe=W(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),We=\"widget\",Qe=\"report\",Ze=\"filter\",Xe=function Xe(e){for(var t,r,a=\"\".concat(e),o=\"\",i=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(i)||(n=\"=\",i%1);){if((r=a.charCodeAt(i+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");t=t<<8|r,o+=n.charAt(63&t>>8-i%1*8)}return o.toString()},Ke=function Ke(e,t){return void 0!==e&&void 0!==t&&e.indexOf(t)>-1},$e=function $e(e,t){if(void 0===e)return[];if(1!==t.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var r=[],a=0,o=0;o<e.length;o++)e.charAt(o)!==t||(r.push(e.substring(a,o)),a=o+1);return a<=e.length&&r.push(e.substring(a,e.length)),r};function et(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof t)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,i=arguments[1],n=0;n<o;n++){var l=a[n];if(t.call(i,l,n,a))return r?n:l}}function tt(){for(var e={},t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.forEach(function(t){Object.assign(e,t)}),e}var rt=function rt(e,t){var r=function(e){var t={};for(var r in e){var a;null!==(a=e[r])&&void 0!==a&&a.value?t[r]=e[r].value:\"string\"==typeof e[r]&&(t[r]=e[r])}return t}(t),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:r.portal_widget_sys_id,portalPreferences:r,widgetTitle:r.title,showHeader:!r.show_header||\"true\"===r.show_header,showBorder:!r.show_border||\"true\"===r.show_border,showTitle:!r.show_title||\"true\"===r.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:m,component_props:a}},at=function at(e,t){return{text:e,vars:t}},ot=function ot(e){var t=e.message,r=e.level,a=e.tooltip,o=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,d={text:t,level:r,help:a,originSysId:o,hasNewArtifact:n,table:i,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?d:it(d)},it=function it(e){var t,r,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(t=null===(r=e.text)||void 0===r?void 0:r.text)&&void 0!==t?t:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},nt=\"sys_portal\",lt=\"sys_report\",st=\"sys_choice\";function dt(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ut(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n=e.done,e},e:function e(_e3){l=!0,i=_e3},f:function f(){try{_n||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var ct=\"STDDEV\",gt=function gt(e){return Xe(\"table\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},pt=function pt(e){return Xe(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},mt=function mt(e){return Xe(e+new Date().getTime()+1e8*Math.random())},ft=function ft(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(t){return e}},vt=function vt(e){var t={sortBy:\"value\",sortByOrder:\"desc\"};return Ke(e,\"ORDERBY\")&&Ke(e,\"ASC\")&&(t.sortByOrder=\"asc\"),t},ht=function ht(e){var t=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var r,a=$e(e,\"^\"),o=[],i=dt(a);try{var n=function n(){var e=r.value;if(et(t,function(t){return e.substring(0,t.length)===t}))return\"continue\";o.push(e)};for(i.s();!(r=i.n()).done;)n()}catch(e){i.e(e)}finally{i.f()}return o.join(\"^\")},yt=function yt(e,t){var r={register:\"\",horizontal:\"\",orientation:\"vertical\"};function a(){r.horizontal=\"center\",\"left\"===e&&(r.horizontal=\"start\"),\"right\"===e&&(r.horizontal=\"end\")}return\"right\"===e?(r.register=\"right\",r.horizontal=\"center\"):\"left\"===e&&(r.register=\"left\",r.horizontal=\"center\"),\"bottom\"===t||\"center\"===t||\"middle\"===e?(r.register=\"bottom\",r.orientation=\"horizontal\",a()):\"top\"===t&&(r.orientation=\"horizontal\",r.register=\"top\",a()),r},_t=function _t(e){var t=e.colorPalette,r=e.colorType,a=e.dashboard,o=e.reportId,i=e.enableColorPerMetric,n=e.singleColor,l=e.metrics,s=e.colorList,d=e.metricMap;if(l&&d&&!a.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var u={type:\"default\"};if(t&&\"color_palette\"===r&&\"aa558ab3d7732100fa6c0c12ce610377\"!==t)u.type=\"palette\",u.palette=t;else if(\"several_colors\"===r)!s||Array.isArray(s)&&!et(s,function(e){return\"\"!==e})?u.type=\"chartColor\":a.migrationNotes.push(ot({message:at(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:at(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:o,artifactTable:lt,featureFlags:a.featureFlags}));else if(\"chart_colors\"===r)u.type=\"chartColor\";else if(\"one_color\"===r&&((null==n?void 0:n.length)>0||et(Object.keys(null!=d?d:{}),function(e){var t;return(null===(t=d[e].metricColor)||void 0===t?void 0:t.length)>0})))if(d){for(var c=i?\"colorsPerMetric\":\"singleColor\",g=[],p=0,m=Object.keys(d);p<m.length;p++){var f,v=m[p];g.push({metric:d[v].metricId,color:null!==(f=d[v].metricColor)&&void 0!==f?f:\"de699435d7033100b4964ebfae610331\"})}u.type=c,u.values=g}else{var h,y=[],_=dt(null!=l?l:[]);try{for(_.s();!(h=_.n()).done;){var b=h.value;y.push({color:n,metric:b})}}catch(e){_.e(e)}finally{_.f()}u.type=\"singleColor\",u.values=y}return u},bt=/[0-9a-f]{32}/;function wt(e){return wt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},wt(e)}var Tt=function Tt(e){return{durationFormat:At(tt(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},St=function St(e,t){var r={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=t?t:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},a=At(null!=e?e:r,r,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!a){if(void 0===t)return{numberFormat:r};if(2!==t)return{numberFormat:{customFormat:!1}}}return{numberFormat:a}},At=function At(e,t,r){var a=JSON.parse(JSON.stringify(t)),o=!1;for(var i in r)void 0!==a[r[i]]&&e[i]!==a[r[i]]&&(o=!0,a[r[i]]=e[i]);return!!o&&a},Ft=function Ft(e,t,r,a,o){var i={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},n={durationFormattingProperties:Tt,numberFormattingProperties:St};switch(o){case\"heatmap\":case\"box\":return\"glide_duration\"===r?i:n.numberFormattingProperties(void 0,t);default:if(\"glide_duration\"===r){if(\"object\"===wt(e)&&n.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return n.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(n[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return n[s](e[s][d],t)}}return\"integer\"===r&&\"COUNT\"!==a&&\"COUNT(DISTINCT\"!==a&&t?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:t,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:i},Ct=function Ct(e){return{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=e?e:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}},Rt=function Rt(e){return e.join(\":\")},It=function It(e,t,r){var a=!!et(Object.keys(e),function(e){return e===t});return a?e[t].dataSourceId:gt(r)},Ot=function Ot(e,t,r){var a=et(e,function(e){return e.id===t}),o=!1;return a&&a.filterQuery===r||(o=!0),o};function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=r){var a,o,i,n,l=[],s=!0,d=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=r[\"return\"]&&(n=r[\"return\"](),Object(n)!==n))return}finally{if(d)throw o}}return l}}(e,t)||Bt(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Nt(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=Bt(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e4){throw _e4},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n2=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n2=e.done,e},e:function e(_e5){l=!0,i=_e5},f:function f(){try{_n2||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}function Bt(e,t){if(e){if(\"string\"==typeof e)return Et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Et(e,t):void 0}}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Pt(e){switch(e){case\"line_bar\":return\"bar\";case\"step_line\":return\"step\";default:return e}}var kt=function kt(e){var t,r,a,o,i,n,l,s,d=e.table,u=e.chartTitle,c=e.colorPalette,g=e.showDataLabel,p=e.groupBy,m=e.showOthers,f=e.legendHorizontalAlignment,v=e.legendVerticalAlignment,h=e.numberOfPeriods,y=(e.showChartBorder,e.sourceType),_=e.aggregateType,b=e.otherThreshold,T=e.filter,S=e.showLegend,A=e.aggregateField,F=e.colorType,C=e.trendBy,R=e.trendInterval,I=e.xAxisTitle,O=e.xAxisShowGrid,x=e.yAxisShowGrid,N=e.yAxisTitle,B=e.yAxisFrom,E=e.yAxisTo,P=e.yAxisOpposite,k=e.formattingConfiguration,D=e.reportSource,M=e.reportId,L=e.aggregateFieldType,G=e.d,U=e.showHeader,H=e.showTitle,J=e.showBorder,j=e.indexes,V=(e.dataSetName,e.groupByMetadata),z=e.singleColor,Y=e.customConfig,q=e.startTime,W=e.endTime,Q=e.colors,Z=e.showMarkers,X=e.showDataTable,K=function(e,t){var r,a=\"value\",o=\"desc\";if(Ke(e,\"ORDERBY\")&&(a=\"name\",Ke(e,\"DESC\")||(o=\"asc\")),t&&!Ke(e,\"ORDERBY\")){var i=t.type,n=t.internalType;o=\"asc\",\"date\"===(r=i)||\"datetime\"===r||\"due_date\"===r||\"glide_date\"===r||\"glide_date_time\"===r||\"glide_precise_time\"===r?a=\"report_range\":function(e){return\"integer\"===e||\"decimal\"===e||\"numeric\"===e||\"float\"===e||\"domain_number\"===e||\"auto_increment\"===e||\"percent_complete\"===e}(i)?a=\"value\":\"choice\"===i&&\"integer\"===n?a=\"choice\":\"reference\"===i||\"choice\"===i&&\"string\"===n?a=\"name\":o=\"desc\"}return{sortBy:a,sortByOrder:o}}(T,V),$=ht(T),ee=yt(f,v),te=ft(b),re=Ft(k,parseInt(h,10),L,_),ae=gt(d),oe=mt(ae),ie={},ne=Rt([d,null==D?void 0:D.value,$]);ie[ne]={metricId:oe,dataSourceId:ae,metricColor:z};var le,se=!1;switch(R){case\"dayofweek\":s=\"dayOfWeek\",se=!0;break;case\"hour\":s=\"hourOfDay\",se=!0;break;default:s=R}if(32===R.length&&(s=R),\"metricbase\"===y){var de={period:0===(null==q?void 0:q.indexOf(\"P\"))?q.slice(1):\"between\",from:q,to:W};h=(le=Mt(de,\"1D\")).numberOfPeriods,y=w,delete re.durationFormat,delete re.dateFormat,delete re.stringFormat}var ue={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:$,id:ae,isDatabaseView:!1,label:void 0,reportSourceSysId:D,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===y||0===y.length?\"table\":y,tableOrViewName:y!==w?d:void 0,table:y===w?d:void 0}],dateFormat:\"default\",disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null===(t=le)||void 0===t?void 0:t.endTime,extensionType:\"area\",filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:(null!==(r=null==p?void 0:p.length)&&void 0!==r?r:0)>0?[{disableRanges:!1,groupBy:[{dataSource:ae,groupByField:p,isChoice:\"choice\"===(null==V?void 0:V.type),isPaBucket:!1,isRange:null==V?void 0:V.isRange,metric:oe}],hideZeroValues:!1,maxNumberOfGroups:null!=V&&V.isRange?\"ALL\":te,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==V||!V.isRange)&&\"true\"===m}]:[],headerTitle:H?u:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!0,hideYAxis2:!0,hideYAxis3:!0,hideYAxis4:!0,legendExpandToFit:!0,legendHorizontalAlignment:ee.horizontal,legendPosition:ee.register,lineStrokeWidth:\"2\",metrics:[tt({aggregateFunction:(null==_?void 0:_.length)>0?_:\"COUNT\",axisId:\"primary\",dataSource:ae,id:oe,label:void 0,transforms:Y},re)],newReporting:!1,numberOfPeriods:parseInt(h,10),period:null===(a=le)||void 0===a?void 0:a.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null===(o=le)||void 0===o?void 0:o.showAbsolutePeriod,showBorder:J,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===g,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:null,showHeader:U,showHeaderSeparator:!1,showLegend:\"true\"===S,showLegendValue:!1,showMaximumRange:null===(i=le)||void 0===i?void 0:i.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showContinuousLine:!0,enableAddZerosAtApi:se,showMarkers:\"true\"===Z,showTotalValue:null,showTrend:!1,showXGrid:\"true\"===O,showYGrid:\"true\"===x,sortBy:K.sortBy,sortByOrder:K.sortByOrder,startTime:null===(n=le)||void 0===n?void 0:n.startTime,telemetry:\"null\",trendBy:{trendByFields:[{field:C,metric:oe}],trendByFrequency:s,trendByMinuteInterval:null},wrapTitle:!1,xAxisTitle:I,yAxis0From:B,yAxis0Position:\"true\"===P?\"right\":\"left\",yAxis0Title:N,yAxis0To:E,showDataTable:\"true\"===X};A&&\"COUNT\"!==_&&\"\"!==A&&(ue.metrics[0].aggregateField=A);var ce,ge=Nt(null!==(l=j.report_layers[M])&&void 0!==l?l:[]);try{for(ge.s();!(ce=ge.n()).done;){var pe,me,fe,ve,he=ce.value,ye=ue.dataSources.map(function(e){return e.tableOrViewName}).concat(ue.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),_e=ht(he.filter);ne=Rt([d,null==D?void 0:D.value,_e,he.sys_id]);var be=It(ie,ne,he.table);ie[ne]={metricId:mt(be),dataSourceId:be,metricColor:null===(pe=he.color)||void 0===pe?void 0:pe.value};var we,Te=Ot(ue.dataSources,be,_e);if((!Ke(ye,he.table)&&!Ke(ye,he.report_source)||Te)&&ue.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:he.table,filterQuery:_e,reportSourceSysId:null===(we=he.report_source)||void 0===we?void 0:we.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:be,dataCategories:[\"trend\",\"group\",\"simple\"]}),ue.metrics.push(tt({dataSource:ie[ne].dataSourceId,id:ie[ne].metricId,aggregateFunction:he.aggregate,aggregateField:\"COUNT\"===he.aggregate&&\"\"!==he.sumfield?void 0:he.sumfield,axisId:\"primary\",label:(null===(me=he.series_name_text)||void 0===me?void 0:me.length)>0?he.series_name_text:void 0,chartType:Pt(he.type)},Ft(he.formatting_configuration,parseInt(h,10),he.aggregateFieldType,he.aggregateType))),(null===(fe=he.trend_field)||void 0===fe?void 0:fe.length)>0&&ue.trendBy.trendByFields.push({field:he.trend_field,metric:ie[ne].metricId}),(null===(ve=he.field)||void 0===ve?void 0:ve.length)>0||ue.groupBy.length>0)return void G.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the group by configuration is not supported for this metric.\"),level:1,originalArtifactSysId:M,artifactTable:lt,featureFlags:G.featureFlags}))}}catch(e){ge.e(e)}finally{ge.f()}return ue.colorConfig=_t({colorPalette:c,colorType:F,dashboard:G,reportId:M,singleColor:z,colorList:Q,enableColorPerMetric:!0,metricMap:ie}),ue},Dt=function e(t,r,a){var o,i,n,l,s,d,u=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),r?(null!==(s=t.breakdown)&&void 0!==s&&s.value&&(n=t.breakdown_level2.value),!l&&t.element&&(l=t.element_level2)):(null!==(d=t.breakdown)&&void 0!==d&&d.value&&(n=t.breakdown.value),!l&&t.element&&(l=t.element)),n&&l&&\"unmatched\"!==l){var c=t.indexes.sys_id[n][0],g=l;t.indexes.sys_id[c.dimension.value][0].facts_table===st&&bt.test(l)&&(g=t.indexes.sys_id[g][0].value);var p,m={sysId:n,elementSysIds:[g]};\"true\"===t.manual_elements&&m.elementSysIds.concat(null===(p=t.indexes.widget_elements[t.sys_id])||void 0===p?void 0:p.map(function(e){return\"unassigned\"===e.element?u:e.element})),t.elements_filter&&\"\"!==t.elements_filter&&!r&&(m.elementsFilterSysId=t.elements_filter.value,m.elementSysIds=[]),a.breakdowns.push(m)}else if(null!==(o=t.breakdown)&&void 0!==o&&o.value){var f=t.indexes.sys_id[n][0],v=t.indexes.sys_id[f.dimension.value][0];if(\"breakdown\"===t.type){var h;if(!r)if(!t.elements_filter||\"\"===t.elements_filter&&\"true\"!==t.manual_elements){if(null!==(h=t.breakdown_level2)&&void 0!==h&&h.value){if(v.facts_table===st||\"pa_buckets\"===v.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:n,elementSysIds:[u]})}}else if(t.elements_filter&&\"\"!==t.elements_filter)a.breakdowns.push({sysId:n,elementsFilterSysId:!r&&t.elements_filter.value});else if(\"true\"===t.manual_elements){var y,_,b;t.indexes.widget_elements&&0!==(null!==(y=null===(_=t.indexes.widget_elements[t.sys_id])||void 0===_?void 0:_.length)&&void 0!==y?y:0)?a.breakdowns.push({sysId:n,elementSysIds:null===(b=t.indexes.widget_elements[t.sys_id])||void 0===b?void 0:b.map(function(e){return\"unassigned\"===e.element?u:e.element})}):t.dashboard.migrationNotes.push(ot({message:at(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:t.dashboard.featureFlags}))}(0===a.breakdowns.length||r)&&(a.groupBy={groupByField:n,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(v.facts_table===st||\"pa_buckets\"===v.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:n,elementSysIds:!r&&\"\"!==t.elements_filter&&t.elements_filter?[]:[u],elementsFilterSysId:!r&&\"\"!==t.elements_filter&&t.elements_filter?t.elements_filter.value:void 0})}}return null!==(i=t.breakdown_level2)&&void 0!==i&&i.value&&!r?e(t,!0,a):a},Mt=function Mt(e,t){var r={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},a=function a(e){if(\"0\"===e||\"00000000\"===e)return null;var t=e.substring(0,4),r=e.substring(4,6),a=e.substring(6,8);return\"\".concat(t,\"-\").concat(r,\"-\").concat(a,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))r.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){r.showAbsolutePeriod=!0,r.startTime=a(null==e?void 0:e.from),r.endTime=a(null==e?void 0:e.to);var o=new Date;new Date(r.startTime)>o&&!r.endTime?r.endTime=r.startTime:r.startTime&&!r.endTime?r.useCurrentDateForEnd=!0:!r.startTime&&r.endTime&&(r.showMaximumRange=!0,r.endTime=null)}else{r.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var i=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),n=et(Object.keys(x),function(e){return x[e]===i},!0),l=et(Object.keys(x),function(e){return x[e]===t},!0);r.period=n<l?t:i}return r};function Lt(e,t){if(null!=t&&t.value&&\"column\"===e)return\"vertical_bar\";switch(e){case\"column_total\":case\"column\":case\"stacked\":return\"bar\";default:return e}}function Gt(e){var t=et(Object.keys(T),function(t){return T[t]===parseInt(e,10)});switch(T[t]){case T.DAY:return{frequency:S,frequencyInterval:t,dateRange:x.HOURLY};case T.WEEK:case T.WEEK2DATE:case T.WEEK_PLUS:return{frequency:A,frequencyInterval:t,dateRange:x.MONTHLY};case T.MONTH:case T.MONTH2DATE:case T.MONTH_PLUS:return{frequency:F,frequencyInterval:t,dateRange:x.MONTHLY};case T.QUARTER:case T.QUARTER2DATE:case T.QUARTER_PLUS:return{frequency:C,frequencyInterval:t,dateRange:x.YEARLY};case T.FQ:case T.FQ2DATE:case T.FQ_PLUS:return{frequency:R,frequencyInterval:t,dateRange:x.YEARLY};case T.YEAR:case T.YEAR2DATE:case T.YEAR_PLUS:return{frequency:I,frequencyInterval:t,dateRange:x.YEARLY};case T.FY:case T.FY2DATE:case T.FY_PLUS:return{frequency:O,frequencyInterval:t,dateRange:x.YEARLY};default:return{frequency:S,frequencyInterval:\"\",dateRange:x.YEARLY}}}var Ut=function Ut(e){e.colorType;var t,r,a,o,i=e.colorPalette,n=e.chartColor,l=e.showDataLabel,s=(e.showLegend,e.showTotal),d=e.yAxisTitle,u=e.yAxisFrom,c=e.yAxisTo,g=e.sysId,p=e.indicator,m=(e.element,e.breakdown),f=e.aggregate,v=e.sort_direction,h=e.sort_on,y=(e.breakdown_level2,e.color_scheme,e.description),_=e.name,b=e.showTitle,w=e.showHeader,T=e.showBorder,S=e.d,A=e.indexes,F=e.showTarget,C=e.showThresholds,R=e.showTrend,I=e.showConfidence,O=e.showForecast,x=e.showComments,N=e.chartType,B=e.label,E=e.followElement,P=h,k=v,D=m.value,M=null===(t=A.sys_id[D])||void 0===t?void 0:t[0],L=null===(r=A.sys_id[null==M||null===(a=M.dimension)||void 0===a?void 0:a.value])||void 0===r?void 0:r[0],G=null==L?void 0:L.facts_table,U=G===st,H=\"pa_buckets\"===G;\"default\"===h&&(P=U?\"choice\":H?\"bucket\":\"name\"),-1===[\"name\",\"value\",\"default\"].indexOf(h)&&(P=\"value\",k=\"desc\",S.migrationNotes.push(ot({message:at(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:g,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:S.featureFlags})));var J=Dt(e);if(J.doMigration){var j,V,z=10;if(null!=f&&f.value){var Y=Gt(A.sys_id[null==f?void 0:f.value][0].interval);z=Y.frequency,j=Y.frequencyInterval,V=Y.dateRange}var q=Mt(e.timePeriod,V),W={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",colorConfig:{type:\"default\"},configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[],dateFormat:\"default\",description:y,disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null==q?void 0:q.endTime,extensionType:Lt(N,m),filterConfigurations:\"@state.parFilters\",followFilters:!0,showFilterAsSeparateSeries:\"separate\"===e.multiple_elements_view,groupBy:[],headerTitle:b?_:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!1,hideYAxis2:!1,hideYAxis3:!1,hideYAxis4:!1,legendExpandToFit:!0,legendHorizontalAlignment:\"center\",legendPosition:\"bottom\",lineStrokeWidth:\"2\",metrics:[],filterPerMetric:[],newReporting:!1,numberOfPeriods:null==q?void 0:q.numberOfPeriods,period:null==q?void 0:q.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null==q?void 0:q.showAbsolutePeriod,useCurrentDateForEnd:null==q?void 0:q.useCurrentDateForEnd,showBorder:T,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:x,showConfidenceBand:I,showDataLabels:l,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:O,showForecastRange:!1,showGapPercentage:null,showHeader:w,showHeaderSeparator:!1,showLegend:!0,showLegendValue:!1,showMaximumRange:null==q?void 0:q.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:F,showThreshold:C,showTotalAggregate:!1,showTotalValue:s,showTrend:R,showXGrid:!0,showYGrid:!0,showContinuousLine:!1,sortBy:P,sortByOrder:k,startTime:null==q?void 0:q.startTime,telemetry:\"null\",trendBy:{},wrapTitle:!1,yAxis0Title:d,yAxis0To:c,yAxis0From:u,yAxisStyle:\"default\",allowChangeDateRange:!1,showDateRangeByDefault:!1},Q=pt(null==p?void 0:p.value),Z=mt(Q),X=A.sys_id[null==p?void 0:p.value][0],K={},$={metricId:Z,dataSourceId:Q};K[\"\".concat(null==p?void 0:p.value,\":\").concat(JSON.stringify(J.breakdowns))]=$,W.dataSources=[{allowRealTime:\"1\"===X.type,allowTotalValue:\"1\"===X.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:Q,indicatorType:X.type,isScriptedIndicator:!1,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:J.breakdowns,indicator:null==p?void 0:p.value}}],J.groupBy&&(J.groupBy.dataSource=Q,J.groupBy.metric=Z,J.groupBy.isChoice=U,J.groupBy.isPaBucket=H,W.groupBy=[{disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[J.groupBy],hideZeroValues:!1}]),W.metrics=[{dataSource:Q,id:Z,aggregateIndicator:null!==(o=null==f?void 0:f.value)&&void 0!==o?o:\"\",frequency:z,frequencyInterval:j,label:B,numberFormat:Ct(parseInt(X.precision,10)),chartType:Lt(N),axisId:\"primary\"}],W.filterPerMetric=[{metricId:Z,value:E}],\"column\"==N&&null!=m&&m.value?W.dataLabelPosition=\"middle\":W.trendBy={trendByFields:[{field:\"anything\",metric:Z}],trendByFrequency:\"date\",trendByMinuteInterval:null};var ee=function(e,t,r,a,o,i,n){var l,s=null!==(l=e.widget_indicators[t])&&void 0!==l?l:[];s.sort(function(e,t){return parseInt(e.order,10)-parseInt(t.order,10)});try{var d,u=Nt(s);try{for(u.s();!(d=u.n()).done;){var c,g,p=d.value;if(\"true\"!==p.follow_element){var m=null===(c=p.indicator)||void 0===c?void 0:c.value;e.sys_id[m][0].name,i.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the additional indicators follow elements feature is not supported.\"),level:1,originalArtifactSysId:t,artifactTable:null===(g=e.sys_id[t][0])||void 0===g?void 0:g.sys_table_name,featureFlags:i.featureFlags}))}}}catch(e){u.e(e)}finally{u.f()}}catch(e){console.error(\"ERROR: Error occurred while handling widget indicators for widget: \".concat(n||t))}var f,v=!1,h={},y=Nt(s);try{for(y.s();!(f=y.n()).done;){var _,b,w,T=f.value,S=Dt({breakdown:T.breakdown,breakdown_level2:T.breakdown_level2,element:T.element,element_level2:T.element_level2,indexes:e,elements_filter:T.elements_filter,manual_elements:T.manual_elements}),A=void 0,F=void 0,C=e.sys_id[null===(_=T.indicator)||void 0===_?void 0:_.value][0];if(o[\"\".concat(null===(b=T.indicator)||void 0===b?void 0:b.value,\":\").concat(JSON.stringify(S.breakdowns))]){var R,I;A=o[\"\".concat(null===(R=T.indicator)||void 0===R?void 0:R.value,\":\").concat(JSON.stringify(S.breakdowns))].dataSourceId,F=o[\"\".concat(null===(I=T.indicator)||void 0===I?void 0:I.value,\":\").concat(JSON.stringify(S.breakdowns))].metricId}else{var O,x,N,B,E;A=pt(null===(O=T.indicator)||void 0===O?void 0:O.value),F=mt(A),o[null===(x=T.indicator)||void 0===x?void 0:x.value]={metricId:F,dataSourceId:A},r.dataSources.push({allowRealTime:\"1\"===C.type,allowTotalValue:\"1\"===C.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:A,indicatorType:C.type,isScriptedIndicator:!1,label:C.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:S.breakdowns,indicator:null===(N=T.indicator)||void 0===N?void 0:N.value}});var P=\"primary\";\"true\"===T.second_y_axis&&(r.yAxis1Title=T.label,r.yAxis1Position=\"right\",r.yAxis1From=\"\",r.yAxis1To=\"\",P=\"axis1\");var k=10,D=void 0,M=null!==(B=null===(E=T.aggregate)||void 0===E?void 0:E.value)&&void 0!==B?B:\"\";if(M){var L,G=Gt((null===(L=e.sys_id[M])||void 0===L?void 0:L[0]).interval);k=G.frequency,D=G.frequencyInterval}var U={dataSource:A,id:F,aggregateIndicator:M,frequency:k,frequencyInterval:D,label:T.label,numberFormat:Ct(parseInt(C.precision,10)),chartType:Lt(T.chart_type),axisId:P},H={field:\"anything\",metric:F};\"stacked\"===T.chart_type&&(v=!0),r.metrics.push(U),r.filterPerMetric.push({metricId:F,value:\"true\"===(null==T?void 0:T.follow_element)}),r.trendBy.trendByFields.push(H)}S.groupBy&&(S.groupBy.dataSource=A,S.groupBy.metric=F,r.groupBy.push({disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[S.groupBy],hideZeroValues:!1})),\"\"!==T.color&&null!==(w=T.color)&&void 0!==w&&w.value&&(h[F]=T.color.value)}}catch(e){y.e(e)}finally{y.f()}return(r.metrics.length>1||r.groupBy.length>0)&&(r.showTarget=!1,r.showTrend=!1,r.showConfidenceBand=!1,r.showThreshold=!1,r.showComment=!1),{hasStackedColumn:v,widgetColors:h}}(A,g,W,0,K,S,_),te=ee.hasStackedColumn,re=ee.widgetColors;if(W.filterPerMetric.some(function(e){return null==e?void 0:e.value})||(W.followFilters=!1,W.showFilterIcon=!1),te&&(W.extensionType=\"bar\",W.chartVariation=\"stacked\"),i&&i.length>0&&0===Object.keys(re).length)W.colorConfig={type:\"palette\",palette:i};else if(W.metrics.length>1){var ae,oe;ae=i&&i.length>0?xt(null!==(oe=A.sys_id[i])&&void 0!==oe?oe:[],1)[0]:xt(A.sys_id[\"68d08c72d700210096614251ce61039e\"],1)[0];for(var ie=[],ne=0;ne<32;ne++){var le=\"color_\".concat(ne+1);if(\"\"===ae[le])break;ie.push(ae[le].value)}var se=0;W.colorConfig={type:\"colorsPerMetric\",values:W.metrics.map(function(e){var t;return e.id===Z&&null!=n&&n.value?t=n.value:re[e.id]?t=re[e.id]:(t=ie[se%ie.length],se+=1),{metric:e.id,color:t}})}}else n&&1===W.metrics.length&&(W.colorConfig={type:\"singleColor\",values:[{color:n.value,metric:Z}]});return W}S.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:g,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:S.featureFlags}))},Ht=function Ht(e){var t=Ut(e);if(t)return t.chartVariation=e.stacked?\"stacked\":\"side-by-side\",t},Jt=function Jt(e){switch(e.extensionType){case\"trend\":case\"bar\":return l;case\"line\":return s;case\"area\":return n;case\"step\":return u;case\"spline\":return d;case\"vertical_bar\":return c}},jt=function jt(e,t,r){var a,o=\"true\"===(null==r||null===(a=r.real_time)||void 0===a?void 0:a.value),i=t.useRelativeScoreTime!==o||t.showScoreUpdateTime!==o||t.enableRealTimeUpdate!==o;return t.useRelativeScoreTime=o,t.showScoreUpdateTime=o,t.enableRealTimeUpdate=o,i?tt(t):t},Vt=function Vt(e,r,a){var o,i,n,l;if(null!=r&&r._override&&(null!==(o=null==r||null===(i=r._override)||void 0===i||null===(n=i.macroponent)||void 0===n?void 0:n.value)&&void 0!==o?o:null==r||null===(l=r._override)||void 0===l?void 0:l.macroponent)!==t)return r;var s=r.migrationRaw.component_props;return r.migrationRaw.component_props=jt(e,r.migrationRaw.component_props,a),s===r.migrationRaw.component_props||(r.widget_type=\"unlinked_stored_component\",delete r.migrationRaw.stored_component_sys_id,e.migrationNotes.push(ot({message:at(\"This visualization has been copied from the library to retain the Real time update functionality on this dashboard.\"),level:2,tooltip:at(\"Changes made to this visualization on this dashboard, are not propagated to the library.\"),originalArtifactSysId:a.portal_section,artifactTable:nt,debugInfo:JSON.stringify({dashboardWidget:r}),featureFlags:e.featureFlags}))),r},zt=function zt(t,r){var a={message:at(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:t.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&t.migrationNotes.push(ot({message:at(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:t.featureFlags})),-1===t.migrationNotes.indexOf(ot(a))&&t.migrationNotes.push(ot(a)),{component_id:e,component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},Yt=function Yt(e,t,r,a){var o,i,n,l;if(e.migratingFromJava&&a)return rt(t,a);var s=\"\";null!=t&&t.type?s=t.type:null!=a&&null!==(o=a.type)&&void 0!==o&&o.value?s=null==a||null===(i=a.type)||void 0===i?void 0:i.value:null!=a&&null!==(n=a.renderer)&&void 0!==n&&n.value&&(s=a.renderer.value);var d=null==a||null===(l=a.title)||void 0===l?void 0:l.value;return e.migrationNotes.push(ot({message:at(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),zt(e,{static_content:q(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(s,\": \").concat(d,\"</span> widget.\"))})},qt=function qt(e,t,r,a){var o,i,n;return e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"<b>Unsupported migration: \".concat(null!==(o=null!==(i=t.name)&&void 0!==i?i:t.sys_name)&&void 0!==o?o:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=t&&t.type?t.type:null==a||null===(n=a.type)||void 0===n?void 0:n.value,\"</span> report.\"))})},Wt=function Wt(e,t,r,a){var o,i,n;return e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"<b>Unsupported migration: \".concat(null!==(o=null!==(i=t.name)&&void 0!==i?i:t.sys_name)&&void 0!==o?o:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=t&&t.type?t.type:null==a||null===(n=a.type)||void 0===n?void 0:n.value,\"</span> widget.\"))})},Qt=function Qt(e){return function(t,r,a,o){var i;return i=e===Ze?function(){for(var e in de)if(de[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type,i?(t.migrationNotes.push(ot({message:at(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:t.featureFlags})),e===We||e===Ze?Wt(t,tt(r,{type:i}),0,o):qt(t,r,0,o)):Yt(t,r,0,o)}},Zt=function Zt(e,t,r){var a,o=null==t||null===(a=t.widget_navigation)||void 0===a?void 0:a[e.sys_id];if(o){var i=o.filter(function(e){return\"true\"===e.active}).sort(function(e,t){return\"\"==e.order&&\"\"!=t.order?-1:\"\"==t.order&&\"\"!=e.order?1:e.order===t.order?e.label.localeCompare(t.label):e.order-t.order});o=i[0],Object.assign(r.component_props,{chartInteractionAction:\"goToUrl\",chartInteractionActionGoToURLInput:o.value,chartInteractionActionGoToURLPageName:o.label})}},Xt=function Xt(e,t){var r;return!e.migratingSingleArtifact&&\"true\"===((null==t||null===(r=t.publisher_widget)||void 0===r?void 0:r.value)||\"false\")},Kt=function Kt(e,t,r){return Xt(e,r)?(t.chartInteractionAction=\"applyAsFilter\",t):t},$t=function $t(e,t,i){return Xt(e,i)&&Ke([r,a,o],t.migrationRaw.component_id)?(t.migrationRaw.component_props=Kt(e,t.migrationRaw.component_props,i),t.widget_type=\"unlinked_stored_component\",delete t.migrationRaw.stored_component_sys_id,e.migrationNotes.push(ot({message:at(\"This visualization has been copied from the library to retain the Act as filter functionality on this dashboard.\"),level:2,tooltip:at(\"Changes made to this visualization on this dashboard, are not propagated to the library.\"),originalArtifactSysId:i.portal_section,artifactTable:nt,debugInfo:JSON.stringify({dashboardWidget:t}),featureFlags:e.featureFlags})),t):t};function er(e){return er=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},er(e)}var tr=function tr(e){return\"<p>\".concat(\"object\"===er(e)&&e.text?e.debugInfo?\"\".concat(e.text,\" ( \").concat(e.debugInfo,\" )\"):e.text:e,\"</p>\")},rr=function rr(e,t){var r=tt({x:0,y:0,h:500,w:500,tabindex:t},zt(e,{static_content:e.migrationNotes.map(tr).join(\"\")}));return{tab:{name:\"Log Info\",order:t,layout:[r]},widgets:[{migrationRaw:r}],page:{}}},ar=at(\"Dashboard migrated without the \\\"Restrict to roles\\\" configuration. Update the sharing information on the migrated dashboard.\"),or=at(\"Dashboard migrated without the dashboard \\\"Group\\\" configuration because this functionality is not supported.\"),ir=at(\"This visualization is migrated without header and title custom colors because this functionality is not supported.\");function nr(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lr(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e6){throw _e6},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n3=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n3=e.done,e},e:function e(_e7){l=!0,i=_e7},f:function f(){try{_n3||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var sr=function sr(e,t,r,a,o,i,n,l){return{type:\"table\",encodedQuery:null!=i?i:void 0,table:{id:e,label:null!=t?t:void 0,hierarchy:\"true\"===n||!0===n||void 0},field:r?{id:r,type:null!=o?o:void 0,label:null!=a?a:void 0,reference:null!=l?l:\"\"}:void 0}},dr=function dr(e,t){var r=e.breakdownSysId,a=e.breakdownSourceName,o=e.isChoice,i=e.type,n=e.factsTable,l=e.field,s=e.target;return{type:\"pa\",breakdown:{sysId:r,breakdownSourceName:null!=a?a:void 0,isOfChoiceType:void 0!==o?o:void 0,type:null!=i?i:void 0,factsTable:null!=n?n:void 0,field:null!=l?l:void 0,targetTable:null!=s?s:void 0}}};function ur(e){switch(e){case\"1\":return\"selectors\";case\"4\":return\"typeahead\";default:return\"pill\"}}var cr=function cr(e,t,r){var a,o,i,n,l,s,d,u,c,g,p,m,f,v,h,y=e.sys_id,_=e.table,b=e.display_field,w=e.name,T=(e.type,e.ui_control_type),S=(e.boolean_table,e.boolean_field,e.conditions),A=(e.cascading_filter_reference_field,e.parent),F=e.publisher_reference,C=arguments.length>3&&void 0!==arguments[3]&&arguments[3];A?(n=\"reference\"===(null===(s=r.filter_cascading[A.value])||void 0===s||null===(d=s[0])||void 0===d?void 0:d.displayFieldType)?b:void 0,l=null===(u=r.filter_cascading[A.value])||void 0===u||null===(c=u[0])||void 0===c?void 0:c.displayFieldReference):(n=\"reference\"===(null===(g=r.filter_reference)||void 0===g||null===(p=g[null==F?void 0:F.value])||void 0===p||null===(m=p[0])||void 0===m?void 0:m.displayFieldType)?b:void 0,l=null===(f=r.filter_cascading[A.value])||void 0===f||null===(v=f[0])||void 0===v?void 0:v.displayFieldReference),h=n&&l?sr(l,void 0,void 0,void 0,\"reference\",S):sr(_,void 0,n,void 0,\"reference\",S);var R=null!==(a=(null!==(o=null===(i=r.filter_cascading_target)||void 0===i?void 0:i[y])&&void 0!==o?o:[]).map(function(e){return sr(null==e?void 0:e.target_table,void 0,null==e?void 0:e.filter_field,void 0,\"reference\",void 0,C)},w,\"reference\"))&&void 0!==a?a:[];1===R.length&&(R[0].field.reference=_);var I=function(e,t,r,a){var o,i;return e?\"reference\"===(null===(o=a.filter_cascading[e])||void 0===o||null===(i=o[0])||void 0===i?void 0:i.displayFieldType)?{filterM2MConfigurations:[{filterId:e.concat(\"-filter\"),following:!0,filterM2MTable:a.filter_cascading[e][0].table,fromField:a.filter_cascading[e][0].cascading_filter_reference_field,toField:r}]}:{filtersFollowing:[e.concat(\"-filter\")],filterM2MConfigurations:[]}:{}}(null==A?void 0:A.value,0,b,r);return{filterId:\"\".concat(y,\"-filter\"),filterName:w,filterComponentType:\"singleselect\",isShowSelectedValueInPill:!0,datasource:h,targets:R,defaultSelectedItems:[],dateFilterView:\"calendar-reldates\",sort:\"ASC\",enableClearFilter:!0,maxElements:500,filterElementLayout:\"vertical\",filterElementType:ur(T),selectedElements:[],cascadingConfig:I}},gr=function gr(e,t,r){var a=e.name,o=e.sys_id;return{filterId:\"\".concat(o,\"-filter\"),filterName:a,isShowSelectedValueInPill:!0,sort:\"ASC\",enableClearFilter:!0,enableResetToDefault:!0,maxElements:500,filterElementLayout:\"vertical\",datasource:\"{}\"}};function pr(e){switch(e){case\"135_Current hour@javascript:gs.hoursAgoStart(0)@javascript:gs.hoursAgoEnd(0)\":return{label:\"Current hour\",range:\"SN_DYNAMIC_DATERANGE__CURRENT_HOUR\"};case\"150_Current minute@javascript:gs.minutesAgoStart(0)@javascript:gs.minutesAgoEnd(0)\":return{label:\"Current minute\",range:\"SN_DYNAMIC_DATERANGE__CURRENT_MINUTE\"};case\"060_Last 12 months@javascript:gs.monthsAgoStart(12)@javascript:gs.endOfThisMonth()\":return{label:\"Last 12 months\",range:\"SN_DYNAMIC_DATERANGE__LAST_12_MONTH\"};case\"130_Last 120 days@javascript:gs.daysAgoStart(120)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 120 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_120_DAYS\"};case\"160_Last 15 minutes@javascript:gs.minutesAgoStart(15)@javascript:gs.minutesAgoEnd(0)\":return{label:\"Last 15 minutes\",range:\"SN_DYNAMIC_DATERANGE__LAST_15_MINUTES\"};case\"145_Last 2 hours@javascript:gs.hoursAgo(2)@javascript:gs.hoursAgo(0)\":return{label:\"Last 2 hours\",range:\"SN_DYNAMIC_DATERANGE__LAST_2_HOURS\"};case\"075_Last 2 quarters@javascript:gs.quartersAgoStart(1)@javascript:gs.endOfThisQuarter()\":return{label:\"Last 2 quarters\",range:\"SN_DYNAMIC_DATERANGE__LAST_2_QUARTERS\"};case\"105_Last 2 years@javascript:gs.beginningOfLastYear()@javascript:gs.endOfThisYear()\":return{label:\"Last 2 years\",range:\"SN_DYNAMIC_DATERANGE__LAST_2_YEARS\"};case\"045_Last 3 months@javascript:gs.monthsAgoStart(3)@javascript:gs.endOfThisMonth()\":return{label:\"Last 3 months\",range:\"SN_DYNAMIC_DATERANGE__LAST_3_MONTH\"};case\"115_Last 30 days@javascript:gs.daysAgoStart(30)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 30 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_30_DAYS\"};case\"165_Last 30 minutes@javascript:gs.minutesAgoStart(30)@javascript:gs.minutesAgoEnd(0)\":return{label:\"Last 30 minutes\",range:\"SN_DYNAMIC_DATERANGE__LAST_30_MINUTES\"};case\"170_Last 45 minutes@javascript:gs.minutesAgoStart(45)@javascript:gs.minutesAgoEnd(0)\":return{label:\"Last 45 minutes\",range:\"SN_DYNAMIC_DATERANGE__LAST_45_MINUTES\"};case\"050_Last 6 months@javascript:gs.monthsAgoStart(6)@javascript:gs.endOfThisMonth()\":return{label:\"Last 6 months\",range:\"SN_DYNAMIC_DATERANGE__LAST_6_MONTH\"};case\"120_Last 60 days@javascript:gs.daysAgoStart(60)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 60 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_60_DAYS\"};case\"110_Last 7 days@javascript:gs.daysAgoStart(7)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 7 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_7_DAYS\"};case\"055_Last 9 months@javascript:gs.monthsAgoStart(9)@javascript:gs.endOfThisMonth()\":return{label:\"Last 9 months\",range:\"SN_DYNAMIC_DATERANGE__LAST_9_MONTH\"};case\"125_Last 90 days@javascript:gs.daysAgoStart(90)@javascript:gs.daysAgoEnd(0)\":return{label:\"Last 90 days\",range:\"SN_DYNAMIC_DATERANGE__LAST_90_DAYS\"};case\"140_Last hour@javascript:gs.hoursAgoStart(1)@javascript:gs.hoursAgoEnd(1)\":return{label:\"Last hour\",range:\"SN_DYNAMIC_DATERANGE__LAST_HOUR\"};case\"155_Last minute@javascript:gs.minutesAgoStart(1)@javascript:gs.minutesAgoEnd(1)\":return{label:\"Last minute\",range:\"SN_DYNAMIC_DATERANGE__LAST_MINUTE\"};case\"035_Last month@javascript:gs.beginningOfLastMonth()@javascript:gs.endOfLastMonth()\":return{label:\"Last month\",range:\"SN_DYNAMIC_DATERANGE__LAST_MONTH\"};case\"070_Last quarter@javascript:gs.quartersAgoStart(1)@javascript:gs.quartersAgoEnd(1)\":return{label:\"Last quarter\",range:\"SN_DYNAMIC_DATERANGE__LAST_QUARTER\"};case\"020_Last week@javascript:gs.beginningOfLastWeek()@javascript:gs.endOfLastWeek()\":return{label:\"Last week\",range:\"SN_DYNAMIC_DATERANGE__LAST_WEEK\"};case\"100_Last year@javascript:gs.beginningOfLastYear()@javascript:gs.endOfLastYear()\":return{label:\"Last year\",range:\"SN_DYNAMIC_DATERANGE__LAST_YEAR\"};case\"085_Next 2 quarters@javascript:gs.quartersAgoStart(-1)@javascript:gs.quartersAgoEnd(-2)\":return{label:\"Next 2 quarters\",range:\"SN_DYNAMIC_DATERANGE__NEXT_2_QUARTERS\"};case\"040_Next month@javascript:gs.beginningOfNextMonth()@javascript:gs.endOfNextMonth()\":return{label:\"Next month\",range:\"SN_DYNAMIC_DATERANGE__NEXT_MONTH\"};case\"080_Next quarter@javascript:gs.quartersAgoStart(-1)@javascript:gs.quartersAgoEnd(-1)\":return{label:\"Next quarter\",range:\"SN_DYNAMIC_DATERANGE__NEXT_QUARTER\"};case\"025_Next week@javascript:gs.beginningOfNextWeek()@javascript:gs.endOfNextWeek()\":return{label:\"Next week\",range:\"SN_DYNAMIC_DATERANGE__NEXT_WEEK\"};case\"095_Next year@javascript:gs.beginningOfNextYear()@javascript:gs.endOfNextYear()\":return{label:\"Next year\",range:\"SN_DYNAMIC_DATERANGE__NEXT_YEAR\"};case\"175_One year ago@javascript:gs.monthsAgo(12)@javascript:gs.endOfThisMonth()\":return{label:\"One year ago\",range:\"SN_DYNAMIC_DATERANGE__ONE_YEAR_AGO\"};case\"030_This month@javascript:gs.beginningOfThisMonth()@javascript:gs.endOfThisMonth()\":return{label:\"This month\",range:\"SN_DYNAMIC_DATERANGE__THIS_MONTH\"};case\"065_This quarter@javascript:gs.beginningOfThisQuarter()@javascript:gs.endOfThisQuarter()\":return{label:\"This quarter\",range:\"SN_DYNAMIC_DATERANGE__THIS_QUARTER\"};case\"015_This week@javascript:gs.beginningOfThisWeek()@javascript:gs.endOfThisWeek()\":return{label:\"This week\",range:\"SN_DYNAMIC_DATERANGE__THIS_WEEK\"};case\"090_This year@javascript:gs.beginningOfThisYear()@javascript:gs.endOfThisYear()\":return{label:\"This year\",range:\"SN_DYNAMIC_DATERANGE__THIS_YEAR\"};case\"001_Today@javascript:gs.daysAgoStart(0)@javascript:gs.daysAgoEnd(0)\":return{label:\"Today\",range:\"SN_DYNAMIC_DATERANGE__TODAY\"};case\"010_Tomorrow@javascript:gs.daysAgoStart(-1)@javascript:gs.daysAgoEnd(-1)\":return{label:\"Tomorrow\",range:\"SN_DYNAMIC_DATERANGE__TOMORROW\"};case\"005_Yesterday@javascript:gs.daysAgoStart(1)@javascript:gs.daysAgoEnd(1)\":return{label:\"Yesterday\",range:\"SN_DYNAMIC_DATERANGE__YESTERDAY\"}}}function mr(e,t,r,a,o){switch(e){case 4:case\"4\":case 3:case\"3\":!function(e,t,r,a){e.filterComponentType=\"multiselect\",e.filterElementType=\"pill\"}(t);break;case 1:case\"1\":!function(e,t,r,a){e.filterComponentType=\"singleselect\",e.filterElementType=\"selectors\"}(t);break;case 2:case\"2\":!function(e,t,r,a){e.filterComponentType=\"singleselect\",e.filterElementType=\"pill\"}(t)}}function fr(e,t){for(var r in t){var a=t[r];if(Array.isArray(a)&&a.some(function(t){return t.breakdown.value===e.breakdownSysId}))return!0}return!1}var vr=function vr(e,t,r,a){var o=function(e,t,r){switch(e.type){case 5:case\"5\":return function(e,t,r){var a=e.boolean_table,o=e.default_boolean_field,i=e.boolean_field,n=e.allow_extended_table,l=gr(e);return l.filterComponentType=\"boolean\",!0!==o&&!1!==o&&\"true\"!==o&&\"false\"!==o||(l.defaultBoolean=o.toString()),l.targets=[sr(a,void 0,i,void 0,\"boolean\",void 0,n)],l}(e);case 3:case\"3\":return function(e,t,r){var a=e.default_date_filter,o=e.date_filter,i=e.allow_extended_table,n=e.sys_id,l=gr(e);if(l.dateFilterView=\"calendar-reldates\",l.filterComponentType=\"date\",r.filter_reference){var s=r.filter_reference[n];if((null==s?void 0:s.length)>0){var d,u=[],c=nr(s);try{for(c.s();!(d=c.n()).done;){var g=d.value,p=g.date_field,m=g.date_table,f=g.fieldType;u.push(sr(m,void 0,p,void 0,null!=f?f:\"glide_date_time\",void 0,i))}}catch(e){c.e(e)}finally{c.f()}l.targets=u}}else console.error(\"No filter_reference index found when migrating date filters\"),t.migrationNotes.push(ot({message:at(\"The date filter cannot be migrated because we cannot find the target configuration. It can be configured manually in a new filter.\"),level:2,originalArtifactSysId:n,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}));function v(e){var t,r=[],a=nr(e);try{for(a.s();!(t=a.n()).done;){var o=pr(t.value);o&&r.push(o)}}catch(e){a.e(e)}finally{a.f()}return r}if((null==a?void 0:a.length)>0){var h=$e(a,\",\");l.defaultSelectedDateRange=v(h)[0],h.length>1&&t.migrationNotes.push(ot({message:at(\"The multiple default date values on interactive filters cannot be migrated. Only one default value is selected.\"),level:2,originalArtifactSysId:n,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}))}else l.defaultSelectedDateRange={range:\"\",label:\"Custom range\"};if((null==o?void 0:o.length)>0){var y=$e(o,\",\");l.allowedDateRanges=v(y)}return l}(e,t,r);case 1:case\"1\":return function(e,t,r){var a=e.source_field,o=e.source_table,i=e.allow_extended_table,n=e.sys_id,l=e.ui_control_type,s=e.exclusion_choice_list,d=e.default_choice,u=gr(e);if(u.datasource=sr(o,void 0,a,void 0,\"choice\"),u.targets=[sr(o,void 0,a,void 0,\"choice\",void 0,i)],null!=r&&r.choices_by_table){if((null==s?void 0:s.length)>0){var c,g,p,m,f=null==r||null===(c=r.choices_by_table[null!==(g=null===(p=e.sourceFieldMetadata)||void 0===p?void 0:p.table)&&void 0!==g?g:o])||void 0===c?void 0:c.filter(function(t){var r,o;return(null==t?void 0:t.element)===(null!==(r=null===(o=e.sourceFieldMetadata)||void 0===o?void 0:o.field)&&void 0!==r?r:a)}),v=$e(s,\",\"),h=[],y=nr(f);try{for(y.s();!(m=y.n()).done;){var _=m.value;null!=_&&_.value&&h.push({value:_.value,selected:!Ke(v,_.sys_id)})}}catch(e){y.e(e)}finally{y.f()}u.datasource.choices=h}if((null==d?void 0:d.length)>0){var b,w,T,S,A=$e(d,\",\"),F=[],C=nr(null==r||null===(b=r.choices_by_table[null!==(w=null===(T=e.sourceFieldMetadata)||void 0===T?void 0:T.table)&&void 0!==w?w:o])||void 0===b?void 0:b.filter(function(e){return Ke(A,null==e?void 0:e.sys_id)}));try{for(C.s();!(S=C.n()).done;){var R=S.value;F.push({id:R.value,label:R.label,available:!0,unknown:!1,empty:!1})}}catch(e){C.e(e)}finally{C.f()}u.defaultSelectedItems=F}}else console.error(\"No choices_by_table index found when migrating choice filters\"),(null==s?void 0:s.length)>0&&t.migrationNotes.push(ot({message:at(\"This interactive filter is migrated without the exclusion list information because we are unable to migrate its configuration.\"),level:1,originalArtifactSysId:n,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags})),(null==d?void 0:d.length)>0&&t.migrationNotes.push(ot({message:at(\"This interactive filter is migrated without the default choice list information because we are unable to migrate its configuration.\"),level:1,originalArtifactSysId:n,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}));return mr(l,u),u}(e,t,r);case 2:case\"2\":return function(e,t,r){var a=e.reference_table,o=e.allow_extended_table,i=e.reference_conditions,n=e.sys_id,l=e.ui_control_type,s=e.default_reference_field_value,d=gr(e);if(d.datasource=sr(a,void 0,void 0,void 0,void 0,i||void 0),d.filterComponentType=\"multiselect\",d.filterElementType=\"pill\",r.filter_reference){var u=r.filter_reference[n];if((null==u?void 0:u.length)>0){var c,g=[],p=nr(u);try{for(p.s();!(c=p.n()).done;){var m=c.value,f=m.reference_table,v=m.reference_field;g.push(sr(f,void 0,v,void 0,\"reference\",void 0,o,a))}}catch(e){p.e(e)}finally{p.f()}d.targets=g}else{var h=sr(a,void 0,void 0,void 0,\"reference\",void 0,o,void 0);h.primaryKey=\"sys_id\",d.targets=[h]}}else console.error(\"No filter_reference index found when migrating reference filters for widget\",e.name?e.name:n),t.migrationNotes.push(ot({message:at(\"This interactive filter cannot be migrated. It can be configured manually in a new filter.\"),level:0,originalArtifactSysId:n,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}));if((null==s?void 0:s.length)>0){var y,_=[],b=nr($e(s,\",\"));try{for(b.s();!(y=b.n()).done;){var w=y.value,T=r.sys_id[w],S=void 0;T&&T[0].sys_name&&(S=T[0].sys_name),_.push({id:w,available:!0,unknown:!1,empty:!1,label:S})}}catch(e){b.e(e)}finally{b.f()}d.defaultSelectedItems=_}return mr(\"1\"==l?\"2\":l,d),d}(e,t,r)}}(t||{},e,r);return o?{component_id:i,component_props:o}:Qt(Ze)(e,t,r,a)},hr=function hr(e,t){var r=e.table,a=e.chartTitle,o=e.colorPalette,i=e.showDataLabel,n=e.groupBy,l=e.showOthers,s=e.legendHorizontalAlignment,d=e.legendVerticalAlignment,u=e.numberOfPeriods,c=(e.showChartBorder,e.sourceType),g=e.aggregateType,p=e.otherThreshold,m=e.filter,f=e.showLegend,v=e.aggregateField,h=e.colorType,y=e.formattingConfiguration,_=e.reportId,b=e.reportSource,w=e.isRealTime,T=e.aggregateFieldType,S=e.showHeader,A=e.showTitle,F=e.showBorder,C=e.groupByMetadata,R=e.singleColor,I=e.d,O=e.showDataTable,x=vt(m),N=ht(m),B=yt(s,d),E=ft(p),P=Ft(y,parseInt(u,10),T,g),k=gt(r),D=mt(k),M={applyDateRange:!1,bareBorder:!1,colorConfig:_t({colorPalette:o,colorType:h,dashboard:I,reportId:_,singleColor:R,metrics:[D]}),configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"value\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:N,id:k,reportSourceSysId:b,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===c||0===c.length?\"table\":c,tableOrViewName:r}],dateFormat:\"default\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"add-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:\"true\"==w,filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:[{groupBy:[{dataSource:k,groupByField:n,isChoice:\"choice\"===(null==C?void 0:C.type)||!1,isPaBucket:!1,isRange:(null==C?void 0:C.isRange)||!1}],maxNumberOfGroups:null!=C&&C.isRange?\"ALL\":E,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==C||!C.isRange)&&\"true\"===l}],headerTitle:A?a:\"\",hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:B.horizontal,metrics:[tt({aggregateFunction:(null==g?void 0:g.length)>0?g:\"COUNT\",axisId:\"primary\",dataSource:k,id:D},P)],newReporting:!1,numberOfPeriods:parseInt(u,10),period:\"M\",registerOrientation:B.orientation,registerPosition:B.register,scoreType:null,showAbsolutePeriod:!1,showBorder:F,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"==i,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:S,showHeaderSeparator:!0,showMaximumRange:!1,showMetricLabel:!1,showRegister:\"true\"==f,showRegisterOnSameLine:!1,showRegisterPercentage:!0,showRegisterValue:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:x.sortBy,sortByOrder:x.sortByOrder,telemetry:\"null\",trendBy:null,truncationType:\"start\",wrapTitle:!0,showDataTable:\"true\"==O};return v&&\"COUNT\"!==g&&\"\"!==v&&(M.metrics[0].aggregateField=v),M},yr=function yr(e,t,r){var a,o,i=e.sys_id,n=e.indicator,l=e.show_data_labels,s=e.aggregate,d=e.sort_direction,u=e.sort_on,c=e.color_scheme,g=e.description,p=e.name,m=pt(null==n?void 0:n.value),f={type:\"default\"};null!=c&&c.value&&\"\"!==(null==c?void 0:c.value)&&(f={type:\"palette\",palette:null==c?void 0:c.value});var v=u;-1===[\"name\",\"value\"].indexOf(u)&&(v=\"value\",t.migrationNotes.push(ot({message:at(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:i,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags})));var h=Dt(tt(e,{indexes:r,dashboard:t}));if(h.doMigration){!h.groupBy&&h.breakdowns.length>0&&(h.groupBy={groupByField:h.breakdowns[0].sysId,isRange:!1,isChoice:!1,isPaBucket:!1});var y=r.sys_id[null==n?void 0:n.value][0],_={applyDateRange:!1,bareBorder:!1,colorConfig:f,configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"both\",dataPassthrough:null,dataSources:[{allowRealTime:\"1\"===y.type,allowTotalValue:\"1\"===y.type,indicatorType:y.type,isScriptedIndicator:!1,filterQuery:ht(e.filter),label:y.name,sourceType:\"indicator\",uuid:{breakdowns:h.breakdowns,indicator:null==n?void 0:n.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:m,dataCategories:[\"trend\",\"group\",\"simple\"]}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,followFilters:\"true\"===e.follow_element,groupBy:[],hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:\"center\",metrics:[{dataSource:m,id:mt(m),aggregateIndicator:null!==(a=null==s?void 0:s.value)&&void 0!==a?a:\"\",frequency:parseInt(null!==(o=null==y?void 0:y.frequency)&&void 0!==o?o:\"10\",10),numberFormat:Ct(parseInt(y.precision,10)),axisId:\"primary\"}],newReporting:!1,numberOfPeriods:3,period:\"M\",registerOrientation:\"horizontal\",registerPosition:\"bottom\",scoreType:null,showAbsolutePeriod:!1,showBorder:e.showBorder,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===l,showDataPassthrough:!1,showFilterIcon:\"true\"===e.follow_element,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:e.showHeader,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showRegister:!0,showRegisterOnSameLine:!1,showRegisterPercentage:!1,showRegisterValue:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:v,sortByOrder:d,telemetry:\"null\",trendBy:null,truncationType:\"end\",wrapTitle:!1,description:g,headerTitle:e.showTitle?p:\"\"};return h.groupBy&&(_.groupBy=[{maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[tt(h.groupBy,{dataSource:m})]}]),_}t.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:i,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}))},_r=function _r(e){var t=!0,r=!0;return null!=e&&e.show_title&&(t=\"true\"===e.show_title.value),null!=e&&e.show_border&&(r=\"true\"===e.show_border.value),{showTitle:t,showHeader:!0,showBorder:r}},br=function br(e){var t,r,a,o,i=e.table,n=e.aggregateFieldType,l=e.filter,s=e.groupByMetadata,d=e.chart_title||e.title,u=null===(t=e.color_palette)||void 0===t?void 0:t.value,c=e.show_chart_data_label,g=e.field,p=e.legend_horizontal_alignment,m=e.legend_vertical_alignment,f=e.show_legend,v=e.decimal_precision,h=e.show_chart_border,y=e.source_type,_=e.aggregate,b=e.other_threshold,w=e.sumfield,T=$e(e.colors,\",\"),S=e.set_color,A=e.show_chart_total,F=null===(r=e.color)||void 0===r?void 0:r.value;try{var C;o=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":null!==(C=e.formatting_configuration)&&void 0!==C?C:\"null\")}catch(t){console.log(\"Unable to transform json 4\",t.toString(),e),o={}}var R=null===(a=e.report_source)||void 0===a?void 0:a.value,I=e.is_real_time,O=e.display_grid;return{table:i,chartTitle:d,colorType:S,colorPalette:u,singleColor:F,showDataLabel:c,groupBy:g,legendVerticalAlignment:m,legendHorizontalAlignment:p,showLegend:f,numberOfPeriods:v,showChartBorder:h,sourceType:y,aggregateType:_,otherThreshold:b,filter:l,aggregateField:w,colors:T,showTotal:A,formattingConfiguration:o,reportSource:R,reportId:e.sys_id,isRealTime:I,aggregateFieldType:n,showOthers:e.others,groupByMetadata:s,showDataTable:O}},wr=function wr(e){var t,r,a,o,i=e.table,n=e.aggregateFieldType,l=e.filter,s=e.groupByMetadata,d=e.chart_title||e.title,u=null===(t=e.color_palette)||void 0===t?void 0:t.value,c=e.show_chart_data_label,g=e.field,p=e.legend_horizontal_alignment,m=e.legend_vertical_alignment,f=e.show_legend,v=e.decimal_precision,h=e.show_chart_border,y=e.source_type,_=e.aggregate,b=e.other_threshold,w=e.sumfield,T=$e(e.colors,\",\"),S=e.set_color,A=null===(r=e.color)||void 0===r?void 0:r.value,F=e.show_chart_total,C=e.trend_field,R=e.interval,I=e.x_axis_title,O=e.x_axis_display_grid,x=e.y_axis_display_grid,N=e.y_axis_title,B=e.y_axis_from,E=e.y_axis_to,P=e.y_axis_opposite,k=e.show_marker;try{o=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(t){console.log(\"Unable to transform json 2\",t.toString(),e),o={}}var D=null===(a=e.report_source)||void 0===a?void 0:a.value,M=e.is_real_time,L=e.bar_unstack,G=e.series_name_text,U={};try{var H;e.custom_config&&\"\"!==e.custom_config&&(U=null===(H=JSON.parse(e.custom_config))||void 0===H?void 0:H.transforms)}catch(t){console.log(\"Unable to transform widget.custom_config to json \",t.toString(),e.custom_config),U={}}var J=e.start_time,j=e.end_time,V=e.display_grid;return{table:i,chartTitle:d,colorType:S,colorPalette:u,singleColor:A,showDataLabel:c,groupBy:g,legendVerticalAlignment:m,legendHorizontalAlignment:p,showLegend:f,numberOfPeriods:v,showChartBorder:h,sourceType:y,aggregateType:_,otherThreshold:b,filter:l,aggregateField:w,colors:T,showTotal:F,trendBy:C,trendInterval:R,xAxisTitle:I,xAxisShowGrid:O,yAxisShowGrid:x,yAxisTitle:N,yAxisFrom:B,yAxisTo:E,yAxisOpposite:P,formattingConfiguration:o,reportSource:D,reportId:e.sys_id,isRealTime:M,isGroupedBars:L,aggregateFieldType:n,dataSetName:G,groupByMetadata:s,customConfig:U,startTime:J,endTime:j,showMarkers:k,showDataTable:V}},Tr=function Tr(e){var t=e.indicator,r=e.element,a=e.show_data_labels,o=e.breakdown,i=e.aggregate,n=e.sort_direction,l=e.sort_on,s=e.breakdown_level2,d=e.element_level2,u=e.color_scheme,c=e.description,g=e.name,p=e.showTitle,m=e.type,f=e.period,v=e.date_from,h=e.date_to,y=e.show_range_selector,_=e.show_breakdown_selector,b=null==u?void 0:u.value,w=\"true\"===a,T=e.field,S=\"true\"===e.show_legend,A=e.set_color,F=\"true\"===e.show_total,C=e.yaxis_title,R=e.yaxis_from,I=e.yaxis_to,O=\"true\"===e.include_target,x=\"true\"===e.include_thresholds,N=\"true\"===e.include_trend,B=\"true\"===e.include_confidence,E=\"true\"===e.include_forecast,P=\"true\"===e.include_comments,k=e.compare_main_label,D=e.chart_color,M=\"true\"===e.follow_element,L=e.multiple_elements_view,G={period:f,from:v,to:h};return{colorType:A,colorPalette:b,chartColor:D,showDataLabel:w,groupBy:T,showLegend:S,showTotal:F,yAxisTitle:C,yAxisFrom:R,yAxisTo:I,sysId:e.sys_id,indicator:t,element:r,show_data_labels:a,breakdown:o,aggregate:i,sort_direction:n,sort_on:l,breakdown_level2:s,color_scheme:u,description:c,name:g,showTitle:p,type:m,element_level2:d,timePeriod:G,showTarget:O,showThresholds:x,showTrend:N,showConfidence:B,showForecast:E,showComments:P,chartType:e.visualization,label:k,show_range_selector:y,followElement:M,multiple_elements_view:L,show_breakdown_selector:_}};function Sr(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return Ar(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ar(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e8){throw _e8},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n4=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n4=e.done,e},e:function e(_e9){l=!0,i=_e9},f:function f(){try{_n4||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Fr(e,t,r,a,o,i,n,l,s,d){if(console.info(\"Handling breakdown for\",{breakdownSysId:e,baseProps:r,elementSysId:a,elementFilter:o,showTopX:i,manualElements:n,sys_id:l,breakdown2SysId:s,element2SysId:d}),e){var u,c=t.sys_id[e][0];r.breakdowns.push({breakdownId:e,breakdownLabel:c.name,elementIds:a&&\"unmatched\"!==a?[a]:[],elementsFilterSysId:o,perPage:null!=i?i:1e3}),n&&r.breakdowns[r.breakdowns.length-1].elementIds.concat(null===(u=t.widget_elements[l])||void 0===u?void 0:u.map(function(e){return\"unassigned\"===e.element?void 0:e.element}).filter(function(e){return e}))}if(s){var g=t.sys_id[s][0];r.breakdowns.push({breakdownId:s,breakdownLabel:g.name,elementIds:d&&\"unmatched\"!==d?[d]:[],perPage:null!=i?i:1e3})}}function Cr(e){switch(e){case\"indicator_group\":case\"order\":case\"default\":return\"name\";default:return e}}function Rr(e,t,r,a){var o;if(\"breakdown\"===t.type)if(void 0!==a.groupBy&&a.groupBy.length>0){var i=a.groupBy[0].maxNumberOfGroups;a.groupBy[0].maxNumberOfGroups=t.show_top_x?parseInt(t.show_top_x).toString():Ir(i)}else if(void 0!==a.breakdowns&&a.breakdowns.length>0){var n=a.breakdowns[0].perPage;a.breakdowns[0].perPage=t.show_top_x?parseInt(t.show_top_x).toString():Ir(n)}else e.migrationNotes.push(ot({message:at(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===t.show_breakdown_selector){var l=t.indicator.value,s=null===(o=r.indicator_breakdowns)||void 0===o?void 0:o[l];a.additionalGroupByConfig=(null==s?void 0:s.map(function(e){var t,a,o=null===(t=r.sys_id[null===(a=e.breakdown)||void 0===a?void 0:a.value])||void 0===t?void 0:t[0];return{id:null==o?void 0:o.sys_id,metricLabel:null==o?void 0:o.name}}))||[]}else a.additionalGroupByConfig=[]}function Ir(e){return e?parseInt(e).toString():\"10\"}function Or(e,t,r){if(e.additional_groupby){r.showAdditionalGroupBySelector=!0;var a=$e(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),r.additionalGroupByConfig=[],a.forEach(function(e){r.additionalGroupByConfig.push({metricLabel:e,id:e})})}}var xr=function xr(e,t,r){for(var a=0,o=[{shouldLog:\"true\"===t.show_visualization_selector,message:{message:at(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===t.show_range_selector,message:{message:at(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags}}];a<o.length;a++){var i=o[a];i.shouldLog&&e.migrationNotes.push(ot(i.message))}},Nr=function Nr(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)},Br=function Br(e,t,r,a){xr(e,t);var o=function(e){var t,r,a,o,i,n,l=e.sort_direction,s=e.sort_on,d=e.name,u=e.description,c=e.sys_id,g=e.show_breakdown_selector,p=null===(t=e.aggregate)||void 0===t?void 0:t.value,m=null===(r=e.indicator)||void 0===r?void 0:r.value,f=null===(a=e.tag)||void 0===a?void 0:a.value,v=null===(o=e.breakdown)||void 0===o?void 0:o.value,h=null===(i=e.breakdown_level2)||void 0===i?void 0:i.value,y=e.element,_=e.element_level2,b=null===(n=e.elements_filter)||void 0===n?void 0:n.value;return{sort_direction:l,sort_on:s,indicatorSysId:m,breakdownSysId:v,manualElements:\"true\"===e.manual_elements,pageSize:parseInt(e.number_of_records,10),showBar:\"true\"===e.show_bar,showIndicator:\"true\"===e.show_total,showTopX:parseInt(e.show_top_x,10),followFilters:\"true\"===e.follow_element,followFilterIcon:\"true\"===e.follow_element,columns:{lastScore:\"true\"===e.column_current,change:\"true\"===e.column_change,bulletChart:\"true\"===e.column_bulletchart,changePercent:\"true\"===e.column_change_perc,trend:\"true\"===e.column_trend,gap:\"true\"===e.column_gap,gapPercent:\"true\"===e.column_gap_perc,target:\"true\"===e.column_target,multiScore:\"true\"===e.column_multiple},timeSeries:p,breakdown2SysId:h,elementSysId:y,element2SysId:_,name:d,description:u,elementFilter:b,sys_id:c,steps:parseInt(e.column_steps,10),stepSize:parseInt(e.column_stepsize,10),indicatorGroupSysId:f,showBreakdownSelector:g}}(t),i=function(e){var t=e.sort_direction,r=e.sort_on,a=e.indicatorSysId,o=e.breakdownSysId,i=e.manualElements,n=e.pageSize,l=e.showBar,s=e.showIndicator,d=e.showTopX,u=e.columns,c=e.timeSeries,g=e.breakdown2SysId,p=e.elementSysId,m=e.element2SysId,f=e.name,v=e.showHeader,h=e.showTitle,y=(e.showBorder,e.elementFilter),_=e.description,b=e.indexes,w=e.sys_id,T=e.d,S=e.steps,A=e.stepSize,F=e.indicatorGroupSysId,C=e.showBreakdownSelector;l&&T.migrationNotes.push(ot({message:at(\"This visualization is migrated without show bar configuration because this functionality is not supported.\"),level:2,originalArtifactSysId:w,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:T.featureFlags}));var R={aggregateId:null!=c?c:\"default\",breakdowns:[],colorSchemeId:\"\",description:_,enableDrilldown:!0,filterConfigurations:\"@state.parFilters\",heading:h?f:\"\",indicatorGroup:\"\",indicators:[],metrics:{},nestedBreakdown:!0,pageSize:n.toString(),query:\"\",scorecardType:\"list\",showAlternateRowColors:!1,showBookmarkedOnly:!1,showBreakdownsOnly:!s,showColumnDividers:!1,showFavorite:!0,followFilters:e.followFilters,showFilterElement:!1,showFilterIcon:e.followFilterIcon,showHeader:v,showIndicatorInfo:!0,sortBy:Cr(r),sortDir:t,sourceType:\"1\",swapBreakdownsAsColumns:!1,allowChangeBreakdown:\"true\"===C,breakdownVisibilitySelector:\"true\"===C};if(Fr(o,b,R,p,y,d,i,w,g,m),a){var I=b.sys_id[a][0];R.indicators.push({id:a,label:I.name}),R.sourceType=\"1\"}else if(F)R.showBreakdownsOnly=!0,R.indicatorGroup=F,R.sourceType=\"2\";else{var O,x=null!==(O=b.widget_indicators[w])&&void 0!==O?O:[];R.showBreakdownsOnly=!0,R.sourceType=\"1\",\"order\"===r&&function(e,t,r){var a=[],o=[];e.sort(function(e,r){var a,o,i,n,l=t.sys_id[null===(a=e.indicator)||void 0===a?void 0:a.value],s=t.sys_id[null===(o=r.indicator)||void 0===o?void 0:o.value],d=null!=l&&null!==(i=l[0])&&void 0!==i&&i.name?l[0].name:\"\",u=null!=s&&null!==(n=s[0])&&void 0!==n&&n.name?s[0].name:\"\";return d.localeCompare(u)}),\"desc\"===r.sort_direction&&e.reverse();var i,n=Sr(e);try{for(n.s();!(i=n.n()).done;){var l=i.value;l.order&&parseInt(l.order,10)>-1?o.push(l):a.push(l)}}catch(e){n.e(e)}finally{n.f()}o.sort(function(e,t){return parseInt(e.order,10)-parseInt(t.order,10)}),e.splice(0,e.length),Array.prototype.push.apply(e,o.concat(a))}(x,b,e);var N,B=Sr(x);try{for(B.s();!(N=B.n()).done;){var E,P,k,D,M=N.value;if((null==c?void 0:c.length)>0&&(null===(E=M.aggregate)||void 0===E||null===(P=E.value)||void 0===P?void 0:P.length)>0&&(null===(k=M.aggregate)||void 0===k?void 0:k.value)!==c)T.migrationNotes.push(ot({message:at(\"This visualization is migrated without the time series aggregation configuration because it does not match aggregation of the main metric.\"),level:1,originalArtifactSysId:w,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:T.featureFlags}));else if(null!==(D=M.indicator)&&void 0!==D&&D.value){var L,G,U=b.sys_id[M.indicator.value][0];R.indicators.push({id:M.indicator.value,label:M.label?M.label:U.name}),Fr(null===(L=M.breakdown)||void 0===L?void 0:L.value,b,R,M.element,void 0,void 0,!1,w,null===(G=M.breakdown_level2)||void 0===G?void 0:G.value,M.element_level2)}}}catch(e){B.e(e)}finally{B.f()}}if(u){R.metrics={fields:[]};for(var H=0,J=Object.keys(u);H<J.length;H++){var j=J[H];if(\"multiScore\"===j)R.metrics.multiScore={numberOfPeriods:S,periodStep:A,type:u.multiScore?\"CUSTOM_INTERVAL\":\"\"};else if(\"bulletChart\"===j){T.migrationNotes.push(ot({message:at(\"This visualization is migrated without bullet score because this functionality is not supported.\"),level:2,originalArtifactSysId:w,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:T.featureFlags}));continue}u[j]&&R.metrics.fields.push(j)}}return R}(tt(o,{d:e,indexes:r},_r(a)));return i?(Rr(e,t,r,i),{component_id:h,component_props:i}):e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)},Er=/ORDERBY[^.^]+\\./,Pr=[function(e){var t,r,a,o,i=e.dashboard,n=e.widget,l=(e.indexes,e.preferences);((null==l||null===(t=l.renderer)||void 0===t?void 0:t.value)===K||i.migratingFromJava)&&(\"true\"===(null==l||null===(r=l.publisher_widget)||void 0===r?void 0:r.value)&&i.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the act as filter feature is not supported on migration. It can be configured manually in a new visualization.\"),level:1,originalArtifactSysId:n.sys_id,artifactTable:n.sys_table_name,featureFlags:i.featureFlags})),null!=n&&null!==(a=n.report_drilldown)&&void 0!==a&&a.value&&i.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the report drilldown feature is not supported on migration. It can be configured manually in a new visualization.\"),level:1,originalArtifactSysId:n.sys_id,artifactTable:n.sys_table_name,featureFlags:i.featureFlags})),Er.test(null==n?void 0:n.filter)&&i.migrationNotes.push(ot({message:at(\"This visualization is migrated without sorting by dot-walked fields because this functionality is not supported.\"),level:2,originalArtifactSysId:n.sys_id,artifactTable:n.sys_table_name,featureFlags:i.featureFlags})),null!=n&&null!==(o=n.list_ui_view)&&void 0!==o&&o.value&&i.migrationNotes.push(ot({message:at(\"This visualization is migrated without a drilldown list view because this functionality is not supported.\"),level:2,originalArtifactSysId:n.sys_id,artifactTable:n.sys_table_name,featureFlags:i.featureFlags})))}],kr=function kr(e,t,r,a){for(var o=0,i=Pr;o<i.length;o++){var n=(0,i[o])({dashboard:e,widget:t,indexes:r,preferences:a});if(n)return n}},Dr=function Dr(i,n,s,d){var u=kr(i,n,s,d);if(u)return u;var c=function(e,i,n,s){switch(null==i?void 0:i.visualization){case\"pyramid\":return function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):(e.migrationNotes.push(ot({message:at(\"We are unable to migrate this component.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),Wt(e,t))}(e,i,0,s);case\"process\":return Nr(e,i,n,s);case\"word_cloud\":case\"treemap\":case\"spider\":case\"funnel\":case\"relative\":return function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}(e,i,n,s);case\"column_total\":return function(e,t,r,a){xr(e,t);var o=Tr(t),i=function(e){var t,r,a=Ut(e);if(a){a.chartVariation=\"side-by-side\";var o=a.dataSources[0].id,i=a.metrics[0],n=i.frequency,l=i.frequencyInterval,s=mt(o);return a.metrics.unshift({frequency:n,frequencyInterval:l,chartType:\"line\",numberFormat:{customFormat:!1},id:s,dataSource:o,aggregateIndicator:(null==e||null===(t=e.aggregate)||void 0===t?void 0:t.value)||\"\",label:\"Total\",axisId:\"primary\"}),null===(r=a.trendBy.trendByFields)||void 0===r||r.push({field:\"anything\",metric:s}),a}}(tt(o,{d:e,indexes:r},_r(a)));return i?(Rr(e,t,r,i),function(e,t,r){var a,o;r.showAdditionalGroupBySelector=!0,r.allowAdditionalGroupByPerMetric=!0;var i=null===(a=e.indicator)||void 0===a?void 0:a.value,n=null===(o=t.indicator_breakdowns)||void 0===o?void 0:o[i];r.additionalGroupByConfig=(null==n?void 0:n.map(function(e){var a,o,i,n,l,s=null===(a=t.sys_id[null===(o=e.breakdown)||void 0===o?void 0:o.value])||void 0===a?void 0:a[0];return{id:null==s?void 0:s.sys_id,label:null==s?void 0:s.name,metricId:null===(i=r.metrics[1])||void 0===i?void 0:i.id,metricLabel:(null===(n=r.metrics[1])||void 0===n?void 0:n.label)||(null===(l=r.dataSources[0])||void 0===l?void 0:l.label)}}))||[]}(o,r,i),{component_id:l,component_props:i}):e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA Total Column widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"donut\":return function(e,t,r,o){xr(e,t);var i=yr(tt(t,_r(o)),e,r);return i?(Rr(e,t,r,i),{component_id:a,component_props:i}):e.migratingFromJava&&o?rt(t,o):zt(e,{static_content:q(\"ERROR: Cannot migrate PA Donut widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"pie\":return function(e,t,a,o){xr(e,t);var i=yr(tt(t,_r(o)),e,a);return i?(Rr(e,t,a,i),{component_id:r,component_props:i}):e.migratingFromJava&&o?rt(t,o):zt(e,{static_content:q(\"ERROR: Cannot migrate PA Pie widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"semi_circle_donut\":return function(e,t,r,a){xr(e,t);var i=yr(tt(t,_r(a)),e,r);return i?(Rr(e,t,r,i),{component_id:o,component_props:i}):e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA Semi donut widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"area\":return function(e,t,r,a){xr(e,t);var o=Tr(t),i=Ut(tt(o,{d:e,indexes:r},_r(a)));return i?{component_id:Jt(i),component_props:i}:e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"column\":return function(e,t,r,a){xr(e,t);var o=Tr(t),i=Ht(tt(o,{d:e,indexes:r},_r(a)));return i?(Rr(e,t,r,i),{component_id:Jt(i),component_props:i}):e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"line\":return function(e,t,r,a){xr(e,t);var o,i=(o=tt(Tr(t),{d:e,indexes:r},_r(a)),Ut(o));return i?(Rr(e,t,r,i),{component_id:Jt(i),component_props:i}):e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"spline\":return function(e,t,r,a){xr(e,t);var o,i=(o=tt(Tr(t),{d:e,indexes:r},_r(a)),Ut(o));return i?{component_id:Jt(i),component_props:i}:e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"step\":return function(e,t,r,a){xr(e,t);var o,i=(o=tt(Tr(t),{d:e,indexes:r},_r(a)),Ut(o));return i?{component_id:Jt(i),component_props:i}:e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"stacked\":return function(e,t,r,a){xr(e,t);var o=Tr(t),i=Ht(tt(o,{d:e,indexes:r,stacked:!0},_r(a)));return i?(Rr(e,t,r,i),{component_id:Jt(i),component_props:i}):e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"scorecard\":return Br(e,i,n,s);case\"speedometer\":case\"dial\":return function(e,t,r,a){xr(e,t);var o=function(e){var t,r,a,o,i,n,l=e.name,s=\"true\"===e.gauge_autoscale,d=parseInt(e.gauge_from,10),u=parseInt(e.gauge_to,10),c=null===(t=e.aggregate)||void 0===t?void 0:t.value,g=null===(r=e.indicator)||void 0===r?void 0:r.value,p=null===(a=e.tag)||void 0===a?void 0:a.value,m=null===(o=e.breakdown)||void 0===o?void 0:o.value,f=null===(i=e.breakdown_level2)||void 0===i?void 0:i.value,v=e.element,h=e.element_level2,y=null===(n=e.elements_filter)||void 0===n?void 0:n.value,_=\"true\"===e.manual_elements,b=e.sort_direction,w=e.sort_on;return{autoScale:s,chartTitle:l,timeSeries:c,indicatorSysId:g,indicatorGroupSysId:p,breakdownSysId:m,breakdown2SysId:f,elementSysId:v,element2SysId:h,elementFilter:y,manualElements:_,from:d,to:u,sys_id:e.sys_id,sortDirection:b,sortBy:w}}(t),i=function(e){var t=e.autoScale,r=e.chartTitle,a=e.timeSeries,o=e.indicatorSysId,i=e.showHeader,n=e.showTitle,l=e.showBorder,s=e.from,d=e.to,u=e.indexes,c=e.d,g=e.sys_id,p=e.widget,m=e.sortDirection,f=e.sortBy,v=e.follow_element,h=Dt(tt(p,{indexes:u,dashboard:c}));if(h.doMigration){var y=pt(o),_=mt(y),b=u.sys_id[o][0],w={applyDateRange:!1,bareBorder:!1,configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:\"1\"===b.type,allowTotalValue:\"1\"===b.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:y,indicatorType:b.type,isScriptedIndicator:!1,label:b.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:h.breakdowns,indicator:o}}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:\"true\"===v,gaugeArcAngle:\"180\",groupBy:null,headerTitle:n?r:\"\",hideMatrixAggregate:!1,innerRadius:.7,maxValue:d,metrics:[{aggregateFunction:a,axisId:\"primary\",dataSource:y,id:_,numberFormat:Ct(parseInt(b.precision,10))}],minValue:s,newReporting:!1,numberOfPeriods:3,period:\"M\",rangesConfig:{},scoreLabel:\"none\",scoreType:null,showAbsolutePeriod:!1,showBorder:l,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:i,showHeaderSeparator:!1,showLabelFirst:!1,showMaximumRange:!1,showMetricLabel:!1,showRangeLabels:!1,showRangeLimit:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,showZero:!0,sortBy:f,sortByOrder:m,telemetry:\"null\",trendBy:null,valueLabelSize:\"md\",wrapTitle:!1};return t&&(w.minValue=0,w.maxValue=null),w}c.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:g,artifactTable:null==p?void 0:p.sys_table_name,featureFlags:c.featureFlags}))}(tt(o,{d:e,indexes:r,widget:t},_r(a)));return i?{component_id:f,component_props:i}:e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"latest\":case\"realtime\":case\"score\":return function(e,r,a,o){xr(e,r);var i=!1,n=!1,l=!1,s=!1,d=!1,u=!1;switch(r.template){case\"template1\":case\"template2\":case\"\":i=!0,u=!0,n=!0,s=!0;break;case\"template3\":u=!0,n=!0,s=!0,l=!0,d=!0;break;default:if(e.migratingFromJava&&o)return rt(r,o);throw new Error(\"Don't know what kind of template that is? Dashboard \".concat(e.sys_id,\" Element: \").concat(r.sys_name))}var c=function(e){var t,r,a,o,i,n,l=e.props,s=e.indexes,d=e.dashboard,u=e.showSparkline,c=e.showChange,g=e.showTarget,p=e.showGapPercentage,m=e.showScoreDate,f=e.showChangePercentage,v=Dt(tt(l,{indexes:s,dashboard:d}));if(v.doMigration){\"periods_back\"===l.lastscore_compare&&d.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the compare score with previous periods feature is not supported.\"),level:1,originalArtifactSysId:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:d.featureFlags}));var h=pt(null===(t=l.indicator)||void 0===t?void 0:t.value),y=mt(h),_=s.sys_id[null===(r=l.indicator)||void 0===r?void 0:r.value][0],b=\"realtime\"===l.visualization,w=\"1\"===_.type,T=void 0===_.show_realtime_score?w&&b:w&&\"true\"===_.show_realtime_score;return{showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,enableDrilldown:!0,newReporting:!1,showSparkline:u,dataPassthrough:null,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,showMaximumRange:!1,enableRealTimeUpdate:T,scoreType:null,useRelativeScoreTime:T,showScoreUpdateTime:T,colorConfig:{type:\"default\"},scoreSize:\"auto\",showFilterIcon:\"true\"===l.follow_element,followFilters:\"true\"===l.follow_element,headingPosition:null,showChange:c,showTarget:g,showGapPercentage:p,showScoreDate:!T&&m,showChangePercentage:f,showChangeFrom:!0,showZero:!1,description:l.description,dataSources:[{allowRealTime:b&&w,allowTotalValue:w,indicatorType:_.type,isScriptedIndicator:!1,label:_.name,filter:ht(l.filter),sourceType:\"indicator\",uuid:{breakdowns:v.breakdowns,indicator:null===(a=l.indicator)||void 0===a?void 0:a.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:h,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[{dataSource:h,id:y,aggregateIndicator:null!==(o=null===(i=l.aggregate)||void 0===i?void 0:i.value)&&void 0!==o?o:\"\",frequency:parseInt(null!==(n=null==_?void 0:_.frequency)&&void 0!==n?n:\"10\",10),numberFormat:tt(Ct(parseInt(_.precision,10)),{abbreviationEnabled:!1,numberInTooltipsEnabled:!1,thousandSeparatorEnabled:!0}),axisId:\"primary\"}],headerTitle:l.showTitle?l.sys_name:\"\"}}d.migrationNotes.push(ot({message:at(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:d.featureFlags}))}({props:tt(r,_r(o)),showSparkline:i,showChange:n,showTarget:l,showChangePercentage:s,showGapPercentage:d,showScoreDate:u,indexes:a,dashboard:e});return c?{component_id:t,component_props:c}:e.migratingFromJava&&o?rt(r,o):zt(e,{static_content:q(\"ERROR: Cannot migrate PA Single Score widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"))})}(e,i,n,s);case\"pivot_scorecard\":return function(e,t,r,a){xr(e,t);var o=function(e){var t,r,a,o;return{breakdown:null===(t=e.pivot_breakdown)||void 0===t?void 0:t.value,timeseries:null===(r=e.aggregate)||void 0===r?void 0:r.value,breakdownOnY:\"true\"===e.flip_axes,elementFilter:null===(a=e.pivot_elements_filter)||void 0===a?void 0:a.value,colour:null===(o=e.color_scheme)||void 0===o?void 0:o.value,name:e.name,sys_id:e.sys_id,description:e.description}}(t);if(o.elementFilter)return e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate Pivot scorecard \".concat(o.name,\" sys_id: \").concat(null==t?void 0:t.sys_id,\" as we do not support pivot element filters\"))});var i=function(e){var t,r=e.breakdown,a=e.timeseries,o=e.breakdownOnY,i=e.elementFilter,n=(e.colour,e.name),l=e.sys_id,s=e.indexes,d=(e.d,e.showHeader),u=e.showTitle,c=(e.showBorder,e.description);r&&(t=s.sys_id[r][0]);var g={aggregateId:(null==a?void 0:a.length)>0?a:\"default\",breakdowns:r?[{breakdownId:r,breakdownLabel:t.name,elementIds:i&&\"unmatched\"!==i?[i]:[],perPage:20}]:[],colorSchemeId:\"\",description:c,enableDrilldown:!0,filterConfigurations:\"@state.parFilters\",followFilters:\"true\"===e.follow_element,heading:u?n:\"\",indicatorGroup:\"\",indicators:[],metrics:{fields:[\"lastScore\"]},nestedBreakdown:!0,pageSize:10,query:\"\",scorecardType:\"pivot\",showAlternateRowColors:!0,showBookmarkedOnly:!1,showBreakdownsOnly:!1,showColumnDividers:!1,showFavorite:!0,showFilterElement:!1,showFilterIcon:\"true\"===e.follow_element,showHeader:d,showIndicatorInfo:!0,sortBy:\"name\",sortDir:\"asc\",sourceType:\"1\",swapBreakdownsAsColumns:!o};if(s.widget_indicators_m2m[l]){var p=s.widget_indicators_m2m[l].sort(function(e,t){return parseInt(e.order,10)-parseInt(t.order,10)});p.length>g.pageSize&&(g.pageSize=p.length);var m,f=Sr(p);try{for(f.s();!(m=f.n()).done;){var v,h=m.value;if(null!==(v=h.indicator)&&void 0!==v&&v.value){var y=s.sys_id[h.indicator.value][0];g.indicators.push({id:y.sys_id,label:y.name})}}}catch(e){f.e(e)}finally{f.f()}}return g}(tt(o,{d:e,indexes:r},_r(a)));return i?(Rr(e,t,r,i),{component_id:h,component_props:i}):e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}(e,i,n,s);case\"heatmap\":return function(e,t,r,a){xr(e,t);var o=function(e,t,r){var a,o,i,n,l,s,d,u,c,g,p,m,f={type:\"default\"};null!==(a=e.max_color)&&void 0!==a&&a.value&&\"\"!==(null===(o=e.max_color)||void 0===o?void 0:o.value)&&(f={type:\"colorRange\",values:[{color:\"65b303c7a9fe3dba00629aff95ee3597\",id:\"minColor\"},{color:null===(m=e.max_color)||void 0===m?void 0:m.value,id:\"maxColor\"}]});var v=pt(null===(i=e.indicator)||void 0===i?void 0:i.value),h=mt(v),y=Dt(tt(e,{indexes:t,dashboard:r})),_=t.sys_id[null===(n=e.indicator)||void 0===n?void 0:n.value][0],b=vt(e.filter);return{showZero:\"true\"===e.show_data_labels,showDataLabels:\"true\"===e.show_data_labels,showLegend:\"true\"===e.show_legend,legendPosition:\"bottom\",colorConfig:f,newReporting:!1,dataSources:[{isScriptedIndicator:\"true\"===_.scripted,allowRealTime:\"1\"===_.type,allowTotalValue:\"1\"===_.type,indicatorType:_.type,label:_.name,sourceType:\"indicator\",filterQuery:ht(e.filter),preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],uuid:{breakdowns:y.breakdowns,indicator:null===(l=e.indicator)||void 0===l?void 0:l.value},id:v,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?null!==(s=e.name)&&void 0!==s?s:e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[{dataSource:v,id:h,aggregateIndicator:null!==(d=null===(u=e.aggregate)||void 0===u?void 0:u.value)&&void 0!==d?d:\"\",axisId:\"primary\",frequency:parseInt(null!==(c=null==_?void 0:_.frequency)&&void 0!==c?c:\"10\",10),numberFormat:Ct(parseInt(_.precision,10))}],groupBy:[{categoryIndex:0,groupBy:[{dataSource:v,groupByField:null===(g=e.breakdown)||void 0===g?void 0:g.value,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:\"true\"===e.others},{categoryIndex:1,groupBy:[{dataSource:v,groupByField:null===(p=e.breakdown_level2)||void 0===p?void 0:p.value,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1}],sortBy:b.sortBy,sortByOrder:b.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:\"true\"===e.follow_element,showFilterIcon:\"true\"===e.follow_element,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",configVersion:\"23.0.0-ci-SNAPSHOT\"}}(tt(t,_r(a)),r,e);return o?{component_id:p,component_props:o}:e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}(e,i,n,s);case\"pareto\":return function(e,t,r,a){xr(e,t);var o=function(e,t,r){var a=yr(e,t,r);return a.metrics[0].chartType=\"pareto\",a}(tt(t,_r(a)),e,r);return o?(Rr(e,t,r,o),{component_id:g,component_props:o}):e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==t?void 0:t.sys_id,\". Check logs for details\"))})}(e,i,n,s);default:i.visualization&&e.migrationNotes.push(ot({message:at(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==i?void 0:i.sys_id,artifactTable:null==i?void 0:i.sys_table_name,featureFlags:e.featureFlags}))}}(i,n,s,d);return c&&c.component_id!=m&&c.component_id!=e?(Zt(n,s,c),c):i.migratingFromJava&&d?rt(n,d):zt(i,{static_content:q(\"<b>Unknown widget type:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==n?void 0:n.type,\"</span> widget with viz <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null==n?void 0:n.visualization,\"</span> because there is no mapping.\"))})},Mr=function Mr(e,t){var r=hr(e),a=\"true\"==e.showTotal;return a&&(r.showTotalValue=a,r.showRegister=!1),r};function Lr(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return Gr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gr(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e10){throw _e10},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n5=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n5=e.done,e},e:function e(_e11){l=!0,i=_e11},f:function f(){try{_n5||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Hr=function Hr(e,t,r){var a,o,i,n,l,s,d,u,c,g,p,m,f=\"bar\"===e.type,v=12;\"-1\"===e.other_threshold?v=\"ALL\":e.other_threshold>-2&&(v=e.other_threshold);var h=Ft(e.formatting_configuration,parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregateType),y=gt(e.table),_=mt(y),b=ht(e.filter),w={sortBy:\"value\",sortByOrder:\"desc\"};Ke(e.filter,\"^ORDERBY\")&&(w=vt(e.filter));var T={},S=Rt([e.table,null===(a=e.report_source)||void 0===a?void 0:a.value,b]);T[S]={metricId:_,dataSourceId:y,metricColor:null===(o=e.color)||void 0===o?void 0:o.value};var A,F={configVersion:\"23.0.0-ci-SNAPSHOT\",yAxisHidden:!1,yAxisPosition:f||\"true\"!==e.x_axis_opposite?\"bottom\":\"top\",yAxisShowGrid:!0,xAxisWrapLabels:!1,xAxisMaxLabelSize:100,xAxisTruncationType:\"end\",yAxisStyle:\"clean\",showLegend:\"true\"===e.show_legend,showLegendValue:!1,legendPosition:\"bottom\",legendHorizontalAlignment:\"center\",legendExpandToFit:!1,showDataLabels:\"true\"===e.show_chart_data_label,dataLabelPosition:\"true\"===e.show_data_label_position_middle?\"middle\":\"top\",showStackedValues:\"none\",showOverlappingLabels:!1,newReporting:!1,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:b,reportSourceSysId:null===(i=e.report_source)||void 0===i?void 0:i.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:y,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[tt({dataSource:y,id:_,label:(null===(n=e.series_name_text)||void 0===n?void 0:n.length)>0?e.series_name_text:void 0,aggregateFunction:(null===(l=e.aggregate)||void 0===l?void 0:l.length)>0?e.aggregate:\"COUNT\",aggregateField:\"COUNT\"===e.aggregate&&\"\"!==e.sumfield?void 0:e.sumfield,axisId:\"primary\"},h)],groupBy:[e.field&&e.field.length>0?{groupBy:[{dataSource:y,groupByField:e.field,isRange:null!==(s=null===(d=e.groupByMetadata)||void 0===d?void 0:d.isRange)&&void 0!==s&&s,isChoice:\"choice\"===(null===(u=e.groupByMetadata)||void 0===u?void 0:u.type),isPaBucket:!1}],maxNumberOfGroups:null!==(c=e.groupByMetadata)&&void 0!==c&&c.isRange?\"ALL\":v,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null===(g=e.groupByMetadata)||void 0===g||!g.isRange)&&\"true\"===e.others}:void 0],sortBy:w.sortBy,sortByOrder:w.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",yAxisTitle:e.y_axis_title,xAxisTitle:e.x_axis_title,yAxisFrom:e.y_axis_from,yAxisTo:e.y_axis_to,showDataTable:\"true\"==e.display_grid};A=e.additional_groupby||\"true\"!==e.bar_unstack&&e.trend_field&&\"\"!==e.trend_field?\"stacked\":\"grouped\",F.chartVariation=A,e.trend_field&&\"\"!==e.trend_field&&F.groupBy.push({groupBy:[{dataSource:y,groupByField:e.trend_field,isRange:e.trendMetadata.isRange,isChoice:\"choice\"===e.trendMetadata.type,isPaBucket:!1}]});var C,R=function(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return Ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ur(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e12){throw _e12},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n6=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n6=e.done,e},e:function e(_e13){l=!0,i=_e13},f:function f(){try{_n6||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}(null!==(m=r.report_layers[e.sys_id])&&void 0!==m?m:[]);try{var I=function I(){var t,r,a,o,i=C.value,n=F.dataSources.map(function(e){return e.tableOrViewName}).concat(F.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),l=ht(i.filter);S=Rt([i.table,null===(t=i.report_source)||void 0===t?void 0:t.value,l,i.sys_id]);var s=It(T,S,i.table);T[S]={metricId:mt(s),dataSourceId:s,metricColor:null==i||null===(r=i.color)||void 0===r?void 0:r.value};var d,u=Ot(F.dataSources,s,l);if((!Ke(n,i.table)&&!Ke(n,i.report_source)||u)&&F.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:i.table,filterQuery:l,reportSourceSysId:null===(d=i.report_source)||void 0===d?void 0:d.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:s,dataCategories:[\"trend\",\"group\",\"simple\"]}),F.metrics.push(tt({dataSource:T[S].dataSourceId,id:T[S].metricId,aggregateFunction:i.aggregate,aggregateField:\"COUNT\"===i.aggregate&&\"\"!==i.sumfield?void 0:i.sumfield,axisId:\"primary\",label:(null===(a=i.series_name_text)||void 0===a?void 0:a.length)>0?i.series_name_text:void 0},Ft(i.formatting_configuration,parseInt(e.decimal_precision,10),i.aggregateFieldType,i.aggregateType))),(null===(o=i.field)||void 0===o?void 0:o.length)>0){var c={dataSource:T[S].dataSourceId,groupByField:i.field,isRange:!1,isChoice:!1,isPaBucket:!1},g=!1;F.groupBy[0].groupBy.forEach(function(e){g=g||e.dataSource==c.dataSource&&e.groupByField==c.groupByField}),g||F.groupBy[0].groupBy.push(c)}};for(R.s();!(C=R.n()).done;)I()}catch(e){R.e(e)}finally{R.f()}return F.colorConfig=_t({colorPalette:null===(p=e.color_palette)||void 0===p?void 0:p.value,colorType:e.set_chart_color||e.set_color,dashboard:t,reportId:e.sys_id,singleColor:e.color.value,colorList:e.colors,enableColorPerMetric:!1,metricMap:T}),F},Jr=function Jr(e){null==e&&(e=\"\");var t=$e(e,\",\"),r=\"\";return Ke(t,\"name\")?r=r.concat(\"name,\"):Ke(t,\"number\")?r=r.concat(\"number,\"):r=r.concat(\",\"),Ke(t,\"short_description\")&&!Ke(r,\"short_description\")&&(r=r.concat(\"short_description,\")),r.endsWith(\",\")&&(r=r.slice(0,-1)),r},jr=function jr(e,t){return Vr(e,t)},Vr=function Vr(e,t){var r=\"area\"==(null==t?void 0:t.type)||\"line_bar\"==(null==t?void 0:t.type)||\"spline\"==(null==t?void 0:t.type)||\"line\"==(null==t?void 0:t.type)||\"step_line\"==(null==t?void 0:t.type)||\"trend\"==(null==t?void 0:t.type),a=null==t?void 0:t.groupByMetadata;return!(!r||!a||\"glide_duration\"!=a.internalType&&\"glide_date_time\"!=a.internalType&&\"glide_date\"!=a.internalType||(e.migrationNotes.push(ot({message:at(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),0))};function zr(e){return zr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},zr(e)}function Yr(e,t,r){return t=function(e){var t=function(e,t){if(\"object\"!=zr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,\"string\");if(\"object\"!=zr(a))return a;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==zr(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qr,Wr=function Wr(i,h,b,w){var T=kr(i,h,b,w);if(T)return T;var S=function(e,i,m,h){if(jr(e,i)||function(e,t){var r;return!(null==t||null===(r=t.report_drilldown)||void 0===r||!r.value||null!=e&&e.featureFlags&&null!=e&&e.featureFlags.drillDownC2C&&\"false\"!==(null==e?void 0:e.featureFlags.drillDownC2C)||(e.migrationNotes.push(ot({message:at(\"A report on this dashboard has an unmigrated drilldown configuration. You can configure the drilldowns in the Visualization Designer.\"),level:1,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),0))}(e,i))return e.migratingFromJava&&h?rt(i,h):zt(e,{static_content:q(\"<b>Unknown report type:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==i?void 0:i.title,\"</span>, drilldown reports are not supported.\"))});switch(null==i?void 0:i.type){case N:return function(e,r,a,o){var i,n,l,s=r.title,d=r.show_chart_title,u=r.chart_title,c=r.title_vertical_alignment,g=r.aggregate;try{l=JSON.parse(\"\"==r.formatting_configuration||null==r.formatting_configuration?\"{}\":r.formatting_configuration)}catch(e){console.log(\"Unable to transform json 1\",e.toString(),r),l={}}var p=r.table,m=r.filter,f=r.show_zero,v=r.description,h=r.chart_size,y=null===(i=r.score_color)||void 0===i?void 0:i.value,_=null===(n=r.report_source)||void 0===n?void 0:n.value,b=r.sumfield;r.list_ui_view&&\"\"!==r.list_ui_view&&e.migrationNotes.push(ot({message:at(\"This visualization is migrated without a drilldown list view because this functionality is not supported.\"),level:2,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}));var w=function(e){var r=e.reportId,a=e.chartTitle,o=e.title,i=e.titleVerticalAlignment,n=(e.showChartTitle,e.aggregate),l=e.table,s=e.filter,d=e.showZero,u=e.description,c=(e.chartSize,e.formattingConfiguration),g=e.indexes,p=e.color,m=e.reportSource,f=e.dashboard,v=e.aggregateField,h=(e.showHeader,e.showTitle),y=e.showBorder,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},b=gt(l),w=mt(b),T={type:\"default\"};null!=g&&g.sys_report_mpivot_rule&&null!=g&&g.sys_report_mpivot_rule[r]?T={type:\"singleColor\",values:[{color:p,metric:w,rules:g.sys_report_mpivot_rule[r].map(function(e){var t;return{operator:e.operator,order:e.order,value1:e.value1,value2:e.value2,color:null===(t=e.color_id)||void 0===t?void 0:t.value}})}]}:p&&\"65b30218a9fe3dba0120df8611520d97\"!==p&&(T={type:\"singleColor\",values:[{color:p,metric:w,rules:[]}]});for(var S=function(e){var t=Ft(e);return e.numberFormattingProperties&&0===Object.keys(e.numberFormattingProperties).length?tt(t,{numberFormat:{customFormat:!0,abbreviationEnabled:!1,numberInTooltipsEnabled:!1,thousandSeparatorEnabled:!0}}):t}(c),A={filterConfigurations:\"@state.parFilters\",scoreSize:\"auto\",headingPosition:\"bottom\"===i?\"bottom\":\"top\",sparklineStyle:\"area\",scoreIcon:\"\",iconStyle:\"background\",showScoreDate:!1,useRelativeScoreTime:!1,showScoreUpdateTime:!1,showZero:\"true\"===d,newReporting:!1,showHeader:!0,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,showBorder:y,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,sortByOrder:\"desc\",showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:!1,period:\"M\",dateFormat:\"default\",description:u,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,colorConfig:T,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:l,filterQuery:ht(s),reportSourceSysId:m,preferredVisualizations:[t],id:b,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[tt({dataSource:b,id:w,aggregateFunction:(null==n?void 0:n.length)>0?n:\"COUNT\",aggregateField:\"COUNT\"===n?void 0:v,axisId:\"primary\",label:o},S)],headerTitle:h?\"\"!==a&&a?a:o:\"\"},F=[jt],C=0;C<F.length;C++)A=F[C](f,A,_);return A}(tt({chartTitle:u,title:s,showChartTitle:d,titleVerticalAlignment:c,aggregate:g,table:p,filter:m,showZero:f,description:v,chartSize:h,formattingConfiguration:l,indexes:a,reportId:r.sys_id,color:y,reportSource:_,aggregateField:b,dashboard:e},_r(o)),o);return w?{component_id:t,component_props:w}:e.migratingFromJava&&o?rt(r,o):Qt(Qe)(e,r,a,o)}(e,i,m,h);case\"pie\":return function(e,t,a,o){var i=jr(e,t),n=br(t),l=hr(tt(n,{d:e},_r(o)));return!l||i?e.migratingFromJava&&o?rt(t,o):Qt(Qe)(e,t,a,o):(Or(t,0,l),{component_id:r,component_props:Kt(e,l,o)})}(e,i,m,h);case B:return function(e,t,r,o){var i=jr(e,t),n=br(t),l=Mr(tt(n,{d:e},_r(o)));return!l||i?e.migratingFromJava&&o?rt(t,o):Qt(Qe)(e,t,r,o):(Or(t,0,l),{component_id:a,component_props:Kt(e,l,o)})}(e,i,m,h);case E:return function(e,t,r,a){var i=jr(e,t),n=br(t),l=Mr(tt(n,{d:e},_r(a)));return!l||i?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,l),{component_id:o,component_props:Kt(e,l,a)})}(e,i,m,h);case P:return function(e,t,r,a){var o=jr(e,t),i=wr(t),l=kt(tt(i,{d:e,indexes:r},_r(a)));return!l||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,l),{component_id:n,component_props:l})}(e,i,m,h);case k:return function(e,t,r,a){var o=jr(e,t),i=function(e){var t,r=kt(e);if(r){var a=e.indexes,o=e.reportId;return(null!==(t=a.report_layers[o])&&void 0!==t?t:[]).length>0||\"true\"===e.isGroupedBars?r.chartVariation=\"side-by-side\":r.chartVariation=\"stacked\",r.extensionType=\"bar\",r}}(tt(wr(t),{d:e,indexes:r},_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_id:l,component_props:i})}(e,i,m,h);case\"line\":return function(e,t,r,a){var o=jr(e,t),i=function(e){var t=kt(e);if(t)return t.extensionType=\"line\",t}(tt(wr(t),{d:e,indexes:r},_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_id:s,component_props:i})}(e,i,m,h);case D:return function(e,t,r,a){var o=jr(e,t),i=function(e){var t=kt(e);if(t)return t.extensionType=\"spline\",t}(tt(wr(t),{d:e,indexes:r},_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_id:d,component_props:i})}(e,i,m,h);case M:return function(e,t,r,a){var o=jr(e,t),i=function(e){var t=kt(e);if(t)return t.extensionType=\"step\",t}(tt(wr(t),{d:e,indexes:r},_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_id:u,component_props:i})}(e,i,m,h);case\"list\":return function(e,t,r,a){var o=jr(e,t),i=function(e){var t,r=e.table,a=e.filter,o=e.chart_title||e.title,i=e.field,n=e.field_list,l=e.show_chart_title,s=null===(t=e.report_source)||void 0===t?void 0:t.value,d=e.additional_groupby;return{table:r,filter:a,chartTitle:o,groupBy:i,columns:n,showChartTitle:l,reportSource:s,reportId:e.sys_id,additionalGroupBy:d}}(t),n=function(e){var t,r=e.columns,a=e.groupBy,o=e.filter,i=e.chartTitle,n=e.table,l=e.reportSource,s=e.reportId,d=e.d,u=e.indexes,c=e.showHeader,g=e.showTitle,p=e.showBorder,m=e.additionalGroupBy,f=\"\";if(l){var v=u.sys_id[l];!v||v.length<1?d.migrationNotes.push(ot({message:at(\"The dashboard has missing report source configuration.\"),level:2,originalArtifactSysId:s,artifactTable:lt,featureFlags:d.featureFlags})):(n=v[0].table,f=v[0].filter)}var h=r;a&&(h=h.concat(\",\",a)),m&&(h=h.concat(\",\",m));var y=$e(h,\",\");h=function(e){for(var t=[],r=0;r<e.length;r++){for(var a=!1,o=0;o<t.length;o++)if(e[r]===t[o]){a=!0;break}a||t.push(e[r])}return t}(y).join(\",\");var _=null!==(t=y.length)&&void 0!==t?t:0;return 0===_&&(_=100),{columns:h,fixedQuery:f,groupByField:a,hideColumnFiltering:!1,hideColumnGrouping:!1,hideColumnReorder:!1,hideColumnResizing:!1,hideColumnSorting:!1,hideDotwalk:!1,hideEmptyStateImage:!1,hideHeader:!c,hideHighlightContent:!1,hideHighlightedValues:!1,hideInlineEditing:!1,hideLastRefreshedText:!0,hideLinks:!1,hidePersonalization:!0,hideRefreshButton:!1,hideRowSelector:!1,hideTitle:!g,hideTitleRowCount:!1,hideViewAll:!1,highlightContent:{color:\"\",patterns:[]},highlightedValueConfigId:\"\",followFilters:!0,limit:20,listTitle:i,maxCharLimit:4e3,maxColumns:_,overrideWordWrapUserPref:!1,query:o,refreshRequested:\"\",table:n,wordWrap:!1,showBorder:p,isDashboard:!0}}(tt(i,{d:e,indexes:r},_r(a)));return!n||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,n),{component_id:\"2b1c080881e05dc63b917044290b233f\",component_props:n})}(e,i,m,h);case L:case G:return function(e,t,r,a){var o=jr(e,t),i=function(e){var t,r,a,o,i=e.aggregate,n=e.aggregateFieldType,l=e.filter,s=e.column,d=e.row,u=e.table,c=e.sumfield,g=e.chart_title||e.title,p=null===(t=e.color_palette)||void 0===t?void 0:t.value,m=$e(e.colors,\",\"),f=e.set_color,v=null===(r=e.color)||void 0===r?void 0:r.value;try{o=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(t){console.log(\"Unable to transform json 3\",t.toString(),e),o={}}var h=null===(a=e.report_source)||void 0===a?void 0:a.value,y=e.other_threshold,_=e.source_type,b=\"true\"===e.others,w=\"true\"===e.show_zero,T=\"true\"===e.display_column_lines,S=\"true\"===e.display_row_lines,A=\"true\"===e.pivot_expanded;return{aggregate:i,aggregateFieldType:n,filter:l,column:s,row:d,table:u,chartTitle:g,colorPalette:p,colors:m,singleColor:v,colorType:f,formattingConfiguration:o,reportSource:h,otherThreshold:y,sysId:e.sys_id,sourceType:_,aggregateField:c,showOthers:b,showZero:w,showColLines:T,showRowLines:S,showExpanded:A}}(t),n=function(e){var t,r=e.filter,a=e.formattingConfiguration,o=e.aggregate,i=e.aggregateFieldType,n=e.table,l=e.column,s=e.row,d=e.chartTitle,u=e.reportSource,c=e.otherThreshold,g=e.sysId,p=e.sourceType,m=e.showOthers,f=e.aggregateField,v=e.showHeader,h=e.showTitle,y=e.showBorder,_=e.showZero,b=e.showColLines,w=e.showRowLines,T=e.showExpanded,S=e.indexes,A=ht(r),F=ft(c),C=Ft(a,void 0,i,o),R=gt(n),I=mt(R),O={applyDateRange:!1,bareBorder:!1,colorConfig:{type:\"default\"},dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:A,id:R,reportSourceSysId:u,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===p||0===p.length?\"table\":p,tableOrViewName:n}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,freezeFirstColumn:!1,freezeFooter:!1,freezeHeader:!0,groupBy:[],headerTitle:h?d:\"\",hideMatrixAggregate:!1,metrics:[tt({aggregateField:f,aggregateFunction:(null==o?void 0:o.length)>0?o:\"COUNT\",axisId:\"primary\",dataSource:R,id:I},C)],newReporting:!0,numberOfPeriods:3,period:\"M\",scoreType:\"latest\",showAbsolutePeriod:!1,showAlternateColumnColors:!1,showAlternateRowColors:!0,showBorder:y,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showColumnAggregate:!0,showColumnDividers:b,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!0,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:v,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showPivotExpanded:T,showRowAggregate:!0,showRowDividers:w,showSecondGroupAggregate:!0,showSparkline:!1,showSubAggregate:!0,showTarget:!1,showThreshold:!1,showTotalAggregate:!0,showTrend:!1,showZero:_,sortBy:\"choice\",sortByOrder:\"asc\",telemetry:\"null\",truncateColumnHeader:!0,truncateFirstColumn:!0,wrapColumnHeader:!1,wrapTitle:!1},x=Lr($e(l,\",\"));try{for(x.s();!(t=x.n()).done;){var N=t.value;O.groupBy.push({categoryIndex:0,disableRanges:!0,groupBy:[{dataSource:R,groupByField:N,isChoice:!1,isPaBucket:!1,isRange:!1}],hideZeroValues:!1,maxNumberOfGroups:F,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:m})}}catch(e){x.e(e)}finally{x.f()}var B,E=Lr($e(s,\",\"));try{for(E.s();!(B=E.n()).done;){var P=B.value;O.groupBy.push({categoryIndex:1,disableRanges:!0,groupBy:[{dataSource:R,groupByField:P,isChoice:!1,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:\"ALL\"})}}catch(e){E.e(e)}finally{E.f()}var k=S.sys_report_mpivot_rule[g];if((null==k?void 0:k.length)>0){var D;O.colorConfig={type:\"singleColor\",values:[{color:null===(D=k[0].color_id)||void 0===D?void 0:D.value,metric:I,rules:[]}]};var M,L=Lr(k);try{for(L.s();!(M=L.n()).done;){var G,U,H=M.value;O.colorConfig.values[0].rules.push({operator:H.operator,order:100,color:null===(G=H.color_id)||void 0===G?void 0:G.value,value1:H.value1,value2:H.value2,backgroundColor:null===(U=H.bg_color_id)||void 0===U?void 0:U.value})}}catch(e){L.e(e)}finally{L.f()}}var J,j=Lr(O.metrics);try{for(j.s();!(J=j.n()).done;){var V=J.value;\"COUNT\"===V.aggregateFunction&&delete V.aggregateField}}catch(e){j.e(e)}finally{j.f()}return O}(tt(i,{d:e,indexes:r},_r(a)));return!n||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,n),{component_id:\"06f6aacbd1818110f877d87436272684\",component_props:n})}(e,i,m,h);case\"control\":case\"tbox\":return function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):(e.migrationNotes.push(ot({message:at(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),qt(e,t))}(e,i,0,h);case\"box\":return function(e,r,a,o){var i=function(e){var t,r=e.table,a=e.source_type,o=e.title,i=e.description,n=e.field,l=e.trend_field,s=e.additional_groupby,d=e.y_axis_title,u=e.x_axis_title,c=e.y_axis_opposite,g=e.y_axis_display_grid,p=e.y_axis_from,m=e.y_axis_to,f=e.x_axis_label_size,v=e.aggregate,h=e.aggregateFieldType,y=e.filter,_=e.sumfield,b=e.decimal_precision,w=e.formatting_configuration,T=e.type,S=e.trendMetadata,A=e.report_source;try{t=JSON.parse(\"\"==w||null==w?\"{}\":null!=w?w:\"null\")}catch(r){console.log(\"Unable to transform json 4\",r.toString(),e),t={}}var F=m||0===m;return{formattingConfiguration:t,chartTitle:o,description:i,sourceType:a,table:r,decimalPrecision:parseInt(b,10),groupBy:n,measuredBy:l,additionalGroupBy:s,yAxisTitle:d,yAxisPosition:\"false\"===c?\"left\":\"right\",yAxisShowGrid:\"true\"===g,yAxisFrom:p||0===p?parseInt(p,10):null,yAxisTo:F?parseInt(m,10):null,yAxisStyle:\"default\",xAxisTitle:u,xAxisMaxLabelSize:f,aggregate:v,aggregateFieldType:h,filter:y,aggregateField:_,type:T,trendMetadata:S,reportSource:null==A?void 0:A.value}}(r),n=function(e){var r,a=e.chartTitle,o=e.title,i=e.table,n=e.filter,l=e.showZero,s=e.description,d=e.formattingConfiguration,u=e.reportSource,c=e.aggregateField,g=e.showTitle,p=e.measuredBy,m=e.groupBy,f=e.yAxisTitle,v=e.yAxisPosition,h=e.yAxisShowGrid,y=e.yAxisFrom,_=e.yAxisTo,b=e.yAxisStyle,w=e.xAxisTitle,T=e.decimalPrecision,S=e.aggregateFieldType,A=e.aggregate,F=e.type,C=e.trendMetadata,R=gt(i),I=mt(R),O=\"value\",x=\"desc\";Ke(n,\"ORDERBY\")&&(O=\"name\",Ke(n,\"DESC\")||(x=\"asc\"));var N=Ft(d,T,S,A,F),B={chart:{type:\"boxplot\"},legend:{align:\"center\",enabled:!1,layout:\"horizontal\",verticalAlign:\"bottom\"},plotOptions:{boxplot:{fillColor:\"rgb(var(--now-datavis_color--accessibility-0, 255,255,255))\",lineWidth:1,medianWidth:2,stroke:\"rgb(var(--now-datavis_color--qualitative-0, 10,184,217))\",strokeWidth:\"1px\",whiskerWidth:2},series:{colorByPoint:!1,marker:{fillColor:\"rgb(var(--now-datavis_color--qualitative-1, 255,87,48))\",radius:4,symbol:\"circle\"}}},series:[{dataLabels:{enabled:!1}}],tooltip:{enabled:!0},xAxis:{categories:[],labels:{style:{textOverflow:\"ellipsis\",whitespace:\"nowrap\",width:\"100px\"}},lineColor:\"rgb(var(--now-datavis_color_chart--tertiary, 143,149,161))\",lineWidth:1,tickWidth:1,title:{},visible:!0},yAxis:{gridLineWidth:!0,labels:{enabled:!0,style:{lineWidth:1,tickWidth:0}},lineWidth:0,min:0,opposite:!1,tickWidth:0,title:{text:\"\".concat(i,\" \").concat((null==C?void 0:C.label)||\"\")},visible:!0}};return Yr(r={filterConfigurations:\"@state.parFilters\",scoreSize:\"auto\",sparklineStyle:\"area\",scoreIcon:\"\",iconStyle:\"background\",showScoreDate:!1,useRelativeScoreTime:!1,showScoreUpdateTime:!1,showZero:\"true\"===l,newReporting:!1,showHeader:!0,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,showBorder:!0,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,sortBy:O,sortByOrder:x,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:!1,period:\"M\",dateFormat:\"default\",description:s,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,colorConfig:{type:\"default\"},dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:i,filterQuery:ht(n),reportSourceSysId:u,preferredVisualizations:[t],id:R,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[tt({dataSource:R,id:I,aggregateFunction:(null==A?void 0:A.length)>0?A:\"COUNT\",aggregateField:\"COUNT\"===A?void 0:c,axisId:\"primary\",label:o},N)]},\"groupBy\",[{categoryIndex:0,groupBy:[{dataSource:R,groupByField:m,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1},{categoryIndex:1,groupBy:[{dataSource:R,groupByField:p,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1}]),Yr(r,\"headerTitle\",g?a:\"\"),Yr(r,\"backgroundRefreshInterval\",\"\"),Yr(r,\"chartInteractionEnabled\",!0),Yr(r,\"chartInteractionAction\",\"goToData\"),Yr(r,\"config\",B),Yr(r,\"yAxisHidden\",!1),Yr(r,\"yAxisTitle\",f),Yr(r,\"yAxisPosition\",v),Yr(r,\"yAxisShowGrid\",h),Yr(r,\"yAxisFrom\",y),Yr(r,\"yAxisTo\",_),Yr(r,\"yAxisStyle\",b),Yr(r,\"xAxisTitle\",w),r}(tt(i,_r(o)));return n?(Or(r,0,n),{component_id:\"c5d01636ff2602109bd2ffffffffff0a\",component_props:n}):e.migratingFromJava&&o?(e.migrationNotes.push(ot({message:at(\"Something went wrong with new properties.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),rt(r,o)):Qt(Qe)(e,r,a,o)}(e,i,m,h);case\"pareto\":return function(e,t,r,a){if(jr(e,t))return e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a);var o=function(e,t,r){var a=Hr(e,t,r);return\"palette\"===a.colorConfig.type&&(t.migrationNotes.push(ot({message:at(\"This content was migrated with the default color palette. Custom palettes are not currently supported for the {0} visualization in Platform Analytics.\",e.title),level:2,originalArtifactSysId:null==e?void 0:e.sys_id,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags})),a.colorConfig.type=\"default\"),a.yAxisStyle=\"clean\",a}(tt(t,_r(a)),e,r);return Or(t,0,o),{component_id:g,component_props:o}}(e,i,m,h);case\"hist\":case\"funnel\":case\"pyramid\":case\"map\":return function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):(e.migrationNotes.push(ot({message:at(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),qt(e,t))}(e,i,0,h);case\"bar\":case U:case H:return function(e,t,r,a){if(jr(e,t))return e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a);var o=Hr(tt(t,_r(a)),e,r);return Or(t,0,o),{component_id:\"bar\"===t.type?c:\"85855283b7e03010097cb81cde11a91d\",component_props:o}}(e,i,m,h);case J:return function(e,t,r,a){var o=jr(e,t),i=function(e,t){var r,a,o,i,n,l,s,d,u,c=gt(e.table),g=mt(c),p={type:\"default\"};\"true\"===e.use_color_heatmap&&\"65b303c7a9fe3dba00629aff95ee3597\"!==(null===(r=e.axis_min_color)||void 0===r?void 0:r.value)&&\"b0d449b3d7332100fa6c0c12ce610383\"!==(null===(a=e.axis_max_color)||void 0===a?void 0:a.value)&&null!==(o=e.axis_min_color)&&void 0!==o&&o.value&&null!==(i=e.axis_max_color)&&void 0!==i&&i.value&&(p={type:\"colorRange\",values:[{color:null===(d=e.axis_min_color)||void 0===d?void 0:d.value,id:\"minColor\"},{color:null===(u=e.axis_max_color)||void 0===u?void 0:u.value,id:\"maxColor\"}]});var m=Ft(JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration),parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregate,e.type),f=12;\"-1\"===e.other_threshold?f=\"ALL\":e.other_threshold>-2&&(f=e.other_threshold);var v=vt(e.filter);return{showZero:\"true\"===e.show_zero,showDataLabels:\"true\"===e.show_chart_data_label,showLegend:!0,legendPosition:\"bottom\",colorConfig:p,newReporting:!1,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:ht(e.filter),reportSourceSysId:null===(n=e.report_source)||void 0===n?void 0:n.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:c,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?null!==(l=e.name)&&void 0!==l?l:e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[tt({dataSource:c,id:g,aggregateFunction:(null===(s=e.aggregate)||void 0===s?void 0:s.length)>0?e.aggregate:\"COUNT\",aggregateField:\"COUNT\"!==e.aggregate?e.sumfield:void 0,axisId:\"primary\"},m)],groupBy:[{categoryIndex:0,groupBy:[{dataSource:c,groupByField:e.column,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:f,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:\"true\"===e.others,disableRanges:!1},{categoryIndex:1,groupBy:[{dataSource:c,groupByField:e.row,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:f,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,disableRanges:!1}],sortBy:v.sortBy,sortByOrder:v.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",configVersion:\"23.0.0-ci-SNAPSHOT\"}}(tt(t,_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_props:i,component_id:p})}(e,i,m,h);case j:return function(e,t,r,a){var o=jr(e,t),i=function(e){var t,r=e.aggregate,a=e.aggregateFieldType,o=e.filter,i=e.table,n=e.sumfield,l=e.direction,s=e.chart_title||e.title,d=null===(t=e.report_source)||void 0===t?void 0:t.value,u=e.source_type;return{decimalPrecision:parseInt(e.decimal_precision,10),sourceType:u,reportSource:d,chartTitle:s,aggregate:r,aggregateFieldType:a,filter:o,table:i,sumfield:n,autoScale:\"true\"===e.gauge_autoscale,lowerLimit:e.lower_limit,upperLimit:e.upper_limit,direction:l,from:parseInt(e.from,10),to:parseInt(e.to,10)}}(t),n=function(e){var t,r=e.decimalPrecision,a=e.sourceType,o=e.reportSource,i=e.chartTitle,n=e.aggregate,l=e.aggregateFieldType,s=e.filter,d=e.table,u=e.sumfield,c=e.autoScale,g=e.lowerLimit,p=e.upperLimit,m=e.direction,f=e.showHeader,v=e.showTitle,h=e.showBorder,y=e.from,_=e.to,b=(e.indexes,vt(s)),w=ht(s),T=Ft(void 0,r,l,n),S=gt(d),A=mt(S),F={applyDateRange:!1,bareBorder:!1,configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:w,id:S,isDatabaseView:!1,reportSourceSysId:o,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===a||0===a.length?\"table\":a,tableOrViewName:d}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,gaugeArcAngle:\"180\",groupBy:null,headerTitle:v?i:\"\",hideMatrixAggregate:!1,innerRadius:.7,maxValue:_,metrics:[tt({aggregateFunction:(null===(t=e.aggregate)||void 0===t?void 0:t.length)>0?e.aggregate:\"COUNT\",axisId:\"primary\",dataSource:S,id:A},T)],minValue:y,newReporting:!1,numberOfPeriods:3,period:\"M\",rangesConfig:{},scoreLabel:\"none\",scoreType:null,showAbsolutePeriod:!1,showBorder:h,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:f,showHeaderSeparator:!1,showLabelFirst:!1,showMaximumRange:!1,showMetricLabel:!1,showRangeLabels:!1,showRangeLimit:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,showZero:!0,sortByOrder:b.sortByOrder,telemetry:\"null\",trendBy:null,valueLabelSize:\"md\",wrapTitle:!1};return c&&(F.minValue=0,F.maxValue=null),u&&\"COUNT\"!==n&&\"\"!==u&&(F.metrics[0].aggregateField=u),(null==p?void 0:p.length)>0&&g.length>0&&(F.rangesConfig={data:[{label:\"Lower Limit\",maxValue:g,order:0},{label:\"Upper Limit\",maxValue:p,minValue:g,order:1},{minValue:p,order:2}],type:\"maximize\"===m?\"red_to_green\":\"green_to_red\"}),F}(tt(i,{d:e,indexes:r},_r(a)));return!n||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,n),{component_id:f,component_props:n})}(e,i,m,h);case V:return function(e,t,r,a){var o=jr(e,t),i=function(e,t){var r,a,o,i=gt(e.table),n=mt(i),l={type:\"default\"};if(e.upper_limit&&\"\"!==e.upper_limit&&e.lower_limit&&\"\"!==e.lower_limit){var s=y,d=_;\"minimize\"!==e.direction&&(s=_,d=y);var u=parseInt(e.upper_limit,10);l={type:\"singleColor\",values:[{color:\"fec1eb7b9f5c73001bb9baac757fcf6c\",metric:n,rules:[{operator:\"<\",order:100,color:s,value1:parseInt(e.lower_limit,10)},{operator:\"<\",order:200,color:\"65b30254a9fe3dba00b44ce0710382b3\",value1:u},{operator:\">=\",order:300,color:d,value1:u}]}]}}var c=Ft(JSON.parse(e.formatting_configuration||\"{}\"),parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregate,e.type);return{applyDateRange:!1,bareBorder:!1,colorConfig:l,configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:ht(e.filter),reportSourceSysId:null===(r=e.report_source)||void 0===r?void 0:r.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:i,dataCategories:[\"trend\",\"group\",\"simple\"]}],dateFormat:\"default\",description:\"\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,followFilters:!0,groupBy:null,headerTitle:e.showTitle?e.title:\"\",hideMatrixAggregate:!1,innerRadius:.7,metrics:[tt({dataSource:i,id:n,aggregateFunction:(null===(a=e.aggregate)||void 0===a?void 0:a.length)>0?e.aggregate:\"COUNT\",aggregateField:null!==(o=e.aggregate)&&void 0!==o&&o.startsWith(\"COUNT\")?void 0:e.sumfield,axisId:\"primary\"},c)],minValue:\"true\"!==e.gauge_autoscale&&e.from&&\"\"!==e.from?e.from:0,maxValue:\"true\"!==e.gauge_autoscale&&e.to&&\"\"!==e.to?e.to:void 0,newReporting:!1,numberOfPeriods:3,period:\"M\",scoreType:null,showAbsolutePeriod:!1,showBorder:e.showBorder,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:e.showHeader,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,showZero:!0,sortByOrder:\"desc\",telemetry:\"null\",trendBy:null,valueLabelSize:\"md\",wrapTitle:!1}}(tt(t,_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_id:\"63f050cf050137731a828878839e0b33\",component_props:i})}(e,i,m,h);case\"bubble\":return function(e,t,r,a){var o=jr(e,t);if((null==t?void 0:t.aggregate)===ct)return e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"<b>Unsupported Aggregation:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==t?void 0:t.type,\"</span> report because Standard Deviation aggregation is not supported.\"))});var i=function(e,t,r){var a,o,i=gt(t.table),n=mt(i),l=Ft(\"\"===t.formatting_configuration?\"{}\":t.formatting_configuration);switch(t.legend_horizontal_alignment){case\"right\":case\"left\":o=t.legend_horizontal_alignment;break;default:o=\"bottom\"}var s=vt(t.filter);return{additionalGroupByConfig:[],applyDateRange:!1,bareBorder:!1,colorConfig:{type:\"default\"},contextMenuActions:[],dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:ht(t.filter),id:i,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"table\",tableOrViewName:t.table}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:[{categoryIndex:0,disableRanges:!1,groupBy:[{dataSource:i,groupByField:t.column,isChoice:!1,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1},{categoryIndex:1,disableRanges:!1,groupBy:[{dataSource:i,groupByField:t.row,isChoice:!0,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1},\"\"!==t.field&&t.field?{categoryIndex:2,disableRanges:!1,groupBy:[{dataSource:i,groupByField:t.field,isChoice:!0,isPaBucket:!1,isRange:!1}],hideZeroValues:!1,maxNumberOfGroups:10,showOthers:\"true\"===t.others,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\"}:{disableRanges:!1}],hideMatrixAggregate:!1,legendPosition:o,metrics:[tt({aggregateFunction:(null===(a=t.aggregate)||void 0===a?void 0:a.length)>0?t.aggregate:\"COUNT\",aggregateField:\"COUNT\"!==t.aggregate?t.sumfield:void 0,axisId:\"primary\",dataSource:i,id:n},l)],newReporting:!1,numberOfPeriods:3,noDebounce:!1,period:\"M\",scoreType:null,showAbsolutePeriod:!1,showAdditionalGroupBySelector:!1,showBorder:!0,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:t.showHeader,headerTitle:t.showTitle?t.title:\"\",showHeaderSeparator:!1,showLegend:\"true\"===t.show_legend,showMaximumRange:!1,showMetricLabel:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:s.sortBy,sortByOrder:s.sortByOrder,telemetry:null,wrapTitle:!1}}(0,tt(t,_r(a)));return!i||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,i),{component_id:\"50dbc52a13c8b4691f7c60e0246bf28c\",component_props:i})}(e,i,m,h);case\"calendar\":return function(e,t,r,a){var o,i,n=jr(e,t),l={table:(o=tt(t,_r(a))).table,reportSource:null===(i=o.report_source)||void 0===i?void 0:i.value,encodedQuery:o.filter,startDateField:o.trend_field,endDateField:\"\",eventDisplayFields:Jr(o.field_list),componentTitle:o.title,followFilters:!0,showFilterOverview:!0,showDescription:!0,componentDescription:\"\",viewType:\"MONTH\",eventColor:\"\",filterConfigurations:[]};return!l||n?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,l),{component_id:v,component_props:l})}(e,i,m,h);case z:return function(e,t,r,a){var o=jr(e,t),i=wr(t);if((null==i?void 0:i.aggregateType)===ct)return e.migratingFromJava&&a?rt(t,a):zt(e,{static_content:q(\"<b>Unsupported Aggregation:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==t?void 0:t.type,\"</span> report because Standard Deviation aggregation is not supported.\"))});var n=function(e){var t=kt(e);if(t)return t.extensionType=\"bar\",t.legendExpandToFit=!1,t}(tt(i,{d:e,indexes:r},_r(a)));return!n||o?e.migratingFromJava&&a?rt(t,a):Qt(Qe)(e,t,r,a):(Or(t,0,n),{component_id:l,component_props:n})}(e,i,m,h);default:return e.migratingFromJava&&h?rt(i,h):zt(e,{static_content:q(\"<b>Unknown report type:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==i?void 0:i.type,\"</span> report because there is no mapping.\"))})}}(i,h,b,w);S&&S.component_id!==m&&S.component_id!==e&&Zt(h,b,S);var A=Ke(Y,h.type);return S&&S.component_id!==m&&S.component_id!==e&&A&&function(e,t,r,a,o){var i,n,l,s,d;if(null!=e&&null!==(i=e.report_drilldown)&&void 0!==i&&i.value){var u,c,g,p,m=null==e||null===(n=e.report_drilldown)||void 0===n?void 0:n.value,f=null===(l=r.sys_id[m])||void 0===l?void 0:l[0],v=Wr(a,f,r,o);u=t,c=null==t||null===(s=t.metrics)||void 0===s||null===(d=s[0])||void 0===d?void 0:d.id,(g=v).component_props.label=null===(p=g.component_props)||void 0===p?void 0:p.headerTitle,u.chartInteractionEnabled=!0,u.chartInteractionAction=\"drillDownToChart\",u.chartToChart={},u.chartToChart[c]={macroponentId:g.component_id,properties:g.component_props}}}(h,S.component_props,b,i,w),S},Qr=function Qr(e,t,r,a){var o,n=kr(e,t,r,a);if(n)return n;switch(null==t?void 0:t.type){case 6:case\"6\":return\"true\"!==(null===(o=e.featureFlags)||void 0===o?void 0:o.cascadingFilter)&&e.migratingFromJava?Qt(Ze)(e,t,r,a):function(e,t,r,a){var o,n,l,s,d,u,c=void 0!==r.filter_reference[t.sys_id]&&r.filter_reference[t.sys_id].length>0?r.filter_reference[t.sys_id][0]:{},g=cr(c,e,r);if(!g)return unsupportedFilterMigration(e,t,r,void 0);g.cascading_filter=c,g.cascading_filter_target=r.filter_cascading_target[g.cascading_filter.sys_id],g.child_filters=[],g.filterCanvasOrder={};for(var p=g.cascading_filter.sys_id,m=0;r.filter_cascading[p];){var f;g.filterCanvasOrder[p]=m,m++;var v=r.filter_cascading[p][0];v.component_id=i;var h=v.sys_id,y=!(null!==(f=r.filter_cascading[h])&&void 0!==f&&f.length||\"true\"!==t.allow_extended_table&&!0!==t.allow_extended_table);v.component_props=cr(v,e,r,y),g.child_filters.push(v),p=h}g.filterCanvasOrder[p]=m,g.targets||(g.targets=[]);var _=null===(o=g.child_filters)||void 0===o||null===(n=o.filter(function(e){return e.parent.value===g.cascading_filter.sys_id})[0])||void 0===n?void 0:n.table,b=null===(l=g.child_filters)||void 0===l||null===(s=l.filter(function(e){return e.parent.value===g.cascading_filter.sys_id})[0])||void 0===s?void 0:s.conditions,w=null===(d=g.child_filters)||void 0===d||null===(u=d.filter(function(e){return e.parent.value===g.cascading_filter.sys_id})[0])||void 0===u?void 0:u.cascading_filter_reference_field;return g.targets.push(sr(_,\"\",w,\"\",\"reference\",b)),g.child_filters.forEach(function(e){if(0===e.component_props.targets.length){var t,r,a;e.component_props.targets=[];var o=null===(t=g.child_filters.filter(function(t){return t.parent.value===e.sys_id})[0])||void 0===t?void 0:t.table,i=null===(r=g.child_filters.filter(function(t){return t.parent.value===e.sys_id})[0])||void 0===r?void 0:r.cascading_filter_reference_field,n=null===(a=g.child_filters.filter(function(t){return t.parent.value===e.sys_id})[0])||void 0===a?void 0:a.conditions;e.component_props.targets.push(sr(o,\"\",i,\"\",\"reference\",n))}}),{component_id:i,component_props:g}}(e,t,r);default:return vr(e,t,r)}};function Zr(e){return Zr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Zr(e)}function Xr(e,t,r){return t=function(e){var t=function(e,t){if(\"object\"!=Zr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,\"string\");if(\"object\"!=Zr(a))return a;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==Zr(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kr=(Xr(qr={},$,function(e,t,r,a){return Wr(e,t,r,a)}),Xr(qr,Je,function(e,t,r,a){return Kr[$](e,t,r,a)}),Xr(qr,te,function(e,t,r){return Nr(e,t,r)}),Xr(qr,ee,function(e,t,r,a){return Dr(e,t,r,a)}),Xr(qr,re,function(e,t,r,a){return Kr[ee](e,t,r,a)}),Xr(qr,oe,function(e,t,r,a){return Kr[ee](e,t,r,a)}),Xr(qr,ie,function(e,t,r,a){return Kr[re](e,t,r,a)}),Xr(qr,ue,Qt(Ze)),Xr(qr,ce,Qt(Ze)),Xr(qr,ge,Qr),Xr(qr,pe,Qr),Xr(qr,me,Qr),Xr(qr,fe,Qr),Xr(qr,ve,Qr),Xr(qr,he,Qt(Ze)),Xr(qr,ye,Qt(Ze)),Xr(qr,ae,function(e,t,r,a){return\"true\"===(null==t?void 0:t.is_compare_chart)?e.migratingFromJava&&a?rt(t,a):(e.migrationNotes.push(ot({message:at(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),Wt(e,t)):Kr[re](e,t,r,a)}),Xr(qr,Z,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,X,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,ne,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,le,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,se,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,_e,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,be,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,we,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Te,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Se,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ae,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Fe,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ce,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Re,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ie,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Oe,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,xe,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ne,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Be,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ee,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Pe,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,ke,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,De,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Me,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Le,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ge,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ue,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,He,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,je,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ve,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,ze,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Ye,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,qe,function(e,t,r,a){return e.migratingFromJava&&a?rt(t,a):Qt(We)(e,t,r,a)}),Xr(qr,Q,zt),qr);function $r(r){var a=[ue,ce,ge,pe,me,fe,ve,he,ye],o=[le,ae,$,Je,ee,re,oe,ie],n=[Z,Q,X],l=[\"4ffa0563c0a80006004a70868bf1dc6c\",\"5003ffe3c0a80006008c5655e98bf520\",\"50578ef9c0a80006005ee11e0d61cb8f\",\"4ffb9d1ec0a8000600198cd7a8117d25\"];return function(s,d,u,c){var g,p,m,f,v,h=W(null==c||null===(g=c.type)||void 0===g?void 0:g.value,null==c||null===(p=c.renderer)||void 0===p?void 0:p.value,null==d?void 0:d.type);return\"-2\"===(null==c||null===(m=c.sys_id)||void 0===m?void 0:m.value)&&-1!==a.indexOf(h)?{component_id:i,component_props:{filterName:\"Label\",filterComponentType:\"singleselect\",dateFilterView:\"calendar-reldates\",sort:\"ASC\",filterElementType:\"pill\",isShowSelectedValueInPill:!0,filterElementLayout:\"vertical\",enableResetToDefault:!1,enableClearFilter:!0,maxElements:500,filterConfigurations:\"@state.parFilters\",contextMenuActions:[],noDebounce:!0,selectedElements:[]}}:\"-1\"===(null==c||null===(f=c.sys_id)||void 0===f?void 0:f.value)&&-1!==o.indexOf(h)?{component_id:t,component_props:{configVersion:\"23.0.0-ci-SNAPSHOT\",filterConfigurations:\"@state.parFilters\",scoreSize:\"md\",headingPosition:\"top\",sparklineStyle:\"area\",scoreIcon:\"\",iconStyle:\"background\",showScoreDate:!1,useRelativeScoreTime:!1,showScoreUpdateTime:!1,showZero:!0,newReporting:!0,showHeader:!0,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,showBorder:!0,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,sortByOrder:\"desc\",showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",groupBy:null,trendBy:null}}:-1!==l.indexOf(null==c||null===(v=c.sys_id)||void 0===v?void 0:v.value)&&-1!==n.indexOf(h)?{component_id:e,component_props:{}}:r.apply(this,[s,d,u,c])}}for(var ea in Kr)\"function\"==typeof Kr[ea]&&(Kr[ea]=$r(Kr[ea]));var ta=function ta(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;switch(null==e?void 0:e.type){case t:case\"single_score\":return ra(e,r,{minHeight:7});case\"score\":if(\"template1\"===e.template||\"\"===e.template||\"template2\"===e.template)return ra(e,r,{minHeight:14});break;case v:case\"calendar\":return ra(e,r,{minHeight:62,minWidth:32})}return ra(e,r,{childComponentCount:a+1,order:o})},ra=function ra(e,t,r){var a,o,i,n=r.xFactor,l=void 0===n?4:n,s=r.yFactor,d=void 0===s?4:s,u=r.hFactor,c=void 0===u?1.7:u,g=r.wFactor,p=void 0===g?4:g,m=r.minHeight,f=r.minWidth,v=r.childComponentCount,h=void 0===v?1:v,y=r.order,_=void 0===y?0:y;function b(){var r;return h<1&&(h=1),(null!==(r=null==e?void 0:e.pane)&&void 0!==r?r:t).height*c/h}var w={x:(null!==(a=null==e?void 0:e.pane)&&void 0!==a?a:t).posx*l,y:(null!==(o=null==e?void 0:e.pane)&&void 0!==o?o:t).posy*d+_*Math.round(b()),h:b(),w:(null!==(i=null==e?void 0:e.pane)&&void 0!==i?i:t).width*p};return m&&w.h<m&&(w.h=m),f&&w.h<f&&(w.w=f),w};function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}global.window={},this.run=function(e,t,r,a){t.migrationNotes=[],\"true\"!==(null==a?void 0:a.translatedLogs)&&t.migrationNotes.push(\"<b>Dashboard Migration Logs:</b>\"),t.name&&\"\"!==t.name||(t.name=\"Untitled\"),t.migratingFromJava=r,t.featureFlags=a,function(e){var t,r,a;(null===(t=e.restrict_to_roles)||void 0===t?void 0:t.length)>0&&!e.migratingFromJava&&e.migrationNotes.push(ot({message:ar,level:1,originalArtifactSysId:e.sys_id,artifactTable:e.sys_table_name,featureFlags:e.featureFlags})),(null===(r=e.group)||void 0===r||null===(a=r.value)||void 0===a?void 0:a.length)>0&&!e.migratingFromJava&&e.migrationNotes.push(ot({message:or,level:1,originalArtifactSysId:e.sys_id,artifactTable:e.sys_table_name,featureFlags:e.featureFlags}))}(t);var o=e.dashboard[t.sys_id],n=\"\";t.migratingFromJava||(n=\"untitled\"),void 0===o&&(o=[]);var l=o.filter(function(e){return\"pa_m2m_dashboard_tabs\"===e.sys_table_name}).sort(function(e,t){return e.order-t.order}).map(function(r){var a,o,i,l,s,d,u,c,g,p=null===(a=r.tab)||void 0===a?void 0:a.value,m=null===(o=e.sys_id[p])||void 0===o?void 0:o[0];m.name=m.name.replace(b,\"\"),console.info(\"Found tab\",p,m);var f,v,h,y,_,w=null===(i=e.sys_id[null==m||null===(l=m.page)||void 0===l?void 0:l.value])||void 0===i?void 0:i[0];f=null!=m&&null!==(s=m.canvas_page)&&void 0!==s&&s.value?null===(v=e.sys_id[null==m||null===(h=m.canvas_page)||void 0===h?void 0:h.value])||void 0===v?void 0:v[0]:null===(y=e.legacy_page[null==m||null===(_=m.page)||void 0===_?void 0:_.value])||void 0===y?void 0:y[0];var T=null!==(d=null===(u=e.grid_canvas[null===(c=f)||void 0===c?void 0:c.sys_id])||void 0===u?void 0:u.filter(function(e){return\"sys_grid_canvas_pane\"===e.sys_table_name}))&&void 0!==d?d:[];console.info(\"Found\",T.length,\"panes\",\"grid_canvas\",e.grid_canvas[null===(g=f)||void 0===g?void 0:g.sys_id],\"canvas\",f);var S=T.map(function(r){var a,o,i,l,s,d,u,c,g,p,m,f,v=\"sys_portal\"===r.sys_table_name?r.sys_id:null==r||null===(a=r.portal_widget)||void 0===a?void 0:a.value;if(v){console.info(\"Migrating portal_widget\",v);var h=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(function(t,r){return t[r[e]]=r,t},{})}(\"name\",e.portal_section[v]);if(h&&0!==Object.keys(h).length){!function(e,t){var r;null===(r=t.sys_id)||void 0===r||r.value,(t.title_color||t.header_color)&&e.migrationNotes.push(ot({message:ir,level:1,originalArtifactSysId:e.sys_id,artifactTable:e.sys_table_name,featureFlags:e.featureFlags}))}(t,h),h.portal_widget_sys_id=v;var y,_=null===(o=h.sys_id)||void 0===o?void 0:o.value;if(!_&&null!==(i=h.report_id)&&void 0!==i&&i.value?_=null===(y=h.report_id)||void 0===y?void 0:y.value:_?\"-1\"===_&&t.migrationNotes.push(ot({message:at(\"This content was not configured and is migrated as an unconfigured visualization.\"),level:2,originalArtifactSysId:r.sys_id,artifactTable:r.sys_table_name,tooltip:at(\"Configure this content in the Visualization Designer.\"),debugInfo:\"portal_widget_sys_id: \".concat(v),featureFlags:t.featureFlags})):t.migrationNotes.push(ot({message:at(\"The dashboard has a missing layout configuration record.\"),level:2,originalArtifactSysId:r.sys_id,artifactTable:r.sys_table_name,debugInfo:\"portal_widget_sys_id: \".concat(v),featureFlags:t.featureFlags})),console.info(\"Migrating pa_widget\",_),e.overrideMap&&e.overrideMap[_]){var b,w=e.overrideMap[_][0],T=w.sys_id,S=w.properties,A=w.macroponent,F=w.sys_domain,C=w.sys_domain_path,R=w.sys_name,I=ta({type:null==A?void 0:A.value},r),O=n;R&&(O=R),console.info(\"Got override for widget\",_,e.overrideMap[_]);try{b=\"string\"==typeof S?JSON.parse(S):S}catch(e){b=S}var x={sys_id:v,pane:r,domain:{domainSysId:null==F?void 0:F.value,domainPath:C},migrationRaw:tt(I,{stored_component_sys_id:T,component_props:b,component_id:null==A?void 0:A.value,portal_sys_id:v,stored_component_name:O}),widget_type:\"stored_component\",_override:e.overrideMap[_][0]};return function(e,t,r){for(var a=[$t,Vt],o=t,i=0;i<a.length;i++)o=a[i](e,o,r);return o}(t,x,h)}var N,B,E=null===(l=e.sys_id[_])||void 0===l?void 0:l[0];E||console.error(\"No widget found for preferences, trying to migrate anyway\",_),null!==(s=h.type)&&void 0!==s&&s.value&&(null==E?void 0:E.type)!==(null===(d=h.type)||void 0===d?void 0:d.value)&&\"pa_widgets\"===(null==E?void 0:E.sys_table_name)&&\"pa_widgets\"!==(null===(u=h.type)||void 0===u?void 0:u.value)&&(console.warn(\">> [CORRUPT PREFERENCES] Preference type: \",null===(N=h.type)||void 0===N?void 0:N.value,\" does not match widget type: \",E.type,\" Replacing preferences type with widget type for widget: \",E.sys_name),t.migrationNotes.push(\"[CORRUPT PREFERENCES] Preference type: \".concat(null===(B=h.type)||void 0===B?void 0:B.value,\" does not match widget type: \").concat(E.type,\". Replacing preferences type with widget type for widget: \").concat(E.sys_name)),h.type.value=E.type);var P,k,D=Kr[W(null==h||null===(c=h.type)||void 0===c?void 0:c.value,null==h||null===(g=h.renderer)||void 0===g?void 0:g.value,null==E?void 0:E.type)];if(!D&&(null!=E&&E.type||null!=h&&null!==(p=h.type)&&void 0!==p&&p.value||null!=h&&null!==(m=h.renderer)&&void 0!==m&&m.value)&&(D=Yt),D){var M,L,G,U,H,J,j,V,z,Y;try{Y=D(t,E,e,h)}catch(e){if(!t.migratingFromJava||!h)throw e;Y=rt(E,h)}var q,Q,Z,X,K,$,ee,te,re,ae,oe,ie,ne=ta(E,r,null===(M=Y)||void 0===M||null===(L=M.component_props)||void 0===L||null===(G=L.child_filters)||void 0===G?void 0:G.length,null===(U=Y)||void 0===U||null===(H=U.component_props)||void 0===H||null===(J=H.filterCanvasOrder)||void 0===J?void 0:J[null===(j=Y)||void 0===j||null===(V=j.component_props)||void 0===V||null===(z=V.cascading_filter)||void 0===z?void 0:z.sys_id]);return E?{sys_id:v,pane:r,widget:tt(E,{pane:r}),domain:{domainSysId:null==E||null===(q=E.sys_domain)||void 0===q?void 0:q.value,domainPath:null==E?void 0:E.sys_domain_path},migrationRaw:tt(ne,Y,{originalSysId:null==E?void 0:E.sys_id,component_props:null===(Q=Y)||void 0===Q?void 0:Q.component_props,widget_type:\"\".concat(W(null==h||null===(Z=h.type)||void 0===Z?void 0:Z.value,null==h||null===(X=h.renderer)||void 0===X?void 0:X.value,null==E?void 0:E.type),\"###\").concat(null==E?void 0:E.type),stored_component_name:null!==(K=null==E?void 0:E.sys_name)&&void 0!==K?K:n}),migrationRawAdditionalComponents:null===($=Y)||void 0===$||null===(ee=$.component_props)||void 0===ee||null===(te=ee.child_filters)||void 0===te?void 0:te.map(function(e,t){var a,o,i,l,s,d,u,c,g,p;return{sys_id:v,pane:r,widget:tt(E,{pane:r}),domain:{domainSysId:null==E||null===(a=E.sys_domain)||void 0===a?void 0:a.value,domainPath:null==E?void 0:E.sys_domain_path},migrationRaw:tt(ta(E,r,null===(o=Y)||void 0===o||null===(i=o.component_props)||void 0===i||null===(l=i.child_filters)||void 0===l?void 0:l.length,null===(s=Y)||void 0===s||null===(d=s.component_props)||void 0===d||null===(u=d.filterCanvasOrder)||void 0===u?void 0:u[null==e?void 0:e.sys_id]),Y,{originalSysId:null==e?void 0:e.sys_id,component_props:null==e?void 0:e.component_props,widget_type:\"\".concat(W(null==h||null===(c=h.type)||void 0===c?void 0:c.value,null==h||null===(g=h.renderer)||void 0===g?void 0:g.value,null==E?void 0:E.type),\"###\").concat(null==E?void 0:E.type),stored_component_name:null!==(p=null==e?void 0:e.sys_name)&&void 0!==p?p:n})}})}:{sys_id:v,pane:r,widget:{pane:r,preferences:h},migrationRaw:tt(ne,Y,{originalSysId:v,component_props:null===(re=Y)||void 0===re?void 0:re.component_props,preferences:h,widget_type:\"\".concat(W(null==h||null===(ae=h.type)||void 0===ae?void 0:ae.value,null==h||null===(oe=h.renderer)||void 0===oe?void 0:oe.value,null==E?void 0:E.type),\"###\").concat(null==E?void 0:E.type),stored_component_name:null!==(ie=null==E?void 0:E.sys_name)&&void 0!==ie?ie:n})}}if(console.error(\"Found not transformer for\",W(null==h||null===(P=h.type)||void 0===P?void 0:P.value,null==h||null===(k=h.renderer)||void 0===k?void 0:k.value,null==E?void 0:E.type),_),0===Object.keys(h).length){for(var le in e.portal_section)Object.keys(e.portal_section[le]).length;t.migrationNotes.push(ot({message:at(\"The dashboard has missing preferences configuration.\"),level:2,originalArtifactSysId:r.sys_id,artifactTable:r.sys_table_name,debugInfo:\"portal_widget_sys_id: \".concat(v),featureFlags:t.featureFlags}))}return{sys_id:v,domain:{domainSysId:null==E||null===(f=E.sys_domain)||void 0===f?void 0:f.value,domainPath:null==E?void 0:E.sys_domain_path},pane:r,widget:E,preferences:h}}}else console.info(\">>>> Dashboard\",t.name,\"has issue: Missing widget\",t.sys_id,v,\"You can probably ignore this if the dashboard is a duplicate\")}).filter(function(e){return e});return console.log(\">>> Migrated\",null==S?void 0:S.length,\"widgets for dashboard\",null==t?void 0:t.name,\"tab\",null==m?void 0:m.name),{tab:m,page:w,widgets:S}}),s=o.filter(function(e){return\"pa_m2m_dashboard_sources\"===e.sys_table_name}).map(function(r,a){var o,n,l,s,d,u=(null===(o=e.sys_id[null==r||null===(n=r.breakdown_source)||void 0===n?void 0:n.value])||void 0===o?void 0:o[0])||{},c=(e.dimension[u.sys_id]||[]).reduce(function(e,t){return e.some(function(e){return e.sys_id===t.sys_id})||e.push(t),e},[]),g=[],p=function(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(\"string\"==typeof e)return aa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aa(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e14){throw _e14},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n7=!0,l=!1;return{s:function s(){r=r.call(e)},n:function n(){var e=r.next();return _n7=e.done,e},e:function e(_e15){l=!0,i=_e15},f:function f(){try{_n7||null==r[\"return\"]||r[\"return\"]()}finally{if(l)throw i}}}}(c);try{for(p.s();!(d=p.n()).done;){var m,f=d.value,v=null===(m=e.breakdown[f.sys_id])||void 0===m?void 0:m.filter(function(e){return\"pa_breakdown_mappings\"===e.sys_table_name});null!=v&&v.length&&(g=g.concat(v))}}catch(e){p.e(e)}finally{p.f()}var h=function(e,t,r){var a,o,i=e.uniqueBreakdowns.map(function(e){return{breakdownSysId:e.sys_id,breakdownType:e.type}}),n=r.indicator_breakdowns,l=[],s=nr(i);try{for(s.s();!(o=s.n()).done;){var d=o.value;fr(d,n)&&l.push(d)}}catch(e){s.e(e)}finally{s.f()}var u=e.uniqueMappings.map(function(e){return{mappingTable:e.facts_table,field:e.field,fieldType:e.fieldType}}),c=e.dimension,g=c.name,p=c.facts_table,m=e.dashboardBreakdown,f=m.sys_id,v=(m.sys_name,e.linkedInteractiveFilter),h=gr({name:g,sys_id:f});function y(e){switch(e){case\"1\":case 1:return\"AUTOMATED\";case\"2\":case 2:return\"MANUAL\";case\"3\":case 3:return\"EXTERNAL\"}}var _={breakdownSysId:null===(a=i[0])||void 0===a?void 0:a.breakdownSysId,breakdownSourceName:g,isChoice:p===st,type:y(i[0].breakdownType),factsTable:(null==p?void 0:p.length)>0?p:void 0,field:\"sys_id\",target:p};h.datasource=dr(_);var b,w=nr(u);try{for(w.s();!(b=w.n()).done;){var T=b.value;T.mappingTable&&(h.targets||(h.targets=[]),h.targets.push(sr(T.mappingTable,void 0,T.field,void 0,p===st?\"choice\":T.fieldType)))}}catch(e){w.e(e)}finally{w.f()}for(var S=0,A=l;S<A.length;S++){var F=A[S];h.targets||(h.targets=[]),_.breakdownSysId=F.breakdownSysId,_.type=y(F.breakdownType),h.targets.push(dr(_))}if(v){var C,R;h.targets||(h.targets=[]);var I,O,x=vr(t,v,r,void 0);x&&(null==x||null===(C=x.component_props)||void 0===C||null===(R=C.targets)||void 0===R?void 0:R.length)>0?null===(I=x.component_props)||void 0===I||null===(O=I.targets)||void 0===O||O.forEach(function(e){h.targets.push(e)}):t.migrationNotes.push(ot({message:at(\"This breakdown filter cannot be migrated. It can be configured manually in a new filter.\"),level:0,originalArtifactSysId:f,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:t.featureFlags}))}return h.filterComponentType=\"multiselect\",h.filterElementType=\"pill\",h}({dimension:u,uniqueBreakdowns:c,uniqueMappings:(g||[]).reduce(function(e,t){return e.some(function(e){return e.facts_table===t.facts_table&&e.field===t.field})||e.push(t),e},[]),linkedInteractiveFilter:(null===(l=e.sys_id[null==r||null===(s=r.publisher)||void 0===s?void 0:s.value])||void 0===l?void 0:l[0])||void 0,dashboardBreakdown:r},t,e);return h?{sys_id:\"\".concat(t.sys_id,\"-wbf-\").concat(a),x:6*a,y:0,h:4,w:6,component_id:i,component_props:h,can_edit:!0,widget_type:\"topLevelFilter###'1'\"}:(t.migrationNotes.push(ot({message:at(\"The dashboard breakdown filter cannot be migrated. It can be configured manually in a new filter.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:r.sys_table_name,debugInfo:\"Dimension name: \".concat(u.name)})),null)}).filter(function(e){return e});return console.info(\">>> Returning migrated dashboard\"),tt(t,{tabs:r?l:l.concat(rr(t,l.length)),topLevelFilters:s})};var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};var answer;try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.dashboard),this.doNotAddLogTab,JSON.parse(this.featureFlags||\"null\"));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"a20c2309b7032110997a9f78ce11a9ea","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-05-25 11:34:02","sys_name":"","sys_scope":"","macroponent":"","key":"dashboardScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(_e,\"</p>\")},r=function r(e,_r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===_r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=_r?_r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=_r?_r:\"\")},a=(r(\"content_block_static\",\"com.glide.cms.RenderBlock\"),r(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),r(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),r(\"\",\"com.glide.ui.portal.RenderReport\"),r(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),o=(r(a.group,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.group2,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.single,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.multi,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.date,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.bool,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),r(a.debug,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderDashboard\"),r(\"report\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderJavascript\"),r(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),r(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),r(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),r(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"widget\"),t=\"filter\",i=function i(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},n=function n(e,r){return{text:e,vars:r}},c=function c(e){var r=e.message,a=e.level,o=e.tooltip,t=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,c=e.debugInfo,s=e.featureFlags,d={text:r,level:a,help:o,originSysId:t,hasNewArtifact:n,table:i,debugInfo:c};return\"true\"===(null==s?void 0:s.translatedLogs)?d:l(d)},l=function l(e){var r,a,o,t;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==o?o:e.text},s=function s(e,r){var a={message:n(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(c({message:n(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(c(a))&&e.migrationNotes.push(c(a)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}};this.run=function(r,l,d,u,p){var m,g={migratingFromJava:!0,migrationNotes:[],featureFlags:p,migratingSingleArtifact:!0},v=function(r,l,d,u){return r.migratingFromJava&&u?i(l,u):(p=o,function(r,l,d,u){var m;return(m=p===t?function(){for(var e in a)if(a[e]===(null==l?void 0:l.type))return e}():null==l?void 0:l.type)?(r.migrationNotes.push(c({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==l?void 0:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:r.featureFlags})),p===o||p===t?function(r,a,o,t){var n,c,l;return r.migratingFromJava&&t?i(a,t):s(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(n=null!==(c=a.name)&&void 0!==c?c:a.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> widget.\"))})}(r,function(){for(var e={},r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return a.forEach(function(r){Object.assign(e,r)}),e}(l,{type:m}),0,u):function(r,a,o,t){var n,c,l;return r.migratingFromJava&&t?i(a,t):s(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(n=null!==(c=a.name)&&void 0!==c?c:a.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> report.\"))})}(r,l,0,u)):function(r,a,o,t){var l,d,u,p;if(r.migratingFromJava&&t)return i(a,t);var m=\"\";null!=a&&a.type?m=a.type:null!=t&&null!==(l=t.type)&&void 0!==l&&l.value?m=null==t||null===(d=t.type)||void 0===d?void 0:d.value:null!=t&&null!==(u=t.renderer)&&void 0!==u&&u.value&&(m=t.renderer.value);var g=null==t||null===(p=t.title)||void 0===p?void 0:p.value;return r.migrationNotes.push(c({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:r.featureFlags})),s(r,{static_content:e(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(m,\": \").concat(g,\"</span> widget.\"))})}(r,l,0,u)})(r,l,d,u);var p}(g,null===(m=r.sys_id[d])||void 0===m?void 0:m[0],r,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return v.migrationNotes=g.migrationNotes,v};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"a49e8797a3d031108d80ad2f241e61a6","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:55:01","sys_name":"","sys_scope":"","macroponent":"","key":"relativePAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=_e?_e:\"\",\"::\").concat(null!=r?r:\"\")},r=(e(\"content_block_static\",\"com.glide.cms.RenderBlock\"),e(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),e(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),e(\"\",\"com.glide.ui.portal.RenderReport\"),e(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),t=(e(-1,\"com.glideapp.home.RenderHomepagePublishers\"),e(4,\"com.glideapp.home.RenderHomepagePublishers\"),e(r,\"com.glideapp.home.RenderHomepagePublishers\"),e(2,\"com.glideapp.home.RenderHomepagePublishers\"),e(3,\"com.glideapp.home.RenderHomepagePublishers\"),e(5,\"com.glideapp.home.RenderHomepagePublishers\"),e(6,\"com.glideapp.home.RenderHomepagePublishers\"),e(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderDashboard\"),e(\"report\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderJavascript\"),e(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),e(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),e(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),o=\"\",i=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(i)||(n=\"=\",i%1);){if((t=a.charCodeAt(i+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,o+=n.charAt(63&r>>8-i%1*8)}return o.toString()});function a(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}var o=function o(e,r){return{text:e,vars:r}},i=function i(e){var r=e.message,t=e.level,a=e.tooltip,o=e.originalArtifactSysId,i=e.artifactTable,s=e.hasNewArtifact,l=e.debugInfo,d=e.featureFlags,c={text:r,level:t,help:a,originSysId:o,hasNewArtifact:s,table:i,debugInfo:l};return\"true\"===(null==d?void 0:d.translatedLogs)?c:n(c)},n=function n(e){var r,t,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},s=\"sys_choice\";function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var d=function d(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,a=function(e,r){if(void 0===e)return[];for(var t=[],a=0,o=0;o<e.length;o++)\"^\"!==e.charAt(o)||(t.push(e.substring(a,o)),a=o+1);return a<=e.length&&t.push(e.substring(a,e.length)),t}(e),o=[],i=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){s=!0,i=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw i}}}}(a);try{var n=function n(){var e=t.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,i=arguments[1],n=0;n<o;n++){var s=a[n];if(r.call(i,s,n,a))return t?n:s}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";o.push(e)};for(i.s();!(t=i.n()).done;)n()}catch(e){i.e(e)}finally{i.f()}return o.join(\"^\")},c=/[0-9a-f]{32}/,u=function e(r,t,a){var n,l,d,u,m,g,p=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(m=r.breakdown)&&void 0!==m&&m.value&&(d=r.breakdown_level2.value),!u&&r.element&&(u=r.element_level2)):(null!==(g=r.breakdown)&&void 0!==g&&g.value&&(d=r.breakdown.value),!u&&r.element&&(u=r.element)),d&&u&&\"unmatched\"!==u){var v=r.indexes.sys_id[d][0],f=u;r.indexes.sys_id[v.dimension.value][0].facts_table===s&&c.test(u)&&(f=r.indexes.sys_id[f][0].value);var h,_={sysId:d,elementSysIds:[f]};\"true\"===r.manual_elements&&_.elementSysIds.concat(null===(h=r.indexes.widget_elements[r.sys_id])||void 0===h?void 0:h.map(function(e){return\"unassigned\"===e.element?p:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(_.elementsFilterSysId=r.elements_filter.value,_.elementSysIds=[]),a.breakdowns.push(_)}else if(null!==(n=r.breakdown)&&void 0!==n&&n.value){var b=r.indexes.sys_id[d][0],y=r.indexes.sys_id[b.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(y.facts_table===s||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:[p]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:d,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var R,S,I;r.indexes.widget_elements&&0!==(null!==(R=null===(S=r.indexes.widget_elements[r.sys_id])||void 0===S?void 0:S.length)&&void 0!==R?R:0)?a.breakdowns.push({sysId:d,elementSysIds:null===(I=r.indexes.widget_elements[r.sys_id])||void 0===I?void 0:I.map(function(e){return\"unassigned\"===e.element?p:e.element})}):r.dashboard.migrationNotes.push(i({message:o(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:d,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(y.facts_table===s||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[p],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(l=r.breakdown_level2)&&void 0!==l&&l.value&&!t?e(r,!0,a):a},m=function m(e,r,n){var s,l,c=e.sys_id,m=e.indicator,g=e.show_data_labels,p=e.aggregate,v=e.sort_direction,f=e.sort_on,h=e.color_scheme,_=e.description,b=e.name,y=function(e){return t(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))}(null==m?void 0:m.value),w={type:\"default\"};null!=h&&h.value&&\"\"!==(null==h?void 0:h.value)&&(w={type:\"palette\",palette:null==h?void 0:h.value});var R=f;-1===[\"name\",\"value\"].indexOf(f)&&(R=\"value\",r.migrationNotes.push(i({message:o(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:c,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:r.featureFlags})));var S=u(a(e,{indexes:n,dashboard:r}));if(S.doMigration){!S.groupBy&&S.breakdowns.length>0&&(S.groupBy={groupByField:S.breakdowns[0].sysId,isRange:!1,isChoice:!1,isPaBucket:!1});var I,T,k=n.sys_id[null==m?void 0:m.value][0],A={applyDateRange:!1,bareBorder:!1,colorConfig:w,configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"both\",dataPassthrough:null,dataSources:[{allowRealTime:\"1\"===k.type,allowTotalValue:\"1\"===k.type,indicatorType:k.type,isScriptedIndicator:!1,filterQuery:d(e.filter),label:k.name,sourceType:\"indicator\",uuid:{breakdowns:S.breakdowns,indicator:null==m?void 0:m.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:y,dataCategories:[\"trend\",\"group\",\"simple\"]}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,followFilters:\"true\"===e.follow_element,groupBy:[],hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:\"center\",metrics:[{dataSource:y,id:(T=y,t(T+new Date().getTime()+1e8*Math.random())),aggregateIndicator:null!==(s=null==p?void 0:p.value)&&void 0!==s?s:\"\",frequency:parseInt(null!==(l=null==k?void 0:k.frequency)&&void 0!==l?l:\"10\",10),numberFormat:(I=parseInt(k.precision,10),{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=I?I:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}),axisId:\"primary\"}],newReporting:!1,numberOfPeriods:3,period:\"M\",registerOrientation:\"horizontal\",registerPosition:\"bottom\",scoreType:null,showAbsolutePeriod:!1,showBorder:e.showBorder,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===g,showDataPassthrough:!1,showFilterIcon:\"true\"===e.follow_element,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:e.showHeader,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showRegister:!0,showRegisterOnSameLine:!1,showRegisterPercentage:!1,showRegisterValue:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:R,sortByOrder:v,telemetry:\"null\",trendBy:null,truncationType:\"end\",wrapTitle:!1,description:_,headerTitle:e.showTitle?b:\"\"};return S.groupBy&&(A.groupBy=[{maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[a(S.groupBy,{dataSource:y})]}]),A}r.migrationNotes.push(i({message:o(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:c,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:r.featureFlags}))};function g(e){return e?parseInt(e).toString():\"10\"}var p=function p(e,r,t,n){!function(e,r,t){for(var a=0,n=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:o(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:o(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<n.length;a++){var s=n[a];s.shouldLog&&e.migrationNotes.push(i(s.message))}}(e,r);var s,l=m(a(r,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(n)),e,t);return l?(function(e,r,t,a){var n;if(\"breakdown\"===r.type)if(void 0!==a.groupBy&&a.groupBy.length>0){var s=a.groupBy[0].maxNumberOfGroups;a.groupBy[0].maxNumberOfGroups=r.show_top_x?parseInt(r.show_top_x).toString():g(s)}else if(void 0!==a.breakdowns&&a.breakdowns.length>0){var l=a.breakdowns[0].perPage;a.breakdowns[0].perPage=r.show_top_x?parseInt(r.show_top_x).toString():g(l)}else e.migrationNotes.push(i({message:o(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===r.show_breakdown_selector){var d=r.indicator.value,c=null===(n=t.indicator_breakdowns)||void 0===n?void 0:n[d];a.additionalGroupByConfig=(null==c?void 0:c.map(function(e){var r,a,o=null===(r=t.sys_id[null===(a=e.breakdown)||void 0===a?void 0:a.value])||void 0===r?void 0:r[0];return{id:null==o?void 0:o.sys_id,metricLabel:null==o?void 0:o.name}}))||[]}else a.additionalGroupByConfig=[]}(e,r,t,l),{component_id:\"96abe7e38d8790718022c5630a92176c\",component_props:l}):e.migratingFromJava&&n?function(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}}(r,n):function(e,r){var t={message:o(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(i({message:o(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(i(t))&&e.migrationNotes.push(i(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(s=\"ERROR: Cannot migrate PA Pie widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(s,\"</p>\"))})};this.run=function(e,r,t,a,o){var i,n={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0},s=null===(i=e.sys_id[t])||void 0===i?void 0:i[0],l=p(n,s,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return l.migrationNotes=n.migrationNotes,l};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"acabcbd3a3d031108d80ad2f241e61df","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:42:10","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/96abe7e38d8790718022c5630a92176c","value":"96abe7e38d8790718022c5630a92176c"},"key":"piePAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e={DAY:1,WEEK:2,MONTH:3,QUARTER:4,FQ:5,YEAR:6,FY:7,WEEK2DATE:8,MONTH2DATE:9,QUARTER2DATE:10,FQ2DATE:11,YEAR2DATE:12,FY2DATE:13,WEEK_PLUS:14,MONTH_PLUS:15,QUARTER_PLUS:16,FQ_PLUS:17,YEAR_PLUS:18,FY_PLUS:19},r=10,t=20,a=40,o=60,i=65,n=80,l=85,s={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},d=function d(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},c=(d(\"content_block_static\",\"com.glide.cms.RenderBlock\"),d(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),d(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),d(\"\",\"com.glide.ui.portal.RenderReport\"),d(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),u=(d(-1,\"com.glideapp.home.RenderHomepagePublishers\"),d(4,\"com.glideapp.home.RenderHomepagePublishers\"),d(c,\"com.glideapp.home.RenderHomepagePublishers\"),d(2,\"com.glideapp.home.RenderHomepagePublishers\"),d(3,\"com.glideapp.home.RenderHomepagePublishers\"),d(5,\"com.glideapp.home.RenderHomepagePublishers\"),d(6,\"com.glideapp.home.RenderHomepagePublishers\"),d(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),d(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glide.ui.portal.RenderDashboard\"),d(\"report\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glide.ui.portal.RenderJavascript\"),d(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),d(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),d(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),d(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),o=\"\",i=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(i)||(n=\"=\",i%1);){if((t=a.charCodeAt(i+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,o+=n.charAt(63&r>>8-i%1*8)}return o.toString()});function m(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,i=arguments[1],n=0;n<o;n++){var l=a[n];if(r.call(i,l,n,a))return t?n:l}}var v=function v(e,r){return{text:e,vars:r}},g=function g(e){var r=e.message,t=e.level,a=e.tooltip,o=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,d={text:r,level:t,help:a,originSysId:o,hasNewArtifact:n,table:i,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?d:p(d)},p=function p(e){var r,t,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},f=\"sys_choice\",h=function h(e){return u(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},y=function y(e){return u(e+new Date().getTime()+1e8*Math.random())},_=/[0-9a-f]{32}/,b=function b(e){return{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=e?e:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}};function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=t){var a,o,i,n,l=[],s=!0,d=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(a=i.call(t)).done)&&(l.push(a.value),l.length!==r);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=t[\"return\"]&&(n=t[\"return\"](),Object(n)!==n))return}finally{if(d)throw o}}return l}}(e,r)||R(e,r)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function T(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=R(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){l=!0,i=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}function R(e,r){if(e){if(\"string\"==typeof e)return A(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,r):void 0}}function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var I=function e(r,t,a){var o,i,n,l,s,d,c=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(s=r.breakdown)&&void 0!==s&&s.value&&(n=r.breakdown_level2.value),!l&&r.element&&(l=r.element_level2)):(null!==(d=r.breakdown)&&void 0!==d&&d.value&&(n=r.breakdown.value),!l&&r.element&&(l=r.element)),n&&l&&\"unmatched\"!==l){var u=r.indexes.sys_id[n][0],m=l;r.indexes.sys_id[u.dimension.value][0].facts_table===f&&_.test(l)&&(m=r.indexes.sys_id[m][0].value);var p,h={sysId:n,elementSysIds:[m]};\"true\"===r.manual_elements&&h.elementSysIds.concat(null===(p=r.indexes.widget_elements[r.sys_id])||void 0===p?void 0:p.map(function(e){return\"unassigned\"===e.element?c:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(h.elementsFilterSysId=r.elements_filter.value,h.elementSysIds=[]),a.breakdowns.push(h)}else if(null!==(o=r.breakdown)&&void 0!==o&&o.value){var y=r.indexes.sys_id[n][0],b=r.indexes.sys_id[y.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(b.facts_table===f||\"pa_buckets\"===b.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:n,elementSysIds:[c]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:n,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var T,R,A;r.indexes.widget_elements&&0!==(null!==(T=null===(R=r.indexes.widget_elements[r.sys_id])||void 0===R?void 0:R.length)&&void 0!==T?T:0)?a.breakdowns.push({sysId:n,elementSysIds:null===(A=r.indexes.widget_elements[r.sys_id])||void 0===A?void 0:A.map(function(e){return\"unassigned\"===e.element?c:e.element})}):r.dashboard.migrationNotes.push(g({message:v(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:n,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(b.facts_table===f||\"pa_buckets\"===b.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:n,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[c],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(i=r.breakdown_level2)&&void 0!==i&&i.value&&!t?e(r,!0,a):a};function S(e,r){if(null!=r&&r.value&&\"column\"===e)return\"vertical_bar\";switch(e){case\"column_total\":case\"column\":case\"stacked\":return\"bar\";default:return e}}function k(d){var c=m(Object.keys(e),function(r){return e[r]===parseInt(d,10)});switch(e[c]){case e.DAY:return{frequency:r,frequencyInterval:c,dateRange:s.HOURLY};case e.WEEK:case e.WEEK2DATE:case e.WEEK_PLUS:return{frequency:t,frequencyInterval:c,dateRange:s.MONTHLY};case e.MONTH:case e.MONTH2DATE:case e.MONTH_PLUS:return{frequency:a,frequencyInterval:c,dateRange:s.MONTHLY};case e.QUARTER:case e.QUARTER2DATE:case e.QUARTER_PLUS:return{frequency:o,frequencyInterval:c,dateRange:s.YEARLY};case e.FQ:case e.FQ2DATE:case e.FQ_PLUS:return{frequency:i,frequencyInterval:c,dateRange:s.YEARLY};case e.YEAR:case e.YEAR2DATE:case e.YEAR_PLUS:return{frequency:n,frequencyInterval:c,dateRange:s.YEARLY};case e.FY:case e.FY2DATE:case e.FY_PLUS:return{frequency:l,frequencyInterval:c,dateRange:s.YEARLY};default:return{frequency:r,frequencyInterval:\"\",dateRange:s.YEARLY}}}var x=function x(e){e.colorType;var r,t,a,o,i=e.colorPalette,n=e.chartColor,l=e.showDataLabel,d=(e.showLegend,e.showTotal),c=e.yAxisTitle,u=e.yAxisFrom,p=e.yAxisTo,_=e.sysId,R=e.indicator,A=(e.element,e.breakdown),x=e.aggregate,F=e.sort_direction,E=e.sort_on,P=(e.breakdown_level2,e.color_scheme,e.description),B=e.name,O=e.showTitle,C=e.showHeader,L=e.showBorder,N=e.d,Y=e.indexes,D=e.showTarget,M=e.showThresholds,H=e.showTrend,J=e.showConfidence,q=e.showForecast,U=e.showComments,G=e.chartType,z=e.label,V=e.followElement,j=E,Q=F,W=A.value,K=null===(r=Y.sys_id[W])||void 0===r?void 0:r[0],Z=null===(t=Y.sys_id[null==K||null===(a=K.dimension)||void 0===a?void 0:a.value])||void 0===t?void 0:t[0],X=null==Z?void 0:Z.facts_table,$=X===f,ee=\"pa_buckets\"===X;\"default\"===E&&(j=$?\"choice\":ee?\"bucket\":\"name\"),-1===[\"name\",\"value\",\"default\"].indexOf(E)&&(j=\"value\",Q=\"desc\",N.migrationNotes.push(g({message:v(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:_,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:N.featureFlags})));var re=I(e);if(re.doMigration){var te,ae,oe=10;if(null!=x&&x.value){var ie=k(Y.sys_id[null==x?void 0:x.value][0].interval);oe=ie.frequency,te=ie.frequencyInterval,ae=ie.dateRange}var ne=function(e,r){var t={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},a=function a(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),a=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(a,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))t.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){t.showAbsolutePeriod=!0,t.startTime=a(null==e?void 0:e.from),t.endTime=a(null==e?void 0:e.to);var o=new Date;new Date(t.startTime)>o&&!t.endTime?t.endTime=t.startTime:t.startTime&&!t.endTime?t.useCurrentDateForEnd=!0:!t.startTime&&t.endTime&&(t.showMaximumRange=!0,t.endTime=null)}else{t.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var i=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),n=m(Object.keys(s),function(e){return s[e]===i},!0),l=m(Object.keys(s),function(e){return s[e]===r},!0);t.period=n<l?r:i}return t}(e.timePeriod,ae),le={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",colorConfig:{type:\"default\"},configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[],dateFormat:\"default\",description:P,disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null==ne?void 0:ne.endTime,extensionType:S(G,A),filterConfigurations:\"@state.parFilters\",followFilters:!0,showFilterAsSeparateSeries:\"separate\"===e.multiple_elements_view,groupBy:[],headerTitle:O?B:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!1,hideYAxis2:!1,hideYAxis3:!1,hideYAxis4:!1,legendExpandToFit:!0,legendHorizontalAlignment:\"center\",legendPosition:\"bottom\",lineStrokeWidth:\"2\",metrics:[],filterPerMetric:[],newReporting:!1,numberOfPeriods:null==ne?void 0:ne.numberOfPeriods,period:null==ne?void 0:ne.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null==ne?void 0:ne.showAbsolutePeriod,useCurrentDateForEnd:null==ne?void 0:ne.useCurrentDateForEnd,showBorder:L,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:U,showConfidenceBand:J,showDataLabels:l,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:q,showForecastRange:!1,showGapPercentage:null,showHeader:C,showHeaderSeparator:!1,showLegend:!0,showLegendValue:!1,showMaximumRange:null==ne?void 0:ne.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:D,showThreshold:M,showTotalAggregate:!1,showTotalValue:d,showTrend:H,showXGrid:!0,showYGrid:!0,showContinuousLine:!1,sortBy:j,sortByOrder:Q,startTime:null==ne?void 0:ne.startTime,telemetry:\"null\",trendBy:{},wrapTitle:!1,yAxis0Title:c,yAxis0To:p,yAxis0From:u,yAxisStyle:\"default\",allowChangeDateRange:!1,showDateRangeByDefault:!1},se=h(null==R?void 0:R.value),de=y(se),ce=Y.sys_id[null==R?void 0:R.value][0],ue={},me={metricId:de,dataSourceId:se};ue[\"\".concat(null==R?void 0:R.value,\":\").concat(JSON.stringify(re.breakdowns))]=me,le.dataSources=[{allowRealTime:\"1\"===ce.type,allowTotalValue:\"1\"===ce.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:se,indicatorType:ce.type,isScriptedIndicator:!1,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:re.breakdowns,indicator:null==R?void 0:R.value}}],re.groupBy&&(re.groupBy.dataSource=se,re.groupBy.metric=de,re.groupBy.isChoice=$,re.groupBy.isPaBucket=ee,le.groupBy=[{disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[re.groupBy],hideZeroValues:!1}]),le.metrics=[{dataSource:se,id:de,aggregateIndicator:null!==(o=null==x?void 0:x.value)&&void 0!==o?o:\"\",frequency:oe,frequencyInterval:te,label:z,numberFormat:b(parseInt(ce.precision,10)),chartType:S(G),axisId:\"primary\"}],le.filterPerMetric=[{metricId:de,value:V}],\"column\"==G&&null!=A&&A.value?le.dataLabelPosition=\"middle\":le.trendBy={trendByFields:[{field:\"anything\",metric:de}],trendByFrequency:\"date\",trendByMinuteInterval:null};var ve=function(e,r,t,a,o,i,n){var l,s=null!==(l=e.widget_indicators[r])&&void 0!==l?l:[];s.sort(function(e,r){return parseInt(e.order,10)-parseInt(r.order,10)});try{var d,c=T(s);try{for(c.s();!(d=c.n()).done;){var u,m,p=d.value;if(\"true\"!==p.follow_element){var f=null===(u=p.indicator)||void 0===u?void 0:u.value;e.sys_id[f][0].name,i.migrationNotes.push(g({message:v(\"This visualization is in compatibility mode because the additional indicators follow elements feature is not supported.\"),level:1,originalArtifactSysId:r,artifactTable:null===(m=e.sys_id[r][0])||void 0===m?void 0:m.sys_table_name,featureFlags:i.featureFlags}))}}}catch(e){c.e(e)}finally{c.f()}}catch(e){console.error(\"ERROR: Error occurred while handling widget indicators for widget: \".concat(n||r))}var _,w=!1,R={},A=T(s);try{for(A.s();!(_=A.n()).done;){var x,F,E,P=_.value,B=I({breakdown:P.breakdown,breakdown_level2:P.breakdown_level2,element:P.element,element_level2:P.element_level2,indexes:e,elements_filter:P.elements_filter,manual_elements:P.manual_elements}),O=void 0,C=void 0,L=e.sys_id[null===(x=P.indicator)||void 0===x?void 0:x.value][0];if(o[\"\".concat(null===(F=P.indicator)||void 0===F?void 0:F.value,\":\").concat(JSON.stringify(B.breakdowns))]){var N,Y;O=o[\"\".concat(null===(N=P.indicator)||void 0===N?void 0:N.value,\":\").concat(JSON.stringify(B.breakdowns))].dataSourceId,C=o[\"\".concat(null===(Y=P.indicator)||void 0===Y?void 0:Y.value,\":\").concat(JSON.stringify(B.breakdowns))].metricId}else{var D,M,H,J,q;O=h(null===(D=P.indicator)||void 0===D?void 0:D.value),C=y(O),o[null===(M=P.indicator)||void 0===M?void 0:M.value]={metricId:C,dataSourceId:O},t.dataSources.push({allowRealTime:\"1\"===L.type,allowTotalValue:\"1\"===L.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:O,indicatorType:L.type,isScriptedIndicator:!1,label:L.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:B.breakdowns,indicator:null===(H=P.indicator)||void 0===H?void 0:H.value}});var U=\"primary\";\"true\"===P.second_y_axis&&(t.yAxis1Title=P.label,t.yAxis1Position=\"right\",t.yAxis1From=\"\",t.yAxis1To=\"\",U=\"axis1\");var G=10,z=void 0,V=null!==(J=null===(q=P.aggregate)||void 0===q?void 0:q.value)&&void 0!==J?J:\"\";if(V){var j,Q=k((null===(j=e.sys_id[V])||void 0===j?void 0:j[0]).interval);G=Q.frequency,z=Q.frequencyInterval}var W={dataSource:O,id:C,aggregateIndicator:V,frequency:G,frequencyInterval:z,label:P.label,numberFormat:b(parseInt(L.precision,10)),chartType:S(P.chart_type),axisId:U},K={field:\"anything\",metric:C};\"stacked\"===P.chart_type&&(w=!0),t.metrics.push(W),t.filterPerMetric.push({metricId:C,value:\"true\"===(null==P?void 0:P.follow_element)}),t.trendBy.trendByFields.push(K)}B.groupBy&&(B.groupBy.dataSource=O,B.groupBy.metric=C,t.groupBy.push({disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[B.groupBy],hideZeroValues:!1})),\"\"!==P.color&&null!==(E=P.color)&&void 0!==E&&E.value&&(R[C]=P.color.value)}}catch(e){A.e(e)}finally{A.f()}return(t.metrics.length>1||t.groupBy.length>0)&&(t.showTarget=!1,t.showTrend=!1,t.showConfidenceBand=!1,t.showThreshold=!1,t.showComment=!1),{hasStackedColumn:w,widgetColors:R}}(Y,_,le,0,ue,N,B),ge=ve.hasStackedColumn,pe=ve.widgetColors;if(le.filterPerMetric.some(function(e){return null==e?void 0:e.value})||(le.followFilters=!1,le.showFilterIcon=!1),ge&&(le.extensionType=\"bar\",le.chartVariation=\"stacked\"),i&&i.length>0&&0===Object.keys(pe).length)le.colorConfig={type:\"palette\",palette:i};else if(le.metrics.length>1){var fe,he;fe=i&&i.length>0?w(null!==(he=Y.sys_id[i])&&void 0!==he?he:[],1)[0]:w(Y.sys_id[\"68d08c72d700210096614251ce61039e\"],1)[0];for(var ye=[],_e=0;_e<32;_e++){var be=\"color_\".concat(_e+1);if(\"\"===fe[be])break;ye.push(fe[be].value)}var we=0;le.colorConfig={type:\"colorsPerMetric\",values:le.metrics.map(function(e){var r;return e.id===de&&null!=n&&n.value?r=n.value:pe[e.id]?r=pe[e.id]:(r=ye[we%ye.length],we+=1),{metric:e.id,color:r}})}}else n&&1===le.metrics.length&&(le.colorConfig={type:\"singleColor\",values:[{color:n.value,metric:de}]});return le}N.migrationNotes.push(g({message:v(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:_,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:N.featureFlags}))};function F(e){return e?parseInt(e).toString():\"10\"}var E=function E(e,r,t,a){!function(e,r,t){for(var a=0,o=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:v(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:v(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<o.length;a++){var i=o[a];i.shouldLog&&e.migrationNotes.push(g(i.message))}}(e,r);var o,i=function(e){var r=e.indicator,t=e.element,a=e.show_data_labels,o=e.breakdown,i=e.aggregate,n=e.sort_direction,l=e.sort_on,s=e.breakdown_level2,d=e.element_level2,c=e.color_scheme,u=e.description,m=e.name,v=e.showTitle,g=e.type,p=e.period,f=e.date_from,h=e.date_to,y=e.show_range_selector,_=e.show_breakdown_selector,b=null==c?void 0:c.value,w=\"true\"===a,T=e.field,R=\"true\"===e.show_legend,A=e.set_color,I=\"true\"===e.show_total,S=e.yaxis_title,k=e.yaxis_from,x=e.yaxis_to,F=\"true\"===e.include_target,E=\"true\"===e.include_thresholds,P=\"true\"===e.include_trend,B=\"true\"===e.include_confidence,O=\"true\"===e.include_forecast,C=\"true\"===e.include_comments,L=e.compare_main_label,N=e.chart_color,Y=\"true\"===e.follow_element,D=e.multiple_elements_view,M={period:p,from:f,to:h};return{colorType:A,colorPalette:b,chartColor:N,showDataLabel:w,groupBy:T,showLegend:R,showTotal:I,yAxisTitle:S,yAxisFrom:k,yAxisTo:x,sysId:e.sys_id,indicator:r,element:t,show_data_labels:a,breakdown:o,aggregate:i,sort_direction:n,sort_on:l,breakdown_level2:s,color_scheme:c,description:u,name:m,showTitle:v,type:g,element_level2:d,timePeriod:M,showTarget:F,showThresholds:E,showTrend:P,showConfidence:B,showForecast:O,showComments:C,chartType:e.visualization,label:L,show_range_selector:y,followElement:Y,multiple_elements_view:D,show_breakdown_selector:_}}(r),n=function(e){var r,t,a=x(e);if(a){a.chartVariation=\"side-by-side\";var o=a.dataSources[0].id,i=a.metrics[0],n=i.frequency,l=i.frequencyInterval,s=y(o);return a.metrics.unshift({frequency:n,frequencyInterval:l,chartType:\"line\",numberFormat:{customFormat:!1},id:s,dataSource:o,aggregateIndicator:(null==e||null===(r=e.aggregate)||void 0===r?void 0:r.value)||\"\",label:\"Total\",axisId:\"primary\"}),null===(t=a.trendBy.trendByFields)||void 0===t||t.push({field:\"anything\",metric:s}),a}}(function(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}(i,{d:e,indexes:t},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(a)));return n?(function(e,r,t,a){var o;if(\"breakdown\"===r.type)if(void 0!==a.groupBy&&a.groupBy.length>0){var i=a.groupBy[0].maxNumberOfGroups;a.groupBy[0].maxNumberOfGroups=r.show_top_x?parseInt(r.show_top_x).toString():F(i)}else if(void 0!==a.breakdowns&&a.breakdowns.length>0){var n=a.breakdowns[0].perPage;a.breakdowns[0].perPage=r.show_top_x?parseInt(r.show_top_x).toString():F(n)}else e.migrationNotes.push(g({message:v(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===r.show_breakdown_selector){var l=r.indicator.value,s=null===(o=t.indicator_breakdowns)||void 0===o?void 0:o[l];a.additionalGroupByConfig=(null==s?void 0:s.map(function(e){var r,a,o=null===(r=t.sys_id[null===(a=e.breakdown)||void 0===a?void 0:a.value])||void 0===r?void 0:r[0];return{id:null==o?void 0:o.sys_id,metricLabel:null==o?void 0:o.name}}))||[]}else a.additionalGroupByConfig=[]}(e,r,t,n),function(e,r,t){var a,o;t.showAdditionalGroupBySelector=!0,t.allowAdditionalGroupByPerMetric=!0;var i=null===(a=e.indicator)||void 0===a?void 0:a.value,n=null===(o=r.indicator_breakdowns)||void 0===o?void 0:o[i];t.additionalGroupByConfig=(null==n?void 0:n.map(function(e){var a,o,i,n,l,s=null===(a=r.sys_id[null===(o=e.breakdown)||void 0===o?void 0:o.value])||void 0===a?void 0:a[0];return{id:null==s?void 0:s.sys_id,label:null==s?void 0:s.name,metricId:null===(i=t.metrics[1])||void 0===i?void 0:i.id,metricLabel:(null===(n=t.metrics[1])||void 0===n?void 0:n.label)||(null===(l=t.dataSources[0])||void 0===l?void 0:l.label)}}))||[]}(i,t,n),{component_id:\"2bd5dc19a7ad083941b7c992a966dd78\",component_props:n}):e.migratingFromJava&&a?function(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}}(r,a):function(e,r){var t={message:v(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(g({message:v(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(g(t))&&e.migrationNotes.push(g(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(o=\"ERROR: Cannot migrate PA Total Column widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(o,\"</p>\"))})};this.run=function(e,r,t,a,o){var i,n={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0},l=null===(i=e.sys_id[t])||void 0===i?void 0:i[0],s=E(n,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=n.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"adff07d7a3d031108d80ad2f241e6138","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 12:01:05","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/2bd5dc19a7ad083941b7c992a966dd78","value":"2bd5dc19a7ad083941b7c992a966dd78"},"key":"columnTotalPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),a=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(n)||(i=\"=\",n%1);){if((t=o.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=i.charAt(63&r>>8-n%1*8)}return a.toString()},r=function r(e,_r){return void 0!==e&&void 0!==_r&&e.indexOf(_r)>-1},t=function t(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,a=0;a<e.length;a++)e.charAt(a)!==r||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function o(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var a=function a(e,r){return{text:e,vars:r}},n=function n(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,n=e.artifactTable,l=e.hasNewArtifact,s=e.debugInfo,c=e.featureFlags,d={text:r,level:t,help:o,originSysId:a,hasNewArtifact:l,table:n,debugInfo:s};return\"true\"===(null==c?void 0:c.translatedLogs)?d:i(d)},i=function i(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text};function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var s=function s(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var o,a=t(e,\"^\"),n=[],i=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e3){s=!0,n=_e3},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw n}}}}(a);try{var s=function s(){var e=o.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,n=arguments[1],i=0;i<a;i++){var l=o[i];if(r.call(n,l,i,o))return t?i:l}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";n.push(e)};for(i.s();!(o=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}return n.join(\"^\")};function c(e){return c=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},c(e)}var d=function d(e){return{durationFormat:m(o(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},u=function u(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=m(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},m=function m(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var n in t)void 0!==o[t[n]]&&e[n]!==o[t[n]]&&(a=!0,o[t[n]]=e[n]);return!!a&&o},p=function p(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},g=function g(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},f=(g(\"content_block_static\",\"com.glide.cms.RenderBlock\"),g(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),g(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),g(\"\",\"com.glide.ui.portal.RenderReport\"),g(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),v=(g(f.group,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.group2,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.single,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.multi,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.date,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.bool,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),g(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),g(f.debug,\"com.glideapp.home.RenderHomepagePublishers\"),g(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),g(\"\",\"com.glide.ui.portal.RenderDashboard\"),g(\"report\",\"com.glide.ui.portal.RenderJavascript\"),g(\"\",\"com.glide.ui.portal.RenderJavascript\"),g(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),g(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),g(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),g(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),b=function b(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},h=function h(e,r){var t={message:a(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(n({message:a(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(n(t))&&e.migrationNotes.push(n(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},y=function y(i,l,m,g){var y,_=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(n({message:a(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(i,l),w=function(e){var r,t=e.aggregate,o=e.aggregateFieldType,a=e.filter,n=e.table,i=e.sumfield,l=e.direction,s=e.chart_title||e.title,c=null===(r=e.report_source)||void 0===r?void 0:r.value,d=e.source_type;return{decimalPrecision:parseInt(e.decimal_precision,10),sourceType:d,reportSource:c,chartTitle:s,aggregate:t,aggregateFieldType:o,filter:a,table:n,sumfield:i,autoScale:\"true\"===e.gauge_autoscale,lowerLimit:e.lower_limit,upperLimit:e.upper_limit,direction:l,from:parseInt(e.from,10),to:parseInt(e.to,10)}}(l),R=function(t){var a,n=t.decimalPrecision,i=t.sourceType,l=t.reportSource,m=t.chartTitle,p=t.aggregate,g=t.aggregateFieldType,f=t.filter,v=t.table,b=t.sumfield,h=t.autoScale,y=t.lowerLimit,_=t.upperLimit,w=t.direction,R=t.showHeader,T=t.showTitle,F=t.showBorder,S=t.from,A=t.to,P=(t.indexes,function(e){var t={sortBy:\"value\",sortByOrder:\"desc\"};return r(e,\"ORDERBY\")&&r(e,\"ASC\")&&(t.sortByOrder=\"asc\"),t}(f)),I=s(f),O=function(e,r,t,o,a){var n={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},i={durationFormattingProperties:d,numberFormattingProperties:u};if(\"glide_duration\"===t)return\"object\"===c(e)&&i.durationFormattingProperties,{durationFormat:{customFormat:!1}};for(var l in e)if(i[l]&&e[l]&&Object.keys(e[l]).length>0){var s=Object.keys(e[l])[0];return i[l](e[l][s],r)}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:n}(void 0,n,g,p),C=function(r){return e(\"table\".concat(r).concat(new Date().getTime()).concat(1e8*Math.random()))}(v),x=function(r){return e(r+new Date().getTime()+1e8*Math.random())}(C),J={applyDateRange:!1,bareBorder:!1,configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:I,id:C,isDatabaseView:!1,reportSourceSysId:l,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===i||0===i.length?\"table\":i,tableOrViewName:v}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,gaugeArcAngle:\"180\",groupBy:null,headerTitle:T?m:\"\",hideMatrixAggregate:!1,innerRadius:.7,maxValue:A,metrics:[o({aggregateFunction:(null===(a=t.aggregate)||void 0===a?void 0:a.length)>0?t.aggregate:\"COUNT\",axisId:\"primary\",dataSource:C,id:x},O)],minValue:S,newReporting:!1,numberOfPeriods:3,period:\"M\",rangesConfig:{},scoreLabel:\"none\",scoreType:null,showAbsolutePeriod:!1,showBorder:F,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:R,showHeaderSeparator:!1,showLabelFirst:!1,showMaximumRange:!1,showMetricLabel:!1,showRangeLabels:!1,showRangeLimit:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,showZero:!0,sortByOrder:P.sortByOrder,telemetry:\"null\",trendBy:null,valueLabelSize:\"md\",wrapTitle:!1};return h&&(J.minValue=0,J.maxValue=null),b&&\"COUNT\"!==p&&\"\"!==b&&(J.metrics[0].aggregateField=b),(null==_?void 0:_.length)>0&&y.length>0&&(J.rangesConfig={data:[{label:\"Lower Limit\",maxValue:y,order:0},{label:\"Upper Limit\",maxValue:_,minValue:y,order:1},{minValue:_,order:2}],type:\"maximize\"===w?\"red_to_green\":\"green_to_red\"}),J}(o(w,{d:i,indexes:m},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(g)));return!R||_?i.migratingFromJava&&g?b(l,g):(y=\"report\",function(e,r,t,i){var l;return(l=y===v?function(){for(var e in f)if(f[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(n({message:a(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===y||y===v?function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?b(r,o):h(e,{static_content:p(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> widget.\"))})}(e,o(r,{type:l}),0,i):function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?b(r,o):h(e,{static_content:p(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> report.\"))})}(e,r,0,i)):function(e,r,t,o){var i,l,s,c;if(e.migratingFromJava&&o)return b(r,o);var d=\"\";null!=r&&r.type?d=r.type:null!=o&&null!==(i=o.type)&&void 0!==i&&i.value?d=null==o||null===(l=o.type)||void 0===l?void 0:l.value:null!=o&&null!==(s=o.renderer)&&void 0!==s&&s.value&&(d=o.renderer.value);var u=null==o||null===(c=o.title)||void 0===c?void 0:c.value;return e.migrationNotes.push(n({message:a(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),h(e,{static_content:p(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(d,\": \").concat(u,\"</span> widget.\"))})}(e,r,0,i)})(i,l,m,g):(function(e,r,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var a=t(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),o.additionalGroupByConfig=[],a.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(l,0,R),{component_id:\"037bd8ea3013833fd049186779528b70\",component_props:R})};this.run=function(e,r,t,o,a){var n,i={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=y(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"af632c63b7232110997a9f78ce11a907","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:18:40","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/037bd8ea3013833fd049186779528b70","value":"037bd8ea3013833fd049186779528b70"},"key":"angularGaugeReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(_e,\"</p>\")},r=function r(e,_r,o){return\"com.glideapp.home.RenderHomepagePublishers\"===_r&&o&&!Number.isNaN(parseInt(o,10))?\"\".concat(null!=o?o:\"\",\"::\").concat(null!=_r?_r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=_r?_r:\"\")},o=(r(\"content_block_static\",\"com.glide.cms.RenderBlock\"),r(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),r(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),r(\"\",\"com.glide.ui.portal.RenderReport\"),r(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),t=(r(o.group,\"com.glideapp.home.RenderHomepagePublishers\"),r(o.group2,\"com.glideapp.home.RenderHomepagePublishers\"),r(o.single,\"com.glideapp.home.RenderHomepagePublishers\"),r(o.multi,\"com.glideapp.home.RenderHomepagePublishers\"),r(o.date,\"com.glideapp.home.RenderHomepagePublishers\"),r(o.bool,\"com.glideapp.home.RenderHomepagePublishers\"),r(o.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),r(o.debug,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderDashboard\"),r(\"report\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderJavascript\"),r(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),r(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),r(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),r(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"widget\"),a=\"filter\";function i(){for(var e={},r=arguments.length,o=new Array(r),t=0;t<r;t++)o[t]=arguments[t];return o.forEach(function(r){Object.assign(e,r)}),e}var n=function n(e,r){var o=function(e){var r={};for(var o in e){var t;null!==(t=e[o])&&void 0!==t&&t.value?r[o]=e[o].value:\"string\"==typeof e[o]&&(r[o]=e[o])}return r}(r),t={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:o.portal_widget_sys_id,portalPreferences:o,widgetTitle:o.title,showHeader:!o.show_header||\"true\"===o.show_header,showBorder:!o.show_border||\"true\"===o.show_border,showTitle:!o.show_title||\"true\"===o.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(t.paWidgetSysId=e.sys_id,t.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:t}},l=function l(e,r){return{text:e,vars:r}},s=function s(e){var r=e.message,o=e.level,t=e.tooltip,a=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,c={text:r,level:o,help:t,originSysId:a,hasNewArtifact:n,table:i,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?c:d(c)},d=function d(e){var r,o,t,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(t=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==t?t:e.text},c=function c(e,r){var o={message:l(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(s({message:l(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(s(o))&&e.migrationNotes.push(s(o)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}};function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=e[o];return t}function p(e){return e?parseInt(e).toString():\"10\"}var m=function m(r,d,_m,g){!function(e,r,o){for(var t=0,a=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:l(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:l(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];t<a.length;t++){var i=a[t];i.shouldLog&&e.migrationNotes.push(s(i.message))}}(r,d);var v=function(e){var r,o,t,a;return{breakdown:null===(r=e.pivot_breakdown)||void 0===r?void 0:r.value,timeseries:null===(o=e.aggregate)||void 0===o?void 0:o.value,breakdownOnY:\"true\"===e.flip_axes,elementFilter:null===(t=e.pivot_elements_filter)||void 0===t?void 0:t.value,colour:null===(a=e.color_scheme)||void 0===a?void 0:a.value,name:e.name,sys_id:e.sys_id,description:e.description}}(d);if(v.elementFilter)return r.migratingFromJava&&g?n(d,g):c(r,{static_content:e(\"ERROR: Cannot migrate Pivot scorecard \".concat(v.name,\" sys_id: \").concat(null==d?void 0:d.sys_id,\" as we do not support pivot element filters\"))});var f,_=function(e){var r,o=e.breakdown,t=e.timeseries,a=e.breakdownOnY,i=e.elementFilter,n=(e.colour,e.name),l=e.sys_id,s=e.indexes,d=(e.d,e.showHeader),c=e.showTitle,p=(e.showBorder,e.description);o&&(r=s.sys_id[o][0]);var m={aggregateId:(null==t?void 0:t.length)>0?t:\"default\",breakdowns:o?[{breakdownId:o,breakdownLabel:r.name,elementIds:i&&\"unmatched\"!==i?[i]:[],perPage:20}]:[],colorSchemeId:\"\",description:p,enableDrilldown:!0,filterConfigurations:\"@state.parFilters\",followFilters:\"true\"===e.follow_element,heading:c?n:\"\",indicatorGroup:\"\",indicators:[],metrics:{fields:[\"lastScore\"]},nestedBreakdown:!0,pageSize:10,query:\"\",scorecardType:\"pivot\",showAlternateRowColors:!0,showBookmarkedOnly:!1,showBreakdownsOnly:!1,showColumnDividers:!1,showFavorite:!0,showFilterElement:!1,showFilterIcon:\"true\"===e.follow_element,showHeader:d,showIndicatorInfo:!0,sortBy:\"name\",sortDir:\"asc\",sourceType:\"1\",swapBreakdownsAsColumns:!a};if(s.widget_indicators_m2m[l]){var g=s.widget_indicators_m2m[l].sort(function(e,r){return parseInt(e.order,10)-parseInt(r.order,10)});g.length>m.pageSize&&(m.pageSize=g.length);var v,f=function(e,r){var o=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!o){if(Array.isArray(e)||(o=function(e,r){if(e){if(\"string\"==typeof e)return u(e,r);var o=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===o&&e.constructor&&(o=e.constructor.name),\"Map\"===o||\"Set\"===o?Array.from(e):\"Arguments\"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?u(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){o&&(e=o);var t=0,a=function a(){};return{s:a,n:function n(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,l=!1;return{s:function s(){o=o.call(e)},n:function n(){var e=o.next();return _n=e.done,e},e:function e(_e3){l=!0,i=_e3},f:function f(){try{_n||null==o[\"return\"]||o[\"return\"]()}finally{if(l)throw i}}}}(g);try{for(f.s();!(v=f.n()).done;){var _,b=v.value;if(null!==(_=b.indicator)&&void 0!==_&&_.value){var h=s.sys_id[b.indicator.value][0];m.indicators.push({id:h.sys_id,label:h.name})}}}catch(e){f.e(e)}finally{f.f()}}return m}(i(v,{d:r,indexes:_m},function(e){var r=!0,o=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(o=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:o}}(g)));return _?(function(e,r,o,t){var a;if(\"breakdown\"===r.type)if(void 0!==t.groupBy&&t.groupBy.length>0){var i=t.groupBy[0].maxNumberOfGroups;t.groupBy[0].maxNumberOfGroups=r.show_top_x?parseInt(r.show_top_x).toString():p(i)}else if(void 0!==t.breakdowns&&t.breakdowns.length>0){var n=t.breakdowns[0].perPage;t.breakdowns[0].perPage=r.show_top_x?parseInt(r.show_top_x).toString():p(n)}else e.migrationNotes.push(s({message:l(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===r.show_breakdown_selector){var d=r.indicator.value,c=null===(a=o.indicator_breakdowns)||void 0===a?void 0:a[d];t.additionalGroupByConfig=(null==c?void 0:c.map(function(e){var r,t,a=null===(r=o.sys_id[null===(t=e.breakdown)||void 0===t?void 0:t.value])||void 0===r?void 0:r[0];return{id:null==a?void 0:a.sys_id,metricLabel:null==a?void 0:a.name}}))||[]}else t.additionalGroupByConfig=[]}(r,d,_m,_),{component_id:\"9d31ba4d773ce32ef350d4555b673f6e\",component_props:_}):r.migratingFromJava&&g?n(d,g):(f=t,function(r,d,u,p){var m;return(m=f===a?function(){for(var e in o)if(o[e]===(null==d?void 0:d.type))return e}():null==d?void 0:d.type)?(r.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==d?void 0:d.sys_id,artifactTable:null==d?void 0:d.sys_table_name,featureFlags:r.featureFlags})),f===t||f===a?function(r,o,t,a){var i,l,s;return r.migratingFromJava&&a?n(o,a):c(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(i=null!==(l=o.name)&&void 0!==l?l:o.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=o&&o.type?o.type:null==a||null===(s=a.type)||void 0===s?void 0:s.value,\"</span> widget.\"))})}(r,i(d,{type:m}),0,p):function(r,o,t,a){var i,l,s;return r.migratingFromJava&&a?n(o,a):c(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(i=null!==(l=o.name)&&void 0!==l?l:o.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=o&&o.type?o.type:null==a||null===(s=a.type)||void 0===s?void 0:s.value,\"</span> report.\"))})}(r,d,0,p)):function(r,o,t,a){var i,d,u,p;if(r.migratingFromJava&&a)return n(o,a);var m=\"\";null!=o&&o.type?m=o.type:null!=a&&null!==(i=a.type)&&void 0!==i&&i.value?m=null==a||null===(d=a.type)||void 0===d?void 0:d.value:null!=a&&null!==(u=a.renderer)&&void 0!==u&&u.value&&(m=a.renderer.value);var g=null==a||null===(p=a.title)||void 0===p?void 0:p.value;return r.migrationNotes.push(s({message:l(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:r.featureFlags})),c(r,{static_content:e(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(m,\": \").concat(g,\"</span> widget.\"))})}(r,d,0,p)})(r,d,_m,g)};this.run=function(e,r,o,t,a){var i,n={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(i=e.sys_id[o])||void 0===i?void 0:i[0],s=m(n,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=n.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"b10c4317a3d031108d80ad2f241e61c0","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:43:54","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/9d31ba4d773ce32ef350d4555b673f6e","value":"9d31ba4d773ce32ef350d4555b673f6e"},"key":"pivotScorecardPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e={DAY:1,WEEK:2,MONTH:3,QUARTER:4,FQ:5,YEAR:6,FY:7,WEEK2DATE:8,MONTH2DATE:9,QUARTER2DATE:10,FQ2DATE:11,YEAR2DATE:12,FY2DATE:13,WEEK_PLUS:14,MONTH_PLUS:15,QUARTER_PLUS:16,FQ_PLUS:17,YEAR_PLUS:18,FY_PLUS:19},r=10,t=20,a=40,o=60,n=65,i=80,l=85,s={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},d=function d(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},c=(d(\"content_block_static\",\"com.glide.cms.RenderBlock\"),d(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),d(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),d(\"\",\"com.glide.ui.portal.RenderReport\"),d(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),d(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),u=(d(-1,\"com.glideapp.home.RenderHomepagePublishers\"),d(4,\"com.glideapp.home.RenderHomepagePublishers\"),d(c,\"com.glideapp.home.RenderHomepagePublishers\"),d(2,\"com.glideapp.home.RenderHomepagePublishers\"),d(3,\"com.glideapp.home.RenderHomepagePublishers\"),d(5,\"com.glideapp.home.RenderHomepagePublishers\"),d(6,\"com.glideapp.home.RenderHomepagePublishers\"),d(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),d(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),d(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glide.ui.portal.RenderDashboard\"),d(\"report\",\"com.glide.ui.portal.RenderJavascript\"),d(\"\",\"com.glide.ui.portal.RenderJavascript\"),d(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),d(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),d(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),d(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),o=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(n)||(i=\"=\",n%1);){if((t=a.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,o+=i.charAt(63&r>>8-n%1*8)}return o.toString()});function m(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,n=arguments[1],i=0;i<o;i++){var l=a[i];if(r.call(n,l,i,a))return t?i:l}}var p=function p(e,r){return{text:e,vars:r}},g=function g(e){var r=e.message,t=e.level,a=e.tooltip,o=e.originalArtifactSysId,n=e.artifactTable,i=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,d={text:r,level:t,help:a,originSysId:o,hasNewArtifact:i,table:n,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?d:v(d)},v=function v(e){var r,t,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},f=\"sys_choice\",h=function h(e){return u(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},_=function _(e){return u(e+new Date().getTime()+1e8*Math.random())},y=/[0-9a-f]{32}/,b=function b(e){return{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=e?e:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}};function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=t){var a,o,n,i,l=[],s=!0,d=!1;try{if(n=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(a=n.call(t)).done)&&(l.push(a.value),l.length!==r);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=t[\"return\"]&&(i=t[\"return\"](),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,r)||R(e,r)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function T(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=R(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function R(e,r){if(e){if(\"string\"==typeof e)return A(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,r):void 0}}function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var I=function e(r,t,a){var o,n,i,l,s,d,c=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(s=r.breakdown)&&void 0!==s&&s.value&&(i=r.breakdown_level2.value),!l&&r.element&&(l=r.element_level2)):(null!==(d=r.breakdown)&&void 0!==d&&d.value&&(i=r.breakdown.value),!l&&r.element&&(l=r.element)),i&&l&&\"unmatched\"!==l){var u=r.indexes.sys_id[i][0],m=l;r.indexes.sys_id[u.dimension.value][0].facts_table===f&&y.test(l)&&(m=r.indexes.sys_id[m][0].value);var v,h={sysId:i,elementSysIds:[m]};\"true\"===r.manual_elements&&h.elementSysIds.concat(null===(v=r.indexes.widget_elements[r.sys_id])||void 0===v?void 0:v.map(function(e){return\"unassigned\"===e.element?c:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(h.elementsFilterSysId=r.elements_filter.value,h.elementSysIds=[]),a.breakdowns.push(h)}else if(null!==(o=r.breakdown)&&void 0!==o&&o.value){var _=r.indexes.sys_id[i][0],b=r.indexes.sys_id[_.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(b.facts_table===f||\"pa_buckets\"===b.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:i,elementSysIds:[c]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:i,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var T,R,A;r.indexes.widget_elements&&0!==(null!==(T=null===(R=r.indexes.widget_elements[r.sys_id])||void 0===R?void 0:R.length)&&void 0!==T?T:0)?a.breakdowns.push({sysId:i,elementSysIds:null===(A=r.indexes.widget_elements[r.sys_id])||void 0===A?void 0:A.map(function(e){return\"unassigned\"===e.element?c:e.element})}):r.dashboard.migrationNotes.push(g({message:p(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:i,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(b.facts_table===f||\"pa_buckets\"===b.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:i,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[c],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(n=r.breakdown_level2)&&void 0!==n&&n.value&&!t?e(r,!0,a):a};function S(e,r){if(null!=r&&r.value&&\"column\"===e)return\"vertical_bar\";switch(e){case\"column_total\":case\"column\":case\"stacked\":return\"bar\";default:return e}}function k(d){var c=m(Object.keys(e),function(r){return e[r]===parseInt(d,10)});switch(e[c]){case e.DAY:return{frequency:r,frequencyInterval:c,dateRange:s.HOURLY};case e.WEEK:case e.WEEK2DATE:case e.WEEK_PLUS:return{frequency:t,frequencyInterval:c,dateRange:s.MONTHLY};case e.MONTH:case e.MONTH2DATE:case e.MONTH_PLUS:return{frequency:a,frequencyInterval:c,dateRange:s.MONTHLY};case e.QUARTER:case e.QUARTER2DATE:case e.QUARTER_PLUS:return{frequency:o,frequencyInterval:c,dateRange:s.YEARLY};case e.FQ:case e.FQ2DATE:case e.FQ_PLUS:return{frequency:n,frequencyInterval:c,dateRange:s.YEARLY};case e.YEAR:case e.YEAR2DATE:case e.YEAR_PLUS:return{frequency:i,frequencyInterval:c,dateRange:s.YEARLY};case e.FY:case e.FY2DATE:case e.FY_PLUS:return{frequency:l,frequencyInterval:c,dateRange:s.YEARLY};default:return{frequency:r,frequencyInterval:\"\",dateRange:s.YEARLY}}}var x=function x(e){e.colorType;var r,t,a,o,n=e.colorPalette,i=e.chartColor,l=e.showDataLabel,d=(e.showLegend,e.showTotal),c=e.yAxisTitle,u=e.yAxisFrom,v=e.yAxisTo,y=e.sysId,R=e.indicator,A=(e.element,e.breakdown),x=e.aggregate,E=e.sort_direction,F=e.sort_on,P=(e.breakdown_level2,e.color_scheme,e.description),B=e.name,O=e.showTitle,C=e.showHeader,L=e.showBorder,N=e.d,Y=e.indexes,D=e.showTarget,M=e.showThresholds,H=e.showTrend,J=e.showConfidence,U=e.showForecast,q=e.showComments,G=e.chartType,z=e.label,V=e.followElement,j=F,Q=E,W=A.value,K=null===(r=Y.sys_id[W])||void 0===r?void 0:r[0],Z=null===(t=Y.sys_id[null==K||null===(a=K.dimension)||void 0===a?void 0:a.value])||void 0===t?void 0:t[0],X=null==Z?void 0:Z.facts_table,$=X===f,ee=\"pa_buckets\"===X;\"default\"===F&&(j=$?\"choice\":ee?\"bucket\":\"name\"),-1===[\"name\",\"value\",\"default\"].indexOf(F)&&(j=\"value\",Q=\"desc\",N.migrationNotes.push(g({message:p(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:y,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:N.featureFlags})));var re=I(e);if(re.doMigration){var te,ae,oe=10;if(null!=x&&x.value){var ne=k(Y.sys_id[null==x?void 0:x.value][0].interval);oe=ne.frequency,te=ne.frequencyInterval,ae=ne.dateRange}var ie=function(e,r){var t={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},a=function a(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),a=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(a,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))t.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){t.showAbsolutePeriod=!0,t.startTime=a(null==e?void 0:e.from),t.endTime=a(null==e?void 0:e.to);var o=new Date;new Date(t.startTime)>o&&!t.endTime?t.endTime=t.startTime:t.startTime&&!t.endTime?t.useCurrentDateForEnd=!0:!t.startTime&&t.endTime&&(t.showMaximumRange=!0,t.endTime=null)}else{t.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var n=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),i=m(Object.keys(s),function(e){return s[e]===n},!0),l=m(Object.keys(s),function(e){return s[e]===r},!0);t.period=i<l?r:n}return t}(e.timePeriod,ae),le={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",colorConfig:{type:\"default\"},configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[],dateFormat:\"default\",description:P,disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null==ie?void 0:ie.endTime,extensionType:S(G,A),filterConfigurations:\"@state.parFilters\",followFilters:!0,showFilterAsSeparateSeries:\"separate\"===e.multiple_elements_view,groupBy:[],headerTitle:O?B:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!1,hideYAxis2:!1,hideYAxis3:!1,hideYAxis4:!1,legendExpandToFit:!0,legendHorizontalAlignment:\"center\",legendPosition:\"bottom\",lineStrokeWidth:\"2\",metrics:[],filterPerMetric:[],newReporting:!1,numberOfPeriods:null==ie?void 0:ie.numberOfPeriods,period:null==ie?void 0:ie.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null==ie?void 0:ie.showAbsolutePeriod,useCurrentDateForEnd:null==ie?void 0:ie.useCurrentDateForEnd,showBorder:L,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:q,showConfidenceBand:J,showDataLabels:l,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:U,showForecastRange:!1,showGapPercentage:null,showHeader:C,showHeaderSeparator:!1,showLegend:!0,showLegendValue:!1,showMaximumRange:null==ie?void 0:ie.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:D,showThreshold:M,showTotalAggregate:!1,showTotalValue:d,showTrend:H,showXGrid:!0,showYGrid:!0,showContinuousLine:!1,sortBy:j,sortByOrder:Q,startTime:null==ie?void 0:ie.startTime,telemetry:\"null\",trendBy:{},wrapTitle:!1,yAxis0Title:c,yAxis0To:v,yAxis0From:u,yAxisStyle:\"default\",allowChangeDateRange:!1,showDateRangeByDefault:!1},se=h(null==R?void 0:R.value),de=_(se),ce=Y.sys_id[null==R?void 0:R.value][0],ue={},me={metricId:de,dataSourceId:se};ue[\"\".concat(null==R?void 0:R.value,\":\").concat(JSON.stringify(re.breakdowns))]=me,le.dataSources=[{allowRealTime:\"1\"===ce.type,allowTotalValue:\"1\"===ce.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:se,indicatorType:ce.type,isScriptedIndicator:!1,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:re.breakdowns,indicator:null==R?void 0:R.value}}],re.groupBy&&(re.groupBy.dataSource=se,re.groupBy.metric=de,re.groupBy.isChoice=$,re.groupBy.isPaBucket=ee,le.groupBy=[{disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[re.groupBy],hideZeroValues:!1}]),le.metrics=[{dataSource:se,id:de,aggregateIndicator:null!==(o=null==x?void 0:x.value)&&void 0!==o?o:\"\",frequency:oe,frequencyInterval:te,label:z,numberFormat:b(parseInt(ce.precision,10)),chartType:S(G),axisId:\"primary\"}],le.filterPerMetric=[{metricId:de,value:V}],\"column\"==G&&null!=A&&A.value?le.dataLabelPosition=\"middle\":le.trendBy={trendByFields:[{field:\"anything\",metric:de}],trendByFrequency:\"date\",trendByMinuteInterval:null};var pe=function(e,r,t,a,o,n,i){var l,s=null!==(l=e.widget_indicators[r])&&void 0!==l?l:[];s.sort(function(e,r){return parseInt(e.order,10)-parseInt(r.order,10)});try{var d,c=T(s);try{for(c.s();!(d=c.n()).done;){var u,m,v=d.value;if(\"true\"!==v.follow_element){var f=null===(u=v.indicator)||void 0===u?void 0:u.value;e.sys_id[f][0].name,n.migrationNotes.push(g({message:p(\"This visualization is in compatibility mode because the additional indicators follow elements feature is not supported.\"),level:1,originalArtifactSysId:r,artifactTable:null===(m=e.sys_id[r][0])||void 0===m?void 0:m.sys_table_name,featureFlags:n.featureFlags}))}}}catch(e){c.e(e)}finally{c.f()}}catch(e){console.error(\"ERROR: Error occurred while handling widget indicators for widget: \".concat(i||r))}var y,w=!1,R={},A=T(s);try{for(A.s();!(y=A.n()).done;){var x,E,F,P=y.value,B=I({breakdown:P.breakdown,breakdown_level2:P.breakdown_level2,element:P.element,element_level2:P.element_level2,indexes:e,elements_filter:P.elements_filter,manual_elements:P.manual_elements}),O=void 0,C=void 0,L=e.sys_id[null===(x=P.indicator)||void 0===x?void 0:x.value][0];if(o[\"\".concat(null===(E=P.indicator)||void 0===E?void 0:E.value,\":\").concat(JSON.stringify(B.breakdowns))]){var N,Y;O=o[\"\".concat(null===(N=P.indicator)||void 0===N?void 0:N.value,\":\").concat(JSON.stringify(B.breakdowns))].dataSourceId,C=o[\"\".concat(null===(Y=P.indicator)||void 0===Y?void 0:Y.value,\":\").concat(JSON.stringify(B.breakdowns))].metricId}else{var D,M,H,J,U;O=h(null===(D=P.indicator)||void 0===D?void 0:D.value),C=_(O),o[null===(M=P.indicator)||void 0===M?void 0:M.value]={metricId:C,dataSourceId:O},t.dataSources.push({allowRealTime:\"1\"===L.type,allowTotalValue:\"1\"===L.type,dataCategories:[\"group\",\"simple\",\"trend\"],id:O,indicatorType:L.type,isScriptedIndicator:!1,label:L.name,preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],sourceType:\"indicator\",uuid:{breakdowns:B.breakdowns,indicator:null===(H=P.indicator)||void 0===H?void 0:H.value}});var q=\"primary\";\"true\"===P.second_y_axis&&(t.yAxis1Title=P.label,t.yAxis1Position=\"right\",t.yAxis1From=\"\",t.yAxis1To=\"\",q=\"axis1\");var G=10,z=void 0,V=null!==(J=null===(U=P.aggregate)||void 0===U?void 0:U.value)&&void 0!==J?J:\"\";if(V){var j,Q=k((null===(j=e.sys_id[V])||void 0===j?void 0:j[0]).interval);G=Q.frequency,z=Q.frequencyInterval}var W={dataSource:O,id:C,aggregateIndicator:V,frequency:G,frequencyInterval:z,label:P.label,numberFormat:b(parseInt(L.precision,10)),chartType:S(P.chart_type),axisId:q},K={field:\"anything\",metric:C};\"stacked\"===P.chart_type&&(w=!0),t.metrics.push(W),t.filterPerMetric.push({metricId:C,value:\"true\"===(null==P?void 0:P.follow_element)}),t.trendBy.trendByFields.push(K)}B.groupBy&&(B.groupBy.dataSource=O,B.groupBy.metric=C,t.groupBy.push({disableRanges:!1,maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[B.groupBy],hideZeroValues:!1})),\"\"!==P.color&&null!==(F=P.color)&&void 0!==F&&F.value&&(R[C]=P.color.value)}}catch(e){A.e(e)}finally{A.f()}return(t.metrics.length>1||t.groupBy.length>0)&&(t.showTarget=!1,t.showTrend=!1,t.showConfidenceBand=!1,t.showThreshold=!1,t.showComment=!1),{hasStackedColumn:w,widgetColors:R}}(Y,y,le,0,ue,N,B),ge=pe.hasStackedColumn,ve=pe.widgetColors;if(le.filterPerMetric.some(function(e){return null==e?void 0:e.value})||(le.followFilters=!1,le.showFilterIcon=!1),ge&&(le.extensionType=\"bar\",le.chartVariation=\"stacked\"),n&&n.length>0&&0===Object.keys(ve).length)le.colorConfig={type:\"palette\",palette:n};else if(le.metrics.length>1){var fe,he;fe=n&&n.length>0?w(null!==(he=Y.sys_id[n])&&void 0!==he?he:[],1)[0]:w(Y.sys_id[\"68d08c72d700210096614251ce61039e\"],1)[0];for(var _e=[],ye=0;ye<32;ye++){var be=\"color_\".concat(ye+1);if(\"\"===fe[be])break;_e.push(fe[be].value)}var we=0;le.colorConfig={type:\"colorsPerMetric\",values:le.metrics.map(function(e){var r;return e.id===de&&null!=i&&i.value?r=i.value:ve[e.id]?r=ve[e.id]:(r=_e[we%_e.length],we+=1),{metric:e.id,color:r}})}}else i&&1===le.metrics.length&&(le.colorConfig={type:\"singleColor\",values:[{color:i.value,metric:de}]});return le}N.migrationNotes.push(g({message:p(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:y,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:N.featureFlags}))},E=function E(e){switch(e.extensionType){case\"trend\":case\"bar\":return\"2bd5dc19a7ad083941b7c992a966dd78\";case\"line\":return\"18ac962264404bcc0039359d184b15f3\";case\"area\":return\"aba8630dc2ccc9b3c1774af1b6820696\";case\"step\":return\"7fa5f7264941fabfb1542985da30e0b8\";case\"spline\":return\"0f1e76928c4814e1430774fb864003f0\";case\"vertical_bar\":return\"23051643b7e03010097cb81cde11a910\"}};function F(e){return e?parseInt(e).toString():\"10\"}var P=function P(e,r,t,a){!function(e,r,t){for(var a=0,o=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:p(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:p(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<o.length;a++){var n=o[a];n.shouldLog&&e.migrationNotes.push(g(n.message))}}(e,r);var o,n=function(e){var r=e.indicator,t=e.element,a=e.show_data_labels,o=e.breakdown,n=e.aggregate,i=e.sort_direction,l=e.sort_on,s=e.breakdown_level2,d=e.element_level2,c=e.color_scheme,u=e.description,m=e.name,p=e.showTitle,g=e.type,v=e.period,f=e.date_from,h=e.date_to,_=e.show_range_selector,y=e.show_breakdown_selector,b=null==c?void 0:c.value,w=\"true\"===a,T=e.field,R=\"true\"===e.show_legend,A=e.set_color,I=\"true\"===e.show_total,S=e.yaxis_title,k=e.yaxis_from,x=e.yaxis_to,E=\"true\"===e.include_target,F=\"true\"===e.include_thresholds,P=\"true\"===e.include_trend,B=\"true\"===e.include_confidence,O=\"true\"===e.include_forecast,C=\"true\"===e.include_comments,L=e.compare_main_label,N=e.chart_color,Y=\"true\"===e.follow_element,D=e.multiple_elements_view,M={period:v,from:f,to:h};return{colorType:A,colorPalette:b,chartColor:N,showDataLabel:w,groupBy:T,showLegend:R,showTotal:I,yAxisTitle:S,yAxisFrom:k,yAxisTo:x,sysId:e.sys_id,indicator:r,element:t,show_data_labels:a,breakdown:o,aggregate:n,sort_direction:i,sort_on:l,breakdown_level2:s,color_scheme:c,description:u,name:m,showTitle:p,type:g,element_level2:d,timePeriod:M,showTarget:E,showThresholds:F,showTrend:P,showConfidence:B,showForecast:O,showComments:C,chartType:e.visualization,label:L,show_range_selector:_,followElement:Y,multiple_elements_view:D,show_breakdown_selector:y}}(r),i=function(e){var r=x(e);if(r)return r.chartVariation=e.stacked?\"stacked\":\"side-by-side\",r}(function(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}(n,{d:e,indexes:t},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(a)));return i?(function(e,r,t,a){var o;if(\"breakdown\"===r.type)if(void 0!==a.groupBy&&a.groupBy.length>0){var n=a.groupBy[0].maxNumberOfGroups;a.groupBy[0].maxNumberOfGroups=r.show_top_x?parseInt(r.show_top_x).toString():F(n)}else if(void 0!==a.breakdowns&&a.breakdowns.length>0){var i=a.breakdowns[0].perPage;a.breakdowns[0].perPage=r.show_top_x?parseInt(r.show_top_x).toString():F(i)}else e.migrationNotes.push(g({message:p(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===r.show_breakdown_selector){var l=r.indicator.value,s=null===(o=t.indicator_breakdowns)||void 0===o?void 0:o[l];a.additionalGroupByConfig=(null==s?void 0:s.map(function(e){var r,a,o=null===(r=t.sys_id[null===(a=e.breakdown)||void 0===a?void 0:a.value])||void 0===r?void 0:r[0];return{id:null==o?void 0:o.sys_id,metricLabel:null==o?void 0:o.name}}))||[]}else a.additionalGroupByConfig=[]}(e,r,t,i),{component_id:E(i),component_props:i}):e.migratingFromJava&&a?function(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}}(r,a):function(e,r){var t={message:p(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(g({message:p(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(g(t))&&e.migrationNotes.push(g(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(o=\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(o,\"</p>\"))})};this.run=function(e,r,t,a,o){var n,i={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=P(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"ba4ac793a3d031108d80ad2f241e6182","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:36:19","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/2bd5dc19a7ad083941b7c992a966dd78","value":"2bd5dc19a7ad083941b7c992a966dd78"},"key":"columnPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),a=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(n)||(i=\"=\",n%1);){if((t=o.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=i.charAt(63&r>>8-n%1*8)}return a.toString()},r=function r(e,_r){return void 0!==e&&void 0!==_r&&e.indexOf(_r)>-1},t=function t(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,a=0;a<e.length;a++)e.charAt(a)!==r||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function o(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var a=function a(e,r){return{text:e,vars:r}},n=function n(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,n=e.artifactTable,l=e.hasNewArtifact,s=e.debugInfo,d=e.featureFlags,c={text:r,level:t,help:o,originSysId:a,hasNewArtifact:l,table:n,debugInfo:s};return\"true\"===(null==d?void 0:d.translatedLogs)?c:i(c)},i=function i(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text};function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var s=function s(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var o,a=t(e,\"^\"),n=[],i=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e3){s=!0,n=_e3},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw n}}}}(a);try{var s=function s(){var e=o.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,n=arguments[1],i=0;i<a;i++){var l=o[i];if(r.call(n,l,i,o))return t?i:l}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";n.push(e)};for(i.s();!(o=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}return n.join(\"^\")};function d(e){return d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},d(e)}var c=function c(e){return{durationFormat:m(o(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},u=function u(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=m(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},m=function m(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var n in t)void 0!==o[t[n]]&&e[n]!==o[t[n]]&&(a=!0,o[t[n]]=e[n]);return!!a&&o},p=function p(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},g=function g(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},f=(g(\"content_block_static\",\"com.glide.cms.RenderBlock\"),g(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),g(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),g(\"\",\"com.glide.ui.portal.RenderReport\"),g(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),v=(g(f.group,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.group2,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.single,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.multi,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.date,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.bool,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),g(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),g(f.debug,\"com.glideapp.home.RenderHomepagePublishers\"),g(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),g(\"\",\"com.glide.ui.portal.RenderDashboard\"),g(\"report\",\"com.glide.ui.portal.RenderJavascript\"),g(\"\",\"com.glide.ui.portal.RenderJavascript\"),g(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),g(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),g(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),g(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),b=function b(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},h=function h(e,r){var t={message:a(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(n({message:a(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(n(t))&&e.migrationNotes.push(n(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},_=function _(i,l,m,g){var _,y=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(n({message:a(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(i,l),w=function(t,a){var n,i,l,m,p,g,f,v,b,h,_=(v=t.table,e(\"table\".concat(v).concat(new Date().getTime()).concat(1e8*Math.random()))),y=e(_+new Date().getTime()+1e8*Math.random()),w={type:\"default\"};\"true\"===t.use_color_heatmap&&\"65b303c7a9fe3dba00629aff95ee3597\"!==(null===(n=t.axis_min_color)||void 0===n?void 0:n.value)&&\"b0d449b3d7332100fa6c0c12ce610383\"!==(null===(i=t.axis_max_color)||void 0===i?void 0:i.value)&&null!==(l=t.axis_min_color)&&void 0!==l&&l.value&&null!==(m=t.axis_max_color)&&void 0!==m&&m.value&&(w={type:\"colorRange\",values:[{color:null===(b=t.axis_min_color)||void 0===b?void 0:b.value,id:\"minColor\"},{color:null===(h=t.axis_max_color)||void 0===h?void 0:h.value,id:\"maxColor\"}]});var R=function(e,r,t,o,a){var n={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},i={durationFormattingProperties:c,numberFormattingProperties:u};switch(a){case\"heatmap\":case\"box\":return\"glide_duration\"===t?n:i.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===d(e)&&i.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return i.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(i[s]&&e[s]&&Object.keys(e[s]).length>0){var m=Object.keys(e[s])[0];return i[s](e[s][m],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:n}(JSON.parse(\"\"==t.formatting_configuration||null==t.formatting_configuration?\"{}\":t.formatting_configuration),parseInt(t.decimal_precision,10),t.aggregateFieldType,t.aggregate,t.type),F=12;\"-1\"===t.other_threshold?F=\"ALL\":t.other_threshold>-2&&(F=t.other_threshold);var S,T,O=(S=t.filter,T={sortBy:\"value\",sortByOrder:\"desc\"},r(S,\"ORDERBY\")&&r(S,\"ASC\")&&(T.sortByOrder=\"asc\"),T);return{showZero:\"true\"===t.show_zero,showDataLabels:\"true\"===t.show_chart_data_label,showLegend:!0,legendPosition:\"bottom\",colorConfig:w,newReporting:!1,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:t.table,filterQuery:s(t.filter),reportSourceSysId:null===(p=t.report_source)||void 0===p?void 0:p.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:_,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:t.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:t.showTitle?null!==(g=t.name)&&void 0!==g?g:t.title:\"\",showBorder:t.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[o({dataSource:_,id:y,aggregateFunction:(null===(f=t.aggregate)||void 0===f?void 0:f.length)>0?t.aggregate:\"COUNT\",aggregateField:\"COUNT\"!==t.aggregate?t.sumfield:void 0,axisId:\"primary\"},R)],groupBy:[{categoryIndex:0,groupBy:[{dataSource:_,groupByField:t.column,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:F,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:\"true\"===t.others,disableRanges:!1},{categoryIndex:1,groupBy:[{dataSource:_,groupByField:t.row,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:F,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,disableRanges:!1}],sortBy:O.sortBy,sortByOrder:O.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",configVersion:\"23.0.0-ci-SNAPSHOT\"}}(o(l,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(g)));return!w||y?i.migratingFromJava&&g?b(l,g):(_=\"report\",function(e,r,t,i){var l;return(l=_===v?function(){for(var e in f)if(f[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(n({message:a(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===_||_===v?function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?b(r,o):h(e,{static_content:p(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> widget.\"))})}(e,o(r,{type:l}),0,i):function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?b(r,o):h(e,{static_content:p(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> report.\"))})}(e,r,0,i)):function(e,r,t,o){var i,l,s,d;if(e.migratingFromJava&&o)return b(r,o);var c=\"\";null!=r&&r.type?c=r.type:null!=o&&null!==(i=o.type)&&void 0!==i&&i.value?c=null==o||null===(l=o.type)||void 0===l?void 0:l.value:null!=o&&null!==(s=o.renderer)&&void 0!==s&&s.value&&(c=o.renderer.value);var u=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(n({message:a(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),h(e,{static_content:p(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(c,\": \").concat(u,\"</span> widget.\"))})}(e,r,0,i)})(i,l,m,g):(function(e,r,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var a=t(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),o.additionalGroupByConfig=[],a.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(l,0,w),{component_props:w,component_id:\"d1f6c60ce95607ea1ef236430d5fdec9\"})};this.run=function(e,r,t,o,a){var n,i={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=_(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"c0b4ac63b7232110997a9f78ce11a9cd","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:24:10","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/d1f6c60ce95607ea1ef236430d5fdec9","value":"d1f6c60ce95607ea1ef236430d5fdec9"},"key":"heatmapReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r){return{text:_e,vars:r}},r=function r(e){var r=e.message,o=e.level,i=e.tooltip,t=e.originalArtifactSysId,c=e.artifactTable,n=e.hasNewArtifact,s=e.debugInfo,l=e.featureFlags,d={text:r,level:o,help:i,originSysId:t,hasNewArtifact:n,table:c,debugInfo:s};return\"true\"===(null==l?void 0:l.translatedLogs)?d:a(d)},a=function a(e){var r,a,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},o=function o(e,r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},i=(o(\"content_block_static\",\"com.glide.cms.RenderBlock\"),o(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),o(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),o(\"\",\"com.glide.ui.portal.RenderReport\"),o(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),o(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1);o(-1,\"com.glideapp.home.RenderHomepagePublishers\"),o(4,\"com.glideapp.home.RenderHomepagePublishers\"),o(i,\"com.glideapp.home.RenderHomepagePublishers\"),o(2,\"com.glideapp.home.RenderHomepagePublishers\"),o(3,\"com.glideapp.home.RenderHomepagePublishers\"),o(5,\"com.glideapp.home.RenderHomepagePublishers\"),o(6,\"com.glideapp.home.RenderHomepagePublishers\"),o(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),o(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),o(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glide.ui.portal.RenderDashboard\"),o(\"report\",\"com.glide.ui.portal.RenderJavascript\"),o(\"\",\"com.glide.ui.portal.RenderJavascript\"),o(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),o(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),o(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),o(\"METRIC\",\"com.snc.treemap.TreemapRenderer\");var t=function t(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},c=function c(a,o,i,_c){var n,s,l,d;return a.migratingFromJava&&_c?t(o,_c):function(a,o){var i={message:e(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags};return\"true\"===(null==o?void 0:o.conditional)&&a.migrationNotes.push(r({message:e(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags})),-1===a.migrationNotes.indexOf(r(i))&&a.migrationNotes.push(r(i)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==o?void 0:o.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==o?void 0:o.sys_id)}}}(a,{static_content:(d=\"<b>Unsupported migration: \".concat(null!==(n=null!==(s=o.name)&&void 0!==s?s:o.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=o&&o.type?o.type:null==_c||null===(l=_c.type)||void 0===l?void 0:l.value,\"</span> report.\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(d,\"</p>\"))})};this.run=function(a,o,i,n,s){var l,d={migratingFromJava:!0,migrationNotes:[],featureFlags:s,migratingSingleArtifact:!0},p=function(a,o,i,n){return a.migratingFromJava&&n?t(o,n):(a.migrationNotes.push(r({message:e(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:a.featureFlags})),c(a,o))}(d,null===(l=a.sys_id[i])||void 0===l?void 0:l[0],0,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return p.migrationNotes=d.migrationNotes,p};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"c4952ca7b7232110997a9f78ce11a950","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:27:59","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/2d56f06d55f46bbd4e79b5e624beb940","value":"2d56f06d55f46bbd4e79b5e624beb940"},"key":"tboxReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(_e,\"</p>\")},r=function r(e,_r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===_r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=_r?_r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=_r?_r:\"\")},a=(r(\"content_block_static\",\"com.glide.cms.RenderBlock\"),r(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),r(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),r(\"\",\"com.glide.ui.portal.RenderReport\"),r(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),o=(r(a.group,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.group2,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.single,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.multi,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.date,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.bool,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),r(a.debug,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderDashboard\"),r(\"report\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderJavascript\"),r(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),r(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),r(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),r(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"widget\"),t=\"filter\",i=function i(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},n=function n(e,r){return{text:e,vars:r}},c=function c(e){var r=e.message,a=e.level,o=e.tooltip,t=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,c=e.debugInfo,s=e.featureFlags,d={text:r,level:a,help:o,originSysId:t,hasNewArtifact:n,table:i,debugInfo:c};return\"true\"===(null==s?void 0:s.translatedLogs)?d:l(d)},l=function l(e){var r,a,o,t;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==o?o:e.text},s=function s(e,r){var a={message:n(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(c({message:n(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(c(a))&&e.migrationNotes.push(c(a)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}};this.run=function(r,l,d,u,p){var m,g={migratingFromJava:!0,migrationNotes:[],featureFlags:p,migratingSingleArtifact:!0},v=function(r,l,d,u){return r.migratingFromJava&&u?i(l,u):(p=o,function(r,l,d,u){var m;return(m=p===t?function(){for(var e in a)if(a[e]===(null==l?void 0:l.type))return e}():null==l?void 0:l.type)?(r.migrationNotes.push(c({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==l?void 0:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:r.featureFlags})),p===o||p===t?function(r,a,o,t){var n,c,l;return r.migratingFromJava&&t?i(a,t):s(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(n=null!==(c=a.name)&&void 0!==c?c:a.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> widget.\"))})}(r,function(){for(var e={},r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return a.forEach(function(r){Object.assign(e,r)}),e}(l,{type:m}),0,u):function(r,a,o,t){var n,c,l;return r.migratingFromJava&&t?i(a,t):s(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(n=null!==(c=a.name)&&void 0!==c?c:a.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> report.\"))})}(r,l,0,u)):function(r,a,o,t){var l,d,u,p;if(r.migratingFromJava&&t)return i(a,t);var m=\"\";null!=a&&a.type?m=a.type:null!=t&&null!==(l=t.type)&&void 0!==l&&l.value?m=null==t||null===(d=t.type)||void 0===d?void 0:d.value:null!=t&&null!==(u=t.renderer)&&void 0!==u&&u.value&&(m=t.renderer.value);var g=null==t||null===(p=t.title)||void 0===p?void 0:p.value;return r.migrationNotes.push(c({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:r.featureFlags})),s(r,{static_content:e(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(m,\": \").concat(g,\"</span> widget.\"))})}(r,l,0,u)})(r,l,d,u);var p}(g,null===(m=r.sys_id[d])||void 0===m?void 0:m[0],r,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return v.migrationNotes=g.migrationNotes,v};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"c9b0dbd7a3d031108d80ad2f241e61ad","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 12:04:19","sys_name":"","sys_scope":"","macroponent":"","key":"processPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=_e?_e:\"\",\"::\").concat(null!=r?r:\"\")},r=(e(\"content_block_static\",\"com.glide.cms.RenderBlock\"),e(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),e(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),e(\"\",\"com.glide.ui.portal.RenderReport\"),e(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1);e(-1,\"com.glideapp.home.RenderHomepagePublishers\"),e(4,\"com.glideapp.home.RenderHomepagePublishers\"),e(r,\"com.glideapp.home.RenderHomepagePublishers\"),e(2,\"com.glideapp.home.RenderHomepagePublishers\"),e(3,\"com.glideapp.home.RenderHomepagePublishers\"),e(5,\"com.glideapp.home.RenderHomepagePublishers\"),e(6,\"com.glideapp.home.RenderHomepagePublishers\"),e(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderDashboard\"),e(\"report\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderJavascript\"),e(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),e(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),e(\"METRIC\",\"com.snc.treemap.TreemapRenderer\");var a=function a(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},o=function o(e,r){return{text:e,vars:r}},i=function i(e){var r=e.message,a=e.level,o=e.tooltip,i=e.originalArtifactSysId,c=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,d={text:r,level:a,help:o,originSysId:i,hasNewArtifact:n,table:c,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?d:t(d)},t=function t(e){var r,a,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text},c=function c(e,r,t,_c){var n,l,s,d;return e.migratingFromJava&&_c?a(r,_c):function(e,r){var a={message:o(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(i({message:o(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(i(a))&&e.migrationNotes.push(i(a)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(d=\"<b>Unsupported migration: \".concat(null!==(n=null!==(l=r.name)&&void 0!==l?l:r.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==_c||null===(s=_c.type)||void 0===s?void 0:s.value,\"</span> widget.\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(d,\"</p>\"))})};this.run=function(e,r,t,n,l){var s,d={migratingFromJava:!0,migrationNotes:[],featureFlags:l,migratingSingleArtifact:!0},p=function(e,r,t,n){return e.migratingFromJava&&n?a(r,n):(e.migrationNotes.push(i({message:o(\"We are unable to migrate this component.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),c(e,r))}(d,null===(s=e.sys_id[t])||void 0===s?void 0:s[0],0,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return p.migrationNotes=d.migrationNotes,p};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"ce2ecbd3a3d031108d80ad2f241e61e9","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:53:12","sys_name":"","sys_scope":"","macroponent":"","key":"pyramidPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),a=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(n)||(i=\"=\",n%1);){if((t=o.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=i.charAt(63&r>>8-n%1*8)}return a.toString()},r=function r(e,_r){return void 0!==e&&void 0!==_r&&e.indexOf(_r)>-1},t=function t(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,a=0;a<e.length;a++)e.charAt(a)!==r||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function o(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,n=arguments[1],i=0;i<a;i++){var l=o[i];if(r.call(n,l,i,o))return t?i:l}}function a(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var n=function n(e,r){return{text:e,vars:r}},i=function i(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,n=e.artifactTable,i=e.hasNewArtifact,s=e.debugInfo,c=e.featureFlags,d={text:r,level:t,help:o,originSysId:a,hasNewArtifact:i,table:n,debugInfo:s};return\"true\"===(null==c?void 0:c.translatedLogs)?d:l(d)},l=function l(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text};function s(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function d(e){return d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},d(e)}var u=function u(e){return{durationFormat:p(a(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},g=function g(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=p(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},p=function p(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var n in t)void 0!==o[t[n]]&&e[n]!==o[t[n]]&&(a=!0,o[t[n]]=e[n]);return!!a&&o},m=function m(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},f=function f(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},h=(f(\"content_block_static\",\"com.glide.cms.RenderBlock\"),f(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),f(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),f(\"\",\"com.glide.ui.portal.RenderReport\"),f(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),v=(f(h.group,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.group2,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.single,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.multi,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.date,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.bool,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),f(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),f(h.debug,\"com.glideapp.home.RenderHomepagePublishers\"),f(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"\",\"com.glide.ui.portal.RenderDashboard\"),f(\"report\",\"com.glide.ui.portal.RenderJavascript\"),f(\"\",\"com.glide.ui.portal.RenderJavascript\"),f(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),f(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),f(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),f(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),b=function b(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},y=function y(e,r){var t={message:n(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(i({message:n(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(i(t))&&e.migrationNotes.push(i(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},_=function _(e,r,t){return function(e,r){var t;return!e.migratingSingleArtifact&&\"true\"===((null==r||null===(t=r.publisher_widget)||void 0===t?void 0:t.value)||\"false\")}(e,t)?(r.chartInteractionAction=\"applyAsFilter\",r):r},w=function w(l,c,p,f){var w,R=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(i({message:n(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(l,c),T=function(e){var r,o,a,n,i=e.table,l=e.aggregateFieldType,s=e.filter,c=e.groupByMetadata,d=e.chart_title||e.title,u=null===(r=e.color_palette)||void 0===r?void 0:r.value,g=e.show_chart_data_label,p=e.field,m=e.legend_horizontal_alignment,f=e.legend_vertical_alignment,h=e.show_legend,v=e.decimal_precision,b=e.show_chart_border,y=e.source_type,_=e.aggregate,w=e.other_threshold,R=e.sumfield,T=t(e.colors,\",\"),F=e.set_color,S=e.show_chart_total,A=null===(o=e.color)||void 0===o?void 0:o.value;try{var P;n=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":null!==(P=e.formatting_configuration)&&void 0!==P?P:\"null\")}catch(r){console.log(\"Unable to transform json 4\",r.toString(),e),n={}}var O=null===(a=e.report_source)||void 0===a?void 0:a.value,C=e.is_real_time,I=e.display_grid;return{table:i,chartTitle:d,colorType:F,colorPalette:u,singleColor:A,showDataLabel:g,groupBy:p,legendVerticalAlignment:f,legendHorizontalAlignment:m,showLegend:h,numberOfPeriods:v,showChartBorder:b,sourceType:y,aggregateType:_,otherThreshold:w,filter:s,aggregateField:R,colors:T,showTotal:S,formattingConfiguration:n,reportSource:O,reportId:e.sys_id,isRealTime:C,aggregateFieldType:l,showOthers:e.others,groupByMetadata:c,showDataTable:I}}(c),F=function(l,c){var p=l.table,m=l.chartTitle,f=l.colorPalette,h=l.showDataLabel,v=l.groupBy,b=l.showOthers,y=l.legendHorizontalAlignment,_=l.legendVerticalAlignment,w=l.numberOfPeriods,R=(l.showChartBorder,l.sourceType),T=l.aggregateType,F=l.otherThreshold,S=l.filter,A=l.showLegend,P=l.aggregateField,O=l.colorType,C=l.formattingConfiguration,I=l.reportId,B=l.reportSource,N=l.isRealTime,E=l.aggregateFieldType,J=l.showHeader,x=l.showTitle,D=l.showBorder,H=l.groupByMetadata,U=l.singleColor,k=l.d,M=l.showDataTable,L=function(e){var t={sortBy:\"value\",sortByOrder:\"desc\"};return r(e,\"ORDERBY\")&&r(e,\"ASC\")&&(t.sortByOrder=\"asc\"),t}(S),z=function(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var a,n=t(e,\"^\"),i=[],l=s(n);try{var c=function c(){var e=a.value;if(o(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";i.push(e)};for(l.s();!(a=l.n()).done;)c()}catch(e){l.e(e)}finally{l.f()}return i.join(\"^\")}(S),j=function(e,r){var t={register:\"\",horizontal:\"\",orientation:\"vertical\"};function o(){t.horizontal=\"center\",\"left\"===e&&(t.horizontal=\"start\"),\"right\"===e&&(t.horizontal=\"end\")}return\"right\"===e?(t.register=\"right\",t.horizontal=\"center\"):\"left\"===e&&(t.register=\"left\",t.horizontal=\"center\"),\"bottom\"===r||\"center\"===r||\"middle\"===e?(t.register=\"bottom\",t.orientation=\"horizontal\",o()):\"top\"===r&&(t.orientation=\"horizontal\",t.register=\"top\",o()),t}(y,_),G=function(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(r){return e}}(F),V=function(e,r,t,o,a){var n={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},i={durationFormattingProperties:u,numberFormattingProperties:g};if(\"glide_duration\"===t){if(\"object\"===d(e)&&i.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return i.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(i[s]&&e[s]&&Object.keys(e[s]).length>0){var c=Object.keys(e[s])[0];return i[s](e[s][c],r)}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:n}(C,parseInt(w,10),E,T),Y=function(r){return e(\"table\".concat(r).concat(new Date().getTime()).concat(1e8*Math.random()))}(p),W=function(r){return e(r+new Date().getTime()+1e8*Math.random())}(Y),Q=function(e){var r=e.colorPalette,t=e.colorType,a=e.dashboard,l=e.reportId,c=e.enableColorPerMetric,d=e.singleColor,u=e.metrics,g=e.colorList,p=e.metricMap;if(u&&p&&!a.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var m={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)m.type=\"palette\",m.palette=r;else if(\"several_colors\"===t)!g||Array.isArray(g)&&!o(g,function(e){return\"\"!==e})?m.type=\"chartColor\":a.migrationNotes.push(i({message:n(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:n(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:l,artifactTable:\"sys_report\",featureFlags:a.featureFlags}));else if(\"chart_colors\"===t)m.type=\"chartColor\";else if(\"one_color\"===t&&((null==d?void 0:d.length)>0||o(Object.keys(null!=p?p:{}),function(e){var r;return(null===(r=p[e].metricColor)||void 0===r?void 0:r.length)>0})))if(p){for(var f=c?\"colorsPerMetric\":\"singleColor\",h=[],v=0,b=Object.keys(p);v<b.length;v++){var y,_=b[v];h.push({metric:p[_].metricId,color:null!==(y=p[_].metricColor)&&void 0!==y?y:\"de699435d7033100b4964ebfae610331\"})}m.type=f,m.values=h}else{var w,R=[],T=s(null!=u?u:[]);try{for(T.s();!(w=T.n()).done;){var F=w.value;R.push({color:d,metric:F})}}catch(e){T.e(e)}finally{T.f()}m.type=\"singleColor\",m.values=R}return m}({colorPalette:f,colorType:O,dashboard:k,reportId:I,singleColor:U,metrics:[W]}),q={applyDateRange:!1,bareBorder:!1,colorConfig:Q,configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"value\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:z,id:Y,reportSourceSysId:B,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===R||0===R.length?\"table\":R,tableOrViewName:p}],dateFormat:\"default\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"add-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:\"true\"==N,filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:[{groupBy:[{dataSource:Y,groupByField:v,isChoice:\"choice\"===(null==H?void 0:H.type)||!1,isPaBucket:!1,isRange:(null==H?void 0:H.isRange)||!1}],maxNumberOfGroups:null!=H&&H.isRange?\"ALL\":G,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==H||!H.isRange)&&\"true\"===b}],headerTitle:x?m:\"\",hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:j.horizontal,metrics:[a({aggregateFunction:(null==T?void 0:T.length)>0?T:\"COUNT\",axisId:\"primary\",dataSource:Y,id:W},V)],newReporting:!1,numberOfPeriods:parseInt(w,10),period:\"M\",registerOrientation:j.orientation,registerPosition:j.register,scoreType:null,showAbsolutePeriod:!1,showBorder:D,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"==h,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:J,showHeaderSeparator:!0,showMaximumRange:!1,showMetricLabel:!1,showRegister:\"true\"==A,showRegisterOnSameLine:!1,showRegisterPercentage:!0,showRegisterValue:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:L.sortBy,sortByOrder:L.sortByOrder,telemetry:\"null\",trendBy:null,truncationType:\"start\",wrapTitle:!0,showDataTable:\"true\"==M};return P&&\"COUNT\"!==T&&\"\"!==P&&(q.metrics[0].aggregateField=P),q}(a(T,{d:l},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(f)));return!F||R?l.migratingFromJava&&f?b(c,f):(w=\"report\",function(e,r,t,o){var l;return(l=w===v?function(){for(var e in h)if(h[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(i({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===w||w===v?function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?b(r,o):y(e,{static_content:m(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> widget.\"))})}(e,a(r,{type:l}),0,o):function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?b(r,o):y(e,{static_content:m(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var a,l,s,c;if(e.migratingFromJava&&o)return b(r,o);var d=\"\";null!=r&&r.type?d=r.type:null!=o&&null!==(a=o.type)&&void 0!==a&&a.value?d=null==o||null===(l=o.type)||void 0===l?void 0:l.value:null!=o&&null!==(s=o.renderer)&&void 0!==s&&s.value&&(d=o.renderer.value);var u=null==o||null===(c=o.title)||void 0===c?void 0:c.value;return e.migrationNotes.push(i({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),y(e,{static_content:m(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(d,\": \").concat(u,\"</span> widget.\"))})}(e,r,0,o)})(l,c,p,f):(function(e,r,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var a=t(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),o.additionalGroupByConfig=[],a.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(c,0,F),{component_id:\"96abe7e38d8790718022c5630a92176c\",component_props:_(l,F,f)})};this.run=function(e,r,t,o,a){var n,i={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=w(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"dbf468a7b7232110997a9f78ce11a943","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:25:29","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/96abe7e38d8790718022c5630a92176c","value":"96abe7e38d8790718022c5630a92176c"},"key":"pieReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),a=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(n)||(i=\"=\",n%1);){if((t=o.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=i.charAt(63&r>>8-n%1*8)}return a.toString()},r=function r(e,_r){return void 0!==e&&void 0!==_r&&e.indexOf(_r)>-1},t=function t(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,a=0;a<e.length;a++)e.charAt(a)!==r||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function o(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,n=arguments[1],i=0;i<a;i++){var l=o[i];if(r.call(n,l,i,o))return t?i:l}}function a(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var n=function n(e,r){return{text:e,vars:r}},i=function i(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,n=e.artifactTable,i=e.hasNewArtifact,s=e.debugInfo,c=e.featureFlags,d={text:r,level:t,help:o,originSysId:a,hasNewArtifact:i,table:n,debugInfo:s};return\"true\"===(null==c?void 0:c.translatedLogs)?d:l(d)},l=function l(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text};function s(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function d(e){return d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},d(e)}var u=function u(e){return{durationFormat:p(a(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},g=function g(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=p(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},p=function p(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var n in t)void 0!==o[t[n]]&&e[n]!==o[t[n]]&&(a=!0,o[t[n]]=e[n]);return!!a&&o},m=function m(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},f=function f(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},h=(f(\"content_block_static\",\"com.glide.cms.RenderBlock\"),f(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),f(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),f(\"\",\"com.glide.ui.portal.RenderReport\"),f(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),v=(f(h.group,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.group2,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.single,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.multi,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.date,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.bool,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),f(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),f(h.debug,\"com.glideapp.home.RenderHomepagePublishers\"),f(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"\",\"com.glide.ui.portal.RenderDashboard\"),f(\"report\",\"com.glide.ui.portal.RenderJavascript\"),f(\"\",\"com.glide.ui.portal.RenderJavascript\"),f(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),f(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),f(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),f(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),b=function b(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},y=function y(e,r){var t={message:n(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(i({message:n(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(i(t))&&e.migrationNotes.push(i(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},_=function _(e,r,t){return function(e,r){var t;return!e.migratingSingleArtifact&&\"true\"===((null==r||null===(t=r.publisher_widget)||void 0===t?void 0:t.value)||\"false\")}(e,t)?(r.chartInteractionAction=\"applyAsFilter\",r):r},w=function w(l,c,p,f){var w,R=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(i({message:n(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(l,c),T=function(e){var r,o,a,n,i=e.table,l=e.aggregateFieldType,s=e.filter,c=e.groupByMetadata,d=e.chart_title||e.title,u=null===(r=e.color_palette)||void 0===r?void 0:r.value,g=e.show_chart_data_label,p=e.field,m=e.legend_horizontal_alignment,f=e.legend_vertical_alignment,h=e.show_legend,v=e.decimal_precision,b=e.show_chart_border,y=e.source_type,_=e.aggregate,w=e.other_threshold,R=e.sumfield,T=t(e.colors,\",\"),F=e.set_color,S=e.show_chart_total,A=null===(o=e.color)||void 0===o?void 0:o.value;try{var P;n=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":null!==(P=e.formatting_configuration)&&void 0!==P?P:\"null\")}catch(r){console.log(\"Unable to transform json 4\",r.toString(),e),n={}}var O=null===(a=e.report_source)||void 0===a?void 0:a.value,C=e.is_real_time,I=e.display_grid;return{table:i,chartTitle:d,colorType:F,colorPalette:u,singleColor:A,showDataLabel:g,groupBy:p,legendVerticalAlignment:f,legendHorizontalAlignment:m,showLegend:h,numberOfPeriods:v,showChartBorder:b,sourceType:y,aggregateType:_,otherThreshold:w,filter:s,aggregateField:R,colors:T,showTotal:S,formattingConfiguration:n,reportSource:O,reportId:e.sys_id,isRealTime:C,aggregateFieldType:l,showOthers:e.others,groupByMetadata:c,showDataTable:I}}(c),F=function(l,c){var p=function(l,c){var p=l.table,m=l.chartTitle,f=l.colorPalette,h=l.showDataLabel,v=l.groupBy,b=l.showOthers,y=l.legendHorizontalAlignment,_=l.legendVerticalAlignment,w=l.numberOfPeriods,R=(l.showChartBorder,l.sourceType),T=l.aggregateType,F=l.otherThreshold,S=l.filter,A=l.showLegend,P=l.aggregateField,O=l.colorType,C=l.formattingConfiguration,I=l.reportId,B=l.reportSource,N=l.isRealTime,E=l.aggregateFieldType,J=l.showHeader,x=l.showTitle,D=l.showBorder,H=l.groupByMetadata,U=l.singleColor,k=l.d,M=l.showDataTable,L=function(e){var t={sortBy:\"value\",sortByOrder:\"desc\"};return r(e,\"ORDERBY\")&&r(e,\"ASC\")&&(t.sortByOrder=\"asc\"),t}(S),z=function(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var a,n=t(e,\"^\"),i=[],l=s(n);try{var c=function c(){var e=a.value;if(o(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";i.push(e)};for(l.s();!(a=l.n()).done;)c()}catch(e){l.e(e)}finally{l.f()}return i.join(\"^\")}(S),j=function(e,r){var t={register:\"\",horizontal:\"\",orientation:\"vertical\"};function o(){t.horizontal=\"center\",\"left\"===e&&(t.horizontal=\"start\"),\"right\"===e&&(t.horizontal=\"end\")}return\"right\"===e?(t.register=\"right\",t.horizontal=\"center\"):\"left\"===e&&(t.register=\"left\",t.horizontal=\"center\"),\"bottom\"===r||\"center\"===r||\"middle\"===e?(t.register=\"bottom\",t.orientation=\"horizontal\",o()):\"top\"===r&&(t.orientation=\"horizontal\",t.register=\"top\",o()),t}(y,_),G=function(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(r){return e}}(F),V=function(e,r,t,o,a){var n={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},i={durationFormattingProperties:u,numberFormattingProperties:g};if(\"glide_duration\"===t){if(\"object\"===d(e)&&i.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return i.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(i[s]&&e[s]&&Object.keys(e[s]).length>0){var c=Object.keys(e[s])[0];return i[s](e[s][c],r)}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:n}(C,parseInt(w,10),E,T),Y=function(r){return e(\"table\".concat(r).concat(new Date().getTime()).concat(1e8*Math.random()))}(p),W=function(r){return e(r+new Date().getTime()+1e8*Math.random())}(Y),Q=function(e){var r=e.colorPalette,t=e.colorType,a=e.dashboard,l=e.reportId,c=e.enableColorPerMetric,d=e.singleColor,u=e.metrics,g=e.colorList,p=e.metricMap;if(u&&p&&!a.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var m={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)m.type=\"palette\",m.palette=r;else if(\"several_colors\"===t)!g||Array.isArray(g)&&!o(g,function(e){return\"\"!==e})?m.type=\"chartColor\":a.migrationNotes.push(i({message:n(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:n(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:l,artifactTable:\"sys_report\",featureFlags:a.featureFlags}));else if(\"chart_colors\"===t)m.type=\"chartColor\";else if(\"one_color\"===t&&((null==d?void 0:d.length)>0||o(Object.keys(null!=p?p:{}),function(e){var r;return(null===(r=p[e].metricColor)||void 0===r?void 0:r.length)>0})))if(p){for(var f=c?\"colorsPerMetric\":\"singleColor\",h=[],v=0,b=Object.keys(p);v<b.length;v++){var y,_=b[v];h.push({metric:p[_].metricId,color:null!==(y=p[_].metricColor)&&void 0!==y?y:\"de699435d7033100b4964ebfae610331\"})}m.type=f,m.values=h}else{var w,R=[],T=s(null!=u?u:[]);try{for(T.s();!(w=T.n()).done;){var F=w.value;R.push({color:d,metric:F})}}catch(e){T.e(e)}finally{T.f()}m.type=\"singleColor\",m.values=R}return m}({colorPalette:f,colorType:O,dashboard:k,reportId:I,singleColor:U,metrics:[W]}),q={applyDateRange:!1,bareBorder:!1,colorConfig:Q,configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"value\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:z,id:Y,reportSourceSysId:B,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===R||0===R.length?\"table\":R,tableOrViewName:p}],dateFormat:\"default\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"add-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:\"true\"==N,filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:[{groupBy:[{dataSource:Y,groupByField:v,isChoice:\"choice\"===(null==H?void 0:H.type)||!1,isPaBucket:!1,isRange:(null==H?void 0:H.isRange)||!1}],maxNumberOfGroups:null!=H&&H.isRange?\"ALL\":G,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==H||!H.isRange)&&\"true\"===b}],headerTitle:x?m:\"\",hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:j.horizontal,metrics:[a({aggregateFunction:(null==T?void 0:T.length)>0?T:\"COUNT\",axisId:\"primary\",dataSource:Y,id:W},V)],newReporting:!1,numberOfPeriods:parseInt(w,10),period:\"M\",registerOrientation:j.orientation,registerPosition:j.register,scoreType:null,showAbsolutePeriod:!1,showBorder:D,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"==h,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:J,showHeaderSeparator:!0,showMaximumRange:!1,showMetricLabel:!1,showRegister:\"true\"==A,showRegisterOnSameLine:!1,showRegisterPercentage:!0,showRegisterValue:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:L.sortBy,sortByOrder:L.sortByOrder,telemetry:\"null\",trendBy:null,truncationType:\"start\",wrapTitle:!0,showDataTable:\"true\"==M};return P&&\"COUNT\"!==T&&\"\"!==P&&(q.metrics[0].aggregateField=P),q}(l),m=\"true\"==l.showTotal;return m&&(p.showTotalValue=m,p.showRegister=!1),p}(a(T,{d:l},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(f)));return!F||R?l.migratingFromJava&&f?b(c,f):(w=\"report\",function(e,r,t,o){var l;return(l=w===v?function(){for(var e in h)if(h[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(i({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===w||w===v?function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?b(r,o):y(e,{static_content:m(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> widget.\"))})}(e,a(r,{type:l}),0,o):function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?b(r,o):y(e,{static_content:m(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var a,l,s,c;if(e.migratingFromJava&&o)return b(r,o);var d=\"\";null!=r&&r.type?d=r.type:null!=o&&null!==(a=o.type)&&void 0!==a&&a.value?d=null==o||null===(l=o.type)||void 0===l?void 0:l.value:null!=o&&null!==(s=o.renderer)&&void 0!==s&&s.value&&(d=o.renderer.value);var u=null==o||null===(c=o.title)||void 0===c?void 0:c.value;return e.migrationNotes.push(i({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),y(e,{static_content:m(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(d,\": \").concat(u,\"</span> widget.\"))})}(e,r,0,o)})(l,c,p,f):(function(e,r,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var a=t(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),o.additionalGroupByConfig=[],a.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(c,0,F),{component_id:\"3809c6583b8dd540a0bf735ed493bae2\",component_props:_(l,F,f)})};this.run=function(e,r,t,o,a){var n,i={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=w(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"e0356067b7232110997a9f78ce11a9e7","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:26:22","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/3809c6583b8dd540a0bf735ed493bae2","value":"3809c6583b8dd540a0bf735ed493bae2"},"key":"semiDonutReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),a=\"\",i=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(i)||(n=\"=\",i%1);){if((t=o.charCodeAt(i+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=n.charAt(63&r>>8-i%1*8)}return a.toString()},r=function r(e,_r){return void 0!==e&&void 0!==_r&&e.indexOf(_r)>-1},t=function t(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,a=0;a<e.length;a++)e.charAt(a)!==r||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function o(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,i=arguments[1],n=0;n<a;n++){var l=o[n];if(r.call(i,l,n,o))return t?n:l}}function a(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var i=function i(e,r){return{text:e,vars:r}},n=function n(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,s=e.debugInfo,d=e.featureFlags,u={text:r,level:t,help:o,originSysId:a,hasNewArtifact:n,table:i,debugInfo:s};return\"true\"===(null==d?void 0:d.translatedLogs)?u:l(u)},l=function l(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text};function s(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){l=!0,i=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var u=function u(r){return e(\"table\".concat(r).concat(new Date().getTime()).concat(1e8*Math.random()))},c=function c(r){return e(r+new Date().getTime()+1e8*Math.random())},p=function p(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var a,i=t(e,\"^\"),n=[],l=s(i);try{var d=function d(){var e=a.value;if(o(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";n.push(e)};for(l.s();!(a=l.n()).done;)d()}catch(e){l.e(e)}finally{l.f()}return n.join(\"^\")};function m(e){return m=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},m(e)}var g=function g(e){return{durationFormat:v(a(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},f=function f(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=v(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},v=function v(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var i in t)void 0!==o[t[i]]&&e[i]!==o[t[i]]&&(a=!0,o[t[i]]=e[i]);return!!a&&o},y=function y(e,r,t,o,a){var i={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},n={durationFormattingProperties:g,numberFormattingProperties:f};switch(a){case\"heatmap\":case\"box\":return\"glide_duration\"===t?i:n.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===m(e)&&n.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return n.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(n[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return n[s](e[s][d],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:i},h=function h(e){return e.join(\":\")},b=function b(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")};function _(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var w=function w(e,t,l){var d,m,g,f,v,b,w,R,S,F,T,A,P=\"bar\"===e.type,x=12;\"-1\"===e.other_threshold?x=\"ALL\":e.other_threshold>-2&&(x=e.other_threshold);var I,O,C=y(e.formatting_configuration,parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregateType),B=u(e.table),N=c(B),E=p(e.filter),J={sortBy:\"value\",sortByOrder:\"desc\"};r(e.filter,\"^ORDERBY\")&&(I=e.filter,O={sortBy:\"value\",sortByOrder:\"desc\"},r(I,\"ORDERBY\")&&r(I,\"ASC\")&&(O.sortByOrder=\"asc\"),J=O);var M={},k=h([e.table,null===(d=e.report_source)||void 0===d?void 0:d.value,E]);M[k]={metricId:N,dataSourceId:B,metricColor:null===(m=e.color)||void 0===m?void 0:m.value};var H,U={configVersion:\"23.0.0-ci-SNAPSHOT\",yAxisHidden:!1,yAxisPosition:P||\"true\"!==e.x_axis_opposite?\"bottom\":\"top\",yAxisShowGrid:!0,xAxisWrapLabels:!1,xAxisMaxLabelSize:100,xAxisTruncationType:\"end\",yAxisStyle:\"clean\",showLegend:\"true\"===e.show_legend,showLegendValue:!1,legendPosition:\"bottom\",legendHorizontalAlignment:\"center\",legendExpandToFit:!1,showDataLabels:\"true\"===e.show_chart_data_label,dataLabelPosition:\"true\"===e.show_data_label_position_middle?\"middle\":\"top\",showStackedValues:\"none\",showOverlappingLabels:!1,newReporting:!1,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:E,reportSourceSysId:null===(g=e.report_source)||void 0===g?void 0:g.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:B,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[a({dataSource:B,id:N,label:(null===(f=e.series_name_text)||void 0===f?void 0:f.length)>0?e.series_name_text:void 0,aggregateFunction:(null===(v=e.aggregate)||void 0===v?void 0:v.length)>0?e.aggregate:\"COUNT\",aggregateField:\"COUNT\"===e.aggregate&&\"\"!==e.sumfield?void 0:e.sumfield,axisId:\"primary\"},C)],groupBy:[e.field&&e.field.length>0?{groupBy:[{dataSource:B,groupByField:e.field,isRange:null!==(b=null===(w=e.groupByMetadata)||void 0===w?void 0:w.isRange)&&void 0!==b&&b,isChoice:\"choice\"===(null===(R=e.groupByMetadata)||void 0===R?void 0:R.type),isPaBucket:!1}],maxNumberOfGroups:null!==(S=e.groupByMetadata)&&void 0!==S&&S.isRange?\"ALL\":x,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null===(F=e.groupByMetadata)||void 0===F||!F.isRange)&&\"true\"===e.others}:void 0],sortBy:J.sortBy,sortByOrder:J.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",yAxisTitle:e.y_axis_title,xAxisTitle:e.x_axis_title,yAxisFrom:e.y_axis_from,yAxisTo:e.y_axis_to,showDataTable:\"true\"==e.display_grid};H=e.additional_groupby||\"true\"!==e.bar_unstack&&e.trend_field&&\"\"!==e.trend_field?\"stacked\":\"grouped\",U.chartVariation=H,e.trend_field&&\"\"!==e.trend_field&&U.groupBy.push({groupBy:[{dataSource:B,groupByField:e.trend_field,isRange:e.trendMetadata.isRange,isChoice:\"choice\"===e.trendMetadata.type,isPaBucket:!1}]});var D,L=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return _(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n2=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n2=e.done,e},e:function e(_e5){l=!0,i=_e5},f:function f(){try{_n2||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}(null!==(A=l.report_layers[e.sys_id])&&void 0!==A?A:[]);try{var j=function j(){var t,i,n,l,s=D.value,d=U.dataSources.map(function(e){return e.tableOrViewName}).concat(U.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),m=p(s.filter);k=h([s.table,null===(t=s.report_source)||void 0===t?void 0:t.value,m,s.sys_id]);var g=function(e,r,t){return o(Object.keys(e),function(e){return e===r})?e[r].dataSourceId:u(t)}(M,k,s.table);M[k]={metricId:c(g),dataSourceId:g,metricColor:null==s||null===(i=s.color)||void 0===i?void 0:i.value};var f,v=function(e,r,t){var a=o(e,function(e){return e.id===r}),i=!1;return a&&a.filterQuery===t||(i=!0),i}(U.dataSources,g,m);if((!r(d,s.table)&&!r(d,s.report_source)||v)&&U.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:s.table,filterQuery:m,reportSourceSysId:null===(f=s.report_source)||void 0===f?void 0:f.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:g,dataCategories:[\"trend\",\"group\",\"simple\"]}),U.metrics.push(a({dataSource:M[k].dataSourceId,id:M[k].metricId,aggregateFunction:s.aggregate,aggregateField:\"COUNT\"===s.aggregate&&\"\"!==s.sumfield?void 0:s.sumfield,axisId:\"primary\",label:(null===(n=s.series_name_text)||void 0===n?void 0:n.length)>0?s.series_name_text:void 0},y(s.formatting_configuration,parseInt(e.decimal_precision,10),s.aggregateFieldType,s.aggregateType))),(null===(l=s.field)||void 0===l?void 0:l.length)>0){var b={dataSource:M[k].dataSourceId,groupByField:s.field,isRange:!1,isChoice:!1,isPaBucket:!1},_=!1;U.groupBy[0].groupBy.forEach(function(e){_=_||e.dataSource==b.dataSource&&e.groupByField==b.groupByField}),_||U.groupBy[0].groupBy.push(b)}};for(L.s();!(D=L.n()).done;)j()}catch(e){L.e(e)}finally{L.f()}return U.colorConfig=function(e){var r=e.colorPalette,t=e.colorType,a=e.dashboard,l=e.reportId,d=e.enableColorPerMetric,u=e.singleColor,c=e.metrics,p=e.colorList,m=e.metricMap;if(c&&m&&!a.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var g={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)g.type=\"palette\",g.palette=r;else if(\"several_colors\"===t)!p||Array.isArray(p)&&!o(p,function(e){return\"\"!==e})?g.type=\"chartColor\":a.migrationNotes.push(n({message:i(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:i(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:l,artifactTable:\"sys_report\",featureFlags:a.featureFlags}));else if(\"chart_colors\"===t)g.type=\"chartColor\";else if(\"one_color\"===t&&((null==u?void 0:u.length)>0||o(Object.keys(null!=m?m:{}),function(e){var r;return(null===(r=m[e].metricColor)||void 0===r?void 0:r.length)>0})))if(m){for(var f=d?\"colorsPerMetric\":\"singleColor\",v=[],y=0,h=Object.keys(m);y<h.length;y++){var b,_=h[y];v.push({metric:m[_].metricId,color:null!==(b=m[_].metricColor)&&void 0!==b?b:\"de699435d7033100b4964ebfae610331\"})}g.type=f,g.values=v}else{var w,R=[],S=s(null!=c?c:[]);try{for(S.s();!(w=S.n()).done;){var F=w.value;R.push({color:u,metric:F})}}catch(e){S.e(e)}finally{S.f()}g.type=\"singleColor\",g.values=R}return g}({colorPalette:null===(T=e.color_palette)||void 0===T?void 0:T.value,colorType:e.set_chart_color||e.set_color,dashboard:t,reportId:e.sys_id,singleColor:e.color.value,colorList:e.colors,enableColorPerMetric:!1,metricMap:M}),U},R=function R(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},S=(R(\"content_block_static\",\"com.glide.cms.RenderBlock\"),R(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),R(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),R(\"\",\"com.glide.ui.portal.RenderReport\"),R(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),R(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),F=(R(S.group,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.group2,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.single,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.multi,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.date,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.bool,\"com.glideapp.home.RenderHomepagePublishers\"),R(S.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),R(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),R(S.debug,\"com.glideapp.home.RenderHomepagePublishers\"),R(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),R(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),R(\"\",\"com.glide.ui.portal.RenderDashboard\"),R(\"report\",\"com.glide.ui.portal.RenderJavascript\"),R(\"\",\"com.glide.ui.portal.RenderJavascript\"),R(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),R(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),R(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),R(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),T=function T(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},A=function A(e,r){var t={message:i(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(n({message:i(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(n(t))&&e.migrationNotes.push(n(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},P=function P(e,r,o,l){var s,d=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(n({message:i(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(e,r);if(d)return e.migratingFromJava&&l?T(r,l):(s=\"report\",function(e,r,t,o){var l;return(l=s===F?function(){for(var e in S)if(S[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(n({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===s||s===F?function(e,r,t,o){var a,i,n;return e.migratingFromJava&&o?T(r,o):A(e,{static_content:b(\"<b>Unsupported migration: \".concat(null!==(a=null!==(i=r.name)&&void 0!==i?i:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> widget.\"))})}(e,a(r,{type:l}),0,o):function(e,r,t,o){var a,i,n;return e.migratingFromJava&&o?T(r,o):A(e,{static_content:b(\"<b>Unsupported migration: \".concat(null!==(a=null!==(i=r.name)&&void 0!==i?i:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var a,l,s,d;if(e.migratingFromJava&&o)return T(r,o);var u=\"\";null!=r&&r.type?u=r.type:null!=o&&null!==(a=o.type)&&void 0!==a&&a.value?u=null==o||null===(l=o.type)||void 0===l?void 0:l.value:null!=o&&null!==(s=o.renderer)&&void 0!==s&&s.value&&(u=o.renderer.value);var c=null==o||null===(d=o.title)||void 0===d?void 0:d.value;return e.migrationNotes.push(n({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),A(e,{static_content:b(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(u,\": \").concat(c,\"</span> widget.\"))})}(e,r,0,o)})(e,r,o,l);var u=function(e,r,t){var o=w(e,r,t);return\"palette\"===o.colorConfig.type&&(r.migrationNotes.push(n({message:i(\"This content was migrated with the default color palette. Custom palettes are not currently supported for the {0} visualization in Platform Analytics.\",e.title),level:2,originalArtifactSysId:null==e?void 0:e.sys_id,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:r.featureFlags})),o.colorConfig.type=\"default\"),o.yAxisStyle=\"clean\",o}(a(r,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(l)),e,o);return function(e,r,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var a=t(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),o.additionalGroupByConfig=[],a.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(r,0,u),{component_id:\"53e0a2b49e3ff92ba54ea7ea6f0d0583\",component_props:u}};this.run=function(e,r,t,o,a){var i,n={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(i=e.sys_id[t])||void 0===i?void 0:i[0],s=P(n,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=n.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"e4f4a8a7b7232110997a9f78ce11a9ff","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:25:17","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/53e0a2b49e3ff92ba54ea7ea6f0d0583","value":"53e0a2b49e3ff92ba54ea7ea6f0d0583"},"key":"paretoReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"9","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=_e?_e:\"\",\"::\").concat(null!=r?r:\"\")},r=(e(\"content_block_static\",\"com.glide.cms.RenderBlock\"),e(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),e(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),e(\"\",\"com.glide.ui.portal.RenderReport\"),e(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),e(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),1),t=(e(-1,\"com.glideapp.home.RenderHomepagePublishers\"),e(4,\"com.glideapp.home.RenderHomepagePublishers\"),e(r,\"com.glideapp.home.RenderHomepagePublishers\"),e(2,\"com.glideapp.home.RenderHomepagePublishers\"),e(3,\"com.glideapp.home.RenderHomepagePublishers\"),e(5,\"com.glideapp.home.RenderHomepagePublishers\"),e(6,\"com.glideapp.home.RenderHomepagePublishers\"),e(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),e(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderDashboard\"),e(\"report\",\"com.glide.ui.portal.RenderJavascript\"),e(\"\",\"com.glide.ui.portal.RenderJavascript\"),e(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),e(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),e(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),e(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),function(e){for(var r,t,a=\"\".concat(e),o=\"\",i=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";a.charAt(i)||(n=\"=\",i%1);){if((t=a.charCodeAt(i+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,o+=n.charAt(63&r>>8-i%1*8)}return o.toString()});function a(){for(var e={},r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return t.forEach(function(r){Object.assign(e,r)}),e}var o=function o(e,r){return{text:e,vars:r}},i=function i(e){var r=e.message,t=e.level,a=e.tooltip,o=e.originalArtifactSysId,i=e.artifactTable,s=e.hasNewArtifact,l=e.debugInfo,d=e.featureFlags,c={text:r,level:t,help:a,originSysId:o,hasNewArtifact:s,table:i,debugInfo:l};return\"true\"===(null==d?void 0:d.translatedLogs)?c:n(c)},n=function n(e){var r,t,a,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(a=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==a?a:e.text},s=\"sys_choice\";function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var d=function d(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,a=function(e,r){if(void 0===e)return[];for(var t=[],a=0,o=0;o<e.length;o++)\"^\"!==e.charAt(o)||(t.push(e.substring(a,o)),a=o+1);return a<=e.length&&t.push(e.substring(a,e.length)),t}(e),o=[],i=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var a=0,o=function o(){};return{s:o,n:function n(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function e(_e2){throw _e2},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){s=!0,i=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw i}}}}(a);try{var n=function n(){var e=t.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var a=Object(e),o=a.length>>>0,i=arguments[1],n=0;n<o;n++){var s=a[n];if(r.call(i,s,n,a))return t?n:s}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";o.push(e)};for(i.s();!(t=i.n()).done;)n()}catch(e){i.e(e)}finally{i.f()}return o.join(\"^\")},c=/[0-9a-f]{32}/,u=function e(r,t,a){var n,l,d,u,m,p,g=\"unmatched\";if(a||(a={doMigration:!0,breakdowns:[],groupBy:void 0}),t?(null!==(m=r.breakdown)&&void 0!==m&&m.value&&(d=r.breakdown_level2.value),!u&&r.element&&(u=r.element_level2)):(null!==(p=r.breakdown)&&void 0!==p&&p.value&&(d=r.breakdown.value),!u&&r.element&&(u=r.element)),d&&u&&\"unmatched\"!==u){var v=r.indexes.sys_id[d][0],f=u;r.indexes.sys_id[v.dimension.value][0].facts_table===s&&c.test(u)&&(f=r.indexes.sys_id[f][0].value);var h,_={sysId:d,elementSysIds:[f]};\"true\"===r.manual_elements&&_.elementSysIds.concat(null===(h=r.indexes.widget_elements[r.sys_id])||void 0===h?void 0:h.map(function(e){return\"unassigned\"===e.element?g:e.element})),r.elements_filter&&\"\"!==r.elements_filter&&!t&&(_.elementsFilterSysId=r.elements_filter.value,_.elementSysIds=[]),a.breakdowns.push(_)}else if(null!==(n=r.breakdown)&&void 0!==n&&n.value){var b=r.indexes.sys_id[d][0],y=r.indexes.sys_id[b.dimension.value][0];if(\"breakdown\"===r.type){var w;if(!t)if(!r.elements_filter||\"\"===r.elements_filter&&\"true\"!==r.manual_elements){if(null!==(w=r.breakdown_level2)&&void 0!==w&&w.value){if(y.facts_table===s||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:[g]})}}else if(r.elements_filter&&\"\"!==r.elements_filter)a.breakdowns.push({sysId:d,elementsFilterSysId:!t&&r.elements_filter.value});else if(\"true\"===r.manual_elements){var R,S,T;r.indexes.widget_elements&&0!==(null!==(R=null===(S=r.indexes.widget_elements[r.sys_id])||void 0===S?void 0:S.length)&&void 0!==R?R:0)?a.breakdowns.push({sysId:d,elementSysIds:null===(T=r.indexes.widget_elements[r.sys_id])||void 0===T?void 0:T.map(function(e){return\"unassigned\"===e.element?g:e.element})}):r.dashboard.migrationNotes.push(i({message:o(\"This visualization is migrated without selected manual elements configuration because is missing the details.\"),level:1,originalArtifactSysId:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:r.dashboard.featureFlags}))}(0===a.breakdowns.length||t)&&(a.groupBy={groupByField:d,isRange:!1,isChoice:!1,isPaBucket:!1})}else{if(y.facts_table===s||\"pa_buckets\"===y.facts_table)return a.doMigration=!1,a;a.breakdowns.push({sysId:d,elementSysIds:!t&&\"\"!==r.elements_filter&&r.elements_filter?[]:[g],elementsFilterSysId:!t&&\"\"!==r.elements_filter&&r.elements_filter?r.elements_filter.value:void 0})}}return null!==(l=r.breakdown_level2)&&void 0!==l&&l.value&&!t?e(r,!0,a):a},m=function m(e,r,n){var s,l,c=e.sys_id,m=e.indicator,p=e.show_data_labels,g=e.aggregate,v=e.sort_direction,f=e.sort_on,h=e.color_scheme,_=e.description,b=e.name,y=function(e){return t(\"indicator\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))}(null==m?void 0:m.value),w={type:\"default\"};null!=h&&h.value&&\"\"!==(null==h?void 0:h.value)&&(w={type:\"palette\",palette:null==h?void 0:h.value});var R=f;-1===[\"name\",\"value\"].indexOf(f)&&(R=\"value\",r.migrationNotes.push(i({message:o(\"This visualization is migrated without sorting by information because this functionality is not supported.\"),level:2,originalArtifactSysId:c,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:r.featureFlags})));var S=u(a(e,{indexes:n,dashboard:r}));if(S.doMigration){!S.groupBy&&S.breakdowns.length>0&&(S.groupBy={groupByField:S.breakdowns[0].sysId,isRange:!1,isChoice:!1,isPaBucket:!1});var T,I,k=n.sys_id[null==m?void 0:m.value][0],A={applyDateRange:!1,bareBorder:!1,colorConfig:w,configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"both\",dataPassthrough:null,dataSources:[{allowRealTime:\"1\"===k.type,allowTotalValue:\"1\"===k.type,indicatorType:k.type,isScriptedIndicator:!1,filterQuery:d(e.filter),label:k.name,sourceType:\"indicator\",uuid:{breakdowns:S.breakdowns,indicator:null==m?void 0:m.value},preferredVisualizations:[\"18ac962264404bcc0039359d184b15f3\"],id:y,dataCategories:[\"trend\",\"group\",\"simple\"]}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,followFilters:\"true\"===e.follow_element,groupBy:[],hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:\"center\",metrics:[{dataSource:y,id:(I=y,t(I+new Date().getTime()+1e8*Math.random())),aggregateIndicator:null!==(s=null==g?void 0:g.value)&&void 0!==s?s:\"\",frequency:parseInt(null!==(l=null==k?void 0:k.frequency)&&void 0!==l?l:\"10\",10),numberFormat:(T=parseInt(k.precision,10),{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=T?T:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}),axisId:\"primary\"}],newReporting:!1,numberOfPeriods:3,period:\"M\",registerOrientation:\"horizontal\",registerPosition:\"bottom\",scoreType:null,showAbsolutePeriod:!1,showBorder:e.showBorder,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===p,showDataPassthrough:!1,showFilterIcon:\"true\"===e.follow_element,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:e.showHeader,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showRegister:!0,showRegisterOnSameLine:!1,showRegisterPercentage:!1,showRegisterValue:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:R,sortByOrder:v,telemetry:\"null\",trendBy:null,truncationType:\"end\",wrapTitle:!1,description:_,headerTitle:e.showTitle?b:\"\"};return S.groupBy&&(A.groupBy=[{maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,groupBy:[a(S.groupBy,{dataSource:y})]}]),A}r.migrationNotes.push(i({message:o(\"This visualization is in compatibility mode because the empty breakdown element configuration is not supported.\"),level:1,originalArtifactSysId:c,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:r.featureFlags}))};function p(e){return e?parseInt(e).toString():\"10\"}var g=function g(e,r,t,n){!function(e,r,t){for(var a=0,n=[{shouldLog:\"true\"===r.show_visualization_selector,message:{message:o(\"This visualization is migrated without the visualization selector because this functionality is not supported\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}},{shouldLog:\"true\"===r.show_range_selector,message:{message:o(\"This visualization is migrated without the time range selector because this functionality is not supported.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}}];a<n.length;a++){var s=n[a];s.shouldLog&&e.migrationNotes.push(i(s.message))}}(e,r);var s,l=function(e,r,t){var a=m(e,r,t);return a.metrics[0].chartType=\"pareto\",a}(a(r,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(n)),e,t);return l?(function(e,r,t,a){var n;if(\"breakdown\"===r.type)if(void 0!==a.groupBy&&a.groupBy.length>0){var s=a.groupBy[0].maxNumberOfGroups;a.groupBy[0].maxNumberOfGroups=r.show_top_x?parseInt(r.show_top_x).toString():p(s)}else if(void 0!==a.breakdowns&&a.breakdowns.length>0){var l=a.breakdowns[0].perPage;a.breakdowns[0].perPage=r.show_top_x?parseInt(r.show_top_x).toString():p(l)}else e.migrationNotes.push(i({message:o(\"This breakdown widget did not have a configured breakdown or groupBy. To configure a breakdown or groupBy, open the widget in the Visualization Designer.\"),level:1,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags}));if(\"true\"===r.show_breakdown_selector){var d=r.indicator.value,c=null===(n=t.indicator_breakdowns)||void 0===n?void 0:n[d];a.additionalGroupByConfig=(null==c?void 0:c.map(function(e){var r,a,o=null===(r=t.sys_id[null===(a=e.breakdown)||void 0===a?void 0:a.value])||void 0===r?void 0:r[0];return{id:null==o?void 0:o.sys_id,metricLabel:null==o?void 0:o.name}}))||[]}else a.additionalGroupByConfig=[]}(e,r,t,l),{component_id:\"53e0a2b49e3ff92ba54ea7ea6f0d0583\",component_props:l}):e.migratingFromJava&&n?function(e,r){var t=function(e){var r={};for(var t in e){var a;null!==(a=e[t])&&void 0!==a&&a.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:a}}(r,n):function(e,r){var t={message:o(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(i({message:o(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(i(t))&&e.migrationNotes.push(i(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}}(e,{static_content:(s=\"ERROR: Cannot migrate PA widget sys_id: \".concat(null==r?void 0:r.sys_id,\". Check logs for details\"),\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(s,\"</p>\"))})};this.run=function(e,r,t,a,o){var i,n={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0},s=null===(i=e.sys_id[t])||void 0===i?void 0:i[0],l=g(n,s,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return l.migrationNotes=n.migrationNotes,l};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"ea4bc3d3a3d031108d80ad2f241e6132","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 11:40:41","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/53e0a2b49e3ff92ba54ea7ea6f0d0583","value":"53e0a2b49e3ff92ba54ea7ea6f0d0583"},"key":"paretoPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e,r){if(void 0===_e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var i=[],t=0,o=0;o<_e.length;o++)_e.charAt(o)!==r||(i.push(_e.substring(t,o)),t=o+1);return t<=_e.length&&i.push(_e.substring(t,_e.length)),i};function r(){for(var e={},r=arguments.length,i=new Array(r),t=0;t<r;t++)i[t]=arguments[t];return i.forEach(function(r){Object.assign(e,r)}),e}var i=function i(e,r){return{text:e,vars:r}},t=function t(e){var r=e.message,i=e.level,t=e.tooltip,a=e.originalArtifactSysId,n=e.artifactTable,l=e.hasNewArtifact,d=e.debugInfo,s=e.featureFlags,c={text:r,level:i,help:t,originSysId:a,hasNewArtifact:l,table:n,debugInfo:d};return\"true\"===(null==s?void 0:s.translatedLogs)?c:o(c)},o=function o(e){var r,i,t,o;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(t=null===(o=e.text)||void 0===o?void 0:o.text)&&void 0!==t?t:e.text},a=function a(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},n=function n(e,r,i){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&i&&!Number.isNaN(parseInt(i,10))?\"\".concat(null!=i?i:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},l=(n(\"content_block_static\",\"com.glide.cms.RenderBlock\"),n(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),n(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),n(\"\",\"com.glide.ui.portal.RenderReport\"),n(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),n(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),n(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),n(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),n(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),n(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),n(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),n(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),n(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),d=(n(l.group,\"com.glideapp.home.RenderHomepagePublishers\"),n(l.group2,\"com.glideapp.home.RenderHomepagePublishers\"),n(l.single,\"com.glideapp.home.RenderHomepagePublishers\"),n(l.multi,\"com.glideapp.home.RenderHomepagePublishers\"),n(l.date,\"com.glideapp.home.RenderHomepagePublishers\"),n(l.bool,\"com.glideapp.home.RenderHomepagePublishers\"),n(l.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),n(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),n(l.debug,\"com.glideapp.home.RenderHomepagePublishers\"),n(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),n(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),n(\"\",\"com.glide.ui.portal.RenderDashboard\"),n(\"report\",\"com.glide.ui.portal.RenderJavascript\"),n(\"\",\"com.glide.ui.portal.RenderJavascript\"),n(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),n(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),n(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),n(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),s=function s(e,r){var i=function(e){var r={};for(var i in e){var t;null!==(t=e[i])&&void 0!==t&&t.value?r[i]=e[i].value:\"string\"==typeof e[i]&&(r[i]=e[i])}return r}(r),t={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:i.portal_widget_sys_id,portalPreferences:i,widgetTitle:i.title,showHeader:!i.show_header||\"true\"===i.show_header,showBorder:!i.show_border||\"true\"===i.show_border,showTitle:!i.show_title||\"true\"===i.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(t.paWidgetSysId=e.sys_id,t.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:t}},c=function c(e,r){var o={message:i(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(t({message:i(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(t(o))&&e.migrationNotes.push(t(o)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},u=function u(o,n,_u,p){var m,g=function(e,r){return function(e,r){var o=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),a=null==r?void 0:r.groupByMetadata;return!(!o||!a||\"glide_duration\"!=a.internalType&&\"glide_date_time\"!=a.internalType&&\"glide_date\"!=a.internalType||(e.migrationNotes.push(t({message:i(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(o,n),v=function(e){var r,i=e.table,t=e.filter,o=e.chart_title||e.title,a=e.field,n=e.field_list,l=e.show_chart_title,d=null===(r=e.report_source)||void 0===r?void 0:r.value,s=e.additional_groupby;return{table:i,filter:t,chartTitle:o,groupBy:a,columns:n,showChartTitle:l,reportSource:d,reportId:e.sys_id,additionalGroupBy:s}}(n),_=function(r){var o,a=r.columns,n=r.groupBy,l=r.filter,d=r.chartTitle,s=r.table,c=r.reportSource,u=r.reportId,p=r.d,m=r.indexes,g=r.showHeader,v=r.showTitle,_=r.showBorder,f=r.additionalGroupBy,h=\"\";if(c){var b=m.sys_id[c];!b||b.length<1?p.migrationNotes.push(t({message:i(\"The dashboard has missing report source configuration.\"),level:2,originalArtifactSysId:u,artifactTable:\"sys_report\",featureFlags:p.featureFlags})):(s=b[0].table,h=b[0].filter)}var y=a;n&&(y=y.concat(\",\",n)),f&&(y=y.concat(\",\",f));var R=e(y,\",\");y=function(e){for(var r=[],i=0;i<e.length;i++){for(var t=!1,o=0;o<r.length;o++)if(e[i]===r[o]){t=!0;break}t||r.push(e[i])}return r}(R).join(\",\");var w=null!==(o=R.length)&&void 0!==o?o:0;return 0===w&&(w=100),{columns:y,fixedQuery:h,groupByField:n,hideColumnFiltering:!1,hideColumnGrouping:!1,hideColumnReorder:!1,hideColumnResizing:!1,hideColumnSorting:!1,hideDotwalk:!1,hideEmptyStateImage:!1,hideHeader:!g,hideHighlightContent:!1,hideHighlightedValues:!1,hideInlineEditing:!1,hideLastRefreshedText:!0,hideLinks:!1,hidePersonalization:!0,hideRefreshButton:!1,hideRowSelector:!1,hideTitle:!v,hideTitleRowCount:!1,hideViewAll:!1,highlightContent:{color:\"\",patterns:[]},highlightedValueConfigId:\"\",followFilters:!0,limit:20,listTitle:d,maxCharLimit:4e3,maxColumns:w,overrideWordWrapUserPref:!1,query:l,refreshRequested:\"\",table:s,wordWrap:!1,showBorder:_,isDashboard:!0}}(r(v,{d:o,indexes:_u},function(e){var r=!0,i=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(i=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:i}}(p)));return!_||g?o.migratingFromJava&&p?s(n,p):(m=\"report\",function(e,o,n,u){var p;return(p=m===d?function(){for(var e in l)if(l[e]===(null==o?void 0:o.type))return e}():null==o?void 0:o.type)?(e.migrationNotes.push(t({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==o?void 0:o.sys_id,artifactTable:null==o?void 0:o.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===m||m===d?function(e,r,i,t){var o,n,l;return e.migratingFromJava&&t?s(r,t):c(e,{static_content:a(\"<b>Unsupported migration: \".concat(null!==(o=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==o?o:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> widget.\"))})}(e,r(o,{type:p}),0,u):function(e,r,i,t){var o,n,l;return e.migratingFromJava&&t?s(r,t):c(e,{static_content:a(\"<b>Unsupported migration: \".concat(null!==(o=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==o?o:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> report.\"))})}(e,o,0,u)):function(e,r,o,n){var l,d,u,p;if(e.migratingFromJava&&n)return s(r,n);var m=\"\";null!=r&&r.type?m=r.type:null!=n&&null!==(l=n.type)&&void 0!==l&&l.value?m=null==n||null===(d=n.type)||void 0===d?void 0:d.value:null!=n&&null!==(u=n.renderer)&&void 0!==u&&u.value&&(m=n.renderer.value);var g=null==n||null===(p=n.title)||void 0===p?void 0:p.value;return e.migrationNotes.push(t({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),c(e,{static_content:a(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(m,\": \").concat(g,\"</span> widget.\"))})}(e,o,0,u)})(o,n,_u,p):(function(r,i,t){if(r.additional_groupby){t.showAdditionalGroupBySelector=!0;var o=e(r.additional_groupby,\",\");-1===o.indexOf(r.field)&&o.unshift(r.field),[\"bar\",\"horizontal_bar\"].indexOf(r.type)>-1&&r.trend_field&&\"\"!==r.trend_field&&o.push(r.trend_field),t.additionalGroupByConfig=[],o.forEach(function(e){t.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(n,0,_),{component_id:\"2b1c080881e05dc63b917044290b233f\",component_props:_})};this.run=function(e,r,i,t,o){var a,n={migratingFromJava:!0,migrationNotes:[],featureFlags:o,migratingSingleArtifact:!0},l=null===(a=e.sys_id[i])||void 0===a?void 0:a[0],d=u(n,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return d.migrationNotes=n.migrationNotes,d};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"ef54e067b7232110997a9f78ce11a911","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:22:46","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/2b1c080881e05dc63b917044290b233f","value":"2b1c080881e05dc63b917044290b233f"},"key":"listReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nfunction s(o){return s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&\"function\"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},s(o)}var o=function o(_o,i,e){var r,a,n,u,t,d,l,c,v,y,p,_,f,m=i.visualizationSysId,g=(y={},p=_o.sys_id,_=[{sys_id:\"\".concat(_o.sys_id,\"-report-permission-0\"),update_guid:\"\".concat(_o.sys_id,\"-permission-update-guid-0\"),visualization:m,user:null===(r=(null!==(a=e.users_by_username[_o.sys_created_by])&&void 0!==a?a:[])[0])||void 0===r?void 0:r.sys_id,write:!0,owner:!0,can_share:!0,sys_scope:null!==(n=null===(u=_o.sys_scope)||void 0===u?void 0:u.value)&&void 0!==n?n:_o.sys_scope,\"package\":null===(t=_o.sys_package)||void 0===t?void 0:t.value}],f=function(o,i){if(\"object\"!=s(o)||!o)return o;var e=o[Symbol.toPrimitive];if(void 0!==e){var r=e.call(o,\"string\");if(\"object\"!=s(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(o)}(p),(p=\"symbol\"==s(f)?f:String(f))in y?Object.defineProperty(y,p,{value:_,enumerable:!0,configurable:!0,writable:!0}):y[p]=_,y),b=g[_o.sys_id].length,h=[];switch(_o.user){case\"GLOBAL\":if(!e.report_roles[_o.sys_id]){h=[\"282bf1fac6112285017366cb5f867469\",\"7a84a7458720130032a03a5ea6cb0b1d\"].map(function(s,i){var e,r,a;return{sys_id:\"\".concat(_o.sys_id,\"-report-permission-\").concat(b+i),update_guid:\"\".concat(_o.sys_id,\"-permission-update-guid-\").concat(b+i),visualization:m,role:s,write:!1,owner:!1,can_share:!1,sys_scope:null!==(e=null===(r=_o.sys_scope)||void 0===r?void 0:r.value)&&void 0!==e?e:_o.sys_scope,\"package\":null===(a=_o.sys_package)||void 0===a?void 0:a.value}});break}h=null!==(d=null===(l=e.report_roles[_o.sys_id])||void 0===l?void 0:l.map(function(s,i){var r,a,n;if(e.roles_by_name[s.value])return{sys_id:\"\".concat(_o.sys_id,\"-report-permission-\").concat(b+i),update_guid:\"\".concat(_o.sys_id,\"-permission-update-guid-\").concat(b+i),visualization:m,role:e.roles_by_name[s.value][0].sys_id,write:!1,owner:!1,can_share:!1,sys_scope:null!==(r=null===(a=_o.sys_scope)||void 0===a?void 0:a.value)&&void 0!==r?r:_o.sys_scope,\"package\":null===(n=_o.sys_package)||void 0===n?void 0:n.value}}))&&void 0!==d?d:[];break;case\"group\":h=null!==(c=null===(v=e.report_user_groups[_o.sys_id])||void 0===v?void 0:v.map(function(s,i){var e,r,a,n,u;return{sys_id:\"\".concat(_o.sys_id,\"-report-permission-\").concat(b+i),update_guid:\"\".concat(_o.sys_id,\"-permission-update-guid-\").concat(b+i),visualization:m,group:\"\"===s.group_id||null===(e=s.group_id)||void 0===e?void 0:e.value,user:\"\"===s.user_id||null===(r=s.user_id)||void 0===r?void 0:r.value,write:!1,owner:!1,can_share:!1,sys_scope:null!==(a=null===(n=_o.sys_scope)||void 0===n?void 0:n.value)&&void 0!==a?a:_o.sys_scope,\"package\":null===(u=_o.sys_package)||void 0===u?void 0:u.value}}))&&void 0!==c?c:[]}return g[_o.sys_id]=g[_o.sys_id].concat(h),g};this.run=function(s,i,e,r,a){for(var n=[],u=0;u<e.length;u++)try{var t,d=null===(t=s.sys_id[e[u]])||void 0===t?void 0:t[0];if(d){var l={visualizationSysId:r[u]},c=o(d,l,s);n.push({answer:c,hasError:!1,oldSysId:e[u]})}}catch(s){n.push({error:s,hasError:!0,oldSysId:e[u]})}return n};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"f118c58243c13110e313ac4b96b8f2d3","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-09-04 11:42:16","sys_name":"","sys_scope":"","macroponent":"","key":"visualizationPermissionsScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),a=\"\",n=0,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(n)||(i=\"=\",n%1);){if((t=o.charCodeAt(n+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=i.charAt(63&r>>8-n%1*8)}return a.toString()},r=function r(e,_r){return void 0!==e&&void 0!==_r&&e.indexOf(_r)>-1},t=function t(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,a=0;a<e.length;a++)e.charAt(a)!==r||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function o(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,n=arguments[1],i=0;i<a;i++){var l=o[i];if(r.call(n,l,i,o))return t?i:l}}function a(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var n=function n(e,r){return{text:e,vars:r}},i=function i(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,n=e.artifactTable,i=e.hasNewArtifact,s=e.debugInfo,c=e.featureFlags,d={text:r,level:t,help:o,originSysId:a,hasNewArtifact:i,table:n,debugInfo:s};return\"true\"===(null==c?void 0:c.translatedLogs)?d:l(d)},l=function l(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text};function s(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,i=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return i=e.done,e},e:function e(_e3){l=!0,n=_e3},f:function f(){try{i||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw n}}}}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function d(e){return d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},d(e)}var u=function u(e){return{durationFormat:p(a(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},g=function g(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=p(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},p=function p(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var n in t)void 0!==o[t[n]]&&e[n]!==o[t[n]]&&(a=!0,o[t[n]]=e[n]);return!!a&&o},m=function m(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},f=function f(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},h=(f(\"content_block_static\",\"com.glide.cms.RenderBlock\"),f(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),f(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),f(\"\",\"com.glide.ui.portal.RenderReport\"),f(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),f(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),v=(f(h.group,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.group2,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.single,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.multi,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.date,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.bool,\"com.glideapp.home.RenderHomepagePublishers\"),f(h.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),f(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),f(h.debug,\"com.glideapp.home.RenderHomepagePublishers\"),f(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),f(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),f(\"\",\"com.glide.ui.portal.RenderDashboard\"),f(\"report\",\"com.glide.ui.portal.RenderJavascript\"),f(\"\",\"com.glide.ui.portal.RenderJavascript\"),f(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),f(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),f(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),f(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),b=function b(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},y=function y(e,r){var t={message:n(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(i({message:n(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(i(t))&&e.migrationNotes.push(i(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}},_=function _(e,r,t){return function(e,r){var t;return!e.migratingSingleArtifact&&\"true\"===((null==r||null===(t=r.publisher_widget)||void 0===t?void 0:t.value)||\"false\")}(e,t)?(r.chartInteractionAction=\"applyAsFilter\",r):r},w=function w(l,c,p,f){var w,R=function(e,r){return function(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(i({message:n(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,r)}(l,c),T=function(e){var r,o,a,n,i=e.table,l=e.aggregateFieldType,s=e.filter,c=e.groupByMetadata,d=e.chart_title||e.title,u=null===(r=e.color_palette)||void 0===r?void 0:r.value,g=e.show_chart_data_label,p=e.field,m=e.legend_horizontal_alignment,f=e.legend_vertical_alignment,h=e.show_legend,v=e.decimal_precision,b=e.show_chart_border,y=e.source_type,_=e.aggregate,w=e.other_threshold,R=e.sumfield,T=t(e.colors,\",\"),F=e.set_color,S=e.show_chart_total,A=null===(o=e.color)||void 0===o?void 0:o.value;try{var P;n=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":null!==(P=e.formatting_configuration)&&void 0!==P?P:\"null\")}catch(r){console.log(\"Unable to transform json 4\",r.toString(),e),n={}}var O=null===(a=e.report_source)||void 0===a?void 0:a.value,C=e.is_real_time,I=e.display_grid;return{table:i,chartTitle:d,colorType:F,colorPalette:u,singleColor:A,showDataLabel:g,groupBy:p,legendVerticalAlignment:f,legendHorizontalAlignment:m,showLegend:h,numberOfPeriods:v,showChartBorder:b,sourceType:y,aggregateType:_,otherThreshold:w,filter:s,aggregateField:R,colors:T,showTotal:S,formattingConfiguration:n,reportSource:O,reportId:e.sys_id,isRealTime:C,aggregateFieldType:l,showOthers:e.others,groupByMetadata:c,showDataTable:I}}(c),F=function(l,c){var p=function(l,c){var p=l.table,m=l.chartTitle,f=l.colorPalette,h=l.showDataLabel,v=l.groupBy,b=l.showOthers,y=l.legendHorizontalAlignment,_=l.legendVerticalAlignment,w=l.numberOfPeriods,R=(l.showChartBorder,l.sourceType),T=l.aggregateType,F=l.otherThreshold,S=l.filter,A=l.showLegend,P=l.aggregateField,O=l.colorType,C=l.formattingConfiguration,I=l.reportId,B=l.reportSource,N=l.isRealTime,E=l.aggregateFieldType,J=l.showHeader,x=l.showTitle,D=l.showBorder,H=l.groupByMetadata,U=l.singleColor,k=l.d,M=l.showDataTable,L=function(e){var t={sortBy:\"value\",sortByOrder:\"desc\"};return r(e,\"ORDERBY\")&&r(e,\"ASC\")&&(t.sortByOrder=\"asc\"),t}(S),z=function(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var a,n=t(e,\"^\"),i=[],l=s(n);try{var c=function c(){var e=a.value;if(o(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";i.push(e)};for(l.s();!(a=l.n()).done;)c()}catch(e){l.e(e)}finally{l.f()}return i.join(\"^\")}(S),j=function(e,r){var t={register:\"\",horizontal:\"\",orientation:\"vertical\"};function o(){t.horizontal=\"center\",\"left\"===e&&(t.horizontal=\"start\"),\"right\"===e&&(t.horizontal=\"end\")}return\"right\"===e?(t.register=\"right\",t.horizontal=\"center\"):\"left\"===e&&(t.register=\"left\",t.horizontal=\"center\"),\"bottom\"===r||\"center\"===r||\"middle\"===e?(t.register=\"bottom\",t.orientation=\"horizontal\",o()):\"top\"===r&&(t.orientation=\"horizontal\",t.register=\"top\",o()),t}(y,_),G=function(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(r){return e}}(F),V=function(e,r,t,o,a){var n={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},i={durationFormattingProperties:u,numberFormattingProperties:g};if(\"glide_duration\"===t){if(\"object\"===d(e)&&i.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return i.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(i[s]&&e[s]&&Object.keys(e[s]).length>0){var c=Object.keys(e[s])[0];return i[s](e[s][c],r)}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:n}(C,parseInt(w,10),E,T),Y=function(r){return e(\"table\".concat(r).concat(new Date().getTime()).concat(1e8*Math.random()))}(p),W=function(r){return e(r+new Date().getTime()+1e8*Math.random())}(Y),Q=function(e){var r=e.colorPalette,t=e.colorType,a=e.dashboard,l=e.reportId,c=e.enableColorPerMetric,d=e.singleColor,u=e.metrics,g=e.colorList,p=e.metricMap;if(u&&p&&!a.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var m={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)m.type=\"palette\",m.palette=r;else if(\"several_colors\"===t)!g||Array.isArray(g)&&!o(g,function(e){return\"\"!==e})?m.type=\"chartColor\":a.migrationNotes.push(i({message:n(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:n(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:l,artifactTable:\"sys_report\",featureFlags:a.featureFlags}));else if(\"chart_colors\"===t)m.type=\"chartColor\";else if(\"one_color\"===t&&((null==d?void 0:d.length)>0||o(Object.keys(null!=p?p:{}),function(e){var r;return(null===(r=p[e].metricColor)||void 0===r?void 0:r.length)>0})))if(p){for(var f=c?\"colorsPerMetric\":\"singleColor\",h=[],v=0,b=Object.keys(p);v<b.length;v++){var y,_=b[v];h.push({metric:p[_].metricId,color:null!==(y=p[_].metricColor)&&void 0!==y?y:\"de699435d7033100b4964ebfae610331\"})}m.type=f,m.values=h}else{var w,R=[],T=s(null!=u?u:[]);try{for(T.s();!(w=T.n()).done;){var F=w.value;R.push({color:d,metric:F})}}catch(e){T.e(e)}finally{T.f()}m.type=\"singleColor\",m.values=R}return m}({colorPalette:f,colorType:O,dashboard:k,reportId:I,singleColor:U,metrics:[W]}),q={applyDateRange:!1,bareBorder:!1,colorConfig:Q,configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"value\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:z,id:Y,reportSourceSysId:B,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===R||0===R.length?\"table\":R,tableOrViewName:p}],dateFormat:\"default\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"add-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:\"true\"==N,filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:[{groupBy:[{dataSource:Y,groupByField:v,isChoice:\"choice\"===(null==H?void 0:H.type)||!1,isPaBucket:!1,isRange:(null==H?void 0:H.isRange)||!1}],maxNumberOfGroups:null!=H&&H.isRange?\"ALL\":G,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==H||!H.isRange)&&\"true\"===b}],headerTitle:x?m:\"\",hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:j.horizontal,metrics:[a({aggregateFunction:(null==T?void 0:T.length)>0?T:\"COUNT\",axisId:\"primary\",dataSource:Y,id:W},V)],newReporting:!1,numberOfPeriods:parseInt(w,10),period:\"M\",registerOrientation:j.orientation,registerPosition:j.register,scoreType:null,showAbsolutePeriod:!1,showBorder:D,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"==h,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:J,showHeaderSeparator:!0,showMaximumRange:!1,showMetricLabel:!1,showRegister:\"true\"==A,showRegisterOnSameLine:!1,showRegisterPercentage:!0,showRegisterValue:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:L.sortBy,sortByOrder:L.sortByOrder,telemetry:\"null\",trendBy:null,truncationType:\"start\",wrapTitle:!0,showDataTable:\"true\"==M};return P&&\"COUNT\"!==T&&\"\"!==P&&(q.metrics[0].aggregateField=P),q}(l),m=\"true\"==l.showTotal;return m&&(p.showTotalValue=m,p.showRegister=!1),p}(a(T,{d:l},function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(f)));return!F||R?l.migratingFromJava&&f?b(c,f):(w=\"report\",function(e,r,t,o){var l;return(l=w===v?function(){for(var e in h)if(h[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(i({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===w||w===v?function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?b(r,o):y(e,{static_content:m(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> widget.\"))})}(e,a(r,{type:l}),0,o):function(e,r,t,o){var a,n,i;return e.migratingFromJava&&o?b(r,o):y(e,{static_content:m(\"<b>Unsupported migration: \".concat(null!==(a=null!==(n=r.name)&&void 0!==n?n:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(i=o.type)||void 0===i?void 0:i.value,\"</span> report.\"))})}(e,r,0,o)):function(e,r,t,o){var a,l,s,c;if(e.migratingFromJava&&o)return b(r,o);var d=\"\";null!=r&&r.type?d=r.type:null!=o&&null!==(a=o.type)&&void 0!==a&&a.value?d=null==o||null===(l=o.type)||void 0===l?void 0:l.value:null!=o&&null!==(s=o.renderer)&&void 0!==s&&s.value&&(d=o.renderer.value);var u=null==o||null===(c=o.title)||void 0===c?void 0:c.value;return e.migrationNotes.push(i({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),y(e,{static_content:m(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(d,\": \").concat(u,\"</span> widget.\"))})}(e,r,0,o)})(l,c,p,f):(function(e,r,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var a=t(e.additional_groupby,\",\");-1===a.indexOf(e.field)&&a.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&a.push(e.trend_field),o.additionalGroupByConfig=[],a.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(c,0,F),{component_id:\"a2b0596cec6b9d49dd1ff9bf76b5084b\",component_props:_(l,F,f)})};this.run=function(e,r,t,o,a){var n,i={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0},l=null===(n=e.sys_id[t])||void 0===n?void 0:n[0],s=w(i,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=i.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"f284a067b7232110997a9f78ce11a901","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:23:31","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/a2b0596cec6b9d49dd1ff9bf76b5084b","value":"a2b0596cec6b9d49dd1ff9bf76b5084b"},"key":"donutReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){for(var r,t,o=\"\".concat(_e),i=\"\",a=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(a)||(n=\"=\",a%1);){if((t=o.charCodeAt(a+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,i+=n.charAt(63&r>>8-a%1*8)}return i.toString()},r=function r(e,_r){return void 0!==e&&void 0!==_r&&e.indexOf(_r)>-1},t=function t(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,i=0;i<e.length;i++)e.charAt(i)!==r||(t.push(e.substring(o,i)),o=i+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function o(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var i=function i(e,r){return{text:e,vars:r}},a=function a(e){var r=e.message,t=e.level,o=e.tooltip,i=e.originalArtifactSysId,a=e.artifactTable,l=e.hasNewArtifact,s=e.debugInfo,c=e.featureFlags,d={text:r,level:t,help:o,originSysId:i,hasNewArtifact:l,table:a,debugInfo:s};return\"true\"===(null==c?void 0:c.translatedLogs)?d:n(d)},n=function n(e){var r,t,o,i;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(i=e.text)||void 0===i?void 0:i.text)&&void 0!==o?o:e.text};function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var s=function s(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var o,i=t(e,\"^\"),a=[],n=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,i=function i(){};return{s:i,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,_n=!0,s=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){s=!0,a=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(s)throw a}}}}(i);try{var s=function s(){var e=o.value;if(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),i=o.length>>>0,a=arguments[1],n=0;n<i;n++){var l=o[n];if(r.call(a,l,n,o))return t?n:l}}(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";a.push(e)};for(n.s();!(o=n.n()).done;)s()}catch(e){n.e(e)}finally{n.f()}return a.join(\"^\")};function c(e){return c=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},c(e)}var d=function d(e){return{durationFormat:m(o(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},u=function u(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=m(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},m=function m(e,r,t){var o=JSON.parse(JSON.stringify(r)),i=!1;for(var a in t)void 0!==o[t[a]]&&e[a]!==o[t[a]]&&(i=!0,o[t[a]]=e[a]);return!!i&&o},p=function p(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")},g=function g(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},f=(g(\"content_block_static\",\"com.glide.cms.RenderBlock\"),g(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),g(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),g(\"\",\"com.glide.ui.portal.RenderReport\"),g(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),g(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),b=(g(f.group,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.group2,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.single,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.multi,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.date,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.bool,\"com.glideapp.home.RenderHomepagePublishers\"),g(f.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),g(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),g(f.debug,\"com.glideapp.home.RenderHomepagePublishers\"),g(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),g(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),g(\"\",\"com.glide.ui.portal.RenderDashboard\"),g(\"report\",\"com.glide.ui.portal.RenderJavascript\"),g(\"\",\"com.glide.ui.portal.RenderJavascript\"),g(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),g(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),g(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),g(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"filter\"),y=function y(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},v=function v(e,r){var t={message:i(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(a({message:i(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(a(t))&&e.migrationNotes.push(a(t)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}};function h(e){return h=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},h(e)}function _(e,r,t){return o=function(e,r){if(\"object\"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,\"string\");if(\"object\"!=h(o))return o;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(r),(r=\"symbol\"==h(o)?o:String(o))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e;var o}var w=function w(n,l,m,g){var h,w=function(e){var r,t=e.table,o=e.source_type,i=e.title,a=e.description,n=e.field,l=e.trend_field,s=e.additional_groupby,c=e.y_axis_title,d=e.x_axis_title,u=e.y_axis_opposite,m=e.y_axis_display_grid,p=e.y_axis_from,g=e.y_axis_to,f=e.x_axis_label_size,b=e.aggregate,y=e.aggregateFieldType,v=e.filter,h=e.sumfield,_=e.decimal_precision,w=e.formatting_configuration,R=e.type,S=e.trendMetadata,x=e.report_source;try{r=JSON.parse(\"\"==w||null==w?\"{}\":null!=w?w:\"null\")}catch(t){console.log(\"Unable to transform json 4\",t.toString(),e),r={}}var F=g||0===g;return{formattingConfiguration:r,chartTitle:i,description:a,sourceType:o,table:t,decimalPrecision:parseInt(_,10),groupBy:n,measuredBy:l,additionalGroupBy:s,yAxisTitle:c,yAxisPosition:\"false\"===u?\"left\":\"right\",yAxisShowGrid:\"true\"===m,yAxisFrom:p||0===p?parseInt(p,10):null,yAxisTo:F?parseInt(g,10):null,yAxisStyle:\"default\",xAxisTitle:d,xAxisMaxLabelSize:f,aggregate:b,aggregateFieldType:y,filter:v,aggregateField:h,type:R,trendMetadata:S,reportSource:null==x?void 0:x.value}}(l),R=function(t){var i,a=t.chartTitle,n=t.title,l=t.table,m=t.filter,p=t.showZero,g=t.description,f=t.formattingConfiguration,b=t.reportSource,y=t.aggregateField,v=t.showTitle,h=t.measuredBy,w=t.groupBy,R=t.yAxisTitle,S=t.yAxisPosition,x=t.yAxisShowGrid,F=t.yAxisFrom,A=t.yAxisTo,T=t.yAxisStyle,P=t.xAxisTitle,O=t.decimalPrecision,I=t.aggregateFieldType,C=t.aggregate,E=t.type,N=t.trendMetadata,B=function(r){return e(\"table\".concat(r).concat(new Date().getTime()).concat(1e8*Math.random()))}(l),J=function(r){return e(r+new Date().getTime()+1e8*Math.random())}(B),k=\"value\",U=\"desc\";r(m,\"ORDERBY\")&&(k=\"name\",r(m,\"DESC\")||(U=\"asc\"));var D=function(e,r,t,o,i){var a={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},n={durationFormattingProperties:d,numberFormattingProperties:u};switch(i){case\"heatmap\":case\"box\":return\"glide_duration\"===t?a:n.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===c(e)&&n.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return n.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(n[s]&&e[s]&&Object.keys(e[s]).length>0){var m=Object.keys(e[s])[0];return n[s](e[s][m],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:a}(f,O,I,C,E),H={chart:{type:\"boxplot\"},legend:{align:\"center\",enabled:!1,layout:\"horizontal\",verticalAlign:\"bottom\"},plotOptions:{boxplot:{fillColor:\"rgb(var(--now-datavis_color--accessibility-0, 255,255,255))\",lineWidth:1,medianWidth:2,stroke:\"rgb(var(--now-datavis_color--qualitative-0, 10,184,217))\",strokeWidth:\"1px\",whiskerWidth:2},series:{colorByPoint:!1,marker:{fillColor:\"rgb(var(--now-datavis_color--qualitative-1, 255,87,48))\",radius:4,symbol:\"circle\"}}},series:[{dataLabels:{enabled:!1}}],tooltip:{enabled:!0},xAxis:{categories:[],labels:{style:{textOverflow:\"ellipsis\",whitespace:\"nowrap\",width:\"100px\"}},lineColor:\"rgb(var(--now-datavis_color_chart--tertiary, 143,149,161))\",lineWidth:1,tickWidth:1,title:{},visible:!0},yAxis:{gridLineWidth:!0,labels:{enabled:!0,style:{lineWidth:1,tickWidth:0}},lineWidth:0,min:0,opposite:!1,tickWidth:0,title:{text:\"\".concat(l,\" \").concat((null==N?void 0:N.label)||\"\")},visible:!0}};return _(i={filterConfigurations:\"@state.parFilters\",scoreSize:\"auto\",sparklineStyle:\"area\",scoreIcon:\"\",iconStyle:\"background\",showScoreDate:!1,useRelativeScoreTime:!1,showScoreUpdateTime:!1,showZero:\"true\"===p,newReporting:!1,showHeader:!0,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,showBorder:!0,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,sortBy:k,sortByOrder:U,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:!1,period:\"M\",dateFormat:\"default\",description:g,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,colorConfig:{type:\"default\"},dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:l,filterQuery:s(m),reportSourceSysId:b,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:B,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[o({dataSource:B,id:J,aggregateFunction:(null==C?void 0:C.length)>0?C:\"COUNT\",aggregateField:\"COUNT\"===C?void 0:y,axisId:\"primary\",label:n},D)]},\"groupBy\",[{categoryIndex:0,groupBy:[{dataSource:B,groupByField:w,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1},{categoryIndex:1,groupBy:[{dataSource:B,groupByField:h,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1}]),_(i,\"headerTitle\",v?a:\"\"),_(i,\"backgroundRefreshInterval\",\"\"),_(i,\"chartInteractionEnabled\",!0),_(i,\"chartInteractionAction\",\"goToData\"),_(i,\"config\",H),_(i,\"yAxisHidden\",!1),_(i,\"yAxisTitle\",R),_(i,\"yAxisPosition\",S),_(i,\"yAxisShowGrid\",x),_(i,\"yAxisFrom\",F),_(i,\"yAxisTo\",A),_(i,\"yAxisStyle\",T),_(i,\"xAxisTitle\",P),i}(o(w,function(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}}(g)));return R?(function(e,r,o){if(e.additional_groupby){o.showAdditionalGroupBySelector=!0;var i=t(e.additional_groupby,\",\");-1===i.indexOf(e.field)&&i.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&i.push(e.trend_field),o.additionalGroupByConfig=[],i.forEach(function(e){o.additionalGroupByConfig.push({metricLabel:e,id:e})})}}(l,0,R),{component_id:\"c5d01636ff2602109bd2ffffffffff0a\",component_props:R}):n.migratingFromJava&&g?(n.migrationNotes.push(a({message:i(\"Something went wrong with new properties.\"),level:0,originalArtifactSysId:null==l?void 0:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:n.featureFlags})),y(l,g)):(h=\"report\",function(e,r,t,n){var l;return(l=h===b?function(){for(var e in f)if(f[e]===(null==r?void 0:r.type))return e}():null==r?void 0:r.type)?(e.migrationNotes.push(a({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),\"widget\"===h||h===b?function(e,r,t,o){var i,a,n;return e.migratingFromJava&&o?y(r,o):v(e,{static_content:p(\"<b>Unsupported migration: \".concat(null!==(i=null!==(a=r.name)&&void 0!==a?a:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> widget.\"))})}(e,o(r,{type:l}),0,n):function(e,r,t,o){var i,a,n;return e.migratingFromJava&&o?y(r,o):v(e,{static_content:p(\"<b>Unsupported migration: \".concat(null!==(i=null!==(a=r.name)&&void 0!==a?a:r.sys_name)&&void 0!==i?i:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> report.\"))})}(e,r,0,n)):function(e,r,t,o){var n,l,s,c;if(e.migratingFromJava&&o)return y(r,o);var d=\"\";null!=r&&r.type?d=r.type:null!=o&&null!==(n=o.type)&&void 0!==n&&n.value?d=null==o||null===(l=o.type)||void 0===l?void 0:l.value:null!=o&&null!==(s=o.renderer)&&void 0!==s&&s.value&&(d=o.renderer.value);var u=null==o||null===(c=o.title)||void 0===c?void 0:c.value;return e.migrationNotes.push(a({message:i(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),v(e,{static_content:p(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(d,\": \").concat(u,\"</span> widget.\"))})}(e,r,0,n)})(n,l,m,g)};this.run=function(e,r,t,o,i){var a,n={migratingFromJava:!0,migrationNotes:[],featureFlags:i,migratingSingleArtifact:!0},l=null===(a=e.sys_id[t])||void 0===a?void 0:a[0],s=w(n,l,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return s.migrationNotes=n.migrationNotes,s};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"f4d3e467b7232110997a9f78ce11a93a","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-06-26 11:20:24","sys_name":"","sys_scope":"","macroponent":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_ux_macroponent/2d56f06d55f46bbd4e79b5e624beb940","value":"2d56f06d55f46bbd4e79b5e624beb940"},"key":"boxReportScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=function e(_e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(_e,\"</p>\")},r=function r(e,_r,a){return\"com.glideapp.home.RenderHomepagePublishers\"===_r&&a&&!Number.isNaN(parseInt(a,10))?\"\".concat(null!=a?a:\"\",\"::\").concat(null!=_r?_r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=_r?_r:\"\")},a=(r(\"content_block_static\",\"com.glide.cms.RenderBlock\"),r(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),r(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),r(\"\",\"com.glide.ui.portal.RenderReport\"),r(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),r(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),o=(r(a.group,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.group2,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.single,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.multi,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.date,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.bool,\"com.glideapp.home.RenderHomepagePublishers\"),r(a.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),r(a.debug,\"com.glideapp.home.RenderHomepagePublishers\"),r(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),r(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderDashboard\"),r(\"report\",\"com.glide.ui.portal.RenderJavascript\"),r(\"\",\"com.glide.ui.portal.RenderJavascript\"),r(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),r(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),r(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),r(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"widget\"),t=\"filter\",i=function i(e,r){var a=function(e){var r={};for(var a in e){var o;null!==(o=e[a])&&void 0!==o&&o.value?r[a]=e[a].value:\"string\"==typeof e[a]&&(r[a]=e[a])}return r}(r),o={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:a.portal_widget_sys_id,portalPreferences:a,widgetTitle:a.title,showHeader:!a.show_header||\"true\"===a.show_header,showBorder:!a.show_border||\"true\"===a.show_border,showTitle:!a.show_title||\"true\"===a.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(o.paWidgetSysId=e.sys_id,o.paWidgetType=e.type),{component_id:\"0805a7bf91a93efbdf0a975b38b01051\",component_props:o}},n=function n(e,r){return{text:e,vars:r}},c=function c(e){var r=e.message,a=e.level,o=e.tooltip,t=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,c=e.debugInfo,s=e.featureFlags,d={text:r,level:a,help:o,originSysId:t,hasNewArtifact:n,table:i,debugInfo:c};return\"true\"===(null==s?void 0:s.translatedLogs)?d:l(d)},l=function l(e){var r,a,o,t;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==o?o:e.text},s=function s(e,r){var a={message:n(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags};return\"true\"===(null==r?void 0:r.conditional)&&e.migrationNotes.push(c({message:n(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),-1===e.migrationNotes.indexOf(c(a))&&e.migrationNotes.push(c(a)),{component_id:\"2d56f06d55f46bbd4e79b5e624beb940\",component_props:{html:(null==r?void 0:r.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==r?void 0:r.sys_id)}}};this.run=function(r,l,d,u,p){var m,g={migratingFromJava:!0,migrationNotes:[],featureFlags:p,migratingSingleArtifact:!0},v=function(r,l,d,u){return r.migratingFromJava&&u?i(l,u):(p=o,function(r,l,d,u){var m;return(m=p===t?function(){for(var e in a)if(a[e]===(null==l?void 0:l.type))return e}():null==l?void 0:l.type)?(r.migrationNotes.push(c({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==l?void 0:l.sys_id,artifactTable:null==l?void 0:l.sys_table_name,featureFlags:r.featureFlags})),p===o||p===t?function(r,a,o,t){var n,c,l;return r.migratingFromJava&&t?i(a,t):s(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(n=null!==(c=a.name)&&void 0!==c?c:a.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> widget.\"))})}(r,function(){for(var e={},r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return a.forEach(function(r){Object.assign(e,r)}),e}(l,{type:m}),0,u):function(r,a,o,t){var n,c,l;return r.migratingFromJava&&t?i(a,t):s(r,{static_content:e(\"<b>Unsupported migration: \".concat(null!==(n=null!==(c=a.name)&&void 0!==c?c:a.sys_name)&&void 0!==n?n:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=a&&a.type?a.type:null==t||null===(l=t.type)||void 0===l?void 0:l.value,\"</span> report.\"))})}(r,l,0,u)):function(r,a,o,t){var l,d,u,p;if(r.migratingFromJava&&t)return i(a,t);var m=\"\";null!=a&&a.type?m=a.type:null!=t&&null!==(l=t.type)&&void 0!==l&&l.value?m=null==t||null===(d=t.type)||void 0===d?void 0:d.value:null!=t&&null!==(u=t.renderer)&&void 0!==u&&u.value&&(m=t.renderer.value);var g=null==t||null===(p=t.title)||void 0===p?void 0:p.value;return r.migrationNotes.push(c({message:n(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==a?void 0:a.sys_id,artifactTable:null==a?void 0:a.sys_table_name,featureFlags:r.featureFlags})),s(r,{static_content:e(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(m,\": \").concat(g,\"</span> widget.\"))})}(r,l,0,u)})(r,l,d,u);var p}(g,null===(m=r.sys_id[d])||void 0===m?void 0:m[0],r,{show_title:{value:\"true\"},show_border:{value:\"true\"}});return v.migrationNotes=g.migrationNotes,v};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"f6301fd7a3d031108d80ad2f241e6103","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-08-02 12:02:16","sys_name":"","sys_scope":"","macroponent":"","key":"treemapPAScript","sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"1","sys_updated_on":"2024-12-02 12:59:38","sys_tags":"","script":"\nvar e=\"2d56f06d55f46bbd4e79b5e624beb940\",r=\"d24d53f60350de7a652caf3188a46ed2\",t=\"2bd5dc19a7ad083941b7c992a966dd78\",o=\"0805a7bf91a93efbdf0a975b38b01051\",a=\"10fea73f9f5c73001bb9baac757fcfd9\",i=\"65b30395a9fe3dba003277a7b660b5db\",n=\"metricBase\",l={HOURLY:\"H\",DAILY:\"D\",MONTHLY:\"M\",YEARLY:\"Y\"},s=\"single_score\",d=\"donut\",u=\"semi_donut\",c=\"area\",g=\"line_bar\",p=\"spline\",m=\"step_line\",h=\"pivot_v2\",f=\"pivot\",v=\"horizontal_bar\",y=\"vertical_bar\",b=\"heatmap\",w=\"angular_gauge\",_=\"solid_gauge\",T=\"trend\",S=[s,\"pie\",d,u,c,g,p,m,f,h,\"bar\",v,y,b,w,_,T,\"box\"],F=function F(e){for(var r,t,o=\"\".concat(e),a=\"\",i=0,n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";o.charAt(i)||(n=\"=\",i%1);){if((t=o.charCodeAt(i+=3/4))>255)throw new Error(\"The string contains characters outside of the Latin1 range InvalidCharacterError\");r=r<<8|t,a+=n.charAt(63&r>>8-i%1*8)}return a.toString()},C=function C(e,r){return void 0!==e&&void 0!==r&&e.indexOf(r)>-1},A=function A(e,r){if(void 0===e)return[];if(1!==r.length)throw new Error(\"Invalid delimiter - please provide a single character delimiter\");for(var t=[],o=0,a=0;a<e.length;a++)e.charAt(a)!==r||(t.push(e.substring(o,a)),o=a+1);return o<=e.length&&t.push(e.substring(o,e.length)),t};function x(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e)throw new TypeError(\"Array find polyfill called on null or undefined\");if(\"function\"!=typeof r)throw new TypeError(\"callback must be a function\");for(var o=Object(e),a=o.length>>>0,i=arguments[1],n=0;n<a;n++){var l=o[n];if(r.call(i,l,n,o))return t?n:l}}function R(){for(var e={},r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return t.forEach(function(r){Object.assign(e,r)}),e}var O=function O(e,r){return{text:e,vars:r}},B=function B(e){var r=e.message,t=e.level,o=e.tooltip,a=e.originalArtifactSysId,i=e.artifactTable,n=e.hasNewArtifact,l=e.debugInfo,s=e.featureFlags,d={text:r,level:t,help:o,originSysId:a,hasNewArtifact:n,table:i,debugInfo:l};return\"true\"===(null==s?void 0:s.translatedLogs)?d:I(d)},I=function I(e){var r,t,o,a;return\"string\"==typeof e?e:e.debugInfo?\"\".concat(null!==(r=null===(t=e.text)||void 0===t?void 0:t.text)&&void 0!==r?r:e.text,\" ( \").concat(e.debugInfo,\" )\"):null!==(o=null===(a=e.text)||void 0===a?void 0:a.text)&&void 0!==o?o:e.text},P=\"sys_report\";function N(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return D(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?D(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e2){throw _e2},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n=e.done,e},e:function e(_e3){l=!0,i=_e3},f:function f(){try{_n||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}function D(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var E=\"STDDEV\",M=function M(e){return F(\"table\".concat(e).concat(new Date().getTime()).concat(1e8*Math.random()))},G=function G(e){return F(e+new Date().getTime()+1e8*Math.random())},L=function L(e){if(-1==e)return\"ALL\";if(-2==e||e<-1)return 12;try{return parseInt(e,10)}catch(r){return e}},U=function U(e){var r={sortBy:\"value\",sortByOrder:\"desc\"};return C(e,\"ORDERBY\")&&C(e,\"ASC\")&&(r.sortByOrder=\"asc\"),r},H=function H(e){var r=[\"TRENDBY\",\"GROUPBY\",\"ORDERBY\",\"ORDERBYDESC\"];if(!e||\"string\"!=typeof e)return\"\";var t,o=A(e,\"^\"),a=[],i=N(o);try{var n=function n(){var e=t.value;if(x(r,function(r){return e.substring(0,r.length)===r}))return\"continue\";a.push(e)};for(i.s();!(t=i.n()).done;)n()}catch(e){i.e(e)}finally{i.f()}return a.join(\"^\")},V=function V(e,r){var t={register:\"\",horizontal:\"\",orientation:\"vertical\"};function o(){t.horizontal=\"center\",\"left\"===e&&(t.horizontal=\"start\"),\"right\"===e&&(t.horizontal=\"end\")}return\"right\"===e?(t.register=\"right\",t.horizontal=\"center\"):\"left\"===e&&(t.register=\"left\",t.horizontal=\"center\"),\"bottom\"===r||\"center\"===r||\"middle\"===e?(t.register=\"bottom\",t.orientation=\"horizontal\",o()):\"top\"===r&&(t.orientation=\"horizontal\",t.register=\"top\",o()),t},k=function k(e){var r=e.colorPalette,t=e.colorType,o=e.dashboard,a=e.reportId,i=e.enableColorPerMetric,n=e.singleColor,l=e.metrics,s=e.colorList,d=e.metricMap;if(l&&d&&!o.migratingFromJava)throw new Error(\"You are using calculateColor() incorrectly. Please do not provide both metrics and metricMap simultaneously\");var u={type:\"default\"};if(r&&\"color_palette\"===t&&\"aa558ab3d7732100fa6c0c12ce610377\"!==r)u.type=\"palette\",u.palette=r;else if(\"several_colors\"===t)!s||Array.isArray(s)&&!x(s,function(e){return\"\"!==e})?u.type=\"chartColor\":o.migrationNotes.push(B({message:O(\"This visualization is migrated without the custom colors field because this functionality is not supported.\"),help:O(\"Default colors are used in the migrated visualization.\"),level:2,originalArtifactSysId:a,artifactTable:P,featureFlags:o.featureFlags}));else if(\"chart_colors\"===t)u.type=\"chartColor\";else if(\"one_color\"===t&&((null==n?void 0:n.length)>0||x(Object.keys(null!=d?d:{}),function(e){var r;return(null===(r=d[e].metricColor)||void 0===r?void 0:r.length)>0})))if(d){for(var c=i?\"colorsPerMetric\":\"singleColor\",g=[],p=0,m=Object.keys(d);p<m.length;p++){var h,f=m[p];g.push({metric:d[f].metricId,color:null!==(h=d[f].metricColor)&&void 0!==h?h:\"de699435d7033100b4964ebfae610331\"})}u.type=c,u.values=g}else{var v,y=[],b=N(null!=l?l:[]);try{for(b.s();!(v=b.n()).done;){var w=v.value;y.push({color:n,metric:w})}}catch(e){b.e(e)}finally{b.f()}u.type=\"singleColor\",u.values=y}return u};function z(e){return z=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},z(e)}var J=function J(e){return{durationFormat:Y(R(e,{unitFormat:e.shortNotation?\"SHORT\":\"LONG\"}),{customFormat:!0,unitFormat:\"SHORT\",maxDurationUnit:\"HOUR\",minDurationUnit:\"SECOND\",hideSeconds:!0,showOriginalValueInTooltip:!1,rounding:\"HALF_UP\"},{unitFormat:\"unitFormat\",maximumUnit:\"maxDurationUnit\",minimumUnit:\"minDurationUnit\",showOriginalValueInTooltip:\"showOriginalValueInTooltip\",hideSecondsAfter1Minute:\"hideSeconds\",roundingMode:\"rounding\"})}},j=function j(e,r){var t={customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:null!=r?r:2,abbreviationEnabled:!0,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!0},o=Y(null!=e?e:t,t,{roundingMode:\"rounding\",addValueInTooltip:\"numberInTooltipsEnabled\",groupingUsed:\"thousandSeparatorEnabled\",decimalPrecision:\"decimalPrecision\"});if(!o){if(void 0===r)return{numberFormat:t};if(2!==r)return{numberFormat:{customFormat:!1}}}return{numberFormat:o}},Y=function Y(e,r,t){var o=JSON.parse(JSON.stringify(r)),a=!1;for(var i in t)void 0!==o[t[i]]&&e[i]!==o[t[i]]&&(a=!0,o[t[i]]=e[i]);return!!a&&o},W=function W(e,r,t,o,a){var i={numberFormat:{customFormat:!0,abbreviationEnabled:!0,numberInTooltipsEnabled:!0},durationFormat:{customFormat:!1},dateFormat:{customFormat:!1},stringFormat:{customFormat:!1}},n={durationFormattingProperties:J,numberFormattingProperties:j};switch(a){case\"heatmap\":case\"box\":return\"glide_duration\"===t?i:n.numberFormattingProperties(void 0,r);default:if(\"glide_duration\"===t){if(\"object\"===z(e)&&n.durationFormattingProperties&&null!=e&&e.durationFormattingProperties&&Object.keys(null==e?void 0:e.durationFormattingProperties).length>0){var l=Object.keys(null==e?void 0:e.durationFormattingProperties)[0];return n.durationFormattingProperties(null==e?void 0:e.durationFormattingProperties[l])}return{durationFormat:{customFormat:!1}}}for(var s in e)if(n[s]&&e[s]&&Object.keys(e[s]).length>0){var d=Object.keys(e[s])[0];return n[s](e[s][d],r)}}return\"integer\"===t&&\"COUNT\"!==o&&\"COUNT(DISTINCT\"!==o&&r?{numberFormat:{customFormat:!0,rounding:\"HALF_UP\",decimalPrecision:r,abbreviationEnabled:!1,numberInTooltipsEnabled:!0,thousandSeparatorEnabled:!1}}:i},Z=function Z(e){return e.join(\":\")},Q=function Q(e,r,t){return x(Object.keys(e),function(e){return e===r})?e[r].dataSourceId:M(t)},q=function q(e,r,t){var o=x(e,function(e){return e.id===r}),a=!1;return o&&o.filterQuery===t||(a=!0),a};function $(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return X(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?X(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e4){throw _e4},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n2=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n2=e.done,e},e:function e(_e5){l=!0,i=_e5},f:function f(){try{_n2||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}function X(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function K(e){switch(e){case\"line_bar\":return\"bar\";case\"step_line\":return\"step\";default:return e}}var ee=function ee(e){var r,t,o,a,i,l,s,d,u=e.table,c=e.chartTitle,g=e.colorPalette,p=e.showDataLabel,m=e.groupBy,h=e.showOthers,f=e.legendHorizontalAlignment,v=e.legendVerticalAlignment,y=e.numberOfPeriods,b=(e.showChartBorder,e.sourceType),w=e.aggregateType,_=e.otherThreshold,T=e.filter,S=e.showLegend,F=e.aggregateField,A=e.colorType,x=e.trendBy,I=e.trendInterval,N=e.xAxisTitle,D=e.xAxisShowGrid,E=e.yAxisShowGrid,U=e.yAxisTitle,z=e.yAxisFrom,J=e.yAxisTo,j=e.yAxisOpposite,Y=e.formattingConfiguration,X=e.reportSource,ee=e.reportId,te=e.aggregateFieldType,oe=e.d,ae=e.showHeader,ie=e.showTitle,ne=e.showBorder,le=e.indexes,se=(e.dataSetName,e.groupByMetadata),de=e.singleColor,ue=e.customConfig,ce=e.startTime,ge=e.endTime,pe=e.colors,me=e.showMarkers,he=e.showDataTable,fe=function(e,r){var t,o=\"value\",a=\"desc\";if(C(e,\"ORDERBY\")&&(o=\"name\",C(e,\"DESC\")||(a=\"asc\")),r&&!C(e,\"ORDERBY\")){var i=r.type,n=r.internalType;a=\"asc\",\"date\"===(t=i)||\"datetime\"===t||\"due_date\"===t||\"glide_date\"===t||\"glide_date_time\"===t||\"glide_precise_time\"===t?o=\"report_range\":function(e){return\"integer\"===e||\"decimal\"===e||\"numeric\"===e||\"float\"===e||\"domain_number\"===e||\"auto_increment\"===e||\"percent_complete\"===e}(i)?o=\"value\":\"choice\"===i&&\"integer\"===n?o=\"choice\":\"reference\"===i||\"choice\"===i&&\"string\"===n?o=\"name\":a=\"desc\"}return{sortBy:o,sortByOrder:a}}(T,se),ve=H(T),ye=V(f,v),be=L(_),we=W(Y,parseInt(y,10),te,w),_e=M(u),Te=G(_e),Se={},Fe=Z([u,null==X?void 0:X.value,ve]);Se[Fe]={metricId:Te,dataSourceId:_e,metricColor:de};var Ce,Ae=!1;switch(I){case\"dayofweek\":d=\"dayOfWeek\",Ae=!0;break;case\"hour\":d=\"hourOfDay\",Ae=!0;break;default:d=I}if(32===I.length&&(d=I),\"metricbase\"===b){var xe={period:0===(null==ce?void 0:ce.indexOf(\"P\"))?ce.slice(1):\"between\",from:ce,to:ge};y=(Ce=re(xe,\"1D\")).numberOfPeriods,b=n,delete we.durationFormat,delete we.dateFormat,delete we.stringFormat}var Re={applyDateRange:!1,bareBorder:!1,chartVariation:\"stacked\",configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:ve,id:_e,isDatabaseView:!1,label:void 0,reportSourceSysId:X,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===b||0===b.length?\"table\":b,tableOrViewName:b!==n?u:void 0,table:b===n?u:void 0}],dateFormat:\"default\",disableTooltip:!1,emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:null,endTime:null===(r=Ce)||void 0===r?void 0:r.endTime,extensionType:\"area\",filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:(null!==(t=null==m?void 0:m.length)&&void 0!==t?t:0)>0?[{disableRanges:!1,groupBy:[{dataSource:_e,groupByField:m,isChoice:\"choice\"===(null==se?void 0:se.type),isPaBucket:!1,isRange:null==se?void 0:se.isRange,metric:Te}],hideZeroValues:!1,maxNumberOfGroups:null!=se&&se.isRange?\"ALL\":be,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==se||!se.isRange)&&\"true\"===h}]:[],headerTitle:ie?c:\"\",hideMatrixAggregate:!1,hideYAxis0:!1,hideYAxis1:!0,hideYAxis2:!0,hideYAxis3:!0,hideYAxis4:!0,legendExpandToFit:!0,legendHorizontalAlignment:ye.horizontal,legendPosition:ye.register,lineStrokeWidth:\"2\",metrics:[R({aggregateFunction:(null==w?void 0:w.length)>0?w:\"COUNT\",axisId:\"primary\",dataSource:_e,id:Te,label:void 0,transforms:ue},we)],newReporting:!1,numberOfPeriods:parseInt(y,10),period:null===(o=Ce)||void 0===o?void 0:o.period,refreshFrequency:!1,scoreType:\"latest\",showAbsolutePeriod:null===(a=Ce)||void 0===a?void 0:a.showAbsolutePeriod,showBorder:ne,showChange:null,showChangeFrom:null,showChangePercentage:null,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"===p,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:null,showHeader:ae,showHeaderSeparator:!1,showLegend:\"true\"===S,showLegendValue:!1,showMaximumRange:null===(i=Ce)||void 0===i?void 0:i.showMaximumRange,showMetricLabel:null,showSecondGroupAggregate:!1,showSparkline:null,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showContinuousLine:!0,enableAddZerosAtApi:Ae,showMarkers:\"true\"===me,showTotalValue:null,showTrend:!1,showXGrid:\"true\"===D,showYGrid:\"true\"===E,sortBy:fe.sortBy,sortByOrder:fe.sortByOrder,startTime:null===(l=Ce)||void 0===l?void 0:l.startTime,telemetry:\"null\",trendBy:{trendByFields:[{field:x,metric:Te}],trendByFrequency:d,trendByMinuteInterval:null},wrapTitle:!1,xAxisTitle:N,yAxis0From:z,yAxis0Position:\"true\"===j?\"right\":\"left\",yAxis0Title:U,yAxis0To:J,showDataTable:\"true\"===he};F&&\"COUNT\"!==w&&\"\"!==F&&(Re.metrics[0].aggregateField=F);var Oe,Be=$(null!==(s=le.report_layers[ee])&&void 0!==s?s:[]);try{for(Be.s();!(Oe=Be.n()).done;){var Ie,Pe,Ne,De,Ee=Oe.value,Me=Re.dataSources.map(function(e){return e.tableOrViewName}).concat(Re.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),Ge=H(Ee.filter);Fe=Z([u,null==X?void 0:X.value,Ge,Ee.sys_id]);var Le=Q(Se,Fe,Ee.table);Se[Fe]={metricId:G(Le),dataSourceId:Le,metricColor:null===(Ie=Ee.color)||void 0===Ie?void 0:Ie.value};var Ue,He=q(Re.dataSources,Le,Ge);if((!C(Me,Ee.table)&&!C(Me,Ee.report_source)||He)&&Re.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:Ee.table,filterQuery:Ge,reportSourceSysId:null===(Ue=Ee.report_source)||void 0===Ue?void 0:Ue.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:Le,dataCategories:[\"trend\",\"group\",\"simple\"]}),Re.metrics.push(R({dataSource:Se[Fe].dataSourceId,id:Se[Fe].metricId,aggregateFunction:Ee.aggregate,aggregateField:\"COUNT\"===Ee.aggregate&&\"\"!==Ee.sumfield?void 0:Ee.sumfield,axisId:\"primary\",label:(null===(Pe=Ee.series_name_text)||void 0===Pe?void 0:Pe.length)>0?Ee.series_name_text:void 0,chartType:K(Ee.type)},W(Ee.formatting_configuration,parseInt(y,10),Ee.aggregateFieldType,Ee.aggregateType))),(null===(Ne=Ee.trend_field)||void 0===Ne?void 0:Ne.length)>0&&Re.trendBy.trendByFields.push({field:Ee.trend_field,metric:Se[Fe].metricId}),(null===(De=Ee.field)||void 0===De?void 0:De.length)>0||Re.groupBy.length>0)return void oe.migrationNotes.push(B({message:O(\"This visualization is in compatibility mode because the group by configuration is not supported for this metric.\"),level:1,originalArtifactSysId:ee,artifactTable:P,featureFlags:oe.featureFlags}))}}catch(e){Be.e(e)}finally{Be.f()}return Re.colorConfig=k({colorPalette:g,colorType:A,dashboard:oe,reportId:ee,singleColor:de,colorList:pe,enableColorPerMetric:!0,metricMap:Se}),Re},re=function re(e,r){var t={numberOfPeriods:3,period:\"M\",showAbsolutePeriod:!1,showMaximumRange:!1,startTime:null,endTime:null,useCurrentDateForEnd:!1},o=function o(e){if(\"0\"===e||\"00000000\"===e)return null;var r=e.substring(0,4),t=e.substring(4,6),o=e.substring(6,8);return\"\".concat(r,\"-\").concat(t,\"-\").concat(o,\"T00:00:00Z\")};if(\"max\"===(null==e?void 0:e.period))t.showMaximumRange=!0;else if(\"between\"===(null==e?void 0:e.period)){t.showAbsolutePeriod=!0,t.startTime=o(null==e?void 0:e.from),t.endTime=o(null==e?void 0:e.to);var a=new Date;new Date(t.startTime)>a&&!t.endTime?t.endTime=t.startTime:t.startTime&&!t.endTime?t.useCurrentDateForEnd=!0:!t.startTime&&t.endTime&&(t.showMaximumRange=!0,t.endTime=null)}else{t.numberOfPeriods=parseInt(null==e?void 0:e.period.match(/\\d+/)[0],10);var i=null==e?void 0:e.period.match(/[a-zA-Z]/)[0].toUpperCase(),n=x(Object.keys(l),function(e){return l[e]===i},!0),s=x(Object.keys(l),function(e){return l[e]===r},!0);t.period=n<s?r:i}return t},te=function te(e,r,t){var o,a=\"true\"===(null==t||null===(o=t.real_time)||void 0===o?void 0:o.value),i=r.useRelativeScoreTime!==a||r.showScoreUpdateTime!==a||r.enableRealTimeUpdate!==a;return r.useRelativeScoreTime=a,r.showScoreUpdateTime=a,r.enableRealTimeUpdate=a,i?R(r):r},oe=function oe(e){var r=!0,t=!0;return null!=e&&e.show_title&&(r=\"true\"===e.show_title.value),null!=e&&e.show_border&&(t=\"true\"===e.show_border.value),{showTitle:r,showHeader:!0,showBorder:t}},ae=function ae(e){var r,t,o,a,i=e.table,n=e.aggregateFieldType,l=e.filter,s=e.groupByMetadata,d=e.chart_title||e.title,u=null===(r=e.color_palette)||void 0===r?void 0:r.value,c=e.show_chart_data_label,g=e.field,p=e.legend_horizontal_alignment,m=e.legend_vertical_alignment,h=e.show_legend,f=e.decimal_precision,v=e.show_chart_border,y=e.source_type,b=e.aggregate,w=e.other_threshold,_=e.sumfield,T=A(e.colors,\",\"),S=e.set_color,F=e.show_chart_total,C=null===(t=e.color)||void 0===t?void 0:t.value;try{var x;a=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":null!==(x=e.formatting_configuration)&&void 0!==x?x:\"null\")}catch(r){console.log(\"Unable to transform json 4\",r.toString(),e),a={}}var R=null===(o=e.report_source)||void 0===o?void 0:o.value,O=e.is_real_time,B=e.display_grid;return{table:i,chartTitle:d,colorType:S,colorPalette:u,singleColor:C,showDataLabel:c,groupBy:g,legendVerticalAlignment:m,legendHorizontalAlignment:p,showLegend:h,numberOfPeriods:f,showChartBorder:v,sourceType:y,aggregateType:b,otherThreshold:w,filter:l,aggregateField:_,colors:T,showTotal:F,formattingConfiguration:a,reportSource:R,reportId:e.sys_id,isRealTime:O,aggregateFieldType:n,showOthers:e.others,groupByMetadata:s,showDataTable:B}},ie=function ie(e){var r,t,o,a,i=e.table,n=e.aggregateFieldType,l=e.filter,s=e.groupByMetadata,d=e.chart_title||e.title,u=null===(r=e.color_palette)||void 0===r?void 0:r.value,c=e.show_chart_data_label,g=e.field,p=e.legend_horizontal_alignment,m=e.legend_vertical_alignment,h=e.show_legend,f=e.decimal_precision,v=e.show_chart_border,y=e.source_type,b=e.aggregate,w=e.other_threshold,_=e.sumfield,T=A(e.colors,\",\"),S=e.set_color,F=null===(t=e.color)||void 0===t?void 0:t.value,C=e.show_chart_total,x=e.trend_field,R=e.interval,O=e.x_axis_title,B=e.x_axis_display_grid,I=e.y_axis_display_grid,P=e.y_axis_title,N=e.y_axis_from,D=e.y_axis_to,E=e.y_axis_opposite,M=e.show_marker;try{a=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(r){console.log(\"Unable to transform json 2\",r.toString(),e),a={}}var G=null===(o=e.report_source)||void 0===o?void 0:o.value,L=e.is_real_time,U=e.bar_unstack,H=e.series_name_text,V={};try{var k;e.custom_config&&\"\"!==e.custom_config&&(V=null===(k=JSON.parse(e.custom_config))||void 0===k?void 0:k.transforms)}catch(r){console.log(\"Unable to transform widget.custom_config to json \",r.toString(),e.custom_config),V={}}var z=e.start_time,J=e.end_time,j=e.display_grid;return{table:i,chartTitle:d,colorType:S,colorPalette:u,singleColor:F,showDataLabel:c,groupBy:g,legendVerticalAlignment:m,legendHorizontalAlignment:p,showLegend:h,numberOfPeriods:f,showChartBorder:v,sourceType:y,aggregateType:b,otherThreshold:w,filter:l,aggregateField:_,colors:T,showTotal:C,trendBy:x,trendInterval:R,xAxisTitle:O,xAxisShowGrid:B,yAxisShowGrid:I,yAxisTitle:P,yAxisFrom:N,yAxisTo:D,yAxisOpposite:E,formattingConfiguration:a,reportSource:G,reportId:e.sys_id,isRealTime:L,isGroupedBars:U,aggregateFieldType:n,dataSetName:H,groupByMetadata:s,customConfig:V,startTime:z,endTime:J,showMarkers:M,showDataTable:j}},ne=function ne(e,r){var t=e.table,o=e.chartTitle,a=e.colorPalette,i=e.showDataLabel,n=e.groupBy,l=e.showOthers,s=e.legendHorizontalAlignment,d=e.legendVerticalAlignment,u=e.numberOfPeriods,c=(e.showChartBorder,e.sourceType),g=e.aggregateType,p=e.otherThreshold,m=e.filter,h=e.showLegend,f=e.aggregateField,v=e.colorType,y=e.formattingConfiguration,b=e.reportId,w=e.reportSource,_=e.isRealTime,T=e.aggregateFieldType,S=e.showHeader,F=e.showTitle,C=e.showBorder,A=e.groupByMetadata,x=e.singleColor,O=e.d,B=e.showDataTable,I=U(m),P=H(m),N=V(s,d),D=L(p),E=W(y,parseInt(u,10),T,g),z=M(t),J=G(z),j={applyDateRange:!1,bareBorder:!1,colorConfig:k({colorPalette:a,colorType:v,dashboard:O,reportId:b,singleColor:x,metrics:[J]}),configVersion:\"23.0.0-ci-SNAPSHOT\",dataLabelsType:\"value\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:P,id:z,reportSourceSysId:w,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===c||0===c.length?\"table\":c,tableOrViewName:t}],dateFormat:\"default\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"add-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:\"true\"==_,filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:[{groupBy:[{dataSource:z,groupByField:n,isChoice:\"choice\"===(null==A?void 0:A.type)||!1,isPaBucket:!1,isRange:(null==A?void 0:A.isRange)||!1}],maxNumberOfGroups:null!=A&&A.isRange?\"ALL\":D,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null==A||!A.isRange)&&\"true\"===l}],headerTitle:F?o:\"\",hideMatrixAggregate:!1,legendExpandToFit:!1,legendHorizontalAlignment:N.horizontal,metrics:[R({aggregateFunction:(null==g?void 0:g.length)>0?g:\"COUNT\",axisId:\"primary\",dataSource:z,id:J},E)],newReporting:!1,numberOfPeriods:parseInt(u,10),period:\"M\",registerOrientation:N.orientation,registerPosition:N.register,scoreType:null,showAbsolutePeriod:!1,showBorder:C,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataLabels:\"true\"==i,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:S,showHeaderSeparator:!0,showMaximumRange:!1,showMetricLabel:!1,showRegister:\"true\"==h,showRegisterOnSameLine:!1,showRegisterPercentage:!0,showRegisterValue:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:I.sortBy,sortByOrder:I.sortByOrder,telemetry:\"null\",trendBy:null,truncationType:\"start\",wrapTitle:!0,showDataTable:\"true\"==B};return f&&\"COUNT\"!==g&&\"\"!==f&&(j.metrics[0].aggregateField=f),j},le=function le(e,r){var t=ne(e),o=\"true\"==e.showTotal;return o&&(t.showTotalValue=o,t.showRegister=!1),t},se=function se(e){return\"<p style=\\\"background-color:rgb(242,237,179);margin: 5px; border: 1px solid rgb(226,216,89); border-radius: 5px; padding: 8px;\\\">\".concat(e,\"</p>\")};function de(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return ue(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ue(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e6){throw _e6},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n3=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n3=e.done,e},e:function e(_e7){l=!0,i=_e7},f:function f(){try{_n3||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}function ue(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function ce(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var ge=function ge(e,r,t){var o,a,i,n,l,s,d,u,c,g,p,m,h=\"bar\"===e.type,f=12;\"-1\"===e.other_threshold?f=\"ALL\":e.other_threshold>-2&&(f=e.other_threshold);var v=W(e.formatting_configuration,parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregateType),y=M(e.table),b=G(y),w=H(e.filter),_={sortBy:\"value\",sortByOrder:\"desc\"};C(e.filter,\"^ORDERBY\")&&(_=U(e.filter));var T={},S=Z([e.table,null===(o=e.report_source)||void 0===o?void 0:o.value,w]);T[S]={metricId:b,dataSourceId:y,metricColor:null===(a=e.color)||void 0===a?void 0:a.value};var F,A={configVersion:\"23.0.0-ci-SNAPSHOT\",yAxisHidden:!1,yAxisPosition:h||\"true\"!==e.x_axis_opposite?\"bottom\":\"top\",yAxisShowGrid:!0,xAxisWrapLabels:!1,xAxisMaxLabelSize:100,xAxisTruncationType:\"end\",yAxisStyle:\"clean\",showLegend:\"true\"===e.show_legend,showLegendValue:!1,legendPosition:\"bottom\",legendHorizontalAlignment:\"center\",legendExpandToFit:!1,showDataLabels:\"true\"===e.show_chart_data_label,dataLabelPosition:\"true\"===e.show_data_label_position_middle?\"middle\":\"top\",showStackedValues:\"none\",showOverlappingLabels:!1,newReporting:!1,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:w,reportSourceSysId:null===(i=e.report_source)||void 0===i?void 0:i.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:y,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[R({dataSource:y,id:b,label:(null===(n=e.series_name_text)||void 0===n?void 0:n.length)>0?e.series_name_text:void 0,aggregateFunction:(null===(l=e.aggregate)||void 0===l?void 0:l.length)>0?e.aggregate:\"COUNT\",aggregateField:\"COUNT\"===e.aggregate&&\"\"!==e.sumfield?void 0:e.sumfield,axisId:\"primary\"},v)],groupBy:[e.field&&e.field.length>0?{groupBy:[{dataSource:y,groupByField:e.field,isRange:null!==(s=null===(d=e.groupByMetadata)||void 0===d?void 0:d.isRange)&&void 0!==s&&s,isChoice:\"choice\"===(null===(u=e.groupByMetadata)||void 0===u?void 0:u.type),isPaBucket:!1}],maxNumberOfGroups:null!==(c=e.groupByMetadata)&&void 0!==c&&c.isRange?\"ALL\":f,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:(null===(g=e.groupByMetadata)||void 0===g||!g.isRange)&&\"true\"===e.others}:void 0],sortBy:_.sortBy,sortByOrder:_.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",yAxisTitle:e.y_axis_title,xAxisTitle:e.x_axis_title,yAxisFrom:e.y_axis_from,yAxisTo:e.y_axis_to,showDataTable:\"true\"==e.display_grid};F=e.additional_groupby||\"true\"!==e.bar_unstack&&e.trend_field&&\"\"!==e.trend_field?\"stacked\":\"grouped\",A.chartVariation=F,e.trend_field&&\"\"!==e.trend_field&&A.groupBy.push({groupBy:[{dataSource:y,groupByField:e.trend_field,isRange:e.trendMetadata.isRange,isChoice:\"choice\"===e.trendMetadata.type,isPaBucket:!1}]});var x,O=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if(\"string\"==typeof e)return ce(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ce(e,r):void 0}}(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var o=0,a=function a(){};return{s:a,n:function n(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function e(_e8){throw _e8},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var i,_n4=!0,l=!1;return{s:function s(){t=t.call(e)},n:function n(){var e=t.next();return _n4=e.done,e},e:function e(_e9){l=!0,i=_e9},f:function f(){try{_n4||null==t[\"return\"]||t[\"return\"]()}finally{if(l)throw i}}}}(null!==(m=t.report_layers[e.sys_id])&&void 0!==m?m:[]);try{var B=function B(){var r,t,o,a,i=x.value,n=A.dataSources.map(function(e){return e.tableOrViewName}).concat(A.dataSources.map(function(e){return e.reportSourceSysId}).filter(function(e){return e})),l=H(i.filter);S=Z([i.table,null===(r=i.report_source)||void 0===r?void 0:r.value,l,i.sys_id]);var s=Q(T,S,i.table);T[S]={metricId:G(s),dataSourceId:s,metricColor:null==i||null===(t=i.color)||void 0===t?void 0:t.value};var d,u=q(A.dataSources,s,l);if((!C(n,i.table)&&!C(n,i.report_source)||u)&&A.dataSources.push({isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:i.table,filterQuery:l,reportSourceSysId:null===(d=i.report_source)||void 0===d?void 0:d.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:s,dataCategories:[\"trend\",\"group\",\"simple\"]}),A.metrics.push(R({dataSource:T[S].dataSourceId,id:T[S].metricId,aggregateFunction:i.aggregate,aggregateField:\"COUNT\"===i.aggregate&&\"\"!==i.sumfield?void 0:i.sumfield,axisId:\"primary\",label:(null===(o=i.series_name_text)||void 0===o?void 0:o.length)>0?i.series_name_text:void 0},W(i.formatting_configuration,parseInt(e.decimal_precision,10),i.aggregateFieldType,i.aggregateType))),(null===(a=i.field)||void 0===a?void 0:a.length)>0){var c={dataSource:T[S].dataSourceId,groupByField:i.field,isRange:!1,isChoice:!1,isPaBucket:!1},g=!1;A.groupBy[0].groupBy.forEach(function(e){g=g||e.dataSource==c.dataSource&&e.groupByField==c.groupByField}),g||A.groupBy[0].groupBy.push(c)}};for(O.s();!(x=O.n()).done;)B()}catch(e){O.e(e)}finally{O.f()}return A.colorConfig=k({colorPalette:null===(p=e.color_palette)||void 0===p?void 0:p.value,colorType:e.set_chart_color||e.set_color,dashboard:r,reportId:e.sys_id,singleColor:e.color.value,colorList:e.colors,enableColorPerMetric:!1,metricMap:T}),A},pe=function pe(e,r,t){return\"com.glideapp.home.RenderHomepagePublishers\"===r&&t&&!Number.isNaN(parseInt(t,10))?\"\".concat(null!=t?t:\"\",\"::\").concat(null!=r?r:\"\"):\"\".concat(null!=e?e:\"\",\"::\").concat(null!=r?r:\"\")},me=(pe(\"content_block_static\",\"com.glide.cms.RenderBlock\"),pe(\"content_block_iframe\",\"com.glide.cms.RenderBlock\"),pe(\"content_block_programmatic\",\"com.glide.cms.RenderBlock\"),\"com.glide.ui.portal.RenderReport\"),he=(pe(\"\",me),pe(\"breakdown\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),pe(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),pe(\"pa_widgets\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),pe(\"time\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),pe(\"list\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),pe(\"score\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),pe(\"text\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),pe(\"pivot\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),pe(\"process\",\"com.snc.pa.ui.RenderPerformanceAnalytics\"),{group:-1,single:1,multi:2,date:3,group2:4,bool:5,cascade:6,debug:\"\"}),fe=(pe(he.group,\"com.glideapp.home.RenderHomepagePublishers\"),pe(he.group2,\"com.glideapp.home.RenderHomepagePublishers\"),pe(he.single,\"com.glideapp.home.RenderHomepagePublishers\"),pe(he.multi,\"com.glideapp.home.RenderHomepagePublishers\"),pe(he.date,\"com.glideapp.home.RenderHomepagePublishers\"),pe(he.bool,\"com.glideapp.home.RenderHomepagePublishers\"),pe(he.cascade,\"com.glideapp.home.RenderHomepagePublishers\"),pe(\"interactive_filter\",\"com.glide.ui.portal.RenderJavascript\"),pe(he.debug,\"com.glideapp.home.RenderHomepagePublishers\"),pe(\"cmdb_group_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_group_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_group_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_group_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_service_scorecard_completeness\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_service_scorecard_compliance\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_service_scorecard_correctness\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_service_scorecard_overall\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_service_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_service_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_service_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_toplist_alert\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_toplist_change\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_toplist_incident\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_group_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_scorecard_relationship\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"cmdb_service_dashboard_class_hierarchy\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"\",\"com.glide.ui.portal.RenderDashboard\"),pe(\"report\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"\",\"com.glide.ui.portal.RenderJavascript\"),pe(\"sys_ui_hp_publisher\",\"com.glideapp.home.RenderHomepagePublishers\"),pe(\"category\",\"com.glideapp.servicecatalog.RenderCategory\"),pe(\"TREEMAP\",\"com.snc.treemap.TreemapRenderer\"),pe(\"METRIC\",\"com.snc.treemap.TreemapRenderer\"),\"report\"),ve=\"filter\",ye=function ye(e,r){var t=function(e){var r={};for(var t in e){var o;null!==(o=e[t])&&void 0!==o&&o.value?r[t]=e[t].value:\"string\"==typeof e[t]&&(r[t]=e[t])}return r}(r),a={widgetSysId:void 0,reportSysId:void 0,debugFilters:!1,portalSysId:t.portal_widget_sys_id,portalPreferences:t,widgetTitle:t.title,showHeader:!t.show_header||\"true\"===t.show_header,showBorder:!t.show_border||\"true\"===t.show_border,showTitle:!t.show_title||\"true\"===t.show_title,filterConfigurations:[]};return\"pa_widgets\"===(null==e?void 0:e.sys_table_name)&&(a.paWidgetSysId=e.sys_id,a.paWidgetType=e.type),{component_id:o,component_props:a}},be=function be(r,t){var o={message:O(\"Migrated static content blocks may look different on migrated dashboards.\"),level:2,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:r.featureFlags};return\"true\"===(null==t?void 0:t.conditional)&&r.migrationNotes.push(B({message:O(\"Conditional options are removed from static content blocks on migration.\"),level:2,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:r.featureFlags})),-1===r.migrationNotes.indexOf(B(o))&&r.migrationNotes.push(B(o)),{component_id:e,component_props:{html:(null==t?void 0:t.static_content)||\"ERROR: Unable to find static content for sys_id: \".concat(null==t?void 0:t.sys_id)}}},we=function we(e,r,t,o){var a,i,n;return e.migratingFromJava&&o?ye(r,o):be(e,{static_content:se(\"<b>Unsupported migration: \".concat(null!==(a=null!==(i=r.name)&&void 0!==i?i:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> report.\"))})},_e=function _e(e){return function(r,t,o,a){var i;return(i=e===ve?function(){for(var e in he)if(he[e]===(null==t?void 0:t.type))return e}():null==t?void 0:t.type)?(r.migrationNotes.push(B({message:O(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:r.featureFlags})),\"widget\"===e||e===ve?function(e,r,t,o){var a,i,n;return e.migratingFromJava&&o?ye(r,o):be(e,{static_content:se(\"<b>Unsupported migration: \".concat(null!==(a=null!==(i=r.name)&&void 0!==i?i:r.sys_name)&&void 0!==a?a:\"unknown_name\",\"</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\").concat(null!=r&&r.type?r.type:null==o||null===(n=o.type)||void 0===n?void 0:n.value,\"</span> widget.\"))})}(r,R(t,{type:i}),0,a):we(r,t,0,a)):function(e,r,t,o){var a,i,n,l;if(e.migratingFromJava&&o)return ye(r,o);var s=\"\";null!=r&&r.type?s=r.type:null!=o&&null!==(a=o.type)&&void 0!==a&&a.value?s=null==o||null===(i=o.type)||void 0===i?void 0:i.value:null!=o&&null!==(n=o.renderer)&&void 0!==n&&n.value&&(s=o.renderer.value);var d=null==o||null===(l=o.title)||void 0===l?void 0:l.value;return e.migrationNotes.push(B({message:O(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),be(e,{static_content:se(\"<b>Unsupported migration:</b> Cannot migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(s,\": \").concat(d,\"</span> widget.\"))})}(r,t,0,a)}},Te=function Te(e,r,t){return function(e,r){var t;return!e.migratingSingleArtifact&&\"true\"===((null==r||null===(t=r.publisher_widget)||void 0===t?void 0:t.value)||\"false\")}(e,t)?(r.chartInteractionAction=\"applyAsFilter\",r):r},Se=function Se(e){null==e&&(e=\"\");var r=A(e,\",\"),t=\"\";return C(r,\"name\")?t=t.concat(\"name,\"):C(r,\"number\")?t=t.concat(\"number,\"):t+=\",\",C(r,\"short_description\")&&!C(t,\"short_description\")&&(t=t.concat(\"short_description,\")),t.endsWith(\",\")&&(t=t.slice(0,-1)),t};function Fe(e,r,t){if(e.additional_groupby){t.showAdditionalGroupBySelector=!0;var o=A(e.additional_groupby,\",\");-1===o.indexOf(e.field)&&o.unshift(e.field),[\"bar\",\"horizontal_bar\"].indexOf(e.type)>-1&&e.trend_field&&\"\"!==e.trend_field&&o.push(e.trend_field),t.additionalGroupByConfig=[],o.forEach(function(e){t.additionalGroupByConfig.push({metricLabel:e,id:e})})}}var Ce=function Ce(e,r){return Ae(e,r)},Ae=function Ae(e,r){var t=\"area\"==(null==r?void 0:r.type)||\"line_bar\"==(null==r?void 0:r.type)||\"spline\"==(null==r?void 0:r.type)||\"line\"==(null==r?void 0:r.type)||\"step_line\"==(null==r?void 0:r.type)||\"trend\"==(null==r?void 0:r.type),o=null==r?void 0:r.groupByMetadata;return!(!t||!o||\"glide_duration\"!=o.internalType&&\"glide_date_time\"!=o.internalType&&\"glide_date\"!=o.internalType||(e.migrationNotes.push(B({message:O(\"Report could not be migrated due to an invalid GroubBy configuration. GroupBy is not supported on duration, date, and date-time fields.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))};function xe(e){return xe=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},xe(e)}function Re(e,r,t){return o=function(e,r){if(\"object\"!=xe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,\"string\");if(\"object\"!=xe(o))return o;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(r),(r=\"symbol\"==xe(o)?o:String(o))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e;var o}var Oe=/ORDERBY[^.^]+\\./,Be=[function(e){var r,t,o,a,i=e.dashboard,n=e.widget,l=(e.indexes,e.preferences);((null==l||null===(r=l.renderer)||void 0===r?void 0:r.value)===me||i.migratingFromJava)&&(\"true\"===(null==l||null===(t=l.publisher_widget)||void 0===t?void 0:t.value)&&i.migrationNotes.push(B({message:O(\"This visualization is in compatibility mode because the act as filter feature is not supported on migration. It can be configured manually in a new visualization.\"),level:1,originalArtifactSysId:n.sys_id,artifactTable:n.sys_table_name,featureFlags:i.featureFlags})),null!=n&&null!==(o=n.report_drilldown)&&void 0!==o&&o.value&&i.migrationNotes.push(B({message:O(\"This visualization is in compatibility mode because the report drilldown feature is not supported on migration. It can be configured manually in a new visualization.\"),level:1,originalArtifactSysId:n.sys_id,artifactTable:n.sys_table_name,featureFlags:i.featureFlags})),Oe.test(null==n?void 0:n.filter)&&i.migrationNotes.push(B({message:O(\"This visualization is migrated without sorting by dot-walked fields because this functionality is not supported.\"),level:2,originalArtifactSysId:n.sys_id,artifactTable:n.sys_table_name,featureFlags:i.featureFlags})),null!=n&&null!==(a=n.list_ui_view)&&void 0!==a&&a.value&&i.migrationNotes.push(B({message:O(\"This visualization is migrated without a drilldown list view because this functionality is not supported.\"),level:2,originalArtifactSysId:n.sys_id,artifactTable:n.sys_table_name,featureFlags:i.featureFlags})))}],Ie=function Ie(n,l,F,x){var I=function(e,r,t,o){for(var a=0,i=Be;a<i.length;a++){var n=(0,i[a])({dashboard:e,widget:r,indexes:t,preferences:o});if(n)return n}}(n,l,F,x);if(I)return I;var N=function(e,o,n,l){if(Ce(e,o)||function(e,r){var t;return!(null==r||null===(t=r.report_drilldown)||void 0===t||!t.value||null!=e&&e.featureFlags&&null!=e&&e.featureFlags.drillDownC2C&&\"false\"!==(null==e?void 0:e.featureFlags.drillDownC2C)||(e.migrationNotes.push(B({message:O(\"A report on this dashboard has an unmigrated drilldown configuration. You can configure the drilldowns in the Visualization Designer.\"),level:1,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),0))}(e,o))return e.migratingFromJava&&l?ye(o,l):be(e,{static_content:se(\"<b>Unknown report type:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==o?void 0:o.title,\"</span>, drilldown reports are not supported.\"))});switch(null==o?void 0:o.type){case s:return function(e,t,o,a){var i,n,l,s=t.title,d=t.show_chart_title,u=t.chart_title,c=t.title_vertical_alignment,g=t.aggregate;try{l=JSON.parse(\"\"==t.formatting_configuration||null==t.formatting_configuration?\"{}\":t.formatting_configuration)}catch(e){console.log(\"Unable to transform json 1\",e.toString(),t),l={}}var p=t.table,m=t.filter,h=t.show_zero,f=t.description,v=t.chart_size,y=null===(i=t.score_color)||void 0===i?void 0:i.value,b=null===(n=t.report_source)||void 0===n?void 0:n.value,w=t.sumfield;t.list_ui_view&&\"\"!==t.list_ui_view&&e.migrationNotes.push(B({message:O(\"This visualization is migrated without a drilldown list view because this functionality is not supported.\"),level:2,originalArtifactSysId:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags}));var _=function(e){var t=e.reportId,o=e.chartTitle,a=e.title,i=e.titleVerticalAlignment,n=(e.showChartTitle,e.aggregate),l=e.table,s=e.filter,d=e.showZero,u=e.description,c=(e.chartSize,e.formattingConfiguration),g=e.indexes,p=e.color,m=e.reportSource,h=e.dashboard,f=e.aggregateField,v=(e.showHeader,e.showTitle),y=e.showBorder,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},w=M(l),_=G(w),T={type:\"default\"};null!=g&&g.sys_report_mpivot_rule&&null!=g&&g.sys_report_mpivot_rule[t]?T={type:\"singleColor\",values:[{color:p,metric:_,rules:g.sys_report_mpivot_rule[t].map(function(e){var r;return{operator:e.operator,order:e.order,value1:e.value1,value2:e.value2,color:null===(r=e.color_id)||void 0===r?void 0:r.value}})}]}:p&&\"65b30218a9fe3dba0120df8611520d97\"!==p&&(T={type:\"singleColor\",values:[{color:p,metric:_,rules:[]}]});for(var S=function(e){var r=W(e);return e.numberFormattingProperties&&0===Object.keys(e.numberFormattingProperties).length?R(r,{numberFormat:{customFormat:!0,abbreviationEnabled:!1,numberInTooltipsEnabled:!1,thousandSeparatorEnabled:!0}}):r}(c),F={filterConfigurations:\"@state.parFilters\",scoreSize:\"auto\",headingPosition:\"bottom\"===i?\"bottom\":\"top\",sparklineStyle:\"area\",scoreIcon:\"\",iconStyle:\"background\",showScoreDate:!1,useRelativeScoreTime:!1,showScoreUpdateTime:!1,showZero:\"true\"===d,newReporting:!1,showHeader:!0,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,showBorder:y,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,sortByOrder:\"desc\",showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:!1,period:\"M\",dateFormat:\"default\",description:u,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,colorConfig:T,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:l,filterQuery:H(s),reportSourceSysId:m,preferredVisualizations:[r],id:w,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[R({dataSource:w,id:_,aggregateFunction:(null==n?void 0:n.length)>0?n:\"COUNT\",aggregateField:\"COUNT\"===n?void 0:f,axisId:\"primary\",label:a},S)],headerTitle:v?\"\"!==o&&o?o:a:\"\"},C=[te],A=0;A<C.length;A++)F=C[A](h,F,b);return F}(R({chartTitle:u,title:s,showChartTitle:d,titleVerticalAlignment:c,aggregate:g,table:p,filter:m,showZero:h,description:f,chartSize:v,formattingConfiguration:l,indexes:o,reportId:t.sys_id,color:y,reportSource:b,aggregateField:w,dashboard:e},oe(a)),a);return _?{component_id:r,component_props:_}:e.migratingFromJava&&a?ye(t,a):_e(fe)(e,t,o,a)}(e,o,n,l);case\"pie\":return function(e,r,t,o){var a=Ce(e,r),i=ae(r),n=ne(R(i,{d:e},oe(o)));return!n||a?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,n),{component_id:\"96abe7e38d8790718022c5630a92176c\",component_props:Te(e,n,o)})}(e,o,n,l);case d:return function(e,r,t,o){var a=Ce(e,r),i=ae(r),n=le(R(i,{d:e},oe(o)));return!n||a?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,n),{component_id:\"a2b0596cec6b9d49dd1ff9bf76b5084b\",component_props:Te(e,n,o)})}(e,o,n,l);case u:return function(e,r,t,o){var a=Ce(e,r),i=ae(r),n=le(R(i,{d:e},oe(o)));return!n||a?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,n),{component_id:\"3809c6583b8dd540a0bf735ed493bae2\",component_props:Te(e,n,o)})}(e,o,n,l);case c:return function(e,r,t,o){var a=Ce(e,r),i=ie(r),n=ee(R(i,{d:e,indexes:t},oe(o)));return!n||a?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,n),{component_id:\"aba8630dc2ccc9b3c1774af1b6820696\",component_props:n})}(e,o,n,l);case g:return function(e,r,o,a){var i=Ce(e,r),n=function(e){var r,t=ee(e);if(t){var o=e.indexes,a=e.reportId;return(null!==(r=o.report_layers[a])&&void 0!==r?r:[]).length>0||\"true\"===e.isGroupedBars?t.chartVariation=\"side-by-side\":t.chartVariation=\"stacked\",t.extensionType=\"bar\",t}}(R(ie(r),{d:e,indexes:o},oe(a)));return!n||i?e.migratingFromJava&&a?ye(r,a):_e(fe)(e,r,o,a):(Fe(r,0,n),{component_id:t,component_props:n})}(e,o,n,l);case\"line\":return function(e,r,t,o){var a=Ce(e,r),i=function(e){var r=ee(e);if(r)return r.extensionType=\"line\",r}(R(ie(r),{d:e,indexes:t},oe(o)));return!i||a?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,i),{component_id:\"18ac962264404bcc0039359d184b15f3\",component_props:i})}(e,o,n,l);case p:return function(e,r,t,o){var a=Ce(e,r),i=function(e){var r=ee(e);if(r)return r.extensionType=\"spline\",r}(R(ie(r),{d:e,indexes:t},oe(o)));return!i||a?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,i),{component_id:\"0f1e76928c4814e1430774fb864003f0\",component_props:i})}(e,o,n,l);case m:return function(e,r,t,o){var a=Ce(e,r),i=function(e){var r=ee(e);if(r)return r.extensionType=\"step\",r}(R(ie(r),{d:e,indexes:t},oe(o)));return!i||a?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,i),{component_id:\"7fa5f7264941fabfb1542985da30e0b8\",component_props:i})}(e,o,n,l);case\"list\":return function(e,r,t,o){var a=Ce(e,r),i=function(e){var r,t=e.table,o=e.filter,a=e.chart_title||e.title,i=e.field,n=e.field_list,l=e.show_chart_title,s=null===(r=e.report_source)||void 0===r?void 0:r.value,d=e.additional_groupby;return{table:t,filter:o,chartTitle:a,groupBy:i,columns:n,showChartTitle:l,reportSource:s,reportId:e.sys_id,additionalGroupBy:d}}(r),n=function(e){var r,t=e.columns,o=e.groupBy,a=e.filter,i=e.chartTitle,n=e.table,l=e.reportSource,s=e.reportId,d=e.d,u=e.indexes,c=e.showHeader,g=e.showTitle,p=e.showBorder,m=e.additionalGroupBy,h=\"\";if(l){var f=u.sys_id[l];!f||f.length<1?d.migrationNotes.push(B({message:O(\"The dashboard has missing report source configuration.\"),level:2,originalArtifactSysId:s,artifactTable:P,featureFlags:d.featureFlags})):(n=f[0].table,h=f[0].filter)}var v=t;o&&(v=v.concat(\",\",o)),m&&(v=v.concat(\",\",m));var y=A(v,\",\");v=function(e){for(var r=[],t=0;t<e.length;t++){for(var o=!1,a=0;a<r.length;a++)if(e[t]===r[a]){o=!0;break}o||r.push(e[t])}return r}(y).join(\",\");var b=null!==(r=y.length)&&void 0!==r?r:0;return 0===b&&(b=100),{columns:v,fixedQuery:h,groupByField:o,hideColumnFiltering:!1,hideColumnGrouping:!1,hideColumnReorder:!1,hideColumnResizing:!1,hideColumnSorting:!1,hideDotwalk:!1,hideEmptyStateImage:!1,hideHeader:!c,hideHighlightContent:!1,hideHighlightedValues:!1,hideInlineEditing:!1,hideLastRefreshedText:!0,hideLinks:!1,hidePersonalization:!0,hideRefreshButton:!1,hideRowSelector:!1,hideTitle:!g,hideTitleRowCount:!1,hideViewAll:!1,highlightContent:{color:\"\",patterns:[]},highlightedValueConfigId:\"\",followFilters:!0,limit:20,listTitle:i,maxCharLimit:4e3,maxColumns:b,overrideWordWrapUserPref:!1,query:a,refreshRequested:\"\",table:n,wordWrap:!1,showBorder:p,isDashboard:!0}}(R(i,{d:e,indexes:t},oe(o)));return!n||a?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,n),{component_id:\"2b1c080881e05dc63b917044290b233f\",component_props:n})}(e,o,n,l);case h:case f:return function(e,r,t,o){var a=Ce(e,r),i=function(e){var r,t,o,a,i=e.aggregate,n=e.aggregateFieldType,l=e.filter,s=e.column,d=e.row,u=e.table,c=e.sumfield,g=e.chart_title||e.title,p=null===(r=e.color_palette)||void 0===r?void 0:r.value,m=A(e.colors,\",\"),h=e.set_color,f=null===(t=e.color)||void 0===t?void 0:t.value;try{a=JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration)}catch(r){console.log(\"Unable to transform json 3\",r.toString(),e),a={}}var v=null===(o=e.report_source)||void 0===o?void 0:o.value,y=e.other_threshold,b=e.source_type,w=\"true\"===e.others,_=\"true\"===e.show_zero,T=\"true\"===e.display_column_lines,S=\"true\"===e.display_row_lines,F=\"true\"===e.pivot_expanded;return{aggregate:i,aggregateFieldType:n,filter:l,column:s,row:d,table:u,chartTitle:g,colorPalette:p,colors:m,singleColor:f,colorType:h,formattingConfiguration:a,reportSource:v,otherThreshold:y,sysId:e.sys_id,sourceType:b,aggregateField:c,showOthers:w,showZero:_,showColLines:T,showRowLines:S,showExpanded:F}}(r),n=function(e){var r,t=e.filter,o=e.formattingConfiguration,a=e.aggregate,i=e.aggregateFieldType,n=e.table,l=e.column,s=e.row,d=e.chartTitle,u=e.reportSource,c=e.otherThreshold,g=e.sysId,p=e.sourceType,m=e.showOthers,h=e.aggregateField,f=e.showHeader,v=e.showTitle,y=e.showBorder,b=e.showZero,w=e.showColLines,_=e.showRowLines,T=e.showExpanded,S=e.indexes,F=H(t),C=L(c),x=W(o,void 0,i,a),O=M(n),B=G(O),I={applyDateRange:!1,bareBorder:!1,colorConfig:{type:\"default\"},dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:F,id:O,reportSourceSysId:u,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===p||0===p.length?\"table\":p,tableOrViewName:n}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,freezeFirstColumn:!1,freezeFooter:!1,freezeHeader:!0,groupBy:[],headerTitle:v?d:\"\",hideMatrixAggregate:!1,metrics:[R({aggregateField:h,aggregateFunction:(null==a?void 0:a.length)>0?a:\"COUNT\",axisId:\"primary\",dataSource:O,id:B},x)],newReporting:!0,numberOfPeriods:3,period:\"M\",scoreType:\"latest\",showAbsolutePeriod:!1,showAlternateColumnColors:!1,showAlternateRowColors:!0,showBorder:y,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showColumnAggregate:!0,showColumnDividers:w,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!0,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:f,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showPivotExpanded:T,showRowAggregate:!0,showRowDividers:_,showSecondGroupAggregate:!0,showSparkline:!1,showSubAggregate:!0,showTarget:!1,showThreshold:!1,showTotalAggregate:!0,showTrend:!1,showZero:b,sortBy:\"choice\",sortByOrder:\"asc\",telemetry:\"null\",truncateColumnHeader:!0,truncateFirstColumn:!0,wrapColumnHeader:!1,wrapTitle:!1},P=de(A(l,\",\"));try{for(P.s();!(r=P.n()).done;){var N=r.value;I.groupBy.push({categoryIndex:0,disableRanges:!0,groupBy:[{dataSource:O,groupByField:N,isChoice:!1,isPaBucket:!1,isRange:!1}],hideZeroValues:!1,maxNumberOfGroups:C,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:m})}}catch(e){P.e(e)}finally{P.f()}var D,E=de(A(s,\",\"));try{for(E.s();!(D=E.n()).done;){var U=D.value;I.groupBy.push({categoryIndex:1,disableRanges:!0,groupBy:[{dataSource:O,groupByField:U,isChoice:!1,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:\"ALL\"})}}catch(e){E.e(e)}finally{E.f()}var V=S.sys_report_mpivot_rule[g];if((null==V?void 0:V.length)>0){var k;I.colorConfig={type:\"singleColor\",values:[{color:null===(k=V[0].color_id)||void 0===k?void 0:k.value,metric:B,rules:[]}]};var z,J=de(V);try{for(J.s();!(z=J.n()).done;){var j,Y,Z=z.value;I.colorConfig.values[0].rules.push({operator:Z.operator,order:100,color:null===(j=Z.color_id)||void 0===j?void 0:j.value,value1:Z.value1,value2:Z.value2,backgroundColor:null===(Y=Z.bg_color_id)||void 0===Y?void 0:Y.value})}}catch(e){J.e(e)}finally{J.f()}}var Q,q=de(I.metrics);try{for(q.s();!(Q=q.n()).done;){var $=Q.value;\"COUNT\"===$.aggregateFunction&&delete $.aggregateField}}catch(e){q.e(e)}finally{q.f()}return I}(R(i,{d:e,indexes:t},oe(o)));return!n||a?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,n),{component_id:\"06f6aacbd1818110f877d87436272684\",component_props:n})}(e,o,n,l);case\"control\":case\"tbox\":return function(e,r,t,o){return e.migratingFromJava&&o?ye(r,o):(e.migrationNotes.push(B({message:O(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),we(e,r))}(e,o,0,l);case\"box\":return function(e,t,o,a){var i=function(e){var r,t=e.table,o=e.source_type,a=e.title,i=e.description,n=e.field,l=e.trend_field,s=e.additional_groupby,d=e.y_axis_title,u=e.x_axis_title,c=e.y_axis_opposite,g=e.y_axis_display_grid,p=e.y_axis_from,m=e.y_axis_to,h=e.x_axis_label_size,f=e.aggregate,v=e.aggregateFieldType,y=e.filter,b=e.sumfield,w=e.decimal_precision,_=e.formatting_configuration,T=e.type,S=e.trendMetadata,F=e.report_source;try{r=JSON.parse(\"\"==_||null==_?\"{}\":null!=_?_:\"null\")}catch(t){console.log(\"Unable to transform json 4\",t.toString(),e),r={}}var C=m||0===m;return{formattingConfiguration:r,chartTitle:a,description:i,sourceType:o,table:t,decimalPrecision:parseInt(w,10),groupBy:n,measuredBy:l,additionalGroupBy:s,yAxisTitle:d,yAxisPosition:\"false\"===c?\"left\":\"right\",yAxisShowGrid:\"true\"===g,yAxisFrom:p||0===p?parseInt(p,10):null,yAxisTo:C?parseInt(m,10):null,yAxisStyle:\"default\",xAxisTitle:u,xAxisMaxLabelSize:h,aggregate:f,aggregateFieldType:v,filter:y,aggregateField:b,type:T,trendMetadata:S,reportSource:null==F?void 0:F.value}}(t),n=function(e){var t,o=e.chartTitle,a=e.title,i=e.table,n=e.filter,l=e.showZero,s=e.description,d=e.formattingConfiguration,u=e.reportSource,c=e.aggregateField,g=e.showTitle,p=e.measuredBy,m=e.groupBy,h=e.yAxisTitle,f=e.yAxisPosition,v=e.yAxisShowGrid,y=e.yAxisFrom,b=e.yAxisTo,w=e.yAxisStyle,_=e.xAxisTitle,T=e.decimalPrecision,S=e.aggregateFieldType,F=e.aggregate,A=e.type,x=e.trendMetadata,O=M(i),B=G(O),I=\"value\",P=\"desc\";C(n,\"ORDERBY\")&&(I=\"name\",C(n,\"DESC\")||(P=\"asc\"));var N=W(d,T,S,F,A),D={chart:{type:\"boxplot\"},legend:{align:\"center\",enabled:!1,layout:\"horizontal\",verticalAlign:\"bottom\"},plotOptions:{boxplot:{fillColor:\"rgb(var(--now-datavis_color--accessibility-0, 255,255,255))\",lineWidth:1,medianWidth:2,stroke:\"rgb(var(--now-datavis_color--qualitative-0, 10,184,217))\",strokeWidth:\"1px\",whiskerWidth:2},series:{colorByPoint:!1,marker:{fillColor:\"rgb(var(--now-datavis_color--qualitative-1, 255,87,48))\",radius:4,symbol:\"circle\"}}},series:[{dataLabels:{enabled:!1}}],tooltip:{enabled:!0},xAxis:{categories:[],labels:{style:{textOverflow:\"ellipsis\",whitespace:\"nowrap\",width:\"100px\"}},lineColor:\"rgb(var(--now-datavis_color_chart--tertiary, 143,149,161))\",lineWidth:1,tickWidth:1,title:{},visible:!0},yAxis:{gridLineWidth:!0,labels:{enabled:!0,style:{lineWidth:1,tickWidth:0}},lineWidth:0,min:0,opposite:!1,tickWidth:0,title:{text:\"\".concat(i,\" \").concat((null==x?void 0:x.label)||\"\")},visible:!0}};return Re(t={filterConfigurations:\"@state.parFilters\",scoreSize:\"auto\",sparklineStyle:\"area\",scoreIcon:\"\",iconStyle:\"background\",showScoreDate:!1,useRelativeScoreTime:!1,showScoreUpdateTime:!1,showZero:\"true\"===l,newReporting:!1,showHeader:!0,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,showBorder:!0,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,sortBy:I,sortByOrder:P,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:!1,period:\"M\",dateFormat:\"default\",description:s,configVersion:\"23.0.0-ci-SNAPSHOT\",groupBy:null,trendBy:null,colorConfig:{type:\"default\"},dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:i,filterQuery:H(n),reportSourceSysId:u,preferredVisualizations:[r],id:O,dataCategories:[\"trend\",\"group\",\"simple\"]}],metrics:[R({dataSource:O,id:B,aggregateFunction:(null==F?void 0:F.length)>0?F:\"COUNT\",aggregateField:\"COUNT\"===F?void 0:c,axisId:\"primary\",label:a},N)]},\"groupBy\",[{categoryIndex:0,groupBy:[{dataSource:O,groupByField:m,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1},{categoryIndex:1,groupBy:[{dataSource:O,groupByField:p,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1}]),Re(t,\"headerTitle\",g?o:\"\"),Re(t,\"backgroundRefreshInterval\",\"\"),Re(t,\"chartInteractionEnabled\",!0),Re(t,\"chartInteractionAction\",\"goToData\"),Re(t,\"config\",D),Re(t,\"yAxisHidden\",!1),Re(t,\"yAxisTitle\",h),Re(t,\"yAxisPosition\",f),Re(t,\"yAxisShowGrid\",v),Re(t,\"yAxisFrom\",y),Re(t,\"yAxisTo\",b),Re(t,\"yAxisStyle\",w),Re(t,\"xAxisTitle\",_),t}(R(i,oe(a)));return n?(Fe(t,0,n),{component_id:\"c5d01636ff2602109bd2ffffffffff0a\",component_props:n}):e.migratingFromJava&&a?(e.migrationNotes.push(B({message:O(\"Something went wrong with new properties.\"),level:0,originalArtifactSysId:null==t?void 0:t.sys_id,artifactTable:null==t?void 0:t.sys_table_name,featureFlags:e.featureFlags})),ye(t,a)):_e(fe)(e,t,o,a)}(e,o,n,l);case\"pareto\":return function(e,r,t,o){if(Ce(e,r))return e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o);var a=function(e,r,t){var o=ge(e,r,t);return\"palette\"===o.colorConfig.type&&(r.migrationNotes.push(B({message:O(\"This content was migrated with the default color palette. Custom palettes are not currently supported for the {0} visualization in Platform Analytics.\",e.title),level:2,originalArtifactSysId:null==e?void 0:e.sys_id,artifactTable:null==e?void 0:e.sys_table_name,featureFlags:r.featureFlags})),o.colorConfig.type=\"default\"),o.yAxisStyle=\"clean\",o}(R(r,oe(o)),e,t);return Fe(r,0,a),{component_id:\"53e0a2b49e3ff92ba54ea7ea6f0d0583\",component_props:a}}(e,o,n,l);case\"hist\":case\"funnel\":case\"pyramid\":case\"map\":return function(e,r,t,o){return e.migratingFromJava&&o?ye(r,o):(e.migrationNotes.push(B({message:O(\"This content is in compatibility mode because we are unable to migrate its configurations.\"),level:0,originalArtifactSysId:null==r?void 0:r.sys_id,artifactTable:null==r?void 0:r.sys_table_name,featureFlags:e.featureFlags})),we(e,r))}(e,o,0,l);case\"bar\":case v:case y:return function(e,r,t,o){if(Ce(e,r))return e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o);var a=ge(R(r,oe(o)),e,t);return Fe(r,0,a),{component_id:\"bar\"===r.type?\"23051643b7e03010097cb81cde11a910\":\"85855283b7e03010097cb81cde11a91d\",component_props:a}}(e,o,n,l);case b:return function(e,r,t,o){var a=Ce(e,r),i=function(e,r){var t,o,a,i,n,l,s,d,u,c=M(e.table),g=G(c),p={type:\"default\"};\"true\"===e.use_color_heatmap&&\"65b303c7a9fe3dba00629aff95ee3597\"!==(null===(t=e.axis_min_color)||void 0===t?void 0:t.value)&&\"b0d449b3d7332100fa6c0c12ce610383\"!==(null===(o=e.axis_max_color)||void 0===o?void 0:o.value)&&null!==(a=e.axis_min_color)&&void 0!==a&&a.value&&null!==(i=e.axis_max_color)&&void 0!==i&&i.value&&(p={type:\"colorRange\",values:[{color:null===(d=e.axis_min_color)||void 0===d?void 0:d.value,id:\"minColor\"},{color:null===(u=e.axis_max_color)||void 0===u?void 0:u.value,id:\"maxColor\"}]});var m=W(JSON.parse(\"\"==e.formatting_configuration||null==e.formatting_configuration?\"{}\":e.formatting_configuration),parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregate,e.type),h=12;\"-1\"===e.other_threshold?h=\"ALL\":e.other_threshold>-2&&(h=e.other_threshold);var f=U(e.filter);return{showZero:\"true\"===e.show_zero,showDataLabels:\"true\"===e.show_chart_data_label,showLegend:!0,legendPosition:\"bottom\",colorConfig:p,newReporting:!1,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:H(e.filter),reportSourceSysId:null===(n=e.report_source)||void 0===n?void 0:n.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:c,dataCategories:[\"trend\",\"group\",\"simple\"]}],showHeader:e.showHeader,showTotalAggregate:!1,showSubAggregate:!1,showFirstGroupAggregate:!1,showSecondGroupAggregate:!1,hideMatrixAggregate:!1,wrapTitle:!1,showHeaderSeparator:!1,headerTitle:e.showTitle?null!==(l=e.name)&&void 0!==l?l:e.title:\"\",showBorder:e.showBorder,bareBorder:!1,telemetry:\"null\",showDataPassthrough:!1,dataPassthrough:null,metrics:[R({dataSource:c,id:g,aggregateFunction:(null===(s=e.aggregate)||void 0===s?void 0:s.length)>0?e.aggregate:\"COUNT\",aggregateField:\"COUNT\"!==e.aggregate?e.sumfield:void 0,axisId:\"primary\"},m)],groupBy:[{categoryIndex:0,groupBy:[{dataSource:c,groupByField:e.column,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:h,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:\"true\"===e.others,disableRanges:!1},{categoryIndex:1,groupBy:[{dataSource:c,groupByField:e.row,isRange:!1,isChoice:!1,isPaBucket:!1}],maxNumberOfGroups:h,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1,disableRanges:!1}],sortBy:f.sortBy,sortByOrder:f.sortByOrder,trendBy:null,showChange:!1,showChangePercentage:!1,showTarget:!1,showForecast:!1,showForecastRange:!1,showTrend:!1,showConfidenceBand:!1,showGapPercentage:!1,showSparkline:!1,showMetricLabel:!1,showThreshold:!1,showComment:!1,followFilters:!0,showFilterIcon:!0,enableRealTimeUpdate:!1,enableDrilldown:!0,enableCustomEmptyState:!1,emptyStateIllustration:\"no-data\",emptyStateHeading:\"No data available.\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateAlignment:\"vertical-centered\",showMaximumRange:!1,applyDateRange:!1,numberOfPeriods:3,showAbsolutePeriod:!1,scoreType:null,showChangeFrom:\"previous\",period:\"M\",dateFormat:\"default\",configVersion:\"23.0.0-ci-SNAPSHOT\"}}(R(r,oe(o)));return!i||a?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,i),{component_props:i,component_id:\"d1f6c60ce95607ea1ef236430d5fdec9\"})}(e,o,n,l);case w:return function(e,r,t,o){var a=Ce(e,r),i=function(e){var r,t=e.aggregate,o=e.aggregateFieldType,a=e.filter,i=e.table,n=e.sumfield,l=e.direction,s=e.chart_title||e.title,d=null===(r=e.report_source)||void 0===r?void 0:r.value,u=e.source_type;return{decimalPrecision:parseInt(e.decimal_precision,10),sourceType:u,reportSource:d,chartTitle:s,aggregate:t,aggregateFieldType:o,filter:a,table:i,sumfield:n,autoScale:\"true\"===e.gauge_autoscale,lowerLimit:e.lower_limit,upperLimit:e.upper_limit,direction:l,from:parseInt(e.from,10),to:parseInt(e.to,10)}}(r),n=function(e){var r,t=e.decimalPrecision,o=e.sourceType,a=e.reportSource,i=e.chartTitle,n=e.aggregate,l=e.aggregateFieldType,s=e.filter,d=e.table,u=e.sumfield,c=e.autoScale,g=e.lowerLimit,p=e.upperLimit,m=e.direction,h=e.showHeader,f=e.showTitle,v=e.showBorder,y=e.from,b=e.to,w=(e.indexes,U(s)),_=H(s),T=W(void 0,t,l,n),S=M(d),F=G(S),C={applyDateRange:!1,bareBorder:!1,configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:_,id:S,isDatabaseView:!1,reportSourceSysId:a,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"source\"===o||0===o.length?\"table\":o,tableOrViewName:d}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,gaugeArcAngle:\"180\",groupBy:null,headerTitle:f?i:\"\",hideMatrixAggregate:!1,innerRadius:.7,maxValue:b,metrics:[R({aggregateFunction:(null===(r=e.aggregate)||void 0===r?void 0:r.length)>0?e.aggregate:\"COUNT\",axisId:\"primary\",dataSource:S,id:F},T)],minValue:y,newReporting:!1,numberOfPeriods:3,period:\"M\",rangesConfig:{},scoreLabel:\"none\",scoreType:null,showAbsolutePeriod:!1,showBorder:v,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:h,showHeaderSeparator:!1,showLabelFirst:!1,showMaximumRange:!1,showMetricLabel:!1,showRangeLabels:!1,showRangeLimit:!0,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,showZero:!0,sortByOrder:w.sortByOrder,telemetry:\"null\",trendBy:null,valueLabelSize:\"md\",wrapTitle:!1};return c&&(C.minValue=0,C.maxValue=null),u&&\"COUNT\"!==n&&\"\"!==u&&(C.metrics[0].aggregateField=u),(null==p?void 0:p.length)>0&&g.length>0&&(C.rangesConfig={data:[{label:\"Lower Limit\",maxValue:g,order:0},{label:\"Upper Limit\",maxValue:p,minValue:g,order:1},{minValue:p,order:2}],type:\"maximize\"===m?\"red_to_green\":\"green_to_red\"}),C}(R(i,{d:e,indexes:t},oe(o)));return!n||a?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,n),{component_id:\"037bd8ea3013833fd049186779528b70\",component_props:n})}(e,o,n,l);case _:return function(e,r,t,o){var n=Ce(e,r),l=function(e,r){var t,o,n,l=M(e.table),s=G(l),d={type:\"default\"};if(e.upper_limit&&\"\"!==e.upper_limit&&e.lower_limit&&\"\"!==e.lower_limit){var u=a,c=i;\"minimize\"!==e.direction&&(u=i,c=a);var g=parseInt(e.upper_limit,10);d={type:\"singleColor\",values:[{color:\"fec1eb7b9f5c73001bb9baac757fcf6c\",metric:s,rules:[{operator:\"<\",order:100,color:u,value1:parseInt(e.lower_limit,10)},{operator:\"<\",order:200,color:\"65b30254a9fe3dba00b44ce0710382b3\",value1:g},{operator:\">=\",order:300,color:c,value1:g}]}]}}var p=W(JSON.parse(e.formatting_configuration||\"{}\"),parseInt(e.decimal_precision,10),e.aggregateFieldType,e.aggregate,e.type);return{applyDateRange:!1,bareBorder:!1,colorConfig:d,configVersion:\"23.0.0-ci-SNAPSHOT\",dataPassthrough:null,dataSources:[{isDatabaseView:!1,allowRealTime:!0,label:void 0,sourceType:\"table\",tableOrViewName:e.table,filterQuery:H(e.filter),reportSourceSysId:null===(t=e.report_source)||void 0===t?void 0:t.value,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],id:l,dataCategories:[\"trend\",\"group\",\"simple\"]}],dateFormat:\"default\",description:\"\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,followFilters:!0,groupBy:null,headerTitle:e.showTitle?e.title:\"\",hideMatrixAggregate:!1,innerRadius:.7,metrics:[R({dataSource:l,id:s,aggregateFunction:(null===(o=e.aggregate)||void 0===o?void 0:o.length)>0?e.aggregate:\"COUNT\",aggregateField:null!==(n=e.aggregate)&&void 0!==n&&n.startsWith(\"COUNT\")?void 0:e.sumfield,axisId:\"primary\"},p)],minValue:\"true\"!==e.gauge_autoscale&&e.from&&\"\"!==e.from?e.from:0,maxValue:\"true\"!==e.gauge_autoscale&&e.to&&\"\"!==e.to?e.to:void 0,newReporting:!1,numberOfPeriods:3,period:\"M\",scoreType:null,showAbsolutePeriod:!1,showBorder:e.showBorder,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:e.showHeader,showHeaderSeparator:!1,showMaximumRange:!1,showMetricLabel:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,showZero:!0,sortByOrder:\"desc\",telemetry:\"null\",trendBy:null,valueLabelSize:\"md\",wrapTitle:!1}}(R(r,oe(o)));return!l||n?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,l),{component_id:\"63f050cf050137731a828878839e0b33\",component_props:l})}(e,o,n,l);case\"bubble\":return function(e,r,t,o){var a=Ce(e,r);if((null==r?void 0:r.aggregate)===E)return e.migratingFromJava&&o?ye(r,o):be(e,{static_content:se(\"<b>Unsupported Aggregation:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==r?void 0:r.type,\"</span> report because Standard Deviation aggregation is not supported.\"))});var i=function(e,r,t){var o,a,i=M(r.table),n=G(i),l=W(\"\"===r.formatting_configuration?\"{}\":r.formatting_configuration);switch(r.legend_horizontal_alignment){case\"right\":case\"left\":a=r.legend_horizontal_alignment;break;default:a=\"bottom\"}var s=U(r.filter);return{additionalGroupByConfig:[],applyDateRange:!1,bareBorder:!1,colorConfig:{type:\"default\"},contextMenuActions:[],dataPassthrough:null,dataSources:[{allowRealTime:!0,dataCategories:[\"group\",\"simple\",\"trend\"],filterQuery:H(r.filter),id:i,isDatabaseView:!1,label:void 0,preferredVisualizations:[\"d24d53f60350de7a652caf3188a46ed2\"],sourceType:\"table\",tableOrViewName:r.table}],dateFormat:\"default\",emptyStateAlignment:\"vertical-centered\",emptyStateContent:\"There are no scores available for the selected criteria. Contact your admin for more info.\",emptyStateHeading:\"No data available.\",emptyStateIllustration:\"no-data\",enableCustomEmptyState:!1,enableDrilldown:!0,enableRealTimeUpdate:!1,filterConfigurations:\"@state.parFilters\",followFilters:!0,groupBy:[{categoryIndex:0,disableRanges:!1,groupBy:[{dataSource:i,groupByField:r.column,isChoice:!1,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1},{categoryIndex:1,disableRanges:!1,groupBy:[{dataSource:i,groupByField:r.row,isChoice:!0,isPaBucket:!1,isRange:!1}],maxNumberOfGroups:10,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\",showOthers:!1},\"\"!==r.field&&r.field?{categoryIndex:2,disableRanges:!1,groupBy:[{dataSource:i,groupByField:r.field,isChoice:!0,isPaBucket:!1,isRange:!1}],hideZeroValues:!1,maxNumberOfGroups:10,showOthers:\"true\"===r.others,numberOfGroupsBasedOn:\"NO_OF_GROUP_BASED_ON_PER_METRIC\"}:{disableRanges:!1}],hideMatrixAggregate:!1,legendPosition:a,metrics:[R({aggregateFunction:(null===(o=r.aggregate)||void 0===o?void 0:o.length)>0?r.aggregate:\"COUNT\",aggregateField:\"COUNT\"!==r.aggregate?r.sumfield:void 0,axisId:\"primary\",dataSource:i,id:n},l)],newReporting:!1,numberOfPeriods:3,noDebounce:!1,period:\"M\",scoreType:null,showAbsolutePeriod:!1,showAdditionalGroupBySelector:!1,showBorder:!0,showChange:!1,showChangeFrom:\"previous\",showChangePercentage:!1,showComment:!1,showConfidenceBand:!1,showDataPassthrough:!1,showFilterIcon:!0,showFirstGroupAggregate:!1,showForecast:!1,showForecastRange:!1,showGapPercentage:!1,showHeader:r.showHeader,headerTitle:r.showTitle?r.title:\"\",showHeaderSeparator:!1,showLegend:\"true\"===r.show_legend,showMaximumRange:!1,showMetricLabel:!1,showSecondGroupAggregate:!1,showSparkline:!1,showSubAggregate:!1,showTarget:!1,showThreshold:!1,showTotalAggregate:!1,showTrend:!1,sortBy:s.sortBy,sortByOrder:s.sortByOrder,telemetry:null,wrapTitle:!1}}(0,R(r,oe(o)));return!i||a?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,i),{component_id:\"50dbc52a13c8b4691f7c60e0246bf28c\",component_props:i})}(e,o,n,l);case\"calendar\":return function(e,r,t,o){var a,i,n=Ce(e,r),l={table:(a=R(r,oe(o))).table,reportSource:null===(i=a.report_source)||void 0===i?void 0:i.value,encodedQuery:a.filter,startDateField:a.trend_field,endDateField:\"\",eventDisplayFields:Se(a.field_list),componentTitle:a.title,followFilters:!0,showFilterOverview:!0,showDescription:!0,componentDescription:\"\",viewType:\"MONTH\",eventColor:\"\",filterConfigurations:[]};return!l||n?e.migratingFromJava&&o?ye(r,o):_e(fe)(e,r,t,o):(Fe(r,0,l),{component_id:\"259e0221ff18a75c5f5f0fb28fa5d32f\",component_props:l})}(e,o,n,l);case T:return function(e,r,o,a){var i=Ce(e,r),n=ie(r);if((null==n?void 0:n.aggregateType)===E)return e.migratingFromJava&&a?ye(r,a):be(e,{static_content:se(\"<b>Unsupported Aggregation:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==r?void 0:r.type,\"</span> report because Standard Deviation aggregation is not supported.\"))});var l=function(e){var r=ee(e);if(r)return r.extensionType=\"bar\",r.legendExpandToFit=!1,r}(R(n,{d:e,indexes:o},oe(a)));return!l||i?e.migratingFromJava&&a?ye(r,a):_e(fe)(e,r,o,a):(Fe(r,0,l),{component_id:t,component_props:l})}(e,o,n,l);default:return e.migratingFromJava&&l?ye(o,l):be(e,{static_content:se(\"<b>Unknown report type:</b> Could not migrate <span style=\\\"font-family: 'Courier New', monospace\\\">\".concat(null==o?void 0:o.type,\"</span> report because there is no mapping.\"))})}}(n,l,F,x);N&&N.component_id!==o&&N.component_id!==e&&function(e,r,t){var o,a=null==r||null===(o=r.widget_navigation)||void 0===o?void 0:o[e.sys_id];if(a){var i=a.filter(function(e){return\"true\"===e.active}).sort(function(e,r){return\"\"==e.order&&\"\"!=r.order?-1:\"\"==r.order&&\"\"!=e.order?1:e.order===r.order?e.label.localeCompare(r.label):e.order-r.order});a=i[0],Object.assign(t.component_props,{chartInteractionAction:\"goToUrl\",chartInteractionActionGoToURLInput:a.value,chartInteractionActionGoToURLPageName:a.label})}}(l,F,N);var D=C(S,l.type);return N&&N.component_id!==o&&N.component_id!==e&&D&&function(e,r,t,o,a){var i,n,l,s,d;if(null!=e&&null!==(i=e.report_drilldown)&&void 0!==i&&i.value){var u,c,g,p,m=null==e||null===(n=e.report_drilldown)||void 0===n?void 0:n.value,h=null===(l=t.sys_id[m])||void 0===l?void 0:l[0],f=Ie(o,h,t,a);u=r,c=null==r||null===(s=r.metrics)||void 0===s||null===(d=s[0])||void 0===d?void 0:d.id,(g=f).component_props.label=null===(p=g.component_props)||void 0===p?void 0:p.headerTitle,u.chartInteractionEnabled=!0,u.chartInteractionAction=\"drillDownToChart\",u.chartToChart={},u.chartToChart[c]={macroponentId:g.component_id,properties:g.component_props}}}(l,N.component_props,F,n,x),N};this.run=function(e,r,t,o,a){for(var i=[],n=0;n<t.length;n++)try{var l,s=null===(l=e.sys_id[t[n]])||void 0===l?void 0:l[0],d={migratingFromJava:!0,migrationNotes:[],featureFlags:a,migratingSingleArtifact:!0};if(s){var u=Ie(d,s,e,{show_title:{value:\"true\"},show_border:{value:\"true\"}});u.migrationNotes=d.migrationNotes,u.oldSysId=t[n],i.push({answer:u,hasError:!1,oldSysId:t[n]})}}catch(e){i.push({error:e,hasError:!0,oldSysId:t[n]})}return i};var answer;var logs=[];var console={log:function log(arg1,arg2,arg3,arg4,arg5,arg6,arg7){logs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})}};var infoLogs=[];console.info=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){infoLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var errorLogs=[];console.error=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){errorLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var warnLogs=[];console.warn=function(arg1,arg2,arg3,arg4,arg5,arg6,arg7){warnLogs.push({arg1:arg1,arg2:arg2,arg3:arg3,arg4:arg4,arg5:arg5,arg6:arg6,arg7:arg7})};var logWrapper={warn:warnLogs,error:errorLogs,info:infoLogs,logs:logs};try{this.result=this.run(JSON.parse(this.indexes),JSON.parse(this.preferences),this.sys_id,this.new_sys_id,JSON.parse(this.featureFlags||null));answer={answer:this.result,hasError:false,logs:logWrapper}}catch(e){answer={hasError:true,error:e,logs:logWrapper}}answer;\n\n","sys_class_name":"par_coreui_migration_script","sys_id":"f7af910aa33131108d80ad2f241e61e5","sys_package":"","sys_update_name":"","sys_updated_by":"admin","sys_created_on":"2023-10-11 20:12:33","sys_name":"","sys_scope":"","macroponent":"","key":"reportBatchScript","sys_created_by":"admin","sys_policy":""}]}