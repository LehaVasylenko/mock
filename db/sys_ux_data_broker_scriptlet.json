{"result":[{"private":"true","required_translations":"[ {\n            \"message\" : \"ID field\",\n            \"comment\" : \"\"\n            }, {\n            \"message\" : \"Label field\",\n            \"comment\" : \"\"\n            }, {\n            \"message\" : \"Query Result\",\n            \"comment\" : \"\"\n            }, {\n            \"message\" : \"Query result from GraphQL query\",\n            \"comment\" : \"\"\n            }, {\n            \"message\" : \"Value field\",\n            \"comment\" : \"\"\n            } ]","batch_exclude":"false","sys_mod_count":"7","description":"Transforms a query result into a list of label-id and/or label-value pairs which can be used with base UI components.","sys_updated_on":"2024-09-10 07:49:14","sys_tags":"","script":"function transform(input) {\n\tvar envLogger = scriptlet;\n\n\t// depth first search for _results array field\n\tfunction _recursFindKey(obj, key) {\n\t\tif (typeof(obj) !== \"object\" || obj === null || obj === undefined || typeof(key) !== \"string\") {\n\t\t\tenvLogger.print(\"Get Results transform error: invalid input for property ''\" + key + \"'' (type: \" + typeof(key) + \")\");\n\t\t\treturn null;\n\t\t}\n\t\tfor (var k in obj) {\n\t\t\tif (k == key)\n\t\t\t\treturn obj[k];\n\n\t\t\tvar child = obj[k];\n\t\t\tif (typeof(child) !== 'object' || child === null || child === undefined)\n\t\t\t\tcontinue;\n\n\t\t\tvar result = _recursFindKey(child, key);\n\t\t\tif (result != null)\n\t\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction _nil(str) {\n\t\treturn typeof(str) === 'undefined' || str == null || str == '';\n\t}\n\n\tfunction _subNil(str, ifNil) {\n\t\treturn _nil(str) ? ifNil : str;\n\t}\n\n\tvar iterationType = \"props\";\n\tvar result = input && input.query ? _recursFindKey(input.query, \"_results\") || input.query : null;\n\tif (result) {\n\t\tif (result.length == 1)\n\t\t\tresult = result[0];\n\t\telse if (result.length > 1)\n\t\t\titerationType = \"array\";\n\t}\n\n\tif (!result)\n\t\treturn [\"Label ID Transform error: invalid input param: Expected to find property '_results'\" ];\n\n\tvar answer = [];\n\tvar answerItem;\n\tif (\"array\" == iterationType) {\n\t\tfor (var i = 0; i < result.length; i++) {\n\t\t\tvar item = result[i];\n\t\t\tif (item == null) continue;\n\n\t\t\tanswerItem = {\n\t\t\t\t\"label\": item._row_data ? item._row_data.displayValue : \"Unknown\",\n\t\t\t\t\"id\": item._row_data ? item._row_data.uniqueValue : \"\"\n\t\t\t};\n\t\t\tif (input.labelField && item[input.labelField])\n\t\t\t\tanswerItem[\"label\"] = _subNil(item[input.labelField].displayValue, item._row_data ? item._row_data.displayValue : \"Unknown\");\n\t\t\tif (input.idField && item[input.idField])\n\t\t\t\tanswerItem[\"id\"] = _subNil(item[input.idField].value, item._row_data ? item._row_data.uniqueValue : \"\");\n\t\t\tif (input.valueField && item[input.valueField])\n\t\t\t\tanswerItem[\"value\"] = _subNil(item[input.valueField].displayValue, item._row_data ? item._row_data.displayValue : \"Unknown\");\n\n\t\t\tanswer.push(answerItem);\n\t\t}\n\t} else {\n\t\tfor (var key in result) {\n\t\t\tif (\"_row_data\" == key)\n\t\t\t\tcontinue;\n\n\t\t\tvar element = result[key];\n\t\t\tif (element == null) continue;\n\n\t\t\tanswerItem = {\n\t\t\t\t\"label\": (input.labelField && element[input.labelField]) ? element[input.labelField] : key,\n\t\t\t\t\"id\": _subNil(element.value, \"\")\n\t\t\t};\n\t\t\tif (!_nil(input.idField))\n\t\t\t\tanswerItem[\"id\"] = _subNil(element[input.idField] || element.value, \"\");\n\t\t\tif (!_nil(input.valueField))\n\t\t\t\tanswerItem[\"value\"] = _subNil(element[input.valueField] || element.displayValue, \"\");\n\t\t\tanswer.push(answerItem);\n\t\t}\n\t}\n\n\treturn answer;\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n            {\r\n            \"name\": \"query\",\r\n            \"label\": \"Query Result\",\r\n            \"description\": \"Query result from GraphQL query\",\r\n            \"readOnly\": false,\r\n            \"fieldType\": \"object\",\r\n            \"mandatory\": true,\r\n            \"defaultValue\": \"\"\r\n            },\r\n            {\r\n            \"name\": \"labelField\",\r\n            \"label\": \"Label field\",\r\n            \"description\": \"Label field\",\r\n            \"readOnly\": false,\r\n            \"fieldType\": \"string\",\r\n            \"mandatory\": true,\r\n            \"defaultValue\": \"label\"\r\n            },\r\n            {\r\n            \"name\": \"idField\",\r\n            \"label\": \"ID field\",\r\n            \"description\": \"ID field\",\r\n            \"readOnly\": false,\r\n            \"fieldType\": \"string\",\r\n            \"mandatory\": false,\r\n            \"defaultValue\": \"value\"\r\n            },\r\n            {\r\n            \"name\": \"valueField\",\r\n            \"label\": \"Value field\",\r\n            \"description\": \"Value field\",\r\n            \"readOnly\": false,\r\n            \"fieldType\": \"string\",\r\n            \"mandatory\": false,\r\n            \"defaultValue\": \"displayValue\"\r\n            }\r\n            ]","schema_version":"1.0.0","sys_id":"11e9dad153131010c495ddeeff7b1283","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a6932bf304312210559073c06a02f796","value":"a6932bf304312210559073c06a02f796"},"sys_update_name":"sys_ux_data_broker_scriptlet_11e9dad153131010c495ddeeff7b1283","sys_updated_by":"admin","api_name":"global.Label ID/Value Scriptlet","sys_created_on":"2020-09-16 05:00:12","mutates_server_data":"false","name":"Label ID/Value Scriptlet","sys_name":"Label ID/Value Scriptlet","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"true","required_translations":"[{\"message\":\"Search Data\",\"comment\":\"\"},{\"message\":\"Regular Search Evam Metadata\",\"comment\":\"\"}]","batch_exclude":"false","sys_mod_count":"1","description":"","sys_updated_on":"2023-12-18 21:56:43","sys_tags":"","script":"function transform(input) {\n\tvar metadata = input.regularSearchEvamMetadata;\n\t\n\tvar searchResults = input.searchData.searchResults;\n\t\n\tif (!metadata) {\n\t\treturn {\n\t\t\tdata: searchResults,\n\t\t\ttemplate_predicates: []\n\t\t};\n\t}\n\n\tmetadata.template_predicates.forEach(function(predicate) {\n\t\tif (predicate.fields)\n\t\t\tpredicate.fields.push('ais_doc_id');\t\n\t});\n\n\treturn {\n\t\tdata: searchResults,\n\t\ttemplate_predicates: metadata.template_predicates\n\t};\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n     {\r\n        \"name\": \"regularSearchEvamMetadata\",\r\n        \"label\": \"Regular Search Evam Metadata\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"searchData\",\r\n        \"label\": \"Search Data\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","schema_version":"1.0.0","sys_id":"168c3c365bc82010e91728582d81c74d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_scriptlet_168c3c365bc82010e91728582d81c74d","sys_updated_by":"admin","api_name":"global.Build Search EVAM Input Data","sys_created_on":"2020-10-27 20:48:49","mutates_server_data":"false","name":"Build Search EVAM Input Data","sys_name":"Build Search EVAM Input Data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"true","required_translations":"","batch_exclude":"false","sys_mod_count":"3","description":"Returns the properties from GlideDomain_Query GraphQL responses.  Not exposed to UIB currently - only used in composite brokers.","sys_updated_on":"2024-04-19 15:19:08","sys_tags":"","script":"function transform(input) {\n\tvar envLogger = scriptlet;\t\n\t\n\tfunction _safelyGet(obj, dotPath) {\n\t\tif (typeof(obj) !== \"object\" || typeof(dotPath) !== \"string\") {\n\t\t\tenvLogger.print(\"Properties transform error: invalid input for path '\" + dotPath + \"' (type: \" + typeof(dotPath) + \")\");\n\t\t\treturn null;\n\t\t}\n\t\tvar foundProp = obj;\n\t\tvar path = dotPath.split(\".\");\n\t\tfor (var i = 0; i < path.length; i++) {\n\t\t\tif (!foundProp[path[i]]) \n\t\t\t\treturn null;\n\t\t\t\n\t\t\tfoundProp = foundProp[path[i]];\n\t\t}\n\t\treturn foundProp;\n\t}\n\t\n\tvar result = [];\n\t\n\tvar propertiesRecord = _safelyGet(input, \"query.data.GlideDomain_Query\");\n\tif (!propertiesRecord) {\n\t\tresult.push(\"Properties transform error: invalid input param. Expected property 'query.data.GlideDomain_Query'\");\n\t\treturn result;\n\t}\n\t\n\tfor (var key in propertiesRecord) {\n\t\tvar property = propertiesRecord[key];\n\t\tresult.push(property);\n\t}\t\n\t\n\treturn result.length == 1 ? result[0] : result;\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n    {\r\n        \"name\": \"query\",\r\n        \"label\": \"Query result\",\r\n        \"description\": \"Query result from GraphQL GlideRecord Query\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n       \"defaultValue\": \"\"\r\n    }\r\n]","schema_version":"1.0.0","sys_id":"2aeeed6153131010c495ddeeff7b1221","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a6932bf304312210559073c06a02f796","value":"a6932bf304312210559073c06a02f796"},"sys_update_name":"sys_ux_data_broker_scriptlet_2aeeed6153131010c495ddeeff7b1221","sys_updated_by":"admin","api_name":"global.GlideDomain Query Properties Scriptlet","sys_created_on":"2020-09-16 20:31:10","mutates_server_data":"false","name":"GlideDomain Query Properties Scriptlet","sys_name":"GlideDomain Query Properties Scriptlet","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"Items array from Multisource Get Data Sources Rest API\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"2","description":"Transform the \"Multisource Get All CI Classes\" REST API response into the js object that is expected for the sn-now-select with id, label, and sublabel props","sys_updated_on":"2023-09-12 23:55:33","sys_tags":"","script":"function transform(input) {\n\tvar items = input.items.result.map(function(o) {\n\t\treturn {\n\t\t\tid: o.value,\n\t\t\tlabel: o.name,\n\t\t\tsublabel: o.value\n\t\t};\n\t});\n\t\n\treturn items;\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[{\r\n\"name\": \"items\",\r\n\"label\": \"Items array from Multisource Get Data Sources Rest API\",\r\n\"description\": \"\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"object\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n}]","schema_version":"1.0.0","sys_id":"3303d33b777d111023651605bc5a993e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_scriptlet_3303d33b777d111023651605bc5a993e","sys_updated_by":"admin","api_name":"sn_cmdb_ws.Get All MS CI Classes Scriptlet - REST","sys_created_on":"2022-09-14 22:43:27","mutates_server_data":"false","name":"Get All MS CI Classes Scriptlet - REST","sys_name":"Get All MS CI Classes Scriptlet - REST","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"array of user preferences\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"34","description":"Convert array of user prefs to object.","sys_updated_on":"2023-09-12 23:55:33","sys_tags":"","script":"function transform(input) {\n\tvar prefsObj = {};\n\tinput.preferences.forEach(function(o) {\n\t\tprefsObj[o.name] = o.value;\n\t});\n\treturn prefsObj;\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[{\r\n    \"name\": \"preferences\",\r\n    \"label\": \"array of user preferences\",\r\n    \"description\": \"\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n}]","schema_version":"1.0.0","sys_id":"45f0ea4c77791110960ced43ba5a99cd","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_scriptlet_45f0ea4c77791110960ced43ba5a99cd","sys_updated_by":"admin","api_name":"sn_cmdb_ws.User prefs array to object","sys_created_on":"2022-09-03 03:52:41","mutates_server_data":"false","name":"User prefs array to object","sys_name":"User prefs array to object","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"false","required_translations":"[ ]","batch_exclude":"false","sys_mod_count":"0","description":"","sys_updated_on":"2021-12-01 10:54:54","sys_tags":"","script":"function transform(input) {\n\treturn gs.getSession().getUser().getDateFormat();\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"","schema_version":"1.0.0","sys_id":"4800ba9f53000110a487ddeeff7b12f4","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7e3c2481539260100c54ddeeff7b127b","value":"7e3c2481539260100c54ddeeff7b127b"},"sys_update_name":"sys_ux_data_broker_scriptlet_4800ba9f53000110a487ddeeff7b12f4","sys_updated_by":"admin","api_name":"sn_sow_on_call.Fetch Current User Date Format","sys_created_on":"2021-12-01 10:54:54","mutates_server_data":"false","name":"Fetch Current User Date Format","sys_name":"Fetch Current User Date Format","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7e3c2481539260100c54ddeeff7b127b","value":"7e3c2481539260100c54ddeeff7b127b"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"true","required_translations":"","batch_exclude":"false","sys_mod_count":"6","description":"Returns the _results property from the GlideRecord_Query GraphQL response.  Not exposed to UIB currently - only used in composite brokers.","sys_updated_on":"2024-04-19 15:19:08","sys_tags":"","script":"function transform(input) {\n\tvar envLogger = scriptlet;\t\n\t\n\t// depth first search for _results array field\n\tfunction _recursFindKey(obj, key) {\n\t\tif (typeof(obj) !== \"object\" || typeof(key) !== \"string\") {\n\t\t\tenvLogger.print(\"Get Results transform error: invalid input for property \" + key + \" (type: \" + typeof(key) + \")\");\n\t\t\treturn null;\n\t\t}\n\t\tfor (var k in obj) {\n\t\t\tif (k == key) \n\t\t\t\treturn obj[k];\n\t\t\t\n\t\t\tvar child = obj[k];\n\t\t\tif (typeof(child) !== 'object')\n\t\t\t\tcontinue;\n\t\t\t\n\t\t\tvar result = _recursFindKey(child, key);\n\t\t\tif (result != null)\n\t\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\t\n\tvar results = _recursFindKey(input.query, \"_results\");\n\tif (!results)\n\t\treturn [ \"Get Results transform error: invalid input param. Expected to find property '_results'\" ];\n\t\n\t// un pack first item if array length == 1\n\tif (results.length == 1 && input.first == true) {\n\t\tvar result = results[0];\n\t\tvar tableMetadata = _recursFindKey(input.query, \"_table_metadata\");\n\t\tif (tableMetadata)\n\t\t\tresult[\"_table_metadata\"] = tableMetadata;\n\t\treturn result;\n\t}\n\t\n\treturn results;\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n    {\r\n        \"name\": \"query\",\r\n        \"label\": \"Query result\",\r\n        \"description\": \"Query result from GraphQL GlideRecord Query\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n       \"defaultValue\": \"\"\r\n    },\r\n    {\r\n        \"name\": \"first\",\r\n        \"label\": \"First\",\r\n        \"description\": \"Take the first item from arrays of length 1\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"boolean\",\r\n        \"mandatory\": true,\r\n       \"defaultValue\": true\r\n    }\r\n]","schema_version":"1.0.0","sys_id":"49595ad153131010c495ddeeff7b1225","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a6932bf304312210559073c06a02f796","value":"a6932bf304312210559073c06a02f796"},"sys_update_name":"sys_ux_data_broker_scriptlet_49595ad153131010c495ddeeff7b1225","sys_updated_by":"admin","api_name":"global.GlideRecord Query Results Scriptlet","sys_created_on":"2020-09-16 04:57:15","mutates_server_data":"false","name":"GlideRecord Query Results Scriptlet","sys_name":"GlideRecord Query Results Scriptlet","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"true","required_translations":"","batch_exclude":"false","sys_mod_count":"8","description":"Returns the preferences from GlideDomain_Query GraphQL responses.  Not exposed to UIB currently - only used in composite brokers.","sys_updated_on":"2024-04-19 15:19:08","sys_tags":"","script":"function transform(input) {\n\tvar envLogger = scriptlet;\t\n\t\n\tfunction _safelyGet(obj, dotPath) {\n\t\tif (typeof(obj) !== \"object\" || typeof(dotPath) !== \"string\") {\n\t\t\tenvLogger.print(\"Properties transform error: invalid input for path '\" + dotPath + \"' (type: \" + typeof(dotPath) + \")\");\n\t\t\treturn null;\n\t\t}\n\t\tvar foundProp = obj;\n\t\tvar path = dotPath.split(\".\");\n\t\tfor (var i = 0; i < path.length; i++) {\n\t\t\tif (!foundProp[path[i]]) \n\t\t\t\treturn null;\n\t\t\t\n\t\t\tfoundProp = foundProp[path[i]];\n\t\t}\n\t\treturn foundProp;\n\t}\n\t\n\tvar result = {};\n\t\n\tvar userRecord = _safelyGet(input, \"query.data.GlideDomain_Query.user\");\n\tif (!userRecord) {\n\t\tresult.push(\"Preferences transform error: invalid input param. Expected property 'query.data.GlideDomain_Query.user'\");\n\t\treturn result;\n\t}\n\t\n\tfor (var key in userRecord) {\n\t\tvar val = userRecord[key];\n\t\t// weird scenario - GraphQL GlideDomain for user preferences can \n\t\t// return a size 1 array that's effectively empty\n\t\tif (key == \"preferences\" && val && val.length == 1 && val[0].name == \"\")\n\t\t\tval = [];\n\t\t\n\t\tresult[key] = val;\n\t}\t\n\t\n\treturn result;\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n    {\r\n        \"name\": \"query\",\r\n        \"label\": \"Query result\",\r\n        \"description\": \"Query result from GraphQL GlideRecord Query\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n       \"defaultValue\": \"\"\r\n    }\r\n]","schema_version":"1.0.0","sys_id":"4d8667b353131010c495ddeeff7b125f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a6932bf304312210559073c06a02f796","value":"a6932bf304312210559073c06a02f796"},"sys_update_name":"sys_ux_data_broker_scriptlet_4d8667b353131010c495ddeeff7b125f","sys_updated_by":"admin","api_name":"global.GlideDomain Query Preferences Scriptlet","sys_created_on":"2020-09-24 04:58:01","mutates_server_data":"false","name":"GlideDomain Query Preferences Scriptlet","sys_name":"GlideDomain Query Preferences Scriptlet","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Items array from Data Manager Get Related Entry Tables REST\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"6","description":"Transform the \"Data Manager Get Related Entry Tables - REST\" REST API response into the js object that is expected for the sn-now-select with id, label, and sublabel props","sys_updated_on":"2023-09-29 22:56:35","sys_tags":"","script":"function transform(input) {\n\tvar items = input.items.map(function(o) {\n\t\treturn {\n\t\t\tid: o.tableName,\n\t\t\tlabel: o.tableLabel,\n\t\t\tsublabel: o.tableName\n\t\t};\n\t});\n\t\n\treturn items;\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[{\r\n\"name\": \"items\",\r\n\"label\": \"Items array from Data Manager Get Related Entry Tables REST\",\r\n\"description\": \"\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"object\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n}]","schema_version":"1.0.0","sys_id":"4f8c0cdeeb2d35100c0bb5d5d8522838","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_scriptlet_4f8c0cdeeb2d35100c0bb5d5d8522838","sys_updated_by":"maint","api_name":"sn_cmdb_ws.Transform related entry table","sys_created_on":"2023-09-29 22:31:52","mutates_server_data":"false","name":"Transform related entry table","sys_name":"Transform related entry table","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"output_schema":"","sys_created_by":"maint","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"Items array from Get All Classes Rest API\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"13","description":"Transform the \"Get all CMDB CI classes\" REST API response into the js object that is expected for the sn-now-select with id, label, and sublabel props","sys_updated_on":"2023-09-12 23:55:33","sys_tags":"","script":"function transform(input) {\n\tvar items = input.items.result.map(function(o) {\n\t\treturn {\n\t\t\tid: o.ci_type,\n\t\t\tlabel: o.ci_type_label,\n\t\t\tsublabel: o.ci_type\n\t\t};\n\t});\n\t\n\treturn items;\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[{\r\n\"name\": \"items\",\r\n\"label\": \"Items array from Get All Classes Rest API\",\r\n\"description\": \"\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"object\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n}]","schema_version":"1.0.0","sys_id":"5267e8a98fccf010960c53ac37bdee14","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_scriptlet_5267e8a98fccf010960c53ac37bdee14","sys_updated_by":"admin","api_name":"sn_cmdb_ws.Get All CI Classes Scriptlet - REST","sys_created_on":"2021-05-10 18:16:01","mutates_server_data":"false","name":"Get All CI Classes Scriptlet - REST","sys_name":"Get All CI Classes Scriptlet - REST","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"Items array with id and label props already present\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"5","description":"(further) transform the output of the \"Data Driven Items\" transform and augment it with an additional \"sublabel\" property","sys_updated_on":"2023-09-12 23:55:33","sys_tags":"","script":"function transform(input) {\n\treturn input.items.items.map(function(o) {\n\t\treturn {\n\t\t\tid: o.id,\n\t\t\tlabel: o.label,\n\t\t\tsublabel: o.id\n\t\t};\n\t});\n\t\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[{\r\n\"name\": \"items\",\r\n\"label\": \"Items array with id and label props already present\",\r\n\"description\": \"\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"object\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n}]","schema_version":"1.0.0","sys_id":"5275a4698fccf010960c53ac37bdeee9","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_scriptlet_5275a4698fccf010960c53ac37bdeee9","sys_updated_by":"admin","api_name":"sn_cmdb_ws.Get All CI Classes Scriptlet - DataDrivenItems","sys_created_on":"2021-05-10 18:07:17","mutates_server_data":"false","name":"Get All CI Classes Scriptlet - DataDrivenItems","sys_name":"Get All CI Classes Scriptlet - DataDrivenItems","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"Tree Picker GraphQL Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"3","description":"Build tree picker Config and domain id from the graphql response","sys_updated_on":"2022-04-09 15:46:02","sys_tags":"","script":"function transform(input) {\n\tvar domainSep = input.graphqlData.data.GlideLayout_Query.formLayout.domainSeparation;\n    return ({\n        treePickerConfig: input.graphqlData.data.GlideLayout_Query.treePickerConfigQuery.treePicker,\n        domainId: domainSep ? domainSep.domainId : null\n    });\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n {\r\n                \"name\": \"graphqlData\",\r\n                \"label\": \"Tree Picker GraphQL Data\",\r\n                \"description\": \"\",\r\n                \"readOnly\": false,\r\n                \"fieldType\": \"object\",\r\n                \"mandatory\": true,\r\n                \"defaultValue\": {}\r\n      }\r\n]","schema_version":"1.0.0","sys_id":"54453cbfeb968110f7e105a3a25228b4","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f39caf7b04352210559073c06a02f73f","value":"f39caf7b04352210559073c06a02f73f"},"sys_update_name":"sys_ux_data_broker_scriptlet_54453cbfeb968110f7e105a3a25228b4","sys_updated_by":"admin","api_name":"global.Build Reference Search Tree Picker","sys_created_on":"2022-03-24 11:34:39","mutates_server_data":"false","name":"Build Reference Search Tree Picker","sys_name":"Build Reference Search Tree Picker","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"List of Regular Search Results from Search GQL API response\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Search Results\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"9","description":"","sys_updated_on":"2024-11-20 16:43:25","sys_tags":"","script":"function transform(input) {\n    var searchResults = input.searchResults;\n    if (!searchResults) {\n        gs.error('No search results input provided to \"Transform Search Response to EVAM Format\" data broker - returning empty list');\n        return {\n            searchResults: []\n        };\n    }\n    var transformedSearchResults = searchResults.map(function(result) {\n        var columns = [];\n        if (result.columns) {\n            columns = result.columns.map(function(column) {\n                return {\n                    fieldName: column.fieldName,\n                    value: column.displayValue\n                };\n            });\n        }\n        columns.push({\n            fieldName: 'ais_doc_id',\n            value: result.aisDocId\n        });\n        columns.push({\n            fieldName: 'ai_search_teaser_title',\n            value: result.title\n        });\n        columns.push({\n            fieldName: 'ai_search_teaser_text',\n            value: result.text\n        });\n        columns.push({\n            fieldName: 'document_index',\n            value: result.documentIndex\n        });\n        columns.push({\n            fieldName: 'navigation_url',\n            value: result.url\n        });\n        columns.push({\n            fieldName: 'record_class_name',\n            value: result.recordClassName\n        });\n        columns.push({\n            fieldName: 'table_label_singular',\n            value: result.tableLabelSingular\n        });\n        columns.push({\n            fieldName: 'table_label_plural',\n            value: result.tableLabelPlural\n        });\n        columns.push({\n            fieldName: 'child_docs',\n            value: result.childDocs\n        });\n        columns.push({\n            fieldName: 'semantic_embedding',\n            value: result.semanticEmbedding\n        });\n        columns.push({\n            fieldName: 'semantic_similarity',\n            value: result.semanticSimilarity\n        });\n\n        return {\n            sys_id: result.sysId,\n            table: result.table,\n            columns: columns\n        };\n    });\n\n    return {\n        searchResults: transformedSearchResults\n    };\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n    {\r\n        \"name\": \"searchResults\",\r\n        \"label\": \"Search Results\",\r\n        \"description\": \"List of Regular Search Results from Search GQL API response\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","schema_version":"1.0.0","sys_id":"5b6db0765bc82010e91728582d81c798","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_scriptlet_5b6db0765bc82010e91728582d81c798","sys_updated_by":"admin","api_name":"global.Transform Search Response to EVAM Format","sys_created_on":"2020-10-27 20:52:59","mutates_server_data":"false","name":"Transform Search Response to EVAM Format","sys_name":"Transform Search Response to EVAM Format","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Table\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Table name\",\n  \"comment\" : \"\"\n}]","batch_exclude":"false","sys_mod_count":"3","description":"","sys_updated_on":"2024-05-08 17:17:50","sys_tags":"","script":"function transform(input) {\n\t  var extraParamsProp = {};\n\n    if (input.inputExtraParams) {\n        var propsArray = input.inputExtraParams.split(\"/\");\n        for (var i = 0; i < propsArray.length; i += 2) {\n            extraParamsProp[propsArray[i]] = propsArray[i + 1];\n        }\n    }\n\t\n\tvar preferences = [ \"workspace.layout.type.\",\n\t\t\t\"workspace.layout.form_ratio.\",\n\t\t\t\"workspace.layout.sidebar_ratio.\",\n\t\t\t\"workspace.layout.section.\"];\n\t\tvar prefOutput = [];\n\t\tpreferences.forEach(function(preference){\n\t\t\tprefOutput.push(preference + input.table);\n\t\t});\t\n\t\tprefOutput.push(\"personalize_\" + input.table + \"_\" + input.view);\n\n    var override = input.overrideAppContextConfigIds === true;\n    var actionConfigId = override ? input.overrideActionConfigId : input.actionConfigId;\n    var headerConfigId = override ? input.overrideHeaderConfigId : input.headerConfigId;\n    var highlightedValueConfigId = override ? input.overrideHighlightedValueConfigId : input.highlightedValueConfigId;\n    var ribbonConfigId = override ? input.overrideRibbonConfigId : input.ribbonConfigId;\n    var viewRuleConfigId = override ? input.overrideViewRuleConfigId : input.viewRuleConfigId;\n\n    return { \n      prefOutput: prefOutput,\n      extraParamsProp: extraParamsProp,\n      config: {\n        actionConfigId: actionConfigId,\n        headerConfigId: headerConfigId,\n        highlightedValueConfigId: highlightedValueConfigId,\n        ribbonConfigId: ribbonConfigId,\n        viewRuleConfigId: viewRuleConfigId\n      }\n    };\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\n  {\n    \"name\": \"table\",\n    \"label\": \"Table\",\n    \"description\": \"Table name\",\n    \"readOnly\": false,\n    \"fieldType\": \"string\",\n    \"mandatory\": true,\n    \"defaultValue\": \"\"\n  },\n  {\n    \"defaultValue\": \"default view\",\n    \"description\": \"Specify view that it should try to resolve to\",\n    \"fieldType\": \"string\",\n    \"label\": \"View\",\n    \"mandatory\": false,\n    \"name\": \"view\",\n    \"readOnly\": false,\n    \"selectable\": false,\n    \"valueType\": \"string\"\n    },\n  {\n    \"defaultValue\": \"\",\n    \"description\": null,\n    \"fieldType\": \"string\",\n    \"label\": \"Extra params\",\n    \"mandatory\": false,\n    \"name\": \"inputExtraParams\",\n    \"readOnly\": false,\n    \"selectable\": false,\n    \"valueType\": \"string\"\n  },\n  {\n    \"defaultValue\": \"\",\n    \"description\": null,\n    \"fieldType\": \"string\",\n    \"label\": \"Action Confid Id\",\n    \"mandatory\": false,\n    \"name\": \"actionConfigId\",\n    \"readOnly\": false,\n    \"selectable\": false,\n    \"valueType\": \"string\"\n  },\n  {\n    \"defaultValue\": \"\",\n    \"description\": null,\n    \"fieldType\": \"string\",\n    \"label\": \"Header Config Id\",\n    \"mandatory\": false,\n    \"name\": \"headerConfigId\",\n    \"readOnly\": false,\n    \"selectable\": false\n  },\n  {\n    \"defaultValue\": \"\",\n    \"description\": null,\n    \"fieldType\": \"json\",\n    \"label\": \"Highlighted Values Config Id\",\n    \"mandatory\": false,\n    \"name\": \"highlightedValueConfigId\",\n    \"readOnly\": false,\n    \"selectable\": false\n  },\n  {\n    \"defaultValue\": \"\",\n    \"description\": null,\n    \"fieldType\": \"string\",\n    \"label\": \"Ribbon Config Id\",\n    \"mandatory\": false,\n    \"name\": \"ribbonConfigId\",\n    \"readOnly\": false,\n    \"selectable\": false\n  },\n  {\n    \"defaultValue\": \"\",\n    \"description\": null,\n    \"fieldType\": \"string\",\n    \"label\": \"View Rule Confid Id\",\n    \"mandatory\": false,\n    \"name\": \"viewRuleConfigId\",\n    \"readOnly\": false,\n    \"selectable\": false,\n    \"valueType\": \"string\"\n  },\n  {\n    \"defaultValue\": \"\",\n    \"description\": null,\n    \"fieldType\": \"string\",\n    \"label\": \"Override Action Confid Id\",\n    \"mandatory\": false,\n    \"name\": \"overrideActionConfigId\",\n    \"readOnly\": false,\n    \"selectable\": false,\n    \"valueType\": \"string\"\n  },\n  {\n    \"defaultValue\": \"\",\n    \"description\": null,\n    \"fieldType\": \"string\",\n    \"label\": \"Override Header Config Id\",\n    \"mandatory\": false,\n    \"name\": \"overrideHeaderConfigId\",\n    \"readOnly\": false,\n    \"selectable\": false\n  },\n  {\n    \"defaultValue\": \"\",\n    \"description\": null,\n    \"fieldType\": \"json\",\n    \"label\": \"Override Highlighted Values Config Id\",\n    \"mandatory\": false,\n    \"name\": \"overrideHighlightedValueConfigId\",\n    \"readOnly\": false,\n    \"selectable\": false\n  },\n  {\n    \"defaultValue\": \"\",\n    \"description\": null,\n    \"fieldType\": \"string\",\n    \"label\": \"Override Ribbon Config Id\",\n    \"mandatory\": false,\n    \"name\": \"overrideRibbonConfigId\",\n    \"readOnly\": false,\n    \"selectable\": false\n  },\n  {\n    \"defaultValue\": \"\",\n    \"description\": null,\n    \"fieldType\": \"string\",\n    \"label\": \"Override View Rule Confid Id\",\n    \"mandatory\": false,\n    \"name\": \"overrideViewRuleConfigId\",\n    \"readOnly\": false,\n    \"selectable\": false,\n    \"valueType\": \"string\"\n  },\n  {\n    \"defaultValue\": false,\n    \"description\": \"If true, use controller props for specifying headerConfigId, actionConfigId, and all those guys\",\n    \"disabled\": false,\n    \"fieldType\": \"boolean\",\n    \"label\": \"Override App Context Configuration Ids\",\n    \"mandatory\": false,\n    \"name\": \"overrideAppContextConfigIds\",\n    \"readOnly\": false,\n    \"selectable\": false\n  }\n]","schema_version":"1.0.0","sys_id":"71041606a3400210df7a2a56041e615f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/6d940d54d63c3f847df337e8f4e0d712","value":"6d940d54d63c3f847df337e8f4e0d712"},"sys_update_name":"sys_ux_data_broker_scriptlet_71041606a3400210df7a2a56041e615f","sys_updated_by":"admin","api_name":"global.Record page - transform data broker inputs","sys_created_on":"2024-04-30 04:23:50","mutates_server_data":"false","name":"Record page - transform data broker inputs","sys_name":"Record page - transform preferences","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/6d940d54d63c3f847df337e8f4e0d712","value":"6d940d54d63c3f847df337e8f4e0d712"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Concourse picker API data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"5","description":"Generate current scope object from concourse picker API","sys_updated_on":"2022-04-28 15:23:43","sys_tags":"","script":"function transform(input) {\n    var list = input.concoursepickerData.result.list;\n    var currentScope = input.concoursepickerData.result.current || \"global\";\n    var scopes = list.map(function(scope) {\n        var scopeObj = scope;\n        scopeObj.id = scope.sysId;\n        scopeObj.label = scope.name;\n        return scopeObj;\n    });\n    var userScope = scopes.filter(function(s) {\n        return s.id === currentScope;\n    });\n\n    return {\n        allScopes: scopes,\n        scope: userScope.length ? userScope[0] : {},\n    };\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[{\n    \"name\": \"concoursepickerData\",\n    \"label\": \"Concourse picker API data\",\n    \"description\": \"\",\n    \"readOnly\": false,\n    \"fieldType\": \"object\",\n    \"mandatory\": false,\n    \"defaultValue\": \"\"\n}]","schema_version":"1.0.0","sys_id":"8a9809cb534341106c4bddeeff7b1269","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f53f19bac362fa22ca2e93692d32f18f","value":"f53f19bac362fa22ca2e93692d32f18f"},"sys_update_name":"sys_ux_data_broker_scriptlet_8a9809cb534341106c4bddeeff7b1269","sys_updated_by":"admin","api_name":"sn_table_builder.Generate current scope object","sys_created_on":"2022-04-28 11:50:56","mutates_server_data":"false","name":"Generate current scope object","sys_name":"Generate current scope object","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/f53f19bac362fa22ca2e93692d32f18f","value":"f53f19bac362fa22ca2e93692d32f18f"},"output_schema":"","sys_created_by":"admin","sys_policy":"read"},{"private":"true","required_translations":"[ {\n  \"message\" : \"Items array from Multisource Get Data Sources Rest API\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"4","description":"Transform the \"Multisource Get Data Sources\" REST API response into the js object that is expected for the sn-now-select with id, label, and sublabel props","sys_updated_on":"2023-09-12 23:55:33","sys_tags":"","script":"function transform(input) {\n\tvar items = input.items.result.map(function(o) {\n\t\treturn {\n\t\t\tid: o.value,\n\t\t\tlabel: o.label\n\t\t};\n\t});\n\t\n\treturn items;\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[{\r\n\"name\": \"items\",\r\n\"label\": \"Items array from Multisource Get Data Sources Rest API\",\r\n\"description\": \"\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"object\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n}]","schema_version":"1.0.0","sys_id":"9dc3a37577f5111023651605bc5a9904","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_scriptlet_9dc3a37577f5111023651605bc5a9904","sys_updated_by":"admin","api_name":"sn_cmdb_ws.Get All MS Data Sources Scriptlet - REST","sys_created_on":"2022-09-08 18:48:36","mutates_server_data":"false","name":"Get All MS Data Sources Scriptlet - REST","sys_name":"Get All MS Data Sources Scriptlet - REST","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"true","required_translations":"[ {\n  \"message\" : \"Search Query Response\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"View All Link Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"20","description":"Use the Transform version instead of this Scriptlet version - Transform SysID: 3657e6665bef1110d9a5ce1a8581c7e0","sys_updated_on":"2022-12-06 22:25:52","sys_tags":"","script":"function transform(input) {\n    var searchResponse =\n        input\n        .searchQueryResponse\n        .data\n        .GlideSearch_Query;\n\n    if (!searchResponse) {\n        return null;\n    }\n\n    var searchResultMetadata = {\n        searchTerm: searchResponse.search.term,\n        correctedSearchTerm: searchResponse.search.spellCorrectedTerm,\n        count: searchResponse.search.count,\n        previousPageToken: searchResponse.search.previousPaginationToken,\n        nextPageToken: searchResponse.search.nextPaginationToken,\n        currentPage: searchResponse.search.currentPage,\n        matchedQueryIntents: searchResponse.search.matchedQueryIntents,\n        matchedGeniusResultIntents: searchResponse.search.matchedGeniusResultIntents,\n        responseTimeInMs: searchResponse.search.responseTimeInMs,\n        queryLanguage: searchResponse.search.queryLanguage,\n        searchAnalyticsPayload: searchResponse.search.searchAnalyticsPayload\n    };\n\n    var filters = searchResponse.filters;\n    var sortOptions = searchResponse.sortOptions;\n    var appliedFacetFilters = searchResponse.search.appliedFacetFilters;\n    var selectedFilterIds = searchResponse.search.selectedFilterIds;\n    var selectedSortOptionIds = searchResponse.search.selectedSortOptionIds;\n    var searchFacets = searchResponse.search.searchFacets;\n\n    return {\n        viewAllLinkData: input.viewAllLinkData,\n        filters: filters,\n        sortOptions: sortOptions,\n        appliedFacetFilters: appliedFacetFilters,\n        selectedFilterIds: selectedFilterIds,\n        selectedSortOptionIds: selectedSortOptionIds,\n        searchFacets: searchFacets,\n        searchResultMetadata: searchResultMetadata\n    };\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n  {\r\n    \"name\": \"searchQueryResponse\",\r\n    \"label\": \"Search Query Response\",\r\n    \"description\": \"\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  },\r\n  {\r\n    \"name\": \"viewAllLinkData\",\r\n    \"label\": \"View All Link Data\",\r\n    \"description\": \"\",\r\n    \"readOnly\": false,\r\n    \"fieldType\": \"object\",\r\n    \"mandatory\": true,\r\n    \"defaultValue\": \"\"\r\n  }\r\n]","schema_version":"1.0.0","sys_id":"b62d30765bc82010e91728582d81c745","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_scriptlet_b62d30765bc82010e91728582d81c745","sys_updated_by":"admin","api_name":"global.[DEPRICATED] Search Metadata Transform","sys_created_on":"2020-10-27 20:51:38","mutates_server_data":"false","name":"[DEPRICATED] Search Metadata Transform","sys_name":"[DEPRICATED] Search Metadata Transform","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"false","required_translations":"","batch_exclude":"false","sys_mod_count":"3","description":"","sys_updated_on":"2024-04-19 15:19:08","sys_tags":"","script":"function transform(input) {\n\tfunction itemTransform(item, index) {\n\t\treturn {\n\t\t\troute: \"related_list\",\n\t\t\tfields: {\n\t\t\t\ttitle: item.displayLabel,\n\t\t\t\ttable: item.targetTable,\n\t\t\t\tfilter: item.filter\n\t\t\t},\n\t\t\tlabel: item.displayLabel + \" - \" + item.count\n\t\t};\n\t}\n\t\n\treturn input\n\t\t.graphqlData\n\t\t.data.GlideLayout_Query.formLayout.relatedLists\n\t\t.map(itemTransform);\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n{\r\n  \"name\": \"graphqlData\",\r\n  \"label\": \"GraphQL Data\",\r\n  \"description\": \"\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"object\",\r\n  \"mandatory\": true,\r\n  \"defaultValue\": \"\"\r\n}\r\n]","schema_version":"1.0.0","sys_id":"bcf77ab053df10108135ddeeff7b1240","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/94f3f2785775458d5e94675757cc3777","value":"94f3f2785775458d5e94675757cc3777"},"sys_update_name":"sys_ux_data_broker_scriptlet_bcf77ab053df10108135ddeeff7b1240","sys_updated_by":"admin","api_name":"sn_form_controls.Related Lists - Get Routes","sys_created_on":"2020-09-14 17:53:38","mutates_server_data":"false","name":"Related Lists - Get Routes","sys_name":"Related Lists - Get Routes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/94f3f2785775458d5e94675757cc3777","value":"94f3f2785775458d5e94675757cc3777"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"GraphQL Data\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"35","description":"Filters style results from GQL broker to only retrieve variants","sys_updated_on":"2021-08-04 20:30:32","sys_tags":"","script":"function transform(input) {\n    /**!\n    * @name get\n    * @description Gets the value at path of object. If the resolved value is undefined,\n    *  the defaultValue is returned in its place.\n    *\n    * @param {Object} object The object to query.\n    * @param {Array|string} path The path of the property to get.\n    * @param {*} [value] The default value returned for `undefined` resolved values.\n    * @returns {*} Returns the resolved value.\n    *\n    */\n    var get = function (object, path, value) {\n        var pathArray;\n\n        // If path is not defined or it has false value\n        if (!path) return undefined;\n\n        // Check if path is string or array. Regex : ensure that we do not have '.' and brackets\n        pathArray = Array.isArray(path) ?\n            path :\n            path.split(/[,[\\].]/g).filter(Boolean);\n\n        // Find value if exist return otherwise return undefined value;\n        var pathResult = pathArray.reduce(function (prevObj, key) {\n                return prevObj && prevObj[key];\n        }, object);\n\n        return pathResult === undefined ?  value : pathResult;\n    };\n\n\tvar result = [];\n    var styles = get(input, \"graphqlData.data.GlideRecord_Query.sys_ux_app._results.0._query.GlideRecord_Query.m2m_theme_style._results\", undefined);\n\t\n\tif(!styles) return result;\n\t\n\tfor(var j = 0; j < styles.length; j ++) {\n\t\tvar style = get(styles[j], \"_query.GlideRecord_Query.sys_ux_style._results.0\", null);\n\t\t\n\t\tif(!style) continue;\n\t\t\n\t\tif(style.type.value == \"variant\") {\n\t\t\tresult.push({ name: style.name.value, type: style.type.value, sys_id: style.sys_id.value});\n\t\t}\n\t}\n\treturn result;\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n    {\r\n        \"name\": \"graphqlData\",\r\n        \"label\": \"GraphQL Data\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","schema_version":"1.0.0","sys_id":"c5d27a92b75530101cb3d2a8ae11a907","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f193e7f304312210559073c06a02f725","value":"f193e7f304312210559073c06a02f725"},"sys_update_name":"sys_ux_data_broker_scriptlet_c5d27a92b75530101cb3d2a8ae11a907","sys_updated_by":"admin","api_name":"global.Filter Styles For Variants","sys_created_on":"2021-07-14 15:41:52","mutates_server_data":"false","name":"Filter Styles For Variants","sys_name":"Filter Styles For Variants","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"false","required_translations":"","batch_exclude":"false","sys_mod_count":"12","description":"Client scripts will use element_id and their payload.table to navigate the tree created by this transform.","sys_updated_on":"2020-10-09 02:39:52","sys_tags":"","script":"function transform(input) {\n    // Get the route maps from the associated route config\n    function getMapping(mappingGroup, resultMap) {\n        var mappings = mappingGroup.mappings;\n\t\tvar table = mappingGroup.table;\n\t\t\n\t\t// there has to be a table (null value for default) and a payload to map to.\n\t\tif (!table || !mappings)\n\t\t\treturn '';\n\t\t\n        mappings.forEach(function(mapping) {\n            var map = {};\n\t\t\tvar source_component = mapping.source_key;\n\t\t\tvar payload = mapping.payload;\n\t\t\t\n            // If there is a table value passed in, build a map object that has the table's name as key,\n            // and payload under it.\n\t\t\tmap[source_component] = {\n                payload: mapping.payload,\n            };\n\n            // Now add the table map, or default payload to the source_component (matches elementId in event) \n            // object. \n            // If the elementId object already exists, add to it to support multiple table definitions; otherwise create it.\n            if (resultMap[table])\n                resultMap[table][source_component] = map[source_component];\n            else resultMap[table] = map;\n        });\n        return resultMap;\n    }\n\n    // Get the route configs from the associated query\n    function getConfig(gql) {\n        var result = {};\n        var mappingGroups = gql.data.GlideUxDynamicRoute_Query.dynamicRouteConfig.mappingGroups;\n\n        // Handle multiple config records if there are any passed in.\n        mappingGroups.forEach(function(mappingGroup) {\n            result = getMapping(mappingGroup, result);\n\t\t});\n        return result;\n    }\n    // Return the filled out route map for client scripts to use.\n\tif(input.gqlData) \n\t\treturn getConfig(input.gqlData);\n\t\n\treturn noop;\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\n  {\n    \"name\": \"gqlData\",\n    \"label\": \"GraphQL Data\",\n    \"description\": \"Takes the contents from the route config db, and formats to use in UIB client scripts\",\n    \"readOnly\": false,\n    \"fieldType\": \"object\",\n    \"defaultValue\": \"\"\n  }\n]","schema_version":"1.0.0","sys_id":"d050b527b7131010fddc6c91de11a9bb","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/71faafff04f12210559073c06a02f7a2","value":"71faafff04f12210559073c06a02f7a2"},"sys_update_name":"sys_ux_data_broker_scriptlet_d050b527b7131010fddc6c91de11a9bb","sys_updated_by":"admin","api_name":"global.Build route map","sys_created_on":"2020-09-23 01:43:44","mutates_server_data":"false","name":"Build route map","sys_name":"Build route map","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"Any client state variable that changes to force a navigate\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"Can be any client state variable that when it changes will force a navigation to CI Search results page.\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"3","description":"This data broker is just used to watch client state and then trigger the \"Edit to destination\" handler which will be attached to it. That handler does not work when used directly as it fires before all other handlers regardless of order. By adding this indirect mechanism to add the \"link the destination\" handler, it fires after other handlers are completed. The \"link to destination\" handler firing first when it's last is a UXF bug","sys_updated_on":"2023-09-12 23:55:33","sys_tags":"","script":"function transform(input) { \n\treturn {\n\t\tdummyStateThatChangesToForceANavigation: input.state\n\t};\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n  {\r\n  \"name\": \"state\",\r\n  \"label\": \"Any client state variable that changes to force a navigate\",\r\n  \"description\": \"Can be any client state variable that when it changes will force a navigation to CI Search results page.\",\r\n  \"readOnly\": false,\r\n  \"fieldType\": \"string\",\r\n  \"mandatory\": true\r\n}\r\n]","schema_version":"1.0.0","sys_id":"d2167e148f607010960c53ac37bdeecf","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_scriptlet_d2167e148f607010960c53ac37bdeecf","sys_updated_by":"admin","api_name":"sn_cmdb_ws.Dummy Data Broker","sys_created_on":"2021-06-01 04:04:15","mutates_server_data":"false","name":"Dummy Data Broker","sys_name":"Dummy Data Broker","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"true","required_translations":"[{\"message\":\"GraphQL Metadata Response\",\"comment\":\"\"}]","batch_exclude":"false","sys_mod_count":"2","description":"","sys_updated_on":"2023-12-01 22:13:31","sys_tags":"","script":"function transform(input) {\n\tvar metadata = input\n\t\t.graphqlData\n\t\t.data\n\t\t.GlideCompositeDataMetadata_Query\n\t\t.getMetadata;\n\tif (!metadata) {\n\t\treturn {};\n\t}\n\t\n\tvar geniusSearchDataSources =\n\t\tmetadata\n\t\t\t.datasources\n\t\t\t.filter(function(source) {\n\t\t\t\treturn source.table === 'v_search_genius_result';\n\t\t\t});\n\tvar regularSearchPredicates = [];\n\tvar geniusSearchPredicates = [];\n\t\n\tmetadata\n\t\t.template_predicates\n\t\t.forEach(function(predicate) {\n\t\t\tif (predicate.table === 'v_search_genius_result') {\n\t\t\t\tgeniusSearchPredicates.push(predicate);\n\t\t\t} else {\n\t\t\t\tregularSearchPredicates.push(predicate);\n\t\t\t}\n\t\t});\n\t\n\treturn {\n\t\tregularSearchEvamMetadata: {\n\t\t\tdatasources: [],\n\t\t\ttemplate_predicates: regularSearchPredicates,\n\t\t\tfilters: []\n\t\t},\n\t\tgeniusSearchEvamMetadata: {\n\t\t\tdatasources: geniusSearchDataSources,\n\t\t\ttemplate_predicates: geniusSearchPredicates,\n\t\t\tfilters: []\n\t\t}\n\t};\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n    {\r\n        \"name\": \"graphqlData\",\r\n        \"label\": \"GraphQL Metadata Response\",\r\n        \"description\": \"\",\r\n        \"readOnly\": false,\r\n        \"fieldType\": \"object\",\r\n        \"mandatory\": true,\r\n        \"defaultValue\": \"\"\r\n    }\r\n]","schema_version":"1.0.0","sys_id":"dd4db0765bc82010e91728582d81c779","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0a99ab7b04f12210559073c06a02f746","value":"0a99ab7b04f12210559073c06a02f746"},"sys_update_name":"sys_ux_data_broker_scriptlet_dd4db0765bc82010e91728582d81c779","sys_updated_by":"admin","api_name":"global.Split Regular and Genius Search EVAM Metadata","sys_created_on":"2020-10-27 20:52:18","mutates_server_data":"false","name":"Split Regular and Genius Search EVAM Metadata","sys_name":"Split Regular and Genius Search EVAM Metadata","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"output_schema":"","sys_created_by":"admin","sys_policy":""},{"private":"false","required_translations":"[ {\n  \"message\" : \"completenessScore\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"complianceScore\",\n  \"comment\" : \"\"\n}, {\n  \"message\" : \"correctnessScore\",\n  \"comment\" : \"\"\n} ]","batch_exclude":"false","sys_mod_count":"47","description":"","sys_updated_on":"2024-04-24 05:32:26","sys_tags":"","script":"function transform(input) {\n\tvar outputHealthScores = {};\n\t\n\tif (input.completenessScore && input.completenessScore.result && input.completenessScore.result.length > 0) {\n\t\toutputHealthScores[input.completenessScore.result[0].metric] = {\n\t\t\tmetric: input.completenessScore.result[0].metric,\n\t\t\tfriendly_name: input.completenessScore.result[0].friendly_name,\n\t\t\tstatus: input.completenessScore.result[0].status,\n\t\t\tscore: input.completenessScore.result[0].score,\n\t\t\tupdated: input.completenessScore.result[0].updated\n\t\t};\n\t}\n\t\n\tif (input.complianceScore && input.complianceScore.result && input.complianceScore.result.length > 0) {\n\t\toutputHealthScores[input.complianceScore.result[0].metric] = {\n\t\t\tmetric: input.complianceScore.result[0].metric,\n\t\t\tfriendly_name: input.complianceScore.result[0].friendly_name,\n\t\t\tstatus: input.complianceScore.result[0].status,\n\t\t\tscore: input.complianceScore.result[0].score,\n\t\t\tupdated: input.complianceScore.result[0].updated\n\t\t};\n\t}\n\t\n\tif (input.correctnessScore && input.correctnessScore.result && input.correctnessScore.result.length > 0) {\n\t\toutputHealthScores[input.correctnessScore.result[0].metric] = {\n\t\t\tmetric: input.correctnessScore.result[0].metric,\n\t\t\tfriendly_name: input.correctnessScore.result[0].friendly_name,\n\t\t\tstatus: input.correctnessScore.result[0].status,\n\t\t\tscore: input.correctnessScore.result[0].score,\n\t\t\tupdated: input.correctnessScore.result[0].updated\n\t\t};\n\t}\n\t\n\treturn outputHealthScores;\n}","sys_class_name":"sys_ux_data_broker_scriptlet","props":"[\r\n{\r\n\"name\": \"completenessScore\",\r\n\"label\": \"completenessScore\",\r\n\"description\": \"\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"object\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n},\r\n{\r\n\"name\": \"complianceScore\",\r\n\"label\": \"complianceScore\",\r\n\"description\": \"\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"object\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n},\r\n{\r\n\"name\": \"correctnessScore\",\r\n\"label\": \"correctnessScore\",\r\n\"description\": \"\",\r\n\"readOnly\": false,\r\n\"fieldType\": \"object\",\r\n\"mandatory\": true,\r\n\"defaultValue\": \"\"\r\n}]","schema_version":"1.0.0","sys_id":"deeb16c653921110b87eddeeff7b1245","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sys_ux_data_broker_scriptlet_deeb16c653921110b87eddeeff7b1245","sys_updated_by":"admin","api_name":"sn_cmdb_ws.Get CMDB Health scores Scriptlet - DataDrivenItems","sys_created_on":"2022-10-04 04:45:19","mutates_server_data":"false","name":"Get CMDB Health scores Scriptlet - DataDrivenItems","sys_name":"Get CMDB Health scores Scriptlet - DataDrivenItems","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"output_schema":"","sys_created_by":"admin","sys_policy":""}]}