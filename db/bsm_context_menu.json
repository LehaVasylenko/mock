{"result":[{"item":"link","sys_mod_count":"9","active":"true","sys_updated_on":"2014-07-17 17:09:16","sys_tags":"","type":"menu","script":"BSMLink.focusAndRedraw();\n","sys_id":"1471e6003702210052e2cc028e41f193","condition":"BSMGeneral.checkRelationshipType(item.d.parent_relationship,\n\t\t\titem.d.child_relationship) &&\n\t\t\tBSMGeneral.verifyEndsNotCollapsed(item.id1, item.id2)","sys_updated_by":"admin","sys_created_on":"2014-07-16 22:57:51","name":"Redraw layout","sys_created_by":"admin","order":"70"},{"item":"node","sys_mod_count":"33","active":"true","sys_updated_on":"2015-05-28 00:32:14","sys_tags":"","type":"menu","script":"addAffectedCIs();\n\nfunction addAffectedCIs() {\n\tvar taskId = BSMGeneral.getTaskIdFromParentWindow();\n\tvar selectedItems = BSMChart.getItem(BSMChart.selection());\n\t\n\tfor(var i =0; i < selectedItems.length; i++) {\n\t\tif(selectedItems[i].type == 'node' && (!selectedItems[i].d.is_collapsed || selectedItems[i].d.is_cluster)) {\n\t\t\taddAffectedCI(taskId, selectedItems[i].id);\n\t\t}\n\t}\n\t\n\t//Display a message to the user\n\tvar message;\n\tif(selectedItems.length > 1)\n\t\tmessage = \"The affected CIs have been added\";\n\telse\n\t\tmessage = \"The affected CI has been added\";\n    var gf = new GlideForm();\n\tgf.addInfoMessage(getMessage(message));\n\tsetTimeout(function() {\n\tgf.clearMessages();\n\t}, 5000);\n}\n\nfunction addAffectedCI(taskId, cmdb_id) {\n\tif(taskId && cmdb_id) {\n\t\tvar affectedCI = new GlideRecord('task_ci');\n\t\taffectedCI.addQuery('task', taskId);\n\t\taffectedCI.addQuery('ci_item', cmdb_id);\n\t\taffectedCI.query();\n\t\tif(!affectedCI.hasNext()){\n\t\t\taffectedCI.task = taskId;\n\t\t\taffectedCI.ci_item = cmdb_id;\n\t\t\taffectedCI.insert();\n\t\t}\n\t}\n}","sys_id":"2b07a5203712210003fecc028e41f129","condition":"BSMGeneral.isComingFromTasksView() &&\n\t\t\t(!item.d.is_collapsed || item.d.is_cluster)\n\t\t","sys_updated_by":"admin","sys_created_on":"2014-07-30 18:17:34","name":"Add affected CI","sys_created_by":"admin","order":""},{"item":"node","sys_mod_count":"0","active":"true","sys_updated_on":"2014-03-29 04:04:12","sys_tags":"","type":"menu","script":"/**\n  * Show the list of outages for this CI\n **/\t\t\t\nshowOutageListDialog(item);\n\nfunction showOutageListDialog(node) {\n\t\tvar w = new GlidePane(\"show_list\", \"cmdb_ci_outage_list\");\n\t\tw.setTitle(getMessage(\"Related Outages\"));\n\t\tw.addParm('table', 'cmdb_ci_outage_list');\n\t\tw.addParm('sysparm_view', 'bsm');\n\t\tvar query = 'cmdb_ci=' + node.id;\n\t\tw.addParm('sysparm_query', query);\n\t\tw.render();\n}\n","sys_id":"5ba809bceb331100b10b4274b206fe62","condition":"item.d.status.cmdb_ci_outage","sys_updated_by":"admin","sys_created_on":"2014-03-29 04:04:12","name":"Show related outages...","sys_created_by":"admin","order":"30"},{"item":"link","sys_mod_count":"7","active":"false","sys_updated_on":"2014-03-29 04:10:29","sys_tags":"","type":"menu","script":"\nopenRecordPopup(item.id);\n\nfunction openRecordPopup(id) {\n\t\tvar url = \"cmdb_rel_ci.do?sys_id=\" + id + \"&sysparm_stack=$bsm_close_dialog.do\";\n\t\tvar view = \"bsm_view\";\n\t\tpopupOpenStandard(url, view);\n}","sys_id":"68b4c3e8eb331100b10b4274b206feee","condition":"","sys_updated_by":"admin","sys_created_on":"2014-03-28 18:30:38","name":"Show CI relationship","sys_created_by":"admin","order":"100"},{"item":"node","sys_mod_count":"32","active":"false","sys_updated_on":"2014-03-29 04:10:19","sys_tags":"","type":"menu","script":"/**\n  * Collapse the expanded node.\n **/ \n\ncollapseNode();\n\nfunction collapseNode(){\n\tBSMGeneral.collapse();\t\n}","sys_id":"8a5516209f3311001b991471367fcf09","condition":"BSMGeneral.isCollapsable()","sys_updated_by":"admin","sys_created_on":"2014-03-28 15:01:24","name":"Collapse","sys_created_by":"admin","order":"40"},{"item":"node","sys_mod_count":"8","active":"true","sys_updated_on":"2014-03-28 18:24:04","sys_tags":"","type":"line","script":"\t\t\t\t","sys_id":"9231bfd8eb331100b10b4274b206fee5","condition":"","sys_updated_by":"admin","sys_created_on":"2014-03-28 03:03:54","name":"--","sys_created_by":"admin","order":"10"},{"item":"link","sys_mod_count":"9","active":"true","sys_updated_on":"2014-07-17 16:59:47","sys_tags":"","type":"menu","script":"BSMLink.editExistingRelationship(item.id);\n","sys_id":"92489a003702210052e2cc028e41f18e","condition":"BSMGeneral.checkRelationshipType(item.d.parent_relationship,\n\t\t\titem.d.child_relationship) &&\n\t\t\tBSMGeneral.verifyEndsNotCollapsed(item.id1, item.id2)","sys_updated_by":"admin","sys_created_on":"2014-07-16 22:22:31","name":"Edit connection","sys_created_by":"admin","order":"50"},{"item":"node","sys_mod_count":"14","active":"true","sys_updated_on":"2014-03-28 18:24:12","sys_tags":"","type":"menu","script":"/**\n  * Show the list of tasks for this CI\n **/\t\t\t\nshowTaskListDialog(item);\n\nfunction showTaskListDialog(node) {\n   var w = new GlidePane(\"show_list\", \"task_list\");\n   w.setTitle(\"Related Tasks\");\n   w.addParm('table', 'task_list');\n   w.addParm('sysparm_view', 'bsm');\n   var query = 'cmdb_ci=' + node.id + '^active=true';\n   w.addParm('sysparm_query', query);\n   w.render();\n}\n","sys_id":"bfd0bfd8eb331100b10b4274b206fe8d","condition":"!item.d.is_collapsed || item.d.is_cluster","sys_updated_by":"admin","sys_created_on":"2014-03-28 03:02:58","name":"Show related tasks...","sys_created_by":"admin","order":"20"},{"item":"link","sys_mod_count":"8","active":"true","sys_updated_on":"2014-07-17 17:08:59","sys_tags":"","type":"menu","script":"BSMLink.deleteLinkData(item.id);","sys_id":"cde0e6003702210052e2cc028e41f18e","condition":"BSMGeneral.checkRelationshipType(item.d.parent_relationship,\n\t\t\titem.d.child_relationship) &&\n\t\t\tBSMGeneral.verifyEndsNotCollapsed(item.id1, item.id2)","sys_updated_by":"admin","sys_created_on":"2014-07-16 22:55:27","name":"Remove connection","sys_created_by":"admin","order":"60"},{"item":"node","sys_mod_count":"8","active":"true","sys_updated_on":"2014-07-17 16:28:12","sys_tags":"","type":"menu","script":"/**\n  * Show the list of tasks for this CI\n **/\t\t\t\nshowTaskListDialog(item);\n\nfunction showTaskListDialog(node) {\n   var w = new GlidePane(\"show_list\", \"task_ci_list\");\n   w.setTitle(\"Affected CI Tasks\");\n   w.addParm('table', 'task_ci_list');\n   w.addParm('sysparm_view', 'bsm');\n   var query = 'ci_item=' + node.id + '^task.active=true';\n   w.addParm('sysparm_query', query);\n   w.render();\n}\n","sys_id":"fdc736403702210052e2cc028e41f1ed","condition":"!item.d.is_collapsed && item.d.status.task_ci\n\t\t","sys_updated_by":"admin","sys_created_on":"2014-07-17 00:35:26","name":"Show affected CIs","sys_created_by":"admin","order":"20"}]}