{"result":[{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"public","description":"Setup topic that calls AI Search topic block and displays the results","context_profiles":"","sys_updated_on":"2023-03-04 21:38:55","title":"","type":"SETUP_TOPIC","root_topic_id":"60c788a253513010af71ddeeff7b1249","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"09cd04fce121b010f877e0ba54be20da","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2021-07-21 22:01:41","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"AI Search - Fallback","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"AI Search - Fallback,AI Search - Fallback","model_type":"","sys_mod_count":"336","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.45\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"2c9634bfc04c4ea5966296379e17c065\": {\n          \"id\": \"2c9634bfc04c4ea5966296379e17c065\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"113051d5446c462caff43daade91dbd3\": {\n          \"id\": \"113051d5446c462caff43daade91dbd3\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"f1484118ebe947359a3994c03a5101f9\": {\n          \"id\": \"f1484118ebe947359a3994c03a5101f9\",\n          \"name\": \"Setup\",\n          \"script\": \"(function execute() {\\n    vaVars.loggingContext = JSON.stringify(global.VAAISearchHelperTokyo.getLoggingContext(vaSystem));\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info('Starting \\\"AI Search - Fallback\\\" topic');\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a705cf135a9c497d95cf6e3586c55e6d\": {\n          \"id\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"AI Search\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"AI Search\",\n          \"reusableTopicId\": \"b19775fa536310103296ddeeff7b12ff\",\n          \"inputs\": {\n            \"search_term\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getSearchText();\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            },\n            \"search_application_configuration\": {\n              \"value\": \"\",\n              \"mode\": \"simple\",\n              \"type\": \"Reference\",\n              \"table\": \"sys_search_context_config\"\n            },\n            \"ask_another_search\": {\n              \"value\": \"true\",\n              \"mode\": \"string\",\n              \"type\": \"True/False\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"1fbf2f58ae0c4f168204e9ad97bb20d3\",\n              \"value\": \"geniussearchresults\",\n              \"mapping\": \"geniussearchresults\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"e9c0ce8836144848aa18af94f3772cf0\",\n              \"value\": \"searchresults\",\n              \"mapping\": \"searchresults\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"87a9e0bed5e74f549aee540399563dfd\",\n              \"value\": \"shouldaskinfohelpful\",\n              \"mapping\": \"shouldaskinfohelpful\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"2e023a447f0b47e8bfdc3967ed0e459a\",\n              \"value\": \"newsearchterm\",\n              \"mapping\": \"newsearchterm\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"cd03b9dc33164afc883248ba11e39464\",\n              \"value\": \"shouldrunfallbacktopic\",\n              \"mapping\": \"shouldrunfallbacktopic\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"4c5c9cf4c7a54bc7985e4f31b1e2650d\",\n              \"value\": \"searchmetadata\",\n              \"mapping\": \"searchmetadata\",\n              \"preventDisable\": false\n            }\n          ],\n          \"variableIds\": [\n            \"1fbf2f58ae0c4f168204e9ad97bb20d3\",\n            \"e9c0ce8836144848aa18af94f3772cf0\",\n            \"87a9e0bed5e74f549aee540399563dfd\",\n            \"2e023a447f0b47e8bfdc3967ed0e459a\",\n            \"cd03b9dc33164afc883248ba11e39464\",\n            \"4c5c9cf4c7a54bc7985e4f31b1e2650d\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false,\n          \"dynamicTopicBlockName\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputDynamicModal\": {},\n          \"outputDynamicModal\": {}\n        },\n        \"64dc12457b22496299731e51b66f6995\": {\n          \"id\": \"64dc12457b22496299731e51b66f6995\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"c83244c3ec9c4c0cbf77099286c0b013\": {\n          \"id\": \"c83244c3ec9c4c0cbf77099286c0b013\",\n          \"name\": \"Run Topic Discovery\",\n          \"script\": \"(function execute() {\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n        'User requested another search term: {0}', vaInputs.newsearchterm);\\n    vaSystem.topicDiscovery(vaInputs.newsearchterm);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"c694a5d2ee004e63bbecebe40427aa0c\": {\n          \"id\": \"c694a5d2ee004e63bbecebe40427aa0c\",\n          \"name\": \"Run Fallback Topic\",\n          \"script\": \"(function execute() {\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n        'User did not find results helpful.  Executing fallback topic: {0}', vaVars._setup_fallback_topic);\\n    vaSystem.switchTopic(vaVars._setup_fallback_topic);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"484428140de6441ab4de0aa6532d6bef\": {\n          \"id\": \"484428140de6441ab4de0aa6532d6bef\",\n          \"name\": \"Create Click Metrics Fallback Event\",\n          \"script\": \"(function execute() {\\n    try {\\n        var searchMetadata = vaInputs.searchmetadata;\\n        global.VAAISearchHelperVancouver.processSearchFallbackMetrics(searchMetadata, vaSystem, vaInputs, vaVars);\\n    } catch (e) {\\n        gs.warn(\\\"Error creating click metrics search fallback event: \\\" + e.toString());\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"9fb8aa05b54a42f5b01fb80f6a6f2e23\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n          \"target\": \"484428140de6441ab4de0aa6532d6bef\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"98f447d26f874f7086e621ed5c9570cf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"64dc12457b22496299731e51b66f6995\",\n          \"target\": \"113051d5446c462caff43daade91dbd3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.newsearchtermISEMPTY^vaInputs.shouldrunfallbacktopic=false\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"End Topic\"\n        },\n        {\n          \"id\": \"88235d123e42414488f2ccd78741d995\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"64dc12457b22496299731e51b66f6995\",\n          \"target\": \"c83244c3ec9c4c0cbf77099286c0b013\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.newsearchterm && \\n        vaInputs.newsearchterm.toString() !== '' && \\n        vaInputs.shouldrunfallbacktopic == 'false';\\n})()\\n\"\n          },\n          \"label\": \"Another Search\"\n        },\n        {\n          \"id\": \"e25d493ead8441e3b848d1b2cac25dea\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"64dc12457b22496299731e51b66f6995\",\n          \"target\": \"c694a5d2ee004e63bbecebe40427aa0c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.shouldrunfallbacktopic == 'true';\\n})()\\n\"\n          },\n          \"label\": \"Run Fallback\"\n        },\n        {\n          \"id\": \"7e84b8c3be74416ab4b51dffc98ac9f1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f1484118ebe947359a3994c03a5101f9\",\n          \"target\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"964a22d176a74e58a49610ac2f81e2e4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2c9634bfc04c4ea5966296379e17c065\",\n          \"target\": \"f1484118ebe947359a3994c03a5101f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3b6f517fd5f6465cb71cf47c91df937f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c83244c3ec9c4c0cbf77099286c0b013\",\n          \"target\": \"113051d5446c462caff43daade91dbd3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"462b70f172b247d4aa35e1f2842c3c62\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c694a5d2ee004e63bbecebe40427aa0c\",\n          \"target\": \"113051d5446c462caff43daade91dbd3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7afc32d69928450198993b365e0ea148\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"484428140de6441ab4de0aa6532d6bef\",\n          \"target\": \"64dc12457b22496299731e51b66f6995\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"608bcf62f2a040ba8f9f412f4e799f06\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"608bcf62f2a040ba8f9f412f4e799f06\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"6eca7c60a3914a419f9e073ed204bfc9\": {\n      \"id\": \"6eca7c60a3914a419f9e073ed204bfc9\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"startTime\",\n      \"label\": \"startTime\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"ad74d168619a47339c10940e5db48cba\": {\n      \"id\": \"ad74d168619a47339c10940e5db48cba\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogId\",\n      \"label\": \"catalogId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"79bcf748cbe446c8ac946aaee34c19a9\": {\n      \"id\": \"79bcf748cbe446c8ac946aaee34c19a9\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"reqItemId\",\n      \"label\": \"reqItemId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"ea49ecff782e44e2a8d5c2ddc3821971\": {\n      \"id\": \"ea49ecff782e44e2a8d5c2ddc3821971\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"resultsToDisplay\",\n      \"label\": \"resultsToDisplay\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1fbf2f58ae0c4f168204e9ad97bb20d3\": {\n      \"id\": \"1fbf2f58ae0c4f168204e9ad97bb20d3\",\n      \"name\": \"geniussearchresults\",\n      \"label\": \"Geniussearchresults\",\n      \"defaultValue\": \"geniussearchresults\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n      \"isHidden\": false\n    },\n    \"e9c0ce8836144848aa18af94f3772cf0\": {\n      \"id\": \"e9c0ce8836144848aa18af94f3772cf0\",\n      \"name\": \"searchresults\",\n      \"label\": \"Searchresults\",\n      \"defaultValue\": \"searchresults\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n      \"isHidden\": false\n    },\n    \"87a9e0bed5e74f549aee540399563dfd\": {\n      \"id\": \"87a9e0bed5e74f549aee540399563dfd\",\n      \"name\": \"shouldaskinfohelpful\",\n      \"label\": \"Shouldaskinfohelpful\",\n      \"defaultValue\": \"shouldaskinfohelpful\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n      \"isHidden\": false\n    },\n    \"2e023a447f0b47e8bfdc3967ed0e459a\": {\n      \"id\": \"2e023a447f0b47e8bfdc3967ed0e459a\",\n      \"name\": \"newsearchterm\",\n      \"label\": \"Newsearchterm\",\n      \"defaultValue\": \"newsearchterm\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n      \"isHidden\": false\n    },\n    \"cd03b9dc33164afc883248ba11e39464\": {\n      \"id\": \"cd03b9dc33164afc883248ba11e39464\",\n      \"name\": \"shouldrunfallbacktopic\",\n      \"label\": \"Shouldrunfallbacktopic\",\n      \"defaultValue\": \"shouldrunfallbacktopic\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n      \"isHidden\": false\n    },\n    \"4c5c9cf4c7a54bc7985e4f31b1e2650d\": {\n      \"id\": \"4c5c9cf4c7a54bc7985e4f31b1e2650d\",\n      \"name\": \"searchmetadata\",\n      \"label\": \"Searchmetadata\",\n      \"defaultValue\": \"searchmetadata\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n      \"isHidden\": false\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_topic_09cd04fce121b010f877e0ba54be20da","channels":"","source_topic_id":"60c788a253513010af71ddeeff7b1249","expose_on_palette":"false","name":"AI Search - Fallback","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"public","description":"Personalized Greeting Topic","context_profiles":"","sys_updated_on":"2024-07-18 22:41:50","title":"Personalized Greeting Topic.","type":"SETUP_TOPIC","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"0c4ee85053130010cf8cddeeff7b12a3","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-02-26 22:23:05","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Personalized Greeting Topic.","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"Personalized Greeting Topic","model_type":"nlu_keyword","sys_mod_count":"4","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.68\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"0c2761fc561b4196970a68928f8a6a3d\": {\n          \"id\": \"0c2761fc561b4196970a68928f8a6a3d\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"dafe6c9e9fdb47c4804711eba7b4f571\": {\n          \"id\": \"dafe6c9e9fdb47c4804711eba7b4f571\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"25c2e10cb5cc41878f70aa6b218f75d1\": {\n          \"id\": \"25c2e10cb5cc41878f70aa6b218f75d1\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Get Personalized Greeting topic message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var result;\\n       if (vaInputs.user.first_name.getDisplayValue()) {\\n  return  gs.getMessageLang('Hi {0}, {1}', vaContext.getRequesterLang(), [vaInputs.user.first_name.getDisplayValue(), vaSystem.getGreetingMessage()]);\\n       } else {\\n            return gs.getMessageLang('Hi {0}, {1}', vaContext.getRequesterLang(), [gs.getUser().getFirstName(), vaSystem.getGreetingMessage()]);\\n       }\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"aa8a754371394818b9853853f66e8d5f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0c2761fc561b4196970a68928f8a6a3d\",\n          \"target\": \"25c2e10cb5cc41878f70aa6b218f75d1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6ad678a5978841baaefa5c1d57bfa0ff\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"25c2e10cb5cc41878f70aa6b218f75d1\",\n          \"target\": \"dafe6c9e9fdb47c4804711eba7b4f571\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"9e002206edb544e0bd29addf195e026f\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"9e002206edb544e0bd29addf195e026f\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_topic_0c4ee85053130010cf8cddeeff7b12a3","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Personalized Greeting Topic.","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"public","description":"Displays a message to the user when the bot cannot find a topic (intent) that matches a user request or when it does not understand a user entry.","context_profiles":"","sys_updated_on":"2021-10-06 03:44:39","title":"","type":"SETUP_TOPIC","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"script","nlu_model":"","sys_id":"0efd285053130010cf8cddeeff7b12a5","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-02-26 22:21:51","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Fallback Topic.","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"Fallback Topic","model_type":"","sys_mod_count":"8","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.39\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"66e0e8619a704b3fac501eb9c80ced91\": {\n          \"id\": \"66e0e8619a704b3fac501eb9c80ced91\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"abf976c8a7b8433899157c307ea662d6\": {\n          \"id\": \"abf976c8a7b8433899157c307ea662d6\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"ce566f5f90e84abd9477686b710dc11f\": {\n          \"id\": \"ce566f5f90e84abd9477686b710dc11f\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Show Wrong Topic Message\",\n          \"value\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang(vaVars._topic_wrong_msg, vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"b224bd3220dc4489bfdcad5f3b03ff2d\": {\n          \"id\": \"b224bd3220dc4489bfdcad5f3b03ff2d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"c647c62c280e47fbafedcdb9012c0ce2\": {\n          \"id\": \"c647c62c280e47fbafedcdb9012c0ce2\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Show Sorry Message\",\n          \"value\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang(vaVars._topic_sorry_msg, vaContext.getRequesterLang());\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"64995fad3aa747be8ce77fc9a46de1ec\": {\n          \"id\": \"64995fad3aa747be8ce77fc9a46de1ec\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Show Topic Not Found Message\",\n          \"value\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang(vaVars._topic_not_found_msg, vaContext.getRequesterLang());\\n})()\\n\\n\",\n            \"mode\": \"script\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"be796a8b6b1943f18c22d470df4d97b9\": {\n          \"id\": \"be796a8b6b1943f18c22d470df4d97b9\",\n          \"name\": \"Show Topics\",\n          \"script\": \"(function execute() {\\n    vaSystem.switchTopic(vaVars._setup_explore_help_topic);\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"580989e419a648b2b9cc9919718f2c55\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"64995fad3aa747be8ce77fc9a46de1ec\",\n          \"target\": \"be796a8b6b1943f18c22d470df4d97b9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4f239cb33ecb4dc39357cf6c02f7eccd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"66e0e8619a704b3fac501eb9c80ced91\",\n          \"target\": \"b224bd3220dc4489bfdcad5f3b03ff2d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9b010f541e1d4a49ba6ed86cef2edbf8\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b224bd3220dc4489bfdcad5f3b03ff2d\",\n          \"target\": \"ce566f5f90e84abd9477686b710dc11f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._topic_strategy != 'unknown';\\n})()\\n\"\n          },\n          \"label\": \"Wrong Topic\"\n        },\n        {\n          \"id\": \"cd9ad8a9f5a646e69cab6dc562e7f44b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b224bd3220dc4489bfdcad5f3b03ff2d\",\n          \"target\": \"c647c62c280e47fbafedcdb9012c0ce2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._topic_strategy == 'unknown';\\n})()\\n\"\n          },\n          \"label\": \"Topic Not Found\"\n        },\n        {\n          \"id\": \"ddc5acc8bc2d41aeb9b7880b64f47bb7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c647c62c280e47fbafedcdb9012c0ce2\",\n          \"target\": \"64995fad3aa747be8ce77fc9a46de1ec\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"aed2ebd04a724fcc89e192e66d5878b7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ce566f5f90e84abd9477686b710dc11f\",\n          \"target\": \"be796a8b6b1943f18c22d470df4d97b9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0ae38f06b03c48dcb48b3be277976a40\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"be796a8b6b1943f18c22d470df4d97b9\",\n          \"target\": \"abf976c8a7b8433899157c307ea662d6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"9a28be8f09df4aee84bbe18fadd58005\": {\n      \"id\": \"9a28be8f09df4aee84bbe18fadd58005\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_strategy\",\n      \"label\": \"_topic_strategy\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4a7ca7bf40b048b5972127166e2003b7\": {\n      \"id\": \"4a7ca7bf40b048b5972127166e2003b7\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_wrong_msg\",\n      \"label\": \"_topic_wrong_msg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5026f2ef637a4784bdec9d0d1e6257fb\": {\n      \"id\": \"5026f2ef637a4784bdec9d0d1e6257fb\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_sorry_msg\",\n      \"label\": \"_topic_sorry_msg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"0b1e01e49d044b5aacbcf342b2f46f66\": {\n      \"id\": \"0b1e01e49d044b5aacbcf342b2f46f66\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_not_found_msg\",\n      \"label\": \"_topic_not_found_msg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"330805faf81c483eb2dcee58e7afb06b\": {\n      \"id\": \"330805faf81c483eb2dcee58e7afb06b\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_setup_explore_help_topic\",\n      \"label\": \"_setup_explore_help_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a0a0dc606e77454aa9f0d6c82382b73e\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"a0a0dc606e77454aa9f0d6c82382b73e\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_topic_0efd285053130010cf8cddeeff7b12a5","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Fallback Topic.","applicability":"(function execute() {\n      return false;\n      })()\n    ","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"Enables users to provide feedback on their conversational experience, before the conversation ends.","context_profiles":"","sys_updated_on":"2023-06-14 17:52:24","title":"","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"11d818213b77330074bc456993efc4c2","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2019-09-09 18:22:09","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Survey","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"","sys_mod_count":"341","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.47\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"b90ef5f7024d4e34b5ceaf628345df9c\": {\n          \"id\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"parameters\": [\n            {\n              \"name\": \"surveyId\",\n              \"value\": \"\",\n              \"id\": \"1132a62678c24bbda688337615fd51bb\",\n              \"disabled\": true,\n              \"referenced\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            },\n            {\n              \"name\": \"confirmationNeeded\",\n              \"value\": \"false\",\n              \"id\": \"75bc445130284002947077d668cac779\",\n              \"referenced\": false,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            },\n            {\n              \"name\": \"saveQuestionsToContext\",\n              \"value\": \"false\",\n              \"id\": \"ba2a161b94a3468a86603955cca630a1\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            }\n          ],\n          \"variableIds\": [\n            \"1132a62678c24bbda688337615fd51bb\",\n            \"75bc445130284002947077d668cac779\",\n            \"ba2a161b94a3468a86603955cca630a1\"\n          ]\n        },\n        \"da165a652daf475698c988c6427d008f\": {\n          \"id\": \"da165a652daf475698c988c6427d008f\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": []\n        },\n        \"4761ab4e62324e3cb07ce4efc77ffd1f\": {\n          \"id\": \"4761ab4e62324e3cb07ce4efc77ffd1f\",\n          \"name\": \"Load survey instance\",\n          \"script\": \"(function execute() {\\n\\tvar gr = new GlideRecord('asmt_metric_type');\\n\\tgr.get(vaInputs.surveyid);vaVars.active = gr.active;vaVars.endNote = vaSystem.getTranslation(gr, 'end_note', vaContext.getRequesterLang(), gr.end_note.getValue() || '');vaVars.introduction = vaSystem.getTranslation(gr, 'introduction', vaContext.getRequesterLang(), gr.introduction.getValue() || '');vaVars.surveyName = gr.name.toString();vaVars.surveyVerificationMsg = vaSystem.getSurveyVerificationMessage();\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"bbe4918b84a9426abbec7d055f7f555a\": {\n          \"id\": \"bbe4918b84a9426abbec7d055f7f555a\",\n          \"name\": \"Load questions\",\n          \"script\": \"(function execute() {\\n    var gr = new GlideRecord('asmt_metric_category');\\n    gr.addQuery('metric_type', vaInputs.surveyid);\\n    gr.query();\\n    gr.next();\\n\\n    var surveyCategory = gr.getUniqueValue();\\n\\n    var gr = new GlideRecord('asmt_metric')\\n    gr.addQuery('category', surveyCategory);\\n    gr.addQuery('active', true);\\n    gr.orderBy('order');\\n    gr.query();\\n\\n    var questions = [];\\n    while (gr.next()) {\\n        var question = {\\n            sys_id: gr.getUniqueValue(),\\n            scale: gr.scale + '',\\n            metric: gr.sys_id + '',\\n            type: gr.datatype + '',\\n            display: vaSystem.getTranslation(gr, 'question', vaContext.getRequesterLang(), gr.question) + '',\\n            dependsOn: gr.depends_on + '',\\n            displayedWhen: gr.displayed_when + '',\\n            name: gr.name + '',\\n            max: gr.max + '',\\n            min: gr.min + '',\\n            mandatory: gr.mandatory + '',\\n            field_validation: gr.field_validation + '',\\n            reference_table: gr.reference_table + '',\\n            condition: gr.condition + '',\\n        };\\n\\n        // boolean and checkbox type questions use different displayed_when fields\\n        var dependsOnType = gr.depends_on.datatype + '';\\n        if (dependsOnType === 'boolean')\\n            question['displayedWhen'] = gr.displayed_when_yesno + '';\\n        else if (dependsOnType === 'checkbox')\\n            question['displayedWhen'] = gr.displayed_when_checkbox + '';\\n\\n        questions.push(question);\\n    }\\n    vaVars.surveyQuestions = JSON.stringify(questions);\\n    vaVars.questionCount = questions.length;\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8ad01595341c4a6186e46eb203320658\": {\n          \"id\": \"8ad01595341c4a6186e46eb203320658\",\n          \"name\": \"Set next question\",\n          \"script\": \"(function execute() {\\n    vaVars.questionIndex++;\\n    if (!(vaVars.questionCount && vaVars.questionIndex < vaVars.questionCount))\\n        return;\\n\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n\\n    // Set question type & display value\\n    vaVars.currentQuestionId = questions[i].sys_id;\\n    vaVars.currentQuestionType = questions[i].type;\\n    vaVars.currentQuestionMetric = questions[i].metric;\\n    vaVars.currentQuestionDisplay = questions[i].display;\\n    vaVars.currentQuestionMax = questions[i].max;\\n    vaVars.currentQuestionMin = questions[i].min;\\n    vaVars.currentQuestionMandatory = questions[i].mandatory;\\n    vaVars.currentQuestionFieldValidator = questions[i].field_validation;\\n    vaVars.currentQuestionReferenceTable = questions[i].reference_table;\\n    vaVars.currentQuestionReferenceCondition = questions[i].condition;\\n\\n    // Load choices if relevant\\n    if (questions[i].type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(questions[i].type) > -1) {\\n        questions[i].choices = getChoices(questions[i]);\\n        vaVars.surveyQuestions = JSON.stringify(questions);\\n    }\\n})();\\n\\nfunction getChoices(q) {\\n    var gr = new GlideRecord('asmt_metric_definition');\\n    gr.addQuery('metric', q.metric);\\n    gr.orderBy('order');\\n    gr.query();\\n\\n    var choices = [];\\n    while (gr.next()) {\\n        choices.push({\\n            sys_id: gr.getUniqueValue(),\\n            display: vaSystem.getTranslation(gr, 'display', vaContext.getRequesterLang(),gr.display),\\n            value: gr.getValue('value'),\\n            selected: gr.getDisplayValue('selected_image'),\\n            unselected: gr.getDisplayValue('unselected_image')\\n        });\\n    }\\n    return choices;\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ca66aaa54c614102a4a2fd4bad818b9a\": {\n          \"id\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Out of questions?\"\n        },\n        \"280229f5f0f74d11a6d06328dfb8fa1a\": {\n          \"id\": \"280229f5f0f74d11a6d06328dfb8fa1a\",\n          \"name\": \"Set answers\",\n          \"script\": \"(function execute() {\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n    answers[vaVars.currentQuestionId] = getInput();\\n    vaVars.surveyAnswers = JSON.stringify(answers);\\n})();\\n\\nfunction getInput() {\\n    var values = {'value': null, 'Qtype': vaVars.currentQuestionType, 'displayValue':null};\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        values.value = getValueIfSet(vaInputs.show_choice_question);\\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_choice_question,values.value);\\n    }\\n\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        values.value = getValueIfSet(vaInputs.show_text_input_question);\\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_text_input_question,values.value);\\n    }\\n\\n    switch (vaVars.currentQuestionType) {\\n        case 'imagescale':\\n            values.value = getValueIfSet(vaInputs.show_image_scale_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_image_scale_question,values.value);\\n            var questions = JSON.parse(vaVars.surveyQuestions);\\n            //stores correct displayValue, vaInputs returns display+value\\n            if(vaInputs.show_image_scale_question && vaInputs.show_image_scale_question != null){\\n                questions[vaVars.questionIndex].choices.forEach(function(c){\\n                    if(c.value === values.value)\\n                        values.displayValue = c.display;\\n                });\\n            }\\n            break;\\n        case 'boolean':\\n            values.value = getValueIfSet(vaInputs.show_boolean_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\\n            break;\\n        case 'checkbox':\\n            values.value= getValueIfSet(vaInputs.show_boolean_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\\n            break;\\n        case 'attachment':\\n            values.value = getValueIfSet(vaInputs.show_attachment_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_attachment_question,values.value);\\n            break;\\n        case 'date':\\n            const date = getValueIfSet(vaInputs.show_date_question);\\n            values.value = (date != null) ? date.toString() : null;\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_date_question,values.value);\\n            break;\\n        case 'datetime':\\n            const dateTime = getValueIfSet(vaInputs.show_datetime_question);\\n            values.value = (dateTime != null) ? dateTime.toString() : null;\\n            vaInputs.show_datetime_question.setTimeZone(vaContext.getDeviceTimeZone());\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_datetime_question,values.value);\\n            break;\\n        case 'reference':\\n            values.value = getValueIfSet(vaInputs.show_reference_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_reference_question,values.value);\\n    }\\n    return values;\\n}\\n\\nfunction getValueIfSet(field){\\n    return field && field.isValueSet() ? field.getValue() : null;\\n}\\n\\nfunction getDisplayValueIfSet(field, val){\\n    if (!field || field == null)\\n       return val;\\n    var dv = field.getDisplayValue();\\n     return dv && dv.length > 0  ? dv : val;\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9ee3c8b3d800414c89edc50c2746da57\": {\n          \"id\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Does question satisfy dependency?\"\n        },\n        \"385869dc18c746b88db71bdd7c349c56\": {\n          \"id\": \"385869dc18c746b88db71bdd7c349c56\",\n          \"name\": \"Check question dependency\",\n          \"script\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var q = questions[i];\\n\\n    var satisfied = true;\\n    var hasDependency = !(!q.dependsOn);\\n    vaVars.currentIsDependencySatisfied = !hasDependency || isSat(q);\\n})();\\n\\nfunction isSat(q) {\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n\\n    var answerValid = false;\\n    questions.forEach(function(question) {\\n        if (question.metric !== q.dependsOn)\\n            return;\\n\\n        var answerExists = question.sys_id in answers;\\n        if (!answerExists)\\n            return;\\n\\n        var selectedChoice = answers[question.sys_id]['value'];\\n\\n        if (question.type === 'boolean' || question.type === 'checkbox') {\\n            if ((selectedChoice === true && q.displayedWhen === '1') || (selectedChoice === false && q.displayedWhen === '0'))\\n                answerValid = true;\\n        } else {\\n            var choices = question.choices.filter(function(c) {\\n                return c.value === selectedChoice;\\n            });\\n\\n            if (choices.length && choices[0].sys_id)\\n                answerValid = q.displayedWhen.indexOf(choices[0].sys_id) !== -1;\\n        }\\n    });\\n\\n    return answerValid;\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"6fc30a2a583e40d2a737eee77bb5e73f\": {\n          \"id\": \"6fc30a2a583e40d2a737eee77bb5e73f\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Show boolean question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if ((vaVars.currentQuestionType === 'boolean') || (vaVars.currentQuestionType === 'checkbox')) {\\n        vaInputs.show_boolean_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"3bd6649edfb04f1d870a98c96130be34\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"6460cac852834b46a4977c093a2b1a67\": {\n          \"id\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"name\": \"Submit survey answers\",\n          \"script\": \"(function execute() {\\n    if(vaInputs.savequestionstocontext == 'true'){ \\n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createAssessments(vaInputs.surveyid, '', gs.getUserID(), false, '', false, '', vaVars._interaction_record_sysid, false, 'interaction');\\n        vaVars.surveyInstanceId = vaVars.surveyInstanceId.substring(0, 32);\\n        vaVars.LiveAgent_pre_assessment_instance = vaVars.surveyInstanceId;\\n        vaVars.LiveAgent_pre_chat_survey_name = vaVars.surveyName;\\n    } else{ \\n        var userId = !gs.nil(vaVars._topic_postchat_user_id) ? vaVars._topic_postchat_user_id : gs.getUserID();\\n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createAssessments(vaInputs.surveyid, '', userId, false, '', false, '', vaVars._interaction_record_sysid, false, 'interaction');\\n        vaVars.surveyInstanceId = vaVars.surveyInstanceId.substring(0, 32);\\n        vaVars.LiveAgent_post_assessment_instance = vaVars.surveyInstanceId;\\n        vaVars.LiveAgent_post_chat_survey_name = vaVars.surveyName;    \\n    }\\n\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n    var data = {\\n        sysparm_instance_id: vaVars.surveyInstanceId,\\n        sysparm_action: 'submit'\\n    };\\n data.channel = 'va'; \\n    var questionData = new global.TopicPreChatUtil().getQuestionData(vaVars.surveyInstanceId);\\n\\n    Object.keys(answers).forEach(function(q) {\\n        if (answers[q] && answers[q] && answers[q].value != null){ \\n            if (answers[q]['Qtype'] === 'boolean') {\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? '1' : '0';\\n            } else if (answers[q]['Qtype'] === 'checkbox') {\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? 'true' : '';\\n            } else\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = answers[q]['value'];\\n            if (vaInputs.savequestionstocontext == 'true')\\n                saveToContext(questionData[q].name, answers[q], questionData[q].contextVar, questionData[q].type);\\n        }\\n        \\n    });\\n    var response = new global.AssessmentSubmitProcessor().processRequest(data);\\n})()\\n\\nfunction saveToContext(name, a, contextVar, type){\\n        if(contextVar != \\\"\\\") {\\n            var contextVarName = contextVar;\\n        } else {\\n            //remove all special characters and replace spaces with _\\n            var questionName = name.toString().replace(/[^a-zA-Z0-9]/g, '_').replace(/_$/,'');     \\n            //append survey name to question name\\n            var contextVarName = \\\"liveagent_\\\" +vaVars.surveyName +\\\".\\\"+ questionName;\\n        }\\n        vaVars[contextVarName] = a.value.toString();\\n        //for choice questions, store response and not response index as context var\\n        if (type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(type) > -1) { \\n             vaVars[contextVarName] = a.displayValue.toString();    \\n        }\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a37d9e0c9af54fbb93c16fe65d7f33e0\": {\n          \"id\": \"a37d9e0c9af54fbb93c16fe65d7f33e0\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Show text input question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'long')\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\n    else if (vaVars.currentQuestionType === 'percentage')\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\n    else\\n        return vaVars.currentQuestionDisplay;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_text_input_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"24bdbf9a7cc4465f9a4f4ab220cdb2c7\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Custom\",\n            \"script\": \"function validate(value) {\\n    // for \\\"skip\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\n        return {\\n            valid: true,\\n        }; \\n\\n    // for string type with validator defined, and question is not skipped\\n    var validatorGr = new GlideRecord(\\\"sys_cs_field_script_validator\\\");\\n    if (!validatorGr.isValid())\\n\\t    return {\\n           valid: false,\\n           error: gs.getMessageLang(\\\"validator table does not exist\\\", vaContext.getRequesterLang())\\n        };\\n\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\n        var scriptBuild = \\\"(\\\" + validatorGr.validator + \\\")('\\\"+ value + \\\"');\\\";\\n        var isValidAnswer = eval(scriptBuild);\\n        return {\\n            valid: isValidAnswer,\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\n        };\\n    } else {\\n        return {\\n            valid: false,\\n            error: gs.getMessageLang(\\\"validator record does not exist\\\", vaContext.getRequesterLang())\\n        };\\n    }\\n}\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"74fc296442cc4d7f8269e94e25cad5a4\": {\n          \"id\": \"74fc296442cc4d7f8269e94e25cad5a4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"End note\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.endNote}}\",\n                        \"displayValue\": \"vaVarsendNote\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"8351c5b9bf8942ff8d31f773b77a5ee3\": {\n          \"id\": \"8351c5b9bf8942ff8d31f773b77a5ee3\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Introduction\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.introduction}}\",\n                        \"displayValue\": \"vaVarsintroduction\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"9ecd2ca830064b97967dca21062c30fc\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Show choice question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_choice_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\\n\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"43d0530ce6724cde95932f286155da8f\",\n          \"id\": \"9ecd2ca830064b97967dca21062c30fc\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'render_style':'bubble',\\n            'label': c.display,\\n            'value': c.value\\n        });\\n    }\\n\\n    return options;\\n})()\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"No data found\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'render_style':'bubble',\\n            'label': c.display,\\n            'value': c.value\\n        });\\n    }\\n\\n    return options;\\n})()\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"64d85b2098094a4fa02f25f7a1444c50\": {\n          \"id\": \"64d85b2098094a4fa02f25f7a1444c50\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"Show attachment question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'attachment') {\\n        vaInputs.show_attachment_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"\n          },\n          \"optional\": false,\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": {\n            \"id\": \"\"\n          },\n          \"variableId\": \"bba30ac7475c47cc93da35130951478b\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"c86161c0b4ea42dab11005dd0f69556a\": {\n          \"id\": \"c86161c0b4ea42dab11005dd0f69556a\",\n          \"stepType\": \"DateTimePrompt\",\n          \"name\": \"Show date question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'date') {\\n        vaInputs.show_date_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"f7bd8a67b7874023816be1a2eccd99da\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"bab80169de204bdf98d7955c940792c7\": {\n          \"id\": \"bab80169de204bdf98d7955c940792c7\",\n          \"stepType\": \"DateTimePrompt\",\n          \"name\": \"Show datetime question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'datetime') {\\n        vaInputs.show_datetime_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"d5c40882740949d285112e17f40f7b2c\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f9950611be314fe6b0c891e8e65771d2\": {\n          \"id\": \"f9950611be314fe6b0c891e8e65771d2\",\n          \"name\": \"Answer validation\",\n          \"script\": \"(function execute() {\\n    vaVars.currentAnswerValidation = true;\\n    vaVars.currentAnswerErrorMsg = '';\\n\\n    if (vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage')\\n        validateFieldLimits();\\n})();\\n\\nfunction validateFieldLimits() {\\n\\tif ((!vaInputs.show_text_input_question.isValueSet() || vaInputs.show_text_input_question.getValue().length == 0)\\n\\t    && !vaInputs.show_text_input_question.isRequired())\\n\\t\\treturn;\\n\\tvar max = vaVars.currentQuestionMax;\\n\\tvar min = vaVars.currentQuestionMin;\\n\\t\\t\\n\\tvar value = vaInputs.show_text_input_question.getValue();\\n\\tvar newvalue = Number(value);\\n\\tif (isNaN(newvalue)) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is not a valid number. Please try again', vaContext.getRequesterLang());\\n\\t} else if (newvalue > max || newvalue < min) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is outside the valid range. Please try again', vaContext.getRequesterLang());\\n\\t}\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"607a63448c1a4acca85166124f375118\": {\n          \"id\": \"607a63448c1a4acca85166124f375118\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Check range\"\n        },\n        \"194fae9f28f045ac94643564ef50c9db\": {\n          \"id\": \"194fae9f28f045ac94643564ef50c9db\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Validation failed\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return vaVars.currentAnswerErrorMsg;\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"786cec348ec048a78c4c2c6c4fed5ac2\": {\n          \"stepType\": \"CarouselPrompt\",\n          \"name\": \"Show image scale question\",\n          \"prompt\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'imagescale') {\\n        vaInputs.show_image_scale_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"7df928600c0b443a99b74c93a456775a\",\n          \"id\": \"786cec348ec048a78c4c2c6c4fed5ac2\",\n          \"carouselLabel\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"carouselItemExpression\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'Name': c.display,\\n            'Value': c.value,\\n            'Body': c.unselected\\n        });\\n    }\\n\\n    return options;\\n})()\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"No data found\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"c24324650a514984946fed64207f0c24\": {\n          \"id\": \"c24324650a514984946fed64207f0c24\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Summary\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n      var questions = JSON.parse(vaVars.surveyQuestions);\\n      var answers = JSON.parse(vaVars.surveyAnswers);\\n      var questionAnswerPairs = [];\\n\\n      questions.forEach(function(q) {\\n            var question = q.display.toString();\\n            var answer = answers[q.metric];\\n            var questionAnswer = answer.displayValue != null ? answer.displayValue :\\n            answer.value != null ? answer.value : '';\\n            var questionType = q.type + '';\\n            \\n            if(questionType == 'checkbox' || questionType == 'boolean'){\\n                  if (questionAnswer == \\\"1\\\") {\\n                        questionAnswer = \\\"Yes\\\";\\n                  } else if (questionAnswer == \\\"0\\\") {\\n                        questionAnswer = \\\"No\\\"\\n                  }\\n            }\\n            if(answer){questionAnswerPairs.push({\\\"fieldLabel\\\": question, \\\"fieldValue\\\": questionAnswer});}         \\n      });\\n      \\n      var card_data = JSON.stringify({\\n            \\\"title\\\":gs.getMessageLang(\\\"Response Summary\\\", vaContext.getRequesterLang()),\\n            \\\"fields\\\":questionAnswerPairs,\\n      });\\n\\n      return vaSystem.renderCard(\\\"PreChat\\\", card_data, true);\\n})()\\n\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"e9cf114b0f3443a88c35756df8073df5\": {\n          \"id\": \"e9cf114b0f3443a88c35756df8073df5\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Verify Response\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaVars.surveyVerificationMsg}}\",\n                      \"displayValue\": \"vaVarssurveyVerificationMsg\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"5fdb137d926849b9a9e41edf8bb67509\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8c9927f71ad04890afd342b20df99100\": {\n          \"id\": \"8c9927f71ad04890afd342b20df99100\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Summary Correct?\"\n        },\n        \"3c232bba33f34219b4a554c511faa4da\": {\n          \"id\": \"3c232bba33f34219b4a554c511faa4da\",\n          \"name\": \"Reset Question Index\",\n          \"script\": \"(function execute() {\\n    vaVars.questionIndex = -1;\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"9f8dfc6260824d0b863c4275cbd6e2f3\": {\n          \"id\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Confirmation\"\n        },\n        \"0f849053babf4775a81a81355823b3db\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Show reference question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if ((vaVars.currentQuestionType === 'reference')) {\\n        vaInputs.show_reference_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"217beaae2c9b4289859d6b32fc9877e6\",\n          \"id\": \"0f849053babf4775a81a81355823b3db\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var table = vaVars.currentQuestionReferenceTable;\\n    var condition = vaVars.currentQuestionReferenceCondition;\\n    if (!table)\\n        return options;\\n \\n    var taskExtensions = new TableUtils(\\\"task\\\").getTableExtensions();\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\n\\n    var gr = new GlideRecord(table);\\n    if (condition)\\n        gr.addEncodedQuery(condition);\\n    gr.query();\\n    while (gr.next()) {\\n        options.push({\\n            'render_style':'bubble',\\n            'value': gr.sys_id + '',\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\n        });\\n    }\\n    return options;\\n})()\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"No reference found\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var table = vaVars.currentQuestionReferenceTable;\\n    var condition = vaVars.currentQuestionReferenceCondition;\\n    if (!table)\\n        return options;\\n \\n    var taskExtensions = new TableUtils(\\\"task\\\").getTableExtensions();\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\n\\n    var gr = new GlideRecord(table);\\n    if (condition)\\n        gr.addEncodedQuery(condition);\\n    gr.query();\\n    while (gr.next()) {\\n        options.push({\\n            'render_style':'bubble',\\n            'value': gr.sys_id + '',\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\n        });\\n    }\\n    return options;\\n})()\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ca955a1d346d48b09e9ce792dde52cc3\": {\n          \"id\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Survey Active?\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"d723d392011a4489b5e9707ea710ae01\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"target\": \"da165a652daf475698c988c6427d008f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    gs.warn(\\\"Survey is not active\\\")\\n    return vaVars.active != true;\\n})()\\n\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Is Survey Active\",\n          \"toNode\": \"da165a652daf475698c988c6427d008f\",\n          \"toEdge\": \"d723d392011a4489b5e9707ea710ae01\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"d5d8414f7d124779a993b68bf5fb0c83\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n          \"target\": \"4761ab4e62324e3cb07ce4efc77ffd1f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9c490fb1ee7b48e2ab62d5120713a01f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9ecd2ca830064b97967dca21062c30fc\",\n          \"target\": \"6fc30a2a583e40d2a737eee77bb5e73f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"380d37400e614773a95863c9a11548ab\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"target\": \"a37d9e0c9af54fbb93c16fe65d7f33e0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.currentIsDependencySatisfied;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"ad83e8a8966b4569bf2a2adc0acf21c0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"385869dc18c746b88db71bdd7c349c56\",\n          \"target\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e0feebc1fe63415aaa292ddf81cb735d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8ad01595341c4a6186e46eb203320658\",\n          \"target\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e9629798f480430ca040141729435c8a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"280229f5f0f74d11a6d06328dfb8fa1a\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"65ebda13c269463d875828687d4d02c5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.currentIsDependencySatisfied;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"87d89661bc144db1930085298213794f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"target\": \"385869dc18c746b88db71bdd7c349c56\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.questionIndex < vaVars.questionCount;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"af0cf0a9cffd4cb88e90a49da908d3aa\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"target\": \"74fc296442cc4d7f8269e94e25cad5a4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a59671cb37be433ca9aad55c9f432474\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"74fc296442cc4d7f8269e94e25cad5a4\",\n          \"target\": \"da165a652daf475698c988c6427d008f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"921b07f0136140b3b3c3dd1ab561bb08\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bbe4918b84a9426abbec7d055f7f555a\",\n          \"target\": \"8351c5b9bf8942ff8d31f773b77a5ee3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4c33e19c61de47b6a365058f905ba7db\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8351c5b9bf8942ff8d31f773b77a5ee3\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ee2e867ed68047d794c46b45bc4ce496\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6fc30a2a583e40d2a737eee77bb5e73f\",\n          \"target\": \"64d85b2098094a4fa02f25f7a1444c50\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0ec6f85012064093931d18af01990021\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"64d85b2098094a4fa02f25f7a1444c50\",\n          \"target\": \"c86161c0b4ea42dab11005dd0f69556a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4b32d599cc7145c9bef29624ed16ce09\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c86161c0b4ea42dab11005dd0f69556a\",\n          \"target\": \"bab80169de204bdf98d7955c940792c7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"166e3abc2610434380c01a42e67a6e57\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f9950611be314fe6b0c891e8e65771d2\",\n          \"target\": \"607a63448c1a4acca85166124f375118\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"240492096e0e4691a1481592d27639d2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"607a63448c1a4acca85166124f375118\",\n          \"target\": \"280229f5f0f74d11a6d06328dfb8fa1a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.currentAnswerValidation;\\n})()\"\n          },\n          \"label\": \"In range\"\n        },\n        {\n          \"id\": \"11d51d8d83d4441dbd99f5ddff1399a5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"607a63448c1a4acca85166124f375118\",\n          \"target\": \"194fae9f28f045ac94643564ef50c9db\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.currentAnswerValidation;\\n})()\"\n          },\n          \"label\": \"Out of range\"\n        },\n        {\n          \"id\": \"fb80daf341154f44b06eed52008d631b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"194fae9f28f045ac94643564ef50c9db\",\n          \"target\": \"a37d9e0c9af54fbb93c16fe65d7f33e0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f499ad9ec75d4d029dc327aeada3ff88\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a37d9e0c9af54fbb93c16fe65d7f33e0\",\n          \"target\": \"786cec348ec048a78c4c2c6c4fed5ac2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6932b81a81aa40239c7279a917bb3816\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"786cec348ec048a78c4c2c6c4fed5ac2\",\n          \"target\": \"9ecd2ca830064b97967dca21062c30fc\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1d4e280c848b4646967db37b37aa6971\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c24324650a514984946fed64207f0c24\",\n          \"target\": \"e9cf114b0f3443a88c35756df8073df5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e5675c80eaaf4501b0872eb2375e31a7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e9cf114b0f3443a88c35756df8073df5\",\n          \"target\": \"8c9927f71ad04890afd342b20df99100\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8f26f9a4757b45299f913e7ca3b948d1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8c9927f71ad04890afd342b20df99100\",\n          \"target\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"verify_response=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"d52c9a7bde9841f5a5fe1e96330547a2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8c9927f71ad04890afd342b20df99100\",\n          \"target\": \"3c232bba33f34219b4a554c511faa4da\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"verify_response=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"339812eec1c44e0ba4847f30f4f5e5d0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3c232bba33f34219b4a554c511faa4da\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"83c8dcc16e06476b8bdb8a991918171e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"target\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.questionIndex >= vaVars.questionCount;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"8e5c522a68604d14b48d408ab8d30df0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"target\": \"c24324650a514984946fed64207f0c24\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"confirmationneeded=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Confirmation?\"\n        },\n        {\n          \"id\": \"53df8ead704541ba8b2b12abd376513d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"target\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"confirmationneeded!=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"dfb7472e691f4770a126df453f8bd986\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bab80169de204bdf98d7955c940792c7\",\n          \"target\": \"0f849053babf4775a81a81355823b3db\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4771447e2c9e47a497c00226182f0aa2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0f849053babf4775a81a81355823b3db\",\n          \"target\": \"f9950611be314fe6b0c891e8e65771d2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fe8bc0685a84441e85e38f22c6d8f929\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4761ab4e62324e3cb07ce4efc77ffd1f\",\n          \"target\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9f77c4762dd94e248ecc9bda5e2cf8d0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"target\": \"bbe4918b84a9426abbec7d055f7f555a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.active == true;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"42731da272e043d29de8a18ae4abe8ec\": {\n      \"id\": \"42731da272e043d29de8a18ae4abe8ec\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"surveyInstanceId\",\n      \"label\": \"surveyInstanceId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a019f4d9d2034f1e8ce4413ad6814d4c\": {\n      \"id\": \"a019f4d9d2034f1e8ce4413ad6814d4c\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"surveyQuestions\",\n      \"label\": \"surveyQuestions\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4606ff81e3b1466dba105ac8db0a3ff1\": {\n      \"id\": \"4606ff81e3b1466dba105ac8db0a3ff1\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"-1\"\n      },\n      \"name\": \"questionIndex\",\n      \"label\": \"questionIndex\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"7df928600c0b443a99b74c93a456775a\": {\n      \"id\": \"7df928600c0b443a99b74c93a456775a\",\n      \"name\": \"show_image_scale_question\",\n      \"label\": \"Show Image Scale Question\",\n      \"varType\": \"carousel-image\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"786cec348ec048a78c4c2c6c4fed5ac2\",\n      \"isHidden\": false\n    },\n    \"701eeb0ead3946b4a95fc310996f51d5\": {\n      \"id\": \"701eeb0ead3946b4a95fc310996f51d5\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"questionCount\",\n      \"label\": \"questionCount\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"24bdbf9a7cc4465f9a4f4ab220cdb2c7\": {\n      \"id\": \"24bdbf9a7cc4465f9a4f4ab220cdb2c7\",\n      \"name\": \"show_text_input_question\",\n      \"label\": \"Show Text Input Question\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"secure\": false,\n      \"encryptionSalt\": {\n        \"value\": \"MTYxNDA5ODY2MTE1NSBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"nodeId\": \"a37d9e0c9af54fbb93c16fe65d7f33e0\",\n      \"isHidden\": false\n    },\n    \"e0b97ea5de424260a17d367b713e6233\": {\n      \"id\": \"e0b97ea5de424260a17d367b713e6233\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"{}\"\n      },\n      \"name\": \"surveyAnswers\",\n      \"label\": \"surveyAnswers\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3bd6649edfb04f1d870a98c96130be34\": {\n      \"id\": \"3bd6649edfb04f1d870a98c96130be34\",\n      \"name\": \"show_boolean_question\",\n      \"label\": \"Show Boolean Question\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"6fc30a2a583e40d2a737eee77bb5e73f\",\n      \"isHidden\": false\n    },\n    \"5fa5bab12ab3407fa0243a6e4b1e5b55\": {\n      \"id\": \"5fa5bab12ab3407fa0243a6e4b1e5b55\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"choice,scale,numericscale\"\n      },\n      \"name\": \"choiceTypes\",\n      \"label\": \"choiceTypes\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"43d0530ce6724cde95932f286155da8f\": {\n      \"id\": \"43d0530ce6724cde95932f286155da8f\",\n      \"name\": \"show_choice_question\",\n      \"label\": \"Show Choice Question\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"9ecd2ca830064b97967dca21062c30fc\",\n      \"isHidden\": false\n    },\n    \"953851ffa4294d04859d006bf28a4986\": {\n      \"id\": \"953851ffa4294d04859d006bf28a4986\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionId\",\n      \"label\": \"currentQuestionId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1d2077df93314785b211efe410798278\": {\n      \"id\": \"1d2077df93314785b211efe410798278\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionType\",\n      \"label\": \"currentQuestionType\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"00d261d656824f6f8f150a2025f4eaae\": {\n      \"id\": \"00d261d656824f6f8f150a2025f4eaae\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionMetric\",\n      \"label\": \"currentQuestionMetric\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"601f508ef27a49a18330230ddcc12772\": {\n      \"id\": \"601f508ef27a49a18330230ddcc12772\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionDisplay\",\n      \"label\": \"currentQuestionDisplay\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b56216c2f682436d9e56d9ef36471bcb\": {\n      \"id\": \"b56216c2f682436d9e56d9ef36471bcb\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"introduction\",\n      \"label\": \"introduction\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"0c33e298eff44fc88364434b538e805f\": {\n      \"id\": \"0c33e298eff44fc88364434b538e805f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"endNote\",\n      \"label\": \"endNote\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6545133e2b144832a1ecea359dcc39b9\": {\n      \"id\": \"6545133e2b144832a1ecea359dcc39b9\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"string,long,percentage\"\n      },\n      \"name\": \"textTypes\",\n      \"label\": \"textTypes\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"dd7230f4e76642c4b1676e04fa2af480\": {\n      \"id\": \"dd7230f4e76642c4b1676e04fa2af480\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionMax\",\n      \"label\": \"currentQuestionMax\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3f8a633cceb94a7a8c29a2622f003795\": {\n      \"id\": \"3f8a633cceb94a7a8c29a2622f003795\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionMin\",\n      \"label\": \"currentQuestionMin\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"cf9a19900c7043bd817ff9f5794941ed\": {\n      \"id\": \"cf9a19900c7043bd817ff9f5794941ed\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentAnswerValidation\",\n      \"label\": \"currentAnswerValidation\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"607bdaced73d4d7fab9239c0d64a4210\": {\n      \"id\": \"607bdaced73d4d7fab9239c0d64a4210\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"''\"\n      },\n      \"name\": \"currentAnswerErrorMsg\",\n      \"label\": \"currentAnswerErrorMsg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"bba30ac7475c47cc93da35130951478b\": {\n      \"id\": \"bba30ac7475c47cc93da35130951478b\",\n      \"name\": \"show_attachment_question\",\n      \"label\": \"Show Attachment Question\",\n      \"varType\": \"image\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"64d85b2098094a4fa02f25f7a1444c50\",\n      \"isHidden\": false\n    },\n    \"f7bd8a67b7874023816be1a2eccd99da\": {\n      \"id\": \"f7bd8a67b7874023816be1a2eccd99da\",\n      \"name\": \"show_date_question\",\n      \"label\": \"Show Date Question\",\n      \"varType\": \"date_time\",\n      \"category\": \"vaInputs\",\n      \"mode\": \"date\",\n      \"nodeId\": \"c86161c0b4ea42dab11005dd0f69556a\",\n      \"isHidden\": false\n    },\n    \"d5c40882740949d285112e17f40f7b2c\": {\n      \"id\": \"d5c40882740949d285112e17f40f7b2c\",\n      \"name\": \"show_datetime_question\",\n      \"label\": \"Show Datetime Question\",\n      \"varType\": \"date_time\",\n      \"category\": \"vaInputs\",\n      \"mode\": \"date_time\",\n      \"nodeId\": \"bab80169de204bdf98d7955c940792c7\",\n      \"isHidden\": false\n    },\n    \"1132a62678c24bbda688337615fd51bb\": {\n      \"id\": \"1132a62678c24bbda688337615fd51bb\",\n      \"name\": \"surveyid\",\n      \"label\": \"SurveyId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n      \"isHidden\": false\n    },\n    \"5fdb137d926849b9a9e41edf8bb67509\": {\n      \"id\": \"5fdb137d926849b9a9e41edf8bb67509\",\n      \"name\": \"verify_response\",\n      \"label\": \"Verify Response\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"e9cf114b0f3443a88c35756df8073df5\",\n      \"isHidden\": false\n    },\n    \"e5e2dc8c74a64bf7ba531a2b734bd9cd\": {\n      \"id\": \"e5e2dc8c74a64bf7ba531a2b734bd9cd\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"surveyVerificationMsg\",\n      \"label\": \"surveyVerificationMsg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"75bc445130284002947077d668cac779\": {\n      \"id\": \"75bc445130284002947077d668cac779\",\n      \"name\": \"confirmationneeded\",\n      \"label\": \"ConfirmationNeeded\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n      \"isHidden\": false\n    },\n    \"f4cfc3cbbdca4d46b23a1de57709a8e0\": {\n      \"id\": \"f4cfc3cbbdca4d46b23a1de57709a8e0\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"true\"\n      },\n      \"name\": \"currentQuestionMandatory\",\n      \"label\": \"currentQuestionMandatory\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"ba2a161b94a3468a86603955cca630a1\": {\n      \"id\": \"ba2a161b94a3468a86603955cca630a1\",\n      \"name\": \"savequestionstocontext\",\n      \"label\": \"SaveQuestionsToContext\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n      \"isHidden\": false\n    },\n    \"1ebd3fa354824ebcb2abd32c7f5a08ee\": {\n      \"id\": \"1ebd3fa354824ebcb2abd32c7f5a08ee\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_postchat_user_id\",\n      \"label\": \"_topic_postchat_user_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fbdedb6037d443fc94ac909130d72657\": {\n      \"id\": \"fbdedb6037d443fc94ac909130d72657\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"surveyName\",\n      \"label\": \"surveyName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"62b3a6b4779d449faee2e5abee5678a5\": {\n      \"id\": \"62b3a6b4779d449faee2e5abee5678a5\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_pre_chat_survey_name\",\n      \"label\": \"LiveAgent_pre_chat_survey_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b712f462443f422882112475625c1f51\": {\n      \"id\": \"b712f462443f422882112475625c1f51\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_post_chat_survey_name\",\n      \"label\": \"LiveAgent_post_chat_survey_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c561d907f23a4ee485d105e3deefe041\": {\n      \"id\": \"c561d907f23a4ee485d105e3deefe041\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_pre_assessment_instance\",\n      \"label\": \"LiveAgent_pre_assessment_instance\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5f4fab2392e34755a790d59670b35294\": {\n      \"id\": \"5f4fab2392e34755a790d59670b35294\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_post_assessment_instance\",\n      \"label\": \"LiveAgent_post_assessment_instance\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"b0a2dbc7899742b19e9f2d904b7bfc3e\": {\n      \"id\": \"b0a2dbc7899742b19e9f2d904b7bfc3e\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"defaultSurveyName\",\n      \"label\": \"defaultSurveyName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9c7e90dca34b47489835d0bcdc8e4933\": {\n      \"id\": \"9c7e90dca34b47489835d0bcdc8e4933\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionFieldValidator\",\n      \"label\": \"currentQuestionFieldValidator\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"217beaae2c9b4289859d6b32fc9877e6\": {\n      \"id\": \"217beaae2c9b4289859d6b32fc9877e6\",\n      \"name\": \"show_reference_question\",\n      \"label\": \"Show Reference Question\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"0f849053babf4775a81a81355823b3db\",\n      \"isHidden\": false\n    },\n    \"a7b460d515ca4a2087c92d2c8bf5fbc9\": {\n      \"id\": \"a7b460d515ca4a2087c92d2c8bf5fbc9\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionReferenceTable\",\n      \"label\": \"currentQuestionReferenceTable\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6ec01bc01b7144ec90530b7f9af69bb2\": {\n      \"id\": \"6ec01bc01b7144ec90530b7f9af69bb2\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionReferenceCondition\",\n      \"label\": \"currentQuestionReferenceCondition\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3f44cb42666b408fbb6f952fe939d920\": {\n      \"id\": \"3f44cb42666b408fbb6f952fe939d920\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"active\",\n      \"label\": \"active\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_topic_11d818213b77330074bc456993efc4c2","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Survey","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"public","description":"Presents a greeting to the user at the beginning of a conversation.","context_profiles":"","sys_updated_on":"2021-04-20 05:50:41","title":"","type":"SETUP_TOPIC","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"120e685053130010cf8cddeeff7b12ab","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-02-26 22:22:08","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Greetings.","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"Greetings","model_type":"","sys_mod_count":"4","nlu_intent_label":"","sys_tags":"","graph":"{\n      \"graph_api_version\": \"1.0.34\",\n      \"goals\": {\n      \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n      \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n      \"bfd9ca3b74264a68a0b8543159566d20\": {\n      \"id\": \"bfd9ca3b74264a68a0b8543159566d20\",\n      \"stepType\": \"Start\",\n      \"name\": \"Start\",\n      \"greetingResponse\": {\n      \"value\": \"\",\n      \"mode\": \"simple\"\n      }\n      },\n      \"a3817a5f7ca7439b83707b20c30fcf9c\": {\n      \"id\": \"a3817a5f7ca7439b83707b20c30fcf9c\",\n      \"stepType\": \"TerminateGoal\",\n      \"name\": \"End\",\n      \"confirmationMessage\": {\n      \"mode\": \"simple\",\n      \"value\": \"\"\n      }\n      },\n      \"d2327c9f0cb74a2983f695746d52d0f2\": {\n      \"id\": \"d2327c9f0cb74a2983f695746d52d0f2\",\n      \"stepType\": \"TextOutput\",\n      \"name\": \"Show Greeting Message\",\n      \"value\": {\n      \"value\": [\n      {\n      \"type\": \"paragraph\",\n      \"children\": [\n      {\n      \"text\": \"\"\n      },\n      {\n      \"type\": \"datapill\",\n      \"dataPill\": {\n      \"value\": \"{{vaVars.greeting_message}}\",\n      \"displayValue\": \"vaVarsgreeting_message\"\n      },\n      \"children\": [\n      {\n      \"text\": \"\"\n      }\n      ]\n      },\n      {\n      \"text\": \"\"\n      }\n      ]\n      }\n      ],\n      \"mode\": \"simple\"\n      },\n      \"applicability\": {\n      \"mode\": \"script\",\n      \"value\": \"\"\n      },\n      \"secure\": false\n      },\n      \"d9f84b23b3dc4d9891ddac278259decb\": {\n      \"id\": \"d9f84b23b3dc4d9891ddac278259decb\",\n      \"name\": \"Get Greeting Message\",\n      \"script\": \"(function execute() {\\n    vaVars.greeting_message = vaSystem.getGreetingMessage();\\n})()\\n\",\n      \"stepType\": \"ScriptAction\",\n      \"applicability\": {\n      \"mode\": \"script\",\n      \"value\": \"\"\n      }\n      },\n      \"3b0fa5a45fa94052bd1b546ea1f7303b\": {\n      \"id\": \"3b0fa5a45fa94052bd1b546ea1f7303b\",\n      \"name\": \"Send Topic Picker\",\n      \"script\": \"(function execute() {\\n    var greetingMessage = vaSystem.getTopicSelectionMessage();\\n    vaSystem.sendTopicPickerControl(greetingMessage);\\n})()\\n\",\n      \"stepType\": \"ScriptAction\",\n      \"applicability\": {\n      \"mode\": \"query\",\n      \"value\": \"\"\n      }\n      },\n      \"60cdf6a874894c84841d99a073fbba0b\": {\n      \"id\": \"60cdf6a874894c84841d99a073fbba0b\",\n      \"stepType\": \"Decision\",\n      \"name\": \"Decision\"\n      },\n      \"6bd621fcf54841abb81d20cde33081bb\": {\n      \"id\": \"6bd621fcf54841abb81d20cde33081bb\",\n      \"stepType\": \"Decision\",\n      \"name\": \"Decision\"\n      },\n      \"0896444786e74025bfa890732d0fbd24\": {\n      \"id\": \"0896444786e74025bfa890732d0fbd24\",\n      \"name\": \"Topic Discovery\",\n      \"script\": \"(function execute() {\\n    vaSystem.topicDiscovery();\\n})()\\n\",\n      \"stepType\": \"ScriptAction\",\n      \"applicability\": {\n      \"value\": \"\",\n      \"mode\": \"query\"\n      }\n      }\n      },\n      \"edges\": [\n      {\n      \"id\": \"f2ee6b77d3094e7a909569c07969d920\",\n      \"edgeType\": \"Edge\",\n      \"source\": \"d9f84b23b3dc4d9891ddac278259decb\",\n      \"target\": \"d2327c9f0cb74a2983f695746d52d0f2\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\"\n      },\n      {\n      \"id\": \"a32eac00773045f6a9490f13b8896a8c\",\n      \"edgeType\": \"Edge\",\n      \"source\": \"d2327c9f0cb74a2983f695746d52d0f2\",\n      \"target\": \"3b0fa5a45fa94052bd1b546ea1f7303b\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\"\n      },\n      {\n      \"id\": \"3c89a30f457c488eaaa1ae8951b10a32\",\n      \"edgeType\": \"Edge\",\n      \"source\": \"3b0fa5a45fa94052bd1b546ea1f7303b\",\n      \"target\": \"a3817a5f7ca7439b83707b20c30fcf9c\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\"\n      },\n      {\n      \"id\": \"36c63e9964114b97b4813b379293d4eb\",\n      \"edgeType\": \"Edge\",\n      \"source\": \"bfd9ca3b74264a68a0b8543159566d20\",\n      \"target\": \"60cdf6a874894c84841d99a073fbba0b\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\"\n      },\n      {\n      \"id\": \"8ab72eaddb6b41df879b12ae8db8cb1a\",\n      \"edgeType\": \"Branch\",\n      \"source\": \"60cdf6a874894c84841d99a073fbba0b\",\n      \"target\": \"6bd621fcf54841abb81d20cde33081bb\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\",\n      \"expression\": {\n      \"mode\": \"script\",\n      \"value\": \"(function execute() {\\n    return gs.nil(vaVars.global_search_text)\\n})()\\n\"\n      },\n      \"label\": \"Search Text Not Set\"\n      },\n      {\n      \"id\": \"5a1fbe26a3694a50bb201a436a41dc70\",\n      \"edgeType\": \"Branch\",\n      \"source\": \"6bd621fcf54841abb81d20cde33081bb\",\n      \"target\": \"d9f84b23b3dc4d9891ddac278259decb\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\",\n      \"expression\": {\n      \"mode\": \"script\",\n      \"value\": \"(function execute() {\\n    return !vaVars.global_preChatExecuted;\\n})()\\n\"\n      },\n      \"label\": \"Pre-chat not executed\"\n      },\n      {\n      \"id\": \"e7fb7b1648f345ac917988f1ea6935db\",\n      \"edgeType\": \"Branch\",\n      \"source\": \"6bd621fcf54841abb81d20cde33081bb\",\n      \"target\": \"3b0fa5a45fa94052bd1b546ea1f7303b\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\",\n      \"expression\": {\n      \"mode\": \"script\",\n      \"value\": \"(function execute() {\\n    return vaVars.global_preChatExecuted;\\n})()\\n\"\n      },\n      \"label\": \"Pre-chat executed\"\n      },\n      {\n      \"id\": \"f4e82879a84849dbb74b615c5ef5ef1d\",\n      \"edgeType\": \"Branch\",\n      \"source\": \"60cdf6a874894c84841d99a073fbba0b\",\n      \"target\": \"0896444786e74025bfa890732d0fbd24\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\",\n      \"expression\": {\n      \"mode\": \"script\",\n      \"value\": \"(function execute() {\\n    return !gs.nil(vaVars.global_search_text)\\n})()\\n\"\n      },\n      \"label\": \"Search Text Set\"\n      },\n      {\n      \"id\": \"3808fdfd503f48409c96a5e0867ab4f7\",\n      \"edgeType\": \"Edge\",\n      \"source\": \"0896444786e74025bfa890732d0fbd24\",\n      \"target\": \"a3817a5f7ca7439b83707b20c30fcf9c\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\"\n      }\n      ]\n      }\n      },\n      \"variables\": {\n      \"a76371dc6b5e47cf8929f621c0766d2c\": {\n      \"id\": \"a76371dc6b5e47cf8929f621c0766d2c\",\n      \"value\": {\n      \"mode\": \"simple\",\n      \"value\": \"\"\n      },\n      \"name\": \"greeting_message\",\n      \"label\": \"greeting_message\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n      },\n      \"3130eb193dc445d3ba59fa245cebc4e3\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"3130eb193dc445d3ba59fa245cebc4e3\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n      }\n      }\n      }","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_topic_120e685053130010cf8cddeeff7b12ab","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Greetings.","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"public","description":"Presents an ending message to the user when the conversation is done.","context_profiles":"","sys_updated_on":"2023-05-02 11:22:16","title":"","type":"SETUP_TOPIC","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"1acd645053130010cf8cddeeff7b12cd","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-02-26 22:21:03","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Closing Conversation.","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"Closing Conversation","model_type":"","sys_mod_count":"37","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.46\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"972110b2590b4356b3a031d4f7cb9012\": {\n          \"id\": \"972110b2590b4356b3a031d4f7cb9012\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"166984db1c57489dab720923fe6859ee\": {\n          \"id\": \"166984db1c57489dab720923fe6859ee\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"8d50a162291448b890a6f6f3e02596a4\": {\n          \"id\": \"8d50a162291448b890a6f6f3e02596a4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Closing Message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return vaSystem.getClosingMessage();\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaContext.suppress_end_message) || vaContext.suppress_end_message != \\\"true\\\";\\n})()\"\n          },\n          \"secure\": false\n        },\n        \"7d750541738445b797f5ca4d6554fdc8\": {\n          \"id\": \"7d750541738445b797f5ca4d6554fdc8\",\n          \"name\": \"Close Conversation\",\n          \"script\": \"(function execute() {\\n    vaSystem.endConversation();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n     if (vaVars.didConnectToLiveAgent) {\\n         return false;\\n     }\\n})()\\n\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"415b1517f7814431b30e3c9584cd25ce\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8d50a162291448b890a6f6f3e02596a4\",\n          \"target\": \"7d750541738445b797f5ca4d6554fdc8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a80f24c74c7d4db08cb2255349a25f67\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7d750541738445b797f5ca4d6554fdc8\",\n          \"target\": \"166984db1c57489dab720923fe6859ee\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b6c897c2939c4efaafd75c3f1da9a693\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"972110b2590b4356b3a031d4f7cb9012\",\n          \"target\": \"8d50a162291448b890a6f6f3e02596a4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"3b29e6aaa255448c94f2855def5f82fb\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"3b29e6aaa255448c94f2855def5f82fb\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_topic_1acd645053130010cf8cddeeff7b12cd","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Closing Conversation.","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"public","description":"Enables users to request a live agent and view items that a live agent can assist with.","context_profiles":"","sys_updated_on":"2022-09-02 09:25:59","title":"","type":"SETUP_TOPIC","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"script","nlu_model":"","sys_id":"212ee85053130010cf8cddeeff7b1280","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-02-26 22:22:38","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Live Agent Support.","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"agent,live agent,Live Agent Support","model_type":"","sys_mod_count":"26","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"5eb7936e8dcc4f50ad733deb0614cbac\": {\n          \"id\": \"5eb7936e8dcc4f50ad733deb0614cbac\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"0bf3054ca10545998d3e712db776c858\": {\n          \"id\": \"0bf3054ca10545998d3e712db776c858\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"86ca2cdb206c4d2fa6dfcacd8fd2883b\": {\n          \"id\": \"86ca2cdb206c4d2fa6dfcacd8fd2883b\",\n          \"name\": \"Connect To Agent\",\n          \"script\": \"(function execute() {\\n    vaSystem.connectToAgent();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"1334d05c3c1148caa2fa2060bf408d7d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5eb7936e8dcc4f50ad733deb0614cbac\",\n          \"target\": \"86ca2cdb206c4d2fa6dfcacd8fd2883b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1d75ef54e6034402b28a090cddc283fe\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"86ca2cdb206c4d2fa6dfcacd8fd2883b\",\n          \"target\": \"0bf3054ca10545998d3e712db776c858\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"90178d4516494d3c82f1a08081cdc6ef\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"90178d4516494d3c82f1a08081cdc6ef\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_topic_212ee85053130010cf8cddeeff7b1280","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Live Agent Support.","applicability":"(function execute() {\n    if (typeof vaContext === \"undefined\")\n        return true;\n\n    if(vaContext.disable_live_agent == \"true\") \n        return false;\n        \n    return true;\n\n})()\n","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"","description":"Enables users to provide feedback on their conversational experience, before the conversation ends.","context_profiles":"","sys_updated_on":"2024-06-26 18:43:42","title":"Now Assist - Virtual Agent Feedback.","type":"SETUP_TOPIC","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"28deba91b74302101b828443ae11a94b","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2024-06-26 18:42:09","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Now Assist - Virtual Agent Feedback.","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"llm","sys_mod_count":"1","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.67\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"2d6092adc41d408f95234de56a91e2fb\": {\n          \"id\": \"2d6092adc41d408f95234de56a91e2fb\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"8b1f7ce5e11e495aa0ea30c24f18b515\": {\n          \"id\": \"8b1f7ce5e11e495aa0ea30c24f18b515\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"72ea8334096a4e08aecc9481f3c6034a\": {\n          \"id\": \"72ea8334096a4e08aecc9481f3c6034a\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Survey-LLM\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"useTemplateTopic\": false,\n          \"reusableTopicChoice\": \"Survey-LLM\",\n          \"reusableTopicId\": \"77a94e44ff2202101b82157c03cb147e\",\n          \"inputs\": {\n            \"surveyid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"a259f6969f3220100d74d46d842e702a\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"confirmationneeded\": {\n              \"value\": \"false\",\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            },\n            \"savequestionstocontext\": {\n              \"value\": \"false\",\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            }\n          },\n          \"variableIds\": [],\n          \"dynamicTopicBlockName\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputDynamicModal\": {},\n          \"outputDynamicModal\": {},\n          \"outputs\": []\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"87a00089704b47ea8f348147811c01a3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2d6092adc41d408f95234de56a91e2fb\",\n          \"target\": \"72ea8334096a4e08aecc9481f3c6034a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8fa2a7b2f988433296e468440c99c6ad\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"72ea8334096a4e08aecc9481f3c6034a\",\n          \"target\": \"8b1f7ce5e11e495aa0ea30c24f18b515\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_topic_28deba91b74302101b828443ae11a94b","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Now Assist - Virtual Agent Feedback.","applicability":"","category":"","sys_policy":""},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"Enables users to request a live agent.","context_profiles":"","sys_updated_on":"2019-11-19 18:52:04","title":"","type":"","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"","nlu_model":"","sys_id":"2ad78361b3633300dbbf6030c6a8dc14","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2019-08-28 20:51:07","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Transfer to Live Agent","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"","sys_mod_count":"14","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"goals\": {\n    \"6ab05becbeca4d1eadc1dc45f67a585f\": {\n      \"id\": \"6ab05becbeca4d1eadc1dc45f67a585f\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"7ddf3079bf354d51b8ad69c9ee2b9b47\": {\n          \"id\": \"7ddf3079bf354d51b8ad69c9ee2b9b47\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"b362738ee9b44120808fd96cee071fd4\": {\n          \"id\": \"b362738ee9b44120808fd96cee071fd4\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"d9523282a03a4451ab4cf107b0059e14\": {\n          \"id\": \"d9523282a03a4451ab4cf107b0059e14\",\n          \"name\": \"Connect To Agent\",\n          \"script\": \"(function execute() {\\n    vaSystem.connectToAgent();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"4d0656000fcf43648957584a49e7809a\": {\n          \"id\": \"4d0656000fcf43648957584a49e7809a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"2606190dfdc543d0ab5470f218a527f9\": {\n          \"id\": \"2606190dfdc543d0ab5470f218a527f9\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"User chooses an option\",\n          \"prompt\": {\n            \"value\": \"Let's see if I got this right. Do you want me to connect you to an agent?\",\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"b4da027220a64bd98167cbb5520bd0f8\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"184d0d285468478b9dd3431e35d3f0ec\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7ddf3079bf354d51b8ad69c9ee2b9b47\",\n          \"target\": \"2606190dfdc543d0ab5470f218a527f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7dc547c442a6442ca7600018bc1b7117\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4d0656000fcf43648957584a49e7809a\",\n          \"target\": \"d9523282a03a4451ab4cf107b0059e14\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"user_chooses_an_option=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"74d44aa3a5374fde9c538803ba209db2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d9523282a03a4451ab4cf107b0059e14\",\n          \"target\": \"b362738ee9b44120808fd96cee071fd4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dca52621380c45c5a080b7cd68f1ee3e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4d0656000fcf43648957584a49e7809a\",\n          \"target\": \"b362738ee9b44120808fd96cee071fd4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"user_chooses_an_option=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"1a77aac0ae7c4efd8cd280d4b815df1e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2606190dfdc543d0ab5470f218a527f9\",\n          \"target\": \"4d0656000fcf43648957584a49e7809a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"graph_api_version\": \"1.0.14\",\n  \"variables\": {\n    \"b4da027220a64bd98167cbb5520bd0f8\": {\n      \"id\": \"b4da027220a64bd98167cbb5520bd0f8\",\n      \"name\": \"user_chooses_an_option\",\n      \"label\": \"User Chooses An Option\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_topic_2ad78361b3633300dbbf6030c6a8dc14","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Transfer to Live Agent","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"Contextual search to search only knowledge articles that have been made with the FAQ template.","context_profiles":"","sys_updated_on":"2024-10-02 21:00:47","title":"FAQ Conversation Builder","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"3596671a3b3110102c67667993efc489","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-07-06 23:33:17","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"FAQ Conversation Builder","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"nlu_keyword","sys_mod_count":"144","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.68\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"f6c73c5de66f4ee8a67cd992bac57ace\": {\n          \"id\": \"f6c73c5de66f4ee8a67cd992bac57ace\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"name\": \"query\",\n              \"value\": \"\",\n              \"id\": \"d3b4a2dfabae4582a6bde857ca9dddf4\",\n              \"disabled\": true,\n              \"referenced\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            },\n            {\n              \"name\": \"portal\",\n              \"value\": \"\",\n              \"id\": \"f0d3a9136af949e99faf47e6fecc188d\",\n              \"referenced\": false,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": false\n            },\n            {\n              \"name\": \"kb_knowledge_base\",\n              \"value\": \"\",\n              \"id\": \"502f202695044ea883cefa9ceb6de424\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": false\n            }\n          ],\n          \"variableIds\": [\n            \"d3b4a2dfabae4582a6bde857ca9dddf4\",\n            \"f0d3a9136af949e99faf47e6fecc188d\",\n            \"502f202695044ea883cefa9ceb6de424\"\n          ]\n        },\n        \"ab1eb0cf7f2c4b1fb17f116198a2fa8b\": {\n          \"id\": \"ab1eb0cf7f2c4b1fb17f116198a2fa8b\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"Results_Returned\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.results_returned}}\",\n                        \"displayValue\": \"vaVarsresults_returned\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            },\n            {\n              \"key\": \"Results_Helpful\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.results_helpful}}\",\n                        \"displayValue\": \"vaVarsresults_helpful\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            }\n          ]\n        },\n        \"000df41e27ee439e8622ae78cf59ae8e\": {\n          \"id\": \"000df41e27ee439e8622ae78cf59ae8e\",\n          \"name\": \"FAQ Conversation Builder\",\n          \"script\": \"(function execute() {\\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\\n    var response = contextualSearch.search(\\n        vaVars.search_context_sys_id, vaInputs.query, vaInputs.kb_knowledge_base\\n    );\\n    var success = contextualSearch.processSearchResponse(response);\\n    if (!success) {\\n        return;\\n    }\\n\\n    var relevantSearchResults = contextualSearch.processGeneralResults(response, 6, -2, vaSystem);\\n    vaVars.searchResultCount = relevantSearchResults.length;\\n    vaVars.search_result_json_string = JSON.stringify(relevantSearchResults);\\n    vaVars.index = 0;\\n    return;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"39362b36cffd49a6847adfaed75284eb\": {\n          \"id\": \"39362b36cffd49a6847adfaed75284eb\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Did the search return results?\"\n        },\n        \"e857c2794e864bb88fe9fe6835424228\": {\n          \"id\": \"e857c2794e864bb88fe9fe6835424228\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Did Info Help\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"Did this information help you?\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"24c1f84aa4554693934e136b10052132\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"25c9bf78462c43ac8f222941c32a4f85\": {\n          \"id\": \"25c9bf78462c43ac8f222941c32a4f85\",\n          \"name\": \"Record Outputs\",\n          \"script\": \"(function execute() {\\n    if(vaInputs.did_info_help == 'true') {\\n        vaVars.results_helpful = true;\\n    } else {\\n        vaVars.results_helpful = false;\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"97e6ba4ac4994fa3b6d51d11a44b27f9\": {\n          \"id\": \"97e6ba4ac4994fa3b6d51d11a44b27f9\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Found Information\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"text\": \"I found this information that might help you\"\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"a121a58686e349389bfb2d87c500bbf4\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Choose FAQ\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"I found some information that might help you\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"b8d263516fe442cab62a76e97f88ea85\",\n          \"id\": \"a121a58686e349389bfb2d87c500bbf4\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\\n\\n    for (i = 0; i < searchJsonObj.length; i++) {\\n        options.push({ 'value': i, 'label': searchJsonObj[i].title });\\n    }\\n\\n    options.push({ 'value': '-1', 'label': 'I\\\\'m looking for something else' })\\n\\n    return options;\\n})()\\n\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"No records found.\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\\n\\n    for (i = 0; i < searchJsonObj.length; i++) {\\n        options.push({ 'value': i, 'label': searchJsonObj[i].title });\\n    }\\n\\n    options.push({ 'value': '-1', 'label': 'I\\\\'m looking for something else' })\\n\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"20a65688fa144d31b08edbcc4221900c\": {\n          \"id\": \"20a65688fa144d31b08edbcc4221900c\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"715713859aad4988b21d989932fd5c4d\": {\n          \"id\": \"715713859aad4988b21d989932fd5c4d\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Display FAQ\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n   // relevant properties to get record\\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\\n    var resultNumber = searchJsonObj[vaVars.selected_faq].meta.number;\\n    var faqUtil = new global.VAFaqUtil();\\n    // build the header text\\n    header_text =  faqUtil.buildHeaderText(resultNumber, vaVars.selected_type);\\n    \\n    header_text += '<br><br>';\\n\\n    var linkBuilder = new global.cxs_SearchResultLinkBuilder();\\n    var link = linkBuilder.build(searchJsonObj[vaVars.selected_faq], vaInputs.portal);\\n\\n    header_text += '<a href=\\\"'+link.link+'\\\" target=\\\"_blank\\\" >'+ 'Read full article'+ '</a>';\\n    //header_text += '[Read full article]('+link.link+')'\\n    return header_text;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"b4f61440bc6a4ed285c0b41004176975\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"715713859aad4988b21d989932fd5c4d\",\n          \"target\": \"e857c2794e864bb88fe9fe6835424228\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cfdd788f234f41439c62550133fb69d5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e857c2794e864bb88fe9fe6835424228\",\n          \"target\": \"25c9bf78462c43ac8f222941c32a4f85\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bfced8c9d7844407861578b25adeda19\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"39362b36cffd49a6847adfaed75284eb\",\n          \"target\": \"a121a58686e349389bfb2d87c500bbf4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if(vaVars.searchResultCount > 1) {\\n        vaVars.results_returned = true;\\n        return true;\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"More than one\"\n        },\n        {\n          \"id\": \"6c8ed8984ecf453d99b5cbb33e701466\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"39362b36cffd49a6847adfaed75284eb\",\n          \"target\": \"ab1eb0cf7f2c4b1fb17f116198a2fa8b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (!(vaVars.searchResultCount > 0)) {\\n        vaVars.results_helpful = false;\\n        vaVars.results_returned = false;\\n        return true;\\n    }\\n    return false;\\n\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"8b9293ae660f4e2ab52c3a4019775fa9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f6c73c5de66f4ee8a67cd992bac57ace\",\n          \"target\": \"000df41e27ee439e8622ae78cf59ae8e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f33dceaf22d74448a5a0bf72c97b007b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"000df41e27ee439e8622ae78cf59ae8e\",\n          \"target\": \"39362b36cffd49a6847adfaed75284eb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"72e1ebb1e9b24ab09473e85a9d2ce7c7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"25c9bf78462c43ac8f222941c32a4f85\",\n          \"target\": \"ab1eb0cf7f2c4b1fb17f116198a2fa8b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fa92125b6d164b67ad7396861735142f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"39362b36cffd49a6847adfaed75284eb\",\n          \"target\": \"97e6ba4ac4994fa3b6d51d11a44b27f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if(vaVars.searchResultCount === 1) {\\n        vaVars.results_returned = true;\\n        vaVars.selected_faq = 0;\\n        vaVars.selected_type = 'single';\\n        return true;\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"Found one\"\n        },\n        {\n          \"id\": \"07848213c0474b9e9c8e439aac465b3d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a121a58686e349389bfb2d87c500bbf4\",\n          \"target\": \"20a65688fa144d31b08edbcc4221900c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7fcab0167c41412d83df7cb5525fefaa\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"20a65688fa144d31b08edbcc4221900c\",\n          \"target\": \"ab1eb0cf7f2c4b1fb17f116198a2fa8b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.choose_faq.getValue() == '-1';\\n})()\\n\"\n          },\n          \"label\": \"Something else\"\n        },\n        {\n          \"id\": \"0cb304cf11eb4faa8b483861fd379591\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"20a65688fa144d31b08edbcc4221900c\",\n          \"target\": \"715713859aad4988b21d989932fd5c4d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaInputs.choose_faq.getValue() != '-1') {\\n        // need parseInt because it was keeping decimals\\n        vaVars.selected_faq = parseInt(vaInputs.choose_faq.getValue());\\n        vaVars.selected_type = 'multi';\\n        return true;\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"Selected one\"\n        },\n        {\n          \"id\": \"e4d6570f5f1743589f0d870a9781250b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"97e6ba4ac4994fa3b6d51d11a44b27f9\",\n          \"target\": \"715713859aad4988b21d989932fd5c4d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"d3b4a2dfabae4582a6bde857ca9dddf4\": {\n      \"id\": \"d3b4a2dfabae4582a6bde857ca9dddf4\",\n      \"name\": \"query\",\n      \"label\": \"Query\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"f6c73c5de66f4ee8a67cd992bac57ace\",\n      \"isHidden\": false\n    },\n    \"f0d3a9136af949e99faf47e6fecc188d\": {\n      \"id\": \"f0d3a9136af949e99faf47e6fecc188d\",\n      \"name\": \"portal\",\n      \"label\": \"Portal\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"f6c73c5de66f4ee8a67cd992bac57ace\",\n      \"isHidden\": false\n    },\n    \"502f202695044ea883cefa9ceb6de424\": {\n      \"id\": \"502f202695044ea883cefa9ceb6de424\",\n      \"name\": \"kb_knowledge_base\",\n      \"label\": \"Kb_knowledge_base\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"f6c73c5de66f4ee8a67cd992bac57ace\",\n      \"isHidden\": false\n    },\n    \"015b41a0d2854206a6d16e9e0d1a7847\": {\n      \"id\": \"015b41a0d2854206a6d16e9e0d1a7847\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"search_result_json_string\",\n      \"label\": \"search_result_json_string\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"da1f29f67f014b7ab38be2af098d512f\": {\n      \"id\": \"da1f29f67f014b7ab38be2af098d512f\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"index\",\n      \"label\": \"index\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"cf0ea9b6e582499e8d27fa193e5263aa\": {\n      \"id\": \"cf0ea9b6e582499e8d27fa193e5263aa\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"3\"\n      },\n      \"name\": \"limit\",\n      \"label\": \"limit\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c5d7293c470648058916b524b55e36b8\": {\n      \"id\": \"c5d7293c470648058916b524b55e36b8\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"753c0f743b4290102c67667993efc459\"\n      },\n      \"name\": \"search_context_sys_id\",\n      \"label\": \"search_context_sys_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"286c3dc4e01c41eb8ce96e221054dbb6\": {\n      \"id\": \"286c3dc4e01c41eb8ce96e221054dbb6\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"searchResultCount\",\n      \"label\": \"searchResultCount\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4f43a1dc506f41a0be90761ebc0be688\": {\n      \"id\": \"4f43a1dc506f41a0be90761ebc0be688\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"results_returned\",\n      \"label\": \"results_returned\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4d2ef878c61e4658b0ca3b874ead7cce\": {\n      \"id\": \"4d2ef878c61e4658b0ca3b874ead7cce\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"results_helpful\",\n      \"label\": \"results_helpful\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"dbc9b074f96146b6ba9d234490a75461\": {\n      \"id\": \"dbc9b074f96146b6ba9d234490a75461\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"DEBUG_JSON_RESULT\",\n      \"label\": \"DEBUG_JSON_RESULT\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"24c1f84aa4554693934e136b10052132\": {\n      \"id\": \"24c1f84aa4554693934e136b10052132\",\n      \"name\": \"did_info_help\",\n      \"label\": \"Did Info Help\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"e857c2794e864bb88fe9fe6835424228\",\n      \"isHidden\": false\n    },\n    \"b8d263516fe442cab62a76e97f88ea85\": {\n      \"id\": \"b8d263516fe442cab62a76e97f88ea85\",\n      \"name\": \"choose_faq\",\n      \"label\": \"Choose FAQ\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"a121a58686e349389bfb2d87c500bbf4\",\n      \"isHidden\": false\n    },\n    \"c8fc39ab3cfc42d0ab37505be696ee0d\": {\n      \"id\": \"c8fc39ab3cfc42d0ab37505be696ee0d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"selected_faq\",\n      \"label\": \"selected_faq\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"66f751f675a14311a4fca3326995e602\": {\n      \"id\": \"66f751f675a14311a4fca3326995e602\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return 'none';\\n})()\\n\"\n      },\n      \"name\": \"selected_type\",\n      \"label\": \"selected_type\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_topic_3596671a3b3110102c67667993efc489","channels":"","source_topic_id":"","expose_on_palette":"false","name":"FAQ Conversation Builder","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"","context_profiles":"","sys_updated_on":"2024-10-02 19:21:41","title":"Request Catalog Item","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"3bffc2a5c363330012d1758a7ff57ebc","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2019-08-28 16:47:05","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Request Catalog Item","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"anurag.vesangi","live_agent":"false","key_phrases":"","model_type":"nlu_keyword","sys_mod_count":"262","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.68\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"df79c5242c244f1dab851ef7285d517f\": {\n          \"id\": \"df79c5242c244f1dab851ef7285d517f\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"name\": \"catalog_item_id\",\n              \"value\": \"\",\n              \"id\": \"d96cb7476e9a411d9217a326591f0d9e\",\n              \"disabled\": true,\n              \"referenced\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            },\n            {\n              \"name\": \"execute_contextual_search\",\n              \"value\": \"false\",\n              \"id\": \"e41adc12f2bf498d9937ad6c1d05c844\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": false\n            },\n            {\n              \"name\": \"confirm_catalog_item\",\n              \"value\": \"true\",\n              \"id\": \"d77c358c72074a6c941a40b1e7ffbd34\",\n              \"referenced\": false,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": false\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"false\",\n              \"id\": \"8741e0dddb4d47e58f869783457c45aa\",\n              \"name\": \"show_end_state_card\",\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"d96cb7476e9a411d9217a326591f0d9e\",\n            \"e41adc12f2bf498d9937ad6c1d05c844\",\n            \"d77c358c72074a6c941a40b1e7ffbd34\",\n            \"8741e0dddb4d47e58f869783457c45aa\"\n          ]\n        },\n        \"8251855bc8dc431697812132c644503b\": {\n          \"id\": \"8251855bc8dc431697812132c644503b\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"record_id\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.record_id}}\",\n                        \"displayValue\": \"vaVarsrecord_id\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": false\n            },\n            {\n              \"key\": \"record_table\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.record_table}}\",\n                        \"displayValue\": \"vaVarsrecord_table\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": false\n            },\n            {\n              \"key\": \"variables\",\n              \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    if (!itemJson || !itemJson.variables)\\n        return '';\\n    var variablesObj = {};\\n    for (i = 0; i < itemJson.variables.length; i++) {\\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\\n    }\\n    return JSON.stringify(variablesObj);\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": false\n            }\n          ]\n        },\n        \"207e1d9738824bf8b50999392aa602e0\": {\n          \"id\": \"207e1d9738824bf8b50999392aa602e0\",\n          \"name\": \"Set Selected Item\",\n          \"script\": \"(function execute() {\\n    var itemId = vaInputs.catalog_item_id.getValue();\\n    var itemJSON = new sn_sc.CatalogConversationHelper().getItem(itemId);\\n    vaVars.itemJSON = JSON.stringify(itemJSON);\\n    vaVars.itemName = itemJSON.name;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"73d7ac3ed17042f5b5507bfb1c8b7444\": {\n          \"id\": \"73d7ac3ed17042f5b5507bfb1c8b7444\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Item Description\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var response = gs.getMessageLang(\\\"Here are some more details about {0}\\\", vaContext.getRequesterLang(), [vaVars.itemName]);\\n    if (itemJson.description) \\n        return response + itemJson.description;\\n\\n    return gs.getMessageLang(\\\"Selected {0}\\\", vaContext.getRequesterLang(), [vaVars.itemName]);\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"bd3466c304de408183ccfc9dcd0bcb19\": {\n          \"id\": \"bd3466c304de408183ccfc9dcd0bcb19\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Proceed\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"Should I proceed with this?\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"9cab67ed47ce436bb12581ee7ceefb00\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"eab57865501d4f008c88c7a3e41e1f29\": {\n          \"id\": \"eab57865501d4f008c88c7a3e41e1f29\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"9c32307114d54b92acebfe39291b1057\": {\n          \"id\": \"9c32307114d54b92acebfe39291b1057\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"0b36051dccc04f43bfadae8b91720f27\": {\n          \"id\": \"0b36051dccc04f43bfadae8b91720f27\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"b29723c02c774bfc92b637faa4f34233\": {\n          \"id\": \"b29723c02c774bfc92b637faa4f34233\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Start Questions\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"OK, let's finish up your request.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"b83a3b7e4d694dea99a76acd529af6f9\": {\n          \"id\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"54a0cb0947934f549dfd92844411b3c9\": {\n          \"id\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"03ddb6e3316247e1a29ee3e88693b877\": {\n          \"id\": \"03ddb6e3316247e1a29ee3e88693b877\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Submit Producer\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Alright, you're all set. Shall I submit this request?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"1efdcf2f469443bab274d33fd859ba49\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"bd81452a9a1b46bba0dc8e99ac7537ac\": {\n          \"id\": \"bd81452a9a1b46bba0dc8e99ac7537ac\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"2412f77223a04a709fc32c8e75850387\": {\n          \"id\": \"2412f77223a04a709fc32c8e75850387\",\n          \"name\": \"Insert the Record\",\n          \"script\": \"(function execute() {\\n   var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variablesObj = {};\\n    var attachmentIds = [];\\n    for (i = 0; i < itemJson.variables.length; i++) {\\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\\n        if (itemJson.variables[i].type === 33)\\n           attachmentIds.push(itemJson.variables[i].value);\\n    }\\n   var reqObject = {\\n       \\\"sysparm_id\\\" : itemJson.sys_id,\\n       \\\"sysparm_action\\\" : 'execute_producer',\\n        \\\"variables\\\" : variablesObj,\\n        \\\"engagement_channel\\\" : 'va'\\n   }\\n   var response = new sn_sc.CatItem(itemJson.sys_id).submitProducer(reqObject);\\n   if (response) {\\n       vaVars.record_id = response.sys_id;\\n       vaVars.record_table = response.table;\\n       // add attachment to record\\n       var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\\n       for (var i in mediaLinksFormAttachment)\\n           vaSystem.attachToRecord(mediaLinksFormAttachment[i], response.table, response.sys_id);\\n\\n       // move attachment variable to record\\n       var gr = new GlideRecord('sys_attachment');\\n       gr.addQuery('sys_id', 'IN' , attachmentIds);\\n       gr.query();\\n       while (gr.next()) {\\n           gr.setValue('table_name', 'ZZ_YY' + response.table);\\n           gr.setValue('table_sys_id', response.sys_id);\\n           gr.update();\\n       }\\n   }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"56988cc5a07a413c951e653967010fed\": {\n          \"id\": \"56988cc5a07a413c951e653967010fed\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Order Item\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Alright, you're all set. Shall I submit this request?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"ee4278e027464dbc9047276cfda4b036\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"019517bc2ee94230a8baada8caa4a155\": {\n          \"id\": \"019517bc2ee94230a8baada8caa4a155\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"dce2fd2f9aea4077bf04b1ba6ac992a8\": {\n          \"id\": \"dce2fd2f9aea4077bf04b1ba6ac992a8\",\n          \"name\": \"Checkout Cart\",\n          \"script\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var cartname = \\\"vacart_\\\" + gs.generateGUID();\\n    var cartObj = new sn_sc.CartJS(cartname);\\n    cartObj.setRequestedFor(vaVars.request_for);\\n    cartObj.setEngagementChannel('va');\\n\\n    var variablesObj = {};\\n    var attachmentIds = [];\\n    for (i = 0; i < itemJson.variables.length; i++) {\\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\\n        if (itemJson.variables[i].type === 33)\\n           attachmentIds.push(itemJson.variables[i].value);\\n    }\\n        \\n\\n    var reqObj = {\\n        \\\"sysparm_id\\\" : itemJson.sys_id,\\n        \\\"variables\\\" : variablesObj\\n    };\\n    cartObj.addToCart(reqObj);\\n    var requestResponse = cartObj.checkoutCart(true);\\n    var requestGr = new GlideRecord('sc_request');\\n    if (requestGr.get(requestResponse.request_id)) {\\n        var reqItemGr = new GlideRecord('sc_req_item');\\n        reqItemGr.addQuery(\\\"request\\\", requestResponse.request_id);\\n        reqItemGr.query();\\n        if (reqItemGr.next()) {\\n            vaVars.record_id = reqItemGr.getUniqueValue();\\n            vaVars.record_table = 'sc_req_item';\\n            // add attachment to record\\n            var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\\n            for (var i in mediaLinksFormAttachment)\\n                vaSystem.attachToRecord(mediaLinksFormAttachment[i], vaVars.record_table, vaVars.record_id);\\n\\n        }\\n        // move attachment variable to record\\n        var gr = new GlideRecord('sys_attachment');\\n        gr.addQuery('sys_id', 'IN' , attachmentIds);\\n        gr.query();\\n        while (gr.next()) {\\n            gr.setValue('table_name', 'ZZ_YY' + vaVars.record_table);\\n            gr.setValue('table_sys_id', vaVars.record_id);\\n            gr.update();\\n        }\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"13f599b596ac4c52b36e610ec1364786\": {\n          \"id\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"5d527818c230458e9568ae597f0a9978\": {\n          \"id\": \"5d527818c230458e9568ae597f0a9978\",\n          \"stepType\": \"DateTimePrompt\",\n          \"name\": \"Question Date\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"d679323216e54589b81e8c5b3229dcb8\",\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"16a1a697635b49049011bfb4b7300c06\": {\n          \"id\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"name\": \"Post Response\",\n          \"script\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    vaVars.validation_message = \\\"\\\";\\n    var quesJson = itemJson.variables[vaVars.qIndex];\\n    var type = quesJson.type;\\n    var vaFieldValidator = new global.VAFieldValidator();\\n    // If user doesn't want to proceed with the selected value and skips the question, the variable would be set to \\\"\\\"\\n    var proceedWithDefaultValue = vaInputs.proceed_with_default.getValue();\\n    switch (type) {\\n        case 2:\\n        case 6:\\n        case 16:\\n            var ans = vaInputs.question_text.getValue() || (proceedWithDefaultValue ? quesJson.display_value : \\\"\\\");\\n            if (ans.trim().length === 0 && itemJson.variables[vaVars.qIndex].mandatory) {\\n                vaVars.validation_message = gs.getMessageLang('You must answer this question', vaContext.getRequesterLang());\\n                break;\\n            }\\n            if (type === 2) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_text = \\\"\\\";\\n                break;\\n            }\\n            var q = GlideappQuestion.getQuestion(itemJson.variables[vaVars.qIndex].sys_id);\\n            var validresponse = q.validateRegex(ans);\\n            if (validresponse) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_text = \\\"\\\";\\n            } else if (!validresponse)\\n                vaVars.validation_message = q.getValidationMessage();\\n            break;\\n        case 7:\\n            var ans = (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_choice.getValue()) {\\n                switch (vaInputs.question_choice.getValue()) {\\n                    case \\\"yes\\\":\\n                        ans = \\\"true\\\";\\n                        break;\\n                    case \\\"no\\\":\\n                    case \\\"no_data\\\":\\n                    case \\\"\\\":\\n                        ans = \\\"false\\\";\\n                        break;\\n                    default:\\n                        ans = \\\"false\\\";\\n                        break;\\n                }\\n            }\\n            if (itemJson.variables[vaVars.qIndex].mandatory && ans == \\\"false\\\")\\n                vaVars.validation_message = gs.getMessageLang('It is a mandatory question, you cannot select No as the answer', vaContext.getRequesterLang());\\n            else\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n            vaInputs.question_choice = \\\"\\\";\\n            break;\\n        case 9:\\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date.getDisplayValue() || (proceedWithDefaultValue ? quesJson.display_value : \\\"\\\");\\n            vaInputs.question_date = \\\"\\\";\\n            break;\\n        case 10:\\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date_time.getDisplayValue() || (proceedWithDefaultValue ? quesJson.display_value : \\\"\\\");\\n            vaInputs.question_date_time = \\\"\\\";\\n            break;\\n        case 8:\\n            var ans = (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_reference)\\n                ans = vaInputs.question_reference.getValue();\\n\\n            itemJson.variables[vaVars.qIndex].value = ans;\\n            vaInputs.question_reference = \\\"\\\";\\n            break;\\n        case 1:\\n        case 3:\\n        case 4:\\n        case 5:\\n        case 18:\\n        case 22:\\n            var ans = (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_choice) {\\n                ans = vaInputs.question_choice.getValue();\\n                ans = ans == 'no_data' ? '' : ans;\\n            }\\n            itemJson.variables[vaVars.qIndex].value = ans;\\n            vaInputs.question_choice = \\\"\\\";\\n            break;\\n        case 26:\\n            var ans = vaInputs.question_email.getValue() || (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_email.getValue() || ans == \\\"\\\" || vaFieldValidator.validateEmailAddress(ans)) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_email = \\\"\\\";\\n            } else\\n                vaVars.validation_message = gs.getMessageLang(\\\"This isn't a valid email address\\\", vaContext.getRequesterLang());\\n            break;\\n        case 27:\\n            var ans = vaInputs.question_url.getValue() || (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_url.getValue() || ans == \\\"\\\" || vaFieldValidator.validateURL(ans)) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_url = \\\"\\\";\\n            } else\\n                vaVars.validation_message = gs.getMessageLang(\\\"This isn't a valid URL\\\", vaContext.getRequesterLang());\\n            break;\\n        case 28:\\n            var ans = vaInputs.question_ip_address.getValue() || (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_ip_address.getValue() || ans == \\\"\\\" || vaFieldValidator.validateIPAddress(ans)) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_ip_address = \\\"\\\";\\n            } else\\n                vaVars.validation_message = gs.getMessageLang(\\\"This isn't a valid IP Address\\\", vaContext.getRequesterLang());\\n            break;\\n        case 31:\\n            var ans = quesJson.default_value + '';\\n            if (quesJson.default_value && proceedWithDefaultValue)\\n                vaVars.request_for = ans;\\n            else if (vaVars.request_for)\\n                ans = vaVars.request_for;\\n            itemJson.variables[vaVars.qIndex].value = ans;\\n    }\\n    itemJson.variables[vaVars.qIndex].field_info_messages = {};\\n    itemJson.variables[vaVars.qIndex].field_warn_messages = {};\\n    itemJson.variables[vaVars.qIndex].field_error_messages = {};\\n\\n    if (!vaVars.request_for)\\n        vaVars.request_for = gs.getUserID() + '';\\n    var executeDataLookup = false;\\n    var executeDynamicValue = false;\\n    if (quesJson.data_lookup_ids && quesJson.data_lookup_ids.length != 0)\\n        executeDataLookup = true;\\n    if (itemJson.dynamic_value_variable_config && itemJson.dynamic_value_variable_config[quesJson.sys_id] && itemJson.dynamic_value_variable_config[quesJson.sys_id].length != 0)\\n        executeDynamicValue = true;\\n    if (executeDataLookup || executeDynamicValue) {\\n        var helper = new sn_sc.CatalogConversationHelper();\\n        vaVars.itemJSON = JSON.stringify(helper.executeVariableChangeHandlers(itemJson, quesJson.sys_id, executeDataLookup, executeDynamicValue));\\n    } else\\n        vaVars.itemJSON = JSON.stringify(itemJson);\\n\\n// resetting the value of proceed with default incase validation fails\\n   if (vaVars.validation_message.length !== 0)\\n       vaInputs.proceed_with_default = false;\\n\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d6cc5e3effbd474bbdef055afb145637\": {\n          \"id\": \"d6cc5e3effbd474bbdef055afb145637\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"2cc08096b30f45b0827119c3b5f5fa42\": {\n          \"id\": \"2cc08096b30f45b0827119c3b5f5fa42\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Validation Message\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n      var singleOutMsg = new sn_cs.SinglePartOutMsg();\\n       singleOutMsg.setTextPart(gs.getMessageLang('{0}. Answer the question again', vaContext.getRequesterLang(), [vaVars.validation_message]));\\n       return singleOutMsg;\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"569ccaedd78340979feca86682affcbe\": {\n          \"id\": \"569ccaedd78340979feca86682affcbe\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Question Text\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"49591097b4f9403ebc5d93ad049007f0\",\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"a8757a988a2946a885eb9e8fac4a36e6\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Question Reference\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"e5e78bba2e454895a9f7de70d39027b0\",\n          \"id\": \"a8757a988a2946a885eb9e8fac4a36e6\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variable = itemJson.variables[vaVars.qIndex];\\n\\n    var gr = new GlideRecordSecure(variable.reference);\\n    gr.addQuery(variable.qualifier);\\n    if (variable.ref_ac_order_by)\\n        gr.orderBy(variable.ref_ac_order_by);\\n    else\\n        gr.orderBy(gr.getDisplayName());\\n    \\n    gr.query();\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n    \\n    return options;    \\n})()\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No records found\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variable = itemJson.variables[vaVars.qIndex];\\n\\n    var gr = new GlideRecordSecure(variable.reference);\\n    gr.addQuery(variable.qualifier);\\n    if (variable.ref_ac_order_by)\\n        gr.orderBy(variable.ref_ac_order_by);\\n    else\\n        gr.orderBy(gr.getDisplayName());\\n    \\n    gr.query();\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n    \\n    return options;    \\n})()\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"isMultipleSelect\": false\n        },\n        \"088c5a499e1444b38835ff2db8919544\": {\n          \"id\": \"088c5a499e1444b38835ff2db8919544\",\n          \"name\": \"Set Record ID to -1\",\n          \"script\": \"(function execute() {\\n    vaVars.record_id = \\\"-1\\\";\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d4ae63da950140f0b6ae1afa41ed3d69\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Question Choice\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"dc4af802dc2f47c4bbeccef60a0887c3\",\n          \"id\": \"d4ae63da950140f0b6ae1afa41ed3d69\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = choices = [];\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.type == 7)\\n        choices = [{ \\\"label\\\": gs.getMessageLang(\\\"Yes\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"yes\\\" }, { \\\"label\\\": gs.getMessageLang(\\\"No\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"no\\\" }];\\n    else\\n        choices = quesJson.options;\\n\\n    if (choices.length > 0 && quesJson.mandatory) {\\n        if (!choices[0].value)\\n            choices.shift();\\n    }\\n\\n    options = choices;\\n    return options;\\n})()\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"No records found\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = choices = [];\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.type == 7)\\n        choices = [{ \\\"label\\\": gs.getMessageLang(\\\"Yes\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"yes\\\" }, { \\\"label\\\": gs.getMessageLang(\\\"No\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"no\\\" }];\\n    else\\n        choices = quesJson.options;\\n\\n    if (choices.length > 0 && quesJson.mandatory) {\\n        if (!choices[0].value)\\n            choices.shift();\\n    }\\n\\n    options = choices;\\n    return options;\\n})()\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (question.mandatory)\\n        return false;\\n    if (question.type === 3 && question.value === '' && question.options[0].value !== '') \\n        return true;\\n    if (question.type === 4 && question.value === '')\\n        return true;\\n    return false;\\n})();\\n\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"isMultipleSelect\": false\n        },\n        \"9857784602ba45daa36362f8081f3f78\": {\n          \"id\": \"9857784602ba45daa36362f8081f3f78\",\n          \"stepType\": \"DateTimePrompt\",\n          \"name\": \"Question Date Time\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"c964d5c4ce17414cb95fe1bf03318b7e\",\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"9401125e1c1e4da0b381fa0cf07d28ea\": {\n          \"id\": \"9401125e1c1e4da0b381fa0cf07d28ea\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Question Label\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (question._internal_type == \\\"checkbox_container\\\" && question.label.toUpperCase() == \\\"OPTIONS\\\"\\n        && Array.isArray(question._children) && question._children.length == 1)\\n        return false;\\n    return true;\\n})()\\n\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"24d9573a895a4115ac6adc4b3d0933aa\": {\n          \"id\": \"24d9573a895a4115ac6adc4b3d0933aa\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Container Start Question\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.display_title)\\n        return true;\\n})()\\n\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"2a3e1c9302b7463199467b476dcc5058\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Question Requested For\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"a9d149d98f8c4c5ebede92004778e811\",\n          \"id\": \"2a3e1c9302b7463199467b476dcc5058\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var count = 0;\\n    var gr = new GlideRecordSecure('sys_user');\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\\n    gr.addQuery(quesJson.qualifier);\\n    gr.orderBy(gr.getDisplayName());\\n    gr.chooseWindow(index, index + limit, true);\\n    gr.query();\\n\\n    var count = gr.getRowCount();\\n    vaVars.count = count;\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n    \\n    if (count > 0) {\\n        options.push({\\n            'value' : 'search',\\n            'label' : gs.getMessageLang('Someone else', vaContext.getRequesterLang())\\n        });\\n    }\\n    return options;    \\n})()\\n\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"I couldn't find a user with that name\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var count = 0;\\n    var gr = new GlideRecordSecure('sys_user');\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\\n    gr.addQuery(quesJson.qualifier);\\n    gr.orderBy(gr.getDisplayName());\\n    gr.chooseWindow(index, index + limit, true);\\n    gr.query();\\n\\n    var count = gr.getRowCount();\\n    vaVars.count = count;\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n    \\n    if (count > 0) {\\n        options.push({\\n            'value' : 'search',\\n            'label' : gs.getMessageLang('Someone else', vaContext.getRequesterLang())\\n        });\\n    }\\n    return options;    \\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"isMultipleSelect\": false\n        },\n        \"f145c35d855347fa8375ede73773b057\": {\n          \"id\": \"f145c35d855347fa8375ede73773b057\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Search Requested For\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"Who should I set it to? \"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"ebbb4a512b184021b572be61b0736b0b\",\n          \"skippable\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"4f297e652c8f404483d0f478f57215ef\": {\n          \"id\": \"4f297e652c8f404483d0f478f57215ef\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"ca1771b4aefe41a4aef0d82910799470\": {\n          \"id\": \"ca1771b4aefe41a4aef0d82910799470\",\n          \"name\": \"Requested For Next Page\",\n          \"script\": \"(function execute() {\\n    var count = parseInt(vaVars.count);\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    if ( index + limit > count )\\n        vaVars.index = 0;\\n    else\\n        vaVars.index = index + limit;\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b76cd4c81a254855b2dc9b8150c47c06\": {\n          \"id\": \"b76cd4c81a254855b2dc9b8150c47c06\",\n          \"name\": \"Is Delegation Allowed\",\n          \"script\": \"(function execute() {\\n    var item = new sn_sc.CatItem(JSON.parse(vaVars.itemJSON).sys_id);\\n    vaVars.request_for = vaInputs.question_requested_for.getValue() + '';\\n    vaVars.canView = item.isDelegationAllowed(vaVars.request_for);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f809a8503d004c1793d7d29401854a44\": {\n          \"id\": \"f809a8503d004c1793d7d29401854a44\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"b14dab0c843d4491b1908a1d24f4f60e\": {\n          \"id\": \"b14dab0c843d4491b1908a1d24f4f60e\",\n          \"name\": \"Requested For Previous Page\",\n          \"script\": \"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var c = index - limit;\\n    if ( c < 0 ) c = 0;\\n    vaVars.index = c;\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"be0f5328e06a4fdb8663050d29f649a1\": {\n          \"id\": \"be0f5328e06a4fdb8663050d29f649a1\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Request For Another User\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"The selected user does not have access to this item. Do you want to request for  someone else?\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"a6e7b01c1d1e46a29b5e25666374fcc5\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"a4dd39d7cdfc4162a39aea63b5104ca6\": {\n          \"id\": \"a4dd39d7cdfc4162a39aea63b5104ca6\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f868531907f8475b80eee77193907c1c\": {\n          \"id\": \"f868531907f8475b80eee77193907c1c\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f33eca4d29b24a16a32705fd29535c44\": {\n          \"id\": \"f33eca4d29b24a16a32705fd29535c44\",\n          \"name\": \"Run OnChange Policies\",\n          \"script\": \"(function execute() {\\n   vaVars.itemJSON = JSON.stringify(new sn_sc.CatalogConversationHelper().runChangePolicies(JSON.parse(vaVars.itemJSON)))\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"699922b57f0e404eae6f939bb9ea7bad\": {\n          \"id\": \"699922b57f0e404eae6f939bb9ea7bad\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Question Email\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"d0e02123b54944f19a7fc9cfc1785b11\",\n          \"inputType\": {\n            \"format\": \"33513d135b1200101f254d3ba881c7d5\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"805acb1d5a76490283d21adee11ace8d\": {\n          \"id\": \"805acb1d5a76490283d21adee11ace8d\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Question IP Address\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"d35b1e93084d4f8390bc356383961ada\",\n          \"inputType\": {\n            \"format\": \"a860c5945b2200101f254d3ba881c7df\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"de355525a3004003ba2d40597493a01d\": {\n          \"id\": \"de355525a3004003ba2d40597493a01d\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Question URL\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"3951531a4d754d3f83a6cae37e53ae92\",\n          \"inputType\": {\n            \"format\": \"77d8b2935b9200101f254d3ba881c7b9\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"ffb615404000427783e7a265d333c2b2\": {\n          \"id\": \"ffb615404000427783e7a265d333c2b2\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"7233865f890743f69ab999234a25ad3e\": {\n          \"id\": \"7233865f890743f69ab999234a25ad3e\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Add Attachment\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang('Add attachment?', vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return !item.mandatory_attachment;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"d3131dcb6d4243858d0ff60ba07588c6\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"b769ea57ad464cfd8574adeeb9d0bf9e\": {\n          \"id\": \"b769ea57ad464cfd8574adeeb9d0bf9e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"d83ad8b6307945b1b04263ffbb62443b\": {\n          \"id\": \"d83ad8b6307945b1b04263ffbb62443b\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"Upload Attachment\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang('Upload attachment', vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var addMore = false;\\n    //when attachment is mandatory, to provide an option to skip add more \\n    if (vaInputs.add_more && vaInputs.add_more.getValue())\\n        addMore = true;\\n        \\n    return !JSON.parse(vaVars.itemJSON).mandatory_attachment || addMore;\\n})()\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"15e48e7ffe144828980d41225306d557\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"1982378d14e14ebaa9ed9d0276f081cb\": {\n          \"id\": \"1982378d14e14ebaa9ed9d0276f081cb\",\n          \"name\": \"Add Media Links for Form Attachment\",\n          \"script\": \"(function execute() {\\n    if (!!vaVars.media_links_form_attachment)\\n        vaVars.media_links_form_attachment = vaVars.media_links_form_attachment + ',' + vaInputs.upload_attachment.getValue();\\n    else\\n        vaVars.media_links_form_attachment = vaInputs.upload_attachment.getValue();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b9f517e461df4167a3826bf9fa16e638\": {\n          \"id\": \"b9f517e461df4167a3826bf9fa16e638\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Add More\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang('Add more?', vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"b5b51b3b069f4faa8cd2c87cf9fcc097\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"fd5059dafba54ec884263be207c53771\": {\n          \"id\": \"fd5059dafba54ec884263be207c53771\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"11dc7c8547e9400b87f48a7c394589fd\": {\n          \"id\": \"11dc7c8547e9400b87f48a7c394589fd\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"Question Attachment\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"ada76ae131be4767832c44a0020aa739\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"e31ef9e4ec54417eb9590f00c1a3377a\": {\n          \"id\": \"e31ef9e4ec54417eb9590f00c1a3377a\",\n          \"name\": \"Validate Attachment\",\n          \"script\": \"(function execute() {\\n    vaVars.validation_message = \\\"\\\";\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var quesJson = itemJson.variables[vaVars.qIndex];\\n    var vaUtils = new global.VAUtils();\\n    var arr = vaInputs.question_attachment.getValue().split('/');\\n    var mediaId = arr[arr.length - 1];\\n    var gr = new GlideRecord('sys_cs_media');\\n    gr.addQuery('media_id', mediaId);\\n    gr.query();\\n    if (gr.next()) {\\n        var attachmentId = gr.getValue('sys_attachment_id');\\n        var attachRef = new GlideRecord('sys_attachment');\\n        if (attachRef.get(attachmentId)) {\\n            var file = {\\n                name: attachRef.getValue('file_name'),\\n                size: attachRef.getValue('size_bytes')\\n            };\\n            var allowedExtensions = new Array();\\n            if (quesJson.allow_extension)\\n               allowedExtensions = quesJson.allow_extension.split(';');\\n            var field = {\\n                allowedExtensions: allowedExtensions,\\n                allowedFileSize: quesJson.max_file_size\\n            };\\n            var result = vaUtils.validateAttachment(file, field);\\n            if (result.type == 'success') {\\n                quesJson.value = attachmentId;\\n                vaVars.itemJSON = JSON.stringify(itemJson);\\n                vaInputs.question_attachment.setValue('');\\n            } else\\n                vaVars.validation_message = result.message;\\n        } else \\n            vaVars.validation_message = gs.getMessageLang('Failed to upload the attachment', vaContext.getRequesterLang());\\n    } else \\n        vaVars.validation_message = gs.getMessageLang('Failed to upload the attachment', vaContext.getRequesterLang());\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"question_attachmentISNOTEMPTY\",\n            \"mode\": \"query\"\n          }\n        },\n        \"fcdd14f0de7847ceae1affc008d8b0f3\": {\n          \"id\": \"fcdd14f0de7847ceae1affc008d8b0f3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"1226678091eb488388097f09ccfb5a4d\": {\n          \"id\": \"1226678091eb488388097f09ccfb5a4d\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Validation Message\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n     var singleOutMsg = new sn_cs.SinglePartOutMsg();\\n       singleOutMsg.setTextPart(gs.getMessageLang('{0}. Answer the question again', vaContext.getRequesterLang(), [vaVars.validation_message]));\\n       vaVars.validation_message = \\\"\\\";\\n       return singleOutMsg;\\n})()\\n\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9e896b67b3114d96ae504430b66716dc\": {\n          \"id\": \"9e896b67b3114d96ae504430b66716dc\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Record Producer\"\n        },\n        \"e14402d6ed324753a8415f09545ff8c2\": {\n          \"id\": \"e14402d6ed324753a8415f09545ff8c2\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Execute Contextual Search\"\n        },\n        \"ac19c7d150354af6b49927f218100a8e\": {\n          \"id\": \"ac19c7d150354af6b49927f218100a8e\",\n          \"name\": \"Get Search Variable And Context\",\n          \"script\": \"(function execute() {\\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\\n    if(gs.nil(vaVars.contextualSearchVariable)) {\\n        var searchConfig = contextualSearch.getContextualSearchVariableAndContext(vaInputs.catalog_item_id);\\n        vaVars.contextualSearchVariable = searchConfig.searchVariable;\\n        vaVars.contextualSearchContext = searchConfig.context;\\n    }\\n    return;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"0cf4021d189347e0906b78ac67d84ad0\": {\n          \"id\": \"0cf4021d189347e0906b78ac67d84ad0\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Contextual Search Variable ?\"\n        },\n        \"842240253fdb4ce8a81f01cfea5396e3\": {\n          \"id\": \"842240253fdb4ce8a81f01cfea5396e3\",\n          \"name\": \"Contextual Search\",\n          \"script\": \"(function execute() {\\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\\n    var response = contextualSearch.search(\\n        vaVars.contextualSearchContext, vaInputs.question_text.getValue(), ''\\n    );\\n    var success = contextualSearch.processSearchResponse(response);\\n    if (!success) {\\n        return;\\n    }  \\n    var relevantSearchResults = contextualSearch.processGeneralResults(response, 20, -2, vaSystem);\\n    vaVars.contextualSearchResultCount = relevantSearchResults.length;\\n    vaVars.contextualSearchResultJsonString = JSON.stringify(relevantSearchResults);\\n    vaVars.contextualSearchIndex = 0;\\n    return;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"904620a01a3445c09b2f883c3701d676\": {\n          \"id\": \"904620a01a3445c09b2f883c3701d676\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Did the search return results ?\"\n        },\n        \"5d35c039af7c4631a146c0c60b424b65\": {\n          \"id\": \"5d35c039af7c4631a146c0c60b424b65\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Display multi-link\",\n          \"url\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"label\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"header\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"multiple\",\n          \"introMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"I found some information that might help you:\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"listOfLinks\": \"(function execute(header) {\\n\\tvar contextualSearch = new global.VAGlobalContextualSearchUtil();\\n\\tvar variables = {\\n\\t\\tlimit: vaVars.contextualSearchResultLimit,\\n\\t\\tindex: vaVars.contextualSearchIndex,\\n\\t\\tsearch_result_json_string: vaVars.contextualSearchResultJsonString,\\n\\t\\tportal: ''\\n\\t}\\n\\tvar groupedLinksOutMsg = contextualSearch.getLinks(header, variables, vaSystem, vaContext);\\n\\treturn groupedLinksOutMsg;\\n})(header)\\n\"\n        },\n        \"8d07b16788dd46a3ac6086037dc7d758\": {\n          \"id\": \"8d07b16788dd46a3ac6086037dc7d758\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Did Articles Help ?\"\n        },\n        \"a4cc4c56e01047f7b0d45b9029d17b8d\": {\n          \"id\": \"a4cc4c56e01047f7b0d45b9029d17b8d\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Did Articles Help\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"Did any of this information resolve your issue?\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"29c02fc59a2044ea8ac7822eef35baec\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"ef70c2e3150f4ff4a4358cd01011f197\": {\n          \"id\": \"ef70c2e3150f4ff4a4358cd01011f197\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Confirmation Required ?\"\n        },\n        \"ffcaca766a5148b1874a9b52acef4592\": {\n          \"id\": \"ffcaca766a5148b1874a9b52acef4592\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"59b8aa46879743f7b8f4e84295210dc4\": {\n          \"id\": \"59b8aa46879743f7b8f4e84295210dc4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Catalog Builder Preview\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Preview successful\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"c7adfd19133a4c649d6698c86ae9020c\": {\n          \"id\": \"c7adfd19133a4c649d6698c86ae9020c\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"7f6ae93a22384a068958c171956f4fe8\": {\n          \"id\": \"7f6ae93a22384a068958c171956f4fe8\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Catalog Builder Preview Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Since this was a preview, the request was not submitted\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"8cefb357d56842a3b31cc3c083a62a74\": {\n          \"id\": \"8cefb357d56842a3b31cc3c083a62a74\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f53349b2dd384eb887feff0287cecbf5\": {\n          \"id\": \"f53349b2dd384eb887feff0287cecbf5\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Question Rich Text Label\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"bc8ca9598b0d4dadbf7f8e72a04f4353\": {\n          \"id\": \"bc8ca9598b0d4dadbf7f8e72a04f4353\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Default Value Acknowledgement \",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    var renderedValue = quesJson.display_value ? quesJson.display_value : quesJson.value;\\n    if (quesJson.type == 7) {\\n        renderedValue = quesJson.value == \\\"true\\\" ? \\\"Yes\\\" : \\\"No\\\";\\n    }\\n    return gs.getMessageLang(\\\"<b>{0}</b> was selected as the value for <b>{1}</b>\\\", vaContext.getRequesterLang(), [renderedValue, quesJson.label])\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.type == 7)\\n        return quesJson.has_default_value;\\n    return quesJson.value ? true : false;\\n})()\\n\"\n          },\n          \"requestFeedback\": true\n        },\n        \"cd0f50d0171b474ebbaea7e27fdf2932\": {\n          \"id\": \"cd0f50d0171b474ebbaea7e27fdf2932\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Proceed with Default\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Do you want to proceed with this value?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.type == 7)\\n        return quesJson.has_default_value;\\n    return quesJson.value ? true : false;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"b18d103ac6924ced825414c020736723\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"0df892dd8ce940be81dbdcadbcf584ff\": {\n          \"id\": \"0df892dd8ce940be81dbdcadbcf584ff\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"a6dc56d1942d4b66825f02d245edc6d4\": {\n          \"id\": \"a6dc56d1942d4b66825f02d245edc6d4\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Show end state card?\"\n        },\n        \"27123440478c41c49eac84d738a843c2\": {\n          \"id\": \"27123440478c41c49eac84d738a843c2\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"a1846ce5007045088d91003fdeb5f70e\": {\n          \"id\": \"a1846ce5007045088d91003fdeb5f70e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Messaging Channel\"\n        },\n        \"bfa0a72ef56345f78e51e37f289d2962\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Question Choice Other Channels\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (question.mandatory)\\n        return false;\\n    if (question.type === 4 && question.value === '')\\n        return true;\\n    if (question.type === 3 && question.value === '' && question.options[0].value !== '')\\n        return true;\\n    return false;\\n})();\\n\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"0cb822556e9c4949adb5cfae1b521ea7\",\n          \"id\": \"bfa0a72ef56345f78e51e37f289d2962\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var options = choices = [];\\n    var count = 0;\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n\\n    if (quesJson.type == 7)\\n        choices = [{ \\\"label\\\": gs.getMessageLang(\\\"Yes\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"yes\\\" }, { \\\"label\\\": gs.getMessageLang(\\\"No\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"no\\\" }];\\n    else\\n        choices = quesJson.options;\\n\\n    if (choices.length > 0 && quesJson.mandatory) {\\n        if (!choices[0].value)\\n            choices.shift();\\n    }\\n    \\n    count = choices.length;\\n    vaVars.count = count;\\n    options = choices.splice(index, limit);\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n    \\n    return options;    \\n})()\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No records found\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var options = choices = [];\\n    var count = 0;\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n\\n    if (quesJson.type == 7)\\n        choices = [{ \\\"label\\\": gs.getMessageLang(\\\"Yes\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"yes\\\" }, { \\\"label\\\": gs.getMessageLang(\\\"No\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"no\\\" }];\\n    else\\n        choices = quesJson.options;\\n\\n    if (choices.length > 0 && quesJson.mandatory) {\\n        if (!choices[0].value)\\n            choices.shift();\\n    }\\n    \\n    count = choices.length;\\n    vaVars.count = count;\\n    options = choices.splice(index, limit);\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n    \\n    return options;    \\n})()\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"isMultipleSelect\": false\n        },\n        \"2f13545e7aff44fea92c262a72de2f10\": {\n          \"id\": \"2f13545e7aff44fea92c262a72de2f10\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f9124c93df3c4727a0cab5a33d507c82\": {\n          \"id\": \"f9124c93df3c4727a0cab5a33d507c82\",\n          \"name\": \"Question Choice Prev Page\",\n          \"script\": \"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var c = index - limit;\\n    if ( c < 0 ) c = 0;\\n    vaVars.index = c;\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7fff18e168564d0d8bc3e955abd96328\": {\n          \"id\": \"7fff18e168564d0d8bc3e955abd96328\",\n          \"name\": \"Question Choice Next Page\",\n          \"script\": \"(function execute() {\\n    var count = parseInt(vaVars.count);\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    if ( index + limit > count )\\n        vaVars.index = 0;\\n    else\\n        vaVars.index = index + limit;\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a5d25e2774c749c7bdafb0902e5a2c69\": {\n          \"id\": \"a5d25e2774c749c7bdafb0902e5a2c69\",\n          \"name\": \"Set Question Choice Value\",\n          \"script\": \"(function execute() {\\n    if(vaInputs.question_choice_other_channels) {\\n        vaInputs.question_choice = vaInputs.question_choice_other_channels;\\n        vaInputs.question_choice_other_channels = \\\"\\\";\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"03dc98604b2743a89972102a427acdab\": {\n          \"id\": \"03dc98604b2743a89972102a427acdab\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Messaging Channel\"\n        },\n        \"68d06c7a6fad43488621e8ba2d9b72cd\": {\n          \"id\": \"68d06c7a6fad43488621e8ba2d9b72cd\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Search Reference\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Enter a value to search\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_reference_other_channels;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"fc876df4d3dd49229e790bef174eeb5b\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"d705fe0d136845f1a0a580b3a319a6a8\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Question Reference Other Channels\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"df9465dd557149c2b574ba78bf0b455a\",\n          \"id\": \"d705fe0d136845f1a0a580b3a319a6a8\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var count = 0;\\n\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variable = itemJson.variables[vaVars.qIndex];\\n    var gr = new GlideRecordSecure(variable.reference);\\n    var displayColumn = gr.getDisplayName();\\n   \\n    gr.addEncodedQuery(displayColumn + 'LIKE' + vaInputs.search_reference.getValue());\\n    gr.addQuery(variable.qualifier);\\n    if (variable.ref_ac_order_by)\\n        gr.orderBy(variable.ref_ac_order_by);\\n    else\\n        gr.orderBy(displayColumn);\\n    \\n    gr.chooseWindow(index, index + limit, true);\\n    gr.query();\\n\\n    var count = gr.getRowCount();\\n    vaVars.count = count;\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n\\n    if (count > 0) {\\n        vaVars.no_records_found = \\\"false\\\"\\n        options.push({\\n            'value' : 'search',\\n            'label' : gs.getMessageLang('Search', vaContext.getRequesterLang())\\n        });\\n    }\\n    else\\n        vaVars.no_records_found = \\\"true\\\";\\n    \\n    return options;    \\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No records found\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var count = 0;\\n\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variable = itemJson.variables[vaVars.qIndex];\\n    var gr = new GlideRecordSecure(variable.reference);\\n    var displayColumn = gr.getDisplayName();\\n   \\n    gr.addEncodedQuery(displayColumn + 'LIKE' + vaInputs.search_reference.getValue());\\n    gr.addQuery(variable.qualifier);\\n    if (variable.ref_ac_order_by)\\n        gr.orderBy(variable.ref_ac_order_by);\\n    else\\n        gr.orderBy(displayColumn);\\n    \\n    gr.chooseWindow(index, index + limit, true);\\n    gr.query();\\n\\n    var count = gr.getRowCount();\\n    vaVars.count = count;\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n\\n    if (count > 0) {\\n        vaVars.no_records_found = \\\"false\\\"\\n        options.push({\\n            'value' : 'search',\\n            'label' : gs.getMessageLang('Search', vaContext.getRequesterLang())\\n        });\\n    }\\n    else\\n        vaVars.no_records_found = \\\"true\\\";\\n    \\n    return options;    \\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"isMultipleSelect\": false\n        },\n        \"c39abbdd9d9048ebac88fa462369e4d8\": {\n          \"id\": \"c39abbdd9d9048ebac88fa462369e4d8\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"567ecb8c7e69414197b590e62fc96ffa\": {\n          \"id\": \"567ecb8c7e69414197b590e62fc96ffa\",\n          \"name\": \"Question Reference Prev Page\",\n          \"script\": \"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var c = index - limit;\\n    if ( c < 0 ) c = 0;\\n    vaVars.index = c;\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"851e1675b771476983be9d9e9a335088\": {\n          \"id\": \"851e1675b771476983be9d9e9a335088\",\n          \"name\": \"Question Reference Next Page\",\n          \"script\": \"(function execute() {\\n    var count = parseInt(vaVars.count);\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    if ( index + limit > count )\\n        vaVars.index = 0;\\n    else\\n        vaVars.index = index + limit;\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ca4281b23e314b0c84c95d012d8a9f0a\": {\n          \"id\": \"ca4281b23e314b0c84c95d012d8a9f0a\",\n          \"name\": \"Set Question Reference Value\",\n          \"script\": \"(function execute() {\\n    if(vaInputs.question_reference_other_channels) {\\n        vaInputs.question_reference = vaInputs.question_reference_other_channels;\\n        vaInputs.question_reference_other_channels = \\\"\\\";\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f7d3a19c5a144a6692fa0392fbc42601\": {\n          \"id\": \"f7d3a19c5a144a6692fa0392fbc42601\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"End state card\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"End state card for Catalog Request\",\n          \"reusableTopicId\": \"0b01391550d30110fa9b861f7d83d7f6\",\n          \"inputs\": {\n            \"record_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.record_id}}\",\n                        \"displayValue\": \"Script Variablesrecord_id\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"record_table\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.record_table}}\",\n                        \"displayValue\": \"Script Variablesrecord_table\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            }\n          },\n          \"variableIds\": [],\n          \"outputs\": [],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false\n        },\n        \"767c818240c34396a261e09b5c0e4960\": {\n          \"id\": \"767c818240c34396a261e09b5c0e4960\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Catalog item validity check\"\n        },\n        \"8f1445841a2b4402988276c2a26946d5\": {\n          \"id\": \"8f1445841a2b4402988276c2a26946d5\",\n          \"name\": \"Validate Catalog Item\",\n          \"script\": \"(function execute() {\\n   var catItemID = vaInputs.catalog_item_id.getValue();\\n   var catItem = GlideappCatalogItem.get(catItemID);\\n   if (catItem == null || !(vaContext.catalog_builder_preview == 'true' || catItem.canView())) {\\n       vaVars.isValidCatItem = false;\\n       return;\\n   }\\n   vaVars.isValidCatItem = true;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"4758ce4d476d46728a411ec16124d7e5\": {\n          \"id\": \"4758ce4d476d46728a411ec16124d7e5\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"6a90246af7eb400eb4864c65f1814e8a\": {\n          \"id\": \"6a90246af7eb400eb4864c65f1814e8a\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Change Response\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    var response = quesJson.label;\\n    var json = new JSON();\\n    var infoKeys = json.getKeys(quesJson.field_info_messages);\\n    var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n    var errKeys =  json.getKeys(quesJson.field_error_messages);\\n\\n    for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n    }\\n    for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n    }\\n    for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n    }\\n    response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Would you like to change your response?\\\", vaContext.getRequesterLang());\\n    return response;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"skippable\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"6e0b667d4dbb4459b52c0dcedcf8b5f1\",\n          \"detailDescription\": \"\"\n        },\n        \"9c92ace1fa8245c4bfa429be03bf1c56\": {\n          \"id\": \"9c92ace1fa8245c4bfa429be03bf1c56\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"677c1ab79d384e7fb39a0f9a01127016\": {\n          \"id\": \"677c1ab79d384e7fb39a0f9a01127016\",\n          \"name\": \"Decrement qIndex and clear value\",\n          \"script\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    itemJson.variables[vaVars.qIndex].value = \\\"\\\";\\n    itemJson.variables[vaVars.qIndex].field_info_messages = {};\\n    itemJson.variables[vaVars.qIndex].field_warn_messages = {};\\n    itemJson.variables[vaVars.qIndex].field_error_messages = {};\\n    vaVars.itemJSON = JSON.stringify(itemJson);\\n    var qIndex = vaVars.qIndex;\\n    vaVars.qIndex = --qIndex;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"dd80acb5f3df45a280ef8c1504148824\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d4ae63da950140f0b6ae1afa41ed3d69\",\n          \"target\": \"a5d25e2774c749c7bdafb0902e5a2c69\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f0c2895cad3946a2b00c1170db388563\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a1846ce5007045088d91003fdeb5f70e\",\n          \"target\": \"d4ae63da950140f0b6ae1afa41ed3d69\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaContext.deviceType === \\\"mweb\\\";\\n})()\\n\"\n          },\n          \"label\": \"Mobile/Web Client\"\n        },\n        {\n          \"id\": \"e751d65d536b433d91359456484e2cab\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9c92ace1fa8245c4bfa429be03bf1c56\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.change_response=false\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"false\",\n          \"fromNode\": \"- Decision\",\n          \"toNode\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"toEdge\": \"e751d65d536b433d91359456484e2cab\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"cf649868e19f4cab80f0b238a5999ad3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f7d3a19c5a144a6692fa0392fbc42601\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1fdc521371fc4ac2ba7ff66900718aa2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"f145c35d855347fa8375ede73773b057\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 31)\\n        return true;\\n})()\\n\"\n          },\n          \"label\": \"Question Requested For\"\n        },\n        {\n          \"id\": \"d84737cde6d6447580e9043144076f2a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2412f77223a04a709fc32c8e75850387\",\n          \"target\": \"a6dc56d1942d4b66825f02d245edc6d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2b4a84e13451442397b39927e2f5a44b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"11dc7c8547e9400b87f48a7c394589fd\",\n          \"target\": \"e31ef9e4ec54417eb9590f00c1a3377a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"074205ade60041a5a8074627a66d1a91\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1982378d14e14ebaa9ed9d0276f081cb\",\n          \"target\": \"b9f517e461df4167a3826bf9fa16e638\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"36bf2fbc4d7f4881a293bf6f1c415239\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4f297e652c8f404483d0f478f57215ef\",\n          \"target\": \"ca1771b4aefe41a4aef0d82910799470\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_requested_for.getValue() === 'next';\\n})()\\n\"\n          },\n          \"label\": \"Requested For Next\"\n        },\n        {\n          \"id\": \"be664a4de3d142cfa4fa5e560aef444a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"target\": \"56988cc5a07a413c951e653967010fed\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    if (itemJson.sys_class_name !== 'sc_cat_item_producer')\\n        return true;\\nreturn false;\\n})()\\n\"\n          },\n          \"label\": \"Catalog Item\"\n        },\n        {\n          \"id\": \"12d45221afae4a8cb16b86184c7e6a2e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"73d7ac3ed17042f5b5507bfb1c8b7444\",\n          \"target\": \"bd3466c304de408183ccfc9dcd0bcb19\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b571f10e472f46cd871aa985d5817613\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bd3466c304de408183ccfc9dcd0bcb19\",\n          \"target\": \"eab57865501d4f008c88c7a3e41e1f29\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e536fb9f3fa848f78c2eff171c934266\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eab57865501d4f008c88c7a3e41e1f29\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"proceed=false\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"358a1bc045884a5794a195fa9829764b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eab57865501d4f008c88c7a3e41e1f29\",\n          \"target\": \"9c32307114d54b92acebfe39291b1057\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"proceed=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"3816e95d729f480da94d3acd498aee01\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9c32307114d54b92acebfe39291b1057\",\n          \"target\": \"0b36051dccc04f43bfadae8b91720f27\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return JSON.parse(vaVars.itemJSON).va_support;\\n})()\"\n          },\n          \"label\": \"Has VA Support\"\n        },\n        {\n          \"id\": \"8ae4de53d15e41acb1d31edcb8f0769f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0b36051dccc04f43bfadae8b91720f27\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var qIndex = parseInt(vaVars.qIndex);\\n    //qIndex is -1 initially, we reset this before search again step \\n    do{\\n        qIndex++;\\n        var question = itemJson.variables[qIndex];\\n    }\\n    while(question && (!question.visible || question.readonly || question.sys_readonly));\\n\\n    if (question) {\\n       //There are variables that we can show\\n        return false;\\n    }\\n    //No variables that we can show\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"Item with no variables\"\n        },\n        {\n          \"id\": \"e854162549354ea5bb08b8c61691872e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0b36051dccc04f43bfadae8b91720f27\",\n          \"target\": \"b29723c02c774bfc92b637faa4f34233\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var qIndex = parseInt(vaVars.qIndex);\\n    //qIndex is -1 initially, we reset this before search again step \\n\\n    do{\\n        qIndex++;\\n        var question = itemJson.variables[qIndex];\\n    }\\n    while(question && (!question.visible || question.readonly || question.sys_readonly));\\n\\n    if (question) {\\n       //There are variables that we can show\\n        return true;\\n    }\\n    //No variables  that we can show\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"Item with variables\"\n        },\n        {\n          \"id\": \"70935b339caa4d9b868757ee1cad69d8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b29723c02c774bfc92b637faa4f34233\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"051144cb4ba84b429d3104b3b516d40a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"target\": \"03ddb6e3316247e1a29ee3e88693b877\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    if (itemJson.sys_class_name === 'sc_cat_item_producer')\\n        return true;\\nreturn false;\\n})()\\n\"\n          },\n          \"label\": \"Record Producer\"\n        },\n        {\n          \"id\": \"20cfd23d2979423dad8609a072498b2e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"03ddb6e3316247e1a29ee3e88693b877\",\n          \"target\": \"bd81452a9a1b46bba0dc8e99ac7537ac\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6e77eded859241339adb104c590436f3\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"bd81452a9a1b46bba0dc8e99ac7537ac\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"submit_producer=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Don't Submit\"\n        },\n        {\n          \"id\": \"7168889e76034d37b9383941c3f0881c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"56988cc5a07a413c951e653967010fed\",\n          \"target\": \"019517bc2ee94230a8baada8caa4a155\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9c0681fb08674c26aeb840668c9e2125\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"019517bc2ee94230a8baada8caa4a155\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"order_item=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Don't Order\"\n        },\n        {\n          \"id\": \"5457b79a3cc74f6381e3a7d91f92fa47\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"5d527818c230458e9568ae597f0a9978\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 9;\\n})()\\n\"\n          },\n          \"label\": \"Date Question\"\n        },\n        {\n          \"id\": \"224f8bed61c040d38602b2b92d778d50\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5d527818c230458e9568ae597f0a9978\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0bc2a2a690c440c79af860d916b3289e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"target\": \"d6cc5e3effbd474bbdef055afb145637\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fed862b7cde74a77a6a8cce1f47141f6\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d6cc5e3effbd474bbdef055afb145637\",\n          \"target\": \"2cc08096b30f45b0827119c3b5f5fa42\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.validation_message.length !== 0;\\n})()\\n\"\n          },\n          \"label\": \"Repeat Question\"\n        },\n        {\n          \"id\": \"7c6503a268d447d78ae863f57df89350\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"569ccaedd78340979feca86682affcbe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\\n    return type === 2 || type === 6 || type === 16;\\n})()\"\n          },\n          \"label\": \"Text Type Question\"\n        },\n        {\n          \"id\": \"83a0d92ad0bd473f98d130c31f892db7\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9c32307114d54b92acebfe39291b1057\",\n          \"target\": \"088c5a499e1444b38835ff2db8919544\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !JSON.parse(vaVars.itemJSON).va_support;\\n})()\"\n          },\n          \"label\": \"No VA Support\"\n        },\n        {\n          \"id\": \"f8fb34ff97154d0caea95212bc8df3cc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"088c5a499e1444b38835ff2db8919544\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b41bbd26a8864db68f82ea212716bcbc\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"9857784602ba45daa36362f8081f3f78\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 10;\\n})()\\n\"\n          },\n          \"label\": \"Date-Time Question\"\n        },\n        {\n          \"id\": \"709ecf4081854fdb960de8db89556ac0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9857784602ba45daa36362f8081f3f78\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"82a73282dbad40a1a36973441932d971\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"9401125e1c1e4da0b381fa0cf07d28ea\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    return question.type === 11 || (question.type === 0 && question._internal_type === \\\"checkbox_container\\\");\\n})()\\n\"\n          },\n          \"label\": \"Question Label\"\n        },\n        {\n          \"id\": \"27f50b52d7f14357bbcd7fbde3f925aa\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9401125e1c1e4da0b381fa0cf07d28ea\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fcceb0d42bc4408a85f737a3356a5465\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"24d9573a895a4115ac6adc4b3d0933aa\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\\n    if (type === 0 || type === 12 || type === 19 || type === 20 || type === 24)\\n        return true;\\n})()\\n\"\n          },\n          \"label\": \"Container Or Break Questions\"\n        },\n        {\n          \"id\": \"c8017104476949f0a05354cbf05c306f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"24d9573a895a4115ac6adc4b3d0933aa\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"69bf654b161b49e790cc13dd59be525d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f145c35d855347fa8375ede73773b057\",\n          \"target\": \"2a3e1c9302b7463199467b476dcc5058\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d693584b0b794971a8723ddaba6d9def\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2a3e1c9302b7463199467b476dcc5058\",\n          \"target\": \"4f297e652c8f404483d0f478f57215ef\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fff3ddb3c1be4f8c9b54246d105e886a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ca1771b4aefe41a4aef0d82910799470\",\n          \"target\": \"2a3e1c9302b7463199467b476dcc5058\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"220b96e0830340e781b25750aa2913d0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4f297e652c8f404483d0f478f57215ef\",\n          \"target\": \"f145c35d855347fa8375ede73773b057\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaInputs.question_requested_for.getValue() || vaInputs.question_requested_for.getValue() === 'search';\\n})()\\n\"\n          },\n          \"label\": \"Search Requested For\"\n        },\n        {\n          \"id\": \"e902824258024662874a21ded919da8f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4f297e652c8f404483d0f478f57215ef\",\n          \"target\": \"b76cd4c81a254855b2dc9b8150c47c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var valuePicked = vaInputs.question_requested_for.getValue();\\n    var condition = valuePicked !== 'next' && valuePicked !== 'prev';\\n    if (condition) {\\n        vaVars.count = 0;\\n        vaVars.index = 0;\\n    }\\n    return condition;\\n})();\"\n          },\n          \"label\": \"Requested For Chosen\"\n        },\n        {\n          \"id\": \"3e090a9031be4848a6786d1ff17e796c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b76cd4c81a254855b2dc9b8150c47c06\",\n          \"target\": \"f809a8503d004c1793d7d29401854a44\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"49dbd8f90bdc4a8d8c1d7c735f7b5e72\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f809a8503d004c1793d7d29401854a44\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.canView;\\n})()\\n\"\n          },\n          \"label\": \"Can View\"\n        },\n        {\n          \"id\": \"cbe3e6be58ea45ee891fda194446d2b5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4f297e652c8f404483d0f478f57215ef\",\n          \"target\": \"b14dab0c843d4491b1908a1d24f4f60e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_requested_for.getValue() === 'prev';\\n})()\\n\"\n          },\n          \"label\": \"Requested For Prev\"\n        },\n        {\n          \"id\": \"7b9f950a65384172ad099dd318941c60\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b14dab0c843d4491b1908a1d24f4f60e\",\n          \"target\": \"2a3e1c9302b7463199467b476dcc5058\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c838c4c2651643b293acc33af48c79d3\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f809a8503d004c1793d7d29401854a44\",\n          \"target\": \"be0f5328e06a4fdb8663050d29f649a1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.canView\\n})()\\n\"\n          },\n          \"label\": \"Cannot View\"\n        },\n        {\n          \"id\": \"e903bf83b59b4f8bba94aba03f20dc77\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"be0f5328e06a4fdb8663050d29f649a1\",\n          \"target\": \"a4dd39d7cdfc4162a39aea63b5104ca6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"83a3381878cc47adb3f3cee907bade55\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a4dd39d7cdfc4162a39aea63b5104ca6\",\n          \"target\": \"f145c35d855347fa8375ede73773b057\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"request_for_another_user=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Request for Another User\"\n        },\n        {\n          \"id\": \"bf924a1636d84514be098876a8f12c05\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a4dd39d7cdfc4162a39aea63b5104ca6\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"request_for_another_user=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"End Conversation\"\n        },\n        {\n          \"id\": \"03c34973c4224138bc89bd80ee6ef82c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d6cc5e3effbd474bbdef055afb145637\",\n          \"target\": \"f868531907f8475b80eee77193907c1c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.validation_message.length === 0;\\n})()\\n\"\n          },\n          \"label\": \"Next Question\"\n        },\n        {\n          \"id\": \"56b46b7917cb43fcabd4b52a0418ecc0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f868531907f8475b80eee77193907c1c\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).has_on_change_policies;\\n})()\\n\"\n          },\n          \"label\": \"No onChange Policies\"\n        },\n        {\n          \"id\": \"eac190852f204eac8581f7212ca43c27\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f868531907f8475b80eee77193907c1c\",\n          \"target\": \"f33eca4d29b24a16a32705fd29535c44\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return JSON.parse(vaVars.itemJSON).has_on_change_policies;\\n})()\\n\"\n          },\n          \"label\": \"Has onChange Policies\"\n        },\n        {\n          \"id\": \"d32594ba637648dbbe4a6a610d1283a0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var unSupportedTypes = vaVars.unsupportedVarTypes.split(',');\\n   return unSupportedTypes.indexOf(String(JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type)) !== -1;\\n})()\\n\"\n          },\n          \"label\": \"Unsupported  Variable  Types\"\n        },\n        {\n          \"id\": \"1fdbf3e8b87c4b30988c92b5f7bf9287\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"699922b57f0e404eae6f939bb9ea7bad\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 26;\\n})()\\n\"\n          },\n          \"label\": \"Email Question\"\n        },\n        {\n          \"id\": \"9c27a68278554144aa628eb37f301ba0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"699922b57f0e404eae6f939bb9ea7bad\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5453ac378401409f969a472dcc99b4b0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"805acb1d5a76490283d21adee11ace8d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 28;\\n})()\\n\"\n          },\n          \"label\": \"Ip Address Question\"\n        },\n        {\n          \"id\": \"27971880d2034371b3789bae2e4c9521\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"805acb1d5a76490283d21adee11ace8d\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ed6e00cead454c9e9f09ede9291ef430\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"de355525a3004003ba2d40597493a01d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 27;\\n})()\\n\"\n          },\n          \"label\": \"URL Question\"\n        },\n        {\n          \"id\": \"4bccbf5ece134e95bead5a269e7b17b5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"de355525a3004003ba2d40597493a01d\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a1c6a2d36fa14e3c9d004d161ef56d76\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"target\": \"ffb615404000427783e7a265d333c2b2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var qIndex = parseInt(vaVars.qIndex);\\n    //qIndex is -1 initially, we reset this before search again step \\n    do{\\n        qIndex++;\\n        var question = itemJson.variables[qIndex];\\n    }\\n    while(question && (!question.visible || question.readonly || question.sys_readonly));\\n\\n    if (question) {\\n       //There are variables that we can show\\n        return false;\\n    }\\n    //No variables that we can show\\n    return true;\\n})()\"\n          },\n          \"label\": \"Questions Done\"\n        },\n        {\n          \"id\": \"5271fdd3ebc94f0faf36c24e129d8b03\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ffb615404000427783e7a265d333c2b2\",\n          \"target\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return item.no_attachments === true;\\n})()\\n\"\n          },\n          \"label\": \"Has  No Attachment\"\n        },\n        {\n          \"id\": \"31edc9e648594e1e9e1e4b968fcc4453\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ffb615404000427783e7a265d333c2b2\",\n          \"target\": \"7233865f890743f69ab999234a25ad3e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return item.no_attachments === false;\\n})()\\n\"\n          },\n          \"label\": \"Has Attachment\"\n        },\n        {\n          \"id\": \"080f11480a4143e5b8513c814c15e677\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7233865f890743f69ab999234a25ad3e\",\n          \"target\": \"b769ea57ad464cfd8574adeeb9d0bf9e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"64b6526cfea141109ccf62351c0b7909\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b769ea57ad464cfd8574adeeb9d0bf9e\",\n          \"target\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return !item.mandatory_attachment && !vaInputs.add_attachment.getValue();\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"ec358ae0f38540b6b2b66a61f066431f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b769ea57ad464cfd8574adeeb9d0bf9e\",\n          \"target\": \"d83ad8b6307945b1b04263ffbb62443b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return item.mandatory_attachment || vaInputs.add_attachment.getValue();\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"c48fc6c853ec49f0ab08f07ce0e13158\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b9f517e461df4167a3826bf9fa16e638\",\n          \"target\": \"fd5059dafba54ec884263be207c53771\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d9c0652134124952b57c4b1cbe84135d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fd5059dafba54ec884263be207c53771\",\n          \"target\": \"d83ad8b6307945b1b04263ffbb62443b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"add_more=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"ae625599ac6349858e2a71464a1ebe44\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fd5059dafba54ec884263be207c53771\",\n          \"target\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"add_more=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"c97cfdcb7b7248a096bbb336afa528b7\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"11dc7c8547e9400b87f48a7c394589fd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 33;\\n})()\\n\"\n          },\n          \"label\": \"Question Attachment\"\n        },\n        {\n          \"id\": \"e1b5ffc7ab8348f3a24307b495720ca9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e31ef9e4ec54417eb9590f00c1a3377a\",\n          \"target\": \"fcdd14f0de7847ceae1affc008d8b0f3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bc524d864ce24dddac41b117db6bfa80\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fcdd14f0de7847ceae1affc008d8b0f3\",\n          \"target\": \"f868531907f8475b80eee77193907c1c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.validation_message.length === 0;\\n})()\\n\"\n          },\n          \"label\": \"Next Question\"\n        },\n        {\n          \"id\": \"3a671562b3ca4c49a8a1f8f7e8eb33e2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fcdd14f0de7847ceae1affc008d8b0f3\",\n          \"target\": \"1226678091eb488388097f09ccfb5a4d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.validation_message.length !== 0;\\n})()\\n\"\n          },\n          \"label\": \"Repeat Question\"\n        },\n        {\n          \"id\": \"a0dceee7b4e442ec83b875bad93c5022\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1226678091eb488388097f09ccfb5a4d\",\n          \"target\": \"11dc7c8547e9400b87f48a7c394589fd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"aef1d88cb3cf42e487ae45376a5a0ecc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"569ccaedd78340979feca86682affcbe\",\n          \"target\": \"9e896b67b3114d96ae504430b66716dc\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d13981ec519a4ed9abfd9cc96ee4df7c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9e896b67b3114d96ae504430b66716dc\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n   \\n    if (itemJson.sys_class_name !== 'sc_cat_item_producer') {\\n        return true;\\n    }    \\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"879d840573c04eaabe4cd02d8bfd771e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9e896b67b3114d96ae504430b66716dc\",\n          \"target\": \"e14402d6ed324753a8415f09545ff8c2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    if (itemJson.sys_class_name === 'sc_cat_item_producer') {\\n        return true;\\n    }    \\n    return false;\\n})()\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"8a310f1308574cb58ae32529b9408d82\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e14402d6ed324753a8415f09545ff8c2\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /**\\n     * Topic should pass execute_contextual_search as input if contextual search is required\\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\\n     */\\n    var ans = vaInputs.question_text.getValue();\\n    if(vaInputs.execute_contextual_search == 'false' || ans.trim().length === 0) {\\n        return true;\\n    }\\n    return false;    \\n})()\\n\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Execute Contextual Search\",\n          \"toNode\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"toEdge\": \"8a310f1308574cb58ae32529b9408d82\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"4402b3593c584cedb50f7863f87b647d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e14402d6ed324753a8415f09545ff8c2\",\n          \"target\": \"ac19c7d150354af6b49927f218100a8e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /**\\n     * Topic should pass execute_contextual_search as input if contextual search is required\\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\\n     */\\n    var ans = vaInputs.question_text.getValue();\\n    if(vaInputs.execute_contextual_search == 'true'  && ans.trim().length !== 0) {\\n        return true;\\n    }\\n    return false;     \\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"e433466b15f0424f965b6c0da5ecaff5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ac19c7d150354af6b49927f218100a8e\",\n          \"target\": \"0cf4021d189347e0906b78ac67d84ad0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c86576636c784247bde22c3d08aedb78\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0cf4021d189347e0906b78ac67d84ad0\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if(vaVars.contextualSearchVariable !== quesJson.sys_id) {\\n        return true;\\n    }\\n    return false;\\n})()\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Contextual Search Variable ?\",\n          \"toNode\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"toEdge\": \"c86576636c784247bde22c3d08aedb78\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"202a29a79b924c86b9d78c2473403ef1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0cf4021d189347e0906b78ac67d84ad0\",\n          \"target\": \"842240253fdb4ce8a81f01cfea5396e3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if(vaVars.contextualSearchVariable === quesJson.sys_id) {\\n        return true;\\n    }\\n    return false;\\n})()\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"52ae51f172444702b9634ff6770f4024\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"842240253fdb4ce8a81f01cfea5396e3\",\n          \"target\": \"904620a01a3445c09b2f883c3701d676\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0b34a43c230242419eda7186617bad6d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"904620a01a3445c09b2f883c3701d676\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if(vaVars.contextualSearchResultCount <= 0){\\n        return true;\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Did the search return results ?\",\n          \"toNode\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"toEdge\": \"0b34a43c230242419eda7186617bad6d\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"78de63645b1e45949263b13b2e6c4354\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"904620a01a3445c09b2f883c3701d676\",\n          \"target\": \"5d35c039af7c4631a146c0c60b424b65\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if(vaVars.contextualSearchResultCount > 0){\\n        return true;\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"18837f0906b1475eaf2e5ecacf6dd57a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8d07b16788dd46a3ac6086037dc7d758\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"did_articles_help=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"bff5b93099224de0bd5b307bdd99932e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8d07b16788dd46a3ac6086037dc7d758\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"did_articles_help!=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Decision\",\n          \"toNode\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"toEdge\": \"bff5b93099224de0bd5b307bdd99932e\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"6d4e65aca3c14b698f511adf7ec5a5b8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5d35c039af7c4631a146c0c60b424b65\",\n          \"target\": \"a4cc4c56e01047f7b0d45b9029d17b8d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7866a00eba024797a1694e40246249b6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a4cc4c56e01047f7b0d45b9029d17b8d\",\n          \"target\": \"8d07b16788dd46a3ac6086037dc7d758\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3d06d9e36c1748b1a3cf3a95299c50d1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"207e1d9738824bf8b50999392aa602e0\",\n          \"target\": \"ef70c2e3150f4ff4a4358cd01011f197\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"634b7179597547efac668e41bf884e18\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ef70c2e3150f4ff4a4358cd01011f197\",\n          \"target\": \"73d7ac3ed17042f5b5507bfb1c8b7444\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"confirm_catalog_item=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"d1498ff0c1cf480bad9575a58c594383\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ef70c2e3150f4ff4a4358cd01011f197\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"confirm_catalog_item=false\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Confirmation Required ?\",\n          \"toNode\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"toEdge\": \"d1498ff0c1cf480bad9575a58c594383\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"56acd57f4d6a4755aadc1f3556e58e42\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"019517bc2ee94230a8baada8caa4a155\",\n          \"target\": \"ffcaca766a5148b1874a9b52acef4592\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"order_item=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Order Now\"\n        },\n        {\n          \"id\": \"ed0f05ce58e147c38b14dce6f457a940\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ffcaca766a5148b1874a9b52acef4592\",\n          \"target\": \"dce2fd2f9aea4077bf04b1ba6ac992a8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaContext.catalog_builder_preview)\\n       return false;\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"Order\"\n        },\n        {\n          \"id\": \"462129d4c6fe441484477d70a6d57e65\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ffcaca766a5148b1874a9b52acef4592\",\n          \"target\": \"59b8aa46879743f7b8f4e84295210dc4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   if (vaContext.catalog_builder_preview)\\n      return true;\\n   return false;\\n})()\\n\"\n          },\n          \"label\": \"Preview\"\n        },\n        {\n          \"id\": \"0b8c6688ecc8422f9dd9315a66c17967\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"bd81452a9a1b46bba0dc8e99ac7537ac\",\n          \"target\": \"c7adfd19133a4c649d6698c86ae9020c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"submit_producer=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Submit Now\"\n        },\n        {\n          \"id\": \"88ac19880d634863aec01fef48af5b8f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c7adfd19133a4c649d6698c86ae9020c\",\n          \"target\": \"2412f77223a04a709fc32c8e75850387\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaContext.catalog_builder_preview)\\n       return false;\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"Submit\"\n        },\n        {\n          \"id\": \"91d8e6787abf48c1b6a401c72e8160a1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c7adfd19133a4c649d6698c86ae9020c\",\n          \"target\": \"59b8aa46879743f7b8f4e84295210dc4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   if (vaContext.catalog_builder_preview)\\n      return true;\\n   return false;\\n})()\\n\"\n          },\n          \"label\": \"Preview\"\n        },\n        {\n          \"id\": \"9976d66c29fe468ea263fcb71a0a88c4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"59b8aa46879743f7b8f4e84295210dc4\",\n          \"target\": \"7f6ae93a22384a068958c171956f4fe8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c926065844ed46729ec94dab555a1b24\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7f6ae93a22384a068958c171956f4fe8\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e9a26294d65847e49d65d286d5af02ae\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d83ad8b6307945b1b04263ffbb62443b\",\n          \"target\": \"8cefb357d56842a3b31cc3c083a62a74\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cc1c22febe8044d6b28971a400d416c2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8cefb357d56842a3b31cc3c083a62a74\",\n          \"target\": \"1982378d14e14ebaa9ed9d0276f081cb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.upload_attachmentISNOTEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Attachment uploaded\"\n        },\n        {\n          \"id\": \"21569982c5de466caacc81663ce36f1f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8cefb357d56842a3b31cc3c083a62a74\",\n          \"target\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.upload_attachmentISEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Attachment skipped\"\n        },\n        {\n          \"id\": \"206d3c40ec324e9f96bedc418f66ddc7\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"f53349b2dd384eb887feff0287cecbf5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 32;\\n})()\\n\"\n          },\n          \"label\": \"Rich Text Label Question\"\n        },\n        {\n          \"id\": \"70cde711379b4042971cb08f2a047378\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f53349b2dd384eb887feff0287cecbf5\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a33cc4a6aaa14b4ca3936ef4c6aeb510\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"target\": \"bc8ca9598b0d4dadbf7f8e72a04f4353\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n     var itemJson = JSON.parse(vaVars.itemJSON);\\n    var qIndex = parseInt(vaVars.qIndex);\\n    //qIndex is -1 initially, we reset this before search again step \\n\\n    do {\\n        qIndex++;\\n        var question = itemJson.variables[qIndex];\\n    }\\n    while(question && (!question.visible || question.readonly || question.sys_readonly));\\n\\n    if (question) {\\n        vaVars.qIndex = qIndex;\\n        return true;\\n    }\\n    return false;\\n})()\"\n          },\n          \"label\": \"Questions Left\"\n        },\n        {\n          \"id\": \"8336da010e2c49ecb39677d1d8645e98\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bc8ca9598b0d4dadbf7f8e72a04f4353\",\n          \"target\": \"cd0f50d0171b474ebbaea7e27fdf2932\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"41ffb0afb18447539016fc5865622f5e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"cd0f50d0171b474ebbaea7e27fdf2932\",\n          \"target\": \"0df892dd8ce940be81dbdcadbcf584ff\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c717d599d5ee4a93a8d62ee610fe94a4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0df892dd8ce940be81dbdcadbcf584ff\",\n          \"target\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.proceed_with_default=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Do not proceed with default value\"\n        },\n        {\n          \"id\": \"a8f225243c8c4629bdd138b55828797a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0df892dd8ce940be81dbdcadbcf584ff\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.proceed_with_default=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Proceed with default value\"\n        },\n        {\n          \"id\": \"ca761a998e61458aac8d5b0ca6f70cb8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"dce2fd2f9aea4077bf04b1ba6ac992a8\",\n          \"target\": \"a6dc56d1942d4b66825f02d245edc6d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bdd66e36fa614013ab3030a2f1da3d35\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a6dc56d1942d4b66825f02d245edc6d4\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.show_end_state_card=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"24 Show end state card?\",\n          \"toNode\": \"8251855bc8dc431697812132c644503b\",\n          \"toEdge\": \"bdd66e36fa614013ab3030a2f1da3d35\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"2077f9a768754a01a614a527e953c60f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2cc08096b30f45b0827119c3b5f5fa42\",\n          \"target\": \"27123440478c41c49eac84d738a843c2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9163b311cd7541559a1f5a432e1824e2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"27123440478c41c49eac84d738a843c2\",\n          \"target\": \"569ccaedd78340979feca86682affcbe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\\n    return type === 2 || type === 6 || type === 16;\\n})()\"\n          },\n          \"label\": \"Text Type\"\n        },\n        {\n          \"id\": \"b33c741574dd42a4859391363e2ac662\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"27123440478c41c49eac84d738a843c2\",\n          \"target\": \"699922b57f0e404eae6f939bb9ea7bad\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 26;\\n})()\\n\"\n          },\n          \"label\": \"Email Type\"\n        },\n        {\n          \"id\": \"c526457ec29d4ed7ab79901ff22b12c4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"27123440478c41c49eac84d738a843c2\",\n          \"target\": \"805acb1d5a76490283d21adee11ace8d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 28;\\n})()\\n\"\n          },\n          \"label\": \"IP Address Type\"\n        },\n        {\n          \"id\": \"667b38fb082842d1ad250edb463970f0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"27123440478c41c49eac84d738a843c2\",\n          \"target\": \"de355525a3004003ba2d40597493a01d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 27;\\n})()\\n\"\n          },\n          \"label\": \"URL Type\"\n        },\n        {\n          \"id\": \"7ecc083aa28c4fc8b3370008b26d997c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"a1846ce5007045088d91003fdeb5f70e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\\n    return type === 1 || type === 3 || type === 4 || type === 5 || type === 7 || type === 18 || type === 22;\\n})()\\n\"\n          },\n          \"label\": \"Choice or Checkbox Question\"\n        },\n        {\n          \"id\": \"156841d510e7470faba8a24850b69dce\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a1846ce5007045088d91003fdeb5f70e\",\n          \"target\": \"bfa0a72ef56345f78e51e37f289d2962\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !(vaContext.deviceType === \\\"mweb\\\");\\n})()\\n\"\n          },\n          \"label\": \"Other Channels\"\n        },\n        {\n          \"id\": \"26cbdded103f4dfba96fe9e34bb08c2a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bfa0a72ef56345f78e51e37f289d2962\",\n          \"target\": \"2f13545e7aff44fea92c262a72de2f10\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0435a27ec194467f9883053008f7dd93\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2f13545e7aff44fea92c262a72de2f10\",\n          \"target\": \"f9124c93df3c4727a0cab5a33d507c82\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_choice_other_channels.getValue() === \\\"prev\\\";\\n})()\\n\"\n          },\n          \"label\": \"Question Choice Prev\"\n        },\n        {\n          \"id\": \"140cfe88ef0b4b16aabb236091b0852e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f9124c93df3c4727a0cab5a33d507c82\",\n          \"target\": \"bfa0a72ef56345f78e51e37f289d2962\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"779bff352f5d4dac86134d4d459d00ea\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2f13545e7aff44fea92c262a72de2f10\",\n          \"target\": \"7fff18e168564d0d8bc3e955abd96328\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_choice_other_channels.getValue() === \\\"next\\\";\\n})()\\n\"\n          },\n          \"label\": \"Question Choice Next\"\n        },\n        {\n          \"id\": \"01725fa189ad407bb65b6a510d86eef4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7fff18e168564d0d8bc3e955abd96328\",\n          \"target\": \"bfa0a72ef56345f78e51e37f289d2962\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"360bb8ed27344188995deee2423c88ba\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2f13545e7aff44fea92c262a72de2f10\",\n          \"target\": \"a5d25e2774c749c7bdafb0902e5a2c69\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var valuePicked = vaInputs.question_choice_other_channels.getValue();\\n    var condition = valuePicked !== 'next' && valuePicked !== 'prev';\\n    if (condition) {\\n        vaVars.count = 0;\\n        vaVars.index = 0;\\n    }\\n    return condition;\\n})();\"\n          },\n          \"label\": \"Question Choice Chosen\"\n        },\n        {\n          \"id\": \"9bed2eb32ece4f5fbc4ace0d108b2b23\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a5d25e2774c749c7bdafb0902e5a2c69\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4df71503b01d49929276552fe3a98e2f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"03dc98604b2743a89972102a427acdab\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 8;\\n})()\"\n          },\n          \"label\": \"Reference Question\"\n        },\n        {\n          \"id\": \"639ffacb06c8420597c7a3c23d06bc88\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"03dc98604b2743a89972102a427acdab\",\n          \"target\": \"a8757a988a2946a885eb9e8fac4a36e6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaContext.deviceType === \\\"mweb\\\";\\n})()\\n\"\n          },\n          \"label\": \"Mobile/Web Client\"\n        },\n        {\n          \"id\": \"9bcdd2d2312f4279b667c1aa30a4149e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"03dc98604b2743a89972102a427acdab\",\n          \"target\": \"68d06c7a6fad43488621e8ba2d9b72cd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !(vaContext.deviceType === \\\"mweb\\\");\\n})()\"\n          },\n          \"label\": \"Other Channels\"\n        },\n        {\n          \"id\": \"2b989ef8b7ea45d2bcaf455d5463cdff\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"68d06c7a6fad43488621e8ba2d9b72cd\",\n          \"target\": \"d705fe0d136845f1a0a580b3a319a6a8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8ec075e84f3e47739529ef9a9f1a552f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d705fe0d136845f1a0a580b3a319a6a8\",\n          \"target\": \"c39abbdd9d9048ebac88fa462369e4d8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"caea77aed0284ef9863bbb981e454ec7\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c39abbdd9d9048ebac88fa462369e4d8\",\n          \"target\": \"567ecb8c7e69414197b590e62fc96ffa\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_reference_other_channels.getValue() === \\\"prev\\\";\\n})()\\n\"\n          },\n          \"label\": \"Question Reference Prev\"\n        },\n        {\n          \"id\": \"227b5ad325554fe3bffa09808b3aa416\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"567ecb8c7e69414197b590e62fc96ffa\",\n          \"target\": \"d705fe0d136845f1a0a580b3a319a6a8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bafc0a47d577404ca49a85ce5e455277\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c39abbdd9d9048ebac88fa462369e4d8\",\n          \"target\": \"851e1675b771476983be9d9e9a335088\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_reference_other_channels.getValue() === \\\"next\\\";\\n})()\\n\"\n          },\n          \"label\": \"Question Reference Next\"\n        },\n        {\n          \"id\": \"0a9c54efbb384e67a551a54f961e7a95\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"851e1675b771476983be9d9e9a335088\",\n          \"target\": \"d705fe0d136845f1a0a580b3a319a6a8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"beb61aee37ea45d39f9f4213b48fec78\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c39abbdd9d9048ebac88fa462369e4d8\",\n          \"target\": \"ca4281b23e314b0c84c95d012d8a9f0a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var valuePicked = vaInputs.question_reference_other_channels.getValue();\\n    var chosenCondition = valuePicked && valuePicked !== 'next' && valuePicked !== 'prev' && valuePicked !== 'search';\\n    var skippedCondition = vaVars.no_records_found === \\\"false\\\" && !valuePicked;\\n    if (chosenCondition || skippedCondition) {\\n        vaVars.count = 0;\\n        vaVars.index = 0;\\n    }\\n    \\n    return chosenCondition || skippedCondition;\\n})();\"\n          },\n          \"label\": \"Question Reference Chosen/Skipped\"\n        },\n        {\n          \"id\": \"7a4e884b32564d96b7d70ec004492d0b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c39abbdd9d9048ebac88fa462369e4d8\",\n          \"target\": \"68d06c7a6fad43488621e8ba2d9b72cd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var valuePicked = vaInputs.question_reference_other_channels.getValue();\\n    var condition = (vaVars.no_records_found === \\\"true\\\") || valuePicked === \\\"search\\\";\\n    if (condition) {\\n        vaVars.count = 0;\\n        vaVars.index = 0;\\n    }\\n    return condition;\\n})()\\n\"\n          },\n          \"label\": \"Search Question Reference\"\n        },\n        {\n          \"id\": \"951a49bd5e964068867c344e5704b1a1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a8757a988a2946a885eb9e8fac4a36e6\",\n          \"target\": \"ca4281b23e314b0c84c95d012d8a9f0a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"463fd979b1f14afc8de6b06748c2e95d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ca4281b23e314b0c84c95d012d8a9f0a\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fd29eff0bb374eb99cb2c782603ee20c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a6dc56d1942d4b66825f02d245edc6d4\",\n          \"target\": \"f7d3a19c5a144a6692fa0392fbc42601\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.show_end_state_card=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\",\n          \"fromNode\": \"24 Show end state card?\",\n          \"toNode\": \"8251855bc8dc431697812132c644503b\",\n          \"toEdge\": \"fd29eff0bb374eb99cb2c782603ee20c\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"0fb6e757db87473e8efca7d63b3449d2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"767c818240c34396a261e09b5c0e4960\",\n          \"target\": \"207e1d9738824bf8b50999392aa602e0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !!vaVars.isValidCatItem;\\n})()\\n\"\n          },\n          \"label\": \"Valid Catalog Item\",\n          \"fromNode\": \"3 Catalog item validity check\",\n          \"toNode\": \"207e1d9738824bf8b50999392aa602e0\",\n          \"toEdge\": \"0fb6e757db87473e8efca7d63b3449d2\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"8b1757a07dcd4cdcb925d22a7a0520e0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"767c818240c34396a261e09b5c0e4960\",\n          \"target\": \"088c5a499e1444b38835ff2db8919544\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.isValidCatItem;\\n})()\\n\"\n          },\n          \"label\": \"Invalid Catalog Item\",\n          \"fromNode\": \"3 Catalog item validity check\",\n          \"toNode\": \"088c5a499e1444b38835ff2db8919544\",\n          \"toEdge\": \"8b1757a07dcd4cdcb925d22a7a0520e0\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"ee1c014039fb4fc5976dd98463109796\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"df79c5242c244f1dab851ef7285d517f\",\n          \"target\": \"8f1445841a2b4402988276c2a26946d5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dd4700c577ce4ba8b928e1710f6c0431\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8f1445841a2b4402988276c2a26946d5\",\n          \"target\": \"767c818240c34396a261e09b5c0e4960\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e8d98301b2bd4060aad028c8d241cd25\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f33eca4d29b24a16a32705fd29535c44\",\n          \"target\": \"4758ce4d476d46728a411ec16124d7e5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5021376d5d38401e83d9571f529f3b22\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4758ce4d476d46728a411ec16124d7e5\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n     var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n     var json = new JSON();\\n\\n     return !((json.getKeys(quesJson.field_info_messages).length > 0) || (json.getKeys(quesJson.field_warn_messages).length > 0)\\n     || (json.getKeys(quesJson.field_error_messages).length > 0));\\n})()\\n\"\n          },\n          \"label\": \"Has no field messages\",\n          \"fromNode\": \"93 Decision\",\n          \"toNode\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"toEdge\": \"5021376d5d38401e83d9571f529f3b22\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"3588b36ff60941cc91af9ec3a925757f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4758ce4d476d46728a411ec16124d7e5\",\n          \"target\": \"6a90246af7eb400eb4864c65f1814e8a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n     var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n     var json = new JSON();\\n\\n     return ((json.getKeys(quesJson.field_info_messages).length > 0) ||\\n      (json.getKeys(quesJson.field_warn_messages).length > 0) || \\n      (json.getKeys(quesJson.field_error_messages).length > 0));\\n})()\\n\"\n          },\n          \"label\": \"Has Field info and warning messages\"\n        },\n        {\n          \"id\": \"a87c29956deb45a2bed36e2066de809d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6a90246af7eb400eb4864c65f1814e8a\",\n          \"target\": \"9c92ace1fa8245c4bfa429be03bf1c56\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"19e3d269ba4b4d71b5042b823855ccf1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9c92ace1fa8245c4bfa429be03bf1c56\",\n          \"target\": \"677c1ab79d384e7fb39a0f9a01127016\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.change_response=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"true\",\n          \"fromNode\": \"95 Decision\",\n          \"toNode\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"toEdge\": \"19e3d269ba4b4d71b5042b823855ccf1\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"f5f73eee325f4ff68503497dcd696eef\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"677c1ab79d384e7fb39a0f9a01127016\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c198e35dd6b04108a2692897fbdb153b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"27123440478c41c49eac84d738a843c2\",\n          \"target\": \"a1846ce5007045088d91003fdeb5f70e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 7;\\n})()\\n\"\n          },\n          \"label\": \"Checkbox Type\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"d96cb7476e9a411d9217a326591f0d9e\": {\n      \"id\": \"d96cb7476e9a411d9217a326591f0d9e\",\n      \"name\": \"catalog_item_id\",\n      \"label\": \"Catalog_item_id\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"df79c5242c244f1dab851ef7285d517f\",\n      \"isHidden\": false\n    },\n    \"ac6a466540e14e3fba2bc95a5031ff25\": {\n      \"id\": \"ac6a466540e14e3fba2bc95a5031ff25\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"itemJSON\",\n      \"label\": \"itemJSON\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"25f7a4b63ca646c9894f4faf0df05bbf\": {\n      \"id\": \"25f7a4b63ca646c9894f4faf0df05bbf\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"itemName\",\n      \"label\": \"itemName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1e4f5f6d535c4008a8603791f283bcb5\": {\n      \"id\": \"1e4f5f6d535c4008a8603791f283bcb5\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"record_id\",\n      \"label\": \"record_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"2e0982b3a9a44432a3f73b10c6baa16b\": {\n      \"id\": \"2e0982b3a9a44432a3f73b10c6baa16b\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"record_table\",\n      \"label\": \"record_table\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9cab67ed47ce436bb12581ee7ceefb00\": {\n      \"id\": \"9cab67ed47ce436bb12581ee7ceefb00\",\n      \"name\": \"proceed\",\n      \"label\": \"Proceed\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"bd3466c304de408183ccfc9dcd0bcb19\",\n      \"isHidden\": false\n    },\n    \"6ae91a3e02b745a49360070a47f62e04\": {\n      \"id\": \"6ae91a3e02b745a49360070a47f62e04\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"-1\"\n      },\n      \"name\": \"qIndex\",\n      \"label\": \"qIndex\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1efdcf2f469443bab274d33fd859ba49\": {\n      \"id\": \"1efdcf2f469443bab274d33fd859ba49\",\n      \"name\": \"submit_producer\",\n      \"label\": \"Submit Producer\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"03ddb6e3316247e1a29ee3e88693b877\",\n      \"isHidden\": false\n    },\n    \"a9b0f968f69d4ba2abc33a55db96f7bd\": {\n      \"id\": \"a9b0f968f69d4ba2abc33a55db96f7bd\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"7\"\n      },\n      \"name\": \"limit\",\n      \"label\": \"limit\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d33dd0303343465cba5100f17027aaa6\": {\n      \"id\": \"d33dd0303343465cba5100f17027aaa6\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"count\",\n      \"label\": \"count\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"11b4358c95c64540a372ef323b4cfb1a\": {\n      \"id\": \"11b4358c95c64540a372ef323b4cfb1a\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"index\",\n      \"label\": \"index\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"ee4278e027464dbc9047276cfda4b036\": {\n      \"id\": \"ee4278e027464dbc9047276cfda4b036\",\n      \"name\": \"order_item\",\n      \"label\": \"Order Item\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"56988cc5a07a413c951e653967010fed\",\n      \"isHidden\": false\n    },\n    \"d679323216e54589b81e8c5b3229dcb8\": {\n      \"id\": \"d679323216e54589b81e8c5b3229dcb8\",\n      \"name\": \"question_date\",\n      \"label\": \"Question Date\",\n      \"varType\": \"date_time\",\n      \"category\": \"vaInputs\",\n      \"mode\": \"date\",\n      \"nodeId\": \"5d527818c230458e9568ae597f0a9978\",\n      \"isHidden\": false\n    },\n    \"29207fbe55e844c1aaf7bac82f8b30ac\": {\n      \"id\": \"29207fbe55e844c1aaf7bac82f8b30ac\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"validation_message\",\n      \"label\": \"validation_message\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"49591097b4f9403ebc5d93ad049007f0\": {\n      \"id\": \"49591097b4f9403ebc5d93ad049007f0\",\n      \"name\": \"question_text\",\n      \"label\": \"Question Text\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"secure\": false,\n      \"encryptionSalt\": {\n        \"value\": \"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"nodeId\": \"569ccaedd78340979feca86682affcbe\",\n      \"isHidden\": false\n    },\n    \"e5e78bba2e454895a9f7de70d39027b0\": {\n      \"id\": \"e5e78bba2e454895a9f7de70d39027b0\",\n      \"name\": \"question_reference\",\n      \"label\": \"Question Reference\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"a8757a988a2946a885eb9e8fac4a36e6\",\n      \"isHidden\": false\n    },\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"40ddfd5f211f46adbb485c0c2b05ff95\": {\n      \"id\": \"40ddfd5f211f46adbb485c0c2b05ff95\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"request_for\",\n      \"label\": \"request_for\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"dc4af802dc2f47c4bbeccef60a0887c3\": {\n      \"id\": \"dc4af802dc2f47c4bbeccef60a0887c3\",\n      \"name\": \"question_choice\",\n      \"label\": \"Question Choice\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"d4ae63da950140f0b6ae1afa41ed3d69\",\n      \"isHidden\": false\n    },\n    \"c964d5c4ce17414cb95fe1bf03318b7e\": {\n      \"id\": \"c964d5c4ce17414cb95fe1bf03318b7e\",\n      \"name\": \"question_date_time\",\n      \"label\": \"Question Date Time\",\n      \"varType\": \"date_time\",\n      \"category\": \"vaInputs\",\n      \"mode\": \"date_time\",\n      \"nodeId\": \"9857784602ba45daa36362f8081f3f78\",\n      \"isHidden\": false\n    },\n    \"a9d149d98f8c4c5ebede92004778e811\": {\n      \"id\": \"a9d149d98f8c4c5ebede92004778e811\",\n      \"name\": \"question_requested_for\",\n      \"label\": \"Question Requested For\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"2a3e1c9302b7463199467b476dcc5058\",\n      \"isHidden\": false\n    },\n    \"ebbb4a512b184021b572be61b0736b0b\": {\n      \"id\": \"ebbb4a512b184021b572be61b0736b0b\",\n      \"name\": \"search_requested_for\",\n      \"label\": \"Search Requested For\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"secure\": false,\n      \"encryptionSalt\": {\n        \"value\": \"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"nodeId\": \"f145c35d855347fa8375ede73773b057\",\n      \"isHidden\": false\n    },\n    \"43b4de58879f4de19d12c9edf4595b3d\": {\n      \"id\": \"43b4de58879f4de19d12c9edf4595b3d\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return false;\\n})()\\n\"\n      },\n      \"name\": \"canView\",\n      \"label\": \"canView\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a6e7b01c1d1e46a29b5e25666374fcc5\": {\n      \"id\": \"a6e7b01c1d1e46a29b5e25666374fcc5\",\n      \"name\": \"request_for_another_user\",\n      \"label\": \"Request For Another User\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"be0f5328e06a4fdb8663050d29f649a1\",\n      \"isHidden\": false\n    },\n    \"f874ee6d91c945ed8e77457a6b3d59e5\": {\n      \"id\": \"f874ee6d91c945ed8e77457a6b3d59e5\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '14,15,17,21,23,25,29,30';\\n})()\\n\"\n      },\n      \"name\": \"unsupportedVarTypes\",\n      \"label\": \"unsupportedVarTypes\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d0e02123b54944f19a7fc9cfc1785b11\": {\n      \"id\": \"d0e02123b54944f19a7fc9cfc1785b11\",\n      \"name\": \"question_email\",\n      \"label\": \"Question Email\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"secure\": false,\n      \"encryptionSalt\": {\n        \"value\": \"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"nodeId\": \"699922b57f0e404eae6f939bb9ea7bad\",\n      \"isHidden\": false\n    },\n    \"d35b1e93084d4f8390bc356383961ada\": {\n      \"id\": \"d35b1e93084d4f8390bc356383961ada\",\n      \"name\": \"question_ip_address\",\n      \"label\": \"Question IP Address\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"secure\": false,\n      \"encryptionSalt\": {\n        \"value\": \"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"nodeId\": \"805acb1d5a76490283d21adee11ace8d\",\n      \"isHidden\": false\n    },\n    \"3951531a4d754d3f83a6cae37e53ae92\": {\n      \"id\": \"3951531a4d754d3f83a6cae37e53ae92\",\n      \"name\": \"question_url\",\n      \"label\": \"Question URL\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"secure\": false,\n      \"encryptionSalt\": {\n        \"value\": \"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"nodeId\": \"de355525a3004003ba2d40597493a01d\",\n      \"isHidden\": false\n    },\n    \"d3131dcb6d4243858d0ff60ba07588c6\": {\n      \"id\": \"d3131dcb6d4243858d0ff60ba07588c6\",\n      \"name\": \"add_attachment\",\n      \"label\": \"Add Attachment\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"7233865f890743f69ab999234a25ad3e\",\n      \"isHidden\": false\n    },\n    \"15e48e7ffe144828980d41225306d557\": {\n      \"id\": \"15e48e7ffe144828980d41225306d557\",\n      \"name\": \"upload_attachment\",\n      \"label\": \"Upload Attachment\",\n      \"varType\": \"file\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"d83ad8b6307945b1b04263ffbb62443b\",\n      \"isHidden\": false\n    },\n    \"ff738c3df8204d0984a8dddb00dfcbe0\": {\n      \"id\": \"ff738c3df8204d0984a8dddb00dfcbe0\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"media_links_form_attachment\",\n      \"label\": \"media_links_form_attachment\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b5b51b3b069f4faa8cd2c87cf9fcc097\": {\n      \"id\": \"b5b51b3b069f4faa8cd2c87cf9fcc097\",\n      \"name\": \"add_more\",\n      \"label\": \"Add More\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"b9f517e461df4167a3826bf9fa16e638\",\n      \"isHidden\": false\n    },\n    \"ada76ae131be4767832c44a0020aa739\": {\n      \"id\": \"ada76ae131be4767832c44a0020aa739\",\n      \"name\": \"question_attachment\",\n      \"label\": \"Question Attachment\",\n      \"varType\": \"file\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"11dc7c8547e9400b87f48a7c394589fd\",\n      \"isHidden\": false\n    },\n    \"e41adc12f2bf498d9937ad6c1d05c844\": {\n      \"id\": \"e41adc12f2bf498d9937ad6c1d05c844\",\n      \"name\": \"execute_contextual_search\",\n      \"label\": \"Execute_contextual_search\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"df79c5242c244f1dab851ef7285d517f\",\n      \"isHidden\": false\n    },\n    \"d77c358c72074a6c941a40b1e7ffbd34\": {\n      \"id\": \"d77c358c72074a6c941a40b1e7ffbd34\",\n      \"name\": \"confirm_catalog_item\",\n      \"label\": \"Confirm_catalog_item\",\n      \"defaultValue\": \"true\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"df79c5242c244f1dab851ef7285d517f\",\n      \"isHidden\": false\n    },\n    \"0e2b62e855e441d2b7387afcca17d774\": {\n      \"id\": \"0e2b62e855e441d2b7387afcca17d774\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"contextualSearchVariable\",\n      \"label\": \"contextualSearchVariable\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"090ca888eaa04416a884cf55f3dfa396\": {\n      \"id\": \"090ca888eaa04416a884cf55f3dfa396\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"2821675a5b30130070e4492c11f91a89\"\n      },\n      \"name\": \"contextualSearchContext\",\n      \"label\": \"contextualSearchContext\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f46db591eeab4e7bb62314a18e2cf383\": {\n      \"id\": \"f46db591eeab4e7bb62314a18e2cf383\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"3\"\n      },\n      \"name\": \"contextualSearchResultLimit\",\n      \"label\": \"contextualSearchResultLimit\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"986b9a4a65294914853db56df17c25a0\": {\n      \"id\": \"986b9a4a65294914853db56df17c25a0\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"contextualSearchIndex\",\n      \"label\": \"contextualSearchIndex\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"e09ecde1e9f24fbcbbe2e6769e527f36\": {\n      \"id\": \"e09ecde1e9f24fbcbbe2e6769e527f36\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"contextualSearchResultJsonString\",\n      \"label\": \"contextualSearchResultJsonString\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1fa546328e454a059b7789b6143d84ce\": {\n      \"id\": \"1fa546328e454a059b7789b6143d84ce\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"contextualSearchResultCount\",\n      \"label\": \"contextualSearchResultCount\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"29c02fc59a2044ea8ac7822eef35baec\": {\n      \"id\": \"29c02fc59a2044ea8ac7822eef35baec\",\n      \"name\": \"did_articles_help\",\n      \"label\": \"Did_articles_help\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"a4cc4c56e01047f7b0d45b9029d17b8d\",\n      \"isHidden\": false\n    },\n    \"b18d103ac6924ced825414c020736723\": {\n      \"id\": \"b18d103ac6924ced825414c020736723\",\n      \"name\": \"proceed_with_default\",\n      \"label\": \"Proceed With Default\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"cd0f50d0171b474ebbaea7e27fdf2932\",\n      \"isHidden\": false\n    },\n    \"8741e0dddb4d47e58f869783457c45aa\": {\n      \"id\": \"8741e0dddb4d47e58f869783457c45aa\",\n      \"name\": \"show_end_state_card\",\n      \"label\": \"Show_end_state_card\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"df79c5242c244f1dab851ef7285d517f\",\n      \"isHidden\": false\n    },\n    \"0cb822556e9c4949adb5cfae1b521ea7\": {\n      \"id\": \"0cb822556e9c4949adb5cfae1b521ea7\",\n      \"name\": \"question_choice_other_channels\",\n      \"label\": \"Question Choice Other Channels\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"bfa0a72ef56345f78e51e37f289d2962\",\n      \"isHidden\": false\n    },\n    \"fc876df4d3dd49229e790bef174eeb5b\": {\n      \"id\": \"fc876df4d3dd49229e790bef174eeb5b\",\n      \"name\": \"search_reference\",\n      \"label\": \"Search Reference\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY1MDQ4NTE4OTAxMCBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"68d06c7a6fad43488621e8ba2d9b72cd\",\n      \"isHidden\": false\n    },\n    \"df9465dd557149c2b574ba78bf0b455a\": {\n      \"id\": \"df9465dd557149c2b574ba78bf0b455a\",\n      \"name\": \"question_reference_other_channels\",\n      \"label\": \"Question Reference Other Channels\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"d705fe0d136845f1a0a580b3a319a6a8\",\n      \"isHidden\": false\n    },\n    \"eabef6d6b7b1482f8ab8a05eed92470f\": {\n      \"id\": \"eabef6d6b7b1482f8ab8a05eed92470f\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return \\\"false\\\";\\n})()\\n\"\n      },\n      \"name\": \"no_records_found\",\n      \"label\": \"no_records_found\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6e0b667d4dbb4459b52c0dcedcf8b5f1\": {\n      \"id\": \"6e0b667d4dbb4459b52c0dcedcf8b5f1\",\n      \"name\": \"change_response\",\n      \"label\": \"Change Response\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"6a90246af7eb400eb4864c65f1814e8a\",\n      \"isHidden\": false\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_topic_3bffc2a5c363330012d1758a7ff57ebc","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Request Catalog Item","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"A topic block for fetching a user's geolocation coordinates","context_profiles":"","sys_updated_on":"2021-07-29 04:25:54","title":"","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"3f85123353712010b6e8ddeeff7b1225","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2021-01-26 05:41:17","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Geolocation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"","sys_mod_count":"32","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.37\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"86b7d83a7a4641bd9f38c5fb6a81ebe6\": {\n          \"id\": \"86b7d83a7a4641bd9f38c5fb6a81ebe6\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"Would you like to share your location?\",\n              \"id\": \"1617196d3b124152a4edd6a117a07e83\",\n              \"name\": \"permissionPrompt\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"1617196d3b124152a4edd6a117a07e83\"\n          ]\n        },\n        \"41cf7b34b57e49eca1fb8322112fccae\": {\n          \"id\": \"41cf7b34b57e49eca1fb8322112fccae\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"latitude\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.latitude}}\",\n                        \"displayValue\": \"Script Variableslatitude\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            },\n            {\n              \"key\": \"longitude\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.longitude}}\",\n                        \"displayValue\": \"Script Variableslongitude\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            },\n            {\n              \"key\": \"errorMessage\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.errorMessage}}\",\n                        \"displayValue\": \"Script VariableserrorMessage\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            },\n            {\n              \"key\": \"errorType\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.errorType}}\",\n                        \"displayValue\": \"Script VariableserrorType\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            },\n            {\n              \"key\": \"status\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.status}}\",\n                        \"displayValue\": \"Script Variablesstatus\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            }\n          ]\n        },\n        \"57d5fe598cbb40f8b4ef8528a0472c2e\": {\n          \"id\": \"57d5fe598cbb40f8b4ef8528a0472c2e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Geolocation permission granted?\"\n        },\n        \"180b3121614b4a049c13e2effa657c9c\": {\n          \"id\": \"180b3121614b4a049c13e2effa657c9c\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"26e2bda364894708acbd80938dffd97a\": {\n          \"id\": \"26e2bda364894708acbd80938dffd97a\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"share location?\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang(vaInputs.permissionprompt, vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"094a68b61a15473a95761801711747f1\"\n        },\n        \"78562d92fdcd4f418e50acaf1444c8ce\": {\n          \"id\": \"78562d92fdcd4f418e50acaf1444c8ce\",\n          \"stepType\": \"CustomControl\",\n          \"name\": \"Geolocation control\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"Geolocation control\",\n          \"reusableTopicId\": \"358d45bb53312010b6e8ddeeff7b1276\",\n          \"inputs\": {},\n          \"outputs\": [\n            {\n              \"id\": \"a7de13939f9345688810684754b87792\",\n              \"value\": \"georesponsejsonstring\",\n              \"mapping\": \"georesponse\"\n            }\n          ],\n          \"variableIds\": [\n            \"a7de13939f9345688810684754b87792\"\n          ],\n          \"outdatedNote\": false\n        },\n        \"94c8d0930dfd4e47be7df0e7f4aa5967\": {\n          \"id\": \"94c8d0930dfd4e47be7df0e7f4aa5967\",\n          \"name\": \"Record output\",\n          \"script\": \"/*\\nThe Geolocation API\\nstatus: OK if location coordinates were fetched successfully, ERROR` otherwise.\\nlatitude, longitude: the geolocation coordinates\\nisGeoPermissionGrantedForNextUse: determines if the user has granted geolocation permission to fetch location coordinates if requested again during the conversation.\\n  true: do not display permission prompt since the user has granted permission on their device\\n  false: display permission prompt since the user either denied permission or used allow once\\nerrorMessage: message associated with the error (optional)\\nerrortype:\\n    PERMISSION_DENIED\\n    POSITION_UNAVAILABLE\\n    TIMED_OUT\\n    UNKOWN_ERROR\\n*/\\n(function execute() {\\n\\tif (vaInputs.share_location_ == 'false') {\\n\\t\\t//set the appropriate error response if the user denied permission to access location\\n\\t\\tvaVars.status = \\\"ERROR\\\";\\n\\t\\tvaVars.errorType = \\\"PERMISSION_DENIED\\\";\\n\\t\\tvaVars.global_is_geolocation_permission_granted = false;\\n\\t\\treturn;\\n\\t}\\n\\n\\tif (vaInputs.georesponse) {\\n\\t\\tconst geolocationResponseObj = JSON.parse(vaInputs.georesponse);\\n\\t\\tvaVars.status = geolocationResponseObj.status;\\n\\t\\tif (geolocationResponseObj.status == 'OK') {\\n\\t\\t\\tvaVars.latitude = geolocationResponseObj.latitude;\\n\\t\\t\\tvaVars.longitude = geolocationResponseObj.longitude;\\n\\t\\t} else {\\n\\t\\t\\tvaVars.errorType = geolocationResponseObj.errorType;\\n\\t\\t\\tif (geolocationResponseObj.hasOwnProperty('errorMessage')) {\\n\\t\\t\\t\\tvaVars.errorMessage = geolocationResponseObj.errorMessage;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tif (geolocationResponseObj.hasOwnProperty('isGeoPermissionGrantedForNextUse')) {\\n\\t\\t\\tvaVars.global_is_geolocation_permission_granted = geolocationResponseObj.isGeoPermissionGrantedForNextUse;\\n\\t\\t}\\n\\t}\\n\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"0bf55b12ae414f2797c8ad608d7398cc\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"180b3121614b4a049c13e2effa657c9c\",\n          \"target\": \"94c8d0930dfd4e47be7df0e7f4aa5967\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.share_location_=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"89e32470e6fb41d79ac3b938fe614e47\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"86b7d83a7a4641bd9f38c5fb6a81ebe6\",\n          \"target\": \"57d5fe598cbb40f8b4ef8528a0472c2e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"614adfc0e9be44038012ee841fdced9f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"57d5fe598cbb40f8b4ef8528a0472c2e\",\n          \"target\": \"26e2bda364894708acbd80938dffd97a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_is_geolocation_permission_granted === false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"2308579d79814f40a83c4e744c5867c4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"26e2bda364894708acbd80938dffd97a\",\n          \"target\": \"180b3121614b4a049c13e2effa657c9c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6097d8fd7896411a859416428b1be595\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"180b3121614b4a049c13e2effa657c9c\",\n          \"target\": \"78562d92fdcd4f418e50acaf1444c8ce\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.share_location_=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"468e1f3a5e77410496512bb9feb191d9\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"57d5fe598cbb40f8b4ef8528a0472c2e\",\n          \"target\": \"78562d92fdcd4f418e50acaf1444c8ce\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_is_geolocation_permission_granted === true;\\n})()\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"2ec5aaa33bd44fa4af85111589b0b8b1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"78562d92fdcd4f418e50acaf1444c8ce\",\n          \"target\": \"94c8d0930dfd4e47be7df0e7f4aa5967\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"71d56b71340f4c9b8146f75b33116380\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"94c8d0930dfd4e47be7df0e7f4aa5967\",\n          \"target\": \"41cf7b34b57e49eca1fb8322112fccae\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"1617196d3b124152a4edd6a117a07e83\": {\n      \"id\": \"1617196d3b124152a4edd6a117a07e83\",\n      \"name\": \"permissionprompt\",\n      \"label\": \"PermissionPrompt\",\n      \"defaultValue\": \"Would you like to share your location?\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      }\n    },\n    \"094a68b61a15473a95761801711747f1\": {\n      \"id\": \"094a68b61a15473a95761801711747f1\",\n      \"name\": \"share_location_\",\n      \"label\": \"Share Location?\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\"\n    },\n    \"58a22652bd3f44a08c352740a14a847f\": {\n      \"id\": \"58a22652bd3f44a08c352740a14a847f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"latitude\",\n      \"label\": \"latitude\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6975a4c756014aca955003aa94055354\": {\n      \"id\": \"6975a4c756014aca955003aa94055354\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"longitude\",\n      \"label\": \"longitude\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"2cdf44cb5026417192415f99be6b2dd3\": {\n      \"id\": \"2cdf44cb5026417192415f99be6b2dd3\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"errorMessage\",\n      \"label\": \"errorMessage\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"adcfce2a67a5423ab9e75c97dea569df\": {\n      \"id\": \"adcfce2a67a5423ab9e75c97dea569df\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"errorType\",\n      \"label\": \"errorType\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3c73bb5206094202bbb3cfed50180e47\": {\n      \"id\": \"3c73bb5206094202bbb3cfed50180e47\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"status\",\n      \"label\": \"status\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a7de13939f9345688810684754b87792\": {\n      \"id\": \"a7de13939f9345688810684754b87792\",\n      \"name\": \"georesponse\",\n      \"label\": \"Georesponse\",\n      \"defaultValue\": \"georesponsejsonstring\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_topic_3f85123353712010b6e8ddeeff7b1225","channels":"","source_topic_id":"","expose_on_palette":"true","name":"Geolocation","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"public","description":"Enables users to ask for assistance during the conversation and view a list of items that the bot can assist with.","context_profiles":"","sys_updated_on":"2021-04-20 06:16:17","title":"","type":"SETUP_TOPIC","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"43aeac5053130010cf8cddeeff7b1298","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-02-26 22:24:55","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Virtual Agent Capabilities.","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"help,capabilities,Virtual Agent Capabilities","model_type":"","sys_mod_count":"4","nlu_intent_label":"","sys_tags":"","graph":"{\n            \"graph_api_version\": \"1.0.34\",\n            \"goals\": {\n            \"primary\": {\n            \"id\": \"primary\",\n            \"trigger\": {\n            \"type\": \"primary\"\n            },\n            \"name\": \"primary\",\n            \"applicability\": \"\",\n            \"description\": \"\",\n            \"nodes\": {\n            \"59c6ff33ff1f44ce9b35aefa529a6435\": {\n            \"id\": \"59c6ff33ff1f44ce9b35aefa529a6435\",\n            \"stepType\": \"Start\",\n            \"name\": \"Start\",\n            \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n            }\n            },\n            \"1ce1834b8a024b50a10522275731b536\": {\n            \"id\": \"1ce1834b8a024b50a10522275731b536\",\n            \"stepType\": \"TerminateGoal\",\n            \"name\": \"End\",\n            \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n            }\n            },\n            \"344ce1d72b8140149a4fa550b3f79753\": {\n            \"id\": \"344ce1d72b8140149a4fa550b3f79753\",\n            \"name\": \"Explore help\",\n            \"script\": \"(function execute() {\\n    var greetingMessage = vaSystem.getTopicSelectionMessage();\\n    vaSystem.sendTopicPickerControl(greetingMessage);\\n})()\\n\",\n            \"stepType\": \"ScriptAction\",\n            \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n            }\n            }\n            },\n            \"edges\": [\n            {\n            \"id\": \"ab96f11bed3840d782bb04ce111e9821\",\n            \"edgeType\": \"Edge\",\n            \"source\": \"59c6ff33ff1f44ce9b35aefa529a6435\",\n            \"target\": \"344ce1d72b8140149a4fa550b3f79753\",\n            \"sourcePort\": \"\",\n            \"targetPort\": \"\"\n            },\n            {\n            \"id\": \"0e3ab03c263c445ea102c80920a95321\",\n            \"edgeType\": \"Edge\",\n            \"source\": \"344ce1d72b8140149a4fa550b3f79753\",\n            \"target\": \"1ce1834b8a024b50a10522275731b536\",\n            \"sourcePort\": \"\",\n            \"targetPort\": \"\"\n            }\n            ]\n            }\n            },\n            \"variables\": {\n            \"55df1142b5f748348a98a7cd69ba2c87\": {\n            \"category\": \"vaInputs\",\n            \"id\": \"55df1142b5f748348a98a7cd69ba2c87\",\n            \"label\": \"User\",\n            \"name\": \"user\",\n            \"table\": \"sys_user\",\n            \"varType\": \"reference\"\n            }\n            }\n            }","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_topic_43aeac5053130010cf8cddeeff7b1298","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Virtual Agent Capabilities.","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"Deflection","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"","context_profiles":"","sys_updated_on":"2021-10-16 09:36:17","title":"","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"43c0c9895347201033cdddeeff7b127a","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2021-03-20 13:46:10","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Deflection","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"","sys_mod_count":"28","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.39\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"15c39eaf9abc4b2d8e6aeea0b8b3eeb4\": {\n          \"id\": \"15c39eaf9abc4b2d8e6aeea0b8b3eeb4\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"Reference\",\n              \"value\": \"93d2f7645383201033cdddeeff7b1208\",\n              \"id\": \"e9d620c83fe5416d8acc3f181c816ba7\",\n              \"name\": \"Deflection Configuration\",\n              \"required\": true,\n              \"table\": \"ssa_deflection_configuration\",\n              \"hint\": \"Choose a pre-defined Deflection Configuration\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"query\": \"activity_context=7b43fb645383201033cdddeeff7b1246\"\n            },\n            {\n              \"type\": \"Reference\",\n              \"value\": null,\n              \"id\": \"c9fdc198eaaf449e86a2ec28cc010431\",\n              \"name\": \"Deflection Pattern\",\n              \"required\": true,\n              \"table\": \"ssa_deflection_pattern\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"hint\": \"Choose a deflection pattern. Note: The list is not filtered by the Deflection Configuration. Make sure to select a pattern that is tied to the chosen Deflection Configuration. \",\n              \"query\": \"deflection_configuration.activity_context=7b43fb645383201033cdddeeff7b1246\"\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"13de6646ab214dcaafc640a6abc15be6\",\n              \"name\": \"Activity Table\",\n              \"required\": false,\n              \"referenced\": true,\n              \"disabled\": true,\n              \"hint\": \"Optional field: Table name that the deflection activity occurred or would have occurred. Recommend adding incident or task tables related to the deflection \"\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"125c894468914d149d8f3c23a19e8990\",\n              \"name\": \"Activity Ids\",\n              \"hint\": \"Optional field: List of comma-separated Activity SysIds. Recommend adding AI-search results or related tasks in the deflection occurrence\",\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"e9d620c83fe5416d8acc3f181c816ba7\",\n            \"c9fdc198eaaf449e86a2ec28cc010431\",\n            \"13de6646ab214dcaafc640a6abc15be6\",\n            \"125c894468914d149d8f3c23a19e8990\"\n          ]\n        },\n        \"7fdd8bf925bb487397ee19e566d1f221\": {\n          \"id\": \"7fdd8bf925bb487397ee19e566d1f221\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"9292738bed6c4164862d638e6e44d25b\": {\n          \"id\": \"9292738bed6c4164862d638e6e44d25b\",\n          \"name\": \"Deflection tracking script\",\n          \"script\": \"(function execute() {\\n    // Check if VA Deflection tracking is enabled\\n    var enableVaDfTracking = gs.getProperty(\\\"com.glide.cs.va.deflection_tracking.enable\\\",\\\"false\\\");\\n    if (enableVaDfTracking !== \\\"true\\\") \\n        return;\\n\\n    try {\\n        var metricInfo = {\\n            config_id: new String(vaInputs.deflection_configuration),\\n            pattern_id: new String(vaInputs.deflection_pattern),\\n            conversation_task_id: vaVars._topic_calling_task\\n        };\\n\\n        var activitiesInfo = {\\n            activity_table: new String(vaInputs.activity_table),\\n            activity_ids: new String(vaInputs.activity_ids), // comma separated sys_ids\\n        };\\n\\n        // \\\"va.deflection_metric.insert\\\" event script action handles metric inserts\\n        gs.eventQueue(\\n            \\\"va.deflection_metric.insert\\\",\\n            null,\\n            JSON.stringify(metricInfo),\\n            JSON.stringify(activitiesInfo)\\n        );\\n    } catch (e) {\\n        gs.warn(\\\"VA Deflection: Metric-event insert failed \\\" + e);\\n    }\\n})();\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"69495313dc30434d9138cce0ca2a17ac\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"15c39eaf9abc4b2d8e6aeea0b8b3eeb4\",\n          \"target\": \"9292738bed6c4164862d638e6e44d25b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5475d9c52bf4457bb24a232a5aa95e7a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9292738bed6c4164862d638e6e44d25b\",\n          \"target\": \"7fdd8bf925bb487397ee19e566d1f221\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"e9d620c83fe5416d8acc3f181c816ba7\": {\n      \"id\": \"e9d620c83fe5416d8acc3f181c816ba7\",\n      \"name\": \"deflection_configuration\",\n      \"label\": \"Deflection Configuration\",\n      \"defaultValue\": \"93d2f7645383201033cdddeeff7b1208\",\n      \"varType\": \"reference\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"table\": \"ssa_deflection_configuration\"\n    },\n    \"c9fdc198eaaf449e86a2ec28cc010431\": {\n      \"id\": \"c9fdc198eaaf449e86a2ec28cc010431\",\n      \"name\": \"deflection_pattern\",\n      \"label\": \"Deflection Pattern\",\n      \"defaultValue\": null,\n      \"varType\": \"reference\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"table\": \"ssa_deflection_pattern\"\n    },\n    \"13de6646ab214dcaafc640a6abc15be6\": {\n      \"id\": \"13de6646ab214dcaafc640a6abc15be6\",\n      \"name\": \"activity_table\",\n      \"label\": \"Activity Table\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      }\n    },\n    \"125c894468914d149d8f3c23a19e8990\": {\n      \"id\": \"125c894468914d149d8f3c23a19e8990\",\n      \"name\": \"activity_ids\",\n      \"label\": \"Activity Ids\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      }\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_topic_43c0c9895347201033cdddeeff7b127a","channels":"","source_topic_id":"","expose_on_palette":"true","name":"Deflection","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"This topic block verifies user using authenticator app such as Google, Microsoft etc.","context_profiles":"","sys_updated_on":"2022-10-12 16:29:19","title":"","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"44eaeed194ce5110f877f65b88f23e33","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2022-09-19 11:38:46","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Authenticator App Verification","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"Authenticator App Verification","model_type":"","sys_mod_count":"1","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"4455bf091f754383aae397316d4f8f13\": {\n          \"id\": \"4455bf091f754383aae397316d4f8f13\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"1c88f87df8284af0b6d8e8655e33d986\",\n              \"name\": \"userId\",\n              \"required\": true,\n              \"hint\": \"sys_user table record sys_id\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"b0f347297b704b4b8eb4cf2d11055ce5\",\n              \"name\": \"verificationId\",\n              \"hint\": \"pwd_verification table record sys_id\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"9887e174c9c041f3a4381eaa8a1802d3\",\n              \"name\": \"contextId\",\n              \"required\": true,\n              \"hint\": \"conversation context Id\",\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"1c88f87df8284af0b6d8e8655e33d986\",\n            \"b0f347297b704b4b8eb4cf2d11055ce5\",\n            \"9887e174c9c041f3a4381eaa8a1802d3\"\n          ]\n        },\n        \"4d646d8b0511459b9256b969cc056790\": {\n          \"id\": \"4d646d8b0511459b9256b969cc056790\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"Status\",\n              \"value\": \"(function execute() {\\n    return vaVars.input_validation_error ? 'Error' : 'Success';\\n})()\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=6eea6ed194ce5110f877f65b88f23ea6%5Ecalling_cs_topic_idINa51beed194ce5110f877f65b88f23e26\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"Status_Code\",\n              \"value\": \"(function execute() {\\n    var SUCCESS_CODE = \\\"20000\\\";\\n    return vaVars.input_validation_error ? vaVars.error_code : SUCCESS_CODE;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=6eea6ed194ce5110f877f65b88f23ea6%5Ecalling_cs_topic_idINa51beed194ce5110f877f65b88f23e26\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            }\n          ]\n        },\n        \"17c5346b48454f05a13f3740a53e6ff0\": {\n          \"id\": \"17c5346b48454f05a13f3740a53e6ff0\",\n          \"name\": \"Validate Inputs\",\n          \"script\": \"(function execute() {\\n    var passwordResetScopedUtil = new PasswordResetScopedUtil();\\n    var AUTHENTICATOR_VERIFICATION_TYPE = 'c7835ab787773200cfab6dd207cb0b88';\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId =vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n    var INVALID_USER = \\\"40000\\\";\\n    var CONFIGURATION_ISSUE = \\\"40002\\\";\\n    //Check for valid user\\n    var userInfo = passwordResetScopedUtil.getUserByID(userId);\\n    if (gs.nil(userId) || !userInfo.exists()) {\\n        vaVars.is_user_valid = false; // Invalid user\\n        vaVars.error_code = INVALID_USER;\\n    }\\n\\n    //Check for valid context_id\\n    if (gs.nil(contextId)) {\\n        vaVars.input_validation_error = true;\\n        vaVars.error_code = CONFIGURATION_ISSUE;\\n        return;\\n    }\\n\\n    //Check for valid Google authenticator verification type\\n    var verification = passwordResetScopedUtil.getVerificationById(verificationId);\\n    if (gs.nil(verificationId) || !verification.exists() ||\\n        verification.getVerificationTypeId() != AUTHENTICATOR_VERIFICATION_TYPE) {\\n        vaVars.input_validation_error = true; // Invalid verification type\\n        vaVars.error_code = CONFIGURATION_ISSUE;\\n        return;\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d21a01f5b6ea42c8912b9261373786da\": {\n          \"id\": \"d21a01f5b6ea42c8912b9261373786da\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Input Validation Check\"\n        },\n        \"e9b43cf468474a028b1a02210e1a24da\": {\n          \"id\": \"e9b43cf468474a028b1a02210e1a24da\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"Authenticator Code\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Type in the authentication code that's showing on your app screen.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"fb80fc6c23154a5d8ade7411ad7a479d\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"a36155f098484653a9a4968e6eb85a3c\": {\n          \"id\": \"a36155f098484653a9a4968e6eb85a3c\",\n          \"name\": \"Validate Authenticator Code\",\n          \"script\": \"(function execute() {\\n    if(!vaVars.is_user_valid) {\\n        vaVars.input_validation_error = true;\\n        return;\\n    } else {\\n        var userId = vaInputs.userid.getValue();\\n        var verificationId = vaInputs.verificationid.getValue();\\n        var enrollmentMgr = new SNC.PwdEnrollmentManager();\\n        var USER_NOT_ENROLLED_CODE  = \\\"40001\\\";\\n        var is_user_enrolled = enrollmentMgr.isUserEnrolledByVerificationId(userId, verificationId);\\n        if (!is_user_enrolled) {\\n            vaVars.input_validation_error = true; // User not enrolled\\n            vaVars.error_code = USER_NOT_ENROLLED_CODE;\\n            return; \\n        }\\n    }\\n\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId = vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n    var SYSPARM_OTP_CODE = 'sysparm_otp_code';\\n    var INCORRECT_PIN_CODE = \\\"50000\\\";\\n\\n    var userInputs = [];\\n    userInputs.push({ key: SYSPARM_OTP_CODE, value: vaInputs.authenticator_code.getValue()});\\n\\n    var passwordResetScopedUtil = new global.PasswordResetScopedUtil();\\n    var verification_status = passwordResetScopedUtil.verify(userId, '', verificationId, contextId, userInputs);\\n\\n    if (!verification_status) {\\n        vaVars.input_validation_error = true;\\n        vaVars.error_code = INCORRECT_PIN_CODE;\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"0f3b0067c2a142689546d56fa6999d74\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d21a01f5b6ea42c8912b9261373786da\",\n          \"target\": \"e9b43cf468474a028b1a02210e1a24da\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.input_validation_error;\\n})()\"\n          },\n          \"label\": \"Valid Inputs\"\n        },\n        {\n          \"id\": \"91a071b5050b45dfb0349cb4ba42743a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4455bf091f754383aae397316d4f8f13\",\n          \"target\": \"17c5346b48454f05a13f3740a53e6ff0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0812852acbc348c787cfa86304eb56c0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"17c5346b48454f05a13f3740a53e6ff0\",\n          \"target\": \"d21a01f5b6ea42c8912b9261373786da\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c0687a5d29e94fc29cc757b769013115\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d21a01f5b6ea42c8912b9261373786da\",\n          \"target\": \"4d646d8b0511459b9256b969cc056790\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.input_validation_error;\\n})()\"\n          },\n          \"label\": \"Invalid Inputs\"\n        },\n        {\n          \"id\": \"bff1b056da70456aada5ddfc703d1890\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e9b43cf468474a028b1a02210e1a24da\",\n          \"target\": \"a36155f098484653a9a4968e6eb85a3c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"de14833206754fd8aede67514ec8dd3e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a36155f098484653a9a4968e6eb85a3c\",\n          \"target\": \"4d646d8b0511459b9256b969cc056790\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"01de649ec6b0445086fb076523eb2268\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"01de649ec6b0445086fb076523eb2268\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"1c88f87df8284af0b6d8e8655e33d986\": {\n      \"id\": \"1c88f87df8284af0b6d8e8655e33d986\",\n      \"name\": \"userid\",\n      \"label\": \"UserId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"4455bf091f754383aae397316d4f8f13\",\n      \"isHidden\": false\n    },\n    \"b0f347297b704b4b8eb4cf2d11055ce5\": {\n      \"id\": \"b0f347297b704b4b8eb4cf2d11055ce5\",\n      \"name\": \"verificationid\",\n      \"label\": \"VerificationId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"4455bf091f754383aae397316d4f8f13\",\n      \"isHidden\": false\n    },\n    \"9887e174c9c041f3a4381eaa8a1802d3\": {\n      \"id\": \"9887e174c9c041f3a4381eaa8a1802d3\",\n      \"name\": \"contextid\",\n      \"label\": \"ContextId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"4455bf091f754383aae397316d4f8f13\",\n      \"isHidden\": false\n    },\n    \"fb80fc6c23154a5d8ade7411ad7a479d\": {\n      \"id\": \"fb80fc6c23154a5d8ade7411ad7a479d\",\n      \"name\": \"authenticator_code\",\n      \"label\": \"Authenticator Code\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY2MzU3NzAxNDUzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"e9b43cf468474a028b1a02210e1a24da\",\n      \"isHidden\": false\n    },\n    \"d8283e50fe0f43a594fc0f92a65152f8\": {\n      \"id\": \"d8283e50fe0f43a594fc0f92a65152f8\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return false;\\n})()\"\n      },\n      \"name\": \"input_validation_error\",\n      \"label\": \"input_validation_error\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c6bce03321924b1c8f668fbf2a8d0b93\": {\n      \"id\": \"c6bce03321924b1c8f668fbf2a8d0b93\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return true;\\n})()\\n\"\n      },\n      \"name\": \"is_user_valid\",\n      \"label\": \"is_user_valid\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"82cf64fe54254df9a13c977bd6c79e00\": {\n      \"id\": \"82cf64fe54254df9a13c977bd6c79e00\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"error_code\",\n      \"label\": \"error_code\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sys_cb_topic_44eaeed194ce5110f877f65b88f23e33","channels":"","source_topic_id":"bd18bd55940e5110f877f65b88f23ef2","expose_on_palette":"false","name":"Authenticator App Verification","applicability":"","category":"","sys_policy":""},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"Displays details of the created catalog request","context_profiles":"","sys_updated_on":"2024-03-28 04:24:21","title":"","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"4aef659d50930110fa9b861f7d83d769","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2022-05-05 14:28:27","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"End state card for Catalog Request","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"maint","live_agent":"false","key_phrases":"","model_type":"nlu_keyword","sys_mod_count":"8","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.57\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"0e3d646d372d4eed9e85ec13d8cecefb\": {\n          \"id\": \"0e3d646d372d4eed9e85ec13d8cecefb\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"d7b96080f33c4ee5bfc1557a0e2e826d\",\n              \"name\": \"record_id\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": false\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"153e4009f75043cf8339739dc081e419\",\n              \"name\": \"record_table\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": false\n            }\n          ],\n          \"variableIds\": [\n            \"d7b96080f33c4ee5bfc1557a0e2e826d\",\n            \"153e4009f75043cf8339739dc081e419\"\n          ]\n        },\n        \"9e18d27b47eb47f9aec7cb7efbb36c79\": {\n          \"id\": \"9e18d27b47eb47f9aec7cb7efbb36c79\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"28ba5b2c879b4e1a90431a33c4cd55d9\": {\n          \"id\": \"28ba5b2c879b4e1a90431a33c4cd55d9\",\n          \"name\": \"Process end state details\",\n          \"script\": \"(function execute() {\\n    var tableName = vaInputs.record_table;\\n    var recordId = vaInputs.record_id;\\n\\n    var tableUtils = new TableUtils(tableName);\\n    vaVars.isTaskBasedTable = (tableUtils.getAbsoluteBase() == 'task');\\n\\n    var pageId = 'form';\\n    if (vaVars.isTaskBasedTable)\\n        pageId = 'ticket';\\n\\n    var link = '';\\n    var screenId = '';\\n    if (vaVars.portalName === 'mesp') {\\n        var mobileDLink = new global.MobileDeepLinkGenerator('request');\\n        if (tableName == 'sc_req_item')\\n            screenId = '7516f9d787232300e0ef0cf888cb0b4d';\\n        else if (tableName == 'sc_request')\\n            screenId = '276dd3edb79033001befcd58de11a9c7';\\n        else if (tableName == 'incident')\\n            screenId = 'ebb94d9c0f2033001befa68ca8767e4e';\\n        else\\n            screenId = 'd39eb2db87772300e0ef0cf888cb0bcb';\\n\\n        link = mobileDLink.getFormScreenLink(screenId, tableName, recordId);\\n    } else\\n        link = vaSystem.applyLinkTemplate(recordId, tableName);\\n    vaVars.recordLink = link;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"121d348459004aefa284d769eaa80bc7\": {\n          \"id\": \"121d348459004aefa284d769eaa80bc7\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"3c88f4e6d4d94b0d9857d3cf6203412c\": {\n          \"id\": \"3c88f4e6d4d94b0d9857d3cf6203412c\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Request complete message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Your request has been submitted. Here are the details:\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"3ad892d84e324da7bcfde7a737e34dfb\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"70cfdbc88e41480fb40aab496c953171\": {\n          \"id\": \"70cfdbc88e41480fb40aab496c953171\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Your request has been submitted. Here ar\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n\\n    var tableName = vaInputs.record_table;\\n    var recordId = vaInputs.record_id;\\n\\n    var title = '';\\n    var subtitle = '';\\n    var fields = [];\\n    var short_description = '';\\n    var gr;\\n\\n    if (vaVars.isTaskBasedTable)\\n        gr = new GlideRecord('task');\\n    else\\n        gr = new GlideRecord(tableName);\\n    gr.addQuery('sys_id', recordId);\\n    gr.query();\\n    var inputTableGR = new GlideRecord(tableName);\\n    title = inputTableGR.getClassDisplayValue();\\n    if (gr.next()) {\\n        if (gr.isValidField('task_effective_number'))\\n            subtitle = gr.getValue('task_effective_number').toString();\\n        else\\n            subtitle = gr.number.toString();\\n\\n        if (gr.isValidField('short_description')) {\\n            if (vaVars.isTaskBasedTable) {\\n                var checkCanRead = {checkRecordCanRead: false, checkElementCanRead: false};\\n                var shortDescriptionDetails = new global.TaskTableUtils().getTaskFieldDetails(gr, \\\"short_description\\\", checkCanRead);\\n                short_description = shortDescriptionDetails.displayValue;\\n            } else {\\n                short_description = gr.getDisplayValue('short_description').toString();\\n            }\\n            fields.push({\\n                \\\"fieldLabel\\\": gr.getElement('short_description').getLabel(),\\n                \\\"fieldValue\\\": short_description\\n            });\\n        }\\n        if (gr.isValidField('state')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gr.getElement('state').getLabel(),\\n                \\\"fieldValue\\\": gr.getDisplayValue('state').toString()\\n            });\\n        }\\n    }\\n\\n    var card_data = JSON.stringify({\\n        \\\"title\\\": title,\\n        \\\"subtitle\\\": subtitle,\\n        \\\"fields\\\": fields,\\n        \\\"url\\\": vaVars.recordLink.toString()\\n    });\\n    return vaSystem.renderCard(\\\"Card\\\", card_data);\\n})()\\n\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ad14a199bfc442e08d45683e27aa8742\": {\n          \"id\": \"ad14a199bfc442e08d45683e27aa8742\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Submitted record link\",\n          \"url\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaVars.recordLink}}\",\n                      \"displayValue\": \"Script VariablesrecordLink\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"label\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Click here to view the created record\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"header\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Your request has been submitted\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"single\",\n          \"introMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"listOfLinks\": \"\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"4c5fc78a9bc54e0c9293010b6c8e378c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0e3d646d372d4eed9e85ec13d8cecefb\",\n          \"target\": \"28ba5b2c879b4e1a90431a33c4cd55d9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e8c83cd5665248afa1eb9c63f386f261\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"28ba5b2c879b4e1a90431a33c4cd55d9\",\n          \"target\": \"121d348459004aefa284d769eaa80bc7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e1db12cd2985418c9bb0c2e52090c47a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"121d348459004aefa284d769eaa80bc7\",\n          \"target\": \"3c88f4e6d4d94b0d9857d3cf6203412c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.isTaskBasedTable;\\n})()\\n\"\n          },\n          \"label\": \"Task based table\"\n        },\n        {\n          \"id\": \"2aac0bc97c1c4717aa79a5eeb4616c84\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3c88f4e6d4d94b0d9857d3cf6203412c\",\n          \"target\": \"70cfdbc88e41480fb40aab496c953171\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3178a76e29e74f588b133a129b0e55da\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"70cfdbc88e41480fb40aab496c953171\",\n          \"target\": \"9e18d27b47eb47f9aec7cb7efbb36c79\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"18988e8f114c439b8d9353eeafca8058\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"121d348459004aefa284d769eaa80bc7\",\n          \"target\": \"ad14a199bfc442e08d45683e27aa8742\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.isTaskBasedTable;\\n})()\\n\"\n          },\n          \"label\": \"Non-Task based table\"\n        },\n        {\n          \"id\": \"3c0b518346fc4c859d2d75cc749b7ab7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ad14a199bfc442e08d45683e27aa8742\",\n          \"target\": \"9e18d27b47eb47f9aec7cb7efbb36c79\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"7ebfee8cf6f74300b3453e5d931c6f58\": {\n      \"id\": \"7ebfee8cf6f74300b3453e5d931c6f58\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return gs.getProperty('glide.servlet.uri', '');\\n})()\"\n      },\n      \"name\": \"baseUri\",\n      \"label\": \"baseUri\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"519d30b11b6a43fc9501c8e59ef88408\": {\n      \"id\": \"519d30b11b6a43fc9501c8e59ef88408\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"isTaskBasedTable\",\n      \"label\": \"isTaskBasedTable\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9cf332b2faa1463f9f729ab0e051d9cf\": {\n      \"id\": \"9cf332b2faa1463f9f729ab0e051d9cf\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    if (vaContext.deviceType == 'ios' || vaContext.deviceType == 'android')\\n        return 'mesp';\\n\\n    return gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url','sp');\\n})()\\n\"\n      },\n      \"name\": \"portalName\",\n      \"label\": \"portalName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4f8af35066ed48a0bf81b59806d64db7\": {\n      \"id\": \"4f8af35066ed48a0bf81b59806d64db7\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"recordLink\",\n      \"label\": \"recordLink\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d7b96080f33c4ee5bfc1557a0e2e826d\": {\n      \"id\": \"d7b96080f33c4ee5bfc1557a0e2e826d\",\n      \"name\": \"record_id\",\n      \"label\": \"Record_id\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"0e3d646d372d4eed9e85ec13d8cecefb\",\n      \"isHidden\": false\n    },\n    \"153e4009f75043cf8339739dc081e419\": {\n      \"id\": \"153e4009f75043cf8339739dc081e419\",\n      \"name\": \"record_table\",\n      \"label\": \"Record_table\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"0e3d646d372d4eed9e85ec13d8cecefb\",\n      \"isHidden\": false\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_topic_4aef659d50930110fa9b861f7d83d769","channels":"","source_topic_id":"","expose_on_palette":"false","name":"End state card for Catalog Request","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"","context_profiles":"","sys_updated_on":"2023-09-05 14:54:09","title":"","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"610cb8d05382011017c3ddeeff7b12b7","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2022-03-01 04:49:23","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"SoftPIN Verification","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"","sys_mod_count":"4","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.47\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"ce45834ee2c94a4dbec5eac8676fa5e1\": {\n          \"id\": \"ce45834ee2c94a4dbec5eac8676fa5e1\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"83bace1414c04ac88e856feb1e84d6f6\",\n              \"name\": \"userId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"f0aa6a970c494845ab48560f3a1041e0\",\n              \"name\": \"verificationId\",\n              \"referenced\": true,\n              \"required\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"c770be2d81bd4e44b62e6fd82268dc5a\",\n              \"name\": \"contextId\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"required\": true\n            }\n          ],\n          \"variableIds\": [\n            \"83bace1414c04ac88e856feb1e84d6f6\",\n            \"f0aa6a970c494845ab48560f3a1041e0\",\n            \"c770be2d81bd4e44b62e6fd82268dc5a\"\n          ]\n        },\n        \"07aed834619a4e7783e2b0a5c10b98f6\": {\n          \"id\": \"07aed834619a4e7783e2b0a5c10b98f6\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"Status\",\n              \"value\": \"(function execute() {\\n    var response = vaVars.input_validation_error ? 'Error' : 'Success';\\n    return response;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=decd38545382011017c3ddeeff7b127f%5Ecalling_cs_topic_idIN0902a7d2530333006e61ddeeff7b1250,2578d02eebab1110da1861c59c5228e1\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"error_code\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.error_code}}\",\n                        \"displayValue\": \"Script Variableserror_code\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": false\n            }\n          ]\n        },\n        \"1c3800ef0b694affb79c55cbdc03ba00\": {\n          \"id\": \"1c3800ef0b694affb79c55cbdc03ba00\",\n          \"name\": \"Validate Inputs\",\n          \"script\": \"(function execute() {\\n    var SOFTPIN_VERIFICATION_TYPE = 'a67585845302011017c3ddeeff7b1267';\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId = vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n\\n    //Validate verification and type\\n    var passwordResetScopedUtil = new PasswordResetScopedUtil();\\n    var verification = passwordResetScopedUtil.getVerificationById(verificationId);\\n    if (gs.nil(verificationId) ||\\n        !verification.exists() ||\\n        verification.getVerificationTypeId() != SOFTPIN_VERIFICATION_TYPE) {\\n        vaVars.input_validation_error = true; // Not a valid verification type\\n        return;\\n    }\\n\\n    //Check for valid context_id\\n    if (gs.nil(contextId)) {\\n        vaVars.input_validation_error = true;\\n        return;\\n    }\\n\\n     //Check for valid user\\n    var userInfo = GlideUser.getUserByID(userId);\\n    if (gs.nil(userId) ||\\n        !userInfo.exists()) {\\n        vaVars.user_validation_error = true; // User Not Found\\n    }\\n\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"de09aba86bc0410ba6af149d57952e6a\": {\n          \"id\": \"de09aba86bc0410ba6af149d57952e6a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Input Validation Check\"\n        },\n        \"bf4a8ffe77dc48fb80c288e59ef06d7b\": {\n          \"id\": \"bf4a8ffe77dc48fb80c288e59ef06d7b\",\n          \"name\": \"Get SoftPIN Question\",\n          \"script\": \"(function execute() {\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId = vaInputs.verificationid.getValue();\\n\\n    //Get question for the verification\\n    var passwordResetScopedUtil = new global.PasswordResetScopedUtil();\\n    var enrollmentMgr = new SNC.PwdEnrollmentManager();\\n    vaVars.softpin_question = passwordResetScopedUtil.getSoftPINQuestion(verificationId);\\n\\n    //Get salt\\n    if(vaVars.user_validation_error) {\\n         vaVars.salt = passwordResetScopedUtil.getRandomSalt();\\n    } else {\\n        vaVars.salt = new SNC.PwdSoftPINManager().getSaltByUserAndVerificationId(userId, verificationId);\\n\\n        if(JSUtil.nil(vaVars.salt)) { // User not enrolled\\n            vaVars.salt = passwordResetScopedUtil.getRandomSalt();\\n            vaVars.user_validation_error = true; \\n        }\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"109ea03f67ea4e718d8f355089e514e6\": {\n          \"id\": \"109ea03f67ea4e718d8f355089e514e6\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"SoftPIN input\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.softpin_question;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"a2853cc02a384d42b2fd4dd5dc129237\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d7aaada7ec634643874ff207142cb894\": {\n          \"id\": \"d7aaada7ec634643874ff207142cb894\",\n          \"name\": \"Validate User provided PIN\",\n          \"script\": \"(function execute() {\\n    if(vaVars.user_validation_error) {\\n        vaVars.input_validation_error = true;\\n        vaVars.error_code = 40000; //Invalid Soft PIN\\n        return;\\n    }\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId = vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n    var hashedSoftPIN = vaInputs.softpin_input.getValue();\\n    var requestId = '';\\n    var requestExists = new SNC.PwdTrackingManager().requestExists(contextId); //Move to verify processor\\n    if (requestExists)\\n        requestId = contextId;\\n\\n    var userInputs = [];\\n    userInputs.push({ key: 'sysparm_softpin', value: hashedSoftPIN });\\n    userInputs.push({ key: 'isEncrypted', value: true });\\n    userInputs.push({ key: 'request_id', value: requestId });\\n    userInputs.push({ key: 'context_id', value: contextId });\\n\\n    var passwordResetScopedUtil = new global.PasswordResetScopedUtil();\\n    var verificationResult = passwordResetScopedUtil.verify(userId, '', verificationId, requestId, userInputs);\\n    if (!verificationResult) {\\n        vaVars.input_validation_error = true;\\n        vaVars.error_code = 40000; //Invalid Soft PIN\\n        var pwdSoftpinMgr = new SNC.PwdSoftPINManager();\\n        if(pwdSoftpinMgr.isPinExpirationEnabled() && pwdSoftpinMgr.isPinExpired(userId, verificationId, hashedSoftPIN, true)) {\\n                vaVars.error_code = 40001; //Expired Soft PIN\\n        }\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"55bb2a52a7f6420ab7b990b47c4a6887\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bf4a8ffe77dc48fb80c288e59ef06d7b\",\n          \"target\": \"109ea03f67ea4e718d8f355089e514e6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0b6ea5c7a9114fe393d56f442ee75105\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d7aaada7ec634643874ff207142cb894\",\n          \"target\": \"07aed834619a4e7783e2b0a5c10b98f6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"90b1017bcc3a416ea1f78840343b8820\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ce45834ee2c94a4dbec5eac8676fa5e1\",\n          \"target\": \"1c3800ef0b694affb79c55cbdc03ba00\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c2bd1e97f692409abd878d272b15d0a9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1c3800ef0b694affb79c55cbdc03ba00\",\n          \"target\": \"de09aba86bc0410ba6af149d57952e6a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"37f711b2df314210b4957dc93cb61c80\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"de09aba86bc0410ba6af149d57952e6a\",\n          \"target\": \"07aed834619a4e7783e2b0a5c10b98f6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.input_validation_error;\\n})()\\n\"\n          },\n          \"label\": \"Invalid Inputs\"\n        },\n        {\n          \"id\": \"88efaab428224a1e80b79a02aec2ba0c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"de09aba86bc0410ba6af149d57952e6a\",\n          \"target\": \"bf4a8ffe77dc48fb80c288e59ef06d7b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.input_validation_error;\\n})()\\n\"\n          },\n          \"label\": \"Valid Inputs\"\n        },\n        {\n          \"id\": \"ca28351d9661403486e055ec429e2509\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"109ea03f67ea4e718d8f355089e514e6\",\n          \"target\": \"d7aaada7ec634643874ff207142cb894\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"501e1d0b94504c74b61d99a14906a21d\": {\n      \"id\": \"501e1d0b94504c74b61d99a14906a21d\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return false;\\n})()\\n\"\n      },\n      \"name\": \"input_validation_error\",\n      \"label\": \"input_validation_error\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"8cec1fb2f0254ad5bb58921c6e3e79fc\": {\n      \"id\": \"8cec1fb2f0254ad5bb58921c6e3e79fc\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"softpin_question\",\n      \"label\": \"softpin_question\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f98bab99cd78476e8c9a1431f47fb5ca\": {\n      \"id\": \"f98bab99cd78476e8c9a1431f47fb5ca\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"is_user_enrolled\",\n      \"label\": \"is_user_enrolled\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a2853cc02a384d42b2fd4dd5dc129237\": {\n      \"id\": \"a2853cc02a384d42b2fd4dd5dc129237\",\n      \"name\": \"softpin_input\",\n      \"label\": \"SoftPIN Input\",\n      \"varType\": \"string\",\n      \"secure\": true,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"(function execute() {\\n    return vaVars.salt;\\n})()\\n\",\n        \"mode\": \"script\"\n      },\n      \"nodeId\": \"109ea03f67ea4e718d8f355089e514e6\",\n      \"isHidden\": false\n    },\n    \"c585a84423604129996ce1bc719c0358\": {\n      \"id\": \"c585a84423604129996ce1bc719c0358\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"salt\",\n      \"label\": \"salt\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"83bace1414c04ac88e856feb1e84d6f6\": {\n      \"id\": \"83bace1414c04ac88e856feb1e84d6f6\",\n      \"name\": \"userid\",\n      \"label\": \"UserId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"ce45834ee2c94a4dbec5eac8676fa5e1\",\n      \"isHidden\": false\n    },\n    \"f0aa6a970c494845ab48560f3a1041e0\": {\n      \"id\": \"f0aa6a970c494845ab48560f3a1041e0\",\n      \"name\": \"verificationid\",\n      \"label\": \"VerificationId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"ce45834ee2c94a4dbec5eac8676fa5e1\",\n      \"isHidden\": false\n    },\n    \"c770be2d81bd4e44b62e6fd82268dc5a\": {\n      \"id\": \"c770be2d81bd4e44b62e6fd82268dc5a\",\n      \"name\": \"contextid\",\n      \"label\": \"ContextId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"ce45834ee2c94a4dbec5eac8676fa5e1\",\n      \"isHidden\": false\n    },\n    \"6e1ddb3cdfc143598b88c9d7fb795f7b\": {\n      \"id\": \"6e1ddb3cdfc143598b88c9d7fb795f7b\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return false;\\n})()\\n\"\n      },\n      \"name\": \"user_validation_error\",\n      \"label\": \"user_validation_error\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"00024f4e87af4d0db560c574d8f1bcb3\": {\n      \"id\": \"00024f4e87af4d0db560c574d8f1bcb3\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"error_code\",\n      \"label\": \"error_code\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sys_cb_topic_610cb8d05382011017c3ddeeff7b12b7","channels":"","source_topic_id":"","expose_on_palette":"false","name":"SoftPIN Verification","applicability":"","category":"","sys_policy":""},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"public","description":"Asks users if they want to continue with another request or task.","context_profiles":"","sys_updated_on":"2020-08-12 17:16:08","title":"","type":"SETUP_TOPIC","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"","nlu_model":"","sys_id":"748d605053130010cf8cddeeff7b128e","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-02-26 22:19:51","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Anything Else Topic.","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"Anything Else Topic","model_type":"","sys_mod_count":"3","nlu_intent_label":"","sys_tags":"","graph":"{\n      \"graph_api_version\": \"1.0.21\",\n      \"goals\": {\n      \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n      \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n      \"d00c482141544ad98e290101cd722d50\": {\n      \"id\": \"d00c482141544ad98e290101cd722d50\",\n      \"stepType\": \"Start\",\n      \"name\": \"Start\",\n      \"greetingResponse\": {\n      \"mode\": \"simple\",\n      \"value\": \"\"\n      }\n      },\n      \"2893024bb0e54aed9bbfeaf8b31c5a06\": {\n      \"id\": \"2893024bb0e54aed9bbfeaf8b31c5a06\",\n      \"stepType\": \"TerminateGoal\",\n      \"name\": \"End\",\n      \"confirmationMessage\": {\n      \"mode\": \"simple\",\n      \"value\": \"\"\n      }\n      },\n      \"ab73ef455e1744da86c158f900b97c2a\": {\n      \"id\": \"ab73ef455e1744da86c158f900b97c2a\",\n      \"stepType\": \"Decision\",\n      \"name\": \"Decision\"\n      },\n      \"8d019fb7d3c54f36ace5890baf49a2fe\": {\n      \"id\": \"8d019fb7d3c54f36ace5890baf49a2fe\",\n      \"stepType\": \"Prompt\",\n      \"name\": \"Anything Else\",\n      \"prompt\": {\n      \"value\": \"Is there anything else I can assist you with?\",\n      \"mode\": \"simple\"\n      },\n      \"confirmMessage\": {\n      \"value\": \"\",\n      \"mode\": \"simple\"\n      },\n      \"acknowledgeMsg\": {\n      \"value\": \"\",\n      \"mode\": \"simple\"\n      },\n      \"applicability\": {\n      \"value\": \"\",\n      \"mode\": \"query\"\n      },\n      \"optional\": false,\n      \"defaultValue\": {\n      \"value\": \"\",\n      \"mode\": \"simple\"\n      },\n      \"variableId\": \"cfae41274e5e486ea52c2b3018b88c38\",\n      \"withNluUserInput\": true,\n      \"skipIfFulfilled\": false,\n      \"entity\": {\n      \"id\": \"\"\n      },\n      \"skippable\": {\n      \"value\": \"\",\n      \"mode\": \"query\"\n      }\n      },\n      \"30d0ebfb1f9049d7a174fe27746b58e4\": {\n      \"id\": \"30d0ebfb1f9049d7a174fe27746b58e4\",\n      \"name\": \"show topics\",\n      \"script\": \"(function execute() {\\n    vaSystem.switchTopic(vaVars._setup_explore_help_topic);\\n})()\\n\",\n      \"stepType\": \"ScriptAction\",\n      \"applicability\": {\n      \"value\": \"\",\n      \"mode\": \"query\"\n      }\n      },\n      \"14020e3f863d4cdf89fb41908609b779\": {\n      \"id\": \"14020e3f863d4cdf89fb41908609b779\",\n      \"name\": \"Reset Current Topic\",\n      \"script\": \"(function execute() {\\n    vaVars._topic_current = null;\\n})()\\n\",\n      \"stepType\": \"ScriptAction\",\n      \"applicability\": {\n      \"value\": \"\",\n      \"mode\": \"query\"\n      }\n      }\n      },\n      \"edges\": [\n      {\n      \"id\": \"ad83a877b08e4c57b4c80eccd8bc1e3a\",\n      \"edgeType\": \"Branch\",\n      \"source\": \"ab73ef455e1744da86c158f900b97c2a\",\n      \"target\": \"2893024bb0e54aed9bbfeaf8b31c5a06\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\",\n      \"expression\": {\n      \"value\": \"anything_else!=true\",\n      \"mode\": \"query\"\n      },\n      \"label\": \"No\"\n      },\n      {\n      \"id\": \"280e6366184c409ba4c685a2077b86c3\",\n      \"edgeType\": \"Edge\",\n      \"source\": \"8d019fb7d3c54f36ace5890baf49a2fe\",\n      \"target\": \"ab73ef455e1744da86c158f900b97c2a\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\"\n      },\n      {\n      \"id\": \"883ef4dc83c245b3b2364cbd4cdbedd0\",\n      \"edgeType\": \"Branch\",\n      \"source\": \"ab73ef455e1744da86c158f900b97c2a\",\n      \"target\": \"30d0ebfb1f9049d7a174fe27746b58e4\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\",\n      \"expression\": {\n      \"value\": \"anything_else=true\",\n      \"mode\": \"query\"\n      },\n      \"label\": \"Yes\"\n      },\n      {\n      \"id\": \"ef5ba16114504cc69527c6116d0a1816\",\n      \"edgeType\": \"Edge\",\n      \"source\": \"30d0ebfb1f9049d7a174fe27746b58e4\",\n      \"target\": \"14020e3f863d4cdf89fb41908609b779\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\"\n      },\n      {\n      \"id\": \"084ce52938f4498989458162459ff455\",\n      \"edgeType\": \"Edge\",\n      \"source\": \"d00c482141544ad98e290101cd722d50\",\n      \"target\": \"14020e3f863d4cdf89fb41908609b779\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\"\n      },\n      {\n      \"id\": \"3929c0b9f80542318554844e988cf0aa\",\n      \"edgeType\": \"Edge\",\n      \"source\": \"14020e3f863d4cdf89fb41908609b779\",\n      \"target\": \"8d019fb7d3c54f36ace5890baf49a2fe\",\n      \"sourcePort\": \"\",\n      \"targetPort\": \"\"\n      }\n      ]\n      }\n      },\n      \"variables\": {\n      \"cfae41274e5e486ea52c2b3018b88c38\": {\n      \"id\": \"cfae41274e5e486ea52c2b3018b88c38\",\n      \"name\": \"anything_else\",\n      \"label\": \"Anything Else\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\"\n      },\n      \"55e6560fca7b42daae64684801b8a949\": {\n      \"id\": \"55e6560fca7b42daae64684801b8a949\",\n      \"value\": {\n      \"value\": \"\",\n      \"mode\": \"simple\"\n      },\n      \"name\": \"_setup_explore_help_topic\",\n      \"label\": \"_setup_explore_help_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n      },\n      \"515a9715d8634bc2ae98689b1142cca1\": {\n      \"id\": \"515a9715d8634bc2ae98689b1142cca1\",\n      \"value\": {\n      \"value\": \"\",\n      \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_current\",\n      \"label\": \"_topic_current\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n      },\n      \"09d2f8854caa44c2b0a1aff3eb394c11\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"09d2f8854caa44c2b0a1aff3eb394c11\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n      }\n      }\n      }","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_topic_748d605053130010cf8cddeeff7b128e","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Anything Else Topic.","applicability":"(function execute() {\n      return false;\n      })()\n    ","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"","context_profiles":"","sys_updated_on":"2024-05-10 09:32:07","title":"","type":"CUSTOM_INPUT","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"79ebbb3877700210c5c6b2a07b5a99a9","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2024-03-05 13:30:48","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Catalog Item VA Input Control","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"nlu_keyword","sys_mod_count":"19","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.65\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"b28c8757a8c147838ec362764002cc21\": {\n          \"id\": \"b28c8757a8c147838ec362764002cc21\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"09b180bfa63946e8899125a96110d2e6\",\n              \"name\": \"sysId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"083d4d2efd2e464aaf60180d2819fa3c\",\n              \"name\": \"requestedFor\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"false\",\n              \"id\": \"813c26917e8d41da88b3c9071ff94d20\",\n              \"name\": \"forceCloseControl\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"355a85aa4f9b41b284141fa31b5c37b3\",\n              \"name\": \"outputValue\",\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"09b180bfa63946e8899125a96110d2e6\",\n            \"083d4d2efd2e464aaf60180d2819fa3c\",\n            \"813c26917e8d41da88b3c9071ff94d20\",\n            \"355a85aa4f9b41b284141fa31b5c37b3\"\n          ]\n        },\n        \"2ab5e7535adf41d3999f6d67aa8a19e8\": {\n          \"id\": \"2ab5e7535adf41d3999f6d67aa8a19e8\",\n          \"stepType\": \"CustomInput\",\n          \"name\": \"CATALOG_ITEM_VA_CONTROL\",\n          \"generateDataFunction\": \"function execute() {\\n    if (gs.nil(vaInputs.requestedfor))\\n        return { 'sysId': vaInputs.sysid.getValue(), 'forceCloseControl': vaInputs.forceclosecontrol.getValue(), 'outputValue': vaInputs.outputvalue.getValue(), 'catalogItemName': vaVars.catalogItemName, 'bare': true };\\n    else\\n        return { 'sysId': vaInputs.sysid.getValue(), 'requestedFor': vaInputs.requestedfor.getValue(), 'forceCloseControl': vaInputs.forceclosecontrol.getValue(), 'outputValue': vaInputs.outputvalue.getValue(), 'catalogItemName': vaVars.catalogItemName, 'bare': true };\\n}\\n\",\n          \"messageTranscriptFunction\": \"function execute(controlData) {\\n    return gs.getMessage('The Custom Control Catalog item VA just rendered item: {0}', controlData.catalogItemName);\\n}\",\n          \"inputResponseHandlerFunction\": \"function execute(controlData, responseValue) {\\n    if (responseValue && responseValue.status == \\\"SUCCESS\\\" && responseValue.requestTable == \\\"sc_request\\\" && responseValue.requestId != \\\"\\\") {\\n        var gr = new GlideRecord(\\\"sc_req_item\\\");\\n        gr.addEncodedQuery(\\\"request=\\\" + responseValue.requestId);\\n        gr.query();\\n        if (gr.next()) {\\n            responseValue.requestTable = \\\"sc_req_item\\\";\\n            responseValue.requestId = gr.getUniqueValue();\\n        }\\n    }\\n    vaVars.responseFromComponent = JSON.stringify(responseValue);\\n}\\n\",\n          \"inputResponseMessageTranscriptFunction\": \"function execute(controlData, responseValue) {\\n    if (responseValue.status == 'SUCCESS')\\n        return gs.getMessage('Catalog item request completed');\\n    else if (responseValue.status == 'CANCELED')\\n        return gs.getMessage('Catalog item request cancelled');\\n\\n    return gs.getMessage('Status for catalog item request is: {0}', [responseValue.status]);\\n}\",\n          \"unsupportedDeviceMessage\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Sorry, this channel is not supported.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"invocationType\": \"action\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"2cf6986802d049e297ef20fc8b390f76\": {\n          \"id\": \"2cf6986802d049e297ef20fc8b390f76\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"responseFromComponent\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.responseFromComponent}}\",\n                        \"displayValue\": \"Script VariablesresponseFromComponent\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true\n            }\n          ]\n        },\n        \"e60c9bdddc1d4e1fa4b485626b4daa6f\": {\n          \"id\": \"e60c9bdddc1d4e1fa4b485626b4daa6f\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"29b73f5e2eaf430ca20fb02f3834c8ac\": {\n          \"id\": \"29b73f5e2eaf430ca20fb02f3834c8ac\",\n          \"name\": \"Compute Item Name\",\n          \"script\": \"(function execute() {\\n    vaVars.catalogItemName = \\\"\\\";\\n    var item = GlideappCatalogItem.get(vaInputs.sysid.getValue());\\n    if (item)\\n        vaVars.catalogItemName = item.getName();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"9520f9a1e21b415c86a5091934e5f6ee\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2ab5e7535adf41d3999f6d67aa8a19e8\",\n          \"target\": \"2cf6986802d049e297ef20fc8b390f76\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a69479ae2c7a4f81897fb08669b8acbd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b28c8757a8c147838ec362764002cc21\",\n          \"target\": \"e60c9bdddc1d4e1fa4b485626b4daa6f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cbbb931af3df4a479f630da1a8afbb3d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e60c9bdddc1d4e1fa4b485626b4daa6f\",\n          \"target\": \"2cf6986802d049e297ef20fc8b390f76\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.sysidISEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"SysID empty\"\n        },\n        {\n          \"id\": \"1432a33cf78f4f5f8e917f9c1b9bddd0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e60c9bdddc1d4e1fa4b485626b4daa6f\",\n          \"target\": \"29b73f5e2eaf430ca20fb02f3834c8ac\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.sysidISNOTEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"SysID not empty\"\n        },\n        {\n          \"id\": \"78c739591cfe45c6bc12ca66cee4adcb\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"29b73f5e2eaf430ca20fb02f3834c8ac\",\n          \"target\": \"2ab5e7535adf41d3999f6d67aa8a19e8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"09b180bfa63946e8899125a96110d2e6\": {\n      \"id\": \"09b180bfa63946e8899125a96110d2e6\",\n      \"name\": \"sysid\",\n      \"label\": \"SysId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b28c8757a8c147838ec362764002cc21\",\n      \"isHidden\": false\n    },\n    \"083d4d2efd2e464aaf60180d2819fa3c\": {\n      \"id\": \"083d4d2efd2e464aaf60180d2819fa3c\",\n      \"name\": \"requestedfor\",\n      \"label\": \"RequestedFor\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b28c8757a8c147838ec362764002cc21\",\n      \"isHidden\": false\n    },\n    \"8d969f87e13b4cfe9807f68a133a0bf1\": {\n      \"id\": \"8d969f87e13b4cfe9807f68a133a0bf1\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"responseFromComponent\",\n      \"label\": \"responseFromComponent\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"813c26917e8d41da88b3c9071ff94d20\": {\n      \"id\": \"813c26917e8d41da88b3c9071ff94d20\",\n      \"name\": \"forceclosecontrol\",\n      \"label\": \"ForceCloseControl\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b28c8757a8c147838ec362764002cc21\",\n      \"isHidden\": false\n    },\n    \"355a85aa4f9b41b284141fa31b5c37b3\": {\n      \"id\": \"355a85aa4f9b41b284141fa31b5c37b3\",\n      \"name\": \"outputvalue\",\n      \"label\": \"OutputValue\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b28c8757a8c147838ec362764002cc21\",\n      \"isHidden\": false\n    },\n    \"06d23bd9ea664b3cb381d5cb13eb9319\": {\n      \"id\": \"06d23bd9ea664b3cb381d5cb13eb9319\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogItemName\",\n      \"label\": \"catalogItemName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3028ab3304f12210559073c06a02f7b7","value":"3028ab3304f12210559073c06a02f7b7"},"sys_update_name":"sys_cb_topic_79ebbb3877700210c5c6b2a07b5a99a9","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Catalog Item VA Input Control","applicability":"","category":"","sys_policy":""},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"Inserts a pause in the conversation (seconds).","context_profiles":"","sys_updated_on":"2021-04-07 16:30:45","title":"","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"86d5980f534e2010c232ddeeff7b1238","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2021-02-04 22:43:33","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Pause","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"","sys_mod_count":"6","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.34\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"f213af4f8a574ee8a1da7299ca8439a1\": {\n          \"id\": \"f213af4f8a574ee8a1da7299ca8439a1\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"9eaff46b908640dfbfe4a9cecf4c96e7\",\n              \"name\": \"Seconds\",\n              \"required\": true,\n              \"hint\": \"Any duration value greater than the maximum defined in the system will revert to the maximum or 60 seconds if not defined.\",\n              \"referenced\": true,\n              \"disabled\": false\n            }\n          ],\n          \"variableIds\": [\n            \"9eaff46b908640dfbfe4a9cecf4c96e7\"\n          ]\n        },\n        \"2cadc2f5cf8c48d381f321cf6a52da91\": {\n          \"id\": \"2cadc2f5cf8c48d381f321cf6a52da91\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"450ba1c4d6304cc9a3611cdb3a9c8955\": {\n          \"id\": \"450ba1c4d6304cc9a3611cdb3a9c8955\",\n          \"name\": \"Pause\",\n          \"invocationType\": \"subflow\",\n          \"stepType\": \"FlowAction\",\n          \"actionRunAs\": \"session_user\",\n          \"actionSecureField\": false,\n          \"actionSelectSecureField\": \"\",\n          \"actionPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionConfirmPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionNonSecureChannelMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"This action is not supported on this channel.\"\n          },\n          \"subflowSpoke\": \"global\",\n          \"subflowSpokeSubflow\": \"88b3d88b534e2010c232ddeeff7b1296\",\n          \"subflowWaitType\": \"sync\",\n          \"subflowSecureField\": false,\n          \"subflowSelectSecureField\": \"\",\n          \"subflowPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowConfirmPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowNonSecureChannelMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowInputs\": {\n            \"input-seconds\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.maximum_duration_to_pause}}\",\n                        \"displayValue\": \"Script Variablesmaximum_duration_to_pause\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\"\n            }\n          },\n          \"subflowOutputs\": {},\n          \"subflowDefinition\": {\n            \"id\": \"88b3d88b534e2010c232ddeeff7b1296\",\n            \"latest_snapshot_id\": \"a055540f534e2010c232ddeeff7b12db\",\n            \"type\": \"subflow\",\n            \"name\": \"add_a_pause\",\n            \"label\": \"Add a Pause\",\n            \"scope_id\": \"global\",\n            \"description\": \"Add a pause/delay\",\n            \"category\": null,\n            \"parameters_have_loaded\": true,\n            \"input_parameters\": [\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"seconds\",\n                \"label\": \"seconds\",\n                \"type\": \"string\",\n                \"order\": 1,\n                \"required\": false\n              }\n            ],\n            \"output_parameters\": []\n          },\n          \"variableIds\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"73a90fa5a7454856a825dd29956a33b8\": {\n          \"id\": \"73a90fa5a7454856a825dd29956a33b8\",\n          \"name\": \"Validate duration\",\n          \"script\": \"(function execute() {\\n    var maximumDurationToPause = vaInputs.seconds.getValue();\\n    var timeout = gs.getProperty('com.glide.cs.fdih.interactive.timeout') || 60;\\n    \\n    // need parseInt because input seconds is of type String\\n    if (isNaN(maximumDurationToPause) || parseInt(maximumDurationToPause) > timeout) {\\n        maximumDurationToPause = timeout;\\n    }\\n    vaVars.maximum_duration_to_pause = maximumDurationToPause;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"4c565c63d3d64ecb9e7a45c9e2c18b0f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"450ba1c4d6304cc9a3611cdb3a9c8955\",\n          \"target\": \"2cadc2f5cf8c48d381f321cf6a52da91\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"483277d4eea7437694f74ec7bbf5acc5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f213af4f8a574ee8a1da7299ca8439a1\",\n          \"target\": \"73a90fa5a7454856a825dd29956a33b8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dfd278fb94b24feb93a6f2bf7b901aaf\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"73a90fa5a7454856a825dd29956a33b8\",\n          \"target\": \"450ba1c4d6304cc9a3611cdb3a9c8955\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"9eaff46b908640dfbfe4a9cecf4c96e7\": {\n      \"id\": \"9eaff46b908640dfbfe4a9cecf4c96e7\",\n      \"name\": \"seconds\",\n      \"label\": \"Seconds\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      }\n    },\n    \"507c6eb8937d4263b8cba2a2b557df88\": {\n      \"id\": \"507c6eb8937d4263b8cba2a2b557df88\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"maximum_duration_to_pause\",\n      \"label\": \"maximum_duration_to_pause\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_topic_86d5980f534e2010c232ddeeff7b1238","channels":"","source_topic_id":"","expose_on_palette":"true","name":"Pause","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"Fetches the user's geolocation coordinates","context_profiles":"","sys_updated_on":"2021-06-02 21:29:24","title":"","type":"CUSTOM_INPUT","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"925c897b53312010b6e8ddeeff7b12d6","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2021-01-26 00:21:25","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Geolocation control","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"","sys_mod_count":"12","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.35\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"f7c8e76cc51f42d185bd556a274ba253\": {\n          \"id\": \"f7c8e76cc51f42d185bd556a274ba253\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"parameters\": [],\n          \"variableIds\": []\n        },\n        \"a72f840132c34cdd8ec9034f67c370dd\": {\n          \"id\": \"a72f840132c34cdd8ec9034f67c370dd\",\n          \"stepType\": \"CustomInput\",\n          \"name\": \"GEOLOCATION_CONTROL\",\n          \"generateDataFunction\": \"function() {\\n    return {};\\n}\\n\",\n          \"messageTranscriptFunction\": \"function(controlData) {\\n    return '';\\n}\\n\",\n          \"inputResponseHandlerFunction\": \"function(controlData, responseValue) {\\n\\treturn vaVars.geolocationResponse = JSON.stringify(responseValue);\\n}\",\n          \"inputResponseMessageTranscriptFunction\": \"function(controlData, responseValue) {\\n    return '';\\n}\\n\",\n          \"unsupportedDeviceMessage\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang(\\\"Sorry, the Geolocation control is not supported on this channel\\\", vaContext.getRequesterLang());\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9a8140518fbb42159ae2cecc9429400d\": {\n          \"id\": \"9a8140518fbb42159ae2cecc9429400d\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"geoResponseJsonString\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.geolocationResponse}}\",\n                        \"displayValue\": \"Script VariablesgeolocationResponse\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            }\n          ]\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"c08e704fb72941f9b73a528d7cf9bc18\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f7c8e76cc51f42d185bd556a274ba253\",\n          \"target\": \"a72f840132c34cdd8ec9034f67c370dd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"65a65d1b8f294c16bf7e6d4d8b5d8388\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a72f840132c34cdd8ec9034f67c370dd\",\n          \"target\": \"9a8140518fbb42159ae2cecc9429400d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"99a6799e491e4b2db96c2201d61ebd87\": {\n      \"id\": \"99a6799e491e4b2db96c2201d61ebd87\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"geolocationResponse\",\n      \"label\": \"geolocationResponse\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_topic_925c897b53312010b6e8ddeeff7b12d6","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Geolocation control","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"Topic block to verify the user with SMS verification methods","context_profiles":"","sys_updated_on":"2022-04-20 12:40:34","title":"","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"933de149774201100a9bcac5ec5a991a","library":"true","nlu_provider":"","sys_updated_by":"maint","dialog_acts_enabled":"false","sys_created_on":"2022-03-03 16:19:51","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"SMS Verification","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"","sys_mod_count":"119","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.40\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"1adaad9e5bb04c48aaccaa11304f3cd7\": {\n          \"id\": \"1adaad9e5bb04c48aaccaa11304f3cd7\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"e0fab02ea0574435884e802516e0fa9c\",\n              \"name\": \"userId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"ac3fbbe707fb4d5ba55f773377d9704f\",\n              \"name\": \"verificationId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"4c69b59b32b146628d74759222a3b96c\",\n              \"name\": \"contextId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"e0fab02ea0574435884e802516e0fa9c\",\n            \"ac3fbbe707fb4d5ba55f773377d9704f\",\n            \"4c69b59b32b146628d74759222a3b96c\"\n          ]\n        },\n        \"9e23f6091ef4486bb56f1cff58156a99\": {\n          \"id\": \"9e23f6091ef4486bb56f1cff58156a99\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"status\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.status}}\",\n                        \"displayValue\": \"Script Variablesstatus\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=0ebb2b725f8e01100a9bedbf2f7313c5%5Ecalling_cs_topic_idIN83a6ec255f1201100a9bedbf2f731366\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"error_code\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.status_code}}\",\n                        \"displayValue\": \"Script Variablesstatus_code\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=0ebb2b725f8e01100a9bedbf2f7313c5%5Ecalling_cs_topic_idIN83a6ec255f1201100a9bedbf2f731366\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            }\n          ]\n        },\n        \"f6bb3e9f748b49088ef1e046fdc18c2e\": {\n          \"id\": \"f6bb3e9f748b49088ef1e046fdc18c2e\",\n          \"name\": \"Set SMS Verification Mode\",\n          \"script\": \"(function execute() {\\n    vaVars.sms_code_verification_mode  = \\n    new global.PwdNotificationHelper().getSMSCodeVerificationMode(vaInputs.userid.getValue());\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"\"\n          }\n        },\n        \"5efd81b075e34bdf958e00a59be43042\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"SMS Providers\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    var message =  gs.getMessageLang(\\\"Select your mobile service provider\\\", vaContext.getRequesterLang());\\n    var custom_message = '';\\n    if (!gs.nil(vaVars.inboundId))\\n        custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_select_provider_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n    message = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang());\\n        \\n    return message;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\nreturn vaVars.sms_code_verification_mode != undefined\\n    && vaVars.sms_code_verification_mode.toString() == 'mobile' \\n    && (new global.PasswordResetScopedUtil().isNotifyPluginEnabled() == false);\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"c920f4b082104c3aaec7d88470b4fb5d\",\n          \"id\": \"5efd81b075e34bdf958e00a59be43042\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    return new PasswordResetScopedUtil().getNotificationProviders();\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Providers not found\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    return new PasswordResetScopedUtil().getNotificationProviders();\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"2d3fd1b9047643b4a14ad7aa1df3e764\": {\n          \"id\": \"2d3fd1b9047643b4a14ad7aa1df3e764\",\n          \"name\": \"Send SMS Code\",\n          \"script\": \"(function execute() {\\n    var SYSPARM_SMS_VERIFICATION_MODE = 'sysparm_sms_verification_mode';\\n    var MODE_MOBILE = 'mobile';\\n\\n    if (vaVars.sms_code_verification_mode == undefined) {\\n        vaVars.status_code = 40001;\\n        return;\\n    }\\n    \\n    var providerId = '';\\n    if (MODE_MOBILE == vaVars.sms_code_verification_mode.toString() &&\\n        (new global.PasswordResetScopedUtil().isNotifyPluginEnabled() == false)) {\\n        providerId = vaInputs.sms_providers.toString();\\n    }\\n\\n    vaVars.device_code_status =\\n        new global.PasswordResetScopedUtil().sendSMSCodeToUser(vaInputs.contextid.getValue(), vaInputs.verificationid.getValue(), vaVars.sms_code_verification_mode.toString(), providerId, vaInputs.userid.getValue());\\n\\n    var userInputs = [];\\n    userInputs.push({\\n        key: SYSPARM_SMS_VERIFICATION_MODE,\\n        value: vaVars.sms_code_verification_mode.toString()\\n    });\\n\\n    vaVars.userInputs = JSON.stringify(userInputs);\\n\\n    var devices = new global.PwdNotificationHelper().getSubscribedMobileDevices(vaInputs.userid.getValue(), true);\\n\\n    if (devices.length > 0 && devices != null) {\\n        var devicesList = '';\\n        for(var i =0 ; i < devices.length ; i++) {\\n            devicesList = devicesList + '- ' + devices[i].device + '\\\\n';\\n        }\\n        vaVars.device_list = new global.PwdNotificationHelper().prepareMessageFromResponseCode(parseInt(vaVars.device_code_status), vaInputs.verificationid.getValue(), devicesList, vaVars.inboundId, vaVars.providerId);\\n    } else {\\n        var message =  gs.getMessageLang(\\\"Can't send verification code as you are not enrolled.\\\", vaContext.getRequesterLang());\\n        var custom_message = '';\\n        if (!gs.nil(vaVars.inboundId))\\n            custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_user_not_enrolled_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n        vaVars.device_list = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang());\\n        vaVars.status_code = 40001;\\n    }\\n})()\\n\\n\\n    \\n        \\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d6d8f1d54c8f4985b9cae5244b34a4a9\": {\n          \"id\": \"d6d8f1d54c8f4985b9cae5244b34a4a9\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Show Devices List\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return vaVars.device_list.toString();\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.status_code == 20000;\\n})()\\n\"\n          }\n        },\n        \"9f2a6a002a8f41b5a4f6e7cd9a81ef71\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"SMS Code Choice\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    var message =  gs.getMessageLang(\\\"What would you like to do?\\\", vaContext.getRequesterLang());\\n    var custom_message = '';\\n    if (!gs.nil(vaVars.inboundId))\\n        custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_select_code_choice_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n    message = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang());\\n        \\n    return message;\\n})()\\n\\n\\n\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run\\n       and be discoverable (or not).  For example:\\n\\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\\n       return applicability;\\n    */\\n    return vaVars.sms_code_verification_mode != undefined;\\n})()\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"63fa0487bf4d4d959d2d2fb014ef6dff\",\n          \"id\": \"9f2a6a002a8f41b5a4f6e7cd9a81ef71\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"e839ad90e55446959f962d061c77ea33\": {\n          \"id\": \"e839ad90e55446959f962d061c77ea33\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Check SMS Code Choice\"\n        },\n        \"46189bef2e1b4c788b856439fb0beb02\": {\n          \"id\": \"46189bef2e1b4c788b856439fb0beb02\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"Enter Verification Code\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    --vaVars.remaining_attempts;\\n    var message =  gs.getMessageLang(\\\"Enter the code you have received over SMS\\\", vaContext.getRequesterLang());\\n    var custom_message = '';\\n    if (!gs.nil(vaVars.inboundId))\\n        custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_enter_code_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n    message = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang());\\n        \\n    return message;\\n})()\\n\\n\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"2d28081a66b64453a6d3e9664bf2c4f8\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"6a500c6b88684ab289ab9065ef086918\": {\n          \"id\": \"6a500c6b88684ab289ab9065ef086918\",\n          \"name\": \"Verify SMS Code and Set Response\",\n          \"script\": \"(function execute() {\\n    var SYSPARM_ANSWER_SMS_CODE = 'sysparm_answer_sms_code';\\n    var userInputs = JSON.parse(vaVars.userInputs);\\n    userInputs.push({ key: SYSPARM_ANSWER_SMS_CODE, value: vaInputs.enter_verification_code.getValue() });\\n\\n    vaVars.userInputs = JSON.stringify(userInputs);\\n\\n    var passwordResetScopedUtil = new global.PasswordResetScopedUtil();\\n    var verification_status = passwordResetScopedUtil.verify(vaInputs.userid, '', vaInputs.verificationid, vaInputs.contextid, userInputs);\\n    vaVars.status_code = verification_status ? 20000 : 50000;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"95684608d1034ba09ac1ef606879cc38\": {\n          \"id\": \"95684608d1034ba09ac1ef606879cc38\",\n          \"name\": \"Validate Input\",\n          \"script\": \"(function execute() {\\n    var SMS_VERIFICATION_TYPE = '58a2f398eb6001006a668c505206fed3';\\n    var GLIDE_CS_PLUGIN_ID = 'com.glide.cs';\\n    vaVars.status_code = 20000;\\n\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId =vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n    \\n    var pluginManager = new GlidePluginManager();\\n    if (pluginManager.isActive(GLIDE_CS_PLUGIN_ID)) {\\n        try {\\n            var providerJsonString = sn_cs.VASystemObject.getProviderByProviderAppId(vaContext.providerAppId);\\n            if (!gs.nil(providerJsonString)) {\\n                var providerJson = JSON.parse(providerJsonString);\\n                vaVars.channel = providerJson.channelType;\\n            }\\n        } catch (error) {\\n            gs.warn('Plugin : [com.glide.cs] is active, but failed in sn_cs.VASystemObject.getProviderByProviderAppId');\\n        }\\n    }\\n\\n    //Check for valid sms verification\\n    var passwordResetScopedUtil = new PasswordResetScopedUtil();\\n    var verification = passwordResetScopedUtil.getVerificationById(verificationId);\\n    if (gs.nil(verificationId) ||\\n        !verification.exists() ||\\n        verification.getVerificationTypeId() != SMS_VERIFICATION_TYPE) {\\n        vaVars.status_code = 40003;\\n        return;\\n    }\\n\\n    //Check for valid user\\n    var user = GlideUser.getUserByID(vaInputs.userid.getValue());\\n    if (gs.nil(userId) ||\\n        !user.exists()) {\\n        vaVars.status_code = 40004; \\n        return;\\n    }\\n\\n    //Check for valid context_id\\n    if (gs.nil(contextId)) {\\n        vaVars.status_code = 40002;\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"150eaf73430647cc9ac6c70e21fe15c8\": {\n          \"id\": \"150eaf73430647cc9ac6c70e21fe15c8\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Input Validation Check\"\n        },\n        \"b54d9ca80e8042609695a15b2b81b0e9\": {\n          \"id\": \"b54d9ca80e8042609695a15b2b81b0e9\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Request Validation Check\"\n        },\n        \"bc47be43b2f54dc3baa1b5d6e0a7445a\": {\n          \"id\": \"bc47be43b2f54dc3baa1b5d6e0a7445a\",\n          \"name\": \"Initialise Output\",\n          \"script\": \"(function execute() {\\n    vaVars.status = vaVars.status_code == 20000 ? 'Success' : 'Error';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"51bded08eb3c43f480ae97c230165d7e\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Reconfirm\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    var message =  gs.getMessageLang(\\\"You have entered {0}\\\", vaContext.getRequesterLang(), [vaInputs.enter_verification_code.getValue()]);\\n    var custom_message = '';\\n    if (!gs.nil(vaVars.inboundId))\\n        custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_reconfirm_code_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n    message = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang(), [vaInputs.enter_verification_code.getValue()]);\\n        \\n    return message;\\n})()\\n\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return (vaVars.remaining_attempts >= 0) && (vaVars.channel == vaVars.IVR_CHANNEL_ID);\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"41404e2e0065467c841211d211a79498\",\n          \"id\": \"51bded08eb3c43f480ae97c230165d7e\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"4a3f7b25e6d0480692b8de0636b06008\": {\n          \"id\": \"4a3f7b25e6d0480692b8de0636b06008\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Confirmation\"\n        },\n        \"b95ffa14459545708916693566a4a2f4\": {\n          \"id\": \"b95ffa14459545708916693566a4a2f4\",\n          \"name\": \"Set Provider Details\",\n          \"script\": \"(function execute() {\\n    var providerAppId = vaContext.providerAppId;\\n    if (!gs.nil(providerAppId)) {\\n        var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n        vaVars.providerId = providerApp.providerId;\\n        vaVars.inboundId = providerApp.inboundId;\\n    }\\n    \\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"14b85f2e7e4e44079084f6eeb06dd9e1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b54d9ca80e8042609695a15b2b81b0e9\",\n          \"target\": \"9f2a6a002a8f41b5a4f6e7cd9a81ef71\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.status_code == 20000;\\n})()\\n\"\n          },\n          \"label\": \"Valid\"\n        },\n        {\n          \"id\": \"66804b3452164452a8bb910ff6a7e09e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b95ffa14459545708916693566a4a2f4\",\n          \"target\": \"150eaf73430647cc9ac6c70e21fe15c8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b249927224b04cddadf50ef9ec55aee5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6a500c6b88684ab289ab9065ef086918\",\n          \"target\": \"bc47be43b2f54dc3baa1b5d6e0a7445a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"af64cad5afe8406cb8c79c29cf73856c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f6bb3e9f748b49088ef1e046fdc18c2e\",\n          \"target\": \"5efd81b075e34bdf958e00a59be43042\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"359bb5dc04574359a3e7491f05b8cb56\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5efd81b075e34bdf958e00a59be43042\",\n          \"target\": \"2d3fd1b9047643b4a14ad7aa1df3e764\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"61f83693c1e64a93b76987676adaf16f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2d3fd1b9047643b4a14ad7aa1df3e764\",\n          \"target\": \"d6d8f1d54c8f4985b9cae5244b34a4a9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"34bab9afd25546d0a807d3bc88c4a277\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9f2a6a002a8f41b5a4f6e7cd9a81ef71\",\n          \"target\": \"e839ad90e55446959f962d061c77ea33\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d7b2c7a5bba5478ea9fee9ad40b167ee\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e839ad90e55446959f962d061c77ea33\",\n          \"target\": \"2d3fd1b9047643b4a14ad7aa1df3e764\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.sms_code_choice=2\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Resend SMS Code\"\n        },\n        {\n          \"id\": \"1fb0e411525a4497be3dee9128e55189\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e839ad90e55446959f962d061c77ea33\",\n          \"target\": \"46189bef2e1b4c788b856439fb0beb02\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.sms_code_choice=1\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Enter SMS Code\"\n        },\n        {\n          \"id\": \"85972b355ad3436697ae4efbf5f5d95f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1adaad9e5bb04c48aaccaa11304f3cd7\",\n          \"target\": \"95684608d1034ba09ac1ef606879cc38\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"64870be9d3644fe08d0a9e3d7617d789\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"150eaf73430647cc9ac6c70e21fe15c8\",\n          \"target\": \"f6bb3e9f748b49088ef1e046fdc18c2e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.status_code == 20000;\\n})()\\n\"\n          },\n          \"label\": \"Valid Input\"\n        },\n        {\n          \"id\": \"2716271585f64f049fbb9050373eca29\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"150eaf73430647cc9ac6c70e21fe15c8\",\n          \"target\": \"bc47be43b2f54dc3baa1b5d6e0a7445a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.status_code != 20000;\\n})()\\n\"\n          },\n          \"label\": \"Invalid Input\"\n        },\n        {\n          \"id\": \"e83a413412954ea3a5d2bacbb97746cc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d6d8f1d54c8f4985b9cae5244b34a4a9\",\n          \"target\": \"b54d9ca80e8042609695a15b2b81b0e9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dca3e88c870a46eb8850d927d843e617\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b54d9ca80e8042609695a15b2b81b0e9\",\n          \"target\": \"bc47be43b2f54dc3baa1b5d6e0a7445a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.status_code != 20000;\\n})()\\n\"\n          },\n          \"label\": \"Invalid\"\n        },\n        {\n          \"id\": \"df8043a432e94c09b2be00a6207048ce\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bc47be43b2f54dc3baa1b5d6e0a7445a\",\n          \"target\": \"9e23f6091ef4486bb56f1cff58156a99\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2d93411f2787477ebf8c16673077ab24\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"46189bef2e1b4c788b856439fb0beb02\",\n          \"target\": \"51bded08eb3c43f480ae97c230165d7e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6fb48c74620c4fadaf8161960bc9dc35\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"51bded08eb3c43f480ae97c230165d7e\",\n          \"target\": \"4a3f7b25e6d0480692b8de0636b06008\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a60ae24eb5b64681bab3085e0722efcf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4a3f7b25e6d0480692b8de0636b06008\",\n          \"target\": \"6a500c6b88684ab289ab9065ef086918\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return gs.nil(vaInputs.reconfirm) || (vaInputs.reconfirm == 1);\\n})()\\n\"\n          },\n          \"label\": \"Confirm\"\n        },\n        {\n          \"id\": \"06762f2540594b039b3fd41417d4fcc1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4a3f7b25e6d0480692b8de0636b06008\",\n          \"target\": \"46189bef2e1b4c788b856439fb0beb02\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.reconfirm=2\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Re-Enter\"\n        },\n        {\n          \"id\": \"ca0895b391dc4371ac8368f05f13587c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"95684608d1034ba09ac1ef606879cc38\",\n          \"target\": \"b95ffa14459545708916693566a4a2f4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"e0fab02ea0574435884e802516e0fa9c\": {\n      \"id\": \"e0fab02ea0574435884e802516e0fa9c\",\n      \"name\": \"userid\",\n      \"label\": \"UserId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      }\n    },\n    \"ac3fbbe707fb4d5ba55f773377d9704f\": {\n      \"id\": \"ac3fbbe707fb4d5ba55f773377d9704f\",\n      \"name\": \"verificationid\",\n      \"label\": \"VerificationId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      }\n    },\n    \"4c69b59b32b146628d74759222a3b96c\": {\n      \"id\": \"4c69b59b32b146628d74759222a3b96c\",\n      \"name\": \"contextid\",\n      \"label\": \"ContextId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      }\n    },\n    \"c920f4b082104c3aaec7d88470b4fb5d\": {\n      \"id\": \"c920f4b082104c3aaec7d88470b4fb5d\",\n      \"name\": \"sms_providers\",\n      \"label\": \"SMS Providers\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\"\n    },\n    \"63fa0487bf4d4d959d2d2fb014ef6dff\": {\n      \"id\": \"63fa0487bf4d4d959d2d2fb014ef6dff\",\n      \"name\": \"sms_code_choice\",\n      \"label\": \"SMS Code Choice\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Enter SMS code\",\n          \"value\": \"1\"\n        },\n        {\n          \"label\": \"Resend SMS code\",\n          \"value\": \"2\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\"\n    },\n    \"2d28081a66b64453a6d3e9664bf2c4f8\": {\n      \"id\": \"2d28081a66b64453a6d3e9664bf2c4f8\",\n      \"name\": \"enter_verification_code\",\n      \"label\": \"Enter Verification Code\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY0NjY3NTQ2Njk1MyBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      }\n    },\n    \"467764aa5fd340a68409445a0d18c317\": {\n      \"id\": \"467764aa5fd340a68409445a0d18c317\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"sms_code_verification_mode\",\n      \"label\": \"sms_code_verification_mode\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f6a25e14a5bd48eea80c88833a2567e3\": {\n      \"id\": \"f6a25e14a5bd48eea80c88833a2567e3\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"userInputs\",\n      \"label\": \"userInputs\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5ade8887f3384cdc978e4136d8c24b78\": {\n      \"id\": \"5ade8887f3384cdc978e4136d8c24b78\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"device_code_status\",\n      \"label\": \"device_code_status\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5690e660b6f64196b7f952e60e24037f\": {\n      \"id\": \"5690e660b6f64196b7f952e60e24037f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"status_code\",\n      \"label\": \"status_code\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b263e4eb4e0a40d7bef3da09ed5c1121\": {\n      \"id\": \"b263e4eb4e0a40d7bef3da09ed5c1121\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"device_list\",\n      \"label\": \"device_list\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d0c96e7525a14a088f79d93722c56c8b\": {\n      \"id\": \"d0c96e7525a14a088f79d93722c56c8b\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"status\",\n      \"label\": \"status\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"41404e2e0065467c841211d211a79498\": {\n      \"id\": \"41404e2e0065467c841211d211a79498\",\n      \"name\": \"reconfirm\",\n      \"label\": \"Reconfirm\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Confirm\",\n          \"value\": \"1\"\n        },\n        {\n          \"label\": \"Re-Enter\",\n          \"value\": \"2\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\"\n    },\n    \"c2edad24151d4479b08acff4e06a4782\": {\n      \"id\": \"c2edad24151d4479b08acff4e06a4782\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    var attempts = gs.getProperty(\\\"password_reset.ivr.retry_count\\\", \\\"0\\\");\\n    var attemptsNumber = parseInt(attempts);\\n    return (isNaN(attemptsNumber) ? 0 : attemptsNumber);\\n})()\\n\"\n      },\n      \"name\": \"remaining_attempts\",\n      \"label\": \"remaining_attempts\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1f19ae8f6d094517a3bfa77f6c33b637\": {\n      \"id\": \"1f19ae8f6d094517a3bfa77f6c33b637\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"channel\",\n      \"label\": \"channel\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4fa89132e8e440b7846258c1a60150c1\": {\n      \"id\": \"4fa89132e8e440b7846258c1a60150c1\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"phone\"\n      },\n      \"name\": \"IVR_CHANNEL_ID\",\n      \"label\": \"IVR_CHANNEL_ID\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"7ee31df53a8f458097d17d649f4b123d\": {\n      \"id\": \"7ee31df53a8f458097d17d649f4b123d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"providerId\",\n      \"label\": \"providerId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6361d62c02f94d6e8662192ea16f3325\": {\n      \"id\": \"6361d62c02f94d6e8662192ea16f3325\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"inboundId\",\n      \"label\": \"inboundId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sys_cb_topic_933de149774201100a9bcac5ec5a991a","channels":"","source_topic_id":"","expose_on_palette":"false","name":"SMS Verification","applicability":"","category":"","sys_policy":""},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"public","description":"Displays an error message to the user when the virtual agent encounters a problem that it cannot resolve.","context_profiles":"","sys_updated_on":"2022-09-02 09:39:34","title":"","type":"SETUP_TOPIC","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"script","nlu_model":"","sys_id":"95ede45053130010cf8cddeeff7b1289","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-02-26 22:21:31","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Error Handling Topic.","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"Error Handling Topic","model_type":"","sys_mod_count":"15","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"4b103659ec784d338689491eac76a4bc\": {\n          \"id\": \"4b103659ec784d338689491eac76a4bc\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"9dad814726fe46a688c1c537506c7584\": {\n          \"id\": \"9dad814726fe46a688c1c537506c7584\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"18ff37f3dc9e4d36a4924013fa7269d4\": {\n          \"id\": \"18ff37f3dc9e4d36a4924013fa7269d4\",\n          \"name\": \"Initiate Connect To Agent\",\n          \"script\": \"(function execute() {\\n    vaSystem.connectToAgent();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"78a36aa546044f589df474d6baacc234\": {\n          \"id\": \"78a36aa546044f589df474d6baacc234\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Display Error Message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return vaVars.global_error_message;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"d611757099fd4a0493d9eefb87339a79\": {\n          \"id\": \"d611757099fd4a0493d9eefb87339a79\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Live Agent Applicable?\"\n        },\n        \"49ddd8596d6d449cb74b79c80ee10cd7\": {\n          \"id\": \"49ddd8596d6d449cb74b79c80ee10cd7\",\n          \"name\": \"Set Live Agent Applicability\",\n          \"script\": \"(function execute() {\\n    vaVars.isLiveAgentApplicable = true;\\n\\n    if(vaContext && vaContext.disable_live_agent == \\\"true\\\") {\\n        vaVars.isLiveAgentApplicable = false;\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"a3af26089b5a42468213f705fe72b26a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"18ff37f3dc9e4d36a4924013fa7269d4\",\n          \"target\": \"9dad814726fe46a688c1c537506c7584\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e26adac3538943799d33073198191a11\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4b103659ec784d338689491eac76a4bc\",\n          \"target\": \"78a36aa546044f589df474d6baacc234\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"52f5925cf8fd4d26b5bf2a68a615d4ce\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d611757099fd4a0493d9eefb87339a79\",\n          \"target\": \"18ff37f3dc9e4d36a4924013fa7269d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.isLiveAgentApplicable;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"f98e80443f514d658359979710403d4d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d611757099fd4a0493d9eefb87339a79\",\n          \"target\": \"9dad814726fe46a688c1c537506c7584\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.isLiveAgentApplicable;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"3b906a44a95d48ba9ca67917a247d7b8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"78a36aa546044f589df474d6baacc234\",\n          \"target\": \"49ddd8596d6d449cb74b79c80ee10cd7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8c003eb9a0ed4277bafd7594dbafa451\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"49ddd8596d6d449cb74b79c80ee10cd7\",\n          \"target\": \"d611757099fd4a0493d9eefb87339a79\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"ce4258236285487baa863a4eaefd1bcb\": {\n      \"id\": \"ce4258236285487baa863a4eaefd1bcb\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"global_error_message\",\n      \"label\": \"global_error_message\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"038f2447465e494c90fd1e5d6002db2b\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"038f2447465e494c90fd1e5d6002db2b\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_topic_95ede45053130010cf8cddeeff7b1289","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Error Handling Topic.","applicability":"(function execute() {\n            return false;\n            })()\n        ","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"public","description":"Setup topic that calls AI Search topic block and displays the results","context_profiles":"","sys_updated_on":"2022-06-22 16:20:41","title":"","type":"SETUP_TOPIC","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"9ce691b1eb1001102c672add0852288a","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2021-12-08 22:47:43","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"IAR - AI Search","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"IAR - AI Search","model_type":"","sys_mod_count":"150","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"4db66b3e81e7461b89753fafc20c5026\": {\n          \"id\": \"4db66b3e81e7461b89753fafc20c5026\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\": {\n          \"id\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"f2843eaef896486f93adc94eee664f38\": {\n          \"id\": \"f2843eaef896486f93adc94eee664f38\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Results to Display?\"\n        },\n        \"fadbf60b3e7a49739666715ddd717b5d\": {\n          \"id\": \"fadbf60b3e7a49739666715ddd717b5d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Was Links Helpful?\"\n        },\n        \"345c7e123a9f4c69914bd8d1cc7e04d9\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Specific Link Feedback\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Select any recommendations that helped:\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"45c7c4040c50450abe98b33cd1afd8f6\",\n          \"id\": \"345c7e123a9f4c69914bd8d1cc7e04d9\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var response = JSON.parse(vaVars.search_results);\\n    var resultsLength = global.VAAISearchHelperTokyo.getRegularSearchDisplaySize(response);\\n\\n    for (i = 0; i < resultsLength; i++) {\\n        var searchResult = response[i];\\n        var propValues = searchResult.propValues;\\n        var title = global.VAAISearchHelperTokyo.buildSearchTitle(propValues);\\n        options.push({ 'value': searchResult.auto_resolution_line_item_sys_id, 'label': title });\\n    }\\n\\n    options.push({ 'value': 'skip', 'label': gs.getMessageLang('Skip', vaContext.getRequesterLang()) });\\n\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var response = JSON.parse(vaVars.search_results);\\n    var resultsLength = global.VAAISearchHelperTokyo.getRegularSearchDisplaySize(response);\\n\\n    for (i = 0; i < resultsLength; i++) {\\n        var searchResult = response[i];\\n        var propValues = searchResult.propValues;\\n        var title = global.VAAISearchHelperTokyo.buildSearchTitle(propValues);\\n        options.push({ 'value': searchResult.auto_resolution_line_item_sys_id, 'label': title });\\n    }\\n\\n    options.push({ 'value': 'skip', 'label': gs.getMessageLang('Skip', vaContext.getRequesterLang()) });\\n\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"d940e9fb74e04a69a6d42cd71243f6c9\": {\n          \"id\": \"d940e9fb74e04a69a6d42cd71243f6c9\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Display Genius Card\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n    return global.VAAISearchHelperTokyo.generateGeniusCardResponse(\\n        vaVars.search_metadata, vaVars.genius_results, vaSystem, vaInputs, vaVars, \\\"ask_genius_helpful\\\");\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"605bcf7d03ce4adc900660fe114626d4\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Ask Genius Helpful\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Did this recommendation help you?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"3b012a952bfa41b686ac7c2fc1a06283\",\n          \"id\": \"605bcf7d03ce4adc900660fe114626d4\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n\\n    if (!gs.nil(vaVars.catalogId)) {\\n        options.push({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request Catalog Item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang('Yes, it helped', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('No, show me more', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n\\n    if (!gs.nil(vaVars.catalogId)) {\\n        options.push({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request Catalog Item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang('Yes, it helped', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('No, show me more', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"0c400259238b4663acbc31542f884ab5\": {\n          \"id\": \"0c400259238b4663acbc31542f884ab5\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Display Link Results\",\n          \"url\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"label\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"header\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"multiple\",\n          \"introMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Your recommendations...\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"listOfLinks\": \"(function execute(header) {\\n    return global.VAAISearchHelperTokyo.generateSearchResultsResponse(\\n        vaVars.search_metadata, vaVars.search_results, header, vaSystem, vaInputs, vaVars, \\\"ask_links_helpful\\\");\\n})(header)\\n\"\n        },\n        \"499df9625eb343d086a36b742715235d\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Ask Links Helpful\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Did any of the recommendations help you?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"4d42432855d34401a5651afa3e548116\",\n          \"id\": \"499df9625eb343d086a36b742715235d\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang('Yes, they helped', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('No, they did not help', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang('Yes, they helped', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('No, they did not help', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"1e07489c143b4e769963467cbb9ec0b6\": {\n          \"id\": \"1e07489c143b4e769963467cbb9ec0b6\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Was Genius Helpful?\"\n        },\n        \"6c79a718ccd449e39199ba395fd2ded3\": {\n          \"id\": \"6c79a718ccd449e39199ba395fd2ded3\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Request Catalog Item\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"Request Catalog Item\",\n          \"reusableTopicId\": \"a39acd71c3a3330012d1758a7ff57eb6\",\n          \"inputs\": {\n            \"catalog_item_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.catalogId}}\",\n                        \"displayValue\": \"Script VariablescatalogId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"execute_contextual_search\": {\n              \"value\": \"false\",\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            },\n            \"confirm_catalog_item\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"false\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"show_end_state_card\": {\n              \"value\": \"false\",\n              \"mode\": \"simple\",\n              \"type\": \"True/False\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"f5579d07d75b4bbd9cb8663e892360f6\",\n              \"value\": \"record_id\",\n              \"mapping\": \"record_id\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"3f39ab5f55dd4adbb5771bc33bb63acb\",\n              \"value\": \"record_table\",\n              \"mapping\": \"record_table\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"929f4cdf61f1470d9ddfaf5002a82786\",\n              \"value\": \"variables\",\n              \"mapping\": \"variables\",\n              \"preventDisable\": false\n            }\n          ],\n          \"variableIds\": [\n            \"f5579d07d75b4bbd9cb8663e892360f6\",\n            \"3f39ab5f55dd4adbb5771bc33bb63acb\",\n            \"929f4cdf61f1470d9ddfaf5002a82786\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false\n        },\n        \"61bdf71c77c640f2a50d49689f2d1473\": {\n          \"id\": \"61bdf71c77c640f2a50d49689f2d1473\",\n          \"name\": \"Setup\",\n          \"script\": \"(function execute() {\\n    vaVars.loggingContext = JSON.stringify(global.VAAISearchHelperTokyo.getLoggingContext(vaSystem));\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info('Starting \\\"IAR - AI Search\\\" topic');\\n\\n    // get results from api\\n    var contextId = JSON.parse(vaVars.global_notification_context).tableSysId;\\n    var aiSearchResult = global.AutoResolutionAISearchHelper.getSearchResultByContextId(contextId);\\n    \\n    if (aiSearchResult) {\\n        vaVars.ai_search_result_id = aiSearchResult.getSysId();\\n\\n        // adding click metrics params\\n        vaVars.user_id = aiSearchResult.getUserId();\\n        vaVars.session_id = aiSearchResult.getSessionId();\\n        vaVars.is_logged_in = gs.getSession().isLoggedIn();\\n        vaVars.language = gs.getSession().getLanguage();\\n        \\n        var processedResults = global.VAAISearchHelperTokyo.processResults(aiSearchResult.getResultPayload(), vaSystem, vaInputs, vaVars);\\n        var formattedResults = global.AutoResolutionAISearchHelper.formatResultsForIAR(aiSearchResult, processedResults);\\n        \\n        vaVars.search_metadata = formattedResults.searchMetadata;\\n        vaVars.genius_results = formattedResults.geniusSearchResult;\\n        vaVars.search_results = formattedResults.searchResults;\\n    }\\n\\n    try {\\n        var jsonData = JSON.parse(vaVars.genius_results);\\n        var catalogId = jsonData.propValues.actions[0].actionPayload.sysId.toString();\\n        var isCatalogSupported = new sn_sc.CatalogConversationHelper().getConversationalRenderType(catalogId, true);\\n        if (isCatalogSupported == \\\"conversation\\\")\\n          vaVars.catalogId = catalogId;\\n    } catch (e) {\\n        gs.info(\\\"No Catalog Id found for this search result.\\\");\\n    }\\n    \\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"91bb029143f44c42a5b8c06ff4005641\": {\n          \"id\": \"91bb029143f44c42a5b8c06ff4005641\",\n          \"name\": \"Send Feedback\",\n          \"script\": \"(function execute() {\\n    // send feedback for specific result\\n    if (vaInputs.specific_link_feedback != 'skip') {\\n        var positiveValues = AutoResolutionAISearchHelper.getAvailablePositiveFeedbackValues();\\n        \\n        // have to concat string to convert to correct string\\n        global.AutoResolutionAISearchHelper.updateResultLineItemFeedback(vaInputs.specific_link_feedback + '',\\n            global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_POSITIVE, positiveValues[0].value, true);\\n\\n        if (vaVars.ai_search_result_id) {\\n            global.AutoResolutionAISearchHelper.updateAISResultFeedback(vaVars.ai_search_result_id, \\n                                global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_POSITIVE);\\n        }\\n\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"fa37aead0eff47a4836d639a660ad677\": {\n          \"id\": \"fa37aead0eff47a4836d639a660ad677\",\n          \"name\": \"Set Genius Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_genius_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"22f80de33c1b48ee8c67c2a270cfbdb2\": {\n          \"id\": \"22f80de33c1b48ee8c67c2a270cfbdb2\",\n          \"name\": \"Unset Genius Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_genius_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"5f3bf320efc04bc4b09aa155c35aedb9\": {\n          \"id\": \"5f3bf320efc04bc4b09aa155c35aedb9\",\n          \"name\": \"Set Link Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_links_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"abe789bfa2d24fbdb70aa3e10b014b05\": {\n          \"id\": \"abe789bfa2d24fbdb70aa3e10b014b05\",\n          \"name\": \"Unset Link Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_links_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7236a8903bd14705b2addbd0640f5e95\": {\n          \"id\": \"7236a8903bd14705b2addbd0640f5e95\",\n          \"stepType\": \"RecordOutput\",\n          \"name\": \"Request Output Card\",\n          \"variableId\": \"\",\n          \"cardTemplate\": \"General\",\n          \"cardFields\": {},\n          \"mode\": \"script\",\n          \"tableName\": \"sc_req_item\",\n          \"fields\": [\n            \"number\",\n            \"cat_item\",\n            \"price\",\n            \"quantity\",\n            \"requested_for\",\n            \"estimated_delivery\"\n          ],\n          \"cardDefinition\": {\n            \"name\": \"Record\",\n            \"value\": \"General\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"condition\": {\n            \"mode\": \"glide_scripted_query\",\n            \"value\": \"(function execute(table) {\\n       var gr = new GlideRecord(\\\"sc_req_item\\\");\\n       gr.addQuery('sys_id', vaInputs.record_id.toString());\\n       gr.query();\\n       if(gr.next()) {\\n          return gr;\\n       }\\n})(table)\\n\"\n          }\n        },\n        \"83cc02186bbc48f39ee7e2dd2dc109a1\": {\n          \"id\": \"83cc02186bbc48f39ee7e2dd2dc109a1\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Feedback Submitted?\"\n        },\n        \"968247e074bc44029b3baec51485aa3f\": {\n          \"id\": \"968247e074bc44029b3baec51485aa3f\",\n          \"name\": \"Check Feedback Submitted\",\n          \"script\": \"(function execute() {\\n    var response = JSON.parse(vaVars.search_results);\\n    var resultsLength = global.VAAISearchHelperTokyo.getRegularSearchDisplaySize(response);\\n    vaVars.feedback_submitted = 'false';\\n\\n    for (i = 0; i < resultsLength; i++) {\\n        var searchResult = response[i];\\n        var lineItem = new global.AutoResolutionAISearchResultLineItem(searchResult.auto_resolution_line_item_sys_id);\\n        if (lineItem.isFeedbackSubmitted() == true) {\\n            vaVars.feedback_submitted = 'true';\\n        }\\n    }\\n    \\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"2248a68d66a144d49c788243c5ed6695\": {\n          \"id\": \"2248a68d66a144d49c788243c5ed6695\",\n          \"name\": \"Find Request Id\",\n          \"script\": \"(function execute() {\\n    var gr = new GlideRecord(\\\"sc_req_item\\\");\\n    gr.addQuery('sys_id', vaInputs.record_id.toString());\\n    gr.query();\\n    if(gr.next()) {\\n        vaVars.reqItemId = gr.getValue(\\\"sys_id\\\");\\n    }\\n})()\\n\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"722f741ffc2c41f4b588cfc665b984af\": {\n          \"id\": \"722f741ffc2c41f4b588cfc665b984af\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"e2bf60e473d3443ab8c8071e800d4950\": {\n          \"id\": \"e2bf60e473d3443ab8c8071e800d4950\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Request Submitted\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Your request has been submitted successfully.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"2628aceccb0848adb505bdacb7bfb440\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"61696651fa884fa59e934a18c5930bcb\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4db66b3e81e7461b89753fafc20c5026\",\n          \"target\": \"61bdf71c77c640f2a50d49689f2d1473\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e07198421df047b1b67f7effa2d8e994\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fadbf60b3e7a49739666715ddd717b5d\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var notHelpful = vaInputs.ask_links_helpful == 'no' ? true : false;\\n    if(notHelpful && vaVars.ai_search_result_id) {\\n        global.AutoResolutionAISearchHelper.updateAISResultFeedback(vaVars.ai_search_result_id, \\n                                global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_NEGATIVE);\\n    }\\n    return notHelpful;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"6d91d1a7cbdf4fb5ba43e56ca85157d9\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f2843eaef896486f93adc94eee664f38\",\n          \"target\": \"d940e9fb74e04a69a6d42cd71243f6c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return global.VAAISearchHelperTokyo.shouldDisplayGeniusResult(vaVars.genius_results, vaVars.loggingContext);\\n})()\"\n          },\n          \"label\": \"Display Genius Result\"\n        },\n        {\n          \"id\": \"8e35935b0104468db7272364190a0f68\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f2843eaef896486f93adc94eee664f38\",\n          \"target\": \"0c400259238b4663acbc31542f884ab5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.genius_results) && !gs.nil(vaVars.search_results);\\n})()\"\n          },\n          \"label\": \"Display Results\"\n        },\n        {\n          \"id\": \"ab57e58231444c4c95b057d0fe8c0a34\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1e07489c143b4e769963467cbb9ec0b6\",\n          \"target\": \"0c400259238b4663acbc31542f884ab5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'no' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"70a2a2a62d8f4fa1be715cece9862dd2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1e07489c143b4e769963467cbb9ec0b6\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var helpful = vaInputs.ask_genius_helpful == 'yes' ? true : false;\\n\\n    if (helpful) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the genius search result was helpful');\\n\\n        // send feedback\\n        var lineItemSysId = JSON.parse(vaVars.genius_results).auto_resolution_line_item_sys_id;\\n        var positiveValues = AutoResolutionAISearchHelper.getAvailablePositiveFeedbackValues();\\n        \\n        global.AutoResolutionAISearchHelper.updateResultLineItemFeedback(lineItemSysId,\\n            global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_POSITIVE, positiveValues[0].value, true);\\n        \\n        if (vaVars.ai_search_result_id) {\\n            global.AutoResolutionAISearchHelper.updateAISResultFeedback(vaVars.ai_search_result_id, \\n                                global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_POSITIVE);\\n        }\\n    }\\n\\n    return helpful;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"b16fe85fb99e48808aea5fa83a83fda4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1e07489c143b4e769963467cbb9ec0b6\",\n          \"target\": \"6c79a718ccd449e39199ba395fd2ded3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'request_catalog_item' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"Request Catalog Item\"\n        },\n        {\n          \"id\": \"0ae77cbdfaaa4aa2b69992451e98db85\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f2843eaef896486f93adc94eee664f38\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.didFdihInvocationTimeOut ||\\n        (gs.nil(vaVars.genius_results) && gs.nil(vaVars.search_results));\\n})()\"\n          },\n          \"label\": \"No Results or Error\"\n        },\n        {\n          \"id\": \"604066d6af654e0cb0341baa103dbf6b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"61bdf71c77c640f2a50d49689f2d1473\",\n          \"target\": \"f2843eaef896486f93adc94eee664f38\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ca86076161fd4c5ab0e688dd29f9bb50\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"345c7e123a9f4c69914bd8d1cc7e04d9\",\n          \"target\": \"91bb029143f44c42a5b8c06ff4005641\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7da8f6f3443843f78d51b13142144481\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"91bb029143f44c42a5b8c06ff4005641\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"603f5572f2044a549e5ece7a89aa0afd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d940e9fb74e04a69a6d42cd71243f6c9\",\n          \"target\": \"fa37aead0eff47a4836d639a660ad677\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9a4f14c9f98946729ae5a434f7f93069\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"fa37aead0eff47a4836d639a660ad677\",\n          \"target\": \"605bcf7d03ce4adc900660fe114626d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a80d3749418b4a3a8755328cfa8d602a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"605bcf7d03ce4adc900660fe114626d4\",\n          \"target\": \"22f80de33c1b48ee8c67c2a270cfbdb2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"78eabe7115394c50add4ce520f7dfc27\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"22f80de33c1b48ee8c67c2a270cfbdb2\",\n          \"target\": \"1e07489c143b4e769963467cbb9ec0b6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"026833c3714d4126bc500c66f587f29a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0c400259238b4663acbc31542f884ab5\",\n          \"target\": \"5f3bf320efc04bc4b09aa155c35aedb9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"049351e23e42420586df22109f29eca3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5f3bf320efc04bc4b09aa155c35aedb9\",\n          \"target\": \"499df9625eb343d086a36b742715235d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ff512005d01c4072b8544b4d6030c333\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"499df9625eb343d086a36b742715235d\",\n          \"target\": \"abe789bfa2d24fbdb70aa3e10b014b05\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"63650a014857465a93eb2fdc3dd145ee\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"abe789bfa2d24fbdb70aa3e10b014b05\",\n          \"target\": \"fadbf60b3e7a49739666715ddd717b5d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"860ff9291d7d440dbab91f3f1c39d06d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7236a8903bd14705b2addbd0640f5e95\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3f41535464704f6f98d5e21585b21e41\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"83cc02186bbc48f39ee7e2dd2dc109a1\",\n          \"target\": \"345c7e123a9f4c69914bd8d1cc7e04d9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.feedback_submitted == 'false';\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"f297a7e6792f4406b8c4b5aaec7a2d09\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"83cc02186bbc48f39ee7e2dd2dc109a1\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.feedback_submitted == 'true';\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"ff9f8dfcd7c343f9aa019a8c50dd1f6a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fadbf60b3e7a49739666715ddd717b5d\",\n          \"target\": \"968247e074bc44029b3baec51485aa3f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var helpful = vaInputs.ask_links_helpful == 'yes' ? true : false;\\n\\n    if (helpful) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the genius search result was helpful');\\n    }\\n\\n    return helpful;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"ebaf69a9ed4b43afba5d733e01b0c56a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"968247e074bc44029b3baec51485aa3f\",\n          \"target\": \"83cc02186bbc48f39ee7e2dd2dc109a1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f2d59a87dffa4668a6878f34bacbe58b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6c79a718ccd449e39199ba395fd2ded3\",\n          \"target\": \"2248a68d66a144d49c788243c5ed6695\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f4dd832306534f1a841825842f11bf2e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2248a68d66a144d49c788243c5ed6695\",\n          \"target\": \"722f741ffc2c41f4b588cfc665b984af\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5b6ce42128894fa79d679d49d0ca1566\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"722f741ffc2c41f4b588cfc665b984af\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.reqItemId);\\n})()\\n\"\n          },\n          \"label\": \"RequestId Not Found\"\n        },\n        {\n          \"id\": \"caa8ae39b03643938ad4cb33a02e40c9\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"722f741ffc2c41f4b588cfc665b984af\",\n          \"target\": \"e2bf60e473d3443ab8c8071e800d4950\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !gs.nil(vaVars.reqItemId);\\n})()\\n\"\n          },\n          \"label\": \"RequestId Found\"\n        },\n        {\n          \"id\": \"d2a87e144807457389268361823dcfbd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e2bf60e473d3443ab8c8071e800d4950\",\n          \"target\": \"7236a8903bd14705b2addbd0640f5e95\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"a7bd66563d53484b8140d15c3ff37ebf\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"a7bd66563d53484b8140d15c3ff37ebf\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"45c7c4040c50450abe98b33cd1afd8f6\": {\n      \"id\": \"45c7c4040c50450abe98b33cd1afd8f6\",\n      \"name\": \"specific_link_feedback\",\n      \"label\": \"Specific Link Feedback\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\"\n    },\n    \"3b012a952bfa41b686ac7c2fc1a06283\": {\n      \"id\": \"3b012a952bfa41b686ac7c2fc1a06283\",\n      \"name\": \"ask_genius_helpful\",\n      \"label\": \"Ask Genius Helpful\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\"\n    },\n    \"4d42432855d34401a5651afa3e548116\": {\n      \"id\": \"4d42432855d34401a5651afa3e548116\",\n      \"name\": \"ask_links_helpful\",\n      \"label\": \"Ask Links Helpful\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\"\n    },\n    \"ef2a8f8a05314200ac31929fa74c4386\": {\n      \"id\": \"ef2a8f8a05314200ac31929fa74c4386\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogId\",\n      \"label\": \"catalogId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3091e02519da428286ed4fcc4d0f1a83\": {\n      \"id\": \"3091e02519da428286ed4fcc4d0f1a83\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"search_results\",\n      \"label\": \"search_results\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"431b443853d840318ba551a42692d6db\": {\n      \"id\": \"431b443853d840318ba551a42692d6db\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"genius_results\",\n      \"label\": \"genius_results\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fc9451029d91402087ad4d5ceee81dd3\": {\n      \"id\": \"fc9451029d91402087ad4d5ceee81dd3\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"search_metadata\",\n      \"label\": \"search_metadata\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"916908b4cfef4ba4adbc531f444a548e\": {\n      \"id\": \"916908b4cfef4ba4adbc531f444a548e\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"ai_search_result_id\",\n      \"label\": \"ai_search_result_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f8a4a23696fd4d8e9cea8cd28dc8514e\": {\n      \"id\": \"f8a4a23696fd4d8e9cea8cd28dc8514e\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"feedback_submitted\",\n      \"label\": \"feedback_submitted\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f5579d07d75b4bbd9cb8663e892360f6\": {\n      \"id\": \"f5579d07d75b4bbd9cb8663e892360f6\",\n      \"name\": \"record_id\",\n      \"label\": \"Record_id\",\n      \"defaultValue\": \"record_id\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true\n    },\n    \"3f39ab5f55dd4adbb5771bc33bb63acb\": {\n      \"id\": \"3f39ab5f55dd4adbb5771bc33bb63acb\",\n      \"name\": \"record_table\",\n      \"label\": \"Record_table\",\n      \"defaultValue\": \"record_table\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false\n    },\n    \"929f4cdf61f1470d9ddfaf5002a82786\": {\n      \"id\": \"929f4cdf61f1470d9ddfaf5002a82786\",\n      \"name\": \"variables\",\n      \"label\": \"Variables\",\n      \"defaultValue\": \"variables\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false\n    },\n    \"9cf78d5508bf48f68764e75cdb0eb4ff\": {\n      \"id\": \"9cf78d5508bf48f68764e75cdb0eb4ff\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"reqItemId\",\n      \"label\": \"reqItemId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sys_cb_topic_9ce691b1eb1001102c672add0852288a","channels":"","source_topic_id":"09cd04fce121b010f877e0ba54be20da","expose_on_palette":"false","name":"IAR - AI Search","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"","context_profiles":"","sys_updated_on":"2023-02-16 00:15:23","title":"","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"bcc89c0277320110768bc6438c5a9902","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2022-04-12 19:31:47","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Form Content Popup Topic Block","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"","sys_mod_count":"146","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.44\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"4f9941eb27a543ba89f1b2811a30963a\": {\n          \"id\": \"4f9941eb27a543ba89f1b2811a30963a\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"2093830fb8b44f9b92edcf7495007cf3\",\n              \"name\": \"sysId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"f5bdb66603fc411e8e24a0bc41b88d99\",\n              \"name\": \"table\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"6191a1bbace8469eb9551447b0df2783\",\n              \"name\": \"view\",\n              \"referenced\": false,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"2093830fb8b44f9b92edcf7495007cf3\",\n            \"f5bdb66603fc411e8e24a0bc41b88d99\",\n            \"6191a1bbace8469eb9551447b0df2783\"\n          ]\n        },\n        \"0bc6267a202c4be496febedad51f7ad8\": {\n          \"id\": \"0bc6267a202c4be496febedad51f7ad8\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"a7b131c4c17f449caae0551e74fc2d18\": {\n          \"id\": \"a7b131c4c17f449caae0551e74fc2d18\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Form Link Component\",\n          \"url\": {\n            \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    \\n    var uibLink = gs.getProperty(\\\"glide.servlet.uri\\\")+ \\\"now/virtual-agent/content/forms/\\\"+ vaInputs.sysid + \\\"/\\\" + vaInputs.table + \\\"/\\\"+ vaSystem.getConversationId()+\\\"/\\\"+vaSystem.getConversationTaskId()+\\\"/\\\"+ vaSystem.getSessionIdOnConversation() + \\\"/form_choice_list\\\";\\n    \\n    if (vaInputs.view) { \\n        return uibLink + \\\"/params/view/\\\" + vaInputs.view; \\n    }\\n\\n    if(!gs.isLoggedIn()){\\n        if (vaInputs.view) { \\n            return uibLink + \\\"/guestSessionIdentifier/\\\" + vaSystem.getGuestSessionIdentifier();\\n        }\\n        return uibLink + \\\"/params/guestSessionIdentifier/\\\"+ vaSystem.getGuestSessionIdentifier();\\n    }\\n    return uibLink;\\n\\n    \\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"label\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Click on this link\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"header\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Submit your form here: \"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"single\",\n          \"introMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"listOfLinks\": \"\"\n        },\n        \"3e3646f4e2454b9889d8de7db60f0123\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"form_choice_list\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"What would you like to do? \"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"57e02103967c461887498674a5b72d75\",\n          \"id\": \"3e3646f4e2454b9889d8de7db60f0123\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = []; // add options here...\\n    options.push({'value': 'form_choice_1', 'label' : gs.getMessageLang(\\\"I don't want to fill out the form.\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({'value': 'form_choice_2', 'label' : gs.getMessageLang(\\\"I'm done.\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Can't find records. \"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = []; // add options here...\\n    options.push({'value': 'form_choice_1', 'label' : gs.getMessageLang(\\\"I don't want to fill out the form.\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({'value': 'form_choice_2', 'label' : gs.getMessageLang(\\\"I'm done.\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"c64282a73b714148b77467934d2acafe\": {\n          \"id\": \"c64282a73b714148b77467934d2acafe\",\n          \"name\": \"Accept UIB Page Responses\",\n          \"script\": \"(function execute() {\\n   vaSystem.acceptUIBMessages(true, \\\"form_choice_list\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"da9867eca4124d4c87049ae9004b8c64\": {\n          \"id\": \"da9867eca4124d4c87049ae9004b8c64\",\n          \"name\": \"Disable UIB Page Responses\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"form_choice_list\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"afd26b30d27d4019b4bef8536dc140b2\": {\n          \"id\": \"afd26b30d27d4019b4bef8536dc140b2\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"d2672c9441094c7fa0186fa194b2c90a\": {\n          \"id\": \"d2672c9441094c7fa0186fa194b2c90a\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"I'm done. \",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"I understand you don't want to fill out the form at this time. Feel free to reach out to the Live Agent at any time.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"0c30918635eb401ba3381cfee6897c0b\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a10073e987f54c6ca3cab2541c8ccc9d\": {\n          \"id\": \"a10073e987f54c6ca3cab2541c8ccc9d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"1367c44343164fb3b1998123cb499d88\": {\n          \"id\": \"1367c44343164fb3b1998123cb499d88\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Record Card\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n    vaVars.table_name = vaInputs.table;    \\n\\n    var title = '';\\n    var subtitle = '';\\n    var fields = [];\\n\\n    var gr = new GlideRecord(vaVars.table_name);\\n    gr.addQuery('sys_id', vaVars.newRecordSysId);\\n    gr.query();\\n    title = gr.getClassDisplayValue();\\n    if (gr.next()) {\\n        subtitle = gr.getDisplayValue();\\n\\n        if (gr.isValidField('short_description') && gr.getValue('short_description')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gs.getMessageLang(gr.getElement('short_description').getLabel(), vaContext.getRequesterLang()),\\n                \\\"fieldValue\\\": gr.getDisplayValue('short_description').toString()\\n            });\\n        } else if (gr.isValidField('description') && gr.getValue('description')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gs.getMessageLang(gr.getElement('description').getLabel(), vaContext.getRequesterLang()),\\n                \\\"fieldValue\\\": gr.getDisplayValue('description').toString()\\n            });\\n        }\\n\\n        if (gr.isValidField('state') && gr.getValue('state')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gs.getMessageLang(gr.getElement('state').getLabel(), vaContext.getRequesterLang()),\\n                \\\"fieldValue\\\": gr.getDisplayValue('state').toString()\\n            });\\n        }\\n    }\\n\\n    var card_data = JSON.stringify({\\n        \\\"title\\\": title,\\n        \\\"subtitle\\\": subtitle,\\n        \\\"fields\\\": fields,\\n        \\\"table_name\\\": vaVars.table_name,\\n        \\\"sys_id\\\": vaVars.newRecordSysId\\n    });\\n    return vaSystem.renderCard(\\\"Card\\\", card_data);\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b9d9f32264a94cac8fd6e220df10d9c4\": {\n          \"id\": \"b9d9f32264a94cac8fd6e220df10d9c4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Request complete message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Your request has been submitted. Here are the details:\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"e66eb783413a492d8f88fd5739c45b25\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"894892f2f4b9497f8328d1fdd62b02e1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a10073e987f54c6ca3cab2541c8ccc9d\",\n          \"target\": \"b9d9f32264a94cac8fd6e220df10d9c4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.newRecordSysId != null;\\n})()\\n\"\n          },\n          \"label\": \"Record created\"\n        },\n        {\n          \"id\": \"cd5fd44c74314468a97b38b1f58dc99a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1367c44343164fb3b1998123cb499d88\",\n          \"target\": \"0bc6267a202c4be496febedad51f7ad8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f843769004bb431282b6d0ed103a263d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a10073e987f54c6ca3cab2541c8ccc9d\",\n          \"target\": \"0bc6267a202c4be496febedad51f7ad8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.newRecordSysId == null;\\n})()\\n\"\n          },\n          \"label\": \"Record not created\"\n        },\n        {\n          \"id\": \"35c88e26579b499f94a6efb92b2b4833\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"da9867eca4124d4c87049ae9004b8c64\",\n          \"target\": \"afd26b30d27d4019b4bef8536dc140b2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"065c6a7974a24313afe672c985f0cdcc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4f9941eb27a543ba89f1b2811a30963a\",\n          \"target\": \"a7b131c4c17f449caae0551e74fc2d18\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"77ffbcac51904e3db5015aebeb140ecd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a7b131c4c17f449caae0551e74fc2d18\",\n          \"target\": \"c64282a73b714148b77467934d2acafe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9901b31d68894f19a9afdc6fa58951e0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c64282a73b714148b77467934d2acafe\",\n          \"target\": \"3e3646f4e2454b9889d8de7db60f0123\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8d95ac18c4dc4339b39922ff2d497a24\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3e3646f4e2454b9889d8de7db60f0123\",\n          \"target\": \"da9867eca4124d4c87049ae9004b8c64\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3718394980d2484da3826c7c6d3a88df\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"afd26b30d27d4019b4bef8536dc140b2\",\n          \"target\": \"d2672c9441094c7fa0186fa194b2c90a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n      return vaInputs.form_choice_list != \\\"form_choice_2\\\"; \\n\\n})()\\n\"\n          },\n          \"label\": \"I'm done. \"\n        },\n        {\n          \"id\": \"aa23171727d141f4bcec23fcc30a97f0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d2672c9441094c7fa0186fa194b2c90a\",\n          \"target\": \"0bc6267a202c4be496febedad51f7ad8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fadaadc0f2e1465294d3b7cc8227ee9f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"afd26b30d27d4019b4bef8536dc140b2\",\n          \"target\": \"a10073e987f54c6ca3cab2541c8ccc9d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n      return vaInputs.form_choice_list == \\\"form_choice_2\\\"; \\n\\n})()\\n\"\n          },\n          \"label\": \"Completed\"\n        },\n        {\n          \"id\": \"8afb01988e72401ebde84e221ff89944\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b9d9f32264a94cac8fd6e220df10d9c4\",\n          \"target\": \"1367c44343164fb3b1998123cb499d88\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"2093830fb8b44f9b92edcf7495007cf3\": {\n      \"id\": \"2093830fb8b44f9b92edcf7495007cf3\",\n      \"name\": \"sysid\",\n      \"label\": \"SysId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"4f9941eb27a543ba89f1b2811a30963a\",\n      \"isHidden\": false\n    },\n    \"f5bdb66603fc411e8e24a0bc41b88d99\": {\n      \"id\": \"f5bdb66603fc411e8e24a0bc41b88d99\",\n      \"name\": \"table\",\n      \"label\": \"Table\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"4f9941eb27a543ba89f1b2811a30963a\",\n      \"isHidden\": false\n    },\n    \"6191a1bbace8469eb9551447b0df2783\": {\n      \"id\": \"6191a1bbace8469eb9551447b0df2783\",\n      \"name\": \"view\",\n      \"label\": \"View\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"4f9941eb27a543ba89f1b2811a30963a\",\n      \"isHidden\": false\n    },\n    \"57e02103967c461887498674a5b72d75\": {\n      \"id\": \"57e02103967c461887498674a5b72d75\",\n      \"name\": \"form_choice_list\",\n      \"label\": \"Form_choice_list\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"3e3646f4e2454b9889d8de7db60f0123\",\n      \"isHidden\": false\n    },\n    \"485766ad31704ceeb35ed8f10cd94c98\": {\n      \"id\": \"485766ad31704ceeb35ed8f10cd94c98\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return vaVars.newRecordSysId;\\n})()\\n\"\n      },\n      \"name\": \"newRecordSysId\",\n      \"label\": \"newRecordSysId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"04051196da854f07a5b7af23d9d5f200\": {\n      \"id\": \"04051196da854f07a5b7af23d9d5f200\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"table_name\",\n      \"label\": \"table_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_topic_bcc89c0277320110768bc6438c5a9902","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Form Content Popup Topic Block","applicability":"","category":"","sys_policy":""},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"public","description":"The topic is used to collect the information and validate if user is not identified in the system. This is a template topic. The topic author has to clone this and modify this as per the channel requirements.","context_profiles":"","sys_updated_on":"2022-09-01 11:32:11","title":"","type":"STANDARD","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"c76c35abeb2951102b57e5306952288d","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2022-09-01 11:30:44","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Account Link User Validation(Template)","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"Account Link User Validation(Template)","model_type":"","sys_mod_count":"1","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"7cf1c2509d9742ca8f1ce97e86fc7685\": {\n          \"id\": \"7cf1c2509d9742ca8f1ce97e86fc7685\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"e8ec88a807cf45b8896aa485e6c227f2\": {\n          \"id\": \"e8ec88a807cf45b8896aa485e6c227f2\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"a6215c31fa1949f8a572c2abec970c5c\": {\n          \"id\": \"a6215c31fa1949f8a572c2abec970c5c\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"User Id\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Enter your user id\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"ddffdc75f27c42d8b3ba560f6b6f8d27\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"702749d9495d4c8a8f8387c2999b22c8\": {\n          \"id\": \"702749d9495d4c8a8f8387c2999b22c8\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"OfficePhone\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Enter your office phone number\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"582de663d75342fe91a426d91543c99e\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"b38f237751234de5bb63f9e2f443a471\": {\n          \"id\": \"b38f237751234de5bb63f9e2f443a471\",\n          \"name\": \"Script Node\",\n          \"script\": \"(function execute() {\\n    var gr = new GlideRecord(\\\"sys_user\\\");\\n    gr.addQuery(\\\"user_name\\\", vaInputs.user_id);\\n    gr.addQuery(\\\"phone\\\", vaInputs.officephone);\\n    gr.query();\\n    if(gr.next()) {\\n        vaVars.global_linkaccount_verification_userid = gr.getValue(\\\"sys_id\\\");\\n    } else {\\n        vaVars.global_linkaccount_verification_userid = \\\"\\\";\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"ea5862cb6a184840b5f30c3d8080e028\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7cf1c2509d9742ca8f1ce97e86fc7685\",\n          \"target\": \"a6215c31fa1949f8a572c2abec970c5c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9b211a8e579146c38a7d5064b1483d40\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a6215c31fa1949f8a572c2abec970c5c\",\n          \"target\": \"702749d9495d4c8a8f8387c2999b22c8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9111f1d20220415bb73d2e69d6158948\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"702749d9495d4c8a8f8387c2999b22c8\",\n          \"target\": \"b38f237751234de5bb63f9e2f443a471\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8686ee99081341dc91e705fcf5345047\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b38f237751234de5bb63f9e2f443a471\",\n          \"target\": \"e8ec88a807cf45b8896aa485e6c227f2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"ddffdc75f27c42d8b3ba560f6b6f8d27\": {\n      \"id\": \"ddffdc75f27c42d8b3ba560f6b6f8d27\",\n      \"name\": \"user_id\",\n      \"label\": \"User Id\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY2MjAzMTg3MjU1MyBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"a6215c31fa1949f8a572c2abec970c5c\",\n      \"isHidden\": false\n    },\n    \"582de663d75342fe91a426d91543c99e\": {\n      \"id\": \"582de663d75342fe91a426d91543c99e\",\n      \"name\": \"officephone\",\n      \"label\": \"OfficePhone\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY2MjAzMTg5MDQyMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"702749d9495d4c8a8f8387c2999b22c8\",\n      \"isHidden\": false\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_topic_c76c35abeb2951102b57e5306952288d","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Account Link User Validation(Template)","applicability":"","category":"","sys_policy":""},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"false","roles":"public","description":"Enables users to provide feedback on their conversational experience, before the conversation ends.","context_profiles":"","sys_updated_on":"2022-01-18 19:31:26","title":"","type":"SETUP_TOPIC","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"c98db45853130010cf8cddeeff7b12e1","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-02-26 23:29:46","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Virtual Agent Feedback.","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"Survey, Provide Virtual Agent Feedback","model_type":"","sys_mod_count":"16","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.39\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"fc647203b9874c609457026d9fb4faf4\": {\n          \"id\": \"fc647203b9874c609457026d9fb4faf4\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"e1afb17d101b4bcfa4cfc6268d3c0d0d\": {\n          \"id\": \"e1afb17d101b4bcfa4cfc6268d3c0d0d\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"c649fa75cf3b485cb682534e231b2ee9\": {\n          \"id\": \"c649fa75cf3b485cb682534e231b2ee9\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Survey topic block\",\n          \"fields\": [],\n          \"reusableTopicChoice\": \"Survey\",\n          \"reusableTopicId\": \"26baac293b77330074bc456993efc4dd\",\n          \"inputs\": {\n            \"surveyid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"a259f6969f3220100d74d46d842e702a\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"confirmationneeded\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"text\": \"false\"\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            },\n            \"savequestionstocontext\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"text\": \"false\"\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            }\n          },\n          \"variableIds\": [],\n          \"outputs\": [],\n          \"outdatedNote\": false,\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"loading\": false\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"0271f86bda1a414ebca2ff11890346e1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"fc647203b9874c609457026d9fb4faf4\",\n          \"target\": \"c649fa75cf3b485cb682534e231b2ee9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1f9e2fd2e58744e09c7f37ff4c634d07\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c649fa75cf3b485cb682534e231b2ee9\",\n          \"target\": \"e1afb17d101b4bcfa4cfc6268d3c0d0d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"e1c9338b837b400c9ca6b0ef36c25354\": {\n      \"id\": \"e1c9338b837b400c9ca6b0ef36c25354\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_postchat_user_id\",\n      \"label\": \"_topic_postchat_user_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3dc0eb4e6fbe46ff8f306448e4f24de0\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"3dc0eb4e6fbe46ff8f306448e4f24de0\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_topic_c98db45853130010cf8cddeeff7b12e1","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Virtual Agent Feedback.","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"Auto Resolution Topic","context_profiles":"","sys_updated_on":"2024-10-22 02:33:44","title":"Issue Auto-Resolution","type":"STANDARD","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"d1cf2a4e5316101055eeddeeff7b12cc","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-07-30 21:26:41","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Issue Auto-Resolution","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"Issue Auto-Resolution","model_type":"nlu_keyword","sys_mod_count":"115","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.71\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"1821b76dae664951984624918a8f2bef\": {\n          \"id\": \"1821b76dae664951984624918a8f2bef\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"b4df58eeb84749dfa3737fac3bca85ff\": {\n          \"id\": \"b4df58eeb84749dfa3737fac3bca85ff\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"441b4d33a3604280a4133889dbc973eb\": {\n          \"id\": \"441b4d33a3604280a4133889dbc973eb\",\n          \"name\": \"Validation\",\n          \"script\": \"(function execute() {\\n    \\n    var notificationContext = JSON.parse(vaVars.global_notification_context);\\n    vaVars.auto_resolution_context_id = notificationContext.tableSysId;\\n    vaVars.action_sys_id = notificationContext.actionId;\\n    interactionId = vaSystem.getInteractionSysId();\\n\\n    var contextHelper = new global.AutoResolutionContextHelper();\\n    var context = contextHelper.getContextDetails(vaVars.auto_resolution_context_id);\\n    contextHelper.setInteraction(vaVars.auto_resolution_context_id, interactionId);\\n    new global.AutoResolutionTaskHelper().associateTaskToInteraction(context.taskTable, context.taskId, interactionId);\\n    \\n    vaVars.topic_id = context.topicId;\\n    vaVars.task_id = context.taskId;\\n    vaVars.task_table = context.taskTable;\\n    vaVars.is_valid = context.isValid;\\n    vaVars.validation_reason = context.validationReason;\\n    vaVars.is_notification_expired = context.validationReason == 'Notification expired';\\n    vaVars.is_notification_accepted = context.validationReason == 'Notification accepted';\\n\\n    var logUtils = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContextId(vaVars.auto_resolution_context_id)\\n                        .withTaskValues(vaVars.task_id, vaVars.task_table)\\n                        .withLanguage(context.language)\\n                        .withConfiguration(context.configId)\\n                        .withTopic(vaVars.topic_id);\\n    vaVars.loggingContext = JSON.stringify(logUtils.CONTEXT);\\n    var logger = logUtils.createLogger();\\n    logger.info('Starting Auto-Resoluton Topic');\\n    \\n     //!!!!!IMPORTANT: DO NOT CHANGE THIS VALUE!!!!!\\n    vaVars.is_iar_wrapper_topic = true;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b2ce1b4e581845e4867c0a2ee5c30ee8\": {\n          \"id\": \"b2ce1b4e581845e4867c0a2ee5c30ee8\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Help Now?\"\n        },\n        \"717d9e4d03b048c3963ad44c30ecee0b\": {\n          \"id\": \"717d9e4d03b048c3963ad44c30ecee0b\",\n          \"name\": \"Invoke Resolution Topic\",\n          \"script\": \"(function execute() {\\n    var context = contextHelper.getContextDetails(vaVars.auto_resolution_context_id);\\n    var logUtils = new global.AutoResolutionLoggingUtils()    \\n                       .withName('topic')\\n                       .withContextId(vaVars.auto_resolution_context_id)\\n                       .withTaskValues(vaVars.task_id, vaVars.task_table)\\n                       .withLanguage(context.language)\\n                       .withConfiguration(context.configId)\\n                       .withTopic(vaVars.topic_id);\\n    vaVars.loggingContext = JSON.stringify(logUtils.CONTEXT);\\n    var logger = logUtils.createLogger();\\n    var contextHelper = new global.AutoResolutionContextHelper();\\n    contextHelper.updateNotificationResponded(vaVars.auto_resolution_context_id, 'accepted');\\n    logger.debug('Marking context={0} as accepted', vaVars.auto_resolution_context_id);\\n\\n    logger.info('User accepted the Auto-Resolution topic. Swtiching to topic={0}', vaVars.topic_id);\\n    vaSystem.switchTopicById(vaVars.topic_id);\\n    vaSystem.switchTopicById(vaVars.topic_id);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f11ef09e6ff442c2b1f9d2cceea83728\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Close Task Input\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"If there's anything else you need related to this ticket, I can keep it open.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"5a3f98adebba43c5a9fc639ce6b24e00\",\n          \"id\": \"f11ef09e6ff442c2b1f9d2cceea83728\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"055e230ea978461ea3c3ed93353cf81d\": {\n          \"id\": \"055e230ea978461ea3c3ed93353cf81d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Close Task?\"\n        },\n        \"5f245cbc4b12423f95bf6575fa767ace\": {\n          \"id\": \"5f245cbc4b12423f95bf6575fa767ace\",\n          \"name\": \"Unassign Task and keep task open\",\n          \"script\": \"(function execute() {\\n    \\n   var helper = new global.AutoResolutionContextHelper();\\n   helper.executeTemplate(helper.UNRESOLVED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\\n\\n   var logger = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContext(vaVars.loggingContext)\\n                        .createLogger();\\n    logger.info('User decided to keep the task={0} open', vaVars.task_id);\\n\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7ec718a8c47b4fc98aa9e1463325008d\": {\n          \"id\": \"7ec718a8c47b4fc98aa9e1463325008d\",\n          \"name\": \"Mark Task Resolved\",\n          \"script\": \"(function execute() {\\n\\n    var helper = new global.AutoResolutionContextHelper();\\n    helper.executeTemplate(helper.RESOLVED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\\n\\n    var logger = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContext(vaVars.loggingContext)\\n                        .createLogger();\\n    logger.info('User decided to mark the task={0} as resolved', vaVars.task_id);\\n    \\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9425a0357c314d708f3972dcdcaed14c\": {\n          \"id\": \"9425a0357c314d708f3972dcdcaed14c\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Unable to Proceed\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n\\n    var logger = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContext(vaVars.loggingContext)\\n                        .createLogger();\\n    var message;\\n\\n    if (vaVars.is_notification_expired || vaVars.is_notification_accepted)\\n        message =  gs.getMessageLang(\\\"It looks like another agent is already working on your incident. I wont be able to help you at this time.\\\");\\n    else\\n        message =  gs.getMessageLang(\\\"Im currently unable to help with your request.\\\");\\n\\n    logger.info('Unable to proceed with Auto-resolution topic, reason={0}', message);\\n    return message;\\n\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"c1b0535da95a4dd096fc349276a8202e\": {\n          \"id\": \"c1b0535da95a4dd096fc349276a8202e\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Let's Get Started\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Great, if it turns out you need more help with it, we can leave the ticket open.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"67530d569a93410eacf29e636ba93906\": {\n          \"id\": \"67530d569a93410eacf29e636ba93906\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Unassigned Task Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"text\": \"I unassigned myself from the ticket. An agent will reach out to help you with it.\"\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"c7cfcba603c34a8da11217e04fd97509\": {\n          \"id\": \"c7cfcba603c34a8da11217e04fd97509\",\n          \"name\": \"Apply topic completion template\",\n          \"script\": \"(function execute() {\\n    var helper = new global.AutoResolutionContextHelper();\\n    helper.executeTemplate(helper.TOPIC_COMPLETED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7fa3072b5d074027a9af99e78568e9d8\": {\n          \"id\": \"7fa3072b5d074027a9af99e78568e9d8\",\n          \"name\": \"Mark context declined\",\n          \"script\": \"(function execute() {\\n\\n    var contextHelper = new global.AutoResolutionContextHelper();\\n    contextHelper.updateNotificationResponded(vaVars.auto_resolution_context_id, \\\"declined\\\");\\n    contextHelper.executeTemplate(contextHelper.DECLINED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\\n\\n    var logger = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContext(vaVars.loggingContext)\\n                        .createLogger();\\n    logger.info('User declined the Auto-Resolution topic');\\n\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"45f270501fa2417483eb2d026107bb4e\": {\n          \"id\": \"45f270501fa2417483eb2d026107bb4e\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Close message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Awesome! I've closed it!  Check in with me next time you need help with things like this.  \"\n                    },\n                    {\n                      \"type\": \"emoji\",\n                      \"emoji\": {\n                        \"id\": \"wave\",\n                        \"name\": \"Waving Hand Sign\",\n                        \"short_names\": [\n                          \"wave\"\n                        ],\n                        \"colons\": \":wave:\",\n                        \"emoticons\": [],\n                        \"unified\": \"1f44b\",\n                        \"skin\": 1,\n                        \"native\": \"\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"emoji\",\n                      \"emoji\": {\n                        \"id\": \"wave\",\n                        \"name\": \"Waving Hand Sign\",\n                        \"short_names\": [\n                          \"wave\"\n                        ],\n                        \"colons\": \":wave:\",\n                        \"emoticons\": [],\n                        \"unified\": \"1f44b\",\n                        \"skin\": 1,\n                        \"native\": \"\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"emoji\",\n                      \"emoji\": {\n                        \"id\": \"wave\",\n                        \"name\": \"Waving Hand Sign\",\n                        \"short_names\": [\n                          \"wave\"\n                        ],\n                        \"colons\": \":wave:\",\n                        \"emoticons\": [],\n                        \"unified\": \"1f44b\",\n                        \"skin\": 1,\n                        \"native\": \"\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"f2c2f98ab1c441d289a1fb21b302327b\": {\n          \"id\": \"f2c2f98ab1c441d289a1fb21b302327b\",\n          \"stepType\": \"Component\",\n          \"name\": \"Track Deflection\",\n          \"fields\": [],\n          \"reusableTopicId\": \"7fb4ca055303201033cdddeeff7b12b3\",\n          \"reusableTopicChoice\": \"Deflection Tracker\",\n          \"sourceType\": \"TOPIC_BLOCK\",\n          \"loading\": false,\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputs\": {\n            \"deflection_configuration\": {\n              \"value\": \"93d2f7645383201033cdddeeff7b1208\",\n              \"mode\": \"simple\",\n              \"type\": \"Reference\",\n              \"table\": \"ssa_deflection_configuration\"\n            },\n            \"deflection_pattern\": {\n              \"value\": \"d7d6f3285383201033cdddeeff7b12c0\",\n              \"mode\": \"string\",\n              \"type\": \"Reference\",\n              \"table\": \"ssa_deflection_pattern\"\n            },\n            \"activity_table\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.task_table}}\",\n                        \"displayValue\": \"Script Variablestask_table\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"activity_ids\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.task_id}}\",\n                        \"displayValue\": \"Script Variablestask_id\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            }\n          },\n          \"outputs\": [],\n          \"outdatedNote\": false,\n          \"variableIds\": []\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"7411b0c39d0142cb898086f156be0428\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"441b4d33a3604280a4133889dbc973eb\",\n          \"target\": \"b2ce1b4e581845e4867c0a2ee5c30ee8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"38bcade537794d948dd8730c147df3df\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c7cfcba603c34a8da11217e04fd97509\",\n          \"target\": \"f11ef09e6ff442c2b1f9d2cceea83728\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"60ef0859eb1c4459b44c8663019d79c9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"67530d569a93410eacf29e636ba93906\",\n          \"target\": \"b4df58eeb84749dfa3737fac3bca85ff\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e7f46f7d4c644c1b9d98dc8f8f2eb445\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"055e230ea978461ea3c3ed93353cf81d\",\n          \"target\": \"7ec718a8c47b4fc98aa9e1463325008d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.close_task_input=close\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"58099978b2d440db96e82559e7132ee5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1821b76dae664951984624918a8f2bef\",\n          \"target\": \"441b4d33a3604280a4133889dbc973eb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bc53304cee554965970c4b2c31106087\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f11ef09e6ff442c2b1f9d2cceea83728\",\n          \"target\": \"055e230ea978461ea3c3ed93353cf81d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9a646ea8d1284e2f9686f42932c5b6b9\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"055e230ea978461ea3c3ed93353cf81d\",\n          \"target\": \"5f245cbc4b12423f95bf6575fa767ace\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.close_task_input=open\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"b5d82663f76f41cbb1666cc224408a24\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b2ce1b4e581845e4867c0a2ee5c30ee8\",\n          \"target\": \"9425a0357c314d708f3972dcdcaed14c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.is_valid;\\n})()\\n\"\n          },\n          \"label\": \"Error/Timeout\"\n        },\n        {\n          \"id\": \"f9c098736e644ee5b2c4a09c15f02eb9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9425a0357c314d708f3972dcdcaed14c\",\n          \"target\": \"b4df58eeb84749dfa3737fac3bca85ff\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f7514a26e3954f138cdd3eb53291c904\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b2ce1b4e581845e4867c0a2ee5c30ee8\",\n          \"target\": \"c1b0535da95a4dd096fc349276a8202e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var yesActions = ['19164c195377101055eeddeeff7b129d', '93373e4a53910110af71ddeeff7b12af'];\\n    return vaVars.is_valid && yesActions.indexOf(vaVars.action_sys_id) >= 0;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"dd3d57cdc10a436887667b9c80a02994\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c1b0535da95a4dd096fc349276a8202e\",\n          \"target\": \"717d9e4d03b048c3963ad44c30ecee0b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2bd7fb91a2e94268a3a51705e09d4c15\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5f245cbc4b12423f95bf6575fa767ace\",\n          \"target\": \"67530d569a93410eacf29e636ba93906\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b5ae1fe0bb9f4cbfb7cfc7aa36eff9e7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"717d9e4d03b048c3963ad44c30ecee0b\",\n          \"target\": \"c7cfcba603c34a8da11217e04fd97509\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dbd211d235d148bab9430eec07628e39\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b2ce1b4e581845e4867c0a2ee5c30ee8\",\n          \"target\": \"7fa3072b5d074027a9af99e78568e9d8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var noActions = ['2a2f0c421b77101093b5ebda234bcb7f', '9a577e4a53910110af71ddeeff7b12c6']\\n    return vaVars.is_valid && noActions.indexOf(vaVars.action_sys_id) >= 0;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"5868f07662df4a26a95e4f2bca2ad297\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7fa3072b5d074027a9af99e78568e9d8\",\n          \"target\": \"67530d569a93410eacf29e636ba93906\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b0b64935a32c46ada31246b668ce3fa2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"45f270501fa2417483eb2d026107bb4e\",\n          \"target\": \"b4df58eeb84749dfa3737fac3bca85ff\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b675d9fa19f64caeb1eecdf171d199e5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7ec718a8c47b4fc98aa9e1463325008d\",\n          \"target\": \"f2c2f98ab1c441d289a1fb21b302327b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0ad3670e9c224848a4c4be34e32bc4cd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f2c2f98ab1c441d289a1fb21b302327b\",\n          \"target\": \"45f270501fa2417483eb2d026107bb4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"730322e0452043b895efd30399e62105\": {\n      \"id\": \"730322e0452043b895efd30399e62105\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n})()\\n\"\n      },\n      \"name\": \"is_valid\",\n      \"label\": \"is_valid\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"8cb5bc1f3872420ca70dfc736c2f3786\": {\n      \"id\": \"8cb5bc1f3872420ca70dfc736c2f3786\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"validation_reason\",\n      \"label\": \"validation_reason\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"58eccd7187854813a49a047c2169ff4b\": {\n      \"id\": \"58eccd7187854813a49a047c2169ff4b\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"auto_resolution_context_id\",\n      \"label\": \"auto_resolution_context_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"eb0f71f002c549dcb921e48b2efa1a61\": {\n      \"id\": \"eb0f71f002c549dcb921e48b2efa1a61\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"topic_id\",\n      \"label\": \"topic_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5a3f98adebba43c5a9fc639ce6b24e00\": {\n      \"id\": \"5a3f98adebba43c5a9fc639ce6b24e00\",\n      \"name\": \"close_task_input\",\n      \"label\": \"Close Task Input\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"No, close it\",\n          \"value\": \"close\"\n        },\n        {\n          \"label\": \"Yes, keep it open\",\n          \"value\": \"open\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"f11ef09e6ff442c2b1f9d2cceea83728\",\n      \"isHidden\": false\n    },\n    \"dc8c00f606624e19b210dececb6d6282\": {\n      \"id\": \"dc8c00f606624e19b210dececb6d6282\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"task_id\",\n      \"label\": \"task_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fdcdbf7fc87a495b95a547738fd6d3fe\": {\n      \"id\": \"fdcdbf7fc87a495b95a547738fd6d3fe\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"task_table\",\n      \"label\": \"task_table\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9de5e5e9746748878952302a3485d3bf\": {\n      \"id\": \"9de5e5e9746748878952302a3485d3bf\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"is_notification_expired\",\n      \"label\": \"is_notification_expired\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3a3d030e447e4f988d8b364e53c1ca40\": {\n      \"id\": \"3a3d030e447e4f988d8b364e53c1ca40\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"action_sys_id\",\n      \"label\": \"action_sys_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"7aba24c94343465a9bf034c6ff98937a\": {\n      \"id\": \"7aba24c94343465a9bf034c6ff98937a\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"true\"\n      },\n      \"name\": \"is_iar_wrapper_topic\",\n      \"label\": \"is_iar_wrapper_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sys_cb_topic_d1cf2a4e5316101055eeddeeff7b12cc","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Issue Auto-Resolution","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"Check Live Agent Availability","context_profiles":"","sys_updated_on":"2020-10-07 18:12:01","title":"","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"","nlu_model":"","sys_id":"da4407845346101042a9ddeeff7b1262","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-07-12 07:32:45","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Agent Availability","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"","sys_mod_count":"8","nlu_intent_label":"","sys_tags":"","graph":"{\n            \"graph_api_version\": \"1.0.21\",\n            \"goals\": {\n            \"primary\": {\n            \"id\": \"primary\",\n            \"trigger\": {\n            \"type\": \"primary\"\n            },\n            \"name\": \"primary\",\n            \"applicability\": \"\",\n            \"description\": \"\",\n            \"nodes\": {\n            \"0918de53a11345469d4aa27ca205d554\": {\n            \"id\": \"0918de53a11345469d4aa27ca205d554\",\n            \"stepType\": \"Start\",\n            \"name\": \"Start\",\n            \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n            }\n            },\n            \"a05f01d5daab49d3bc4d2ad69bd3ec81\": {\n            \"id\": \"a05f01d5daab49d3bc4d2ad69bd3ec81\",\n            \"stepType\": \"TerminateGoal\",\n            \"name\": \"End\",\n            \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n            },\n            \"outputVariables\": [\n            {\n            \"key\": \"agentAvailable\",\n            \"value\": \"{{vaVars.agentAvailable}}\",\n            \"mode\": \"simple\",\n            \"disabled\": true\n            },\n            {\n            \"key\": \"supportQueue\",\n            \"value\": \"{{vaVars.supportQueue}}\",\n            \"mode\": \"simple\",\n            \"disabled\": false\n            },\n            {\n            \"key\": \"waitingTime\",\n            \"value\": \"{{vaVars.waitingTime}}\",\n            \"mode\": \"simple\",\n            \"disabled\": false\n            }\n            ]\n            },\n            \"decf5866802e4bcf8cd0be05747a1daf\": {\n            \"id\": \"decf5866802e4bcf8cd0be05747a1daf\",\n            \"stepType\": \"ScriptOutput\",\n            \"name\": \"Get Agent Info\",\n            \"output_type\": \"single_part\",\n            \"script\": \"(function execute() {\\n    var result = vaSystem.getAgentTopicInfo();\\n    vaVars.agentAvailable = result.agent_available;\\n    vaVars.supportQueue = result.support_queue;\\n    vaVars.waitingTime = result.waiting_time;\\n})()\\n\",\n            \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n            }\n            }\n            },\n            \"edges\": [\n            {\n            \"id\": \"a674aa6eba0844de8aa018d16f01c96d\",\n            \"edgeType\": \"Edge\",\n            \"source\": \"0918de53a11345469d4aa27ca205d554\",\n            \"target\": \"decf5866802e4bcf8cd0be05747a1daf\",\n            \"sourcePort\": \"\",\n            \"targetPort\": \"\"\n            },\n            {\n            \"id\": \"55ed959c6144460faaf5af6964f46a2c\",\n            \"edgeType\": \"Edge\",\n            \"source\": \"decf5866802e4bcf8cd0be05747a1daf\",\n            \"target\": \"a05f01d5daab49d3bc4d2ad69bd3ec81\",\n            \"sourcePort\": \"\",\n            \"targetPort\": \"\"\n            }\n            ]\n            }\n            },\n            \"variables\": {\n            \"current-user\": {\n            \"category\": \"vaInputs\",\n            \"id\": \"current-user\",\n            \"label\": \"User\",\n            \"name\": \"user\",\n            \"table\": \"sys_user\",\n            \"varType\": \"reference\"\n            },\n            \"e8f14570b553407ea88201bc3252ebb6\": {\n            \"id\": \"e8f14570b553407ea88201bc3252ebb6\",\n            \"value\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n            },\n            \"name\": \"agentAvailable\",\n            \"label\": \"agentAvailable\",\n            \"varType\": \"script\",\n            \"category\": \"vaVars\"\n            },\n            \"b3c5c8f4b9374ccf9e74b8e30b1001cc\": {\n            \"id\": \"b3c5c8f4b9374ccf9e74b8e30b1001cc\",\n            \"value\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n            },\n            \"name\": \"supportQueue\",\n            \"label\": \"supportQueue\",\n            \"varType\": \"script\",\n            \"category\": \"vaVars\"\n            },\n            \"479d0f1e24304070867b958689a1551c\": {\n            \"id\": \"479d0f1e24304070867b958689a1551c\",\n            \"value\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n            },\n            \"name\": \"waitingTime\",\n            \"label\": \"waitingTime\",\n            \"varType\": \"script\",\n            \"category\": \"vaVars\"\n            }\n            }\n            }","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_topic_da4407845346101042a9ddeeff7b1262","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Agent Availability","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"Enables users to provide feedback on their conversational experience, before the conversation ends.","context_profiles":"","sys_updated_on":"2024-06-07 16:50:29","title":"Survey","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"dba94e44ff2202101b82157c03cb145a","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2024-05-28 21:06:10","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Survey-LLM","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"llm","sys_mod_count":"3","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.67\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"b90ef5f7024d4e34b5ceaf628345df9c\": {\n          \"id\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"parameters\": [\n            {\n              \"name\": \"surveyId\",\n              \"value\": \"\",\n              \"id\": \"1132a62678c24bbda688337615fd51bb\",\n              \"disabled\": true,\n              \"referenced\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            },\n            {\n              \"name\": \"confirmationNeeded\",\n              \"value\": \"false\",\n              \"id\": \"75bc445130284002947077d668cac779\",\n              \"referenced\": false,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            },\n            {\n              \"name\": \"saveQuestionsToContext\",\n              \"value\": \"false\",\n              \"id\": \"ba2a161b94a3468a86603955cca630a1\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            }\n          ],\n          \"variableIds\": [\n            \"1132a62678c24bbda688337615fd51bb\",\n            \"75bc445130284002947077d668cac779\",\n            \"ba2a161b94a3468a86603955cca630a1\"\n          ]\n        },\n        \"da165a652daf475698c988c6427d008f\": {\n          \"id\": \"da165a652daf475698c988c6427d008f\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": []\n        },\n        \"4761ab4e62324e3cb07ce4efc77ffd1f\": {\n          \"id\": \"4761ab4e62324e3cb07ce4efc77ffd1f\",\n          \"name\": \"Load survey instance\",\n          \"script\": \"(function execute() {\\n\\tvar gr = new GlideRecord('asmt_metric_type');\\n\\tgr.get(vaInputs.surveyid);vaVars.active = gr.active;vaVars.endNote = vaSystem.getTranslation(gr, 'end_note', vaContext.getRequesterLang(), gr.end_note.getValue() || '');vaVars.introduction = vaSystem.getTranslation(gr, 'introduction', vaContext.getRequesterLang(), gr.introduction.getValue() || '');vaVars.surveyName = gr.name.toString();vaVars.surveyVerificationMsg = vaSystem.getSurveyVerificationMessage();\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"bbe4918b84a9426abbec7d055f7f555a\": {\n          \"id\": \"bbe4918b84a9426abbec7d055f7f555a\",\n          \"name\": \"Load questions\",\n          \"script\": \"(function execute() {\\n    var gr = new GlideRecord('asmt_metric_category');\\n    gr.addQuery('metric_type', vaInputs.surveyid);\\n    gr.query();\\n    gr.next();\\n\\n    var surveyCategory = gr.getUniqueValue();\\n\\n    var gr = new GlideRecord('asmt_metric')\\n    gr.addQuery('category', surveyCategory);\\n    gr.addQuery('active', true);\\n    gr.orderBy('order');\\n    gr.query();\\n\\n    var questions = [];\\n    while (gr.next()) {\\n        var question = {\\n            sys_id: gr.getUniqueValue(),\\n            scale: gr.scale + '',\\n            metric: gr.sys_id + '',\\n            type: gr.datatype + '',\\n            display: vaSystem.getTranslation(gr, 'question', vaContext.getRequesterLang(), gr.question) + '',\\n            dependsOn: gr.depends_on + '',\\n            displayedWhen: gr.displayed_when + '',\\n            name: gr.name + '',\\n            max: gr.max + '',\\n            min: gr.min + '',\\n            mandatory: gr.mandatory + '',\\n            field_validation: gr.field_validation + '',\\n            reference_table: gr.reference_table + '',\\n            condition: gr.condition + '',\\n        };\\n\\n        // boolean and checkbox type questions use different displayed_when fields\\n        var dependsOnType = gr.depends_on.datatype + '';\\n        if (dependsOnType === 'boolean')\\n            question['displayedWhen'] = gr.displayed_when_yesno + '';\\n        else if (dependsOnType === 'checkbox')\\n            question['displayedWhen'] = gr.displayed_when_checkbox + '';\\n\\n        questions.push(question);\\n    }\\n    vaVars.surveyQuestions = JSON.stringify(questions);\\n    vaVars.questionCount = questions.length;\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8ad01595341c4a6186e46eb203320658\": {\n          \"id\": \"8ad01595341c4a6186e46eb203320658\",\n          \"name\": \"Set next question\",\n          \"script\": \"(function execute() {\\n    vaVars.questionIndex++;\\n    if (!(vaVars.questionCount && vaVars.questionIndex < vaVars.questionCount))\\n        return;\\n\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n\\n    // Set question type & display value\\n    vaVars.currentQuestionId = questions[i].sys_id;\\n    vaVars.currentQuestionType = questions[i].type;\\n    vaVars.currentQuestionMetric = questions[i].metric;\\n    vaVars.currentQuestionDisplay = questions[i].display;\\n    vaVars.currentQuestionMax = questions[i].max;\\n    vaVars.currentQuestionMin = questions[i].min;\\n    vaVars.currentQuestionMandatory = questions[i].mandatory;\\n    vaVars.currentQuestionFieldValidator = questions[i].field_validation;\\n    vaVars.currentQuestionReferenceTable = questions[i].reference_table;\\n    vaVars.currentQuestionReferenceCondition = questions[i].condition;\\n\\n    // Load choices if relevant\\n    if (questions[i].type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(questions[i].type) > -1) {\\n        questions[i].choices = getChoices(questions[i]);\\n        vaVars.surveyQuestions = JSON.stringify(questions);\\n    }\\n})();\\n\\nfunction getChoices(q) {\\n    var gr = new GlideRecord('asmt_metric_definition');\\n    gr.addQuery('metric', q.metric);\\n    gr.orderBy('order');\\n    gr.query();\\n\\n    var choices = [];\\n    while (gr.next()) {\\n        choices.push({\\n            sys_id: gr.getUniqueValue(),\\n            display: vaSystem.getTranslation(gr, 'display', vaContext.getRequesterLang(),gr.display),\\n            value: gr.getValue('value'),\\n            selected: gr.getDisplayValue('selected_image'),\\n            unselected: gr.getDisplayValue('unselected_image')\\n        });\\n    }\\n    return choices;\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ca66aaa54c614102a4a2fd4bad818b9a\": {\n          \"id\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Out of questions?\"\n        },\n        \"280229f5f0f74d11a6d06328dfb8fa1a\": {\n          \"id\": \"280229f5f0f74d11a6d06328dfb8fa1a\",\n          \"name\": \"Set answers\",\n          \"script\": \"(function execute() {\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n    answers[vaVars.currentQuestionId] = getInput();\\n    vaVars.surveyAnswers = JSON.stringify(answers);\\n})();\\n\\nfunction getInput() {\\n    var values = {'value': null, 'Qtype': vaVars.currentQuestionType, 'displayValue':null};\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        values.value = getValueIfSet(vaInputs.show_choice_question);\\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_choice_question,values.value);\\n    }\\n\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        values.value = getValueIfSet(vaInputs.show_text_input_question);\\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_text_input_question,values.value);\\n    }\\n\\n    switch (vaVars.currentQuestionType) {\\n        case 'imagescale':\\n            values.value = getValueIfSet(vaInputs.show_image_scale_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_image_scale_question,values.value);\\n            var questions = JSON.parse(vaVars.surveyQuestions);\\n            //stores correct displayValue, vaInputs returns display+value\\n            if(vaInputs.show_image_scale_question && vaInputs.show_image_scale_question != null){\\n                questions[vaVars.questionIndex].choices.forEach(function(c){\\n                    if(c.value === values.value)\\n                        values.displayValue = c.display;\\n                });\\n            }\\n            break;\\n        case 'boolean':\\n            values.value = getValueIfSet(vaInputs.show_boolean_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\\n            break;\\n        case 'checkbox':\\n            values.value= getValueIfSet(vaInputs.show_boolean_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\\n            break;\\n        case 'attachment':\\n            values.value = getValueIfSet(vaInputs.show_attachment_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_attachment_question,values.value);\\n            break;\\n        case 'date':\\n            const date = getValueIfSet(vaInputs.show_date_question);\\n            values.value = (date != null) ? date.toString() : null;\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_date_question,values.value);\\n            break;\\n        case 'datetime':\\n            const dateTime = getValueIfSet(vaInputs.show_datetime_question);\\n            values.value = (dateTime != null) ? dateTime.toString() : null;\\n            vaInputs.show_datetime_question.setTimeZone(vaContext.getDeviceTimeZone());\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_datetime_question,values.value);\\n            break;\\n        case 'reference':\\n            values.value = getValueIfSet(vaInputs.show_reference_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_reference_question,values.value);\\n    }\\n    return values;\\n}\\n\\nfunction getValueIfSet(field){\\n    return field && field.isValueSet() ? field.getValue() : null;\\n}\\n\\nfunction getDisplayValueIfSet(field, val){\\n    if (!field || field == null)\\n       return val;\\n    var dv = field.getDisplayValue();\\n     return dv && dv.length > 0  ? dv : val;\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9ee3c8b3d800414c89edc50c2746da57\": {\n          \"id\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Does question satisfy dependency?\"\n        },\n        \"385869dc18c746b88db71bdd7c349c56\": {\n          \"id\": \"385869dc18c746b88db71bdd7c349c56\",\n          \"name\": \"Check question dependency\",\n          \"script\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var q = questions[i];\\n\\n    var satisfied = true;\\n    var hasDependency = !(!q.dependsOn);\\n    vaVars.currentIsDependencySatisfied = !hasDependency || isSat(q);\\n})();\\n\\nfunction isSat(q) {\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n\\n    var answerValid = false;\\n    questions.forEach(function(question) {\\n        if (question.metric !== q.dependsOn)\\n            return;\\n\\n        var answerExists = question.sys_id in answers;\\n        if (!answerExists)\\n            return;\\n\\n        var selectedChoice = answers[question.sys_id]['value'];\\n\\n        if (question.type === 'boolean' || question.type === 'checkbox') {\\n            if ((selectedChoice === true && q.displayedWhen === '1') || (selectedChoice === false && q.displayedWhen === '0'))\\n                answerValid = true;\\n        } else {\\n            var choices = question.choices.filter(function(c) {\\n                return c.value === selectedChoice;\\n            });\\n\\n            if (choices.length && choices[0].sys_id)\\n                answerValid = q.displayedWhen.indexOf(choices[0].sys_id) !== -1;\\n        }\\n    });\\n\\n    return answerValid;\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8a8d038a0f75488885032aceabd284ce\": {\n          \"id\": \"8a8d038a0f75488885032aceabd284ce\",\n          \"stepType\": \"StandaloneAIBooleanPrompt\",\n          \"name\": \"Show boolean question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"bd696a7cf14b452b987bc0a3b01fd079\",\n              \"displayName\": \"Show boolean question\",\n              \"name\": \"show_boolean_question\",\n              \"description\": \"This type of question allows users to choose between two distinct options, typically representing \\\"Yes\\\" or \\\"No,\\\" \\\"True\\\" or \\\"False,\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\",\n              \"type\": \"boolean\",\n              \"variableId\": \"b5790fea6a77427aaf10a8cb5ee3cef0\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"\",\n              \"script\": \"\",\n              \"condition\": {\n                \"value\": \"\",\n                \"mode\": \"glide_query\"\n              },\n              \"stepType\": \"BooleanPrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n   return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if ((vaVars.currentQuestionType === 'boolean') || (vaVars.currentQuestionType === 'checkbox')) {\\n        vaInputs.show_boolean_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\"\n          },\n          \"hiddenVariableIds\": [\n            \"2f2b481c82a94d1996f70567027cbb41\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"b5790fea6a77427aaf10a8cb5ee3cef0\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"6460cac852834b46a4977c093a2b1a67\": {\n          \"id\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"name\": \"Submit survey answers\",\n          \"script\": \"(function execute() {\\n    if(vaInputs.savequestionstocontext == 'true'){ \\n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createAssessments(vaInputs.surveyid, '', gs.getUserID(), false, '', false, '', vaVars._interaction_record_sysid, false, 'interaction');\\n        vaVars.surveyInstanceId = vaVars.surveyInstanceId.substring(0, 32);\\n        vaVars.LiveAgent_pre_assessment_instance = vaVars.surveyInstanceId;\\n        vaVars.LiveAgent_pre_chat_survey_name = vaVars.surveyName;\\n    } else{ \\n        var userId = !gs.nil(vaVars._topic_postchat_user_id) ? vaVars._topic_postchat_user_id : gs.getUserID();\\n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createAssessments(vaInputs.surveyid, '', userId, false, '', false, '', vaVars._interaction_record_sysid, false, 'interaction');\\n        vaVars.surveyInstanceId = vaVars.surveyInstanceId.substring(0, 32);\\n        vaVars.LiveAgent_post_assessment_instance = vaVars.surveyInstanceId;\\n        vaVars.LiveAgent_post_chat_survey_name = vaVars.surveyName;    \\n    }\\n\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n    var data = {\\n        sysparm_instance_id: vaVars.surveyInstanceId,\\n        sysparm_action: 'submit'\\n    };\\n data.channel = 'va'; \\n    var questionData = new global.TopicPreChatUtil().getQuestionData(vaVars.surveyInstanceId);\\n\\n    Object.keys(answers).forEach(function(q) {\\n        if (answers[q] && answers[q] && answers[q].value != null){ \\n            if (answers[q]['Qtype'] === 'boolean') {\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? '1' : '0';\\n            } else if (answers[q]['Qtype'] === 'checkbox') {\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? 'true' : '';\\n            } else\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = answers[q]['value'];\\n            if (vaInputs.savequestionstocontext == 'true')\\n                saveToContext(questionData[q].name, answers[q], questionData[q].contextVar, questionData[q].type);\\n        }\\n        \\n    });\\n    var response = new global.AssessmentSubmitProcessor().processRequest(data);\\n})()\\n\\nfunction saveToContext(name, a, contextVar, type){\\n        if(contextVar != \\\"\\\") {\\n            var contextVarName = contextVar;\\n        } else {\\n            //remove all special characters and replace spaces with _\\n            var questionName = name.toString().replace(/[^a-zA-Z0-9]/g, '_').replace(/_$/,'');     \\n            //append survey name to question name\\n            var contextVarName = \\\"liveagent_\\\" +vaVars.surveyName +\\\".\\\"+ questionName;\\n        }\\n        vaVars[contextVarName] = a.value.toString();\\n        //for choice questions, store response and not response index as context var\\n        if (type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(type) > -1) { \\n             vaVars[contextVarName] = a.displayValue.toString();    \\n        }\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"369375049a91494e9da6cd6e6cb3cb28\": {\n          \"id\": \"369375049a91494e9da6cd6e6cb3cb28\",\n          \"stepType\": \"StandaloneAITextPrompt\",\n          \"name\": \"Show text input question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"b0faacee59fd448c9cc01beaf7d5bd72\",\n              \"displayName\": \"Show text input question\",\n              \"name\": \"show_text_input_question\",\n              \"description\": \"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\",\n              \"type\": \"string\",\n              \"variableId\": \"0775ff6cf5b94c4692d1a7be6b9fe010\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"\",\n              \"script\": \"\",\n              \"condition\": {\n                \"value\": \"\",\n                \"mode\": \"glide_query\"\n              },\n              \"stepType\": \"TextPrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n   return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'long')\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\n    else if (vaVars.currentQuestionType === 'percentage')\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\n    else\\n        return vaVars.currentQuestionDisplay;\\n})()\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Custom\",\n                \"script\": \"function validate(value) {\\n    // for \\\"skip\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\n        return {\\n            valid: true,\\n        }; \\n\\n    // for string type with validator defined, and question is not skipped\\n    var validatorGr = new GlideRecord(\\\"sys_cs_field_script_validator\\\");\\n    if (!validatorGr.isValid())\\n\\t    return {\\n           valid: false,\\n           error: gs.getMessageLang(\\\"validator table does not exist\\\", vaContext.getRequesterLang())\\n        };\\n\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\n        var scriptBuild = \\\"(\\\" + validatorGr.validator + \\\")('\\\"+ value + \\\"');\\\";\\n        var isValidAnswer = eval(scriptBuild);\\n        return {\\n            valid: isValidAnswer,\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\n        };\\n    } else {\\n        return {\\n            valid: false,\\n            error: gs.getMessageLang(\\\"validator record does not exist\\\", vaContext.getRequesterLang())\\n        };\\n    }\\n}\"\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_text_input_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"\n          },\n          \"hiddenVariableIds\": [\n            \"5229b91bab174a52829686976666ed1b\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"0775ff6cf5b94c4692d1a7be6b9fe010\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"74fc296442cc4d7f8269e94e25cad5a4\": {\n          \"id\": \"74fc296442cc4d7f8269e94e25cad5a4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"End note\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.endNote}}\",\n                        \"displayValue\": \"vaVarsendNote\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"8351c5b9bf8942ff8d31f773b77a5ee3\": {\n          \"id\": \"8351c5b9bf8942ff8d31f773b77a5ee3\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Introduction\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.introduction}}\",\n                        \"displayValue\": \"vaVarsintroduction\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"8d2ac71ed40a416a9751e5bd73a6e442\": {\n          \"id\": \"8d2ac71ed40a416a9751e5bd73a6e442\",\n          \"stepType\": \"StandaloneAIReferenceChoicePrompt\",\n          \"name\": \"Show choice question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"c261f784256b4212b50dc64ed3f869dd\",\n              \"displayName\": \"Show choice question\",\n              \"name\": \"show_choice_question\",\n              \"description\": \"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\",\n              \"type\": \"reference\",\n              \"variableId\": \"dea29579e2c44cdab652446be7273444\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"external\",\n              \"script\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'render_style':'bubble',\\n            'label': c.display,\\n            'value': c.value\\n        });\\n    }\\n\\n    return options;\\n})()\",\n              \"condition\": {\n                \"value\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'render_style':'bubble',\\n            'label': c.display,\\n            'value': c.value\\n        });\\n    }\\n\\n    return options;\\n})()\",\n                \"mode\": \"external_script\"\n              },\n              \"stepType\": \"ReferenceChoicePrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"hasCardHeader\": false,\n              \"cardMetadata\": {\n                \"mode\": \"card\",\n                \"metadataScript\": \"\",\n                \"cardTemplate\": \"\",\n                \"cardFields\": {},\n                \"cardDefinition\": {}\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_choice_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\\n\"\n          },\n          \"hiddenVariableIds\": [\n            \"9421933d83ba4506b292d81bb60b2999\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"dea29579e2c44cdab652446be7273444\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"64d85b2098094a4fa02f25f7a1444c50\": {\n          \"id\": \"64d85b2098094a4fa02f25f7a1444c50\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"Show attachment question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'attachment') {\\n        vaInputs.show_attachment_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"\n          },\n          \"optional\": false,\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": {\n            \"id\": \"\"\n          },\n          \"variableId\": \"bba30ac7475c47cc93da35130951478b\",\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"e8625b3c4b794d769bb0da9d0a606848\": {\n          \"id\": \"e8625b3c4b794d769bb0da9d0a606848\",\n          \"stepType\": \"StandaloneAIDateTimePrompt\",\n          \"name\": \"Show date question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"cf9f71079460466fa6a82d5df4885397\",\n              \"displayName\": \"Show date question\",\n              \"name\": \"show_date_question\",\n              \"description\": \"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\",\n              \"type\": \"date_time\",\n              \"variableId\": \"fbe9af88d71a49f3845d37b4a93bbe15\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"\",\n              \"script\": \"\",\n              \"condition\": {\n                \"value\": \"\",\n                \"mode\": \"glide_query\"\n              },\n              \"stepType\": \"DateTimePrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'date') {\\n        vaInputs.show_date_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"\n          },\n          \"hiddenVariableIds\": [\n            \"e5d8423283fc4d2595fd661bd5a2eb69\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"fbe9af88d71a49f3845d37b4a93bbe15\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"cb013d5f2f4b4d0789b486a504e6d2f2\": {\n          \"id\": \"cb013d5f2f4b4d0789b486a504e6d2f2\",\n          \"stepType\": \"StandaloneAIDateTimePrompt\",\n          \"name\": \"Show datetime question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"c9c909aee2dc44b7bcd4852909ce04cf\",\n              \"displayName\": \"Show datetime question\",\n              \"name\": \"show_datetime_question\",\n              \"description\": \"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\",\n              \"type\": \"date_time\",\n              \"variableId\": \"c1d6aa7022164ba6a2b0291228d96249\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"\",\n              \"script\": \"\",\n              \"condition\": {\n                \"value\": \"\",\n                \"mode\": \"glide_query\"\n              },\n              \"stepType\": \"DateTimePrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n   return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'datetime') {\\n        vaInputs.show_datetime_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\"\n          },\n          \"hiddenVariableIds\": [\n            \"a7dc2985e75f4c5cbd8b508e8ab6620c\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"c1d6aa7022164ba6a2b0291228d96249\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"f9950611be314fe6b0c891e8e65771d2\": {\n          \"id\": \"f9950611be314fe6b0c891e8e65771d2\",\n          \"name\": \"Answer validation\",\n          \"script\": \"(function execute() {\\n    vaVars.currentAnswerValidation = true;\\n    vaVars.currentAnswerErrorMsg = '';\\n\\n    if (vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage')\\n        validateFieldLimits();\\n})();\\n\\nfunction validateFieldLimits() {\\n\\tif ((!vaInputs.show_text_input_question.isValueSet() || vaInputs.show_text_input_question.getValue().length == 0)\\n\\t    && !vaInputs.show_text_input_question.isRequired())\\n\\t\\treturn;\\n\\tvar max = vaVars.currentQuestionMax;\\n\\tvar min = vaVars.currentQuestionMin;\\n\\t\\t\\n\\tvar value = vaInputs.show_text_input_question.getValue();\\n\\tvar newvalue = Number(value);\\n\\tif (isNaN(newvalue)) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is not a valid number. Please try again', vaContext.getRequesterLang());\\n\\t} else if (newvalue > max || newvalue < min) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is outside the valid range. Please try again', vaContext.getRequesterLang());\\n\\t}\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"607a63448c1a4acca85166124f375118\": {\n          \"id\": \"607a63448c1a4acca85166124f375118\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Check range\"\n        },\n        \"194fae9f28f045ac94643564ef50c9db\": {\n          \"id\": \"194fae9f28f045ac94643564ef50c9db\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Validation failed\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return vaVars.currentAnswerErrorMsg;\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"26cffe08aa7147c79ffc7489da676135\": {\n          \"id\": \"26cffe08aa7147c79ffc7489da676135\",\n          \"stepType\": \"StandaloneAICarouselPrompt\",\n          \"name\": \"Show image scale question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"40dd6f5709604e4ca77af9d6f7af4453\",\n              \"displayName\": \"Show image scale question\",\n              \"name\": \"show_image_scale_question\",\n              \"description\": \"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\",\n              \"type\": \"carousel-image\",\n              \"variableId\": \"b600afffba2d46a1a225c17e62ee4734\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"\",\n              \"script\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'Name': c.display,\\n            'Value': c.value,\\n            'Body': c.unselected\\n        });\\n    }\\n\\n    return options;\\n})()\",\n              \"condition\": {\n                \"value\": \"\",\n                \"mode\": \"glide_query\"\n              },\n              \"stepType\": \"CarouselPrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n   return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'imagescale') {\\n        vaInputs.show_image_scale_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"\n          },\n          \"hiddenVariableIds\": [\n            \"78de1c7f496f430985b8d3ac5f93acac\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"b600afffba2d46a1a225c17e62ee4734\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"c24324650a514984946fed64207f0c24\": {\n          \"id\": \"c24324650a514984946fed64207f0c24\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Summary\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n      var questions = JSON.parse(vaVars.surveyQuestions);\\n      var answers = JSON.parse(vaVars.surveyAnswers);\\n      var questionAnswerPairs = [];\\n\\n      questions.forEach(function(q) {\\n            var question = q.display.toString();\\n            var answer = answers[q.metric];\\n            var questionAnswer = answer.displayValue != null ? answer.displayValue :\\n            answer.value != null ? answer.value : '';\\n            var questionType = q.type + '';\\n            \\n            if(questionType == 'checkbox' || questionType == 'boolean'){\\n                  if (questionAnswer == \\\"1\\\") {\\n                        questionAnswer = \\\"Yes\\\";\\n                  } else if (questionAnswer == \\\"0\\\") {\\n                        questionAnswer = \\\"No\\\"\\n                  }\\n            }\\n            if(answer){questionAnswerPairs.push({\\\"fieldLabel\\\": question, \\\"fieldValue\\\": questionAnswer});}         \\n      });\\n      \\n      var card_data = JSON.stringify({\\n            \\\"title\\\":gs.getMessageLang(\\\"Response Summary\\\", vaContext.getRequesterLang()),\\n            \\\"fields\\\":questionAnswerPairs,\\n      });\\n\\n      return vaSystem.renderCard(\\\"PreChat\\\", card_data, true);\\n})()\\n\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"c0f7a2a49b4f49688d9a1c1dd4e216f9\": {\n          \"id\": \"c0f7a2a49b4f49688d9a1c1dd4e216f9\",\n          \"stepType\": \"StandaloneAIBooleanPrompt\",\n          \"name\": \"Verify Response\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"be7e09bc5c674b5ba5c2ddbf7dd55aea\",\n              \"displayName\": \"Verify Response\",\n              \"name\": \"verify_response\",\n              \"description\": \"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\",\n              \"type\": \"boolean\",\n              \"variableId\": \"a813e0458a174bb0b415483fe89c00e4\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"\",\n              \"script\": \"\",\n              \"condition\": {\n                \"value\": \"\",\n                \"mode\": \"glide_query\"\n              },\n              \"stepType\": \"BooleanPrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"value\": \"\",\n                \"mode\": \"query\"\n              },\n              \"promptMessage\": {\n                \"value\": [\n                  {\n                    \"type\": \"paragraph\",\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      },\n                      {\n                        \"type\": \"datapill\",\n                        \"dataPill\": {\n                          \"value\": \"{{vaVars.surveyVerificationMsg}}\",\n                          \"displayValue\": \"vaVarssurveyVerificationMsg\"\n                        },\n                        \"children\": [\n                          {\n                            \"text\": \"\"\n                          }\n                        ]\n                      },\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  }\n                ],\n                \"mode\": \"simple\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"hiddenVariableIds\": [\n            \"3148914579f645b88e5e0bbc22ab9cf4\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"a813e0458a174bb0b415483fe89c00e4\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"8c9927f71ad04890afd342b20df99100\": {\n          \"id\": \"8c9927f71ad04890afd342b20df99100\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Summary Correct?\"\n        },\n        \"3c232bba33f34219b4a554c511faa4da\": {\n          \"id\": \"3c232bba33f34219b4a554c511faa4da\",\n          \"name\": \"Reset Question Index\",\n          \"script\": \"(function execute() {\\n    vaVars.questionIndex = -1;\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"9f8dfc6260824d0b863c4275cbd6e2f3\": {\n          \"id\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Confirmation\"\n        },\n        \"b6173737c4e740c584b5efe1424aec8b\": {\n          \"id\": \"b6173737c4e740c584b5efe1424aec8b\",\n          \"stepType\": \"StandaloneAIReferenceChoicePrompt\",\n          \"name\": \"Show reference question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"b70e2bd9da1e435093a4dfa8ca6b7429\",\n              \"displayName\": \"Show reference question\",\n              \"name\": \"show_reference_question\",\n              \"description\": \"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\",\n              \"type\": \"reference\",\n              \"variableId\": \"1b42a3cd06f14eda968880b670491ebb\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"external\",\n              \"script\": \"(function execute() {\\n    var options = [];\\n    var table = vaVars.currentQuestionReferenceTable;\\n    var condition = vaVars.currentQuestionReferenceCondition;\\n    if (!table)\\n        return options;\\n \\n    var taskExtensions = new TableUtils(\\\"task\\\").getTableExtensions();\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\n\\n    var gr = new GlideRecord(table);\\n    if (condition)\\n        gr.addEncodedQuery(condition);\\n    gr.query();\\n    while (gr.next()) {\\n        options.push({\\n            'render_style':'bubble',\\n            'value': gr.sys_id + '',\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\n        });\\n    }\\n    return options;\\n})()\",\n              \"condition\": {\n                \"value\": \"(function execute() {\\n    var options = [];\\n    var table = vaVars.currentQuestionReferenceTable;\\n    var condition = vaVars.currentQuestionReferenceCondition;\\n    if (!table)\\n        return options;\\n \\n    var taskExtensions = new TableUtils(\\\"task\\\").getTableExtensions();\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\n\\n    var gr = new GlideRecord(table);\\n    if (condition)\\n        gr.addEncodedQuery(condition);\\n    gr.query();\\n    while (gr.next()) {\\n        options.push({\\n            'render_style':'bubble',\\n            'value': gr.sys_id + '',\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\n        });\\n    }\\n    return options;\\n})()\",\n                \"mode\": \"external_script\"\n              },\n              \"stepType\": \"ReferenceChoicePrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"hasCardHeader\": false,\n              \"cardMetadata\": {\n                \"mode\": \"card\",\n                \"metadataScript\": \"\",\n                \"cardTemplate\": \"\",\n                \"cardFields\": {},\n                \"cardDefinition\": {}\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if ((vaVars.currentQuestionType === 'reference')) {\\n        vaInputs.show_reference_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"\n          },\n          \"hiddenVariableIds\": [\n            \"498f5de051d6461d87508d10b8a73ecf\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"1b42a3cd06f14eda968880b670491ebb\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"ca955a1d346d48b09e9ce792dde52cc3\": {\n          \"id\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Survey Active?\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"d723d392011a4489b5e9707ea710ae01\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"target\": \"da165a652daf475698c988c6427d008f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    gs.warn(\\\"Survey is not active\\\")\\n    return vaVars.active != true;\\n})()\\n\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Is Survey Active\",\n          \"toNode\": \"da165a652daf475698c988c6427d008f\",\n          \"toEdge\": \"d723d392011a4489b5e9707ea710ae01\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"d5d8414f7d124779a993b68bf5fb0c83\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n          \"target\": \"4761ab4e62324e3cb07ce4efc77ffd1f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9c490fb1ee7b48e2ab62d5120713a01f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8d2ac71ed40a416a9751e5bd73a6e442\",\n          \"target\": \"8a8d038a0f75488885032aceabd284ce\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"380d37400e614773a95863c9a11548ab\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"target\": \"369375049a91494e9da6cd6e6cb3cb28\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.currentIsDependencySatisfied;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"ad83e8a8966b4569bf2a2adc0acf21c0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"385869dc18c746b88db71bdd7c349c56\",\n          \"target\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e0feebc1fe63415aaa292ddf81cb735d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8ad01595341c4a6186e46eb203320658\",\n          \"target\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e9629798f480430ca040141729435c8a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"280229f5f0f74d11a6d06328dfb8fa1a\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"65ebda13c269463d875828687d4d02c5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.currentIsDependencySatisfied;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"87d89661bc144db1930085298213794f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"target\": \"385869dc18c746b88db71bdd7c349c56\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.questionIndex < vaVars.questionCount;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"af0cf0a9cffd4cb88e90a49da908d3aa\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"target\": \"74fc296442cc4d7f8269e94e25cad5a4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a59671cb37be433ca9aad55c9f432474\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"74fc296442cc4d7f8269e94e25cad5a4\",\n          \"target\": \"da165a652daf475698c988c6427d008f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"921b07f0136140b3b3c3dd1ab561bb08\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bbe4918b84a9426abbec7d055f7f555a\",\n          \"target\": \"8351c5b9bf8942ff8d31f773b77a5ee3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4c33e19c61de47b6a365058f905ba7db\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8351c5b9bf8942ff8d31f773b77a5ee3\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ee2e867ed68047d794c46b45bc4ce496\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8a8d038a0f75488885032aceabd284ce\",\n          \"target\": \"64d85b2098094a4fa02f25f7a1444c50\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0ec6f85012064093931d18af01990021\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"64d85b2098094a4fa02f25f7a1444c50\",\n          \"target\": \"e8625b3c4b794d769bb0da9d0a606848\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4b32d599cc7145c9bef29624ed16ce09\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e8625b3c4b794d769bb0da9d0a606848\",\n          \"target\": \"cb013d5f2f4b4d0789b486a504e6d2f2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"166e3abc2610434380c01a42e67a6e57\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f9950611be314fe6b0c891e8e65771d2\",\n          \"target\": \"607a63448c1a4acca85166124f375118\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"240492096e0e4691a1481592d27639d2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"607a63448c1a4acca85166124f375118\",\n          \"target\": \"280229f5f0f74d11a6d06328dfb8fa1a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.currentAnswerValidation;\\n})()\"\n          },\n          \"label\": \"In range\"\n        },\n        {\n          \"id\": \"11d51d8d83d4441dbd99f5ddff1399a5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"607a63448c1a4acca85166124f375118\",\n          \"target\": \"194fae9f28f045ac94643564ef50c9db\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.currentAnswerValidation;\\n})()\"\n          },\n          \"label\": \"Out of range\"\n        },\n        {\n          \"id\": \"fb80daf341154f44b06eed52008d631b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"194fae9f28f045ac94643564ef50c9db\",\n          \"target\": \"369375049a91494e9da6cd6e6cb3cb28\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f499ad9ec75d4d029dc327aeada3ff88\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"369375049a91494e9da6cd6e6cb3cb28\",\n          \"target\": \"26cffe08aa7147c79ffc7489da676135\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6932b81a81aa40239c7279a917bb3816\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"26cffe08aa7147c79ffc7489da676135\",\n          \"target\": \"8d2ac71ed40a416a9751e5bd73a6e442\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1d4e280c848b4646967db37b37aa6971\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c24324650a514984946fed64207f0c24\",\n          \"target\": \"c0f7a2a49b4f49688d9a1c1dd4e216f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e5675c80eaaf4501b0872eb2375e31a7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c0f7a2a49b4f49688d9a1c1dd4e216f9\",\n          \"target\": \"8c9927f71ad04890afd342b20df99100\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8f26f9a4757b45299f913e7ca3b948d1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8c9927f71ad04890afd342b20df99100\",\n          \"target\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"verify_response=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"d52c9a7bde9841f5a5fe1e96330547a2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8c9927f71ad04890afd342b20df99100\",\n          \"target\": \"3c232bba33f34219b4a554c511faa4da\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"verify_response=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"339812eec1c44e0ba4847f30f4f5e5d0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3c232bba33f34219b4a554c511faa4da\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"83c8dcc16e06476b8bdb8a991918171e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"target\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.questionIndex >= vaVars.questionCount;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"8e5c522a68604d14b48d408ab8d30df0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"target\": \"c24324650a514984946fed64207f0c24\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"confirmationneeded=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Confirmation?\"\n        },\n        {\n          \"id\": \"53df8ead704541ba8b2b12abd376513d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"target\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"confirmationneeded!=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"dfb7472e691f4770a126df453f8bd986\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"cb013d5f2f4b4d0789b486a504e6d2f2\",\n          \"target\": \"b6173737c4e740c584b5efe1424aec8b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4771447e2c9e47a497c00226182f0aa2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b6173737c4e740c584b5efe1424aec8b\",\n          \"target\": \"f9950611be314fe6b0c891e8e65771d2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fe8bc0685a84441e85e38f22c6d8f929\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4761ab4e62324e3cb07ce4efc77ffd1f\",\n          \"target\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9f77c4762dd94e248ecc9bda5e2cf8d0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"target\": \"bbe4918b84a9426abbec7d055f7f555a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.active == true;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"42731da272e043d29de8a18ae4abe8ec\": {\n      \"id\": \"42731da272e043d29de8a18ae4abe8ec\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"surveyInstanceId\",\n      \"label\": \"surveyInstanceId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a019f4d9d2034f1e8ce4413ad6814d4c\": {\n      \"id\": \"a019f4d9d2034f1e8ce4413ad6814d4c\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"surveyQuestions\",\n      \"label\": \"surveyQuestions\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4606ff81e3b1466dba105ac8db0a3ff1\": {\n      \"id\": \"4606ff81e3b1466dba105ac8db0a3ff1\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"-1\"\n      },\n      \"name\": \"questionIndex\",\n      \"label\": \"questionIndex\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"701eeb0ead3946b4a95fc310996f51d5\": {\n      \"id\": \"701eeb0ead3946b4a95fc310996f51d5\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"questionCount\",\n      \"label\": \"questionCount\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"e0b97ea5de424260a17d367b713e6233\": {\n      \"id\": \"e0b97ea5de424260a17d367b713e6233\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"{}\"\n      },\n      \"name\": \"surveyAnswers\",\n      \"label\": \"surveyAnswers\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5fa5bab12ab3407fa0243a6e4b1e5b55\": {\n      \"id\": \"5fa5bab12ab3407fa0243a6e4b1e5b55\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"choice,scale,numericscale\"\n      },\n      \"name\": \"choiceTypes\",\n      \"label\": \"choiceTypes\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"953851ffa4294d04859d006bf28a4986\": {\n      \"id\": \"953851ffa4294d04859d006bf28a4986\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionId\",\n      \"label\": \"currentQuestionId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1d2077df93314785b211efe410798278\": {\n      \"id\": \"1d2077df93314785b211efe410798278\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionType\",\n      \"label\": \"currentQuestionType\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"00d261d656824f6f8f150a2025f4eaae\": {\n      \"id\": \"00d261d656824f6f8f150a2025f4eaae\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionMetric\",\n      \"label\": \"currentQuestionMetric\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"601f508ef27a49a18330230ddcc12772\": {\n      \"id\": \"601f508ef27a49a18330230ddcc12772\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionDisplay\",\n      \"label\": \"currentQuestionDisplay\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b56216c2f682436d9e56d9ef36471bcb\": {\n      \"id\": \"b56216c2f682436d9e56d9ef36471bcb\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"introduction\",\n      \"label\": \"introduction\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"0c33e298eff44fc88364434b538e805f\": {\n      \"id\": \"0c33e298eff44fc88364434b538e805f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"endNote\",\n      \"label\": \"endNote\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6545133e2b144832a1ecea359dcc39b9\": {\n      \"id\": \"6545133e2b144832a1ecea359dcc39b9\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"string,long,percentage\"\n      },\n      \"name\": \"textTypes\",\n      \"label\": \"textTypes\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"dd7230f4e76642c4b1676e04fa2af480\": {\n      \"id\": \"dd7230f4e76642c4b1676e04fa2af480\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionMax\",\n      \"label\": \"currentQuestionMax\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3f8a633cceb94a7a8c29a2622f003795\": {\n      \"id\": \"3f8a633cceb94a7a8c29a2622f003795\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionMin\",\n      \"label\": \"currentQuestionMin\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"cf9a19900c7043bd817ff9f5794941ed\": {\n      \"id\": \"cf9a19900c7043bd817ff9f5794941ed\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentAnswerValidation\",\n      \"label\": \"currentAnswerValidation\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"607bdaced73d4d7fab9239c0d64a4210\": {\n      \"id\": \"607bdaced73d4d7fab9239c0d64a4210\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"''\"\n      },\n      \"name\": \"currentAnswerErrorMsg\",\n      \"label\": \"currentAnswerErrorMsg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"bba30ac7475c47cc93da35130951478b\": {\n      \"id\": \"bba30ac7475c47cc93da35130951478b\",\n      \"name\": \"show_attachment_question\",\n      \"label\": \"Show Attachment Question\",\n      \"varType\": \"image\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"64d85b2098094a4fa02f25f7a1444c50\",\n      \"isHidden\": false\n    },\n    \"1132a62678c24bbda688337615fd51bb\": {\n      \"id\": \"1132a62678c24bbda688337615fd51bb\",\n      \"name\": \"surveyid\",\n      \"label\": \"SurveyId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n      \"isHidden\": false\n    },\n    \"e5e2dc8c74a64bf7ba531a2b734bd9cd\": {\n      \"id\": \"e5e2dc8c74a64bf7ba531a2b734bd9cd\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"surveyVerificationMsg\",\n      \"label\": \"surveyVerificationMsg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"75bc445130284002947077d668cac779\": {\n      \"id\": \"75bc445130284002947077d668cac779\",\n      \"name\": \"confirmationneeded\",\n      \"label\": \"ConfirmationNeeded\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n      \"isHidden\": false\n    },\n    \"f4cfc3cbbdca4d46b23a1de57709a8e0\": {\n      \"id\": \"f4cfc3cbbdca4d46b23a1de57709a8e0\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"true\"\n      },\n      \"name\": \"currentQuestionMandatory\",\n      \"label\": \"currentQuestionMandatory\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"ba2a161b94a3468a86603955cca630a1\": {\n      \"id\": \"ba2a161b94a3468a86603955cca630a1\",\n      \"name\": \"savequestionstocontext\",\n      \"label\": \"SaveQuestionsToContext\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n      \"isHidden\": false\n    },\n    \"1ebd3fa354824ebcb2abd32c7f5a08ee\": {\n      \"id\": \"1ebd3fa354824ebcb2abd32c7f5a08ee\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_postchat_user_id\",\n      \"label\": \"_topic_postchat_user_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fbdedb6037d443fc94ac909130d72657\": {\n      \"id\": \"fbdedb6037d443fc94ac909130d72657\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"surveyName\",\n      \"label\": \"surveyName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"62b3a6b4779d449faee2e5abee5678a5\": {\n      \"id\": \"62b3a6b4779d449faee2e5abee5678a5\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_pre_chat_survey_name\",\n      \"label\": \"LiveAgent_pre_chat_survey_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b712f462443f422882112475625c1f51\": {\n      \"id\": \"b712f462443f422882112475625c1f51\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_post_chat_survey_name\",\n      \"label\": \"LiveAgent_post_chat_survey_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c561d907f23a4ee485d105e3deefe041\": {\n      \"id\": \"c561d907f23a4ee485d105e3deefe041\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_pre_assessment_instance\",\n      \"label\": \"LiveAgent_pre_assessment_instance\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5f4fab2392e34755a790d59670b35294\": {\n      \"id\": \"5f4fab2392e34755a790d59670b35294\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_post_assessment_instance\",\n      \"label\": \"LiveAgent_post_assessment_instance\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"b0a2dbc7899742b19e9f2d904b7bfc3e\": {\n      \"id\": \"b0a2dbc7899742b19e9f2d904b7bfc3e\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"defaultSurveyName\",\n      \"label\": \"defaultSurveyName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9c7e90dca34b47489835d0bcdc8e4933\": {\n      \"id\": \"9c7e90dca34b47489835d0bcdc8e4933\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionFieldValidator\",\n      \"label\": \"currentQuestionFieldValidator\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a7b460d515ca4a2087c92d2c8bf5fbc9\": {\n      \"id\": \"a7b460d515ca4a2087c92d2c8bf5fbc9\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionReferenceTable\",\n      \"label\": \"currentQuestionReferenceTable\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6ec01bc01b7144ec90530b7f9af69bb2\": {\n      \"id\": \"6ec01bc01b7144ec90530b7f9af69bb2\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionReferenceCondition\",\n      \"label\": \"currentQuestionReferenceCondition\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3f44cb42666b408fbb6f952fe939d920\": {\n      \"id\": \"3f44cb42666b408fbb6f952fe939d920\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"active\",\n      \"label\": \"active\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"2f2b481c82a94d1996f70567027cbb41\": {\n      \"id\": \"2f2b481c82a94d1996f70567027cbb41\",\n      \"name\": \"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\",\n      \"label\": \"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"b5790fea6a77427aaf10a8cb5ee3cef0\": {\n      \"id\": \"b5790fea6a77427aaf10a8cb5ee3cef0\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Boolean Question\",\n      \"name\": \"show_boolean_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"8a8d038a0f75488885032aceabd284ce\",\n      \"isHidden\": false,\n      \"description\": \"This type of question allows users to choose between two distinct options, typically representing \\\"Yes\\\" or \\\"No,\\\" \\\"True\\\" or \\\"False,\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\"\n    },\n    \"5229b91bab174a52829686976666ed1b\": {\n      \"id\": \"5229b91bab174a52829686976666ed1b\",\n      \"name\": \"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\",\n      \"label\": \"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"0775ff6cf5b94c4692d1a7be6b9fe010\": {\n      \"id\": \"0775ff6cf5b94c4692d1a7be6b9fe010\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Text Input Question\",\n      \"name\": \"show_text_input_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"369375049a91494e9da6cd6e6cb3cb28\",\n      \"isHidden\": false,\n      \"description\": \"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\"\n    },\n    \"9421933d83ba4506b292d81bb60b2999\": {\n      \"id\": \"9421933d83ba4506b292d81bb60b2999\",\n      \"name\": \"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\",\n      \"label\": \"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"dea29579e2c44cdab652446be7273444\": {\n      \"id\": \"dea29579e2c44cdab652446be7273444\",\n      \"varType\": \"reference\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Choice Question\",\n      \"name\": \"show_choice_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"external\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"8d2ac71ed40a416a9751e5bd73a6e442\",\n      \"isHidden\": false,\n      \"description\": \"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\"\n    },\n    \"e5d8423283fc4d2595fd661bd5a2eb69\": {\n      \"id\": \"e5d8423283fc4d2595fd661bd5a2eb69\",\n      \"name\": \"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\",\n      \"label\": \"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"fbe9af88d71a49f3845d37b4a93bbe15\": {\n      \"id\": \"fbe9af88d71a49f3845d37b4a93bbe15\",\n      \"varType\": \"date_time\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Date Question\",\n      \"name\": \"show_date_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"date\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"e8625b3c4b794d769bb0da9d0a606848\",\n      \"isHidden\": false,\n      \"description\": \"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\"\n    },\n    \"a7dc2985e75f4c5cbd8b508e8ab6620c\": {\n      \"id\": \"a7dc2985e75f4c5cbd8b508e8ab6620c\",\n      \"name\": \"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\",\n      \"label\": \"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"c1d6aa7022164ba6a2b0291228d96249\": {\n      \"id\": \"c1d6aa7022164ba6a2b0291228d96249\",\n      \"varType\": \"date_time\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Datetime Question\",\n      \"name\": \"show_datetime_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"date_time\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"cb013d5f2f4b4d0789b486a504e6d2f2\",\n      \"isHidden\": false,\n      \"description\": \"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\"\n    },\n    \"78de1c7f496f430985b8d3ac5f93acac\": {\n      \"id\": \"78de1c7f496f430985b8d3ac5f93acac\",\n      \"name\": \"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\",\n      \"label\": \"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"b600afffba2d46a1a225c17e62ee4734\": {\n      \"id\": \"b600afffba2d46a1a225c17e62ee4734\",\n      \"varType\": \"carousel-image\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Image Scale Question\",\n      \"name\": \"show_image_scale_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"26cffe08aa7147c79ffc7489da676135\",\n      \"isHidden\": false,\n      \"description\": \"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\"\n    },\n    \"3148914579f645b88e5e0bbc22ab9cf4\": {\n      \"id\": \"3148914579f645b88e5e0bbc22ab9cf4\",\n      \"name\": \"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\",\n      \"label\": \"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"a813e0458a174bb0b415483fe89c00e4\": {\n      \"id\": \"a813e0458a174bb0b415483fe89c00e4\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Verify Response\",\n      \"name\": \"verify_response\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"c0f7a2a49b4f49688d9a1c1dd4e216f9\",\n      \"isHidden\": false,\n      \"description\": \"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\"\n    },\n    \"498f5de051d6461d87508d10b8a73ecf\": {\n      \"id\": \"498f5de051d6461d87508d10b8a73ecf\",\n      \"name\": \"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\",\n      \"label\": \"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"1b42a3cd06f14eda968880b670491ebb\": {\n      \"id\": \"1b42a3cd06f14eda968880b670491ebb\",\n      \"varType\": \"reference\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Reference Question\",\n      \"name\": \"show_reference_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"external\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"b6173737c4e740c584b5efe1424aec8b\",\n      \"isHidden\": false,\n      \"description\": \"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_topic_dba94e44ff2202101b82157c03cb145a","channels":"","source_topic_id":"11d818213b77330074bc456993efc4c2","expose_on_palette":"false","name":"Survey-LLM","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"Perform asynchronous AI Search","context_profiles":"","sys_updated_on":"2024-11-06 18:48:12","title":"AI Search","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"ebef2f355b621010a76b04d13d81c7c0","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2020-08-11 17:44:14","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"AI Search","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"nlu_keyword","sys_mod_count":"496","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.73\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"0ff6294905b34f6f9ff252ec7427362c\": {\n          \"id\": \"0ff6294905b34f6f9ff252ec7427362c\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"parameters\": [\n            {\n              \"name\": \"Search Term\",\n              \"value\": \"\",\n              \"checked\": true,\n              \"id\": \"ec4fbd7603204a83a2b664be6ac641c4\",\n              \"disabled\": true,\n              \"referenced\": true,\n              \"type\": \"String\",\n              \"required\": true\n            },\n            {\n              \"type\": \"Reference\",\n              \"value\": \"\",\n              \"id\": \"79c4509501b24ba8b0242741deba8800\",\n              \"name\": \"Search Application Configuration\",\n              \"table\": \"sys_search_context_config\",\n              \"hint\": \"(Optional) Use a custom Search Application Configuration\",\n              \"query\": \"\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"false\",\n              \"id\": \"d0cefa797f544b94bc662bc078028754\",\n              \"name\": \"Ask Another Search\",\n              \"required\": false,\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"ec4fbd7603204a83a2b664be6ac641c4\",\n            \"79c4509501b24ba8b0242741deba8800\",\n            \"d0cefa797f544b94bc662bc078028754\"\n          ]\n        },\n        \"ce2b385dd8a6432785e463128d148488\": {\n          \"id\": \"ce2b385dd8a6432785e463128d148488\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"geniusSearchResults\",\n              \"value\": \"(function execute() {\\n    if (!gs.nil(vaVars.geniusResults)) {\\n        var geniusResultsJSON = JSON.parse(vaVars.geniusResults);\\n        return global.VAAISearchHelperUtah.resizeResultIfRequired(geniusResultsJSON, 'Search metadata', vaVars);\\n    }\\n    return null;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=b19775fa536310103296ddeeff7b12ff%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"searchResults\",\n              \"value\": \"(function execute() {\\n    if (!gs.nil(vaVars.searchResults)) {\\n        var searchResultsJSON = JSON.parse(vaVars.searchResults);\\n        return global.VAAISearchHelperUtah.resizeResultIfRequired(searchResultsJSON, 'Search result', vaVars);\\n    }\\n    return null;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=b19775fa536310103296ddeeff7b12ff%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"shouldAskInfoHelpful\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.shouldAskInfoHelpful}}\",\n                        \"displayValue\": \"Script VariablesshouldAskInfoHelpful\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=b19775fa536310103296ddeeff7b12ff%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"newSearchTerm\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.new_search_term}}\",\n                        \"displayValue\": \"Input VariablesNew Search Term\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=b19775fa536310103296ddeeff7b12ff%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"shouldRunFallbackTopic\",\n              \"value\": \"(function execute() {\\n    return vaVars.didFdihInvocationTimeOut || (vaInputs.display_options == 'no') ||\\n       (gs.nil(vaVars.geniusResults) && gs.nil(vaVars.searchResults));\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=b19775fa536310103296ddeeff7b12ff%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"searchMetadata\",\n              \"value\": \"(function execute() {\\n    if (!gs.nil(vaVars.searchMetadata)) {\\n        var searchMetadataJSON = JSON.parse(vaVars.searchMetadata);\\n        return global.VAAISearchHelperUtah.resizeResultIfRequired(searchMetadataJSON, 'Search metadata', vaVars);\\n    }\\n    return null;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=b19775fa536310103296ddeeff7b12ff%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            }\n          ]\n        },\n        \"08ad47e40040419196b9edab91d8ef82\": {\n          \"id\": \"08ad47e40040419196b9edab91d8ef82\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Results to Display?\"\n        },\n        \"6197d1bbdb894ba9a0b5e9543aeb6a69\": {\n          \"id\": \"6197d1bbdb894ba9a0b5e9543aeb6a69\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Display Genius Result\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n    return global.VAAISearchHelperXanadu.generateGeniusCardResponse(\\n        vaVars.searchMetadata, vaVars.geniusResults, vaSystem, vaInputs, vaVars, vaContext, \\\"ask_genius_helpful\\\");\\n})()\\n\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"e5a0c9a11ade4dfa9424107d13edf6ea\": {\n          \"id\": \"e5a0c9a11ade4dfa9424107d13edf6ea\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Was Genius Helpful?\"\n        },\n        \"4397d6f32aee4d9585e3c1cef9f49514\": {\n          \"id\": \"4397d6f32aee4d9585e3c1cef9f49514\",\n          \"name\": \"Process Results\",\n          \"script\": \"(function execute() {\\n    var now = new GlideDateTime().getNumericValue();\\n    var elapsedTime = now - vaVars.startTime;\\n    var returnTime = now - vaInputs.end_time;\\n    var logger = global.VAAISearchHelper.getLogger(vaVars.loggingContext);\\n    logger.debug('AI Search FDIH action time: {0}ms', elapsedTime);\\n    logger.debug('AI Search FDIH returned to VA in {0}ms', returnTime);\\n\\n    var results = JSON.stringify(global.VAAISearchHelper.filterResultsForLoggedInUser(\\n        vaInputs.search_result.toString(), vaSystem, vaVars.loggingContext));\\n\\n    var processedResults = global.VAAISearchHelperUtah.processResults(results, vaSystem, vaInputs, vaVars);\\n    vaVars.searchMetadata = processedResults.searchMetadata;\\n    vaVars.geniusResults = processedResults.geniusSearchResults;\\n    vaVars.searchResults = processedResults.searchResults;\\n    if (!gs.nil(vaVars.searchMetadata) && vaVars.searchMetadata != \\\"{}\\\")\\n        logger.debug('AI Search performed on server in {0}ms',\\n            JSON.parse(vaVars.searchMetadata).glide_signals.searchResultMetadata.responseTimeInMs);\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"2045ed7aa08a414bbee05fa69e18c9cb\": {\n          \"id\": \"2045ed7aa08a414bbee05fa69e18c9cb\",\n          \"name\": \"Collect Search Info\",\n          \"script\": \"(function execute() {\\n    vaVars.loggingContext = JSON.stringify(global.VAAISearchHelperTokyo.getLoggingContext(vaSystem));\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).debug('Starting \\\"AI Search\\\" topic block');\\n    vaVars.startTime = new GlideDateTime().getNumericValue();\\n    vaVars.isSearchAvailable = global.VAAISearchHelperTokyo.isSearchEnabled(vaVars.loggingContext);\\n\\n    // This script has to run before any other operations to collect correct info.\\n    // If the node runs under the platform thread, the info can be incorrect.\\n    vaVars.session_id = gs.getSessionID();\\n    vaVars.user_id = vaInputs.user.getValue();\\n    vaVars.is_logged_in = gs.getSession().isLoggedIn();\\n    vaVars.language = gs.getSession().getLanguage();\\n    //AI Search start timestamp\\n    vaVars.time = global.VAClickMetrics.getCurrentTime();\\n\\n    // flag for sending SEARCH_RESULT_DISPLAYED event for processing \\n    vaVars.sendDisplayedSearchResultClickMetricsEvent = true;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"e1352bb47698492cbae8f2dcca00dd28\": {\n          \"id\": \"e1352bb47698492cbae8f2dcca00dd28\",\n          \"name\": \"Run AI Search\",\n          \"invocationType\": \"action\",\n          \"stepType\": \"FlowAction\",\n          \"actionSpoke\": \"global\",\n          \"actionSpokeAction\": \"2eaf23715b621010a76b04d13d81c7b5\",\n          \"actionWaitType\": \"sync\",\n          \"actionRunAs\": \"session_user\",\n          \"actionSecureField\": false,\n          \"actionSelectSecureField\": \"\",\n          \"actionPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionConfirmPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionNonSecureChannelMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionInputs\": {\n            \"input-search_term\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.search_term}}\",\n                        \"displayValue\": \"Input VariablesSearch Term\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\"\n            },\n            \"input-context_profile_id\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getContextProfileId();\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-search_context_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.search_application_configuration}}\",\n                        \"displayValue\": \"Input VariablesSearch Application Configuration\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\"\n            },\n            \"input-logging_context\": {\n              \"value\": \"(function execute() {\\n    return vaVars.loggingContext;\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-locale\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getRequesterLocale();\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-start_time\": {\n              \"value\": \"(function execute() {\\n    return vaVars.startTime;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          },\n          \"actionOutputs\": {\n            \"output-search_result\": [\n              {\n                \"id\": \"6e8d4a25a6b74763be6357f17f51ed39\",\n                \"mapping\": \"search_result\",\n                \"value\": \"Search Result\",\n                \"disabled\": false,\n                \"type\": \"json\",\n                \"variable\": \"Search_result\",\n                \"variableName\": \"search_result\"\n              }\n            ],\n            \"output-__action_status__\": [\n              {\n                \"id\": \"2473bf9d712240e9abe314285998a0e3\",\n                \"mapping\": \"Action Status\",\n                \"value\": \"Action Status\",\n                \"disabled\": false,\n                \"type\": \"object\",\n                \"variable\": \"Action Status\",\n                \"variableName\": \"action_status\"\n              }\n            ],\n            \"output-__dont_treat_as_error__\": [\n              {\n                \"id\": \"ea639d6dbe1f4f978b01e2300c16a4f2\",\n                \"mapping\": \"Don't Treat as Error\",\n                \"value\": \"Don't Treat as Error\",\n                \"disabled\": false,\n                \"type\": \"boolean\",\n                \"variable\": \"Don't Treat As Error\",\n                \"variableName\": \"don_t_treat_as_error\"\n              }\n            ],\n            \"output-end_time\": [\n              {\n                \"id\": \"9ec9e3bd1c674802942a8ad4d4e5e341\",\n                \"mapping\": \"End time\",\n                \"value\": \"End time\",\n                \"disabled\": false,\n                \"type\": \"string\",\n                \"variable\": \"End Time\",\n                \"variableName\": \"end_time\"\n              }\n            ]\n          },\n          \"actionDefinition\": {\n            \"id\": \"2eaf23715b621010a76b04d13d81c7b5\",\n            \"latest_snapshot_id\": \"2eaf23715b621010a76b04d13d81c7b5\",\n            \"parent_id\": \"c93fa3795b221010a76b04d13d81c767\",\n            \"type\": \"action\",\n            \"name\": \"atlas_search\",\n            \"label\": \"AI Search\",\n            \"scope_id\": \"global\",\n            \"description\": \"Perform asynchronous AI Search\",\n            \"category\": \"\",\n            \"parameters_have_loaded\": true,\n            \"input_parameters\": [\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_term\",\n                \"label\": \"search_term\",\n                \"type\": \"string\",\n                \"order\": 1,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"context_profile_id\",\n                \"label\": \"context_profile_id\",\n                \"type\": \"string\",\n                \"order\": 2,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_context_id\",\n                \"label\": \"search_context_id\",\n                \"type\": \"string\",\n                \"order\": 3,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"logging_context\",\n                \"label\": \"logging_context\",\n                \"type\": \"string\",\n                \"order\": 4,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"locale\",\n                \"label\": \"locale\",\n                \"type\": \"string\",\n                \"order\": 5,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"start_time\",\n                \"label\": \"start_time\",\n                \"type\": \"string\",\n                \"order\": 6,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"additional_context\",\n                \"label\": \"additional_context\",\n                \"type\": \"string\",\n                \"order\": 7,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"gr_config_filter\",\n                \"label\": \"gr_config_filter\",\n                \"type\": \"string\",\n                \"order\": 8,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_result_type\",\n                \"label\": \"search_result_type\",\n                \"type\": \"string\",\n                \"order\": 9,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              }\n            ],\n            \"output_parameters\": [\n              {\n                \"name\": \"search_result\",\n                \"label\": \"Search Result\",\n                \"type\": \"json\",\n                \"order\": 1,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"name\": \"__action_status__\",\n                \"label\": \"Action Status\",\n                \"type\": \"object\",\n                \"order\": 2,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"name\": \"__dont_treat_as_error__\",\n                \"label\": \"Don't Treat as Error\",\n                \"type\": \"boolean\",\n                \"order\": 3,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"name\": \"end_time\",\n                \"label\": \"End time\",\n                \"type\": \"string\",\n                \"order\": 4,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              }\n            ]\n          },\n          \"subflowSecureField\": false,\n          \"subflowSelectSecureField\": \"\",\n          \"subflowPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowConfirmPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowNonSecureChannelMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"This action is not supported on this channel.\"\n          },\n          \"variableIds\": [\n            \"6e8d4a25a6b74763be6357f17f51ed39\",\n            \"2473bf9d712240e9abe314285998a0e3\",\n            \"ea639d6dbe1f4f978b01e2300c16a4f2\",\n            \"9ec9e3bd1c674802942a8ad4d4e5e341\"\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"permissionsNote\": \"By default, the Action executes based on the permissions of the user who initiated the conversation. For elevated privileges, you can set to System User.\"\n        },\n        \"525306d9f27b4275a0a7e6fc96109e7e\": {\n          \"id\": \"525306d9f27b4275a0a7e6fc96109e7e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Search Enabled?\"\n        },\n        \"c48eb365a05d43d89b65179efecb9dd5\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Ask Genius Helpful\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   return gs.getMessageLang(\\\"What would you like to do now?\\\", vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"e728aa82e4374dd1b131e5718f5a1992\",\n          \"id\": \"c48eb365a05d43d89b65179efecb9dd5\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var searchTerm = vaInputs.search_term;\\n\\n    if (!gs.nil(vaVars.catalogId)) {\\n        options.unshift({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request this item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    } else {\\n        options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Show me more on \\\"{0}\\\"', vaContext.getRequesterLang(), [searchTerm]), 'render_style': 'data'});\\n    if (vaInputs.ask_another_search == 'true')\\n        options.push({ 'value': 'another_search', 'label': gs.getMessageLang('Ask something else', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var searchTerm = vaInputs.search_term;\\n\\n    if (!gs.nil(vaVars.catalogId)) {\\n        options.unshift({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request this item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    } else {\\n        options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Show me more on \\\"{0}\\\"', vaContext.getRequesterLang(), [searchTerm]), 'render_style': 'data'});\\n    if (vaInputs.ask_another_search == 'true')\\n        options.push({ 'value': 'another_search', 'label': gs.getMessageLang('Ask something else', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"bf701dc1c59347728037a98fa3df797c\": {\n          \"id\": \"bf701dc1c59347728037a98fa3df797c\",\n          \"name\": \"Get Catalog Id\",\n          \"script\": \"(function execute() {\\n    try {\\n        var jsonData = JSON.parse(vaVars.geniusResults);\\n        var catalogId = jsonData.propValues.actions[0].actionPayload.sysId.toString();\\n        \\n        vaVars.catalogRenderType = global.VAAISearchHelperXanadu.getConversationalRenderType(catalogId, vaContext.deviceType);\\n        \\n        if (vaVars.catalogRenderType == \\\"conversation\\\" || vaVars.catalogRenderType == \\\"inline-seismic\\\") {\\n            vaVars.catalogId = catalogId;\\n        }\\n    } catch (e) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).warn('No Catalog Id found for this search result.');\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"1e4448cfae3046c9b40c0f47f4790cb6\": {\n          \"id\": \"1e4448cfae3046c9b40c0f47f4790cb6\",\n          \"name\": \"Set Genius Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_genius_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"47026a9b8ef34ea39d199641087ffadf\": {\n          \"id\": \"47026a9b8ef34ea39d199641087ffadf\",\n          \"name\": \"Unset Genius Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_genius_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"3603496ffa64496c824eb53c445d16c7\": {\n          \"id\": \"3603496ffa64496c824eb53c445d16c7\",\n          \"name\": \"Calculate Request Id\",\n          \"script\": \"(function execute() {\\n    if (vaVars.catalogRecordTable.toString() == \\\"sc_req_item\\\") {\\n        var gr = new GlideRecord(\\\"sc_req_item\\\");\\n        gr.addQuery('sys_id', vaVars.catalogRecordId.toString());\\n        gr.query();\\n        if(gr.next()) {\\n            vaVars.reqItemId = gr.getValue(\\\"sys_id\\\");\\n        }\\n    } else {\\n        vaVars.reqItemId = vaVars.catalogRecordId.toString();\\n    }\\n\\n    vaVars.requestTable = vaVars.catalogRecordTable.toString();\\n})()\\n\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"874df4bb039e40c2a83798fe240f204c\": {\n          \"id\": \"874df4bb039e40c2a83798fe240f204c\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Request Catalog Item\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"Request Catalog Item\",\n          \"reusableTopicId\": \"a39acd71c3a3330012d1758a7ff57eb6\",\n          \"inputs\": {\n            \"catalog_item_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.catalogId}}\",\n                        \"displayValue\": \"Script VariablescatalogId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"execute_contextual_search\": {\n              \"value\": \"false\",\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            },\n            \"confirm_catalog_item\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"false\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"show_end_state_card\": {\n              \"value\": \"false\",\n              \"mode\": \"simple\",\n              \"type\": \"True/False\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"07ad9582bde7415f8ec79155bd6870ed\",\n              \"value\": \"record_id\",\n              \"mapping\": \"record_id\"\n            },\n            {\n              \"id\": \"bdc360493a3745ed86cb13dc4d5b0e38\",\n              \"value\": \"record_table\",\n              \"mapping\": \"record_table\"\n            },\n            {\n              \"id\": \"fee8096e6419421ebecca7d2048f97e4\",\n              \"value\": \"variables\",\n              \"mapping\": \"variables\"\n            }\n          ],\n          \"variableIds\": [\n            \"07ad9582bde7415f8ec79155bd6870ed\",\n            \"bdc360493a3745ed86cb13dc4d5b0e38\",\n            \"fee8096e6419421ebecca7d2048f97e4\"\n          ],\n          \"useTemplateTopic\": false\n        },\n        \"81ae0846d9a04fd185f833beabff5b22\": {\n          \"id\": \"81ae0846d9a04fd185f833beabff5b22\",\n          \"name\": \"Calculate Request Id\",\n          \"script\": \"(function execute() {\\n    // Special handling for requests in sc_req_item\\n    if (!gs.nil(vaVars.requestTable)) {\\n        if (vaVars.requestTable.toString() == \\\"sc_request\\\") {\\n            var grRequest = new GlideRecord(\\\"sc_request\\\");\\n            grRequest.addQuery(\\\"number\\\", vaVars.requestId);\\n            grRequest.query();\\n            if(grRequest.next()) {\\n                var grReqItem = new GlideRecord(\\\"sc_req_item\\\");\\n                grReqItem.addQuery(\\\"request\\\", grRequest.sys_id);\\n                grReqItem.query();\\n                if(grReqItem.next()) {\\n                    vaVars.reqItemId = grReqItem.getValue(\\\"sys_id\\\");\\n                    vaVars.requestTable = \\\"sc_req_item\\\";\\n                }\\n            }\\n        } else {\\n            var grTable = new GlideRecord(vaVars.requestTable.toString());\\n            grTable.addQuery(\\\"number\\\", vaVars.requestId);\\n            grTable.query();\\n            if (grTable.next()) {\\n                vaVars.reqItemId = grTable.getValue(\\\"sys_id\\\");\\n            }\\n        }\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"3d72230cd3de4205b34ec97f84373bfe\": {\n          \"id\": \"3d72230cd3de4205b34ec97f84373bfe\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Request Id Available?\"\n        },\n        \"614bdf7bcf1d4cf48f7e7a1d4adf31ec\": {\n          \"id\": \"614bdf7bcf1d4cf48f7e7a1d4adf31ec\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"End state card for Catalog Request\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"End state card for Catalog Request\",\n          \"reusableTopicId\": \"0b01391550d30110fa9b861f7d83d7f6\",\n          \"inputs\": {\n            \"record_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.reqItemId}}\",\n                        \"displayValue\": \"Script VariablesreqItemId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"record_table\": {\n              \"value\": \"(function execute() {\\n    return vaVars.requestTable;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            }\n          },\n          \"variableIds\": [],\n          \"outputs\": [],\n          \"useTemplateTopic\": false\n        },\n        \"e1fd90cb996a40479c55686ff933f948\": {\n          \"id\": \"e1fd90cb996a40479c55686ff933f948\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"New Search Term\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   return gs.getMessageLang(\\\"Ok, how else can I help?\\\", vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"19b4885bd86345abae37f28678a72080\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"08aa6cfa138048c09564bce6da538b58\": {\n          \"id\": \"08aa6cfa138048c09564bce6da538b58\",\n          \"name\": \"Check results to display\",\n          \"script\": \"(function execute() {\\n    vaVars.resultsToDisplay = global.VAAISearchHelperVancouver.calculateResultsToDisplay(vaSystem, vaInputs, vaVars, vaContext);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"e9ea713d5cff4bc1823256cbdfa1c3e5\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Display Options\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang(\\\"Here are the results you may find helpful\\\", vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"65311cc1f9bf461e98adc7d146842f0c\",\n          \"id\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n\\n    var resultMap = global.VAAISearchHelperVancouver.createResultMap(vaVars.searchMetadata, vaVars.searchResults, vaSystem, vaInputs, vaVars, vaContext);\\n    \\n    // Set false to avoid duplications. Once sent, this flag prevents the same payload from being sent again\\n    vaVars.sendDisplayedSearchResultClickMetricsEvent = false;\\n\\n    var options = [];\\n    for (var key in resultMap) {\\n        options.push({ 'value': key, 'label': resultMap[key], 'render_style': 'data'});\\n    }\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('I need more help...', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    if (vaInputs.ask_another_search == 'true')\\n        options.push({ 'value': 'another_search', 'label': gs.getMessageLang('Ask something else...', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n\\n    var resultMap = global.VAAISearchHelperVancouver.createResultMap(vaVars.searchMetadata, vaVars.searchResults, vaSystem, vaInputs, vaVars, vaContext);\\n    \\n    // Set false to avoid duplications. Once sent, this flag prevents the same payload from being sent again\\n    vaVars.sendDisplayedSearchResultClickMetricsEvent = false;\\n\\n    var options = [];\\n    for (var key in resultMap) {\\n        options.push({ 'value': key, 'label': resultMap[key], 'render_style': 'data'});\\n    }\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('I need more help...', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    if (vaInputs.ask_another_search == 'true')\\n        options.push({ 'value': 'another_search', 'label': gs.getMessageLang('Ask something else...', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"routes\": {},\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"d7b9bd2984184fd0b8da5517bd697af5\": {\n          \"id\": \"d7b9bd2984184fd0b8da5517bd697af5\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"c536398c3458489cb440181fae14bcf0\": {\n          \"id\": \"c536398c3458489cb440181fae14bcf0\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Display Results Card\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n    return global.VAAISearchHelperXanadu.generateSearchResultsResponse(\\n        vaVars.searchMetadata, vaVars.searchResults, vaSystem, vaInputs, vaVars, vaContext, \\\"ask_links_helpful\\\");\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"103422c001d34243abe3d2b490c1ad64\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Ask Links Helpful\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang(\\\"What would you like to do now?\\\", vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"ca4759ec446d42b68bb8a54d597424b0\",\n          \"id\": \"103422c001d34243abe3d2b490c1ad64\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var catalogId = vaInputs.display_options;\\n\\n    vaVars.catalogRenderType = global.VAAISearchHelperXanadu.getConversationalRenderType(catalogId, vaContext.deviceType);\\n    \\n    if (vaVars.catalogRenderType == \\\"conversation\\\" || vaVars.catalogRenderType == \\\"inline-seismic\\\") {\\n        vaVars.catalogId = catalogId;\\n        options.push({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request this item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n    \\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Go back', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var catalogId = vaInputs.display_options;\\n\\n    vaVars.catalogRenderType = global.VAAISearchHelperXanadu.getConversationalRenderType(catalogId, vaContext.deviceType);\\n    \\n    if (vaVars.catalogRenderType == \\\"conversation\\\" || vaVars.catalogRenderType == \\\"inline-seismic\\\") {\\n        vaVars.catalogId = catalogId;\\n        options.push({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request this item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n    \\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Go back', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"8a34229dec9541d9a6adb6912bf7a514\": {\n          \"id\": \"8a34229dec9541d9a6adb6912bf7a514\",\n          \"name\": \"Unset Link Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_links_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\": {\n          \"id\": \"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Was Links Helpful?\"\n        },\n        \"6eaf550a589b4c32a7f5ff99ff32a0d0\": {\n          \"id\": \"6eaf550a589b4c32a7f5ff99ff32a0d0\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"892d0a2e0be54931804dd7005978637b\": {\n          \"id\": \"892d0a2e0be54931804dd7005978637b\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Display Custom Result Link\",\n          \"url\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"label\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"header\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"multiple\",\n          \"introMsg\": {\n            \"value\": \"(function execute() {\\n    var searchTerm = vaSystem.getSearchText();\\n    return gs.getMessageLang('Here\\\\'s what I found for \\\"{0}\\\"', vaContext.getRequesterLang(), [vaInputs.display_options.getDisplayValue()]);\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"listOfLinks\": \"(function execute(header) {\\n    return global.VAAISearchHelperUtah.generateCustomResultList(vaVars.searchMetadata, vaVars.searchResults, header, vaSystem, vaInputs, vaVars, \\\"ask_custom_links_helpful\\\");\\n})(header)\"\n        },\n        \"c2c7ebc7d62442899bf1808998e39692\": {\n          \"id\": \"c2c7ebc7d62442899bf1808998e39692\",\n          \"name\": \"Set Custom Link Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_custom_links_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a5622c87208f4a9abb79068412da9507\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Ask Custom Links Helpful\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang(\\\"What would you like to do now?\\\", vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"6cd4dbcfa11c440d8b7693ddc24facb2\",\n          \"id\": \"a5622c87208f4a9abb79068412da9507\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Go back', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Go back', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"1a72b44f5c2c4981b64b0f19aa211e74\": {\n          \"id\": \"1a72b44f5c2c4981b64b0f19aa211e74\",\n          \"name\": \"Unset Custom Link Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_custom_links_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"33046537e25c481999e7c26a7b862904\": {\n          \"id\": \"33046537e25c481999e7c26a7b862904\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Was Custom Link Helpful?\"\n        },\n        \"3532e524a59a48e5b7f17dfc0b8f773f\": {\n          \"id\": \"3532e524a59a48e5b7f17dfc0b8f773f\",\n          \"name\": \"Set Click Metrics Event\",\n          \"script\": \"(function execute() {\\n    global.VAAISearchHelperVancouver.processSearchHelpfulMetrics(vaVars.searchMetadata, vaSystem, vaInputs, vaVars);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f398fc51c4e54b939543c9659b3f7d40\": {\n          \"id\": \"f398fc51c4e54b939543c9659b3f7d40\",\n          \"name\": \"Set Click Metrics Event\",\n          \"script\": \"(function execute() {\\n    global.VAAISearchHelperVancouver.processSearchCatalogRequestedMetrics(vaVars.searchMetadata, vaSystem, vaInputs, vaVars);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"5ab22a100a124b318245675cadb51f86\": {\n          \"id\": \"5ab22a100a124b318245675cadb51f86\",\n          \"name\": \"Set Click Metrics Event\",\n          \"script\": \"(function execute() {\\n    global.VAAISearchHelperVancouver.processSearchHelpfulMetrics(vaVars.searchMetadata, vaSystem, vaInputs, vaVars);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"18bb75c617874d868be87ce68d2fbee1\": {\n          \"id\": \"18bb75c617874d868be87ce68d2fbee1\",\n          \"name\": \"Set Link Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_links_helpful\\\");\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ecc69546417844a8826ca2bb543d1009\": {\n          \"id\": \"ecc69546417844a8826ca2bb543d1009\",\n          \"name\": \"Check if Search Timed Out\",\n          \"script\": \"(function execute() {\\n    vaVars.didFdihInvocationTimeOut = vaContext.didFdihInvocationTimeOut();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"57a1973b8ade4368800172c3535d8d3d\": {\n          \"id\": \"57a1973b8ade4368800172c3535d8d3d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Check for Timeout\"\n        },\n        \"44d38a478fdf4c6fae4ad8ebd74b8e11\": {\n          \"id\": \"44d38a478fdf4c6fae4ad8ebd74b8e11\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Catalog Render Type\"\n        },\n        \"725aeaa1c78745849b0a4ee7b9365968\": {\n          \"id\": \"725aeaa1c78745849b0a4ee7b9365968\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Request Catalog Item Inline-seismic\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"useTemplateTopic\": false,\n          \"reusableTopicChoice\": \"Request Catalog Item Inline-seismic\",\n          \"reusableTopicId\": \"689a151977b00210c5c6b2a07b5a99ea\",\n          \"inputs\": {\n            \"catalogitemid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.catalogId}}\",\n                        \"displayValue\": \"Script VariablescatalogId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"requestedforid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.user}}\",\n                        \"displayValue\": \"Input VariablesUser\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"477b05c27bd6497fa5b376fca7dada1a\",\n              \"value\": \"record_id\",\n              \"mapping\": \"record_id1\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"c89765e5e7264cda9ad7c717ffc6eeac\",\n              \"value\": \"record_table\",\n              \"mapping\": \"record_table1\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"5a79d6a838414b3e95f3678d9ab79747\",\n              \"value\": \"message\",\n              \"mapping\": \"message\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"b5b4f76d6de04da19313d6c451e4f368\",\n              \"value\": \"status\",\n              \"mapping\": \"status\",\n              \"preventDisable\": false\n            }\n          ],\n          \"variableIds\": [\n            \"477b05c27bd6497fa5b376fca7dada1a\",\n            \"c89765e5e7264cda9ad7c717ffc6eeac\",\n            \"5a79d6a838414b3e95f3678d9ab79747\",\n            \"b5b4f76d6de04da19313d6c451e4f368\"\n          ],\n          \"dynamicTopicBlockName\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputDynamicModal\": {},\n          \"outputDynamicModal\": {},\n          \"outdatedNote\": false,\n          \"loading\": false\n        },\n        \"4f370616ae704df1b50edf68d8cc2a34\": {\n          \"id\": \"4f370616ae704df1b50edf68d8cc2a34\",\n          \"name\": \"Set Record Variables\",\n          \"script\": \"(function execute() {\\n    vaVars.catalogRecordId = vaInputs.record_id1;\\n    vaVars.catalogRecordTable = vaInputs.record_table1;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"50110c47284f49d7ba6ff64f48a45a2b\": {\n          \"id\": \"50110c47284f49d7ba6ff64f48a45a2b\",\n          \"name\": \"Set Record Variables\",\n          \"script\": \"(function execute() {\\n    vaVars.catalogRecordId = vaInputs.record_id;\\n    vaVars.catalogRecordTable = vaInputs.record_table;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"b46c0184554341759d80ea69ffc62ccf\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"18bb75c617874d868be87ce68d2fbee1\",\n          \"target\": \"103422c001d34243abe3d2b490c1ad64\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6f6ea9f5f0024769b08590ab97df34f5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5ab22a100a124b318245675cadb51f86\",\n          \"target\": \"81ae0846d9a04fd185f833beabff5b22\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4204dd8813d649f29036664ddbf1a8d8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8a34229dec9541d9a6adb6912bf7a514\",\n          \"target\": \"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4b341ef325454102bfde5e8d6328508d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e5a0c9a11ade4dfa9424107d13edf6ea\",\n          \"target\": \"3532e524a59a48e5b7f17dfc0b8f773f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var helpful = vaInputs.ask_genius_helpful == 'yes' ? true : false;\\n    \\n    if (helpful) {\\n        VAAISearchHelper.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the search results were helpful');\\n    }\\n\\n    return helpful;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"f8a8ef62f43b46b193876bd8ab0abe44\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4397d6f32aee4d9585e3c1cef9f49514\",\n          \"target\": \"08aa6cfa138048c09564bce6da538b58\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"25e72c1b1d09458c86605b93bfdf6ddf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d7b9bd2984184fd0b8da5517bd697af5\",\n          \"target\": \"6eaf550a589b4c32a7f5ff99ff32a0d0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var optionSelected = vaInputs.display_options;\\n    if (optionSelected == 'yes' || optionSelected == 'no' || optionSelected == 'another_search') {\\n        return false;\\n    }\\n    return true;\\n})()\"\n          },\n          \"label\": \"Result Selected\"\n        },\n        {\n          \"id\": \"be76f4ead9c1424c82413ade80584896\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"33046537e25c481999e7c26a7b862904\",\n          \"target\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_custom_links_helpful == 'no';\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"d7f6d47696e84191a11b6433cd02f0d4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"892d0a2e0be54931804dd7005978637b\",\n          \"target\": \"c2c7ebc7d62442899bf1808998e39692\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"02e9a3828a5c4472aa711dca10788157\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d7b9bd2984184fd0b8da5517bd697af5\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.display_options == 'no' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"3105034e8f1e478ab4334ca615fa79ff\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"08ad47e40040419196b9edab91d8ef82\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.didFdihInvocationTimeOut ||\\n       (gs.nil(vaVars.geniusResults) && gs.nil(vaVars.searchResults));\\n})()\"\n          },\n          \"label\": \"No Results or Error\"\n        },\n        {\n          \"id\": \"cf4a56aca1cf4bfcab51ce9985014883\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"525306d9f27b4275a0a7e6fc96109e7e\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.isSearchAvailable;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"4fe561d98e284cbbb3e2d121b784336d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e1fd90cb996a40479c55686ff933f948\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"521d97c78e824eaca36bad278225eeb7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2045ed7aa08a414bbee05fa69e18c9cb\",\n          \"target\": \"525306d9f27b4275a0a7e6fc96109e7e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8e7f8254e6104f7f810a08e7bc40c881\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"103422c001d34243abe3d2b490c1ad64\",\n          \"target\": \"8a34229dec9541d9a6adb6912bf7a514\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6a1a84c0c5e946aaa30937a7842e877b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n          \"target\": \"d7b9bd2984184fd0b8da5517bd697af5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bf2a4608144842c9b5a083af3842f28d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c48eb365a05d43d89b65179efecb9dd5\",\n          \"target\": \"47026a9b8ef34ea39d199641087ffadf\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"346c8c0758e04bb6909c05ae4ac0e069\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1e4448cfae3046c9b40c0f47f4790cb6\",\n          \"target\": \"c48eb365a05d43d89b65179efecb9dd5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"776fe05359d64a0d9fdf45bfac5ca237\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bf701dc1c59347728037a98fa3df797c\",\n          \"target\": \"1e4448cfae3046c9b40c0f47f4790cb6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"51237023c42649059ad45f25d4ef7b54\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6197d1bbdb894ba9a0b5e9543aeb6a69\",\n          \"target\": \"bf701dc1c59347728037a98fa3df797c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5735797b24a340c38246373d9eaac6bf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"08ad47e40040419196b9edab91d8ef82\",\n          \"target\": \"6197d1bbdb894ba9a0b5e9543aeb6a69\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.resultsToDisplay == \\\"geniusResult\\\";\\n})()\\n\"\n          },\n          \"label\": \"Display Genius Result\"\n        },\n        {\n          \"id\": \"90029b4a84d042eaba71ae81afcaafbc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"08aa6cfa138048c09564bce6da538b58\",\n          \"target\": \"08ad47e40040419196b9edab91d8ef82\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8feb53c0dbb945b080e87dc87f1fa552\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"525306d9f27b4275a0a7e6fc96109e7e\",\n          \"target\": \"e1352bb47698492cbae8f2dcca00dd28\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.isSearchAvailable;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"6fb78d0790ae4e4da62513cfa71b6f3b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e5a0c9a11ade4dfa9424107d13edf6ea\",\n          \"target\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'no' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"62c326eefb52487c9e555aaff4a5e596\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0ff6294905b34f6f9ff252ec7427362c\",\n          \"target\": \"2045ed7aa08a414bbee05fa69e18c9cb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5c0c5f63902545bfad258899db33e941\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"47026a9b8ef34ea39d199641087ffadf\",\n          \"target\": \"e5a0c9a11ade4dfa9424107d13edf6ea\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"70da8daf808843f7bc6f673b9c267d5f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"81ae0846d9a04fd185f833beabff5b22\",\n          \"target\": \"3d72230cd3de4205b34ec97f84373bfe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bcb205abe22f49a9be765886ebb6edbc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3603496ffa64496c824eb53c445d16c7\",\n          \"target\": \"3d72230cd3de4205b34ec97f84373bfe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5aec6dd92c7e48379e7d27d5867f9f71\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3d72230cd3de4205b34ec97f84373bfe\",\n          \"target\": \"614bdf7bcf1d4cf48f7e7a1d4adf31ec\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !gs.nil(vaVars.reqItemId);\\n})()\\n\"\n          },\n          \"label\": \"Request Id Found\"\n        },\n        {\n          \"id\": \"689951f9683c4e409b14244bfb732132\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"614bdf7bcf1d4cf48f7e7a1d4adf31ec\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8b84935952b444c79288a2302f59615d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3d72230cd3de4205b34ec97f84373bfe\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.reqItemId);\\n})()\\n\"\n          },\n          \"label\": \"Request Id Not Found\"\n        },\n        {\n          \"id\": \"d9559deee77f4d468bc1aa800f9b8262\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e5a0c9a11ade4dfa9424107d13edf6ea\",\n          \"target\": \"e1fd90cb996a40479c55686ff933f948\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'another_search' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"Another Search\"\n        },\n        {\n          \"id\": \"b38dc0edb4e340388e081be67c8d1de4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"08ad47e40040419196b9edab91d8ef82\",\n          \"target\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.resultsToDisplay == \\\"regularResult\\\";\\n})()\\n\"\n          },\n          \"label\": \"Display Results\"\n        },\n        {\n          \"id\": \"2e8fe1df154e47828202b57df6da1d55\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\n          \"target\": \"f398fc51c4e54b939543c9659b3f7d40\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_links_helpful == 'request_catalog_item';\\n})()\\n\"\n          },\n          \"label\": \"Request Catalog Item\"\n        },\n        {\n          \"id\": \"e74de6aea03b42548c1ac74e250e52c0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d7b9bd2984184fd0b8da5517bd697af5\",\n          \"target\": \"e1fd90cb996a40479c55686ff933f948\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.display_options == 'another_search' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"Another Search\"\n        },\n        {\n          \"id\": \"d6f6e7e0a22e451c864cc7371fe3059b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\n          \"target\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_links_helpful == 'no';\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"4e3d141d34c14835935a22860d8fe87c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"6eaf550a589b4c32a7f5ff99ff32a0d0\",\n          \"target\": \"c536398c3458489cb440181fae14bcf0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var prefix = vaInputs.display_options.getDisplayValue();\\n    if (prefix.includes(\\\"(Catalog)\\\") || prefix.includes(\\\"(People)\\\") || prefix.includes(\\\"(KB)\\\"))\\n       return true;\\n})()\\n\"\n          },\n          \"label\": \"OOB Result Selected\"\n        },\n        {\n          \"id\": \"e1d7727458ee44d7b8e65f429c07cf6f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"6eaf550a589b4c32a7f5ff99ff32a0d0\",\n          \"target\": \"892d0a2e0be54931804dd7005978637b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var prefix = vaInputs.display_options.getDisplayValue();\\n    if (!(prefix.includes(\\\"(Catalog)\\\")) && !(prefix.includes(\\\"(People)\\\")) && !(prefix.includes(\\\"(KB)\\\")))\\n       return true;\\n})()\\n\"\n          },\n          \"label\": \"Custom Result\"\n        },\n        {\n          \"id\": \"55bd43dac50a4ce0b70870863c1d3a71\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c2c7ebc7d62442899bf1808998e39692\",\n          \"target\": \"a5622c87208f4a9abb79068412da9507\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e7e98969b4304401808e8328ff1606df\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a5622c87208f4a9abb79068412da9507\",\n          \"target\": \"1a72b44f5c2c4981b64b0f19aa211e74\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"af57f38db5374bf6a7df68eb2a108344\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1a72b44f5c2c4981b64b0f19aa211e74\",\n          \"target\": \"33046537e25c481999e7c26a7b862904\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7b81d89ee1b14a3bac8c23924f098a96\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"33046537e25c481999e7c26a7b862904\",\n          \"target\": \"81ae0846d9a04fd185f833beabff5b22\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var helpful = vaInputs.ask_custom_links_helpful == 'yes';\\n\\n    if (helpful) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the custom search results were helpful');\\n    }\\n\\n    return helpful;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"96850e84b6364b0ca25eec20ed7beb46\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3532e524a59a48e5b7f17dfc0b8f773f\",\n          \"target\": \"81ae0846d9a04fd185f833beabff5b22\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1cbe0dc98502476c9c2ea90cd6a97bae\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e5a0c9a11ade4dfa9424107d13edf6ea\",\n          \"target\": \"f398fc51c4e54b939543c9659b3f7d40\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'request_catalog_item' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"Request Catalog Item\"\n        },\n        {\n          \"id\": \"235d9a687b2e4880997c2299bdf6470d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\n          \"target\": \"5ab22a100a124b318245675cadb51f86\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var helpful = vaInputs.ask_links_helpful == 'yes';\\n\\n    if (helpful) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the search results were helpful');\\n    }\\n\\n    return helpful;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"d9b2ebe3db6b4606aa7e690c6aa7bc31\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c536398c3458489cb440181fae14bcf0\",\n          \"target\": \"18bb75c617874d868be87ce68d2fbee1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ceec787014de40048bc90ea3344e91ff\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e1352bb47698492cbae8f2dcca00dd28\",\n          \"target\": \"ecc69546417844a8826ca2bb543d1009\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"20d9a4c2599d44cea48571eea5730c25\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ecc69546417844a8826ca2bb543d1009\",\n          \"target\": \"57a1973b8ade4368800172c3535d8d3d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9b4b8aa978f74e29bf3192982d10a3d5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"57a1973b8ade4368800172c3535d8d3d\",\n          \"target\": \"4397d6f32aee4d9585e3c1cef9f49514\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.didFdihInvocationTimeOut;\\n})()\"\n          },\n          \"label\": \"Did not timeout\"\n        },\n        {\n          \"id\": \"c542e911bffc48ecbda89fdcbb51b04a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"57a1973b8ade4368800172c3535d8d3d\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.didFdihInvocationTimeOut;\\n})()\"\n          },\n          \"label\": \"Timed out\"\n        },\n        {\n          \"id\": \"6999ab81db2f44ceb87d9d4f46bf67b7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f398fc51c4e54b939543c9659b3f7d40\",\n          \"target\": \"44d38a478fdf4c6fae4ad8ebd74b8e11\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c13dccc047b04b19b7d94509390d9b45\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"44d38a478fdf4c6fae4ad8ebd74b8e11\",\n          \"target\": \"874df4bb039e40c2a83798fe240f204c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.catalogRenderType === \\\"conversation\\\";\\n})()\\n\"\n          },\n          \"label\": \"Conversation\"\n        },\n        {\n          \"id\": \"f2216da5d0bd4ec4a40c1b8c20137a7e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"44d38a478fdf4c6fae4ad8ebd74b8e11\",\n          \"target\": \"725aeaa1c78745849b0a4ee7b9365968\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.catalogRenderType === \\\"inline-seismic\\\";\\n})()\\n\"\n          },\n          \"label\": \"Inline-Seismic\"\n        },\n        {\n          \"id\": \"b7cc4a3ae8b54706a204965826c8efb1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"725aeaa1c78745849b0a4ee7b9365968\",\n          \"target\": \"4f370616ae704df1b50edf68d8cc2a34\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e94c2b8cb3474171b014cec85ed33bd6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4f370616ae704df1b50edf68d8cc2a34\",\n          \"target\": \"3603496ffa64496c824eb53c445d16c7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c13345060487488193d6f7e6eee746be\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"874df4bb039e40c2a83798fe240f204c\",\n          \"target\": \"50110c47284f49d7ba6ff64f48a45a2b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"44fdff63b1114e3d97f2703bf85d73ae\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"50110c47284f49d7ba6ff64f48a45a2b\",\n          \"target\": \"3603496ffa64496c824eb53c445d16c7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"ec4fbd7603204a83a2b664be6ac641c4\": {\n      \"id\": \"ec4fbd7603204a83a2b664be6ac641c4\",\n      \"name\": \"search_term\",\n      \"label\": \"Search Term\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"0ff6294905b34f6f9ff252ec7427362c\",\n      \"isHidden\": false\n    },\n    \"3ef8f6b94c954b4dbdacee7679488d53\": {\n      \"id\": \"3ef8f6b94c954b4dbdacee7679488d53\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"geniusResults\",\n      \"label\": \"geniusResults\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"dd61e2628fdf4537bdf80433b0bfef33\": {\n      \"id\": \"dd61e2628fdf4537bdf80433b0bfef33\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"searchResults\",\n      \"label\": \"searchResults\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"61bb15ce9c404704a7d9b1c7efc7119a\": {\n      \"id\": \"61bb15ce9c404704a7d9b1c7efc7119a\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return false;\\n})()\\n\"\n      },\n      \"name\": \"shouldAskInfoHelpful\",\n      \"label\": \"shouldAskInfoHelpful\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"79c4509501b24ba8b0242741deba8800\": {\n      \"id\": \"79c4509501b24ba8b0242741deba8800\",\n      \"name\": \"search_application_configuration\",\n      \"label\": \"Search Application Configuration\",\n      \"defaultValue\": \"\",\n      \"varType\": \"reference\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"table\": \"sys_search_context_config\",\n      \"nodeId\": \"0ff6294905b34f6f9ff252ec7427362c\",\n      \"isHidden\": false\n    },\n    \"e728aa82e4374dd1b131e5718f5a1992\": {\n      \"id\": \"e728aa82e4374dd1b131e5718f5a1992\",\n      \"name\": \"ask_genius_helpful\",\n      \"label\": \"Ask Genius Helpful\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"c48eb365a05d43d89b65179efecb9dd5\",\n      \"isHidden\": false,\n      \"autoSelect\": false,\n      \"autoSelectExpression\": \"\"\n    },\n    \"2d34b3d9ee8541769cbe63615b73ba04\": {\n      \"id\": \"2d34b3d9ee8541769cbe63615b73ba04\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"searchMetadata\",\n      \"label\": \"searchMetadata\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"0a6190d6b5ae43cda309e63d6abd840d\": {\n      \"id\": \"0a6190d6b5ae43cda309e63d6abd840d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogId\",\n      \"label\": \"catalogId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4a0e5ea3868d4a4f8e5bc61ce78d1f01\": {\n      \"id\": \"4a0e5ea3868d4a4f8e5bc61ce78d1f01\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"reqItemId\",\n      \"label\": \"reqItemId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9c520c4e27c64e5581b26e4796b524dc\": {\n      \"id\": \"9c520c4e27c64e5581b26e4796b524dc\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"startTime\",\n      \"label\": \"startTime\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d0cefa797f544b94bc662bc078028754\": {\n      \"id\": \"d0cefa797f544b94bc662bc078028754\",\n      \"name\": \"ask_another_search\",\n      \"label\": \"Ask Another Search\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"0ff6294905b34f6f9ff252ec7427362c\",\n      \"isHidden\": false\n    },\n    \"07ad9582bde7415f8ec79155bd6870ed\": {\n      \"id\": \"07ad9582bde7415f8ec79155bd6870ed\",\n      \"name\": \"record_id\",\n      \"label\": \"Record_id\",\n      \"defaultValue\": \"record_id\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"nodeId\": \"874df4bb039e40c2a83798fe240f204c\",\n      \"isHidden\": false\n    },\n    \"bdc360493a3745ed86cb13dc4d5b0e38\": {\n      \"id\": \"bdc360493a3745ed86cb13dc4d5b0e38\",\n      \"name\": \"record_table\",\n      \"label\": \"Record_table\",\n      \"defaultValue\": \"record_table\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"nodeId\": \"874df4bb039e40c2a83798fe240f204c\",\n      \"isHidden\": false\n    },\n    \"fee8096e6419421ebecca7d2048f97e4\": {\n      \"id\": \"fee8096e6419421ebecca7d2048f97e4\",\n      \"name\": \"variables\",\n      \"label\": \"Variables\",\n      \"defaultValue\": \"variables\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"nodeId\": \"874df4bb039e40c2a83798fe240f204c\",\n      \"isHidden\": false\n    },\n    \"19b4885bd86345abae37f28678a72080\": {\n      \"id\": \"19b4885bd86345abae37f28678a72080\",\n      \"name\": \"new_search_term\",\n      \"label\": \"New Search Term\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY2NDQyMTYwNDc5MiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"e1fd90cb996a40479c55686ff933f948\",\n      \"isHidden\": false\n    },\n    \"65311cc1f9bf461e98adc7d146842f0c\": {\n      \"id\": \"65311cc1f9bf461e98adc7d146842f0c\",\n      \"name\": \"display_options\",\n      \"label\": \"Display Options\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n      \"isHidden\": false,\n      \"autoSelect\": false,\n      \"autoSelectExpression\": \"\"\n    },\n    \"ca4759ec446d42b68bb8a54d597424b0\": {\n      \"id\": \"ca4759ec446d42b68bb8a54d597424b0\",\n      \"name\": \"ask_links_helpful\",\n      \"label\": \"Ask Links Helpful\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"103422c001d34243abe3d2b490c1ad64\",\n      \"isHidden\": false,\n      \"autoSelect\": false,\n      \"autoSelectExpression\": \"\"\n    },\n    \"6cd4dbcfa11c440d8b7693ddc24facb2\": {\n      \"id\": \"6cd4dbcfa11c440d8b7693ddc24facb2\",\n      \"name\": \"ask_custom_links_helpful\",\n      \"label\": \"Ask Custom Links Helpful\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"a5622c87208f4a9abb79068412da9507\",\n      \"isHidden\": false,\n      \"autoSelect\": false,\n      \"autoSelectExpression\": \"\"\n    },\n    \"d58d38bf38df47c8becf225cde3f05ff\": {\n      \"id\": \"d58d38bf38df47c8becf225cde3f05ff\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogRenderType\",\n      \"label\": \"catalogRenderType\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"54c90c455c074a6c826cb22f74cd683e\": {\n      \"id\": \"54c90c455c074a6c826cb22f74cd683e\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogRecordId\",\n      \"label\": \"catalogRecordId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1f489b95e50a4c88aae14a94eec91aec\": {\n      \"id\": \"1f489b95e50a4c88aae14a94eec91aec\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogRecordTable\",\n      \"label\": \"catalogRecordTable\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"477b05c27bd6497fa5b376fca7dada1a\": {\n      \"id\": \"477b05c27bd6497fa5b376fca7dada1a\",\n      \"name\": \"record_id1\",\n      \"label\": \"Record_id1\",\n      \"defaultValue\": \"record_id\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"725aeaa1c78745849b0a4ee7b9365968\",\n      \"isHidden\": false\n    },\n    \"c89765e5e7264cda9ad7c717ffc6eeac\": {\n      \"id\": \"c89765e5e7264cda9ad7c717ffc6eeac\",\n      \"name\": \"record_table1\",\n      \"label\": \"Record_table1\",\n      \"defaultValue\": \"record_table\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"725aeaa1c78745849b0a4ee7b9365968\",\n      \"isHidden\": false\n    },\n    \"5a79d6a838414b3e95f3678d9ab79747\": {\n      \"id\": \"5a79d6a838414b3e95f3678d9ab79747\",\n      \"name\": \"message\",\n      \"label\": \"Message\",\n      \"defaultValue\": \"message\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"725aeaa1c78745849b0a4ee7b9365968\",\n      \"isHidden\": false\n    },\n    \"b5b4f76d6de04da19313d6c451e4f368\": {\n      \"id\": \"b5b4f76d6de04da19313d6c451e4f368\",\n      \"name\": \"status\",\n      \"label\": \"Status\",\n      \"defaultValue\": \"status\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"725aeaa1c78745849b0a4ee7b9365968\",\n      \"isHidden\": false\n    },\n    \"6e8d4a25a6b74763be6357f17f51ed39\": {\n      \"id\": \"6e8d4a25a6b74763be6357f17f51ed39\",\n      \"name\": \"search_result\",\n      \"label\": \"Search_result\",\n      \"defaultValue\": \"Search Result\",\n      \"varType\": \"json\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Search_result\",\n      \"variableName\": \"search_result\",\n      \"nodeId\": \"e1352bb47698492cbae8f2dcca00dd28\",\n      \"isHidden\": false\n    },\n    \"2473bf9d712240e9abe314285998a0e3\": {\n      \"id\": \"2473bf9d712240e9abe314285998a0e3\",\n      \"name\": \"action_status\",\n      \"label\": \"Action Status\",\n      \"defaultValue\": \"Action Status\",\n      \"varType\": \"object\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Action Status\",\n      \"variableName\": \"action_status\",\n      \"nodeId\": \"e1352bb47698492cbae8f2dcca00dd28\",\n      \"isHidden\": false\n    },\n    \"ea639d6dbe1f4f978b01e2300c16a4f2\": {\n      \"id\": \"ea639d6dbe1f4f978b01e2300c16a4f2\",\n      \"name\": \"don_t_treat_as_error\",\n      \"label\": \"Don't Treat As Error\",\n      \"defaultValue\": \"Don't Treat as Error\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Don't Treat As Error\",\n      \"variableName\": \"don_t_treat_as_error\",\n      \"nodeId\": \"e1352bb47698492cbae8f2dcca00dd28\",\n      \"isHidden\": false\n    },\n    \"9ec9e3bd1c674802942a8ad4d4e5e341\": {\n      \"id\": \"9ec9e3bd1c674802942a8ad4d4e5e341\",\n      \"name\": \"end_time\",\n      \"label\": \"End Time\",\n      \"defaultValue\": \"End time\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"End Time\",\n      \"variableName\": \"end_time\",\n      \"nodeId\": \"e1352bb47698492cbae8f2dcca00dd28\",\n      \"isHidden\": false\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_topic_ebef2f355b621010a76b04d13d81c7c0","channels":"","source_topic_id":"","expose_on_palette":"false","name":"AI Search","applicability":"","category":"","sys_policy":"read"},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"public","description":"Provide information and link for user to setup or reset verification profile","context_profiles":"","sys_updated_on":"2022-10-24 17:16:17","title":"","type":"STANDARD","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"script","nlu_model":"","sys_id":"f072432087551110a21cc9d7dabb35e9","library":"false","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2022-08-10 22:39:14","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Setup/Reset Verification Profile","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"rachel.wu@snc","live_agent":"false","key_phrases":"Setup/Reset Verification Profile,reset","model_type":"","sys_mod_count":"77","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"7d356091fd3346a1a8917cc873b18803\": {\n          \"id\": \"7d356091fd3346a1a8917cc873b18803\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\",\n            \"mode\": \"script\"\n          }\n        },\n        \"7b08bc2f17d347bc8197ce477c29b7c6\": {\n          \"id\": \"7b08bc2f17d347bc8197ce477c29b7c6\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n\\n})()\\n\",\n            \"mode\": \"script\"\n          }\n        },\n        \"9078709c69a045218b1f0358dd154b05\": {\n          \"id\": \"9078709c69a045218b1f0358dd154b05\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"setup message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    \\n    return gs.getMessageLang(\\\"You can setup or reset your account verification setting using the below link.\\\", vaContext.getRequesterLang());\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"669a994b5ed646589cff8598bd53dd71\": {\n          \"id\": \"669a994b5ed646589cff8598bd53dd71\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"setup_link\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n  \\n    var hostURL = gs.getProperty('glide.servlet.uri');\\n    var link = hostURL+\\\"now/nav/ui/classic/params/target/%24pwd_enrollment_form_container.do\\\"\\n    return link;\\n  \\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"6bdd38c89d7940e4a4cbc5f5e3514508\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7d356091fd3346a1a8917cc873b18803\",\n          \"target\": \"9078709c69a045218b1f0358dd154b05\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"de703b5a54de4964b8f24b66fc21bf42\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9078709c69a045218b1f0358dd154b05\",\n          \"target\": \"669a994b5ed646589cff8598bd53dd71\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3118ab5ac3b64e6381e306546decdf2b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"669a994b5ed646589cff8598bd53dd71\",\n          \"target\": \"7b08bc2f17d347bc8197ce477c29b7c6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9cc37b3704b52210559073c06a02f781","value":"9cc37b3704b52210559073c06a02f781"},"sys_update_name":"sys_cb_topic_f072432087551110a21cc9d7dabb35e9","channels":"SMS","source_topic_id":"","expose_on_palette":"false","name":"Setup/Reset Verification Profile","applicability":"(function execute() {\n  \n    if(gs.nil(vaContext.providerAppId)){\n        return false;\n    }\n     var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\n     if(gs.nil(providerApp)){\n         return false;\n     }\n \n     var SMS_CHANNEL = '5ae1b3e3771700105d7b3882a91061bd';\n     var providerSysId = providerApp.providerId;\n     var csProviderGR = new GlideRecord(\"sys_cs_provider\");\n     csProviderGR.addQuery(\"sys_id\", providerSysId);\n     csProviderGR.addEncodedQuery(\"link_account_enabled=true^account_link_type!=basic\");\n     csProviderGR.query();\n\n     var result = false;\n     if(csProviderGR.next()){\n         if(!csProviderGR.getValue(\"channel\").equals(SMS_CHANNEL)){\n            return false;\n         }\n\n         result = true;     \n     }\n  \n     var session = gs.getSession();\n     var loggedIn = session.isLoggedIn();\n     result = result && (!loggedIn);\n     return result;\n   \n})()\n","category":"","sys_policy":""},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"","context_profiles":"","sys_updated_on":"2023-04-05 11:38:39","title":"","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"f1103e2577812110ea3707c77b5a99a2","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2023-02-16 09:48:24","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Multi File Upload","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"","sys_mod_count":"106","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.45\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"b7d00116b42449afb4929effec6d6afc\": {\n          \"id\": \"b7d00116b42449afb4929effec6d6afc\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"5472efa7417d4e649cfb0995a9f14799\",\n              \"name\": \"prompt\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"false\",\n              \"id\": \"5dd6352d90df45959af53803fb02bdaf\",\n              \"name\": \"allow_user_to_skip\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"8a2ffc0953564a87900dc8ce6cafadad\",\n              \"name\": \"max_file_count\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"0b075eb449d14a2ba92f569572c785e6\",\n              \"name\": \"max_file_size\",\n              \"hint\": \"Max file size in MB (accept only integer value)\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"Please try uploading again.\",\n              \"id\": \"6278561a1c3644b58a3d1aed68d2a7e0\",\n              \"name\": \"try_again_message\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"313f21dfba794ed49882efdd2118bd8b\",\n              \"name\": \"user_confirmation_to_repload_msg\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"true\",\n              \"id\": \"ecdf0ee3f44b46b6970b03b2c235891f\",\n              \"name\": \"allow_all_file_types\",\n              \"referenced\": false\n            }\n          ],\n          \"variableIds\": [\n            \"5472efa7417d4e649cfb0995a9f14799\",\n            \"5dd6352d90df45959af53803fb02bdaf\",\n            \"8a2ffc0953564a87900dc8ce6cafadad\",\n            \"0b075eb449d14a2ba92f569572c785e6\",\n            \"6278561a1c3644b58a3d1aed68d2a7e0\",\n            \"313f21dfba794ed49882efdd2118bd8b\",\n            \"ecdf0ee3f44b46b6970b03b2c235891f\"\n          ]\n        },\n        \"ca75d6035e914bb8888781804e09c6d0\": {\n          \"id\": \"ca75d6035e914bb8888781804e09c6d0\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"files\",\n              \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return vaVars.final_list;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=6f2b209377892110ea3707c77b5a99be%5Ecalling_cs_topic_idIN619b289377892110ea3707c77b5a996b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            }\n          ]\n        },\n        \"7c62fb66347f480cbc5f949fe0136078\": {\n          \"id\": \"7c62fb66347f480cbc5f949fe0136078\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"files\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaInputs.prompt}}\",\n                      \"displayValue\": \"Input VariablesPrompt\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.allow_user_to_skip.getValue();\\n})()\\n\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"b9cd5e5164004a318469d2557ba9b2ae\"\n        },\n        \"5fbf237d20454ac4a96ec045b81c4c74\": {\n          \"id\": \"5fbf237d20454ac4a96ec045b81c4c74\",\n          \"name\": \"set variables\",\n          \"script\": \"(function execute() {\\n    vaVars.global_file_upload_count_limit = vaInputs.max_file_count.getValue();\\n    vaVars.global_file_upload_size_limit = vaInputs.max_file_size.getValue();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"263f2c5b888a415db1e54e17a2767b2d\": {\n          \"id\": \"263f2c5b888a415db1e54e17a2767b2d\",\n          \"name\": \"Filter Attachments\",\n          \"script\": \"(function execute() {\\n    var uploaded_list = [];\\n    var uploadFailed_list = [];\\n    var fileControl = vaInputs.allow_all_file_types.getValue() ? vaInputs.files : vaInputs.files_image_only;\\n    var successStatus = [\\\"available\\\", null]; // null state when scan is disabled\\n    for(var index=0; index<fileControl.getFiles().length; index++) {\\n        var file = fileControl.getFiles()[index];\\n        var attachment = {\\n            \\\"contentType\\\": file.contentType,\\n            \\\"fileName\\\": file.fileName, \\n            \\\"value\\\": file.value,\\n            \\\"message\\\" : file.message,\\n            \\\"contentType\\\" : file.contentType,\\n            \\\"scanState\\\" : file.scanState,\\n            \\\"fileSize\\\" : file.fileSize\\n        };\\n        if (successStatus.indexOf(file.scanState) != -1) {\\n            uploaded_list.push(attachment);\\n        } else {\\n           uploadFailed_list.push(attachment);\\n        }\\n    }\\n\\n    vaVars.final_list = JSON.stringify(uploaded_list);\\n    vaVars.failed_list = JSON.stringify(uploadFailed_list);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"eb8de8637597492d9b7355684702f871\": {\n          \"id\": \"eb8de8637597492d9b7355684702f871\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"a5554936e8c148ae8b0370a369fdff00\": {\n          \"id\": \"a5554936e8c148ae8b0370a369fdff00\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"Reupload attachment\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaInputs.try_again_message}}\",\n                      \"displayValue\": \"Input VariablesTry_again_message\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return true;\\n})()\\n\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"9cddbc2c9d4c48769cd8816e1e27bec6\"\n        },\n        \"10fa1ef93ad74dfcbb330321b89052e8\": {\n          \"id\": \"10fa1ef93ad74dfcbb330321b89052e8\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Upload failed for message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var message = gs.getProperty(\\\"com.glide.cs.general.multi_file_upload_failed_for_msg\\\");\\n    return message;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8e053c58fcb345a7ae1062b969683023\": {\n          \"id\": \"8e053c58fcb345a7ae1062b969683023\",\n          \"name\": \"Save reuploaded attachments\",\n          \"script\": \"(function execute() {\\n    vaVars.failed_list = \\\"\\\";\\n    var uploaded_list = JSON.parse(vaVars.final_list);\\n    var uploadFailed_list = [];\\n    var fileControl = vaInputs.allow_all_file_types.getValue() ? vaInputs.reupload_attachment : vaInputs.reupload_attachment_image_only;\\n    var successStatus = [\\\"available\\\", null]; // null state when scan is disabled\\n    for(var index=0; index<fileControl.getFiles().length; index++) {\\n        var file = fileControl.getFiles()[index];\\n        var attachment = {\\n            \\\"contentType\\\": file.contentType,\\n            \\\"fileName\\\": file.fileName, \\n            \\\"value\\\": file.value,\\n            \\\"message\\\" : file.message,\\n            \\\"contentType\\\" : file.contentType,\\n            \\\"scanState\\\" : file.scanState,\\n            \\\"fileSize\\\" : file.fileSize\\n        };\\n        gs.info(\\\"test file: \\\"+ JSON.stringify(attachment));\\n        if (successStatus.indexOf(file.scanState) != -1) {\\n            uploaded_list.push(attachment);\\n        } else {\\n           uploadFailed_list.push(attachment);\\n        }\\n    }\\n    vaVars.failed_message_count = 0;\\n    vaVars.final_list = JSON.stringify(uploaded_list);\\n    vaVars.failed_list = JSON.stringify(uploadFailed_list);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"12ea619f21f3427aa960e360d3440a67\": {\n          \"id\": \"12ea619f21f3427aa960e360d3440a67\",\n          \"stepType\": \"Decision\",\n          \"name\": \"reupload skipped\"\n        },\n        \"218b60ce2f744f01a798076ff4a9495e\": {\n          \"id\": \"218b60ce2f744f01a798076ff4a9495e\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Failed message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var failed = JSON.parse(vaVars.failed_list);\\n    var message = failed[vaVars.failed_message_count -1 ].message;\\n    return message;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"84c8921a6c60414aa1f0e4d8106f2be9\": {\n          \"id\": \"84c8921a6c60414aa1f0e4d8106f2be9\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Attachment upload failed message\"\n        },\n        \"6684bd1e2dac46cd87cf95d1b6be7d54\": {\n          \"id\": \"6684bd1e2dac46cd87cf95d1b6be7d54\",\n          \"name\": \"increase counter\",\n          \"script\": \"(function execute() {\\n   var temp = vaVars.failed_message_count +1;\\n    vaVars.failed_message_count = temp;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f13130227e834abdaf13baabc2aaf80e\": {\n          \"id\": \"f13130227e834abdaf13baabc2aaf80e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Skip\"\n        },\n        \"ac266968a1da4355ab51e032af1dd212\": {\n          \"id\": \"ac266968a1da4355ab51e032af1dd212\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"0cbc2fb456d340d98c017bae3a73ad6a\": {\n          \"id\": \"0cbc2fb456d340d98c017bae3a73ad6a\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"ask to reupload\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaInputs.user_confirmation_to_repload_msg}}\",\n                      \"displayValue\": \"Input VariablesUser_confirmation_to_repload_msg\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"8994c0dbfc374eabba184624877fb08f\",\n          \"routes\": {}\n        },\n        \"495cb6a069084c2399d41ec77bb5c1a5\": {\n          \"id\": \"495cb6a069084c2399d41ec77bb5c1a5\",\n          \"stepType\": \"Decision\",\n          \"name\": \"User wants to reupload\"\n        },\n        \"3cb4aded10774e3c8c54641a912e364b\": {\n          \"id\": \"3cb4aded10774e3c8c54641a912e364b\",\n          \"stepType\": \"Decision\",\n          \"name\": \"FileType\"\n        },\n        \"d88b3276ce7b4021977abe66f40962c7\": {\n          \"id\": \"d88b3276ce7b4021977abe66f40962c7\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"files image only\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaInputs.prompt}}\",\n                      \"displayValue\": \"Input VariablesPrompt\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.allow_user_to_skip.getValue();\\n})()\\n\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"95c2b5da639f4cfc8972689839ba9a06\"\n        },\n        \"fb61efca7e0f4c28af45d57672f4275a\": {\n          \"id\": \"fb61efca7e0f4c28af45d57672f4275a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"FileType\"\n        },\n        \"c7c1c5db53c04526929a47c35d1c4636\": {\n          \"id\": \"c7c1c5db53c04526929a47c35d1c4636\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"Reupload attachment image only\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaInputs.try_again_message}}\",\n                      \"displayValue\": \"Input VariablesTry_again_message\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return true;\\n})()\\n\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"40ae209357e743759b89cac258fe041d\"\n        },\n        \"00357471349046e281d539dab0a1c655\": {\n          \"id\": \"00357471349046e281d539dab0a1c655\",\n          \"name\": \"Set Context variables\",\n          \"script\": \"(function execute() {\\n    vaVars.global_file_upload_count_limit = '0';\\n    vaVars.global_file_upload_size_limit = '0';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"e467032358f84321b054d3a6d895a248\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a5554936e8c148ae8b0370a369fdff00\",\n          \"target\": \"12ea619f21f3427aa960e360d3440a67\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8edcb408bf434882983758a0ae3bc828\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eb8de8637597492d9b7355684702f871\",\n          \"target\": \"10fa1ef93ad74dfcbb330321b89052e8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var applies =  JSON.parse(vaVars.failed_list).length > 0\\n    return applies;\\n})()\\n\"\n          },\n          \"label\": \"Some Attachment Download failed\"\n        },\n        {\n          \"id\": \"7b1acafc0a3a4ef780b6177daaeb68c9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7c62fb66347f480cbc5f949fe0136078\",\n          \"target\": \"f13130227e834abdaf13baabc2aaf80e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0856371d1ef64d15826ba1c9a3a7962b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eb8de8637597492d9b7355684702f871\",\n          \"target\": \"00357471349046e281d539dab0a1c655\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var applies = JSON.parse(vaVars.failed_list).length <= 0\\n    return applies;\\n})()\\n\"\n          },\n          \"label\": \"None failed\"\n        },\n        {\n          \"id\": \"45439bd696874661a5614ff07a7b8d8d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b7d00116b42449afb4929effec6d6afc\",\n          \"target\": \"5fbf237d20454ac4a96ec045b81c4c74\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"34da5a0a35fc4bae8b062cee23917d8c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"263f2c5b888a415db1e54e17a2767b2d\",\n          \"target\": \"eb8de8637597492d9b7355684702f871\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"69c23804e82f48c5928608a532f27706\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"12ea619f21f3427aa960e360d3440a67\",\n          \"target\": \"8e053c58fcb345a7ae1062b969683023\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.reupload_attachmentISNOTEMPTY^ORvaInputs.reupload_attachment_image_onlyISNOTEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"NO\"\n        },\n        {\n          \"id\": \"381f97e3a5e44adf8fdb5a385450d861\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"12ea619f21f3427aa960e360d3440a67\",\n          \"target\": \"00357471349046e281d539dab0a1c655\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.reupload_attachmentISEMPTY^vaInputs.reupload_attachment_image_onlyISEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"48441724d2ea442db9c488aaf16855b0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"218b60ce2f744f01a798076ff4a9495e\",\n          \"target\": \"84c8921a6c60414aa1f0e4d8106f2be9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9ad1dcb5729049a582c9b2c603a53acf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"84c8921a6c60414aa1f0e4d8106f2be9\",\n          \"target\": \"6684bd1e2dac46cd87cf95d1b6be7d54\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var failed = JSON.parse(vaVars.failed_list);\\n    var failed_list_length = failed.length;\\n    if (vaVars.failed_message_count >= failed_list_length)\\n       return false;\\n    else \\n       return true;\\n})()\\n\"\n          },\n          \"label\": \"Send more message\"\n        },\n        {\n          \"id\": \"26d5a7dbc4f847a2a348dc4a6aa6652e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"10fa1ef93ad74dfcbb330321b89052e8\",\n          \"target\": \"6684bd1e2dac46cd87cf95d1b6be7d54\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6bd34bf0356d43a4926baad40a8166ac\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6684bd1e2dac46cd87cf95d1b6be7d54\",\n          \"target\": \"218b60ce2f744f01a798076ff4a9495e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f6e3a1b55f0f498bbb911ef181793313\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f13130227e834abdaf13baabc2aaf80e\",\n          \"target\": \"263f2c5b888a415db1e54e17a2767b2d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.filesISNOTEMPTY^ORvaInputs.files_image_onlyISNOTEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"ad24d0b9eb6f430383314b079c4e59a6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8e053c58fcb345a7ae1062b969683023\",\n          \"target\": \"ac266968a1da4355ab51e032af1dd212\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"af95c2f1b846483c967e2c77edf7a736\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ac266968a1da4355ab51e032af1dd212\",\n          \"target\": \"10fa1ef93ad74dfcbb330321b89052e8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var failedListSize = JSON.parse(vaVars.failed_list).length;\\n    if (failedListSize <= 0)\\n       return false;\\n    else \\n       return true;\\n})()\\n\"\n          },\n          \"label\": \"Some failed\"\n        },\n        {\n          \"id\": \"2d17eaf01b2f4942b9dc69341e62a505\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ac266968a1da4355ab51e032af1dd212\",\n          \"target\": \"00357471349046e281d539dab0a1c655\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var failedListSize = JSON.parse(vaVars.failed_list).length;\\n    if (failedListSize <= 0)\\n       return true;\\n    else\\n       return false\\n})()\\n\"\n          },\n          \"label\": \"All Success\"\n        },\n        {\n          \"id\": \"d2ec2977c8604a319ee5169d14af0d45\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"84c8921a6c60414aa1f0e4d8106f2be9\",\n          \"target\": \"0cbc2fb456d340d98c017bae3a73ad6a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var failed = JSON.parse(vaVars.failed_list);\\n    var failed_list_length = failed.length;\\n    if(vaVars.failed_message_count >= failed_list_length)\\n    return true;\\n    else \\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"No More message\"\n        },\n        {\n          \"id\": \"28efac18c92d4a798a2bd539cecde168\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0cbc2fb456d340d98c017bae3a73ad6a\",\n          \"target\": \"495cb6a069084c2399d41ec77bb5c1a5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f8081444c502452bbf4ab620b3226db1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"495cb6a069084c2399d41ec77bb5c1a5\",\n          \"target\": \"00357471349046e281d539dab0a1c655\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.ask_to_reupload=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"341b1ef836284e3283c63d52e9edc925\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5fbf237d20454ac4a96ec045b81c4c74\",\n          \"target\": \"3cb4aded10774e3c8c54641a912e364b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"53335eb6049d4f16b041ba6ad8837229\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3cb4aded10774e3c8c54641a912e364b\",\n          \"target\": \"7c62fb66347f480cbc5f949fe0136078\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.allow_all_file_types=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Allow all types\"\n        },\n        {\n          \"id\": \"ae67db77d1a24ba8927b45d8cde81e62\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3cb4aded10774e3c8c54641a912e364b\",\n          \"target\": \"d88b3276ce7b4021977abe66f40962c7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.allow_all_file_types=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Allow image only\"\n        },\n        {\n          \"id\": \"47a1f6b8409b484699170ffe1faa5ccf\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d88b3276ce7b4021977abe66f40962c7\",\n          \"target\": \"f13130227e834abdaf13baabc2aaf80e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e5a972b333cd404dbe497a647cd9dd07\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"495cb6a069084c2399d41ec77bb5c1a5\",\n          \"target\": \"fb61efca7e0f4c28af45d57672f4275a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.ask_to_reupload=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"8ab81b9a167049a3831f7268a472d083\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fb61efca7e0f4c28af45d57672f4275a\",\n          \"target\": \"a5554936e8c148ae8b0370a369fdff00\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.allow_all_file_types=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Allow all types\"\n        },\n        {\n          \"id\": \"8c8c1ec1d0ee490484326e325f4d807e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fb61efca7e0f4c28af45d57672f4275a\",\n          \"target\": \"c7c1c5db53c04526929a47c35d1c4636\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.allow_all_file_types=false\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Allow Image only\"\n        },\n        {\n          \"id\": \"fcfb5ce0a5214eba96985469465bc2d4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c7c1c5db53c04526929a47c35d1c4636\",\n          \"target\": \"12ea619f21f3427aa960e360d3440a67\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"61abde98750c483cb0b57c57f072dc40\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f13130227e834abdaf13baabc2aaf80e\",\n          \"target\": \"00357471349046e281d539dab0a1c655\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.filesISEMPTY^vaInputs.files_image_onlyISEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"4a5f83e962224e15bea1af9006194b81\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"00357471349046e281d539dab0a1c655\",\n          \"target\": \"ca75d6035e914bb8888781804e09c6d0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"b9cd5e5164004a318469d2557ba9b2ae\": {\n      \"id\": \"b9cd5e5164004a318469d2557ba9b2ae\",\n      \"name\": \"files\",\n      \"label\": \"Files\",\n      \"varType\": \"file\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"7c62fb66347f480cbc5f949fe0136078\",\n      \"isHidden\": false\n    },\n    \"5472efa7417d4e649cfb0995a9f14799\": {\n      \"id\": \"5472efa7417d4e649cfb0995a9f14799\",\n      \"name\": \"prompt\",\n      \"label\": \"Prompt\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"5dd6352d90df45959af53803fb02bdaf\": {\n      \"id\": \"5dd6352d90df45959af53803fb02bdaf\",\n      \"name\": \"allow_user_to_skip\",\n      \"label\": \"Allow_user_to_skip\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"8a2ffc0953564a87900dc8ce6cafadad\": {\n      \"id\": \"8a2ffc0953564a87900dc8ce6cafadad\",\n      \"name\": \"max_file_count\",\n      \"label\": \"Max_file_count\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"0b075eb449d14a2ba92f569572c785e6\": {\n      \"id\": \"0b075eb449d14a2ba92f569572c785e6\",\n      \"name\": \"max_file_size\",\n      \"label\": \"Max_file_size\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"16c1f07c62044b60904e436ec37e6f7d\": {\n      \"id\": \"16c1f07c62044b60904e436ec37e6f7d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"max_file_count\",\n      \"label\": \"max_file_count\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fa0efe7917f6404396f10e40dabe631a\": {\n      \"id\": \"fa0efe7917f6404396f10e40dabe631a\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"max_file_size\",\n      \"label\": \"max_file_size\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c1add054385747b8b817334711afb3ee\": {\n      \"id\": \"c1add054385747b8b817334711afb3ee\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"1\"\n      },\n      \"name\": \"max_retry_count\",\n      \"label\": \"max_retry_count\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d486be030e70474994df141a375bef7d\": {\n      \"id\": \"d486be030e70474994df141a375bef7d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"final_list\",\n      \"label\": \"final_list\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fc38540b2de340709d1f716c23e0b5fe\": {\n      \"id\": \"fc38540b2de340709d1f716c23e0b5fe\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"failed_list\",\n      \"label\": \"failed_list\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9cddbc2c9d4c48769cd8816e1e27bec6\": {\n      \"id\": \"9cddbc2c9d4c48769cd8816e1e27bec6\",\n      \"name\": \"reupload_attachment\",\n      \"label\": \"Reupload Attachment\",\n      \"varType\": \"file\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"a5554936e8c148ae8b0370a369fdff00\",\n      \"isHidden\": false\n    },\n    \"a81c70c0743a4f1096cfa40bcfda9b4a\": {\n      \"id\": \"a81c70c0743a4f1096cfa40bcfda9b4a\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"retry_attempts_left\",\n      \"label\": \"retry_attempts_left\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6278561a1c3644b58a3d1aed68d2a7e0\": {\n      \"id\": \"6278561a1c3644b58a3d1aed68d2a7e0\",\n      \"name\": \"try_again_message\",\n      \"label\": \"Try_again_message\",\n      \"defaultValue\": \"Please try uploading again.\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"7870c050634f456eaae0660b7f9a4c81\": {\n      \"id\": \"7870c050634f456eaae0660b7f9a4c81\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"failed_message_count\",\n      \"label\": \"failed_message_count\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"8994c0dbfc374eabba184624877fb08f\": {\n      \"id\": \"8994c0dbfc374eabba184624877fb08f\",\n      \"name\": \"ask_to_reupload\",\n      \"label\": \"Ask To Reupload\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"0cbc2fb456d340d98c017bae3a73ad6a\",\n      \"isHidden\": false\n    },\n    \"313f21dfba794ed49882efdd2118bd8b\": {\n      \"id\": \"313f21dfba794ed49882efdd2118bd8b\",\n      \"name\": \"user_confirmation_to_repload_msg\",\n      \"label\": \"User_confirmation_to_repload_msg\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"ecdf0ee3f44b46b6970b03b2c235891f\": {\n      \"id\": \"ecdf0ee3f44b46b6970b03b2c235891f\",\n      \"name\": \"allow_all_file_types\",\n      \"label\": \"Allow_all_file_types\",\n      \"defaultValue\": \"true\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"95c2b5da639f4cfc8972689839ba9a06\": {\n      \"id\": \"95c2b5da639f4cfc8972689839ba9a06\",\n      \"name\": \"files_image_only\",\n      \"label\": \"Files Image Only\",\n      \"varType\": \"image\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"d88b3276ce7b4021977abe66f40962c7\",\n      \"isHidden\": false\n    },\n    \"40ae209357e743759b89cac258fe041d\": {\n      \"id\": \"40ae209357e743759b89cac258fe041d\",\n      \"name\": \"reupload_attachment_image_only\",\n      \"label\": \"Reupload Attachment Image Only\",\n      \"varType\": \"image\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"c7c1c5db53c04526929a47c35d1c4636\",\n      \"isHidden\": false\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_topic_f1103e2577812110ea3707c77b5a99a2","channels":"","source_topic_id":"","expose_on_palette":"true","name":"Multi File Upload","applicability":"","category":"","sys_policy":""},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"","context_profiles":"","sys_updated_on":"2024-03-21 19:13:03","title":"","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"f13e489577300210c5c6b2a07b5a9958","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2024-03-06 09:29:18","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Request Catalog Item Inline-seismic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"nlu_keyword","sys_mod_count":"7","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.55\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"0174cd70a9a64f0eaea26ba432df7540\": {\n          \"id\": \"0174cd70a9a64f0eaea26ba432df7540\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"489106b08417420590d4a0012f53196f\",\n              \"name\": \"catalogItemId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"64a44858b66a4e07a59b19494a08d62f\",\n              \"name\": \"requestedForId\",\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"489106b08417420590d4a0012f53196f\",\n            \"64a44858b66a4e07a59b19494a08d62f\"\n          ]\n        },\n        \"028a1455afea4405b41a10b6b72ed5a6\": {\n          \"id\": \"028a1455afea4405b41a10b6b72ed5a6\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"record_id\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.record_id}}\",\n                        \"displayValue\": \"Script Variablesrecord_id\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            },\n            {\n              \"key\": \"record_table\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.record_table}}\",\n                        \"displayValue\": \"Script Variablesrecord_table\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            },\n            {\n              \"key\": \"message\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.message}}\",\n                        \"displayValue\": \"Script Variablesmessage\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            },\n            {\n              \"key\": \"status\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.status}}\",\n                        \"displayValue\": \"Script Variablesstatus\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            }\n          ]\n        },\n        \"235695e48fe84609b5f139f247073ad5\": {\n          \"id\": \"235695e48fe84609b5f139f247073ad5\",\n          \"stepType\": \"CustomControl\",\n          \"name\": \"Catalog Item VA Input Control\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"Catalog Item VA Input Control\",\n          \"reusableTopicId\": \"59bf3f3c77700210c5c6b2a07b5a994f\",\n          \"inputs\": {\n            \"sysid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.catalogitemid}}\",\n                        \"displayValue\": \"Input VariablesCatalogItemId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"requestedfor\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.requestedforid}}\",\n                        \"displayValue\": \"Input VariablesRequestedForId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"forceclosecontrol\": {\n              \"value\": \"false\",\n              \"mode\": \"string\",\n              \"type\": \"True/False\"\n            },\n            \"outputvalue\": {\n              \"value\": \"\",\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"c5ad19d1d46a463f8d0e1af1807f6f2b\",\n              \"value\": \"responsefromcomponent\",\n              \"mapping\": \"responsefromcomponent\",\n              \"preventDisable\": true\n            }\n          ],\n          \"variableIds\": [\n            \"c5ad19d1d46a463f8d0e1af1807f6f2b\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false\n        },\n        \"101d91e78ab74c9b85d37e106dd6c634\": {\n          \"id\": \"101d91e78ab74c9b85d37e106dd6c634\",\n          \"name\": \"Compute output variables\",\n          \"script\": \"(function execute() {\\n    var output = {};\\n    if (!gs.nil(vaInputs.responsefromcomponent))\\n        output = JSON.parse(vaInputs.responsefromcomponent.getValue());\\n    vaVars.record_id = output.requestId ? output.requestId : \\\"\\\";\\n    vaVars.record_table = output.requestTable ? output.requestTable : \\\"\\\";\\n    vaVars.status = output.status ? output.status : \\\"\\\";\\n    vaVars.message = output.message ? output.message : \\\"\\\";\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"479f48e98b9e44a6bb13b7a3da55fc67\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0174cd70a9a64f0eaea26ba432df7540\",\n          \"target\": \"235695e48fe84609b5f139f247073ad5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"33ce177555f141bb92d2c1bdb27440cc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"235695e48fe84609b5f139f247073ad5\",\n          \"target\": \"101d91e78ab74c9b85d37e106dd6c634\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dbc15153a86b4ace99b9a3396275e121\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"101d91e78ab74c9b85d37e106dd6c634\",\n          \"target\": \"028a1455afea4405b41a10b6b72ed5a6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"489106b08417420590d4a0012f53196f\": {\n      \"id\": \"489106b08417420590d4a0012f53196f\",\n      \"name\": \"catalogitemid\",\n      \"label\": \"CatalogItemId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"0174cd70a9a64f0eaea26ba432df7540\",\n      \"isHidden\": false\n    },\n    \"64a44858b66a4e07a59b19494a08d62f\": {\n      \"id\": \"64a44858b66a4e07a59b19494a08d62f\",\n      \"name\": \"requestedforid\",\n      \"label\": \"RequestedForId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"0174cd70a9a64f0eaea26ba432df7540\",\n      \"isHidden\": false\n    },\n    \"1dd655022e5a4871902459945e49895f\": {\n      \"id\": \"1dd655022e5a4871902459945e49895f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"record_id\",\n      \"label\": \"record_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6112bfd2bcb94f61939c3d34f8c87aad\": {\n      \"id\": \"6112bfd2bcb94f61939c3d34f8c87aad\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"record_table\",\n      \"label\": \"record_table\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f4dc52c05e42451a8ff2d31d253307fd\": {\n      \"id\": \"f4dc52c05e42451a8ff2d31d253307fd\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"status\",\n      \"label\": \"status\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5ba9424d6b9641df9c114921e879c366\": {\n      \"id\": \"5ba9424d6b9641df9c114921e879c366\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"message\",\n      \"label\": \"message\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c5ad19d1d46a463f8d0e1af1807f6f2b\": {\n      \"id\": \"c5ad19d1d46a463f8d0e1af1807f6f2b\",\n      \"name\": \"responsefromcomponent\",\n      \"label\": \"Responsefromcomponent\",\n      \"defaultValue\": \"responsefromcomponent\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"235695e48fe84609b5f139f247073ad5\",\n      \"isHidden\": false\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3028ab3304f12210559073c06a02f7b7","value":"3028ab3304f12210559073c06a02f7b7"},"sys_update_name":"sys_cb_topic_f13e489577300210c5c6b2a07b5a9958","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Request Catalog Item Inline-seismic","applicability":"","category":"","sys_policy":""},{"autopilot_topic":"false","palette_label":"","connect_queue":"","modify_confirmation_enabled":"false","flexible_conversation_switching":"true","roles":"","description":"Perform asynchronous AI Search","context_profiles":"","sys_updated_on":"2024-11-06 18:45:29","title":"Run AI Search","type":"TOPIC_BLOCK","root_topic_id":"","sys_class_name":"sys_cb_topic","applicability_mode":"query","nlu_model":"","sys_id":"f9e444ee53113010af71ddeeff7b1223","library":"true","nlu_provider":"","sys_updated_by":"admin","dialog_acts_enabled":"false","sys_created_on":"2021-07-14 21:36:38","foundational":"false","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"triggerable_by_notification":"false","nlu_model_label":"","sys_name":"Run AI Search","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"nlu_intent":"","sys_created_by":"admin","live_agent":"false","key_phrases":"","model_type":"nlu_keyword","sys_mod_count":"70","nlu_intent_label":"","sys_tags":"","graph":"{\n  \"graph_api_version\": \"1.0.73\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"50e01c07df09448a8c8f3658dc0b6e05\": {\n          \"id\": \"50e01c07df09448a8c8f3658dc0b6e05\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"0d61e2e97d3d46ff901d0293ad33cfcd\",\n              \"name\": \"Search Term\",\n              \"referenced\": true,\n              \"required\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"Reference\",\n              \"value\": \"\",\n              \"id\": \"44b6a5502ea948da89d8a01bb7bfa2ba\",\n              \"name\": \"Search Application Configuration\",\n              \"table\": \"sys_search_context_config\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"hint\": \"(Optional) Use a custom Search Application Configuration\",\n              \"query\": \"\"\n            }\n          ],\n          \"variableIds\": [\n            \"0d61e2e97d3d46ff901d0293ad33cfcd\",\n            \"44b6a5502ea948da89d8a01bb7bfa2ba\"\n          ]\n        },\n        \"4ccbe1bad0854bcebee83db3aef492fe\": {\n          \"id\": \"4ccbe1bad0854bcebee83db3aef492fe\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"Genius_Results\",\n              \"value\": \"(function execute() {\\n    var geniusResultsJSON = JSON.parse(vaVars.geniusResults);\\n    return global.VAAISearchHelperUtah.resizeResultIfRequired(geniusResultsJSON, 'Search metadata', vaVars);\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=d74748a253513010af71ddeeff7b128e%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b,8c2348c0eb1f2110d8652add0852288c\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"Search_Results\",\n              \"value\": \"(function execute() {\\n    var searchResultsJSON = JSON.parse(vaVars.searchResults);\\n    return global.VAAISearchHelperUtah.resizeResultIfRequired(searchResultsJSON, 'Search result', vaVars);\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=d74748a253513010af71ddeeff7b128e%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b,8c2348c0eb1f2110d8652add0852288c\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"Search_Metadata\",\n              \"value\": \"(function execute() {\\n    var searchMetadataJSON = JSON.parse(vaVars.searchMetadata);\\n    return global.VAAISearchHelperUtah.resizeResultIfRequired(searchMetadataJSON, 'Search metadata', vaVars);\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=d74748a253513010af71ddeeff7b128e%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b,8c2348c0eb1f2110d8652add0852288c\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"Errors\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.errors}}\",\n                        \"displayValue\": \"Script Variableserrors\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=d74748a253513010af71ddeeff7b128e%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b,8c2348c0eb1f2110d8652add0852288c\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            }\n          ]\n        },\n        \"298ddf999e3d4fb68803b2f7818e0aee\": {\n          \"id\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n          \"name\": \"Run AI Search\",\n          \"invocationType\": \"action\",\n          \"stepType\": \"FlowAction\",\n          \"actionSpoke\": \"global\",\n          \"actionSpokeAction\": \"2eaf23715b621010a76b04d13d81c7b5\",\n          \"actionWaitType\": \"sync\",\n          \"actionRunAs\": \"session_user\",\n          \"actionSecureField\": false,\n          \"actionSelectSecureField\": \"\",\n          \"actionPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionConfirmPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionNonSecureChannelMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionInputs\": {\n            \"input-search_term\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.search_term}}\",\n                        \"displayValue\": \"Input VariablesSearch Term\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\"\n            },\n            \"input-context_profile_id\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getContextProfileId();\\n})()\",\n              \"mode\": \"script\"\n            },\n            \"input-search_context_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.search_application_configuration}}\",\n                        \"displayValue\": \"Input VariablesSearch Application Configuration\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\"\n            },\n            \"input-logging_context\": {\n              \"value\": \"(function execute() {\\n    return vaVars.loggingContext;\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-locale\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getRequesterLocale();\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-start_time\": {\n              \"value\": \"(function execute() {\\n    return vaVars.startTime;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          },\n          \"actionOutputs\": {\n            \"output-search_result\": [\n              {\n                \"id\": \"ccc36200f97a4b4d9b4289d0f08ee80d\",\n                \"mapping\": \"Search Result\",\n                \"value\": \"Search Result\",\n                \"disabled\": false,\n                \"type\": \"json\",\n                \"variable\": \"Search Result\",\n                \"variableName\": \"search_result\"\n              }\n            ],\n            \"output-__action_status__\": [\n              {\n                \"id\": \"66d492e860f441879fb5e4dfc3dd89b4\",\n                \"mapping\": \"Action Status\",\n                \"value\": \"Action Status\",\n                \"disabled\": false,\n                \"type\": \"object\",\n                \"variable\": \"Action Status\",\n                \"variableName\": \"action_status\"\n              }\n            ],\n            \"output-__dont_treat_as_error__\": [\n              {\n                \"id\": \"3848418504444de7a546d0ed1cb9df9c\",\n                \"mapping\": \"Don't Treat as Error\",\n                \"value\": \"Don't Treat as Error\",\n                \"disabled\": false,\n                \"type\": \"boolean\",\n                \"variable\": \"Don't Treat As Error\",\n                \"variableName\": \"don_t_treat_as_error\"\n              }\n            ],\n            \"output-end_time\": [\n              {\n                \"id\": \"7faeb1107c4b4312b4aee8544fa8b4ee\",\n                \"mapping\": \"End time\",\n                \"value\": \"End time\",\n                \"disabled\": false,\n                \"type\": \"string\",\n                \"variable\": \"End Time\",\n                \"variableName\": \"end_time\"\n              }\n            ]\n          },\n          \"actionDefinition\": {\n            \"id\": \"2eaf23715b621010a76b04d13d81c7b5\",\n            \"latest_snapshot_id\": \"2eaf23715b621010a76b04d13d81c7b5\",\n            \"parent_id\": \"c93fa3795b221010a76b04d13d81c767\",\n            \"type\": \"action\",\n            \"name\": \"atlas_search\",\n            \"label\": \"AI Search\",\n            \"scope_id\": \"global\",\n            \"description\": \"Perform asynchronous AI Search\",\n            \"category\": \"\",\n            \"parameters_have_loaded\": true,\n            \"input_parameters\": [\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_term\",\n                \"label\": \"search_term\",\n                \"type\": \"string\",\n                \"order\": 1,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"context_profile_id\",\n                \"label\": \"context_profile_id\",\n                \"type\": \"string\",\n                \"order\": 2,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_context_id\",\n                \"label\": \"search_context_id\",\n                \"type\": \"string\",\n                \"order\": 3,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"logging_context\",\n                \"label\": \"logging_context\",\n                \"type\": \"string\",\n                \"order\": 4,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"locale\",\n                \"label\": \"locale\",\n                \"type\": \"string\",\n                \"order\": 5,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"start_time\",\n                \"label\": \"start_time\",\n                \"type\": \"string\",\n                \"order\": 6,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"additional_context\",\n                \"label\": \"additional_context\",\n                \"type\": \"string\",\n                \"order\": 7,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"gr_config_filter\",\n                \"label\": \"gr_config_filter\",\n                \"type\": \"string\",\n                \"order\": 8,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_result_type\",\n                \"label\": \"search_result_type\",\n                \"type\": \"string\",\n                \"order\": 9,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              }\n            ],\n            \"output_parameters\": [\n              {\n                \"name\": \"search_result\",\n                \"label\": \"Search Result\",\n                \"type\": \"json\",\n                \"order\": 1,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"name\": \"__action_status__\",\n                \"label\": \"Action Status\",\n                \"type\": \"object\",\n                \"order\": 2,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"name\": \"__dont_treat_as_error__\",\n                \"label\": \"Don't Treat as Error\",\n                \"type\": \"boolean\",\n                \"order\": 3,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"name\": \"end_time\",\n                \"label\": \"End time\",\n                \"type\": \"string\",\n                \"order\": 4,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              }\n            ]\n          },\n          \"subflowSecureField\": false,\n          \"subflowSelectSecureField\": \"\",\n          \"subflowPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowConfirmPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowNonSecureChannelMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"This action is not supported on this channel.\"\n          },\n          \"variableIds\": [\n            \"ccc36200f97a4b4d9b4289d0f08ee80d\",\n            \"66d492e860f441879fb5e4dfc3dd89b4\",\n            \"3848418504444de7a546d0ed1cb9df9c\",\n            \"7faeb1107c4b4312b4aee8544fa8b4ee\"\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"permissionsNote\": \"By default, the Action executes based on the permissions of the user who initiated the conversation. For elevated privileges, you can set to System User.\"\n        },\n        \"c420857cfd1c4ed2bacf8e07bb4ad6f5\": {\n          \"id\": \"c420857cfd1c4ed2bacf8e07bb4ad6f5\",\n          \"name\": \"Process Results\",\n          \"script\": \"(function execute() {\\n    var now = new GlideDateTime().getNumericValue();\\n    var elapsedTime = now - vaVars.startTime;\\n    var returnTime = now - vaInputs.end_time;\\n    var logger = global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext);\\n    logger.debug('AI Search FDIH action time: {0}ms', elapsedTime);\\n    logger.debug('AI Search FDIH returned to VA in {0}ms', returnTime);\\n\\n    var results = JSON.stringify(global.VAAISearchHelperTokyo.filterResultsForLoggedInUser(\\n        vaInputs.search_result.toString(), vaSystem, vaVars.loggingContext));\\n\\n    var processedResults = global.VAAISearchHelperUtah.processResults(results, vaSystem, vaInputs, vaVars);\\n    vaVars.searchMetadata = processedResults.searchMetadata;\\n    vaVars.geniusResults = processedResults.geniusSearchResults;\\n    vaVars.searchResults = processedResults.searchResults;\\n    vaVars.errors = processedResults.errors;\\n    if (!gs.nil(vaVars.searchMetadata) && vaVars.searchMetadata != \\\"{}\\\")\\n        logger.debug('AI Search performed on server in {0}ms',\\n            JSON.parse(vaVars.searchMetadata).glide_signals.searchResultMetadata.responseTimeInMs);\\n\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b25c83ae549d4d3c98b39ea2a2f6fe9d\": {\n          \"id\": \"b25c83ae549d4d3c98b39ea2a2f6fe9d\",\n          \"name\": \"Collect Search Info\",\n          \"script\": \"(function execute() {\\n    vaVars.loggingContext = JSON.stringify(global.VAAISearchHelperTokyo.getLoggingContext(vaSystem));\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).debug('Starting \\\"Run AI Search\\\" topic block');\\n    vaVars.startTime = new GlideDateTime().getNumericValue();\\n    vaVars.isSearchAvailable = global.VAAISearchHelperTokyo.isSearchEnabled(vaVars.loggingContext);\\n\\n    // This script has to run before any other operations to collect correct info.\\n    // If the node runs under the platform thread, the info can be incorrect.\\n    vaVars.session_id = gs.getSessionID();\\n    vaVars.user_id = vaInputs.user.getValue();\\n    vaVars.is_logged_in = gs.getSession().isLoggedIn();\\n    vaVars.language = gs.getSession().getLanguage();\\n    //AI Search start timestamp\\n    vaVars.time = global.VAClickMetrics.getCurrentTime();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"\"\n          }\n        },\n        \"839d829b30a046b38012a5f08067acb5\": {\n          \"id\": \"839d829b30a046b38012a5f08067acb5\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Search Enabled?\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"88c212a0b051483ea589949c4d58ed90\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c420857cfd1c4ed2bacf8e07bb4ad6f5\",\n          \"target\": \"4ccbe1bad0854bcebee83db3aef492fe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"65a61f915df74f67beccab15bd79b67c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n          \"target\": \"c420857cfd1c4ed2bacf8e07bb4ad6f5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"de28ee7fd2dd4823a9d7afeba3a90bd5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"50e01c07df09448a8c8f3658dc0b6e05\",\n          \"target\": \"b25c83ae549d4d3c98b39ea2a2f6fe9d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cb06001c5dec413db5444b44a0201823\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b25c83ae549d4d3c98b39ea2a2f6fe9d\",\n          \"target\": \"839d829b30a046b38012a5f08067acb5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1c78de6a593449ff9c14159de164e9b5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"839d829b30a046b38012a5f08067acb5\",\n          \"target\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.isSearchAvailable;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"b6449ce73c4a400e8b4ff6b0ab968cc1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"839d829b30a046b38012a5f08067acb5\",\n          \"target\": \"4ccbe1bad0854bcebee83db3aef492fe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.isSearchAvailable;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"0d61e2e97d3d46ff901d0293ad33cfcd\": {\n      \"id\": \"0d61e2e97d3d46ff901d0293ad33cfcd\",\n      \"name\": \"search_term\",\n      \"label\": \"Search Term\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"50e01c07df09448a8c8f3658dc0b6e05\",\n      \"isHidden\": false\n    },\n    \"44b6a5502ea948da89d8a01bb7bfa2ba\": {\n      \"id\": \"44b6a5502ea948da89d8a01bb7bfa2ba\",\n      \"name\": \"search_application_configuration\",\n      \"label\": \"Search Application Configuration\",\n      \"defaultValue\": \"\",\n      \"varType\": \"reference\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"table\": \"sys_search_context_config\",\n      \"nodeId\": \"50e01c07df09448a8c8f3658dc0b6e05\",\n      \"isHidden\": false\n    },\n    \"5f82ed84dc1346fa92c7f0457f0fceec\": {\n      \"id\": \"5f82ed84dc1346fa92c7f0457f0fceec\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"searchMetadata\",\n      \"label\": \"searchMetadata\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fc845a894f934fbc899121a0e9b47c3d\": {\n      \"id\": \"fc845a894f934fbc899121a0e9b47c3d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"geniusResults\",\n      \"label\": \"geniusResults\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3f424190be82446c87ab56617880b907\": {\n      \"id\": \"3f424190be82446c87ab56617880b907\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"searchResults\",\n      \"label\": \"searchResults\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"2f95af87ceb64a8fb084590fe2ab2df0\": {\n      \"id\": \"2f95af87ceb64a8fb084590fe2ab2df0\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"errors\",\n      \"label\": \"errors\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"ccc36200f97a4b4d9b4289d0f08ee80d\": {\n      \"id\": \"ccc36200f97a4b4d9b4289d0f08ee80d\",\n      \"name\": \"search_result\",\n      \"label\": \"Search Result\",\n      \"defaultValue\": \"Search Result\",\n      \"varType\": \"json\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Search Result\",\n      \"variableName\": \"search_result\",\n      \"nodeId\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n      \"isHidden\": false\n    },\n    \"66d492e860f441879fb5e4dfc3dd89b4\": {\n      \"id\": \"66d492e860f441879fb5e4dfc3dd89b4\",\n      \"name\": \"action_status\",\n      \"label\": \"Action Status\",\n      \"defaultValue\": \"Action Status\",\n      \"varType\": \"object\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Action Status\",\n      \"variableName\": \"action_status\",\n      \"nodeId\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n      \"isHidden\": false\n    },\n    \"3848418504444de7a546d0ed1cb9df9c\": {\n      \"id\": \"3848418504444de7a546d0ed1cb9df9c\",\n      \"name\": \"don_t_treat_as_error\",\n      \"label\": \"Don't Treat As Error\",\n      \"defaultValue\": \"Don't Treat as Error\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Don't Treat As Error\",\n      \"variableName\": \"don_t_treat_as_error\",\n      \"nodeId\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n      \"isHidden\": false\n    },\n    \"7faeb1107c4b4312b4aee8544fa8b4ee\": {\n      \"id\": \"7faeb1107c4b4312b4aee8544fa8b4ee\",\n      \"name\": \"end_time\",\n      \"label\": \"End Time\",\n      \"defaultValue\": \"End time\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"End Time\",\n      \"variableName\": \"end_time\",\n      \"nodeId\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n      \"isHidden\": false\n    }\n  }\n}","secure_custom_input_control":"false","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_topic_f9e444ee53113010af71ddeeff7b1223","channels":"","source_topic_id":"","expose_on_palette":"false","name":"Run AI Search","applicability":"","category":"","sys_policy":"read"}]}