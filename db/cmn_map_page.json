{"result":[{"center_longitude":"-73.9865812","controls_size":"large","roles":"","sys_updated_on":"2014-11-12 23:54:56","center_address":"New York","suffix":"","type":"terrain","sys_class_name":"cmn_map_page","use_advanced_configuration":"false","sys_id":"25ca990c0a0a0bb300f63bf73d155d5b","sys_updated_by":"admin","sys_created_on":"2008-05-26 15:13:31","refresh_on_zoom":"false","sys_name":"North East locations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","type_selection":"buttons","overview":"true","show_device_location":"false","sys_mod_count":"54","sys_tags":"","script":"var gr = new GlideRecord(\"cmn_location\");\ngr.query();\nwhile (gr.next()) {\n   var item = map.addItem(gr);\n   item.latitude = gr.getValue('latitude');\n   item.longitude = gr.getValue('longitude');\n   item.dialog_title = gr.getDisplayValue();\n   item.icon_width = \"16\";\n   item.icon_height = \"16\";\n}","disable_nav_bar":"false","center_latitude":"40.7305991","filter":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7b186b3304f12210559073c06a02f733","value":"7b186b3304f12210559073c06a02f733"},"sys_update_name":"cmn_map_page_25ca990c0a0a0bb300f63bf73d155d5b","initial_zoom":"7","name":"North East locations","coordinates_retrieved_on":"","disable_map_controls":"","sys_policy":""},{"center_longitude":"-97.1530774","controls_size":"large","roles":"","sys_updated_on":"2014-11-12 23:55:26","center_address":"Tampa, Kansas","suffix":"","type":"terrain","sys_class_name":"cmn_map_page","use_advanced_configuration":"false","sys_id":"25d065220a0a0bb30098bec50254c18e","sys_updated_by":"admin","sys_created_on":"2008-05-26 15:19:51","refresh_on_zoom":"false","sys_name":"United States locations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","type_selection":"buttons","overview":"true","show_device_location":"false","sys_mod_count":"57","sys_tags":"","script":"var gr = new GlideRecord(\"cmn_location\");\ngr.query();\nwhile (gr.next()) {\n   var item = map.addItem(gr);\n   item.latitude = gr.getValue('latitude');\n   item.longitude = gr.getValue('longitude');\n   item.dialog_title = gr.getDisplayValue();\n   item.icon_width = \"16\";\n   item.icon_height = \"16\";\n}","disable_nav_bar":"false","center_latitude":"38.5472314","filter":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7b186b3304f12210559073c06a02f733","value":"7b186b3304f12210559073c06a02f733"},"sys_update_name":"cmn_map_page_25d065220a0a0bb30098bec50254c18e","initial_zoom":"5","name":"United States locations","coordinates_retrieved_on":"","disable_map_controls":"","sys_policy":""},{"center_longitude":"-23.5133267","controls_size":"large","roles":"","sys_updated_on":"2016-03-05 01:40:20","center_address":"Praia","suffix":"","type":"terrain","sys_class_name":"cmn_map_page","use_advanced_configuration":"false","sys_id":"25d405400a0a0bb3008e3cf3f9e9e8a4","sys_updated_by":"admin","sys_created_on":"2008-05-26 15:23:49","refresh_on_zoom":"false","sys_name":"Critical incidents","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","type_selection":"buttons","overview":"true","show_device_location":"false","sys_mod_count":"61","sys_tags":"","script":"var gr = new GlideRecord(\"incident\");\ngr.addQuery('priority', '1');\ngr.addActiveQuery();\ngr.query();\nwhile (gr.next()) {\n\tif(gr.location.latitude && gr.location.longitude){\n\t   var item = map.addItem(gr);\n\t   item.latitude = String(gr.location.latitude);\n\t   item.longitude = String(gr.location.longitude);\n\t   item.dialog_title = gr.getDisplayValue();\n\t   item.icon = \"https://maps.google.com/mapfiles/kml/pal3/icon51.png\";\n\t   item.icon_width = \"32\";\n\t   item.icon_height = \"32\";\n\t}\n}","disable_nav_bar":"false","center_latitude":"14.93305","filter":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7b186b3304f12210559073c06a02f733","value":"7b186b3304f12210559073c06a02f733"},"sys_update_name":"cmn_map_page_25d405400a0a0bb3008e3cf3f9e9e8a4","initial_zoom":"3","name":"Critical incidents","coordinates_retrieved_on":"","disable_map_controls":"","sys_policy":""},{"center_longitude":"-100.4458825","controls_size":"large","roles":"","sys_updated_on":"2014-11-13 00:08:56","center_address":"US","suffix":"","type":"terrain","sys_class_name":"cmn_map_page","use_advanced_configuration":"false","sys_id":"c86c5feac0a80a6600706f0102968196","sys_updated_by":"admin","sys_created_on":"2009-01-12 01:19:52","refresh_on_zoom":"false","sys_name":"Incident Counts by Location","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","type_selection":"buttons","overview":"true","show_device_location":"false","sys_mod_count":"104","sys_tags":"","script":"//get the instances url so we can link back to it\nvar uri = gs.getProperty(\"glide.servlet.uri\");\n//create an aggregate query on the incident table\nvar count = new GlideAggregate('incident');\n//set condition for active incidents\ncount.addQuery('active', 'true');\n//set aggregate field to location to get count by location\ncount.addAggregate('COUNT', 'location');\n//execute the query\ncount.query();\n\n//loop through the results\nwhile (count.next()) {\n\n   //get the current record's location\n   var loc = count.location;\n   //get the count of incidents for this location\n   var locCount = count.getAggregate('COUNT', 'location');\n   //only display location is there are active incidents\n   if (locCount > 0) {\n      //create new new map item for this location\n      var item = map.addItem(count);\n      //set lat/long from the location record\n      item.latitude = String(loc.latitude);\n      item.longitude = String(loc.longitude);   \n      \n      //create a marker label with the count\n      item.marker_label = locCount;\n      //define label offset for proper position\n      item.label_offset_left = -4;\n      item.label_offset_top = -20;\n      \n      //option to define table and record for label hyperlink\n      //setting table and sys_id will override the use of html parameter\n      //item.table = 'cmn_location';\n      //item.sys_id = loc;\n      \n      //build the link to the list of incidents for the location\n      var link = 'href=' + uri + 'incident_list.do?sysparm_query=active%3Dtrue^location%3D' + loc;\n      //build the html value to be displayed when you click the map icon\n      item.html='<a ' + link + '>' + loc.getDisplayValue() + ' (' + locCount + ')</a>';\n      \n      //link to the icon image\n      item.icon = \"images/red_marker.png\";\n      //set the size of the icon based on the number of active incidents\n      item.icon_width = 24;\n      item.icon_height = 24;\n\n   }\n}","disable_nav_bar":"false","center_latitude":"39.7837304","filter":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7b186b3304f12210559073c06a02f733","value":"7b186b3304f12210559073c06a02f733"},"sys_update_name":"cmn_map_page_c86c5feac0a80a6600706f0102968196","initial_zoom":"4","name":"Incident Counts by Location","coordinates_retrieved_on":"","disable_map_controls":"","sys_policy":""},{"center_longitude":"-23.5133267","controls_size":"large","roles":"","sys_updated_on":"2020-04-20 01:45:28","center_address":"Praia","suffix":"","type":"terrain","sys_class_name":"cmn_map_page","use_advanced_configuration":"false","sys_id":"ffee7e4ec0a8000c007a8387549d440f","sys_updated_by":"admin","sys_created_on":"2008-05-19 06:47:35","refresh_on_zoom":"false","sys_name":"All locations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","type_selection":"buttons","overview":"true","show_device_location":"false","sys_mod_count":"51","sys_tags":"","script":"var gr = new GlideRecord(\"cmn_location\");\ngr.addEncodedQuery(\"latitudeISNOTEMPTY^longitudeISNOTEMPTY\");\ngr.query();\nwhile (gr.next()) {\n   var item = map.addItem(gr);\n   item.latitude = gr.getValue('latitude');\n   item.longitude = gr.getValue('longitude');\n   item.dialog_title = gr.getDisplayValue();\n   item.icon_width = \"16\";\n   item.icon_height = \"16\";\n}","disable_nav_bar":"false","center_latitude":"14.93305","filter":"","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7b186b3304f12210559073c06a02f733","value":"7b186b3304f12210559073c06a02f733"},"sys_update_name":"cmn_map_page_ffee7e4ec0a8000c007a8387549d440f","initial_zoom":"3","name":"All locations","coordinates_retrieved_on":"","disable_map_controls":"","sys_policy":""}]}