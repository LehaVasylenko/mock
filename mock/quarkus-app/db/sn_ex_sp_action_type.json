{"result":[{"client_parameters":"phno","server_parameters":"","sys_mod_count":"5","active":"true","sys_overrides":"","sys_updated_on":"2022-03-24 14:28:12","sys_tags":"","sys_class_name":"sn_ex_sp_action_type","sys_id":"12b62064531201101865ddeeff7b1263","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1e95bac2738f001001b566b90ff6a7cd","value":"1e95bac2738f001001b566b90ff6a7cd"},"sys_update_name":"sn_ex_sp_action_type_12b62064531201101865ddeeff7b1263","sys_updated_by":"admin","reverse_execution":"false","client_script":"if(phno == 'null'){\n\tspUtil.addErrorMessage(\"Work phone is not set for this user\");\n}\nelse{\n\t$window.location.href = \"tel:\" + phno;\n}\n\n","sys_created_on":"2022-03-14 08:11:17","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Call","server_script":"","sys_name":"Call","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1e95bac2738f001001b566b90ff6a7cd","value":"1e95bac2738f001001b566b90ff6a7cd"},"sys_created_by":"admin","sys_policy":""},{"client_parameters":"action, number,isEsignatureEnabled,broadcastEventName","server_parameters":"State, sys_id","sys_mod_count":"13","active":"true","sys_overrides":"","sys_updated_on":"2024-07-04 08:22:30","sys_tags":"","sys_class_name":"sn_ex_sp_action_type","sys_id":"3ad535af772a01105f7439bd1e5a993a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4249e63a28d54d61bb6fbf61fd86cccb","value":"4249e63a28d54d61bb6fbf61fd86cccb"},"sys_update_name":"sn_ex_sp_action_type_3ad535af772a01105f7439bd1e5a993a","sys_updated_by":"admin","reverse_execution":"false","client_script":"if (isEsignatureEnabled == \"false\") {\n    $rootScope.$broadcast('todoActionEvent', null);\n    var payload = {};\n    payload.name = \"SC_APPROVER_ACTION\";\n    payload.data = {};\n    payload.data[\"isEscPortal\"] = $scope.data.portalSysId === '70cd9f3b734b13001fdae9c54cf6a72f';\n    payload.data[\"portalSuffix\"] = $scope.data.portalSuffix;\n    payload.data[\"Number\"] = number;\n    payload.data[\"Action\"] = action;\n    snAnalytics.addEvent(payload);\n}","sys_created_on":"2022-06-06 07:54:57","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update","server_script":"var infoMessage = gs.getMessage(\"You have approved this request.\");\nvar errorMessage = gs.getMessage(\"Request could not be approved try again.\");\n\nif (State == \"rejected\") {\n    infoMessage = gs.getMessage(\"You have rejected this request.\");\n    errorMessage = gs.getMessage(\"Request could not be rejected try again.\");\n}\n\nvar gr = new GlideRecord('sysapproval_approver');\ngr.addQuery('sys_id', sys_id);\ngr.query();\nif (gr.next()) {\n    gr.state = State;\n    if (gr.update() == null) {\n        gs.addErrorMessage(errorMessage);\n    } else {\n        gs.addInfoMessage(infoMessage);\n    }\n}","sys_name":"Update","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4249e63a28d54d61bb6fbf61fd86cccb","value":"4249e63a28d54d61bb6fbf61fd86cccb"},"sys_created_by":"admin","sys_policy":""},{"client_parameters":"sys_id","server_parameters":"","sys_mod_count":"2","active":"true","sys_overrides":"","sys_updated_on":"2022-09-16 14:55:01","sys_tags":"","sys_class_name":"sn_ex_sp_action_type","sys_id":"6dc7ec64531201101865ddeeff7b121c","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1e95bac2738f001001b566b90ff6a7cd","value":"1e95bac2738f001001b566b90ff6a7cd"},"sys_update_name":"sn_ex_sp_action_type_6dc7ec64531201101865ddeeff7b121c","sys_updated_by":"admin","reverse_execution":"false","client_script":"$location.search(\"id=my_org_chart&p=\"+sys_id);","sys_created_on":"2022-03-14 08:19:44","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"View Org Chart","server_script":"","sys_name":"View Org Chart","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1e95bac2738f001001b566b90ff6a7cd","value":"1e95bac2738f001001b566b90ff6a7cd"},"sys_created_by":"admin","sys_policy":""},{"client_parameters":"email","server_parameters":"","sys_mod_count":"3","active":"true","sys_overrides":"","sys_updated_on":"2022-03-24 14:29:55","sys_tags":"","sys_class_name":"sn_ex_sp_action_type","sys_id":"96f00ca4531201101865ddeeff7b125e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1e95bac2738f001001b566b90ff6a7cd","value":"1e95bac2738f001001b566b90ff6a7cd"},"sys_update_name":"sn_ex_sp_action_type_96f00ca4531201101865ddeeff7b125e","sys_updated_by":"admin","reverse_execution":"false","client_script":"if(email== \"null\")\n{\n\tspUtil.addErrorMessage(\"Email address is not set for this user.\");\n}\nelse{\n\t$window.location.href = \"mailto:\"+email;\n}\n","sys_created_on":"2022-03-14 05:26:47","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Email","server_script":"","sys_name":"Email","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1e95bac2738f001001b566b90ff6a7cd","value":"1e95bac2738f001001b566b90ff6a7cd"},"sys_created_by":"admin","sys_policy":""},{"client_parameters":"action, number,isEsignatureEnabled,broadcastEventName","server_parameters":"State, sys_id","sys_mod_count":"106","active":"true","sys_overrides":"","sys_updated_on":"2023-10-11 10:10:22","sys_tags":"","sys_class_name":"sn_ex_sp_action_type","sys_id":"bdf539af772a01105f7439bd1e5a9922","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4249e63a28d54d61bb6fbf61fd86cccb","value":"4249e63a28d54d61bb6fbf61fd86cccb"},"sys_update_name":"sn_ex_sp_action_type_bdf539af772a01105f7439bd1e5a9922","sys_updated_by":"admin","reverse_execution":"true","client_script":"var comment = \"\";\nvar title = \"${reject_request_heading}\";\nvar message = \"${Provide a reason for rejecting this request}\";\nvar primaryButtonLabel = \"${Reject}\";\nif (action === 'approve') {\n    title = \"${Approve request}\";\n    message = \"${Provide a reason for approving this request}\";\n    primaryButtonLabel = \"${Approve}\";\n}\nvar answer = spModal.open({\n    title: title,\n    label: title,\n    message: message,\n    input: true,\n    value: comment,\n    buttons: [{\n            label: \"${Cancel}\",\n            cancel: true\n        },\n        {\n            label: primaryButtonLabel,\n            primary: true\n        }\n    ]\n});\n\nanswer.then(function(confirm) {\n    if (!confirm.cancel) {\n        if (isEsignatureEnabled == \"false\") {\n            $rootScope.$broadcast(broadcastEventName, null);\n            var payload = {};\n            payload.name = \"SC_APPROVER_ACTION\";\n            payload.data = {};\n            payload.data[\"isEscPortal\"] = $scope.data.portalSysId === '70cd9f3b734b13001fdae9c54cf6a72f';\n            payload.data[\"portalSuffix\"] = $scope.data.portalSuffix;\n            payload.data[\"Number\"] = number;\n            payload.data[\"Action\"] = action;\n            snAnalytics.addEvent(payload);\n        }\n    }\n});","sys_created_on":"2022-04-05 07:56:23","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update with comments","server_script":"var infoMessage = gs.getMessage(\"You have approved this request.\");\nvar errorMessage = gs.getMessage(\"Request could not be approved try again.\");\nif(State == 'rejected'){\n    infoMessage = gs.getMessage(\"You have rejected this request.\");\n    errorMessage = gs.getMessage(\"Request could not be rejected try again.\");\n}\n\nvar gr = new GlideRecord('sysapproval_approver');\ngr.addQuery('sys_id', sys_id);\ngr.query();\nif (gr.next()) {\n    gr.state = State;\n    if (State == 'rejected') {\n        clientScriptOutput = gs.getMessage(\"Reason for rejection: {0}\", clientScriptOutput);\n    }\n\n    // if action is on sc_request then update comments in sc_req_item when a single ritm associated\n    if (gr.sysapproval && gr.sysapproval.sys_class_name == 'sc_request') {\n        var itemsCountGa = new GlideAggregate('sc_req_item');\n        itemsCountGa.addQuery('request', gr.sysapproval);\n        itemsCountGa.addAggregate('COUNT');\n        itemsCountGa.query();\n        var count = (itemsCountGa.next()) ? itemsCountGa.getAggregate('COUNT') : 0;\n        if (count == 1) {\n          updateRITMComments(gr);\n        } else {\n            gr.comments = clientScriptOutput;\n        }\n    } else if(gr.sysapproval && gr.sysapproval.sys_class_name == 'sc_req_item'){\n         updateRITMComments(gr);\n    } else {\n        gr.comments = clientScriptOutput;\n    }\n    if (gr.update() == null) {\n        gs.addErrorMessage(errorMessage);\n    } else {\n        gs.addInfoMessage(infoMessage);\n    }\n}\n\nfunction updateRITMComments(gr){\n    var itemGr = new GlideRecord('sc_req_item');\n    if(gr.sysapproval.sys_class_name == 'sc_req_item'){\n      itemGr.addQuery('sys_id', gr.sysapproval);\n    } else{\n      itemGr.addQuery('request', gr.sysapproval);\n    }\n    itemGr.query();\n    if (itemGr.next()) {\n       itemGr.comments = clientScriptOutput;\n       if (itemGr.update() == null) {\n          gs.addErrorMessage(errorMessage);\n       }\n    }\n}","sys_name":"Update with comments","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4249e63a28d54d61bb6fbf61fd86cccb","value":"4249e63a28d54d61bb6fbf61fd86cccb"},"sys_created_by":"admin","sys_policy":""}]}