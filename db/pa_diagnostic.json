{"result":[{"severity":"warning","advanced":"true","solution_description":"Remove all formula and manual indicators from collection jobs. Associate only automated indicators with collection jobs.","sys_mod_count":"6","active":"true","description":"A formula or manual indicator is associated with a collection job.","sys_updated_on":"2024-08-26 09:25:25","message":"There is at least one formula or manual indicator associated with this collection job.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar relGR = new GlideAggregate('pa_job_indicators');\n\tif (id)\n\t\trelGR.addEncodedQuery('jobIN' + id, true);\n\trelGR.addEncodedQuery('indicator.type!=1');\n\trelGR.addAggregate('COUNT');\n\trelGR.groupBy('job');\n\trelGR.query();\n\twhile (relGR.next()) {\n\t\tresult.push(relGR.job.toString());\n\t}\n\treturn result.join(',');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"120ff0239f3803008e2a9be2d57fcf2b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_120ff0239f3803008e2a9be2d57fcf2b","sys_updated_by":"admin","sys_created_on":"2017-08-31 10:35:05","name":"Collection job with formula or manual indicators","sys_name":"Collection job with formula or manual indicators","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"sysauto_pa","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"In the Interactive Filter record, scroll down to the Cascading Filter related list and click New to add a new Cascading Filter record.","sys_mod_count":"10","active":"true","description":"No mapping found for Interactive Filter Based On Cascading Filter","sys_updated_on":"2018-02-08 11:24:23","message":"An interactive filter based on Cascading Filter has no cascading filters mapped to it.","sys_tags":"","script":"function executeDiagnostic(id) {\n\treturn new PADiagnosticsUtil().checkMissingRelatedList('sys_ui_hp_publisher', 'sys_ui_hp_cascading_filter', 'publisher_reference', id, 'type=6');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"12e3b4165f11030033a1ab6f0f46665f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_12e3b4165f11030033a1ab6f0f46665f","sys_updated_by":"admin","sys_created_on":"2017-09-21 09:05:27","name":"No mapping found for Interactive Filter Based On Cascading Filter","sys_name":"No mapping found for Interactive Filter Based On Cascading Filter","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"sys_ui_hp_publisher","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Verify that this breakdown source was not automatically deactivated by a collection job where it is being used. This occurs when the breakdown source returns more rows than allowed by the system property 'com.snc.pa.dc.max_breakdowns_elements_limit'. Additionally make changes to the breakdown source if required and then (re)activate this breakdown source.","sys_mod_count":"23","active":"true","description":"An inactive breakdown source is associated with active indicators or collection jobs.","sys_updated_on":"2017-12-28 23:36:14","message":"This breakdown source is inactive but is associated with active indicators or collection jobs.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar foundInactiveBreakdownSrc = false;\n\tvar breakdownSrc = new GlideRecord('pa_dimensions');\n\tif (id)\n\t\tbreakdownSrc.addEncodedQuery('sys_idIN' + id);\n\tbreakdownSrc.addQuery('active', false);\n\tbreakdownSrc.query();\n\n\twhile (breakdownSrc.next()) {\n\t\tfoundInactiveBreakdownSrc = false;\n\t\tvar breakdown = new GlideRecord('pa_breakdowns');\n\t\tbreakdown.addQuery('dimension', breakdownSrc.sys_id.toString());\n\t\tbreakdown.query();\n\t\t\n\t\twhile (breakdown.next()) {\n\t\t\tif(foundInactiveBreakdownSrc)\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tvar indicatorBreakdown = new GlideRecord('pa_indicator_breakdowns');\n\t\t\tindicatorBreakdown.addQuery('breakdown', breakdown.sys_id.toString());\n\t\t\tindicatorBreakdown.query();\n\t\t\twhile (indicatorBreakdown.next()) {\n\t\t\t\tvar paJob = new GlideRecord('pa_job_indicators');\n\t\t\t\tpaJob.addQuery('indicator', indicatorBreakdown.indicator.toString());\n\t\t\t\tpaJob.addQuery('collect_indicator', true);\n\t\t\t\tpaJob.addActiveQuery();\n\t\t\t\tpaJob.query();\n\t\t\t\tif (paJob.next()) {\n\t\t\t\t\tresult.push(breakdownSrc.getValue('sys_id'));\n\t\t\t\t\tfoundInactiveBreakdownSrc = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"171712419f2003008e2a9be2d57fcfa7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_171712419f2003008e2a9be2d57fcfa7","sys_updated_by":"admin","sys_created_on":"2017-08-11 12:19:23","name":"Inactive breakdown source associated with active indicators or collection jobs","sys_name":"Inactive breakdown source associated with active indicators or collection jobs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_dimensions","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Associate the automated indicator with a collection job and set the Active field on the job indicator record to true.","sys_mod_count":"5","active":"true","description":"An automated indicator used by widget indicator is not associated with any active collection jobs.","sys_updated_on":"2024-08-26 09:00:57","message":"There is a no data collection job scheduled for the indicator used in this widget indicator","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar util = new PADiagnosticsUtil();\n\tvar indicatorList = [];\n\tvar widgetIndicator = new GlideAggregate('pa_widget_indicators');\n\twidgetIndicator.addEncodedQuery('indicator.type=1');\n\tif (id)\n\t\twidgetIndicator.addEncodedQuery('sys_idIN' + id, true);\n\n\twidgetIndicator.groupBy('indicator');\n\twidgetIndicator.query();\n\twhile (widgetIndicator.next()) {\n\t\tvar indicator = widgetIndicator.indicator.toString();\n\t\tif (!util.isIndicatorScheduled(indicator))\n\t\t\tindicatorList.push(indicator);\n\t}\n\t//Will get all the widget indicators that has one of \n\twidgetIndicator = new GlideRecord('pa_widget_indicators');\n\twidgetIndicator.addEncodedQuery('indicatorIN'+indicatorList.join(','));\n\tif(id)\n\t\twidgetIndicator.addQuery('sys_id', id);\n\twidgetIndicator.query();\n\twhile (widgetIndicator.next())\n\t\tresult.push(widgetIndicator.getValue('sys_id'));\n\treturn result;\n}\n \nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"193d100f3b702300b733ac20e2efc490","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_193d100f3b702300b733ac20e2efc490","sys_updated_by":"admin","sys_created_on":"2018-10-01 11:12:37","name":"Widget Indicator with an automated indicator that is no longer scheduled","sys_name":"Widget Indicator with an automated indicator that is no longer scheduled","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_widget_indicators","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the breakdown source to use a valid Facts table and Field.","sys_mod_count":"7","active":"true","description":"A breakdown source uses a Facts table or Field that does not exist.","sys_updated_on":"2017-12-28 23:33:36","message":"This breakdown source uses a Facts table or Field that does not exist.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar isGR = new GlideRecord('pa_dimensions');\n\tvar util = new PADiagnosticsUtil();\n\tif (id)\n\t\tisGR.addEncodedQuery('sys_idIN' + id);\n\tisGR.query();\n\t\n\twhile (isGR.next()) {\n\t\tvar tblGR= new GlideRecord(isGR.getValue('facts_table'));\n\t\tif(!tblGR.isValid() || !util.isValidField(isGR.getValue('facts_table'), isGR.getValue('field'))){\n\t\t\tresult.push(isGR.getValue('sys_id'));\n\t\t}\n\t}\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"1e4a4d35b30103003e5362ff86a8dc64","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_1e4a4d35b30103003e5362ff86a8dc64","sys_updated_by":"admin","sys_created_on":"2017-09-07 11:15:00","name":"Breakdown source with missing Facts table or Field","sys_name":"Breakdown source with missing Facts table or Field","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_dimensions","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the indicator source to ensure that the Facts table and Conditions are valid.","sys_mod_count":"6","active":"true","description":"A condition used in an indicator source is not valid. There are one or more invalid fields in the Conditions.","sys_updated_on":"2017-12-28 23:36:34","message":"This indicator source contains Conditions that references one or more invalid fields from the selected Facts table.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar util = new PADiagnosticsUtil();\n\t\n\tvar indicatorSrc = new GlideRecord('pa_cubes');\n\tif (id)\n\t\tindicatorSrc.addEncodedQuery('sys_idIN' + id);\n\tindicatorSrc.query();\n\twhile (indicatorSrc.next()) {\n\t\tif (!util.isValidCondition(indicatorSrc.facts_table, indicatorSrc.conditions)) {\n\t\t\tresult.push(indicatorSrc.getValue('sys_id'));\n\t\t}\n\t}\n\t\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"1ec3a24b9f0103008e2a9be2d57fcf7c","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_1ec3a24b9f0103008e2a9be2d57fcf7c","sys_updated_by":"admin","sys_created_on":"2017-09-11 14:54:00","name":"Indicator source with invalid fields in Conditions","sys_name":"Indicator source with invalid fields in Conditions","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_cubes","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Update the widget to reference a valid breakdown.","sys_mod_count":"6","active":"true","description":"A widget references a non-existent breakdown in the Breakdown or 2nd Breakdown field.","sys_updated_on":"2017-12-28 23:40:51","message":"This widget references a non-existent breakdown record in its Breakdown or 2nd Breakdown field.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar util = new PADiagnosticsUtil();\n\tvar widget = new GlideRecord('pa_widgets');\n\tif (id)\n\t\twidget.addEncodedQuery('sys_idIN' + id);\n\twidget.addEncodedQuery('breakdownISNOTEMPTY^ORbreakdown_level2ISNOTEMPTY');\n\twidget.query();\n\twhile (widget.next()) {\n\t\tif ((!util.isValidReference('pa_breakdowns', widget.getValue('breakdown'))) || (!util.isValidReference('pa_breakdowns', widget.getValue('breakdown_level2')))) {\n\t\t\tresult.push(widget.getValue('sys_id'));\n\t\t}\n\t}\n\treturn result.join(',');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"213f8df49f0103008e2a9be2d57fcf42","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_213f8df49f0103008e2a9be2d57fcf42","sys_updated_by":"admin","sys_created_on":"2017-09-04 08:58:09","name":"Widget with an invalid breakdown","sys_name":"Widget with an invalid breakdown","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_widgets","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Update the widget to reference a valid indicator.","sys_mod_count":"6","active":"true","description":"A widget references a non-existent indicator.","sys_updated_on":"2017-12-28 23:41:06","message":"This widget references a non-existent indicator.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar util = new PADiagnosticsUtil();\n\tvar widget = new GlideRecord('pa_widgets');\n\tif (id)\n\t\twidget.addEncodedQuery('sys_idIN' + id);\n\twidget.addNotNullQuery('indicator');\n\twidget.query();\n\twhile (widget.next()) {\n\t\tif (!util.isValidReference('pa_indicators', widget.getValue('indicator'))) {\n\t\t\tresult.push(widget.getValue('sys_id'));\n\t\t}\n\t}\n\treturn result.join(',');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"257cc1f49f0103008e2a9be2d57fcf6a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_257cc1f49f0103008e2a9be2d57fcf6a","sys_updated_by":"admin","sys_created_on":"2017-09-04 08:46:08","name":"Widget with an invalid indicator","sys_name":"Widget with an invalid indicator","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_widgets","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the indicator to use only supported condition operators.","sys_mod_count":"13","active":"true","description":"An indicator uses operators in its conditions that are not valid.","sys_updated_on":"2017-12-28 23:37:20","message":"This indicator uses unsupported condition operators.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar indicator = new GlideRecord('pa_indicators');\n\tif (id)\n\t\tindicator.addEncodedQuery('sys_idIN' + id);\n\tindicator.addEncodedQuery('conditionsISNOTEMPTY');\n\tindicator.query();\n\tvar util = new global.PAUtils();\n\twhile (indicator.next()) {   \n\t\tif (util.hasRestrictedOperatorsInConditions(indicator.getValue('conditions')))\n\t\t\tresult.push(indicator.getValue('sys_id'));\n\t}\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"2b7c39859f2003008e2a9be2d57fcfa0","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_2b7c39859f2003008e2a9be2d57fcfa0","sys_updated_by":"admin","sys_created_on":"2017-08-11 10:23:04","name":"Indicator with unsupported condition operators","sys_name":"Indicator with unsupported condition operators","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_indicators","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Update references, such as in widgets and formula indicators, to use only one of the duplicate automated indicators, and then delete the unused duplicate indicator.","sys_mod_count":"11","active":"true","description":"Multiple automated indicators have the same Indicator source, Conditions, Aggregate, and Field or Script values.","sys_updated_on":"2024-08-26 08:55:47","message":"This indicator has the same Indicator source, Conditions, Aggregate, and Field or Script values as another indicator.","sys_tags":"","script":"function findDuplicates(scripted, id) {\n\tvar result = [];\n\t\n\t//get the duplicate scripted and non-scripted indicators\n\tvar indicator = new GlideAggregate('pa_indicators');\n\tif (id)\n\t\tindicator.addEncodedQuery('sys_idIN' + id, true);\n\tindicator.addQuery('type', 1);\n\tindicator.addQuery('scripted', scripted);\n\tindicator.groupBy('cube');\n\tindicator.groupBy('conditions');\n\tindicator.groupBy('aggregate');\n\tif (scripted) {\n\t\tindicator.groupBy('script');\n\t} else {\n\t\tindicator.groupBy('field');\n\t}\n\tindicator.addAggregate('COUNT');\n\tindicator.query();\n\t\n\twhile (indicator.next()) {\n\t\tif (indicator.getAggregate('COUNT') > 1) {\n\t\t\tvar dupIndicator = new GlideRecord('pa_indicators');\n\t\t\tdupIndicator.addQuery('type', 1);\n\t\t\tdupIndicator.addQuery('scripted', scripted);\n\t\t\tdupIndicator.addQuery('cube', indicator.cube);\n\t\t\tdupIndicator.addQuery('conditions', indicator.conditions);\n\t\t\tdupIndicator.addQuery('aggregate', indicator.aggregate);\n\t\t\tif (scripted) {\n\t\t\t\tdupIndicator.addQuery('script', indicator.script);\n\t\t\t} else {\n\t\t\t\tdupIndicator.addQuery('field', indicator.field);\t\t\t\t\n\t\t\t}\n\t\t\tdupIndicator.query();\n\t\t\t\n\t\t\twhile (dupIndicator.next()) {\n\t\t\t\tresult.push(dupIndicator.getValue('sys_id'));\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n}\n\nfunction executeDiagnostic(id) {\n\tvar result = [];\n\tvar arrUtil = new global.ArrayUtil();\n\t\n\t//get the duplicate scripted indicators\n\tarrUtil.concat(result, findDuplicates(true, id));\n\t\n\t//get the duplicate non-scripted indicators\n\tarrUtil.concat(result, findDuplicates(false, id));\n\t\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"2d2ca4b79f0103008e2a9be2d57fcfe3","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_2d2ca4b79f0103008e2a9be2d57fcfe3","sys_updated_by":"admin","sys_created_on":"2017-09-13 14:06:45","name":"Multiple automated indicators with the same source, conditions and aggregate","sys_name":"Multiple automated indicators with the same source, conditions and aggregate","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_indicators","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Add an automated indicator to the data collection job.","sys_mod_count":"10","active":"true","description":"A collection job does not have any indicators associated to it.","sys_updated_on":"2018-02-08 11:11:38","message":"There are no indicators associated to this data collection job.","sys_tags":"","script":"function executeDiagnostic(id) {\n\treturn new PADiagnosticsUtil().checkMissingRelatedList('sysauto_pa', 'pa_job_indicators', 'job', id);\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"3a496c1b9f7003008e2a9be2d57fcf54","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_3a496c1b9f7003008e2a9be2d57fcf54","sys_updated_by":"admin","sys_created_on":"2017-08-30 14:21:36","name":"Collection job without indicators","sys_name":"Collection job without indicators","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"sysauto_pa","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the Breakdown Source to ensure that the Facts table and Conditions are valid.","sys_mod_count":"4","active":"true","description":"A condition used in a Breakdown Source is not valid. There are one or more invalid fields in the Conditions.","sys_updated_on":"2017-12-28 23:33:21","message":"A condition used in this Breakdown Source is not valid. There are one or more invalid fields in the Conditions.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar util = new PADiagnosticsUtil();\n\t\n\tvar breakdownSrc = new GlideRecord('pa_dimensions');\n\tif (id)\n\t\tbreakdownSrc.addEncodedQuery('sys_idIN' + id);\n\tbreakdownSrc.query();\n\twhile (breakdownSrc.next()) {\n\t\tif (!util.isValidCondition(breakdownSrc.facts_table, breakdownSrc.conditions)) {\n\t\t\tresult.push(breakdownSrc.getValue('sys_id'));\n\t\t}\n\t}\n\t\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"3e64a64b9f0103008e2a9be2d57fcf55","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_3e64a64b9f0103008e2a9be2d57fcf55","sys_updated_by":"admin","sys_created_on":"2017-09-11 14:56:46","name":"Breakdown Source with invalid Conditions","sys_name":"Breakdown Source with invalid Conditions","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_dimensions","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the collection job Run as field to a different user, or ensure that the current user record is active and the User ID field is populated.","sys_mod_count":"5","active":"true","description":"A collection job is configured to run as an invalid or inactive user.","sys_updated_on":"2017-12-28 23:38:14","message":"The Run as user defined for this collection job is not valid or active.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar job = new GlideRecord('sysauto_pa');\n\tif (id)\n\t\tjob.addEncodedQuery('sys_idIN' + id);\n\tjob.query();\n\twhile (job.next()) {\n\t\tif (!gs.nil(job.run_as)) {\n\t\t\tvar user = new GlideRecord('sys_user');\n\t\t\tif (user.get(job.run_as)) {\n\t\t\t\tif (user.active == true && !gs.nil(user.user_name)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tresult.push(job.getValue('sys_id'));\n\t}\n\treturn result.join(',');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"5432aab39f3003008e2a9be2d57fcf5a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_5432aab39f3003008e2a9be2d57fcf5a","sys_updated_by":"admin","sys_created_on":"2017-09-01 12:26:46","name":"Run as user defined for collection job not valid or active","sys_name":"Run as user defined for collection job not valid or active","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"sysauto_pa","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Associate the indicator with only one scheduled data collection job. You should only associate the indicator with multiple on-demand jobs that do not run on a schedule.","sys_mod_count":"12","active":"true","description":"An indicator is associated with multiple active scheduled data collection jobs.","sys_updated_on":"2024-08-26 09:17:22","message":"This indicator is used in more than one scheduled collection jobs.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar job = new GlideAggregate('pa_job_indicators');\n\tjob.addEncodedQuery('job.active=true^job.run_typeNOT INonce,on_demand');\n\tif (id)\n\t\tjob.addEncodedQuery('indicatorIN' + id, true);\n\tjob.addQuery('collect_indicator', true);\n\tjob.addQuery('active', true);\n\tjob.addAggregate('COUNT');\n\tjob.groupBy('indicator');\n\tjob.query();\n\twhile (job.next()) {\n\t\tif (job.getAggregate('COUNT') > 1) {\n\t\t\tresult.push(job.indicator.toString());\n\t\t}\n\t}\n\treturn result.join(',');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"58bc837f9f3003008e2a9be2d57fcf56","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_58bc837f9f3003008e2a9be2d57fcf56","sys_updated_by":"admin","sys_created_on":"2017-09-01 15:32:27","name":"Indicator used in multiple active collection jobs","sys_name":"Indicator used in multiple active collection jobs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_indicators","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the tab to reference a valid page.","sys_mod_count":"12","active":"true","description":"Dashboard tab does not have a valid reference in the Page field.","sys_updated_on":"2018-12-05 14:36:17","message":"Dashboard tab does not have a page linked to it.","sys_tags":"","script":"function executeDiagnostic(id) {\n \tvar result = [];\n\tvar util = new PADiagnosticsUtil();\n\tvar tabs = new GlideRecord('pa_tabs');\n\tif (id)\n\t\ttabs.addEncodedQuery('sys_idIN' + id);\n\ttabs.query();\n\twhile (tabs.next()) {\n\t\tvar page = tabs.getValue('page');\n\t\tif (gs.nil(page) || !util.isValidReference('sys_portal_page', page)) {\n\t\t\tresult.push(tabs.getValue('sys_id'));\n\t\t}\n\t}\n\treturn result.join(',');\n }\n \n executeDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"59b34e673b022300b733ac20e2efc423","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_59b34e673b022300b733ac20e2efc423","sys_updated_by":"admin","sys_created_on":"2018-12-04 11:23:53","name":"Dashboard tab does not have a valid page reference","sys_name":"Dashboard tab does not have a valid page reference.","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_tabs","sys_policy":""},{"severity":"info","advanced":"true","solution_description":"Check if the job has been restarted. If not, restart it manually.","sys_mod_count":"7","active":"true","description":"A collection job log is still in the Collecting state but collection is no longer running.","sys_updated_on":"2024-08-26 09:02:47","message":"This collection job log is still in the Collecting state but collection is no longer running.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar jobList = new GlideAggregate('pa_job_logs');\n\tif (id)\n\t\tjobList.addEncodedQuery('sys_idIN' + id, true);\n\tjobList.addQuery('state', 'collecting');\n\tjobList.addAggregate('COUNT');\n\tjobList.groupBy('job');\n\tjobList.query();\n\twhile (jobList.next()) {\n\t\tvar trigger = new GlideAggregate('sys_trigger');\n\t\ttrigger.addQuery('job_context', 'CONTAINS', 'fcDocumentKey='+jobList.job);\n\t\ttrigger.addQuery('state', 1);\n\t\ttrigger.addAggregate('COUNT');\n\t\ttrigger.query();\n\t\tvar totalRunTime = 0;\n\t\t\n\t\tif (trigger.next()) {\n\t\t\tvar numTrigger = trigger.getAggregate('COUNT');\n\t\t\t\n\t\t\tif (numTrigger != jobList.getAggregate('COUNT')) {\n\t\t\t\tvar job = new GlideRecord('pa_job_logs');\n\t\t\t\tjob.addQuery('job', jobList.job);\n\t\t\t\tjob.addQuery('state', 'collecting');\n\t\t\t\tjob.orderByDesc('sys_created_on');\n\t\t\t\tjob.query();\n\t\t\t\t\n\t\t\t\twhile (numTrigger > 0) {\n\t\t\t\t\t//skip the latest collecting jobs that has running triggers\n\t\t\t\t\tjob.next();\n\t\t\t\t\tnumTrigger--;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\twhile (job.next()) {\n\t\t\t\t\tresult.push(job.getValue('sys_id'));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result.join(',');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"59bdcd299f0103008e2a9be2d57fcf80","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_59bdcd299f0103008e2a9be2d57fcf80","sys_updated_by":"admin","sys_created_on":"2017-09-06 16:47:01","name":"Collection job left in Collecting state","sys_name":"Collection job left in Collecting state","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_job_logs","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Check the job logs for errors to identify the issue.","sys_mod_count":"8","active":"true","description":"A data collection job ended with a collection error.","sys_updated_on":"2024-08-26 09:23:03","message":"The last execution of this data collection job ended with collection error.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar jobList = new GlideAggregate('pa_job_logs');\n\tif (id)\n\t\tjobList.addEncodedQuery('jobIN' + id, true);\n\tjobList.addQuery('state', 'collected_error');\n\tjobList.groupBy('job');\n\tjobList.query();\n\twhile (jobList.next()) {\n\t\tvar jobLog = new GlideRecord('pa_job_logs');\n\t\tjobLog.addQuery('job', jobList.job);\n\t\tjobLog.orderByDesc('sys_created_on');\n\t\tjobLog.query();\n\t\tif (jobLog.next() && (jobLog.state=='collected_error')) {\n\t\t\tresult.push(jobList.job.toString());\n\t\t}\n\t}\n\treturn result.join(',');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"64289a4a9f0103008e2a9be2d57fcf9d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_64289a4a9f0103008e2a9be2d57fcf9d","sys_updated_by":"admin","sys_created_on":"2017-09-08 11:29:10","name":"Collection job ended with an error","sys_name":"Collection job ended with an error","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"sysauto_pa","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Remove one of the breakdown mappings containing the duplicate facts table.","sys_mod_count":"6","active":"true","description":"A breakdown has multiple breakdown mappings using the same facts table.","sys_updated_on":"2024-08-26 09:22:13","message":"This breakdown has multiple breakdown mappings using the same fact table.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar breakdownMap = new GlideAggregate('pa_breakdown_mappings');\n\tif (id)\n\t\tbreakdownMap.addEncodedQuery('breakdownIN' + id, true);\n\tbreakdownMap.addAggregate('COUNT');\n\tbreakdownMap.groupBy('breakdown');\n\tbreakdownMap.groupBy('facts_table');\n\tbreakdownMap.query();\n\twhile (breakdownMap.next()) {\n\t\tif (breakdownMap.getAggregate('COUNT') > 1) {\n\t\t\tresult.push(breakdownMap.breakdown.toString());\n\t\t}\n\t}\n\treturn result.join(',');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"647646749f0103008e2a9be2d57fcf1d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_647646749f0103008e2a9be2d57fcf1d","sys_updated_by":"admin","sys_created_on":"2017-09-04 12:59:28","name":"Breakdown with multiple breakdown mappings using the same facts table","sys_name":"Breakdown with multiple breakdown mappings using the same facts table","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_breakdowns","sys_policy":""},{"severity":"info","advanced":"true","solution_description":"Use the automated indicator in a widget or formula indicator. If the automated indicator is not used, remove the indicator from the associated collection jobs and delete the indicator.","sys_mod_count":"13","active":"true","description":"An automated indicator is associated with an active collection job but is not used in any widgets or formula indicators.","sys_updated_on":"2024-08-26 09:24:07","message":"This automated indicator is associated with an active collection job but is not used in any widgets or formula indicators.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar job = new GlideAggregate('pa_job_indicators');\n\tjob.addEncodedQuery('job.active=true^job.run_typeNOT INonce,on_demand');\n\tjob.addQuery('collect_indicator', true);\n\tif (id)\n\t\tjob.addEncodedQuery('indicatorIN' + id, true);\n\tjob.addQuery('active', true);\n\tjob.addAggregate('COUNT');\n\tjob.groupBy('indicator');\n\tjob.query();\n\twhile (job.next()) {\n\t\tvar widget = new GlideAggregate('pa_widgets');\n\t\twidget.addQuery('indicator', job.indicator);\n\t\twidget.query();\n\t\tif (!widget.next() && !isWidgetIndicatorExists(job.indicator) && !isWidgetIndicatorGroupUsed(job.indicator)) {\n\t\t\t//No widget refers to the indicator.\n\t\t\tvar indicator = new GlideRecord('pa_indicators');\n\t\t\tindicator.addQuery('type', 2);\n\t\t\tindicator.addQuery('formula', 'CONTAINS', job.indicator);\n\t\t\tindicator.query();\n\t\t\tif (!indicator.next()) {\n\t\t\t\t//No formula refers to the indicator.\n\t\t\t\tresult.push(job.indicator.toString());\n\t\t\t}\n\t\t}\n\t}\n\treturn result.join(',');\n}\n\nfunction isWidgetIndicatorExists(indicatorSysID) {\n\tvar widgetIndicator = new GlideRecord('pa_widget_indicators');\n\twidgetIndicator.addQuery('indicator', indicatorSysID);\n\twidgetIndicator.query();\n\treturn widgetIndicator.hasNext();\n}\n\nfunction isWidgetIndicatorGroupUsed(indicatorSysID) {\n\tvar widgetGroup = new GlideAggregate('pa_m2m_indicator_tags');\n\twidgetGroup.addQuery('indicator', indicatorSysID);\n\twidgetGroup.groupBy('tag');\n\twidgetGroup.query();\n\tvar groups = [];\n\twhile (widgetGroup.next()) {\n\t\tgroups.push(widgetGroup.getValue('tag'));\n\t}\n\tvar widget = new GlideAggregate('pa_widgets');\n\twidget.addQuery('tag', 'IN', groups.join(','));\n\tvar qc = widget.addQuery('type', 'list');\n\tqc.addOrCondition('type', 'time').addCondition('visualization', 'relative');\n\twidget.query();\n\treturn widget.hasNext();\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"699b71f09f0103008e2a9be2d57fcffb","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_699b71f09f0103008e2a9be2d57fcffb","sys_updated_by":"admin","sys_created_on":"2017-09-04 12:12:01","name":"Active automated indicator not used in  any widgets or formula indicators","sys_name":"Active automated indicator not used in  any widgets or formula indicators","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_indicators","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the indicator to ensure that all conditions reference valid fields.","sys_mod_count":"6","active":"true","description":"A condition used in an automated indicator is not valid. There are one or more invalid fields in the condition.","sys_updated_on":"2017-12-28 23:32:48","message":"There are one or more invalid fields in this indicator's condition.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar util = new PADiagnosticsUtil();\n\t\n\tvar indicator = new GlideRecord('pa_indicators');\n\tif (id)\n\t\tindicator.addEncodedQuery('sys_idIN' + id);\n\tindicator.addQuery('type', 1);\n\tindicator.query();\n\twhile (indicator.next()) {\n\t\tif (!util.isValidCondition(indicator.cube.facts_table, indicator.conditions)) {\n\t\t\tresult.push(indicator.getValue('sys_id'));\n\t\t}\n\t}\n\t\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"6e66a28b9f0103008e2a9be2d57fcf07","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_6e66a28b9f0103008e2a9be2d57fcf07","sys_updated_by":"admin","sys_created_on":"2017-09-11 15:05:29","name":"Automated indicator with invalid fields in conditions","sys_name":"Automated indicator with invalid fields in conditions","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_indicators","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"In the Interactive Filter record, scroll down to the Interactive Filter Dates related list and click New to add a new target table mapping.","sys_mod_count":"9","active":"true","description":"No mapping found for Interactive Filter Based On Date","sys_updated_on":"2018-02-08 11:24:43","message":"An interactive filter based on Date has no tables or fields mapped to it.","sys_tags":"","script":"function executeDiagnostic(id) {\n\treturn new PADiagnosticsUtil().checkMissingRelatedList('sys_ui_hp_publisher', 'sys_ui_hp_date', 'publisher_reference', id, 'type=3');\n }\n \n executeDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"7be3b4165f11030033a1ab6f0f4666a4","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_7be3b4165f11030033a1ab6f0f4666a4","sys_updated_by":"admin","sys_created_on":"2017-09-21 09:05:34","name":"No mapping found for Interactive Filter Based On Date","sys_name":"No mapping found for Interactive Filter Based On Date","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"sys_ui_hp_publisher","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Update the formula to ensure that all indicators, breakdowns, and breakdown elements are valid and that the formula indicator does not reference itself.","sys_mod_count":"5","active":"true","description":"A formula indicator contains one or more invalid indicators, breakdowns, or breakdown elements, or the formula indicator references itself.","sys_updated_on":"2017-12-28 23:35:49","message":"This formula indicator contains one or more invalid indicators, breakdowns, or breakdown elements, or the formula indicator references itself.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\t\n\tvar formIndicator = new GlideRecord('pa_indicators');\n\tif (id)\n\t\tformIndicator.addEncodedQuery('sys_idIN' + id);\n\tformIndicator.addQuery('type', 2);\n\tformIndicator.query();\n\t\n\twhile (formIndicator.next()) {\n\t\tvar paFormula = new global.ScopedPAFormula(formIndicator.getValue('formula'), formIndicator.getValue('sys_id'));\n\t\tif (!paFormula.isValid() || paFormula.getFormula().indexOf(formIndicator.sys_id) > 0) {\n\t\t\tresult.push(formIndicator.getValue('sys_id'));\n\t\t}\n\t}\n\t\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"824b4dc09f1103008e2a9be2d57fcf85","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_824b4dc09f1103008e2a9be2d57fcf85","sys_updated_by":"admin","sys_created_on":"2017-09-14 11:01:14","name":"Formula indicator with invalid formula","sys_name":"Formula indicator with invalid formula","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_indicators","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Check the job logs to identify possible sources of slowness. The following values may help identify the root cause.\r\n- The score collection relative start and end interval\r\n- The number of different indicator sources used by the indicators\r\n- If the job includes inefficient scripted indicators or breakdowns\r\n- If there are slow queries during the job execution","sys_mod_count":"6","active":"true","description":"A scheduled collection job has an average execution time that is too long.","sys_updated_on":"2024-08-26 09:18:36","message":"The average execution time for this scheduled collection job is too long.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar DAY_DURATION=24*60*60*1000;\n\tvar result = [];\n\tvar jobList = new GlideAggregate('pa_job_logs');\n\tif (id)\n\t\tjobList.addEncodedQuery('jobIN' + id, true);\n\tjobList.addQuery('state', '!=', 'collecting');\n\tjobList.groupBy('job');\n\tjobList.query();\n\twhile (jobList.next()) {\n\t\tvar paJob = new GlideRecord('sysauto_pa');\n\t\tif (!paJob.get(jobList.job) || (paJob.run_type == 'on_demand') || (paJob.run_type == 'once')) {\n\t\t\t//ignore collection jobs that no longer exist and non-periodic\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar jobLog = new GlideRecord('pa_job_logs');\n\t\tjobLog.addQuery('job', jobList.job);\n\t\tjobLog.query();\n\t\tvar totalRunTime = 0;\n\t\twhile (jobLog.next()) {\n\t\t\ttotalRunTime += jobLog.run_time.dateNumericValue();\n\t\t}\n\t\tvar avgRunTime = totalRunTime/jobLog.getRowCount();  \n\t\tif (avgRunTime >= DAY_DURATION) {\n\t\t\tresult.push(paJob.getValue('sys_id'));\n\t\t}\n\t}\n\n\treturn result.join(',');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"86cfe8f19f0103008e2a9be2d57fcfb9","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_86cfe8f19f0103008e2a9be2d57fcfb9","sys_updated_by":"admin","sys_created_on":"2017-09-07 09:14:46","name":"Scheduled collection job with high average execution time","sys_name":"Scheduled collection job with high average execution time","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"sysauto_pa","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the breakdown mapping to use a valid Facts table and Field.","sys_mod_count":"0","active":"true","description":"A breakdown mapping uses a Facts table or Field that does not exist.","sys_updated_on":"2020-11-06 11:13:20","message":"This breakdown mapping uses a Facts table or Field that does not exist.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar isGR = new GlideRecord('pa_breakdown_mappings');\n\tvar util = new PADiagnosticsUtil();\n\tif (id)\n\t\tisGR.addEncodedQuery('sys_idIN' + id);\n\n\tisGR.query();\n\t\n\twhile (isGR.next()) {\n\t\tvar tblGR= new GlideRecord(isGR.getValue('facts_table'));\n\t\tif(!tblGR.isValid() || (isGR.getValue('scripted') == false && !util.isValidField(isGR.getValue('facts_table'), isGR.getValue('field'))))\n\t\t\tresult.push(isGR.getValue('sys_id'));\n\n\t}\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"8e3896350790201040aeea9e0ad300fa","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_8e3896350790201040aeea9e0ad300fa","sys_updated_by":"admin","sys_created_on":"2020-11-06 11:13:20","name":"Breakdown mapping with missing Facts table or Field","sys_name":"Breakdown mapping with missing Facts table or Field","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_breakdown_mappings","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Indicator sources based on rotated tables are not supported.","sys_mod_count":"11","active":"true","description":"Indicator sources based on rotated tables may return unexpected result sets, since Performance Analytics collection jobs only take the currently active shard into account.","sys_updated_on":"2018-12-12 15:43:30","message":"This indicator source is based on a rotated table. Rotated tables may cause discrepancies during data collection.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar diagnosticUtil = new PADiagnosticsUtil();\n \tvar grIndicatorSrc = new GlideRecord('pa_cubes');\n\tif (id)\n\t\tgrIndicatorSrc.addEncodedQuery('sys_idIN'+id);\n\tgrIndicatorSrc.query();\n\twhile (grIndicatorSrc.next()) {\n\t\tif (diagnosticUtil.isRotatedTable(grIndicatorSrc.getValue('facts_table')))\n\t\t\tresult.push(grIndicatorSrc.getValue('sys_id'));\n\t}\n \treturn result.join(',');\n }\n \n executeDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"8e9f81203b522300b733ac20e2efc455","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_8e9f81203b522300b733ac20e2efc455","sys_updated_by":"admin","sys_created_on":"2018-12-07 10:24:37","name":"Indicator source based on a rotated table","sys_name":"Indicator source based on a rotated table","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_cubes","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"In the Interactive Filter record, scroll down to the Interactive Filter References related list and click New to add a new Interactive Filter References record.","sys_mod_count":"7","active":"true","description":"No mapping found for Interactive Filter Based On Reference","sys_updated_on":"2018-02-08 11:25:14","message":"An interactive filter based on Reference has no tables or fields mapped to it.","sys_tags":"","script":"function executeDiagnostic(id) {\n\treturn new PADiagnosticsUtil().checkMissingRelatedList('sys_ui_hp_publisher', 'sys_ui_hp_reference', 'publisher_reference', id, 'type=2');\n }\n \n executeDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"91e3b4165f11030033a1ab6f0f46664e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_91e3b4165f11030033a1ab6f0f46664e","sys_updated_by":"admin","sys_created_on":"2017-09-21 09:05:24","name":"No mapping found for Interactive Filter Based On Reference","sys_name":"No mapping found for Interactive Filter Based On Reference","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"sys_ui_hp_publisher","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the script to reference a valid table.","sys_mod_count":"8","active":"true","description":"A script references a table that does not exist.","sys_updated_on":"2017-12-28 23:39:35","message":"This script references a table that does not exist.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar scGR = new GlideRecord('pa_scripts');\n\tif (id)\n\t\tscGR.addEncodedQuery('sys_idIN' + id);\n\tscGR.query();\n\t\n\twhile (scGR.next()) {\n\t\tvar tblGR= new GlideRecord(scGR.getValue('table'));\n\t\tif(!tblGR.isValid()){\n\t\t\tresult.push(scGR.getValue('sys_id'));\n\t\t}\n\t}\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"a2fb9575b30103003e5362ff86a8dc42","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_a2fb9575b30103003e5362ff86a8dc42","sys_updated_by":"admin","sys_created_on":"2017-09-07 12:31:01","name":"Script with missing table","sys_name":"Script with missing table","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_scripts","sys_policy":""},{"severity":"info","advanced":"false","solution_description":"Verify that this breakdown source was not automatically deactivated by a collection job where it is being used. This occurs when the breakdown source returns more rows than allowed by the system property 'com.snc.pa.dc.max_breakdowns_elements_limit'. Additionally make changes to the breakdown source if required and then (re)activate this breakdown source.","sys_mod_count":"6","active":"true","description":"This breakdown source is inactive.","sys_updated_on":"2017-09-20 14:33:56","message":"This breakdown source is inactive.","sys_tags":"","script":"// Add your code here","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"a401aa419f2003008e2a9be2d57fcf45","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"active=false^EQ","sys_update_name":"pa_diagnostic_a401aa419f2003008e2a9be2d57fcf45","sys_updated_by":"admin","sys_created_on":"2017-08-11 13:02:36","name":"Inactive breakdown source","sys_name":"Inactive breakdown source","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_dimensions","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Check the job logs for warnings to identify the issue.","sys_mod_count":"7","active":"true","description":"A data collection job ended with a collection warning.","sys_updated_on":"2024-08-26 09:20:31","message":"The last execution of this data collection job ended with collection warning.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar jobList = new GlideAggregate('pa_job_logs');\n\tif (id)\n\t\tjobList.addEncodedQuery('jobIN' + id, true);\n\tjobList.addQuery('state', 'collected_warning');\n\tjobList.groupBy('job');\n\tjobList.query();\n\twhile (jobList.next()) {\n\t\tvar jobLog = new GlideRecord('pa_job_logs');\n\t\tjobLog.addQuery('job', jobList.job);\n\t\tjobLog.orderByDesc('sys_created_on');\n\t\tjobLog.query();\n\t\tif (jobLog.next() && (jobLog.state=='collected_warning')) {\n\t\t\tresult.push(jobList.job.toString());\n\t\t}\n\t}\n\treturn result.join(',');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"a8d81e4a9f0103008e2a9be2d57fcf77","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_a8d81e4a9f0103008e2a9be2d57fcf77","sys_updated_by":"admin","sys_created_on":"2017-09-08 11:32:10","name":"Collection job ended with a warning","sys_name":"Collection job ended with a warning","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"sysauto_pa","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the breakdown element filter to ensure that all conditions are valid.","sys_mod_count":"8","active":"true","description":"A condition used in a breakdown element filter is not valid. There are one or more invalid fields in the condition.","sys_updated_on":"2017-12-28 23:33:05","message":"This breakdown elements filter contains fields that do not exist.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar util = new PADiagnosticsUtil();\n\t\n\tvar filter = new GlideRecord('pa_filters');\n\tif (id)\n\t\tfilter.addEncodedQuery('sys_idIN' + id);\n\tfilter.query();\n\twhile (filter.next()) {\n\t\tif (!util.isValidCondition(filter.dimension.facts_table, filter.filter)) {\n\t\t\tresult.push(filter.getValue('sys_id'));\n\t\t}\n\t}\n\t\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"af77a28b9f0103008e2a9be2d57fcf1e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_af77a28b9f0103008e2a9be2d57fcf1e","sys_updated_by":"admin","sys_created_on":"2017-09-11 15:10:12","name":"Breakdown element filter with invalid conditions","sys_name":"Breakdown element filter with invalid conditions","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_filters","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Associate the automated indicator with a collection job and set the Active field on the job indicator record to true.","sys_mod_count":"6","active":"true","description":"An automated indicator is not associated with a collection job.","sys_updated_on":"2018-02-08 11:19:44","message":"This automated indicator is not associated with a collection job.","sys_tags":"","script":"function executeDiagnostic(id) {\n\treturn new PADiagnosticsUtil().checkMissingRelatedList('pa_indicators', 'pa_job_indicators', 'indicator', id, 'type=1');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"b5ce242f9ff403008e2a9be2d57fcfcd","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_b5ce242f9ff403008e2a9be2d57fcfcd","sys_updated_by":"admin","sys_created_on":"2017-08-31 09:24:02","name":"Automated indicators not associated with a collection job","sys_name":"Automated indicators not associated with a collection job","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_indicators","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Define a breakdown mapping for the breakdown.","sys_mod_count":"19","active":"true","description":"A breakdown has no breakdown mappings.","sys_updated_on":"2018-02-08 11:24:01","message":"There is no breakdown mapping defined for this breakdown. ","sys_tags":"","script":"function executeDiagnostic(id) {\n\treturn new PADiagnosticsUtil().checkMissingRelatedList('pa_breakdowns', 'pa_breakdown_mappings', 'breakdown', id, 'type=1');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"b905ad819f2003008e2a9be2d57fcf9b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_b905ad819f2003008e2a9be2d57fcf9b","sys_updated_by":"admin","sys_created_on":"2017-08-11 10:09:28","name":"No breakdown mapping found for breakdown","sys_name":"No breakdown mapping found for breakdown","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_breakdowns","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Associate the automated indicator with a collection job and set the Active field on the job indicator record to true.","sys_mod_count":"13","active":"true","description":"An automated indicator used by a widget is not associated with any collection jobs.","sys_updated_on":"2024-08-26 09:24:46","message":"There is a no data collection job scheduled for the indicator used in this widget.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar util = new PADiagnosticsUtil();\n\tvar indicator = new GlideAggregate('pa_widgets');\n\tindicator.addEncodedQuery('indicator.type=1');\n\tif (id)\n\t\tindicator.addEncodedQuery('sys_idIN' + id, true);\n\tindicator.groupBy('indicator');\n\tindicator.query();\n\twhile (indicator.next()) {\n\t\tvar indicatorID = indicator.indicator.toString();\n\t\tif (!util.isIndicatorScheduled(indicatorID)) {\n\t\t\tvar widget = new GlideRecord('pa_widgets');\n\t\t\twidget.addQuery('indicator', indicatorID);\n\t\t\tif (id)\n\t\t\t\twidget.addEncodedQuery('sys_idIN' + id);\n\t\t\twidget.query();\n\t\t\twhile (widget.next()) {\n\t\t\t\tresult.push(widget.getValue('sys_id'));\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"bb6142af9ff403008e2a9be2d57fcf49","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_bb6142af9ff403008e2a9be2d57fcf49","sys_updated_by":"admin","sys_created_on":"2017-08-31 15:25:11","name":"Widget with an automated indicator that is no longer scheduled","sys_name":"Widget with an automated indicator that is no longer scheduled","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_widgets","sys_policy":""},{"severity":"warning","advanced":"true","solution_description":"Add the missing fields to the fields list.","sys_mod_count":"6","active":"true","description":"A script references fields on the 'current' record that are not listed in the fields list.","sys_updated_on":"2024-02-21 18:52:53","message":"There are references to fields on 'current' that are not listed in the field list.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar util = new PADiagnosticsUtil(); \n\tvar paScript = new GlideRecord('pa_scripts');\n\tpaScript.addNotNullQuery('arguments');\n\tif (id)\n\t\tpaScript.addEncodedQuery('sys_idIN' + id);\n\tpaScript.query();\n\twhile (paScript.next()) {\n\t\tvar fieldList = paScript.getValue('arguments').toString().split(',');\n\t\tvar script = util.removeComments(paScript.getValue('script'));\n\t\tvar currentField = script.match(/current((\\.\\w+)\\b(?!\\s*\\())+/g);\n\t\tif (!currentField) {\n\t\t\t//no current used in the script\n\t\t\tcontinue;\n\t\t}\n\t\tfor (var i = 0; i < currentField.length; i++) {\n\t\t\tvar field = currentField[i].replace(/current\\./g,'');\n\t\t\tif (!new global.ArrayUtil().contains(fieldList, field)) {\n\t\t\t\tresult.push(paScript.getValue('sys_id'));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"c6056d4f9fc503008e2a9be2d57fcf74","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_c6056d4f9fc503008e2a9be2d57fcf74","sys_updated_by":"admin","sys_created_on":"2017-09-11 10:19:50","name":"Script with an invalid reference to 'current'","sys_name":"Script with an invalid reference to 'current'","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_scripts","sys_policy":""},{"severity":"warning","advanced":"false","solution_description":"Set Relative Start and Relative End fields to 1","sys_mod_count":"3","active":"true","description":"An active daily job with the Operator set to Relative but Relative Start and Relative End fields are not equal to 1","sys_updated_on":"2018-12-04 10:15:36","message":"Active daily collection job with Operator set to Relative doesn't have Relative Start and Relative End fields set to 1","sys_tags":"","script":"function executeDiagnostic(id) {\n \t// Add your code here\n \treturn null; // your script should return a comma separated list of sys_ids\n }\n \n executeDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"cc8ae59f3b022300b733ac20e2efc421","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"active=true^run_type=daily^score_operator=relative^score_relative_start!=1^ORscore_relative_end!=1^EQ","sys_update_name":"pa_diagnostic_cc8ae59f3b022300b733ac20e2efc421","sys_updated_by":"admin","sys_created_on":"2018-12-03 14:58:15","name":"Active daily jobs with Relative Start/End not equal to 1","sys_name":"Active daily jobs with Relative Start/End not equal to 1","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"sysauto_pa","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"In the Interactive Filter record, scroll down to the Interactive Filter Groups related list and click Insert a new row to add new Interactive Filter groups.","sys_mod_count":"8","active":"true","description":"No mapping found for Interactive Filter Based On Group","sys_updated_on":"2018-02-08 11:25:01","message":"An interactive filter based on Group has no child filters mapped to it.","sys_tags":"","script":"function executeDiagnostic(id) {\n\treturn new PADiagnosticsUtil().checkMissingRelatedList('sys_ui_hp_publisher', 'sys_ui_hp_group', 'group_publisher', id, 'type=4');\n }\n \n executeDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"d8f3b4165f11030033a1ab6f0f4666a6","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_d8f3b4165f11030033a1ab6f0f4666a6","sys_updated_by":"admin","sys_created_on":"2017-09-21 09:05:36","name":"No mapping found for Interactive Filter Based On Group","sys_name":"No mapping found for Interactive Filter Based On Group","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"sys_ui_hp_publisher","sys_policy":""},{"severity":"info","advanced":"true","solution_description":"Remove the breakdown source, or use it in one of these ways:\r\n- Create a breakdown that uses the breakdown source\r\n- Configure the breakdown source on a dashboard to act as an interactive filter","sys_mod_count":"5","active":"true","description":"A breakdown source is not used by a breakdown or as a filter on a dashboard.","sys_updated_on":"2018-03-07 13:58:01","message":"This breakdown source has no breakdown or dashboard filter mapped to it.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\n\tvar breakDownSrc =  new GlideRecord('pa_dimensions');\n\tif (id)\n\t\tbreakDownSrc.addEncodedQuery('sys_idIN' + id);\n\tbreakDownSrc.query();\n\n\twhile (breakDownSrc.next()) {\n\t\tvar breakDown = new GlideRecord('pa_breakdowns');\n\t\tbreakDown.addQuery('dimension', breakDownSrc.sys_id.toString());\n\t\tbreakDown.setLimit(1);\n\t\tbreakDown.query();\n\n\t\tif (!breakDown.hasNext()) {\n\t\t\t//Check if the breakdown source defined to act as filter\n\t\t\tvar dashboardSrc = new GlideRecord('pa_m2m_dashboard_sources');\n\t\t\tdashboardSrc.addQuery('breakdown_source', breakDownSrc.sys_id.toString());\n\t\t\tdashboardSrc.setLimit(1);\n\t\t\tdashboardSrc.query();\n\t\t\tif (!dashboardSrc.hasNext()) {\n\t\t\t\tresult.push(breakDownSrc.sys_id.toString());\n\t\t\t}\n\t\t}\n\t}\n\treturn result.join(',');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"ec02389b9f7003008e2a9be2d57fcf3f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_ec02389b9f7003008e2a9be2d57fcf3f","sys_updated_by":"admin","sys_created_on":"2017-08-30 14:59:41","name":"Unused breakdown source","sys_name":"Unused breakdown source","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_dimensions","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the indicator source to use a valid facts table.","sys_mod_count":"10","active":"true","description":"An indicator source uses a facts table that does not exist.","sys_updated_on":"2017-12-28 23:36:51","message":"This indicator source is using a table that does not exist.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar isGR = new GlideRecord('pa_cubes');\n\tif (id)\n\t\tisGR.addEncodedQuery('sys_idIN' + id);\n\tisGR.query();\n\t\n\twhile (isGR.next()) {\n\t\tvar tblGR= new GlideRecord(isGR.getValue('facts_table'));\n\t\tif(!tblGR.isValid()){\n\t\t\tresult.push(isGR.getValue('sys_id'));\n\t\t}\n\t}\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"ed304d3db30103003e5362ff86a8dcdc","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_ed304d3db30103003e5362ff86a8dcdc","sys_updated_by":"admin","sys_created_on":"2017-09-07 10:31:31","name":"Indicator source with missing facts table","sys_name":"Indicator source with missing facts table","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_cubes","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the widget indicator to reference a valid indicator.","sys_mod_count":"5","active":"true","description":"A widget indicator references a non-existent indicator.","sys_updated_on":"2018-10-01 14:23:39","message":"This widget indicator references a non-existent indicator.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar util = new PADiagnosticsUtil();\n\tvar widgetIndicators = new GlideRecord('pa_widget_indicators');\n\tif (id)\n\t\twidgetIndicators.addEncodedQuery('sys_idIN' + id);\n\twidgetIndicators.addNotNullQuery('indicator');\n\twidgetIndicators.query();\n\twhile (widgetIndicators.next()) {\n\t\tif (!util.isValidReference('pa_indicators', widgetIndicators.getValue('indicator'))) {\n\t\t\tresult.push(widgetIndicators.getValue('sys_id'));\n\t\t}\n\t}\n\treturn result.join(',');\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"efa8b0833bb02300b733ac20e2efc435","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_efa8b0833bb02300b733ac20e2efc435","sys_updated_by":"admin","sys_created_on":"2018-10-01 13:12:38","name":"Widget Indicator with an invalid indicator","sys_name":"Widget Indicator with an invalid indicator","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_widget_indicators","sys_policy":""},{"severity":"info","advanced":"true","solution_description":"Create an indicator that uses the indicator source or remove the indicator source","sys_mod_count":"5","active":"true","description":"An indicator source is not used by any indicators.","sys_updated_on":"2018-02-08 11:15:22","message":"There are no indicators defined for this indicator source.","sys_tags":"","script":"function executeDiagnostic(id) {\n\treturn new PADiagnosticsUtil().checkMissingRelatedList('pa_cubes', 'pa_indicators', 'cube', id);\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"fe4e04939f7003008e2a9be2d57fcf53","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_fe4e04939f7003008e2a9be2d57fcf53","sys_updated_by":"admin","sys_created_on":"2017-08-30 12:26:30","name":"Unused indicator source","sys_name":"Unused indicator source","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_cubes","sys_policy":""},{"severity":"error","advanced":"true","solution_description":"Update the script to ensure that all field references are valid.","sys_mod_count":"7","active":"true","description":"A script uses one or more fields that do not exist.","sys_updated_on":"2017-12-28 23:39:18","message":"This script uses one or more fields that do not exist.","sys_tags":"","script":"function executeDiagnostic(id) {\n\tvar result = [];\n\tvar util = new PADiagnosticsUtil();\n\tvar script = new GlideRecord('pa_scripts');\n\tif (id)\n\t\tscript.addEncodedQuery('sys_idIN' + id);\n\tscript.query();\n\twhile(script.next()) {\n\t\tvar argument = script.getValue('arguments');\n\t\tvar field = argument.split(',');\n\t\tfor(var i = 0; i < field.length; i++) {\n\t\t\tif (!util.isValidField(script.getValue('table'), field[i])) {\n\t\t\t\tresult.push(script.getValue('sys_id'));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn result;\n}\n\nexecuteDiagnostic(id);","sys_class_name":"pa_diagnostic","log_when_empty":"false","sys_id":"fe9616fd9f0103008e2a9be2d57fcfc6","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"condition":"","sys_update_name":"pa_diagnostic_fe9616fd9f0103008e2a9be2d57fcfc6","sys_updated_by":"admin","sys_created_on":"2017-09-07 16:44:00","name":"Script with invalid fields","sys_name":"Script with invalid fields","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b2881e900b3003001e684ac3b6673a93","value":"b2881e900b3003001e684ac3b6673a93"},"sys_created_by":"admin","table":"pa_scripts","sys_policy":""}]}