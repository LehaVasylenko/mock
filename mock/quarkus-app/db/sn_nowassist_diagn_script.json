{"result":[{"sys_mod_count":"31","description":"VA Skill Search Capability diagnostic script.","sys_updated_on":"2024-05-07 05:41:55","sys_tags":"","script":"diagnose(); \n\nfunction diagnose() {\n\tvar messages = NowAssistDiagnosticUtil.validateCapabilitySettings(\"VA Skill Search\", \"NowAssist VA\");\n\n\tmessages = messages.concat(NowAssistDiagnosticUtil.testRequestExecution({\n\t\t\t\"caller\": \"NAP:\",\n\t\t\t\"skill_list\": JSON.stringify([\n\t\t\t\t{\n\t\t\t\t\t\"title\": \"Order Laptop\",\n\t\t\t\t\t\"metaData\": {\n\t\t\t\t\t\t\"name\": \"Order Laptop\",\n\t\t\t\t\t\t\"description\": \"This is a skill that is used to help user order laptops\",\n\t\t\t\t\t\t\"attributes\": [{\"name\": \"laptop make\", \"description\": \"the make of the laptop (an be Macbook, Lenovo or Dell))\"},\n\t\t\t\t\t\t{\"name\": \"ram size\", \"description\": \"the ram capability of the laptop (can be 16gb or 32gb))\"},\n\t\t\t\t\t\t{\"name\": \"screen size\", \"description\": \"the screen size of the laptop (can be 14 inches or 16 inches)\"}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t]),\n\t\t\t\"utterance\": \"I want to order a laptop\"\n\t\t}, \n\t\t\"bb25ad08438cb91006650464dbb8f2aa\",\n\t\t\"VA Skill Search\",\n\t\tfunction(capabilityResponse) {\n\t\t\tvar llmResponse = JSON.parse(capabilityResponse.response);\n\t\t\tif (typeof llmResponse.skills != \"object\") {\n\t\t\t\treturn [new DiagnosticMessage(\"Unexpected response from llm: \" + JSON.stringify(capabilityResponse), \"Check the response and logs for details\")];\n\t\t\t}\n\t\t\treturn [];\n\t\t})\n\t);\n\n\treturn messages;\n}","sys_class_name":"sn_nowassist_diagn_script","sys_id":"1c134943439d02105947644c7ab8f22e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_update_name":"sn_nowassist_diagn_script_1c134943439d02105947644c7ab8f22e","sys_updated_by":"admin","sys_created_on":"2024-04-05 20:25:51","name":"VA Skill Search capability","sys_name":"VA Skill Search capability","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"8","description":"Test QnA Capability","sys_updated_on":"2024-08-20 23:00:25","sys_tags":"","script":"diagnose(); \n\nfunction diagnose() {\n\tvar messages = NowAssistDiagnosticUtil.validateCapabilitySettings(\"QnA\", \"NowAssist in AI Search\");\n\n\tmessages = messages.concat(NowAssistDiagnosticUtil.testRequestExecution({\n            \"query\": \"What is the warranty period?\",\n            \"top_kbs\": JSON.stringify([{\n                \"text\": \"Your newly acquired Dell computer comes with a limited factory warranty of 5 years for parts and labor coverage.\",\n                \"source\": \"kb\"\n            }])\n\t\t},\n\t\t\"c40246b9533121106b38ddeeff7b1250\",\n\t\t\"QnA\")\n\t); \n\n\treturn messages;\n\n}","sys_class_name":"sn_nowassist_diagn_script","sys_id":"215bbd7e435902105947644c7ab8f280","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_update_name":"sn_nowassist_diagn_script_215bbd7e435902105947644c7ab8f280","sys_updated_by":"admin","sys_created_on":"2024-04-05 05:51:47","name":"QnA capability","sys_name":"QnA capability","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"0","description":"Plugin and app dependency validations for all the packages in sn_nowassist_diagn_package table","sys_updated_on":"2024-04-05 19:08:16","sys_tags":"","script":"diagnose();\n\nfunction diagnose() {\n\n\tvar diagnosticMessages = [];\n\ttry {\n\t\tdiagnosticMessages = NowAssistDiagnosticsPackageInstallValidator.validateAll();\n\t} catch(error) {\n\t\tdiagnosticMessages.push(new DiagnosticMessage('Error validating packages: ' + error));\n\t}\n\n\treturn diagnosticMessages;\n}","sys_class_name":"sn_nowassist_diagn_script","sys_id":"254234c77fd10210ae3e0ee66d866597","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_update_name":"sn_nowassist_diagn_script_254234c77fd10210ae3e0ee66d866597","sys_updated_by":"admin","sys_created_on":"2024-04-05 19:08:16","name":"Plugin and App Installation Validation","sys_name":"Plugin and App Installation Validation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"16","description":"Script to validate nowassist va application.\nThe following validations are performed:\n* Validate plugins\n* Validate that now assist is enabled via sn_nowassist_settings record\n* Standard capalbility validations:\n  * Validate that the capability exists in sys_one_extend_capability table\n  * Validate that one definition config in sys_one_extend_definition_config table is set as 'default'\n  * Validate that generative AI capability exists is sys_generative_ai_config table\n* Validated capabilities:\n  * VA Skill Search\n    * Validate connectivity\n    * Validate request/response\n    * Validate that a skill has been returned in the response\n  * VA Skill Follow-up\n    * Validate connectivity\n    * Validate request/response","sys_updated_on":"2024-04-19 06:27:48","sys_tags":"","script":"diagnose();\n\n\nfunction diagnose() {\n\t//verify plugin versions\n\tvar messages = NowAssistDiagnosticsPackageInstallValidator.validateAll();\n\n\t//Now assist is enabled\n\tvar nowAssistSettingsGr = new GlideRecord(\"sn_nowassist_settings\");\n\tnowAssistSettingsGr.addQuery(\"name\", \"Now Assist General Settings\");\n\tnowAssistSettingsGr.query();\n\tif (nowAssistSettingsGr.next()) {\n\t\tif (!nowAssistSettingsGr.active) {\n\t\t\tmessages.push(new DiagnosticMessage(\"Now assist settings record disabled\", \"Set the \\\"Now Assist General Settings\\\" in sn_nowassist_setttings to enabled\"));\n\t\t}\n\t} else {\n\t\tmessages.push(new DiagnosticMessage(\"Now assist settings record doesn't exist\", \"Reinstall the nowassist-va plugin\"));\n\t}\n\n\t//verify dependent capabilities\n\tvar executor = new NowAssistDiagnosticExcecutor(executionRecordSysId);\n\texecutor.executeByName(\"VA Skill Search capability\");\n\texecutor.executeByName(\"VA Skill Followup capability\");\n\n\treturn messages;\n}","sys_class_name":"sn_nowassist_diagn_script","sys_id":"2ec4f75e431d06105947644c7ab8f251","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_update_name":"sn_nowassist_diagn_script_2ec4f75e431d06105947644c7ab8f251","sys_updated_by":"admin","sys_created_on":"2024-04-04 05:52:37","name":"Now Assist VA application","sys_name":"Now Assist VA application","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","description":"Make a call to AI Search and validate that results are returned.","sys_updated_on":"2024-05-15 23:54:40","sys_tags":"","script":"diagnose();\n\nfunction diagnose() {\n\tvar messages = [];\n\tvar inputs = {\"search_term\":\"ipad\",\"logging_context\":\"{}\",\"start_time\":1683779834727,\"context_profile_id\":\"3a33973653211010a813ddeeff7b125a\",\"search_context_id\":\"ac5e379f1b8e61103341a9b9ab4bcba2\",\"locale\":\"en\"}; \n\n\tvar searchResult = JSON.parse(sn_cs.VASystemObject.retrieveSearchResults(inputs.search_term, inputs.context_profile_id, inputs.search_context_id, inputs.logging_context, inputs.locale, \"\")); \n\n\tif (searchResult.result[0].status != 200) {\n\t\tmessages.push(new DiagnosticMessage(\"Unexpected status returned by AI Search: \" + searchResult.status, \"Check AI Search server status\"));\n\t}\n\tif (searchResult.result[0].errors && searchResult.result[0].errors.length != 0) {\n\t\tmessages.push(new DiagnosticMessage(\"Errors returned by AI search: \" + JSON.stringify(searchResult.result[0].errors), \"Check error messages\"));\n\t}\n\tif (!searchResult.result[0].executionResult.searchResultsTemplates || searchResult.result[0].executionResult.searchResultsTemplates.length == 0) {\n\t\tmessages.push(new DiagnosticMessage(\"No results were returned\", \"Possibly no matching result for search term 'ipad', or an issue with AI Search\"));\n\t}\n\t\n\treturn messages;\n}","sys_class_name":"sn_nowassist_diagn_script","sys_id":"32bd79d3436502105947644c7ab8f22e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_update_name":"sn_nowassist_diagn_script_32bd79d3436502105947644c7ab8f22e","sys_updated_by":"admin","sys_created_on":"2024-04-19 06:25:27","name":"AI Search","sys_name":"AI Search","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"8","description":"VA Skill Followup capability diagnostic","sys_updated_on":"2024-05-07 05:50:11","sys_tags":"","script":"diagnose(); \n\nfunction diagnose() {\n\tvar messages = NowAssistDiagnosticUtil.validateCapabilitySettings(\"VA Skill Followup\", \"NowAssist VA\");\n\tmessages = messages.concat(NowAssistDiagnosticUtil.testRequestExecution({\n\t\t\t\"prompt\": \"can you give me a summary\",\n\t\t\t\"update_history\": \"false\"\n\t\t}, \n\t\t\"15fc377c4328311006650464dbb8f2d7\",\n\t\t\"VA Skill Followup\")\n\t);\n\treturn messages;\n}","sys_class_name":"sn_nowassist_diagn_script","sys_id":"3b84cd83439d02105947644c7ab8f268","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_update_name":"sn_nowassist_diagn_script_3b84cd83439d02105947644c7ab8f268","sys_updated_by":"admin","sys_created_on":"2024-04-05 20:29:24","name":"VA Skill Followup capability","sys_name":"VA Skill Followup capability","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"24","description":"Diagnostic for the summarize capability.","sys_updated_on":"2024-05-02 22:51:56","sys_tags":"","script":"diagnose();\n\nfunction diagnose() {\n\tvar messages = NowAssistDiagnosticUtil.validateCapabilitySettings(\"Summarize\", \"Gen AI Controller\");\n\n\tmessages = messages.concat(NowAssistDiagnosticUtil.testRequestExecution({\n\t\t\t\"textToSummarize\": \"Please summarize my text. This is placeholder text meant only for summarization by the reader into smaller and more condensed text.\" \n\t\t}, \n\t\t\"02def939533121106b38ddeeff7b1237\",\n\t\t\"Summarize\")\n\t);\n\n\treturn messages;\n}","sys_class_name":"sn_nowassist_diagn_script","sys_id":"e94a7cbb433002105947644c7ab8f2c7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_update_name":"sn_nowassist_diagn_script_e94a7cbb433002105947644c7ab8f2c7","sys_updated_by":"admin","sys_created_on":"2024-03-14 07:09:30","name":"Summarize capability","sys_name":"Summarize capability","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/7b67ecf7437042105947644c7ab8f21b","value":"7b67ecf7437042105947644c7ab8f21b"},"sys_created_by":"admin","sys_policy":""}]}