{"result":[{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-03-10 08:17:46","sys_domain_path":"","script":"var channel = event.parm1;\n\nvar rec = new SNC.VisRealTimeScoreEventHandler();\nrec.processEvent(channel);","sys_class_name":"sysevent_script_action","sys_id":"0218e3dc4f21211084de35d991ce0b3f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/539a23bf04f12210559073c06a02f7aa","value":"539a23bf04f12210559073c06a02f7aa"},"sys_update_name":"sysevent_script_action_0218e3dc4f21211084de35d991ce0b3f","sys_updated_by":"admin","sys_created_on":"2023-03-09 13:13:34","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Vis Real Time Score Event Handler","event_name":"par.realtime.score.calculate","sys_name":"PAR Real Time SCore Event Handler","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-12-14 06:40:31","sys_domain_path":"/","script":"var progressId = event.parm1;\n\t\n    var policyMgr = new sn_cmdb_ws.CMDBWsDMPolicyManager();\n    policyMgr.migrateLegacyDataCertSchedules(progressId);\n\n    var progressUtil = new sn_cmdb_ws.CMDBWsProgressMonitorUtil();\n    progressUtil.deleteProgress(progressId);","sys_class_name":"sysevent_script_action","sys_id":"02646a96b7073110115280408e11a9fd","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sysevent_script_action_02646a96b7073110115280408e11a9fd","sys_updated_by":"admin","sys_created_on":"2023-12-13 23:12:33","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Migrate Cert Schedules","event_name":"sn_cmdb_ws.migrate.certschedules","sys_name":"Migrate Cert Schedules","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"13","active":"true","description":"The event is triggered when a glide record query is successful for a NOT_CONNECTED connection.","sys_overrides":"","sys_updated_on":"2025-04-04 22:50:51","sys_domain_path":"/","sys_class_name":"sysevent_script_action","sys_id":"04945ebfff2022105edcffffffffff4d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c3a5dc03c3222210ed4bd50d050131a7","value":"c3a5dc03c3222210ed4bd50d050131a7"},"sys_update_name":"sysevent_script_action_04945ebfff2022105edcffffffffff4d","sys_updated_by":"admin","sys_created_on":"2025-04-03 19:48:40","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"DF Connection State Success","event_name":"data_fabric.warn.gr.query.conn.success","sys_name":"DF Connection State Success","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"protected"},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-02-28 00:28:13","sys_domain_path":"","sys_class_name":"sysevent_script_action","sys_id":"0499188e3b772200b90c4bb534efc49d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3ad18693db92220004997878f0b8f516","value":"3ad18693db92220004997878f0b8f516"},"sys_update_name":"sysevent_script_action_0499188e3b772200b90c4bb534efc49d","sys_updated_by":"admin","sys_created_on":"2016-12-21 02:49:37","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Download Scores","event_name":"sn_bm_client.download.scores","sys_name":"Download Scores","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3ad18693db92220004997878f0b8f516","value":"3ad18693db92220004997878f0b8f516"},"sys_created_by":"admin","order":"100","sys_policy":"protected"},{"condition_script":"","sys_mod_count":"11","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-08-13 18:19:59","sys_domain_path":"","script":"gs.getSession().impersonate(event.parm2);\nvar parExportJobExecutor = new SNC.AsyncExportJobExecutor();\nparExportJobExecutor.execute(event.parm1);","sys_class_name":"sysevent_script_action","sys_id":"0639f5709f80121006dd0127aa0a1c27","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e92ea3b304752210559073c06a02f7b1","value":"e92ea3b304752210559073c06a02f7b1"},"sys_update_name":"sysevent_script_action_0639f5709f80121006dd0127aa0a1c27","sys_updated_by":"admin","sys_created_on":"2024-08-13 17:24:32","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Par Export Job Handler","event_name":"par_export_job.async","sys_name":"Par Export Job Handler","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"16","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-07-16 00:33:26","sys_domain_path":"","script":"SNC.UpgradeAPI.notifyFailure(event.parm1);\ngs.print(\"Failure notification sent\");","sys_class_name":"sysevent_script_action","sys_id":"0706bb2b0a0a0a650019905e47e9d763","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9543af3304312210559073c06a02f769","value":"9543af3304312210559073c06a02f769"},"sys_update_name":"sysevent_script_action_0706bb2b0a0a0a650019905e47e9d763","sys_updated_by":"admin","sys_created_on":"2006-11-20 20:20:18","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Notify Upgrade Failure","event_name":"system.upgrade.failed","sys_name":"Notify Upgrade Failure","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2016-01-06 21:13:28","sys_domain_path":"/","script":"GlideSysSemaphore.get().reload(); // cluster messages are not processed by the sender, unless specified as the recipient\nGlideClusterMessage.postScript('GlideSysSemaphore.get().reload();');","sys_class_name":"sysevent_script_action","sys_id":"071e4d21cb301200d436fcd5634c9cad","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c63eb7304312210559073c06a02f71c","value":"8c63eb7304312210559073c06a02f71c"},"sys_update_name":"sysevent_script_action_071e4d21cb301200d436fcd5634c9cad","sys_updated_by":"brent.bahry","sys_created_on":"2016-01-06 18:01:40","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Reload Semaphores","event_name":"system.upgraded","sys_name":"Reload Semaphores","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"brent.bahry","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.glideapp.password_reset'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-16 09:52:33","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id','IN','0031ca56c72010100a9b5d83c7c260b8,0186a95e73e054107d98438e7bf6a744,0851219a73e054107d98438e7bf6a7f7,1bf5255e73e054107d98438e7bf6a76b,2405691e73e054107d98438e7bf6a746,2d300256c72010100a9b5d83c7c260a3,2e710296c72010100a9b5d83c7c260cb,313d1dd673e054107d98438e7bf6a73b,336f7516c72010100a9b5d83c7c260eb,6539b562c7e010100a9b5d83c7c260ed,6ece7dd2c72010100a9b5d83c7c26089,747202d6c72010100a9b5d83c7c2603b,89eff916c72010100a9b5d83c7c260f6,96128a96c72010100a9b5d83c7c260be,9ab10696c72010100a9b5d83c7c260e5,9e94251e73e054107d98438e7bf6a720,b1af915a73e054107d98438e7bf6a7ce,c3756d1e73e054107d98438e7bf6a7f5,c3f1699a73e054107d98438e7bf6a77f,d873e5da73e054107d98438e7bf6a74e,e514adda73e054107d98438e7bf6a752,ea90a95a73e054107d98438e7bf6a7e0,f8d261da73e054107d98438e7bf6a7de,ffed35d2c72010100a9b5d83c7c26046');\naclGR.query();\n\nwhile(aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"0856b3eec7c520100a9b5d83c7c260fc","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_0856b3eec7c520100a9b5d83c7c260fc","sys_updated_by":"admin","sys_created_on":"2020-12-16 08:48:31","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate Password Reset report_view ACLs","event_name":"plugin.activated","sys_name":"Activate Password Reset report_view ACLs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-19 13:06:27","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.enrollment_snapshot', true)) {\n    createEnrollmentSnapshot();\n}\n\nfunction createEnrollmentSnapshot() {\n    var userGroupGr = new GlideRecord(\"sys_user_grmember\");\n\n    if (userGroupGr.get(event.parm1) && userGroupGr.user.active && userGroupGr.group.active) {\n        var user = userGroupGr.user;\n        try {\n            new PwdEnrollSnapshotUtil().createEnrollmentSnapshot(user);\n        } catch (ex) {\n            gs.error(\"[Script action: Create enrollment snaps for a user-group with sys_id : \" + user + \" ]. execution error - \" + ex);\n        }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"0963576143062110d68db0e245b8f26b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_0963576143062110d68db0e245b8f26b","sys_updated_by":"admin","sys_created_on":"2023-04-07 05:33:45","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create enrollment snaps for a user-group","event_name":"sys_user_grmember.insert","sys_name":"Create enrollment snaps for a user-group","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2009-05-14 18:01:02","sys_domain_path":"","script":"gs.print(\"retiring instance \" + event.parm1);\r\n\r\nvar sa = new SecurelyAccess(\"com.glideapp.deploy\", \"shell.scripts/retire-instance.sh\");\r\nsa.setBackground(true);\r\nsa.setQuiet(false);\r\nsa.runCommand(event.parm1);","sys_class_name":"sysevent_script_action","sys_id":"09e07fddc61122750094124fa1fc8d3b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/68c7a3bf04b12210559073c06a02f711","value":"68c7a3bf04b12210559073c06a02f711"},"sys_update_name":"sysevent_script_action_09e07fddc61122750094124fa1fc8d3b","sys_updated_by":"glide.maint","sys_created_on":"2005-08-31 00:12:19","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"System Retire","event_name":"system.retire","sys_name":"System Retire","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"// call script\r\ngs.loadBatchScript(\"sys.scripts/\" + event.parm1);","sys_class_name":"sysevent_script_action","sys_id":"0a023c6cc6112275001498959f078434","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/68c7a3bf04b12210559073c06a02f711","value":"68c7a3bf04b12210559073c06a02f711"},"sys_update_name":"sysevent_script_action_0a023c6cc6112275001498959f078434","sys_updated_by":"system","sys_created_on":"2005-08-31 00:49:10","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"System Runscript","event_name":"system.runscript","sys_name":"System Runscript","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"21","active":"true","description":"","sys_overrides":"","sys_updated_on":"2013-06-24 22:44:02","sys_domain_path":"","script":"/**\n * Handle a workflow.notification event by creating an email notification that can be sent\n *\n *   parm1 - sys_id of workflow activity,sys_id of workflow context\n *   parm2 - comma-separated list of recipients\n */\nsendWorkflowNotification();\n\nfunction sendWorkflowNotification() {\n    // get the activity that defines the information about the event\n    var parts = event.parm1.split(',');\n    var activity = new GlideRecord('wf_activity');\n    if (!activity.get(parts[0])) \n        return 0;\n    \n    // The EmailAction does not know how to handle ${workflow...} constructs so we need to handle those for it\n    var context = new GlideRecord('wf_context');\n    if (parts.length == 2) \n        context.get(parts[1]);\n    \n    GlideController.putGlobal(\"context\", context);\n    var workflow = new Workflow().workflow.newWorkflowProxy();\n    GlideController.putGlobal(\"workflow\", workflow);\n    \n    var subject = jsWorkflow(activity.vars.subject);\n    var message = jsWorkflow(activity.vars.email);\n    var emailAction = new GlideEmailAction();\n    \n    var emailGR = new GlideRecord('sysevent_email_action');\n    emailGR.initialize();\n    emailGR.event_parm_2 = true;\n    emailGR.name = activity.getValue('name');\n    emailGR.content_type = 'text/html';\n    emailGR.subject = subject;\n    emailGR.message = message;\n    emailGR.weight = '-1';\n    emailGR.send_self = true;\n    emailAction.process(event, current, emailGR);\n    return 0;\n}\n\nfunction jsWorkflow(str) {\n\tvar gc = GlideController;\n    var s = new String(str);\n    \n    // replace anything with ${workflow.x} to eval(workflow.x)\n    s = s.replace(/\\$\\{(workflow\\..*?)\\s*\\}/g, function(str, p1) {\n        return (eval(p1) || \"\");\n    });\n    return s;\n}\n","sys_class_name":"sysevent_script_action","sys_id":"0b4812080a0a0b270f6dba560f256a9b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/41672bfb04b12210559073c06a02f7c6","value":"41672bfb04b12210559073c06a02f7c6"},"sys_update_name":"sysevent_script_action_0b4812080a0a0b270f6dba560f256a9b","sys_updated_by":"russ.sarbora","sys_created_on":"2008-08-28 21:46:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Workflow Notification","event_name":"workflow.notification","sys_name":"Workflow Notification","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"event.parm1 == 'sn_mif'","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-01-17 22:36:26","sys_domain_path":"/","sys_class_name":"sysevent_script_action","sys_id":"0bdd2b5dd96f7910f877f039c52084bc","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/47401582b7a6b9501e8f827b9e11a913","value":"47401582b7a6b9501e8f827b9e11a913"},"sys_update_name":"sysevent_script_action_0bdd2b5dd96f7910f877f039c52084bc","sys_updated_by":"admin","sys_created_on":"2024-01-04 22:28:21","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"MIF customer plugin activated","event_name":"plugin.activated","sys_name":"MIF customer plugin activated","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/47401582b7a6b9501e8f827b9e11a913","value":"47401582b7a6b9501e8f827b9e11a913"},"sys_created_by":"maint","order":"100","sys_policy":"protected"},{"condition_script":"event.parm1 == 'sn_oe_sfs'","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-05-30 04:43:23","sys_domain_path":"/","script":"var processorSysId = '2dea64a1c3a301104b8e88c7c840ddf8';\n\nvar before = gs.getSession().getWorkflow();\ngs.getSession().setWorkflow(false);\n\nvar gr = new GlideRecord('sys_processor');\nif (gr.get('2dea64a1c3a301104b8e88c7c840ddf8')) {\n    gr.setValue('active', false);\n    gr.update();\n}\n\ngs.getSession().setWorkflow(before);","sys_class_name":"sysevent_script_action","sys_id":"0ce71c55c37341104b8e88c7c840dd3f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/34a3f33704b52210559073c06a02f75e","value":"34a3f33704b52210559073c06a02f75e"},"sys_update_name":"sysevent_script_action_0ce71c55c37341104b8e88c7c840dd3f","sys_updated_by":"admin","sys_created_on":"2022-05-30 04:40:26","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Deactivate CIUpgradeRedirect","event_name":"plugin.activated","sys_name":"Deactivate CIUpgradeRedirect","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"38","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-02-26 17:42:48","sys_domain_path":"","script":"/**\n\tThrow Email Event for messages while offline, throttle and package to every [[collaboration.email_interval]] minutes.\n\tparm1 - sys_id of live_group_member\n\tparm2 - comma separated user sys_ids: live_profile, sys_user\n*/\nvar idArray = event.parm2.split(\",\");\nvar profileID = idArray[0];\nvar userID = idArray[1];\n\nvar emailDelay = new GlideTime();\nvar minutesInterval = parseInt(gs.getProperty(\"collaboration.email_interval\"), 10);\nvar hoursInterval = 0;\nvar delayString = \"\";\nif(minutesInterval >= 60) {\n\thoursInterval = math.floor(minutesInterval / 60);\n\tminutesInterval = minutesInterval % 60;\n\tif(hoursInterval < 10)\n\t\tdelayString += \"0\";\n\tdelayString += hoursInterval + \":\";\n} else\n\tdelayString = \"00:\";\nif(minutesInterval < 10)\n\tdelayString += \"0\";\ndelayString += minutesInterval + \":00\";\n\nemailDelay.setValue(delayString);\nvar timeAgo = new GlideDateTime();\ntimeAgo.subtract(emailDelay);\n\nvar grGroupMember = new GlideRecord(\"live_group_member\");\ngrGroupMember.addQuery(\"sys_id\", event.parm1);\ngrGroupMember.query();\n\nvar grActivity = new GlideRecord(\"sys_user_presence\");\ngrActivity.addQuery(\"user\", userID);\ngrActivity.addQuery(\"sys_updated_on\", \">=\", timeAgo);\ngrActivity.query();\n\nif(!grActivity.hasNext() && grGroupMember.next()) {\n\tvar last_emailed = new GlideDateTime(grGroupMember.getValue(\"last_emailed\"));\n\t// Provide 1 minute buffer to grab messages from\n\temailDelay.setValue(\"00:01:00\");\n\ttimeAgo.subtract(emailDelay);\n\n\tif(timeAgo.compareTo(last_emailed) > 0) {\n\t\t// Ensures last email was sent outside the delay timer\n\t\tvar grLiveGroup = new GlideRecord(\"live_group_profile\");\n\t\tgrLiveGroup.addQuery(\"sys_id\", grGroupMember.getValue(\"group\"));\n\t\tgrLiveGroup.query();\n\n\t\tif(grLiveGroup.next()) {\n\t\t\tvar groupId =  grGroupMember.getValue(\"group\");\n\t\t\tvar messages = new LiveMessageUtils().getLiveMessages(groupId, profileID, timeAgo);\n\n\t\t\tif(grLiveGroup.getValue(\"type\") == \"peer\") {\n\t\t\t\tgs.eventQueue(\"collaboration.notify_offline_user\", \"\", \"\", userID, messages);\n\t\t\t} else {\n\t\t\t\tgs.eventQueue(\"collaboration.notify_offline_user.group\", \"\", \"\", userID, messages);\n\t\t\t}\n\n\t\t\tgrGroupMember.setValue(\"last_emailed\", new GlideDateTime());\n\t\t\tgrGroupMember.update();\n\t\t}\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"0f338b329f132100d5f9b3e2957fcf07","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d4442b7b04312210559073c06a02f7ee","value":"d4442b7b04312210559073c06a02f7ee"},"sys_update_name":"sysevent_script_action_0f338b329f132100d5f9b3e2957fcf07","sys_updated_by":"admin","sys_created_on":"2014-09-25 18:05:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Collaboration Offline Email Batching","event_name":"collaboration.new_offline_message","sys_name":"Collaboration Offline Email Batching","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-20 09:08:50","sys_domain_path":"/","script":"new AppsData().updateLastInstalledFrom();","sys_class_name":"sysevent_script_action","sys_id":"0fe24ff177522110b61ec1bfbd5a996e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_update_name":"sysevent_script_action_0fe24ff177522110b61ec1bfbd5a996e","sys_updated_by":"admin","sys_created_on":"2023-04-20 09:08:50","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update Last Installed From","event_name":"sn_appclient.update_last_installed_from","sys_name":"Update Last Installed From","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-02-28 00:29:21","sys_domain_path":"","sys_class_name":"sysevent_script_action","sys_id":"102521145b3322003d1c484c11f91abe","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3ad18693db92220004997878f0b8f516","value":"3ad18693db92220004997878f0b8f516"},"sys_update_name":"sysevent_script_action_102521145b3322003d1c484c11f91abe","sys_updated_by":"admin","sys_created_on":"2016-12-15 21:48:27","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Upload Scores","event_name":"sn_bm_client.upload.scores","sys_name":"Upload Scores","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3ad18693db92220004997878f0b8f516","value":"3ad18693db92220004997878f0b8f516"},"sys_created_by":"admin","order":"100","sys_policy":"protected"},{"condition_script":"","sys_mod_count":"17","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-12-20 11:00:56","sys_domain_path":"","script":"if(event.parm1 != \"skip\")\n\tCreateActivity();\n\nfunction CreateActivity()\n{\n\tif(current.revised_by)\n\t\tnew ActivitySubscriptionContext().getActivityService().createActivity(current,\"revised\");\n\telse\n\t\tnew ActivitySubscriptionContext().getActivityService().createActivity(current,\"posted\");\n}\n\n","sys_class_name":"sysevent_script_action","sys_id":"1054055367403200d358bb2d07415a53","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/67dc6bfb04352210559073c06a02f738","value":"67dc6bfb04352210559073c06a02f738"},"sys_update_name":"sysevent_script_action_1054055367403200d358bb2d07415a53","sys_updated_by":"admin","sys_created_on":"2017-01-06 13:24:08","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activity Creator","event_name":"sn_actsub.create_activity","sys_name":"Activity Creator","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-05-06 16:18:15","sys_domain_path":"","script":"(function(current, event) {\n    new TriggerRule()\n        .setRecord(current)\n        .cancelWorkflows(event.parm2);\n})(current, event);","sys_class_name":"sysevent_script_action","sys_id":"1190d0e153b5111056f1ddeeff7b126e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c6ca73b04352210559073c06a02f754","value":"8c6ca73b04352210559073c06a02f754"},"sys_update_name":"sysevent_script_action_1190d0e153b5111056f1ddeeff7b126e","sys_updated_by":"admin","sys_created_on":"2022-09-07 08:53:20","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Cancel existing oncall escalations","event_name":"trigger_rule.cancel_workflow_context","sys_name":"Cancel existing oncall escalations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.change_management.soc'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '9f32928c732010102eb52d2b04f6a716, 588e020c732010102eb52d2b04f6a766');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"11ad8342b74120104c45f2b1de11a911","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/cdcf033467020300b410afa00585ef2b","value":"cdcf033467020300b410afa00585ef2b"},"sys_update_name":"sysevent_script_action_11ad8342b74120104c45f2b1de11a911","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:29:52","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- Chg soc","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- Chg soc","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/cdcf033467020300b410afa00585ef2b","value":"cdcf033467020300b410afa00585ef2b"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"9","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-11-01 20:42:56","sys_domain_path":"","script":"new CMDBAffectedCINotificationsUtils().handleTaskAffectedCIs(event.parm1);","sys_class_name":"sysevent_script_action","sys_id":"14d2e73777023110a69410ed9f5a9990","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/6535677304712210559073c06a02f74f","value":"6535677304712210559073c06a02f74f"},"sys_update_name":"sysevent_script_action_14d2e73777023110a69410ed9f5a9990","sys_updated_by":"admin","sys_created_on":"2023-10-30 02:57:29","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Handle Affected CIs for Task","event_name":"ci.notification.for.task","sys_name":"Handle Affected CIs for Task","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"6","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-04-05 03:37:37","sys_domain_path":"/","script":"gs.log(\"Calling ProminMLSolutionFailureHandler for \"+event.getUniqueValue());\nSNC.ProcessOptimization.handleMLSuccessfulTrainingEvent(event.instance,false); \ngs.log(\"Finished ProminMLSolutionFailureHandler for \"+event.getUniqueValue());","sys_class_name":"sysevent_script_action","sys_id":"15452c274fb402107b66bcd991ce0b03","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aa76333f04b52210559073c06a02f764","value":"aa76333f04b52210559073c06a02f764"},"sys_update_name":"sysevent_script_action_15452c274fb402107b66bcd991ce0b03","sys_updated_by":"admin","sys_created_on":"2024-03-13 10:56:20","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"ProminMLSolutionFailureHandler","event_name":"ml_solution.training.failure","sys_name":"ProminMLSolutionFailureHandler","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"23","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-12-11 11:35:37","sys_domain_path":"","script":"var data_source = 'ConvertService';\ngs.log('Starting converting service: ' + event.parm1, data_source);\ncurrent.setValue('status','IN PROGRESS');\ncurrent.update();\nvar service_id = current.getValue('service');\nvar bulk_id = current.getValue('bulk_transform');\nvar bulk = new GlideRecord('cmdb_convert_bulk_services');\nbulk.get(bulk_id);\nvar level = bulk.getValue('level');\nvar is_dynamic = JSUtil.getBooleanValue(bulk,'type');\ntry {\n\tvar bsm = new SNC.BusinessServiceManager();\n\tvar blackListRelations = gs.getProperty(\"sa.mapping.system.manual.rel_type.blacklist\",\"\");\n\tvar succeeded = bsm.convertToDiscoveredService(service_id, level, blackListRelations, is_dynamic, true);  // is_dynamic==true ? Populate cmdb_ci_service_calculated table : populate cmdb_ci_service_discovered table.\n\tif (succeeded)\n\t\tcurrent.setValue('status','COMPLETE');\n\telse\n\t\tcurrent.setValue('status','FAILED');\n} catch(exc){\n\tcurrent.setValue('status','FAILED');\n} finally {\n\tcurrent.update();\n}\ngs.log('Done converting service: ' + current.getDisplayValue('service'), data_source);","sys_class_name":"sysevent_script_action","sys_id":"15b7fc8f7303330061b79c0c6df6a73c","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/cd4cabf704352210559073c06a02f74d","value":"cd4cabf704352210559073c06a02f74d"},"sys_update_name":"sysevent_script_action_15b7fc8f7303330061b79c0c6df6a73c","sys_updated_by":"admin","sys_created_on":"2019-08-08 05:44:26","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Convert Service","event_name":"convert_cmdb_service","sys_name":"Convert Service","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-03-21 23:19:37","sys_domain_path":"/","script":"var viewId = event.parm1;\nvar certInfo = JSON.parse(event.parm2);\nsn_cmdb_data_manager.CMDBDataManagerScopedScriptableApis.getCertificationView(viewId, certInfo.certTable, certInfo.displayFields, certInfo.certificationFields);","sys_class_name":"sysevent_script_action","sys_id":"16b99c5a530902106adfddeeff7b12d5","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sysevent_script_action_16b99c5a530902106adfddeeff7b12d5","sys_updated_by":"admin","sys_created_on":"2024-03-21 23:19:37","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Data Certification View","event_name":"sn_cmdb_ws.certification.create.view","sys_name":"Create Data Certification View","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-09-06 13:30:23","sys_domain_path":"","script":"var tableName = event.parm1;\nvar recordId = event.parm2;\n\nnew global.IntegrationHubInstanceUtil()\n\t.deleteIntegrationRecordDetails(tableName, recordId);","sys_class_name":"sysevent_script_action","sys_id":"16c8d8b3779230107419591e6b5a9999","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/741d2f3f04352210559073c06a02f7ce","value":"741d2f3f04352210559073c06a02f7ce"},"sys_update_name":"sysevent_script_action_16c8d8b3779230107419591e6b5a9999","sys_updated_by":"admin","sys_created_on":"2021-09-06 13:24:04","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Clean up intg related records","event_name":"ihub_integration_instance.delete.cleanup","sys_name":"Clean up intg related records","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-08-03 22:40:18","sys_domain_path":"/","script":"//Run Comparison Aync and update status \nvar harc = event.parm2.split(',');\nvar settings = new sn_vsc.SCComparisonUtil().runComparison(harc[1], harc[2]);\nnew sn_vsc.SCComparisonUtil().createChangedSettings(harc[0], settings);\nvar gr = new GlideRecord('sn_vsc_user_comparisons');\ngr.get('sys_id', harc[0]);\ngr.query();\nif (gr.next()) {\n    gr.usr_status = 'complete';\n    gr.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"182ce65e53451110dd8eddeeff7b12df","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_182ce65e53451110dd8eddeeff7b12df","sys_updated_by":"admin","sys_created_on":"2022-08-03 21:25:08","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"ExecuteHardeningComparison","event_name":"sn_vsc.sec.hardening.comparison","sys_name":"ExecuteHardeningComparison","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.sla.breakdowns'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '485fcdf8b7601010a4fbfa13ee11a9fd, afef053cb7601010a4fbfa13ee11a979, fa61157cb7601010a4fbfa13ee11a9d0, cc6fc13cb7601010a4fbfa13ee11a914');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"19be8b42b74120104c45f2b1de11a924","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/6c11c4f357201300ff01ac11ac94f982","value":"6c11c4f357201300ff01ac11ac94f982"},"sys_update_name":"sysevent_script_action_19be8b42b74120104c45f2b1de11a924","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:34:31","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- SLA breakdown","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- SLA breakdown","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/6c11c4f357201300ff01ac11ac94f982","value":"6c11c4f357201300ff01ac11ac94f982"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-03-16 09:40:35","sys_domain_path":"","script":"var groupId = event.parm1;\nvar action = event.parm2;\nvar qbsManager = new SNC.QueryBasedServiceManager();\n\n// Find the empty dynamic CI groups and update the svc_ci_assoc table for these services\nif (action == \"delete\") {\n    var gr = new GlideRecord('cmdb_ci_query_based_service');\n    gr.addQuery('cmdb_group', '');\n    gr.addQuery('table', '');\n    gr.query();\n    while (gr.next()) {\n        var serviceId = gr.getUniqueValue();\n        qbsManager.updateSvcAssoc(serviceId);\n    }\n}\n\n// Find the dynamic CI groups that are associated to this cmdb group and update the svc_ci_assoc table for these services\nelse if (action == \"update\") {\n    var gr2 = new GlideRecord('cmdb_ci_query_based_service');\n    gr2.addQuery('cmdb_group', groupId);\n    gr2.query();\n    while (gr2.next()) {\n        var serviceId2 = gr2.getUniqueValue();\n        qbsManager.updateSvcAssoc(serviceId2);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"1a395ed17f1300101952baf8befa91a4","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/cd4cabf704352210559073c06a02f74d","value":"cd4cabf704352210559073c06a02f74d"},"sys_update_name":"sysevent_script_action_1a395ed17f1300101952baf8befa91a4","sys_updated_by":"admin","sys_created_on":"2020-03-01 08:46:15","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Sync Dynamic CI Groups","event_name":"cmdb.group.modified","sys_name":"Sync Dynamic CI Groups","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"24","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-02-26 16:29:47","sys_domain_path":"","script":"/*\n event.parm1 == sys_user sys_id\n event.parm2 == non-batched push notification message\n*/\n\nfunction batchNotifications() {\n\tvar liveProfileGR = new GlideRecord(\"live_profile\");\n\tliveProfileGR.addQuery(\"document\", event.parm1);\n\tliveProfileGR.query();\n\n\tif(!liveProfileGR.next())\n\t\treturn;\n\n\tvar groupMemberGR = new GlideRecord(\"live_group_member\");\n\tgroupMemberGR.addQuery(\"group\", current.group);\n\tgroupMemberGR.addQuery(\"member\", liveProfileGR.getValue(\"sys_id\"));\n\tgroupMemberGR.query();\n\n\tif(!groupMemberGR.next())\n\t\treturn;\n\n\tvar last_push_notified = new GlideDateTime();\n\tvar messageTime = new GlideDateTime();\n\tlast_push_notified.setValue(groupMemberGR.getValue(\"last_push_notified\"));\n\tmessageTime.setValue(current.getValue(\"sys_created_on\"));\n\n\tif(!last_push_notified || messageTime.compareTo(last_push_notified) >= 0) {\n\n\t\t// Message was created after the last time we've notified the user\n\t\tvar numMessages = new LiveMessageUtils().getLiveMessageCount(messageTime, current.group);\n\n\t\tif(numMessages >= 5) {\n\t\t\t// We've gotta batch all these in one big push notification\n\t\t\tvar liveGroupGR = new GlideRecord(\"live_group_profile\");\n\t\t\tliveGroupGR.get(current.group);\n\n\t\t\tif(liveGroupGR.getValue(\"type\") === \"peer\") {\n\t\t\t\tgs.eventQueue(\"connect.newmessage\", current, event.parm1, current.getDisplayValue(\"profile\") + \": You have \" + numMessages + \" New Messages\");\n\t\t\t} else {\n\t\t\t\tgs.eventQueue(\"connect.newmessage\", current, event.parm1, liveGroupGR.getDisplayValue(\"name\") + \": You have \" + numMessages + \" New Messages\");\n\t\t\t}\n\t\t\tgroupMemberGR.setValue(\"last_push_notified\", new GlideDateTime());\n\n\t\t} else {\n\t\t\t// Messages aren't coming in fast enough to batch, send individual push notification for this message\n\t\t\tgs.eventQueue(\"connect.newmessage\", current, event.parm1, event.parm2);\n\t\t\tgroupMemberGR.setValue(\"last_push_notified\", messageTime);\n\t\t}\n\n\t\tgroupMemberGR.update();\n\t}\n}\n\nbatchNotifications();\n","sys_class_name":"sysevent_script_action","sys_id":"1bfa26029f011200d5f9b3e2957fcffe","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d4442b7b04312210559073c06a02f7ee","value":"d4442b7b04312210559073c06a02f7ee"},"sys_update_name":"sysevent_script_action_1bfa26029f011200d5f9b3e2957fcffe","sys_updated_by":"admin","sys_created_on":"2016-01-21 00:18:29","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Connect Push Notification Batching","event_name":"connect.batch_push_notifications","sys_name":"Connect Push Notification Batching","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-08-20 09:46:22","sys_domain_path":"","script":"if(event.parm1) {\n\tvar gr = new GlideRecord(\"pa_rw_aggregate\");\n\tgr.addEncodedQuery('channel_idSTARTSWITH/par/aggregate/^sys_created_by='+(event.parm1));\n\tgr.deleteMultiple();\n} else\n\tgs.error(\"Unable to clear PAR record watchers for single score\");","sys_class_name":"sysevent_script_action","sys_id":"1df2fef27713330038c7ec672b1061ae","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/539a23bf04f12210559073c06a02f7aa","value":"539a23bf04f12210559073c06a02f7aa"},"sys_update_name":"sysevent_script_action_1df2fef27713330038c7ec672b1061ae","sys_updated_by":"admin","sys_created_on":"2019-08-20 06:17:23","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"PAR RW Data Cleaner","event_name":"logout","sys_name":"PAR RW Data Cleaner","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-03-25 23:11:41","sys_domain_path":"","script":"var referenceProfile = event.parm1;\nvar targetProfile = event.parm2;\nvar util = new SuggestedUtteranceUtil();\ngs.info(\"Calling SuggestedUtteranceUtil to initiate seeding suggested utterances with reference profile: \" + referenceProfile + \" and target profile: \" + targetProfile);\nvar start = new Date();\nutil.seedSuggestedUtterances(referenceProfile, targetProfile);\nvar timeTakenMs = new Date() - start;\ngs.info(\"Finished job to generate suggested utterances for profile \" + targetProfile + \" in \" + timeTakenMs + \"ms.\")\n","sys_class_name":"sysevent_script_action","sys_id":"1f5ae44dff6c2210c0f1ffffffffff8e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0e99ab7b04f12210559073c06a02f745","value":"0e99ab7b04f12210559073c06a02f745"},"sys_update_name":"sysevent_script_action_1f5ae44dff6c2210c0f1ffffffffff8e","sys_updated_by":"admin","sys_created_on":"2025-03-25 23:10:55","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Initiate Seeding of Suggested Utterances","event_name":"search_suggested_utterance_seeding.start","sys_name":"Initiate Seeding of Suggested Utterances","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"9","active":"true","description":"","sys_overrides":"","sys_updated_on":"2014-04-15 22:50:17","sys_domain_path":"","script":"synchronizeDictionaryFields();\n\nfunction synchronizeDictionaryFields() {\n\tvar gr = new GlideRecord(\"sys_dictionary\");\n\tgr.setWorkflow(false);\n\tgr.autoSysFields(false);\n\tgr.query();\n\twhile (gr.next()) {\n\t\tsyncAttributes(gr);\n\t\tvar synchronizedDependent = syncDependent(gr);\n\t\tvar synchronizedDefaultValue = syncDefaultValue(gr);\n\t\tvar refQualUSync = updateRefQual(gr);\n\t\t\tif (synchronizedDependent || synchronizedDefaultValue || refQualUSync)\n\t\t\t\tgr.update();\n\n\t}\n}\n\nfunction syncDependent(gr) {\n\tif (gr.dependent != '' && (gr.dependent.indexOf(',') == -1) && gr.dependent_on_field != gr.dependent) {\n\t\tgr.dependent_on_field = gr.dependent;\n\t\tgr.use_dependent_field = true;\n\t\treturn true;\n\t}\n\t\n\treturn false;\n}\n\nfunction syncDefaultValue(gr) {\n\tif (gr.default_value.trim().indexOf(\"javascript:\") != 0)\n\t\treturn false;\n\t\n\tvar defaultValue = gr.default_value.trim();\n\tdefaultValue = defaultValue.substring(\"javascript:\".length);\n\tif (defaultValue == \"\")\n\t\treturn false;\n\n\tif (defaultValue.endsWith(\";\"))\n\t\tdefaultValue = defaultValue.substring(0, defaultValue.length - 1);\n\t\n\tvar dyn = new GlideRecord(\"sys_filter_option_dynamic\");\n\tdyn.addQuery(\"script\", defaultValue).addOrCondition(\"script\", defaultValue + \";\");\n\tdyn.query();\n\tif (!dyn.next())\n\t\treturn false;\n\t\n\tif (gr.dynamic_default_value == dyn.sys_id && gr.use_dynamic_default == true)\n\t\treturn false;\n\t\n\tgr.dynamic_default_value = dyn.sys_id;\n\tgr.use_dynamic_default = true;\n\t\n\treturn true;\n}\n\nfunction syncAttributes(gr) {\n\tSNC.DictionaryAttribute.updateFromDictionaryAttributesField(gr.name, gr.element);\n}\n\nfunction updateRefQual(gr){\n\tvar update = false;\n\tif (gr.reference_qual.trim().indexOf(\"javascript:\") != 0 ) {\n\t\tgr.use_reference_qualifier = 'simple';\n\t\tgr.reference_qual_condition = gr.reference_qual.trim();\n\t\tupdate = true;\n\t\treturn update;\n\t}\n\tcurrentRefQual = gr.reference_qual;\n\tvar currentReferenceQual = gr.reference_qual.trim();\n\tcurrentReferenceQual = currentReferenceQual.substring(\"javascript:\".length);\n\tif (currentReferenceQual == \"\")\n\t\treturn update;\n\t\n\tif (currentReferenceQual.endsWith(\";\"))\n\t\tcurrentReferenceQual = currentReferenceQual.substring(0, currentReferenceQual.length - 1);\n\t\t\n\tvar dyn = new GlideRecord(\"sys_filter_option_dynamic\");\n\tdyn.addQuery(\"script\", currentReferenceQual).addOrCondition(\"script\", currentReferenceQual + \";\");\n\tdyn.query();\n\tif (dyn.next()) {\n\t\tgr.use_reference_qualifier = 'dynamic';\n\t\tgr.dynamic_ref_qual = dyn.sys_id;\n\t\tupdate = true;\n\t} else {\n\t\tgr.use_reference_qualifier = 'advanced';\n\t\tupdate = true;\n\t}\n\treturn update;\n}\n\n","sys_class_name":"sysevent_script_action","sys_id":"209a2772eb331100d4360c505206fe42","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/66142ff704312210559073c06a02f78f","value":"66142ff704312210559073c06a02f78f"},"sys_update_name":"sysevent_script_action_209a2772eb331100d4360c505206fe42","sys_updated_by":"maint","sys_created_on":"2014-04-04 21:00:01","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Synchronize Dictionary Fields","event_name":"system.upgraded","sys_name":"Synchronize Dictionary Fields","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":""},{"condition_script":"current.table_name == 'sn_publications_publication'","sys_mod_count":"13","active":"true","description":"","sys_overrides":"","sys_updated_on":"2015-12-18 01:18:00","sys_domain_path":"","script":"var publication_id = current.table_sys_id;//the publication\nvar user_id = event.user_id;//the user who read the attachment \n\nvar tablename = current.table_name;\nvar event_id = event.sys_id;\nvar sysid = current.sys_id;\n\nvar gr = new GlideRecord('sn_publications_publication_contact_m2m');\n//assume publication+contact combination is unique in the table\ngr.addQuery('publication',publication_id);\ngr.addQuery('user',user_id);\ngr.addQuery('viewed_attachment',false);\ngr.query();\nif(gr.next()){\n\tgr.viewed_attachment = true;\n    gr.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"20a2870bc31012004bd67bfaa2d3ae81","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0fdd6483d72302004f1e82285e61033a","value":"0fdd6483d72302004f1e82285e61033a"},"sys_update_name":"sysevent_script_action_20a2870bc31012004bd67bfaa2d3ae81","sys_updated_by":"admin","sys_created_on":"2015-12-17 21:51:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Publication Attachment Read","event_name":"attachment.read","sys_name":"Publication Attachment Read","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0fdd6483d72302004f1e82285e61033a","value":"0fdd6483d72302004f1e82285e61033a"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2010-04-21 21:14:58","sys_domain_path":"","script":"gs.log(\"********************* ABOUT TO DELETE TABLE EXTENSION:\" + event.parm1);\r\nvar tu = new TableUtils();\r\ntu.dropTableAndExtensions(event.parm1);","sys_class_name":"sysevent_script_action","sys_id":"2227b84a0a0a0b950004868f9ece6509","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ed836fb304312210559073c06a02f704","value":"ed836fb304312210559073c06a02f704"},"sys_update_name":"sysevent_script_action_2227b84a0a0a0b950004868f9ece6509","sys_updated_by":"don goodliffe","sys_created_on":"2010-04-21 20:55:48","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Table Rotation Delete Extension","event_name":"table_rotation.delete_extension","sys_name":"Table Rotation Delete Extension","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"don goodliffe","order":"","sys_policy":""},{"condition_script":"event.parm1 == 'sn_scmobile'","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-09-13 04:32:46","sys_domain_path":"/","script":"\n    //Refer fix_activate_draft_item_card.xml while making changes\nvar scriptPrefix = \"fix_activate_draft_item_card: Script_action: \";\ngs.info(scriptPrefix + \"Started executing the script\");\nactivateDraftItemCard();\ngs.info(scriptPrefix + \"Ended executing the script\");\n\nfunction activateDraftItemCard() {\n    var gr = new GlideRecord(\"sys_sg_view_config\");\n    gr.setWorkflow(false);\n    if (gr.get(\"89998916c3a03110547aab8f8740dd34\")) {\n        //If it is already active by fix script we don't need to update.\n        if (gr.getValue(\"active\") == 1) {\n            gs.info(scriptPrefix + \"Draft item card is already active\");\n            return;\n        }\n\n        var gcd = GlideCollisionDetector.get();\n        if (gs.nil(gcd)) {\n            gs.info(scriptPrefix + \"Error in initiating GlideCollisionDetector.\");\n            return;\n        }\n        //If card is customised by customer we don't update it.\n        if (gcd.containsKey(gr.getValue(\"sys_update_name\"))) {\n            gs.info(scriptPrefix + \"Draft item card is customised.\");\n            return;\n        }\n\n\n        gr.setValue(\"active\", true);\n        if (gr.update())\n            gs.info(scriptPrefix + \"Draft item card having sys_id {0} successfully activated.\", gr.getUniqueValue());\n        else\n            gs.info(scriptPrefix + \"Not able to Activate the Draft item card having sys_id {0}\", gr.getUniqueValue());\n    } else {\n        gs.info(scriptPrefix + \"Draft item card not found.\");\n    }\n}\n","sys_class_name":"sysevent_script_action","sys_id":"2272b72477113110121e8f1a5b5a99b1","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3028ab3304f12210559073c06a02f7b7","value":"3028ab3304f12210559073c06a02f7b7"},"sys_update_name":"sysevent_script_action_2272b72477113110121e8f1a5b5a99b1","sys_updated_by":"admin","sys_created_on":"2023-09-12 18:40:30","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate catalog mobile draft item card","event_name":"plugin.upgraded","sys_name":"Activate catalog mobile draft item card","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2015-07-07 18:19:44","sys_domain_path":"","script":"\nvar mu = new GlideMultipleUpdate(\"sys_push_notif_app_install\");\nmu.addQuery(\"token\", event.parm2.toString());\nmu.setValue(\"active\", false);\nmu.execute();\n","sys_class_name":"sysevent_script_action","sys_id":"22c67a62ff0102009738ffffffffff2b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c6f3abb704312210559073c06a02f721","value":"c6f3abb704312210559073c06a02f721"},"sys_update_name":"sysevent_script_action_22c67a62ff0102009738ffffffffff2b","sys_updated_by":"admin","sys_created_on":"2015-07-07 18:19:05","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Deactivate push installation","event_name":"push.invalid_device","sys_name":"Deactivate push installation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"gs.getProperty(\"sn_appclient.schedule.install\",\"true\") == \"true\"","sys_mod_count":"6","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-02-16 14:31:30","sys_domain_path":"/","script":"new sn_appclient.ScheduledInstallService(current).processSchedule(current,event.parm1);\n","sys_class_name":"sysevent_script_action","sys_id":"22e4b64a93c22010ebd4f157b67ffb1f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_update_name":"sysevent_script_action_22e4b64a93c22010ebd4f157b67ffb1f","sys_updated_by":"admin","sys_created_on":"2021-02-02 07:48:05","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Install scheduled plugins","event_name":"sn_appclient.install.scheduled.plugins","sys_name":"Install scheduled plugins","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_created_by":"admin","order":"1000","sys_policy":""},{"condition_script":"event.parm1 == 'sn_sow_itsm_common'","sys_mod_count":"2","active":"false","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 06:51:19","sys_domain_path":"/","script":"var ootbConfigs = {\n    uxScreenRecord: ['b034cf7877410110c05d885d9f5a9912', 'cbc2f24977070110949878dabd5a9935'],\n    uxApplicabilityM2MScreen: ['4f45f34a77010110c05d885d9f5a991e', 'f5e6f34a77010110c05d885d9f5a9905', '9df6f34a77010110c05d885d9f5a9912', 'b9e2f20577c30110949878dabd5a99f6'],\n    uxApplicability: ['89080439c7003010202818b1c7c2603d', 'a9e74039c7003010202818b1c7c2605e', 'f8d78039c7003010202818b1c7c260ef', '907dfd0977c30110949878dabd5a9901'],\n    users: ['46d44a23a9fe19810012d100cca80666', '5137153cc611227c000bbd1bd8cd2007', '681b365ec0a80164000fb0b05854a0cd']\n};\nvar hideListOnLandingPagePropSysId = 'e02cea20e0910210f87715d33d78aa64';\nvar currentEventScriptActionSysId = '230e0b2c53d942105c7d7dd0a0490ec6';\ngs.info('Executing script action - Expand list on landing page');\n\nif (gs.getProperty('glide.ux.user_criteria_enabled') == 'true' && isActiveUsersForSOW(ootbConfigs)) {\n    expandListOnLandingPage();\n}\ndisableCurrentEventScriptAction();\n\nfunction isActiveUsersForSOW(config) {\n    var uxScreenRecordSysIds = config.uxScreenRecord;\n    var uxApplicabilityM2MScreenSysIds = config.uxApplicabilityM2MScreen;\n    var uxApplicabilitySysIds = config.uxApplicability;\n    var ootbUsers = config.users;\n    var appGr = new GlideRecord('sys_ux_applicability_m2m_screen');\n    appGr.addActiveQuery();\n    appGr.addQuery('screen', 'IN', uxScreenRecordSysIds);\n    appGr.addQuery('sys_id', 'NOT IN', uxApplicabilityM2MScreenSysIds);\n    appGr.query();\n    while (appGr.next()) {\n        uxApplicabilitySysIds.push(appGr.getValue('applicability'));\n    }\n    var userCriteria = [];\n    var ucIncGr = new GlideRecord('sys_ux_criteria_m2m_inclusion');\n    ucIncGr.addActiveQuery();\n    ucIncGr.addQuery('applicability', 'IN', uxApplicabilitySysIds);\n    ucIncGr.query();\n    while (ucIncGr.next()) {\n        var ucSysId = ucIncGr.getValue('user_criteria');\n        if (userCriteria.indexOf(ucSysId) == -1) {\n            userCriteria.push(ucSysId);\n        }\n    }\n    var groupSysIds = [];\n    var userSysIds = [];\n    var ucGr = new GlideRecord('user_criteria');\n    ucGr.addActiveQuery();\n    ucGr.addQuery('sys_id', 'IN', userCriteria);\n    ucGr.query();\n    while (ucGr.next()) {\n        var users = ucGr.getValue('user');\n        var groups = ucGr.getValue('group');\n        if (users) {\n            users = users.split(',');\n            for (i = 0; i < users.length; i++) {\n                var userSysId = users[i];\n                if (userSysIds.indexOf(userSysId) == -1) {\n                    userSysIds.push(userSysId);\n                }\n            }\n        }\n        if (groups) {\n            groups = groups.split(',');\n            for (i = 0; i < groups.length; i++) {\n                var groupSysId = groups[i];\n                if (groupSysIds.indexOf(groupSysId) == -1)\n                    groupSysIds.push(groupSysId);\n            }\n        }\n    }\n\n    var userGroupGr = new GlideRecord('sys_user_grmember');\n    userGroupGr.addQuery('user.active', true);\n    userGroupGr.addQuery('group', 'IN', groupSysIds);\n    userGroupGr.addQuery('user', 'NOT IN', ootbUsers);\n    userGroupGr.setLimit(1);\n    userGroupGr.query();\n    if (userGroupGr.hasNext())\n        return true;\n\n    var userGr = new GlideRecord('sys_user');\n    userGr.addActiveQuery();\n    userGr.addQuery('sys_id', 'IN', userSysIds);\n    userGr.addQuery('sys_id', 'NOT IN', ootbUsers);\n    userGr.setLimit(1);\n    userGr.query();\n    if (userGr.hasNext())\n        return true;\n\n    return false;\n}\n\nfunction expandListOnLandingPage() {\n    var pagePropGr = new GlideRecord('sys_ux_page_property');\n    if (pagePropGr.get(hideListOnLandingPagePropSysId)) {\n        pagePropGr.setValue('value', false);\n        pagePropGr.update();\n        gs.info('Setting value of UX page proerpty hideListOnLandingPage to false.');\n    }\n}\n\nfunction disableCurrentEventScriptAction() {\n    var eventScriptActionGr = new GlideRecord('sysevent_script_action');\n    if (eventScriptActionGr.get(currentEventScriptActionSysId)) {\n        eventScriptActionGr.setValue('active', false);\n        eventScriptActionGr.update();\n        gs.info('Disabling the script action as it should only run once.');\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"230e0b2c53d942105c7d7dd0a0490ec6","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sysevent_script_action_230e0b2c53d942105c7d7dd0a0490ec6","sys_updated_by":"system","sys_created_on":"2024-03-29 12:03:24","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Expand list on landing page","event_name":"plugin.upgraded","sys_name":"Expand list on landing page","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1=='sn_vsc'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-02-23 16:58:03","sys_domain_path":"/","script":"var scComplianceUtil = new sn_vsc.VSCComplianceUtil();       \nscComplianceUtil.runComplianceCheck();        \nvar gr = new GlideRecord('sn_vsc_harc_compliance_status_lookup');\ngr.query();\nif (gr.getRowCount() == 0) { //If installing app-vsc for first time\n    var grSet = new GlideRecord('sn_vsc_instance_hardening_settings');\n    grSet.query();\n    while (grSet.next()) {\n        //Check if compliance status changed\n        var grAudit = new GlideRecord('sys_audit');\n        grAudit.addEncodedQuery('tablename=sn_vsc_instance_hardening_settings^fieldname=compliance_status^documentkey=' + grSet.sys_id);\n        grAudit.orderByDesc('sys_created_on');\n        grAudit.query();\n        if (grAudit.next() && grSet.compliance_status != grAudit.newvalue) {\n            scComplianceUtil.updateSettingsInsert(grSet.sys_id, grSet.compliance_status);\n        }\n        scComplianceUtil.updateComplianceStatusLookUp(grSet.sys_id, grSet.compliance_status);\n    }\n} else {\n    //Handling upgrade scenario for existing baseline-settings which are not part of new baseline\n    var grH = new GlideRecord('sn_vsc_instance_hardening_settings');\n    grH.addQuery('harc_baseline_version', '!=', 'Baseline v5');\n    grH.query();\n    while (grH.next()) {\n        //Check if compliance status changed\n        var grA = new GlideRecord('sn_vsc_harc_compliance_status_lookup');\n        grA.addQuery('harc_setting', grH.sys_id);\n        grA.query();\n        if (grA.next() && grH.compliance_status != grA.harc_compliance_status) {\n            scComplianceUtil.updateComplianceStatusLookUp(grH.sys_id, grH.compliance_status);\n            scComplianceUtil.updateSettingsInsert(grH.sys_id, grH.compliance_status);\n        }\n    }\n}\n\n//Handle upgarde scenario for new baseline-settings\nvar grHarc = new GlideRecord('sn_vsc_instance_hardening_settings');\ngrHarc.addQuery('harc_baseline_version', 'Baseline v5');\ngrHarc.query();\nwhile (grHarc.next()) {\n    scComplianceUtil.updateComplianceStatusLookUp(grHarc.sys_id, grHarc.compliance_status);\n    scComplianceUtil.updateSettingsInsert(grHarc.sys_id, grHarc.compliance_status);\n}\n\n//Execute PA job for new comparison\nvar constants = new sn_vsc.SecurityCenterConstants();\nvar vsc_pa_job = new GlideRecord('sysauto_pa');\nif (vsc_pa_job.get('sys_id', constants.SCPAJob)) {\n    gs.executeNow(vsc_pa_job);\n}","sys_class_name":"sysevent_script_action","sys_id":"233d1237641f2110f877eb14a37cc175","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_233d1237641f2110f877eb14a37cc175","sys_updated_by":"maint","sys_created_on":"2023-06-15 05:01:59","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Set Compliance Status On Upgrade","event_name":"plugin.upgraded","sys_name":"Set Compliance Status On Upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-11-03 19:00:56","sys_domain_path":"/","script":"var scEventUtil = new sn_vsc.SCEventUtil();\nscEventUtil.createTableExportEvent();","sys_class_name":"sysevent_script_action","sys_id":"23b8d92eec261110f877c235d12577a5","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_23b8d92eec261110f877c235d12577a5","sys_updated_by":"maint","sys_created_on":"2022-10-17 23:23:43","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SC Event - Export","event_name":"sn_vsc.sc_security_export","sys_name":"SC Event - Export","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","order":"160","sys_policy":"read"},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2014-05-30 16:21:07","sys_domain_path":"","script":"// current: GlideRecord - event scheduled on behalf of (incident for example)\n// event: GlideRecord - sysevent that caused this to be invoked\nliveFeedUpdate();\n\nfunction liveFeedUpdate() {\n   var fields = getChangedFields();\n   var notificationIds = getNotificationIds();\n   var updateCount = notificationIds.get(notificationIds.size()-1);\n   if(current.sys_mod_count != updateCount)\n        rollback(current, updateCount);\n   // pass current, changed fields and condition matched notification ids\n   new GlideappLiveFeedEventHandler().processAsync(current, fields, notificationIds);\n}\n\n// changed fields string is a serialized ArrayList [a,b,c]\nfunction getChangedFields() {\n  var fields = toArray(new String(event.parm1));\n  return fields;\n}\n\n// notification ids serialized as ArrayList [id1,id2,...,sys_mod_count]\nfunction getNotificationIds() {\n  var notificationIds = toArray(new String(event.parm2));\n  return notificationIds;\n}\n\nfunction toArray(arrayStr) {\n  if (arrayStr.length > 3) {\n    arrayStr = arrayStr.substring(1, arrayStr.length - 1);\n    arrayStr = GlideStringUtil.split(arrayStr, \",\");\n  } else\n      arrayStr = new GlideStringList();\n  return arrayStr;\n}\n\nfunction rollback(gr, updateCount) {\n   var r = new GlideRecordRollback();\n   r.toVersion(gr, updateCount);\n}","sys_class_name":"sysevent_script_action","sys_id":"242f847c370121009a80a0ffbe41f199","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/50442b7b04312210559073c06a02f7ef","value":"50442b7b04312210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_242f847c370121009a80a0ffbe41f199","sys_updated_by":"admin","sys_created_on":"2014-05-30 03:12:38","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Live Feed Update Asynchronous Processing","event_name":"live_feed.update.async.process","sys_name":"Live Feed Update Asynchronous Processing","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-02-13 07:36:19","sys_domain_path":"/","script":"sn_one_extend.OneExtendUtil.processCancelEvaluationRun(current.sys_id);","sys_class_name":"sysevent_script_action","sys_id":"24e4d3b393eb52106f9d4b2f348918cf","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7c84affb04312210559073c06a02f73d","value":"7c84affb04312210559073c06a02f73d"},"sys_update_name":"sysevent_script_action_24e4d3b393eb52106f9d4b2f348918cf","sys_updated_by":"admin","sys_created_on":"2025-02-13 07:36:07","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"OneExtend Cancel Eval Run Async","event_name":"oneextend.cancel.evalrun.async","sys_name":"OneExtend Cancel Eval Run Async","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"8","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-07-14 05:24:45","sys_domain_path":"","sys_class_name":"sysevent_script_action","sys_id":"25a7c6d0532310101553ddeeff7b124b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c69d2bff04352210559073c06a02f736","value":"c69d2bff04352210559073c06a02f736"},"sys_update_name":"sysevent_script_action_25a7c6d0532310101553ddeeff7b124b","sys_updated_by":"admin","sys_created_on":"2020-09-25 11:25:58","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Publish a draft catalog item","event_name":"sc_publish_draft_item","sys_name":"Publish a draft catalog item","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"protected"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-10-09 14:48:11","sys_domain_path":"","script":"logPassword2ImportUsage();\n\nfunction logPassword2ImportUsage() {\n    var tableList = event.parm1.split(',');\n    if (tableList.length == 0)\n        return;\n\n    var GCF_CATEGORY = 'import_exports';\n    var IMPORT_USAGE_COLLECTION_POINT = 'password2_imports';\n    var IMPORT_USAGE_EVENT = 'password2_import_run';\n    var IS_LEGACY = \"is_legacy_password2=true\";\n    var PARENT_MODULE_ID = '7d7ee9e3b7030010ebf7082e7e11a979';\n    var password2CryptoScopeList = getPassword2ModuleScopeList();\n\n    var password2Table = [];\n    var password2TripleDESTable = [];\n\n    var sysDictionaryGr = new GlideRecord('sys_dictionary');\n    sysDictionaryGr.addQuery('internal_type', 'password2');\n    sysDictionaryGr.addQuery('name', 'IN', tableList);\n    sysDictionaryGr.query();\n    while (sysDictionaryGr.next()) {\n        var scope = sysDictionaryGr.getValue('sys_package');\n        var tableName = sysDictionaryGr.getValue('name');\n        var isLegacy = null;\n        if (sysDictionaryGr.getValue('attributes') != null) {\n            isLegacy = sysDictionaryGr.getValue('attributes').contains(IS_LEGACY);\n        }\n        var isScopeNotPresentInPW2Submodule = password2CryptoScopeList.length == 0 || (password2CryptoScopeList.length > 0 && !password2CryptoScopeList.includes(scope));\n        if (!password2TripleDESTable.includes(tableName) && isLegacy && isScopeNotPresentInPW2Submodule) {\n            password2TripleDESTable.push(tableName);\n        } else if (!password2Table.includes(tableName)) {\n            password2Table.push(tableName);\n        }\n    }\n\n    if (password2Table.length > 0 || password2TripleDESTable.length > 0) {\n        var sampleMap = new GCFSampleMap();\n        sampleMap.put('password2_kmf_tables', password2Table.join(','));\n        sampleMap.put('password2_kmf_tables_count', password2Table.length.toString());\n        sampleMap.put('password2_triple_des_tables', password2TripleDESTable.join(','));\n        sampleMap.put('password2_triple_des_tables_count', password2TripleDESTable.length.toString());\n        GCFCollector.recordUsageEvent(GCF_CATEGORY, IMPORT_USAGE_COLLECTION_POINT, IMPORT_USAGE_EVENT, sampleMap);\n    }\n\n    function getPassword2ModuleScopeList() {\n        var password2ModuleScopeList = [];\n        var gr = new GlideRecord('sys_kmf_crypto_module');\n        gr.addQuery('parent_crypto_module', PARENT_MODULE_ID);\n        gr.query();\n        while (gr.next()) {\n            password2ModuleScopeList.push(gr.getValue('sys_package'));\n        }\n        return password2ModuleScopeList;\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"2825ac954f3131103bcb2894c8c7142b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3d53e77304312210559073c06a02f70d","value":"3d53e77304312210559073c06a02f70d"},"sys_update_name":"sysevent_script_action_2825ac954f3131103bcb2894c8c7142b","sys_updated_by":"admin","sys_created_on":"2023-10-09 08:01:16","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Log Password2 Import Usage","event_name":"loader.tables.processed","sys_name":"Log Password2 Import Usage","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"200","sys_policy":""},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-05-30 12:12:38","sys_domain_path":"/","script":"\n\t\t(function processEvent(event) {\n\t\t\tvar params = event.getValue('parm1').split(';');\n\n\t\t\tif(params.length > 1) {\n\t\t\t\tdeleteKpiFromFinding('promin_finding_def', params[0]);\n\t\t\t\tdeleteKpiFromFinding('promin_automated_finding', params[0]);\n\t\t\t}\n\t\t})(event);\n\n\n\t\tfunction deleteKpiFromFinding(tableName, kpiToDelete) {\n\t\t\tvar findingGr = new GlideRecord(tableName);\n\t\t\tfindingGr.addQuery('impacted_kpis', 'CONTAINS', kpiToDelete);\n\t\t\tfindingGr.query();\n\n\t\t\twhile(findingGr.next()) {\n\t\t\t\tvar impactedKpis = findingGr.getValue('impacted_kpis');\n\t\t\t\tvar items = impactedKpis.split(',');\n\n\t\t\t\titems = items.filter(item => item != kpiToDelete);\n\n\t\t\t\tfindingGr.setValue('impacted_kpis', items.join(','));\n\t\t\t\tfindingGr.update();\n\t\t\t}\n\t\t}\n\t\t","sys_class_name":"sysevent_script_action","sys_id":"28c3866807220210036656ee1ad300dd","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aa76333f04b52210559073c06a02f764","value":"aa76333f04b52210559073c06a02f764"},"sys_update_name":"sysevent_script_action_28c3866807220210036656ee1ad300dd","sys_updated_by":"maint","sys_created_on":"2024-05-30 10:34:42","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update promin findings","event_name":"pa.delete.indicator","sys_name":"Update promin findings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-03-29 18:04:41","sys_domain_path":"","script":"var script=\"var input = \"+event.parm1+\";new SNC.PACorrelationCalculator(JSON.stringify(input)).runCorrelationCalculator();\";\nvar gr = new GlideRecord('sys_trigger');\ngr.initialize();\ngr.setValue(\"trigger_type\", 0); //trigger_type 0 is for Run Once.\ngr.setValue(\"script\", script);\ngr.setValue(\"job_id\", \"81c92ce9c0a8016400e5f0d2f784ea78\"); //set job_id for RunScriptJob\ngr.setValue(\"name\", \"CalculateCorrelation\");\nvar sysId = gr.insert();\ngs.info(\"sys_trigger record CalculateCorrelation inserted for correlation calculation with sys_id:\" + sysId);","sys_class_name":"sysevent_script_action","sys_id":"2a2aaf76a3312110891437af26fcda66","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/539a23bf04f12210559073c06a02f7aa","value":"539a23bf04f12210559073c06a02f7aa"},"sys_update_name":"sysevent_script_action_2a2aaf76a3312110891437af26fcda66","sys_updated_by":"admin","sys_created_on":"2023-03-29 18:04:41","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Trigger Correlation Calculation","event_name":"pa.dc.collect.key_influencer","sys_name":"Trigger Correlation Calculation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.glide.kmf.global'","sys_mod_count":"6","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-16 17:32:21","sys_domain_path":"","script":"var aclGr = new GlideRecord('sys_security_acl');\n// specific ACLs listed per DEF0031632\naclGr.addQuery('sys_id', 'IN', '5f1fa3b9534610102718ddeeff7b12e6, 8bef6bb9534610102718ddeeff7b128f, 2540fbb9534610102718ddeeff7b1278, a7507fb9534610102718ddeeff7b1282, 28707fb9534610102718ddeeff7b127c, 6b9033f9534610102718ddeeff7b12ca, d73c75a5534210102718ddeeff7b121e, 2cc97d65534210102718ddeeff7b1214, e3a13bf9534610102718ddeeff7b1287, 9991f7f9534610102718ddeeff7b12f1, 73b17bf9534610102718ddeeff7b12c1, 2d22bbf9534610102718ddeeff7b1299, 6d32bff9534610102718ddeeff7b1267, 7952fff9534610102718ddeeff7b1279, 246afd65534210102718ddeeff7b12ec, d672333d534610102718ddeeff7b1265, 2fb2b33d534610102718ddeeff7b126a');\naclGr.query();\nwhile (aclGr.next()) {\n    aclGr.setValue('active', true);\n    aclGr.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"2b7e022253c120102718ddeeff7b1261","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7f83a3f304312210559073c06a02f787","value":"7f83a3f304312210559073c06a02f787"},"sys_update_name":"sysevent_script_action_2b7e022253c120102718ddeeff7b1261","sys_updated_by":"admin","sys_created_on":"2020-12-16 01:10:55","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate Report View ACLs for KMF","event_name":"plugin.activated","sys_name":"Activate Report View ACLs for KMF","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1=='com.glide.password_policy'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-17 11:53:48","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '219b389173231010616ca9843cf6a780,4088b05173231010616ca9843cf6a77a');\naclGR.setValue('active', true);\naclGR.updateMultiple();","sys_class_name":"sysevent_script_action","sys_id":"2c1b61c773012010fdbd04fbc4f6a75a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f915e73304712210559073c06a02f7e1","value":"f915e73304712210559073c06a02f7e1"},"sys_update_name":"sysevent_script_action_2c1b61c773012010fdbd04fbc4f6a75a","sys_updated_by":"admin","sys_created_on":"2020-12-17 11:53:48","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs for Pwd Policy","event_name":"plugin.activated","sys_name":"Activate report_view ACLs for Pwd Policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"10","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-03-29 06:56:07","sys_domain_path":"/","script":"gs.log(\"Calling ProminMLSolutionSuccessHandler for \"+event.getUniqueValue());  \nSNC.ProcessOptimization.handleMLSuccessfulTrainingEvent(event.instance,true);\ngs.log(\"Finished ProminMLSolutionSuccessHandler for \"+event.getUniqueValue());","sys_class_name":"sysevent_script_action","sys_id":"2cc3e2a0ff7002107b66e835f2cb14e1","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aa76333f04b52210559073c06a02f764","value":"aa76333f04b52210559073c06a02f764"},"sys_update_name":"sysevent_script_action_2cc3e2a0ff7002107b66e835f2cb14e1","sys_updated_by":"admin","sys_created_on":"2024-03-04 12:29:19","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"ProminMLSolutionSuccessHandler","event_name":"ml_solution.training.successful","sys_name":"ProminMLSolutionSuccessHandler","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-04-05 09:52:18","sys_domain_path":"","script":"try{\n\tvar actSubCtx = ActivitySubscriptionContext.getContext();\n\tvar pullService = actSubCtx.getService( ActivityConstants.ACTIVITY_STREAM_PULL_SERVICE);\n\tif(!pullService.populateActivitiesForSubscriber(current, event.parm1))\n\t\tgs.error('ACTSUB-ERROR: Error while updating stream through event');\n}\ncatch(e){\n\tgs.error('ACTSUB-ERROR: Error while updating stream through event ' + e.message);\n}","sys_class_name":"sysevent_script_action","sys_id":"2ce0794fcb6200100f16292df8076dfc","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/27dc6bfb04352210559073c06a02f739","value":"27dc6bfb04352210559073c06a02f739"},"sys_update_name":"sysevent_script_action_2ce0794fcb6200100f16292df8076dfc","sys_updated_by":"admin","sys_created_on":"2020-01-29 09:31:18","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Fanout activities for a stream","event_name":"sn_actsub.activities_fanout_to_stream","sys_name":"Fanout activities for a stream","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-01-23 02:18:23","sys_domain_path":"/","script":"new sn_cmdb_ws.CMDBWsDMTaskAccessor().updateTaskSuccessPercent(event.parm1);","sys_class_name":"sysevent_script_action","sys_id":"2d1f4d9f77333110ee0d0cc2fa5a99c6","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sysevent_script_action_2d1f4d9f77333110ee0d0cc2fa5a99c6","sys_updated_by":"admin","sys_created_on":"2024-01-23 02:18:23","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update certification task success percen","event_name":"sn_cmdb_ws.cert_attribute.status.updated","sys_name":"Update certification task success percen","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"19","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-03-10 14:58:55","sys_domain_path":"","script":"/**\n * Handles assignment logic defined for Trigger Rules.\n *\n * current is the record that triggered the trigger_rule\n * parm1 is the name of the rule record's table\n * parm2 is the trigger_rule sys_id\n**/\n// vars scope needs to be same as current, which is eventually provided to workflow API\nvar vars = {};\n(function(current, vars) {\n\tnew TriggerRule()\n\t\t.setEventName(event.name + \"\")\n\t\t.setRule(event.parm2 + \"\")\n\t\t.setRecord(current)\n\t\t.setWorkflowVars(vars)\n\t\t.process();\n})(current, vars);","sys_class_name":"sysevent_script_action","sys_id":"2d7a7000eb301100fcfb858ad106fe42","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c6ca73b04352210559073c06a02f754","value":"8c6ca73b04352210559073c06a02f754"},"sys_update_name":"sysevent_script_action_2d7a7000eb301100fcfb858ad106fe42","sys_updated_by":"admin","sys_created_on":"2013-10-01 00:00:00","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Process Trigger Rule","event_name":"trigger_rule.process","sys_name":"Process Trigger Rule","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"14","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-05-31 01:44:38","sys_domain_path":"/","script":"const steps = new Set(JSON.parse(event.parm1).map(step => step.toLowerCase()));\nconst args = JSON.parse(event.parm2);\nconst subscriptionId = args.subscriptionId;\nconst groupIds = args.groupIds;\n\nif (steps && steps.size > 0 &&\n    subscriptionId && subscriptionId.length > 0 &&\n    groupIds && groupIds.length > 0) {\n    const groupAllocationService = new sn_sub_man.GroupAllocationService();\n\n    if (steps.has('addgroupstosubscription'))\n        groupAllocationService.addGroupsToSubscription(groupIds, subscriptionId);\n\n    if (steps.has('addgroupmemberstosubscription'))\n        groupAllocationService.addGroupMembersToSubscription(groupIds, subscriptionId);\n\n    if (steps.has('executepartialupdateforgroups'))\n        groupAllocationService.executePartialUpdateForGroups(groupIds);\n}","sys_class_name":"sysevent_script_action","sys_id":"2da77368ff228a10d68b65d7d3b8fe77","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_update_name":"sysevent_script_action_2da77368ff228a10d68b65d7d3b8fe77","sys_updated_by":"admin","sys_created_on":"2024-05-30 18:28:35","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Add Groups To Subscription","event_name":"sn_sub_man.add_groups_to_subscription","sys_name":"Add Groups To Subscription","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"24","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-02-04 10:03:28","sys_domain_path":"","script":"knowledgeView();\nfunction knowledgeView() {\n  var kv = new GlideRecord(\"kb_use\");\n  kv.initialize();\n  kv.used = true;\n  kv.user.setValue(event.parm2);\n  kv.article = event.instance;\n  var params = JSON.parse(event.parm1);\n  kv.session_id = params.glideSessionId;\n  if(params.hasOwnProperty(\"ts_query_id\")){\n\t  kv.search_id = params.ts_query_id;\n  }\n  if(params.hasOwnProperty(\"domainId\")){\n\t  kv.sys_domain = params.domainId;\n  }\n  kv.insert();\n  incrementUseCount(event.instance);\n}\n\nfunction incrementUseCount(article){\n\tvar gr = new GlideRecord('kb_knowledge');\n\tif(gr.get(article)){\n\t\tvar currentCount = gr.getValue('use_count');\n\t\tif(!currentCount)\n\t\t\tcurrentCount = 0;\n\t\tgr.setValue('use_count',parseInt(currentCount)+1);\n\t\tgr.setSystem(true);\n\t\tgr.setWorkflow(false);\n\t\tgr.update();\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"2e174aaa0a0a0b5201bcccdcf661c41b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/2fe727ff04b12210559073c06a02f7dd","value":"2fe727ff04b12210559073c06a02f7dd"},"sys_update_name":"sysevent_script_action_2e174aaa0a0a0b5201bcccdcf661c41b","sys_updated_by":"admin","sys_created_on":"2009-06-29 22:16:34","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Knowledge Use","event_name":"kb.use","sys_name":"Knowledge Use","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"current.resolution_code == 'fix_applied' || current.resolution_code == 'risk_accepted'","sys_mod_count":"29","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-09-28 11:23:14","sys_domain_path":"","script":"var ON_HOLD_REASON_AWAITING_PROBLEM = '3';\nvar CLOSE_CODE_SOLVED_PERMANENTLY = \"Solved (Permanently)\";\n\nif (GlidePluginManager.isActive('com.snc.best_practice.incident.sandiego')) {\n    CLOSE_CODE_SOLVED_PERMANENTLY = \"Resolved by problem\";\n}\nvar incident = new GlideRecord('incident');\nincident.addQuery('problem_id', current.getUniqueValue());\nincident.addQuery('state', '=', IncidentState.AWAITING_PROBLEM);\nincident.addQuery('hold_reason', '=', ON_HOLD_REASON_AWAITING_PROBLEM);\nincident.query();\n\nif (current.resolution_code == 'fix_applied') {\n    var fixNotes = \"[code]\" + current.fix_notes + \"[/code]\";\n    var resolutionNotes = gs.getMessage(\"Related problem {0} closed.\", [current.number]);\n    while (incident.next()) {\n        incident.work_notes = fixNotes;\n        incident.close_code = CLOSE_CODE_SOLVED_PERMANENTLY;\n        incident.close_notes = resolutionNotes;\n        incident.state = IncidentState.RESOLVED;\n        incident.update();\n        gs.eventQueue('incident.resolved_by_problem', incident, current.number);\n    }\n} else if (current.resolution_code == 'risk_accepted') {\n    var workNotes = gs.getMessage(\"Problem team has accepted the risk of not fixing this problem {0} \\n \\n {1}\", [current.number, current.close_notes]);\n    while (incident.next()) {\n        incident.work_notes = workNotes;\n        incident.update();\n        gs.eventQueue('incident.updated_by_problem', incident, current.number);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"315aa414534123004247ddeeff7b1240","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d81b6b3304352210559073c06a02f76e","value":"d81b6b3304352210559073c06a02f76e"},"sys_update_name":"sysevent_script_action_315aa414534123004247ddeeff7b1240","sys_updated_by":"admin","sys_created_on":"2018-10-05 09:24:26","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update Incident when Problem closes","event_name":"problem.state_change","sys_name":"Update Incident when Problem closes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2016-10-24 17:23:50","sys_domain_path":"","script":"GlideController.removeGlobal(\"__collision_detector__\");\n","sys_class_name":"sysevent_script_action","sys_id":"3192fc6353222200dcba29cac2dc342b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/afc7e7bf04b12210559073c06a02f71d","value":"afc7e7bf04b12210559073c06a02f71d"},"sys_update_name":"sysevent_script_action_3192fc6353222200dcba29cac2dc342b","sys_updated_by":"admin","sys_created_on":"2016-10-24 17:09:26","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Clear Collision Detector","event_name":"system.upgraded","sys_name":"Clear Collision Detector","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"9999","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-20 07:28:01","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.password_expiration_reminder', false)) {\n    createExpirationRecords();\n}\n\nfunction createExpirationRecords() {\n    var userSysId = event.parm1;\n    var processSysIds = new PasswordResetScopedUtil().getProcessIdsByUserId(userSysId);\n    var processSysId, passwordExpiryDays, expirationTime, queryString = \"sys_idIN\";\n    queryString = queryString.concat(processSysIds);\n\n    var processGr = new GlideRecord(\"pwd_process\");\n    processGr.addActiveQuery();\n    processGr.addQuery(\"send_expiration_reminder\", true);\n    processGr.addEncodedQuery(queryString);\n    processGr.query();\n\n    while (processGr.next()) {\n        try {\n            new global.PwdExpirationUtils().updatePasswordExpirationDetails(userSysId, processGr.getUniqueValue());\n        } catch (ex) {\n            gs.error(\"[Script action: Create Expiration records for a user with sys_id \" + userSysId + \"] execution error - \" + ex);\n        }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"31e1ce33531130106bdaddeeff7b1294","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_31e1ce33531130106bdaddeeff7b1294","sys_updated_by":"admin","sys_created_on":"2021-07-19 04:05:41","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Expiration records for a user","event_name":"sys_user.insert","sys_name":"Create Expiration records for a user","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-19 13:07:08","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.enrollment_snapshot', true)) {\n    deleteEnrollmentSnapshot();\n}\n\nfunction deleteEnrollmentSnapshot() {\n    try {\n        new PwdEnrollSnapshotUtil().deleteEnrollmentSnapshotsForInValidVerifications();\n    } catch (e) {\n        gs.error(\"[Script action: Delete enrollment snaps for a verification ] - \" + e.getMessage());\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"32746b2f43822110d68db0e245b8f22f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_32746b2f43822110d68db0e245b8f22f","sys_updated_by":"admin","sys_created_on":"2023-04-13 11:53:39","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Delete enroll snaps for a verification","event_name":"pwd_verification.delete","sys_name":"Delete enroll snaps for a verification","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-06-15 23:40:51","sys_domain_path":"","script":"/**\n *   parm1 - comma-separated list of table names loaded from update set\n *   parm2 - unused\n */\nif (event.parm1.includes('sys_atf_test')) {\n\tnew sn_atf.TestSuiteProcessor().refreshAllTestSuites();\n}","sys_class_name":"sysevent_script_action","sys_id":"3331fa90733213002cb26fbc1bf6a712","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/18792f3b04f12210559073c06a02f71d","value":"18792f3b04f12210559073c06a02f71d"},"sys_update_name":"sysevent_script_action_3331fa90733213002cb26fbc1bf6a712","sys_updated_by":"admin","sys_created_on":"2018-06-15 22:54:10","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"ATF On Load Record Update","event_name":"loader.tables.processed","sys_name":"ATF On Load Record Update","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-07-09 15:46:42","sys_domain_path":"/","sys_class_name":"sysevent_script_action","sys_id":"339f308fc3662210ed4bd50d05013104","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/global","value":"global"},"sys_update_name":"sysevent_script_action_339f308fc3662210ed4bd50d05013104","sys_updated_by":"developer.program.hop@snc","sys_created_on":"2025-07-09 15:46:42","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Track Clicks on PDI homepage","event_name":"dev.api_click","sys_name":"Track Clicks on PDI homepage","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"developer.program.hop@snc","order":"100","sys_policy":"protected"},{"condition_script":"","sys_mod_count":"3","active":"false","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 07:32:45","sys_domain_path":"","script":"var scriptPrefix = \"fix_migrate_clear_value_actions\";\n\ngs.info(scriptPrefix + \"Started executing the script\");\nmoveClearValueData();\ngs.info(scriptPrefix + \"Ended executing the script\");\n\nfunction moveClearValueData() {\n    var clearValueTypes = ['25', '33'];\n    var variableIds = [];\n    var clearValueVariableIds = [];\n    var gr1 = new GlideRecord(\"catalog_ui_policy_action\");\n    gr1.setWorkflow(false);\n    gr1.get(\"cleared\", true);\n    while (gr1.next())\n        variableIds.push(gr1.getValue(\"catalog_variable\").substring(3));\n\n    var variable = new GlideRecord(\"item_option_new\");\n    variable.addQuery(\"sys_id\", variableIds);\n    variable.addQuery(\"type\", clearValueTypes);\n    variable.setWorkflow(false);\n    variable.query();\n    while (variable.next())\n        clearValueVariableIds.push(\"IO:\" + variable.getUniqueValue());\n\n    var gr = new GlideRecord(\"catalog_ui_policy_action\");\n    gr.addQuery(\"cleared\", true);\n    gr.addQuery(\"catalog_variable\", \"NOT IN\", clearValueVariableIds);\n    gr.setWorkflow(false);\n    gr.setValue(\"value_action\", \"clear_value\");\n    gr.setValue(\"cleared\", \"\");\n    gr.setWorkflow(false);\n\t// Skip updating the version field\n    GlideTransaction.get().setAttribute(\"catalog_wizard_origin\", \"default\");\n    gr.updateMultiple();\n}\n\n//Deactivate the script action after first run\nvar action = new GlideRecord(\"sysevent_script_action\");\nif (action.get(\"34878d54777131101a80bebc9f5a9961\")) {\n\taction.setValue(\"active\", false);\n\taction.update();\n}\n","sys_class_name":"sysevent_script_action","sys_id":"34878d54777131101a80bebc9f5a9961","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f828ab3304f12210559073c06a02f7b7","value":"f828ab3304f12210559073c06a02f7b7"},"sys_update_name":"sysevent_script_action_34878d54777131101a80bebc9f5a9961","sys_updated_by":"system","sys_created_on":"2023-10-06 08:11:40","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Migrate clear value actions","event_name":"system.upgraded","sys_name":"Migrate clear value actions","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-09-17 18:57:38","sys_domain_path":"","script":"sn_pad.PDAutomationProvider.synchronizeProcess(event.parm1, event.parm2);","sys_class_name":"sysevent_script_action","sys_id":"34fd52c443701210bb57006e99b8f235","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/903e67b304752210559073c06a02f757","value":"903e67b304752210559073c06a02f757"},"sys_update_name":"sysevent_script_action_34fd52c443701210bb57006e99b8f235","sys_updated_by":"admin","sys_created_on":"2024-09-17 18:57:38","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Synchronize Playbook to Update Set","event_name":"sn_pad.synchronize","sys_name":"Synchronize Playbook to Update Set","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"'false' != gs.getProperty(\"com.glide.cs.collab.enabled\", true)","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-01-10 23:24:07","sys_domain_path":"/","script":"sn_collab.CollabChatScriptObject.registerResponder();","sys_class_name":"sysevent_script_action","sys_id":"36d7cb7143102110d1064006fbb8f258","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sysevent_script_action_36d7cb7143102110d1064006fbb8f258","sys_updated_by":"admin","sys_created_on":"2023-01-10 23:24:07","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Register Sidebar Unread Responder","event_name":"Sidebar.register.responder","sys_name":"Register Sidebar Unread Responder","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"69","active":"true","description":"","sys_overrides":"","sys_updated_on":"2015-06-26 18:41:18","sys_domain_path":"","script":"// current: GlideRecord - event scheduled on behalf of (incident for example) \n// event: GlideRecord - sysevent that caused this to be invoked\nmetricUpdate();\n\nfunction metricUpdate() {\n   var fields = getChangedFields();\n   var updateCount = new String(event.parm2);\n   var gr = getDefinitions();\n\n   var didRollback = false;\n   while (gr.next()) {\n      if (!fields.contains(gr.field))\n         continue; \n      \n\t  if (!didRollback){\n\t     rollback(current, updateCount);\n\t\t didRollback = true;\n\t  }\n\t   \n      var type = gr.type;\n      if (type == 'field_value_duration') \n         setDuration(gr, gr.field, current[gr.field]);\n      else if (type == 'calculation' ) \n         scriptCalculation(gr);\n      else \n         gs.log('>>> skipping: ' + gr.name);\n   }\n}\n\nfunction scriptCalculation(gr) {\n  definition = gr;\n  eval(gr.script);\n}\n\nfunction setDuration(gr, field, value) {\n  var mi = new MetricInstance(gr, current);\n  mi.process(field);\n}\n\n// changed fields string is a serialized ArrayList [a,b,c]\nfunction getChangedFields() {\n  var fields = new String(event.parm1);\n  if (fields.length > 3) {\n    fields = fields.substring(1, fields.length - 1);\n    fields = GlideStringUtil.split(fields, \",\");\n  }\n  return fields;\n}\n\nfunction getDefinitions() {\n  var gr = new GlideRecord('metric_definition');\n  gr.addActiveQuery(); \n  var tables = GlideDBObjectManager.getTables(current.getTableName());\n  gr.addQuery('table', tables); \n  gr.orderBy('order');\n  gr.query();\n  return gr; \n}\n\nfunction rollback(gr, updateCount) {\n   var r = new GlideRecordRollback(); \n   r.toVersion(gr, updateCount); \n}","sys_class_name":"sysevent_script_action","sys_id":"370039f4c0a808ae00b44eeae13c0497","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f909a3b704f12210559073c06a02f7a8","value":"f909a3b704f12210559073c06a02f7a8"},"sys_update_name":"sysevent_script_action_370039f4c0a808ae00b44eeae13c0497","sys_updated_by":"admin","sys_created_on":"2008-12-14 19:37:14","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Metric Update","event_name":"metric.update","sys_name":"Metric Update","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"14","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-03-24 06:06:07","sys_domain_path":"/","script":"updateWfSolution();\n\nfunction updateWfSolution() {\n\n\tvar configGr = new GlideRecord(AutoResolutionConstants.CONFIG_TABLE_NAME);\n\tconfigGr.addQuery(AutoResolutionConstants.CONFIGURATION_TABLENAME_FIELD_NAME, AutoResolutionConstants.INCIDENT_TABLE_NAME);\n\tconfigGr.query();\n\n\tif (configGr.next()) {\n\t\t/* Query Workflow solution, WF will not be active in Utah, so to support Tokyo/Utah -> V upgrade we \n\t\t shouldn't do the active check */\n\t\tvar workflowConfigGr = new GlideRecord(AutoResolutionConstants.CONFIG_LANGUAGE_TABLE_NAME);\n\t\tworkflowConfigGr.addQuery(AutoResolutionConstants.CONFIGURATION_FIELD_NAME, configGr.getUniqueValue());\n\t\tworkflowConfigGr.addQuery('capability', AutoResolutionConstants.ML_CAPBILITIES.AGENT_ZERO_WORKFLOW);\n\t\tworkflowConfigGr.query();\n\n\t\t// Query Composite solution\n\t\tvar languageConfigGr = new GlideRecord(AutoResolutionConstants.CONFIG_LANGUAGE_TABLE_NAME);\n\t\tlanguageConfigGr.addQuery(AutoResolutionConstants.CONFIGURATION_FIELD_NAME, configGr.getUniqueValue());\n\t\tlanguageConfigGr.addQuery('capability', AutoResolutionConstants.ML_CAPBILITIES.COMPOSITE);\n\t\tlanguageConfigGr.query();\n\t\tvar compositeLanguageExists = languageConfigGr.next();\n\t\n\n\t\t// Workflow solution already exists, and no Compoite solution so update (Tokyo/Utah -> V upgrade)\n\t\t// loop through all languages of workflow solution\n\t\twhile (workflowConfigGr.next() && !compositeLanguageExists){\n\t\t\tgs.info(\"Executing IAR Script Action: Update IAR workflow solution\");\n\t\t\tvar workflowSolutionName = workflowConfigGr.getValue('ml_solution_name');\n\n\t\t\t// Get properties from solution\n\t\t\ttry {\n\t\t\t\tvar workflowSolution = sn_ml.AgentZeroSolutionStore.get(workflowSolutionName);\n\t\t\t\tvar properties = workflowSolution.getProperties();\n\t\t\t\tvar propertiesJson = JSON.parse(properties);\n\t\t\t}\n\t\t\tcatch (ex) {\n\t\t\t\tgs.print('Exception caught: ' + ex.getMessage());\n\t\t\t}\n\n\t\t\t//Update Workflow solution\n\t\t\ttry {\n\t\t\t\tvar newSolution = new sn_ml.AgentZeroSolution({\n\t\t\t\t\t'label': propertiesJson['label'],\n\t\t\t\t\t'domainName': propertiesJson['domainName'],\n\t\t\t\t\t'processingLanguage': propertiesJson['processingLanguage'],\n\t\t\t\t\t'schedulingInfo': {\n\t\t\t\t\t\t'mluc': propertiesJson['schedulingInfo']['mluc']\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tsn_ml.AgentZeroSolutionStore.update(workflowSolutionName, newSolution);\n\n\t\t\t\t//Train the updated solution\n\t\t\t\tvar script = \"var configLangGr = new GlideRecord(AutoResolutionConstants.CONFIG_LANGUAGE_TABLE_NAME); \" +\n\t\t\t\t\t\"configLangGr.get(\\\"\" + workflowConfigGr.getUniqueValue() + \"\\\"); \" +\n\t\t\t\t\t\"var mlHelper = new AutoResolutionMLHelper(\\\"\" + configGr.getUniqueValue() + \"\\\"); \" +\n\t\t\t\t\t\"var result = mlHelper.trainSolution(\\\"\" + workflowSolutionName + \"\\\", configLangGr); \" +\n\t\t\t\t\t\"if (result.status === 'error') \" +\n\t\t\t\t\t\"gs.warn(\\\"Executing IAR fix script: error occurred during training workflow solution {0}\\\", result.msg); \" +\n\t\t\t\t\t\"else {\" +\n\t\t\t\t\t\"mlHelper.toggleScheduleJobActive(true); \" +\n\t\t\t\t\t\"gs.info(\\\"Executing IAR fix script: Successfully re-trained workflow solution and made the legacy auto-resolution solution inactive.\\\"); }\";\n\n\t\t\t\tvar solutionSysTrigger = new GlideRecord(\"sys_trigger\");\n\t\t\t\tsolutionSysTrigger.initialize();\n\t\t\t\tsolutionSysTrigger.setValue(\"name\", 'Re-train IAR wf solution');\n\t\t\t\tsolutionSysTrigger.setValue(\"script\", script);\n\t\t\t\tsolutionSysTrigger.setValue(\"trigger_type\", 0);\n\t\t\t\tsolutionSysTrigger.insert();\n\t\t\t}\n\t\t\tcatch (ex) {\n\t\t\t\tgs.print('Exception caught: ' + ex.getMessage());\n\t\t\t}\n\t\t}\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"381cbea4f7231110a8ea9ef0e3bfd6f0","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sysevent_script_action_381cbea4f7231110a8ea9ef0e3bfd6f0","sys_updated_by":"admin","sys_created_on":"2022-11-30 18:40:42","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update IAR workflow solution","event_name":"system.upgraded","sys_name":"Update IAR workflow solution","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"gs.getProperty(\"glide.sc.policy.update_action_names\", \"false\") == \"true\"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-10-21 19:36:18","sys_domain_path":"","script":"(function() {\n\tvar job = new GlideRecord('sysauto_script');\n\tif (job.get('name', 'Update catalog ui policy action names for variables and sets'))\n\t\tSncTriggerSynchronizer.executeNow(job);\n}());","sys_class_name":"sysevent_script_action","sys_id":"388113fe5f20001064301f9f2f7313c5","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f828ab3304f12210559073c06a02f7b7","value":"f828ab3304f12210559073c06a02f7b7"},"sys_update_name":"sysevent_script_action_388113fe5f20001064301f9f2f7313c5","sys_updated_by":"admin","sys_created_on":"2019-10-21 11:51:54","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update catalog policy actions names","event_name":"system.upgraded","sys_name":"Update catalog policy actions names","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-07-01 09:01:13","sys_domain_path":"/","script":"var progressId = event.parm1;\nvar input = JSON.parse(event.parm2);\nif (input && input.action) {\n\tvar result = {};\n\tvar util = new sn_cmdb_ws.CMDBAttestationUtil();\n\tresult = util.performAttestationAction(\n\t\tinput.taskSysId,\n\t\tinput.sysIds,\n\t\tinput.action,\n\t\tinput.userComment,\n\t\tinput.allRecordsSelected,\n\t\tinput.currentAttestationStatus,\n\t\tinput.excludedSysIds,\n\t\tprogressId\n\t);\n\tvar progressGr = new sn_cmdb_ws.CMDBWsProgressMonitorUtil().getProgressById(progressId);\n\tif (progressGr) {\n\t\tprogressGr.setValue('result', JSON.stringify(result));\n\t\tprogressGr.update();\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"389a4a3e534f02106adfddeeff7b1219","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sysevent_script_action_389a4a3e534f02106adfddeeff7b1219","sys_updated_by":"admin","sys_created_on":"2024-07-01 06:47:04","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Handle attestation action async","event_name":"sn_cmdb_ws.attestationtask.action","sys_name":"Handle attestation action async","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"6","active":"true","description":"","sys_overrides":"","sys_updated_on":"2017-07-13 13:25:36","sys_domain_path":"","script":"SNC.UsageAnalyticsScriptUtils.addAllActivePluginsAnalytic();\nSNC.UsageAnalyticsScriptUtils.addUpgradeDetailsAnalytic();\n","sys_class_name":"sysevent_script_action","sys_id":"390ab0311f1031006d691b220e8b7055","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e36423fb04312210559073c06a02f798","value":"e36423fb04312210559073c06a02f798"},"sys_update_name":"sysevent_script_action_390ab0311f1031006d691b220e8b7055","sys_updated_by":"admin","sys_created_on":"2014-11-10 22:16:41","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Collect all active plugins","event_name":"system.upgraded","sys_name":"Collect all active plugins","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"1000","sys_policy":"read"},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2009-03-24 17:54:01","sys_domain_path":"","script":"fixBooleanDefaultValue(\"sys_ui_policy\", \"global\", \"true\");\r\n\r\nfunction fixBooleanDefaultValue(tablename, fieldname, value) {\r\n    var gr = new GlideRecord(tablename);\r\n    if (gr.isValid()) {\r\n        gs.print(\"setting \" + tablename + \".\" + fieldname + \" Boolean to \" + value + \" if null due to upgrade of plugin: \" + event.parm1);\r\n        gr.addNullQuery(fieldname);\r\n        gr.query();\r\n        while (gr.next()) {\r\n            gr.setValue(fieldname, value);\r\n            gr.update();\r\n        }\r\n    }\r\n}","sys_class_name":"sysevent_script_action","sys_id":"392f6229a681b5f40091679662e243d8","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9543af3304312210559073c06a02f769","value":"9543af3304312210559073c06a02f769"},"sys_update_name":"sysevent_script_action_392f6229a681b5f40091679662e243d8","sys_updated_by":"glide.maint","sys_created_on":"2009-03-24 15:53:38","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Fix sys_ui_policy.global to true After P","event_name":"plugin.upgraded","sys_name":"Fix sys_ui_policy.global to true After P","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2017-12-18 18:57:20","sys_domain_path":"","script":"(function processEvent(event) {\n\n\trecordsCleaner = new SNC.PARecordsCleaner();\n\trecordsCleaner.processBreakdownDelete(event.getValue('parm1'));\n\trecordsCleaner.processBreakdownDeleteForNews(event.getValue('parm1'));\n\n})(event);","sys_class_name":"sysevent_script_action","sys_id":"39c68983d73312004cd2a3b20e610321","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/539a23bf04f12210559073c06a02f7aa","value":"539a23bf04f12210559073c06a02f7aa"},"sys_update_name":"sysevent_script_action_39c68983d73312004cd2a3b20e610321","sys_updated_by":"admin","sys_created_on":"2016-06-08 12:27:38","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Process breakdown delete","event_name":"pa.delete.breakdown","sys_name":"Process breakdown delete","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-11-14 23:36:37","sys_domain_path":"","script":"var isV2 = gs.getProperty('glide.services.dish_v2');\nif (isV2 == 'true') {\n\tSNC.GlideServiceEndpointUpdater.process();\n} else {\n\tnew SNC.GlideServiceStatus().checkAllServicesStatus();\n}","sys_class_name":"sysevent_script_action","sys_id":"3ab4cddf23871010e9d4f4c947bf65f1","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4e646fbb04312210559073c06a02f721","value":"4e646fbb04312210559073c06a02f721"},"sys_update_name":"sysevent_script_action_3ab4cddf23871010e9d4f4c947bf65f1","sys_updated_by":"admin","sys_created_on":"2020-09-09 17:38:31","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Check Glide Services Status","event_name":"plugin.upgraded","sys_name":"Check Glide Services Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"false","description":"","sys_overrides":"","sys_updated_on":"2025-03-13 00:09:19","sys_domain_path":"/","sys_class_name":"sysevent_script_action","sys_id":"3d484ce8ff902210896fffffffffff19","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c3a5dc03c3222210ed4bd50d050131a7","value":"c3a5dc03c3222210ed4bd50d050131a7"},"sys_update_name":"sysevent_script_action_3d484ce8ff902210896fffffffffff19","sys_updated_by":"maint","sys_created_on":"2025-03-11 21:00:41","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"DF Connection State Error","event_name":"data_fabric.error.connector_error","sys_name":"DF Connection State Error","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":"protected"},{"condition_script":"","sys_mod_count":"7","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-23 14:43:37","sys_domain_path":"","script":"new ChangeUtils().createRefreshWorker(event.instance, event.parm1);","sys_class_name":"sysevent_script_action","sys_id":"3e2eb17223a823001488dc1756bf656c","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/32b7af7f04b12210559073c06a02f7fb","value":"32b7af7f04b12210559073c06a02f7fb"},"sys_update_name":"sysevent_script_action_3e2eb17223a823001488dc1756bf656c","sys_updated_by":"admin","sys_created_on":"2018-09-18 13:30:02","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Trigger refresh impacted cis","event_name":"change.refresh_impacted_ci","sys_name":"Trigger refresh impacted cis","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"19","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-03-06 20:58:15","sys_domain_path":"/","script":"/**\n * Handle a loader.tables.processed event when the sys_kmf_module_crypto_spec \n * table is loaded to by generating automatic key exchange requests \n * \n *   parm1 - comma-separated list of table names loaded from update set\n *   parm2 - unused\n */\ngenerateAutoKeyExchangeRequests();\n\nfunction generateAutoKeyExchangeRequests() {\n    // If the KMF crypto spec table was not loaded to,\n    // \tthen there are no new auto key exchange requests to generate.\n    if (!event.parm1.includes('sys_kmf_module_crypto_spec'))\n        return;\n\n    var log = new GSLog(null, 'KMFGenAutoKEReqsAction');\n    log.setLevel(GSLog.DEBUG);\n    log.setLog4J();\n\n    // Prevent automation from generating auto key exchange requests.\n    if (gs.getProperty('glide.test_instance', 'false') == 'true') {\n        log.debug('Determined this is an instance used for automation. ' +\n            'Skipping generation of automatic key exchange requests');\n        return;\n    }\n\n    try {\n        // Generate auto key exchange requests.\n        log.debug('Generating automatic key exchange requests');\n        var jsonOutput = new SNC.KMFAutoKeyExchangeRequestGeneratorAPI().generateAutoKeyExchangeRequests();\n\n        // Log the results.\n        var output = JSON.parse(jsonOutput);\n        if (output.success == 'true') {\n            log.debug('Successfully generated automatic key exchange requests');\n        } else {\n            log.warn('Could not generate automatic key exchange requests because of: ' + output.message);\n        }\n    } catch (err) {\n        log.error('Encountered an error while generating automatic key exchange requests: ' + err);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"3fa3c64543322110fd02d04e45b8f206","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7f83a3f304312210559073c06a02f787","value":"7f83a3f304312210559073c06a02f787"},"sys_update_name":"sysevent_script_action_3fa3c64543322110fd02d04e45b8f206","sys_updated_by":"maint","sys_created_on":"2023-05-12 17:41:43","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Generate Auto KE Requests Event","event_name":"loader.tables.processed","sys_name":"Generate Auto KE Requests Event","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2016-10-24 17:23:44","sys_domain_path":"","script":"GlideController.removeGlobal(\"__collision_detector__\");\n","sys_class_name":"sysevent_script_action","sys_id":"3fd2b0e353222200dcba29cac2dc34fe","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/afc7e7bf04b12210559073c06a02f71d","value":"afc7e7bf04b12210559073c06a02f71d"},"sys_update_name":"sysevent_script_action_3fd2b0e353222200dcba29cac2dc34fe","sys_updated_by":"admin","sys_created_on":"2016-10-24 17:10:22","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Clear Collision Detector","event_name":"system.upgrade.failed","sys_name":"Clear Collision Detector","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"9999","sys_policy":""},{"condition_script":"","sys_mod_count":"17","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"// react to logout and cleanup any sys_poll data that may be left over\r\ncleanupResources(event.instance);\r\n\r\nfunction cleanupResources(id) {\r\n    var gr = new GlideRecord('v_transaction');\r\n    gr.addQuery('snapshot_id', id);\r\n    gr.deleteMultiple();\r\n}\r\n","sys_class_name":"sysevent_script_action","sys_id":"41262babc0a8000600b66c624f4d6db4","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d7c7a7bf04b12210559073c06a02f787","value":"d7c7a7bf04b12210559073c06a02f787"},"sys_update_name":"sysevent_script_action_41262babc0a8000600b66c624f4d6db4","sys_updated_by":"system","sys_created_on":"2008-05-31 22:43:18","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Cleanup Transaction List","event_name":"logout","sys_name":"Cleanup Transaction List","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"49","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-09-16 10:21:22","sys_domain_path":"","script":"var isMadridZboot = GlidePluginManager.isActive('com.snc.best_practice.problem.madrid');\nvar isSanDiegoZboot = GlidePluginManager.isActive('com.snc.best_practice.incident.sandiego');\nvar isWorknoteDefault = gs.getProperty(\"com.snc.incident.communicate_prb_workaround_to_inc_worknotes\", false) === 'true';\n\nvar CLOSE_CODE_KNOWN_ERROR = \"Known error\";\nvar message = \"[code]\" + event.parm1 + \"[/code]\";\nvar incident = new GlideRecord('incident');\nincident.addQuery('problem_id', current.getUniqueValue());\n\nif (isMadridZboot && !isSanDiegoZboot) {\n    incident.addQuery(\"incident_state\", \"<\", IncidentState.RESOLVED);\n    incident.query();\n    while (incident.next()) {\n        isWorknoteDefault ? incident.work_notes.setJournalEntry(current.number + ' ' + message) : incident.comments.setJournalEntry(current.number + ' ' + message);\n        incident.update();\n    }\n} else if (isMadridZboot && isSanDiegoZboot) {\n    incident.addQuery('state', IncidentState.RESOLVED);\n    incident.addQuery('close_code', CLOSE_CODE_KNOWN_ERROR);\n    incident.query();\n    while (incident.next()) {\n        isWorknoteDefault ? incident.work_notes.setJournalEntry(current.getDisplayValue() + ' ' + message) : incident.comments.setJournalEntry(current.getDisplayValue() + ' ' + message);\n        incident.update();\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"415bc17a53a823004247ddeeff7b1209","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d81b6b3304352210559073c06a02f76e","value":"d81b6b3304352210559073c06a02f76e"},"sys_update_name":"sysevent_script_action_415bc17a53a823004247ddeeff7b1209","sys_updated_by":"admin","sys_created_on":"2018-09-18 09:46:56","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Copy Prb workaround to Inc comments","event_name":"communicate.workaround","sys_name":"Copy Prb workaround to Inc comments","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"42","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-06-06 15:04:48","sys_domain_path":"/","script":"(function() {\n    var template_sys_id = event.parm1;\n    var data = JSON.parse(event.parm2);\n\n    var templateGR = new GlideRecord('sys_app_template');\n\n    // Exit if template doesn't exist\n    if (!templateGR.get(template_sys_id))\n        return;\n\n    if (data.company)\n        return;\n\n    var payload = {\n        type: 'app_template.shared',\n        template_name: templateGR.getValue('name')\n    };\n\n    payload['template_sys_id'] = template_sys_id;\n\n    if (data.user) {\n        payload['user_sys_ids'] = [data.user];\n    }\n    if (data.user_group) {\n        payload['group_sys_ids'] = [data.user_group];\n    }\n\n    sn_fd.FlowAPI.executeSubflow('sn_app_eng_studio.process_app_template_email_data', payload);\n})();","sys_class_name":"sysevent_script_action","sys_id":"41d00535533701106511ddeeff7b12ec","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e046257545b47c84712b8779a9abd0cb","value":"e046257545b47c84712b8779a9abd0cb"},"sys_update_name":"sysevent_script_action_41d00535533701106511ddeeff7b12ec","sys_updated_by":"admin","sys_created_on":"2022-05-31 20:53:45","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Template Shared","event_name":"app_template.shared","sys_name":"Template Shared","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/e046257545b47c84712b8779a9abd0cb","value":"e046257545b47c84712b8779a9abd0cb"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-05-08 19:53:05","sys_domain_path":"","script":"\n\t\t\t\n\t\t\t\tif (event.parm1.includes('sys_security_acl')){\n\t\t\t\t\tvar mu = new GlideMultipleUpdate('sys_security_acl');\n\t\t\t\t\tmu.addNullQuery('decision_type');\n\t\t\t\t\tmu.setValue('decision_type', 'allow');\n\t\t\t\t\tmu.execute();\n\t\t\t\t\tif (mu.getUpdateCount() > 0){\n\t\t\t\t\t\tgs.log(\"Update ACL default decision_type event, Updated \" + mu.getUpdateCount() + \" ACLs with null decision types to have decision_type=allow\");\n\t\t\t\t\t}\n\t\t\t\t}","sys_class_name":"sysevent_script_action","sys_id":"4324661db742021066102181ce11a9d5","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3d53e77304312210559073c06a02f70d","value":"3d53e77304312210559073c06a02f70d"},"sys_update_name":"sysevent_script_action_4324661db742021066102181ce11a9d5","sys_updated_by":"admin","sys_created_on":"2024-05-07 23:46:08","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update ACL default decision_type","event_name":"loader.tables.processed","sys_name":"Update ACL default decision_type","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-02-09 23:03:07","sys_domain_path":"/","script":"sn_oneapi.OneApiCaller.executeFeatureInvocation(current.sys_id);","sys_class_name":"sysevent_script_action","sys_id":"4344c992533021101fdbddeeff7b1231","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/fc84affb04312210559073c06a02f73e","value":"fc84affb04312210559073c06a02f73e"},"sys_update_name":"sysevent_script_action_4344c992533021101fdbddeeff7b1231","sys_updated_by":"admin","sys_created_on":"2023-02-05 23:38:14","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"OneApi Script Fire and Forget","event_name":"oneapi.script.fireandforget","sys_name":"OneApi Script Fire and Forget","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"7","active":"true","description":"deletes unreferenced attachments while request is processed before target record is generated.","sys_overrides":"","sys_updated_on":"2021-07-06 10:43:18","sys_domain_path":"","script":" \nvar tableProperties = event.parm2.split(',');\n\nvar targetTableName = tableProperties[0];\nvar targetTableId = tableProperties[1];\nsn_sc.CatalogVariableUtil.removeUnusedAttachments(targetTableName, targetTableId);\n","sys_class_name":"sysevent_script_action","sys_id":"453927d7c740101046e7dc8703c26082","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3028ab3304f12210559073c06a02f7b7","value":"3028ab3304f12210559073c06a02f7b7"},"sys_update_name":"sysevent_script_action_453927d7c740101046e7dc8703c26082","sys_updated_by":"admin","sys_created_on":"2020-04-14 02:29:34","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"delete unreferenced attachments","event_name":"sc_variable.attachments.delete","sys_name":"delete unreferenced attachments","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.change.collision'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '4ece436673a010102eb52d2b04f6a791');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"456cc702b74120104c45f2b1de11a947","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d00ba33304352210559073c06a02f77e","value":"d00ba33304352210559073c06a02f77e"},"sys_update_name":"sysevent_script_action_456cc702b74120104c45f2b1de11a947","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:24:24","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- Chg Collision","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- Chg Collision","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-03-05 02:22:01","sys_domain_path":"","script":"var gr = new GlideRecord('dscy_credentials_affinity');\ngr.query(event.parm1, event.parm2);\ngr.deleteMultiple();","sys_class_name":"sysevent_script_action","sys_id":"4611fc80fffa20103894c787d53bf1d8","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/fdd8237704f12210559073c06a02f787","value":"fdd8237704f12210559073c06a02f787"},"sys_update_name":"sysevent_script_action_4611fc80fffa20103894c787d53bf1d8","sys_updated_by":"robert.chance","sys_created_on":"2021-03-04 23:53:53","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Cleanup Credential Affinity","event_name":"mid.credentials.update","sys_name":"Cleanup Credential Affinity","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"robert.chance","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.change_management.soc' || event.parm1 == 'com.snc.itsm.roles.change_management'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '0be212cc732010102eb52d2b04f6a7f3');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"4691d3c2b74120104c45f2b1de11a9e2","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/cdcf033467020300b410afa00585ef2b","value":"cdcf033467020300b410afa00585ef2b"},"sys_update_name":"sysevent_script_action_4691d3c2b74120104c45f2b1de11a9e2","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:47:08","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- ITSM roles","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- ITSM roles","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/cdcf033467020300b410afa00585ef2b","value":"cdcf033467020300b410afa00585ef2b"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"10","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-02-23 22:19:34","sys_domain_path":"","script":"new RecipientsListApi().buildRecipientsList(current.getUniqueValue(), event.parm1, current);\n\n","sys_class_name":"sysevent_script_action","sys_id":"47984994c3601300e7c7d44d81d3ae3a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0fdd6483d72302004f1e82285e61033a","value":"0fdd6483d72302004f1e82285e61033a"},"sys_update_name":"sysevent_script_action_47984994c3601300e7c7d44d81d3ae3a","sys_updated_by":"admin","sys_created_on":"2018-02-23 18:52:07","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Referesh Recipient List ","event_name":"sn_publications.build_recipient_list","sys_name":"Referesh Recipient List ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0fdd6483d72302004f1e82285e61033a","value":"0fdd6483d72302004f1e82285e61033a"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.glideapp.workflow'","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '1cc74f2573151010d70877186bf6a77b,7bd6c32573151010d70877186bf6a7f7,dab38ba173151010d70877186bf6a758,eb768fe173151010d70877186bf6a778');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"4917d817738d2010d70877186bf6a772","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/41672bfb04b12210559073c06a02f7c6","value":"41672bfb04b12210559073c06a02f7c6"},"sys_update_name":"sysevent_script_action_4917d817738d2010d70877186bf6a772","sys_updated_by":"system","sys_created_on":"2020-12-18 00:32:47","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs for Workflow","event_name":"plugin.activated","sys_name":"Activate report_view ACLs for Workflow","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-12-07 05:54:28","sys_domain_path":"","script":"//Same logic is present in sys_script_fix_5489e23053359110f54fddeeff7b1213\nvar mapper = new TourNextExpMapper();\nvar gr = new GlideRecord(\"sys_embedded_tour_step\");\ngr.addQuery(\"window\", \"nav_to.do\");\ngr.query();\n\nwhile(gr.next()) {\n\tvar targetRefGr = gr.target_ref.getRefRecord();\n\tif(targetRefGr.isValidRecord() && !targetRefGr.js_path && !targetRefGr.seismic_selector) {\n\t\tvar nextExpSelector = mapper.getNextExpSelector(targetRefGr.manual_css.toString());\n\t\tif(nextExpSelector) {\n\t\t\ttargetRefGr.js_path = nextExpSelector.jsPath;\n\t\t\ttargetRefGr.seismic_selector = nextExpSelector.seismicSelector;\n\t\t\ttargetRefGr.update();\n\t\t}\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"4a738ce243ab51109386a43499b8f2de","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/97515a49134b5200ed373d62f244b04a","value":"97515a49134b5200ed373d62f244b04a"},"sys_update_name":"sysevent_script_action_4a738ce243ab51109386a43499b8f2de","sys_updated_by":"admin","sys_created_on":"2022-12-06 10:17:38","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update GuidedTours with Polaris metadata","event_name":"plugin.activated","sys_name":"Update GuidedTours with Polaris metadata","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/97515a49134b5200ed373d62f244b04a","value":"97515a49134b5200ed373d62f244b04a"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"7","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-07-09 14:11:56","sys_domain_path":"","script":"//Check for updates on apps dependent on the installed plugins and plugin table\nnew PluginDependency().updatePluginData(event.parm1);","sys_class_name":"sysevent_script_action","sys_id":"4ad7c69ac790030089413952f0976351","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f1d83d71c700030089413952f0976370","value":"f1d83d71c700030089413952f0976370"},"sys_update_name":"sysevent_script_action_4ad7c69ac790030089413952f0976351","sys_updated_by":"developer.program.hop@snc","sys_created_on":"2017-08-02 22:26:40","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Check Dependent App Updates","event_name":"sn_dependentclient.check.dependent_apps","sys_name":"Check Dependent App Updates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/f1d83d71c700030089413952f0976370","value":"f1d83d71c700030089413952f0976370"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-05-04 11:00:39","sys_domain_path":"","script":"createOrDeleteEnrollmentSnapshot();\n\n    function createOrDeleteEnrollmentSnapshot() {\n        var pwdEnrollmentManager = new SNC.PwdEnrollmentManager();\n        var verificationId = event.parm1;\n\n        try {\n            var gr = new GlideRecord('pwd_enrollment_snapshot');\n            gr.addQuery('verification', verificationId);\n            gr.query();\n\n            while (gr.next()) {\n                if (pwdEnrollmentManager.isUserEnrolledByVerificationId(gr.user, verificationId)) {\n                    gr.setValue(\"status\", PwdConstants.ENROLLMENT_ACTIVE_STATUS);\n                } else {\n                    gr.setValue(\"status\", PwdConstants.ENROLLMENT_INACTIVE_STATUS);\n                }\n                gr.update();\n            }\n        } catch (ex) {\n            gs.error(\"[Script action: Update enrollment snaps for qa verifica. verificationId - \" + verificationId + \"]. execution error - \" + ex);\n        }\n    }","sys_class_name":"sysevent_script_action","sys_id":"4b8a071640622110f8771a97e2196db7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_4b8a071640622110f8771a97e2196db7","sys_updated_by":"admin","sys_created_on":"2023-05-04 09:19:04","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update enrollment snaps for qa verifica","event_name":"pwd_qa_verification_num_enroll.update","sys_name":"Update enrollment snaps for qa verifica","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-19 13:47:42","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.password_expiration_reminder', false)) {\n    deactivateExpirationRecords();\n}\n\nfunction deactivateExpirationRecords() {\n    var groupId = event.parm1;\n    var userGroupMemberGr = new PwdExpirationUtils().getAllUsersForGroup([groupId]);\n\n    while (userGroupMemberGr.next()) {\n        //Getting all the remaining entitled processes for that user (excluding the process related to the group with sys_id as groupId)\n        var userEntitledProcesses = new PasswordResetScopedUtil().getProcessIdsByUserId(userGroupMemberGr.user).toString();\n        var gr = new GlideRecord(\"pwd_expiration\");\n        gr.addQuery(\"user\", userGroupMemberGr.user);\n        //Don't de-activate the password expiration record for the user-process pair if the user still associated with that process via another group\n        gr.addQuery(\"pwd_process\", \"NOT IN\", userEntitledProcesses);\n\n        gr.setValue(\"active\", false);\n        gr.updateMultiple();\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"4bfc91c4536330106bdaddeeff7b12ea","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_4bfc91c4536330106bdaddeeff7b12ea","sys_updated_by":"admin","sys_created_on":"2021-10-27 06:10:04","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"De-activate exp. records for group-proc","event_name":"pwd_map_proc_to_group.delete","sys_name":"De-activate exp. records for group-proc","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-06-23 23:54:44","sys_domain_path":"","script":"var gr = new GlideRecord('cmdb_data_management_task');\ngr.addQuery('sys_id', event.parm1.toString());\ngr.query();\n\nif (gr.next()) {\n\tvar taskApprovalSubFlowHelper = new CMDBDataManagerTaskApprovalHelper();\n\ttaskApprovalSubFlowHelper.triggerTaskApprovalSubFlow(gr);\n}","sys_class_name":"sysevent_script_action","sys_id":"4ce49cfb7370301026f6aa114df6a796","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0efd277304752210559073c06a02f7ea","value":"0efd277304752210559073c06a02f7ea"},"sys_update_name":"sysevent_script_action_4ce49cfb7370301026f6aa114df6a796","sys_updated_by":"admin","sys_created_on":"2021-06-23 23:31:32","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Trigger CMDB Data Manager Task Approval","event_name":"cmdb.dm.task.approval","sys_name":"Trigger CMDB Data Manager Task Approval","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-10-06 06:12:27","sys_domain_path":"","script":"SNC.UsageAnalyticsScriptUtils.initDictionaryManifest();\n","sys_class_name":"sysevent_script_action","sys_id":"4dad6c5043313110e09c6d9a4ab8f297","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8bc96fbb04f12210559073c06a02f755","value":"8bc96fbb04f12210559073c06a02f755"},"sys_update_name":"sysevent_script_action_4dad6c5043313110e09c6d9a4ab8f297","sys_updated_by":"admin","sys_created_on":"2023-10-06 06:12:27","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Dictionary Manifest","event_name":"system.upgraded","sys_name":"Create Dictionary Manifest","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-06 19:48:59","sys_domain_path":"/","script":"new SMv2_DataMigration_Processor(event.parm1).process();","sys_class_name":"sysevent_script_action","sys_id":"4dbc8969778221100afba4aa8e5a9988","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bcadabf277f311109c62f5f3cb5a992a","value":"bcadabf277f311109c62f5f3cb5a992a"},"sys_update_name":"sysevent_script_action_4dbc8969778221100afba4aa8e5a9988","sys_updated_by":"maint","sys_created_on":"2023-04-06 19:38:28","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Migrate Licensing data","event_name":"sn_entitlement.migrate_data","sys_name":"Migrate Licensing data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bcadabf277f311109c62f5f3cb5a992a","value":"bcadabf277f311109c62f5f3cb5a992a"},"sys_created_by":"maint","order":"100","sys_policy":"read"},{"condition_script":"event.parm1 == 'com.glide.ui.vtb'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-24 05:40:10","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN' , 'beab8ab3531d1010c5e2ddeeff7b124a, 7a5b86b3531d1010c5e2ddeeff7b12f1, 56cb0eb3531d1010c5e2ddeeff7b1240');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"4de6d015b79d6010c5e229a6ee11a958","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d334a77b04312210559073c06a02f7ff","value":"d334a77b04312210559073c06a02f7ff"},"sys_update_name":"sysevent_script_action_4de6d015b79d6010c5e229a6ee11a958","sys_updated_by":"admin","sys_created_on":"2020-12-24 05:40:10","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs for VTB","event_name":"plugin.activated","sys_name":"Activate report_view ACLs for VTB","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-10-07 19:10:16","sys_domain_path":"","script":"blacklistSuggestions();\n\n/**\n * Remove all suggestions that:\n * 1. contain any words that match the inserted excluded phrase if phrase is a word;\n * 2. match the regex pattern if phrase is regex.\n */\nfunction blacklistSuggestions(){\n\tvar svc = new SearchSuggestionService();\n\tsvc.blacklistSuggestions(current.phrase, current.language);\n}","sys_class_name":"sysevent_script_action","sys_id":"4e0fa2f787003300f917e55936cb0b70","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0e99ab7b04f12210559073c06a02f745","value":"0e99ab7b04f12210559073c06a02f745"},"sys_update_name":"sysevent_script_action_4e0fa2f787003300f917e55936cb0b70","sys_updated_by":"admin","sys_created_on":"2019-03-14 19:10:16","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Search Suggestions Exclusion List","event_name":"search_suggestion_blacklist.inserted","sys_name":"Search Suggestions Exclusion List","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"6","active":"true","description":"","sys_overrides":"","sys_updated_on":"2017-12-18 18:57:23","sys_domain_path":"","script":"(function processEvent(event) {\n\n\trecordsCleaner = new SNC.PARecordsCleaner();\n\trecordsCleaner.processIndicatorDelete(event.getValue('parm1'));\n\trecordsCleaner.processIndicatorDeleteForNews(event.getValue('parm1'));\n\n})(event);","sys_class_name":"sysevent_script_action","sys_id":"4e6f5ba2d73312004cd2a3b20e6103e5","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/539a23bf04f12210559073c06a02f7aa","value":"539a23bf04f12210559073c06a02f7aa"},"sys_update_name":"sysevent_script_action_4e6f5ba2d73312004cd2a3b20e6103e5","sys_updated_by":"admin","sys_created_on":"2016-06-07 10:17:07","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Process indicator delete","event_name":"pa.delete.indicator","sys_name":"Process indicator delete","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-10-05 05:29:26","sys_domain_path":"","script":"SNC.CMDBDataManagerScriptableApis.postArchiveProcessing(event.instance);\nvar helper = new CMDBDataManagerHelper();\nhelper.reflectChunkStatus(event.instance);","sys_class_name":"sysevent_script_action","sys_id":"4e7381a973cb301026f6aa114df6a755","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0efd277304752210559073c06a02f7ea","value":"0efd277304752210559073c06a02f7ea"},"sys_update_name":"sysevent_script_action_4e7381a973cb301026f6aa114df6a755","sys_updated_by":"admin","sys_created_on":"2021-10-06 23:29:16","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Process Archive Chunk Completion","event_name":"archive.chunk.completed","sys_name":"Process Archive Chunk Completion","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"current.duration.nil()","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2015-07-16 16:58:00","sys_domain_path":"","script":"calc();\n\nfunction calc() {\n\tcurrent.duration = gs.dateDiff(current.sys_created_on.getDisplayValue(), event.sys_created_on.getDisplayValue(), false);\n\tcurrent.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"4ef3f700c32211002d031f051eba8fd3","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/91d8237704f12210559073c06a02f73b","value":"91d8237704f12210559073c06a02f73b"},"sys_update_name":"sysevent_script_action_4ef3f700c32211002d031f051eba8fd3","sys_updated_by":"chris.nguyen","sys_created_on":"2014-01-24 05:20:00","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Discovery Status Duration","event_name":"discovery.complete","sys_name":"Discovery Status Duration","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"chris.nguyen","order":"100","sys_policy":""},{"condition_script":"!gs.hasRole(\"maint\")","sys_mod_count":"16","active":"false","description":"","sys_overrides":"","sys_updated_on":"2016-03-03 00:47:34","sys_domain_path":"","script":"if (!gs.nil(gs.getSession().getAvailableElevatedRoles())){\n  var uinot = new UINotification('security');\n  uinot.setText('Your Elevated Privilege has expired.&nbsp;Your session is being reloaded.');\n  uinot.setAttribute('message', 'Your Elevated Privileges has expired.');\n  uinot.send();\n}","sys_class_name":"sysevent_script_action","sys_id":"4f435a20cb001000dada1bc9ff16aef7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8778afb304f12210559073c06a02f7f6","value":"8778afb304f12210559073c06a02f7f6"},"sys_update_name":"sysevent_script_action_4f435a20cb001000dada1bc9ff16aef7","sys_updated_by":"admin","sys_created_on":"2011-07-20 20:18:06","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Check Elevated Privileges","event_name":"session.established","sys_name":"Check Elevated Privileges","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"AUser","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-01-21 15:51:00","sys_domain_path":"","script":"new ChangeManagementEventHandler(current).process(event);","sys_class_name":"sysevent_script_action","sys_id":"4ffe86cfb74323000999e4f6ee11a9d6","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/32b7af7f04b12210559073c06a02f7fb","value":"32b7af7f04b12210559073c06a02f7fb"},"sys_update_name":"sysevent_script_action_4ffe86cfb74323000999e4f6ee11a9d6","sys_updated_by":"admin","sys_created_on":"2019-01-21 15:51:00","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Handle impactedCI create event","event_name":"sn_chg_mgt.impacted.CREATE","sys_name":"Handle impactedCI create event","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"12","active":"true","description":"","sys_overrides":"","sys_updated_on":"2017-02-23 00:00:40","sys_domain_path":"","script":"var script = new EmbeddedHelpRoleSynchronizer();\nscript.roleSynchronizer();","sys_class_name":"sysevent_script_action","sys_id":"50373a3b3b103200be7e832b44efc431","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bb2b677304352210559073c06a02f70b","value":"bb2b677304352210559073c06a02f70b"},"sys_update_name":"sysevent_script_action_50373a3b3b103200be7e832b44efc431","sys_updated_by":"sameep.kodia","sys_created_on":"2017-01-20 22:13:42","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Sync Role in Embedded Help - Upgrade","event_name":"system.upgraded","sys_name":"Sync Role in Embedded Help - Upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"sameep.kodia","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"13","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-06-18 05:41:27","sys_domain_path":"/","script":"var progressId = event.parm1;\nvar input = JSON.parse(event.parm2);\nif (input && input.action) {\n\tvar result = {};\n\tvar taskMgr = new sn_cmdb_ws.CMDBWsDMTaskManager();\n\tif (input.action == 'DM_CERTIFY_RECORDS' || input.action == 'DM_FAIL_RECORDS') {\n\t\tresult = taskMgr._updateRecordCertificationStatus(input.action, input.taskId, input.selectionObject, input.certificationStatus, progressId);\n\t} else if (input.action == 'DM_CERTIFY_ATTRIBUTES' || input.action == 'DM_FAIL_ATTRIBUTES') {\n\t\tresult = taskMgr._updateAttributeCertificationStatus(input.action, input.taskId, input.attributes, input.comment, input.selectionObject, input.certificationStatus, progressId);\n\t}\n\tvar gr = new GlideRecord('sn_cmdb_ws_progress_monitor');\n\tif (gr.get(progressId)) {\n\t\tgr.setValue('result', JSON.stringify(result));\n\t\tgr.update();\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"514df52953be42106adfddeeff7b123a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sysevent_script_action_514df52953be42106adfddeeff7b123a","sys_updated_by":"admin","sys_created_on":"2024-06-14 22:40:37","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Handle certification action async","event_name":"sn_cmdb_ws.certification.action","sys_name":"Handle certification action async","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-05-04 11:00:20","sys_domain_path":"","script":"createOrDeleteEnrollmentSnapshot();\n\n    function createOrDeleteEnrollmentSnapshot() {\n        var pwdEnrollSnapshotUtil = new PwdEnrollSnapshotUtil();\n        var verificationTypeId = event.parm1;\n        var isAutoEnroll = event.parm2 == 'true';\n\n        try {\n            //Get all verifications related to the verification type\n            var verificationIds = pwdEnrollSnapshotUtil.getVerificationsByVerificationType(verificationTypeId);\n\n            if (isAutoEnroll) {\n                //Delete all verifications related to this verification type\n                pwdEnrollSnapshotUtil.deleteEnrollmentSnapshotsByVerifications(verificationIds);\n            } else {\n                //Get all processes accociated with verifications\n                var processIds = pwdEnrollSnapshotUtil.getProcessAccociatedWithVerifications(verificationIds);\n                //Create enrollment shanpshots for all the valid users for processes\n                pwdEnrollSnapshotUtil.createEnrollmentSnapshotsByProcesses(processIds);\n            }\n        } catch (ex) {\n            gs.error(\"[Script action: Update enrollment snaps for auto enroll. verificationTypeId - \" + verificationTypeId + \"]. execution error - \" + ex);\n        }\n    }","sys_class_name":"sysevent_script_action","sys_id":"53444b5e40222110f8771a97e2196d6e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_53444b5e40222110f8771a97e2196d6e","sys_updated_by":"admin","sys_created_on":"2023-05-04 08:55:13","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update enrollment snaps for auto enroll","event_name":"pwd_verification_type_auto_enroll.update","sys_name":"Update enrollment snaps for auto enroll","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"event.parm1 == \"sn_sow_problem\"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-06-14 10:33:27","sys_domain_path":"","script":"var scriptActionId = \"54bc0f700bb24210ff2a8a8db777b216\";\n\ndisableBR();\nfunction disableBR() {\n\tvar gr = new GlideRecord(\"sys_script\");\n\tif (gr.get(\"9d4dfa82b7c1421041c2feb0be11a95f\")) {\n\t\tgr.setValue(\"active\", false);\n\t\tgr.update();\n\t}\n\n\tgr = new GlideRecord(\"sysevent_script_action\");\n\tif (gr.get(scriptActionId)) {\n\t\tgr.setValue(\"active\", false);\n\t\tgr.update();\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"54bc0f700bb24210ff2a8a8db777b216","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/02dca7fb04352210559073c06a02f7cc","value":"02dca7fb04352210559073c06a02f7cc"},"sys_update_name":"sysevent_script_action_54bc0f700bb24210ff2a8a8db777b216","sys_updated_by":"admin","sys_created_on":"2024-06-12 20:23:57","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Disable Problem Task Model: Set Type","event_name":"plugin.upgraded","sys_name":"Disable Problem Task Model: Set Type","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"22","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-04 18:05:14","sys_domain_path":"","script":"(function processEvent() {\n\n    var validKeys = ['assignment_group', 'support_group', 'managed_by_group'];\n\tvar validKeysCheck = function (valuesToTest) {\n\t\treturn valuesToTest.every(function (key) {\n\t\t\treturn validKeys.indexOf(key) > -1;\n\t\t});\n\t};\n\n    var oldValues = JSON.parse(event.parm1);\n    var newValues = JSON.parse(event.parm2);\n\n    if (JSUtil.nil(oldValues) || JSUtil.nil(newValues) || Object.keys(oldValues).length == 0 || Object.keys(newValues).length == 0)\n        return;\n\t\t\n\t// check that oldValues and newValues have valid keys\n\tif (!validKeysCheck(Object.keys(oldValues)) || !validKeysCheck(Object.keys(newValues))) {\n\t\tgs.error(\"CSDM Data Sync payload did not pass valid keys check\");\n\t\treturn;\n\t}\n\n\n    // Update 'Dynamic CI Group' records\n    var util = new CSDMCMDBUtil();\n    var dcg = util.getDynamicCIGroupsFromTSO(current.sys_id);\n    if (JSUtil.nil(dcg))\n        return;\n\tgs.log(\"Updating \" + dcg.length + \" 'Dynamic CI Group(s)' records.\");\n\tutil.updateRecords('cmdb_ci_query_based_service', dcg, newValues);\n\n    // Update CI records belonging to 'Dynamic CI Group'\n    var cis = util.getCIsFromDCG(dcg);\n\tif (Object.keys(cis).length == 0)\n        return;\n\tif (oldValues.managed_by_group && !newValues.managed_by_group) {\n\t\t// explicitly update the managed by group field here and return if it's the only item in newValues\n\t\tutil.revertMBGToClassValueOrNull(cis);\n\t\tdelete newValues.managed_by_group;\n\t\tif (Object.keys(newValues).length == 0)\n\t\t\treturn;\n\t}\n\tvar cisToUpdate = [];\n\tObject.keys(cis).forEach(function (key) {\n\t\tcisToUpdate = cisToUpdate.concat(cis[key]);\n\t});\n\tif (cisToUpdate.length > 0) {\n\t\tgs.log(\"Updating \" + cisToUpdate.length + \" CI records belonging to some 'Dynamic CI Group(s)'.\");\n\t\tutil.updateRecords('cmdb_ci', cisToUpdate, newValues);\n\t}\n})();","sys_class_name":"sysevent_script_action","sys_id":"54edf01b7302101061b79c0c6df6a739","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/6535677304712210559073c06a02f74f","value":"6535677304712210559073c06a02f74f"},"sys_update_name":"sysevent_script_action_54edf01b7302101061b79c0c6df6a739","sys_updated_by":"admin","sys_created_on":"2020-07-22 00:26:10","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Sync From TSO to CI","event_name":"csdm.tso.modified","sys_name":"Sync From TSO to CI","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"sn_app_analytics.SNAnalytics.isEnabled()","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-09-05 10:25:06","sys_domain_path":"/","script":"new UXMetricsApplications().registerAllApps();","sys_class_name":"sysevent_script_action","sys_id":"55729e34733111107d804c9885f6a7fd","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e393abf304312210559073c06a02f7e4","value":"e393abf304312210559073c06a02f7e4"},"sys_update_name":"sysevent_script_action_55729e34733111107d804c9885f6a7fd","sys_updated_by":"admin","sys_created_on":"2022-09-05 10:20:04","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Register UX Metrics Applications","event_name":"plugin.activated","sys_name":"Register UX Metrics Applications","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2011-08-03 20:56:52","sys_domain_path":"","script":"// current: GlideRecord - event scheduled on behalf of (incident for example) \r\n// event: GlideRecord - sysevent that caused this to be invoked\r\n\r\nMIDServerFileSync.process();","sys_class_name":"sysevent_script_action","sys_id":"5680a20583101000dada83ec37d9290b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/42b8273704f12210559073c06a02f78d","value":"42b8273704f12210559073c06a02f78d"},"sys_update_name":"sysevent_script_action_5680a20583101000dada83ec37d9290b","sys_updated_by":"tom.dilatush","sys_created_on":"2011-08-03 20:44:54","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"MID Server file synchronization check","event_name":"attachment.deleted","sys_name":"MID Server file synchronization check","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"tom.dilatush","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-06-07 14:39:14","sys_domain_path":"/","script":"(function() {\n    var template_sys_id = event.parm1;\n    var data = JSON.parse(event.parm2);\n\n    if (data.global)\n        return;\n\n    var payload = {\n        type: 'app_template.deactivated',\n        template_name: data.template_name\n    };\n\n    payload['template_sys_id'] = template_sys_id;\n\n    if (data.users && data.users.length > 0) {\n        payload['user_sys_ids'] = data.users;\n    }\n    if (data.groups && data.groups.length > 0) {\n        payload['group_sys_ids'] = data.groups;\n    }\n\n    sn_fd.FlowAPI.executeSubflow('sn_app_eng_studio.process_app_template_email_data', payload);\n})();","sys_class_name":"sysevent_script_action","sys_id":"58683d46533301106511ddeeff7b1206","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e046257545b47c84712b8779a9abd0cb","value":"e046257545b47c84712b8779a9abd0cb"},"sys_update_name":"sysevent_script_action_58683d46533301106511ddeeff7b1206","sys_updated_by":"admin","sys_created_on":"2022-06-01 19:33:27","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Template Deactivated","event_name":"app_template.deactivated","sys_name":"Template Deactivated","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/e046257545b47c84712b8779a9abd0cb","value":"e046257545b47c84712b8779a9abd0cb"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"event.parm1=='sn_vsc'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-08-26 22:23:09","sys_domain_path":"/","script":"var record = new GlideRecord(\"sysauto_script\");\nif (record.get('1e318661a00ec210f877d142267461f4') && record.run_type == 'on_demand')\n    new sn_vsc.CustomerPushActionUtils().scheduleNotificationsDownloadJob();","sys_class_name":"sysevent_script_action","sys_id":"58873d059314121039bfa3cd91891873","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_58873d059314121039bfa3cd91891873","sys_updated_by":"maint","sys_created_on":"2024-08-26 22:12:01","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Schedule security banner download job","event_name":"plugin.upgraded","sys_name":"Schedule security banner download job","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-19 13:05:49","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.enrollment_snapshot', true)) {\n    deleteEnrollmentSnapshot();\n}\n\nfunction deleteEnrollmentSnapshot() {\n    var groupId = event.parm1;\n    var pwdEnrollSnapshotUtil = new PwdEnrollSnapshotUtil();\n    var userGroupMemberGr = new PwdExpirationUtils().getAllUsersForGroup([groupId]);\n\n    while (userGroupMemberGr.next()) {\n        try {\n            pwdEnrollSnapshotUtil.deleteInValidEnrollmentSnapshotsByUserId(userGroupMemberGr.user);\n        } catch (ex) {\n            gs.error(\"[Script action: Delete enrollment snaps for a process-group with user_id : \" + userGroupMemberGr.user + \" ]. execution error - \" + ex);\n        }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"5919c4b543462110d68db0e245b8f23f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_5919c4b543462110d68db0e245b8f23f","sys_updated_by":"admin","sys_created_on":"2023-04-07 09:32:20","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Delete enrollment snaps for proc-group","event_name":"pwd_map_proc_to_group.delete","sys_name":"Delete enrollment snaps for proc-group","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-08-29 10:33:23","sys_domain_path":"","script":"try {\n    var categoryField = event.parm1;\n    var categoryList = event.parm2.split(',');\n    var disAssociationString = categoryField.split(',')[1];\n    categoryField = categoryField.split(',')[0];\n    var topicId = current.sys_id;\n    var contentAssociationUtil = new global.ContentAssociationUtilAjax();\n    if(!disAssociationString){\n      if (categoryField == \"kb_category\")\n        contentAssociationUtil.associateKnowledgeToTopic(topicId, categoryField, categoryList);\n      else if (categoryField == \"sc_category\")\n        contentAssociationUtil.associateCatalogToTopic(topicId, categoryField, categoryList);\n    }else{\n      if (categoryField == \"kb_category\")\n        contentAssociationUtil.disassociateKnowledgeFromTopic(topicId, categoryList);\n      else if (categoryField == \"sc_category\")\n        contentAssociationUtil.disassociateCatalogsFromTopic(topicId, categoryList);\n    }\n} catch (e) {\n    gs.info(gs.getMessage(\"There was a problem in connecting content to topic\"));\n}","sys_class_name":"sysevent_script_action","sys_id":"592bc979c7163010fedf0bcbe2c260c3","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/92ed237304752210559073c06a02f7a0","value":"92ed237304752210559073c06a02f7a0"},"sys_update_name":"sysevent_script_action_592bc979c7163010fedf0bcbe2c260c3","sys_updated_by":"admin","sys_created_on":"2021-08-31 13:54:01","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Assoicate Bulk Content To Topic","event_name":"topic.content_association","sys_name":"Assoicate Bulk Content To Topic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"23","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"// react to logout and cleanup any sys_poll data that may be left over\nnew CleanupListExport().cleanup(event);\ncleanupReportViews(event.parm1);\n\nfunction cleanupReportViews(userID) {\n   var rpt = new GlideReportViewManagement();\n   rpt.cleanTempViews(userID);\n}\n","sys_class_name":"sysevent_script_action","sys_id":"5a44b3580a0a0a6a006e740aa22d7e4c","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9543af3304312210559073c06a02f769","value":"9543af3304312210559073c06a02f769"},"sys_update_name":"sysevent_script_action_5a44b3580a0a0a6a006e740aa22d7e4c","sys_updated_by":"system","sys_created_on":"2007-01-25 17:19:16","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Cleanup Resources","event_name":"logout","sys_name":"Cleanup Resources","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.itsm.roles.incident_management' || event.parm1 == 'com.glide.high_security'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-18 10:53:04","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '486530bcb7201010a4fbfa13ee11a91e');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"5a54ee17b70120103186f2b1de11a940","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3bfca73f04352210559073c06a02f744","value":"3bfca73f04352210559073c06a02f744"},"sys_update_name":"sysevent_script_action_5a54ee17b70120103186f2b1de11a940","sys_updated_by":"admin","sys_created_on":"2020-12-18 10:41:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- Sec in roles","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- Sec in roles","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"(event.parm1=='sign_specific_records' || event.parm1=='mass_sign_records') && event.parm2=='done' && current.table.contains('ecc_agent_script_include')","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-07-01 23:33:04","sys_domain_path":"","script":"var sysIds = current.select_records_for_signing.split(',');\nvar threshold = 10;\n\nif (sysIds.length >= threshold || event.parm1 =='mass_sign_records') {\n\tnew InvalidateMIDScriptCache().invalidateEntireMidScriptIncludeCache();\n} else {\n    for (var i = 0; i < sysIds.length; i++) {\n        new InvalidateMIDScriptCache().invalidateMidScriptIncludeCache(sysIds[i]);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"5ac4018e43834210471d6692e9b8f257","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/42b8273704f12210559073c06a02f78d","value":"42b8273704f12210559073c06a02f78d"},"sys_update_name":"sysevent_script_action_5ac4018e43834210471d6692e9b8f257","sys_updated_by":"now.midserver","sys_created_on":"2024-06-28 18:18:05","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Invalidate MID Cache on Insert","event_name":"security.job.status","sys_name":"Invalidate MID Cache on Insert","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"now.midserver","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'sn_cmdb_ws'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-05-25 22:08:18","sys_domain_path":"/","script":"var cmdbWorkspaceUtil = new sn_cmdb_ws.CMDBWorkspaceUtil();\n// Invoke CMDB Workspace On Demand With Lookback\ncmdbWorkspaceUtil.invokeWsOnDemandPAJobWithLookback();\n\n// Invoke CMDB Workspace - Populate aggregates daily script job\ncmdbWorkspaceUtil.invokeWsPopulateAggregatesDailyScriptJob();\n\n// Invoke CMDB Workspace - Populate aggregates monthly script job\ncmdbWorkspaceUtil.invokeWsPopulateAggregatesMonthlyScriptJob();","sys_class_name":"sysevent_script_action","sys_id":"5bb670a4b7312110b87e80408e11a98c","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sysevent_script_action_5bb670a4b7312110b87e80408e11a98c","sys_updated_by":"maint","sys_created_on":"2023-03-22 05:12:06","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Trigger jobs on CMDB Workspace upgrade","event_name":"plugin.upgraded","sys_name":"Trigger jobs on CMDB Workspace upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'sn_me_assets'","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-10-10 07:10:22","sys_domain_path":"/","script":"var upgradeEngine = new sn_me_assets.MobileUpgradeEngine();\nupgradeEngine.upgradeForLegacyCards();\nupgradeEngine.upgradeForButtonInstance();","sys_class_name":"sysevent_script_action","sys_id":"5d76f9c825a61110fa9b546e8bc039a3","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/fe12f0f077232300454792718a106192","value":"fe12f0f077232300454792718a106192"},"sys_update_name":"sysevent_script_action_5d76f9c825a61110fa9b546e8bc039a3","sys_updated_by":"admin","sys_created_on":"2022-10-10 07:10:18","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Clean upgrade for mobile agent","event_name":"plugin.upgraded","sys_name":"Clean upgrade for mobile agent","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/fe12f0f077232300454792718a106192","value":"fe12f0f077232300454792718a106192"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"15","active":"false","description":"","sys_overrides":"","sys_updated_on":"2022-09-29 19:48:13","sys_domain_path":"/","script":"var mutex = new GlideMutex('EventTransfer', 'EventTransfer');\nmutex.setSpinWait(1);\nmutex.setMaxSpins(1);\nmutex.setMutexExpires(1000 * 60 * 60);\nif (mutex.get()) {\n    transferEvents();\n    mutex.release();\n}\n\nfunction transferEvents() {\n  var xx = new GlideRecord(event.parm1);\n  xx.addEncodedQuery('state=ready^ORstate=encore-ready');\n  addDateRange(xx);\n  xx.orderBy('sys_created_on'); //transfer events in order\t\n  xx.query();\n  while (xx.next()) {\n    var yy = new GlideRecord('sysevent');\n    var fields = xx.getFields();\n    for (var i = 0; i < fields.size(); i++) {\n       var ge = fields.get(i);\n       yy[ge.getName()] = ge;\n    }\n\n    yy.insert();\n    xx.state = 'transferred';\n    xx.update();\n    gcfCountTransferred(xx);\n  }\n}\n\nfunction addDateRange(er) {\n\tif (er.getTableName() != 'sysevent')\n\t\treturn;\n\t\n\tvar xx = new GlideRecord('sys_table_rotation_schedule');\n\txx.addQuery('table_name', 'sysevent');\n\txx.query();\n\tif (!xx.next())\n\t\treturn;\n\n\ter.addQuery('sys_created_on', '>=', xx.valid_from);\n\ter.addQuery('sys_created_on', '<', xx.valid_to);\n\treturn;\n}\n\nfunction gcfCountTransferred(tx) {\n\tvar sample = new GCFSampleMap();\n\tsample.put('queue', tx.queue);\n\tsample.put('event_name', tx.name);\n\tGCFCollector.recordUsageEvent('queues', 'sysevent', 'transferred', sample);\n}\n","sys_class_name":"sysevent_script_action","sys_id":"5d7e50339f221000dada207c7f4bcc9f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ed836fb304312210559073c06a02f704","value":"ed836fb304312210559073c06a02f704"},"sys_update_name":"sysevent_script_action_5d7e50339f221000dada207c7f4bcc9f","sys_updated_by":"admin","sys_created_on":"2011-12-01 20:44:12","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Event Transfer","event_name":"event.transfer","sys_name":"Event Transfer","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"don goodliffe","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-19 13:06:38","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.enrollment_snapshot', true)) {\n    createEnrollmentSnapshot();\n}\n\nfunction createEnrollmentSnapshot() {\n    var userSysId = event.parm1;\n    var pwdEnrollSnapshotUtil = new PwdEnrollSnapshotUtil();\n\n    try {\n        if (!pwdEnrollSnapshotUtil.isActiveUser(userSysId)) {\n            return;\n        }\n        pwdEnrollSnapshotUtil.createEnrollmentSnapshot(userSysId);\n    } catch (ex) {\n        gs.error(\"[Script action: Create enrollment snaps for a user with sys_id : \" + userSysId + \"]. execution error - \" + ex);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"5e0d8a4143022110d68db0e245b8f23b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_5e0d8a4143022110d68db0e245b8f23b","sys_updated_by":"admin","sys_created_on":"2023-04-05 11:34:55","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create enrollment snaps for a user","event_name":"sys_user.insert","sys_name":"Create enrollment snaps for a user","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2011-08-10 18:47:12","sys_domain_path":"","script":"// current: GlideRecord - event scheduled on behalf of (incident for example) \r\n// event: GlideRecord - sysevent that caused this to be invoked\r\n\r\nMIDServerFileSync.process();","sys_class_name":"sysevent_script_action","sys_id":"5e29821383101000dada83ec37d9294b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/42b8273704f12210559073c06a02f78d","value":"42b8273704f12210559073c06a02f78d"},"sys_update_name":"sysevent_script_action_5e29821383101000dada83ec37d9294b","sys_updated_by":"tom.dilatush","sys_created_on":"2011-08-10 18:47:12","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"MID Server file synchronization check","event_name":"attachment.renamed","sys_name":"MID Server file synchronization check","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"tom.dilatush","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"6","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-02-05 13:02:35","sys_domain_path":"","script":"new AnalyticsCachePrefetchAPI(current).reload();","sys_class_name":"sysevent_script_action","sys_id":"5e3e782f43000210aaf41347efb8f227","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0e7eebf304752210559073c06a02f744","value":"0e7eebf304752210559073c06a02f744"},"sys_update_name":"sysevent_script_action_5e3e782f43000210aaf41347efb8f227","sys_updated_by":"admin","sys_created_on":"2024-02-05 05:59:05","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Call analytics data provider to get the ","event_name":"analytics_cache.prefetch","sys_name":"Call data provider to get the fresh data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"11","active":"false","description":"","sys_overrides":"","sys_updated_on":"2015-11-02 18:51:42","sys_domain_path":"","script":"//\n// Check to see if the user has failed to login too many times\n// when the limit is reached, lock the user out of the system\n//\nvar gr = new GlideRecord(\"sys_user\");\ngr.addQuery(\"user_name\", event.parm1.toString());\ngr.query();\nif (gr.next()) {\n    gr.failed_attempts += 1;\n    if (gr.failed_attempts > 5) {\n       gr.locked_out = true;\n       gr.update();\n       gs.log(\"User \" + event.parm1 + \" locked out due to too many invalid login attempts\");\n   } else {\n       gr.update();       \n   }\n}","sys_class_name":"sysevent_script_action","sys_id":"5e44f9bf0a0a0a0a019a6440b2137767","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9543af3304312210559073c06a02f769","value":"9543af3304312210559073c06a02f769"},"sys_update_name":"sysevent_script_action_5e44f9bf0a0a0a0a019a6440b2137767","sys_updated_by":"admin","sys_created_on":"2006-05-22 22:44:06","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SNC User Lockout Check","event_name":"login.failed","sys_name":"SNC User Lockout Check","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"5","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"\n\t\t\t//\n\t\t\t// login was successful so reset the failed attempts count\n\t\t\t//\n\t\t\tvar gr = new GlideRecord(\"sys_user\");\n\t\t\tgr.addQuery(\"user_name\", event.parm1.toString());\n\t\t\tgr.query();\n\t\t\tif (gr.next()) {\n\t\t\t\tgr.failed_attempts = 0;\n\t\t\t\tgr.last_login = gs.now();\n\t\t\t\tgr.autoSysFields(false);\n\t\t\t\tgr.update();\n\t\t\t}\n\t\t","sys_class_name":"sysevent_script_action","sys_id":"5e5183350a0a0a0a00093b591ece409f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8778afb304f12210559073c06a02f7f6","value":"8778afb304f12210559073c06a02f7f6"},"sys_update_name":"sysevent_script_action_5e5183350a0a0a0a00093b591ece409f","sys_updated_by":"system","sys_created_on":"2006-05-22 22:57:48","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SNC User Clear","event_name":"login","sys_name":"SNC User Clear","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"event.parm1.toString().includes('guided_setup')","sys_mod_count":"17","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-01-30 11:03:48","sys_domain_path":"","script":"// create intial content of a Guided Setup\nvar gs_plugin = event.parm1.toString();\nvar gr = new GlideRecord('gsw_content_group');\ngr.addQuery('sys_package.source', gs_plugin);\ngr.query('is_root_content', true);\nif (gr.next()) {\n    var title = gr.title.toString();\n    var rootContentId = gr.sys_id.toString();\n    var util = new sn_guided_setup.GuidedSetupPublicUtilSNC();\n    gs.info('****Begin creation of status records for ' + title + ' content**** from script action.');\n    util.createInitialStatusForRoutine(rootContentId);\n    gs.info('****End creation of status records for ' + title + ' content**** from script action.');\n} else\n    gs.info('Unable to create content for ' + gs_plugin + '. Cannot find root content.');","sys_class_name":"sysevent_script_action","sys_id":"5e92116053b13300a1acddeeff7b1284","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5f4ef4ed9f401200b18a7feea57fcfbe","value":"5f4ef4ed9f401200b18a7feea57fcfbe"},"sys_update_name":"sysevent_script_action_5e92116053b13300a1acddeeff7b1284","sys_updated_by":"admin","sys_created_on":"2019-05-30 09:55:02","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Guided Setup Auto Upgrade","event_name":"plugin.upgraded","sys_name":"Guided Setup Auto Upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5f4ef4ed9f401200b18a7feea57fcfbe","value":"5f4ef4ed9f401200b18a7feea57fcfbe"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-08-26 11:10:11","sys_domain_path":"","script":"new global.AssessmentUtils().notifyUser(current);","sys_class_name":"sysevent_script_action","sys_id":"5fdf5778a3101210cb561990951e618f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3da7677f04b12210559073c06a02f701","value":"3da7677f04b12210559073c06a02f701"},"sys_update_name":"sysevent_script_action_5fdf5778a3101210cb561990951e618f","sys_updated_by":"admin","sys_created_on":"2024-08-26 11:10:11","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Assessment Flow","event_name":"assessment.flow","sys_name":"Assessment Flow","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-07-09 14:11:56","sys_domain_path":"","script":"new ManifestService().getAllMissingManifests();","sys_class_name":"sysevent_script_action","sys_id":"601d7df9c3011200f7d1ca3adfba8fd1","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_update_name":"sysevent_script_action_601d7df9c3011200f7d1ca3adfba8fd1","sys_updated_by":"developer.program.hop@snc","sys_created_on":"2016-01-20 02:19:36","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Get App Manifests","event_name":"sn_appclient.update.manifests","sys_name":"Get App Manifests","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2016-01-12 18:50:34","sys_domain_path":"","script":"new ConfigChecker().checkForChanges();","sys_class_name":"sysevent_script_action","sys_id":"603398e3c3301200f7d1ca3adfba8f34","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/893ea311d71321004f6a0eca5e6103e6","value":"893ea311d71321004f6a0eca5e6103e6"},"sys_update_name":"sysevent_script_action_603398e3c3301200f7d1ca3adfba8f34","sys_updated_by":"admin","sys_created_on":"2016-01-12 18:50:34","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Check Scoped App Author Config Changes","event_name":"sn_appauthor.check.config.update","sys_name":"Check Scoped App Author Config Changes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/893ea311d71321004f6a0eca5e6103e6","value":"893ea311d71321004f6a0eca5e6103e6"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"new sn_utc.UpgradePlanInstanceTypeAPI().isBuilder()","sys_mod_count":"31","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-09-13 20:49:54","sys_domain_path":"","script":"new sn_utc.OnDemandAppLifecycleAPI().logAppLifecycleEvent(event.parm1);","sys_class_name":"sysevent_script_action","sys_id":"6038f8865302301010baddeeff7b122a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ef542bbb04312210559073c06a02f73f","value":"ef542bbb04312210559073c06a02f73f"},"sys_update_name":"sysevent_script_action_6038f8865302301010baddeeff7b122a","sys_updated_by":"maint","sys_created_on":"2021-08-19 19:19:43","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Auto Track App Lifecycle Change","event_name":"on.demand.app.lifecycle","sys_name":"Auto Track App Lifecycle Change","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-01-17 10:38:48","sys_domain_path":"","script":"new ChangeManagementEventHandler(current).process(event);","sys_class_name":"sysevent_script_action","sys_id":"605e1875b70323000999e4f6ee11a9ba","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/32b7af7f04b12210559073c06a02f7fb","value":"32b7af7f04b12210559073c06a02f7fb"},"sys_update_name":"sysevent_script_action_605e1875b70323000999e4f6ee11a9ba","sys_updated_by":"admin","sys_created_on":"2019-01-17 10:28:06","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Handle affectedCI create event","event_name":"sn_chg_mgt.affected.CREATE","sys_name":"Handle affectedCI create event","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"12","active":"true","description":"","sys_overrides":"","sys_updated_on":"2014-05-08 04:38:16","sys_domain_path":"","script":"// current: GlideRecord - event scheduled on behalf of (incident for example) \n// event: GlideRecord - sysevent that caused this to be invoked\nliveFeedUpdate();\n\nfunction liveFeedUpdate() {\n   var fields = getChangedFields();\n   var updateCount = new String(event.parm2);\n   if(current.sys_mod_count != updateCount)\n   \trollback(current, updateCount);\n   // pass current and changed fields\n   new GlideappLiveFeedEventHandler().process(current, fields);\n}\n\n// changed fields string is a serialized ArrayList [a,b,c]\nfunction getChangedFields() {\n  var fields = new String(event.parm1);\n  if (fields.length > 3) {\n    fields = fields.substring(1, fields.length - 1);\n    fields = GlideStringUtil.split(fields, \",\");\n  } else\n      fields = new GlideStringList();\n  return fields;\n}\n\nfunction rollback(gr, updateCount) {\n   var r = new GlideRecordRollback(); \n   r.toVersion(gr, updateCount); \n}","sys_class_name":"sysevent_script_action","sys_id":"60d24158c0a8018c0077914d3e2e86d6","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/50442b7b04312210559073c06a02f7ef","value":"50442b7b04312210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_60d24158c0a8018c0077914d3e2e86d6","sys_updated_by":"admin","sys_created_on":"2011-01-07 14:12:28","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Live Feed Update","event_name":"live_feed.update","sys_name":"Live Feed Update","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"","sys_policy":""},{"condition_script":"event.parm1 == 'com.glide.app_collaboration'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-03-08 23:57:45","sys_domain_path":"/","script":"gs.info(sn_appcollab.CollaborationMigration.migrate());","sys_class_name":"sysevent_script_action","sys_id":"6216d151ff3220101e41e46cf43bf154","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5c5f3f3ec3622210ed4bd50d05013133","value":"5c5f3f3ec3622210ed4bd50d05013133"},"sys_update_name":"sysevent_script_action_6216d151ff3220101e41e46cf43bf154","sys_updated_by":"admin","sys_created_on":"2021-03-08 23:57:45","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Migrate delegates to App Collaboration","event_name":"plugin.activated","sys_name":"Migrate delegates to App Collaboration","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2015-06-15 22:18:24","sys_domain_path":"","script":"SNC.MegaphoneBroadcast.addMegaphoneMessagesToSessionsForUserOnAllNodes(event.parm1);","sys_class_name":"sysevent_script_action","sys_id":"62e0c771d72002008bb349d48e6103c9","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/6359673b04f12210559073c06a02f7b3","value":"6359673b04f12210559073c06a02f7b3"},"sys_update_name":"sysevent_script_action_62e0c771d72002008bb349d48e6103c9","sys_updated_by":"admin","sys_created_on":"2015-06-10 14:35:28","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Send new sessions Megaphone messages","event_name":"session.established","sys_name":"Send new sessions Megaphone messages","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"14","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-04-20 12:12:39","sys_domain_path":"","script":"// react to logout and cleanup any Activity Stream Cache data that may be left over\nvar isCacheEnabled = gs.getProperty(\"com.snc.actsub.activity.stream.cache.enable\") == \"true\";\n\nif (isCacheEnabled)\n    cleanupActivityStreamCache(event.parm1);\n\nfunction cleanupActivityStreamCache(userId) {\n    if (!userId)\n        return;\n    var gr = new GlideRecord(\"sys_user\");\n    gr.addQuery(\"user_name\", userId);\n    gr.query();\n    if (gr.next()) {\n        var cacheMgr = new ActivityStreamCacheManager();\n        cacheMgr.flushStreams([gr.sys_id + \"\"]);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"63e306cdc7b20300038b4865cb976388","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/27dc6bfb04352210559073c06a02f739","value":"27dc6bfb04352210559073c06a02f739"},"sys_update_name":"sysevent_script_action_63e306cdc7b20300038b4865cb976388","sys_updated_by":"admin","sys_created_on":"2017-12-01 07:18:39","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Cleanup Activity Stream Cache","event_name":"logout","sys_name":"Cleanup Activity Stream Cache","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"33","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-03-31 06:33:05","sys_domain_path":"","script":"new KBFanoutManager().fanout(current);","sys_class_name":"sysevent_script_action","sys_id":"6447267b67e43200d358bb2d07415a74","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/67dc6bfb04352210559073c06a02f738","value":"67dc6bfb04352210559073c06a02f738"},"sys_update_name":"sysevent_script_action_6447267b67e43200d358bb2d07415a74","sys_updated_by":"admin","sys_created_on":"2017-02-02 06:23:12","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activity Fanout Manager for KM","event_name":"sn_actsub.activity_fanout_for_km","sys_name":"Activity Fanout Manager for KM","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"110","sys_policy":""},{"condition_script":"new sn_utc.UpgradePlanInstanceTypeAPI().isBuilder()","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-09-13 20:49:44","sys_domain_path":"","script":"new sn_utc.OnDemandAppLifecycleAPI().clearAppLifecycleTracker();","sys_class_name":"sysevent_script_action","sys_id":"64daf1575342301010baddeeff7b12cb","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ef542bbb04312210559073c06a02f73f","value":"ef542bbb04312210559073c06a02f73f"},"sys_update_name":"sysevent_script_action_64daf1575342301010baddeeff7b12cb","sys_updated_by":"maint","sys_created_on":"2021-08-23 20:54:47","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Clear App Lifecycle Tracker (BF)","event_name":"system.upgraded","sys_name":"Clear App Lifecycle Tracker (BF)","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":"read"},{"condition_script":"gs.getProperty('sn_change_cab.com.snc.change_management.cab.refresh_group_attendees', 'true') === 'true'","sys_mod_count":"14","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-10-15 13:16:17","sys_domain_path":"","script":"new CABAttendeeUserUtil(event.parm1 + '', event.parm2 + '').processUserRemovedFromBoardGroup();","sys_class_name":"sysevent_script_action","sys_id":"654ac16ec3723010a282a539e540ddbb","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/18351d53eb32120034d1eeea1206fe79","value":"18351d53eb32120034d1eeea1206fe79"},"sys_update_name":"sysevent_script_action_654ac16ec3723010a282a539e540ddbb","sys_updated_by":"admin","sys_created_on":"2021-09-27 16:15:10","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Process CAB Board group user removed","event_name":"sn_change_cab.group_member.removed","sys_name":"Process CAB Board group user removed","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/18351d53eb32120034d1eeea1206fe79","value":"18351d53eb32120034d1eeea1206fe79"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.glideapp.agent'","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-04-17 02:11:01","sys_domain_path":"","script":"gs.info('Auto upgrading all MID Servers');\n\nvar mm = new MIDServerManage();\nvar historyWithoutNotification = MIDUpgradeHistoryUtil.getHistoryWithoutNotification();\n\nvar gr = new GlideRecord('ecc_agent');\ngr.query();\n\nwhile (gr.next()) {\n\t\n\t// add upgrade notification stage if needed\n\tif (MIDUpgradeHistoryUtil.midSupportsUpgradeStages(gr.getValue('version')) \n\t\t\t&& historyWithoutNotification)\n\t\taddMidUpgradeNotification(gr.getUniqueValue(), historyWithoutNotification);\n\t\n\tmm.autoUpgrade(gr.getValue('name'));\n}\n\n\n\nfunction addMidUpgradeNotification(midSysId, hSysId) {\n\tvar gr = new GlideRecord('ecc_agent_upgrade_history_stage');\n\tgr.initialize();\n\tgr.setValue('stage', 'UpgradeNotification');\n\tgr.setValue('state', 'InProgress');\n\tgr.setValue('upgrade_history', hSysId);\n\tgr.setValue('mid_server', midSysId);\n\tgr.insert();\n}","sys_class_name":"sysevent_script_action","sys_id":"662705b153131200dd41a3c606dc3415","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/91d8237704f12210559073c06a02f73b","value":"91d8237704f12210559073c06a02f73b"},"sys_update_name":"sysevent_script_action_662705b153131200dd41a3c606dc3415","sys_updated_by":"marjan.marzban","sys_created_on":"2016-05-10 18:49:03","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"MID Server Auto Upgrade","event_name":"plugin.upgraded","sys_name":"MID Server Auto Upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"greg.grisco","order":"100","sys_policy":""},{"condition_script":"event.parm1=='com.snc.integration.multifactor.authentication'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-17 11:20:50","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '43b8705173231010fdbd04fbc4f6a7d1,b397381173231010fdbd04fbc4f6a7c7,d929b45173231010fdbd04fbc4f6a737,f679785173231010fdbd04fbc4f6a7f7');\naclGR.setValue('active', true);\naclGR.updateMultiple();","sys_class_name":"sysevent_script_action","sys_id":"6741ed0373012010fdbd04fbc4f6a75e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d7152f3304712210559073c06a02f70f","value":"d7152f3304712210559073c06a02f70f"},"sys_update_name":"sysevent_script_action_6741ed0373012010fdbd04fbc4f6a75e","sys_updated_by":"admin","sys_created_on":"2020-12-17 11:20:50","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs for MFA","event_name":"plugin.activated","sys_name":"Activate report_view ACLs for MFA","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"false","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 06:39:22","sys_domain_path":"","script":"var migrationSuccess = true;\ntry {\n    migrateData();\n} catch (e) {\n    migrationSuccess = false;\n}\n\nif (migrationSuccess) {\n    var prop = new GlideRecord(\"sys_properties\");\n    prop.addQuery(\"name\", \"glide.sc.masked_migration_success\");\n    prop.setWorkflow(false);\n    prop.setUseEngines(false);\n    prop.query();\n    if (prop.next()) {\n        prop.setValue(\"value\", \"true\");\n        prop.update();\n    }\n}\n\nfunction migrateData() {\n    var options = new GlideRecord(\"sc_item_option\");\n    options.addEncodedQuery(\"item_option_new.type=25^valueISNOTEMPTY\");\n    options.setWorkflow(false);\n    options.setUseEngines(false);\n    options.query();\n\n    while (options.next()) {\n        updateGr(options, \"item_option_new\");\n    }\n\n    var quesAns = new GlideRecord(\"question_answer\");\n    quesAns.addEncodedQuery(\"question.type=25^valueISNOTEMPTY\");\n    quesAns.setWorkflow(false);\n    quesAns.setUseEngines(false);\n    quesAns.query();\n\n    while (quesAns.next()) {\n       updateGr(quesAns, \"question\");\n    }\n\n    //Making the script action inactive \n\n    var gr = new GlideRecord(\"sysevent_script_action\");\n    gr.get(\"675eb9ca37802a10a88832a254924b64\");\n    gr.active = false;\n    gr.update();\n}\n\nfunction updateGr(gr, fieldName) {\n    var value = gr.getValue(\"value\");\n    var question = GlideappQuestion.getQuestion(gr.getValue(fieldName));\n    if (question) {\n      var decrptValue = question.decrypt(value);\n      question.setValue(decrptValue); // this will encrypt the value\n      gr.setValue(\"value\", question.getValue()); // populating with the newly encrypted value.\n      gr.update();\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"675eb9ca37802a10a88832a254924b64","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3028ab3304f12210559073c06a02f7b7","value":"3028ab3304f12210559073c06a02f7b7"},"sys_update_name":"sysevent_script_action_675eb9ca37802a10a88832a254924b64","sys_updated_by":"system","sys_created_on":"2025-03-04 17:52:57","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Migrate 3DES data","event_name":"plugin.upgraded","sys_name":"Migrate 3DES data","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.system_security'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-10-24 18:35:51","sys_domain_path":"","script":"var aclGr = new GlideRecord('sys_security_acl');\naclGr.addQuery('sys_id', 'IN', 'b90d24535313301012c9ddeeff7b124f');\naclGr.setWorkflow(false);\naclGr.query();\nwhile (aclGr.next()) {\n    aclGr.setValue('active', true);\n    aclGr.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"685d28535313301012c9ddeeff7b122e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8178ebb304f12210559073c06a02f736","value":"8178ebb304f12210559073c06a02f736"},"sys_update_name":"sysevent_script_action_685d28535313301012c9ddeeff7b122e","sys_updated_by":"admin","sys_created_on":"2021-10-24 18:35:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate ui_page ACL for sys_db_object","event_name":"plugin.activated","sys_name":"Activate ui_page ACL for sys_db_object","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-20 07:28:55","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.password_expiration_reminder', false)) {\n    var processSysId = event.parm1;\n    try {\n        new global.PwdExpirationUtils().deleteAllExpirationRecordsForAProcess(\"\");\n        new global.PwdExpirationScheduleJobHelper().deleteExpirationScheduledJobs(processSysId);\n    } catch (e) {\n        gs.error(\"[Script action: Delete Expiration records for a process execution error - \" + e.getMessage());\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"6969ea02536130106bdaddeeff7b12a8","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_6969ea02536130106bdaddeeff7b12a8","sys_updated_by":"admin","sys_created_on":"2021-07-26 06:35:09","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Delete Expiration records for a process","event_name":"pwd_process.delete","sys_name":"Delete Expiration records for a process","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"!current.cmdb_ci.nil()","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2016-02-02 19:04:43","sys_domain_path":"","script":"serviceOutageBegin();\n\nfunction serviceOutageBegin() {\n\tvar notes = new GlideRecord(\"m2m_sp_status_subscription\");\n\tnotes.addQuery(\"cmdb_ci_service\", current.cmdb_ci);\n\tnotes.query();\n\twhile (notes.next()) {\n\t\tgs.eventQueue(\"outage.begin.notif\", current, notes.getValue('sys_user'), current.cmdb_ci.getDisplayValue());\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"69c47271d7111200a9addd173e24d47a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/50c96bbb04f12210559073c06a02f7a5","value":"50c96bbb04f12210559073c06a02f7a5"},"sys_update_name":"sysevent_script_action_69c47271d7111200a9addd173e24d47a","sys_updated_by":"admin","sys_created_on":"2016-02-01 16:42:23","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Service Outage Begin","event_name":"outage.begin","sys_name":"Service Outage Begin","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-10-06 17:43:19","sys_domain_path":"","script":"SNC.UsageAnalyticsScriptUtils.initDictionaryManifest();\n","sys_class_name":"sysevent_script_action","sys_id":"6a9dcf5043313110e09c6d9a4ab8f2af","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8bc96fbb04f12210559073c06a02f755","value":"8bc96fbb04f12210559073c06a02f755"},"sys_update_name":"sysevent_script_action_6a9dcf5043313110e09c6d9a4ab8f2af","sys_updated_by":"admin","sys_created_on":"2023-10-06 17:43:10","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Dictionary Manifest","event_name":"system.upgrade.failed","sys_name":"Create Dictionary Manifest","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"110","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-08-26 16:48:20","sys_domain_path":"/","script":"var params = JSON.parse(event.parm1);\nvar appName = params.appName;\nvar action = params.action;\nvar condition = params.condition;\nvar accessManagement = new sn_employee.ep_AccessManagement(appName);\n\nif (action == accessManagement.CREATE_ACTION)\n    accessManagement.createAccess(condition);\nelse if (action === accessManagement.GRANT_ACTION)\n    accessManagement.grantAccess(condition);\nelse if (action === accessManagement.REVOKE_ACTION)\n    accessManagement.revokeAccess();","sys_class_name":"sysevent_script_action","sys_id":"6b3c3db6775d1110a956b9999a5a9934","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1e95bac2738f001001b566b90ff6a7cd","value":"1e95bac2738f001001b566b90ff6a7cd"},"sys_update_name":"sysevent_script_action_6b3c3db6775d1110a956b9999a5a9934","sys_updated_by":"admin","sys_created_on":"2022-08-17 17:25:25","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update user app access","event_name":"sn_employee.update.employee.app.access","sys_name":"Update user app access","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1e95bac2738f001001b566b90ff6a7cd","value":"1e95bac2738f001001b566b90ff6a7cd"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"10","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-05-31 01:21:19","sys_domain_path":"/","script":"const steps = new Set(JSON.parse(event.parm1).map(step => step.toLowerCase()));\nconst args = JSON.parse(event.parm2);\nconst subscriptionId = args.subscriptionId;\nconst groupIds = args.groupIds;\n\nif (steps && steps.size > 0 &&\n    subscriptionId && subscriptionId.length > 0 &&\n    groupIds && groupIds.length > 0) {\n\n    const groupAllocationService = new sn_sub_man.GroupAllocationService();\n\n    if (steps.has('removegroupsfromsubscription'))\n        groupAllocationService.removeGroupsFromSubscription(groupIds, subscriptionId);\n\n    if (steps.has('removegroupmembersfromsubscription'))\n        groupAllocationService.removeGroupMembersFromSubscription(groupIds, subscriptionId);\n\n    if (steps.has('executepartialupdateforgroups'))\n        groupAllocationService.executePartialUpdateForGroups(groupIds);\n}","sys_class_name":"sysevent_script_action","sys_id":"6c10013cffe68a10d68b65d7d3b8fe16","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_update_name":"sysevent_script_action_6c10013cffe68a10d68b65d7d3b8fe16","sys_updated_by":"admin","sys_created_on":"2024-05-30 23:41:56","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Remove Groups From Subscription","event_name":"sn_sub_man.rm_groups_from_subscription","sys_name":"Remove Groups From Subscription","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/86d7bb63ff021110468365d7d3b8fe41","value":"86d7bb63ff021110468365d7d3b8fe41"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-11-10 22:16:45","sys_domain_path":"/","script":"function execute() {\n\tif (event.parm1 !== null && event.parm1 !== undefined) {\n\t\tvar affectedTables = event.parm1.substring(0).split(',');\n\t\tif (affectedTables !== null && affectedTables !== undefined && affectedTables.length > 0)  {\n\t\t\tif (affectedTables.indexOf('sys_certificate') > -1)\n\t\t\t\tgs.eventQueue('instance.key.registry', current, 'Imported From Update Set');\t\n\t\t}\n\t}\n}\nexecute();","sys_class_name":"sysevent_script_action","sys_id":"6c20b31b0b80201064c2624e37673a0a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7f83a3f304312210559073c06a02f787","value":"7f83a3f304312210559073c06a02f787"},"sys_update_name":"sysevent_script_action_6c20b31b0b80201064c2624e37673a0a","sys_updated_by":"admin","sys_created_on":"2020-10-29 23:10:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update Set Key Registry Event","event_name":"loader.tables.processed","sys_name":"Update Set Key Registry Event","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"var leh = new GlideLabelEventHandler();\r\nleh.process(event, current);","sys_class_name":"sysevent_script_action","sys_id":"6c23cb850a0a0ba7000be093d0805dbc","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bd14ebf704312210559073c06a02f716","value":"bd14ebf704312210559073c06a02f716"},"sys_update_name":"sysevent_script_action_6c23cb850a0a0ba7000be093d0805dbc","sys_updated_by":"system","sys_created_on":"2009-02-12 20:19:38","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Labels - User Viewed","event_name":"user.view","sys_name":"Labels - User Viewed","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-07-11 22:20:26","sys_domain_path":"","script":"var sm = new GCFSampleMap();\nsm.put('plugin_id', '' + event.parm1);\nsm.put('first_level', '' + event.parm2);\n\nGCFCollector.recordUsageEvent('plugins', 'plugin', 'activate', sm);","sys_class_name":"sysevent_script_action","sys_id":"6c2544d2cb223300a54f78d5634c9cef","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/49d1d428e73233005765eef6c2f6a9eb","value":"49d1d428e73233005765eef6c2f6a9eb"},"sys_update_name":"sysevent_script_action_6c2544d2cb223300a54f78d5634c9cef","sys_updated_by":"admin","sys_created_on":"2019-07-11 21:34:35","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Plugin Activation GCF publish","event_name":"plugin.activated","sys_name":"Plugin Activation GCF publish","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/49d1d428e73233005765eef6c2f6a9eb","value":"49d1d428e73233005765eef6c2f6a9eb"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"6","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"var leh = new GlideLabelEventHandler();\r\nleh.process(event, current);","sys_class_name":"sysevent_script_action","sys_id":"6c4255760a0a0ba700a33949c7652cf2","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bd14ebf704312210559073c06a02f716","value":"bd14ebf704312210559073c06a02f716"},"sys_update_name":"sysevent_script_action_6c4255760a0a0ba700a33949c7652cf2","sys_updated_by":"system","sys_created_on":"2009-02-12 20:51:40","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Labels - Check Inserted","event_name":"label.check.insert","sys_name":"Labels - Check Inserted","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"6","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"var leh = new GlideLabelEventHandler();\r\nleh.process(event, current);","sys_class_name":"sysevent_script_action","sys_id":"6c427ab60a0a0ba70016c4297a36d6e0","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bd14ebf704312210559073c06a02f716","value":"bd14ebf704312210559073c06a02f716"},"sys_update_name":"sysevent_script_action_6c427ab60a0a0ba70016c4297a36d6e0","sys_updated_by":"system","sys_created_on":"2009-02-12 20:51:50","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Labels - Check Notify","event_name":"label.check.notify","sys_name":"Labels - Check Notify","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"8","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"var leh = new GlideLabelEventHandler();\r\nleh.process(event, current);","sys_class_name":"sysevent_script_action","sys_id":"6c42a68c0a0a0ba700e9a847b50a6b24","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bd14ebf704312210559073c06a02f716","value":"bd14ebf704312210559073c06a02f716"},"sys_update_name":"sysevent_script_action_6c42a68c0a0a0ba700e9a847b50a6b24","sys_updated_by":"system","sys_created_on":"2009-02-12 20:52:01","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Labels - Check Removed","event_name":"label.check.remove","sys_name":"Labels - Check Removed","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"gs.getProperty(\"sn_appclient.app.install.offline\") == \"true\"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-04-03 19:19:16","sys_domain_path":"/","script":"new GlideAppLoader().loadOfflineAppsWithOOB();","sys_class_name":"sysevent_script_action","sys_id":"6e7d611693203300ebd4f157b67ffb45","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_update_name":"sysevent_script_action_6e7d611693203300ebd4f157b67ffb45","sys_updated_by":"admin","sys_created_on":"2019-04-03 19:05:40","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"ReloadOfflineOutOfBandapps","event_name":"system.upgraded","sys_name":"ReloadOfflineOutOfBandapps","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-05-02 13:05:30","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.enrollment_snapshot', true)) {\n    deleteEnrollmentSnapshot();\n}\n\nfunction deleteEnrollmentSnapshot() {\n    var processId = event.parm1;\n\n    try {\n        new PwdEnrollSnapshotUtil().deleteInValidEnrollmentSnapshots();\n    } catch (ex) {\n        gs.error(\"[Script action: Delete enrollment snaps for a process. processId- \" + processId + \"]. execution error - \" + ex);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"708708be43c22110d68db0e245b8f29a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_708708be43c22110d68db0e245b8f29a","sys_updated_by":"admin","sys_created_on":"2023-04-10 12:06:16","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Delete enrollment snaps for a process","event_name":"pwd_process.delete","sys_name":"Delete enrollment snaps for a process","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"96","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-03-05 10:05:19","sys_domain_path":"","script":"\nfunction updateStats() {\n\tvar reportSysId = event.instance;\n\tvar userSysId = event.user_id;\n\tvar executionTimestamp = event.sys_created_on;\n\tvar executionDuration = event.parm1;\n\tvar reportStats = new SNC.ReportStats();\n\treportStats.updateStats(reportSysId, userSysId, executionTimestamp, executionDuration, event.parm2);\n}\nupdateStats();\n","sys_class_name":"sysevent_script_action","sys_id":"717cd500d7302100ef2281537e61038d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b753ab7304312210559073c06a02f7e6","value":"b753ab7304312210559073c06a02f7e6"},"sys_update_name":"sysevent_script_action_717cd500d7302100ef2281537e61038d","sys_updated_by":"admin","sys_created_on":"2014-05-16 12:33:25","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Report Stat","event_name":"report.view","sys_name":"Report Stat","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-11-15 18:32:55","sys_domain_path":"/","script":"var impersonationEvent = new sn_vsc.SCEventUtil();\nimpersonationEvent.impersonation();","sys_class_name":"sysevent_script_action","sys_id":"74a8d12eec261110f877c235d12577d5","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_74a8d12eec261110f877c235d12577d5","sys_updated_by":"maint","sys_created_on":"2022-10-17 23:23:15","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SC Event - Impersonation Start","event_name":"impersonation.start","sys_name":"SC Event - Impersonation Start","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","order":"125","sys_policy":"read"},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-02-15 09:13:37","sys_domain_path":"","script":"new ChangeManagementEventHandler(current).process(event);","sys_class_name":"sysevent_script_action","sys_id":"74d7e93a23ab23001488dc1756bf65b4","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/32b7af7f04b12210559073c06a02f7fb","value":"32b7af7f04b12210559073c06a02f7fb"},"sys_update_name":"sysevent_script_action_74d7e93a23ab23001488dc1756bf65b4","sys_updated_by":"admin","sys_created_on":"2019-02-14 14:53:32","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Handle service offering create event","event_name":"sn_chg_mgt.offering.CREATE","sys_name":"Handle service offering create event","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-20 07:30:24","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.password_expiration_reminder', false)) {\n    createExpirationRecords();\n}\n\nfunction createExpirationRecords() {\n    var userGroupGr = new GlideRecord(\"sys_user_grmember\");\n    userGroupGr.get(event.parm1);\n\n    var user = userGroupGr.user;\n    var group = userGroupGr.group;\n\n    var processes = new global.PwdExpirationUtils().getProcessesAssociatedWithAGroup(group);\n\n    for (var key in processes) {\n        createOrUpdateExpirationRecords(key, user, group);\n    }\n}\n\nfunction createOrUpdateExpirationRecords(processId, user, group) {\n    var processGr = new GlideRecord(\"pwd_process\");\n    processGr.addQuery(\"sys_id\", processId);\n    processGr.addQuery(\"send_expiration_reminder\", true);\n    processGr.addActiveQuery();\n    processGr.query();\n\n    if (processGr.next()) {\n        try {\n            new global.PwdExpirationUtils().updatePasswordExpirationDetails(user, processId);\n        } catch (ex) {\n            gs.error(\"[Script action: Create Expiration records for user_id \" + user + \" and group_id \" + group + \"] execution error - \" + ex);\n        }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"75cb2282536130106bdaddeeff7b12f8","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_75cb2282536130106bdaddeeff7b12f8","sys_updated_by":"admin","sys_created_on":"2021-07-26 06:45:58","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Expiration records for user-group","event_name":"sys_user_grmember.insert","sys_name":"Create Expiration records for user-group","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1=='com.snc.assessment_core'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-14 22:36:15","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '53e1d5a153101010207bddeeff7b129e, 868811a553101010207bddeeff7b12b0, 6f9bd9e553101010207bddeeff7b121d, 11de596953101010207bddeeff7b122f, e01cdde553101010207bddeeff7b1223, 7461a9e953101010207bddeeff7b12b8, 422f5d6953101010207bddeeff7b1227, c87f91a953101010207bddeeff7b121b, cfb16de953101010207bddeeff7b1284, 958d9d2953101010207bddeeff7b12e4, 1abf55a953101010207bddeeff7b1243, eb3dd92953101010207bddeeff7b12a3, 9cc2292d53101010207bddeeff7b1264, 4fff59a953101010207bddeeff7b120a, 61502da953101010207bddeeff7b12bd, 3ba061e953101010207bddeeff7b125c, 950165e953101010207bddeeff7b12c6');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active',true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"769e909e5301201091caddeeff7b12a3","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3da7677f04b12210559073c06a02f701","value":"3da7677f04b12210559073c06a02f701"},"sys_update_name":"sysevent_script_action_769e909e5301201091caddeeff7b12a3","sys_updated_by":"admin","sys_created_on":"2020-12-14 22:24:35","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view acls for Assessment","event_name":"plugin.activated","sys_name":"Activate report_view acls for Assessment","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-09-12 19:42:50","sys_domain_path":"","script":"downloadLicense();\n\nfunction downloadLicense() {\n    gs.log(\"Perform any post upgrade tasks after receiving system.upgraded event\", \"Execute Post upgrade Job\");\n    //1. group conversion if needed\n    //2. Download licenses\n    SNC.UsageAnalyticsScriptUtils.handlePostUpgradeActivities();\n}","sys_class_name":"sysevent_script_action","sys_id":"7757f8b777370010ca93aeca7810616a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8bc96fbb04f12210559073c06a02f755","value":"8bc96fbb04f12210559073c06a02f755"},"sys_update_name":"sysevent_script_action_7757f8b777370010ca93aeca7810616a","sys_updated_by":"admin","sys_created_on":"2020-04-02 18:26:19","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Execute License Download Job","event_name":"system.upgraded","sys_name":"Execute License Download Job","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"200","sys_policy":"read"},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-03-14 00:08:52","sys_domain_path":"","script":"var mlLicenseId = SNC.UsageAnalyticsScriptUtils.getLicenseIdForApp('com.glide.platform_ml');\nvar mlUsageReportTitle = 'Prediction Usage';\nvar dashboardName = mlUsageReportTitle;\n\nif (JSUtil.notNil(mlLicenseId) && !mlReportExists(mlUsageReportTitle)) {\n\tvar report = new GlideRecord('sys_report');\n    report.title = mlUsageReportTitle;\n    report.table = 'usageanalytics_count';                      \n    report.field = 'table_name'; // group by\n    report.type = 'line';                 \n\treport.sumfield = 'count';\n    report.aggregate = 'SUM';\n    report.trend_field = 'sys_created_on';\n    report.interval = 'month';\n    report.y_axis_title = 'Count';\n\t\n\tvar purchasedCountCfgSysId = getPurchasedCountCfgSysId(mlLicenseId);\n\tvar allocCountCfgSysId = getAllocCountCfgSysId();\n                       \n    var filter = 'sys_created_on<javascript:gs.beginningOfThisMonth()^sys_created_on>=javascript:gs.beginningOfLast12Months()';\n\tfilter += '^count_cfg=' + purchasedCountCfgSysId + '^ORcount_cfg=' + allocCountCfgSysId;\n\tfilter += '^EQ^GROUPBYtable_name^TRENDBYsys_created_on,month';\n\n    report.filter = filter;               \n                       \n    report.user = 'GLOBAL';\n    report.roles = 'ml_admin, ml_report_user';\n\t\n    var reportSysid = report.insert();\n    addReportToDashBoard(reportSysid, mlUsageReportTitle, dashboardName);\n}\n\nfunction addReportToDashBoard(reportSysid, mlUsageReportTitle, dashboardName) {\t\t\t\n\tvar dashboardInfo = getDashboardInfo(dashboardName);\n\tif (JSUtil.nil(dashboardInfo)) \n\t\treturn;\t\n\t\n\tvar portalSectionSysid = addPortalSection(dashboardInfo.portalPageSysid);\n\tif (JSUtil.nil(portalSectionSysid)) \n\t\treturn;\n\t\n\taddPortalPreference('title', mlUsageReportTitle, portalSectionSysid);\t\n\taddPortalPreference('sys_id', reportSysid, portalSectionSysid);\n\taddPortalPreference('renderer', 'com.glide.ui.portal.RenderReport', portalSectionSysid);\t\n\t\n\taddGridCanvasPane(dashboardInfo.gridCanvasSysid, portalSectionSysid);\n}\n\nfunction getDashboardInfo(dashboardName) {\n\tvar pa_dashboards_gr = new GlideRecord('pa_dashboards');\n\tpa_dashboards_gr.addQuery('name', dashboardName);\n\tpa_dashboards_gr.query();\n\tif (!pa_dashboards_gr.next())\n\t\treturn '';\t\n\n\tvar pa_m2m_dashboard_tabs_gr = new GlideRecord('pa_m2m_dashboard_tabs');\n\tpa_m2m_dashboard_tabs_gr.addQuery('dashboard', pa_dashboards_gr.sys_id.toString());\n\tpa_m2m_dashboard_tabs_gr.query();\n\tif (!pa_m2m_dashboard_tabs_gr.next())\n\t\treturn '';\n\t\n\tvar pa_tabs_gr = new GlideRecord('pa_tabs');\n\tpa_tabs_gr.addQuery('sys_id', pa_m2m_dashboard_tabs_gr.tab.toString());\n\tpa_tabs_gr.query();\n\tif (!pa_tabs_gr.next())\n\t\treturn '';\n\t\t\n\tvar sys_grid_canvas_gr = new GlideRecord('sys_grid_canvas');\n\tsys_grid_canvas_gr.addQuery('legacy_page', pa_tabs_gr.page.toString());\n\tsys_grid_canvas_gr.query();\n\tif (!sys_grid_canvas_gr.next())\n\t\treturn '';\n\t\t\n\treturn {'portalPageSysid': pa_tabs_gr.page.toString(), \n\t\t\t'gridCanvasSysid': sys_grid_canvas_gr.sys_id.toString()};\t\n}\n\nfunction addPortalSection(portalPageSysid) {\n\tvar sys_portal_gr = new GlideRecord('sys_portal');\n\tsys_portal_gr.page = portalPageSysid;\t\n\treturn sys_portal_gr.insert();\n}\n\nfunction addPortalPreference(prefName, prefValue, portalSectionSysid) {\n\tvar sys_portal_preferences_gr = new GlideRecord('sys_portal_preferences');\n\tsys_portal_preferences_gr.name = prefName;\n\tsys_portal_preferences_gr.portal_section = portalSectionSysid;\n\tsys_portal_preferences_gr.value = prefValue;\n\tsys_portal_preferences_gr.insert();\n}\n\nfunction addGridCanvasPane(gridCanvasSysid, portalSectionSysid) {\n\tvar sys_grid_canvas_pane_gr = new GlideRecord('sys_grid_canvas_pane');\n\tsys_grid_canvas_pane_gr.portal_widget = portalSectionSysid;\n\tsys_grid_canvas_pane_gr.grid_canvas = gridCanvasSysid;\n\tsys_grid_canvas_pane_gr.height=10;\n\tsys_grid_canvas_pane_gr.width=12;\n\tsys_grid_canvas_pane_gr.insert();\n}\n\nfunction mlReportExists(title) {\n    var ga = new GlideAggregate('sys_report');\n    ga.addAggregate('COUNT');\n    ga.addQuery('title', title);\n    ga.query();\n    var count = 0;\n    if (ga.next()) {\n        count = ga.getAggregate('COUNT');\n    }\n    return (count > 0);\n}\n\nfunction getPurchasedCountCfgSysId(licId) {\n\tvar gr = new GlideRecord('usageanalytics_count_cfg');\n\tgr.addQuery('definition_id', 'LICPURCH' + licId);\n\tgr.query();\n\tif (!gr.next())\n\t\treturn \"\";\n\treturn gr.getUniqueValue();\n\t\n}\n\nfunction getAllocCountCfgSysId() {\n\tvar gr = new GlideRecord('usageanalytics_count_cfg');\n\tgr.addQuery('definition_id', 'DEFN1000629');\n\tgr.query();\n\tif (!gr.next())\n\t\treturn \"\";\n\treturn gr.getUniqueValue();\n}","sys_class_name":"sysevent_script_action","sys_id":"7831e170eb1103004afb5722aaa3457e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9794ab3f04312210559073c06a02f70c","value":"9794ab3f04312210559073c06a02f70c"},"sys_update_name":"sysevent_script_action_7831e170eb1103004afb5722aaa3457e","sys_updated_by":"admin","sys_created_on":"2017-09-16 20:45:00","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Prediction Usage report","event_name":"snc.subscription.download.completed","sys_name":"Create Prediction Usage report","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-11-21 10:01:31","sys_domain_path":"/","script":"var tables = [\"sys_store_app\", \"sys_remote_app\"];\n\ntables.forEach(function(table) {\n\tvar existingApps = new GlideRecord(table);\n\texistingApps.addEncodedQuery(\"shared_internally=NULL\");\n\texistingApps.setValue(\"shared_internally\", false);\n\texistingApps.setWorkflow(false);\n\texistingApps.updateMultiple();\n});","sys_class_name":"sysevent_script_action","sys_id":"7ad532d373312300643aa4038bf6a796","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_update_name":"sysevent_script_action_7ad532d373312300643aa4038bf6a796","sys_updated_by":"admin","sys_created_on":"2018-11-21 10:01:31","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update shared internally fields","event_name":"system.upgraded","sys_name":"Update shared internally fields","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'sn_sow_itsm_common'","sys_mod_count":"5","active":"false","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 06:51:22","sys_domain_path":"/","script":"var currentEventScriptActionSysId = \"7d4cbd1143901210d8988beeaab8f241\";\nvar sowLandingPageUpgradeUtil = new SOWLandingPageUpgradeUtil();\nsowLandingPageUpgradeUtil.handleVariants();\ndisableCurrentEventScriptAction();\n\nfunction disableCurrentEventScriptAction() {\n    var eventScriptActionGr = new GlideRecord('sysevent_script_action');\n    if (eventScriptActionGr.get(currentEventScriptActionSysId)) {\n        eventScriptActionGr.setValue('active', false);\n        eventScriptActionGr.update();\n        gs.info('Disabling the script action {0} ({1}) as it should only run once.', [currentEventScriptActionSysId, \"Handle SOW landing page variants\"]);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"7d4cbd1143901210d8988beeaab8f241","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_update_name":"sysevent_script_action_7d4cbd1143901210d8988beeaab8f241","sys_updated_by":"system","sys_created_on":"2024-08-27 17:09:55","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Handle SOW landing page variants","event_name":"plugin.upgraded","sys_name":"Handle SOW landing page variants","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0eef12637311301045216238edf6a75e","value":"0eef12637311301045216238edf6a75e"},"sys_created_by":"admin","order":"200","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-19 13:46:39","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.password_expiration_reminder', false)) {\n    deactivateExpirationRecords();\n}\n\nfunction deactivateExpirationRecords() {\n    var userSysId = event.parm1;\n    var userGroupSysId = event.parm2;\n\n    try {\n        //Getting all the remaining entitled processes for that user (excluding the process related to the group with sys_id as userGroupSysId)\n        var userEntitledProcesses = new PasswordResetScopedUtil().getProcessIdsByUserId(userSysId).toString();\n        var gr = new GlideRecord(\"pwd_expiration\");\n        gr.addQuery(\"user\", userSysId);\n        //Don't de-activate the password expiration record for the user-process pair if the user still associated with that process via another group\n        gr.addQuery(\"pwd_process\", \"NOT IN\", userEntitledProcesses);\n\n        gr.setValue(\"active\", false);\n        gr.updateMultiple();\n    } catch (ex) {\n        gs.error(\"[Script action: Delete Expiration records for user_id \" + userSysId + \" and group_id \" + userGroupSysId + \"] execution error - \" + ex);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"7e270ef3531130106bdaddeeff7b120a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_7e270ef3531130106bdaddeeff7b120a","sys_updated_by":"admin","sys_created_on":"2021-07-19 04:20:02","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Deactivate expiration record for usr-grp","event_name":"sys_user_grmember.delete","sys_name":"Deactivate expiration record for usr-grp","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-04-18 23:21:10","sys_domain_path":"/","script":"var summary = new global.JSON().decode(event.parm1);\nvar uuidComment = summary.thresholdCheck.uuidComment;\nvar grIndicator = new GlideRecord('pa_indicators');\ngrIndicator.addEncodedQuery('sys_package=a51d46e3f2014110366b10017c5ba675^sys_id=' + uuidComment);\ngrIndicator.query();\nif (grIndicator.hasNext()) {\n    var user = null;\n    if (summary.thresholdCheck.personal) {\n        user = event.parm2;\n    }\n    var scoreIntegerDate = summary.scoreIntegerDate;\n    var message = buildMessage(summary);\n    appendScoreNote(message, uuidComment, scoreIntegerDate, user);\n}\n\nfunction buildMessage(summary) {\n    var scoreDate = summary.scoreDate;\n\n    var thresholdCheck = summary.thresholdCheck;\n\n    var uuidString = thresholdCheck.uuidString;\n\n    var message = scoreDate + \": \" + uuidString + \": \";\n\n    var unit = thresholdCheck.unit;\n\n    if (typeof unit == 'undefined') {\n        unit = '';\n    }\n\n    var condition = thresholdCheck.condition;\n\n    var thresholdLevel = thresholdCheck.thresholdLevel;\n\n    if (typeof thresholdLevel != 'undefined') {\n        condition += ' ' + thresholdLevel;\n        if (unit != '') {\n            condition += ' ' + unit;\n        }\n    }\n    return message + condition + ': ' + thresholdCheck.matchingScore + ' ' + unit;\n}\n\nfunction appendScoreNote(message, uuid, scoreDate, user) {\n    var gr = new GlideRecord(\"sn_vsc_metric_threshold_event\");\n    gr.addQuery(\"metric\", uuid);\n    gr.addQuery(\"score_date\", scoreDate);\n    gr.addQuery(\"user\", user);\n    gr.query();\n    if (gr.next()) {\n        gr.setValue(\"score_notes\", message + \"\\n\\n\" + gr.getValue(\"score_notes\"));\n        gr.update();\n    } else {\n        gr = new GlideRecord(\"sn_vsc_metric_threshold_event\");\n        gr.setValue(\"metric\", uuid);\n        gr.setValue(\"score_notes\", message);\n        gr.setValue('score_date', scoreDate);\n        gr.setValue(\"user\", user);\n        gr.insert();\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"7e2e13c7f1e98210f87774aaf6f084ce","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_7e2e13c7f1e98210f87774aaf6f084ce","sys_updated_by":"maint","sys_created_on":"2024-04-18 17:59:18","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SC capture metric threshold event","event_name":"pa.job.threshold.reached","sys_name":"SC capture metric threshold event","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","order":"200","sys_policy":"read"},{"condition_script":"event.parm1 == 'com.glide.high_security'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '6d5cc5b8b7601010a4fbfa13ee11a90c, 061ca078b7201010a4fbfa13ee11a98b');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"800f0f42b74120104c45f2b1de11a924","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8778afb304f12210559073c06a02f7f6","value":"8778afb304f12210559073c06a02f7f6"},"sys_update_name":"sysevent_script_action_800f0f42b74120104c45f2b1de11a924","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:35:48","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- High security","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- High security","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"17","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-08-26 16:51:11","sys_domain_path":"/","script":"var accessManagement = new sn_employee.ep_AccessManagement();\naccessManagement.refreshAccessForApp(current);\n","sys_class_name":"sysevent_script_action","sys_id":"809f728b77955110a956b9999a5a99d9","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1e95bac2738f001001b566b90ff6a7cd","value":"1e95bac2738f001001b566b90ff6a7cd"},"sys_update_name":"sysevent_script_action_809f728b77955110a956b9999a5a99d9","sys_updated_by":"admin","sys_created_on":"2022-08-18 16:51:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Refresh employee app access","event_name":"sn_employee.refresh.employee.app.access","sys_name":"Refresh employee app access","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1e95bac2738f001001b566b90ff6a7cd","value":"1e95bac2738f001001b566b90ff6a7cd"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"8","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"// call script to upgrade myself\r\ngs.loadBatchScript(\"sys.scripts/\" + gs.getProperty( \"glide.sys.upgrade_script\"));\r\n\r\n// now tell the mothership I am done\r\nvar myname = gs.getProperty(\"glide.db.name\");\r\nvar mynameonly = new String(myname);\r\nmynameonly = mynameonly.split(\"_\")[0];\r\n\r\nvar r = new GlideRemoteGlideRecord(\"https://hi.service-now.com/\", \"ecc_queue\"); \r\nr.initialize(); \r\nr.setValue(\"agent\", \"Service-now deployer\"); \r\nr.setValue(\"name\", \"system.update.confirm\");\r\nr.setValue(\"source\", mynameonly);\r\nr.setValue(\"queue\", \"input\");\r\nr.setValue(\"payload\", \"<update><url>\" + mynameonly + \"</url><war>\" + event.parm1 + \"</war></update>\");\r\nr.insert();\r\n","sys_class_name":"sysevent_script_action","sys_id":"82ca41aac611222b00e9b4bb8bff8ec0","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/68c7a3bf04b12210559073c06a02f711","value":"68c7a3bf04b12210559073c06a02f711"},"sys_update_name":"sysevent_script_action_82ca41aac611222b00e9b4bb8bff8ec0","sys_updated_by":"system","sys_created_on":"2005-06-16 01:36:30","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"System Self Upgrade","event_name":"system.upgrade","sys_name":"System Self Upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-08-07 10:24:15","sys_domain_path":"","script":"new KBCommon().updateRating(event.parm1,event.parm2);","sys_class_name":"sysevent_script_action","sys_id":"82ee398a53433300db47ddeeff7b128d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/2fe727ff04b12210559073c06a02f7dd","value":"2fe727ff04b12210559073c06a02f7dd"},"sys_update_name":"sysevent_script_action_82ee398a53433300db47ddeeff7b128d","sys_updated_by":"admin","sys_created_on":"2019-08-05 08:24:38","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Calculate rating","event_name":"kb_feedback.rating.deleted","sys_name":"Calculate rating","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-11-02 03:30:00","sys_domain_path":"/","script":"var eventUtil = new sn_vsc.SCEventUtil();\neventUtil.securityElevation();","sys_class_name":"sysevent_script_action","sys_id":"8478d12eec261110f877c235d12577ba","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_8478d12eec261110f877c235d12577ba","sys_updated_by":"maint","sys_created_on":"2022-10-17 23:22:23","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SC Event - Security Elevations","event_name":"security.elevated_role.enabled","sys_name":"SC Event - Security Elevations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","order":"120","sys_policy":"read"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-05-04 13:06:48","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.enrollment_snapshot', true)) {\n    deleteEnrollmentSnapshot();\n}\n\nfunction deleteEnrollmentSnapshot() {\n    var pwdEnrollSnapshotUtil = new PwdEnrollSnapshotUtil();\n    var processId = event.parm1;\n    var verificationId = event.parm2;\n\n    try {\n        if (pwdEnrollSnapshotUtil.isAutoEnrollVerification(verificationId) || !pwdEnrollSnapshotUtil.isActiveProcess(processId))\n            return;\n\n        var userIds = pwdEnrollSnapshotUtil.getUsersByProcesses([processId]);\n        for (var i = 0; i < userIds.length; i++) {\n            pwdEnrollSnapshotUtil.deleteInValidEnrollmentSnapshotsByUserId(userIds[i]);\n        }\n    } catch (ex) {\n        gs.error(\"[Script action: Delete enrollment snaps for a proc-ver. processId- \" + processId + \"]. execution error - \" + ex);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"84e0eb6b43822110d68db0e245b8f2bf","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_84e0eb6b43822110d68db0e245b8f2bf","sys_updated_by":"admin","sys_created_on":"2023-04-13 11:41:46","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Delete Enrollment snaps for a proc-ver","event_name":"pwd_map_proc_to_verification.delete","sys_name":"Delete Enrollment snaps for a proc-ver","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"event.parm1 == 'com.snc.change_management.policy'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '4f9b1604736010102eb52d2b04f6a73b, 7d8952c0736010102eb52d2b04f6a798, 2f881a80736010102eb52d2b04f6a76a');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"857dcf02b74120104c45f2b1de11a977","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/463c67f704352210559073c06a02f76b","value":"463c67f704352210559073c06a02f76b"},"sys_update_name":"sysevent_script_action_857dcf02b74120104c45f2b1de11a977","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:29:02","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- Chg policy","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- Chg policy","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"10","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-01-12 12:38:39","sys_domain_path":"/","script":"try {\n    var customInsightType = \"itsm_benchmark\";\n    var startDate = event.parm1;\n    var endDate = new GlideDateTime(startDate);\n    endDate.addMonthsUTC(1);\n    endDate = endDate.getDate().toString();\n\n    var bmInsightsUtil = new sn_benchmarks.BenchmarkInsightUtil();\n    var bmRecords = bmInsightsUtil.fetchBenchmarkScores(startDate, endDate);\n\n    startDate = startDate.replace(/-/g, \"\");\n    endDate = JSON.parse(endDate.replace(/-/g, \"\"));\n\n    for (var i = 0; i < bmRecords.length; i++) {\n        var uuid = {\n            \"indicatorSysID\": bmRecords[i].uuid,\n            \"domainSysID\": \"global\"\n        };\n\n        var existingInsight = new sn_par_intelligence.CustomInsight().getInsights(customInsightType, JSON.stringify(uuid), startDate, endDate);\n        var insightObj = JSON.parse(existingInsight)[0];\n\n        if (!insightObj) {\n            new sn_par_intelligence.CustomInsight().create(customInsightType, JSON.stringify(uuid), JSON.stringify(bmInsightsUtil.getInsightData(bmRecords[i])));\n            gs.info('Benchmark insights inserted in PAR computed insight table for a month which has start-date as ' + startDate);\n        } else {\n            new sn_par_intelligence.CustomInsight().updateData(insightObj['sysID'], JSON.stringify(bmInsightsUtil.getInsightData(bmRecords[i])));\n            gs.info('Benchmark insights updated in PAR computed insight table for a month which has start-date as ' + startDate);\n        }\n    }\n} catch (e) {\n    gs.info(\"Error in script action - 'Insert benchmark insights to PAR table': \" + e);\n}","sys_class_name":"sysevent_script_action","sys_id":"868adf5bd0b23910f877e724d5540586","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3214b661c3eb211062ebf69f05013160","value":"3214b661c3eb211062ebf69f05013160"},"sys_update_name":"sysevent_script_action_868adf5bd0b23910f877e724d5540586","sys_updated_by":"admin","sys_created_on":"2023-12-04 19:24:14","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Insert benchmark insights to PAR table","event_name":"sn_bm_client.insert.par.insights","sys_name":"Insert benchmark insights to PAR table","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3214b661c3eb211062ebf69f05013160","value":"3214b661c3eb211062ebf69f05013160"},"sys_created_by":"maint","order":"100","sys_policy":""},{"condition_script":"event.parm1=='com.glide.cs.chatbot'","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-10-05 20:55:11","sys_domain_path":"/","script":"var SERVICENOW_NLU_DRIVER_ID = '64c023c17300330021a044764df6a70e';\nvar GENERAL_SETTINGS_SYS_ID = '586237553b1323009cbbcea234efc42f';\n\nvar gr = new GlideRecord('sys_cs_general_settings');\nif (gr.get(GENERAL_SETTINGS_SYS_ID)) {\n\tgr.setValue('auto_select_prompt_enabled_mid', true);\n\tgr.setValue('nlu_enabled', true);\n\tgr.setValue('nlu_driver', SERVICENOW_NLU_DRIVER_ID);\n\tgr.update();\n}\n\ngs.info('Enabled ServiceNow NLU for newly activated chatbot plugin');\n","sys_class_name":"sysevent_script_action","sys_id":"86993e6ec712111031d379a988c260cf","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sysevent_script_action_86993e6ec712111031d379a988c260cf","sys_updated_by":"admin","sys_created_on":"2022-10-05 20:13:50","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Enable NLU OOB for chatbot plugin","event_name":"plugin.activated","sys_name":"Enable NLU OOB for chatbot plugin","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-02-23 22:15:52","sys_domain_path":"","script":"new ChangeManagementEventHandler(current).process(event);","sys_class_name":"sysevent_script_action","sys_id":"86a83509c3e22010a282a539e540dd14","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/32b7af7f04b12210559073c06a02f7fb","value":"32b7af7f04b12210559073c06a02f7fb"},"sys_update_name":"sysevent_script_action_86a83509c3e22010a282a539e540dd14","sys_updated_by":"admin","sys_created_on":"2021-02-23 21:19:49","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Handle update Change schedule time event","event_name":"sn_chg_mgt.schedule.UPDATE","sys_name":"Handle update Change schedule time event","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-05-02 23:05:28","sys_domain_path":"","script":"// Used to determine if a route is a record or list route, does it have atleast 1\n// screen in its screen collection that uses this record or list Macroponents\nvar recordMacroponentSysId = \"558adc930f0210107d20409dc4767e84\";\nvar listMacroponentSysId = \"2c08111d0fc21010036a83fa68767ef6\";\n\nvar breadCrumAppShellSysId = \"e341e22cc32e2010ea04a5a1d840dd02\";\nvar agentWorkspaceApshellSysId = \"c276387cc331101080d6d3658940ddd2\";\n\n// Get all routes (sys_ux_app_route) from an Admin Panel (PageConfigSysId)\n// check if any of its routes has a screen collection that contains at least 1\n// screen that has a page Definition matching ScreenID. If so, return that route.\nfunction checkRoutesForScreenID (PageConfigSysId, ScreenID){\n  var routes = new GlideRecord('sys_ux_app_route');\n  routes.addQuery('app_config', PageConfigSysId);\n\n  routes.query();\n  while(routes.next()){\n    var screenCollection = routes.getValue('screen_type');\n\n    var hasScreenId = new global.GlideQuery('sys_ux_screen')\n    .where('screen_type', screenCollection)\n    .where('screen_type', '!=', null)\n    .where('macroponent', ScreenID)\n    .count();   \n\n    if (hasScreenId > 0) {\n      // gs.info('At least 1 screen in the screen Collection has a macroponet (a.k.a. Page Definition) with the Screen ID' + ScreenID + \" \" + routes.getValue('name'));\n      return routes;\n    }\n  }\n}\n\n\n// Based on an Experience's Admin Panel (PageConfigSysId), find all routes that\n// belong to the admin panel and have a parent_macroponent_composition_element_id\n// equal to 'wsInboxSidebar'.  This last query condition is required for a route\n// to be the Inbox route.  If we get a result we know we have the Inbox Route\nfunction checkInbox (PageConfigSysId){\n  var Routes = new GlideRecord('sys_ux_app_route');\n  Routes.addQuery('app_config', PageConfigSysId);\n  Routes.addQuery('parent_macroponent_composition_element_id', 'wsInboxSidebar');\n  \n  Routes.query();\n  while(Routes.next()){\n    return Routes;\n  }\n}\n\n\n// look for any sys_ux_page_registry (experiences) has has either `AgentWorkspaceApshell`\n// or 'BreadcrumAppshell`as its root_macroponet.\n// For all of these experiences, check to see if any of them contain a sys_ux_page_property\n// with a name of \"featureRoutes\". If an experience doesn't have \"featureRoutes\",\n// then store these experiences so that we can process their routes and generate\n// a page property for featureRoutes\nfunction findExperiencesForMacroponents () {\n  var experiences = new GlideRecord('sys_ux_page_registry'); \n  var qc = experiences.addQuery('root_macroponent', agentWorkspaceApshellSysId);\n  qc.addOrCondition('root_macroponent', breadCrumAppShellSysId);\n  experiences.query();\n  \n  var pageRegistryWithoutFeatureRoute = [];\n  while (experiences.next()) {\n    var currPageSysId = experiences.getValue('sys_id');\n    var currPageConfig = experiences.getValue('admin_panel');\n    var currExperienceName = experiences.getValue('sys_name');\n    var currExperienceSysScope = experiences.getValue('sys_scope');\n    \n    var numOfFeatureRoutes = new global.GlideQuery('sys_ux_page_property')\n      .where('page', experiences.sys_id)\n      .where('name', 'featureRoutes')\n      .count();   \n  \n    if (numOfFeatureRoutes < 1) {\n      pageRegistryWithoutFeatureRoute.push({\n        \"sys_scope\": currExperienceSysScope,\n        \"experience_name\": currExperienceName, \n        \"page_registry_sys_id\": currPageSysId, \n        \"admin_panel_sys_id\": currPageConfig\n      });\n    }\n  }\n  return pageRegistryWithoutFeatureRoute;\n}\n\n// Tranform route properties to match the featureRoute spec.\n// Key should be either \"optional_parameters\" for params or \"fields\"\nfunction buildMappings(routeRecord, key){\n  var mappingObj = [];\n  var valueString = routeRecord.getValue(key);\n  if (valueString === null){\n    return mappingObj;\n  }\n  var valueList = valueString.split(',');\n  valueList.forEach(function(value){\n    var valueMap = {\n      \"name\": value,\n      \"mapping\": {\n        \"address\": value\n      }\n    };\n    mappingObj.push(valueMap);\n  });\n  return mappingObj;\n}\n\n\nfunction hasRequiredFields(routeRecord, requiredFields){\n  if (requiredFields && requiredFields.length > 0){\n    var fieldString = routeRecord.getValue('fields');\n    if(fieldString === null){\n      return false;\n    }\n    var fieldList = fieldString.split(',');\n    fieldList.forEach( function(field){\n      if(requiredFields.indexOf(field) == -1){\n        return false;\n      }\n    });\n  }\n  return true;\n}\n\nfunction buildProp(route){\n  var routeFields = buildMappings(route, 'fields');\n  var routeParams = buildMappings(route, 'optional_parameters');\n  var mappingObj = {};\n  mappingObj[\"_default\"] = {\n    \"routeInfo\": {\n      \"route\": route.getValue(\"route_type\"),\n      \"fields\": routeFields,\n      \"params\": routeParams\n    }\n  };\n  return mappingObj;\n}\n\nfunction buildInboxProp(route){\n  var routeFields = buildMappings(route, 'fields');\n  var routeParams = buildMappings(route, 'optional_parameters');\n  var mappingObj = {};\n  mappingObj[\"_default\"] = {\n    \"type\": \"'VIEWPORT'\",\n    \"routeInfo\": {\n      \"route\": \"inbox\"\n    },\n    \"viewportInfo\": {\n      \"route\": route.getValue(\"route_type\"),\n      \"fields\": routeFields,\n      \"params\": routeParams\n    }\n  };\n  return mappingObj;\n}\n\nfunction addRecord (experienceSysId, experienceSysScope, property){\n  var propString = JSON.stringify(property);\n  var featureRouteProp = new GlideRecord('sys_ux_page_property');\n  featureRouteProp.initialize();\n  featureRouteProp.setValue('page',experienceSysId);\n  featureRouteProp.setValue('name', 'featureRoutes');\n  featureRouteProp.setValue('type', 'json');\n  featureRouteProp.setValue('sys_scope', experienceSysScope);\n  featureRouteProp.setValue('value', propString);\n  featureRouteProp.insert();\n}\n\n\nfunction process () {\n  var addedFeatureRoutes = [];\n  var pageRegistry = findExperiencesForMacroponents();\n  \n  pageRegistry.forEach(function(experience){\n    var experienceSysId = experience.page_registry_sys_id;\n    var experienceAdminConfig = experience.admin_panel_sys_id;\n    var experienceName = experience.experience_name;\n    var experienceSysScope = experience.sys_scope;\n    var routeFeatureProp = {};\n    \n    //check Inbox\n    var inboxRoute = checkInbox(experienceAdminConfig);\n\n    //check Record\n    var recordRoute = checkRoutesForScreenID(experienceAdminConfig, recordMacroponentSysId);\n\n    //check List\n    var listRoute = checkRoutesForScreenID(experienceAdminConfig, listMacroponentSysId);\n\n    if (recordRoute && hasRequiredFields(recordRoute, ['table', 'sysId'])){\n      var recordProp = buildProp(recordRoute);\n      routeFeatureProp['record'] = recordProp;\n    }\n    if (listRoute){\n      var listProp = buildProp(listRoute);\n      routeFeatureProp['list'] = listProp;\n    }\n    if (inboxRoute){\n      var inboxParams = buildInboxProp(inboxRoute);\n      routeFeatureProp['inbox'] = inboxParams;\n    }\n\n    if (Object.keys(routeFeatureProp).length > 0){\n      addRecord(experienceSysId, experienceSysScope, routeFeatureProp);\n      addedFeatureRoutes.push(experienceName);\n    }\n  });\n  if (addedFeatureRoutes.length > 0){\n    gs.info(\"Generate featureRoutes Page Property: Page roperties added for experiences: \" + addedFeatureRoutes);\n  } else {\n    gs.info(\"Generate featureRoutes Page Property: No page properties were added.\");\n  }\n}\n\nprocess();\n","sys_class_name":"sysevent_script_action","sys_id":"8754ea62c713301072b211d4d8c2605a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4d3530700f3110107d20409dc4767e42","value":"4d3530700f3110107d20409dc4767e42"},"sys_update_name":"sysevent_script_action_8754ea62c713301072b211d4d8c2605a","sys_updated_by":"admin","sys_created_on":"2021-10-22 19:20:42","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Generate FeatureRoute Page Property","event_name":"system.upgraded","sys_name":"Generate FeatureRoute Page Property","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4d3530700f3110107d20409dc4767e42","value":"4d3530700f3110107d20409dc4767e42"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-09-25 19:16:14","sys_domain_path":"","script":"var priority = 'Interactive';\nvar eccParams = {\n    'source': 'signature_validation_certs_reload',\n    'topic': 'SystemCommand'\n};\n\nnew SNC.MidEccSender().broadcastToAllMidServers(priority, eccParams, {});","sys_class_name":"sysevent_script_action","sys_id":"87dccb157723101099808d116810614a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/42b8273704f12210559073c06a02f78d","value":"42b8273704f12210559073c06a02f78d"},"sys_update_name":"sysevent_script_action_87dccb157723101099808d116810614a","sys_updated_by":"gary.stentiford","sys_created_on":"2020-09-25 19:16:14","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Notify MIDs of Key Registry Modification","event_name":"instance.key.registry","sys_name":"Notify MIDs of Key Registry Modification","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"gary.stentiford","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-09-20 15:24:20","sys_domain_path":"/","script":"//Run Comparison Async and update status \nvar scan = event.parm2.split(',');\nvar res1 = new sn_vsc.ScanComparisonUtil().getScanNumber(scan[1]);\nvar res2 = new sn_vsc.ScanComparisonUtil().getScanNumber(scan[2]);\nnew sn_vsc.ScanComparisonUtil().runComparison(scan[1], scan[2], scan[0], res1, res2);\nnew sn_vsc.ScanComparisonUtil().runComparison(scan[2], scan[1], scan[0], res1, res2);\nvar gr = new GlideRecord('sn_vsc_scan_comparisons');\ngr.get('sys_id', scan[0]);\ngr.query();\nif (gr.next()) {\n    gr.scn_status = 'complete';\n    gr.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"8928dd1653411110dd8eddeeff7b124b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_8928dd1653411110dd8eddeeff7b124b","sys_updated_by":"admin","sys_created_on":"2022-08-03 15:11:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"ExecuteScanComparison","event_name":"sn_vsc.sec.scan.comparison","sys_name":"ExecuteScanComparison","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-09-25 19:16:14","sys_domain_path":"","script":"var priority = 'Interactive';\nvar eccParams = {\n    'source': 'signature_validation_certs_reload',\n    'topic': 'SystemCommand'\n};\n\nnew SNC.MidEccSender().broadcastToAllMidServers(priority, eccParams, {});","sys_class_name":"sysevent_script_action","sys_id":"897563d17723101099808d11681061ae","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/42b8273704f12210559073c06a02f78d","value":"42b8273704f12210559073c06a02f78d"},"sys_update_name":"sysevent_script_action_897563d17723101099808d11681061ae","sys_updated_by":"gary.stentiford","sys_created_on":"2020-09-25 19:16:14","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Notify MIDs of Key Registry Modification","event_name":"module.key.registry","sys_name":"Notify MIDs of Key Registry Modification","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"gary.stentiford","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.glide.hub.flow_engine'","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'b4a9cb6573151010d70877186bf6a783');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"89dc98d7738d2010d70877186bf6a792","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/063be77304352210559073c06a02f7e4","value":"063be77304352210559073c06a02f7e4"},"sys_update_name":"sysevent_script_action_89dc98d7738d2010d70877186bf6a792","sys_updated_by":"system","sys_created_on":"2020-12-18 00:49:46","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs for Flow Engin","event_name":"plugin.activated","sys_name":"Activate report_view ACLs for Flow Engin","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-02-26 01:19:29","sys_domain_path":"/","script":"sn_oneapi.OneApiCaller.executeFeatureInvocation(current.sys_id);","sys_class_name":"sysevent_script_action","sys_id":"8cb644f0531121101fdbddeeff7b1260","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/fc84affb04312210559073c06a02f73e","value":"fc84affb04312210559073c06a02f73e"},"sys_update_name":"sysevent_script_action_8cb644f0531121101fdbddeeff7b1260","sys_updated_by":"admin","sys_created_on":"2023-02-25 23:48:59","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"OneApi Script Async","event_name":"oneapi.script.async","sys_name":"OneApi Script Async","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"JSUtil.notNil(event.parm1 + '')","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-10-02 16:03:58","sys_domain_path":"","script":"var tableName = 'sc_cart_item';\nvar sysId = event.parm1 + '';\nvar mrvsRowGr = new GlideRecord('sc_multi_row_question_answer');\nmrvsRowGr.addQuery('parent_table_name', tableName);\nmrvsRowGr.addQuery('parent_id', sysId);\nmrvsRowGr.query();\nmrvsRowGr.deleteMultiple();","sys_class_name":"sysevent_script_action","sys_id":"8d0f9a560b2310106b80482393673a65","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3028ab3304f12210559073c06a02f7b7","value":"3028ab3304f12210559073c06a02f7b7"},"sys_update_name":"sysevent_script_action_8d0f9a560b2310106b80482393673a65","sys_updated_by":"admin","sys_created_on":"2020-10-01 18:13:05","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"delete orphan multi row question answers","event_name":"sc_cart_item.multi_row.orphan.delete","sys_name":"delete orphan multi row question answers","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-07-15 07:43:20","sys_domain_path":"","script":"var gr = new GlideRecord(\"sys_declarative_action_group\");\nif (gr.isValid()) {\n\tgr.query();\n\twhile (gr.next()) {\n\t\tif (gr.getValue(\"order\") == null) {\n\t\t\tgr.setValue(\"order\", 100);\n\t\t\tgr.setWorkflow(false);\n\t\t\tgr.update();\n\t\t}\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"8df33153c7230010099a308dc7c2601e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9693e7f304312210559073c06a02f7f5","value":"9693e7f304312210559073c06a02f7f5"},"sys_update_name":"sysevent_script_action_8df33153c7230010099a308dc7c2601e","sys_updated_by":"admin","sys_created_on":"2020-03-19 21:30:24","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Set Order for Declarative Action Groups","event_name":"system.upgraded","sys_name":"Set Order for Declarative Action Groups","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm2 == 'false'","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-03-16 21:32:53","sys_domain_path":"","script":"var script = new EmbeddedHelpRoleSynchronizer();\nscript.roleSynchronizer();","sys_class_name":"sysevent_script_action","sys_id":"8e4c0f743b013200be7e832b44efc4e4","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bb2b677304352210559073c06a02f70b","value":"bb2b677304352210559073c06a02f70b"},"sys_update_name":"sysevent_script_action_8e4c0f743b013200be7e832b44efc4e4","sys_updated_by":"johnoliver.mendoza","sys_created_on":"2017-02-17 21:53:26","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Sync Role in Embedded Help - Plugin","event_name":"plugin.upgraded","sys_name":"Sync Role in Embedded Help - Plugin","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"sameep.kodia","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.core.automation'","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-16 17:18:36","sys_domain_path":"","script":"// com.snc.core.automation (which is activated by glide OOTB)\n// requires com.glideapp.agent so both will be covered here\nvar midAclSysIds = [\n\t\"1689301d53485410996addeeff7b12eb\",\n\t\"1bfcf4dd53485410996addeeff7b1257\",\n\t\"52caf45d53485410996addeeff7b1293\",\n\t\"707830d953485410996addeeff7b121a\",\n\t\"b9f3d8ce5308d410996addeeff7b12d4\",\n\t\"f6052cca5348d410996addeeff7b1243\",\n\t\"92ea785d53485410996addeeff7b12a2\",\n\t\"adaaf05d53485410996addeeff7b12d4\",\n\t\"e568648e5348d410996addeeff7b122e\",\n];\n\nvar aclGr = new GlideRecord('sys_security_acl');\naclGr.addQuery('sys_id', 'IN', midAclSysIds);\naclGr.query();\nwhile (aclGr.next()) {\n\taclGr.setValue('active', true);\n\taclGr.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"8e5be13a5341a0103f5fddeeff7b1262","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/91d8237704f12210559073c06a02f73b","value":"91d8237704f12210559073c06a02f73b"},"sys_update_name":"sysevent_script_action_8e5be13a5341a0103f5fddeeff7b1262","sys_updated_by":"admin","sys_created_on":"2020-12-16 17:15:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs for MID","event_name":"plugin.activated","sys_name":"Activate report_view ACLs for MID","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"8","active":"true","description":"","sys_overrides":{"link":"https://dev315171.service-now.com/api/now/v1/table/sysrule/global","value":"global"},"sys_updated_on":"2014-02-27 18:10:15","sys_domain_path":"","script":"//\n// Set the Last login time field on the user record, DO NOT update sys_updated_on, sys_updated_by, or sys_mod_count\n//\nvar gr = new GlideRecord(\"sys_user\");\ngr.addQuery(\"user_name\", event.parm1);\ngr.query();\nif (gr.next()) {\n\tgr.last_login_time = event.sys_created_on;\n\tgr.last_login_device = event.parm2;\n\tgr.autoSysFields(false);\n\tgr.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"8e93ed730a05001301dec5cd65369e9e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9543af3304312210559073c06a02f769","value":"9543af3304312210559073c06a02f769"},"sys_update_name":"sysevent_script_action_8e93ed730a05001301dec5cd65369e9e","sys_updated_by":"admin","sys_created_on":"2007-03-26 14:08:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Last login time","event_name":"login","sys_name":"Last login time","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"14","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-30 10:26:57","sys_domain_path":"","script":"var board = current.board.getRefRecord();\nvar task = current.task.getRefRecord();\nvar deepLink = \"/$vtb.do?sysparm_board=\" + board.sys_id + \"&task=\" + task.sys_id;\nvar message = \"\\\"\" + task.short_description + \"\\\" \";\nvar additionalInfo = JSON.parse(event.parm1);\nvar previousLaneName = additionalInfo.previousLaneName;\nvar laneType = additionalInfo.laneType;\nif (!previousLaneName)\n\tmessage += \"added\";\nelse\n\tmessage += \"moved from \" + previousLaneName;\nmessage += \" to \" + current.getDisplayValue(laneType);\n\nvar groupForCard = new GlideRecord(\"live_group_profile\");\ngroupForCard.addQuery(\"table\", \"vtb_board\");\ngroupForCard.addQuery(\"document\", current.board);\ngroupForCard.query();\nif (groupForCard.next())\n\tnew GlideCollaborationManager().sendVTBUpdate(groupForCard.sys_id, additionalInfo.userId, message, deepLink);\n\n","sys_class_name":"sysevent_script_action","sys_id":"8f9446a45f200010c5e240df2f731334","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d4442b7b04312210559073c06a02f7ee","value":"d4442b7b04312210559073c06a02f7ee"},"sys_update_name":"sysevent_script_action_8f9446a45f200010c5e240df2f731334","sys_updated_by":"admin","sys_created_on":"2019-10-14 06:30:29","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Lane change message to connect","event_name":"vtb_card.send.laneupdate","sys_name":"Lane change message to connect","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2016-02-04 01:30:59","sys_domain_path":"","script":"if (gs.getProperty(\"glide.installation.production\")) {\n\tvar build = gs.getProperty(\"glide.buildname\");\n\tvar embHelp = \"sys_embedded_help_content\";\n\tvar choiceList = new GlideRecord(\"sys_choice\");\n\tchoiceList.addQuery(\"element\", \"version\");\n\tchoiceList.addQuery(\"name\", embHelp);\n\tchoiceList.addQuery(\"value\", build.toLowerCase().substring(0,1));\n\tchoiceList.query();\n\tif (!choiceList.hasNext()) {\n\t\tchoiceList = new GlideRecord(\"sys_choice\");\n\t\tchoiceList.initialize();\n\t\tchoiceList.setValue(\"element\", \"version\");\n\t\tchoiceList.setValue(\"name\", embHelp);\n\t\tchoiceList.setValue(\"value\", build.toLowerCase().substring(0,1));\n\t\tchoiceList.setValue(\"label\", build);\n\t\tchoiceList.insert();\n\t\tvar dict = new GlideRecord(\"sys_dictionary\");\n\t\tdict.addQuery(\"name\", embHelp);\n\t\tdict.addQuery(\"element\", \"version\");\n\t\tdict.query();\n\t\tif (dict.next()) {\n\t\t\tif (dict.getValue(\"default_value\") != build.toLowerCase().substring(0,1)) {\n\t\t\t\tdict.getValue(\"default_value\", build.toLowerCase().substring(0,1));\n\t\t\t\tdict.update();\n\t\t\t}\n\t\t}\n\t\tgs.log(\"Embedded Help Version Upgrade to: \" + build);\n\n\t}\n\t\n\t// Purge old embedded help\n\t/*\n\t// This needs to be fixed before uncommenting it. In a dev env the build name is always HEAD which deletes all Helsinki content.  \n\tvar content = new GlideRecord(embHelp);\n\tcontent.addQuery(\"version\", \"!=\", build.toLowerCase().substring(0,1));\n\tcontent.addQuery(\"version\", \"!=\", \"all\");\n\tcontent.addQuery(\"snc_created\", \"true\");\n\tcontent.query();\n\tcontent.deleteMultiple();\n\t*/\n\t\n\tvar blankRecords = new GlideRecord(embHelp);\n\tblankRecords.addQuery(\"snc_created\", true);\n\tblankRecords.addNullQuery(\"content\");\n\tblankRecords.query();\n\tblankRecords.deleteMultiple();\n}\n\n\n","sys_class_name":"sysevent_script_action","sys_id":"8fbb1cf347011200f815d8966c9a71af","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bb2b677304352210559073c06a02f70b","value":"bb2b677304352210559073c06a02f70b"},"sys_update_name":"sysevent_script_action_8fbb1cf347011200f815d8966c9a71af","sys_updated_by":"nick.leclair","sys_created_on":"2016-01-26 00:24:57","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update Embedded Help Version","event_name":"system.upgraded","sys_name":"Update Embedded Help Version","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"nick.leclair","order":"600","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-07-22 11:50:44","sys_domain_path":"/","script":"importPluginTranslations();\n\nfunction importPluginTranslations() {\n\tif(gs.tableExists('sys_language')) {\n      var gr = new GlideRecord('sys_language');\n      gr.addActiveQuery();\n      gr.query();\n\n      while (gr.next()) {\n          var lName = gr.name.toLowerCase();\n\n          if (lName !== 'english') {\n              if (lName.contains(' - '))\n                  lName = lName.replace(' - ', /-/g);\n              else if (lName.contains(' '))\n                  lName = lName.replaceAll(' ', '_');\n\n              var tl = new global.TranslationLoader();\n              tl.languageAbbreviation = tl.getLanguageAbbreviation0('com.snc.i18n.' + lName);\n\n              tl.loadTranslationsFromAppPlugin('sn_ads_setup');\n              gs.info('Completed loading application language files for: sn_ads_setup ' + lName);\n          }\n      }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"911a2212eb3011105843ceb2b2522800","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1cb77a801b9af01039c155f3604bcb9e","value":"1cb77a801b9af01039c155f3604bcb9e"},"sys_update_name":"sysevent_script_action_911a2212eb3011105843ceb2b2522800","sys_updated_by":"admin","sys_created_on":"2022-07-22 11:50:44","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Import translations for Guided Setup","event_name":"sn_ads_setup.translation.app.update","sys_name":"Import translations for Guided Setup","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/1cb77a801b9af01039c155f3604bcb9e","value":"1cb77a801b9af01039c155f3604bcb9e"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-10-25 09:57:42","sys_domain_path":"/","script":"importPluginTranslations();\n\nfunction importPluginTranslations() {\n    if(gs.tableExists('sys_language')){\n      var gr = new GlideRecord('sys_language');\n      gr.addActiveQuery();\n      gr.query();\n\n      while (gr.next()) {\n          var lName = gr.name.toLowerCase();\n\n          if (lName !== 'english') {\n              if (lName.contains(' - '))\n                  lName = lName.replace(' - ', /-/g);\n              else if (lName.contains(' '))\n                  lName = lName.replaceAll(' ', '_');\n\n              var tl = new global.TranslationLoader();\n              tl.languageAbbreviation = tl.getLanguageAbbreviation0('com.snc.i18n.' + lName);\n\n              tl.loadTranslationsFromAppPlugin('sn_uib_dyn_rel_rec');\n              gs.info('Completed loading application language files for: sn_uib_dyn_rel_rec ' + lName);\n          }\n      }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"928b0312430231104a584cb0d9b8f200","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4b2d950b87c220109bada7da0acb0baa","value":"4b2d950b87c220109bada7da0acb0baa"},"sys_update_name":"sysevent_script_action_928b0312430231104a584cb0d9b8f200","sys_updated_by":"admin","sys_created_on":"2023-10-25 09:57:42","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Import translations for Dynamic Related ","event_name":"sn_uib_dyn_rel_rec.trans.app.update","sys_name":"Import translations for Dynamic Related Records for Configurable Workspace","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4b2d950b87c220109bada7da0acb0baa","value":"4b2d950b87c220109bada7da0acb0baa"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.change_request'","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', 'd4eba6c4b7a010103186f2b1de11a994');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"92b4470eb70120104c45f2b1de11a93a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/32b7af7f04b12210559073c06a02f7fb","value":"32b7af7f04b12210559073c06a02f7fb"},"sys_update_name":"sysevent_script_action_92b4470eb70120104c45f2b1de11a93a","sys_updated_by":"admin","sys_created_on":"2020-12-14 15:56:53","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- ChangeReq","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- ChangeReq","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-09-18 21:08:24","sys_domain_path":"/","script":"gs.log(\"fixing advanced acl field\");\nvar mu = new GlideMultipleUpdate(\"sys_security_acl\");\nmu.addQueryString('scriptISNOTEMPTY');\nmu.addQuery(\"advanced\", \"false\");\nmu.setValue(\"advanced\", \"true\");\nmu.execute();\nmu.close();","sys_class_name":"sysevent_script_action","sys_id":"93af87a243113110e8a91cbe8bb8f24d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c63eb7304312210559073c06a02f71c","value":"8c63eb7304312210559073c06a02f71c"},"sys_update_name":"sysevent_script_action_93af87a243113110e8a91cbe8bb8f24d","sys_updated_by":"maint","sys_created_on":"2023-09-18 21:08:24","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"ACL with Script Should be 'Advanced'","event_name":"system.upgraded","sys_name":"ACL with Script Should be 'Advanced'","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'sn_cmdb_ws'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-05-25 22:08:21","sys_domain_path":"/","script":"var cmdbWorkspaceUtil = new sn_cmdb_ws.CMDBWorkspaceUtil();\n// Invoke CMDB Workspace On Demand With Lookback\ncmdbWorkspaceUtil.invokeWsOnDemandPAJobWithLookback();\n\n// Invoke CMDB Workspace - Populate aggregates daily script job\ncmdbWorkspaceUtil.invokeWsPopulateAggregatesDailyScriptJob();\n\n// Invoke CMDB Workspace - Populate aggregates monthly script job\ncmdbWorkspaceUtil.invokeWsPopulateAggregatesMonthlyScriptJob();","sys_class_name":"sysevent_script_action","sys_id":"93c570a4b7312110b87e80408e11a972","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sysevent_script_action_93c570a4b7312110b87e80408e11a972","sys_updated_by":"maint","sys_created_on":"2023-03-22 05:10:34","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Trigger jobs on CMDB Workspace activate","event_name":"plugin.activated","sys_name":"Trigger jobs on CMDB Workspace activate","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-06-01 11:22:55","sys_domain_path":"/","script":"importPluginTranslations();\n\nfunction importPluginTranslations() {\n    if(gs.tableExists('sys_language')){\n      var gr = new GlideRecord('sys_language');\n      gr.addActiveQuery();\n      gr.query();\n\n      while (gr.next()) {\n          var lName = gr.name.toLowerCase();\n\n          if (lName !== 'english') {\n              if (lName.contains(' - '))\n                  lName = lName.replace(' - ', /-/g);\n              else if (lName.contains(' '))\n                  lName = lName.replaceAll(' ', '_');\n\n              var tl = new global.TranslationLoader();\n              tl.languageAbbreviation = tl.getLanguageAbbreviation0('com.snc.i18n.' + lName);\n\n              tl.loadTranslationsFromAppPlugin('sn_itsm_bus_obj');\n              gs.info('Completed loading application language files for: sn_itsm_bus_obj ' + lName);\n          }\n      }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"93e62313430321109c0c4cb0d9b8f200","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/39eca3e2ff210110f416d018d53bf16e","value":"39eca3e2ff210110f416d018d53bf16e"},"sys_update_name":"sysevent_script_action_93e62313430321109c0c4cb0d9b8f200","sys_updated_by":"admin","sys_created_on":"2023-06-01 11:22:55","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Import translations for Adoption Bluepri","event_name":"sn_itsm_bus_obj.trans.app.update","sys_name":"Import translations for Adoption Blueprint for Technology Excellence","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/39eca3e2ff210110f416d018d53bf16e","value":"39eca3e2ff210110f416d018d53bf16e"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-02-10 19:47:37","sys_domain_path":"","script":"DiscoveryPatternOrchestratorUtil.cancelExecutions(event.instance);","sys_class_name":"sysevent_script_action","sys_id":"977769c377b2001099808d1168106197","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/91d8237704f12210559073c06a02f73b","value":"91d8237704f12210559073c06a02f73b"},"sys_update_name":"sysevent_script_action_977769c377b2001099808d1168106197","sys_updated_by":"gary.stentiford","sys_created_on":"2020-02-10 19:35:53","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Cancel Orchestrator Executions","event_name":"discovery.canceled","sys_name":"Cancel Orchestrator Executions","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"gary.stentiford","order":"500","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-24 17:51:06","sys_domain_path":"/","script":"gs.info(\"Starting update of Enable OneExtend\");\n\nvar systemPropertyGr = new GlideRecord(\"sys_properties\");\nsystemPropertyGr.addQuery(\"name\",\"com.glide.cs.one_extend.disabled\");\nsystemPropertyGr.query();\nif(!systemPropertyGr.next()) {\n  systemPropertyGr.setValue(\"name\",\"com.glide.cs.one_extend.disabled\");\n  systemPropertyGr.setValue(\"value\", false);\n  systemPropertyGr.setValue(\"type\", \"boolean\");\n  systemPropertyGr.insert();\n} else if (systemPropertyGr.value && systemPropertyGr.sys_updated_by == \"system\") {\n  systemPropertyGr.setValue(\"value\", false);\n  systemPropertyGr.update();\n}\n\ngs.info(\"Ending update of Enable OneExtend\");","sys_class_name":"sysevent_script_action","sys_id":"9794e81e531a61100d74ddeeff7b129f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sysevent_script_action_9794e81e531a61100d74ddeeff7b129f","sys_updated_by":"admin","sys_created_on":"2023-04-21 10:57:35","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Enable OneExtend","event_name":"system.upgraded","sys_name":"Enable OneExtend","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-09-02 10:05:18","sys_domain_path":"","script":"new TaskUtils().refreshImpactedServices(event.instance, event.parm1);","sys_class_name":"sysevent_script_action","sys_id":"9806479223d630101488dc1756bf659a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d2b76f7f04b12210559073c06a02f78a","value":"d2b76f7f04b12210559073c06a02f78a"},"sys_update_name":"sysevent_script_action_9806479223d630101488dc1756bf659a","sys_updated_by":"admin","sys_created_on":"2021-09-02 10:05:18","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Trigger refresh impacted cis","event_name":"incident.refresh_impacted_ci","sys_name":"Trigger refresh impacted cis","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2010-10-14 20:17:34","sys_domain_path":"","script":"var rotation = new SncTableRotation(event.parm1);\r\nvar tables = event.parm2.split(\",\");\r\nvar currentTable = rotation.getTableName();\r\nif (currentTable == tables[0])\r\n   rotation.truncateTable(tables[1]);\r\n\r\ncleanAttachments(event.parm1, tables[2]);\r\n\r\nfunction cleanAttachments(t, d) {\r\n  if (!d)\r\n     return;\r\n\r\n  var gdt = new GlideDateTime();\r\n  gdt.setValue(d);\r\n  var tc = new GlideTableCleaner(t, 86400 * 1000 *7, 'sys_created_on');\r\n  tc.deleteAttachments(gdt);\r\n}","sys_class_name":"sysevent_script_action","sys_id":"9861eec80a0a0b8a00887ab75908a1ab","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7883ebb304312210559073c06a02f792","value":"7883ebb304312210559073c06a02f792"},"sys_update_name":"sysevent_script_action_9861eec80a0a0b8a00887ab75908a1ab","sys_updated_by":"pat.casey","sys_created_on":"2009-12-16 16:46:31","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Table Rotation Truncation","event_name":"table_rotation.truncate","sys_name":"Table Rotation Truncation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"gs.getProperty(\"glide.ui.polaris.experience\",  \"false\") === \"false\" && gs.getProperty(\"glide.ui.next_experience.opt_out\",  \"false\") === \"false\" && gs.getProperty(\"com.glide.offering\") !== \"paas\"","sys_mod_count":"1","active":"true","description":"This script enables Next Experience after any glide version upgrade. To disable the auto-activation of Next Experience, set the system property glide.ui.next_experience.opt_out = false.","sys_overrides":"","sys_updated_on":"2023-03-07 17:59:07","sys_domain_path":"","script":"var before = gs.getSession().getWorkflow();\ngs.getSession().setWorkflow(false);\ngs.setProperty(\"glide.ui.polaris.experience\", true);\ngs.getSession().setWorkflow(before);","sys_class_name":"sysevent_script_action","sys_id":"98d606ff43912110096aa4f8f9b8f289","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/37eda37304752210559073c06a02f7b6","value":"37eda37304752210559073c06a02f7b6"},"sys_update_name":"sysevent_script_action_98d606ff43912110096aa4f8f9b8f289","sys_updated_by":"admin","sys_created_on":"2023-03-07 16:57:22","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Enable Next Experience by default","event_name":"system.upgraded","sys_name":"Enable Next Experience by default","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"5","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-08-23 09:14:34","sys_domain_path":"/","script":"gs.setProperty(event.parm1, event.parm2);","sys_class_name":"sysevent_script_action","sys_id":"991544fa0f173300886e67bcfa767e62","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_update_name":"sysevent_script_action_991544fa0f173300886e67bcfa767e62","sys_updated_by":"admin","sys_created_on":"2019-08-19 17:44:52","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update system property","event_name":"sn_appclient.update.system.property","sys_name":"Update system property","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1=='com.glide.outbound_http_log'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-18 20:24:30","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'ec58b09d3b0e501006f1600713efc489');\naclGR.query();\nif (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"9b59a8630f01201078a451a1ff767e75","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f6eb6b7704352210559073c06a02f7b8","value":"f6eb6b7704352210559073c06a02f7b8"},"sys_update_name":"sysevent_script_action_9b59a8630f01201078a451a1ff767e75","sys_updated_by":"admin","sys_created_on":"2020-12-18 20:24:30","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs for HTTP Log","event_name":"plugin.activated","sys_name":"Activate report_view ACLs for HTTP Log","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"23","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-09-07 23:47:28","sys_domain_path":"","script":"var gr = new GlideRecord(\"sys_scope\");\ngr.query();\nvar total = gr.getRowCount();\ngr.addQuery(\"js_level\", \"es_latest\");\ngr.query();\nvar es_latest = gr.getRowCount();\ngr = new GlideRecord(\"sys_scope\");\ngr.addQuery(\"js_level\", \"helsinki_es5\");\ngr.query();\nvar es5 = gr.getRowCount();\ngr = new GlideRecord(\"sys_scope\");\ngr.addQuery(\"js_level\", \"traditional\");\ngr.query();\nvar compatibility = gr.getRowCount();\ngr = new GlideRecord(\"sys_scope\");\ngr.addQuery(\"js_level\", \"\");\ngr.query();\nvar unknown = gr.getRowCount();\ngs.info(\"JS Level counts for scoped apps: es_latest=\" + es_latest + \", es5=\" + es5 + \", compatibility=\" + compatibility + \", unknown=\" + unknown + \", total=\" + total);\n\nvar gcfMap = new GCFSampleMap();\ngcfMap.put('unknown_apps', unknown.toString());\ngcfMap.put('compatibility_apps', compatibility.toString());\ngcfMap.put('es5_apps', es5.toString());\ngcfMap.put('es_latest_apps', es_latest.toString());\ngcfMap.put('total_apps', total.toString());\n\nGCFCollector.recordUsageEvent('system_events', 'system_event_listener', 'system_upgraded', gcfMap);","sys_class_name":"sysevent_script_action","sys_id":"9b733c3deb011110fb1a8c2038522855","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/2464abbb04312210559073c06a02f748","value":"2464abbb04312210559073c06a02f748"},"sys_update_name":"sysevent_script_action_9b733c3deb011110fb1a8c2038522855","sys_updated_by":"admin","sys_created_on":"2022-08-01 23:11:46","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Log app counts after upgrade","event_name":"system.upgraded","sys_name":"Log app counts after upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"event.parm1 == 'com.glide.high_security'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-04-22 15:39:48","sys_domain_path":"/","script":"\n            \n            updateRolesForDependentProperties();\n            function updateRolesForDependentProperties()\n            {\n                gs.info(\"Starting FixKMFStuff for highsecurity\");\n                GlideFixStuff.reloadKMFFilesForPlugin(\"com.glide.high_security\", \"com.glide.kmf\");\n                GlideFixStuff.reloadKMFFilesForPlugin(\"com.glide.high_security\", \"com.glide.kmf.global\");\n                GlideFixStuff.reloadKMFFilesForPlugin(\"com.glide.high_security\", \"com.sn_appauthor\");\n                GlideFixStuff.reloadKMFFilesForPlugin(\"com.glide.high_security\", \"com.sn_appclient\");\n            }","sys_class_name":"sysevent_script_action","sys_id":"9be3176f58a76010f877973ab9e1923b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7f83a3f304312210559073c06a02f787","value":"7f83a3f304312210559073c06a02f787"},"sys_update_name":"sysevent_script_action_9be3176f58a76010f877973ab9e1923b","sys_updated_by":"maint","sys_created_on":"2021-04-22 15:39:48","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Reload KMF High Security Plugin Files","event_name":"plugin.activated","sys_name":"Reload KMF High Security Plugin Files","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"22","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-03-10 16:15:26","sys_domain_path":"","script":"/**\n * Handles re-assignment logic defined for Trigger Rules.\n *\n * current is the record that triggered the trigger_rule\n * parm1 is the trigger_group_field for the record\n * parm2 is the trigger_rule sys_id\n**/\n// vars scope needs to be same as current, which is eventually provided to workflow API\nvar vars = {};\n(function(current, vars) {\n\tnew TriggerRule()\n\t\t.setEventName(event.name + \"\")\n\t\t.setRule(event.parm2 + \"\")\n\t\t.setRecord(current)\n\t\t.setWorkflowVars(vars)\n\t\t.process();\n})(current, vars);","sys_class_name":"sysevent_script_action","sys_id":"9c4e6dd9732220102eb52d2b04f6a763","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c6ca73b04352210559073c06a02f754","value":"8c6ca73b04352210559073c06a02f754"},"sys_update_name":"sysevent_script_action_9c4e6dd9732220102eb52d2b04f6a763","sys_updated_by":"admin","sys_created_on":"2021-02-24 15:12:36","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Trigger Rule - Reassignment","event_name":"trigger_rule.reassignment","sys_name":"Trigger Rule - Reassignment","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-06-10 18:33:28","sys_domain_path":"","script":"var scAPI = new sn_vsc_api.UpdateControls();\nscAPI.resetSCAceAppConfigBundle();","sys_class_name":"sysevent_script_action","sys_id":"9cc1605477760210c2123a91fa5a9979","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/983e67b304752210559073c06a02f755","value":"983e67b304752210559073c06a02f755"},"sys_update_name":"sysevent_script_action_9cc1605477760210c2123a91fa5a9979","sys_updated_by":"admin","sys_created_on":"2024-06-10 18:33:28","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SC reset app bundle","event_name":"system.upgraded","sys_name":"SC reset app bundle","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-04-09 22:16:01","sys_domain_path":"","sys_class_name":"sysevent_script_action","sys_id":"9cceddfbcba013008c061aeb034c9c31","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3ad18693db92220004997878f0b8f516","value":"3ad18693db92220004997878f0b8f516"},"sys_update_name":"sysevent_script_action_9cceddfbcba013008c061aeb034c9c31","sys_updated_by":"admin","sys_created_on":"2018-03-06 17:51:38","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Evaluate recommendations","event_name":"sn_bm_client.eval_recos","sys_name":"Evaluate recommendations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3ad18693db92220004997878f0b8f516","value":"3ad18693db92220004997878f0b8f516"},"sys_created_by":"admin","order":"100","sys_policy":"protected"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-11-09 20:51:39","sys_domain_path":"","script":"new sn_instance_scan.ScanInstance().triggerReactiveScan(event);","sys_class_name":"sysevent_script_action","sys_id":"9db97f32731020100a5310c92bf6a7a5","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f10d2b3f04352210559073c06a02f7f1","value":"f10d2b3f04352210559073c06a02f7f1"},"sys_update_name":"sysevent_script_action_9db97f32731020100a5310c92bf6a7a5","sys_updated_by":"maint","sys_created_on":"2020-11-09 20:51:39","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Reactive Scan","event_name":"execution_tracker.failure","sys_name":"Reactive Scan","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-05-02 06:31:53","sys_domain_path":"","script":"var unauthChgRequest = new UnauthorizedChangeRequest();\n\nif (unauthChgRequest.isUnauthorizedEnabled() && event.parm1)\n\tunauthChgRequest.createUnauthorizedChange(event.parm1, event.parm2);","sys_class_name":"sysevent_script_action","sys_id":"9e1d279023703300a5eedc1756bf6546","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/32b7af7f04b12210559073c06a02f7fb","value":"32b7af7f04b12210559073c06a02f7fb"},"sys_update_name":"sysevent_script_action_9e1d279023703300a5eedc1756bf6546","sys_updated_by":"admin","sys_created_on":"2019-04-10 09:30:56","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Unauthorized CI Change","event_name":"ci.change.unplanned","sys_name":"Create Unauthorized CI Change","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-07-15 07:43:55","sys_domain_path":"","script":"    (function migrateFormHeaderSecondaryValues(){\n \t\t\t\tvar gr = new GlideRecord('sys_aw_form_header');\n\t\t\t\tgr.query();\n\t\t\t\twhile (gr.next()) {\n\t\t\t\t\tvar formheaderSysId = gr.getUniqueValue();\n\t\t\t\t\tvar fieldNames = gr.getValue('secondary_fields');\n\t\t\t\t\tvar fieldNamesArray = fieldNames ? fieldNames.split(',') : [];\n\t\t\t\t\tvar checkAlreadyMigrated = new GlideRecord('sys_aw_form_header_secondary_values');\n\t\t\t\t\tcheckAlreadyMigrated.addQuery('form_header', formheaderSysId);\n\t\t\t\t\tcheckAlreadyMigrated.query();\n\t\t\t\t\tif (!checkAlreadyMigrated.next()) {\n\t\t\t\t\t\tfor (var i = 0; i < fieldNamesArray.length; i++) {\n\t\t\t\t\t\t\t\t\tvar newGr = new GlideRecord('sys_aw_form_header_secondary_values');\n\t\t\t\t\t\t\t\t\tnewGr.initialize(); \n\t\t\t\t\t\t\t\t\tnewGr.field = fieldNamesArray[i];\n\t\t\t\t\t\t\t\t\tnewGr.form_header = formheaderSysId;\n\t\t\t\t\t\t\t\t\tnewGr.active = true;\n\t\t\t\t\t\t\t\t\tnewGr.order = (i + 1) * 100;\n\t\t\t\t\t\t\t\t\tnewGr.sys_scope =  gr.getValue('sys_scope');\n\t\t\t\t\t\t\t\t\tnewGr.setWorkflow(false);\n\t\t\t\t\t\t\t\t\tnewGr.insert();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgr.setValue('secondary_fields','');\n\t\t\t\t\t\tgr.setWorkflow(false);\n\t\t\t\t\t\tgr.update();\n\t\t\t\t\t}\n\t\t\t\t}\n\t})();","sys_class_name":"sysevent_script_action","sys_id":"9e2d619c0f5c00102a001271ff767e2d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ba9c2f7b04352210559073c06a02f7cb","value":"ba9c2f7b04352210559073c06a02f7cb"},"sys_update_name":"sysevent_script_action_9e2d619c0f5c00102a001271ff767e2d","sys_updated_by":"admin","sys_created_on":"2019-09-30 23:50:50","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Migrate Custom Form Header Sec Values","event_name":"system.upgraded","sys_name":"Migrate Custom Form Header Sec Values","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'sn_aisearch_global' || event.parm1 == 'sn_sow'","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-09-23 10:51:13","sys_domain_path":"/","script":"if (gs.tableExists('sn_aisearch_global_job_completion')) {\n    var gr = new GlideRecord(\"sn_aisearch_global_job_completion\");\n    gr.addQuery(\"destination_sys_id\", \"52d4697943a151103084a921eab8f2d9\");\n    gr.addQuery(\"source_sys_id\", \"f1633693c3733010965e070e9140dd13\");\n    gr.addQuery(\"table_name\", \"sys_search_context_config\");\n    gr.query();\n    if (!gr.next()) {\n        gr = new GlideRecord(\"sn_aisearch_global_job_completion\");\n        gr.initialize();\n        gr.setValue(\"destination_sys_id\", \"52d4697943a151103084a921eab8f2d9\");\n        gr.setValue(\"source_sys_id\", \"f1633693c3733010965e070e9140dd13\");\n        gr.setValue(\"table_name\", \"sys_search_context_config\");\n        gr.insert();\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"a0101a1277421110605b1aceca5a9997","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_update_name":"sysevent_script_action_a0101a1277421110605b1aceca5a9997","sys_updated_by":"admin","sys_created_on":"2022-09-22 12:20:57","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Service Operations Workspace","event_name":"plugin.upgraded","sys_name":"Service Operations Workspace","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/5ca1bcb3733320103e366238edf6a706","value":"5ca1bcb3733320103e366238edf6a706"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-05-08 15:55:40","sys_domain_path":"/","script":"importPluginTranslations();\n\nfunction importPluginTranslations() {\n    if(gs.tableExists('sys_language')){\n      var gr = new GlideRecord('sys_language');\n      gr.addActiveQuery();\n      gr.query();\n\n      while (gr.next()) {\n          var lName = gr.name.toLowerCase();\n\n          if (lName !== 'english') {\n              if (lName.contains(' - '))\n                  lName = lName.replace(' - ', /-/g);\n              else if (lName.contains(' '))\n                  lName = lName.replaceAll(' ', '_');\n\n              var tl = new global.TranslationLoader();\n              tl.languageAbbreviation = tl.getLanguageAbbreviation0('com.snc.i18n.' + lName);\n\n              tl.loadTranslationsFromAppPlugin('sn_cmn_uib_comp');\n              gs.info('Completed loading application language files for: sn_cmn_uib_comp ' + lName);\n          }\n      }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"a03f303343222110fafaacbb89b8f200","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/dc91fc455cf70ad5a792a8a37d683783","value":"dc91fc455cf70ad5a792a8a37d683783"},"sys_update_name":"sysevent_script_action_a03f303343222110fafaacbb89b8f200","sys_updated_by":"admin","sys_created_on":"2023-05-08 15:55:40","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Import translations for Common UIB Wrapp","event_name":"sn_cmn_uib_comp.trans.app.update","sys_name":"Import translations for Common UIB Wrapper Components","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/dc91fc455cf70ad5a792a8a37d683783","value":"dc91fc455cf70ad5a792a8a37d683783"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-08-16 17:52:16","sys_domain_path":"/","script":"importPluginTranslations();\n\nfunction importPluginTranslations() {\n\tif(gs.tableExists('sys_language')) {\n      var gr = new GlideRecord('sys_language');\n      gr.addActiveQuery();\n      gr.query();\n\n      while (gr.next()) {\n          var lName = gr.name.toLowerCase();\n\n          if (lName !== 'english') {\n              if (lName.contains(' - '))\n                  lName = lName.replace(' - ', /-/g);\n              else if (lName.contains(' '))\n                  lName = lName.replaceAll(' ', '_');\n\n              var tl = new global.TranslationLoader();\n              tl.languageAbbreviation = tl.getLanguageAbbreviation0('com.snc.i18n.' + lName);\n\n              tl.loadTranslationsFromAppPlugin('sn_help_setup');\n              gs.info('Completed loading application language files for: sn_help_setup ' + lName);\n          }\n      }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"a09c2022eb1111105843ceb2b2522800","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/6ba047a5117f3e6e1e868d387c8b4cda","value":"6ba047a5117f3e6e1e868d387c8b4cda"},"sys_update_name":"sysevent_script_action_a09c2022eb1111105843ceb2b2522800","sys_updated_by":"admin","sys_created_on":"2022-08-16 17:52:16","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Import translations for @devsnc/sn-help-","event_name":"sn_help_setup.translation.app.update","sys_name":"Import translations for @devsnc/sn-help-setup","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/6ba047a5117f3e6e1e868d387c8b4cda","value":"6ba047a5117f3e6e1e868d387c8b4cda"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-03-24 16:20:09","sys_domain_path":"/","script":"importPluginTranslations();\n\nfunction importPluginTranslations() {\n\tif(gs.tableExists('sys_language')) {\n      var gr = new GlideRecord('sys_language');\n      gr.addActiveQuery();\n      gr.query();\n\n      while (gr.next()) {\n          var lName = gr.name.toLowerCase();\n\n          if (lName !== 'english') {\n              if (lName.contains(' - '))\n                  lName = lName.replace(' - ', /-/g);\n              else if (lName.contains(' '))\n                  lName = lName.replaceAll(' ', '_');\n\n              var tl = new global.TranslationLoader();\n              tl.languageAbbreviation = tl.getLanguageAbbreviation0('com.snc.i18n.' + lName);\n\n              tl.loadTranslationsFromAppPlugin('sn_aisearch_global');\n              gs.info('Completed loading application language files for: sn_aisearch_global ' + lName);\n          }\n      }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"a0b63133eb1201105843ceb2b2522800","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3c467b5f0bf130109e0fa4e6e9c4c946","value":"3c467b5f0bf130109e0fa4e6e9c4c946"},"sys_update_name":"sysevent_script_action_a0b63133eb1201105843ceb2b2522800","sys_updated_by":"admin","sys_created_on":"2022-03-24 16:20:09","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Import translations for AI Search For Ne","event_name":"sn_aisearch_global.translation.app.updat","sys_name":"Import translations for AI Search For Next Experience","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3c467b5f0bf130109e0fa4e6e9c4c946","value":"3c467b5f0bf130109e0fa4e6e9c4c946"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-19 13:07:21","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.enrollment_snapshot', true)) {\n    deleteEnrollmentSnapshot();\n}\n\nfunction deleteEnrollmentSnapshot() {\n    try {\n        new PwdEnrollSnapshotUtil().deleteEnrollmentSnapshotsForInValidUsers();\n    } catch (e) {\n        gs.error(\"[Script action: Delete enrollment snaps for a user ] - \" + e.getMessage());\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"a21b87dd43422110d68db0e245b8f292","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_a21b87dd43422110d68db0e245b8f292","sys_updated_by":"admin","sys_created_on":"2023-04-06 10:14:27","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Delete enrollment snaps for a user","event_name":"sys_user.delete","sys_name":"Delete enrollment snaps for a user","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-12-18 14:47:29","sys_domain_path":"/","script":"importPluginTranslations();\n\nfunction importPluginTranslations() {\n    if(gs.tableExists('sys_language')){\n      var gr = new GlideRecord('sys_language');\n      gr.addActiveQuery();\n      gr.query();\n\n      while (gr.next()) {\n          var lName = gr.name.toLowerCase();\n\n          if (lName !== 'english') {\n              if (lName.contains(' - '))\n                  lName = lName.replace(' - ', /-/g);\n              else if (lName.contains(' '))\n                  lName = lName.replaceAll(' ', '_');\n\n              var tl = new global.TranslationLoader();\n              tl.languageAbbreviation = tl.getLanguageAbbreviation0('com.snc.i18n.' + lName);\n\n              tl.loadTranslationsFromAppPlugin('sn_nlu_workbench');\n              gs.info('Completed loading application language files for: sn_nlu_workbench ' + lName);\n          }\n      }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"a2e511336703311096c87ff538f92200","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/31f5f491c3a710100bf407720f40ddf4","value":"31f5f491c3a710100bf407720f40ddf4"},"sys_update_name":"sysevent_script_action_a2e511336703311096c87ff538f92200","sys_updated_by":"admin","sys_created_on":"2023-12-18 14:47:29","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Import translations for NLU Workbench - ","event_name":"sn_nlu_workbench.trans.app.update","sys_name":"Import translations for NLU Workbench - Advanced Features","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/31f5f491c3a710100bf407720f40ddf4","value":"31f5f491c3a710100bf407720f40ddf4"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-10-17 11:40:36","sys_domain_path":"/","script":"importPluginTranslations();\n\nfunction importPluginTranslations() {\n    if(gs.tableExists('sys_language')){\n      var gr = new GlideRecord('sys_language');\n      gr.addActiveQuery();\n      gr.query();\n\n      while (gr.next()) {\n          var lName = gr.name.toLowerCase();\n\n          if (lName !== 'english') {\n              if (lName.contains(' - '))\n                  lName = lName.replace(' - ', /-/g);\n              else if (lName.contains(' '))\n                  lName = lName.replaceAll(' ', '_');\n\n              var tl = new global.TranslationLoader();\n              tl.languageAbbreviation = tl.getLanguageAbbreviation0('com.snc.i18n.' + lName);\n\n              tl.loadTranslationsFromAppPlugin('sn_wn');\n              gs.info('Completed loading application language files for: sn_wn ' + lName);\n          }\n      }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"a356123343313110fafaacbb89b8f200","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/cb08e377eb9071106fb3951ff15228b8","value":"cb08e377eb9071106fb3951ff15228b8"},"sys_update_name":"sysevent_script_action_a356123343313110fafaacbb89b8f200","sys_updated_by":"admin","sys_created_on":"2023-10-17 11:40:36","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Import translations for Whats New Framew","event_name":"sn_wn.trans.app.update","sys_name":"Import translations for Whats New Framework Core","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/cb08e377eb9071106fb3951ff15228b8","value":"cb08e377eb9071106fb3951ff15228b8"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-09-13 15:20:22","sys_domain_path":"/","script":"importPluginTranslations();\n\nfunction importPluginTranslations() {\n    if(gs.tableExists('sys_language')){\n      var gr = new GlideRecord('sys_language');\n      gr.addActiveQuery();\n      gr.query();\n\n      while (gr.next()) {\n          var lName = gr.name.toLowerCase();\n\n          if (lName !== 'english') {\n              if (lName.contains(' - '))\n                  lName = lName.replace(' - ', /-/g);\n              else if (lName.contains(' '))\n                  lName = lName.replaceAll(' ', '_');\n\n              var tl = new global.TranslationLoader();\n              tl.languageAbbreviation = tl.getLanguageAbbreviation0('com.snc.i18n.' + lName);\n\n              tl.loadTranslationsFromAppPlugin('sn_ds_api');\n              gs.info('Completed loading application language files for: sn_ds_api ' + lName);\n          }\n      }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"a392000143113110fafaacbb89b8f200","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/12287edb537c301037daddeeff7b12cf","value":"12287edb537c301037daddeeff7b12cf"},"sys_update_name":"sysevent_script_action_a392000143113110fafaacbb89b8f200","sys_updated_by":"admin","sys_created_on":"2023-09-13 15:20:22","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Import translations for Digital Signatur","event_name":"sn_ds_api.trans.app.update","sys_name":"Import translations for Digital Signature API","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/12287edb537c301037daddeeff7b12cf","value":"12287edb537c301037daddeeff7b12cf"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-10-26 17:55:51","sys_domain_path":"/","script":"gs.log(\"***********************SYNCHRONIZE FOR: \" + event.parm1);\nvar rot = new GlideRecord('sys_table_rotation');\nif (rot.isValid()) {\n      var tu = new SNC.TableRotationSynchronizer(event.parm1);\n      if (tu.isValid())\n           tu.synchronize();\n      else\n           gs.log(\"********NOT A VALID ROTATION*********\");\n}","sys_class_name":"sysevent_script_action","sys_id":"a4abae119f22000055fc207c7f4bcc4e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ed836fb304312210559073c06a02f704","value":"ed836fb304312210559073c06a02f704"},"sys_update_name":"sysevent_script_action_a4abae119f22000055fc207c7f4bcc4e","sys_updated_by":"admin","sys_created_on":"2011-05-09 16:17:04","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Table Rotation Synchonize","event_name":"table_rotation.synchronize","sys_name":"Table Rotation Synchonize","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"don goodliffe","order":"","sys_policy":""},{"condition_script":"new sn_publications.EmailClientRecipientListHandler().isRecipientListEvent(event)","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-09-01 09:20:37","sys_domain_path":"","script":"/*\nEvent Parm1 structure ->\n{\n \"recipientItemSysID\":<RECIPPIENT_SYS_ID>, \n \"recipientTable\":<RECIPIENT_TABLE_NAME>,\n \"emailSysID\":\"EMAIL_SYS_ID\"\n}\n*/\n\nvar recipientDetails = JSON.parse(event.parm1 + '');\nvar emailClientRecipientListHandler = new sn_publications.EmailClientRecipientListHandler();\nvar emailRecipientItemAPI = new global.EmailRecipientItemResolution();\n\ntry {\n    var recipientListGr = emailClientRecipientListHandler.getRecipientListGr(recipientDetails.recipientItemSysID);\n\tif (recipientListGr) {\n\t\tvar params = {};\n\t\tvar emailGr = emailClientRecipientListHandler.getEmailGr(recipientDetails.emailSysID);\n\t\tif(recipientListGr.enable_script) {\n\t\t\tvar extensionPoints = new GlideScriptedExtensionPoint().getExtensions('sn_publications.RecipientListScriptedParametersProvider');\n\t\t\tfor (var i = 0; i < extensionPoints.length; ++i) {\n\t\t\t\tvar point = extensionPoints[i];\n\t\t\t\tif (point.canResolveParameters(emailGr)) {\n\t\t\t\t\tparams = point.resolve(emailGr);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n        \n\t\t// Skiping insert for fast response\n\t\tvar recipientUsersList = new sn_publications.RecipientsListApi().refreshRecepientList(recipientListGr, true, params);\n\t\tvar emailIDs = emailClientRecipientListHandler.getEmailIDs(recipientUsersList);\n\t\temailRecipientItemAPI.updateResolvedRecipientItem(recipientDetails.emailSysID, recipientDetails.recipientItemSysID, 'sn_publications_recipients_list', emailIDs, null);\n    }\n} catch (err) {\n    emailRecipientItemAPI.updateResolvedRecipientItem(recipientDetails.emailSysID, recipientDetails.recipientItemSysID, 'sn_publications_recipients_list', null, err.message);\n}","sys_class_name":"sysevent_script_action","sys_id":"a56cc5ee77211110398a45cfbd5a9987","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0fdd6483d72302004f1e82285e61033a","value":"0fdd6483d72302004f1e82285e61033a"},"sys_update_name":"sysevent_script_action_a56cc5ee77211110398a45cfbd5a9987","sys_updated_by":"admin","sys_created_on":"2022-08-29 05:27:37","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Email Client Recipients Resolution","event_name":"recipient_item_resolution","sys_name":"Email Client Recipients Resolution","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0fdd6483d72302004f1e82285e61033a","value":"0fdd6483d72302004f1e82285e61033a"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'sn_scmobile'","sys_mod_count":"4","active":"false","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 06:50:16","sys_domain_path":"/","script":"var upgradeTool = new sn_scmobile.CatalogMobileUpgradeTools();\nupgradeTool.cleanUpgradeCardViews();\nupgradeTool.cleanUpgradeInputFormScreen();\n\n//De activate the script once it is completed the execution\n\nvar gr = new GlideRecord(\"sysevent_script_action\");\ngr.addQuery(\"sys_id\", \"a58e03ca771a111059018f1a5b5a99f9\");\ngr.query();\nif (gr.next()) {\n    gr.setValue(\"active\", false);\n    gr.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"a58e03ca771a111059018f1a5b5a99f9","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/2263a68187032300e0ef0cf888cb0b3f","value":"2263a68187032300e0ef0cf888cb0b3f"},"sys_update_name":"sysevent_script_action_a58e03ca771a111059018f1a5b5a99f9","sys_updated_by":"system","sys_created_on":"2022-10-04 08:39:10","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Service catalog mobile upgrade","event_name":"plugin.upgraded","sys_name":"Service catalog mobile upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/2263a68187032300e0ef0cf888cb0b3f","value":"2263a68187032300e0ef0cf888cb0b3f"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"sn_batch_install.BatchInstallAPI.markBatchAsRolledBack(event.instance);","sys_class_name":"sysevent_script_action","sys_id":"a6edc2c75b72101057b20f87df81c7cb","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d564ebbb04312210559073c06a02f779","value":"d564ebbb04312210559073c06a02f779"},"sys_update_name":"sysevent_script_action_a6edc2c75b72101057b20f87df81c7cb","sys_updated_by":"system","sys_created_on":"2020-08-27 18:06:01","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Mark batch as rolled back","event_name":"system.rollback.db","sys_name":"Mark batch as rolled back","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"event.parm1=='sn_vsc'","sys_mod_count":"5","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-09-10 19:45:58","sys_domain_path":"/","script":"//Confirm if PA Job has a valid user\n//Get all [PA AppSec] jobs\nvar constant = new sn_vsc.SecurityCenterConstants();\nvar pajob_gr = new GlideRecordSecure('sysauto_pa');\npajob_gr.addQuery('sys_package', constant.SCPackage);\npajob_gr.query();\nwhile (pajob_gr.next()) {\n    pajob_gr.run_as = getPASecUserId();\n    pajob_gr.update();\n}\n\n//Create Security Center User is not present on zboot/upgrade\nfunction getPASecUserId() {\n    var user_id = '';\n    var user_gr = new GlideRecordSecure('sys_user');\n    if (!user_gr.get('user_name', 'securitycenter.user')) {\n        user_gr.initialize();\n        user_gr.first_name = \"Security Center\";\n        user_gr.last_name = \"Data Collection User\";\n        user_gr.user_name = \"securitycenter.user\";\n        user_gr.locked_out = \"false\";\n        user_gr.active = \"true\";\n        user_gr.web_service_access_only = \"true\";\n        user_gr.insert();\n        user_id = user_gr.getValue('sys_id');\n    } else {\n        user_id = user_gr.sys_id;\n        if (user_gr.user_password != '') {\n            user_gr.user_password = '';\n            user_gr.password_needs_reset = false;\n            user_gr.update();\n        }\n    }\n    return user_id;\n}","sys_class_name":"sysevent_script_action","sys_id":"a7f2a63d77601210c2123a91fa5a99b6","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_a7f2a63d77601210c2123a91fa5a99b6","sys_updated_by":"maint","sys_created_on":"2024-09-10 19:32:21","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Set up SC data collection user","event_name":"plugin.upgraded","sys_name":"Set up SC data collection user","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-10-13 14:29:04","sys_domain_path":"/","script":"\n    var productsDao = new ProductsDao();\n    productsDao.syncProductsData();","sys_class_name":"sysevent_script_action","sys_id":"aa17fe8177e21110c918256a5b5a9957","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_update_name":"sysevent_script_action_aa17fe8177e21110c918256a5b5a9957","sys_updated_by":"admin","sys_created_on":"2022-10-13 14:29:04","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Product Data Synchronizer","event_name":"sn_appclient.products_data_sync","sys_name":"Product Data Synchronizer","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.itsm.roles.request_management'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-09-28 17:21:18","sys_domain_path":"","script":"/*\nThese are new ACLs to allow write access to comments on the Requested item for users with business stakeholder role. To be in consistent with the Incident, Problem and Change management experiences these ACL's would be activated only on zboot and first activation of plugin.\n'plugin.activated' event is used so that only zboot and first activation instances can have new ACLs as active.\n'plugin.upgraded' event should not be used.\n*/\nvar bsCommentsWriteACLIds = [\n    'e80bdebeeb3230106fb3951ff152288b',\n    'da6cdefeeb3230106fb3951ff1522808'\n];\nvar aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', bsCommentsWriteACLIds);\naclGR.setValue('active', true);\naclGR.updateMultiple();","sys_class_name":"sysevent_script_action","sys_id":"acbd1e32eb7230106fb3951ff152287a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4c0da73f04352210559073c06a02f7c1","value":"4c0da73f04352210559073c06a02f7c1"},"sys_update_name":"sysevent_script_action_acbd1e32eb7230106fb3951ff152287a","sys_updated_by":"admin","sys_created_on":"2021-09-28 17:21:18","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate BS comments write for req mgmt","event_name":"plugin.activated","sys_name":"Activate BS comments write for req mgmt","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-09-17 09:32:36","sys_domain_path":"","script":"var work_notes = \"[code]\" + event.parm1 + \"[/code]\";\nvar incident = new GlideRecord('incident');\nincident.addQuery('problem_id', current.getUniqueValue());\nincident.addQuery(\"incident_state\", '<', IncidentState.RESOLVED);\nincident.query();\nwhile(incident.next()) {\n\t\tincident.work_notes.setJournalEntry(current.number + ' ' + work_notes);\n\t\tincident.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"acfd001b536270108b91ddeeff7b12e3","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d81b6b3304352210559073c06a02f76e","value":"d81b6b3304352210559073c06a02f76e"},"sys_update_name":"sysevent_script_action_acfd001b536270108b91ddeeff7b12e3","sys_updated_by":"admin","sys_created_on":"2021-09-17 09:32:36","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Copy Prb workaround to Inc work notes","event_name":"communicate.workaround","sys_name":"Copy Prb workaround to Inc work notes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"5","active":"true","description":"","sys_overrides":"","sys_updated_on":"2013-11-05 07:53:56","sys_domain_path":"","script":"var rot = new GlideRecord('sys_table_rotation');\r\nif (rot.isValid()) {\r\n   if (event.parm2 == 'false') {\r\n      var tu = new SNC.TableRotationUtil();\r\n      if (tu)\r\n         tu.synchronize();\r\n   } \r\n}","sys_class_name":"sysevent_script_action","sys_id":"adb5a3370a0a0bc0004382f64430797f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ed836fb304312210559073c06a02f704","value":"ed836fb304312210559073c06a02f704"},"sys_update_name":"sysevent_script_action_adb5a3370a0a0bc0004382f64430797f","sys_updated_by":"admin","sys_created_on":"2010-05-18 23:18:01","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Check Rotations","event_name":"plugin.table.modified","sys_name":"Check Rotations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"don goodliffe","order":"","sys_policy":""},{"condition_script":"event.parm1 == 'com.glide.kmf'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-04-28 00:55:35","sys_domain_path":"/","script":"\n             updateRolesForDependentProperties();\n            function updateRolesForDependentProperties()\n            {\n                GlideFixStuff.reloadKMFFilesForPlugin(\"com.glide.kmf\", \"com.glide.web_service_provider\"); }","sys_class_name":"sysevent_script_action","sys_id":"ae140bdd71b32010f87707ea0637f708","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b383a3f304312210559073c06a02f789","value":"b383a3f304312210559073c06a02f789"},"sys_update_name":"sysevent_script_action_ae140bdd71b32010f87707ea0637f708","sys_updated_by":"maint","sys_created_on":"2021-04-28 00:55:35","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Load Kmf Files","event_name":"plugin.activated","sys_name":"Load Kmf Files","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-03-12 09:16:41","sys_domain_path":"","script":"var ACTION_TYPE = \"action_type\";\nvar CAT_ITEM = \"cat_item\";\nvar DOCUMENT_ID = \"document_id\";\n\nvar params = null;\ntry {\n      params = JSON.parse(event.parm1);\n} catch (e) {\n      gs.log('Error while parsing parm1 for catalog_builder_analytics: ' + e);\n}\n\nvar analyticsRecord = new GlideRecord(\"catalog_builder_analytics\");\nanalyticsRecord.setValue(ACTION_TYPE, params[ACTION_TYPE] || '');\nanalyticsRecord.setValue(CAT_ITEM, params[CAT_ITEM] || '');\nanalyticsRecord.setValue(DOCUMENT_ID, params[DOCUMENT_ID] || '');\nanalyticsRecord.insert();\n","sys_class_name":"sysevent_script_action","sys_id":"aea99874c3212110547aab8f8740dd6f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c69d2bff04352210559073c06a02f736","value":"c69d2bff04352210559073c06a02f736"},"sys_update_name":"sysevent_script_action_aea99874c3212110547aab8f8740dd6f","sys_updated_by":"admin","sys_created_on":"2023-03-10 11:27:27","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Service Catalog Builder Analytics","event_name":"catalog_builder_analytics.usage","sys_name":"Service Catalog Builder Analytics","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-11-15 01:32:04","sys_domain_path":"","script":"GlideSecurityManager.bounceEmptyACLs(\"\");","sys_class_name":"sysevent_script_action","sys_id":"af05514177a23110411d94b92c5a9929","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3d53e77304312210559073c06a02f70d","value":"3d53e77304312210559073c06a02f70d"},"sys_update_name":"sysevent_script_action_af05514177a23110411d94b92c5a9929","sys_updated_by":"maint","sys_created_on":"2023-11-14 23:39:03","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Bounce Empty ACLs on Upgrade","event_name":"system.upgraded","sys_name":"Bounce Empty ACLs on Upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":"read"},{"condition_script":"event.parm1 == 'com.snc.itsm.roles.change_management' || event.parm1 == 'com.snc.change_management.cab'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '916b8a44b76010103186f2b1de11a9c0, 13290604b76010103186f2b1de11a949, 37698604b76010103186f2b1de11a9aa, e6ca4644b76010103186f2b1de11a940');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"b0e1d3c2b74120104c45f2b1de11a9d3","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0ffc273f04352210559073c06a02f797","value":"0ffc273f04352210559073c06a02f797"},"sys_update_name":"sysevent_script_action_b0e1d3c2b74120104c45f2b1de11a9d3","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:48:25","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- CAB in chg","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- CAB in chg","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-10-06 00:42:55","sys_domain_path":"","script":"(function executeRule(event) {\n  new SNC.MidEccSender().broadcastToAllMidServers(\n    'Interactive',\n    {\n      'source' : event.parm2 == 'true' ? 'activatePlugin' : 'deactivatePlugin',\n      'topic'  : 'SystemCommand'\n    },\n    {\n      'className': 'com.service_now.mid.security.validation.application.SignatureValidationPlugin'\n    } \n  );\n})(event);","sys_class_name":"sysevent_script_action","sys_id":"b0e798335b6310102140493b1d81c7d8","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/42b8273704f12210559073c06a02f78d","value":"42b8273704f12210559073c06a02f78d"},"sys_update_name":"sysevent_script_action_b0e798335b6310102140493b1d81c7d8","sys_updated_by":"admin","sys_created_on":"2020-10-06 00:42:55","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Notify MIDs of code signing status","event_name":"sn_kmf.signature.validation.toggled","sys_name":"Notify MIDs of code signing status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"eric.hough","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.itsm.roles' || event.parm1 == 'com.snc.incident.mim'","sys_mod_count":"23","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-12-14 19:58:58","sys_domain_path":"","script":"/*\nThese are new ACLs for Incident,Problem and Change table. Activating them can impact custom ACLs on upgrade instances.\n'plugin.activated' event is used so that only zboot and first activation instances can have new ACLs as active.\n'plugin.upgraded' event should not be used.\n*/\nif (event.parm1 == 'com.snc.itsm.roles') {\n\tnew ITSMBSCommentsWriteHelper().updateAllBSCommentsWriteACLs();\n} else if (event.parm1 == 'com.snc.incident.mim') {\n\t//plugin.activated is triggered before ACL files from other plugin's if folder are loaded.\n\t//script needs to run after.\n\tnew ITSMBSCommentsWriteHelper().insertMimACLModifyTrigger();\n}","sys_class_name":"sysevent_script_action","sys_id":"b14b362ac3223010a282a539e540dd77","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/43fc273f04352210559073c06a02f797","value":"43fc273f04352210559073c06a02f797"},"sys_update_name":"sysevent_script_action_b14b362ac3223010a282a539e540dd77","sys_updated_by":"admin","sys_created_on":"2021-09-15 14:15:37","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate BS comments write ACL for ITSM","event_name":"plugin.activated","sys_name":"Activate BS comments write ACL for ITSM","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"var priority = 'Interactive';\n\nvar eccQueueFields = {\n    'source': 'refreshPluginConfig',\n    'topic': 'SystemCommand'\n};\n\nvar payloadParams = {\n    'className': 'com.service_now.mid.security.validation.application.SignatureValidationPlugin'\n};\n\nnew SNC.MidEccSender().broadcastToAllMidServers(priority, eccQueueFields, payloadParams);\n","sys_class_name":"sysevent_script_action","sys_id":"b14e18478df0a110f877c1a2de466b6c","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/42b8273704f12210559073c06a02f78d","value":"42b8273704f12210559073c06a02f78d"},"sys_update_name":"sysevent_script_action_b14e18478df0a110f877c1a2de466b6c","sys_updated_by":"system","sys_created_on":"2023-02-08 05:00:27","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Notify MIDs of validation config change","event_name":"sn_cs.signature.validation_conf_changed","sys_name":"Notify MIDs of validation config change","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"now.midserver","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"20","active":"true","description":"","sys_overrides":"","sys_updated_on":"2010-04-05 23:23:14","sys_domain_path":"","script":"if (needsExtension())\r\n    extend();\r\n\r\nfunction extend() {\r\n   var rotation = new GlideRecord('sys_table_rotation');\r\n   rotation.addQuery('name', event.parm1);\r\n   rotation.query();\r\n   if (rotation.next()) {\r\n      if (rotation.type == 'extend')\r\n          extendRotation(rotation);\r\n      else\r\n          rotateRotation(rotation);\r\n}\r\n\r\nfunction rotateRotation(rotation) {\r\n    var sch = new GlideRecord('sys_table_rotation_schedule');\r\n    sch.addQuery('name', rotation.sys_id);\r\n    sch.addQuery('table_name', '!=', event.parm1);\r\n    sch.orderBy('valid_to');\r\n    sch.query();\r\n    if (!sch.next()) \r\n       return;\r\n\r\n    sch.valid_from = getStartTime(rotation);\r\n    sch.valid_to.setDateNumericValue(sch.valid_from.dateNumericValue() + rotation.duration.dateNumericValue());\r\n    sch.update();\r\n    var xx = new SncTableRotation(rotation.name.toString());\r\n    xx.truncateTable(sch.table_name.toString());\r\n}\r\n\r\nfunction extendRotation(rotation) {\r\n      var tr = new SNC.TableRotationUtil();\r\n      var frn = tr.create(rotation.name.toString());\r\n      if (frn) {\r\n         var schedEntry = new GlideRecord('sys_table_rotation_schedule');\r\n         schedEntry.name = rotation.sys_id;\r\n         schedEntry.table_name = frn;\r\n         schedEntry.valid_from = getStartTime(rotation);\r\n         schedEntry.valid_to.setDateNumericValue(schedEntry.valid_from.dateNumericValue() + rotation.duration.dateNumericValue());\r\n         gs.log(\"Schedule created for \" + frn + \" from \" + schedEntry.valid_from + \" to \" + schedEntry.valid_to);\r\n         schedEntry.insert();\r\n     }\r\n   }\r\n}\r\n\r\nfunction getStartTime(rotation) {\r\n   var gr = new GlideRecord('sys_table_rotation_schedule');\r\n   gr.addQuery('name', rotation.sys_id);\r\n   gr.orderByDesc('valid_to');\r\n   gr.query();\r\n   if (!gr.next()) \r\n        return gs.nowDateTime();\r\n  \r\n   var now = new GlideDateTime();\r\n   if (now.getNumericValue() > gr.valid_to.dateNumericValue()) {\r\n       now.setNumericValue(now.getNumericValue() + 60000);\r\n       var answer = now.getDisplayValue();\r\n       gr.valid_to = answer;\r\n       gr.update();\r\n       return answer;\r\n   }\r\n\r\n   return gr.valid_to.getDisplayValue();\r\n}\r\n\r\n//\r\n// Check to see if the table has already been created\r\n//\r\nfunction needsExtension() {\r\n   var xx = new SncTableRotationExtension(event.parm1);\r\n   var list = xx.getTablesInRotation();\r\n   if (!list)\r\n      return false;\r\n\r\n   var last = list.get(list.size()-1);\r\n   if (last.toString() == event.parm2.toString())\r\n      return true;\r\n\r\n   return false;\r\n}\r\n\r\n\r\nfunction getOldest() {\r\n   var xx = new SncTableRotationExtension(event.parm1);\r\n   var list = xx.getTablesInRotation();\r\n   if (!list)\r\n      return null;\r\n\r\n   var first = list.get(0);\r\n   return first.toString();\r\n}\r\n\r\n","sys_class_name":"sysevent_script_action","sys_id":"b18d78ffc0a8016500684af73cd10749","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ed836fb304312210559073c06a02f704","value":"ed836fb304312210559073c06a02f704"},"sys_update_name":"sysevent_script_action_b18d78ffc0a8016500684af73cd10749","sys_updated_by":"don goodliffe","sys_created_on":"2009-12-21 14:04:16","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Table Rotation Create Extension","event_name":"table_rotation.create_extension","sys_name":"Table Rotation Create Extension","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"don goodliffe","order":"","sys_policy":""},{"condition_script":"!current.cmdb_ci.nil()","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2016-02-02 19:04:43","sys_domain_path":"","script":"serviceOutageDetails();\n\nfunction serviceOutageDetails() {\n\tvar notes = new GlideRecord(\"m2m_sp_status_subscription\");\n\tnotes.addQuery(\"cmdb_ci_service\", current.cmdb_ci);\n\tnotes.query();\n\twhile (notes.next()) {\n\t\tgs.eventQueue(\"outage.details.notif\", current, notes.getValue('sys_user'), current.cmdb_ci.getDisplayValue());\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"b22e8c92d7111200a9addd173e24d4bb","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/50c96bbb04f12210559073c06a02f7a5","value":"50c96bbb04f12210559073c06a02f7a5"},"sys_update_name":"sysevent_script_action_b22e8c92d7111200a9addd173e24d4bb","sys_updated_by":"admin","sys_created_on":"2016-02-02 17:47:05","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Service Outage Details","event_name":"outage.details","sys_name":"Service Outage Details","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.glide.mobile-employee.survey'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-10-07 06:55:29","sys_domain_path":"/","script":"var asmtUtil = new global.AssessmentUtils();\nif (typeof asmtUtil['processCollisionCheck'] == 'function')\n    asmtUtil.processCollisionCheck();","sys_class_name":"sysevent_script_action","sys_id":"b286960ba3161110051ad14716fcda0a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/317b09fb535323002d96ddeeff7b121b","value":"317b09fb535323002d96ddeeff7b121b"},"sys_update_name":"sysevent_script_action_b286960ba3161110051ad14716fcda0a","sys_updated_by":"admin","sys_created_on":"2022-10-07 06:55:29","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Run clean upgrade for survey mobile","event_name":"plugin.upgraded","sys_name":"Run clean upgrade for survey mobile","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/317b09fb535323002d96ddeeff7b121b","value":"317b09fb535323002d96ddeeff7b121b"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-07-15 07:46:06","sys_domain_path":"","script":"(function setDASpecificity(){\n\tvar gr = new GlideRecord(\"sys_declarative_action_assignment\");\n\tif (!gr.isValid())\n\t\treturn;\n\tgr.addNullQuery('specificity');\n\tgr.orderBy('table');\n\tgr.query();\n\tvar table = null;\n\tvar size = 0;\n\twhile (gr.next()) {\n\t\tif (table !== gr.getValue('table')) {\n\t\t\ttable = gr.getValue('table');\n\t\t\tsize = table === 'global' ? 0 : GlideDBObjectManager.getTables(table).size();\n\t\t}\n\t\tvar specificity = Boolean(gr.sys_domain) + size * 10 + Boolean(gr.view) + Boolean(gr.workspace);\n\t\tgr.setValue('specificity', specificity);\n\t\tgr.setWorkflow(false);\n\t\tgr.update();\n\t}\n})();","sys_class_name":"sysevent_script_action","sys_id":"b2e5fc31c7001010099a308dc7c2606e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9693e7f304312210559073c06a02f7f5","value":"9693e7f304312210559073c06a02f7f5"},"sys_update_name":"sysevent_script_action_b2e5fc31c7001010099a308dc7c2606e","sys_updated_by":"admin","sys_created_on":"2020-04-08 21:42:23","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Set Specificity for DA records","event_name":"system.upgraded","sys_name":"Set Specificity for DA records","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-08-09 16:26:20","sys_domain_path":"/","script":"importPluginTranslations();\n\nfunction importPluginTranslations() {\n\tif(gs.tableExists('sys_language')) {\n      var gr = new GlideRecord('sys_language');\n      gr.addActiveQuery();\n      gr.query();\n\n      while (gr.next()) {\n          var lName = gr.name.toLowerCase();\n\n          if (lName !== 'english') {\n              if (lName.contains(' - '))\n                  lName = lName.replace(' - ', /-/g);\n              else if (lName.contains(' '))\n                  lName = lName.replaceAll(' ', '_');\n\n              var tl = new global.TranslationLoader();\n              tl.languageAbbreviation = tl.getLanguageAbbreviation0('com.snc.i18n.' + lName);\n\n              tl.loadTranslationsFromAppPlugin('sn_docker_spoke');\n              gs.info('Completed loading application language files for: sn_docker_spoke ' + lName);\n          }\n      }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"b2f7130067111110acf57ff538f92200","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/dcb0e1e4db075300dd14596e5e9619ca","value":"dcb0e1e4db075300dd14596e5e9619ca"},"sys_update_name":"sysevent_script_action_b2f7130067111110acf57ff538f92200","sys_updated_by":"admin","sys_created_on":"2022-08-09 16:26:20","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Import translations for Docker Spoke","event_name":"sn_docker_spoke.translation.app.update","sys_name":"Import translations for Docker Spoke","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/dcb0e1e4db075300dd14596e5e9619ca","value":"dcb0e1e4db075300dd14596e5e9619ca"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-06-29 21:27:03","sys_domain_path":"/","script":"var incidentBrSysId = gs.getProperty('com.glide.cs.auto_resolution_incident_br');\nif (!gs.nil(incidentBrSysId)) {\n\tgs.info('Executing script action after system.upgraded event - IAR incident business rule[Auto-Resolution Trigger for incident] was set to inactive pre-upgrade to support ZDT, re-setting it to active.');\n\t\t\n\tvar brGr = new GlideRecord('sys_script');\n\tbrGr.get(incidentBrSysId);\n\t\n\tbrGr.setValue('active', true);\n\tbrGr.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"b3095b5d73413010f14a063f34f6a7f0","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sysevent_script_action_b3095b5d73413010f14a063f34f6a7f0","sys_updated_by":"admin","sys_created_on":"2021-06-29 05:44:16","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"IAR Post-upgrade","event_name":"system.upgraded","sys_name":"IAR Post-upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-06-09 16:26:23","sys_domain_path":"/","script":"importPluginTranslations();\n\nfunction importPluginTranslations() {\n\tif(gs.tableExists('sys_language')) {\n      var gr = new GlideRecord('sys_language');\n      gr.addActiveQuery();\n      gr.query();\n\n      while (gr.next()) {\n          var lName = gr.name.toLowerCase();\n\n          if (lName !== 'english') {\n              if (lName.contains(' - '))\n                  lName = lName.replace(' - ', /-/g);\n              else if (lName.contains(' '))\n                  lName = lName.replaceAll(' ', '_');\n\n              var tl = new global.TranslationLoader();\n              tl.languageAbbreviation = tl.getLanguageAbbreviation0('com.snc.i18n.' + lName);\n\n              tl.loadTranslationsFromAppPlugin('sn_header_appshell');\n              gs.info('Completed loading application language files for: sn_header_appshell ' + lName);\n          }\n      }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"b3cc0220eb0011105843ceb2b2522800","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/2a1eec30c30f20109fe6a0f89d40dd57","value":"2a1eec30c30f20109fe6a0f89d40dd57"},"sys_update_name":"sysevent_script_action_b3cc0220eb0011105843ceb2b2522800","sys_updated_by":"admin","sys_created_on":"2022-06-09 16:26:23","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Import translations for Header App Shell","event_name":"sn_header_appshell.translation.app.updat","sys_name":"Import translations for Header App Shell","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/2a1eec30c30f20109fe6a0f89d40dd57","value":"2a1eec30c30f20109fe6a0f89d40dd57"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"21","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-02-04 10:05:12","sys_domain_path":"","script":"knowledgeView();\nfunction knowledgeView() {\n  var kv = new GlideRecord(\"kb_use\");\n  kv.initialize();\n  kv.viewed = true;\n  kv.user.setValue(event.parm2);\n  kv.article = event.instance;\n  var params = JSON.parse(event.parm1);\n  kv.session_id = params.glideSessionId;\n  if(params.hasOwnProperty(\"ts_query_id\")){\n\t  kv.search_id = params.ts_query_id;\n  }\n  if(params.hasOwnProperty(\"domainId\")){\n \t  kv.sys_domain = params.domainId;\n  }\n  kv.insert();\n}","sys_class_name":"sysevent_script_action","sys_id":"b40d81890a0a0b3501528ef543454bb1","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/2fe727ff04b12210559073c06a02f7dd","value":"2fe727ff04b12210559073c06a02f7dd"},"sys_update_name":"sysevent_script_action_b40d81890a0a0b3501528ef543454bb1","sys_updated_by":"admin","sys_created_on":"2009-02-12 20:19:38","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Knowledge View","event_name":"kb.view","sys_name":"Knowledge View","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"5","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-04-13 12:04:19","sys_domain_path":"","script":"// checks the upgrade server for latest version of installed apps\n\nvar updateChecker = new UpdateChecker();\nupdateChecker.updateClientCallsPropertyFromAppRepo();\nif (gs.getProperty(\"sn_appclient.client_calls_allowed\", \"true\") == \"true\") {\n    updateChecker.checkAvailableUpdates(false, false, {\"forceUpdate\": true});\n    // install any auto upgrades\n    new AppUpgrader().autoUpdates();\n}","sys_class_name":"sysevent_script_action","sys_id":"b43140a3c3301200f7d1ca3adfba8f77","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_update_name":"sysevent_script_action_b43140a3c3301200f7d1ca3adfba8f77","sys_updated_by":"maint","sys_created_on":"2016-01-12 17:43:03","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Check Scoped App Updates","event_name":"sn_appclient.check.for.update","sys_name":"Check Scoped App Updates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'sn_vsc'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-08-15 18:26:04","sys_domain_path":"/","script":"var grHarc = new GlideRecord('sn_vsc_instance_hardening_settings');\ngrHarc.addQuery('check', null);\ngrHarc.query();\nwhile (grHarc.next()) {\n    var harcId = grHarc.sys_id;\n    //remove setting from configuration\n    var grConfig = new GlideRecord('sn_vsc_security_check_configurations');\n    grConfig.addQuery('config_setting', 'CONTAINS', harcId);\n    grConfig.query();\n    if (grConfig.next()) {\n        var settingArr = grConfig.config_setting.toString().split(',');\n        if (settingArr.length > 1) {\n            var pos = settingArr.indexOf(harcId);\n            settingArr.splice(pos, 1);\n            grConfig.config_setting = settingArr.toString();\n            grConfig.update();\n        } else {\n            grConfig.deleteRecord();\n        }\n    }\n    //remove setting and config groups\n    grHarc.deleteRecord();\n}","sys_class_name":"sysevent_script_action","sys_id":"b4742391770c1210c2123a91fa5a9947","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_b4742391770c1210c2123a91fa5a9947","sys_updated_by":"maint","sys_created_on":"2024-08-15 14:31:38","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SC Clean up hardening settings","event_name":"plugin.upgraded","sys_name":"SC Clean up hardening settings","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-02-28 00:28:39","sys_domain_path":"","sys_class_name":"sysevent_script_action","sys_id":"b59a1045b3013200715ca943c6a8dc31","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3ad18693db92220004997878f0b8f516","value":"3ad18693db92220004997878f0b8f516"},"sys_update_name":"sysevent_script_action_b59a1045b3013200715ca943c6a8dc31","sys_updated_by":"admin","sys_created_on":"2017-02-18 03:35:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Download Scores - 6months","event_name":"sn_bm_client.download.scores.6months","sys_name":"Download Scores - 6months","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/3ad18693db92220004997878f0b8f516","value":"3ad18693db92220004997878f0b8f516"},"sys_created_by":"admin","order":"100","sys_policy":"protected"},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-02-23 10:52:24","sys_domain_path":"","script":"new ChangeManagementEventHandler(current).process(event);","sys_class_name":"sysevent_script_action","sys_id":"b60827b8c3222010a282a539e540dd22","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/32b7af7f04b12210559073c06a02f7fb","value":"32b7af7f04b12210559073c06a02f7fb"},"sys_update_name":"sysevent_script_action_b60827b8c3222010a282a539e540dd22","sys_updated_by":"admin","sys_created_on":"2021-02-23 10:47:49","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Handle get available Change window event","event_name":"sn_chg_mgt.schedule.GET","sys_name":"Handle get available Change window event","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-05-04 13:06:57","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.enrollment_snapshot', true)) {\n    createEnrollmentSnapshot();\n}\n\nfunction createEnrollmentSnapshot() {\n    var pwdEnrollSnapshotUtil = new PwdEnrollSnapshotUtil();\n    var procVerificationGr = new GlideRecord(\"pwd_map_proc_to_verification\");\n    if (procVerificationGr.get(event.parm1) && procVerificationGr.process.active && !procVerificationGr.verification.type.auto_enroll) {\n        var processId = procVerificationGr.process;\n        var verificationId = procVerificationGr.verification;\n\n        try {\n            var userIds = pwdEnrollSnapshotUtil.getUsersByProcesses([processId]);\n            for (var i = 0; i < userIds.length; i++) {\n                pwdEnrollSnapshotUtil.createOrUpdateEnrollmentSnapshot(verificationId, userIds[i]);\n            }\n        } catch (ex) {\n            gs.error(\"[Script action: Create Enrollment snaps for a proc-ver processId- \" + processId + \",verificationId- \" + verificationId + \" ]. execution error - \" + ex);\n        }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"b6280be743422110d68db0e245b8f2c5","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_b6280be743422110d68db0e245b8f2c5","sys_updated_by":"admin","sys_created_on":"2023-04-13 10:01:56","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Enrollment snaps for a proc-ver","event_name":"pwd_map_proc_to_verification.insert","sys_name":"Create Enrollment snaps for a proc-ver","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-03-31 15:30:19","sys_domain_path":"","script":"var ac = new global.AvailabilitySummarizerV2();\nvar UTILS = new AvailabilityUtils();\nif (current.getTableName() == 'service_commitment') {\n    commitmentTimezoneChanged(current);\n} else {\n    recalculateAvailability();\n}\n\nfunction commitmentTimezoneChanged(current) {\n    var deleteGr = new GlideRecord('service_availability');\n    deleteGr.addQuery('service_commitment', current.sys_id);\n    deleteGr.setWorkflow(false);\n    deleteGr.query();\n    while (deleteGr.next()) {\n        var currentTz = deleteGr.time_zone;\n        var commitmentTz = current.timezone;\n        if (currentTz != commitmentTz) {\n            deleteGr.deleteRecord();\n        }\n    }\n    var gr = new GlideRecord('service_offering_commitment');\n    gr.addQuery('service_commitment', current.sys_id);\n    gr.query();\n    while (gr.next()) {\n        var offeringId = gr.service_offering;\n        var commitmentId = current.sys_id;\n        var date = UTILS.getStartAndEndDate(offeringId, commitmentId);\n        var begin = new GlideDateTime(date.startDate);\n        var end = new GlideDateTime(date.endDate);\n        ac.setCi(offeringId);\n        ac.setCommitments([commitmentId]);\n        ac.summarize(begin, end);\n    }\n}\n\nfunction recalculateAvailability() {\n    var timeZone = UTILS.getTimezoneForCalculation();\n    var existingTz = UTILS.getExistingTimeZone();\n    //start calculating availability based on new time zone\n    var date = UTILS.getStartAndEndDate(null, null);\n    var begin = new GlideDateTime(date.startDate);\n    var end = new GlideDateTime(date.endDate);\n    ac.summarize(begin, end);\n    //start deleting existing record with previous timezone\n    removePreviousTimezoneAvailability(timeZone, existingTz);\n\n    function removePreviousTimezoneAvailability(timeZone, existingTz) {\n        var deleteGr = new GlideRecord('service_availability');\n        deleteGr.setWorkflow(false);\n        if (!timeZone) {\n            deleteGr.query();\n            while (deleteGr.next()) {\n                var currentTz = deleteGr.getValue('time_zone');\n                var commitmentTz = deleteGr.getElement('service_commitment.timezone');\n                if (currentTz != commitmentTz) {\n                    deleteGr.deleteRecord();\n                }\n            }\n        } else {\n            var timezoneIndex = existingTz.indexOf(timeZone);\n            if (timezoneIndex > -1) {\n                existingTz.splice(timezoneIndex, 1);\n            }\n            deleteGr.addQuery('time_zone', 'IN', existingTz);\n            deleteGr.query();\n            while (deleteGr.next())\n                deleteGr.deleteRecord();\n        }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"b70abba94fc1421028d79e4628c714d2","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/523927f704f12210559073c06a02f7bd","value":"523927f704f12210559073c06a02f7bd"},"sys_update_name":"sysevent_script_action_b70abba94fc1421028d79e4628c714d2","sys_updated_by":"admin","sys_created_on":"2024-03-20 07:35:15","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Calculate availability","event_name":"spm.availability.calculate","sys_name":"Calculate availability","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"!current.cmdb_ci.nil()","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2016-02-02 19:04:43","sys_domain_path":"","script":"serviceOutageEnd();\n\nfunction serviceOutageEnd() {\n\tvar notes = new GlideRecord(\"m2m_sp_status_subscription\");\n\tnotes.addQuery(\"cmdb_ci_service\", current.cmdb_ci);\n\tnotes.query();\n\twhile (notes.next()) {\n\t\tgs.eventQueue(\"outage.end.notif\", current, notes.getValue('sys_user'), current.cmdb_ci.getDisplayValue());\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"b75a8892d7111200a9addd173e24d4b7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/50c96bbb04f12210559073c06a02f7a5","value":"50c96bbb04f12210559073c06a02f7a5"},"sys_update_name":"sysevent_script_action_b75a8892d7111200a9addd173e24d4b7","sys_updated_by":"admin","sys_created_on":"2016-02-02 17:30:30","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Service Outage End","event_name":"outage.end","sys_name":"Service Outage End","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"Update flushtimes for node-agnostic caches present in glide.cache.node_agnostic_caches property","sys_overrides":"","sys_updated_on":"2024-02-02 06:16:37","sys_domain_path":"","script":"// ensures updating of flush times in sys_cacheflush_timestamp table for all node agnostic caches list in glide.cache.node_agnostic_caches\nGlideCacheManager.recordNodeAgnosticCacheFlush();","sys_class_name":"sysevent_script_action","sys_id":"b8432d66770002108badf7883f5a990b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9543af3304312210559073c06a02f769","value":"9543af3304312210559073c06a02f769"},"sys_update_name":"sysevent_script_action_b8432d66770002108badf7883f5a990b","sys_updated_by":"admin","sys_created_on":"2024-02-02 06:09:52","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update flushtimes for nodeagnostic cache","event_name":"system.upgraded","sys_name":"Update flushtimes for nodeagnostic cache","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-09-06 03:45:59","sys_domain_path":"","script":"\n      var AGENT_WORKSPACE_APP_SHELL = \"c276387cc331101080d6d3658940ddd2\";\nvar BREADCRUM_APP_SHELL = \"e341e22cc32e2010ea04a5a1d840dd02\";\nvar POLARIS_APP_SHELL = \"c86a62e2c7022010099a308dc7c26022\";\nvar WORKSPACE_CATEGORY = \"afb4e3e173322010f0ca1e666bf6a726\";\n\nvar before = gs.getSession().getWorkflow();\ngs.getSession().setWorkflow(false);\n\nvar pageRegRecords = new GlideRecord(\"sys_ux_page_registry\");\npageRegRecords.addNullQuery(\"parent_app\");\nvar orCondition = pageRegRecords.addQuery(\"root_macroponent\", AGENT_WORKSPACE_APP_SHELL);\norCondition.addOrCondition(\"root_macroponent\", BREADCRUM_APP_SHELL);\npageRegRecords.query();\nwhile (pageRegRecords.next()) {\n    pageRegRecords.setValue(\"parent_app\", POLARIS_APP_SHELL);\n    pageRegRecords.update();\n    var categoryRecord = new GlideRecord(\"sys_ux_registry_m2m_category\");\n    categoryRecord.addQuery(\"page_registry\", pageRegRecords.getUniqueValue());\n    categoryRecord.query();\n    if (!categoryRecord.hasNext()) {\n        categoryRecord.initialize();\n        categoryRecord.setValue(\"experience_category\", WORKSPACE_CATEGORY);\n        categoryRecord.setValue(\"page_registry\", pageRegRecords.getUniqueValue());\n        categoryRecord.insert();\n    }\n}\n\ngs.getSession().setWorkflow(before);","sys_class_name":"sysevent_script_action","sys_id":"b9352546c7423010099a308dc7c260d0","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4524dc30c331101080d6d3658940dd22","value":"4524dc30c331101080d6d3658940dd22"},"sys_update_name":"sysevent_script_action_b9352546c7423010099a308dc7c260d0","sys_updated_by":"admin","sys_created_on":"2021-08-19 22:08:40","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update experiences parent app to Polaris","event_name":"system.upgraded","sys_name":"Update experiences parent app to Polaris","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4524dc30c331101080d6d3658940dd22","value":"4524dc30c331101080d6d3658940dd22"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"23","active":"true","description":"","sys_overrides":"","sys_updated_on":"2016-12-09 15:28:19","sys_domain_path":"","script":"var json = new JSON();\ngs.log('json summary: ' + json)\nvar summary = json.decode(event.parm1);\ngs.log('summary.createScoreNotes = ' + summary.thresholdCheck.createScoreNotes);\nif (summary.thresholdCheck.createScoreNotes) {\n\tvar uuidComment = summary.thresholdCheck.uuidComment;\n\tvar user = null;\n\tif (summary.thresholdCheck.personal) {\n\t\tuser = event.parm2;\n\t}\n    var scoreIntegerDate = summary.scoreIntegerDate;\n    var message = buildMessage(summary);\n\t// Comment are not stored on the aggregates\n\tgs.log('uuid: ' + uuidComment + ', scoreIntegerDate: ' + scoreIntegerDate + ', message: ' + message);\n    appendScoreNote(message, uuidComment, scoreIntegerDate, user);\n}\n\nfunction buildMessage(summary) {\n    var scoreDate = summary.scoreDate;\n    gs.log('scoreDate = ' + summary.scoreDate);\n\t\n\tvar thresholdCheck = summary.thresholdCheck;\n    \n\tvar uuidString = thresholdCheck.uuidString;\n\tgs.log('uuidString = ' + thresholdCheck.uuidString);\n\t\n\tvar message = scoreDate + \": \" + uuidString + \": \";\n    gs.log('message = ' + thresholdCheck.message);\n\t\n    var unit = thresholdCheck.unit;\n    gs.log('unit = ' + thresholdCheck.unit);\n\t\n    if (typeof unit == 'undefined'){\n    \tunit = '';\n    }\n\t\n\tvar condition = thresholdCheck.condition;\n    gs.log('condition = ' + thresholdCheck.condition);\n\t\n\tvar thresholdLevel = thresholdCheck.thresholdLevel;\n    gs.log('thresholdLevel = ' + thresholdCheck.thresholdLevel);\n\t\n\tif (typeof thresholdLevel != 'undefined'){\n    \tcondition += ' ' + thresholdLevel;\n    \tif (unit!=''){\n            condition += ' ' + unit;\n        }\n    }\n    return message + condition + ': ' + thresholdCheck.matchingScore + ' ' + unit;\n}\n\nfunction appendScoreNote(message, uuid, integerDate, user) {\n\tvar gr = new GlideRecord(\"pa_score_notes\");\n\tgr.addQuery(\"uuid\", uuid);\n\tgr.addQuery(\"start_at\", integerDate);\n\tgr.addQuery(\"user\", user);\n\tgr.query();\n\tif (gr.next()) {\n\t\tgr.setValue(\"text\", message + \"\\n\\n\" + gr.getValue(\"text\"));\n\t\tgr.update();\n\t} else {\n\t\tgr = new GlideRecord(\"pa_score_notes\");\n\t\tgr.setValue(\"uuid\", uuid);\n\t\tgr.setValue(\"text\", message);\n  \t    gr.setValue('start_at', integerDate);\n\t\tgr.setValue(\"user\", user);\n        gr.insert();\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"ba179792d7321100ef2281537e610394","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/539a23bf04f12210559073c06a02f7aa","value":"539a23bf04f12210559073c06a02f7aa"},"sys_update_name":"sysevent_script_action_ba179792d7321100ef2281537e610394","sys_updated_by":"admin","sys_created_on":"2014-02-12 13:15:41","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"PA threshold reached comment","event_name":"pa.job.threshold.reached","sys_name":"PA threshold reached comment","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2012-08-24 21:15:44","sys_domain_path":"","script":"var parts = event.parm1.split('.');\nvar m2mTable = GlideListM2MBacking.createTable(parts[0], parts[1]);\nm2mTable.load(event.parm1, event.parm2, true);","sys_class_name":"sysevent_script_action","sys_id":"bcf2babf9f2320007aaa207c7f4bcc89","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9543af3304312210559073c06a02f769","value":"9543af3304312210559073c06a02f769"},"sys_update_name":"sysevent_script_action_bcf2babf9f2320007aaa207c7f4bcc89","sys_updated_by":"don goodliffe","sys_created_on":"2012-08-06 20:42:07","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Populate M2M table","event_name":"glide_list_new_m2m","sys_name":"Populate M2M table","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"don goodliffe","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"8","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-03-19 05:55:40","sys_domain_path":"","script":"(function() {\n    if (event.parm1) {\n        var CHANNEL_ANALYTICS = 'catalog_channel_analytics';\n        var TABLE_NAME = 'table_name';\n        var DOCUMENT_KEY = 'document_key';\n        var CATALOG_ITEM = 'catalog_item';\n        var TASK_ID = 'task_id';\n        var ENGAGEMENT_CHANNEL = 'engagement_channel';\n        var REFERRER = 'referrer';\n        var ORDER_GUIDE = 'order_guide';\n        var METHOD = 'method';\n        var REQUESTED_FOR = 'requested_for';\n\t\tvar CONVERSATION = 'conversation';\n\n        var CREATE_METHOD = 'create';\n        var EDIT_METHOD = 'edit';\n\n        var DEFAULT = 'default';\n        var FULFILLMENT_AUTOMATION_LEVEL = 'fulfillment_automation_level';\n        var UNSPECIFIED = 'unspecified';\n        var params = null;\n        try {\n            params = JSON.parse(event.parm1);\n        } catch (e) {\n            gs.log('Error while parsing parm1 for catalog_channel_analytics: ' + e);\n        }\n\n        if (!params || !params.table_name || !params.catalog_item || (params.table_name != 'sc_cat_item_guide' && !params.document_key))\n            return;\n\n        var currentMethod;\n\n        if (params.table_name == 'sc_cat_item_guide' && !params.document_key)\n            currentMethod = CREATE_METHOD;\n        else {\n            // We might be trying to edit an item using a CRP which was created earlier by another CRP\n            var gr = new GlideRecord(CHANNEL_ANALYTICS);\n            gr.addQuery(TABLE_NAME, params[TABLE_NAME]);\n            gr.addQuery(DOCUMENT_KEY, params[DOCUMENT_KEY]);\n            gr.addQuery(METHOD, CREATE_METHOD);\n            gr.setWorkflow(false);\n            gr.query();\n            if (!gr.hasNext())\n                currentMethod = CREATE_METHOD;\n            else\n                currentMethod = EDIT_METHOD;\n        }\n\n        gr = new GlideRecord(CHANNEL_ANALYTICS);\n        gr.initialize();\n        gr.setValue(TABLE_NAME, params[TABLE_NAME]);\n        gr.setValue(DOCUMENT_KEY, params[DOCUMENT_KEY]);\n        gr.setValue(METHOD, currentMethod);\n        gr.setValue(CATALOG_ITEM, params[CATALOG_ITEM]);\n\n        var choices;\n\n        if (params[ENGAGEMENT_CHANNEL]) {\n            choices = GlideScriptChoiceList.getChoiceList(CHANNEL_ANALYTICS, ENGAGEMENT_CHANNEL);\n            var engagementChannel = (choices && choices.getChoice(params[ENGAGEMENT_CHANNEL])) ? params[ENGAGEMENT_CHANNEL] : DEFAULT;\n            gr.setValue(ENGAGEMENT_CHANNEL, engagementChannel);\n        }\n\n        if (params[REFERRER]) {\n            choices = GlideScriptChoiceList.getChoiceList(CHANNEL_ANALYTICS, REFERRER);\n            var referrer = (choices && choices.getChoice(params[REFERRER])) ? params[REFERRER] : DEFAULT;\n            gr.setValue(REFERRER, referrer);\n        }\n\n        if (params[ORDER_GUIDE])\n            gr.setValue(ORDER_GUIDE, params[ORDER_GUIDE]);\n\n        if (params[TASK_ID])\n            gr.setValue(TASK_ID, params[TASK_ID]);\n\n        if (params[FULFILLMENT_AUTOMATION_LEVEL]) {\n            var automationLevelChoices = GlideScriptChoiceList.getChoiceList(CHANNEL_ANALYTICS, FULFILLMENT_AUTOMATION_LEVEL);\n            var automationLevel = (automationLevelChoices && automationLevelChoices.getChoice(params[FULFILLMENT_AUTOMATION_LEVEL])) ? params[FULFILLMENT_AUTOMATION_LEVEL] : UNSPECIFIED;\n            gr.setValue(FULFILLMENT_AUTOMATION_LEVEL, automationLevel);\n        }\n\n        if (params[REQUESTED_FOR])\n            gr.setValue(REQUESTED_FOR, params[REQUESTED_FOR]);\n\n\t\tif (params[CONVERSATION] && gr.isValidField(CONVERSATION))\n\t\t\tgr.setValue(CONVERSATION, params[CONVERSATION]);\n\n        gr.insert();\n    }\n})();","sys_class_name":"sysevent_script_action","sys_id":"bd55817953131010f338ddeeff7b1265","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/43adafff04352210559073c06a02f77e","value":"43adafff04352210559073c06a02f77e"},"sys_update_name":"sysevent_script_action_bd55817953131010f338ddeeff7b1265","sys_updated_by":"admin","sys_created_on":"2020-09-17 12:09:06","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Service Catalog Channel Usage","event_name":"catalog_channel_analytics.usage","sys_name":"Service Catalog Channel Usage","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.glideapp.servicecatalog.platform'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-05-12 16:06:44","sys_domain_path":"","script":"gs.info(\"notification script trigger started\");\nvar requestNotification = new global.RequestNotificationUpgradeUtil();\nrequestNotification.updateRequestNotifications();\ngs.info(\"notification script trigger ended\");","sys_class_name":"sysevent_script_action","sys_id":"bd9846f453022110b7edddeeff7b12e6","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3028ab3304f12210559073c06a02f7b7","value":"3028ab3304f12210559073c06a02f7b7"},"sys_update_name":"sysevent_script_action_bd9846f453022110b7edddeeff7b12e6","sys_updated_by":"admin","sys_created_on":"2023-04-04 16:06:44","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Service Catalog Notification Upgrade","event_name":"plugin.upgraded","sys_name":"Service Catalog Notification Upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"15","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-03-23 06:56:03","sys_domain_path":"","script":"/* \nThis is the script action we use to send out authentication code to both Email and SMS devices.\nWe don't use platform Notifications any more as it sends code to ALL devices of a user.\nBut we still keep the Notification as a way to know wether a device is subscribed to Email or SMS verifications.\n*/\n\nsendCode();\n\n\n// DEF0063745 notification_type is not exposed by any API so we have to do GlideRecord insert\n// PRB1263734: Set target record to restrict access to this email record\nfunction sendCode() {\n\tvar parms = event.parm1.split(\",\");\n\tvar notificationType = parms[0];\n\tvar addrs = parms.slice(1);\n\tvar code = event.parm2;\n\t\n\tvar grEmail = new GlideRecord(\"sys_email\");\n\tgrEmail.recipients = addrs.join(\",\");\n\tgrEmail.target_table = event.table;\n\tgrEmail.instance = event.instance;\n\tgrEmail.type = \"send-ready\";\n\t\n\tif (notificationType == \"SMTP\") {\n\t\tgrEmail.subject = gs.getMessage(\"Password reset verification code\");\n\t\tgrEmail.body_text = gs.getMessage(\"Use this verification code to verify your identity: {0}\", code);\n\t\tgrEmail.notification_type = notificationType;\n\t\tgrEmail.content_type = \"text/plain\";\n\t\tgrEmail.insert();\n\t\t\n\t} else if (notificationType == \"SMS\") {\n\t\tgrEmail.subject = gs.getMessage(\"To verify your identity, use this verification code: {0}\", code);\n\t\tgrEmail.notification_type = notificationType;\n\t\tgrEmail.content_type = \"multipart/mixed\";\n\t\tgrEmail.insert();\n\t}\n\t\n}","sys_class_name":"sysevent_script_action","sys_id":"bddae376678113008b52f3b457415aca","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_bddae376678113008b52f3b457415aca","sys_updated_by":"admin","sys_created_on":"2018-03-28 21:38:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Send pwd verify code","event_name":"pwd.send_verify_code.trigger","sys_name":"Send pwd verify code","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1=='com.glide.usageanalytics'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-18 20:47:04","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', ['529ccbb83bca101006f1600713efc4c2', 'af2b03743bca101006f1600713efc497']);\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"be4aec630f01201078a451a1ff767e46","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e36423fb04312210559073c06a02f798","value":"e36423fb04312210559073c06a02f798"},"sys_update_name":"sysevent_script_action_be4aec630f01201078a451a1ff767e46","sys_updated_by":"admin","sys_created_on":"2020-12-18 20:47:04","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs for UA IH","event_name":"plugin.activated","sys_name":"Activate report_view ACLs for UA IH","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-08-26 17:04:29","sys_domain_path":"","script":"new LifeCycleUtil().bulkPopulate();","sys_class_name":"sysevent_script_action","sys_id":"bf76b0b273b210109cc5aa114df6a725","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/6535677304712210559073c06a02f74f","value":"6535677304712210559073c06a02f74f"},"sys_update_name":"sysevent_script_action_bf76b0b273b210109cc5aa114df6a725","sys_updated_by":"admin","sys_created_on":"2020-08-26 17:04:29","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Populate Life Cycle Attributes","event_name":"activate.life.cycle.migration","sys_name":"Populate Life Cycle Attributes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.change_management.cab'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:52","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '29098204b76010103186f2b1de11a988, 55aac244b76010103186f2b1de11a941, 1e8cca44b76010103186f2b1de11a91f, a3e9ca04b76010103186f2b1de11a921, c39d4e84b76010103186f2b1de11a931');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"bf9cc702b74120104c45f2b1de11a951","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/18351d53eb32120034d1eeea1206fe79","value":"18351d53eb32120034d1eeea1206fe79"},"sys_update_name":"sysevent_script_action_bf9cc702b74120104c45f2b1de11a951","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:25:25","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- Chg CAB","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- Chg CAB","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/18351d53eb32120034d1eeea1206fe79","value":"18351d53eb32120034d1eeea1206fe79"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.glideapp.knowledge.mobile_requestor'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-10-06 13:10:24","sys_domain_path":"/","script":"var upgradeMetaData = new sn_km_mr.MobileCardViewMigrationConstants().SYS_SG_ITEM_VIEW_MAP;\nvar upgradeEngine = new global.MobileUtahUpgradeCommonUtils();\nupgradeEngine.cleanUpgradeLegacyCards(upgradeMetaData);","sys_class_name":"sysevent_script_action","sys_id":"bfba69b2f796d510dc25d3e543bfd656","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b3a70c8a530323004c36ddeeff7b124c","value":"b3a70c8a530323004c36ddeeff7b124c"},"sys_update_name":"sysevent_script_action_bfba69b2f796d510dc25d3e543bfd656","sys_updated_by":"admin","sys_created_on":"2022-10-06 09:08:02","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Run clean upgrade for Knowledge Mobile","event_name":"plugin.upgraded","sys_name":"Run clean upgrade for Knowledge Mobile","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/b3a70c8a530323004c36ddeeff7b124c","value":"b3a70c8a530323004c36ddeeff7b124c"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"GlideTableDescriptor.fieldExists('sys_aw_form_header',  'specificity')","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-07-15 07:42:13","sys_domain_path":"","script":"(function setFormHeaderSpecificity(){\n\tvar gr = new GlideRecord(\"sys_aw_form_header\");\n\tif (!gr.isValid())\n\t\treturn;\n\tgr.addNullQuery('specificity');\n\tgr.orderBy('table');\n\tgr.query();\n\tvar table = null;\n\tvar size = 0;\n\twhile (gr.next()) {\n\t\tif (table !== gr.getValue('table')) {\n\t\t\ttable = gr.getValue('table');\n\t\t\tsize = GlideDBObjectManager.getTables(table).size();\n\t\t}\n\t\tvar specificity = 10 * size + Boolean(gr.getValue('workspace'));\n\t\tgr.setValue('specificity', specificity);\n\t\tgr.setWorkflow(false);\n\t\tgr.update();\n\t\tgs.info('set record: ' + gr.getUniqueValue() + ' with specificity: ' + specificity.toString());\n\t}\n})();","sys_class_name":"sysevent_script_action","sys_id":"c04ec071ff001010cff95b9f793bf15c","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ba9c2f7b04352210559073c06a02f7cb","value":"ba9c2f7b04352210559073c06a02f7cb"},"sys_update_name":"sysevent_script_action_c04ec071ff001010cff95b9f793bf15c","sys_updated_by":"admin","sys_created_on":"2020-04-08 18:50:16","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Set Workspace Form Header Specificity","event_name":"system.upgraded","sys_name":"Set Workspace Form Header Specificity","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2011-08-03 20:56:52","sys_domain_path":"","script":"// current: GlideRecord - event scheduled on behalf of (incident for example) \r\n// event: GlideRecord - sysevent that caused this to be invoked\r\n\r\nMIDServerFileSync.process();","sys_class_name":"sysevent_script_action","sys_id":"c3836ec183101000dada83ec37d92923","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/42b8273704f12210559073c06a02f78d","value":"42b8273704f12210559073c06a02f78d"},"sys_update_name":"sysevent_script_action_c3836ec183101000dada83ec37d92923","sys_updated_by":"tom.dilatush","sys_created_on":"2011-08-03 20:56:26","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"MID Server file synchronization check","event_name":"attachment.uploaded","sys_name":"MID Server file synchronization check","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"tom.dilatush","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2015-06-10 03:32:05","sys_domain_path":"","script":"function insertMegaphoneMessage() {\n\tif(event.parm1.nil()) {\n\t\tgs.warn(\"Empty megaphone broadcast message inserted\");\n\t}\n\telse {\n\t\tvar mega = new MegaphoneBroadcastInsert();\n\t\tmega.fromEvent(event.parm1);\n\t}\n}\n\ninsertMegaphoneMessage();","sys_class_name":"sysevent_script_action","sys_id":"c5affa2147200200151119fbac9a717b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/6359673b04f12210559073c06a02f7b3","value":"6359673b04f12210559073c06a02f7b3"},"sys_update_name":"sysevent_script_action_c5affa2147200200151119fbac9a717b","sys_updated_by":"admin","sys_created_on":"2015-06-09 19:49:37","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Insert Megaphone Message Event","event_name":"megaphone.insert.message","sys_name":"Insert Megaphone Message Event","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.glide.high_security'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-16 23:16:00","sys_domain_path":"","script":"var SYS_IDs = [\n'03e7bc5073f2101006c71408e2f6a7f7', \n'4f32bc9c73b2101006c71408e2f6a764', \n'5102f89c73b2101006c71408e2f6a7d4', \n'510afc9073f2101006c71408e2f6a776', \n'5651b49c73b2101006c71408e2f6a7b7', \n'6cf274dc73b2101006c71408e2f6a72c', \n'6e77385073f2101006c71408e2f6a775', \n'7fa2b0dc73b2101006c71408e2f6a7e4', \n'b328fc5073f2101006c71408e2f6a700', \n'ce3bb8d073f2101006c71408e2f6a775', \n'd23fa45c73b2101006c71408e2f6a7a0', \n'd70b34d073f2101006c71408e2f6a794', \n'daa9f89073f2101006c71408e2f6a76d', \n'e7bf505473b2101006c71408e2f6a71a'                                       \n];\n\ngs.log('Activating High Security related ACLs for report_view...');\nfor (i in SYS_IDs) {\n\tvar sysId = SYS_IDs[i];\n\tvar grACL = new GlideRecord('sys_security_acl');\n\tgrACL.get(sysId);\n\tgrACL.setValue('active', true);\n\tgrACL.update();\n}\n","sys_class_name":"sysevent_script_action","sys_id":"c77c3e7e730120106c0a1408e2f6a796","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8778afb304f12210559073c06a02f7f6","value":"8778afb304f12210559073c06a02f7f6"},"sys_update_name":"sysevent_script_action_c77c3e7e730120106c0a1408e2f6a796","sys_updated_by":"admin","sys_created_on":"2020-12-16 23:16:00","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs for High Sec","event_name":"plugin.activated","sys_name":"Activate report_view ACLs for High Sec","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-20 07:31:29","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.password_expiration_reminder', false)) {\n    deactivateExpirationRecords();\n}\n\nfunction deactivateExpirationRecords() {\n    try {\n        new global.PwdExpirationUtils().deleteAllExpirationRecordsForAUser(\"\");\n    } catch (e) {\n        gs.error(\"[Script action: Delete Expiration records for a user - \" + e.getMessage());\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"c784cab3531130106bdaddeeff7b12c8","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_c784cab3531130106bdaddeeff7b12c8","sys_updated_by":"admin","sys_created_on":"2021-07-19 04:09:49","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Delete Expiration records for a user","event_name":"sys_user.delete","sys_name":"Delete Expiration records for a user","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"11","active":"true","description":"","sys_overrides":"","sys_updated_on":"2015-07-10 06:23:45","sys_domain_path":"","script":"restartMID();\n\nfunction restartMID() {\n\tif (event.parm1 != \"com.snc.discovery\" && event.parm1 != \"com.snc.runbook_automation\" \n\t\t&& event.parm1 != \"com.snc.service-watch\")\n\t\treturn;\n\t\n\tgs.log(\"Plugin \" + event.parm1 + \" has just been activated/reloaded. Notify MID servers to restart\");\n\t\n\tvar script = \"var gr = new GlideRecord('ecc_queue');\";\n\tscript    += \"gr.initialize();\";\n\tscript    += \"gr.setValue( 'agent',  'mid.server.*'  );\";\n\tscript    += \"gr.setValue( 'source', 'restart'    );\";\n\tscript    += \"gr.setValue( 'topic',  'SystemCommand' );\";\n\tscript    += \"gr.setValue( 'queue',  'output'        );\";\n\tscript    += \"gr.setValue( 'state',  'ready'         );\";\n\tscript    += \"gr.setValue( 'priority',  '0'          );\";\n\tscript    += \"gr.insert();\";\n\tGlideRunScriptJob.scheduleScript(script);\n}\n\n\n","sys_class_name":"sysevent_script_action","sys_id":"c7ea7421ef03110098d5925495c0fb71","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/91d8237704f12210559073c06a02f73b","value":"91d8237704f12210559073c06a02f73b"},"sys_update_name":"sysevent_script_action_c7ea7421ef03110098d5925495c0fb71","sys_updated_by":"chris.nguyen","sys_created_on":"2014-02-22 04:12:28","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Notify MID server of plugin upgrade","event_name":"plugin.upgraded","sys_name":"Notify MID server of plugin upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"aleck.lin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-07-27 17:05:02","sys_domain_path":"/","script":"/*\n*Triggered upon login event, check if user is admin\n*/\nvar constant = new sn_vsc.SecurityCenterConstants();\nvar usr = new GlideRecord('sys_user');\nif (usr.get('user_name', event.parm1)) {\n    var gr = new GlideRecord('sys_user_has_role');\n    var encoded = \"user=\" + usr.sys_id + \"^role=\" + constant.AdminUser + \"^ORrole=\" + constant.SCUser;\n    gr.addEncodedQuery(encoded);\n    gr.query();\n    if (gr.next()) {\n        new sn_vsc.SCComparisonUtil().loginEvent(usr.sys_id);\n\tnew sn_vsc.ScanComparisonUtil().loginEvent(usr.sys_id);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"c86abf9253b01110dd8eddeeff7b12b1","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_c86abf9253b01110dd8eddeeff7b12b1","sys_updated_by":"admin","sys_created_on":"2022-07-22 16:42:29","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SecurityCenter-AdminLogin","event_name":"login","sys_name":"SecurityCenter-AdminLogin","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-19 13:46:04","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.password_expiration_reminder', false)) {\n    createOrUpdateExpirationRecords();\n}\n\nfunction createOrUpdateExpirationRecords() {\n    var groupSysId = event.parm1;\n    var previousParentGroupId = event.parm2;\n\n    try {\n        var groupGr = new GlideRecord(\"sys_user_group\");\n        groupGr.get(groupSysId);\n\n        var parentGroupId = groupGr.getValue(\"parent\");\n        //Since its a before update event so we are making sure the update operation was succeded\n\n        if (parentGroupId != previousParentGroupId) {\n            //first de-activate all the expiration records for the previous parent process\n            createOrUpdateExpirationRecordsForParent(groupSysId, previousParentGroupId, false);\n            //create expiration records for the current parent process\n            createOrUpdateExpirationRecordsForParent(groupSysId, parentGroupId, true);\n        }\n    } catch (ex) {\n        gs.error(\"[Script action: Create Expiration records for a group - \" + groupSysId + \"] execution error - \" + ex);\n    }\n}\n\nfunction createOrUpdateExpirationRecordsForParent(groupSysId, parentGroupId, isCurrentParent) {\n    if (!parentGroupId)\n        return;\n    var pwdExpirationUtils = new global.PwdExpirationUtils();\n    //get all the processes associated with the current parent group\n    var processes = pwdExpirationUtils.getProcessesAssociatedWithAGroup(parentGroupId);\n    //get all the users associated with this group & its sub groups and create/update expiration record for each process-user pair\n    var userGroupMemberGr = pwdExpirationUtils.getAllUsersForGroup([groupSysId]);\n\n    if (isCurrentParent) {\n        while (userGroupMemberGr.next()) {\n            for (var processId in processes) {\n                pwdExpirationUtils.updatePasswordExpirationDetails(userGroupMemberGr.user, processId);\n            }\n        }\n    } else {\n        while (userGroupMemberGr.next()) {\n            //Getting all the remaining entitled processes for the user (excluding the processes related to the parent group)\n            var userEntitledProcesses = new PasswordResetScopedUtil().getProcessIdsByUserId(userGroupMemberGr.user).toString();\n            for (var processSysId in processes) {\n                if (!userEntitledProcesses.includes(processSysId))\n                    pwdExpirationUtils.deactivateExpirationRecordsForUserProcessPair(userGroupMemberGr.user, processSysId);\n            }\n        }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"c9710fec533330106bdaddeeff7b12b7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_c9710fec533330106bdaddeeff7b12b7","sys_updated_by":"admin","sys_created_on":"2021-11-10 12:50:29","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Expiration records for a group","event_name":"sys_user_group.parent_update","sys_name":"Create Expiration records for a group","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-05 10:22:26","sys_domain_path":"/","script":"sn_nlu_workbench.NLUIARTuning.populateLabelCandidates(event.parm1, event.parm2);","sys_class_name":"sysevent_script_action","sys_id":"c9d80909c7422110c59d3d9c95c260d0","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/31f5f491c3a710100bf407720f40ddf4","value":"31f5f491c3a710100bf407720f40ddf4"},"sys_update_name":"sysevent_script_action_c9d80909c7422110c59d3d9c95c260d0","sys_updated_by":"admin","sys_created_on":"2023-04-05 06:05:54","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Fetch candidates on model train complete","event_name":"sn_cs.iar.workflow.training.complete","sys_name":"Fetch candidates on model train complete","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/31f5f491c3a710100bf407720f40ddf4","value":"31f5f491c3a710100bf407720f40ddf4"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-08-19 06:30:23","sys_domain_path":"","script":"//updating the allocated/used field with the latest calculated value.\nvar licDetailGR = new GlideRecord(\"license_details\");\nlicDetailGR.addActiveQuery();\nlicDetailGR.addQuery(\"license_type\", [1, 2]); // capacity or max-user\nlicDetailGR.query();\nvar subUtil = new SNSubscriptionUtils();\nwhile (licDetailGR.next()) {\n    subUtil.syncSubscriptionUsageCounts(licDetailGR);\n}","sys_class_name":"sysevent_script_action","sys_id":"caa4404c773210100afbf62ad9106166","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8bc96fbb04f12210559073c06a02f755","value":"8bc96fbb04f12210559073c06a02f755"},"sys_update_name":"sysevent_script_action_caa4404c773210100afbf62ad9106166","sys_updated_by":"admin","sys_created_on":"2020-08-18 00:37:28","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update capacity license count","event_name":"snc.subscription.definition.count","sys_name":"Update capacity license count","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"500","sys_policy":""},{"condition_script":"event.parm1.indexOf('clone_data_exclude') > 0 || event.parm1.indexOf('clone_data_preserver') > 0 || event.parm1.indexOf('clone_cleanup_script') > 0","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-10-05 15:27:48","sys_domain_path":"/","script":"SystemCloneUtil.fixSystemProfileConfig();","sys_class_name":"sysevent_script_action","sys_id":"cc3b4e230f23101036269d6a68767e05","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3b83a3f304312210559073c06a02f788","value":"3b83a3f304312210559073c06a02f788"},"sys_update_name":"sysevent_script_action_cc3b4e230f23101036269d6a68767e05","sys_updated_by":"admin","sys_created_on":"2020-10-05 13:56:48","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Fix Clone Default Configuration","event_name":"loader.tables.processed","sys_name":"Fix Clone Default Configuration","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"8","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-06-06 14:58:39","sys_domain_path":"/","script":"(function() {\n    var template_sys_id = event.parm1;\n    var data = JSON.parse(event.parm2);\n\n    var templateGR = new GlideRecord('sys_app_template');\n\n    // Exit if template doesn't exist\n    if (!templateGR.get(template_sys_id))\n        return;\n\n    if (data.company)\n        return;\n\n    var payload = {\n        type: 'app_template.unshared',\n\t\ttemplate_name: templateGR.getValue('name')\n    };\n\n    payload['template_sys_id'] = template_sys_id;\n\n    if (data.user) {\n        payload['user_sys_ids'] = [data.user];\n    }\n    if (data.user_group) {\n        payload['group_sys_ids'] = [data.user_group];\n    }\n\n    sn_fd.FlowAPI.executeSubflow('sn_app_eng_studio.process_app_template_email_data', payload);\n})();","sys_class_name":"sysevent_script_action","sys_id":"cdaeed82537b01106511ddeeff7b12e0","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e046257545b47c84712b8779a9abd0cb","value":"e046257545b47c84712b8779a9abd0cb"},"sys_update_name":"sysevent_script_action_cdaeed82537b01106511ddeeff7b12e0","sys_updated_by":"admin","sys_created_on":"2022-06-01 18:50:01","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Template Unshared","event_name":"app_template.unshared","sys_name":"Template Unshared","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/e046257545b47c84712b8779a9abd0cb","value":"e046257545b47c84712b8779a9abd0cb"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"26","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-08-26 12:19:46","sys_domain_path":"","script":"new global.AssessmentUtils().notifyUser(current);","sys_class_name":"sysevent_script_action","sys_id":"ce046db4673a22006e1e82f45685ef36","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3da7677f04b12210559073c06a02f701","value":"3da7677f04b12210559073c06a02f701"},"sys_update_name":"sysevent_script_action_ce046db4673a22006e1e82f45685ef36","sys_updated_by":"admin","sys_created_on":"2016-10-28 17:59:49","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Quiz Workflow","event_name":"quiz.workflow","sys_name":"Quiz Workflow","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-11-02 03:24:39","sys_domain_path":"/","script":"var call_scriptInclude = new sn_vsc.SCEventUtil();\ncall_scriptInclude.loginEvent();","sys_class_name":"sysevent_script_action","sys_id":"ce19351714dc1700964fa81e247aa847","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_ce19351714dc1700964fa81e247aa847","sys_updated_by":"maint","sys_created_on":"2018-02-20 20:00:20","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SC Event - Logins","event_name":"login","sys_name":"SC Event - Logins","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"maint","order":"150","sys_policy":"read"},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-08-02 23:26:59","sys_domain_path":"/","script":"new sn_entitlement.UnconfirmedUsersReportingUtil().generateReport();","sys_class_name":"sysevent_script_action","sys_id":"cfdeda595ff302105e9db48b677313a7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bcadabf277f311109c62f5f3cb5a992a","value":"bcadabf277f311109c62f5f3cb5a992a"},"sys_update_name":"sysevent_script_action_cfdeda595ff302105e9db48b677313a7","sys_updated_by":"admin","sys_created_on":"2024-08-02 23:10:23","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"UnconfirmedUsersReporting","event_name":"sn_entitlement.unconfirmed_users_report","sys_name":"UnconfirmedUsersReporting","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bcadabf277f311109c62f5f3cb5a992a","value":"bcadabf277f311109c62f5f3cb5a992a"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-07-09 14:11:56","sys_domain_path":"/","script":"new UpdateChecker().downloadLogos(JSON.parse(event.parm1));","sys_class_name":"sysevent_script_action","sys_id":"d03a69980fe53300b717be630b767e18","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_update_name":"sysevent_script_action_d03a69980fe53300b717be630b767e18","sys_updated_by":"developer.program.hop@snc","sys_created_on":"2019-05-17 06:46:21","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update store app logos","event_name":"sn_appclient.update.logos","sys_name":"Update store app logos","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/781f36a96fef21005be8883e6b3ee43d","value":"781f36a96fef21005be8883e6b3ee43d"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"12","active":"true","description":"","sys_overrides":"","sys_updated_on":"2015-06-23 03:27:07","sys_domain_path":"","script":"(function() {\t\n\tvar requester = new EmailAccountRequester();\n\trequester.createJob(event.getValue('parm1'));\n}());","sys_class_name":"sysevent_script_action","sys_id":"d0e9d603eb100200c8690e815206fecd","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8308a33304f12210559073c06a02f7a9","value":"8308a33304f12210559073c06a02f7a9"},"sys_update_name":"sysevent_script_action_d0e9d603eb100200c8690e815206fecd","sys_updated_by":"admin","sys_created_on":"2015-06-01 22:39:30","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Provision ServiceNow Email Accounts","event_name":"system.upgraded","sys_name":"Provision ServiceNow Email Accounts","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"50","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.itsm.roles.change_management'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '050c1a04736010102eb52d2b04f6a7ac, 11579ec8b76010103186f2b1de11a956, ed8f9200b7a010103186f2b1de11a986, 28471e40736010102eb52d2b04f6a764, bc1a96c0736010102eb52d2b04f6a74f, 5e3d9e8cb76010103186f2b1de11a990, eda1e240b7a010103186f2b1de11a9fc, 9198a644b7a010103186f2b1de11a9e8, 85d833a0b72010103186f2b1de11a993, 7e9ecf2673a010102eb52d2b04f6a7dc');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"d12ec742b74120104c45f2b1de11a91f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0ffc273f04352210559073c06a02f797","value":"0ffc273f04352210559073c06a02f797"},"sys_update_name":"sysevent_script_action_d12ec742b74120104c45f2b1de11a91f","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:32:04","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- ChgManagement","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- ChgManagement","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-01-28 20:43:58","sys_domain_path":"","script":"new ChangeManagementEventHandler(current).process(event);","sys_class_name":"sysevent_script_action","sys_id":"d20557d1b79323000999e4f6ee11a9dc","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/32b7af7f04b12210559073c06a02f7fb","value":"32b7af7f04b12210559073c06a02f7fb"},"sys_update_name":"sysevent_script_action_d20557d1b79323000999e4f6ee11a9dc","sys_updated_by":"admin","sys_created_on":"2019-01-28 20:43:23","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Handle refreshCI run event","event_name":"sn_chg_mgt.impacted.REFRESH","sys_name":"Handle refreshCI run event","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"(current.discover == 'Subnet' || current.discover == 'AutoConfiguration') && current.state != 'Canceled'","sys_mod_count":"10","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-03-21 23:04:09","sys_domain_path":"","script":"SNC.DiscoveryAccelerator.triggerNextAutomation(current.sys_id);","sys_class_name":"sysevent_script_action","sys_id":"d27af01753503200e06462f706dc3442","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/91d8237704f12210559073c06a02f73b","value":"91d8237704f12210559073c06a02f73b"},"sys_update_name":"sysevent_script_action_d27af01753503200e06462f706dc3442","sys_updated_by":"hardik.modi","sys_created_on":"2017-01-18 22:54:49","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Discovery Accelerator Next Automation","event_name":"discovery.complete","sys_name":"Discovery Accelerator Next Automation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"hardik.modi","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"28","active":"false","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 07:34:51","sys_domain_path":"/","script":"gs.info(\"Starting update of the OpenNLUPredictIntentFeedback table to populate the NLU Discovery Outcome field\");\ntry {\n\tvar api = new UpdateNLUDiscoveryOutcomes();\n\tapi.updateNluDiscoveryOutcomes();\n} catch (ex) {\n\tgs.info(\"Error running updateNluDiscoveryOutcomes() : \" + ex.toString());\n}\n\n// Set this record to false so that it does not run again\nvar gr = new GlideRecord(\"sysevent_script_action\");\ngr.addQuery(\"sys_id\", \"d28b5c06eb463010506f7558b552281f\"); // Sysid of this record\ngr.query();\nif (gr.next()) {\n\tgr.setValue(\"active\", false);\n\tgr.update();\n}\n\ngs.info(\"Completed update of the OpenNLUPredictIntentFeedback table\");\n\n","sys_class_name":"sysevent_script_action","sys_id":"d28b5c06eb463010506f7558b552281f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sysevent_script_action_d28b5c06eb463010506f7558b552281f","sys_updated_by":"system","sys_created_on":"2021-08-19 16:46:48","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"OpenNLUPredictIntentFeedbackUpdates","event_name":"system.upgraded","sys_name":"OpenNLUPredictIntentFeedbackUpdates","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-10-10 14:01:45","sys_domain_path":"","script":"var params = JSON.parse(event.parm1);\nnew global.GlideappScriptHelper().updateVariableReferences(params);","sys_class_name":"sysevent_script_action","sys_id":"d4ef0a36eb92011008f2951ff15228fe","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3028ab3304f12210559073c06a02f7b7","value":"3028ab3304f12210559073c06a02f7b7"},"sys_update_name":"sysevent_script_action_d4ef0a36eb92011008f2951ff15228fe","sys_updated_by":"admin","sys_created_on":"2022-03-21 15:40:12","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"update variable references","event_name":"sc_variable.update.references","sys_name":"update variable references","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.incident_notification'","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-03-16 05:05:56","sys_domain_path":"","script":"gs.info(\"notification script trigger started\");\nvar incidentNotification = new global.IncidentNotificationUtil();\nincidentNotification.updateIncidentNotifications();\ngs.info(\"notification script trigger ended\");","sys_class_name":"sysevent_script_action","sys_id":"d5afd95653ad2110b7edddeeff7b12eb","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9eb76f7f04b12210559073c06a02f78a","value":"9eb76f7f04b12210559073c06a02f78a"},"sys_update_name":"sysevent_script_action_d5afd95653ad2110b7edddeeff7b12eb","sys_updated_by":"admin","sys_created_on":"2023-03-15 08:26:15","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Incident Management Notification Upgrade","event_name":"plugin.upgraded","sys_name":"Incident Management Notification Upgrade","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"15","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-03-17 23:23:50","sys_domain_path":"","script":"// current: GlideRecord - event scheduled on behalf of (incident for example) \n\ncreateCommitmentHistory();\n\nfunction createCommitmentHistory() {\n\tvar ac = null;\n\tvar infoMsg = '';\n\tvar avUtils = new global.AvailabilityUtils();\n\tvar avConstants = new global.AvailabilityConstants();\n\tvar ciClass = avUtils.getCiClassFromCommitment(current);\n\tif (current.service_commitment.type == 'availability') {\n\t\tif (checkAvailability(ciClass))\n\t\t\treturn;\t\t\n\t\tinfoMsg = gs.getMessage(\"Historical availability calculated for Service Offering: {0} for Commitment: {1}\", [current.service_offering.getDisplayValue(), current.service_commitment.getDisplayValue()]);\n\t\tif (gs.getProperty(avConstants.PROP_AVAILABILITY_V2) === 'true') {\n\t\t\tvar begin = new GlideDateTime();\n\t\t\tbegin.addDays(-365);\n\t\t\tvar end = new GlideDateTime();\n\t\t\tac = new global.AvailabilitySummarizerV2();\n\t\t\tac.setCommitments([current.service_commitment.sys_id]);\n\t\t\tac.setCi(ciClass === 'service_offering' ? current.service_offering : current.cmdb_ci);\n\t\t\tac.summarize(begin, end);\n\t\t\treturn;\n\t\t}\n\t\telse\n\t\t\tac = new global.AvailabilitySummarizer();\n\n\t} else if (current.service_commitment.type == 'SLA') {\n\t\tif (checkSLAResult())\n\t\t\treturn;\n\t\t\n\t\tac = new global.SLAResultSummarizer();\n\t\tinfoMsg = gs.getMessage(\"Historical SLA Results calculated for Service Offering: {0} for new Commitment: {1}\", [current.service_offering.getDisplayValue(), current.service_commitment.getDisplayValue()]);\n\t} else {\n\t\treturn;\n\t}\n\tac.setCommitment(current.service_commitment);\n\tif (ciClass === 'service_offering')\n\t\tac.setCI(current.service_offering);\n\telse if (ciClass != null)\n\t\tac.setCI(current.cmdb_ci);\n\telse\n\t\treturn;\n\n\t//Setting timezone to system timezone for calculations\n\tvar oldTZ = gs.getSession().getTimeZoneName();\n\tvar defaultTZ = GlideUser.getSysTimeZone();\n\tgs.debug('setting timezone to ' + defaultTZ + ' for SPM commitment history calculations');\n\tgs.getSession().setTimeZoneName(defaultTZ);\n\t\n\t// need to calculate daily results from beginning of month 12 months ago\n\t// to end of this month\t\t\n\tfor (var i = 397; true; i--) {\n\t\tvar dayZero = gs.daysAgoStart(i);\n\t\tvar start = new GlideDateTime(dayZero);\n\t\tif (start < gs.monthsAgoStart(12))\n\t\t\tcontinue;\n\n\t\tif (start > gs.endOfThisMonth())\n\t\t\tbreak;\n\n\t\tac.summarize(start.getValue());\n\t}\t\n\tac.summarize(); // recalc today since data is now there for this month's monthly\n\t\t\n\tgs.info(infoMsg);\n\tgs.debug('restoring session timezone to ' + oldTZ + ' after SPM commitment history calculations');\n\tgs.getSession().setTimeZoneName(oldTZ);\n}\n\n//check to see if sla results already exist for offering and commitment\nfunction checkAvailability(ciClass) {\n\tvar availabilityGr = new GlideRecord('service_availability');\n\tif (ciClass === 'service_offering')\n\t\tavailabilityGr.addQuery('service_offering', current.service_offering);\n\telse if (ciClass != null)\n\t\tavailabilityGr.addQuery('cmdb_ci', current.cmdb_ci);\n\telse\n\t\treturn true;\n\tavailabilityGr.addQuery('service_commitment', current.service_commitment);\n\tavailabilityGr.query();\n\t\n\treturn availabilityGr.hasNext();\n}\n\n//check to see if sla results already exist for offering and commitment\nfunction checkSLAResult() {\n\t//Check that there is no existing sla results for the service offering and commitment\n\tvar resultGr = new GlideRecord('service_sla_result');\n\tresultGr.addQuery('service_offering', current.service_offering);\n\tresultGr.addQuery('service_commitment', current.service_commitment);\n\tresultGr.query();\n\t\n\treturn resultGr.hasNext();\n}\n","sys_class_name":"sysevent_script_action","sys_id":"d5f99d4e0790b01070e493d0fad300c5","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4a39e3f704f12210559073c06a02f7f9","value":"4a39e3f704f12210559073c06a02f7f9"},"sys_update_name":"sysevent_script_action_d5f99d4e0790b01070e493d0fad300c5","sys_updated_by":"admin","sys_created_on":"2021-05-24 21:31:22","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Commitment History","event_name":"spm.commitment.history","sys_name":"Create Commitment History","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-21 12:06:17","sys_domain_path":"","script":"var label = new GlideRecord('label');\n    if (label.get(current.label))\n        (new LabelCollision()).renameCollidingPrivateLabelsForUser(label, current.user);","sys_class_name":"sysevent_script_action","sys_id":"d625309ea3122110cf554fde36fcda61","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bd14ebf704312210559073c06a02f716","value":"bd14ebf704312210559073c06a02f716"},"sys_update_name":"sysevent_script_action_d625309ea3122110cf554fde36fcda61","sys_updated_by":"admin","sys_created_on":"2023-04-21 12:06:17","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Rename colliding private labels","event_name":"rename.colliding_private_labels","sys_name":"Rename colliding private labels","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"10","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-11-17 07:46:12","sys_domain_path":"/","script":"var SSA_DEFLECTION_CONFIGURATION = \"ssa_deflection_configuration\";\nvar SSA_DEFLECTION_PATTERN = \"ssa_deflection_pattern\";\nvar SSA_DEFLECTION_METRIC = \"ssa_deflection_metric\";\nvar SSA_DEFLECTION_METRIC_ACTIVITY = \"ssa_deflection_metric_activity\";\nvar SYS_CS_CONVERSATION_TASK = \"sys_cs_conversation_task\";\nvar SYS_CS_TOPIC = \"sys_cs_topic\";\nvar SYS_CB_TOPIC = \"sys_cb_topic\";\nvar TOPIC_TYPE = \"topic_type\";\nvar TOPIC_BLOCK = \"TOPIC_BLOCK\";\nvar TYPE = \"type\";\nvar CALLING_TASK = \"calling_task\";\nvar GCF_CATEGORY = \"conversational_analytics\";\nvar INSTRUMENTATION_POINT = \"virtual_agent\";\nvar INSTRUMENTATION_EVENT = \"virtual_agent_deflection\";\n\ninsertVADeflection(event);\n\n/**\n *  VA Deflection Metrics \n */\nfunction insertVADeflection(event) {\n\n    var metricInfo = new String(event.parm1);\n    var activitiesInfo = new String(event.parm2);\n\n    try {\n        metricInfo = JSON.parse(metricInfo);\n        if (metricInfo) {\n            var metricId = insertMetric(metricInfo);\n            if (metricId) {\n                activitiesInfo = JSON.parse(activitiesInfo);\n                insertActivities(metricId, activitiesInfo);\n            }\n        }\n    } catch (e) {\n        gs.log('[VA Deflection metrics]: Error while parsing event params: ' + e.messaage);\n    }\n}\n\n/**\n * Insert VA Deflection Metric \n */\nfunction insertMetric(metricInfo) {\n    var deflectionConfigSysId = metricInfo.config_id; // SSA_DEFLECTION_CONFIGURATION\n    var deflectionPatternId = metricInfo.pattern_id; // SSA_DEFLECTION_PATTERN\n    var conversationTaskId = getTaskIdOfCallerTopic(metricInfo.conversation_task_id); // Can coversation be empty??\n\n    if (!deflectionConfigSysId || !deflectionPatternId || !conversationTaskId)\n        return;\n\n    var dfConfigGR = new GlideRecord(SSA_DEFLECTION_CONFIGURATION);\n    if (!dfConfigGR.get(deflectionConfigSysId))\n        return;\n\n    var dfPatternGR = new GlideRecord(SSA_DEFLECTION_PATTERN);\n    if (!dfPatternGR.get(deflectionPatternId))\n        return;\n\n    var dfMetricGr = new GlideRecord(SSA_DEFLECTION_METRIC);\n    dfMetricGr.initialize();\n    dfMetricGr.deflection_pattern = deflectionPatternId;\n    dfMetricGr.content_table = SYS_CS_CONVERSATION_TASK;\n    dfMetricGr.content_id = conversationTaskId || '';\n    dfMetricGr.type = dfPatternGR.activity_pattern.outcome;\n    dfMetricGr.setWorkflow(false);\n    var dfMetricId = dfMetricGr.insert();\n    if (!dfMetricId) {\n        gs.log(\n            \"[VA Deflection metrics]: deflection metric insertion failed \" +\n            JSON.stringify(metricInfo)\n        );\n    }\n\n    recordDeflectionUsageEvent(conversationTaskId, dfPatternGR.activity_pattern.outcome);\n\n    return dfMetricId;\n}\n\n\nfunction insertActivities(dfMetricId, activitiesInfo) {\n    var activityTable = activitiesInfo.activity_table;\n    if (!dfMetricId || !activityTable)\n        return;\n\n    var activityIds = activitiesInfo.activity_ids;\n    if (activityIds) {\n        activityIds.split(',')\n            .forEach(function(activityId) {\n                if (activityId) {\n                    insertMetricActivity(dfMetricId, activityTable, activityId);\n                }\n            });\n    } else {\n        // Allow creating metric activity even if activity id's are not available\n        // Ex - use case - No incident created but we still wanted to group the metric count under the incident table\n        insertMetricActivity(dfMetricId, activityTable);\n    }\n}\n\n/**\n * Insert VA Deflection Metric Activity\n */\nfunction insertMetricActivity(dfMetricId, activityTable, activityId) {\n    var dfMetricActivityGr = new GlideRecord(SSA_DEFLECTION_METRIC_ACTIVITY);\n    dfMetricActivityGr.initialize();\n    dfMetricActivityGr.metric = dfMetricId;\n    dfMetricActivityGr.activity_table = activityTable;\n\n    if (activityId)\n        dfMetricActivityGr.activity = activityId;\n\n    dfMetricActivityGr.setWorkflow(false);\n    dfMetricActivityGr.insert();\n}\n\n/**\n * If the deflection block's caller task is also a TOPIC_BLOCK, then search upward\n * for the actual TOPIC that caused deflection.\n */\nfunction getTaskIdOfCallerTopic(currentTaskId) {\n    var taskGr = new GlideRecord(SYS_CS_CONVERSATION_TASK);\n    if (taskGr.get(currentTaskId)) {\n        var topicId = taskGr.getValue(TOPIC_TYPE);\n        if (topicId) {\n            var topicGr = new GlideRecord(SYS_CS_TOPIC);\n            if (topicGr.get(topicId)) {\n                var topicType = topicGr.getValue(TYPE);\n                if (topicType == TOPIC_BLOCK) {\n                    return getTaskIdOfCallerTopic(taskGr.getValue(CALLING_TASK));\n                } else {\n                    return currentTaskId;\n                }\n            }\n        }\n    }\n    return \"\";\n}\n\n/**\n * Collect data from the conversation task that caused deflection and publish\n * to GCF for analytics.\n */\nfunction recordDeflectionUsageEvent(conversationTaskId, deflectionOutcome) {\n    try {\n        var conversationTaskGr = new GlideRecord(SYS_CS_CONVERSATION_TASK);\n        if (conversationTaskGr.get(conversationTaskId)) {\n            var sm = new GCFSampleMap();\n            sm.put('device_type', conversationTaskGr.conversation.device_type);\n            sm.put('deflection_type', deflectionOutcome);\n            var csTopicGr = new GlideRecord(SYS_CS_TOPIC);\n            if (csTopicGr.get(conversationTaskGr.getValue(TOPIC_TYPE))) {\n                sm.put('topic_name', csTopicGr.getValue('name'));\n                var cbTopicGr = new GlideRecord(SYS_CB_TOPIC);\n                if (cbTopicGr.get(csTopicGr.getValue('cb_topic_id'))) {\n                    if (cbTopicGr.getValue('source_topic_id') == null && cbTopicGr.getValue('sys_policy') == 'read') {\n                        sm.put('topic_origin', 'oob_topic');\n                    } else {\n                        sm.put('topic_origin', 'custom_topic');\n                    }\n                }\n            }\n            GCFCollector.recordUsageEvent(GCF_CATEGORY, INSTRUMENTATION_POINT, INSTRUMENTATION_EVENT, sm);\n        }\n    } catch (err) {\n        var message = \"Failed to execute GCF collection for deflection metrics: \" + err.message;\n        gs.error(message);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"d6a741015387201033cdddeeff7b1248","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sysevent_script_action_d6a741015387201033cdddeeff7b1248","sys_updated_by":"admin","sys_created_on":"2021-03-20 15:08:35","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Insert VA deflections","event_name":"va.deflection_metric.insert","sys_name":"Insert VA deflections","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.bestpractice.change_risk'","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '287a6a84b7a010103186f2b1de11a958');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"d7cbcb4eb70120104c45f2b1de11a9a7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/1d0963b704f12210559073c06a02f7c1","value":"1d0963b704f12210559073c06a02f7c1"},"sys_update_name":"sysevent_script_action_d7cbcb4eb70120104c45f2b1de11a9a7","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:21:50","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- Chg Risk","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- Chg Risk","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"11","active":"true","description":"","sys_overrides":"","sys_updated_on":"2009-03-05 19:49:55","sys_domain_path":"","script":"\r\nsetUserTheme();\r\n\r\nfunction setUserTheme() {\r\n   setTheme('');\r\n\r\n   var pref = gs.getUser().getPreference('glide.css.theme');\r\n   if (pref) {\r\n      setTheme(pref);\r\n   }\r\n\r\n   var company = gs.getUser().getCompanyRecord();\r\n   if (!company)\r\n      return;\r\n\r\n   var theme = company.getValue('theme');\r\n   if (theme)\r\n      setTheme(theme);\r\n}\r\n\r\nfunction setTheme(theme) {\r\n  gs.getSession().putProperty('glide.css.theme', theme);\r\n}","sys_class_name":"sysevent_script_action","sys_id":"d7fc19ba0a0a0b1500b889b0ff384ed2","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3e34a77b04312210559073c06a02f715","value":"3e34a77b04312210559073c06a02f715"},"sys_update_name":"sysevent_script_action_d7fc19ba0a0a0b1500b889b0ff384ed2","sys_updated_by":"glide.maint","sys_created_on":"2009-03-05 18:54:18","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Set Theme","event_name":"session.established","sys_name":"Set Theme","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"18","active":"false","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"var client = new WSClientAdaptor(\"http://hi.service-now.com/incident.do?WSDL\");\r\nvar myname = gs.getProperty(\"glide.installation.name\");\r\nclient.impersonate(myname);\r\nclient.setMethodName(\"insert\");\r\nvar sd = \"Logfile match found for file: \" + event.parm1\r\nclient.setParameter(\"short_description\", event.parm2);\r\nclient.setParameter(\"comments\", sd + \"\\n\" + event.parm2);\r\nclient.setParameter(\"category\", \"Monitor\");\r\nvar sysid = client.invokeFiltered(\"//sys_id\");\r\ngs.print(\"LogFileMonitor created incident: \" + sysid);","sys_class_name":"sysevent_script_action","sys_id":"d8b08238c0a8006500c58af45e6717bc","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d0432f3304312210559073c06a02f7ea","value":"d0432f3304312210559073c06a02f7ea"},"sys_update_name":"sysevent_script_action_d8b08238c0a8006500c58af45e6717bc","sys_updated_by":"system","sys_created_on":"2005-03-25 07:50:08","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"LogWS","event_name":"logfilemonitor.test","sys_name":"LogWS","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"13","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-08-09 18:07:55","sys_domain_path":"","script":"new sn_utc.UpgradePlanAPI().processUpgradePlan(event.parm1);\n","sys_class_name":"sysevent_script_action","sys_id":"d8bae836eb2130101d00271138522853","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ef542bbb04312210559073c06a02f73f","value":"ef542bbb04312210559073c06a02f73f"},"sys_update_name":"sysevent_script_action_d8bae836eb2130101d00271138522853","sys_updated_by":"admin","sys_created_on":"2021-07-28 05:22:33","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Upgrade Plan Processor","event_name":"plugin.upgraded","sys_name":"Upgrade Plan Processor","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"28","active":"false","description":"","sys_overrides":"","sys_updated_on":"2025-07-09 10:58:50","sys_domain_path":"","script":"//\n// Check to see if the user has failed to login too many times\n// when the limit is reached, lock the user out of the system.\n// Also create a trigger to unlock the user after 'N' minutes.\n//\n\nlockoutOnFailedLogin();\n\nfunction lockoutOnFailedLogin() {\n\tvar maxUnlockAttempts = gs.getProperty(\"glide.user.max_unlock_attempts\", 5);\n\tvar gr = new GlideRecord(\"sys_user\");\n\tif (gr.get(\"user_name\", event.parm1.toString())) {\n\t\tif (gr.failed_attempts > maxUnlockAttempts)\n\t\t\treturn;\n\n\t\tgr.failed_attempts += 1;\n\t\tif (gr.failed_attempts > maxUnlockAttempts) {\n\t\t\tgr.locked_out = true;\n\t\t\tgr.update();\n\t\t\tgs.log(\"User \" + event.parm1 + \" locked out due to too many invalid login attempts\");\n\t\t\ttriggerUnlock(gr.sys_id);\n\t\t} else {\n\t\t\tgr.update();       \n\t\t}\n\t}\n}\n\nfunction triggerUnlock(userSysID) {\n\tvar unlockIn = gs.getProperty(\"glide.user.unlock_timeout_in_mins\", 15);\n\tvar trigger = new GlideRecord(\"sys_trigger\");\n\ttrigger.name = \"Unlock the user after \"+ unlockIn + \" mins\";\n\ttrigger.next_action = getTriggerTime(unlockIn);\n\ttrigger.job_id.setDisplayValue('RunScriptJob');\n\ttrigger.script = getTriggerScript(userSysID);\n\ttrigger.document = 'sys_user';\n\ttrigger.document_key = userSysID;\n\ttrigger.state = 0;\n\ttrigger.trigger_type = 0;\n\ttrigger.insert();\n}\n\nfunction getTriggerScript(userSysID) {\n\tvar ret = \"\"\n\t+ \"var gr = new GlideRecord('sys_user');\\n\"\n\t+ \"gr.addQuery('sys_id', '\" +userSysID+ \"');\\n\"\n\t+ \"gr.addQuery('locked_out', true);\\n\"\n\t+ \"gr.query();\\n\"\n\t+ \"if (gr.next()) {\\n\"\n\t\t+ \"gr.locked_out = false;\\n\"\n\t\t+ \"gr.failed_attempts = 0;\\n\"\n\t\t+ \"gr.update();\\n\"\n\t\t+ \"gs.log('Auto-unlocking user '+gr.name);\\n\"\n\t+ \"} else {\\n\"\n\t\t+ \"gs.log('Unable to auto-unlock user with sys_id: \"+userSysID+\"');\\n\"\n\t+ \"}\";\n\treturn ret;\n}\n\nfunction getTriggerTime(minutesToAdd) {\n\tvar checkTime = new GlideDateTime(/*now*/);\n\tcheckTime.addSeconds(minutesToAdd * 60);\n\treturn checkTime;\n}\n","sys_class_name":"sysevent_script_action","sys_id":"d92636b2975301008e00958e3b297567","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8778afb304f12210559073c06a02f7f6","value":"8778afb304f12210559073c06a02f7f6"},"sys_update_name":"sysevent_script_action_d92636b2975301008e00958e3b297567","sys_updated_by":"developer.program.hop@snc","sys_created_on":"2013-08-24 00:27:47","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SNC User Lockout Check with Auto Unlock","event_name":"login.failed","sys_name":"SNC User Lockout Check with Auto Unlock","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"6","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-11-23 00:12:53","sys_domain_path":"","script":"GlideSecurityManager.bounceEmptyACLs(event.parm1);","sys_class_name":"sysevent_script_action","sys_id":"d9ca050577623110411d94b92c5a99e5","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3d53e77304312210559073c06a02f70d","value":"3d53e77304312210559073c06a02f70d"},"sys_update_name":"sysevent_script_action_d9ca050577623110411d94b92c5a99e5","sys_updated_by":"maint","sys_created_on":"2023-11-14 22:54:06","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Bounce Empty ACLs","event_name":"update.operation.complete","sys_name":"Bounce Empty ACLs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"6","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-12-09 15:19:14","sys_domain_path":"/","script":"(function() {\n\n    try {\n        const globalSI = new global.BuilderToolkitAPIGlobal();\n        globalSI.setUserUpdateSetId(event.parm1);\n        const {\n            aclName,\n            roles\n        } = JSON.parse(event.parm2);\n        new Experience().createACL(aclName, roles, current.sys_scope);\n        globalSI.setUserUpdateSetId();\n    } catch (err) {\n        gs.error(\"Failed to create experience ACL with err: \" + err + '\\n' + err.stack);\n    }\n})();","sys_class_name":"sysevent_script_action","sys_id":"d9dc1827a56f1110f877a4ad4cca4803","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/cdfd3bed43321110e70583020cb8f28e","value":"cdfd3bed43321110e70583020cb8f28e"},"sys_update_name":"sysevent_script_action_d9dc1827a56f1110f877a4ad4cca4803","sys_updated_by":"maint","sys_created_on":"2022-12-09 14:38:41","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Experience ACLs","event_name":"sn_uibtk_api.create.experience.acl","sys_name":"Create Experience ACLs","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/cdfd3bed43321110e70583020cb8f28e","value":"cdfd3bed43321110e70583020cb8f28e"},"sys_created_by":"maint","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'sn_vsc'","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-01-24 00:44:41","sys_domain_path":"/","script":"\n      var SCHEDULED_BP_ACTIVATION = \"83cc34e2431331103b465dc36ab8f2e5\";\n      var gr = new GlideRecord(\"sysauto_script\");\n      if (gr.get(SCHEDULED_BP_ACTIVATION))\n        gs.executeNow(gr);","sys_class_name":"sysevent_script_action","sys_id":"da908a2b43333110a0d25dc36ab8f2c9","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_update_name":"sysevent_script_action_da908a2b43333110a0d25dc36ab8f2c9","sys_updated_by":"admin","sys_created_on":"2024-01-24 00:33:02","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SC Execute Best Practices Activation Job","event_name":"plugin.upgraded","sys_name":"SC Execute Best Practices Activation Job","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/a51d46e3f2014110366b10017c5ba675","value":"a51d46e3f2014110366b10017c5ba675"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"8","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-07-24 17:36:37","sys_domain_path":"","script":"new sn_lef.GlideLicenseAPI().updateTableLicensingConfig(event.parm1.toString());","sys_class_name":"sysevent_script_action","sys_id":"da958c064323021098ae9cd82ab8f2ce","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c0d427bf04312210559073c06a02f7a1","value":"c0d427bf04312210559073c06a02f7a1"},"sys_update_name":"sysevent_script_action_da958c064323021098ae9cd82ab8f2ce","sys_updated_by":"admin","sys_created_on":"2024-07-23 09:41:49","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update Table Licensing Config","event_name":"update.table.licensing.config","sys_name":"Update Table Licensing Config","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-19 13:06:05","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.enrollment_snapshot', true)) {\n    createEnrollmentSnapshot();\n}\n\nfunction createEnrollmentSnapshot() {\n    var groupProcessGr = new GlideRecord(\"pwd_map_proc_to_group\");\n    if (groupProcessGr.get(event.parm1) && groupProcessGr.process.active && groupProcessGr.user_group.active) {\n        var userGroup = groupProcessGr.user_group;\n        var process = groupProcessGr.process;\n        var pwdEnrollSnapshotUtil = new PwdEnrollSnapshotUtil();\n\n        try {\n            var userGroupMemberGr = new PwdExpirationUtils().getAllUsersForGroup([userGroup]);\n            while (userGroupMemberGr.next()) {\n                pwdEnrollSnapshotUtil.createEnrollmentSnapshot(userGroupMemberGr.user);\n            }\n        } catch (ex) {\n            gs.error(\"[Script action: Create Enrollment snapshot for proc-group for process_id \" + process + \" and group_id \" + userGroup + \"]. execution error - \" + ex);\n        }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"dac4c43543462110d68db0e245b8f20b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_dac4c43543462110d68db0e245b8f20b","sys_updated_by":"admin","sys_created_on":"2023-04-07 09:12:08","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Enrollment snaps for proc-group","event_name":"pwd_map_proc_to_group.insert","sys_name":"Create Enrollment snaps for proc-group","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"2","active":"true","description":"Sets a system property that enables OneAPI for Profanity and Dynamic Translation for Agent Chat","sys_overrides":"","sys_updated_on":"2022-12-08 20:05:11","sys_domain_path":"/","script":"gs.info(\"Starting update of Enable OneApi\");\n\nvar systemPropertyGr = new GlideRecord(\"sys_properties\");\nsystemPropertyGr.addQuery(\"name\",\"com.glide.cs.one.api.disabled\");\nsystemPropertyGr.query();\nif(!systemPropertyGr.next()) {\n  systemPropertyGr.setValue(\"name\",\"com.glide.cs.one.api.disabled\");\n  systemPropertyGr.setValue(\"value\", false);\n  systemPropertyGr.setValue(\"type\", \"boolean\");\n  systemPropertyGr.insert();\n} else if (systemPropertyGr.value && systemPropertyGr.sys_updated_by == \"system\") {\n  systemPropertyGr.setValue(\"value\", false);\n  systemPropertyGr.update();\n}\n\ngs.info(\"Ending update of Enable OneApi\");","sys_class_name":"sysevent_script_action","sys_id":"db4e730fb7231110151622408e11a95a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sysevent_script_action_db4e730fb7231110151622408e11a95a","sys_updated_by":"admin","sys_created_on":"2022-12-08 17:48:06","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Enable OneAPI for Profanity and Dynamic ","event_name":"system.upgraded","sys_name":"Enable one api","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-06-04 01:00:14","sys_domain_path":"/","script":"new sn_ex_emp_fd.PortalPerformanceStatsManager().disableLogging();","sys_class_name":"sysevent_script_action","sys_id":"db977582072a021063aa5fa2bfd30086","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4f1782b511863010d3c9cf6239244623","value":"4f1782b511863010d3c9cf6239244623"},"sys_update_name":"sysevent_script_action_db977582072a021063aa5fa2bfd30086","sys_updated_by":"admin","sys_created_on":"2024-06-04 01:00:00","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Disable Performance Stats","event_name":"sn_ex_emp_fd.disable.perf.stat.logging","sys_name":"Disable Performance Stats","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/4f1782b511863010d3c9cf6239244623","value":"4f1782b511863010d3c9cf6239244623"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2025-04-01 17:53:15","sys_domain_path":"","script":"var SCHEDULED_UPDATE_ACTIVATION = \"b160fd2953503110a8edddeeff7b1220\";\nvar gr = new GlideRecord(\"sysauto_script\");\nif (gr.get(SCHEDULED_UPDATE_ACTIVATION))\n    gs.executeNow(gr);\n\nnew global.CriticalUpdateUtil().cancelPreviousPBAfterUpgrade();","sys_class_name":"sysevent_script_action","sys_id":"dbc0c9a353d03110a8edddeeff7b12ca","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/983e67b304752210559073c06a02f755","value":"983e67b304752210559073c06a02f755"},"sys_update_name":"sysevent_script_action_dbc0c9a353d03110a8edddeeff7b12ca","sys_updated_by":"admin","sys_created_on":"2023-08-02 20:18:04","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Execute Critical Update Activation","event_name":"system.upgraded","sys_name":"Execute Critical Update Activation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-11-09 11:37:13","sys_domain_path":"","script":"var processId = event.parm1;\nnew global.PwdExpirationUtils().deactivateExpirationRecords(processId);","sys_class_name":"sysevent_script_action","sys_id":"dc22900853f330106bdaddeeff7b1244","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_dc22900853f330106bdaddeeff7b1244","sys_updated_by":"admin","sys_created_on":"2021-11-08 10:48:18","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"De-activate process records","event_name":"pwd.expiration.deactivate_records","sys_name":"De-activate process records","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2010-07-16 17:54:15","sys_domain_path":"","script":"var rot = new GlideRecord('sys_table_rotation');\r\nif (rot.isValid()) {\r\n   var tu = new SNC.TableRotationUtil();\r\n   if (tu)\r\n      tu.synchronize();\r\n}\r\n","sys_class_name":"sysevent_script_action","sys_id":"dc25b38e0a0a0bbf0025fd4103af5858","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/ed836fb304312210559073c06a02f704","value":"ed836fb304312210559073c06a02f704"},"sys_update_name":"sysevent_script_action_dc25b38e0a0a0bbf0025fd4103af5858","sys_updated_by":"admin","sys_created_on":"2010-07-16 16:45:45","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Check Rotations","event_name":"system.upgraded","sys_name":"Check Rotations","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-10-23 18:35:16","sys_domain_path":"/","script":"var LAYOUT_BOUND_TABLE = \"sys_ux_layout_bounds\";\nvar MACROPONENT = \"macroponent\";\nvar BOUNDS = \"bounds\";\n\npersistBounds(event);\n\nfunction persistBounds(event) {\n\tvar bounds = JSON.parse(event.parm1) || [];\n\tvar gr = new GlideRecord(LAYOUT_BOUND_TABLE);\n\tif (!gr.isValid()) return;\n\tbounds.forEach(bound => {\n\t\tvar macroponentId = bound.macroponentSysId;\n\t\tvar currentBounds = bound.bounds || {};\n\t\tvar boundRecord = new GlideRecord(LAYOUT_BOUND_TABLE);\n\t\tif (boundRecord.get(MACROPONENT, macroponentId)) {\n\t\t\tvar existingBounds = JSON.parse(boundRecord.getValue(BOUNDS));\n\t\t\texistingBounds = {\n\t\t\t\t...existingBounds,\n\t\t\t\t...currentBounds\n\t\t\t};\n\t\t\tboundRecord.setValue(BOUNDS, JSON.stringify(existingBounds));\n\t\t\tboundRecord.update();\n\t\t} else {\n\t\t\tboundRecord.setValue(MACROPONENT, macroponentId);\n\t\t\tboundRecord.setValue(BOUNDS, JSON.stringify(currentBounds));\n\t\t\tboundRecord.insert();\n\t\t}\n\t});\n}","sys_class_name":"sysevent_script_action","sys_id":"df310fab43d112106113970c3fb8f212","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/f193e7f304312210559073c06a02f725","value":"f193e7f304312210559073c06a02f725"},"sys_update_name":"sysevent_script_action_df310fab43d112106113970c3fb8f212","sys_updated_by":"admin","sys_created_on":"2024-10-23 15:00:44","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Persist Layout bounds for a macroponent","event_name":"uxf.persist.layout_bounds","sys_name":"Persist Layout bounds for a macroponent","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.sla'","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '508a4938b7601010a4fbfa13ee11a990, 0df8c5f4b7601010a4fbfa13ee11a9c6, ea8a8178b7601010a4fbfa13ee11a942, 7bc741f4b7601010a4fbfa13ee11a9c8, b98a4938b7601010a4fbfa13ee11a939');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"df56834eb70120104c45f2b1de11a93e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/5d19e7b704f12210559073c06a02f7da","value":"5d19e7b704f12210559073c06a02f7da"},"sys_update_name":"sysevent_script_action_df56834eb70120104c45f2b1de11a93e","sys_updated_by":"admin","sys_created_on":"2020-12-14 15:58:04","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- SLA","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- SLA","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-11-02 06:55:09","sys_domain_path":"/","script":"var util = new sn_cmdb_ws.CMDBWorkspaceUtil();\nif (util.isCMDBArchiveRuleChunk(event.instance)) {\n\tutil.updateFeatureRuntimeAttribute();\n\tgs.debug('CI archived, trigger CMDB Workspace query full scan');\n}","sys_class_name":"sysevent_script_action","sys_id":"dff139ff7702b110ee0d0cc2fa5a9934","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sysevent_script_action_dff139ff7702b110ee0d0cc2fa5a9934","sys_updated_by":"admin","sys_created_on":"2023-10-29 18:24:03","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update WS Runtime Attribute on Archive","event_name":"archive.chunk.completed","sys_name":"Update WS Runtime Attribute on Archive","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-11-14 23:36:53","sys_domain_path":"","script":"var isV2 = gs.getProperty('glide.services.dish_v2');\nif (isV2 == 'true') {\n\tSNC.GlideServiceEndpointUpdater.process();\n} else {\n\tnew SNC.GlideServiceStatus().checkAllServicesStatus();\n}","sys_class_name":"sysevent_script_action","sys_id":"e0744ddf23871010e9d4f4c947bf658d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/4e646fbb04312210559073c06a02f721","value":"4e646fbb04312210559073c06a02f721"},"sys_update_name":"sysevent_script_action_e0744ddf23871010e9d4f4c947bf658d","sys_updated_by":"admin","sys_created_on":"2020-09-09 17:38:23","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Check Glide Services Status","event_name":"plugin.activated","sys_name":"Check Glide Services Status","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"7","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-03-20 21:32:06","sys_domain_path":"/","script":"new sn_entitlement.SubscriptionStateUtils().report();","sys_class_name":"sysevent_script_action","sys_id":"e1f25aeaffb83110d185612a453bf17e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bcadabf277f311109c62f5f3cb5a992a","value":"bcadabf277f311109c62f5f3cb5a992a"},"sys_update_name":"sysevent_script_action_e1f25aeaffb83110d185612a453bf17e","sys_updated_by":"admin","sys_created_on":"2023-08-24 20:11:13","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"report.entitlement.source","event_name":"sn_entitlement.report.entitlement.source","sys_name":"report.entitlement.source","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/bcadabf277f311109c62f5f3cb5a992a","value":"bcadabf277f311109c62f5f3cb5a992a"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"7","active":"true","description":"","sys_overrides":"","sys_updated_on":"2018-02-23 18:33:28","sys_domain_path":"","script":"new RecipientsListApi().buildRecipientsListForPublication(current.getUniqueValue(), event.parm1);\n\n","sys_class_name":"sysevent_script_action","sys_id":"e3f97977c3401300e7c7d44d81d3ae95","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0fdd6483d72302004f1e82285e61033a","value":"0fdd6483d72302004f1e82285e61033a"},"sys_update_name":"sysevent_script_action_e3f97977c3401300e7c7d44d81d3ae95","sys_updated_by":"admin","sys_created_on":"2018-02-09 22:57:16","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Referesh Recipient List for Publication","event_name":"sn_publications.build_rl_publication","sys_name":"Referesh Recipient List for Publication","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/0fdd6483d72302004f1e82285e61033a","value":"0fdd6483d72302004f1e82285e61033a"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"9","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-01-08 18:20:06","sys_domain_path":"/","script":"(new CMDBWsDMExclusionListAccessor()).addCIToExclusionListUsingQueryFilter(event.parm1, JSON.parse(event.parm2));","sys_class_name":"sysevent_script_action","sys_id":"e4d0493177af7110bac410ed9f5a998b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_update_name":"sysevent_script_action_e4d0493177af7110bac410ed9f5a998b","sys_updated_by":"admin","sys_created_on":"2024-01-05 23:09:46","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Add Policy Exclusion List","event_name":"sn_cmdb_ws.addexclusionlistrecords","sys_name":"Add Policy Exclusion List","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/c8ab76825371201032b7ddeeff7b1280","value":"c8ab76825371201032b7ddeeff7b1280"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"24","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-02-28 23:42:55","sys_domain_path":"/","sys_class_name":"sysevent_script_action","sys_id":"e567f5ba97e8c61057b0697bf5ac4af2","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/47401582b7a6b9501e8f827b9e11a913","value":"47401582b7a6b9501e8f827b9e11a913"},"sys_update_name":"sysevent_script_action_e567f5ba97e8c61057b0697bf5ac4af2","sys_updated_by":"admin","sys_created_on":"2024-02-27 22:45:07","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"MIF run retry ","event_name":"sn_mif.Retry","sys_name":"MIF run retry ","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/47401582b7a6b9501e8f827b9e11a913","value":"47401582b7a6b9501e8f827b9e11a913"},"sys_created_by":"admin","order":"100","sys_policy":"protected"},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-09-23 11:02:10","sys_domain_path":"","script":"(function(event) {\n\tvar changeSysId = event.instance;\n\tif (!changeSysId)\n\t\treturn;\n\n\tvar changeGr = new GlideRecord(\"change_request\");\n\tif (!changeGr.get(changeSysId) || changeGr.chg_model.nil())\n\t\treturn;\n\n\tvar changeModel = new ChangeModel(changeGr.chg_model.getRefRecord());\n\tif (changeModel.applyAutomaticTransition(changeGr))\n\t\tchangeGr.update();\n})(event);","sys_class_name":"sysevent_script_action","sys_id":"e639068553d3101034d1ddeeff7b1239","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/323ca7f704352210559073c06a02f7ad","value":"323ca7f704352210559073c06a02f7ad"},"sys_update_name":"sysevent_script_action_e639068553d3101034d1ddeeff7b1239","sys_updated_by":"admin","sys_created_on":"2020-09-15 09:08:15","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Evaluate Change Model for Change Request","event_name":"change_model.evaluate","sys_name":"Evaluate Change Model for Change Request","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.agent_workspace.itsm'","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '8294a074b7201010a4fbfa13ee11a9e6');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"e64c4702b74120104c45f2b1de11a9b6","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/06e4ef0d87130300ada4046787cb0b08","value":"06e4ef0d87130300ada4046787cb0b08"},"sys_update_name":"sysevent_script_action_e64c4702b74120104c45f2b1de11a9b6","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:23:57","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- AgentWS ITSM","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- AgentWS ITSM","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/06e4ef0d87130300ada4046787cb0b08","value":"06e4ef0d87130300ada4046787cb0b08"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":{"link":"https://dev315171.service-now.com/api/now/v1/table/sysrule/global","value":"global"},"sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"\n\t\t\tvar cmdbUtil = new SNC.CMDBUtil();\n\t\t\tcmdbUtil.processCIChange(event, current);\n\t\t","sys_class_name":"sysevent_script_action","sys_id":"e69032940a0a0aa700e5e175da0cbf21","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/6535677304712210559073c06a02f74f","value":"6535677304712210559073c06a02f74f"},"sys_update_name":"sysevent_script_action_e69032940a0a0aa700e5e175da0cbf21","sys_updated_by":"system","sys_created_on":"2007-04-12 16:11:21","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"relationship.rollup","event_name":"relationship.rollup","sys_name":"relationship.rollup","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":{"link":"https://dev315171.service-now.com/api/now/v1/table/sysrule/global","value":"global"},"sys_updated_on":"2025-06-05 05:42:27","sys_domain_path":"","script":"\n\t\t\tvar cmdbUtil = new SNC.CMDBUtil();\n\t\t\tcmdbUtil.processRelChange(event, current, event.parm1, event.parm2);\n\t\t","sys_class_name":"sysevent_script_action","sys_id":"e6b13b3d0a0a0aa70034bb91a4fa75cb","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/6535677304712210559073c06a02f74f","value":"6535677304712210559073c06a02f74f"},"sys_update_name":"sysevent_script_action_e6b13b3d0a0a0aa70034bb91a4fa75cb","sys_updated_by":"system","sys_created_on":"2007-04-12 16:47:26","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"relationship.rollup.relationship","event_name":"relationship.rollup.relationship","sys_name":"relationship.rollup.relationship","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"glide.maint","order":"","sys_policy":""},{"condition_script":"event.parm1 == 'com.glide.currency2'","sys_mod_count":"1","active":"false","description":"","sys_overrides":"","sys_updated_on":"2022-01-04 12:34:56","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\nif (aclGR.get('39f25eb4dbbd1010542ae8cd13961952')) {\n    aclGR.setValue('active', true);\n    aclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"e7d2678ab7012010e6e2fe91de11a948","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/de156b3304712210559073c06a02f7fc","value":"de156b3304712210559073c06a02f7fc"},"sys_update_name":"sysevent_script_action_e7d2678ab7012010e6e2fe91de11a948","sys_updated_by":"admin","sys_created_on":"2020-12-14 18:11:58","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view_acl for currency2","event_name":"plugin.activated","sys_name":"Activate report_view_acl for currency2","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-19 13:44:44","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.password_expiration_reminder', false)) {\n    createExpirationRecords();\n}\n\nfunction createExpirationRecords() {\n    var pwdExpirationUtil = new global.PwdExpirationUtils();\n    var groupProcessGr = new GlideRecord(\"pwd_map_proc_to_group\");\n    groupProcessGr.get(event.parm1);\n\n    var userGroup = groupProcessGr.user_group;\n    var process = groupProcessGr.process;\n\n    if (process.active && process.send_expiration_reminder) {\n        try {\n            var userGroupMemberGr = pwdExpirationUtil.getAllUsersForGroup([userGroup]);\n\n            while (userGroupMemberGr.next()) {\n                pwdExpirationUtil.updatePasswordExpirationDetails(userGroupMemberGr.user, process);\n            }\n        } catch (ex) {\n            gs.error(\"[Script action: Create Expiration records for group-proc for process_id \" + process + \" and group_id \" + userGroup + \"] execution error - \" + ex);\n        }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"e7d3986a531330106bdaddeeff7b1264","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_e7d3986a531330106bdaddeeff7b1264","sys_updated_by":"admin","sys_created_on":"2021-10-22 08:48:09","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Expiration records for group-proc","event_name":"pwd_map_proc_to_group.insert","sys_name":"Create Expiration records for group-proc","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"8","active":"true","description":"Calculates total usage for current Instance","sys_overrides":"","sys_updated_on":"2024-04-25 05:49:53","sys_domain_path":"/","script":"\nnew CloudStorageProcessor().calculateTotalUsage();","sys_class_name":"sysevent_script_action","sys_id":"ea7b64c543b10210243f9cd82ab8f22d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9641d1d043110210243f9cd82ab8f2ab","value":"9641d1d043110210243f9cd82ab8f2ab"},"sys_update_name":"sysevent_script_action_ea7b64c543b10210243f9cd82ab8f22d","sys_updated_by":"maint","sys_created_on":"2024-04-24 10:03:06","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Calculate Total Usage for Instance","event_name":"sn_storage.calculate_usage","sys_name":"Calculate Total Usage for Instance","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/9641d1d043110210243f9cd82ab8f2ab","value":"9641d1d043110210243f9cd82ab8f2ab"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"4","active":"false","description":"","sys_overrides":"","sys_updated_on":"2025-06-05 07:34:53","sys_domain_path":"","script":"var scriptPrefix = \"fix_security_issue_sc_shopping_cart_deprecated\";\ngs.info(scriptPrefix + \"Started executing the script\");\nif (!(GlideCollisionDetector.get().containsKey(\"sp_widget_f3336978dbaca2007f3bf5131f9619ec\")))\n\taddACLChecks();\n\ngs.info(scriptPrefix + \"Ended executing the script\");\n\nfunction addACLChecks() {\nvar script = \"(function() {\\n var m = data.msgs = {};\\n m.createdMsg = gs.getMessage(\\\"Created\\\");\\n m.trackMsg = gs.getMessage(\\\"track using 'Requests' in the header or\\\");\\n m.clickMsg = gs.getMessage(\\\"click here to view\\\");\\n m.cartEmptiedMsg = gs.getMessage(\\\"Your cart has been emptied\\\");\\n m.itemRemovedMsg = gs.getMessage(\\\"has been removed from your cart\\\");\\n m.updatedMsq = gs.getMessage(\\\"Updated\\\");\\n\\n m.quantityToMsg = gs.getMessage(\\\"quantity to\\\");\\n m.clearCartConfirmationMsg = gs.getMessage(\\\"Are you sure you want to empty your cart?\\\");\\n var userID = gs.getUser().getID();\\n var cart = new SPCart(input.cartName, userID);\\n if (input && input.action === \\\"edit_item\\\") {\\n data.editVariablesModal = $sp.getWidget('widget-modal', {embeddedWidgetId: 'sp-variable-editor', embeddedWidgetOptions: {sys_id: input.itemID, table: \\\"sc_cart_item\\\", showItemTitle: true, isOrdering: true}});\\n return;\\n } if (input && input.action === \\\"update_quantity\\\") {\\n var cartItemGR = new GlideRecord(\\\"sc_cart_item\\\");\\n if (cartItemGR.get(input.itemID) && cartItemGR.canWrite()) {\\n cartItemGR.setValue(\\\"quantity\\\", input.quantity);\\n cartItemGR.update();\\n } } if (input && input.action === \\\"checkout\\\") { cart.setSpecialInstructions(input.additionalDetails);\\n cart.setRequestedFor(input.cart.requested_for);\\n cart.setDeliveryAddress(input.deliverTo);\\n var request = cart.placeOrder();\\n data.requestData = { number: request.getValue(\\\"number\\\"), table: request.getTableName(), sys_id: request.getUniqueValue() };\\n cart.setSpecialInstructions(\\\"\\\");\\n cart.setRequestedFor(userID);\\n cart.setDeliveryAddress(\\\"\\\");\\n } if (input && input.action === \\\"remove_item\\\") {\\n var itemGR = new GlideRecord('sc_cart_item');\\n if (itemGR.get(input.removeItemID) && itemGR.canDelete()) itemGR.deleteRecord();\\n } if (input && input.action === \\\"clear_cart\\\") { cart.clearCart();\\n } if (input && input.action === \\\"save_cart\\\") {\\n var newCart = new SPCart(input.newCartName, userID);\\n newCart.loadCart(cart.getCartID());\\n } data.sys_properties = { twostep_checkout: gs.getProperty(\\\"glide.sc.checkout.twostep\\\", \\\"false\\\") == 'true' };\\n var cartID = cart.getCartID();\\n data.saveCartModal = $sp.getWidget('widget-modal', {embeddedWidgetId: 'sc_save_bundle', embeddedWidgetOptions: {}});\\n data.cart = cart.getCartObj();\\n data.cartItems = cart.getItems();\\n })();\";\n\n\tvar gr = new GlideRecord(\"sp_widget\");\n\tif (gr.get(\"f3336978dbaca2007f3bf5131f9619ec\")) {\n\t\tgr.setWorkflow(false);\n\t\tgr.setUseEngines(false);\n\t\tgr.setValue(\"script\", script);\n\t\tgr.update();\n\t}\n\n\tvar action = new GlideRecord(\"sysevent_script_action\");\n\tif (action.get(\"ebaea1cf9cd25210f87722436a15f78b\")) {\n\t\taction.setValue(\"active\", false);\n\t\taction.update();\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"ebaea1cf9cd25210f87722436a15f78b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d1c9ebbb04f12210559073c06a02f719","value":"d1c9ebbb04f12210559073c06a02f719"},"sys_update_name":"sysevent_script_action_ebaea1cf9cd25210f87722436a15f78b","sys_updated_by":"system","sys_created_on":"2024-12-10 12:56:43","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Security fix for SC Shopping Cart Dep","event_name":"system.upgraded","sys_name":"Security fix for SC Shopping Cart Dep","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"maint","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"4","active":"true","description":"","sys_overrides":"","sys_updated_on":"2019-10-10 02:29:27","sys_domain_path":"","script":"SNC.UAPlatLicUtils.handleCustomTableInsert(event.parm1.toString());","sys_class_name":"sysevent_script_action","sys_id":"ebebf7c36710001017f141119585efe3","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e36423fb04312210559073c06a02f798","value":"e36423fb04312210559073c06a02f798"},"sys_update_name":"sysevent_script_action_ebebf7c36710001017f141119585efe3","sys_updated_by":"admin","sys_created_on":"2019-10-09 23:17:24","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Insert custom table in UA inventory","event_name":"ua.customtable.insert","sys_name":"Insert custom table in UA inventory","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"101","sys_policy":"read"},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-10-12 00:04:29","sys_domain_path":"","script":"cleanUpSMBConnections();\n\nfunction cleanUpSMBConnections() {\n    var sourceIP;\n    var midServerName;\n    var midRecord;\n    var discoveryDeviceHistorySysId = event.parm1;\n    var discoveryStatusSysId = event.parm2;\n\t\n    var deviceHistoryGr = new GlideRecord('discovery_device_history');\n    deviceHistoryGr.addQuery('sys_id', discoveryDeviceHistorySysId);\n    deviceHistoryGr.query();\n    if (!deviceHistoryGr.next()) {\n        gs.debug(\"Query to discovery_device_history returned no results.\");\n        return;\n    }\n\n    if (!deviceHistoryGr.cmdb_ci.os.startsWith('Windows')) {\n        gs.debug(\"SMB Cleanup not required for non Windows devices.\");\n        return;\n    }\n\n    sourceIP = deviceHistoryGr.getValue('source');\n    if (!sourceIP) {\n        gs.logError(\"Could not fetch target IP from discovery_device_history.sys_id=\" + discoveryDeviceHistorySysId);\n\t\treturn;\n\t}\n\n    midServerName = getMidServerName(sourceIP, discoveryStatusSysId);\n    if (!midServerName) {\n        return;\n    }\n\t\n\tmidRecord = getMIDRecord(midServerName);\n    if (!(midRecord && midRecord.ipAddress && midRecord.sysID)) {\n        gs.logError(\"Could not fetch mid_server info\");\n\t\treturn;\n\t}\n\t\n\tif (!shouldTriggerProbe(midRecord.sysID)) {\n\t\tgs.debug(\"SMB Cleanup probe not enabled for \" + midServerName + \". Launch abandoned.\");\n\t\treturn;\n\t}\n    try {\n        triggerProbe(sourceIP, midServerName, midRecord.ipAddress, discoveryStatusSysId);\n    } catch (e) {\n        gs.logError(\"Caught exeption while triggering SMB probe -  \" + e.toString());\n    }\n}\n\nfunction getMidServerName(sourceIP, discoveryStatusSysId) {\n    var midServerName;\n\n    var gr = new GlideRecord('ecc_queue');\n    gr.addQuery('source', sourceIP);\n    gr.addQuery('agent_correlator', discoveryStatusSysId); //disco status\n\tgr.setLimit(1);\n    gr.query();\n\n    if (gr.next()) {\n        midServerName = gr.getValue('agent');\n    } else {\n        gs.logError(\"Could not fetch midServerName from ecc_queue for source IP = \" + sourceIP + \", discovery_status.sys_id = \" + discoveryStatusSysId);\n        return midServerName;\n    }\n\t\t\n    // DEF0319866: Removing 'mid.server.' prefix explicitly from MID name. An ecc_queue record for an\n    //  agent which does not begin with that prefix does not represent a MID (e.g. Help Desk agent),\n    //  so return nothing in that case.\n    var midServerPrefix = 'mid.server.';\n    return midServerName.startsWith(midServerPrefix) ? midServerName.replace(midServerPrefix,'') : null;\n}\n\nfunction getMIDRecord(midServerName) {\n\tvar mid = {};\n\tvar gr = new GlideRecord('ecc_agent');\n\tgr.query('name', midServerName);\n\tif (gr.next()) {\n\t\tmid.ipAddress = gr.getValue('ip_address');\n\t\tmid.sysID = gr.getUniqueValue();\n\t}\n\treturn mid;\n}\n\nfunction shouldTriggerProbe(midSysID) {\n\tvar gr = new GlideRecord('ecc_agent_property');\n\tgr.addNullQuery('ecc_agent').addOrCondition('ecc_agent', midSysID);\n\tgr.addQuery('name', 'mid.smb.enable_force_close');\n\tgr.query();\n\tvar val = gr.next() ? gr.getValue('value') : false;\n\treturn val == 'true';\n}\n\nfunction triggerProbe(sourceIP, midServerName, midIPAddress, correlator) {\n    var probe = SncProbe.get('Windows - Cleanup SMB Sessions');\n    probe.setSource(sourceIP);\n    probe.addParameter('midIPAddress', midIPAddress);\n    probe.setCorrelator(correlator);\n\n    gs.log(\"Triggering 'Windows - Cleanup SMB Sessions' Probe for midServerName = \" + midServerName);\n    probe.create(midServerName);\n}","sys_class_name":"sysevent_script_action","sys_id":"ec79edc9216a2010f87777b973f63ede","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/91d8237704f12210559073c06a02f73b","value":"91d8237704f12210559073c06a02f73b"},"sys_update_name":"sysevent_script_action_ec79edc9216a2010f87777b973f63ede","sys_updated_by":"bartholome.morantte","sys_created_on":"2021-05-25 23:42:46","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SMB Cleanup","event_name":"discovery.device.complete","sys_name":"SMB Cleanup","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"nisan.barzion","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-03-28 11:41:13","sys_domain_path":"","script":"function updateStats() {\n\tvar dashSysId = event.instance;\n\tvar userSysId = event.user_id;\n\tvar executionTimestamp = event.sys_created_on;\n\tvar executionDuration = event.parm1;\n\tvar dashboardStats = new SNC.DashboardStats();\n\tdashboardStats.updateStats(dashSysId, userSysId, executionTimestamp, executionDuration, event.parm2);\n}\nupdateStats();","sys_class_name":"sysevent_script_action","sys_id":"ed3905e2b7f52110997a9f78ce11a997","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/411bab3304352210559073c06a02f767","value":"411bab3304352210559073c06a02f767"},"sys_update_name":"sysevent_script_action_ed3905e2b7f52110997a9f78ce11a997","sys_updated_by":"admin","sys_created_on":"2023-03-28 11:41:13","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Dashboard Stat","event_name":"dashboard.view","sys_name":"Dashboard Stat","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"8","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-09-17 09:36:02","sys_domain_path":"","script":"var fixNotes = \"[code]\" + event.parm1 + \"[/code]\";\nvar incident = new GlideRecord('incident');\nincident.addQuery('problem_id', current.getUniqueValue());\nincident.addQuery('state', '<', IncidentState.RESOLVED);\nincident.query();\nwhile(incident.next()) {\n\t\tincident.work_notes.setJournalEntry(fixNotes);\n\t\tincident.update();\n}\n","sys_class_name":"sysevent_script_action","sys_id":"eda3a490534123004247ddeeff7b123d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/d81b6b3304352210559073c06a02f76e","value":"d81b6b3304352210559073c06a02f76e"},"sys_update_name":"sysevent_script_action_eda3a490534123004247ddeeff7b123d","sys_updated_by":"admin","sys_created_on":"2018-10-05 08:54:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Copy Prb fix to Inc work notes","event_name":"communicate.fix","sys_name":"Copy Prb fix to Inc work notes","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"3","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-08-06 11:20:21","sys_domain_path":"","script":"var script=\"var input = \"+event.parm1+\";new SNC.XMRSignalCalculator(JSON.stringify(input)).runXMRSignalCalculator();\";\nvar gr = new GlideRecord('sys_trigger');\ngr.initialize();\ngr.setValue(\"trigger_type\", 0); //trigger_type 0 is for Run Once.\ngr.setValue(\"script\", script);\ngr.setValue(\"job_id\", \"81c92ce9c0a8016400e5f0d2f784ea78\"); //set job_id for RunScriptJob\ngr.setValue(\"name\", \"CalculateXMRSignals\");\nvar sysId = gr.insert();\ngs.info(\"sys_trigger record CalculateXMRSignals inserted for signal calculation with sys_id:\" + sysId);\n","sys_class_name":"sysevent_script_action","sys_id":"ee94802e5b203010c1e73eaa3d81c740","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/c5dd6b3304752210559073c06a02f77a","value":"c5dd6b3304752210559073c06a02f77a"},"sys_update_name":"sysevent_script_action_ee94802e5b203010c1e73eaa3d81c740","sys_updated_by":"admin","sys_created_on":"2021-06-07 14:48:14","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Trigger XMR Signal Calculation","event_name":"pa.dc.collect.predictive.completed","sys_name":"Trigger XMR Signal Calculation","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"7","active":"true","description":"","sys_overrides":"","sys_updated_on":"2017-11-09 22:33:17","sys_domain_path":"","script":"var oldLimit = event.parm1;\nvar newLimit = event.parm2;\n\ndeleteOlderPwdHistoryEntries(oldLimit, newLimit);\n\nfunction deleteOlderPwdHistoryEntries(oldLimit, newLimit) {\n\tvar gr = new GlideRecord('pwd_history');\n\tgr.addQuery('order', '>', newLimit);\n\tgr.query();\n\tgr.deleteMultiple();\n}\n\n","sys_class_name":"sysevent_script_action","sys_id":"efc8fd579f020300e78d317f842e70d3","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_efc8fd579f020300e78d317f842e70d3","sys_updated_by":"admin","sys_created_on":"2017-10-31 23:28:27","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Credential store history limit change","event_name":"pwd.credStore.history.limit.decrease","sys_name":"Credential store history limit change","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"13","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-04-06 05:27:59","sys_domain_path":"","script":"gs.log(event.parm1 + ': script action started', 'on_call_manage_members');\n\nif (event.parm1 == 'add')\n\tnew OnCallMemberUtils().handleAddMember(current);\nelse if (event.parm1 == 'remove')\n    new OnCallMemberUtils().handleRemoveUser(current);\nelse if (event.parm1 == 'move')\n\tnew OnCallMemberUtils().handleMoveMember(current);\nelse\n\tgs.error('INVALID VALUE FOR PARM1. Accepted values are add, remove, move');\n","sys_class_name":"sysevent_script_action","sys_id":"f0f26670539360109d03ddeeff7b1248","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/8c6ca73b04352210559073c06a02f754","value":"8c6ca73b04352210559073c06a02f754"},"sys_update_name":"sysevent_script_action_f0f26670539360109d03ddeeff7b1248","sys_updated_by":"admin","sys_created_on":"2021-04-01 12:48:49","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Manage Members","event_name":"on_call_manage_members","sys_name":"Manage Members","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-10-07 19:11:33","sys_domain_path":"","script":"reactivateSuggestions();\n\n/**\n * Reactivate suggestions previously excluded by phrase and language.\n */\nfunction reactivateSuggestions(){\n\tvar sysId = event.parm1;\n\n\tvar svc = new SearchSuggestionService();\n\tsvc.reactivateSuggestions(sysId);\n}","sys_class_name":"sysevent_script_action","sys_id":"f47fa2f787003300f917e55936cb0b2b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/0e99ab7b04f12210559073c06a02f745","value":"0e99ab7b04f12210559073c06a02f745"},"sys_update_name":"sysevent_script_action_f47fa2f787003300f917e55936cb0b2b","sys_updated_by":"admin","sys_created_on":"2019-03-14 19:11:21","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Reactivate Search Suggestions","event_name":"search_suggestion_blacklist.deleted","sys_name":"Reactivate Search Suggestions","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-05-03 13:04:08","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.enrollment_snapshot', true)) {\n    var pwdExpirationUtils = new global.PwdExpirationUtils();\n    var pwdEnrollSnapshotUtil = new global.PwdEnrollSnapshotUtil();\n    createOrUpdateEnrollmentSnapshots();\n}\n\nfunction createOrUpdateEnrollmentSnapshots() {\n    var groupSysId = event.parm1;\n    var previousParentGroupId = event.parm2;\n\n    try {\n        var groupGr = new GlideRecord(\"sys_user_group\");\n        if (groupGr.get(groupSysId) && pwdEnrollSnapshotUtil.isActiveGroup(groupSysId)) {\n            var parentGroupId = groupGr.getValue(\"parent\");\n            //Since its a before update event so we are making sure the update operation was succeded\n\n            if (parentGroupId != previousParentGroupId) {\n                //get all the users associated with this group & its sub groups\n                var userGroupMemberGr = pwdExpirationUtils.getAllUsersForGroup([groupSysId]);\n\n                //first delete enrollment snaps for the previous parent group\n                deleteEnrollmentSnapshotForParent(userGroupMemberGr, previousParentGroupId);\n                //create enrollment snaps for the current parent group\n                createEnrollmentSnapshotForParent(userGroupMemberGr, parentGroupId);\n            }\n        }\n    } catch (ex) {\n        gs.error(\"[Script action: Create enrollment snaps for a group - \" + groupSysId + \"]. execution error - \" + ex);\n    }\n}\n\nfunction deleteEnrollmentSnapshotForParent(userGroupMemberGr, parentGroupId) {\n    if (!parentGroupId)\n        return;\n\n    var arrayUtil = new ArrayUtil();\n    var pwdVerificationManager = new SNC.PwdVerificationManager();\n\n    //get all the processes associated with the current parent group\n    var parentProcesses = pwdExpirationUtils.getProcessesAssociatedWithAGroup(parentGroupId);\n    // get all verifications for parent processes\n    var parentVerifications = pwdEnrollSnapshotUtil.getManualVerificationsAccociatedWithProcesses(parentProcesses);\n\n\n    while (userGroupMemberGr.next()) {\n        //Getting all the remaining entitled verification for that user (excluding the verification related to the group with sys_id as userGroupSysId)\n        var currentVerifications = pwdVerificationManager.getVerificationIdsForUser(userGroupMemberGr.user);\n\n        for (var index = 0; index < parentVerifications.length; index++) {\n            //if the parentVerification is not in currentVerification then delete the record.\n            if (!arrayUtil.contains(currentVerifications, parentVerifications[index])) {\n                pwdEnrollSnapshotUtil.deleteEnrollmentSnapshotsByUserIdAndVerification(userGroupMemberGr.user, parentVerifications[index]);\n            }\n        }\n    }\n}\n\nfunction createEnrollmentSnapshotForParent(userGroupMemberGr, parentGroupId) {\n    if (!parentGroupId || !pwdEnrollSnapshotUtil.isActiveGroup(parentGroupId))\n        return;\n\n    //get all the processes associated with the current parent group\n    var parentProcesses = pwdExpirationUtils.getProcessesAssociatedWithAGroup(parentGroupId);\n    // get all verifications for parent processes\n    var parentVerifications = pwdEnrollSnapshotUtil.getManualVerificationsAccociatedWithProcesses(parentProcesses);\n\n    while (userGroupMemberGr.next()) {\n        for (var index = 0; index < parentVerifications.length; index++) {\n            // if there is no verification for userGroupMemberGr.user and parentVerifications pair, then create records in snapshot table\n            pwdEnrollSnapshotUtil.createOrUpdateEnrollmentSnapshot(parentVerifications[index], userGroupMemberGr.user);\n        }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"f5b348fa43c22110d68db0e245b8f2db","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_f5b348fa43c22110d68db0e245b8f2db","sys_updated_by":"admin","sys_created_on":"2023-04-10 11:35:01","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Enrollment snaps for a group","event_name":"sys_user_group.parent_update","sys_name":"Create Enrollment snaps for a group","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"128","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-08-19 19:30:00","sys_domain_path":"","script":"/* Do the following if the MID server just went down */\n\nArrayPolyfill;\nvar NO_MID_FOUND_EXCEPTION = 'NoSuitableMidServerFoundException';\nvar LOG_SOURCE = 'MID fail over';\n\nfailOver();\n\t\nfunction failOver() {\n\tvar DEFAULT_MAX_COUNT = 25000;\n\tvar DEFAULT_TOTAL_MAX_COUNT = 1000000;\n\tvar DEFAULT_QUERY_WINDOW = 1; // days\n\n\tvar max_count = parseInt(gs.getProperty('mid_server.failover.max_count', DEFAULT_MAX_COUNT)) || DEFAULT_MAX_COUNT;\n\tvar total_max_count = parseInt(gs.getProperty('mid_server.failover.total_max_count', DEFAULT_TOTAL_MAX_COUNT)) || DEFAULT_TOTAL_MAX_COUNT;\n\tvar total_processed = parseInt(event.parm2) || 0;\n\tvar query_window = parseInt(gs.getProperty('mid_server.failover.query_window', DEFAULT_QUERY_WINDOW)) || DEFAULT_QUERY_WINDOW;\n\n\tvar currMidName = current.name+'';\n\tif ('' + event.parm2 === '_duplicate_') {\n\t\tgs.log('Skip duplicate mid_server.down event from MID server ' + currMidName, LOG_SOURCE);\n\t\treturn;\n\t}\n\n\tvar currMidId = current.sys_id+'';\n\tvar gr = new GlideRecord(\"ecc_agent\");\n\tif (gr.get(currMidId) && 'UP' == gr.status.toUpperCase()) {\n\t\tgs.log(\"Skip failover because MID server \" + currMidName + \" is Up again\", LOG_SOURCE);\n\t\treturn;\n\t}\n\n\t_debug(\"BEGIN -- MID Server \" + currMidName);\n\tvar newMidName;\n\tvar newMidNames = [];\n\tvar recCount = 0;\n\tvar agentClusterCache = new SNC.ECCAgentClusterCache();\n\tvar eccgr = queryEccQueue(currMidName, max_count, query_window);\n\t\n\ttry {\n\t\t// for each record for this mid server\n\t\tvar count = 0; \n\t\twhile (eccgr.next()) {\n\t\t\tcount += 1;\n\t\t\tif (count > max_count) {\n\t\t\t\ttotal_processed += max_count;\n\t\t\t\tif (recCount == 0) {\n\t\t\t\t\tgs.logWarning(\"Stop failover because none in the current batch of \" + max_count + \" ECC records for down MID Server \" + currMidName + \" could be reassigned\", LOG_SOURCE);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (total_processed < total_max_count) {\n\t\t\t\t\tgs.eventQueue(event.name, current, currMidName, '' + total_processed);\n\t\t\t\t\tgs.log(\"Processed total \" + total_processed + \" records from MID server \" + currMidName + \" and issued a new event for the next batch\", LOG_SOURCE);\n\t\t\t\t} else {\n\t\t\t\t\tgs.logWarning(\"Processed total \" + total_processed + \" records from MID server \" + currMidName + \". Stop failover because the max limit has been exceeded\", LOG_SOURCE);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// If probe param ECC_AGENT_SELECTOR_DETAILS param line exists in payload, extract the\n\t\t\t// JSON string param value and failover this record, else use legacy record failover.\n\t\t\t// For performance, uses a cached regex instead of a real XML parser.\n\t\t\tvar midSelectorRegex = new SNC.Regex(GlideappIECC.ECC_AGENT_SELECTOR_DETAILS_REGEX+'');\n\t\t\tvar match = midSelectorRegex.match(eccgr.payload);\n\t\t\tif (match) {\n\t\t\t\tvar json = '{' + unescapeXmlChars(match[1]) + '}';  // get json from first regex match group\n\t\t\t\tvar parser = new global.JSON();\n\t\t\t\t_debug(\"ECC queue record sys_id=\" + eccgr.sys_id + \": MID selector details =\" + json);\n\t\t\t\tvar midSelDetails = parser.decode(json);\n\t\t\t\tif (!midSelDetails) {\n\t\t\t\t\tgs.logWarning(\"ECC queue record sys_id=\" + eccgr.sys_id\n\t\t\t\t\t\t\t   + \": corrupt mid selector details in record payload.\", LOG_SOURCE);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar midSelMode = midSelDetails[GlideappIECC.ECC_AGENT_SELECTOR_MODE+''];\n\t\t\t\tvar midSelAppName = midSelDetails[GlideappIECC.ECC_AGENT_SELECTOR_APP+''];\n\t\t\t\tvar midSelClusterId = midSelDetails[GlideappIECC.ECC_AGENT_SELECTOR_CLUSTER+''];\n\t\t\t\tvar midSelCapabilities = midSelDetails[GlideappIECC.ECC_AGENT_SELECTOR_CAPABILITIES+''];\n\t\t\t\tvar midSel = new SNC.MidSelector(); \n\t\t\t\tvar newMidId;\n\t\t\t\tnewMidName = null;\n\t\t\t\tif (_debugEnabled) {\n\t\t\t\t\tvar caps = !!midSelCapabilities ? JSUtil.describeObject(midSelCapabilities) : \"null\";\n\t\t\t\t\t_debug(\"ECC queue record sys_id=\" + eccgr.sys_id + \": midSelMode=\"\n\t\t\t\t\t\t\t+ midSelMode + \", currMidName=\" + currMidName + \", midSelAppName=\"\n\t\t\t\t\t\t\t+ midSelAppName + \", midSelClusterId=\" + midSelClusterId + \", midSelCapabilities=\"\n\t\t\t\t\t\t\t+ caps);\n\t\t\t\t}\n\t\t\t\tswitch (midSelMode+'') {\n\t\t\t\t\tcase GlideappIECC.ECC_AGENT_SELECTOR_MODE_SPECIFIC_MID+'':\n\t\t\t\t\t\t_debug(\"ECC queue record sys_id=\" + eccgr.sys_id + \": select specific MID Server\");\n\t\t\t\t\t\tbreak; // no Mid reassign\n\t\t\t\t\tcase GlideappIECC.ECC_AGENT_SELECTOR_MODE_AUTO_SELECT_MID+'':\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t_debug(\"ECC queue record sys_id=\" + eccgr.sys_id + \": auto select mid server\");\n\t\t\t\t\t\t\tif (eccgr.topic == 'Shazzam') {\n\t\t\t\t\t\t\t\teccgr.state = 'error';\n\t\t\t\t\t\t\t\teccgr.error_string = 'Shazzam fail over for MID Server Selection Method Auto Select is currently not supported.  Abandoning this Shazzam and continuing the rest of discovery.';\n\t\t\t\t\t\t\t\teccgr.update();\n\t\t\t\t\t\t\t\tlogError(eccgr.agent_correlator+'', 'Shazzam fail over for MID Server Selection Method Auto Select is currently not supported.  Abandoning this Shazzam and continuing the rest of discovery.');\n\n\t\t\t\t\t\t\t\tDiscoveryStatus.updateStatusCompletedCount(eccgr.agent_correlator);\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Filter mids by application, source (IP), capabilities, and status.\n\t\t\t\t\t\t\t// For source, treat null or whitespace same.  If not an IP address or a hostname,\n\t\t\t\t\t\t\t// don't use any filter for target.\n\t\t\t\t\t\t\tvar targets = null;\n\t\t\t\t\t\t\tvar source = (!!eccgr.source) ? (eccgr.source+'').trim() : \"\";\n\t\t\t\t\t\t\tsource = source.length > 0 ? source : null;\n\t\t\t\t\t\t\tif (source != null) {\n\t\t\t\t\t\t\t\tvar ipAddress = SncIPAddressV4.getIPAddressV4Instance(source);\n\t\t\t\t\t\t\t\tif (ipAddress == null) {\n\t\t\t\t\t\t\t\t\tvar ipAddresses = SNC.MidSelector.getHostIPAddresses(source);\n\t\t\t\t\t\t\t\t\tif (ipAddresses != null)\n\t\t\t\t\t\t\t\t\t\tipAddress = ipAddresses[0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttargets = ipAddress != null ? [ipAddress] : null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_debug(\"ECC queue record sys_id=\" + eccgr.sys_id + \": targets=\"+ targets);\n\t\t\t\t\t\t\tnewMidId = midSel.selectAnyDegradedOrBetterMidServer(midSelAppName, targets, midSelCapabilities)+'';\n\t\t\t\t\t\t\tnewMidName = getMidNameFromSysId(newMidId);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// Cannot do \"if (e instanceof of Package.com...\" here, because gets security exception.\n\t\t\t\t\t\t\tif (String(e).indexOf(NO_MID_FOUND_EXCEPTION) != -1)\n\t\t\t\t\t\t\t\tgs.logWarning(\"ECC queue record sys_id=\" + eccgr.sys_id \n\t\t\t\t\t\t\t\t\t\t+ \": cannot find alternate to down MID Server \" + currMidName\n\t\t\t\t\t\t\t\t\t\t+ \" because: \" + e.getMessage(), LOG_SOURCE);\n\t\t\t\t\t\t\telse throw e;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase GlideappIECC.ECC_AGENT_SELECTOR_MODE_SPECIFIC_CLUSTER+'':\n\t\t\t\t\t\t// Assume cluster is homogeneous; so only filter mids by application and status\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t_debug(\"ECC queue record sys_id=\" + eccgr.sys_id + \": select specific cluster\");\n\t\t\t\t\t\t\tnewMidId = midSel.selectAnyDegradedOrBetterMidServerFromClusterEx(midSelAppName, midSelClusterId)+'';\n\t\t\t\t\t\t\tnewMidName = getMidNameFromSysId(newMidId);\n\t\t\t\t\t\t\tif (eccgr.topic == 'Shazzam')\n\t\t\t\t\t\t\t\tlogInfo(eccgr.agent_correlator+'', 'Shazzam probe for ' + eccgr.agent + ' is being reassigned to MID ' + newMidName);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// Cannot do \"if (e instanceof of Package.com...\" here, because gets security exception.\n\t\t\t\t\t\t\tif (String(e).indexOf(NO_MID_FOUND_EXCEPTION) != -1) {\n\t\t\t\t\t\t\t\tvar clusterGr = agentClusterCache.getBySysId(midSelClusterId);\n\t\t\t\t\t\t\t\tgs.logWarning(\"ECC queue record sys_id=\" + eccgr.sys_id\n\t\t\t\t\t\t\t\t\t\t+ \": MID Server cluster down. Cannot find alternate to down MID Server \" + currMidName\n\t\t\t\t\t\t\t\t\t\t+ \" in cluster \" + clusterGr.name+''\n\t\t\t\t\t\t\t\t\t\t+ \" (sys_id \" + midSelClusterId+ \") because: \" + e.getMessage(), LOG_SOURCE);\n\t\t\t\t\t\t\t} else throw e;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tgs.logWarning(\"ECC queue record sys_id=\" + eccgr.sys_id \n\t\t\t\t\t\t\t\t   + \": unknown MID selector mode value in record\", LOG_SOURCE);\n\t\t\t\t}\n\t\t\t} else {  // non-mid selector type legacy record\n\t\t\t\t_debug(\"ECC queue record sys_id=\" + eccgr.sys_id + \": legacy, currMidName=\" + currMidName);\n\t\t\t\tvar msc = new MIDServerCluster(current, \"Failover\");\n\t\t\t\tif (!msc.clusterExists())\n\t\t\t\t\tcontinue;\n\n\t\t\t\tnewMidName = msc.getClusterAgent();\n\t\t\t}\t\n\t\t\tif (JSUtil.nil(newMidName))\n\t\t\t\tcontinue;\n\t\t\t\n\t\t\teccgr.agent = GlideappIECC.AGENT_NAME_PREFIX + newMidName;\n\t\t\teccgr.state = \"ready\";\n\t\t\teccgr.update();\n\t\t\t_debug(\"ECC queue record sys_id=\" + eccgr.sys_id + \": newMidName=\" + newMidName + \", currMidName=\" + currMidName);\n\t\t\tif (newMidName && newMidName != currMidName) {\n\t\t\t\trecCount++;\n\t\t\t\tif (newMidNames.indexOf(newMidName) == -1 )\n\t\t\t\t\tnewMidNames.push(newMidName);\n\t\t\t}\n\t\t}\n\t\tif (newMidNames.length > 0)\n\t\t\tgs.log(recCount + \" ECC queue records for down MID Server \"\n\t\t\t\t   + currMidName + \" reassigned to \" + newMidNames.join(', '), LOG_SOURCE);\n\t} finally {\n\t\tfor (var idx = 0; idx < newMidNames.length; idx++)\n\t\t\tnew MIDServerManage().resetQueryWindow(newMidNames[idx]);\n\t\t_debug(\"END -- MID Server \" + currMidName);\n\t}\n}\n\nfunction getMidNameFromSysId(midId) {\n\tif (JSUtil.nil(midId))\n\t\treturn null;\n\t\n\tvar agentCache = new SNC.ECCAgentCache();\n\tvar midgr = agentCache.getBySysId(midId);\n\treturn midgr.name + '';\n}\n\n// Return glide records query result.\nfunction queryEccQueue(downMidName, max_count, query_window) {\n\tvar eccgr = new GlideRecord(\"ecc_queue\");\t\n\teccgr.addQuery(\"agent\", GlideappIECC.AGENT_NAME_PREFIX + downMidName);\n\t_debug(\"query ECC QUEUE records for agent=\" + GlideappIECC.AGENT_NAME_PREFIX + downMidName);\n\t// Exclude it for certain types of probes... \n\teccgr.addQuery(\"topic\", \"NOT IN\", [\"systemCommand\", \"HeartbeatProbe\", \"config.file\", \"Command\"]);\n\teccgr.addQuery(\"queue\",\"output\");\n\t\n\t// Pick up ready or processing\n\tvar qc = eccgr.addQuery(\"state\", \"ready\");\n\tqc.addOrCondition(\"state\", \"processing\");\n\n\t// Bound the ECC queue query by picking up only the entries between the last <query_window> days and now.\n\tvar s = new GlideDateTime();\n\ts.subtract(3600 * 1000 * 24 * query_window); // query from last <query_window> days\n\teccgr.addQuery(\"sys_created_on\", '>=', s);\n\teccgr.addQuery(\"sys_created_on\", '<=', new GlideDateTime());\n\teccgr.setLimit(max_count + 1);\n\teccgr.orderBy(\"sys_created_on\");\n\teccgr.query();\n\treturn eccgr;\n}\n\nfunction unescapeXmlChars(str) {\n\treturn str.replaceAll('&lt;', '<').replaceAll('&gt;', '>').replaceAll('&quot;', '\"').replaceAll('&apos;', \"'\");\n}\n\nfunction logWarning(statusSysId, msg) {\n\tvar logger = new DiscoveryLogger(statusSysId, null);\n\tlogger.warn(msg, LOG_SOURCE, null, null, null);\n\t_debug(msg);\n}\n\nfunction logError(statusSysId, msg) {\n\tvar logger = new DiscoveryLogger(statusSysId, null);\n\tlogger.error(msg, LOG_SOURCE, null, null, null);\n\t_debug(msg);\n}\n\nfunction logInfo(statusSysId, msg) {\n\tvar logger = new DiscoveryLogger(statusSysId, null);\n\tlogger.info(msg, LOG_SOURCE, null, null, null);\n\t_debug(msg);\n}\n\nfunction _debugEnabled() {\n\treturn JSUtil.toBoolean(gs.getProperty(\"mid_server.failover.debug\", \"false\"));\n}\n\nfunction _debug(msg) {\n\tif (_debugEnabled())\n\t\tgs.log(\"(debug) \" + msg, LOG_SOURCE);\n}","sys_class_name":"sysevent_script_action","sys_id":"f6c24d230a0006bc394931345fba7a8a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/42b8273704f12210559073c06a02f78d","value":"42b8273704f12210559073c06a02f78d"},"sys_update_name":"sysevent_script_action_f6c24d230a0006bc394931345fba7a8a","sys_updated_by":"jake.armstrong","sys_created_on":"2010-12-17 23:55:51","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Fail over MID server","event_name":"mid_server.down","sys_name":"Fail over MID server","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"aleck.lin","order":"","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-06-05 12:33:25","sys_domain_path":"","script":"\nfunction process() {\n\tvar payloadAsJson = event.parm1;\n\tvar processor = new SNC.AsyncDashboardService();\n\tprocessor.processDashboardGetCall(payloadAsJson);\n}\nprocess();\n","sys_class_name":"sysevent_script_action","sys_id":"f6e0c41b123746ebaed43fbb2f925a8f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/143b677304352210559073c06a02f7e2","value":"143b677304352210559073c06a02f7e2"},"sys_update_name":"sysevent_script_action_f6e0c41b123746ebaed43fbb2f925a8f","sys_updated_by":"admin","sys_created_on":"2024-06-05 12:33:25","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Dashboard Async","event_name":"par_dashboard.async","sys_name":"Dashboard Async","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-03-26 05:53:49","sys_domain_path":"","script":"new sn_uit.MetadataVolatilityManifestLoader().loadManifest();","sys_class_name":"sysevent_script_action","sys_id":"f742390cb79bf11063268c24ae11a9ac","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/dc646bbb04312210559073c06a02f7a1","value":"dc646bbb04312210559073c06a02f7a1"},"sys_update_name":"sysevent_script_action_f742390cb79bf11063268c24ae11a9ac","sys_updated_by":"admin","sys_created_on":"2023-12-19 06:22:53","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Populate sys_metadata_volatility table","event_name":"system.upgraded","sys_name":"Populate sys_metadata_volatility table","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"31","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-12-09 14:26:40","sys_domain_path":"/","script":"(function() {\n\n    try {\n        const globalSI = new global.BuilderToolkitAPIGlobal();\n        globalSI.setUserUpdateSetId(event.parm1);\n        const newMacroponentGR = new Macroponent().getRecordById(event.parm2, true);\n        if (newMacroponentGR) {\n            new Page().createSubPage(current, {\n                parentMacroponent: newMacroponentGR.getUniqueValue()\n            }, newMacroponentGR.sys_scope, newMacroponentGR.sys_domain);\n        }\n        globalSI.setUserUpdateSetId();\n    } catch (err) {\n        gs.error(\"Failed to create subscreen with err: \" + err + '\\n' + err.stack);\n    }\n\n})();","sys_class_name":"sysevent_script_action","sys_id":"f7a8ff7c9d231110f8772de6b52d4d8a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/cdfd3bed43321110e70583020cb8f28e","value":"cdfd3bed43321110e70583020cb8f28e"},"sys_update_name":"sysevent_script_action_f7a8ff7c9d231110f8772de6b52d4d8a","sys_updated_by":"maint","sys_created_on":"2022-12-01 18:04:25","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Create Subscreen","event_name":"sn_uibtk_api.create.subscreen","sys_name":"Create Subscreen","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/cdfd3bed43321110e70583020cb8f28e","value":"cdfd3bed43321110e70583020cb8f28e"},"sys_created_by":"maint","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.change_management.standard_change_catalog'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '20ac5a8cb76010103186f2b1de11a977, 398e9accb76010103186f2b1de11a906, 6c6ede8cb76010103186f2b1de11a900, 7ee616c8b76010103186f2b1de11a96d');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"f7cd8342b74120104c45f2b1de11a90d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/b80be33304352210559073c06a02f76b","value":"b80be33304352210559073c06a02f76b"},"sys_update_name":"sysevent_script_action_f7cd8342b74120104c45f2b1de11a90d","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:30:36","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- Std chg cat","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- Std chg cat","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"gs.getProperty(\"glide.installation.production\")","sys_mod_count":"9","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-09-27 05:47:01","sys_domain_path":"","script":"var buildInitial = gs.getProperty(\"glide.buildname\").substring(0,1).toLowerCase();\n\n// This would be null on zboot, because this property is being set whenever a successful download goes through.\nvar lastDownloadedContent = gs.getProperty(\"com.glide.embedded_help.last_downloaded_content_family\");\n\nif (!lastDownloadedContent || lastDownloadedContent != buildInitial) {\n\n\tvar mutex = new Mutex(\"Embedded_Help_Downloader\");\n\tmutex.setSpinWait(1);\n\tmutex.setMaxSpins(1);\n\n\tif(mutex.get()) {\n\t\ttry {\n\t\t\tnew SNC.EmbeddedHelpContentDownloader().downloadContents(buildInitial);\n\t\t\tnew SNHelpUtil().syncSeismicHelp();\n\t\t} catch(ex) {\n\t\t\tgs.log(\"Error downloading Help Content\", \"Embedded Help Downloader\");\n\t\t} finally {\n\t\t\tmutex.release();\n\t\t}\n\t} else {\n\t\tgs.log(\"Could not obtain the mutex for Embedded_Help_Downloader\", \"Embedded Help Downloader\");\n\t}\n}","sys_class_name":"sysevent_script_action","sys_id":"f8149ce3e76b1300c57d84f903f6a9c0","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/bb2b677304352210559073c06a02f70b","value":"bb2b677304352210559073c06a02f70b"},"sys_update_name":"sysevent_script_action_f8149ce3e76b1300c57d84f903f6a9c0","sys_updated_by":"admin","sys_created_on":"2018-08-01 20:34:09","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Embedded Help Downloader","event_name":"system.upgraded","sys_name":"Embedded Help Downloader","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"event.parm1 == 'com.snc.change_management.state_model'","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2020-12-15 09:34:51","sys_domain_path":"","script":"var aclGR = new GlideRecord('sys_security_acl');\naclGR.addQuery('sys_id', 'IN', '6cd66604b7a010103186f2b1de11a99c');\naclGR.query();\nwhile (aclGR.next()) {\n\taclGR.setValue('active', true);\n\taclGR.update();\n}","sys_class_name":"sysevent_script_action","sys_id":"fa0e4742b74120104c45f2b1de11a9ed","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/cf0be73304352210559073c06a02f754","value":"cf0be73304352210559073c06a02f754"},"sys_update_name":"sysevent_script_action_fa0e4742b74120104c45f2b1de11a9ed","sys_updated_by":"admin","sys_created_on":"2020-12-14 16:31:38","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Activate report_view ACLs- Chg state mod","event_name":"plugin.activated","sys_name":"Activate report_view ACLs- Chg state mod","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2023-04-19 13:06:17","sys_domain_path":"","script":"if (GlideProperties.getBoolean('pwd_reset.enable.enrollment_snapshot', true)) {\n    deleteEnrollmentSnapshot();\n}\n\nfunction deleteEnrollmentSnapshot() {\n    var userSysId = event.parm1;\n    var userGroupSysId = event.parm2;\n\n    try {\n        new PwdEnrollSnapshotUtil().deleteInValidEnrollmentSnapshotsByUserId(userSysId);\n    } catch (ex) {\n        gs.error(\"[Script action: Delete enrollment snaps for a user-group with user_id : \" + userSysId + \", group_id : \" + userGroupSysId + \" ]. execution error - \" + ex);\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"fad0aba543062110d68db0e245b8f206","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sysevent_script_action_fad0aba543062110d68db0e245b8f206","sys_updated_by":"admin","sys_created_on":"2023-04-07 07:11:06","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Delete enrollment snaps for a user-group","event_name":"sys_user_grmember.delete","sys_name":"Delete enrollment snaps for a user-group","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":"read"},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-08-02 17:16:12","sys_domain_path":"","script":"new global.InteractionSecurityUtils().appendInternalTranscript(event.parm1, event.parm2);\n","sys_class_name":"sysevent_script_action","sys_id":"fadd89557f330210e5edfc774c8665ff","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/989c2b7b04352210559073c06a02f7cc","value":"989c2b7b04352210559073c06a02f7cc"},"sys_update_name":"sysevent_script_action_fadd89557f330210e5edfc774c8665ff","sys_updated_by":"admin","sys_created_on":"2024-08-02 17:16:12","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Append Interaction Internal Transcript","event_name":"interaction.internal_transcript","sys_name":"Append Interaction Internal Transcript","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"sn_app_analytics.SNAnalytics.isEnabled()","sys_mod_count":"1","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-09-05 10:23:10","sys_domain_path":"/","script":"new UXMetricsApplications().registerAllApps();","sys_class_name":"sysevent_script_action","sys_id":"fb111e34733111107d804c9885f6a7a1","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e393abf304312210559073c06a02f7e4","value":"e393abf304312210559073c06a02f7e4"},"sys_update_name":"sysevent_script_action_fb111e34733111107d804c9885f6a7a1","sys_updated_by":"admin","sys_created_on":"2022-09-05 10:14:09","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Register UX Metrics Applications","event_name":"plugin.upgraded","sys_name":"Register UX Metrics Applications","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2017-12-18 18:57:17","sys_domain_path":"","script":"(function processEvent(event) {\n\n\trecordsCleaner = new SNC.PARecordsCleaner();\n\trecordsCleaner.processIndicatorBreakdownDelete(event.getValue('parm1'), event.getValue('parm2'));\n\trecordsCleaner.processIndicatorBreakdownDeleteForNews(event.getValue('parm1'), event.getValue('parm2'));\n\n})(event);","sys_class_name":"sysevent_script_action","sys_id":"fcad6d60d70022004cd2a3b20e610355","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/539a23bf04f12210559073c06a02f7aa","value":"539a23bf04f12210559073c06a02f7aa"},"sys_update_name":"sysevent_script_action_fcad6d60d70022004cd2a3b20e610355","sys_updated_by":"admin","sys_created_on":"2016-06-13 07:07:31","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Process indicator breakdown delete","event_name":"pa.delete.indicator_breakdown","sys_name":"Process indicator breakdown delete","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"gs.getProperty('sn_change_cab.com.snc.change_management.cab.refresh_group_attendees', 'true') === 'true'","sys_mod_count":"23","active":"true","description":"","sys_overrides":"","sys_updated_on":"2021-10-15 13:00:51","sys_domain_path":"","script":"new CABAttendeeUserUtil(event.parm1 + '', event.parm2 + '').processUserAddedToBoardGroup();","sys_class_name":"sysevent_script_action","sys_id":"fcafa9a5c3323010a282a539e540dd84","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/18351d53eb32120034d1eeea1206fe79","value":"18351d53eb32120034d1eeea1206fe79"},"sys_update_name":"sysevent_script_action_fcafa9a5c3323010a282a539e540dd84","sys_updated_by":"admin","sys_created_on":"2021-09-24 16:40:11","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Process CAB Board group user added","event_name":"sn_change_cab.group_member.added","sys_name":"Process CAB Board group user added","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/18351d53eb32120034d1eeea1206fe79","value":"18351d53eb32120034d1eeea1206fe79"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"sn_app_analytics.SNAnalytics.isEnabled()","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2022-07-04 05:55:17","sys_domain_path":"/","script":"new UXMetricsApplications().registerAllApps();\n\n","sys_class_name":"sysevent_script_action","sys_id":"fd463226731011107d804c9885f6a736","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/e393abf304312210559073c06a02f7e4","value":"e393abf304312210559073c06a02f7e4"},"sys_update_name":"sysevent_script_action_fd463226731011107d804c9885f6a736","sys_updated_by":"admin","sys_created_on":"2022-06-28 10:00:21","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Register UX Metrics Applications","event_name":"system.upgraded","sys_name":"Register UX Metrics Applications","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"Synchronize attributes to individual CIs that are set on a CI Class","sys_mod_count":"48","active":"true","description":"","sys_overrides":"","sys_updated_on":"2024-04-25 17:19:19","sys_domain_path":"","script":"function processEvent() {\n    var util = new CSDMCMDBUtil();\n    var batchSize = util.getDataSyncProcessBatchSize();\n    var newValues = event.parm1 ? event.parm1 : \"\";\n    var oldValues = event.parm2 ? event.parm2 : \"\";\n    var ciSysIds = {};\n\n    // dynamicCiGroup : [] assoc ci list array\n    var cisMappedToGroup = {};\n\n    // techncial service offering : dynamic ci group\n    var groupsMappedToService = {};\n\n    var className = current.getValue(\"class\");\n    var ciCountOffset = 0;\n\n    ciSysIds = util.getCisForClassWithEncQueryAndWindow(className, \"managed_by_group!=\" + newValues + \"^ORmanaged_by_groupISEMPTY\", batchSize, ciCountOffset);\n    var previousFirstSysId = 0;\n\tvar batchCount = 0;\n    while (Object.keys(ciSysIds).length > 0) {\n        gs.debug(\"Sync Managed By Group from CI Class batch number: \" + batchCount + \" batchSize: \" + batchSize + \" ciCountOffset: \" + ciCountOffset, \"CSDMCMDBUtil\");\n        if (previousFirstSysId && Object.keys(ciSysIds).indexOf(previousFirstSysId) > 0) {\n            // protect against infinite loop\n            gs.error(\"Sync Managed By Group from CI Class attempted to update a duplicate SysID\", \"CSDMCMDBUtil\");\n            return;\n        }\n        cisMappedToGroup = util.getCisMappedToDCG(Object.keys(ciSysIds));\n        if (Object.keys(cisMappedToGroup).length > 0) {\n\n            groupsMappedToService = util.getAssocTSOsFromDCG(Object.keys(cisMappedToGroup));\n\n            // fetch the technical service offerings\n            var grTso = util.getTSOs(Object.keys(groupsMappedToService));\n\n            while (grTso.next()) {\n\n                if (grTso.getValue(\"managed_by_group\")) {\n                    groupsMappedToService[grTso.getValue(\"sys_id\")].forEach(function(groupSysId) {\n                        cisMappedToGroup[groupSysId].forEach(function(ciToSkip) {\n                            // remove these cis from the update structure, they already are assigned to a TSO that has a managed by group\n                            delete ciSysIds[ciToSkip];\n                            ciCountOffset++;\n                        });\n                    });\n                }\n            }\n        }\n        var finalCiArrayAfterProcess = Object.keys(ciSysIds);\n        if (finalCiArrayAfterProcess.length > 0) {\n            util.updateRecords(className, finalCiArrayAfterProcess, {\n                managed_by_group: newValues\n            });\n        }\n        previousFirstSysId = finalCiArrayAfterProcess[0];\n        gs.debug(\"Sync Managed By Group from CI Class updated MBG for CI Count: \" + finalCiArrayAfterProcess.length + \" batch number: \" + batchCount, \"CSDMCMDBUtil\");\n        ciSysIds = util.getCisForClassWithEncQueryAndWindow(className, \"managed_by_group!=\" + newValues + \"^ORmanaged_by_groupISEMPTY\", batchSize, ciCountOffset);\n    }\n}\nprocessEvent();","sys_class_name":"sysevent_script_action","sys_id":"fedc8b460752101017b703767cd3008a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/6535677304712210559073c06a02f74f","value":"6535677304712210559073c06a02f74f"},"sys_update_name":"sysevent_script_action_fedc8b460752101017b703767cd3008a","sys_updated_by":"admin","sys_created_on":"2020-07-30 23:47:15","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Sync Managed By Group from CI Class","event_name":"csdm.ciclass.modified","sys_name":"Sync Managed By Group from CI Class","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"2","active":"true","description":"","sys_overrides":"","sys_updated_on":"2016-01-08 21:55:14","sys_domain_path":"","script":"fixBooleanRectangleActive(\"sp_rectangle\", \"active\", \"true\");\n\nfunction fixBooleanRectangleActive(tablename, fieldname, value) {\n    var gr = new GlideRecord(tablename);\n    if (gr.isValid()) {\n        gs.print(\"setting \" + tablename + \".\" + fieldname + \" Boolean to \" + value + \" where null due to upgrade of plugin: \" + event.parm1);\n        gr.addNullQuery(fieldname);\n        gr.query();\n        while (gr.next()) {\n\t\t\tgs.print(\"setting \" + tablename + \".\" + fieldname + \" Boolean to \" + value + \" for sys_id \" + gr.getUniqueValue());\n            gr.setValue(fieldname, value);\n            gr.update();\n        }\n    }\n}","sys_class_name":"sysevent_script_action","sys_id":"ff86d412d7301200a9addd173e24d442","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/69996b7b04f12210559073c06a02f7e2","value":"69996b7b04f12210559073c06a02f7e2"},"sys_update_name":"sysevent_script_action_ff86d412d7301200a9addd173e24d442","sys_updated_by":"admin","sys_created_on":"2016-01-08 21:52:22","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Fix sp_rectangle to true after plugin","event_name":"plugin.upgraded","sys_name":"Fix sp_rectangle to true after plugin","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"admin","order":"100","sys_policy":""},{"condition_script":"","sys_mod_count":"0","active":"true","description":"","sys_overrides":"","sys_updated_on":"2016-06-14 22:26:44","sys_domain_path":"","script":"SNC.DelegatedDevelopmentUtil.updateAllMetaDataPermissions();","sys_class_name":"sysevent_script_action","sys_id":"ff99ca01df00220062fe6c7a4df263a9","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3464abbb04312210559073c06a02f76e","value":"3464abbb04312210559073c06a02f76e"},"sys_update_name":"sysevent_script_action_ff99ca01df00220062fe6c7a4df263a9","sys_updated_by":"nick.leclair","sys_created_on":"2016-06-14 22:26:44","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Update Delegated Developers","event_name":"system.upgraded","sys_name":"Update Delegated Developers","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"sys_created_by":"nick.leclair","order":"110","sys_policy":""}]}