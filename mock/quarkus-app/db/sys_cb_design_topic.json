{"result":[{"sys_mod_count":"92","sys_updated_on":"2022-11-17 23:00:04","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"53f5d329260941b38b724f3c7a62a36f\": {\n          \"id\": \"53f5d329260941b38b724f3c7a62a36f\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": \"(function execute() {\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"032d4cd502584f5faa7900a42b5491f8\": {\n          \"id\": \"032d4cd502584f5faa7900a42b5491f8\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": \"(function execute() {\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"a4f03f82b63b4c57b3a2b9b77c791f7d\": {\n          \"id\": \"a4f03f82b63b4c57b3a2b9b77c791f7d\",\n          \"name\": \"Is user subscribed to notifications?\",\n          \"script\": \"(function execute() {\\n    var recipient = new GlideRecord(vaVars.global_notifications_subscription_user_table);\\n    recipient.get('sys_id', vaVars.global_notifications_subscription_user);\\n\\n    // Store the platform-level global user notification preference\\n    var prefs = new sn_notification.Preferences(recipient);\\n    vaVars._is_user_subscribed_at_platform = prefs.getUserGlobalPreference();\\n    \\n    var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n    var provider = JSON.parse(sn_cs.VASystemObject.getProviderById(providerApp.providerId));\\n\\n    var cschannel = new GlideRecord('sys_cs_channel');\\n    cschannel.get('sys_id', provider.channelId);\\n    vaVars._notifications_enabled = (cschannel.getValue('enable_notification') === '1') ? true : false;\\n    \\n    var channelname = cschannel.getValue('name');\\n    if(channelname.toLowerCase().includes('teams'))\\n       vaVars._channel_name = 'Microsoft Teams';\\n    else\\n       vaVars._channel_name = channelname;\\n\\n    var mapping = new GlideRecord('sys_cs_notification_channel_configuration');\\n    mapping.get('provider', providerApp.providerId); \\n \\n    var channel = new GlideRecord('sys_notification_channel');\\n    channel.get('sys_id', mapping.getValue('notification_channel'))\\n \\n    gs.info('channel: ' + channel.getValue('name')); \\n    var result = vaSystem.preProcessNotificationSubscription(vaVars.global_notifications_subscription_provider_user_id, vaVars.global_notifications_subscription_channel_id);\\n    var dests = prefs.getDestinationsByChannel(channel);\\n    if (dests.length == 0) {\\n        gs.error('destination preference does not exist');\\n        vaVars._is_user_subscribed_at_destination = false;\\n    } else {\\n        vaVars._is_user_subscribed_at_destination = dests[0].isActive();\\n    }\\n    if(result) vaSystem.postProcessNotificationSubscription();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"39608056633f49b090c97c323d3b70c0\": {\n          \"id\": \"39608056633f49b090c97c323d3b70c0\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is user subscribed at destination-level?\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"841b21ccca77443880d5cfc29fdf681f\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Options to unsubscribe\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang(\\n        'Notifications are enabled in {0}', \\n        vaContext.getRequesterLang(), \\n        [vaVars._channel_name]\\n    );\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"525781c9386e4ed8851fff11e33054ba\",\n          \"id\": \"841b21ccca77443880d5cfc29fdf681f\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": {\n            \"id\": \"\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false\n        },\n        \"c6b5aa558e2842f489888c64af4ef25a\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Options to subscribe\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang('Notifications are disabled in {0}', \\n        vaContext.getRequesterLang(), \\n        [vaVars._channel_name]\\n    );\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"2b16986f8a5b481fafcdbda7287d50cf\",\n          \"id\": \"c6b5aa558e2842f489888c64af4ef25a\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": {\n            \"id\": \"\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false\n        },\n        \"cb33bc8e91f1400baaff3c4a46d10258\": {\n          \"id\": \"cb33bc8e91f1400baaff3c4a46d10258\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"ServiceNow notification Settings\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    if(vaVars._notifications_enabled)\\n        return gs.getMessageLang('Your notification settings', vaContext.getRequesterLang());\\n    else\\n        return gs.getMessageLang(\\n            'Notifications are disabled by admin in {0}', \\n            vaContext.getRequesterLang(), \\n            [vaVars._channel_name]\\n        );\\n\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"4d3caf89e72b46baba355d67a617ae0d\": {\n          \"id\": \"4d3caf89e72b46baba355d67a617ae0d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Subscribe or Cancel?\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"8e122a7e9475400d897fd862732cb8f4\": {\n          \"id\": \"8e122a7e9475400d897fd862732cb8f4\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Cancel or Unsubscribe?\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"5fc82e3569ab482abc8e516b7cbb5fc1\": {\n          \"id\": \"5fc82e3569ab482abc8e516b7cbb5fc1\",\n          \"name\": \"Post processing\",\n          \"script\": \"(function execute() {\\n    var cafContextualUtility = new CAFContextualUtility();\\n    cafContextualUtility.postProcess();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"04b0f458ea814e17afc52c37c14ec02d\": {\n          \"id\": \"04b0f458ea814e17afc52c37c14ec02d\",\n          \"name\": \"Subscribe\",\n          \"script\": \"(function execute() {\\n    var recipient = new GlideRecord(vaVars.global_notifications_subscription_user_table);\\n    recipient.get('sys_id', vaVars.global_notifications_subscription_user); \\n    var prefs = new sn_notification.Preferences(recipient);\\n \\n    var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n    var mapping = new GlideRecord('sys_cs_notification_channel_configuration');\\n    mapping.get('provider', providerApp.providerId); \\n \\n    var channel = new GlideRecord('sys_notification_channel');\\n    channel.get('sys_id', mapping.getValue('notification_channel'))\\n \\n    var result = vaSystem.preProcessNotificationSubscription(vaVars.global_notifications_subscription_provider_user_id, vaVars.global_notifications_subscription_channel_id);\\n    var dests = prefs.getDestinationsByChannel(channel);\\n    if (dests.length != 0) {\\n        for(var count=0; count < dests.length; count++){\\n           dests[count].setActive(true);\\n        }\\n    } \\n    if(result) vaSystem.postProcessNotificationSubscription();\\n    vaVars._is_user_subscribed_at_destination = true;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a814f144cfd047cbbe0ca5842885f013\": {\n          \"id\": \"a814f144cfd047cbbe0ca5842885f013\",\n          \"name\": \"Unsubscribe\",\n          \"script\": \"(function execute() {\\n    var recipient = new GlideRecord(vaVars.global_notifications_subscription_user_table);\\n    recipient.get('sys_id', vaVars.global_notifications_subscription_user); \\n    var prefs = new sn_notification.Preferences(recipient);\\n\\n    var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n\\n    var mapping = new GlideRecord('sys_cs_notification_channel_configuration');\\n    mapping.get('provider', providerApp.providerId); \\n \\n    var channel = new GlideRecord('sys_notification_channel');\\n    channel.get('sys_id', mapping.getValue('notification_channel'))\\n \\n    gs.info('channel: ' + channel.getValue('name')); \\n    var result = vaSystem.preProcessNotificationSubscription(vaVars.global_notifications_subscription_provider_user_id, vaVars.global_notifications_subscription_channel_id);\\n    var dests = prefs.getDestinationsByChannel(channel);\\n    if (dests.length != 0) {\\n        for(var count=0; count < dests.length; count++){\\n           dests[count].setActive(false);\\n        }\\n    } \\n    if(result) vaSystem.postProcessNotificationSubscription();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"dff165ba61e24926a945c3a7a6571457\": {\n          \"id\": \"dff165ba61e24926a945c3a7a6571457\",\n          \"name\": \"Update Notification State to expired\",\n          \"script\": \"(function execute() {\\n    vaSystem.expireNotificationOnUnsubscribe();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"fc2dcfe7223c4a859374764db95c0880\": {\n          \"id\": \"fc2dcfe7223c4a859374764db95c0880\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Resume conversation message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\"\n          }\n        },\n        \"4adb1431988c438bb77725bbb6b1031f\": {\n          \"id\": \"4adb1431988c438bb77725bbb6b1031f\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Resume conversation message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"7d09141b52324d3c8f8097304f66f2e8\": {\n          \"id\": \"7d09141b52324d3c8f8097304f66f2e8\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"7bdf054364b84b92aebb1c3ab7868d6e\": {\n          \"id\": \"7bdf054364b84b92aebb1c3ab7868d6e\",\n          \"name\": \"Switch to help topic\",\n          \"script\": \"(function execute() {\\n    vaVars.global_topic_switch = true;\\n    vaVars.global_clicked_value = 'Cancel';\\n    vaSystem.isContextualActionApplicable('Help', vaContext.providerAppId, vaContext.providerUserId); \\n    vaSystem.switchTopic('b20fd17b532210105498ddeeff7b12b7');\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"0843a59370e34269ac69647c950510e1\": {\n          \"id\": \"0843a59370e34269ac69647c950510e1\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"da6a24ec164b4756bcd4e07ca5695589\": {\n          \"id\": \"da6a24ec164b4756bcd4e07ca5695589\",\n          \"name\": \"Switch to help topic\",\n          \"script\": \"(function execute() {\\n    vaVars.global_topic_switch = true;\\n    vaVars.global_clicked_value = 'Cancel';\\n    vaSystem.isContextualActionApplicable('Help', vaContext.providerAppId, vaContext.providerUserId); \\n    vaSystem.switchTopic('b20fd17b532210105498ddeeff7b12b7');\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"09c2cf1595a2464b949ae89d2f575ac5\": {\n          \"id\": \"09c2cf1595a2464b949ae89d2f575ac5\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Are platform-level notifs enabled?\"\n        },\n        \"ad4ea27084c141e68705f298939d4726\": {\n          \"id\": \"ad4ea27084c141e68705f298939d4726\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Notifications enabled in Teams message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return gs.getMessageLang(\\n        'Notifications are enabled in {0}, but you have disabled all notifications in your Notification preferences.', \\n        vaContext.getRequesterLang(), \\n        [vaVars._channel_name]\\n    );\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"c8432eb6caa8473bb62ff27a42963950\": {\n          \"id\": \"c8432eb6caa8473bb62ff27a42963950\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Allow, Cancel, or Unsubscribe?\"\n        },\n        \"9176b97a135d438688a15aeb76b219e0\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Allow notifications or unsubscribe\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"To receive notifications on this channel and in any other selected channels, select 'Allow Notifications' to update your notification settings.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"80d7582a55354849b3bf44a3fd13405f\",\n          \"id\": \"9176b97a135d438688a15aeb76b219e0\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"1295316376ba47d2a9e0c989ec599eb5\": {\n          \"id\": \"1295316376ba47d2a9e0c989ec599eb5\",\n          \"name\": \"User global pref to allow notifications\",\n          \"script\": \"(function execute() {\\n    // Get user's global notification preference\\n    var recipient = new GlideRecord(vaVars.global_notifications_subscription_user_table);\\n    recipient.get('sys_id', vaVars.global_notifications_subscription_user);\\n    var prefs = new sn_notification.Preferences(recipient);\\n    prefs.setUserGlobalPreference(true);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"2f667d0b5971421f97288f12de4d9b82\": {\n          \"id\": \"2f667d0b5971421f97288f12de4d9b82\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Notification preferences are updated\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Your notification preferences have been updated. You can now receive notifications in your selected channels.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"bf0fb905c1644bf492a5f537599cdc49\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"3a3cf7772e5a4571b4e13f14d34fbfe4\": {\n          \"id\": \"3a3cf7772e5a4571b4e13f14d34fbfe4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Subscription confirmation message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return gs.getMessageLang(\\n        'You can now receive notifications in {0}. To unsubscribe again, type \\\\'{1}\\\\'.',\\n        vaContext.getRequesterLang(),\\n        [vaVars._channel_name, vaVars.global_notifications_keyword]\\n    );\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"1d9dbd383eb543938405ebce9763baba\": {\n          \"id\": \"1d9dbd383eb543938405ebce9763baba\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Are platform-level notifs enabled?\"\n        },\n        \"035e517579e24f919375e124b6c31ab7\": {\n          \"id\": \"035e517579e24f919375e124b6c31ab7\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Are platform-level notifs enabled?\"\n        },\n        \"56795c89a69c42e8bd7a2c0e634471ab\": {\n          \"id\": \"56795c89a69c42e8bd7a2c0e634471ab\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Notifications are disabled message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return gs.getMessageLang('Notifications are disabled in {0}', \\n        vaContext.getRequesterLang(), \\n        [vaVars._channel_name]\\n    );\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"1feef18ec38a44dc9c6e371ca0178fde\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Options to subscribe and allow notifs\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Would you like to subscribe to notifications? This action enables notifications globally, so that you can receive notifications on your selected channels.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"d7f02a5278d5435a9f44f7d8a57643ee\",\n          \"id\": \"1feef18ec38a44dc9c6e371ca0178fde\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"98d91f18375245829c0dfebcb4e42dfd\": {\n          \"id\": \"98d91f18375245829c0dfebcb4e42dfd\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Unsubscription confirmation message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return gs.getMessageLang(\\n        'You are now unsubscribed and will no longer get notifications in {0}. To subscribe again, type \\\\'{1}\\\\'.',\\n        vaContext.getRequesterLang(),\\n        [vaVars._channel_name, vaVars.global_notifications_keyword]\\n    );\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"eed6f1abacfd402ab45e75054e5bbef5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c8432eb6caa8473bb62ff27a42963950\",\n          \"target\": \"1295316376ba47d2a9e0c989ec599eb5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.allow_notifications_or_unsubscribe=Allow Notifications\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Allow Notifications\"\n        },\n        {\n          \"id\": \"717f27d0608a40d9900ea26e7436494e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4d3caf89e72b46baba355d67a617ae0d\",\n          \"target\": \"04b0f458ea814e17afc52c37c14ec02d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.options_to_subscribe=subscribe^ORvaInputs.options_to_subscribe_and_allow_notifs=Subscribe\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Subscribe\"\n        },\n        {\n          \"id\": \"d19a70a520cf4dac81d3b6054094346f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3a3cf7772e5a4571b4e13f14d34fbfe4\",\n          \"target\": \"1d9dbd383eb543938405ebce9763baba\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1310d96f06524102bdff223d95ec0d58\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2f667d0b5971421f97288f12de4d9b82\",\n          \"target\": \"5fc82e3569ab482abc8e516b7cbb5fc1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d34fa00b76e947a8bf1a4469a0b67c82\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"dff165ba61e24926a945c3a7a6571457\",\n          \"target\": \"98d91f18375245829c0dfebcb4e42dfd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7671a9646c024ad8b7ba60a7a505ce73\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a814f144cfd047cbbe0ca5842885f013\",\n          \"target\": \"dff165ba61e24926a945c3a7a6571457\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"06f8d0dbac3d4b65b9980871fcdb7cd1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ad4ea27084c141e68705f298939d4726\",\n          \"target\": \"9176b97a135d438688a15aeb76b219e0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"09e8eb106a624f9bac51c2b8da770690\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"53f5d329260941b38b724f3c7a62a36f\",\n          \"target\": \"a4f03f82b63b4c57b3a2b9b77c791f7d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ffdd4bf91f4c490cbecabf8576244259\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a4f03f82b63b4c57b3a2b9b77c791f7d\",\n          \"target\": \"cb33bc8e91f1400baaff3c4a46d10258\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"67755dfdeb5f49bc817e0bf5fcb721b6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"cb33bc8e91f1400baaff3c4a46d10258\",\n          \"target\": \"39608056633f49b090c97c323d3b70c0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"73d14d9b066c4d4d9c95c9bb8a87d1c6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c6b5aa558e2842f489888c64af4ef25a\",\n          \"target\": \"4d3caf89e72b46baba355d67a617ae0d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b1f5d992c78147b5b95acbbd2f8ef610\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"841b21ccca77443880d5cfc29fdf681f\",\n          \"target\": \"8e122a7e9475400d897fd862732cb8f4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"64a9591646cc45a888757969872829b3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5fc82e3569ab482abc8e516b7cbb5fc1\",\n          \"target\": \"032d4cd502584f5faa7900a42b5491f8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"46fcdb34dbc34be6930a1952a17b703b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8e122a7e9475400d897fd862732cb8f4\",\n          \"target\": \"a814f144cfd047cbbe0ca5842885f013\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"query\",\n            \"value\": \"vaInputs.options_to_unsubscribe=unsubscribe\"\n          },\n          \"label\": \"Unsubscribe\"\n        },\n        {\n          \"id\": \"89e7b512f60f463eb797ba00d880a2ef\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"39608056633f49b090c97c323d3b70c0\",\n          \"target\": \"5fc82e3569ab482abc8e516b7cbb5fc1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars._notifications_enabled === false;\\n})()\\n\"\n          },\n          \"label\": \"Notifications Disabled\"\n        },\n        {\n          \"id\": \"e54f5a03a04f436dbf9b9bcaf6b54109\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"fc2dcfe7223c4a859374764db95c0880\",\n          \"target\": \"5fc82e3569ab482abc8e516b7cbb5fc1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ba99560a975345a1880c6ece06d97730\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4adb1431988c438bb77725bbb6b1031f\",\n          \"target\": \"5fc82e3569ab482abc8e516b7cbb5fc1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ecd89f75262d495d80b5126b6345d88d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8e122a7e9475400d897fd862732cb8f4\",\n          \"target\": \"7d09141b52324d3c8f8097304f66f2e8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"query\",\n            \"value\": \"vaInputs.options_to_unsubscribe=cancel\"\n          },\n          \"label\": \"Cancel\"\n        },\n        {\n          \"id\": \"f2d16e308d3a4a22802be04698ed5660\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"7d09141b52324d3c8f8097304f66f2e8\",\n          \"target\": \"4adb1431988c438bb77725bbb6b1031f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\\n\"\n          },\n          \"label\": \"Active conversation\"\n        },\n        {\n          \"id\": \"3fffc5b8cc124bb2879e4010c694f15f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"7d09141b52324d3c8f8097304f66f2e8\",\n          \"target\": \"7bdf054364b84b92aebb1c3ab7868d6e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_ca_keyword_as_default_topic;\\n})()\\n\"\n          },\n          \"label\": \"No conversation\"\n        },\n        {\n          \"id\": \"bfdeea9e846f405f9e9a8f556ef31be2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7bdf054364b84b92aebb1c3ab7868d6e\",\n          \"target\": \"5fc82e3569ab482abc8e516b7cbb5fc1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f7d7315bf7b24e7d9e2c1db4d1783a6d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4d3caf89e72b46baba355d67a617ae0d\",\n          \"target\": \"0843a59370e34269ac69647c950510e1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.options_to_subscribe=cancel^ORvaInputs.options_to_subscribe_and_allow_notifs=Cancel\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Cancel\"\n        },\n        {\n          \"id\": \"4297849d0ee148d383fb8bb1d8999a70\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0843a59370e34269ac69647c950510e1\",\n          \"target\": \"fc2dcfe7223c4a859374764db95c0880\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\\n\"\n          },\n          \"label\": \"Active conversation\"\n        },\n        {\n          \"id\": \"84831034a4774c5a945424638f72ac54\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0843a59370e34269ac69647c950510e1\",\n          \"target\": \"da6a24ec164b4756bcd4e07ca5695589\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_ca_keyword_as_default_topic;\\n})()\\n\"\n          },\n          \"label\": \"No conversation\"\n        },\n        {\n          \"id\": \"2063097a82ce48acb950ef2141e3f0b4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"da6a24ec164b4756bcd4e07ca5695589\",\n          \"target\": \"5fc82e3569ab482abc8e516b7cbb5fc1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"977409c746874552b537468bd049a060\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"39608056633f49b090c97c323d3b70c0\",\n          \"target\": \"09c2cf1595a2464b949ae89d2f575ac5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._notifications_enabled === true && vaVars._is_user_subscribed_at_destination === true;\\n})()\\n\"\n          },\n          \"label\": \"Subscribed\"\n        },\n        {\n          \"id\": \"ffafdad543d84608a10ac3ce115974d0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"09c2cf1595a2464b949ae89d2f575ac5\",\n          \"target\": \"841b21ccca77443880d5cfc29fdf681f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._is_user_subscribed_at_platform === true;\\n})()\\n\"\n          },\n          \"label\": \"Enabled\"\n        },\n        {\n          \"id\": \"12b9172c9bf84015a6fae10a3058c32d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"09c2cf1595a2464b949ae89d2f575ac5\",\n          \"target\": \"ad4ea27084c141e68705f298939d4726\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._is_user_subscribed_at_platform === false;\\n})()\\n\"\n          },\n          \"label\": \"Not enabled\"\n        },\n        {\n          \"id\": \"14f50ed5a7574968b91009e57c5f9dc1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c8432eb6caa8473bb62ff27a42963950\",\n          \"target\": \"a814f144cfd047cbbe0ca5842885f013\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.allow_notifications_or_unsubscribe=Unsubscribe\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Unsubscribe\"\n        },\n        {\n          \"id\": \"7d1b1eba197748ae995dc341310da495\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9176b97a135d438688a15aeb76b219e0\",\n          \"target\": \"c8432eb6caa8473bb62ff27a42963950\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d20143790b964d34ae03c2d83ae7d0c0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c8432eb6caa8473bb62ff27a42963950\",\n          \"target\": \"7d09141b52324d3c8f8097304f66f2e8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.allow_notifications_or_unsubscribe=Cancel\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Cancel\"\n        },\n        {\n          \"id\": \"dc834b85b38947c99362e1ab74bd3a71\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1295316376ba47d2a9e0c989ec599eb5\",\n          \"target\": \"2f667d0b5971421f97288f12de4d9b82\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"be7dd0b2cad4456485927549d5eb230b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"04b0f458ea814e17afc52c37c14ec02d\",\n          \"target\": \"3a3cf7772e5a4571b4e13f14d34fbfe4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9ed77966bed843ec9d08068480314225\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1d9dbd383eb543938405ebce9763baba\",\n          \"target\": \"5fc82e3569ab482abc8e516b7cbb5fc1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._is_user_subscribed_at_platform === true;\\n})()\\n\"\n          },\n          \"label\": \"Enabled\"\n        },\n        {\n          \"id\": \"dcac97194f3444ee977740709c95db30\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1d9dbd383eb543938405ebce9763baba\",\n          \"target\": \"1295316376ba47d2a9e0c989ec599eb5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._is_user_subscribed_at_platform === false;\\n})()\\n\"\n          },\n          \"label\": \"Not enabled\"\n        },\n        {\n          \"id\": \"90bddf6583604b0f9d1dcf46876fb76c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"39608056633f49b090c97c323d3b70c0\",\n          \"target\": \"035e517579e24f919375e124b6c31ab7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._notifications_enabled === true && vaVars._is_user_subscribed_at_destination === false;\\n})()\\n\"\n          },\n          \"label\": \"Unsubscribed\"\n        },\n        {\n          \"id\": \"93b6c0ba4d154284bf8558d59ad3445e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"035e517579e24f919375e124b6c31ab7\",\n          \"target\": \"c6b5aa558e2842f489888c64af4ef25a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._is_user_subscribed_at_platform === true;\\n})()\\n\"\n          },\n          \"label\": \"Enabled\"\n        },\n        {\n          \"id\": \"fee90a5e22fb4062b8b0651cd5edbfd9\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"035e517579e24f919375e124b6c31ab7\",\n          \"target\": \"56795c89a69c42e8bd7a2c0e634471ab\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._is_user_subscribed_at_platform === false;\\n})()\\n\"\n          },\n          \"label\": \"Not enabled\"\n        },\n        {\n          \"id\": \"3fb006ce380c4de081b9b61e8388aaeb\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"56795c89a69c42e8bd7a2c0e634471ab\",\n          \"target\": \"1feef18ec38a44dc9c6e371ca0178fde\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"46a6d35609df431ba9947595600cfe0b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1feef18ec38a44dc9c6e371ca0178fde\",\n          \"target\": \"4d3caf89e72b46baba355d67a617ae0d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ccdb559741e84e7d9ca5017c791684b8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"98d91f18375245829c0dfebcb4e42dfd\",\n          \"target\": \"5fc82e3569ab482abc8e516b7cbb5fc1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"bc4435f943fc4fcd80fce7268f33cde1\": {\n      \"id\": \"bc4435f943fc4fcd80fce7268f33cde1\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"\\n\"\n      },\n      \"name\": \"_is_user_subscribed_at_destination\",\n      \"label\": \"_is_user_subscribed_at_destination\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"525781c9386e4ed8851fff11e33054ba\": {\n      \"id\": \"525781c9386e4ed8851fff11e33054ba\",\n      \"name\": \"options_to_unsubscribe\",\n      \"label\": \"Options To Unsubscribe\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Unsubscribe\",\n          \"value\": \"unsubscribe\"\n        },\n        {\n          \"label\": \"Cancel\",\n          \"value\": \"cancel\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"841b21ccca77443880d5cfc29fdf681f\",\n      \"isHidden\": false\n    },\n    \"2b16986f8a5b481fafcdbda7287d50cf\": {\n      \"id\": \"2b16986f8a5b481fafcdbda7287d50cf\",\n      \"name\": \"options_to_subscribe\",\n      \"label\": \"Options To Subscribe\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Subscribe\",\n          \"value\": \"subscribe\"\n        },\n        {\n          \"label\": \"Cancel\",\n          \"value\": \"cancel\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"c6b5aa558e2842f489888c64af4ef25a\",\n      \"isHidden\": false\n    },\n    \"d5e8fbc96e014647bfd037a1496659df\": {\n      \"id\": \"d5e8fbc96e014647bfd037a1496659df\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_channel_name\",\n      \"label\": \"_channel_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"100fc7e7a3cc4784932aba34c2d5609f\": {\n      \"id\": \"100fc7e7a3cc4784932aba34c2d5609f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_notifications_enabled\",\n      \"label\": \"_notifications_enabled\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"ac02ba7b97a24d278ed35fe53af88701\": {\n      \"id\": \"ac02ba7b97a24d278ed35fe53af88701\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_is_user_subscribed_at_platform\",\n      \"label\": \"_is_user_subscribed_at_platform\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"80d7582a55354849b3bf44a3fd13405f\": {\n      \"id\": \"80d7582a55354849b3bf44a3fd13405f\",\n      \"name\": \"allow_notifications_or_unsubscribe\",\n      \"label\": \"Allow Notifications Or Unsubscribe\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Cancel\",\n          \"value\": \"Cancel\"\n        },\n        {\n          \"label\": \"Allow Notifications\",\n          \"value\": \"Allow Notifications\"\n        },\n        {\n          \"label\": \"Unsubscribe\",\n          \"value\": \"Unsubscribe\",\n          \"checked\": true,\n          \"meta\": {}\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"9176b97a135d438688a15aeb76b219e0\",\n      \"isHidden\": false\n    },\n    \"d7f02a5278d5435a9f44f7d8a57643ee\": {\n      \"id\": \"d7f02a5278d5435a9f44f7d8a57643ee\",\n      \"name\": \"options_to_subscribe_and_allow_notifs\",\n      \"label\": \"Options To Subscribe And Allow Notifs\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Subscribe\",\n          \"value\": \"Subscribe\"\n        },\n        {\n          \"label\": \"Cancel\",\n          \"value\": \"Cancel\"\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"1feef18ec38a44dc9c6e371ca0178fde\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"01c2a1a5c38b1010d81b6e221f40ddf0","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_01c2a1a5c38b1010d81b6e221f40ddf0","sys_updated_by":"corayichen.xing@snc","sys_created_on":"2020-09-04 09:20:23","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"6b02871936944333b2397995b6956690\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"6b02871936944333b2397995b6956690\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"6b02871936944333b2397995b6956690\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\"},\"id\":\"53f5d329260941b38b724f3c7a62a36f\",\"name\":\"Start\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n})()\\n\"},\"id\":\"032d4cd502584f5faa7900a42b5491f8\",\"name\":\"End\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var recipient = new GlideRecord(vaVars.global_notifications_subscription_user_table);\\n    recipient.get('sys_id', vaVars.global_notifications_subscription_user);\\n\\n    // Store the platform-level global user notification preference\\n    var prefs = new sn_notification.Preferences(recipient);\\n    vaVars._is_user_subscribed_at_platform = prefs.getUserGlobalPreference();\\n    \\n    var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n    var provider = JSON.parse(sn_cs.VASystemObject.getProviderById(providerApp.providerId));\\n\\n    var cschannel = new GlideRecord('sys_cs_channel');\\n    cschannel.get('sys_id', provider.channelId);\\n    vaVars._notifications_enabled = (cschannel.getValue('enable_notification') === '1') ? true : false;\\n    \\n    var channelname = cschannel.getValue('name');\\n    if(channelname.toLowerCase().includes('teams'))\\n       vaVars._channel_name = 'Microsoft Teams';\\n    else\\n       vaVars._channel_name = channelname;\\n\\n    var mapping = new GlideRecord('sys_cs_notification_channel_configuration');\\n    mapping.get('provider', providerApp.providerId); \\n \\n    var channel = new GlideRecord('sys_notification_channel');\\n    channel.get('sys_id', mapping.getValue('notification_channel'))\\n \\n    gs.info('channel: ' + channel.getValue('name')); \\n    var result = vaSystem.preProcessNotificationSubscription(vaVars.global_notifications_subscription_provider_user_id, vaVars.global_notifications_subscription_channel_id);\\n    var dests = prefs.getDestinationsByChannel(channel);\\n    if (dests.length == 0) {\\n        gs.error('destination preference does not exist');\\n        vaVars._is_user_subscribed_at_destination = false;\\n    } else {\\n        vaVars._is_user_subscribed_at_destination = dests[0].isActive();\\n    }\\n    if(result) vaSystem.postProcessNotificationSubscription();\\n})()\\n\",\"id\":\"a4f03f82b63b4c57b3a2b9b77c791f7d\",\"name\":\"Is user subscribed to notifications?\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Is user subscribed at destination-level?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Notifications Disabled\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars._notifications_enabled === false;\\n})()\\n\"},\"id\":\"ac67e3be8fbd439f9a799f71ac5c6a70\",\"name\":\"Notifications Disabled\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Subscribed\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._notifications_enabled === true && vaVars._is_user_subscribed_at_destination === true;\\n})()\\n\"},\"id\":\"f4250a6afed54e18b078410bc004ee90\",\"name\":\"Subscribed\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Unsubscribed\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._notifications_enabled === true && vaVars._is_user_subscribed_at_destination === false;\\n})()\\n\"},\"id\":\"cd38cfa54bc44c96bc2672cc8ac55789\",\"name\":\"Unsubscribed\"}],\"id\":\"39608056633f49b090c97c323d3b70c0\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"841b21ccca77443880d5cfc29fdf681f\",\"name\":\"Options to unsubscribe\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\"},\"variable_id\":\"525781c9386e4ed8851fff11e33054ba\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(\\n        'Notifications are enabled in {0}', \\n        vaContext.getRequesterLang(), \\n        [vaVars._channel_name]\\n    );\\n})()\\n\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"c6b5aa558e2842f489888c64af4ef25a\",\"name\":\"Options to subscribe\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\"},\"variable_id\":\"2b16986f8a5b481fafcdbda7287d50cf\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang('Notifications are disabled in {0}', \\n        vaContext.getRequesterLang(), \\n        [vaVars._channel_name]\\n    );\\n})()\\n\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if(vaVars._notifications_enabled)\\n        return gs.getMessageLang('Your notification settings', vaContext.getRequesterLang());\\n    else\\n        return gs.getMessageLang(\\n            'Notifications are disabled by admin in {0}', \\n            vaContext.getRequesterLang(), \\n            [vaVars._channel_name]\\n        );\\n\\n})()\\n\"}],\"id\":\"cb33bc8e91f1400baaff3c4a46d10258\",\"name\":\"ServiceNow notification Settings\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Subscribe or Cancel?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Subscribe\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"options_to_subscribe=subscribe^ORvaInputs.options_to_subscribe_and_allow_notifs=Subscribe\"},\"id\":\"3b502d2f56884d52a8624e439dc3fb81\",\"name\":\"Subscribe\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Cancel\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"options_to_subscribe=cancel^ORvaInputs.options_to_subscribe_and_allow_notifs=Cancel\"},\"id\":\"9295010f81f642e2971ecb19ed2e0c63\",\"name\":\"Cancel\"}],\"id\":\"4d3caf89e72b46baba355d67a617ae0d\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Cancel or Unsubscribe?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Unsubscribe\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"options_to_unsubscribe=unsubscribe\"},\"id\":\"229f67d98ced4e1dafe5e2eb0bb5afb8\",\"name\":\"Unsubscribe\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Cancel\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"options_to_unsubscribe=cancel\"},\"id\":\"bf45af69ae2a4d6a92a9f5471377af68\",\"name\":\"Cancel\"}],\"id\":\"8e122a7e9475400d897fd862732cb8f4\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var cafContextualUtility = new CAFContextualUtility();\\n    cafContextualUtility.postProcess();\\n})()\\n\",\"id\":\"5fc82e3569ab482abc8e516b7cbb5fc1\",\"name\":\"Post processing\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var recipient = new GlideRecord(vaVars.global_notifications_subscription_user_table);\\n    recipient.get('sys_id', vaVars.global_notifications_subscription_user); \\n    var prefs = new sn_notification.Preferences(recipient);\\n \\n    var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n    var mapping = new GlideRecord('sys_cs_notification_channel_configuration');\\n    mapping.get('provider', providerApp.providerId); \\n \\n    var channel = new GlideRecord('sys_notification_channel');\\n    channel.get('sys_id', mapping.getValue('notification_channel'))\\n \\n    var result = vaSystem.preProcessNotificationSubscription(vaVars.global_notifications_subscription_provider_user_id, vaVars.global_notifications_subscription_channel_id);\\n    var dests = prefs.getDestinationsByChannel(channel);\\n    if (dests.length != 0) {\\n        for(var count=0; count < dests.length; count++){\\n           dests[count].setActive(true);\\n        }\\n    } \\n    if(result) vaSystem.postProcessNotificationSubscription();\\n    vaVars._is_user_subscribed_at_destination = true;\\n})()\\n\",\"id\":\"04b0f458ea814e17afc52c37c14ec02d\",\"name\":\"Subscribe\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var recipient = new GlideRecord(vaVars.global_notifications_subscription_user_table);\\n    recipient.get('sys_id', vaVars.global_notifications_subscription_user); \\n    var prefs = new sn_notification.Preferences(recipient);\\n\\n    var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n\\n    var mapping = new GlideRecord('sys_cs_notification_channel_configuration');\\n    mapping.get('provider', providerApp.providerId); \\n \\n    var channel = new GlideRecord('sys_notification_channel');\\n    channel.get('sys_id', mapping.getValue('notification_channel'))\\n \\n    gs.info('channel: ' + channel.getValue('name')); \\n    var result = vaSystem.preProcessNotificationSubscription(vaVars.global_notifications_subscription_provider_user_id, vaVars.global_notifications_subscription_channel_id);\\n    var dests = prefs.getDestinationsByChannel(channel);\\n    if (dests.length != 0) {\\n        for(var count=0; count < dests.length; count++){\\n           dests[count].setActive(false);\\n        }\\n    } \\n    if(result) vaSystem.postProcessNotificationSubscription();\\n})()\\n\",\"id\":\"a814f144cfd047cbbe0ca5842885f013\",\"name\":\"Unsubscribe\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.expireNotificationOnUnsubscribe();\\n})()\\n\",\"id\":\"dff165ba61e24926a945c3a7a6571457\",\"name\":\"Update Notification State to expired\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\"}],\"id\":\"fc2dcfe7223c4a859374764db95c0880\",\"name\":\"Resume conversation message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\"}],\"id\":\"4adb1431988c438bb77725bbb6b1031f\",\"name\":\"Resume conversation message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Active conversation\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\\n\"},\"id\":\"390f35aed79546d38c6875e2d9dd1f9d\",\"name\":\"Active conversation\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No conversation\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_ca_keyword_as_default_topic;\\n})()\\n\"},\"id\":\"3e4873f5b3d84428895067940ce8752a\",\"name\":\"No conversation\"}],\"id\":\"7d09141b52324d3c8f8097304f66f2e8\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_topic_switch = true;\\n    vaVars.global_clicked_value = 'Cancel';\\n    vaSystem.isContextualActionApplicable('Help', vaContext.providerAppId, vaContext.providerUserId); \\n    vaSystem.switchTopic('b20fd17b532210105498ddeeff7b12b7');\\n})()\\n\",\"id\":\"7bdf054364b84b92aebb1c3ab7868d6e\",\"name\":\"Switch to help topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Active conversation\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\\n\"},\"id\":\"6a4511eb6ae94e7ebb3018c4a5f7c7ce\",\"name\":\"Active conversation\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No conversation\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_ca_keyword_as_default_topic;\\n})()\\n\"},\"id\":\"f1fb66a47b734ac39301588c174b3bde\",\"name\":\"No conversation\"}],\"id\":\"0843a59370e34269ac69647c950510e1\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_topic_switch = true;\\n    vaVars.global_clicked_value = 'Cancel';\\n    vaSystem.isContextualActionApplicable('Help', vaContext.providerAppId, vaContext.providerUserId); \\n    vaSystem.switchTopic('b20fd17b532210105498ddeeff7b12b7');\\n})()\",\"id\":\"da6a24ec164b4756bcd4e07ca5695589\",\"name\":\"Switch to help topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Are platform-level notifs enabled?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Enabled\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._is_user_subscribed_at_platform === true;\\n})()\\n\"},\"id\":\"32c1cd45511d417da189122e35f61da3\",\"name\":\"Enabled\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Not enabled\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._is_user_subscribed_at_platform === false;\\n})()\\n\"},\"id\":\"9470bc4a1ce946afb8de002aea8e7491\",\"name\":\"Not enabled\"}],\"id\":\"09c2cf1595a2464b949ae89d2f575ac5\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(\\n        'Notifications are enabled in {0}, but you have disabled all notifications in your Notification preferences.', \\n        vaContext.getRequesterLang(), \\n        [vaVars._channel_name]\\n    );\\n})()\\n\"}],\"id\":\"ad4ea27084c141e68705f298939d4726\",\"name\":\"Notifications enabled in Teams message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Allow, Cancel, or Unsubscribe?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Allow Notifications\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"allow_notifications_or_unsubscribe=Allow Notifications\"},\"id\":\"65e4831a2ab14385a28c0194ece38000\",\"name\":\"Allow Notifications\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Unsubscribe\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"allow_notifications_or_unsubscribe=Unsubscribe\"},\"id\":\"65ee6a1eac1443fb88739e88abf2efd8\",\"name\":\"Unsubscribe\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Cancel\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"allow_notifications_or_unsubscribe=Cancel\"},\"id\":\"4c242180bb634cd58b80430ae3156db7\",\"name\":\"Cancel\"}],\"id\":\"c8432eb6caa8473bb62ff27a42963950\",\"goal_id\":\"primary\"},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"9176b97a135d438688a15aeb76b219e0\",\"name\":\"Allow notifications or unsubscribe\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"80d7582a55354849b3bf44a3fd13405f\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:eea2a165c38b1010d81b6e221f40dd74:node:9176b97a135d438688a15aeb76b219e0:field:Message\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    // Get user's global notification preference\\n    var recipient = new GlideRecord(vaVars.global_notifications_subscription_user_table);\\n    recipient.get('sys_id', vaVars.global_notifications_subscription_user);\\n    var prefs = new sn_notification.Preferences(recipient);\\n    prefs.setUserGlobalPreference(true);\\n})()\\n\",\"id\":\"1295316376ba47d2a9e0c989ec599eb5\",\"name\":\"User global pref to allow notifications\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Your notification preferences have been updated. You can now receive notifications in your selected channels.\\\", vaContext.getRequesterLang())\"}],\"id\":\"2f667d0b5971421f97288f12de4d9b82\",\"name\":\"Notification preferences are updated\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(\\n        'You can now receive notifications in {0}. To unsubscribe again, type \\\\'{1}\\\\'.',\\n        vaContext.getRequesterLang(),\\n        [vaVars._channel_name, vaVars.global_notifications_keyword]\\n    );\\n})()\\n\"}],\"id\":\"3a3cf7772e5a4571b4e13f14d34fbfe4\",\"name\":\"Subscription confirmation message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Are platform-level notifs enabled?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Enabled\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._is_user_subscribed_at_platform === true;\\n})()\\n\"},\"id\":\"7cd6771e2c3b45d097e90048da4bb1b5\",\"name\":\"Enabled\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Not enabled\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._is_user_subscribed_at_platform === false;\\n})()\\n\"},\"id\":\"5de9ed0f7f9d4a579fb9c24faf43eeb3\",\"name\":\"Not enabled\"}],\"id\":\"1d9dbd383eb543938405ebce9763baba\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Are platform-level notifs enabled?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Enabled\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._is_user_subscribed_at_platform === true;\\n})()\\n\"},\"id\":\"cecea7b1d07a4066b208c88e19562755\",\"name\":\"Enabled\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Not enabled\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._is_user_subscribed_at_platform === false;\\n})()\\n\"},\"id\":\"748829bfc16f4de7b38089bea99524db\",\"name\":\"Not enabled\"}],\"id\":\"035e517579e24f919375e124b6c31ab7\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang('Notifications are disabled in {0}', \\n        vaContext.getRequesterLang(), \\n        [vaVars._channel_name]\\n    );\\n})()\\n\"}],\"id\":\"56795c89a69c42e8bd7a2c0e634471ab\",\"name\":\"Notifications are disabled message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"1feef18ec38a44dc9c6e371ca0178fde\",\"name\":\"Options to subscribe and allow notifs\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"d7f02a5278d5435a9f44f7d8a57643ee\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Would you like to subscribe to notifications? This action enables notifications globally, so that you can receive notifications on your selected channels.\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(\\n        'You are now unsubscribed and will no longer get notifications in {0}. To subscribe again, type \\\\'{1}\\\\'.',\\n        vaContext.getRequesterLang(),\\n        [vaVars._channel_name, vaVars.global_notifications_keyword]\\n    );\\n})()\"}],\"id\":\"98d91f18375245829c0dfebcb4e42dfd\",\"name\":\"Unsubscription confirmation message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"c8432eb6caa8473bb62ff27a42963950\",\"target_node_id\":\"1295316376ba47d2a9e0c989ec599eb5\",\"branch_id\":\"65e4831a2ab14385a28c0194ece38000\",\"id\":\"eed6f1abacfd402ab45e75054e5bbef5\",\"name\":\"65e4831a2ab14385a28c0194ece38000\"},{\"type\":\"Edge\",\"source_node_id\":\"4d3caf89e72b46baba355d67a617ae0d\",\"target_node_id\":\"04b0f458ea814e17afc52c37c14ec02d\",\"branch_id\":\"3b502d2f56884d52a8624e439dc3fb81\",\"id\":\"717f27d0608a40d9900ea26e7436494e\",\"name\":\"3b502d2f56884d52a8624e439dc3fb81\"},{\"type\":\"Edge\",\"source_node_id\":\"3a3cf7772e5a4571b4e13f14d34fbfe4\",\"target_node_id\":\"1d9dbd383eb543938405ebce9763baba\",\"id\":\"d19a70a520cf4dac81d3b6054094346f\"},{\"type\":\"Edge\",\"source_node_id\":\"2f667d0b5971421f97288f12de4d9b82\",\"target_node_id\":\"5fc82e3569ab482abc8e516b7cbb5fc1\",\"id\":\"1310d96f06524102bdff223d95ec0d58\"},{\"type\":\"Edge\",\"source_node_id\":\"dff165ba61e24926a945c3a7a6571457\",\"target_node_id\":\"98d91f18375245829c0dfebcb4e42dfd\",\"id\":\"d34fa00b76e947a8bf1a4469a0b67c82\"},{\"type\":\"Edge\",\"source_node_id\":\"a814f144cfd047cbbe0ca5842885f013\",\"target_node_id\":\"dff165ba61e24926a945c3a7a6571457\",\"id\":\"7671a9646c024ad8b7ba60a7a505ce73\"},{\"type\":\"Edge\",\"source_node_id\":\"ad4ea27084c141e68705f298939d4726\",\"target_node_id\":\"9176b97a135d438688a15aeb76b219e0\",\"id\":\"06f8d0dbac3d4b65b9980871fcdb7cd1\"},{\"type\":\"Edge\",\"source_node_id\":\"53f5d329260941b38b724f3c7a62a36f\",\"target_node_id\":\"a4f03f82b63b4c57b3a2b9b77c791f7d\",\"id\":\"09e8eb106a624f9bac51c2b8da770690\"},{\"type\":\"Edge\",\"source_node_id\":\"a4f03f82b63b4c57b3a2b9b77c791f7d\",\"target_node_id\":\"cb33bc8e91f1400baaff3c4a46d10258\",\"id\":\"ffdd4bf91f4c490cbecabf8576244259\"},{\"type\":\"Edge\",\"source_node_id\":\"cb33bc8e91f1400baaff3c4a46d10258\",\"target_node_id\":\"39608056633f49b090c97c323d3b70c0\",\"id\":\"67755dfdeb5f49bc817e0bf5fcb721b6\"},{\"type\":\"Edge\",\"source_node_id\":\"c6b5aa558e2842f489888c64af4ef25a\",\"target_node_id\":\"4d3caf89e72b46baba355d67a617ae0d\",\"id\":\"73d14d9b066c4d4d9c95c9bb8a87d1c6\"},{\"type\":\"Edge\",\"source_node_id\":\"841b21ccca77443880d5cfc29fdf681f\",\"target_node_id\":\"8e122a7e9475400d897fd862732cb8f4\",\"id\":\"b1f5d992c78147b5b95acbbd2f8ef610\"},{\"type\":\"Edge\",\"source_node_id\":\"5fc82e3569ab482abc8e516b7cbb5fc1\",\"target_node_id\":\"032d4cd502584f5faa7900a42b5491f8\",\"id\":\"64a9591646cc45a888757969872829b3\"},{\"type\":\"Edge\",\"source_node_id\":\"8e122a7e9475400d897fd862732cb8f4\",\"target_node_id\":\"a814f144cfd047cbbe0ca5842885f013\",\"branch_id\":\"229f67d98ced4e1dafe5e2eb0bb5afb8\",\"id\":\"46fcdb34dbc34be6930a1952a17b703b\",\"name\":\"229f67d98ced4e1dafe5e2eb0bb5afb8\"},{\"type\":\"Edge\",\"source_node_id\":\"39608056633f49b090c97c323d3b70c0\",\"target_node_id\":\"5fc82e3569ab482abc8e516b7cbb5fc1\",\"branch_id\":\"ac67e3be8fbd439f9a799f71ac5c6a70\",\"id\":\"89e7b512f60f463eb797ba00d880a2ef\",\"name\":\"ac67e3be8fbd439f9a799f71ac5c6a70\"},{\"type\":\"Edge\",\"source_node_id\":\"fc2dcfe7223c4a859374764db95c0880\",\"target_node_id\":\"5fc82e3569ab482abc8e516b7cbb5fc1\",\"id\":\"e54f5a03a04f436dbf9b9bcaf6b54109\"},{\"type\":\"Edge\",\"source_node_id\":\"4adb1431988c438bb77725bbb6b1031f\",\"target_node_id\":\"5fc82e3569ab482abc8e516b7cbb5fc1\",\"id\":\"ba99560a975345a1880c6ece06d97730\"},{\"type\":\"Edge\",\"source_node_id\":\"8e122a7e9475400d897fd862732cb8f4\",\"target_node_id\":\"7d09141b52324d3c8f8097304f66f2e8\",\"branch_id\":\"bf45af69ae2a4d6a92a9f5471377af68\",\"id\":\"ecd89f75262d495d80b5126b6345d88d\",\"name\":\"bf45af69ae2a4d6a92a9f5471377af68\"},{\"type\":\"Edge\",\"source_node_id\":\"7d09141b52324d3c8f8097304f66f2e8\",\"target_node_id\":\"4adb1431988c438bb77725bbb6b1031f\",\"branch_id\":\"390f35aed79546d38c6875e2d9dd1f9d\",\"id\":\"f2d16e308d3a4a22802be04698ed5660\",\"name\":\"390f35aed79546d38c6875e2d9dd1f9d\"},{\"type\":\"Edge\",\"source_node_id\":\"7d09141b52324d3c8f8097304f66f2e8\",\"target_node_id\":\"7bdf054364b84b92aebb1c3ab7868d6e\",\"branch_id\":\"3e4873f5b3d84428895067940ce8752a\",\"id\":\"3fffc5b8cc124bb2879e4010c694f15f\",\"name\":\"3e4873f5b3d84428895067940ce8752a\"},{\"type\":\"Edge\",\"source_node_id\":\"7bdf054364b84b92aebb1c3ab7868d6e\",\"target_node_id\":\"5fc82e3569ab482abc8e516b7cbb5fc1\",\"id\":\"bfdeea9e846f405f9e9a8f556ef31be2\"},{\"type\":\"Edge\",\"source_node_id\":\"4d3caf89e72b46baba355d67a617ae0d\",\"target_node_id\":\"0843a59370e34269ac69647c950510e1\",\"branch_id\":\"9295010f81f642e2971ecb19ed2e0c63\",\"id\":\"f7d7315bf7b24e7d9e2c1db4d1783a6d\",\"name\":\"9295010f81f642e2971ecb19ed2e0c63\"},{\"type\":\"Edge\",\"source_node_id\":\"0843a59370e34269ac69647c950510e1\",\"target_node_id\":\"fc2dcfe7223c4a859374764db95c0880\",\"branch_id\":\"6a4511eb6ae94e7ebb3018c4a5f7c7ce\",\"id\":\"4297849d0ee148d383fb8bb1d8999a70\",\"name\":\"6a4511eb6ae94e7ebb3018c4a5f7c7ce\"},{\"type\":\"Edge\",\"source_node_id\":\"0843a59370e34269ac69647c950510e1\",\"target_node_id\":\"da6a24ec164b4756bcd4e07ca5695589\",\"branch_id\":\"f1fb66a47b734ac39301588c174b3bde\",\"id\":\"84831034a4774c5a945424638f72ac54\",\"name\":\"f1fb66a47b734ac39301588c174b3bde\"},{\"type\":\"Edge\",\"source_node_id\":\"da6a24ec164b4756bcd4e07ca5695589\",\"target_node_id\":\"5fc82e3569ab482abc8e516b7cbb5fc1\",\"id\":\"2063097a82ce48acb950ef2141e3f0b4\"},{\"type\":\"Edge\",\"source_node_id\":\"39608056633f49b090c97c323d3b70c0\",\"target_node_id\":\"09c2cf1595a2464b949ae89d2f575ac5\",\"branch_id\":\"f4250a6afed54e18b078410bc004ee90\",\"id\":\"977409c746874552b537468bd049a060\",\"name\":\"f4250a6afed54e18b078410bc004ee90\"},{\"type\":\"Edge\",\"source_node_id\":\"09c2cf1595a2464b949ae89d2f575ac5\",\"target_node_id\":\"841b21ccca77443880d5cfc29fdf681f\",\"branch_id\":\"32c1cd45511d417da189122e35f61da3\",\"id\":\"ffafdad543d84608a10ac3ce115974d0\",\"name\":\"32c1cd45511d417da189122e35f61da3\"},{\"type\":\"Edge\",\"source_node_id\":\"09c2cf1595a2464b949ae89d2f575ac5\",\"target_node_id\":\"ad4ea27084c141e68705f298939d4726\",\"branch_id\":\"9470bc4a1ce946afb8de002aea8e7491\",\"id\":\"12b9172c9bf84015a6fae10a3058c32d\",\"name\":\"9470bc4a1ce946afb8de002aea8e7491\"},{\"type\":\"Edge\",\"source_node_id\":\"c8432eb6caa8473bb62ff27a42963950\",\"target_node_id\":\"a814f144cfd047cbbe0ca5842885f013\",\"branch_id\":\"65ee6a1eac1443fb88739e88abf2efd8\",\"id\":\"14f50ed5a7574968b91009e57c5f9dc1\",\"name\":\"65ee6a1eac1443fb88739e88abf2efd8\"},{\"type\":\"Edge\",\"source_node_id\":\"9176b97a135d438688a15aeb76b219e0\",\"target_node_id\":\"c8432eb6caa8473bb62ff27a42963950\",\"id\":\"7d1b1eba197748ae995dc341310da495\"},{\"type\":\"Edge\",\"source_node_id\":\"c8432eb6caa8473bb62ff27a42963950\",\"target_node_id\":\"7d09141b52324d3c8f8097304f66f2e8\",\"branch_id\":\"4c242180bb634cd58b80430ae3156db7\",\"id\":\"d20143790b964d34ae03c2d83ae7d0c0\",\"name\":\"4c242180bb634cd58b80430ae3156db7\"},{\"type\":\"Edge\",\"source_node_id\":\"1295316376ba47d2a9e0c989ec599eb5\",\"target_node_id\":\"2f667d0b5971421f97288f12de4d9b82\",\"id\":\"dc834b85b38947c99362e1ab74bd3a71\"},{\"type\":\"Edge\",\"source_node_id\":\"04b0f458ea814e17afc52c37c14ec02d\",\"target_node_id\":\"3a3cf7772e5a4571b4e13f14d34fbfe4\",\"id\":\"be7dd0b2cad4456485927549d5eb230b\"},{\"type\":\"Edge\",\"source_node_id\":\"1d9dbd383eb543938405ebce9763baba\",\"target_node_id\":\"5fc82e3569ab482abc8e516b7cbb5fc1\",\"branch_id\":\"7cd6771e2c3b45d097e90048da4bb1b5\",\"id\":\"9ed77966bed843ec9d08068480314225\",\"name\":\"7cd6771e2c3b45d097e90048da4bb1b5\"},{\"type\":\"Edge\",\"source_node_id\":\"1d9dbd383eb543938405ebce9763baba\",\"target_node_id\":\"1295316376ba47d2a9e0c989ec599eb5\",\"branch_id\":\"5de9ed0f7f9d4a579fb9c24faf43eeb3\",\"id\":\"dcac97194f3444ee977740709c95db30\",\"name\":\"5de9ed0f7f9d4a579fb9c24faf43eeb3\"},{\"type\":\"Edge\",\"source_node_id\":\"39608056633f49b090c97c323d3b70c0\",\"target_node_id\":\"035e517579e24f919375e124b6c31ab7\",\"branch_id\":\"cd38cfa54bc44c96bc2672cc8ac55789\",\"id\":\"90bddf6583604b0f9d1dcf46876fb76c\",\"name\":\"cd38cfa54bc44c96bc2672cc8ac55789\"},{\"type\":\"Edge\",\"source_node_id\":\"035e517579e24f919375e124b6c31ab7\",\"target_node_id\":\"c6b5aa558e2842f489888c64af4ef25a\",\"branch_id\":\"cecea7b1d07a4066b208c88e19562755\",\"id\":\"93b6c0ba4d154284bf8558d59ad3445e\",\"name\":\"cecea7b1d07a4066b208c88e19562755\"},{\"type\":\"Edge\",\"source_node_id\":\"035e517579e24f919375e124b6c31ab7\",\"target_node_id\":\"56795c89a69c42e8bd7a2c0e634471ab\",\"branch_id\":\"748829bfc16f4de7b38089bea99524db\",\"id\":\"fee90a5e22fb4062b8b0651cd5edbfd9\",\"name\":\"748829bfc16f4de7b38089bea99524db\"},{\"type\":\"Edge\",\"source_node_id\":\"56795c89a69c42e8bd7a2c0e634471ab\",\"target_node_id\":\"1feef18ec38a44dc9c6e371ca0178fde\",\"id\":\"3fb006ce380c4de081b9b61e8388aaeb\"},{\"type\":\"Edge\",\"source_node_id\":\"1feef18ec38a44dc9c6e371ca0178fde\",\"target_node_id\":\"4d3caf89e72b46baba355d67a617ae0d\",\"id\":\"46a6d35609df431ba9947595600cfe0b\"},{\"type\":\"Edge\",\"source_node_id\":\"98d91f18375245829c0dfebcb4e42dfd\",\"target_node_id\":\"5fc82e3569ab482abc8e516b7cbb5fc1\",\"id\":\"ccdb559741e84e7d9ca5017c791684b8\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"_is_user_subscribed_at_destination\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"\\n\"},\"list\":false,\"id\":\"bc4435f943fc4fcd80fce7268f33cde1\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"_channel_name\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"d5e8fbc96e014647bfd037a1496659df\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"_notifications_enabled\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"100fc7e7a3cc4784932aba34c2d5609f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"_is_user_subscribed_at_platform\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"ac02ba7b97a24d278ed35fe53af88701\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Unsubscribe\",\"element\":\"unsubscribe\"},{\"name\":\"Cancel\",\"element\":\"cancel\"}],\"id\":\"525781c9386e4ed8851fff11e33054ba\",\"name\":\"options_to_unsubscribe\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Subscribe\",\"element\":\"subscribe\"},{\"name\":\"Cancel\",\"element\":\"cancel\"}],\"id\":\"2b16986f8a5b481fafcdbda7287d50cf\",\"name\":\"options_to_subscribe\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Cancel\",\"element\":\"Cancel\"},{\"name\":\"Allow Notifications\",\"element\":\"Allow Notifications\"},{\"name\":\"Unsubscribe\",\"element\":\"Unsubscribe\"}],\"id\":\"80d7582a55354849b3bf44a3fd13405f\",\"name\":\"allow_notifications_or_unsubscribe\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Subscribe\",\"element\":\"Subscribe\"},{\"name\":\"Cancel\",\"element\":\"Cancel\"}],\"id\":\"d7f02a5278d5435a9f44f7d8a57643ee\",\"name\":\"options_to_subscribe_and_allow_notifs\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"{mode=script, value=(function execute() {\\n    return false;\\n})()\\n}\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"eea2a165c38b1010d81b6e221f40dd74\",\"name\":\"_notification_subscribe_unsubscribe_\",\"key_phrases\":[\"_notification_subscribe_unsubscribe_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":false,\"csTopicId\":\"c9c2a1a5c38b1010d81b6e221f40ddec\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_notification_subscribe_unsubscribe_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"eea2a165c38b1010d81b6e221f40dd74","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/c9c2a1a5c38b1010d81b6e221f40ddec","value":"c9c2a1a5c38b1010d81b6e221f40ddec"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"37","sys_updated_on":"2024-04-02 05:00:24","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.55\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"641b8fb0d39247f4884e501e76154043\": {\n          \"id\": \"641b8fb0d39247f4884e501e76154043\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"516365e659c04fbf83f9401ab0d6ca9b\": {\n          \"id\": \"516365e659c04fbf83f9401ab0d6ca9b\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          }\n        },\n        \"59422c132f6f49c68acb7d78b1a649b8\": {\n          \"id\": \"59422c132f6f49c68acb7d78b1a649b8\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f7ef9774d8874896a5632819151cd2a4\": {\n          \"id\": \"f7ef9774d8874896a5632819151cd2a4\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Switch to Max Wait Topic\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {   \\n    vaSystem.switchTopic(vaVars.topicName);\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"27d9c940555b455daa3485857f765780\": {\n          \"id\": \"27d9c940555b455daa3485857f765780\",\n          \"name\": \"Get Max Wait Topic Name\",\n          \"script\": \"(function execute() {\\n    /* return 'a default value'; */\\n    var workItemGr = new GlideRecord('awa_work_item');\\n    workItemGr.addQuery('document_id', vaSystem.getInteractionSysId());\\n    workItemGr.query();\\n    workItemGr.next();\\n    var queueId = workItemGr.getValue('queue');\\n\\n    var queueTriggerGr = new GlideRecord('awa_queue_trigger');\\n    queueTriggerGr.addQuery('trigger_type', 'max_wait');\\n    queueTriggerGr.addQuery('queue', queueId)\\n    queueTriggerGr.query();\\n    queueTriggerGr.next();\\n\\n    var maxWaitTopic = queueTriggerGr.getDisplayValue('trigger_topic');\\n    vaVars.topicName = maxWaitTopic;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"068be3cb46b94184997a99d1897aceac\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Proceed to topic?\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No agents are available, what would you like to do?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"d52ea43846b34544a8d41d26243182b3\",\n          \"id\": \"068be3cb46b94184997a99d1897aceac\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    options.push({'value': 'yes', 'label': gs.getMessageLang(\\\"Proceed to {0}\\\", vaContext.getRequesterLang(), [vaVars.topicName])});\\n    options.push({'value': 'no', 'label': gs.getMessageLang(\\\"End conversation\\\", vaContext.getRequesterLang())});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"There is a technical error.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    options.push({'value': 'yes', 'label': gs.getMessageLang(\\\"Proceed to {0}\\\", vaContext.getRequesterLang(), [vaVars.topicName])});\\n    options.push({'value': 'no', 'label': gs.getMessageLang(\\\"End conversation\\\", vaContext.getRequesterLang())});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"b31288daa9f6466ca31957f0bcfa378c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"27d9c940555b455daa3485857f765780\",\n          \"target\": \"068be3cb46b94184997a99d1897aceac\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"afd2a761ca564dfaa1bdcd06cf8a10b3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f7ef9774d8874896a5632819151cd2a4\",\n          \"target\": \"516365e659c04fbf83f9401ab0d6ca9b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"547adf75968a4f44b44c9d7b527c1db6\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"59422c132f6f49c68acb7d78b1a649b8\",\n          \"target\": \"f7ef9774d8874896a5632819151cd2a4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var proceed = vaInputs.proceed_to_topic_ == 'yes' ? true : false;\\n    return proceed;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"da5541f5fb424223a45743a015a1fa72\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"641b8fb0d39247f4884e501e76154043\",\n          \"target\": \"27d9c940555b455daa3485857f765780\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7e9c8140a10d41d08e7bbaf28e1df90e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"59422c132f6f49c68acb7d78b1a649b8\",\n          \"target\": \"516365e659c04fbf83f9401ab0d6ca9b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var end = vaInputs.proceed_to_topic_ == 'no' ? true : false\\n    return end\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"9a612aea396b4092b89e30679447a5dd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"068be3cb46b94184997a99d1897aceac\",\n          \"target\": \"59422c132f6f49c68acb7d78b1a649b8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"f90bbe3f5b2d411b91e82b25d87afb9b\": {\n      \"id\": \"f90bbe3f5b2d411b91e82b25d87afb9b\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return null;\\n})()\\n\"\n      },\n      \"name\": \"topicName\",\n      \"label\": \"topicName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d52ea43846b34544a8d41d26243182b3\": {\n      \"id\": \"d52ea43846b34544a8d41d26243182b3\",\n      \"name\": \"proceed_to_topic_\",\n      \"label\": \"Proceed To Topic?\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"068be3cb46b94184997a99d1897aceac\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"03f1000e73641110b1ee63d254f6a71c","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_03f1000e73641110b1ee63d254f6a71c","sys_updated_by":"admin","sys_created_on":"2022-07-08 17:42:08","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"d65f8d7917004462b9c97cbacf1b83ce\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"d65f8d7917004462b9c97cbacf1b83ce\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"d65f8d7917004462b9c97cbacf1b83ce\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"641b8fb0d39247f4884e501e76154043\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"516365e659c04fbf83f9401ab0d6ca9b\",\"name\":\"End\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var proceed = vaInputs.proceed_to_topic_ == 'yes' ? true : false;\\n    return proceed;\\n})()\\n\"},\"id\":\"41c42223b8344b548d92c006b9be3f32\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var end = vaInputs.proceed_to_topic_ == 'no' ? true : false\\n    return end\\n})()\\n\"},\"id\":\"0f0a178d9d734e4a9b49041eb5d5fa2f\",\"name\":\"No\"}],\"id\":\"59422c132f6f49c68acb7d78b1a649b8\",\"goal_id\":\"primary\"},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"f7ef9774d8874896a5632819151cd2a4\",\"name\":\"Switch to Max Wait Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {   \\n    vaSystem.switchTopic(vaVars.topicName);\\n})()\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    /* return 'a default value'; */\\n    var workItemGr = new GlideRecord('awa_work_item');\\n    workItemGr.addQuery('document_id', vaSystem.getInteractionSysId());\\n    workItemGr.query();\\n    workItemGr.next();\\n    var queueId = workItemGr.getValue('queue');\\n\\n    var queueTriggerGr = new GlideRecord('awa_queue_trigger');\\n    queueTriggerGr.addQuery('trigger_type', 'max_wait');\\n    queueTriggerGr.addQuery('queue', queueId)\\n    queueTriggerGr.query();\\n    queueTriggerGr.next();\\n\\n    var maxWaitTopic = queueTriggerGr.getDisplayValue('trigger_topic');\\n    vaVars.topicName = maxWaitTopic;\\n})()\\n\",\"id\":\"27d9c940555b455daa3485857f765780\",\"name\":\"Get Max Wait Topic Name\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"068be3cb46b94184997a99d1897aceac\",\"name\":\"Proceed to topic?\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"d52ea43846b34544a8d41d26243182b3\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No agents are available, what would you like to do?\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    options.push({'value': 'yes', 'label': gs.getMessageLang(\\\"Proceed to {0}\\\", vaContext.getRequesterLang(), [vaVars.topicName])});\\n    options.push({'value': 'no', 'label': gs.getMessageLang(\\\"End conversation\\\", vaContext.getRequesterLang())});\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"There is a technical error.\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    options.push({'value': 'yes', 'label': gs.getMessageLang(\\\"Proceed to {0}\\\", vaContext.getRequesterLang(), [vaVars.topicName])});\\n    options.push({'value': 'no', 'label': gs.getMessageLang(\\\"End conversation\\\", vaContext.getRequesterLang())});\\n    return options;\\n})()\\n\"},\"description\":\"\"}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"27d9c940555b455daa3485857f765780\",\"target_node_id\":\"068be3cb46b94184997a99d1897aceac\",\"id\":\"b31288daa9f6466ca31957f0bcfa378c\"},{\"type\":\"Edge\",\"source_node_id\":\"f7ef9774d8874896a5632819151cd2a4\",\"target_node_id\":\"516365e659c04fbf83f9401ab0d6ca9b\",\"id\":\"afd2a761ca564dfaa1bdcd06cf8a10b3\"},{\"type\":\"Edge\",\"source_node_id\":\"59422c132f6f49c68acb7d78b1a649b8\",\"target_node_id\":\"f7ef9774d8874896a5632819151cd2a4\",\"branch_id\":\"41c42223b8344b548d92c006b9be3f32\",\"id\":\"547adf75968a4f44b44c9d7b527c1db6\",\"name\":\"41c42223b8344b548d92c006b9be3f32\"},{\"type\":\"Edge\",\"source_node_id\":\"641b8fb0d39247f4884e501e76154043\",\"target_node_id\":\"27d9c940555b455daa3485857f765780\",\"id\":\"da5541f5fb424223a45743a015a1fa72\"},{\"type\":\"Edge\",\"source_node_id\":\"59422c132f6f49c68acb7d78b1a649b8\",\"target_node_id\":\"516365e659c04fbf83f9401ab0d6ca9b\",\"branch_id\":\"0f0a178d9d734e4a9b49041eb5d5fa2f\",\"id\":\"7e9c8140a10d41d08e7bbaf28e1df90e\",\"name\":\"0f0a178d9d734e4a9b49041eb5d5fa2f\"},{\"type\":\"Edge\",\"source_node_id\":\"068be3cb46b94184997a99d1897aceac\",\"target_node_id\":\"59422c132f6f49c68acb7d78b1a649b8\",\"id\":\"9a612aea396b4092b89e30679447a5dd\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"topicName\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return null;\\n})()\\n\"},\"list\":false,\"id\":\"f90bbe3f5b2d411b91e82b25d87afb9b\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"d52ea43846b34544a8d41d26243182b3\",\"name\":\"proceed_to_topic_\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"7dde377973641110b1ee63d254f6a719\",\"name\":\"_max_wait_topic_\",\"key_phrases\":[\"_max_wait_topic_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"description\":\"System topic for max wait trigger topic switching\",\"model_type\":\"nlu_keyword\",\"modify_confirmation_enabled\":false,\"library\":false,\"csTopicId\":\"0ff1ccca73641110b1ee63d254f6a773\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_max_wait_topic_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"7dde377973641110b1ee63d254f6a719","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/0ff1ccca73641110b1ee63d254f6a773","value":"0ff1ccca73641110b1ee63d254f6a773"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"285","sys_updated_on":"2023-03-04 21:38:56","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.45\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"2c9634bfc04c4ea5966296379e17c065\": {\n          \"id\": \"2c9634bfc04c4ea5966296379e17c065\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"113051d5446c462caff43daade91dbd3\": {\n          \"id\": \"113051d5446c462caff43daade91dbd3\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"f1484118ebe947359a3994c03a5101f9\": {\n          \"id\": \"f1484118ebe947359a3994c03a5101f9\",\n          \"name\": \"Setup\",\n          \"script\": \"(function execute() {\\n    vaVars.loggingContext = JSON.stringify(global.VAAISearchHelperTokyo.getLoggingContext(vaSystem));\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info('Starting \\\"AI Search - Fallback\\\" topic');\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a705cf135a9c497d95cf6e3586c55e6d\": {\n          \"id\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"AI Search\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"AI Search\",\n          \"reusableTopicId\": \"b19775fa536310103296ddeeff7b12ff\",\n          \"inputs\": {\n            \"search_term\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getSearchText();\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            },\n            \"search_application_configuration\": {\n              \"value\": \"\",\n              \"mode\": \"simple\",\n              \"type\": \"Reference\",\n              \"table\": \"sys_search_context_config\"\n            },\n            \"ask_another_search\": {\n              \"value\": \"true\",\n              \"mode\": \"string\",\n              \"type\": \"True/False\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"1fbf2f58ae0c4f168204e9ad97bb20d3\",\n              \"value\": \"geniussearchresults\",\n              \"mapping\": \"geniussearchresults\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"e9c0ce8836144848aa18af94f3772cf0\",\n              \"value\": \"searchresults\",\n              \"mapping\": \"searchresults\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"87a9e0bed5e74f549aee540399563dfd\",\n              \"value\": \"shouldaskinfohelpful\",\n              \"mapping\": \"shouldaskinfohelpful\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"2e023a447f0b47e8bfdc3967ed0e459a\",\n              \"value\": \"newsearchterm\",\n              \"mapping\": \"newsearchterm\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"cd03b9dc33164afc883248ba11e39464\",\n              \"value\": \"shouldrunfallbacktopic\",\n              \"mapping\": \"shouldrunfallbacktopic\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"4c5c9cf4c7a54bc7985e4f31b1e2650d\",\n              \"value\": \"searchmetadata\",\n              \"mapping\": \"searchmetadata\",\n              \"preventDisable\": false\n            }\n          ],\n          \"variableIds\": [\n            \"1fbf2f58ae0c4f168204e9ad97bb20d3\",\n            \"e9c0ce8836144848aa18af94f3772cf0\",\n            \"87a9e0bed5e74f549aee540399563dfd\",\n            \"2e023a447f0b47e8bfdc3967ed0e459a\",\n            \"cd03b9dc33164afc883248ba11e39464\",\n            \"4c5c9cf4c7a54bc7985e4f31b1e2650d\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false,\n          \"dynamicTopicBlockName\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputDynamicModal\": {},\n          \"outputDynamicModal\": {}\n        },\n        \"64dc12457b22496299731e51b66f6995\": {\n          \"id\": \"64dc12457b22496299731e51b66f6995\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"c83244c3ec9c4c0cbf77099286c0b013\": {\n          \"id\": \"c83244c3ec9c4c0cbf77099286c0b013\",\n          \"name\": \"Run Topic Discovery\",\n          \"script\": \"(function execute() {\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n        'User requested another search term: {0}', vaInputs.newsearchterm);\\n    vaSystem.topicDiscovery(vaInputs.newsearchterm);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"c694a5d2ee004e63bbecebe40427aa0c\": {\n          \"id\": \"c694a5d2ee004e63bbecebe40427aa0c\",\n          \"name\": \"Run Fallback Topic\",\n          \"script\": \"(function execute() {\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n        'User did not find results helpful.  Executing fallback topic: {0}', vaVars._setup_fallback_topic);\\n    vaSystem.switchTopic(vaVars._setup_fallback_topic);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"484428140de6441ab4de0aa6532d6bef\": {\n          \"id\": \"484428140de6441ab4de0aa6532d6bef\",\n          \"name\": \"Create Click Metrics Fallback Event\",\n          \"script\": \"(function execute() {\\n    try {\\n        var searchMetadata = vaInputs.searchmetadata;\\n        global.VAAISearchHelperVancouver.processSearchFallbackMetrics(searchMetadata, vaSystem, vaInputs, vaVars);\\n    } catch (e) {\\n        gs.warn(\\\"Error creating click metrics search fallback event: \\\" + e.toString());\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"9fb8aa05b54a42f5b01fb80f6a6f2e23\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n          \"target\": \"484428140de6441ab4de0aa6532d6bef\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"98f447d26f874f7086e621ed5c9570cf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"64dc12457b22496299731e51b66f6995\",\n          \"target\": \"113051d5446c462caff43daade91dbd3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.newsearchtermISEMPTY^vaInputs.shouldrunfallbacktopic=false\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"End Topic\"\n        },\n        {\n          \"id\": \"88235d123e42414488f2ccd78741d995\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"64dc12457b22496299731e51b66f6995\",\n          \"target\": \"c83244c3ec9c4c0cbf77099286c0b013\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.newsearchterm && \\n        vaInputs.newsearchterm.toString() !== '' && \\n        vaInputs.shouldrunfallbacktopic == 'false';\\n})()\\n\"\n          },\n          \"label\": \"Another Search\"\n        },\n        {\n          \"id\": \"e25d493ead8441e3b848d1b2cac25dea\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"64dc12457b22496299731e51b66f6995\",\n          \"target\": \"c694a5d2ee004e63bbecebe40427aa0c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.shouldrunfallbacktopic == 'true';\\n})()\\n\"\n          },\n          \"label\": \"Run Fallback\"\n        },\n        {\n          \"id\": \"7e84b8c3be74416ab4b51dffc98ac9f1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f1484118ebe947359a3994c03a5101f9\",\n          \"target\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"964a22d176a74e58a49610ac2f81e2e4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2c9634bfc04c4ea5966296379e17c065\",\n          \"target\": \"f1484118ebe947359a3994c03a5101f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3b6f517fd5f6465cb71cf47c91df937f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c83244c3ec9c4c0cbf77099286c0b013\",\n          \"target\": \"113051d5446c462caff43daade91dbd3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"462b70f172b247d4aa35e1f2842c3c62\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c694a5d2ee004e63bbecebe40427aa0c\",\n          \"target\": \"113051d5446c462caff43daade91dbd3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7afc32d69928450198993b365e0ea148\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"484428140de6441ab4de0aa6532d6bef\",\n          \"target\": \"64dc12457b22496299731e51b66f6995\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"608bcf62f2a040ba8f9f412f4e799f06\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"608bcf62f2a040ba8f9f412f4e799f06\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"6eca7c60a3914a419f9e073ed204bfc9\": {\n      \"id\": \"6eca7c60a3914a419f9e073ed204bfc9\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"startTime\",\n      \"label\": \"startTime\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"ad74d168619a47339c10940e5db48cba\": {\n      \"id\": \"ad74d168619a47339c10940e5db48cba\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogId\",\n      \"label\": \"catalogId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"79bcf748cbe446c8ac946aaee34c19a9\": {\n      \"id\": \"79bcf748cbe446c8ac946aaee34c19a9\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"reqItemId\",\n      \"label\": \"reqItemId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"ea49ecff782e44e2a8d5c2ddc3821971\": {\n      \"id\": \"ea49ecff782e44e2a8d5c2ddc3821971\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"resultsToDisplay\",\n      \"label\": \"resultsToDisplay\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1fbf2f58ae0c4f168204e9ad97bb20d3\": {\n      \"id\": \"1fbf2f58ae0c4f168204e9ad97bb20d3\",\n      \"name\": \"geniussearchresults\",\n      \"label\": \"Geniussearchresults\",\n      \"defaultValue\": \"geniussearchresults\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n      \"isHidden\": false\n    },\n    \"e9c0ce8836144848aa18af94f3772cf0\": {\n      \"id\": \"e9c0ce8836144848aa18af94f3772cf0\",\n      \"name\": \"searchresults\",\n      \"label\": \"Searchresults\",\n      \"defaultValue\": \"searchresults\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n      \"isHidden\": false\n    },\n    \"87a9e0bed5e74f549aee540399563dfd\": {\n      \"id\": \"87a9e0bed5e74f549aee540399563dfd\",\n      \"name\": \"shouldaskinfohelpful\",\n      \"label\": \"Shouldaskinfohelpful\",\n      \"defaultValue\": \"shouldaskinfohelpful\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n      \"isHidden\": false\n    },\n    \"2e023a447f0b47e8bfdc3967ed0e459a\": {\n      \"id\": \"2e023a447f0b47e8bfdc3967ed0e459a\",\n      \"name\": \"newsearchterm\",\n      \"label\": \"Newsearchterm\",\n      \"defaultValue\": \"newsearchterm\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n      \"isHidden\": false\n    },\n    \"cd03b9dc33164afc883248ba11e39464\": {\n      \"id\": \"cd03b9dc33164afc883248ba11e39464\",\n      \"name\": \"shouldrunfallbacktopic\",\n      \"label\": \"Shouldrunfallbacktopic\",\n      \"defaultValue\": \"shouldrunfallbacktopic\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n      \"isHidden\": false\n    },\n    \"4c5c9cf4c7a54bc7985e4f31b1e2650d\": {\n      \"id\": \"4c5c9cf4c7a54bc7985e4f31b1e2650d\",\n      \"name\": \"searchmetadata\",\n      \"label\": \"Searchmetadata\",\n      \"defaultValue\": \"searchmetadata\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"a705cf135a9c497d95cf6e3586c55e6d\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"0a6bfd8b53f13010af71ddeeff7b122d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_0a6bfd8b53f13010af71ddeeff7b122d","sys_updated_by":"admin","sys_created_on":"2021-08-10 16:02:44","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"260b3cdb69d44b47afec78dc9468222d\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"260b3cdb69d44b47afec78dc9468222d\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"260b3cdb69d44b47afec78dc9468222d\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"2c9634bfc04c4ea5966296379e17c065\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"113051d5446c462caff43daade91dbd3\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.loggingContext = JSON.stringify(global.VAAISearchHelperTokyo.getLoggingContext(vaSystem));\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info('Starting \\\"AI Search - Fallback\\\" topic');\\n})()\\n\",\"id\":\"f1484118ebe947359a3994c03a5101f9\",\"name\":\"Setup\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"LibraryCall\",\"type\":\"LibraryCall\",\"library_topic_name\":\"AI Search\",\"library_topic_id\":\"b19775fa536310103296ddeeff7b12ff\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"search_term\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaSystem.getSearchText();\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"search_application_configuration\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"items\":[],\"use_items\":false,\"table\":\"sys_search_context_config\"}},{\"parameter-name\":\"ask_another_search\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"true\"},\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"geniussearchresults\",\"main_topic_mapped_variable_name\":\"geniussearchresults\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"searchresults\",\"main_topic_mapped_variable_name\":\"searchresults\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"shouldaskinfohelpful\",\"main_topic_mapped_variable_name\":\"shouldaskinfohelpful\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"newsearchterm\",\"main_topic_mapped_variable_name\":\"newsearchterm\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"shouldrunfallbacktopic\",\"main_topic_mapped_variable_name\":\"shouldrunfallbacktopic\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"searchmetadata\",\"main_topic_mapped_variable_name\":\"searchmetadata\"}],\"id\":\"a705cf135a9c497d95cf6e3586c55e6d\",\"name\":\"AI Search\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"End Topic\",\"id\":\"3c04559696294f1d9827486fde5ffbf4\",\"name\":\"End Topic\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"newsearchtermISEMPTY^shouldrunfallbacktopic=false\"}},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Another Search\",\"id\":\"60eb37d995ca416bac9180a5a9817701\",\"name\":\"Another Search\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.newsearchterm && \\n        vaInputs.newsearchterm.toString() !== '' && \\n        vaInputs.shouldrunfallbacktopic == 'false';\\n})()\\n\"}},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Run Fallback\",\"id\":\"e40f015b1c1447f781697bf7ea831c68\",\"name\":\"Run Fallback\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.shouldrunfallbacktopic == 'true';\\n})()\\n\"}}],\"id\":\"64dc12457b22496299731e51b66f6995\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n        'User requested another search term: {0}', vaInputs.newsearchterm);\\n    vaSystem.topicDiscovery(vaInputs.newsearchterm);\\n})()\\n\",\"id\":\"c83244c3ec9c4c0cbf77099286c0b013\",\"name\":\"Run Topic Discovery\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n        'User did not find results helpful.  Executing fallback topic: {0}', vaVars._setup_fallback_topic);\\n    vaSystem.switchTopic(vaVars._setup_fallback_topic);\\n})()\\n\",\"id\":\"c694a5d2ee004e63bbecebe40427aa0c\",\"name\":\"Run Fallback Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    try {\\n        var searchMetadata = vaInputs.searchmetadata;\\n        global.VAAISearchHelperVancouver.processSearchFallbackMetrics(searchMetadata, vaSystem, vaInputs, vaVars);\\n    } catch (e) {\\n        gs.warn(\\\"Error creating click metrics search fallback event: \\\" + e.toString());\\n    }\\n})()\\n\",\"id\":\"484428140de6441ab4de0aa6532d6bef\",\"name\":\"Create Click Metrics Fallback Event\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"a705cf135a9c497d95cf6e3586c55e6d\",\"target_node_id\":\"484428140de6441ab4de0aa6532d6bef\",\"id\":\"9fb8aa05b54a42f5b01fb80f6a6f2e23\"},{\"type\":\"Edge\",\"source_node_id\":\"64dc12457b22496299731e51b66f6995\",\"target_node_id\":\"113051d5446c462caff43daade91dbd3\",\"branch_id\":\"3c04559696294f1d9827486fde5ffbf4\",\"id\":\"98f447d26f874f7086e621ed5c9570cf\",\"name\":\"3c04559696294f1d9827486fde5ffbf4\"},{\"type\":\"Edge\",\"source_node_id\":\"64dc12457b22496299731e51b66f6995\",\"target_node_id\":\"c83244c3ec9c4c0cbf77099286c0b013\",\"branch_id\":\"60eb37d995ca416bac9180a5a9817701\",\"id\":\"88235d123e42414488f2ccd78741d995\",\"name\":\"60eb37d995ca416bac9180a5a9817701\"},{\"type\":\"Edge\",\"source_node_id\":\"64dc12457b22496299731e51b66f6995\",\"target_node_id\":\"c694a5d2ee004e63bbecebe40427aa0c\",\"branch_id\":\"e40f015b1c1447f781697bf7ea831c68\",\"id\":\"e25d493ead8441e3b848d1b2cac25dea\",\"name\":\"e40f015b1c1447f781697bf7ea831c68\"},{\"type\":\"Edge\",\"source_node_id\":\"f1484118ebe947359a3994c03a5101f9\",\"target_node_id\":\"a705cf135a9c497d95cf6e3586c55e6d\",\"id\":\"7e84b8c3be74416ab4b51dffc98ac9f1\"},{\"type\":\"Edge\",\"source_node_id\":\"2c9634bfc04c4ea5966296379e17c065\",\"target_node_id\":\"f1484118ebe947359a3994c03a5101f9\",\"id\":\"964a22d176a74e58a49610ac2f81e2e4\"},{\"type\":\"Edge\",\"source_node_id\":\"c83244c3ec9c4c0cbf77099286c0b013\",\"target_node_id\":\"113051d5446c462caff43daade91dbd3\",\"id\":\"3b6f517fd5f6465cb71cf47c91df937f\"},{\"type\":\"Edge\",\"source_node_id\":\"c694a5d2ee004e63bbecebe40427aa0c\",\"target_node_id\":\"113051d5446c462caff43daade91dbd3\",\"id\":\"462b70f172b247d4aa35e1f2842c3c62\"},{\"type\":\"Edge\",\"source_node_id\":\"484428140de6441ab4de0aa6532d6bef\",\"target_node_id\":\"64dc12457b22496299731e51b66f6995\",\"id\":\"7afc32d69928450198993b365e0ea148\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"startTime\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return '';\\n})()\\n\"},\"list\":false,\"id\":\"6eca7c60a3914a419f9e073ed204bfc9\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"catalogId\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"ad74d168619a47339c10940e5db48cba\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"reqItemId\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"79bcf748cbe446c8ac946aaee34c19a9\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"resultsToDisplay\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"ea49ecff782e44e2a8d5c2ddc3821971\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"608bcf62f2a040ba8f9f412f4e799f06\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"geniussearchresults\",\"list\":false,\"id\":\"1fbf2f58ae0c4f168204e9ad97bb20d3\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"searchresults\",\"list\":false,\"id\":\"e9c0ce8836144848aa18af94f3772cf0\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"shouldaskinfohelpful\",\"list\":false,\"id\":\"87a9e0bed5e74f549aee540399563dfd\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"newsearchterm\",\"list\":false,\"id\":\"2e023a447f0b47e8bfdc3967ed0e459a\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"shouldrunfallbacktopic\",\"list\":false,\"id\":\"cd03b9dc33164afc883248ba11e39464\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"searchmetadata\",\"list\":false,\"id\":\"4c5c9cf4c7a54bc7985e4f31b1e2650d\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"SETUP_TOPIC\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"09cd04fce121b010f877e0ba54be20da\",\"name\":\"AI Search - Fallback\",\"key_phrases\":[\"AI Search - Fallback\",\"AI Search - Fallback\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":false,\"csTopicId\":\"426bfd8b53f13010af71ddeeff7b121b\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"AI Search - Fallback","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"09cd04fce121b010f877e0ba54be20da","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/426bfd8b53f13010af71ddeeff7b121b","value":"426bfd8b53f13010af71ddeeff7b121b"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"17","sys_updated_on":"2022-09-12 22:21:38","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"c00257d24c5a4637be598cfc14282e65\": {\n          \"id\": \"c00257d24c5a4637be598cfc14282e65\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"2b37fa38a7df4c7f8e55d2d9eaae5eaa\": {\n          \"id\": \"2b37fa38a7df4c7f8e55d2d9eaae5eaa\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"cd5c55a77f0841f48eeb68c2a857b4c2\": {\n          \"id\": \"cd5c55a77f0841f48eeb68c2a857b4c2\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"Task number\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Please enter the incident/case number.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.global_task_number);\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"67e328d7e73045f8b7d486547f15b9be\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"c01f592d56af42389dbf74ae5e655e96\": {\n          \"id\": \"c01f592d56af42389dbf74ae5e655e96\",\n          \"name\": \"Find task\",\n          \"script\": \"(function execute() {\\n    if (!gs.nil(vaVars.global_task_number)) {\\n        vaInputs.task_number = vaVars.global_task_number;\\n        vaVars.global_task_number = \\\"\\\";\\n    }\\n    var task = sn_oe_sfs.IARFlowFailureDiagnostic.findTaskInContextTable(vaInputs.task_number);\\n    if (!gs.nil(task)) {\\n        vaVars.task_number_found = true;\\n        vaVars.context_sys_id = task[\\\"context_sys_id\\\"];\\n        vaVars.task_sys_id = task[\\\"task_sys_id\\\"];\\n        vaVars.task_table_name = task[\\\"task_table_name\\\"];\\n        vaVars.duplicate_task_in_context = task[\\\"duplicate_task_in_context\\\"] === \\\"true\\\" ? true : false;\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a47653fddc844af5a1f7110b66599558\": {\n          \"id\": \"a47653fddc844af5a1f7110b66599558\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"e03e68f814f343bfb4d2d59d65d60a3f\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Re-enter task number\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"According to our records, this is not a task that was assigned to a bot user. Do you want to re-enter the task ID? \"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"6c7d68a1b05347838ed55f218bbfd8b6\",\n          \"id\": \"e03e68f814f343bfb4d2d59d65d60a3f\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"a2e0dbe5bf2445cd93170b05c3120b0e\": {\n          \"id\": \"a2e0dbe5bf2445cd93170b05c3120b0e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"25961315c8594b1c86d46f539bc4b5e2\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Task confirmation\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return \\\"I found the task with ID \\\" + vaInputs.task_number + \\\" that was initially assigned to a bot user. Are you sure this is the task you are looking for?\\\";\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"3dd02d5c90144e909aca413c7f1b303f\",\n          \"id\": \"25961315c8594b1c86d46f539bc4b5e2\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"c73487bff20b4468b9282da0138fa576\": {\n          \"id\": \"c73487bff20b4468b9282da0138fa576\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f7d2b4035ced4fc7ac78b79e67a61ae9\": {\n          \"id\": \"f7d2b4035ced4fc7ac78b79e67a61ae9\",\n          \"name\": \"Run checks for HR\",\n          \"script\": \"(function execute() {\\n    var state = sn_oe_sfs.IARFlowFailureDiagnostic.getHRCaseStateAndMessage(vaVars.context_sys_id);\\n    vaVars.task_state = state[\\\"state\\\"];\\n    vaVars.state_message = state[\\\"state_message\\\"];\\n    \\n    var languageXPrediction = sn_oe_sfs.IARFlowFailureDiagnostic.checkLanguageXPrediction(vaVars.context_sys_id, vaVars.task_sys_id, vaVars.task_table_name);\\n    vaVars.languagex_prediction_failed = languageXPrediction[\\\"failed\\\"];\\n    vaVars.languagex_prediction_failure_reason = languageXPrediction[\\\"failure_reason\\\"];\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7eb9fa76ebd146da86db18d0e62e4ff7\": {\n          \"id\": \"7eb9fa76ebd146da86db18d0e62e4ff7\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"a3c8aa82cd864c9bb4db50043166beef\": {\n          \"id\": \"a3c8aa82cd864c9bb4db50043166beef\",\n          \"name\": \"Run checks for incident\",\n          \"script\": \"(function execute() {\\n    var state = sn_oe_sfs.IARFlowFailureDiagnostic.getIncidentStateAndMessage(vaVars.context_sys_id);\\n    vaVars.task_state = state[\\\"state\\\"];\\n    vaVars.state_message = state[\\\"state_message\\\"];\\n    \\n    var agentZeroPrediction = sn_oe_sfs.IARFlowFailureDiagnostic.checkAgentZeroPrediction(vaVars.task_sys_id);\\n    vaVars.az_prediction_failed = agentZeroPrediction[\\\"failed\\\"];\\n    vaVars.az_prediction_failure_reason = agentZeroPrediction[\\\"failure_reason\\\"];\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var errors = JSON.parse(vaVars.hr_errors);\\n    return !gs.nil(errors);\\n})()\\n\"\n          }\n        },\n        \"cee0fc8293e24ef5b57d394e74271b75\": {\n          \"id\": \"cee0fc8293e24ef5b57d394e74271b75\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Result for incident\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var result = \\\"The IAR flow for this incident is currently stopped at the task processing state \\\\\\\"\\\" + vaVars.task_state + \\\".\\\\\\\" \\\";\\n    if (vaVars.task_state == \\\"Processed\\\") {\\n        result += vaVars.state_message;\\n    }\\n    else {\\n        result += \\\"The reason for this state is as follows:\\\\n\\\" + vaVars.state_message;\\n    }\\n    return result;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a8fc4e501cfc4e88bab8c8f5f955e6f3\": {\n          \"id\": \"a8fc4e501cfc4e88bab8c8f5f955e6f3\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Result for HR\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var result = \\\"The IAR flow for this HR case is currently stopped at the task processing state \\\\\\\"\\\" + vaVars.task_state + \\\".\\\\\\\" \\\";\\n    if (vaVars.task_state == \\\"Processed\\\") {\\n        result += vaVars.state_message;\\n    }\\n    else {\\n        result += \\\"The reason for this state is as follows:\\\\n\\\" + vaVars.state_message;\\n    }\\n    return result;\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8f3b27d433724ab095d90dad9a15b04a\": {\n          \"id\": \"8f3b27d433724ab095d90dad9a15b04a\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"AgentZero prediction result\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return \\\"I also ran a check on the Agent Zero prediction server, and it failed with this exception: \\\" + vaVars.intent_prediction_failure_reason;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.az_prediction_failed;\\n})()\\n\"\n          }\n        },\n        \"78088449953b476ca7ac4d1eb8a96c05\": {\n          \"id\": \"78088449953b476ca7ac4d1eb8a96c05\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"LanguageX prediction result\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return vaVars.languagex_prediction_failure_reason;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.languagex_prediction_failed;\\n})()\\n\"\n          }\n        },\n        \"d603b8a387c141aba68f58b02bf8d717\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Reroute confirmation\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Since the task was not assigned to a bot user, I can reroute you to the Diagnose IAR Issue Not Assigned topic. Would you like to proceed?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"f50bd2777572474a922116aa0232b31a\",\n          \"id\": \"d603b8a387c141aba68f58b02bf8d717\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"d9913eba45bf48078be01923f88c3326\": {\n          \"id\": \"d9913eba45bf48078be01923f88c3326\",\n          \"name\": \"Reroute to Issue Not Assigned topic\",\n          \"script\": \"(function execute() {\\n    vaVars.global_task_number = vaInputs.task_number;\\n    vaSystem.switchTopicById(\\\"38d6cec4c0499150f877e9d0ea777a1b\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"vaInputs.reroute_confirmation=reroute\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a7c508b8034945e6a20fae3156373dc7\": {\n          \"id\": \"a7c508b8034945e6a20fae3156373dc7\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Duplicate task Id message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"According to our records, we found duplicate IAR processing for this task number. Please make sure there is only 1 Business rule that triggers the IAR flow. \"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"eb7fcb2d364a4fe4bcffcbfa71b3e265\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"d6d2e461368545cfa0a1afdeb86e0d1f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a47653fddc844af5a1f7110b66599558\",\n          \"target\": \"a7c508b8034945e6a20fae3156373dc7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {   \\n    return vaVars.duplicate_task_in_context && vaVars.task_number_found;\\n})()\\n\"\n          },\n          \"label\": \"Found Duplicate Task ID\"\n        },\n        {\n          \"id\": \"e1495a583af14de78a23847e92bad15e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a2e0dbe5bf2445cd93170b05c3120b0e\",\n          \"target\": \"d603b8a387c141aba68f58b02bf8d717\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.re_enter_task_number=do_not_re_enter_id\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Do not re-enter task number\"\n        },\n        {\n          \"id\": \"5d0a2bfa1c3e49f4aab6d778dbacf7ad\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"cee0fc8293e24ef5b57d394e74271b75\",\n          \"target\": \"8f3b27d433724ab095d90dad9a15b04a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"478e6b3e6db04770983364d7f86df07b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c73487bff20b4468b9282da0138fa576\",\n          \"target\": \"7eb9fa76ebd146da86db18d0e62e4ff7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.task_confirmation=correct_task\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Correct task found\"\n        },\n        {\n          \"id\": \"7e0de5406cd541a982fde089c580b603\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c00257d24c5a4637be598cfc14282e65\",\n          \"target\": \"cd5c55a77f0841f48eeb68c2a857b4c2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2138a5269de44fc3a7de1c0aa91cf5e3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"cd5c55a77f0841f48eeb68c2a857b4c2\",\n          \"target\": \"c01f592d56af42389dbf74ae5e655e96\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cc54ce1ed8394f67b2317d783de62f64\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c01f592d56af42389dbf74ae5e655e96\",\n          \"target\": \"a47653fddc844af5a1f7110b66599558\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e2269911c5fa446bb56e81bdc80b9b59\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a47653fddc844af5a1f7110b66599558\",\n          \"target\": \"e03e68f814f343bfb4d2d59d65d60a3f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.task_number_found;\\n})()\\n\"\n          },\n          \"label\": \"Task ID not found\"\n        },\n        {\n          \"id\": \"03cf5f263fe243179b407812ad91bcf5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e03e68f814f343bfb4d2d59d65d60a3f\",\n          \"target\": \"a2e0dbe5bf2445cd93170b05c3120b0e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fa17cc773aa64dad998a027cab819309\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a2e0dbe5bf2445cd93170b05c3120b0e\",\n          \"target\": \"cd5c55a77f0841f48eeb68c2a857b4c2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.re_enter_task_number=re_enter_id\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Re-enter task number\"\n        },\n        {\n          \"id\": \"5ea9a7f9c3a2449891423c64e05bba46\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a47653fddc844af5a1f7110b66599558\",\n          \"target\": \"25961315c8594b1c86d46f539bc4b5e2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.task_number_found && !vaVars.duplicate_task_in_context;\\n})()\\n\"\n          },\n          \"label\": \"Task ID found\"\n        },\n        {\n          \"id\": \"3d00197ad3f24136b062431f28c8dab8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"25961315c8594b1c86d46f539bc4b5e2\",\n          \"target\": \"c73487bff20b4468b9282da0138fa576\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1ad2a66bf92d4a1db9b6584982cd9c26\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c73487bff20b4468b9282da0138fa576\",\n          \"target\": \"cd5c55a77f0841f48eeb68c2a857b4c2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.task_confirmation=incorrect_task\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Incorrect task found\"\n        },\n        {\n          \"id\": \"aef6b91d5bbf423ea0621af891ebb0f2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"7eb9fa76ebd146da86db18d0e62e4ff7\",\n          \"target\": \"f7d2b4035ced4fc7ac78b79e67a61ae9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return global.AutoResolutionAPI.isHRCaseTable(vaVars.task_table_name);\\n})()\\n\"\n          },\n          \"label\": \"HR case\"\n        },\n        {\n          \"id\": \"8c0481d0553d434a90d55bd4ff6ea4c5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"7eb9fa76ebd146da86db18d0e62e4ff7\",\n          \"target\": \"a3c8aa82cd864c9bb4db50043166beef\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.task_table_name == \\\"incident\\\";\\n})()\\n\"\n          },\n          \"label\": \"Incident\"\n        },\n        {\n          \"id\": \"bb8f9ebd976e4d42acc4f5c64b3ecea5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a3c8aa82cd864c9bb4db50043166beef\",\n          \"target\": \"cee0fc8293e24ef5b57d394e74271b75\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3baeab63a2fa43fd91601022949a1294\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f7d2b4035ced4fc7ac78b79e67a61ae9\",\n          \"target\": \"a8fc4e501cfc4e88bab8c8f5f955e6f3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"203ea737affb487f8a4b0b631059eff7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8f3b27d433724ab095d90dad9a15b04a\",\n          \"target\": \"2b37fa38a7df4c7f8e55d2d9eaae5eaa\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"20feaf58b9934bcaa8dfa0780896c71e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a8fc4e501cfc4e88bab8c8f5f955e6f3\",\n          \"target\": \"78088449953b476ca7ac4d1eb8a96c05\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"31842834e43a433fba00d6eeebe740ba\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"78088449953b476ca7ac4d1eb8a96c05\",\n          \"target\": \"2b37fa38a7df4c7f8e55d2d9eaae5eaa\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4b7f3f6df7804429a8872dfa678335bf\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d603b8a387c141aba68f58b02bf8d717\",\n          \"target\": \"d9913eba45bf48078be01923f88c3326\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"83f75cfae8044c5e89e9e99ae2a901b4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d9913eba45bf48078be01923f88c3326\",\n          \"target\": \"2b37fa38a7df4c7f8e55d2d9eaae5eaa\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f33d6ee054884d9cbd32c76c4f514088\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a7c508b8034945e6a20fae3156373dc7\",\n          \"target\": \"2b37fa38a7df4c7f8e55d2d9eaae5eaa\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"67e328d7e73045f8b7d486547f15b9be\": {\n      \"id\": \"67e328d7e73045f8b7d486547f15b9be\",\n      \"name\": \"task_number\",\n      \"label\": \"Task Number\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY1OTU3MDEwNjg4MiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"cd5c55a77f0841f48eeb68c2a857b4c2\",\n      \"isHidden\": false\n    },\n    \"acdeb38aa6ed4561aa528385220b653b\": {\n      \"id\": \"acdeb38aa6ed4561aa528385220b653b\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"context_sys_id\",\n      \"label\": \"context_sys_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6a05e51fa37a4cfab1ac671d01c3fe87\": {\n      \"id\": \"6a05e51fa37a4cfab1ac671d01c3fe87\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"task_number_found\",\n      \"label\": \"task_number_found\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6c7d68a1b05347838ed55f218bbfd8b6\": {\n      \"id\": \"6c7d68a1b05347838ed55f218bbfd8b6\",\n      \"name\": \"re_enter_task_number\",\n      \"label\": \"Re-enter Task Number\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Yes\",\n          \"value\": \"re_enter_id\"\n        },\n        {\n          \"label\": \"No\",\n          \"value\": \"do_not_re_enter_id\"\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"e03e68f814f343bfb4d2d59d65d60a3f\",\n      \"isHidden\": false\n    },\n    \"3dd02d5c90144e909aca413c7f1b303f\": {\n      \"id\": \"3dd02d5c90144e909aca413c7f1b303f\",\n      \"name\": \"task_confirmation\",\n      \"label\": \"Task Confirmation\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Yes\",\n          \"value\": \"correct_task\"\n        },\n        {\n          \"label\": \"No\",\n          \"value\": \"incorrect_task\"\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"25961315c8594b1c86d46f539bc4b5e2\",\n      \"isHidden\": false\n    },\n    \"59961d1ffa2146f58423171d2beadbe8\": {\n      \"id\": \"59961d1ffa2146f58423171d2beadbe8\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"task_table_name\",\n      \"label\": \"task_table_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"bafdaad545c74d6fbe081ae7c818c287\": {\n      \"id\": \"bafdaad545c74d6fbe081ae7c818c287\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"task_state\",\n      \"label\": \"task_state\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"28afa05305f745c5ae381e735c6bbbca\": {\n      \"id\": \"28afa05305f745c5ae381e735c6bbbca\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"state_message\",\n      \"label\": \"state_message\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5c401254f8ce4a05bc97b06e44b7bea0\": {\n      \"id\": \"5c401254f8ce4a05bc97b06e44b7bea0\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return [];\\n})()\\n\"\n      },\n      \"name\": \"hr_errors\",\n      \"label\": \"hr_errors\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"464be00de19e4034bedc58947ed44c81\": {\n      \"id\": \"464be00de19e4034bedc58947ed44c81\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"task_sys_id\",\n      \"label\": \"task_sys_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1e21c8bd3d6a483e94f1795e69f0adbb\": {\n      \"id\": \"1e21c8bd3d6a483e94f1795e69f0adbb\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"az_prediction_failed\",\n      \"label\": \"az_prediction_failed\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"175c88a90af141a493cd38081e230196\": {\n      \"id\": \"175c88a90af141a493cd38081e230196\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"az_prediction_failure_reason\",\n      \"label\": \"az_prediction_failure_reason\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"e9e1b15aca504d2c80059d65555ad843\": {\n      \"id\": \"e9e1b15aca504d2c80059d65555ad843\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"languagex_prediction_failed\",\n      \"label\": \"languagex_prediction_failed\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"65cc6b73639d4aa1bb550467d86ac313\": {\n      \"id\": \"65cc6b73639d4aa1bb550467d86ac313\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return \\\"\\\";\\n})()\\n\"\n      },\n      \"name\": \"languagex_prediction_failure_reason\",\n      \"label\": \"languagex_prediction_failure_reason\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f50bd2777572474a922116aa0232b31a\": {\n      \"id\": \"f50bd2777572474a922116aa0232b31a\",\n      \"name\": \"reroute_confirmation\",\n      \"label\": \"Reroute Confirmation\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Yes\",\n          \"value\": \"reroute\"\n        },\n        {\n          \"label\": \"No\",\n          \"value\": \"do_not_reroute\"\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"d603b8a387c141aba68f58b02bf8d717\",\n      \"isHidden\": false\n    },\n    \"0a7785154d8040d0b5f9370be76a3e23\": {\n      \"id\": \"0a7785154d8040d0b5f9370be76a3e23\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"global_task_number\",\n      \"label\": \"global_task_number\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"47f2e033fffc4b328b54c7605bfc08f8\": {\n      \"id\": \"47f2e033fffc4b328b54c7605bfc08f8\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"duplicate_task_in_context\",\n      \"label\": \"duplicate_task_in_context\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"0bbcdc00c09d5190f877e9d0ea777a15","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_cb_design_topic_0bbcdc00c09d5190f877e9d0ea777a15","sys_updated_by":"admin","sys_created_on":"2022-08-08 21:18:16","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"e2072a7c226e4ab1b37058acbb5b95c5\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"e2072a7c226e4ab1b37058acbb5b95c5\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"e2072a7c226e4ab1b37058acbb5b95c5\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"c00257d24c5a4637be598cfc14282e65\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"2b37fa38a7df4c7f8e55d2d9eaae5eaa\",\"name\":\"End\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"67e328d7e73045f8b7d486547f15b9be\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Please enter the incident/case number.\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"cd5c55a77f0841f48eeb68c2a857b4c2\",\"name\":\"Task number\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaVars.global_task_number);\\n})()\\n\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if (!gs.nil(vaVars.global_task_number)) {\\n        vaInputs.task_number = vaVars.global_task_number;\\n        vaVars.global_task_number = \\\"\\\";\\n    }\\n    var task = sn_oe_sfs.IARFlowFailureDiagnostic.findTaskInContextTable(vaInputs.task_number);\\n    if (!gs.nil(task)) {\\n        vaVars.task_number_found = true;\\n        vaVars.context_sys_id = task[\\\"context_sys_id\\\"];\\n        vaVars.task_sys_id = task[\\\"task_sys_id\\\"];\\n        vaVars.task_table_name = task[\\\"task_table_name\\\"];\\n        vaVars.duplicate_task_in_context = task[\\\"duplicate_task_in_context\\\"] === \\\"true\\\" ? true : false;\\n    }\\n})()\\n\",\"id\":\"c01f592d56af42389dbf74ae5e655e96\",\"name\":\"Find task\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Found Duplicate Task ID\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {   \\n    return vaVars.duplicate_task_in_context && vaVars.task_number_found;\\n})()\\n\"},\"id\":\"8011d2dacb004fcf817cdc0064d533b5\",\"name\":\"Found Duplicate Task ID\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Task ID not found\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.task_number_found;\\n})()\\n\"},\"id\":\"b04aa19f05694ff2a11c07c6e25ffaf9\",\"name\":\"Task ID not found\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Task ID found\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.task_number_found && !vaVars.duplicate_task_in_context;\\n})()\\n\"},\"id\":\"cee5f0f199584cbebbea8c8c10e984b3\",\"name\":\"Task ID found\"}],\"id\":\"a47653fddc844af5a1f7110b66599558\",\"goal_id\":\"primary\"},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"e03e68f814f343bfb4d2d59d65d60a3f\",\"name\":\"Re-enter task number\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"6c7d68a1b05347838ed55f218bbfd8b6\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"According to our records, this is not a task that was assigned to a bot user. Do you want to re-enter the task ID?\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Do not re-enter task number\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"re_enter_task_number=do_not_re_enter_id\"},\"id\":\"abf374f0312c415b9245df71cf989131\",\"name\":\"Do not re-enter task number\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Re-enter task number\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"re_enter_task_number=re_enter_id\"},\"id\":\"9f594df933974b37baf977f5ebeea4fb\",\"name\":\"Re-enter task number\"}],\"id\":\"a2e0dbe5bf2445cd93170b05c3120b0e\",\"goal_id\":\"primary\"},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"25961315c8594b1c86d46f539bc4b5e2\",\"name\":\"Task confirmation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"3dd02d5c90144e909aca413c7f1b303f\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return \\\"I found the task with ID \\\" + vaInputs.task_number + \\\" that was initially assigned to a bot user. Are you sure this is the task you are looking for?\\\";\\n})()\\n\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Correct task found\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"task_confirmation=correct_task\"},\"id\":\"d34229d6ee7040e791ffc9764da49c3f\",\"name\":\"Correct task found\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Incorrect task found\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"task_confirmation=incorrect_task\"},\"id\":\"5c66b35fecbd47feaffe18de9bdbdc57\",\"name\":\"Incorrect task found\"}],\"id\":\"c73487bff20b4468b9282da0138fa576\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var state = sn_oe_sfs.IARFlowFailureDiagnostic.getHRCaseStateAndMessage(vaVars.context_sys_id);\\n    vaVars.task_state = state[\\\"state\\\"];\\n    vaVars.state_message = state[\\\"state_message\\\"];\\n    \\n    var languageXPrediction = sn_oe_sfs.IARFlowFailureDiagnostic.checkLanguageXPrediction(vaVars.context_sys_id, vaVars.task_sys_id, vaVars.task_table_name);\\n    vaVars.languagex_prediction_failed = languageXPrediction[\\\"failed\\\"];\\n    vaVars.languagex_prediction_failure_reason = languageXPrediction[\\\"failure_reason\\\"];\\n})()\\n\",\"id\":\"f7d2b4035ced4fc7ac78b79e67a61ae9\",\"name\":\"Run checks for HR\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"HR case\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return global.AutoResolutionAPI.isHRCaseTable(vaVars.task_table_name);\\n})()\\n\"},\"id\":\"bd82354091544449a6a4222277353581\",\"name\":\"HR case\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Incident\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.task_table_name == \\\"incident\\\";\\n})()\\n\"},\"id\":\"dbea3948bd384bc98877a9e49ccc1f33\",\"name\":\"Incident\"}],\"id\":\"7eb9fa76ebd146da86db18d0e62e4ff7\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var state = sn_oe_sfs.IARFlowFailureDiagnostic.getIncidentStateAndMessage(vaVars.context_sys_id);\\n    vaVars.task_state = state[\\\"state\\\"];\\n    vaVars.state_message = state[\\\"state_message\\\"];\\n    \\n    var agentZeroPrediction = sn_oe_sfs.IARFlowFailureDiagnostic.checkAgentZeroPrediction(vaVars.task_sys_id);\\n    vaVars.az_prediction_failed = agentZeroPrediction[\\\"failed\\\"];\\n    vaVars.az_prediction_failure_reason = agentZeroPrediction[\\\"failure_reason\\\"];\\n})()\\n\",\"id\":\"a3c8aa82cd864c9bb4db50043166beef\",\"name\":\"Run checks for incident\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var errors = JSON.parse(vaVars.hr_errors);\\n    return !gs.nil(errors);\\n})()\\n\"}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var result = \\\"The IAR flow for this incident is currently stopped at the task processing state \\\\\\\"\\\" + vaVars.task_state + \\\".\\\\\\\" \\\";\\n    if (vaVars.task_state == \\\"Processed\\\") {\\n        result += vaVars.state_message;\\n    }\\n    else {\\n        result += \\\"The reason for this state is as follows:\\\\n\\\" + vaVars.state_message;\\n    }\\n    return result;\\n})()\\n\"}],\"id\":\"cee0fc8293e24ef5b57d394e74271b75\",\"name\":\"Result for incident\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var result = \\\"The IAR flow for this HR case is currently stopped at the task processing state \\\\\\\"\\\" + vaVars.task_state + \\\".\\\\\\\" \\\";\\n    if (vaVars.task_state == \\\"Processed\\\") {\\n        result += vaVars.state_message;\\n    }\\n    else {\\n        result += \\\"The reason for this state is as follows:\\\\n\\\" + vaVars.state_message;\\n    }\\n    return result;\\n})()\"}],\"id\":\"a8fc4e501cfc4e88bab8c8f5f955e6f3\",\"name\":\"Result for HR\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return \\\"I also ran a check on the Agent Zero prediction server, and it failed with this exception: \\\" + vaVars.intent_prediction_failure_reason;\\n})()\\n\"}],\"id\":\"8f3b27d433724ab095d90dad9a15b04a\",\"name\":\"AgentZero prediction result\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.az_prediction_failed;\\n})()\\n\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.languagex_prediction_failure_reason;\\n})()\\n\"}],\"id\":\"78088449953b476ca7ac4d1eb8a96c05\",\"name\":\"LanguageX prediction result\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.languagex_prediction_failed;\\n})()\\n\"},\"secure\":false},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"d603b8a387c141aba68f58b02bf8d717\",\"name\":\"Reroute confirmation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"f50bd2777572474a922116aa0232b31a\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Since the task was not assigned to a bot user, I can reroute you to the Diagnose IAR Issue Not Assigned topic. Would you like to proceed?\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_task_number = vaInputs.task_number;\\n    vaSystem.switchTopicById(\\\"38d6cec4c0499150f877e9d0ea777a1b\\\");\\n})()\\n\",\"id\":\"d9913eba45bf48078be01923f88c3326\",\"name\":\"Reroute to Issue Not Assigned topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"reroute_confirmation=reroute\"}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"According to our records, we found duplicate IAR processing for this task number. Please make sure there is only 1 Business rule that triggers the IAR flow.\\\", vaContext.getRequesterLang())\"}],\"id\":\"a7c508b8034945e6a20fae3156373dc7\",\"name\":\"Duplicate task Id message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"a47653fddc844af5a1f7110b66599558\",\"target_node_id\":\"a7c508b8034945e6a20fae3156373dc7\",\"branch_id\":\"8011d2dacb004fcf817cdc0064d533b5\",\"id\":\"d6d2e461368545cfa0a1afdeb86e0d1f\",\"name\":\"8011d2dacb004fcf817cdc0064d533b5\"},{\"type\":\"Edge\",\"source_node_id\":\"a2e0dbe5bf2445cd93170b05c3120b0e\",\"target_node_id\":\"d603b8a387c141aba68f58b02bf8d717\",\"branch_id\":\"abf374f0312c415b9245df71cf989131\",\"id\":\"e1495a583af14de78a23847e92bad15e\",\"name\":\"abf374f0312c415b9245df71cf989131\"},{\"type\":\"Edge\",\"source_node_id\":\"cee0fc8293e24ef5b57d394e74271b75\",\"target_node_id\":\"8f3b27d433724ab095d90dad9a15b04a\",\"id\":\"5d0a2bfa1c3e49f4aab6d778dbacf7ad\"},{\"type\":\"Edge\",\"source_node_id\":\"c73487bff20b4468b9282da0138fa576\",\"target_node_id\":\"7eb9fa76ebd146da86db18d0e62e4ff7\",\"branch_id\":\"d34229d6ee7040e791ffc9764da49c3f\",\"id\":\"478e6b3e6db04770983364d7f86df07b\",\"name\":\"d34229d6ee7040e791ffc9764da49c3f\"},{\"type\":\"Edge\",\"source_node_id\":\"c00257d24c5a4637be598cfc14282e65\",\"target_node_id\":\"cd5c55a77f0841f48eeb68c2a857b4c2\",\"id\":\"7e0de5406cd541a982fde089c580b603\"},{\"type\":\"Edge\",\"source_node_id\":\"cd5c55a77f0841f48eeb68c2a857b4c2\",\"target_node_id\":\"c01f592d56af42389dbf74ae5e655e96\",\"id\":\"2138a5269de44fc3a7de1c0aa91cf5e3\"},{\"type\":\"Edge\",\"source_node_id\":\"c01f592d56af42389dbf74ae5e655e96\",\"target_node_id\":\"a47653fddc844af5a1f7110b66599558\",\"id\":\"cc54ce1ed8394f67b2317d783de62f64\"},{\"type\":\"Edge\",\"source_node_id\":\"a47653fddc844af5a1f7110b66599558\",\"target_node_id\":\"e03e68f814f343bfb4d2d59d65d60a3f\",\"branch_id\":\"b04aa19f05694ff2a11c07c6e25ffaf9\",\"id\":\"e2269911c5fa446bb56e81bdc80b9b59\",\"name\":\"b04aa19f05694ff2a11c07c6e25ffaf9\"},{\"type\":\"Edge\",\"source_node_id\":\"e03e68f814f343bfb4d2d59d65d60a3f\",\"target_node_id\":\"a2e0dbe5bf2445cd93170b05c3120b0e\",\"id\":\"03cf5f263fe243179b407812ad91bcf5\"},{\"type\":\"Edge\",\"source_node_id\":\"a2e0dbe5bf2445cd93170b05c3120b0e\",\"target_node_id\":\"cd5c55a77f0841f48eeb68c2a857b4c2\",\"branch_id\":\"9f594df933974b37baf977f5ebeea4fb\",\"id\":\"fa17cc773aa64dad998a027cab819309\",\"name\":\"9f594df933974b37baf977f5ebeea4fb\"},{\"type\":\"Edge\",\"source_node_id\":\"a47653fddc844af5a1f7110b66599558\",\"target_node_id\":\"25961315c8594b1c86d46f539bc4b5e2\",\"branch_id\":\"cee5f0f199584cbebbea8c8c10e984b3\",\"id\":\"5ea9a7f9c3a2449891423c64e05bba46\",\"name\":\"cee5f0f199584cbebbea8c8c10e984b3\"},{\"type\":\"Edge\",\"source_node_id\":\"25961315c8594b1c86d46f539bc4b5e2\",\"target_node_id\":\"c73487bff20b4468b9282da0138fa576\",\"id\":\"3d00197ad3f24136b062431f28c8dab8\"},{\"type\":\"Edge\",\"source_node_id\":\"c73487bff20b4468b9282da0138fa576\",\"target_node_id\":\"cd5c55a77f0841f48eeb68c2a857b4c2\",\"branch_id\":\"5c66b35fecbd47feaffe18de9bdbdc57\",\"id\":\"1ad2a66bf92d4a1db9b6584982cd9c26\",\"name\":\"5c66b35fecbd47feaffe18de9bdbdc57\"},{\"type\":\"Edge\",\"source_node_id\":\"7eb9fa76ebd146da86db18d0e62e4ff7\",\"target_node_id\":\"f7d2b4035ced4fc7ac78b79e67a61ae9\",\"branch_id\":\"bd82354091544449a6a4222277353581\",\"id\":\"aef6b91d5bbf423ea0621af891ebb0f2\",\"name\":\"bd82354091544449a6a4222277353581\"},{\"type\":\"Edge\",\"source_node_id\":\"7eb9fa76ebd146da86db18d0e62e4ff7\",\"target_node_id\":\"a3c8aa82cd864c9bb4db50043166beef\",\"branch_id\":\"dbea3948bd384bc98877a9e49ccc1f33\",\"id\":\"8c0481d0553d434a90d55bd4ff6ea4c5\",\"name\":\"dbea3948bd384bc98877a9e49ccc1f33\"},{\"type\":\"Edge\",\"source_node_id\":\"a3c8aa82cd864c9bb4db50043166beef\",\"target_node_id\":\"cee0fc8293e24ef5b57d394e74271b75\",\"id\":\"bb8f9ebd976e4d42acc4f5c64b3ecea5\"},{\"type\":\"Edge\",\"source_node_id\":\"f7d2b4035ced4fc7ac78b79e67a61ae9\",\"target_node_id\":\"a8fc4e501cfc4e88bab8c8f5f955e6f3\",\"id\":\"3baeab63a2fa43fd91601022949a1294\"},{\"type\":\"Edge\",\"source_node_id\":\"8f3b27d433724ab095d90dad9a15b04a\",\"target_node_id\":\"2b37fa38a7df4c7f8e55d2d9eaae5eaa\",\"id\":\"203ea737affb487f8a4b0b631059eff7\"},{\"type\":\"Edge\",\"source_node_id\":\"a8fc4e501cfc4e88bab8c8f5f955e6f3\",\"target_node_id\":\"78088449953b476ca7ac4d1eb8a96c05\",\"id\":\"20feaf58b9934bcaa8dfa0780896c71e\"},{\"type\":\"Edge\",\"source_node_id\":\"78088449953b476ca7ac4d1eb8a96c05\",\"target_node_id\":\"2b37fa38a7df4c7f8e55d2d9eaae5eaa\",\"id\":\"31842834e43a433fba00d6eeebe740ba\"},{\"type\":\"Edge\",\"source_node_id\":\"d603b8a387c141aba68f58b02bf8d717\",\"target_node_id\":\"d9913eba45bf48078be01923f88c3326\",\"id\":\"4b7f3f6df7804429a8872dfa678335bf\"},{\"type\":\"Edge\",\"source_node_id\":\"d9913eba45bf48078be01923f88c3326\",\"target_node_id\":\"2b37fa38a7df4c7f8e55d2d9eaae5eaa\",\"id\":\"83f75cfae8044c5e89e9e99ae2a901b4\"},{\"type\":\"Edge\",\"source_node_id\":\"a7c508b8034945e6a20fae3156373dc7\",\"target_node_id\":\"2b37fa38a7df4c7f8e55d2d9eaae5eaa\",\"id\":\"f33d6ee054884d9cbd32c76c4f514088\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"context_sys_id\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"acdeb38aa6ed4561aa528385220b653b\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"task_number_found\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"6a05e51fa37a4cfab1ac671d01c3fe87\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"task_table_name\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"59961d1ffa2146f58423171d2beadbe8\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"task_state\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"bafdaad545c74d6fbe081ae7c818c287\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"state_message\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"28afa05305f745c5ae381e735c6bbbca\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"hr_errors\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return [];\\n})()\\n\"},\"list\":false,\"id\":\"5c401254f8ce4a05bc97b06e44b7bea0\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"task_sys_id\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"464be00de19e4034bedc58947ed44c81\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"az_prediction_failed\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"1e21c8bd3d6a483e94f1795e69f0adbb\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"az_prediction_failure_reason\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"175c88a90af141a493cd38081e230196\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"languagex_prediction_failed\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"e9e1b15aca504d2c80059d65555ad843\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"languagex_prediction_failure_reason\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return \\\"\\\";\\n})()\\n\"},\"list\":false,\"id\":\"65cc6b73639d4aa1bb550467d86ac313\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"global_task_number\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"0a7785154d8040d0b5f9370be76a3e23\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"duplicate_task_in_context\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"47f2e033fffc4b328b54c7605bfc08f8\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"task_number\",\"list\":false,\"id\":\"67e328d7e73045f8b7d486547f15b9be\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Yes\",\"element\":\"re_enter_id\"},{\"name\":\"No\",\"element\":\"do_not_re_enter_id\"}],\"id\":\"6c7d68a1b05347838ed55f218bbfd8b6\",\"name\":\"re_enter_task_number\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Yes\",\"element\":\"correct_task\"},{\"name\":\"No\",\"element\":\"incorrect_task\"}],\"id\":\"3dd02d5c90144e909aca413c7f1b303f\",\"name\":\"task_confirmation\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Yes\",\"element\":\"reroute\"},{\"name\":\"No\",\"element\":\"do_not_reroute\"}],\"id\":\"f50bd2777572474a922116aa0232b31a\",\"name\":\"reroute_confirmation\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"53b1b0e79761011018b2fa98c253afcc\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"d78d4fdac0cdd950f877e9d0ea777a14\",\"name\":\"Diagnose IAR Flow Failure\",\"key_phrases\":[\"Diagnose IAR Flow Failure\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":false,\"csTopicId\":\"c3bc9400c09d5190f877e9d0ea777a39\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Diagnose IAR Flow Failure","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"design_topic_id":"d78d4fdac0cdd950f877e9d0ea777a14","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/c3bc9400c09d5190f877e9d0ea777a39","value":"c3bc9400c09d5190f877e9d0ea777a39"},"sys_created_by":"maint","sys_policy":""},{"sys_mod_count":"0","sys_updated_on":"2024-05-28 21:32:38","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.66\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"548c4fc520344eeaa7b38612e22d0cfc\": {\n          \"id\": \"548c4fc520344eeaa7b38612e22d0cfc\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"92547723c85a4393ab6a80b5b0ecc42b\": {\n          \"id\": \"92547723c85a4393ab6a80b5b0ecc42b\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"e35cbebcc9844e2f994bdce2ffe036bc\": {\n          \"id\": \"e35cbebcc9844e2f994bdce2ffe036bc\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Survey\",\n          \"fields\": [],\n          \"reusableTopicChoice\": \"Survey-LLM\",\n          \"reusableTopicId\": \"77a94e44ff2202101b82157c03cb147e\",\n          \"inputs\": {\n            \"surveyid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars._topic_prechat_survey}}\",\n                        \"displayValue\": \"vaVars_topic_prechat_survey\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            },\n            \"confirmationneeded\": {\n              \"value\": \"(function execute() {\\n   return vaVars._topic_show_prechat_summary + '';\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            },\n            \"savequestionstocontext\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"text\": \"true\"\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            }\n          },\n          \"variableIds\": [],\n          \"outputs\": [],\n          \"outdatedNote\": false,\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"useTemplateTopic\": false\n        },\n        \"32ea8808a1b34b56bd11551a98deda91\": {\n          \"id\": \"32ea8808a1b34b56bd11551a98deda91\",\n          \"name\": \"Set Search Text\",\n          \"script\": \"(function execute() {\\n      vaSystem.setSearchTextFromPreChat();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"ad8f22df31fd4070ad1e8ccc69c73d0a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"548c4fc520344eeaa7b38612e22d0cfc\",\n          \"target\": \"e35cbebcc9844e2f994bdce2ffe036bc\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"974a593fadf24481abf983e243168e75\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e35cbebcc9844e2f994bdce2ffe036bc\",\n          \"target\": \"32ea8808a1b34b56bd11551a98deda91\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0566171160d64ca5a82cc554d6e9bf18\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"32ea8808a1b34b56bd11551a98deda91\",\n          \"target\": \"92547723c85a4393ab6a80b5b0ecc42b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"ab0a7df75bee4c47b1c9674f22fa9244\": {\n      \"id\": \"ab0a7df75bee4c47b1c9674f22fa9244\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_prechat_survey\",\n      \"label\": \"_topic_prechat_survey\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"dd16bca488d34fc59716cdbd396de6a2\": {\n      \"id\": \"dd16bca488d34fc59716cdbd396de6a2\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_show_prechat_summary\",\n      \"label\": \"_topic_show_prechat_summary\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"0fbf8e0cff2202101b82157c03cb1405","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_0fbf8e0cff2202101b82157c03cb1405","sys_updated_by":"admin","sys_created_on":"2024-05-28 21:32:38","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"610bd5a0e48c44c09da5d5bd98a37ec4\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"610bd5a0e48c44c09da5d5bd98a37ec4\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"610bd5a0e48c44c09da5d5bd98a37ec4\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"548c4fc520344eeaa7b38612e22d0cfc\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"92547723c85a4393ab6a80b5b0ecc42b\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Survey-LLM\",\"library_topic_id\":\"77a94e44ff2202101b82157c03cb147e\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"surveyid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars._topic_prechat_survey}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"confirmationneeded\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return vaVars._topic_show_prechat_summary + '';\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"savequestionstocontext\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"true\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"e35cbebcc9844e2f994bdce2ffe036bc\",\"name\":\"Survey\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n      vaSystem.setSearchTextFromPreChat();\\n})()\\n\",\"id\":\"32ea8808a1b34b56bd11551a98deda91\",\"name\":\"Set Search Text\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"548c4fc520344eeaa7b38612e22d0cfc\",\"target_node_id\":\"e35cbebcc9844e2f994bdce2ffe036bc\",\"id\":\"ad8f22df31fd4070ad1e8ccc69c73d0a\"},{\"type\":\"Edge\",\"source_node_id\":\"e35cbebcc9844e2f994bdce2ffe036bc\",\"target_node_id\":\"32ea8808a1b34b56bd11551a98deda91\",\"id\":\"974a593fadf24481abf983e243168e75\"},{\"type\":\"Edge\",\"source_node_id\":\"32ea8808a1b34b56bd11551a98deda91\",\"target_node_id\":\"92547723c85a4393ab6a80b5b0ecc42b\",\"id\":\"0566171160d64ca5a82cc554d6e9bf18\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_topic_prechat_survey\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"ab0a7df75bee4c47b1c9674f22fa9244\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_show_prechat_summary\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"dd16bca488d34fc59716cdbd396de6a2\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"6ffb4e08ff2202101b82157c03cb1484\",\"name\":\"_prechat_survey_llm_\",\"key_phrases\":[\"_prechat_survey_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"description\":\"This topic is related to a pre-chat survey that is conducted before starting a chat session with a customer service agent. It helps in gathering necessary information about the customer's needs and preferences, enabling the agent to provide personalized and efficient support.\",\"model_type\":\"llm\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[\"e13840cf77d53110569156391e5a99ba\"],\"title\":\"_prechat_survey_\",\"library\":false,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_prechat_survey_llm_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"6ffb4e08ff2202101b82157c03cb1484","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/febf8e0cff2202101b82157c03cb1401","value":"febf8e0cff2202101b82157c03cb1401"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"212","sys_updated_on":"2024-01-31 22:56:09","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.55\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"ebb3b128dfc048b5a2e8e4c4158a912b\": {\n          \"id\": \"ebb3b128dfc048b5a2e8e4c4158a912b\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"name\": \"notification_content\",\n              \"value\": \"\",\n              \"checked\": true,\n              \"id\": \"995e361142024ec4b56345b8eb2acfca\",\n              \"disabled\": true,\n              \"referenced\": true,\n              \"type\": \"String\",\n              \"hint\": \"\"\n            }\n          ],\n          \"variableIds\": [\n            \"995e361142024ec4b56345b8eb2acfca\"\n          ]\n        },\n        \"c218875d4daf43b0bf12a1fc0daf0e78\": {\n          \"id\": \"c218875d4daf43b0bf12a1fc0daf0e78\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"45557b00255846e3b6f8493d0f4402c4\": {\n          \"id\": \"45557b00255846e3b6f8493d0f4402c4\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"903e435446d14a10a15097a363abcfd5\": {\n          \"id\": \"903e435446d14a10a15097a363abcfd5\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Notification - Web Client\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var conversationLang = vaContext.getRequesterLang();\\n\\n    // Card header variables\\n    var cardHeading = !gs.nil(notification_content.cardHeading) ? gs.getMessageLang(notification_content.cardHeading, conversationLang) : null;\\n    var cardLinkText = !gs.nil(notification_content.cardLinkText) ? gs.getMessageLang(notification_content.cardLinkText, conversationLang) : null;\\n    var cardLinkUrl = !gs.nil(notification_content.cardLinkUrl) ? notification_content.cardLinkUrl : null;\\n    \\n    // Card body variables\\n    var fields = notification_content.fields;\\n    var tableLabel = notification_content.tableLabel;\\n    var recordDisplayValue = notification_content.recordDisplayValue;\\n    var tableName = notification_content.tableName;\\n    var sysId = notification_content.recordSysId;\\n    var showRecordLink = notification_content.showRecordLink;\\n\\n    var cardFields = [];\\n    Object.keys(fields).forEach(function(a){\\n        cardFields.push({\\\"fieldLabel\\\": a, \\\"fieldValue\\\": fields[a]});\\n    });\\n\\n    var cardData = {\\n        title: !gs.nil(cardHeading) && cardHeading !== \\\"null\\\" ? cardHeading : tableLabel,\\n        subtitle: !gs.nil(cardLinkText) && cardLinkText !== \\\"null\\\" ? cardLinkText : recordDisplayValue,\\n        fields: cardFields,\\n    };\\n        \\n    if (showRecordLink) {\\n        var templatedUrl = vaSystem.applyLinkTemplate(sysId, tableName);\\n        cardData.url = !gs.nil(cardLinkUrl) && cardLinkUrl !== \\\"null\\\" ? cardLinkUrl : templatedUrl;\\n    }\\n    \\n    if (gs.nil(tableLabel))\\n        return;\\n\\n    return vaSystem.renderCard(showRecordLink ? \\\"Record Card\\\" : \\\"Record Card Without Link\\\", JSON.stringify(cardData));\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7813ee856773498699ae6e4176cfa892\": {\n          \"id\": \"7813ee856773498699ae6e4176cfa892\",\n          \"name\": \"Switch Welcome\",\n          \"script\": \"(function execute() {\\n    var greetingTopic = vaVars.global_notification_welcome_topic;\\n    if ( greetingTopic != \\\"\\\" && greetingTopic != undefined ) {\\n        vaVars.global_notification_welcome_topic = \\\"\\\";\\n        vaSystem.switchTopic(greetingTopic);\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9b22ab1b3dc34594bc3b0f83962b98f8\": {\n          \"id\": \"9b22ab1b3dc34594bc3b0f83962b98f8\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Notification - Adapters\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var conversationLang = vaContext.getRequesterLang();\\n    \\n    // Card header variables\\n    var cardHeading = !gs.nil(notification_content.cardHeading) ? gs.getMessageLang(notification_content.cardHeading, conversationLang) : null;\\n    var cardLinkText = !gs.nil(notification_content.cardLinkText) ? gs.getMessageLang(notification_content.cardLinkText, conversationLang) : null;\\n    var cardLinkUrl = !gs.nil(notification_content.cardLinkUrl) ? notification_content.cardLinkUrl : null;\\n\\n    // Message header variables\\n    var message = gs.getMessageLang(notification_content.message, conversationLang);\\n    var messageHeading = gs.getMessageLang(notification_content.messageHeading, conversationLang);\\n\\n    // Card body variables\\n    var fields = notification_content.fields;\\n    var tableLabel = notification_content.tableLabel;\\n    var recordDisplayValue = notification_content.recordDisplayValue;\\n    var tableName = notification_content.tableName;\\n    var sysId = notification_content.recordSysId;\\n    var showRecordLink = notification_content.showRecordLink;\\n    var imageUrl = notification_content.imageUrl;\\n    var imageAlt = notification_content.imageAlt;\\n      \\n    var questionAnswerPairs = [];\\n    Object.keys(fields).forEach(function(a){\\n        questionAnswerPairs.push({\\\"fieldLabel\\\": a, \\\"fieldValue\\\": fields[a]});\\n    }) \\n      \\n    var cardData = {\\n        \\\"message\\\": message,\\n        \\\"messageHeading\\\": messageHeading,\\n        \\\"fields\\\": questionAnswerPairs,\\n        \\\"tableLabel\\\": !gs.nil(cardHeading) && cardHeading !== \\\"null\\\" ? cardHeading : tableLabel,\\n        \\\"recordDisplayValue\\\": !gs.nil(cardLinkText) && cardLinkText !== \\\"null\\\" ? cardLinkText : recordDisplayValue,\\n        \\\"table_name\\\": tableName,\\n        \\\"sys_id\\\": sysId,\\n        \\\"enableLink\\\": showRecordLink,\\n        \\\"imageUrl\\\": imageUrl,\\n        \\\"imageAlt\\\": imageAlt,\\n    };\\n\\n    if (showRecordLink) {\\n        var templatedUrl = vaSystem.applyLinkTemplate(sysId, tableName);\\n        cardData.url = !gs.nil(cardLinkUrl) && cardLinkUrl !== \\\"null\\\" ? cardLinkUrl : templatedUrl;\\n    }\\n    \\n    return vaSystem.renderCard(\\\"Notification\\\", JSON.stringify(cardData));\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d67bffa670d8400abf5cc123e3510b38\": {\n          \"id\": \"d67bffa670d8400abf5cc123e3510b38\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Skip Text\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"OK, to see them at any time, type 'show notification'.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   if(!vaVars.actionId || vaVars.actionId == \\\"\\\") {\\n       return true;\\n   }\\n   return false;\\n})()\\n\"\n          },\n          \"requestFeedback\": true\n        },\n        \"53762fdbc42c4ec0aad09c16760a87cf\": {\n          \"id\": \"53762fdbc42c4ec0aad09c16760a87cf\",\n          \"name\": \"Switch to Action Topic\",\n          \"script\": \"(function execute() {\\n     var actionId = vaVars.actionId;\\n    if (actionId && actionId != '') {\\n        var notification_content = JSON.parse(vaInputs.notification_content);\\n        var gr = new GlideRecord('sys_cs_notification');\\n        gr.get(notification_content.vaNotificationId);\\n        gr.setValue('state', 'completed');\\n        gr.setValue('conversation', vaSystem.getConversationId());\\n        gr.update();\\n        var actions = notification_content.actions;\\n        var selectedActionTopic = '';\\n        var selectedAcknowledgementMessage = '';\\n        for (var i = 0; i < actions.length; i++) {\\n            if(actionId === actions[i].actionId) {\\n                selectedActionTopic = actions[i].topicId ? actions[i].topicId: '';\\n                selectedAcknowledgementMessage = actions[i].acknowledgementMessage;\\n                break;\\n            }\\n        }\\n        //if va action then switch topic.\\n        if(selectedActionTopic != '') {\\n            var table_name = notification_content.tableName;\\n            var sys_id = notification_content.recordSysId;\\n            if (notification_content.recordAccessible && (table_name == null || sys_id == null)) {\\n                var notificationGr = new GlideRecord('sys_cs_notification');\\n                notificationGr.get(notification_content.vaNotificationId);\\n                table_name = notificationGr.notification_execution.target_table.getValue();\\n                sys_id = notificationGr.notification_execution.instance.getValue();\\n            }\\n            var eventParm1 = notification_content.eventParm1;\\n            var eventParm2 = notification_content.eventParm2;\\n            var actionContext = {'tableName': table_name, \\n                                 'tableSysId': sys_id, \\n                                 'actionId': actionId, \\n                                 'eventParm1': eventParm1, \\n                                 'eventParm2': eventParm2};\\n            vaVars.global_notification_context = JSON.stringify(actionContext);\\n            vaSystem.switchTopicById(selectedActionTopic);\\n        } else {\\n            vaVars.actionAcknowledgement = selectedAcknowledgementMessage;\\n            var providerId = '';\\n            if (vaSystem.isAMBClient(vaContext.deviceType)) {\\n                providerId = '3918bf49533100102f40ddeeff7b122e';\\n            } else {\\n                var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n                var mapping = new GlideRecord('sys_cs_notification_channel_configuration');\\n                mapping.get('provider', providerApp.providerId);\\n\\n                var channel = new GlideRecord('sys_notification_channel');\\n                channel.get('sys_id', mapping.getValue('notification_channel'));\\n                providerId = channel.getValue('provider');\\n            }\\n            \\n            var act = new sn_notification.NotificationActionService(providerId, notification_content.executionId);\\n            act.runById(actionId, true);\\n        }\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"33293d8f63ce42a0a1fe4194488aca47\": {\n          \"id\": \"33293d8f63ce42a0a1fe4194488aca47\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"9d2dd7810e3546199aa1366d301f2383\": {\n          \"id\": \"9d2dd7810e3546199aa1366d301f2383\",\n          \"stepType\": \"RecordOutput\",\n          \"name\": \"Image Card\",\n          \"variableId\": \"\",\n          \"cardTemplate\": \"Large image with text\",\n          \"cardFields\": {\n            \"1c617fa17313101081e06502edf6a780_title\": {\n              \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var messageHeading = notification_content.messageHeading;\\n    return messageHeading;\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"1c617fa17313101081e06502edf6a780_description\": {\n              \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var message = notification_content.message;\\n    return message;\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"1c617fa17313101081e06502edf6a780_image\": {\n              \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return notification_content.imageUrl;\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"1c617fa17313101081e06502edf6a780_imageAlt\": {\n              \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return notification_content.imageAlt;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          },\n          \"mode\": \"variable\",\n          \"tableName\": \"\",\n          \"fields\": [],\n          \"cardDefinition\": {\n            \"sys_id\": \"1c617fa17313101081e06502edf6a780\",\n            \"name\": \"Large image with text\",\n            \"sys_name\": \"Large image with text\",\n            \"thumbnail.name\": \"Large image with text.svg\",\n            \"fields\": [\n              {\n                \"label\": \"Title\",\n                \"position\": \"1\",\n                \"mandatory\": true,\n                \"name\": \"title\",\n                \"id\": \"1c617fa17313101081e06502edf6a780_title\"\n              },\n              {\n                \"label\": \"Description\",\n                \"position\": \"2\",\n                \"mandatory\": false,\n                \"name\": \"description\",\n                \"id\": \"1c617fa17313101081e06502edf6a780_description\"\n              },\n              {\n                \"label\": \"Image URL link\",\n                \"position\": \"3\",\n                \"mandatory\": true,\n                \"type\": \"image\",\n                \"name\": \"image\",\n                \"id\": \"1c617fa17313101081e06502edf6a780_image\"\n              },\n              {\n                \"label\": \"Image alt text\",\n                \"position\": \"4\",\n                \"mandatory\": false,\n                \"name\": \"imageAlt\",\n                \"id\": \"1c617fa17313101081e06502edf6a780_imageAlt\"\n              }\n            ],\n            \"value\": \"Large image with text\",\n            \"hasTemplateError\": false\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"condition\": {\n            \"mode\": \"glide_query\",\n            \"value\": \"\"\n          },\n          \"requestFeedback\": true\n        },\n        \"1c612561fe5b46b1ad5b6a3b78665b1f\": {\n          \"id\": \"1c612561fe5b46b1ad5b6a3b78665b1f\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"4208523587a744cfbed53025a44b7693\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Actionable Card\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"What would you like to do?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return true;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return gs.nil(notification_content.allowSkipping) || notification_content.allowSkipping == true;\\n})()\\n\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"36b083d30a7d4e6d8bda0612997f80d6\",\n          \"id\": \"4208523587a744cfbed53025a44b7693\",\n          \"mode\": \"glide_record\",\n          \"script\": \"\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No Record Found\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"mode\": \"glide_scripted_query\",\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var actions = notification_content.actions;\\n    for (var i = 0; i < actions.length; i++) {\\n        options.push({ 'value': actions[i].actionId, 'label': gs.getMessageLang(actions[i].label, vaContext.getRequesterLang()), 'render_style': 'button' });\\n    }\\n    return options;\\n})()\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"script\",\n            \"metadataScript\": \"function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var conversationLang = vaContext.getRequesterLang();\\n\\n    // Card header variables\\n    var cardHeading = !gs.nil(notification_content.cardHeading) ? gs.getMessageLang(notification_content.cardHeading, conversationLang) : null;\\n    var cardLinkText = !gs.nil(notification_content.cardLinkText) ? gs.getMessageLang(notification_content.cardLinkText, conversationLang) : null;\\n    var cardLinkUrl = !gs.nil(notification_content.cardLinkUrl) ? notification_content.cardLinkUrl : null;\\n\\n    // Card body variables\\n    var fields = notification_content.fields;\\n    var tableLabel = notification_content.tableLabel;\\n    var recordDisplayValue = notification_content.recordDisplayValue;\\n    var tableName = notification_content.tableName;\\n    var sysId = notification_content.recordSysId;\\n    var showRecordLink = notification_content.showRecordLink;\\n\\n    var cardFields = [];\\n    Object.keys(fields).forEach(function(a){\\n        cardFields.push({\\\"fieldLabel\\\": a, \\\"fieldValue\\\": fields[a]});\\n    });\\n\\n    var cardData = {\\n        title: !gs.nil(cardHeading) && cardHeading !== \\\"null\\\" ? cardHeading : tableLabel,\\n        subtitle: !gs.nil(cardLinkText) && cardLinkText !== \\\"null\\\" ? cardLinkText : recordDisplayValue,\\n        fields: cardFields,\\n    }\\n\\n    var cardName = \\\"Record Card Without Link\\\";\\n    \\n    if (showRecordLink) {\\n        var templatedUrl = vaSystem.applyLinkTemplate(sysId, tableName);\\n        cardName = \\\"Record Card\\\";\\n        cardData.url = !gs.nil(cardLinkUrl) && cardLinkUrl !== \\\"null\\\" ? cardLinkUrl : templatedUrl;\\n    };\\n    \\n    var data = JSON.stringify(cardData);\\n    var template = \\\"\\\";\\n    var iosTemplate;\\n    var androidTemplate;\\n    var templateAndSmartLinkMetadataMap;\\n    var smartLinkMetadata;\\n\\n    if (vaSystem.isAMBClient(vaContext.deviceType)) {\\n        var conversationId = vaSystem.getConversationId();\\n        templateAndSmartLinkMetadataMap = sn_cs.VASystemObject.fillTemplateFromDataDeviceTypeAndConvoId(cardName, data, 'mweb', false, conversationId);\\n        template = templateAndSmartLinkMetadataMap.templateKey;\\n        smartLinkMetadata = templateAndSmartLinkMetadataMap.smartLinksMetadataKey;\\n        iosTemplate = sn_cs.VASystemObject.fillTemplateFromDataAndDeviceType(cardName, data, 'ios', true);\\n        androidTemplate = sn_cs.VASystemObject.fillTemplateFromDataAndDeviceType(cardName, data, 'android', true);\\n    }\\n    \\n    return {\\n       cardTemplate: template,\\n       iosTemplate: iosTemplate,\\n       androidTemplate: androidTemplate,\\n       cardName: cardName,\\n       cardData: data,\\n       renderStyle: 'card',\\n       suppressPrompt: true,\\n       smartLinksMetadataKey: smartLinkMetadata,\\n    };\\n}\"\n          },\n          \"hasCardHeader\": true,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"450216088a7a4860a15fc2531025c721\": {\n          \"id\": \"450216088a7a4860a15fc2531025c721\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"5784e985b55044b8a26d6793cdb20d7a\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Actionable Image Card\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"What would you like to do?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    \\n    return notification_content.allowSkipping == true;\\n})()\\n\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"61813b06bd17480fb41a0f6ed6aa7f05\",\n          \"id\": \"5784e985b55044b8a26d6793cdb20d7a\",\n          \"mode\": \"glide_record\",\n          \"script\": \"\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No record found\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"mode\": \"glide_scripted_query\",\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var actions = notification_content.actions;\\n    for (var i = 0; i < actions.length; i++) {\\n        options.push({ 'value': actions[i].actionId, 'label': gs.getMessage(actions[i].label), 'render_style': 'button' });\\n    }\\n    return options;\\n})()\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"script\",\n            \"metadataScript\": \"function() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var message = notification_content.message;\\n    var messageHeading = notification_content.messageHeading;\\n    var fields = notification_content.fields;\\n    var tableLabel = notification_content.tableLabel;\\n    var recordDisplayValue = notification_content.recordDisplayValue;\\n    var table_name = notification_content.tableName;\\n    var sys_id = notification_content.recordSysId;\\n    var showRecordLink = notification_content.showRecordLink;\\n    var imageUrl = notification_content.imageUrl;\\n    var imageAlt = notification_content.imageAlt;\\n\\n    var url;\\n    if(showRecordLink)\\n        url = gs.getProperty('glide.servlet.uri')+table_name+\\\".do?sys_id=\\\"+sys_id;\\n\\n    var cardName = \\\"Large image with text\\\";\\n    var cardData = {\\n        title: messageHeading,\\n        description: message,\\n        image: imageUrl,\\n        imageAlt: imageAlt\\n    };\\n    var data = JSON.stringify(cardData);\\n    \\n    var template = \\\"\\\";\\n    var iosTemplate;\\n    var androidTemplate;\\n    if (vaSystem.isAMBClient(vaContext.deviceType)) {\\n       template = sn_cs.VASystemObject.fillTemplateFromDataAndDeviceType(cardName, data, 'mweb', false);\\n       iosTemplate = sn_cs.VASystemObject.fillTemplateFromDataAndDeviceType(cardName, data, 'ios', true);\\n       androidTemplate = sn_cs.VASystemObject.fillTemplateFromDataAndDeviceType(cardName, data, 'android', true);\\n    }\\n\\n    return {\\n      cardTemplate: template,\\n      iosTemplate: iosTemplate,\\n      androidTemplate: androidTemplate,\\n      cardName: cardName,\\n      cardData: data,\\n      renderStyle: 'card',\\n      suppressPrompt: true\\n    };\\n}\"\n          },\n          \"hasCardHeader\": true,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"2fc5fba7d13742acbfb03cfb9620b446\": {\n          \"id\": \"2fc5fba7d13742acbfb03cfb9620b446\",\n          \"name\": \"Set Action Topic\",\n          \"script\": \"(function execute() {\\n    vaVars.actionId = vaInputs.actionable_card;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"504cb201c44742e28d820c87eb66af5a\": {\n          \"id\": \"504cb201c44742e28d820c87eb66af5a\",\n          \"name\": \"Set Action Topic\",\n          \"script\": \"(function execute() {\\n   vaVars.actionId = vaInputs.actionable_image_card;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"93dbbd9dc02644e7af13206d79673d8b\": {\n          \"id\": \"93dbbd9dc02644e7af13206d79673d8b\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"c206678ff17c4cbf9c6b7cf9a18e329e\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Actionable Adapters Card\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"What would you like to do?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    \\n    return notification_content.allowSkipping == true;\\n})()\\n\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"90e9b0065e14430a908ef8253b870fce\",\n          \"id\": \"c206678ff17c4cbf9c6b7cf9a18e329e\",\n          \"mode\": \"glide_record\",\n          \"script\": \"\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No record Found\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"mode\": \"glide_scripted_query\",\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var actions = notification_content.actions;\\n    for (var i = 0; i < actions.length; i++) {\\n        options.push({ 'value': actions[i].actionId, 'label': gs.getMessageLang(actions[i].label, vaContext.getRequesterLang()), 'render_style': 'button' });\\n    }\\n    return options;\\n})()\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"script\",\n            \"metadataScript\": \"function() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var conversationLang = vaContext.getRequesterLang();\\n\\n    // Card header variables\\n    var cardHeading = !gs.nil(notification_content.cardHeading) ? gs.getMessageLang(notification_content.cardHeading, conversationLang) : null;\\n    var cardLinkText = !gs.nil(notification_content.cardLinkText) ? gs.getMessageLang(notification_content.cardLinkText, conversationLang) : null;\\n    var cardLinkUrl = !gs.nil(notification_content.cardLinkUrl) ? notification_content.cardLinkUrl : null;\\n    \\n    // Message header variables\\n    var message = gs.getMessageLang(notification_content.message, conversationLang);\\n    var messageHeading = gs.getMessageLang(notification_content.messageHeading, conversationLang);\\n\\n    // Card body variables\\n    var fields = notification_content.fields;\\n    var tableLabel = notification_content.tableLabel;\\n    var recordDisplayValue = notification_content.recordDisplayValue;\\n    var tableName = notification_content.tableName;\\n    var sysId = notification_content.recordSysId;\\n    var showRecordLink = notification_content.showRecordLink;\\n    var imageUrl = notification_content.imageUrl;\\n    var imageAlt = notification_content.imageAlt;\\n      \\n    var questionAnswerPairs = [];\\n    Object.keys(fields).forEach(function(a){\\n        questionAnswerPairs.push({\\\"fieldLabel\\\": a, \\\"fieldValue\\\": fields[a]});\\n    });\\n      \\n    var cardData = {\\n        \\\"message\\\": message,\\n        \\\"messageHeading\\\": messageHeading,\\n        \\\"fields\\\": questionAnswerPairs,\\n        \\\"tableLabel\\\": !gs.nil(cardHeading) && cardHeading !== \\\"null\\\" ? cardHeading : tableLabel,\\n        \\\"recordDisplayValue\\\": !gs.nil(cardLinkText) && cardLinkText !== \\\"null\\\" ? cardLinkText : recordDisplayValue,\\n        \\\"table_name\\\": tableName,\\n        \\\"sys_id\\\": sysId,\\n        \\\"enableLink\\\": showRecordLink,\\n        \\\"imageUrl\\\": imageUrl,\\n        \\\"imageAlt\\\": imageAlt,\\n    };\\n\\n    if (showRecordLink) {\\n        var templatedUrl = vaSystem.applyLinkTemplate(sysId, tableName);\\n        cardData.url = !gs.nil(cardLinkUrl) && cardLinkUrl !== \\\"null\\\" ? cardLinkUrl : templatedUrl;\\n    }\\n\\n    var conversationId = vaSystem.getConversationId();\\n    templateAndSmartLinkMetadataMap = sn_cs.VASystemObject.fillTemplateFromDataDeviceTypeAndConvoId(\\\"Record Card\\\", JSON.stringify(cardData), 'mweb', false, conversationId);\\n    template = templateAndSmartLinkMetadataMap.templateKey;\\n    smartLinkMetadata = templateAndSmartLinkMetadataMap.smartLinksMetadataKey;\\n\\n\\n    return {\\n\\t    cardTemplate: \\\"\\\",\\n\\t    cardName: \\\"Notification\\\",\\n\\t    cardData: JSON.stringify(cardData),\\n\\t    smartLinksMetadataKey: smartLinkMetadata\\n    };\\n}\\n\"\n          },\n          \"hasCardHeader\": true,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"5be262e9d9a54475993d8b7af0d2cf70\": {\n          \"id\": \"5be262e9d9a54475993d8b7af0d2cf70\",\n          \"name\": \"Set Action Topic\",\n          \"script\": \"(function execute() {\\n    if (vaInputs.actionable_adapters_card != \\\"skip\\\")\\n       vaVars.actionId = vaInputs.actionable_adapters_card;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9488ce2b8d294c729aaa14062f24f308\": {\n          \"id\": \"9488ce2b8d294c729aaa14062f24f308\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Message Heading\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var messageHeading = notification_content.messageHeading;\\n    return messageHeading;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n     var notification_content = JSON.parse(vaInputs.notification_content);\\n     var messageHeading = notification_content.messageHeading;\\n     if(messageHeading.length != 0)\\n        return true;\\n})()\\n\"\n          },\n          \"requestFeedback\": true\n        },\n        \"bc9f058c59804198b489373be213a021\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Select Action\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"What would you like to do?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return gs.nil(notification_content.allowSkipping) || notification_content.allowSkipping == true;\\n})()\\n\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"f2f5bb10a9344650b55f55c3ef8fcd07\",\n          \"id\": \"bc9f058c59804198b489373be213a021\",\n          \"mode\": \"glide_record\",\n          \"script\": \"\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No actions\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"mode\": \"glide_scripted_query\",\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var actions = notification_content.actions;\\n    for (var i = 0; i < actions.length; i++) {\\n        options.push({ 'value': actions[i].actionId, 'label': gs.getMessage(actions[i].label) });\\n    }\\n    return options;\\n})()\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"919f477fa7fa4efc880d71d8ebff2d39\": {\n          \"id\": \"919f477fa7fa4efc880d71d8ebff2d39\",\n          \"name\": \"Set Action Topic\",\n          \"script\": \"(function execute() {\\n   vaVars.actionId = vaInputs.select_action;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"47445fddc8524b0e9d2049b0ae2d16be\": {\n          \"id\": \"47445fddc8524b0e9d2049b0ae2d16be\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Message Heading\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var messageHeading = notification_content.messageHeading;\\n    return messageHeading;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"84969fbcbec24819af1a72509ecaf123\": {\n          \"id\": \"84969fbcbec24819af1a72509ecaf123\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var message = notification_content.message;\\n    return message;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"2017f8c12cc747f695b66754b0614674\": {\n          \"id\": \"2017f8c12cc747f695b66754b0614674\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Message Heading\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var messageHeading = notification_content.messageHeading;\\n    return messageHeading;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"4ca67c8fb7d541f99c239d38f9f01b44\": {\n          \"id\": \"4ca67c8fb7d541f99c239d38f9f01b44\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var message = notification_content.message;\\n    return message;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"11c3a91e85f040b0a799e05aeee09e17\": {\n          \"id\": \"11c3a91e85f040b0a799e05aeee09e17\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var message = notification_content.message;\\n    return message;\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"4c72771dd4f049ac92ee4c12275baea6\": {\n          \"id\": \"4c72771dd4f049ac92ee4c12275baea6\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Action Acknowledgement\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return gs.getMessage(vaVars.actionAcknowledgement);\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if(!vaVars.actionAcknowledgement || vaVars.actionAcknowledgement == \\\"\\\") {\\n       return false;\\n    }\\n    return true;\\n})()\\n\"\n          },\n          \"requestFeedback\": true\n        },\n        \"6c36f5855cfd4a97b0fed7e7abc4ef62\": {\n          \"id\": \"6c36f5855cfd4a97b0fed7e7abc4ef62\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is SMS Device\"\n        },\n        \"f4e161939e7942cea8ceca75de1c937b\": {\n          \"id\": \"f4e161939e7942cea8ceca75de1c937b\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Link Status\"\n        },\n        \"e1ec7031fbc8403da336bc081de1a14f\": {\n          \"id\": \"e1ec7031fbc8403da336bc081de1a14f\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is SMS Device\"\n        },\n        \"21a1b9e2e68b4e088c99a501cb978c7e\": {\n          \"id\": \"21a1b9e2e68b4e088c99a501cb978c7e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"User Locked Out\"\n        },\n        \"f42cdd7ef6ae472288657a2f6c01d471\": {\n          \"id\": \"f42cdd7ef6ae472288657a2f6c01d471\",\n          \"name\": \"Get User Lockout Status\",\n          \"script\": \"(function execute() {\\n    var providerAppId = vaContext.providerAppId;\\n    var retryInterval = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy('softpin_max_invalid_attempts_interval_hrs', providerAppId);\\n    var maxRetries = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy('softpin_max_retry_attempts', providerAppId);\\n    vaVars.userLockedOut = CustomAdapterSoftPinHelper.isUserLockedOutOnMaxAttempts(providerAppId, vaContext.providerUserId,\\n                                maxRetries, retryInterval, vaInputs.userId);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"6acd1abd0093465d9869e525f5af42e9\": {\n          \"id\": \"6acd1abd0093465d9869e525f5af42e9\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"_link_account_adapter_\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"_link_account_adapter_\",\n          \"reusableTopicId\": \"0902a7d2530333006e61ddeeff7b1250\",\n          \"inputs\": {},\n          \"outputs\": [\n            {\n              \"id\": \"3a3bc4547a824d70ad0964bde4964278\",\n              \"value\": \"connecttola\",\n              \"mapping\": \"connecttola\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"942d9cc7e40947b8bde1ad253bd79cb1\",\n              \"value\": \"linkstatus\",\n              \"mapping\": \"linkstatus\",\n              \"preventDisable\": true\n            }\n          ],\n          \"variableIds\": [\n            \"3a3bc4547a824d70ad0964bde4964278\",\n            \"942d9cc7e40947b8bde1ad253bd79cb1\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false\n        },\n        \"383868b0d87e49c9b0e336ca1cfdf896\": {\n          \"id\": \"383868b0d87e49c9b0e336ca1cfdf896\",\n          \"name\": \"Connect to Live Agent\",\n          \"script\": \"(function execute() {\\n    vaSystem.switchTopic(vaVars._topic_live_agent_topic);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"447fa9876a0343829ee6c07d30ca49c0\": {\n          \"id\": \"447fa9876a0343829ee6c07d30ca49c0\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Linking Enabled\"\n        },\n        \"593dde48f1f8453caca844294ddb256b\": {\n          \"id\": \"593dde48f1f8453caca844294ddb256b\",\n          \"name\": \"Initialize SMS Related Variables\",\n          \"script\": \"(function execute() {\\n    var provider = JSON.parse(sn_cs.VASystemObject.getProviderByProviderAppId(vaContext.providerAppId));\\n    \\n    vaVars.accountLinkingEnabled = provider.linkAccountEnabled;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"35d1ec1370b94b30a7cca8c34417861e\": {\n          \"id\": \"35d1ec1370b94b30a7cca8c34417861e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Linking Enabled\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"ee058cc5cd7c4f1f9ef9293b05660f4f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6acd1abd0093465d9869e525f5af42e9\",\n          \"target\": \"f4e161939e7942cea8ceca75de1c937b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a4db40dff6704a758ad794f6933093e0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"21a1b9e2e68b4e088c99a501cb978c7e\",\n          \"target\": \"7813ee856773498699ae6e4176cfa892\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.userLockedOut;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"4dadc9c86d544981a7c97a4431432761\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2017f8c12cc747f695b66754b0614674\",\n          \"target\": \"4ca67c8fb7d541f99c239d38f9f01b44\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3e8d10f192ff4085a9fc425103054651\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"84969fbcbec24819af1a72509ecaf123\",\n          \"target\": \"903e435446d14a10a15097a363abcfd5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"381cf492acf7401fbb98b175dc86ec4e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"450216088a7a4860a15fc2531025c721\",\n          \"target\": \"9488ce2b8d294c729aaa14062f24f308\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n     var notification_content = JSON.parse(vaInputs.notification_content);\\n    var table_name = notification_content.tableName;\\n    var imageUrl = notification_content.imageUrl;\\n\\n    if (imageUrl == null && table_name == null){\\n        return true;\\n    }\\n})()\\n\"\n          },\n          \"label\": \"Simple Card\"\n        },\n        {\n          \"id\": \"38782fdbd2cf488887908c2070cbd32a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9b22ab1b3dc34594bc3b0f83962b98f8\",\n          \"target\": \"7813ee856773498699ae6e4176cfa892\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"91e6068513ad48328d2ab7411a4cb16f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d67bffa670d8400abf5cc123e3510b38\",\n          \"target\": \"53762fdbc42c4ec0aad09c16760a87cf\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5abb366f428a4e4382487482e1509c34\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7813ee856773498699ae6e4176cfa892\",\n          \"target\": \"c218875d4daf43b0bf12a1fc0daf0e78\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bbfa0bfb28d74743b9e049fa302b36a9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"903e435446d14a10a15097a363abcfd5\",\n          \"target\": \"7813ee856773498699ae6e4176cfa892\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"49d37f0b26b844dda95cd2875a1b3c40\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"45557b00255846e3b6f8493d0f4402c4\",\n          \"target\": \"9b22ab1b3dc34594bc3b0f83962b98f8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (!vaSystem.isAMBClient(vaContext.deviceType))\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"Adapters\"\n        },\n        {\n          \"id\": \"13e8ce9d43c3405da495f096c1fe7548\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"45557b00255846e3b6f8493d0f4402c4\",\n          \"target\": \"33293d8f63ce42a0a1fe4194488aca47\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaSystem.isAMBClient(vaContext.deviceType))\\n        return true;\\n})()\\n\"\n          },\n          \"label\": \"Web Client\"\n        },\n        {\n          \"id\": \"3b9fd859a2604ac28c15897a08ed8570\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"33293d8f63ce42a0a1fe4194488aca47\",\n          \"target\": \"9d2dd7810e3546199aa1366d301f2383\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return notification_content.imageUrl != null;\\n})()\"\n          },\n          \"label\": \"Image\"\n        },\n        {\n          \"id\": \"96bb135628c24f27acc8764f943ac008\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9d2dd7810e3546199aa1366d301f2383\",\n          \"target\": \"7813ee856773498699ae6e4176cfa892\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1d236671fbae4306a05a1d0dd55545f2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ebb3b128dfc048b5a2e8e4c4158a912b\",\n          \"target\": \"1c612561fe5b46b1ad5b6a3b78665b1f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"60b23e0435dd45f38b99bcc79fbe0d07\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1c612561fe5b46b1ad5b6a3b78665b1f\",\n          \"target\": \"45557b00255846e3b6f8493d0f4402c4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return !notification_content.actionable;\\n})()\\n\"\n          },\n          \"label\": \"Non Actionable\"\n        },\n        {\n          \"id\": \"f6b7614830344ad3912056b372452c10\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"450216088a7a4860a15fc2531025c721\",\n          \"target\": \"5784e985b55044b8a26d6793cdb20d7a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var table_name = notification_content.tableName;\\n    var imageUrl = notification_content.imageUrl;\\n    if (imageUrl != null && table_name == null)\\n        return true;\\n})()\\n\"\n          },\n          \"label\": \"Image  Card\"\n        },\n        {\n          \"id\": \"3cf1bc297a284e3c99ee5c6985df92c9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4208523587a744cfbed53025a44b7693\",\n          \"target\": \"2fc5fba7d13742acbfb03cfb9620b446\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"68269de241324dab8ef4fc40febb588d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2fc5fba7d13742acbfb03cfb9620b446\",\n          \"target\": \"d67bffa670d8400abf5cc123e3510b38\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"211e3bea51044eca83fdeaeed3534621\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5784e985b55044b8a26d6793cdb20d7a\",\n          \"target\": \"504cb201c44742e28d820c87eb66af5a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8e9f3e4df9314cb78687247517278346\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"504cb201c44742e28d820c87eb66af5a\",\n          \"target\": \"d67bffa670d8400abf5cc123e3510b38\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"17a02b212d454bba841654c75d000f6f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1c612561fe5b46b1ad5b6a3b78665b1f\",\n          \"target\": \"93dbbd9dc02644e7af13206d79673d8b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return notification_content.actionable;\\n})()\\n\"\n          },\n          \"label\": \"Actionable\"\n        },\n        {\n          \"id\": \"2f17803c72d54fc8818d3d7ce64f8231\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"93dbbd9dc02644e7af13206d79673d8b\",\n          \"target\": \"450216088a7a4860a15fc2531025c721\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaSystem.isAMBClient(vaContext.deviceType))\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"Web Client\"\n        },\n        {\n          \"id\": \"afceb27bdc314bd1a011d6ba9e2f7da2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5be262e9d9a54475993d8b7af0d2cf70\",\n          \"target\": \"d67bffa670d8400abf5cc123e3510b38\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c73e3b514f55435e876ea72b7578467e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bc9f058c59804198b489373be213a021\",\n          \"target\": \"919f477fa7fa4efc880d71d8ebff2d39\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"54c059c67bd74aa6a7bf705154a99233\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"919f477fa7fa4efc880d71d8ebff2d39\",\n          \"target\": \"d67bffa670d8400abf5cc123e3510b38\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"11619493ba004f0cbf65dda4dd42113c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"33293d8f63ce42a0a1fe4194488aca47\",\n          \"target\": \"47445fddc8524b0e9d2049b0ae2d16be\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return notification_content.imageUrl == null;\\n})()\"\n          },\n          \"label\": \"No Image\"\n        },\n        {\n          \"id\": \"85e3c0738ee146e09689be1efc2bca62\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"47445fddc8524b0e9d2049b0ae2d16be\",\n          \"target\": \"84969fbcbec24819af1a72509ecaf123\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"153547eb66f24683afe983f8486e497b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"450216088a7a4860a15fc2531025c721\",\n          \"target\": \"2017f8c12cc747f695b66754b0614674\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var table_name = notification_content.tableName;\\n    var imageUrl = notification_content.imageUrl;\\n    if (imageUrl == null && table_name != null)\\n        return true;\\n})()\\n\"\n          },\n          \"label\": \"Record Card\"\n        },\n        {\n          \"id\": \"39065e4fe7f4498c8c5d1bf887913adb\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4ca67c8fb7d541f99c239d38f9f01b44\",\n          \"target\": \"4208523587a744cfbed53025a44b7693\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b8e5fe25d0c2489aaf442939b5291ff0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9488ce2b8d294c729aaa14062f24f308\",\n          \"target\": \"11c3a91e85f040b0a799e05aeee09e17\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ee9f2ff058bf431e8eaad47cac45ed5d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"11c3a91e85f040b0a799e05aeee09e17\",\n          \"target\": \"bc9f058c59804198b489373be213a021\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e4d39a6b260845899fce9a8480da9212\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"53762fdbc42c4ec0aad09c16760a87cf\",\n          \"target\": \"4c72771dd4f049ac92ee4c12275baea6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0e2909742e124779bc35197b9181a860\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4c72771dd4f049ac92ee4c12275baea6\",\n          \"target\": \"7813ee856773498699ae6e4176cfa892\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ebb793aa1bde4e7fa8d8587727753b6c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c206678ff17c4cbf9c6b7cf9a18e329e\",\n          \"target\": \"6c36f5855cfd4a97b0fed7e7abc4ef62\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e993d26f62bc42f582e5f233b373c274\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"6c36f5855cfd4a97b0fed7e7abc4ef62\",\n          \"target\": \"5be262e9d9a54475993d8b7af0d2cf70\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaContext.deviceType != 'SMS';\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"0f38bd47e6ac44b589b4927c8b5fa520\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f4e161939e7942cea8ceca75de1c937b\",\n          \"target\": \"5be262e9d9a54475993d8b7af0d2cf70\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.linkstatus == 'success';\\n})()\\n\"\n          },\n          \"label\": \"Success\"\n        },\n        {\n          \"id\": \"a3ac9266bb2643a295978250b8275946\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"93dbbd9dc02644e7af13206d79673d8b\",\n          \"target\": \"e1ec7031fbc8403da336bc081de1a14f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (!vaSystem.isAMBClient(vaContext.deviceType))\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"Adapters\"\n        },\n        {\n          \"id\": \"633318a370384f6aacc97da6747cc54a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e1ec7031fbc8403da336bc081de1a14f\",\n          \"target\": \"c206678ff17c4cbf9c6b7cf9a18e329e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaContext.deviceType != 'SMS';\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"721e85a10c6044509d2a65a36b099e4e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"21a1b9e2e68b4e088c99a501cb978c7e\",\n          \"target\": \"c206678ff17c4cbf9c6b7cf9a18e329e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.userLockedOut;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"d006e7c540464d7c9a80e1d0d9dbea9b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f42cdd7ef6ae472288657a2f6c01d471\",\n          \"target\": \"21a1b9e2e68b4e088c99a501cb978c7e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"02b9d1fc14be49aabaf4747898598308\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f4e161939e7942cea8ceca75de1c937b\",\n          \"target\": \"7813ee856773498699ae6e4176cfa892\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.linkstatus == 'aborted';\\n})()\\n\"\n          },\n          \"label\": \"Abort\"\n        },\n        {\n          \"id\": \"f89e494ca74e4168b0cda7ba2ed68837\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f4e161939e7942cea8ceca75de1c937b\",\n          \"target\": \"383868b0d87e49c9b0e336ca1cfdf896\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.linkstatus == 'failure';\\n})()\\n\"\n          },\n          \"label\": \"Failure\"\n        },\n        {\n          \"id\": \"45333aa87b214b57ab78ec79c08d1d0d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"383868b0d87e49c9b0e336ca1cfdf896\",\n          \"target\": \"c218875d4daf43b0bf12a1fc0daf0e78\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5193b2224ff64626b44541ae4166ef5b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"447fa9876a0343829ee6c07d30ca49c0\",\n          \"target\": \"f42cdd7ef6ae472288657a2f6c01d471\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.accountLinkingEnabled == true;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"9f20679e68594ee58cb24a82f297ea0b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"447fa9876a0343829ee6c07d30ca49c0\",\n          \"target\": \"c206678ff17c4cbf9c6b7cf9a18e329e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.accountLinkingEnabled == false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"8d3e84a974ff4ca9bb204459528a6e36\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e1ec7031fbc8403da336bc081de1a14f\",\n          \"target\": \"593dde48f1f8453caca844294ddb256b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaContext.deviceType == 'SMS';\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"163779959c844ccbaae61e6644b56b3a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"593dde48f1f8453caca844294ddb256b\",\n          \"target\": \"447fa9876a0343829ee6c07d30ca49c0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"181a4dcfecf64f72930c7307eb91c98a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"6c36f5855cfd4a97b0fed7e7abc4ef62\",\n          \"target\": \"35d1ec1370b94b30a7cca8c34417861e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaContext.deviceType == 'SMS';\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"c4c193d58c3d4c03a747682ee349a068\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"35d1ec1370b94b30a7cca8c34417861e\",\n          \"target\": \"6acd1abd0093465d9869e525f5af42e9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.accountLinkingEnabled == true;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"1a1440aa13994ec880008d1d7c50ad8e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"35d1ec1370b94b30a7cca8c34417861e\",\n          \"target\": \"5be262e9d9a54475993d8b7af0d2cf70\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.accountLinkingEnabled == false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"995e361142024ec4b56345b8eb2acfca\": {\n      \"id\": \"995e361142024ec4b56345b8eb2acfca\",\n      \"name\": \"notification_content\",\n      \"label\": \"Notification_content\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"ebb3b128dfc048b5a2e8e4c4158a912b\",\n      \"isHidden\": false\n    },\n    \"36b083d30a7d4e6d8bda0612997f80d6\": {\n      \"id\": \"36b083d30a7d4e6d8bda0612997f80d6\",\n      \"name\": \"actionable_card\",\n      \"label\": \"Actionable Card\",\n      \"varType\": \"reference\",\n      \"table\": \"incident\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"4208523587a744cfbed53025a44b7693\",\n      \"isHidden\": false\n    },\n    \"61813b06bd17480fb41a0f6ed6aa7f05\": {\n      \"id\": \"61813b06bd17480fb41a0f6ed6aa7f05\",\n      \"name\": \"actionable_image_card\",\n      \"label\": \"Actionable Image Card\",\n      \"varType\": \"reference\",\n      \"table\": \"incident\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"5784e985b55044b8a26d6793cdb20d7a\",\n      \"isHidden\": false\n    },\n    \"d9320f28f82945ca8c79c9bb9ea7d88b\": {\n      \"id\": \"d9320f28f82945ca8c79c9bb9ea7d88b\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"actionId\",\n      \"label\": \"actionId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"90e9b0065e14430a908ef8253b870fce\": {\n      \"id\": \"90e9b0065e14430a908ef8253b870fce\",\n      \"name\": \"actionable_adapters_card\",\n      \"label\": \"Actionable Adapters Card\",\n      \"varType\": \"reference\",\n      \"table\": \"incident\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"c206678ff17c4cbf9c6b7cf9a18e329e\",\n      \"isHidden\": false\n    },\n    \"f2f5bb10a9344650b55f55c3ef8fcd07\": {\n      \"id\": \"f2f5bb10a9344650b55f55c3ef8fcd07\",\n      \"name\": \"select_action\",\n      \"label\": \"Select Action\",\n      \"varType\": \"reference\",\n      \"table\": \"incident\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"bc9f058c59804198b489373be213a021\",\n      \"isHidden\": false\n    },\n    \"3a3bc4547a824d70ad0964bde4964278\": {\n      \"id\": \"3a3bc4547a824d70ad0964bde4964278\",\n      \"name\": \"connecttola\",\n      \"label\": \"Connecttola\",\n      \"defaultValue\": \"connecttola\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"6acd1abd0093465d9869e525f5af42e9\",\n      \"isHidden\": false\n    },\n    \"942d9cc7e40947b8bde1ad253bd79cb1\": {\n      \"id\": \"942d9cc7e40947b8bde1ad253bd79cb1\",\n      \"name\": \"linkstatus\",\n      \"label\": \"Linkstatus\",\n      \"defaultValue\": \"linkstatus\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"6acd1abd0093465d9869e525f5af42e9\",\n      \"isHidden\": false\n    },\n    \"12a1b9eb4b974dbbbeecb017dd593eaa\": {\n      \"id\": \"12a1b9eb4b974dbbbeecb017dd593eaa\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return false;\\n})()\\n\"\n      },\n      \"name\": \"accountLinkingEnabled\",\n      \"label\": \"accountLinkingEnabled\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"122e031f535310102b57ddeeff7b121d","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_122e031f535310102b57ddeeff7b121d","sys_updated_by":"admin","sys_created_on":"2020-09-22 13:54:39","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"7b74a5b285bc418bb81e85f8f71a9012\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"7b74a5b285bc418bb81e85f8f71a9012\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"7b74a5b285bc418bb81e85f8f71a9012\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"ebb3b128dfc048b5a2e8e4c4158a912b\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"c218875d4daf43b0bf12a1fc0daf0e78\",\"name\":\"End\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Adapters\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (!vaSystem.isAMBClient(vaContext.deviceType))\\n    return true;\\n})()\\n\"},\"id\":\"1f769f6ff62a4d9c918fb86e7398c7a8\",\"name\":\"Adapters\"},{\"type\":\"Branch\",\"label\":\"Web Client\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaSystem.isAMBClient(vaContext.deviceType))\\n        return true;\\n})()\\n\"},\"id\":\"48d0dde65cad4ad7a4bcf73f5827422f\",\"name\":\"Web Client\"}],\"id\":\"45557b00255846e3b6f8493d0f4402c4\",\"goal_id\":\"primary\"},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"903e435446d14a10a15097a363abcfd5\",\"name\":\"Notification - Web Client\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var conversationLang = vaContext.getRequesterLang();\\n\\n    // Card header variables\\n    var cardHeading = !gs.nil(notification_content.cardHeading) ? gs.getMessageLang(notification_content.cardHeading, conversationLang) : null;\\n    var cardLinkText = !gs.nil(notification_content.cardLinkText) ? gs.getMessageLang(notification_content.cardLinkText, conversationLang) : null;\\n    var cardLinkUrl = !gs.nil(notification_content.cardLinkUrl) ? notification_content.cardLinkUrl : null;\\n    \\n    // Card body variables\\n    var fields = notification_content.fields;\\n    var tableLabel = notification_content.tableLabel;\\n    var recordDisplayValue = notification_content.recordDisplayValue;\\n    var tableName = notification_content.tableName;\\n    var sysId = notification_content.recordSysId;\\n    var showRecordLink = notification_content.showRecordLink;\\n\\n    var cardFields = [];\\n    Object.keys(fields).forEach(function(a){\\n        cardFields.push({\\\"fieldLabel\\\": a, \\\"fieldValue\\\": fields[a]});\\n    });\\n\\n    var cardData = {\\n        title: !gs.nil(cardHeading) && cardHeading !== \\\"null\\\" ? cardHeading : tableLabel,\\n        subtitle: !gs.nil(cardLinkText) && cardLinkText !== \\\"null\\\" ? cardLinkText : recordDisplayValue,\\n        fields: cardFields,\\n    };\\n        \\n    if (showRecordLink) {\\n        var templatedUrl = vaSystem.applyLinkTemplate(sysId, tableName);\\n        cardData.url = !gs.nil(cardLinkUrl) && cardLinkUrl !== \\\"null\\\" ? cardLinkUrl : templatedUrl;\\n    }\\n    \\n    if (gs.nil(tableLabel))\\n        return;\\n\\n    return vaSystem.renderCard(showRecordLink ? \\\"Record Card\\\" : \\\"Record Card Without Link\\\", JSON.stringify(cardData));\\n})()\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var greetingTopic = vaVars.global_notification_welcome_topic;\\n    if ( greetingTopic != \\\"\\\" && greetingTopic != undefined ) {\\n        vaVars.global_notification_welcome_topic = \\\"\\\";\\n        vaSystem.switchTopic(greetingTopic);\\n    }\\n})()\\n\",\"id\":\"7813ee856773498699ae6e4176cfa892\",\"name\":\"Switch Welcome\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"9b22ab1b3dc34594bc3b0f83962b98f8\",\"name\":\"Notification - Adapters\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var conversationLang = vaContext.getRequesterLang();\\n    \\n    // Card header variables\\n    var cardHeading = !gs.nil(notification_content.cardHeading) ? gs.getMessageLang(notification_content.cardHeading, conversationLang) : null;\\n    var cardLinkText = !gs.nil(notification_content.cardLinkText) ? gs.getMessageLang(notification_content.cardLinkText, conversationLang) : null;\\n    var cardLinkUrl = !gs.nil(notification_content.cardLinkUrl) ? notification_content.cardLinkUrl : null;\\n\\n    // Message header variables\\n    var message = gs.getMessageLang(notification_content.message, conversationLang);\\n    var messageHeading = gs.getMessageLang(notification_content.messageHeading, conversationLang);\\n\\n    // Card body variables\\n    var fields = notification_content.fields;\\n    var tableLabel = notification_content.tableLabel;\\n    var recordDisplayValue = notification_content.recordDisplayValue;\\n    var tableName = notification_content.tableName;\\n    var sysId = notification_content.recordSysId;\\n    var showRecordLink = notification_content.showRecordLink;\\n    var imageUrl = notification_content.imageUrl;\\n    var imageAlt = notification_content.imageAlt;\\n      \\n    var questionAnswerPairs = [];\\n    Object.keys(fields).forEach(function(a){\\n        questionAnswerPairs.push({\\\"fieldLabel\\\": a, \\\"fieldValue\\\": fields[a]});\\n    }) \\n      \\n    var cardData = {\\n        \\\"message\\\": message,\\n        \\\"messageHeading\\\": messageHeading,\\n        \\\"fields\\\": questionAnswerPairs,\\n        \\\"tableLabel\\\": !gs.nil(cardHeading) && cardHeading !== \\\"null\\\" ? cardHeading : tableLabel,\\n        \\\"recordDisplayValue\\\": !gs.nil(cardLinkText) && cardLinkText !== \\\"null\\\" ? cardLinkText : recordDisplayValue,\\n        \\\"table_name\\\": tableName,\\n        \\\"sys_id\\\": sysId,\\n        \\\"enableLink\\\": showRecordLink,\\n        \\\"imageUrl\\\": imageUrl,\\n        \\\"imageAlt\\\": imageAlt,\\n    };\\n\\n    if (showRecordLink) {\\n        var templatedUrl = vaSystem.applyLinkTemplate(sysId, tableName);\\n        cardData.url = !gs.nil(cardLinkUrl) && cardLinkUrl !== \\\"null\\\" ? cardLinkUrl : templatedUrl;\\n    }\\n    \\n    return vaSystem.renderCard(\\\"Notification\\\", JSON.stringify(cardData));\\n})()\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:ec769c61530210106e61ddeeff7b12b9:node:d67bffa670d8400abf5cc123e3510b38:field:0\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"d67bffa670d8400abf5cc123e3510b38\",\"name\":\"Skip Text\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   if(!vaVars.actionId || vaVars.actionId == \\\"\\\") {\\n       return true;\\n   }\\n   return false;\\n})()\\n\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n     var actionId = vaVars.actionId;\\n    if (actionId && actionId != '') {\\n        var notification_content = JSON.parse(vaInputs.notification_content);\\n        var gr = new GlideRecord('sys_cs_notification');\\n        gr.get(notification_content.vaNotificationId);\\n        gr.setValue('state', 'completed');\\n        gr.setValue('conversation', vaSystem.getConversationId());\\n        gr.update();\\n        var actions = notification_content.actions;\\n        var selectedActionTopic = '';\\n        var selectedAcknowledgementMessage = '';\\n        for (var i = 0; i < actions.length; i++) {\\n            if(actionId === actions[i].actionId) {\\n                selectedActionTopic = actions[i].topicId ? actions[i].topicId: '';\\n                selectedAcknowledgementMessage = actions[i].acknowledgementMessage;\\n                break;\\n            }\\n        }\\n        //if va action then switch topic.\\n        if(selectedActionTopic != '') {\\n            var table_name = notification_content.tableName;\\n            var sys_id = notification_content.recordSysId;\\n            if (notification_content.recordAccessible && (table_name == null || sys_id == null)) {\\n                var notificationGr = new GlideRecord('sys_cs_notification');\\n                notificationGr.get(notification_content.vaNotificationId);\\n                table_name = notificationGr.notification_execution.target_table.getValue();\\n                sys_id = notificationGr.notification_execution.instance.getValue();\\n            }\\n            var eventParm1 = notification_content.eventParm1;\\n            var eventParm2 = notification_content.eventParm2;\\n            var actionContext = {'tableName': table_name, \\n                                 'tableSysId': sys_id, \\n                                 'actionId': actionId, \\n                                 'eventParm1': eventParm1, \\n                                 'eventParm2': eventParm2};\\n            vaVars.global_notification_context = JSON.stringify(actionContext);\\n            vaSystem.switchTopicById(selectedActionTopic);\\n        } else {\\n            vaVars.actionAcknowledgement = selectedAcknowledgementMessage;\\n            var providerId = '';\\n            if (vaSystem.isAMBClient(vaContext.deviceType)) {\\n                providerId = '3918bf49533100102f40ddeeff7b122e';\\n            } else {\\n                var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n                var mapping = new GlideRecord('sys_cs_notification_channel_configuration');\\n                mapping.get('provider', providerApp.providerId);\\n\\n                var channel = new GlideRecord('sys_notification_channel');\\n                channel.get('sys_id', mapping.getValue('notification_channel'));\\n                providerId = channel.getValue('provider');\\n            }\\n            \\n            var act = new sn_notification.NotificationActionService(providerId, notification_content.executionId);\\n            act.runById(actionId, true);\\n        }\\n    }\\n})()\",\"id\":\"53762fdbc42c4ec0aad09c16760a87cf\",\"name\":\"Switch to Action Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Image\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return notification_content.imageUrl != null;\\n})()\"},\"id\":\"846362c3159846b2a48e74bb3fa67a83\",\"name\":\"Image\"},{\"type\":\"Branch\",\"label\":\"No Image\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return notification_content.imageUrl == null;\\n})()\"},\"id\":\"c57f7c265c1a40f882de1183a8bddad3\",\"name\":\"No Image\"}],\"id\":\"33293d8f63ce42a0a1fe4194488aca47\",\"goal_id\":\"primary\"},{\"type\":\"CardOutputPrompt\",\"templateName\":\"Large image with text\",\"fields\":[{\"name\":\"title\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var messageHeading = notification_content.messageHeading;\\n    return messageHeading;\\n})()\\n\"},\"required\":true},{\"name\":\"description\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var message = notification_content.message;\\n    return message;\\n})()\\n\"},\"required\":false},{\"name\":\"image\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return notification_content.imageUrl;\\n})()\\n\"},\"required\":true},{\"name\":\"imageAlt\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return notification_content.imageAlt;\\n})()\\n\"},\"required\":false}],\"id\":\"9d2dd7810e3546199aa1366d301f2383\",\"name\":\"Image Card\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"request_feedback\":true},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Non Actionable\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return !notification_content.actionable;\\n})()\\n\"},\"id\":\"fefec9b81f2f4bf385428243fe390329\",\"name\":\"Non Actionable\"},{\"type\":\"Branch\",\"label\":\"Actionable\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return notification_content.actionable;\\n})()\\n\"},\"id\":\"475a6d5175fb4bfe93eaf5215b1fa54e\",\"name\":\"Actionable\"}],\"id\":\"1c612561fe5b46b1ad5b6a3b78665b1f\",\"goal_id\":\"primary\"},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"4208523587a744cfbed53025a44b7693\",\"name\":\"Actionable Card\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return true;\\n})()\\n\"},\"variable_id\":\"36b083d30a7d4e6d8bda0612997f80d6\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"What would you like to do?\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return gs.nil(notification_content.allowSkipping) || notification_content.allowSkipping == true;\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var actions = notification_content.actions;\\n    for (var i = 0; i < actions.length; i++) {\\n        options.push({ 'value': actions[i].actionId, 'label': gs.getMessageLang(actions[i].label, vaContext.getRequesterLang()), 'render_style': 'button' });\\n    }\\n    return options;\\n})()\",\"metadataScript\":\"function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var conversationLang = vaContext.getRequesterLang();\\n\\n    // Card header variables\\n    var cardHeading = !gs.nil(notification_content.cardHeading) ? gs.getMessageLang(notification_content.cardHeading, conversationLang) : null;\\n    var cardLinkText = !gs.nil(notification_content.cardLinkText) ? gs.getMessageLang(notification_content.cardLinkText, conversationLang) : null;\\n    var cardLinkUrl = !gs.nil(notification_content.cardLinkUrl) ? notification_content.cardLinkUrl : null;\\n\\n    // Card body variables\\n    var fields = notification_content.fields;\\n    var tableLabel = notification_content.tableLabel;\\n    var recordDisplayValue = notification_content.recordDisplayValue;\\n    var tableName = notification_content.tableName;\\n    var sysId = notification_content.recordSysId;\\n    var showRecordLink = notification_content.showRecordLink;\\n\\n    var cardFields = [];\\n    Object.keys(fields).forEach(function(a){\\n        cardFields.push({\\\"fieldLabel\\\": a, \\\"fieldValue\\\": fields[a]});\\n    });\\n\\n    var cardData = {\\n        title: !gs.nil(cardHeading) && cardHeading !== \\\"null\\\" ? cardHeading : tableLabel,\\n        subtitle: !gs.nil(cardLinkText) && cardLinkText !== \\\"null\\\" ? cardLinkText : recordDisplayValue,\\n        fields: cardFields,\\n    }\\n\\n    var cardName = \\\"Record Card Without Link\\\";\\n    \\n    if (showRecordLink) {\\n        var templatedUrl = vaSystem.applyLinkTemplate(sysId, tableName);\\n        cardName = \\\"Record Card\\\";\\n        cardData.url = !gs.nil(cardLinkUrl) && cardLinkUrl !== \\\"null\\\" ? cardLinkUrl : templatedUrl;\\n    };\\n    \\n    var data = JSON.stringify(cardData);\\n    var template = \\\"\\\";\\n    var iosTemplate;\\n    var androidTemplate;\\n    var templateAndSmartLinkMetadataMap;\\n    var smartLinkMetadata;\\n\\n    if (vaSystem.isAMBClient(vaContext.deviceType)) {\\n        var conversationId = vaSystem.getConversationId();\\n        templateAndSmartLinkMetadataMap = sn_cs.VASystemObject.fillTemplateFromDataDeviceTypeAndConvoId(cardName, data, 'mweb', false, conversationId);\\n        template = templateAndSmartLinkMetadataMap.templateKey;\\n        smartLinkMetadata = templateAndSmartLinkMetadataMap.smartLinksMetadataKey;\\n        iosTemplate = sn_cs.VASystemObject.fillTemplateFromDataAndDeviceType(cardName, data, 'ios', true);\\n        androidTemplate = sn_cs.VASystemObject.fillTemplateFromDataAndDeviceType(cardName, data, 'android', true);\\n    }\\n    \\n    return {\\n       cardTemplate: template,\\n       iosTemplate: iosTemplate,\\n       androidTemplate: androidTemplate,\\n       cardName: cardName,\\n       cardData: data,\\n       renderStyle: 'card',\\n       suppressPrompt: true,\\n       smartLinksMetadataKey: smartLinkMetadata,\\n    };\\n}\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No Record Found\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"glide_scripted_query\",\"value\":\"(function execute() {\\n    var options = [];\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var actions = notification_content.actions;\\n    for (var i = 0; i < actions.length; i++) {\\n        options.push({ 'value': actions[i].actionId, 'label': gs.getMessageLang(actions[i].label, vaContext.getRequesterLang()), 'render_style': 'button' });\\n    }\\n    return options;\\n})()\"},\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Simple Card\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n     var notification_content = JSON.parse(vaInputs.notification_content);\\n    var table_name = notification_content.tableName;\\n    var imageUrl = notification_content.imageUrl;\\n\\n    if (imageUrl == null && table_name == null){\\n        return true;\\n    }\\n})()\\n\"},\"id\":\"361ae948aab8496ea0d27f43f72638e4\",\"name\":\"Simple Card\"},{\"type\":\"Branch\",\"label\":\"Image  Card\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var table_name = notification_content.tableName;\\n    var imageUrl = notification_content.imageUrl;\\n    if (imageUrl != null && table_name == null)\\n        return true;\\n})()\\n\"},\"id\":\"1183df9e0c8d454ea7f0cc84dc96b25c\",\"name\":\"Image  Card\"},{\"type\":\"Branch\",\"label\":\"Record Card\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var table_name = notification_content.tableName;\\n    var imageUrl = notification_content.imageUrl;\\n    if (imageUrl == null && table_name != null)\\n        return true;\\n})()\\n\"},\"id\":\"3af2632cd322403b8ba2429f2d03f7cc\",\"name\":\"Record Card\"}],\"id\":\"450216088a7a4860a15fc2531025c721\",\"goal_id\":\"primary\"},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"5784e985b55044b8a26d6793cdb20d7a\",\"name\":\"Actionable Image Card\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"61813b06bd17480fb41a0f6ed6aa7f05\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"What would you like to do?\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    \\n    return notification_content.allowSkipping == true;\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var actions = notification_content.actions;\\n    for (var i = 0; i < actions.length; i++) {\\n        options.push({ 'value': actions[i].actionId, 'label': gs.getMessage(actions[i].label), 'render_style': 'button' });\\n    }\\n    return options;\\n})()\",\"metadataScript\":\"function() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var message = notification_content.message;\\n    var messageHeading = notification_content.messageHeading;\\n    var fields = notification_content.fields;\\n    var tableLabel = notification_content.tableLabel;\\n    var recordDisplayValue = notification_content.recordDisplayValue;\\n    var table_name = notification_content.tableName;\\n    var sys_id = notification_content.recordSysId;\\n    var showRecordLink = notification_content.showRecordLink;\\n    var imageUrl = notification_content.imageUrl;\\n    var imageAlt = notification_content.imageAlt;\\n\\n    var url;\\n    if(showRecordLink)\\n        url = gs.getProperty('glide.servlet.uri')+table_name+\\\".do?sys_id=\\\"+sys_id;\\n\\n    var cardName = \\\"Large image with text\\\";\\n    var cardData = {\\n        title: messageHeading,\\n        description: message,\\n        image: imageUrl,\\n        imageAlt: imageAlt\\n    };\\n    var data = JSON.stringify(cardData);\\n    \\n    var template = \\\"\\\";\\n    var iosTemplate;\\n    var androidTemplate;\\n    if (vaSystem.isAMBClient(vaContext.deviceType)) {\\n       template = sn_cs.VASystemObject.fillTemplateFromDataAndDeviceType(cardName, data, 'mweb', false);\\n       iosTemplate = sn_cs.VASystemObject.fillTemplateFromDataAndDeviceType(cardName, data, 'ios', true);\\n       androidTemplate = sn_cs.VASystemObject.fillTemplateFromDataAndDeviceType(cardName, data, 'android', true);\\n    }\\n\\n    return {\\n      cardTemplate: template,\\n      iosTemplate: iosTemplate,\\n      androidTemplate: androidTemplate,\\n      cardName: cardName,\\n      cardData: data,\\n      renderStyle: 'card',\\n      suppressPrompt: true\\n    };\\n}\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No record found\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"glide_scripted_query\",\"value\":\"(function execute() {\\n    var options = [];\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var actions = notification_content.actions;\\n    for (var i = 0; i < actions.length; i++) {\\n        options.push({ 'value': actions[i].actionId, 'label': gs.getMessage(actions[i].label), 'render_style': 'button' });\\n    }\\n    return options;\\n})()\"},\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.actionId = vaInputs.actionable_card;\\n})()\\n\",\"id\":\"2fc5fba7d13742acbfb03cfb9620b446\",\"name\":\"Set Action Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n   vaVars.actionId = vaInputs.actionable_image_card;\\n})()\\n\",\"id\":\"504cb201c44742e28d820c87eb66af5a\",\"name\":\"Set Action Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Web Client\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaSystem.isAMBClient(vaContext.deviceType))\\n    return true;\\n})()\\n\"},\"id\":\"3cf40735caea4478bbbd1ac610bb05f5\",\"name\":\"Web Client\"},{\"type\":\"Branch\",\"label\":\"Adapters\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (!vaSystem.isAMBClient(vaContext.deviceType))\\n    return true;\\n})()\\n\"},\"id\":\"15c6434798fd41e9b1bf386d3e96d811\",\"name\":\"Adapters\"}],\"id\":\"93dbbd9dc02644e7af13206d79673d8b\",\"goal_id\":\"primary\"},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"c206678ff17c4cbf9c6b7cf9a18e329e\",\"name\":\"Actionable Adapters Card\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"90e9b0065e14430a908ef8253b870fce\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"What would you like to do?\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    \\n    return notification_content.allowSkipping == true;\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var actions = notification_content.actions;\\n    for (var i = 0; i < actions.length; i++) {\\n        options.push({ 'value': actions[i].actionId, 'label': gs.getMessageLang(actions[i].label, vaContext.getRequesterLang()), 'render_style': 'button' });\\n    }\\n    return options;\\n})()\",\"metadataScript\":\"function() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var conversationLang = vaContext.getRequesterLang();\\n\\n    // Card header variables\\n    var cardHeading = !gs.nil(notification_content.cardHeading) ? gs.getMessageLang(notification_content.cardHeading, conversationLang) : null;\\n    var cardLinkText = !gs.nil(notification_content.cardLinkText) ? gs.getMessageLang(notification_content.cardLinkText, conversationLang) : null;\\n    var cardLinkUrl = !gs.nil(notification_content.cardLinkUrl) ? notification_content.cardLinkUrl : null;\\n    \\n    // Message header variables\\n    var message = gs.getMessageLang(notification_content.message, conversationLang);\\n    var messageHeading = gs.getMessageLang(notification_content.messageHeading, conversationLang);\\n\\n    // Card body variables\\n    var fields = notification_content.fields;\\n    var tableLabel = notification_content.tableLabel;\\n    var recordDisplayValue = notification_content.recordDisplayValue;\\n    var tableName = notification_content.tableName;\\n    var sysId = notification_content.recordSysId;\\n    var showRecordLink = notification_content.showRecordLink;\\n    var imageUrl = notification_content.imageUrl;\\n    var imageAlt = notification_content.imageAlt;\\n      \\n    var questionAnswerPairs = [];\\n    Object.keys(fields).forEach(function(a){\\n        questionAnswerPairs.push({\\\"fieldLabel\\\": a, \\\"fieldValue\\\": fields[a]});\\n    });\\n      \\n    var cardData = {\\n        \\\"message\\\": message,\\n        \\\"messageHeading\\\": messageHeading,\\n        \\\"fields\\\": questionAnswerPairs,\\n        \\\"tableLabel\\\": !gs.nil(cardHeading) && cardHeading !== \\\"null\\\" ? cardHeading : tableLabel,\\n        \\\"recordDisplayValue\\\": !gs.nil(cardLinkText) && cardLinkText !== \\\"null\\\" ? cardLinkText : recordDisplayValue,\\n        \\\"table_name\\\": tableName,\\n        \\\"sys_id\\\": sysId,\\n        \\\"enableLink\\\": showRecordLink,\\n        \\\"imageUrl\\\": imageUrl,\\n        \\\"imageAlt\\\": imageAlt,\\n    };\\n\\n    if (showRecordLink) {\\n        var templatedUrl = vaSystem.applyLinkTemplate(sysId, tableName);\\n        cardData.url = !gs.nil(cardLinkUrl) && cardLinkUrl !== \\\"null\\\" ? cardLinkUrl : templatedUrl;\\n    }\\n\\n    var conversationId = vaSystem.getConversationId();\\n    templateAndSmartLinkMetadataMap = sn_cs.VASystemObject.fillTemplateFromDataDeviceTypeAndConvoId(\\\"Record Card\\\", JSON.stringify(cardData), 'mweb', false, conversationId);\\n    template = templateAndSmartLinkMetadataMap.templateKey;\\n    smartLinkMetadata = templateAndSmartLinkMetadataMap.smartLinksMetadataKey;\\n\\n\\n    return {\\n\\t    cardTemplate: \\\"\\\",\\n\\t    cardName: \\\"Notification\\\",\\n\\t    cardData: JSON.stringify(cardData),\\n\\t    smartLinksMetadataKey: smartLinkMetadata\\n    };\\n}\\n\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No record Found\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"glide_scripted_query\",\"value\":\"(function execute() {\\n    var options = [];\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var actions = notification_content.actions;\\n    for (var i = 0; i < actions.length; i++) {\\n        options.push({ 'value': actions[i].actionId, 'label': gs.getMessageLang(actions[i].label, vaContext.getRequesterLang()), 'render_style': 'button' });\\n    }\\n    return options;\\n})()\"},\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if (vaInputs.actionable_adapters_card != \\\"skip\\\")\\n       vaVars.actionId = vaInputs.actionable_adapters_card;\\n})()\\n\",\"id\":\"5be262e9d9a54475993d8b7af0d2cf70\",\"name\":\"Set Action Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var messageHeading = notification_content.messageHeading;\\n    return messageHeading;\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"9488ce2b8d294c729aaa14062f24f308\",\"name\":\"Message Heading\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n     var notification_content = JSON.parse(vaInputs.notification_content);\\n     var messageHeading = notification_content.messageHeading;\\n     if(messageHeading.length != 0)\\n        return true;\\n})()\\n\"},\"secure\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"bc9f058c59804198b489373be213a021\",\"name\":\"Select Action\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"f2f5bb10a9344650b55f55c3ef8fcd07\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"What would you like to do?\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    return gs.nil(notification_content.allowSkipping) || notification_content.allowSkipping == true;\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var actions = notification_content.actions;\\n    for (var i = 0; i < actions.length; i++) {\\n        options.push({ 'value': actions[i].actionId, 'label': gs.getMessage(actions[i].label) });\\n    }\\n    return options;\\n})()\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No actions\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"glide_scripted_query\",\"value\":\"(function execute() {\\n    var options = [];\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var actions = notification_content.actions;\\n    for (var i = 0; i < actions.length; i++) {\\n        options.push({ 'value': actions[i].actionId, 'label': gs.getMessage(actions[i].label) });\\n    }\\n    return options;\\n})()\"},\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n   vaVars.actionId = vaInputs.select_action;\\n})()\\n\",\"id\":\"919f477fa7fa4efc880d71d8ebff2d39\",\"name\":\"Set Action Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var messageHeading = notification_content.messageHeading;\\n    return messageHeading;\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"47445fddc8524b0e9d2049b0ae2d16be\",\"name\":\"Message Heading\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var message = notification_content.message;\\n    return message;\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"84969fbcbec24819af1a72509ecaf123\",\"name\":\"Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var messageHeading = notification_content.messageHeading;\\n    return messageHeading;\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"2017f8c12cc747f695b66754b0614674\",\"name\":\"Message Heading\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var message = notification_content.message;\\n    return message;\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"4ca67c8fb7d541f99c239d38f9f01b44\",\"name\":\"Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notification_content = JSON.parse(vaInputs.notification_content);\\n    var message = notification_content.message;\\n    return message;\\n})()\"}],\"request_feedback\":true,\"id\":\"11c3a91e85f040b0a799e05aeee09e17\",\"name\":\"Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessage(vaVars.actionAcknowledgement);\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"4c72771dd4f049ac92ee4c12275baea6\",\"name\":\"Action Acknowledgement\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if(!vaVars.actionAcknowledgement || vaVars.actionAcknowledgement == \\\"\\\") {\\n       return false;\\n    }\\n    return true;\\n})()\\n\"},\"secure\":false},{\"type\":\"Decision\",\"name\":\"Is SMS Device\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaContext.deviceType != 'SMS';\\n})()\\n\"},\"id\":\"c016c77b30b940b88a78802e9fc7c82e\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaContext.deviceType == 'SMS';\\n})()\\n\"},\"id\":\"55fca90657354e938a4b1b895ace0f55\",\"name\":\"Yes\"}],\"id\":\"6c36f5855cfd4a97b0fed7e7abc4ef62\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"name\":\"Link Status\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Success\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.linkstatus == 'success';\\n})()\\n\"},\"id\":\"e79aa9df865d488698d54c20256f383f\",\"name\":\"Success\"},{\"type\":\"Branch\",\"label\":\"Abort\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.linkstatus == 'aborted';\\n})()\\n\"},\"id\":\"51431fcc367041ef809b780030962bef\",\"name\":\"Abort\"},{\"type\":\"Branch\",\"label\":\"Failure\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.linkstatus == 'failure';\\n})()\\n\"},\"id\":\"44c606d4da6240808448648ae323f04a\",\"name\":\"Failure\"}],\"id\":\"f4e161939e7942cea8ceca75de1c937b\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"name\":\"Is SMS Device\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaContext.deviceType != 'SMS';\\n})()\\n\"},\"id\":\"d858ec51e4e74cec8cfb9bbd2040423e\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaContext.deviceType == 'SMS';\\n})()\\n\"},\"id\":\"0e2a3baf8844403aae1f68f80cf959c4\",\"name\":\"Yes\"}],\"id\":\"e1ec7031fbc8403da336bc081de1a14f\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"name\":\"User Locked Out\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.userLockedOut;\\n})()\\n\"},\"id\":\"a58049e798114d51b44f312d5e0917be\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.userLockedOut;\\n})()\\n\"},\"id\":\"036f438b66d74ff8a5342ff53cc57bcc\",\"name\":\"No\"}],\"id\":\"21a1b9e2e68b4e088c99a501cb978c7e\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var providerAppId = vaContext.providerAppId;\\n    var retryInterval = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy('softpin_max_invalid_attempts_interval_hrs', providerAppId);\\n    var maxRetries = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy('softpin_max_retry_attempts', providerAppId);\\n    vaVars.userLockedOut = CustomAdapterSoftPinHelper.isUserLockedOutOnMaxAttempts(providerAppId, vaContext.providerUserId,\\n                                maxRetries, retryInterval, vaInputs.userId);\\n})()\\n\",\"id\":\"f42cdd7ef6ae472288657a2f6c01d471\",\"name\":\"Get User Lockout Status\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"LibraryCall\",\"library_topic_name\":\"_link_account_adapter_\",\"library_topic_id\":\"0902a7d2530333006e61ddeeff7b1250\",\"library_topic_is_template\":false,\"parameter-mappings\":[],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"connecttola\",\"main_topic_mapped_variable_name\":\"connecttola\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"linkstatus\",\"main_topic_mapped_variable_name\":\"linkstatus\"}],\"id\":\"6acd1abd0093465d9869e525f5af42e9\",\"name\":\"_link_account_adapter_\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.switchTopic(vaVars._topic_live_agent_topic);\\n})()\\n\",\"id\":\"383868b0d87e49c9b0e336ca1cfdf896\",\"name\":\"Connect to Live Agent\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Is Linking Enabled\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.accountLinkingEnabled == true;\\n})()\\n\"},\"id\":\"3f0c1f8aff2648c786b567af6f97cf14\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.accountLinkingEnabled == false;\\n})()\\n\"},\"id\":\"6c8ce9b568954b5fbddb55b40c86ebb8\",\"name\":\"No\"}],\"id\":\"447fa9876a0343829ee6c07d30ca49c0\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var provider = JSON.parse(sn_cs.VASystemObject.getProviderByProviderAppId(vaContext.providerAppId));\\n    \\n    vaVars.accountLinkingEnabled = provider.linkAccountEnabled;\\n})()\\n\",\"id\":\"593dde48f1f8453caca844294ddb256b\",\"name\":\"Initialize SMS Related Variables\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Is Linking Enabled\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.accountLinkingEnabled == true;\\n})()\\n\"},\"id\":\"4f7700a665704c5e996b1f42c0e3a651\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.accountLinkingEnabled == false;\\n})()\\n\"},\"id\":\"5c8064b73fc9494495a52452bd4af81b\",\"name\":\"No\"}],\"id\":\"35d1ec1370b94b30a7cca8c34417861e\",\"goal_id\":\"primary\"}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"6acd1abd0093465d9869e525f5af42e9\",\"target_node_id\":\"f4e161939e7942cea8ceca75de1c937b\",\"id\":\"ee058cc5cd7c4f1f9ef9293b05660f4f\"},{\"type\":\"Edge\",\"source_node_id\":\"21a1b9e2e68b4e088c99a501cb978c7e\",\"target_node_id\":\"7813ee856773498699ae6e4176cfa892\",\"branch_id\":\"a58049e798114d51b44f312d5e0917be\",\"id\":\"a4db40dff6704a758ad794f6933093e0\",\"name\":\"a58049e798114d51b44f312d5e0917be\"},{\"type\":\"Edge\",\"source_node_id\":\"2017f8c12cc747f695b66754b0614674\",\"target_node_id\":\"4ca67c8fb7d541f99c239d38f9f01b44\",\"id\":\"4dadc9c86d544981a7c97a4431432761\"},{\"type\":\"Edge\",\"source_node_id\":\"84969fbcbec24819af1a72509ecaf123\",\"target_node_id\":\"903e435446d14a10a15097a363abcfd5\",\"id\":\"3e8d10f192ff4085a9fc425103054651\"},{\"type\":\"Edge\",\"source_node_id\":\"450216088a7a4860a15fc2531025c721\",\"target_node_id\":\"9488ce2b8d294c729aaa14062f24f308\",\"branch_id\":\"361ae948aab8496ea0d27f43f72638e4\",\"id\":\"381cf492acf7401fbb98b175dc86ec4e\",\"name\":\"361ae948aab8496ea0d27f43f72638e4\"},{\"type\":\"Edge\",\"source_node_id\":\"9b22ab1b3dc34594bc3b0f83962b98f8\",\"target_node_id\":\"7813ee856773498699ae6e4176cfa892\",\"id\":\"38782fdbd2cf488887908c2070cbd32a\"},{\"type\":\"Edge\",\"source_node_id\":\"d67bffa670d8400abf5cc123e3510b38\",\"target_node_id\":\"53762fdbc42c4ec0aad09c16760a87cf\",\"id\":\"91e6068513ad48328d2ab7411a4cb16f\"},{\"type\":\"Edge\",\"source_node_id\":\"7813ee856773498699ae6e4176cfa892\",\"target_node_id\":\"c218875d4daf43b0bf12a1fc0daf0e78\",\"id\":\"5abb366f428a4e4382487482e1509c34\"},{\"type\":\"Edge\",\"source_node_id\":\"903e435446d14a10a15097a363abcfd5\",\"target_node_id\":\"7813ee856773498699ae6e4176cfa892\",\"id\":\"bbfa0bfb28d74743b9e049fa302b36a9\"},{\"type\":\"Edge\",\"source_node_id\":\"45557b00255846e3b6f8493d0f4402c4\",\"target_node_id\":\"9b22ab1b3dc34594bc3b0f83962b98f8\",\"branch_id\":\"1f769f6ff62a4d9c918fb86e7398c7a8\",\"id\":\"49d37f0b26b844dda95cd2875a1b3c40\",\"name\":\"1f769f6ff62a4d9c918fb86e7398c7a8\"},{\"type\":\"Edge\",\"source_node_id\":\"45557b00255846e3b6f8493d0f4402c4\",\"target_node_id\":\"33293d8f63ce42a0a1fe4194488aca47\",\"branch_id\":\"48d0dde65cad4ad7a4bcf73f5827422f\",\"id\":\"13e8ce9d43c3405da495f096c1fe7548\",\"name\":\"48d0dde65cad4ad7a4bcf73f5827422f\"},{\"type\":\"Edge\",\"source_node_id\":\"33293d8f63ce42a0a1fe4194488aca47\",\"target_node_id\":\"9d2dd7810e3546199aa1366d301f2383\",\"branch_id\":\"846362c3159846b2a48e74bb3fa67a83\",\"id\":\"3b9fd859a2604ac28c15897a08ed8570\",\"name\":\"846362c3159846b2a48e74bb3fa67a83\"},{\"type\":\"Edge\",\"source_node_id\":\"9d2dd7810e3546199aa1366d301f2383\",\"target_node_id\":\"7813ee856773498699ae6e4176cfa892\",\"id\":\"96bb135628c24f27acc8764f943ac008\"},{\"type\":\"Edge\",\"source_node_id\":\"ebb3b128dfc048b5a2e8e4c4158a912b\",\"target_node_id\":\"1c612561fe5b46b1ad5b6a3b78665b1f\",\"id\":\"1d236671fbae4306a05a1d0dd55545f2\"},{\"type\":\"Edge\",\"source_node_id\":\"1c612561fe5b46b1ad5b6a3b78665b1f\",\"target_node_id\":\"45557b00255846e3b6f8493d0f4402c4\",\"branch_id\":\"fefec9b81f2f4bf385428243fe390329\",\"id\":\"60b23e0435dd45f38b99bcc79fbe0d07\",\"name\":\"fefec9b81f2f4bf385428243fe390329\"},{\"type\":\"Edge\",\"source_node_id\":\"450216088a7a4860a15fc2531025c721\",\"target_node_id\":\"5784e985b55044b8a26d6793cdb20d7a\",\"branch_id\":\"1183df9e0c8d454ea7f0cc84dc96b25c\",\"id\":\"f6b7614830344ad3912056b372452c10\",\"name\":\"1183df9e0c8d454ea7f0cc84dc96b25c\"},{\"type\":\"Edge\",\"source_node_id\":\"4208523587a744cfbed53025a44b7693\",\"target_node_id\":\"2fc5fba7d13742acbfb03cfb9620b446\",\"id\":\"3cf1bc297a284e3c99ee5c6985df92c9\"},{\"type\":\"Edge\",\"source_node_id\":\"2fc5fba7d13742acbfb03cfb9620b446\",\"target_node_id\":\"d67bffa670d8400abf5cc123e3510b38\",\"id\":\"68269de241324dab8ef4fc40febb588d\"},{\"type\":\"Edge\",\"source_node_id\":\"5784e985b55044b8a26d6793cdb20d7a\",\"target_node_id\":\"504cb201c44742e28d820c87eb66af5a\",\"id\":\"211e3bea51044eca83fdeaeed3534621\"},{\"type\":\"Edge\",\"source_node_id\":\"504cb201c44742e28d820c87eb66af5a\",\"target_node_id\":\"d67bffa670d8400abf5cc123e3510b38\",\"id\":\"8e9f3e4df9314cb78687247517278346\"},{\"type\":\"Edge\",\"source_node_id\":\"1c612561fe5b46b1ad5b6a3b78665b1f\",\"target_node_id\":\"93dbbd9dc02644e7af13206d79673d8b\",\"branch_id\":\"475a6d5175fb4bfe93eaf5215b1fa54e\",\"id\":\"17a02b212d454bba841654c75d000f6f\",\"name\":\"475a6d5175fb4bfe93eaf5215b1fa54e\"},{\"type\":\"Edge\",\"source_node_id\":\"93dbbd9dc02644e7af13206d79673d8b\",\"target_node_id\":\"450216088a7a4860a15fc2531025c721\",\"branch_id\":\"3cf40735caea4478bbbd1ac610bb05f5\",\"id\":\"2f17803c72d54fc8818d3d7ce64f8231\",\"name\":\"3cf40735caea4478bbbd1ac610bb05f5\"},{\"type\":\"Edge\",\"source_node_id\":\"5be262e9d9a54475993d8b7af0d2cf70\",\"target_node_id\":\"d67bffa670d8400abf5cc123e3510b38\",\"id\":\"afceb27bdc314bd1a011d6ba9e2f7da2\"},{\"type\":\"Edge\",\"source_node_id\":\"bc9f058c59804198b489373be213a021\",\"target_node_id\":\"919f477fa7fa4efc880d71d8ebff2d39\",\"id\":\"c73e3b514f55435e876ea72b7578467e\"},{\"type\":\"Edge\",\"source_node_id\":\"919f477fa7fa4efc880d71d8ebff2d39\",\"target_node_id\":\"d67bffa670d8400abf5cc123e3510b38\",\"id\":\"54c059c67bd74aa6a7bf705154a99233\"},{\"type\":\"Edge\",\"source_node_id\":\"33293d8f63ce42a0a1fe4194488aca47\",\"target_node_id\":\"47445fddc8524b0e9d2049b0ae2d16be\",\"branch_id\":\"c57f7c265c1a40f882de1183a8bddad3\",\"id\":\"11619493ba004f0cbf65dda4dd42113c\",\"name\":\"c57f7c265c1a40f882de1183a8bddad3\"},{\"type\":\"Edge\",\"source_node_id\":\"47445fddc8524b0e9d2049b0ae2d16be\",\"target_node_id\":\"84969fbcbec24819af1a72509ecaf123\",\"id\":\"85e3c0738ee146e09689be1efc2bca62\"},{\"type\":\"Edge\",\"source_node_id\":\"450216088a7a4860a15fc2531025c721\",\"target_node_id\":\"2017f8c12cc747f695b66754b0614674\",\"branch_id\":\"3af2632cd322403b8ba2429f2d03f7cc\",\"id\":\"153547eb66f24683afe983f8486e497b\",\"name\":\"3af2632cd322403b8ba2429f2d03f7cc\"},{\"type\":\"Edge\",\"source_node_id\":\"4ca67c8fb7d541f99c239d38f9f01b44\",\"target_node_id\":\"4208523587a744cfbed53025a44b7693\",\"id\":\"39065e4fe7f4498c8c5d1bf887913adb\"},{\"type\":\"Edge\",\"source_node_id\":\"9488ce2b8d294c729aaa14062f24f308\",\"target_node_id\":\"11c3a91e85f040b0a799e05aeee09e17\",\"id\":\"b8e5fe25d0c2489aaf442939b5291ff0\"},{\"type\":\"Edge\",\"source_node_id\":\"11c3a91e85f040b0a799e05aeee09e17\",\"target_node_id\":\"bc9f058c59804198b489373be213a021\",\"id\":\"ee9f2ff058bf431e8eaad47cac45ed5d\"},{\"type\":\"Edge\",\"source_node_id\":\"53762fdbc42c4ec0aad09c16760a87cf\",\"target_node_id\":\"4c72771dd4f049ac92ee4c12275baea6\",\"id\":\"e4d39a6b260845899fce9a8480da9212\"},{\"type\":\"Edge\",\"source_node_id\":\"4c72771dd4f049ac92ee4c12275baea6\",\"target_node_id\":\"7813ee856773498699ae6e4176cfa892\",\"id\":\"0e2909742e124779bc35197b9181a860\"},{\"type\":\"Edge\",\"source_node_id\":\"c206678ff17c4cbf9c6b7cf9a18e329e\",\"target_node_id\":\"6c36f5855cfd4a97b0fed7e7abc4ef62\",\"id\":\"ebb793aa1bde4e7fa8d8587727753b6c\"},{\"type\":\"Edge\",\"source_node_id\":\"6c36f5855cfd4a97b0fed7e7abc4ef62\",\"target_node_id\":\"5be262e9d9a54475993d8b7af0d2cf70\",\"branch_id\":\"c016c77b30b940b88a78802e9fc7c82e\",\"id\":\"e993d26f62bc42f582e5f233b373c274\",\"name\":\"c016c77b30b940b88a78802e9fc7c82e\"},{\"type\":\"Edge\",\"source_node_id\":\"f4e161939e7942cea8ceca75de1c937b\",\"target_node_id\":\"5be262e9d9a54475993d8b7af0d2cf70\",\"branch_id\":\"e79aa9df865d488698d54c20256f383f\",\"id\":\"0f38bd47e6ac44b589b4927c8b5fa520\",\"name\":\"e79aa9df865d488698d54c20256f383f\"},{\"type\":\"Edge\",\"source_node_id\":\"93dbbd9dc02644e7af13206d79673d8b\",\"target_node_id\":\"e1ec7031fbc8403da336bc081de1a14f\",\"branch_id\":\"15c6434798fd41e9b1bf386d3e96d811\",\"id\":\"a3ac9266bb2643a295978250b8275946\",\"name\":\"15c6434798fd41e9b1bf386d3e96d811\"},{\"type\":\"Edge\",\"source_node_id\":\"e1ec7031fbc8403da336bc081de1a14f\",\"target_node_id\":\"c206678ff17c4cbf9c6b7cf9a18e329e\",\"branch_id\":\"d858ec51e4e74cec8cfb9bbd2040423e\",\"id\":\"633318a370384f6aacc97da6747cc54a\",\"name\":\"d858ec51e4e74cec8cfb9bbd2040423e\"},{\"type\":\"Edge\",\"source_node_id\":\"21a1b9e2e68b4e088c99a501cb978c7e\",\"target_node_id\":\"c206678ff17c4cbf9c6b7cf9a18e329e\",\"branch_id\":\"036f438b66d74ff8a5342ff53cc57bcc\",\"id\":\"721e85a10c6044509d2a65a36b099e4e\",\"name\":\"036f438b66d74ff8a5342ff53cc57bcc\"},{\"type\":\"Edge\",\"source_node_id\":\"f42cdd7ef6ae472288657a2f6c01d471\",\"target_node_id\":\"21a1b9e2e68b4e088c99a501cb978c7e\",\"id\":\"d006e7c540464d7c9a80e1d0d9dbea9b\"},{\"type\":\"Edge\",\"source_node_id\":\"f4e161939e7942cea8ceca75de1c937b\",\"target_node_id\":\"7813ee856773498699ae6e4176cfa892\",\"branch_id\":\"51431fcc367041ef809b780030962bef\",\"id\":\"02b9d1fc14be49aabaf4747898598308\",\"name\":\"51431fcc367041ef809b780030962bef\"},{\"type\":\"Edge\",\"source_node_id\":\"f4e161939e7942cea8ceca75de1c937b\",\"target_node_id\":\"383868b0d87e49c9b0e336ca1cfdf896\",\"branch_id\":\"44c606d4da6240808448648ae323f04a\",\"id\":\"f89e494ca74e4168b0cda7ba2ed68837\",\"name\":\"44c606d4da6240808448648ae323f04a\"},{\"type\":\"Edge\",\"source_node_id\":\"383868b0d87e49c9b0e336ca1cfdf896\",\"target_node_id\":\"c218875d4daf43b0bf12a1fc0daf0e78\",\"id\":\"45333aa87b214b57ab78ec79c08d1d0d\"},{\"type\":\"Edge\",\"source_node_id\":\"447fa9876a0343829ee6c07d30ca49c0\",\"target_node_id\":\"f42cdd7ef6ae472288657a2f6c01d471\",\"branch_id\":\"3f0c1f8aff2648c786b567af6f97cf14\",\"id\":\"5193b2224ff64626b44541ae4166ef5b\",\"name\":\"3f0c1f8aff2648c786b567af6f97cf14\"},{\"type\":\"Edge\",\"source_node_id\":\"447fa9876a0343829ee6c07d30ca49c0\",\"target_node_id\":\"c206678ff17c4cbf9c6b7cf9a18e329e\",\"branch_id\":\"6c8ce9b568954b5fbddb55b40c86ebb8\",\"id\":\"9f20679e68594ee58cb24a82f297ea0b\",\"name\":\"6c8ce9b568954b5fbddb55b40c86ebb8\"},{\"type\":\"Edge\",\"source_node_id\":\"e1ec7031fbc8403da336bc081de1a14f\",\"target_node_id\":\"593dde48f1f8453caca844294ddb256b\",\"branch_id\":\"0e2a3baf8844403aae1f68f80cf959c4\",\"id\":\"8d3e84a974ff4ca9bb204459528a6e36\",\"name\":\"0e2a3baf8844403aae1f68f80cf959c4\"},{\"type\":\"Edge\",\"source_node_id\":\"593dde48f1f8453caca844294ddb256b\",\"target_node_id\":\"447fa9876a0343829ee6c07d30ca49c0\",\"id\":\"163779959c844ccbaae61e6644b56b3a\"},{\"type\":\"Edge\",\"source_node_id\":\"6c36f5855cfd4a97b0fed7e7abc4ef62\",\"target_node_id\":\"35d1ec1370b94b30a7cca8c34417861e\",\"branch_id\":\"55fca90657354e938a4b1b895ace0f55\",\"id\":\"181a4dcfecf64f72930c7307eb91c98a\",\"name\":\"55fca90657354e938a4b1b895ace0f55\"},{\"type\":\"Edge\",\"source_node_id\":\"35d1ec1370b94b30a7cca8c34417861e\",\"target_node_id\":\"6acd1abd0093465d9869e525f5af42e9\",\"branch_id\":\"4f7700a665704c5e996b1f42c0e3a651\",\"id\":\"c4c193d58c3d4c03a747682ee349a068\",\"name\":\"4f7700a665704c5e996b1f42c0e3a651\"},{\"type\":\"Edge\",\"source_node_id\":\"35d1ec1370b94b30a7cca8c34417861e\",\"target_node_id\":\"5be262e9d9a54475993d8b7af0d2cf70\",\"branch_id\":\"5c8064b73fc9494495a52452bd4af81b\",\"id\":\"1a1440aa13994ec880008d1d7c50ad8e\",\"name\":\"5c8064b73fc9494495a52452bd4af81b\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"actionId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"d9320f28f82945ca8c79c9bb9ea7d88b\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"accountLinkingEnabled\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return false;\\n})()\\n\"},\"list\":false,\"id\":\"12a1b9eb4b974dbbbeecb017dd593eaa\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"notification_content\",\"list\":false,\"id\":\"995e361142024ec4b56345b8eb2acfca\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"Reference\",\"table\":\"incident\",\"id\":\"36b083d30a7d4e6d8bda0612997f80d6\",\"name\":\"actionable_card\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Reference\",\"table\":\"incident\",\"id\":\"61813b06bd17480fb41a0f6ed6aa7f05\",\"name\":\"actionable_image_card\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Reference\",\"table\":\"incident\",\"id\":\"90e9b0065e14430a908ef8253b870fce\",\"name\":\"actionable_adapters_card\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Reference\",\"table\":\"incident\",\"id\":\"f2f5bb10a9344650b55f55c3ef8fcd07\",\"name\":\"select_action\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"connecttola\",\"list\":false,\"id\":\"3a3bc4547a824d70ad0964bde4964278\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"linkstatus\",\"list\":false,\"id\":\"942d9cc7e40947b8bde1ad253bd79cb1\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"notification_content\",\"label\":\"notification_content\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"995e361142024ec4b56345b8eb2acfca\",\"type\":\"String\",\"hint\":\"\"}],\"return-values-mapping\":[]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"ec769c61530210106e61ddeeff7b12b9\",\"name\":\"_notification_controller_topic_block_\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"model_type\":\"nlu_keyword\",\"modify_confirmation_enabled\":false,\"library\":true,\"csTopicId\":\"bb9714a9530210106e61ddeeff7b1201\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_notification_controller_topic_block_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"ec769c61530210106e61ddeeff7b12b9","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/bb9714a9530210106e61ddeeff7b1201","value":"bb9714a9530210106e61ddeeff7b1201"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"19","sys_updated_on":"2024-09-23 12:07:53","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.71\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"0a68e52f4a824c64b26c0dadc01e8587\": {\n          \"id\": \"0a68e52f4a824c64b26c0dadc01e8587\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": \"(function execute() {\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\",\n            \"mode\": \"script\"\n          }\n        },\n        \"3a9fd873439049cf86cee74820a72502\": {\n          \"id\": \"3a9fd873439049cf86cee74820a72502\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": \"(function execute() {\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n})()\\n\",\n            \"mode\": \"script\"\n          }\n        },\n        \"53ba4e81d29348c2973865c19484f841\": {\n          \"id\": \"53ba4e81d29348c2973865c19484f841\",\n          \"stepType\": \"Decision\",\n          \"name\": \"User selection\"\n        },\n        \"14d461ffe6a6420b9d46cda65a32969e\": {\n          \"id\": \"14d461ffe6a6420b9d46cda65a32969e\",\n          \"name\": \"End conversation\",\n          \"script\": \"(function execute() {\\n    vaSystem.endConversation();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9708f667cc36497bb4c64b3d5627f78e\": {\n          \"id\": \"9708f667cc36497bb4c64b3d5627f78e\",\n          \"name\": \"Conect to agent\",\n          \"script\": \"(function execute() {\\n    vaSystem.connectToAgent();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"351257ea569f45d29d92df12cadc8e80\": {\n          \"id\": \"351257ea569f45d29d92df12cadc8e80\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is End Conversation Applicable?\"\n        },\n        \"be7466f53bfa482486a8ef0b23a2e50b\": {\n          \"id\": \"be7466f53bfa482486a8ef0b23a2e50b\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Live Agent Applicable?\"\n        },\n        \"4b3988256572495a90a519353ad8809e\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Options without LA\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"You are currently in the middle of a conversation. Would you like to end the conversation or continue?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"dc25194adbd04d9493eab90b378564a4\",\n          \"id\": \"4b3988256572495a90a519353ad8809e\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"c39bce3cd6974077be536b17ef7dcd21\": {\n          \"id\": \"c39bce3cd6974077be536b17ef7dcd21\",\n          \"stepType\": \"Decision\",\n          \"name\": \"User selection\"\n        },\n        \"9b03e2948e3b486fb3d8fe2ff577b84e\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Options with LA\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"You are currently in the middle of the conversation. Would you like to end or continue with the conversation or connect with the Agent?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"ba2b9607ce884c2fb52fe4b5284b735b\",\n          \"id\": \"9b03e2948e3b486fb3d8fe2ff577b84e\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"972ff321960b4c6aba815c0925698e54\": {\n          \"id\": \"972ff321960b4c6aba815c0925698e54\",\n          \"name\": \"Post processing\",\n          \"script\": \"(function execute() {\\n    var cafContextualUtility = new CAFContextualUtility();\\n    cafContextualUtility.postProcess();   \\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d03e5841dd474960ad725357243770d9\": {\n          \"id\": \"d03e5841dd474960ad725357243770d9\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Resume conversation message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"033843361ed147e2821c7242a6e4f576\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"be7466f53bfa482486a8ef0b23a2e50b\",\n          \"target\": \"9b03e2948e3b486fb3d8fe2ff577b84e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_is_agent_applicable;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"99021f3368354858b630c749114d6bbe\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"be7466f53bfa482486a8ef0b23a2e50b\",\n          \"target\": \"4b3988256572495a90a519353ad8809e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_is_agent_applicable;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"98efa02abf224d92b920b6b2d4923fb7\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"53ba4e81d29348c2973865c19484f841\",\n          \"target\": \"d03e5841dd474960ad725357243770d9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.options_with_la=0\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Cancel\"\n        },\n        {\n          \"id\": \"459575b95fc44912b5a67f76a879cbf3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0a68e52f4a824c64b26c0dadc01e8587\",\n          \"target\": \"351257ea569f45d29d92df12cadc8e80\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5ebba5d8eec34388991e32a6a143a36c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"53ba4e81d29348c2973865c19484f841\",\n          \"target\": \"14d461ffe6a6420b9d46cda65a32969e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.options_with_la=2\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"End conversation\"\n        },\n        {\n          \"id\": \"1480587be29d48e38f826c02706a49b8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"14d461ffe6a6420b9d46cda65a32969e\",\n          \"target\": \"3a9fd873439049cf86cee74820a72502\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e3240a7e82ed4fb5871f2752c0d41572\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"53ba4e81d29348c2973865c19484f841\",\n          \"target\": \"9708f667cc36497bb4c64b3d5627f78e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.options_with_la=1\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Chat with agent\"\n        },\n        {\n          \"id\": \"882b2e1966974ba0af05c73c1033e023\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9708f667cc36497bb4c64b3d5627f78e\",\n          \"target\": \"3a9fd873439049cf86cee74820a72502\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3929be88519343da95eecaadd400451d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"351257ea569f45d29d92df12cadc8e80\",\n          \"target\": \"be7466f53bfa482486a8ef0b23a2e50b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return (vaVars.global_is_end_conversation_applicable);\\n})()\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"008ab77844b34f4cb6f3e0649a349da3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4b3988256572495a90a519353ad8809e\",\n          \"target\": \"c39bce3cd6974077be536b17ef7dcd21\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2e5716b744e44935bd19426a88cde922\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c39bce3cd6974077be536b17ef7dcd21\",\n          \"target\": \"d03e5841dd474960ad725357243770d9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.options_without_la=0\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Cancel\"\n        },\n        {\n          \"id\": \"72b7fe58834d4a2bbeca670d6e67da78\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c39bce3cd6974077be536b17ef7dcd21\",\n          \"target\": \"14d461ffe6a6420b9d46cda65a32969e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.options_without_la=1\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"End conversation\"\n        },\n        {\n          \"id\": \"dce6d22ca2fc4b0dae157c0183509182\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9b03e2948e3b486fb3d8fe2ff577b84e\",\n          \"target\": \"53ba4e81d29348c2973865c19484f841\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9031796c5c63497a9c1c8b9747de12fc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"972ff321960b4c6aba815c0925698e54\",\n          \"target\": \"3a9fd873439049cf86cee74820a72502\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"25fe92179d5b43c3b706077858b8080c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"351257ea569f45d29d92df12cadc8e80\",\n          \"target\": \"972ff321960b4c6aba815c0925698e54\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_is_end_conversation_applicable;\\n})()\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"ef6a5e89d3d14cdf9e31037c52ce99ff\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d03e5841dd474960ad725357243770d9\",\n          \"target\": \"972ff321960b4c6aba815c0925698e54\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"dc25194adbd04d9493eab90b378564a4\": {\n      \"id\": \"dc25194adbd04d9493eab90b378564a4\",\n      \"name\": \"options_without_la\",\n      \"label\": \"Options Without LA\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"End Conversation\",\n          \"value\": \"1\"\n        },\n        {\n          \"label\": \"Continue\",\n          \"value\": \"0\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"4b3988256572495a90a519353ad8809e\",\n      \"isHidden\": false\n    },\n    \"ba2b9607ce884c2fb52fe4b5284b735b\": {\n      \"id\": \"ba2b9607ce884c2fb52fe4b5284b735b\",\n      \"name\": \"options_with_la\",\n      \"label\": \"Options With LA\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"End conversation\",\n          \"value\": \"2\"\n        },\n        {\n          \"label\": \"Chat with agent\",\n          \"value\": \"1\",\n          \"checked\": true\n        },\n        {\n          \"label\": \"Continue\",\n          \"value\": \"0\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"9b03e2948e3b486fb3d8fe2ff577b84e\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"17d49124537310100e99ddeeff7b1284","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9cc37b3704b52210559073c06a02f781","value":"9cc37b3704b52210559073c06a02f781"},"sys_update_name":"sys_cb_design_topic_17d49124537310100e99ddeeff7b1284","sys_updated_by":"admin","sys_created_on":"2020-10-08 12:32:48","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"6e601da459ce46529e46b767e3522f48\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"6e601da459ce46529e46b767e3522f48\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"6e601da459ce46529e46b767e3522f48\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\"},\"id\":\"0a68e52f4a824c64b26c0dadc01e8587\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n})()\\n\"},\"id\":\"3a9fd873439049cf86cee74820a72502\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"User selection\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Cancel\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"options_with_la=0\"},\"id\":\"da888036f6024f8f935fdb8037c809b5\",\"name\":\"Cancel\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"End conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"options_with_la=2\"},\"id\":\"bae92af7516e4d509dcaff80b7e1563e\",\"name\":\"End conversation\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Chat with agent\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"options_with_la=1\"},\"id\":\"45532d9a42c744558d62be22f31ae0de\",\"name\":\"Chat with agent\",\"expert_mode\":false}],\"id\":\"53ba4e81d29348c2973865c19484f841\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.endConversation();\\n})()\\n\",\"id\":\"14d461ffe6a6420b9d46cda65a32969e\",\"name\":\"End conversation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.connectToAgent();\\n})()\\n\",\"id\":\"9708f667cc36497bb4c64b3d5627f78e\",\"name\":\"Conect to agent\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Is End Conversation Applicable?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return (vaVars.global_is_end_conversation_applicable);\\n})()\"},\"id\":\"bbf6154e08ad4985a5ef675710d46ca6\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_is_end_conversation_applicable;\\n})()\"},\"id\":\"1c54b1a9feea431eaf132c44ae5ad99a\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"351257ea569f45d29d92df12cadc8e80\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Is Live Agent Applicable?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_is_agent_applicable;\\n})()\\n\"},\"id\":\"b67918f127df41209b1621f16ff05e60\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_is_agent_applicable;\\n})()\\n\"},\"id\":\"676f0181103c415baf60717bddc0a5ef\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"be7466f53bfa482486a8ef0b23a2e50b\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"4b3988256572495a90a519353ad8809e\",\"name\":\"Options without LA\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\"},\"expert_mode\":false,\"variable_id\":\"dc25194adbd04d9493eab90b378564a4\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"You are currently in the middle of a conversation. Would you like to end the conversation or continue?\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"User selection\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Cancel\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"options_without_la=0\"},\"id\":\"118d2d9a3eba46d0ac02b19adee38153\",\"name\":\"Cancel\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"End conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"options_without_la=1\"},\"id\":\"d1e4d046c3624257a9d1ea4a726892a5\",\"name\":\"End conversation\",\"expert_mode\":false}],\"id\":\"c39bce3cd6974077be536b17ef7dcd21\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"9b03e2948e3b486fb3d8fe2ff577b84e\",\"name\":\"Options with LA\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\"},\"expert_mode\":false,\"variable_id\":\"ba2b9607ce884c2fb52fe4b5284b735b\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"You are currently in the middle of a conversation. Would you like to end the conversation or  chat with agent or continue?\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var cafContextualUtility = new CAFContextualUtility();\\n    cafContextualUtility.postProcess();   \\n})()\",\"id\":\"972ff321960b4c6aba815c0925698e54\",\"name\":\"Post processing\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"d03e5841dd474960ad725357243770d9\",\"name\":\"Resume conversation message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"be7466f53bfa482486a8ef0b23a2e50b\",\"target_node_id\":\"9b03e2948e3b486fb3d8fe2ff577b84e\",\"branch_id\":\"b67918f127df41209b1621f16ff05e60\",\"id\":\"033843361ed147e2821c7242a6e4f576\",\"name\":\"b67918f127df41209b1621f16ff05e60\"},{\"type\":\"Edge\",\"source_node_id\":\"be7466f53bfa482486a8ef0b23a2e50b\",\"target_node_id\":\"4b3988256572495a90a519353ad8809e\",\"branch_id\":\"676f0181103c415baf60717bddc0a5ef\",\"id\":\"99021f3368354858b630c749114d6bbe\",\"name\":\"676f0181103c415baf60717bddc0a5ef\"},{\"type\":\"Edge\",\"source_node_id\":\"53ba4e81d29348c2973865c19484f841\",\"target_node_id\":\"d03e5841dd474960ad725357243770d9\",\"branch_id\":\"da888036f6024f8f935fdb8037c809b5\",\"id\":\"98efa02abf224d92b920b6b2d4923fb7\",\"name\":\"da888036f6024f8f935fdb8037c809b5\"},{\"type\":\"Edge\",\"source_node_id\":\"0a68e52f4a824c64b26c0dadc01e8587\",\"target_node_id\":\"351257ea569f45d29d92df12cadc8e80\",\"id\":\"459575b95fc44912b5a67f76a879cbf3\"},{\"type\":\"Edge\",\"source_node_id\":\"53ba4e81d29348c2973865c19484f841\",\"target_node_id\":\"14d461ffe6a6420b9d46cda65a32969e\",\"branch_id\":\"bae92af7516e4d509dcaff80b7e1563e\",\"id\":\"5ebba5d8eec34388991e32a6a143a36c\",\"name\":\"bae92af7516e4d509dcaff80b7e1563e\"},{\"type\":\"Edge\",\"source_node_id\":\"14d461ffe6a6420b9d46cda65a32969e\",\"target_node_id\":\"3a9fd873439049cf86cee74820a72502\",\"id\":\"1480587be29d48e38f826c02706a49b8\"},{\"type\":\"Edge\",\"source_node_id\":\"53ba4e81d29348c2973865c19484f841\",\"target_node_id\":\"9708f667cc36497bb4c64b3d5627f78e\",\"branch_id\":\"45532d9a42c744558d62be22f31ae0de\",\"id\":\"e3240a7e82ed4fb5871f2752c0d41572\",\"name\":\"45532d9a42c744558d62be22f31ae0de\"},{\"type\":\"Edge\",\"source_node_id\":\"9708f667cc36497bb4c64b3d5627f78e\",\"target_node_id\":\"3a9fd873439049cf86cee74820a72502\",\"id\":\"882b2e1966974ba0af05c73c1033e023\"},{\"type\":\"Edge\",\"source_node_id\":\"351257ea569f45d29d92df12cadc8e80\",\"target_node_id\":\"be7466f53bfa482486a8ef0b23a2e50b\",\"branch_id\":\"bbf6154e08ad4985a5ef675710d46ca6\",\"id\":\"3929be88519343da95eecaadd400451d\",\"name\":\"bbf6154e08ad4985a5ef675710d46ca6\"},{\"type\":\"Edge\",\"source_node_id\":\"4b3988256572495a90a519353ad8809e\",\"target_node_id\":\"c39bce3cd6974077be536b17ef7dcd21\",\"id\":\"008ab77844b34f4cb6f3e0649a349da3\"},{\"type\":\"Edge\",\"source_node_id\":\"c39bce3cd6974077be536b17ef7dcd21\",\"target_node_id\":\"d03e5841dd474960ad725357243770d9\",\"branch_id\":\"118d2d9a3eba46d0ac02b19adee38153\",\"id\":\"2e5716b744e44935bd19426a88cde922\",\"name\":\"118d2d9a3eba46d0ac02b19adee38153\"},{\"type\":\"Edge\",\"source_node_id\":\"c39bce3cd6974077be536b17ef7dcd21\",\"target_node_id\":\"14d461ffe6a6420b9d46cda65a32969e\",\"branch_id\":\"d1e4d046c3624257a9d1ea4a726892a5\",\"id\":\"72b7fe58834d4a2bbeca670d6e67da78\",\"name\":\"d1e4d046c3624257a9d1ea4a726892a5\"},{\"type\":\"Edge\",\"source_node_id\":\"9b03e2948e3b486fb3d8fe2ff577b84e\",\"target_node_id\":\"53ba4e81d29348c2973865c19484f841\",\"id\":\"dce6d22ca2fc4b0dae157c0183509182\"},{\"type\":\"Edge\",\"source_node_id\":\"972ff321960b4c6aba815c0925698e54\",\"target_node_id\":\"3a9fd873439049cf86cee74820a72502\",\"id\":\"9031796c5c63497a9c1c8b9747de12fc\"},{\"type\":\"Edge\",\"source_node_id\":\"351257ea569f45d29d92df12cadc8e80\",\"target_node_id\":\"972ff321960b4c6aba815c0925698e54\",\"branch_id\":\"1c54b1a9feea431eaf132c44ae5ad99a\",\"id\":\"25fe92179d5b43c3b706077858b8080c\",\"name\":\"1c54b1a9feea431eaf132c44ae5ad99a\"},{\"type\":\"Edge\",\"source_node_id\":\"d03e5841dd474960ad725357243770d9\",\"target_node_id\":\"972ff321960b4c6aba815c0925698e54\",\"id\":\"ef6a5e89d3d14cdf9e31037c52ce99ff\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"auto_select\":false,\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[{\"name\":\"End Conversation\",\"element\":\"1\"},{\"name\":\"Continue\",\"element\":\"0\"}],\"id\":\"dc25194adbd04d9493eab90b378564a4\",\"name\":\"options_without_la\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"label\":\"Options Without LA\"},{\"type\":\"Choice\",\"choices\":[{\"name\":\"End conversation\",\"element\":\"2\"},{\"name\":\"Chat with agent\",\"element\":\"1\"},{\"name\":\"Continue\",\"element\":\"0\"}],\"id\":\"ba2b9607ce884c2fb52fe4b5284b735b\",\"name\":\"options_with_la\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"label\":\"Options With LA\"}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return false;\\n})()\\n\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"f70fe029532210105498ddeeff7b1242\",\"name\":\"_hi_\",\"key_phrases\":[\"_hi_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"title\":\"_hi_\",\"library\":false,\"csTopicId\":\"4dd03069532210105498ddeeff7b126e\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_hi_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"f70fe029532210105498ddeeff7b1242","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/4dd03069532210105498ddeeff7b126e","value":"4dd03069532210105498ddeeff7b126e"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"1","sys_updated_on":"2022-04-05 10:03:04","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.40\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"0fb3b6ff9e344abe92e34537af851c2f\": {\n          \"id\": \"0fb3b6ff9e344abe92e34537af851c2f\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"3bbf2e8af7a94cea8af9fe2ee06aa232\": {\n          \"id\": \"3bbf2e8af7a94cea8af9fe2ee06aa232\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"cc62e227f6dd4804aeaf3dbe74f259f4\": {\n          \"id\": \"cc62e227f6dd4804aeaf3dbe74f259f4\",\n          \"name\": \"evaluate\",\n          \"script\": \"(function execute() {\\n    var addMessage = function(val){\\n        if(message) {\\n            return message + '<br/>' + val;\\n        }\\n        return val;\\n    }\\n    var getGlideRecord = function(tableName){\\n        return new GlideRecord(tableName);\\n    }\\n    var getInteraction = function(interactionNumber){\\n        var gr = getGlideRecord('interaction');\\n        gr.addQuery('number', interactionNumber);\\n        gr.query();\\n        return gr;\\n    }\\n    var getWorkItemFromInteraction = function(interactionSysId){\\n        var gr = getGlideRecord('awa_work_item');\\n        gr.addQuery('document_id', interactionSysId);\\n        gr.query();\\n        return gr;\\n    }\\n    var VIRTUAL_AGENT_SYS_ID = '2e94fca9c3123010d81b6e221f40dd08';\\n    var MSG_WORK_ITEM_GENERATED = '{0} work item generated. ';\\n    var MSG_INTERACTION_TO_VIRTUAL_AGENT = 'The interaction is assigned to Virtual Agent. ';\\n    var MSG_WORK_ITEM_NOT_GENERATED = 'Work item is not created. ';\\n    var MSG_CHECK_FOR_BUSINESS_RULES = 'Check for Business rules on awa_work_item table or time out configuration based on the reason for canceling the work items. ';\\n    var MSG_NO_QUEUE_EXIST = 'No queue exist for Interaction with type: {0}. ';\\n    var MSG_INTERCTION_NOT_FOUND = 'Interaction not found with number {0}. ';\\n    var MSG_AGENT_AVAILABLE = 'Right now Agents are available for Service Channel: {0}';\\n    var MSG_NO_AGENT_AVAILABLE = 'Right now no Agent available for Service Channel: {0}. ';\\n    var MSG_NO_AGENT_AVAILABLE_WITH_SKILLS = 'Right now no Agent available for Service Channel: {0} with required skills. ';\\n    var MSG_AGENT_AVAILABLE_WITH_SKILLS = 'Right now Agents are available for Service Channel: {0} with required skills. ';\\n    var MSG_WORK_ITEM_STATUS = 'Associated work item is in {0} state';\\n    var MSG_WORK_ITEM_STATUS_CANCELLED = 'Associated work item is in cancelled state with reason {0}';\\n    var MSG_AVAILABLE_QUEUES = 'Below queues are available. Please validate the schedule and utilization conditions: ';\\n    var message = '';\\n    var interactionGr = getInteraction(vaInputs.interaction_number);\\n    if (interactionGr.next()) {\\n       var interactionType = interactionGr.type;\\n       if (interactionGr.getValue('assigned_to') == VIRTUAL_AGENT_SYS_ID) {\\n            message = addMessage(gs.getMessage(MSG_INTERACTION_TO_VIRTUAL_AGENT));\\n            vaVars.output_message = message;\\n            return;\\n       }\\n       var workItemGr = getWorkItemFromInteraction(interactionGr.getUniqueValue());\\n       var count = workItemGr.getRowCount();\\n       if (count > 1) {\\n           message = addMessage(gs.getMessage(MSG_WORK_ITEM_GENERATED, count));\\n           message = addMessage(gs.getMessage(MSG_CHECK_FOR_BUSINESS_RULES));\\n       } else if (count == 0) {\\n            message = addMessage(gs.getMessage(MSG_WORK_ITEM_NOT_GENERATED));\\n            var queueGr = new GlideRecord('awa_queue');\\n            queueGr.addEncodedQuery('active=true^service_channel.workitem_table=interaction^service_channel.type='+interactionType);\\n            queueGr.orderBy('order');\\n            queueGr.query();\\n            if (queueGr.getRowCount() == 0){\\n              message = addMessage(gs.getMessage(MSG_NO_QUEUE_EXIST, interactionType));\\n              vaVars.output_message = message;\\n              return;\\n            } \\n            message = addMessage(gs.getMessage(MSG_AVAILABLE_QUEUES));\\n            while (queueGr.next()) {\\n                var url = vaVars.base_url+'awa_queue.do?sys_id='+queueGr.getUniqueValue();\\n                message = addMessage('<a href=' + url + '>'+queueGr.getValue('name')+'</a>');\\n            }  \\n       } else if (count == 1) {\\n           if (workItemGr.next()) {\\n               var state = workItemGr.getValue('state');\\n               if (state == 'cancelled') {\\n                    message = addMessage(gs.getMessage(MSG_WORK_ITEM_STATUS_CANCELLED , workItemGr.getValue('cancelled_reason')));\\n               } else{\\n                    message = addMessage(gs.getMessage(MSG_WORK_ITEM_STATUS , workItemGr.getValue('state')));\\n               }\\n               var queue = workItemGr.getValue('queue');\\n               var queueGr = new GlideRecord('awa_queue');\\n               queueGr.get(queue);\\n               var serviceChannel = queueGr.getValue('service_channel');\\n               var serviceChannelGr = new GlideRecord('awa_service_channel');\\n               serviceChannelGr.get(serviceChannel);\\n               var defaultCapacity = serviceChannelGr.getValue('default_capacity');\\n               var channelCapacityGr = new GlideRecord('awa_agent_presence_capacity');\\n               channelCapacityGr.addQuery('channel', serviceChannel);\\n               channelCapacityGr.addEncodedQuery('aca_presence_state.available_to_receive_work_items=true');\\n               channelCapacityGr.addQuery('ac_workload', '<', defaultCapacity);\\n               channelCapacityGr.query();\\n               if (channelCapacityGr.getRowCount() == 0){\\n                   message = addMessage(gs.getMessage(MSG_NO_AGENT_AVAILABLE , serviceChannelGr.getValue('name')));\\n                   vaVars.output_message = message;\\n                   return;\\n               }\\n               var skillEnabled = gs.getProperty('glide.awa.skill_level.evaluate');\\n               if (skillEnabled && skillEnabled == 'true') {\\n                   var skills = [];\\n                   var skillGr = new GlideRecord('interaction_m2m_skill');\\n                   skillGr.addQuery('interaction', interactionGr.getUniqueValue());\\n                   skillGr.query();\\n                   while (skillGr.next()) {\\n                       skills.push(skillGr.getUniqueValue());\\n                   }\\n                   skills.sort(function(a, b) {\\n                       return a.localeCompare(b);\\n                   });\\n                   while (channelCapacityGr.next()){\\n                       channelCapacityGr.getValue('ap_agent');\\n                       var userSkillGr = new GlideRecord('sys_user_has_skill');\\n                       userSkillGr.addQuery('user', channelCapacityGr.getValue('ap_agent'));\\n                       userSkillGr.addQuery('skill', 'IN', skills.toString().replaceAll('[').replaceAll(']'));\\n                       userSkillGr.query();\\n                       if (userSkillGr.getRowCount() != skills.length) {\\n                           continue;\\n                       }\\n                       var userSkills = [];\\n                       while (userSkillGr.next()) {\\n                           userSkills.push(userSkillGr.getValue('skill'));\\n                       }\\n                       userSkills.sort(function(a, b) {\\n                           return a.localeCompare(b);\\n                       });\\n                       if (userSkills.toString() == skills.toString()) {\\n                            message = addMessage(gs.getMessage(MSG_AGENT_AVAILABLE_WITH_SKILLS, serviceChannelGr.getValue('name')));\\n                            vaVars.output_message = message;\\n                            return;\\n                       }\\n                   }\\n                   message = addMessage(gs.getMessage(MSG_NO_AGENT_AVAILABLE_WITH_SKILLS , serviceChannelGr.getValue('name')));\\n               } else {\\n                   message = addMessage(gs.getMessage(MSG_AGENT_AVAILABLE , serviceChannelGr.getValue('name')));\\n               } \\n           }\\n       }\\n    } else {\\n        message = addMessage(gs.getMessage(MSG_INTERCTION_NOT_FOUND,vaInputs.interaction_number));\\n    }\\n    vaVars.output_message = message;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"975a0f59aa104801b0f3928fbad8ae54\": {\n          \"id\": \"975a0f59aa104801b0f3928fbad8ae54\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"Interaction Number\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Please enter Interaction Number\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"24b0a84f106b4ef39c7a258d0fabdfd0\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"ca63c928a8864ffc8ff6704efbbc2517\": {\n          \"id\": \"ca63c928a8864ffc8ff6704efbbc2517\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"output\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.output_message}}\",\n                        \"displayValue\": \"Script Variablesoutput_message\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7b1fe139422244f1976ecfde3ad428fc\": {\n          \"id\": \"7b1fe139422244f1976ecfde3ad428fc\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"983ea6a2e3cb41d887dcdf851b07b6b7\": {\n          \"id\": \"983ea6a2e3cb41d887dcdf851b07b6b7\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"Re Enter\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Do you want to try for another Interaction/Task?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"89c2e55d5d7f48e6be61c8c22476e8f3\"\n        },\n        \"20314099e0cd4038ad3ea5e5893412c9\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"interaction_or_others\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Please select the Task Type\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"796042ea9f874bff91d09bfb3dfc6787\",\n          \"id\": \"20314099e0cd4038ad3ea5e5893412c9\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"0c393dd87f174c9382edd8526082f120\": {\n          \"id\": \"0c393dd87f174c9382edd8526082f120\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"95d09506a92548158c1605814043dcd8\": {\n          \"id\": \"95d09506a92548158c1605814043dcd8\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"Task Number\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Please enter Task number\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"08ddf034e4aa4933a74f0aed62bc66c2\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"a3d5c445ab094cdcb32250ad964620ac\": {\n          \"id\": \"a3d5c445ab094cdcb32250ad964620ac\",\n          \"name\": \"evaluate\",\n          \"script\": \"(function execute() {\\n    var addMessage = function(val) {\\n        if (message) {\\n            return message + '<br/>' + val;\\n        }\\n        return val;\\n    }\\n    var getGlideRecord = function(tableName) {\\n        return new GlideRecord(tableName);\\n    }\\n    var getDocument = function(number, documentTable) {\\n        var gr = getGlideRecord(documentTable);\\n        gr.addQuery('number', number);\\n        gr.query();\\n        return gr;\\n    }\\n    var getWorkItem = function(sysId) {\\n        var gr = getGlideRecord('awa_work_item');\\n        gr.addQuery('document_id', sysId);\\n        gr.query();\\n        return gr;\\n    }\\n    var getDocumentTable = function() {\\n        var id = vaInputs.task_number.toString();\\n        if (id.startsWith('INC')) {\\n            return 'incident';\\n        } else if (id.startsWith('PRB')) {\\n            return 'problem';\\n        } else {\\n            return null;\\n        }\\n    }\\n    var MSG_WORK_ITEM_GENERATED = '{0} work item generated. ';\\n    var MSG_WORK_ITEM_NOT_GENERATED = 'Work item is not created. ';\\n    var MSG_CHECK_FOR_BUSINESS_RULES = 'Check for Business rules on awa_work_item table or time out configuration based on the reason for canceling the work items. ';\\n    var MSG_NO_QUEUE_EXIST = 'No queue exist for Document with number: {0}. ';\\n    var MSG_DOCUMENT_NOT_FOUND = 'Document not found with number {0}. ';\\n    var MSG_AGENT_AVAILABLE = 'Right now Agents are available for Service Channel: {0}';\\n    var MSG_NO_AGENT_AVAILABLE = 'Right now no Agent available for Service Channel: {0}. ';\\n    var MSG_NO_AGENT_AVAILABLE_WITH_SKILLS = 'Right now no Agent available for Service Channel: {0} with required skills. ';\\n    var MSG_AGENT_AVAILABLE_WITH_SKILLS = 'Right now Agents are available for Service Channel: {0} with required skills. ';\\n    var MSG_AVAILABLE_QUEUES = 'Below queues are available. Please validate the schedule and utilization conditions: ';\\n    var MSG_WORK_ITEM_STATUS = 'Associated work item is in {0} state';\\n    var MSG_WORK_ITEM_STATUS_CANCELLED = 'Associated work item is in cancelled state with reason {0}';\\n    var message = '';\\n    var documentTable = getDocumentTable(vaInputs.task_number);\\n    if (!documentTable) {\\n        message = addMessage(gs.getMessage(MSG_DOCUMENT_NOT_FOUND, vaInputs.task_number));\\n        vaVars.output_message = message;\\n        return;\\n    }\\n    var documentGr = getDocument(vaInputs.task_number, documentTable);\\n    if (documentGr && documentGr.next()) {\\n        var workItemGr = getWorkItem(documentGr.getUniqueValue());\\n        var count = workItemGr.getRowCount();\\n        if (count > 1) {\\n            message = addMessage(gs.getMessage(MSG_WORK_ITEM_GENERATED, count));\\n            message = addMessage(gs.getMessage(MSG_CHECK_FOR_BUSINESS_RULES));\\n        } else if (count == 0) {\\n            message = addMessage(gs.getMessage(MSG_WORK_ITEM_NOT_GENERATED));\\n            var queueGr = new GlideRecord('awa_queue');\\n            queueGr.addEncodedQuery('active=true^service_channel.workitem_table=' + documentTable);\\n            queueGr.orderBy('order');\\n            queueGr.query();\\n            if (queueGr.getRowCount() == 0) {\\n                message = addMessage(gs.getMessage(MSG_NO_QUEUE_EXIST, vaInputs.task_number));\\n                vaVars.output_message = message;\\n                return;\\n            }\\n            message = addMessage(gs.getMessage(MSG_AVAILABLE_QUEUES));\\n            while (queueGr.next()) {\\n                var url = vaVars.base_url + 'awa_queue.do?sys_id=' + queueGr.getUniqueValue();\\n                message = addMessage('<a href=' + url + '>' + queueGr.getValue('name') + '</a>');\\n            }\\n        } else if (count == 1) {\\n            if (workItemGr.next()) {\\n                var state = workItemGr.getValue('state');\\n                if (state === 'cancelled') {\\n                    message = addMessage(gs.getMessage(MSG_WORK_ITEM_STATUS_CANCELLED, workItemGr.getValue('cancelled_reason')));\\n                } else {\\n                    message = addMessage(gs.getMessage(MSG_WORK_ITEM_STATUS, workItemGr.getValue('state')));\\n                }\\n                var queue = workItemGr.getValue('queue');\\n                var queueGr = new GlideRecord('awa_queue');\\n                queueGr.get(queue);\\n                var serviceChannel = queueGr.getValue('service_channel');\\n                var serviceChannelGr = new GlideRecord('awa_service_channel');\\n                serviceChannelGr.get(serviceChannel);\\n                var defaultCapacity = serviceChannelGr.getValue('default_capacity');\\n                var channelCapacityGr = new GlideRecord('awa_agent_presence_capacity');\\n                channelCapacityGr.addQuery('channel', serviceChannel);\\n                channelCapacityGr.addEncodedQuery('aca_presence_state.available_to_receive_work_items=true');\\n                channelCapacityGr.addQuery('ac_workload', '<', defaultCapacity);\\n                channelCapacityGr.query();\\n                if (channelCapacityGr.getRowCount() == 0) {\\n                    message = addMessage(gs.getMessage(MSG_NO_AGENT_AVAILABLE, serviceChannelGr.getValue('name')));\\n                    vaVars.output_message = message;\\n                    return;\\n                }\\n                var skillEnabled = gs.getProperty('glide.awa.skill_level.evaluate');\\n                if (skillEnabled && skillEnabled == 'true') {\\n                    var skills = [];\\n                    var skillGr = new GlideRecord('task_m2m_skill');\\n                    skillGr.addQuery('task', documentGr.getUniqueValue());\\n                    skillGr.query();\\n                    while (skillGr.next()) {\\n                        skills.push(skillGr.getUniqueValue());\\n                    }\\n                    skills.sort(function(a, b) {\\n                        return a.localeCompare(b);\\n                    });\\n                    while (channelCapacityGr.next()) {\\n                        channelCapacityGr.getValue('ap_agent');\\n                        var userSkillGr = new GlideRecord('sys_user_has_skill');\\n                        userSkillGr.addQuery('user', channelCapacityGr.getValue('ap_agent'));\\n                        userSkillGr.addQuery('skill', 'IN', skills.toString().replaceAll('[').replaceAll(']'));\\n                        userSkillGr.query();\\n                        if (userSkillGr.getRowCount() != skills.length) {\\n                            continue;\\n                        }\\n                        var userSkills = [];\\n                        while (userSkillGr.next()) {\\n                            userSkills.push(userSkillGr.getValue('skill'));\\n                        }\\n                        userSkills.sort(function(a, b) {\\n                            return a.localeCompare(b);\\n                        });\\n                        if (userSkills.toString() == skills.toString()) {\\n                            message = addMessage(gs.getMessage(MSG_AGENT_AVAILABLE_WITH_SKILLS, serviceChannelGr.getValue('name')));\\n                            vaVars.output_message = message;\\n                            return;\\n                        }\\n                    }\\n                    message = addMessage(gs.getMessage(MSG_NO_AGENT_AVAILABLE_WITH_SKILLS, serviceChannelGr.getValue('name')));\\n                } else {\\n                    message = addMessage(gs.getMessage(MSG_AGENT_AVAILABLE, serviceChannelGr.getValue('name')));\\n                }\\n            }\\n        }\\n    } else {\\n        message = addMessage(gs.getMessage(MSG_DOCUMENT_NOT_FOUND, vaInputs.task_number));\\n    }\\n    vaVars.output_message = message;\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"6efe10730c25433e99c9d15e6444c562\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"7b1fe139422244f1976ecfde3ad428fc\",\n          \"target\": \"3bbf2e8af7a94cea8af9fe2ee06aa232\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.re_enter=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Exit\"\n        },\n        {\n          \"id\": \"420ce22b44f741ee8f14e704cd22be0b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"cc62e227f6dd4804aeaf3dbe74f259f4\",\n          \"target\": \"ca63c928a8864ffc8ff6704efbbc2517\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"47e7cde6f1284af1a357eb00c61ada1d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"975a0f59aa104801b0f3928fbad8ae54\",\n          \"target\": \"cc62e227f6dd4804aeaf3dbe74f259f4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cc7181616fb947bba13be1c1dfc00440\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ca63c928a8864ffc8ff6704efbbc2517\",\n          \"target\": \"983ea6a2e3cb41d887dcdf851b07b6b7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"33774829ee5e43bab4f69a5197c8c95b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"983ea6a2e3cb41d887dcdf851b07b6b7\",\n          \"target\": \"7b1fe139422244f1976ecfde3ad428fc\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"373ae80c013a4f63a34f77ac5e4e7a81\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"7b1fe139422244f1976ecfde3ad428fc\",\n          \"target\": \"20314099e0cd4038ad3ea5e5893412c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.re_enter=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Recheck selected\"\n        },\n        {\n          \"id\": \"ab9e0250a6b049388f0aa014af17a889\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0fb3b6ff9e344abe92e34537af851c2f\",\n          \"target\": \"20314099e0cd4038ad3ea5e5893412c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6284114b641342bb82f04ddc93e4c2b7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"20314099e0cd4038ad3ea5e5893412c9\",\n          \"target\": \"0c393dd87f174c9382edd8526082f120\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a2102245221942f4859d129905becd17\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0c393dd87f174c9382edd8526082f120\",\n          \"target\": \"975a0f59aa104801b0f3928fbad8ae54\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.interaction_or_others=interaction\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Interaction\"\n        },\n        {\n          \"id\": \"67996bcd9c3743399bf64286382e715e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0c393dd87f174c9382edd8526082f120\",\n          \"target\": \"95d09506a92548158c1605814043dcd8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.interaction_or_others=other\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Others\"\n        },\n        {\n          \"id\": \"d1eefc7283014f4aba30e75276c5b763\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"95d09506a92548158c1605814043dcd8\",\n          \"target\": \"a3d5c445ab094cdcb32250ad964620ac\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"45ce1b15358746fca7530ffc949de2d0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a3d5c445ab094cdcb32250ad964620ac\",\n          \"target\": \"ca63c928a8864ffc8ff6704efbbc2517\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"40537b0ea4cd45d99c173ffdccc4e18f\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"40537b0ea4cd45d99c173ffdccc4e18f\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"24b0a84f106b4ef39c7a258d0fabdfd0\": {\n      \"id\": \"24b0a84f106b4ef39c7a258d0fabdfd0\",\n      \"name\": \"interaction_number\",\n      \"label\": \"Interaction Number\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTYyOTgwNjA0MTM5NiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      }\n    },\n    \"ccbee794cdfa4992a8b5709e7b1f4c6b\": {\n      \"id\": \"ccbee794cdfa4992a8b5709e7b1f4c6b\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"message\",\n      \"label\": \"message\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"89c2e55d5d7f48e6be61c8c22476e8f3\": {\n      \"id\": \"89c2e55d5d7f48e6be61c8c22476e8f3\",\n      \"name\": \"re_enter\",\n      \"label\": \"Re Enter\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\"\n    },\n    \"628fe06951224890b2bf47ea5db1859a\": {\n      \"id\": \"628fe06951224890b2bf47ea5db1859a\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return gs.getProperty('glide.servlet.uri');\\n})()\\n\"\n      },\n      \"name\": \"base_url\",\n      \"label\": \"base_url\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"796042ea9f874bff91d09bfb3dfc6787\": {\n      \"id\": \"796042ea9f874bff91d09bfb3dfc6787\",\n      \"name\": \"interaction_or_others\",\n      \"label\": \"Interaction_or_others\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Interaction\",\n          \"value\": \"interaction\"\n        },\n        {\n          \"label\": \"Other Task\",\n          \"value\": \"other\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\"\n    },\n    \"08ddf034e4aa4933a74f0aed62bc66c2\": {\n      \"id\": \"08ddf034e4aa4933a74f0aed62bc66c2\",\n      \"name\": \"task_number\",\n      \"label\": \"Task Number\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTYzMDk5MDQxNzYyNiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      }\n    },\n    \"c5f6d7cb493b482b957b2d5a51413ac9\": {\n      \"id\": \"c5f6d7cb493b482b957b2d5a51413ac9\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"output_message\",\n      \"label\": \"output_message\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"1a531eeb53a20110d3d5ddeeff7b1282","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_cb_design_topic_1a531eeb53a20110d3d5ddeeff7b1282","sys_updated_by":"admin","sys_created_on":"2022-04-05 10:02:33","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"9cde5b7f4ea84704840b82e22097e6f1\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"9cde5b7f4ea84704840b82e22097e6f1\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"9cde5b7f4ea84704840b82e22097e6f1\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"0fb3b6ff9e344abe92e34537af851c2f\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"3bbf2e8af7a94cea8af9fe2ee06aa232\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var addMessage = function(val){\\n        if(message) {\\n            return message + '<br/>' + val;\\n        }\\n        return val;\\n    }\\n    var getGlideRecord = function(tableName){\\n        return new GlideRecord(tableName);\\n    }\\n    var getInteraction = function(interactionNumber){\\n        var gr = getGlideRecord('interaction');\\n        gr.addQuery('number', interactionNumber);\\n        gr.query();\\n        return gr;\\n    }\\n    var getWorkItemFromInteraction = function(interactionSysId){\\n        var gr = getGlideRecord('awa_work_item');\\n        gr.addQuery('document_id', interactionSysId);\\n        gr.query();\\n        return gr;\\n    }\\n    var VIRTUAL_AGENT_SYS_ID = '2e94fca9c3123010d81b6e221f40dd08';\\n    var MSG_WORK_ITEM_GENERATED = '{0} work item generated. ';\\n    var MSG_INTERACTION_TO_VIRTUAL_AGENT = 'The interaction is assigned to Virtual Agent. ';\\n    var MSG_WORK_ITEM_NOT_GENERATED = 'Work item is not created. ';\\n    var MSG_CHECK_FOR_BUSINESS_RULES = 'Check for Business rules on awa_work_item table or time out configuration based on the reason for canceling the work items. ';\\n    var MSG_NO_QUEUE_EXIST = 'No queue exist for Interaction with type: {0}. ';\\n    var MSG_INTERCTION_NOT_FOUND = 'Interaction not found with number {0}. ';\\n    var MSG_AGENT_AVAILABLE = 'Right now Agents are available for Service Channel: {0}';\\n    var MSG_NO_AGENT_AVAILABLE = 'Right now no Agent available for Service Channel: {0}. ';\\n    var MSG_NO_AGENT_AVAILABLE_WITH_SKILLS = 'Right now no Agent available for Service Channel: {0} with required skills. ';\\n    var MSG_AGENT_AVAILABLE_WITH_SKILLS = 'Right now Agents are available for Service Channel: {0} with required skills. ';\\n    var MSG_WORK_ITEM_STATUS = 'Associated work item is in {0} state';\\n    var MSG_WORK_ITEM_STATUS_CANCELLED = 'Associated work item is in cancelled state with reason {0}';\\n    var MSG_AVAILABLE_QUEUES = 'Below queues are available. Please validate the schedule and utilization conditions: ';\\n    var message = '';\\n    var interactionGr = getInteraction(vaInputs.interaction_number);\\n    if (interactionGr.next()) {\\n       var interactionType = interactionGr.type;\\n       if (interactionGr.getValue('assigned_to') == VIRTUAL_AGENT_SYS_ID) {\\n            message = addMessage(gs.getMessage(MSG_INTERACTION_TO_VIRTUAL_AGENT));\\n            vaVars.output_message = message;\\n            return;\\n       }\\n       var workItemGr = getWorkItemFromInteraction(interactionGr.getUniqueValue());\\n       var count = workItemGr.getRowCount();\\n       if (count > 1) {\\n           message = addMessage(gs.getMessage(MSG_WORK_ITEM_GENERATED, count));\\n           message = addMessage(gs.getMessage(MSG_CHECK_FOR_BUSINESS_RULES));\\n       } else if (count == 0) {\\n            message = addMessage(gs.getMessage(MSG_WORK_ITEM_NOT_GENERATED));\\n            var queueGr = new GlideRecord('awa_queue');\\n            queueGr.addEncodedQuery('active=true^service_channel.workitem_table=interaction^service_channel.type='+interactionType);\\n            queueGr.orderBy('order');\\n            queueGr.query();\\n            if (queueGr.getRowCount() == 0){\\n              message = addMessage(gs.getMessage(MSG_NO_QUEUE_EXIST, interactionType));\\n              vaVars.output_message = message;\\n              return;\\n            } \\n            message = addMessage(gs.getMessage(MSG_AVAILABLE_QUEUES));\\n            while (queueGr.next()) {\\n                var url = vaVars.base_url+'awa_queue.do?sys_id='+queueGr.getUniqueValue();\\n                message = addMessage('<a href=' + url + '>'+queueGr.getValue('name')+'</a>');\\n            }  \\n       } else if (count == 1) {\\n           if (workItemGr.next()) {\\n               var state = workItemGr.getValue('state');\\n               if (state == 'cancelled') {\\n                    message = addMessage(gs.getMessage(MSG_WORK_ITEM_STATUS_CANCELLED , workItemGr.getValue('cancelled_reason')));\\n               } else{\\n                    message = addMessage(gs.getMessage(MSG_WORK_ITEM_STATUS , workItemGr.getValue('state')));\\n               }\\n               var queue = workItemGr.getValue('queue');\\n               var queueGr = new GlideRecord('awa_queue');\\n               queueGr.get(queue);\\n               var serviceChannel = queueGr.getValue('service_channel');\\n               var serviceChannelGr = new GlideRecord('awa_service_channel');\\n               serviceChannelGr.get(serviceChannel);\\n               var defaultCapacity = serviceChannelGr.getValue('default_capacity');\\n               var channelCapacityGr = new GlideRecord('awa_agent_presence_capacity');\\n               channelCapacityGr.addQuery('channel', serviceChannel);\\n               channelCapacityGr.addEncodedQuery('aca_presence_state.available_to_receive_work_items=true');\\n               channelCapacityGr.addQuery('ac_workload', '<', defaultCapacity);\\n               channelCapacityGr.query();\\n               if (channelCapacityGr.getRowCount() == 0){\\n                   message = addMessage(gs.getMessage(MSG_NO_AGENT_AVAILABLE , serviceChannelGr.getValue('name')));\\n                   vaVars.output_message = message;\\n                   return;\\n               }\\n               var skillEnabled = gs.getProperty('glide.awa.skill_level.evaluate');\\n               if (skillEnabled && skillEnabled == 'true') {\\n                   var skills = [];\\n                   var skillGr = new GlideRecord('interaction_m2m_skill');\\n                   skillGr.addQuery('interaction', interactionGr.getUniqueValue());\\n                   skillGr.query();\\n                   while (skillGr.next()) {\\n                       skills.push(skillGr.getUniqueValue());\\n                   }\\n                   skills.sort(function(a, b) {\\n                       return a.localeCompare(b);\\n                   });\\n                   while (channelCapacityGr.next()){\\n                       channelCapacityGr.getValue('ap_agent');\\n                       var userSkillGr = new GlideRecord('sys_user_has_skill');\\n                       userSkillGr.addQuery('user', channelCapacityGr.getValue('ap_agent'));\\n                       userSkillGr.addQuery('skill', 'IN', skills.toString().replaceAll('[').replaceAll(']'));\\n                       userSkillGr.query();\\n                       if (userSkillGr.getRowCount() != skills.length) {\\n                           continue;\\n                       }\\n                       var userSkills = [];\\n                       while (userSkillGr.next()) {\\n                           userSkills.push(userSkillGr.getValue('skill'));\\n                       }\\n                       userSkills.sort(function(a, b) {\\n                           return a.localeCompare(b);\\n                       });\\n                       if (userSkills.toString() == skills.toString()) {\\n                            message = addMessage(gs.getMessage(MSG_AGENT_AVAILABLE_WITH_SKILLS, serviceChannelGr.getValue('name')));\\n                            vaVars.output_message = message;\\n                            return;\\n                       }\\n                   }\\n                   message = addMessage(gs.getMessage(MSG_NO_AGENT_AVAILABLE_WITH_SKILLS , serviceChannelGr.getValue('name')));\\n               } else {\\n                   message = addMessage(gs.getMessage(MSG_AGENT_AVAILABLE , serviceChannelGr.getValue('name')));\\n               } \\n           }\\n       }\\n    } else {\\n        message = addMessage(gs.getMessage(MSG_INTERCTION_NOT_FOUND,vaInputs.interaction_number));\\n    }\\n    vaVars.output_message = message;\\n})()\\n\",\"id\":\"cc62e227f6dd4804aeaf3dbe74f259f4\",\"name\":\"evaluate\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"24b0a84f106b4ef39c7a258d0fabdfd0\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Please enter Interaction Number\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"975a0f59aa104801b0f3928fbad8ae54\",\"name\":\"Interaction Number\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.output_message}}\"}],\"id\":\"ca63c928a8864ffc8ff6704efbbc2517\",\"name\":\"output\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Exit\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"re_enter=\"},\"id\":\"f8e1ab71366e4c6fb60ca93927ed5140\",\"name\":\"Exit\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Recheck selected\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"re_enter=true\"},\"id\":\"40797b1bd5974dd388a2c06a0a251feb\",\"name\":\"Recheck selected\"}],\"id\":\"7b1fe139422244f1976ecfde3ad428fc\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"89c2e55d5d7f48e6be61c8c22476e8f3\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Do you want to try for another Interaction/Task?\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"983ea6a2e3cb41d887dcdf851b07b6b7\",\"name\":\"Re Enter\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"20314099e0cd4038ad3ea5e5893412c9\",\"name\":\"interaction_or_others\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"796042ea9f874bff91d09bfb3dfc6787\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Please select the Task Type\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Interaction\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"interaction_or_others=interaction\"},\"id\":\"5f0cf5ca00104d04affe6fe7115d7c95\",\"name\":\"Interaction\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Others\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"interaction_or_others=other\"},\"id\":\"499e2886670c4c7995ffda68a4e68401\",\"name\":\"Others\"}],\"id\":\"0c393dd87f174c9382edd8526082f120\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"08ddf034e4aa4933a74f0aed62bc66c2\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Please enter Task number\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"95d09506a92548158c1605814043dcd8\",\"name\":\"Task Number\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var addMessage = function(val) {\\n        if (message) {\\n            return message + '<br/>' + val;\\n        }\\n        return val;\\n    }\\n    var getGlideRecord = function(tableName) {\\n        return new GlideRecord(tableName);\\n    }\\n    var getDocument = function(number, documentTable) {\\n        var gr = getGlideRecord(documentTable);\\n        gr.addQuery('number', number);\\n        gr.query();\\n        return gr;\\n    }\\n    var getWorkItem = function(sysId) {\\n        var gr = getGlideRecord('awa_work_item');\\n        gr.addQuery('document_id', sysId);\\n        gr.query();\\n        return gr;\\n    }\\n    var getDocumentTable = function() {\\n        var id = vaInputs.task_number.toString();\\n        if (id.startsWith('INC')) {\\n            return 'incident';\\n        } else if (id.startsWith('PRB')) {\\n            return 'problem';\\n        } else {\\n            return null;\\n        }\\n    }\\n    var MSG_WORK_ITEM_GENERATED = '{0} work item generated. ';\\n    var MSG_WORK_ITEM_NOT_GENERATED = 'Work item is not created. ';\\n    var MSG_CHECK_FOR_BUSINESS_RULES = 'Check for Business rules on awa_work_item table or time out configuration based on the reason for canceling the work items. ';\\n    var MSG_NO_QUEUE_EXIST = 'No queue exist for Document with number: {0}. ';\\n    var MSG_DOCUMENT_NOT_FOUND = 'Document not found with number {0}. ';\\n    var MSG_AGENT_AVAILABLE = 'Right now Agents are available for Service Channel: {0}';\\n    var MSG_NO_AGENT_AVAILABLE = 'Right now no Agent available for Service Channel: {0}. ';\\n    var MSG_NO_AGENT_AVAILABLE_WITH_SKILLS = 'Right now no Agent available for Service Channel: {0} with required skills. ';\\n    var MSG_AGENT_AVAILABLE_WITH_SKILLS = 'Right now Agents are available for Service Channel: {0} with required skills. ';\\n    var MSG_AVAILABLE_QUEUES = 'Below queues are available. Please validate the schedule and utilization conditions: ';\\n    var MSG_WORK_ITEM_STATUS = 'Associated work item is in {0} state';\\n    var MSG_WORK_ITEM_STATUS_CANCELLED = 'Associated work item is in cancelled state with reason {0}';\\n    var message = '';\\n    var documentTable = getDocumentTable(vaInputs.task_number);\\n    if (!documentTable) {\\n        message = addMessage(gs.getMessage(MSG_DOCUMENT_NOT_FOUND, vaInputs.task_number));\\n        vaVars.output_message = message;\\n        return;\\n    }\\n    var documentGr = getDocument(vaInputs.task_number, documentTable);\\n    if (documentGr && documentGr.next()) {\\n        var workItemGr = getWorkItem(documentGr.getUniqueValue());\\n        var count = workItemGr.getRowCount();\\n        if (count > 1) {\\n            message = addMessage(gs.getMessage(MSG_WORK_ITEM_GENERATED, count));\\n            message = addMessage(gs.getMessage(MSG_CHECK_FOR_BUSINESS_RULES));\\n        } else if (count == 0) {\\n            message = addMessage(gs.getMessage(MSG_WORK_ITEM_NOT_GENERATED));\\n            var queueGr = new GlideRecord('awa_queue');\\n            queueGr.addEncodedQuery('active=true^service_channel.workitem_table=' + documentTable);\\n            queueGr.orderBy('order');\\n            queueGr.query();\\n            if (queueGr.getRowCount() == 0) {\\n                message = addMessage(gs.getMessage(MSG_NO_QUEUE_EXIST, vaInputs.task_number));\\n                vaVars.output_message = message;\\n                return;\\n            }\\n            message = addMessage(gs.getMessage(MSG_AVAILABLE_QUEUES));\\n            while (queueGr.next()) {\\n                var url = vaVars.base_url + 'awa_queue.do?sys_id=' + queueGr.getUniqueValue();\\n                message = addMessage('<a href=' + url + '>' + queueGr.getValue('name') + '</a>');\\n            }\\n        } else if (count == 1) {\\n            if (workItemGr.next()) {\\n                var state = workItemGr.getValue('state');\\n                if (state === 'cancelled') {\\n                    message = addMessage(gs.getMessage(MSG_WORK_ITEM_STATUS_CANCELLED, workItemGr.getValue('cancelled_reason')));\\n                } else {\\n                    message = addMessage(gs.getMessage(MSG_WORK_ITEM_STATUS, workItemGr.getValue('state')));\\n                }\\n                var queue = workItemGr.getValue('queue');\\n                var queueGr = new GlideRecord('awa_queue');\\n                queueGr.get(queue);\\n                var serviceChannel = queueGr.getValue('service_channel');\\n                var serviceChannelGr = new GlideRecord('awa_service_channel');\\n                serviceChannelGr.get(serviceChannel);\\n                var defaultCapacity = serviceChannelGr.getValue('default_capacity');\\n                var channelCapacityGr = new GlideRecord('awa_agent_presence_capacity');\\n                channelCapacityGr.addQuery('channel', serviceChannel);\\n                channelCapacityGr.addEncodedQuery('aca_presence_state.available_to_receive_work_items=true');\\n                channelCapacityGr.addQuery('ac_workload', '<', defaultCapacity);\\n                channelCapacityGr.query();\\n                if (channelCapacityGr.getRowCount() == 0) {\\n                    message = addMessage(gs.getMessage(MSG_NO_AGENT_AVAILABLE, serviceChannelGr.getValue('name')));\\n                    vaVars.output_message = message;\\n                    return;\\n                }\\n                var skillEnabled = gs.getProperty('glide.awa.skill_level.evaluate');\\n                if (skillEnabled && skillEnabled == 'true') {\\n                    var skills = [];\\n                    var skillGr = new GlideRecord('task_m2m_skill');\\n                    skillGr.addQuery('task', documentGr.getUniqueValue());\\n                    skillGr.query();\\n                    while (skillGr.next()) {\\n                        skills.push(skillGr.getUniqueValue());\\n                    }\\n                    skills.sort(function(a, b) {\\n                        return a.localeCompare(b);\\n                    });\\n                    while (channelCapacityGr.next()) {\\n                        channelCapacityGr.getValue('ap_agent');\\n                        var userSkillGr = new GlideRecord('sys_user_has_skill');\\n                        userSkillGr.addQuery('user', channelCapacityGr.getValue('ap_agent'));\\n                        userSkillGr.addQuery('skill', 'IN', skills.toString().replaceAll('[').replaceAll(']'));\\n                        userSkillGr.query();\\n                        if (userSkillGr.getRowCount() != skills.length) {\\n                            continue;\\n                        }\\n                        var userSkills = [];\\n                        while (userSkillGr.next()) {\\n                            userSkills.push(userSkillGr.getValue('skill'));\\n                        }\\n                        userSkills.sort(function(a, b) {\\n                            return a.localeCompare(b);\\n                        });\\n                        if (userSkills.toString() == skills.toString()) {\\n                            message = addMessage(gs.getMessage(MSG_AGENT_AVAILABLE_WITH_SKILLS, serviceChannelGr.getValue('name')));\\n                            vaVars.output_message = message;\\n                            return;\\n                        }\\n                    }\\n                    message = addMessage(gs.getMessage(MSG_NO_AGENT_AVAILABLE_WITH_SKILLS, serviceChannelGr.getValue('name')));\\n                } else {\\n                    message = addMessage(gs.getMessage(MSG_AGENT_AVAILABLE, serviceChannelGr.getValue('name')));\\n                }\\n            }\\n        }\\n    } else {\\n        message = addMessage(gs.getMessage(MSG_DOCUMENT_NOT_FOUND, vaInputs.task_number));\\n    }\\n    vaVars.output_message = message;\\n})()\",\"id\":\"a3d5c445ab094cdcb32250ad964620ac\",\"name\":\"evaluate\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"7b1fe139422244f1976ecfde3ad428fc\",\"target_node_id\":\"3bbf2e8af7a94cea8af9fe2ee06aa232\",\"branch_id\":\"f8e1ab71366e4c6fb60ca93927ed5140\",\"id\":\"6efe10730c25433e99c9d15e6444c562\",\"name\":\"f8e1ab71366e4c6fb60ca93927ed5140\"},{\"type\":\"Edge\",\"source_node_id\":\"cc62e227f6dd4804aeaf3dbe74f259f4\",\"target_node_id\":\"ca63c928a8864ffc8ff6704efbbc2517\",\"id\":\"420ce22b44f741ee8f14e704cd22be0b\"},{\"type\":\"Edge\",\"source_node_id\":\"975a0f59aa104801b0f3928fbad8ae54\",\"target_node_id\":\"cc62e227f6dd4804aeaf3dbe74f259f4\",\"id\":\"47e7cde6f1284af1a357eb00c61ada1d\"},{\"type\":\"Edge\",\"source_node_id\":\"ca63c928a8864ffc8ff6704efbbc2517\",\"target_node_id\":\"983ea6a2e3cb41d887dcdf851b07b6b7\",\"id\":\"cc7181616fb947bba13be1c1dfc00440\"},{\"type\":\"Edge\",\"source_node_id\":\"983ea6a2e3cb41d887dcdf851b07b6b7\",\"target_node_id\":\"7b1fe139422244f1976ecfde3ad428fc\",\"id\":\"33774829ee5e43bab4f69a5197c8c95b\"},{\"type\":\"Edge\",\"source_node_id\":\"7b1fe139422244f1976ecfde3ad428fc\",\"target_node_id\":\"20314099e0cd4038ad3ea5e5893412c9\",\"branch_id\":\"40797b1bd5974dd388a2c06a0a251feb\",\"id\":\"373ae80c013a4f63a34f77ac5e4e7a81\",\"name\":\"40797b1bd5974dd388a2c06a0a251feb\"},{\"type\":\"Edge\",\"source_node_id\":\"0fb3b6ff9e344abe92e34537af851c2f\",\"target_node_id\":\"20314099e0cd4038ad3ea5e5893412c9\",\"id\":\"ab9e0250a6b049388f0aa014af17a889\"},{\"type\":\"Edge\",\"source_node_id\":\"20314099e0cd4038ad3ea5e5893412c9\",\"target_node_id\":\"0c393dd87f174c9382edd8526082f120\",\"id\":\"6284114b641342bb82f04ddc93e4c2b7\"},{\"type\":\"Edge\",\"source_node_id\":\"0c393dd87f174c9382edd8526082f120\",\"target_node_id\":\"975a0f59aa104801b0f3928fbad8ae54\",\"branch_id\":\"5f0cf5ca00104d04affe6fe7115d7c95\",\"id\":\"a2102245221942f4859d129905becd17\",\"name\":\"5f0cf5ca00104d04affe6fe7115d7c95\"},{\"type\":\"Edge\",\"source_node_id\":\"0c393dd87f174c9382edd8526082f120\",\"target_node_id\":\"95d09506a92548158c1605814043dcd8\",\"branch_id\":\"499e2886670c4c7995ffda68a4e68401\",\"id\":\"67996bcd9c3743399bf64286382e715e\",\"name\":\"499e2886670c4c7995ffda68a4e68401\"},{\"type\":\"Edge\",\"source_node_id\":\"95d09506a92548158c1605814043dcd8\",\"target_node_id\":\"a3d5c445ab094cdcb32250ad964620ac\",\"id\":\"d1eefc7283014f4aba30e75276c5b763\"},{\"type\":\"Edge\",\"source_node_id\":\"a3d5c445ab094cdcb32250ad964620ac\",\"target_node_id\":\"ca63c928a8864ffc8ff6704efbbc2517\",\"id\":\"45ce1b15358746fca7530ffc949de2d0\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"message\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"ccbee794cdfa4992a8b5709e7b1f4c6b\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"base_url\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return gs.getProperty('glide.servlet.uri');\\n})()\\n\"},\"list\":false,\"id\":\"628fe06951224890b2bf47ea5db1859a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"output_message\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"c5f6d7cb493b482b957b2d5a51413ac9\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"40537b0ea4cd45d99c173ffdccc4e18f\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"interaction_number\",\"list\":false,\"id\":\"24b0a84f106b4ef39c7a258d0fabdfd0\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"type\":\"True/False\",\"id\":\"89c2e55d5d7f48e6be61c8c22476e8f3\",\"name\":\"re_enter\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Interaction\",\"element\":\"interaction\"},{\"name\":\"Other Task\",\"element\":\"other\"}],\"id\":\"796042ea9f874bff91d09bfb3dfc6787\",\"name\":\"interaction_or_others\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"task_number\",\"list\":false,\"id\":\"08ddf034e4aa4933a74f0aed62bc66c2\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run\\n       and be discoverable (or not). Using the format vaContext.liveagent_[var_name] For example:\\n\\n       var applicability = vaContext.liveagent_portal == 'csm' ? true : false;\\n       return applicability;\\n    */\\n    return false;\\n})()\\n\"},\"roles\":[],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"f9b216ab53a20110d3d5ddeeff7b12e9\",\"name\":\"No Agent Available\",\"key_phrases\":[\"No Agent Available\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":false,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"No Agent Available","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"design_topic_id":"f9b216ab53a20110d3d5ddeeff7b12e9","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/5e531eeb53a20110d3d5ddeeff7b127d","value":"5e531eeb53a20110d3d5ddeeff7b127d"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"15","sys_updated_on":"2021-04-20 06:21:03","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"1bae209053130010cf8cddeeff7b12bd","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_1bae209053130010cf8cddeeff7b12bd","sys_updated_by":"admin","sys_created_on":"2020-02-26 22:24:56","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"7a240bc7ad3547eea25c55f016e054d6\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"7a240bc7ad3547eea25c55f016e054d6\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"7a240bc7ad3547eea25c55f016e054d6\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"59c6ff33ff1f44ce9b35aefa529a6435\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"1ce1834b8a024b50a10522275731b536\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var greetingMessage = vaSystem.getTopicSelectionMessage();\\n    vaSystem.sendTopicPickerControl(greetingMessage);\\n})()\\n\",\"id\":\"344ce1d72b8140149a4fa550b3f79753\",\"name\":\"Explore help\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"59c6ff33ff1f44ce9b35aefa529a6435\",\"target_node_id\":\"344ce1d72b8140149a4fa550b3f79753\",\"id\":\"ab96f11bed3840d782bb04ce111e9821\"},{\"type\":\"Edge\",\"source_node_id\":\"344ce1d72b8140149a4fa550b3f79753\",\"target_node_id\":\"1ce1834b8a024b50a10522275731b536\",\"id\":\"0e3ab03c263c445ea102c80920a95321\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"55df1142b5f748348a98a7cd69ba2c87\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"SETUP_TOPIC\",\"channels\":[],\"id\":\"43aeac5053130010cf8cddeeff7b1298\",\"name\":\"Virtual Agent Capabilities.\",\"key_phrases\":[\"help\",\"capabilities\",\"Virtual Agent Capabilities\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"auto_resolution_enabled\":false,\"library\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Virtual Agent Capabilities.","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"43aeac5053130010cf8cddeeff7b1298","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/9bae209053130010cf8cddeeff7b12ba","value":"9bae209053130010cf8cddeeff7b12ba"},"sys_created_by":"admin","sys_policy":"read"},{"sys_mod_count":"4","sys_updated_on":"2021-05-04 12:13:16","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"1f1f7d51eb232010dcac03538f52285b","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9cc37b3704b52210559073c06a02f781","value":"9cc37b3704b52210559073c06a02f781"},"sys_update_name":"sys_cb_design_topic_1f1f7d51eb232010dcac03538f52285b","sys_updated_by":"admin","sys_created_on":"2021-04-15 09:28:17","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"ce51112d641c460d951732f541f83119\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"ce51112d641c460d951732f541f83119\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"ce51112d641c460d951732f541f83119\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"f477d413bee849f8ab9ee0cefa2c8d6c\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"7be16273fd1f4b0bb7e1680e9d86250c\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var greetingMessage = vaSystem.getTopicSelectionMessage();\\n    vaSystem.sendTopicPickerControl(greetingMessage);\\n})()\\n\",\"id\":\"efc1894947d8420080b8de50fd136ceb\",\"name\":\"Send Topic Picker\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"f477d413bee849f8ab9ee0cefa2c8d6c\",\"target_node_id\":\"efc1894947d8420080b8de50fd136ceb\",\"id\":\"56a1c020ca1a439883014fbf716320f8\"},{\"type\":\"Edge\",\"source_node_id\":\"efc1894947d8420080b8de50fd136ceb\",\"target_node_id\":\"7be16273fd1f4b0bb7e1680e9d86250c\",\"id\":\"dcaf887165dd41c38d08d2a8491b2686\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"greeting_message\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"1eca565e6d634c4584fa07840a0a3b7f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"cb98e980b70b4e48b175c6e1cc37bb08\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return false;\\n})()\\n\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"660e3151eb232010dcac03538f522853\",\"name\":\"_topic_picker_\",\"key_phrases\":[\"_topic_picker_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"auto_resolution_enabled\":false,\"library\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_topic_picker_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"660e3151eb232010dcac03538f522853","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/df1ff551eb232010dcac03538f52288c","value":"df1ff551eb232010dcac03538f52288c"},"sys_created_by":"admin","sys_policy":"read"},{"sys_mod_count":"113","sys_updated_on":"2024-10-02 19:23:10","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.68\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"df79c5242c244f1dab851ef7285d517f\": {\n          \"id\": \"df79c5242c244f1dab851ef7285d517f\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"name\": \"catalog_item_id\",\n              \"value\": \"\",\n              \"id\": \"d96cb7476e9a411d9217a326591f0d9e\",\n              \"disabled\": true,\n              \"referenced\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            },\n            {\n              \"name\": \"execute_contextual_search\",\n              \"value\": \"false\",\n              \"id\": \"e41adc12f2bf498d9937ad6c1d05c844\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": false\n            },\n            {\n              \"name\": \"confirm_catalog_item\",\n              \"value\": \"true\",\n              \"id\": \"d77c358c72074a6c941a40b1e7ffbd34\",\n              \"referenced\": false,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": false\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"false\",\n              \"id\": \"8741e0dddb4d47e58f869783457c45aa\",\n              \"name\": \"show_end_state_card\",\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"d96cb7476e9a411d9217a326591f0d9e\",\n            \"e41adc12f2bf498d9937ad6c1d05c844\",\n            \"d77c358c72074a6c941a40b1e7ffbd34\",\n            \"8741e0dddb4d47e58f869783457c45aa\"\n          ]\n        },\n        \"8251855bc8dc431697812132c644503b\": {\n          \"id\": \"8251855bc8dc431697812132c644503b\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"record_id\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.record_id}}\",\n                        \"displayValue\": \"vaVarsrecord_id\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": false\n            },\n            {\n              \"key\": \"record_table\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.record_table}}\",\n                        \"displayValue\": \"vaVarsrecord_table\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": false\n            },\n            {\n              \"key\": \"variables\",\n              \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    if (!itemJson || !itemJson.variables)\\n        return '';\\n    var variablesObj = {};\\n    for (i = 0; i < itemJson.variables.length; i++) {\\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\\n    }\\n    return JSON.stringify(variablesObj);\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": false\n            }\n          ]\n        },\n        \"207e1d9738824bf8b50999392aa602e0\": {\n          \"id\": \"207e1d9738824bf8b50999392aa602e0\",\n          \"name\": \"Set Selected Item\",\n          \"script\": \"(function execute() {\\n    var itemId = vaInputs.catalog_item_id.getValue();\\n    var itemJSON = new sn_sc.CatalogConversationHelper().getItem(itemId);\\n    vaVars.itemJSON = JSON.stringify(itemJSON);\\n    vaVars.itemName = itemJSON.name;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"73d7ac3ed17042f5b5507bfb1c8b7444\": {\n          \"id\": \"73d7ac3ed17042f5b5507bfb1c8b7444\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Item Description\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var response = gs.getMessageLang(\\\"Here are some more details about {0}\\\", vaContext.getRequesterLang(), [vaVars.itemName]);\\n    if (itemJson.description) \\n        return response + itemJson.description;\\n\\n    return gs.getMessageLang(\\\"Selected {0}\\\", vaContext.getRequesterLang(), [vaVars.itemName]);\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"bd3466c304de408183ccfc9dcd0bcb19\": {\n          \"id\": \"bd3466c304de408183ccfc9dcd0bcb19\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Proceed\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"Should I proceed with this?\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"9cab67ed47ce436bb12581ee7ceefb00\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"eab57865501d4f008c88c7a3e41e1f29\": {\n          \"id\": \"eab57865501d4f008c88c7a3e41e1f29\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"9c32307114d54b92acebfe39291b1057\": {\n          \"id\": \"9c32307114d54b92acebfe39291b1057\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"0b36051dccc04f43bfadae8b91720f27\": {\n          \"id\": \"0b36051dccc04f43bfadae8b91720f27\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"b29723c02c774bfc92b637faa4f34233\": {\n          \"id\": \"b29723c02c774bfc92b637faa4f34233\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Start Questions\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"OK, let's finish up your request.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"b83a3b7e4d694dea99a76acd529af6f9\": {\n          \"id\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"54a0cb0947934f549dfd92844411b3c9\": {\n          \"id\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"03ddb6e3316247e1a29ee3e88693b877\": {\n          \"id\": \"03ddb6e3316247e1a29ee3e88693b877\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Submit Producer\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Alright, you're all set. Shall I submit this request?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"1efdcf2f469443bab274d33fd859ba49\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"bd81452a9a1b46bba0dc8e99ac7537ac\": {\n          \"id\": \"bd81452a9a1b46bba0dc8e99ac7537ac\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"2412f77223a04a709fc32c8e75850387\": {\n          \"id\": \"2412f77223a04a709fc32c8e75850387\",\n          \"name\": \"Insert the Record\",\n          \"script\": \"(function execute() {\\n   var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variablesObj = {};\\n    var attachmentIds = [];\\n    for (i = 0; i < itemJson.variables.length; i++) {\\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\\n        if (itemJson.variables[i].type === 33)\\n           attachmentIds.push(itemJson.variables[i].value);\\n    }\\n   var reqObject = {\\n       \\\"sysparm_id\\\" : itemJson.sys_id,\\n       \\\"sysparm_action\\\" : 'execute_producer',\\n        \\\"variables\\\" : variablesObj,\\n        \\\"engagement_channel\\\" : 'va'\\n   }\\n   var response = new sn_sc.CatItem(itemJson.sys_id).submitProducer(reqObject);\\n   if (response) {\\n       vaVars.record_id = response.sys_id;\\n       vaVars.record_table = response.table;\\n       // add attachment to record\\n       var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\\n       for (var i in mediaLinksFormAttachment)\\n           vaSystem.attachToRecord(mediaLinksFormAttachment[i], response.table, response.sys_id);\\n\\n       // move attachment variable to record\\n       var gr = new GlideRecord('sys_attachment');\\n       gr.addQuery('sys_id', 'IN' , attachmentIds);\\n       gr.query();\\n       while (gr.next()) {\\n           gr.setValue('table_name', 'ZZ_YY' + response.table);\\n           gr.setValue('table_sys_id', response.sys_id);\\n           gr.update();\\n       }\\n   }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"56988cc5a07a413c951e653967010fed\": {\n          \"id\": \"56988cc5a07a413c951e653967010fed\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Order Item\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Alright, you're all set. Shall I submit this request?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"ee4278e027464dbc9047276cfda4b036\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"019517bc2ee94230a8baada8caa4a155\": {\n          \"id\": \"019517bc2ee94230a8baada8caa4a155\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"dce2fd2f9aea4077bf04b1ba6ac992a8\": {\n          \"id\": \"dce2fd2f9aea4077bf04b1ba6ac992a8\",\n          \"name\": \"Checkout Cart\",\n          \"script\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var cartname = \\\"vacart_\\\" + gs.generateGUID();\\n    var cartObj = new sn_sc.CartJS(cartname);\\n    cartObj.setRequestedFor(vaVars.request_for);\\n    cartObj.setEngagementChannel('va');\\n\\n    var variablesObj = {};\\n    var attachmentIds = [];\\n    for (i = 0; i < itemJson.variables.length; i++) {\\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\\n        if (itemJson.variables[i].type === 33)\\n           attachmentIds.push(itemJson.variables[i].value);\\n    }\\n        \\n\\n    var reqObj = {\\n        \\\"sysparm_id\\\" : itemJson.sys_id,\\n        \\\"variables\\\" : variablesObj\\n    };\\n    cartObj.addToCart(reqObj);\\n    var requestResponse = cartObj.checkoutCart(true);\\n    var requestGr = new GlideRecord('sc_request');\\n    if (requestGr.get(requestResponse.request_id)) {\\n        var reqItemGr = new GlideRecord('sc_req_item');\\n        reqItemGr.addQuery(\\\"request\\\", requestResponse.request_id);\\n        reqItemGr.query();\\n        if (reqItemGr.next()) {\\n            vaVars.record_id = reqItemGr.getUniqueValue();\\n            vaVars.record_table = 'sc_req_item';\\n            // add attachment to record\\n            var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\\n            for (var i in mediaLinksFormAttachment)\\n                vaSystem.attachToRecord(mediaLinksFormAttachment[i], vaVars.record_table, vaVars.record_id);\\n\\n        }\\n        // move attachment variable to record\\n        var gr = new GlideRecord('sys_attachment');\\n        gr.addQuery('sys_id', 'IN' , attachmentIds);\\n        gr.query();\\n        while (gr.next()) {\\n            gr.setValue('table_name', 'ZZ_YY' + vaVars.record_table);\\n            gr.setValue('table_sys_id', vaVars.record_id);\\n            gr.update();\\n        }\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"13f599b596ac4c52b36e610ec1364786\": {\n          \"id\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"5d527818c230458e9568ae597f0a9978\": {\n          \"id\": \"5d527818c230458e9568ae597f0a9978\",\n          \"stepType\": \"DateTimePrompt\",\n          \"name\": \"Question Date\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"d679323216e54589b81e8c5b3229dcb8\",\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"16a1a697635b49049011bfb4b7300c06\": {\n          \"id\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"name\": \"Post Response\",\n          \"script\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    vaVars.validation_message = \\\"\\\";\\n    var quesJson = itemJson.variables[vaVars.qIndex];\\n    var type = quesJson.type;\\n    var vaFieldValidator = new global.VAFieldValidator();\\n    // If user doesn't want to proceed with the selected value and skips the question, the variable would be set to \\\"\\\"\\n    var proceedWithDefaultValue = vaInputs.proceed_with_default.getValue();\\n    switch (type) {\\n        case 2:\\n        case 6:\\n        case 16:\\n            var ans = vaInputs.question_text.getValue() || (proceedWithDefaultValue ? quesJson.display_value : \\\"\\\");\\n            if (ans.trim().length === 0 && itemJson.variables[vaVars.qIndex].mandatory) {\\n                vaVars.validation_message = gs.getMessageLang('You must answer this question', vaContext.getRequesterLang());\\n                break;\\n            }\\n            if (type === 2) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_text = \\\"\\\";\\n                break;\\n            }\\n            var q = GlideappQuestion.getQuestion(itemJson.variables[vaVars.qIndex].sys_id);\\n            var validresponse = q.validateRegex(ans);\\n            if (validresponse) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_text = \\\"\\\";\\n            } else if (!validresponse)\\n                vaVars.validation_message = q.getValidationMessage();\\n            break;\\n        case 7:\\n            var ans = (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_choice.getValue()) {\\n                switch (vaInputs.question_choice.getValue()) {\\n                    case \\\"yes\\\":\\n                        ans = \\\"true\\\";\\n                        break;\\n                    case \\\"no\\\":\\n                    case \\\"no_data\\\":\\n                    case \\\"\\\":\\n                        ans = \\\"false\\\";\\n                        break;\\n                    default:\\n                        ans = \\\"false\\\";\\n                        break;\\n                }\\n            }\\n            if (itemJson.variables[vaVars.qIndex].mandatory && ans == \\\"false\\\")\\n                vaVars.validation_message = gs.getMessageLang('It is a mandatory question, you cannot select No as the answer', vaContext.getRequesterLang());\\n            else\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n            vaInputs.question_choice = \\\"\\\";\\n            break;\\n        case 9:\\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date.getDisplayValue() || (proceedWithDefaultValue ? quesJson.display_value : \\\"\\\");\\n            vaInputs.question_date = \\\"\\\";\\n            break;\\n        case 10:\\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date_time.getDisplayValue() || (proceedWithDefaultValue ? quesJson.display_value : \\\"\\\");\\n            vaInputs.question_date_time = \\\"\\\";\\n            break;\\n        case 8:\\n            var ans = (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_reference)\\n                ans = vaInputs.question_reference.getValue();\\n\\n            itemJson.variables[vaVars.qIndex].value = ans;\\n            vaInputs.question_reference = \\\"\\\";\\n            break;\\n        case 1:\\n        case 3:\\n        case 4:\\n        case 5:\\n        case 18:\\n        case 22:\\n            var ans = (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_choice) {\\n                ans = vaInputs.question_choice.getValue();\\n                ans = ans == 'no_data' ? '' : ans;\\n            }\\n            itemJson.variables[vaVars.qIndex].value = ans;\\n            vaInputs.question_choice = \\\"\\\";\\n            break;\\n        case 26:\\n            var ans = vaInputs.question_email.getValue() || (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_email.getValue() || ans == \\\"\\\" || vaFieldValidator.validateEmailAddress(ans)) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_email = \\\"\\\";\\n            } else\\n                vaVars.validation_message = gs.getMessageLang(\\\"This isn't a valid email address\\\", vaContext.getRequesterLang());\\n            break;\\n        case 27:\\n            var ans = vaInputs.question_url.getValue() || (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_url.getValue() || ans == \\\"\\\" || vaFieldValidator.validateURL(ans)) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_url = \\\"\\\";\\n            } else\\n                vaVars.validation_message = gs.getMessageLang(\\\"This isn't a valid URL\\\", vaContext.getRequesterLang());\\n            break;\\n        case 28:\\n            var ans = vaInputs.question_ip_address.getValue() || (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_ip_address.getValue() || ans == \\\"\\\" || vaFieldValidator.validateIPAddress(ans)) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_ip_address = \\\"\\\";\\n            } else\\n                vaVars.validation_message = gs.getMessageLang(\\\"This isn't a valid IP Address\\\", vaContext.getRequesterLang());\\n            break;\\n        case 31:\\n            var ans = quesJson.default_value + '';\\n            if (quesJson.default_value && proceedWithDefaultValue)\\n                vaVars.request_for = ans;\\n            else if (vaVars.request_for)\\n                ans = vaVars.request_for;\\n            itemJson.variables[vaVars.qIndex].value = ans;\\n    }\\n    itemJson.variables[vaVars.qIndex].field_info_messages = {};\\n    itemJson.variables[vaVars.qIndex].field_warn_messages = {};\\n    itemJson.variables[vaVars.qIndex].field_error_messages = {};\\n\\n    if (!vaVars.request_for)\\n        vaVars.request_for = gs.getUserID() + '';\\n    var executeDataLookup = false;\\n    var executeDynamicValue = false;\\n    if (quesJson.data_lookup_ids && quesJson.data_lookup_ids.length != 0)\\n        executeDataLookup = true;\\n    if (itemJson.dynamic_value_variable_config && itemJson.dynamic_value_variable_config[quesJson.sys_id] && itemJson.dynamic_value_variable_config[quesJson.sys_id].length != 0)\\n        executeDynamicValue = true;\\n    if (executeDataLookup || executeDynamicValue) {\\n        var helper = new sn_sc.CatalogConversationHelper();\\n        vaVars.itemJSON = JSON.stringify(helper.executeVariableChangeHandlers(itemJson, quesJson.sys_id, executeDataLookup, executeDynamicValue));\\n    } else\\n        vaVars.itemJSON = JSON.stringify(itemJson);\\n\\n// resetting the value of proceed with default incase validation fails\\n   if (vaVars.validation_message.length !== 0)\\n       vaInputs.proceed_with_default = false;\\n\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d6cc5e3effbd474bbdef055afb145637\": {\n          \"id\": \"d6cc5e3effbd474bbdef055afb145637\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"2cc08096b30f45b0827119c3b5f5fa42\": {\n          \"id\": \"2cc08096b30f45b0827119c3b5f5fa42\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Validation Message\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n      var singleOutMsg = new sn_cs.SinglePartOutMsg();\\n       singleOutMsg.setTextPart(gs.getMessageLang('{0}. Answer the question again', vaContext.getRequesterLang(), [vaVars.validation_message]));\\n       return singleOutMsg;\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"569ccaedd78340979feca86682affcbe\": {\n          \"id\": \"569ccaedd78340979feca86682affcbe\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Question Text\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"49591097b4f9403ebc5d93ad049007f0\",\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"a8757a988a2946a885eb9e8fac4a36e6\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Question Reference\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"e5e78bba2e454895a9f7de70d39027b0\",\n          \"id\": \"a8757a988a2946a885eb9e8fac4a36e6\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variable = itemJson.variables[vaVars.qIndex];\\n\\n    var gr = new GlideRecordSecure(variable.reference);\\n    gr.addQuery(variable.qualifier);\\n    if (variable.ref_ac_order_by)\\n        gr.orderBy(variable.ref_ac_order_by);\\n    else\\n        gr.orderBy(gr.getDisplayName());\\n    \\n    gr.query();\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n    \\n    return options;    \\n})()\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No records found\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variable = itemJson.variables[vaVars.qIndex];\\n\\n    var gr = new GlideRecordSecure(variable.reference);\\n    gr.addQuery(variable.qualifier);\\n    if (variable.ref_ac_order_by)\\n        gr.orderBy(variable.ref_ac_order_by);\\n    else\\n        gr.orderBy(gr.getDisplayName());\\n    \\n    gr.query();\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n    \\n    return options;    \\n})()\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"isMultipleSelect\": false\n        },\n        \"088c5a499e1444b38835ff2db8919544\": {\n          \"id\": \"088c5a499e1444b38835ff2db8919544\",\n          \"name\": \"Set Record ID to -1\",\n          \"script\": \"(function execute() {\\n    vaVars.record_id = \\\"-1\\\";\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d4ae63da950140f0b6ae1afa41ed3d69\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Question Choice\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"dc4af802dc2f47c4bbeccef60a0887c3\",\n          \"id\": \"d4ae63da950140f0b6ae1afa41ed3d69\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = choices = [];\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.type == 7)\\n        choices = [{ \\\"label\\\": gs.getMessageLang(\\\"Yes\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"yes\\\" }, { \\\"label\\\": gs.getMessageLang(\\\"No\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"no\\\" }];\\n    else\\n        choices = quesJson.options;\\n\\n    if (choices.length > 0 && quesJson.mandatory) {\\n        if (!choices[0].value)\\n            choices.shift();\\n    }\\n\\n    options = choices;\\n    return options;\\n})()\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"No records found\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = choices = [];\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.type == 7)\\n        choices = [{ \\\"label\\\": gs.getMessageLang(\\\"Yes\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"yes\\\" }, { \\\"label\\\": gs.getMessageLang(\\\"No\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"no\\\" }];\\n    else\\n        choices = quesJson.options;\\n\\n    if (choices.length > 0 && quesJson.mandatory) {\\n        if (!choices[0].value)\\n            choices.shift();\\n    }\\n\\n    options = choices;\\n    return options;\\n})()\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (question.mandatory)\\n        return false;\\n    if (question.type === 3 && question.value === '' && question.options[0].value !== '') \\n        return true;\\n    if (question.type === 4 && question.value === '')\\n        return true;\\n    return false;\\n})();\\n\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"isMultipleSelect\": false\n        },\n        \"9857784602ba45daa36362f8081f3f78\": {\n          \"id\": \"9857784602ba45daa36362f8081f3f78\",\n          \"stepType\": \"DateTimePrompt\",\n          \"name\": \"Question Date Time\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"c964d5c4ce17414cb95fe1bf03318b7e\",\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"9401125e1c1e4da0b381fa0cf07d28ea\": {\n          \"id\": \"9401125e1c1e4da0b381fa0cf07d28ea\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Question Label\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (question._internal_type == \\\"checkbox_container\\\" && question.label.toUpperCase() == \\\"OPTIONS\\\"\\n        && Array.isArray(question._children) && question._children.length == 1)\\n        return false;\\n    return true;\\n})()\\n\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"24d9573a895a4115ac6adc4b3d0933aa\": {\n          \"id\": \"24d9573a895a4115ac6adc4b3d0933aa\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Container Start Question\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.display_title)\\n        return true;\\n})()\\n\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"2a3e1c9302b7463199467b476dcc5058\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Question Requested For\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"a9d149d98f8c4c5ebede92004778e811\",\n          \"id\": \"2a3e1c9302b7463199467b476dcc5058\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var count = 0;\\n    var gr = new GlideRecordSecure('sys_user');\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\\n    gr.addQuery(quesJson.qualifier);\\n    gr.orderBy(gr.getDisplayName());\\n    gr.chooseWindow(index, index + limit, true);\\n    gr.query();\\n\\n    var count = gr.getRowCount();\\n    vaVars.count = count;\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n    \\n    if (count > 0) {\\n        options.push({\\n            'value' : 'search',\\n            'label' : gs.getMessageLang('Someone else', vaContext.getRequesterLang())\\n        });\\n    }\\n    return options;    \\n})()\\n\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"I couldn't find a user with that name\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var count = 0;\\n    var gr = new GlideRecordSecure('sys_user');\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\\n    gr.addQuery(quesJson.qualifier);\\n    gr.orderBy(gr.getDisplayName());\\n    gr.chooseWindow(index, index + limit, true);\\n    gr.query();\\n\\n    var count = gr.getRowCount();\\n    vaVars.count = count;\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n    \\n    if (count > 0) {\\n        options.push({\\n            'value' : 'search',\\n            'label' : gs.getMessageLang('Someone else', vaContext.getRequesterLang())\\n        });\\n    }\\n    return options;    \\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"isMultipleSelect\": false\n        },\n        \"f145c35d855347fa8375ede73773b057\": {\n          \"id\": \"f145c35d855347fa8375ede73773b057\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Search Requested For\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"Who should I set it to? \"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"ebbb4a512b184021b572be61b0736b0b\",\n          \"skippable\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"4f297e652c8f404483d0f478f57215ef\": {\n          \"id\": \"4f297e652c8f404483d0f478f57215ef\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"ca1771b4aefe41a4aef0d82910799470\": {\n          \"id\": \"ca1771b4aefe41a4aef0d82910799470\",\n          \"name\": \"Requested For Next Page\",\n          \"script\": \"(function execute() {\\n    var count = parseInt(vaVars.count);\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    if ( index + limit > count )\\n        vaVars.index = 0;\\n    else\\n        vaVars.index = index + limit;\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b76cd4c81a254855b2dc9b8150c47c06\": {\n          \"id\": \"b76cd4c81a254855b2dc9b8150c47c06\",\n          \"name\": \"Is Delegation Allowed\",\n          \"script\": \"(function execute() {\\n    var item = new sn_sc.CatItem(JSON.parse(vaVars.itemJSON).sys_id);\\n    vaVars.request_for = vaInputs.question_requested_for.getValue() + '';\\n    vaVars.canView = item.isDelegationAllowed(vaVars.request_for);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f809a8503d004c1793d7d29401854a44\": {\n          \"id\": \"f809a8503d004c1793d7d29401854a44\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"b14dab0c843d4491b1908a1d24f4f60e\": {\n          \"id\": \"b14dab0c843d4491b1908a1d24f4f60e\",\n          \"name\": \"Requested For Previous Page\",\n          \"script\": \"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var c = index - limit;\\n    if ( c < 0 ) c = 0;\\n    vaVars.index = c;\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"be0f5328e06a4fdb8663050d29f649a1\": {\n          \"id\": \"be0f5328e06a4fdb8663050d29f649a1\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Request For Another User\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"The selected user does not have access to this item. Do you want to request for  someone else?\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"a6e7b01c1d1e46a29b5e25666374fcc5\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"a4dd39d7cdfc4162a39aea63b5104ca6\": {\n          \"id\": \"a4dd39d7cdfc4162a39aea63b5104ca6\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f868531907f8475b80eee77193907c1c\": {\n          \"id\": \"f868531907f8475b80eee77193907c1c\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f33eca4d29b24a16a32705fd29535c44\": {\n          \"id\": \"f33eca4d29b24a16a32705fd29535c44\",\n          \"name\": \"Run OnChange Policies\",\n          \"script\": \"(function execute() {\\n   vaVars.itemJSON = JSON.stringify(new sn_sc.CatalogConversationHelper().runChangePolicies(JSON.parse(vaVars.itemJSON)))\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"699922b57f0e404eae6f939bb9ea7bad\": {\n          \"id\": \"699922b57f0e404eae6f939bb9ea7bad\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Question Email\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"d0e02123b54944f19a7fc9cfc1785b11\",\n          \"inputType\": {\n            \"format\": \"33513d135b1200101f254d3ba881c7d5\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"805acb1d5a76490283d21adee11ace8d\": {\n          \"id\": \"805acb1d5a76490283d21adee11ace8d\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Question IP Address\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"d35b1e93084d4f8390bc356383961ada\",\n          \"inputType\": {\n            \"format\": \"a860c5945b2200101f254d3ba881c7df\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"de355525a3004003ba2d40597493a01d\": {\n          \"id\": \"de355525a3004003ba2d40597493a01d\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Question URL\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"3951531a4d754d3f83a6cae37e53ae92\",\n          \"inputType\": {\n            \"format\": \"77d8b2935b9200101f254d3ba881c7b9\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"ffb615404000427783e7a265d333c2b2\": {\n          \"id\": \"ffb615404000427783e7a265d333c2b2\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"7233865f890743f69ab999234a25ad3e\": {\n          \"id\": \"7233865f890743f69ab999234a25ad3e\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Add Attachment\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang('Add attachment?', vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return !item.mandatory_attachment;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"d3131dcb6d4243858d0ff60ba07588c6\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"b769ea57ad464cfd8574adeeb9d0bf9e\": {\n          \"id\": \"b769ea57ad464cfd8574adeeb9d0bf9e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"d83ad8b6307945b1b04263ffbb62443b\": {\n          \"id\": \"d83ad8b6307945b1b04263ffbb62443b\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"Upload Attachment\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang('Upload attachment', vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var addMore = false;\\n    //when attachment is mandatory, to provide an option to skip add more \\n    if (vaInputs.add_more && vaInputs.add_more.getValue())\\n        addMore = true;\\n        \\n    return !JSON.parse(vaVars.itemJSON).mandatory_attachment || addMore;\\n})()\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"15e48e7ffe144828980d41225306d557\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"1982378d14e14ebaa9ed9d0276f081cb\": {\n          \"id\": \"1982378d14e14ebaa9ed9d0276f081cb\",\n          \"name\": \"Add Media Links for Form Attachment\",\n          \"script\": \"(function execute() {\\n    if (!!vaVars.media_links_form_attachment)\\n        vaVars.media_links_form_attachment = vaVars.media_links_form_attachment + ',' + vaInputs.upload_attachment.getValue();\\n    else\\n        vaVars.media_links_form_attachment = vaInputs.upload_attachment.getValue();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b9f517e461df4167a3826bf9fa16e638\": {\n          \"id\": \"b9f517e461df4167a3826bf9fa16e638\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Add More\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang('Add more?', vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"b5b51b3b069f4faa8cd2c87cf9fcc097\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"fd5059dafba54ec884263be207c53771\": {\n          \"id\": \"fd5059dafba54ec884263be207c53771\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"11dc7c8547e9400b87f48a7c394589fd\": {\n          \"id\": \"11dc7c8547e9400b87f48a7c394589fd\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"Question Attachment\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"ada76ae131be4767832c44a0020aa739\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"e31ef9e4ec54417eb9590f00c1a3377a\": {\n          \"id\": \"e31ef9e4ec54417eb9590f00c1a3377a\",\n          \"name\": \"Validate Attachment\",\n          \"script\": \"(function execute() {\\n    vaVars.validation_message = \\\"\\\";\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var quesJson = itemJson.variables[vaVars.qIndex];\\n    var vaUtils = new global.VAUtils();\\n    var arr = vaInputs.question_attachment.getValue().split('/');\\n    var mediaId = arr[arr.length - 1];\\n    var gr = new GlideRecord('sys_cs_media');\\n    gr.addQuery('media_id', mediaId);\\n    gr.query();\\n    if (gr.next()) {\\n        var attachmentId = gr.getValue('sys_attachment_id');\\n        var attachRef = new GlideRecord('sys_attachment');\\n        if (attachRef.get(attachmentId)) {\\n            var file = {\\n                name: attachRef.getValue('file_name'),\\n                size: attachRef.getValue('size_bytes')\\n            };\\n            var allowedExtensions = new Array();\\n            if (quesJson.allow_extension)\\n               allowedExtensions = quesJson.allow_extension.split(';');\\n            var field = {\\n                allowedExtensions: allowedExtensions,\\n                allowedFileSize: quesJson.max_file_size\\n            };\\n            var result = vaUtils.validateAttachment(file, field);\\n            if (result.type == 'success') {\\n                quesJson.value = attachmentId;\\n                vaVars.itemJSON = JSON.stringify(itemJson);\\n                vaInputs.question_attachment.setValue('');\\n            } else\\n                vaVars.validation_message = result.message;\\n        } else \\n            vaVars.validation_message = gs.getMessageLang('Failed to upload the attachment', vaContext.getRequesterLang());\\n    } else \\n        vaVars.validation_message = gs.getMessageLang('Failed to upload the attachment', vaContext.getRequesterLang());\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"question_attachmentISNOTEMPTY\",\n            \"mode\": \"query\"\n          }\n        },\n        \"fcdd14f0de7847ceae1affc008d8b0f3\": {\n          \"id\": \"fcdd14f0de7847ceae1affc008d8b0f3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"1226678091eb488388097f09ccfb5a4d\": {\n          \"id\": \"1226678091eb488388097f09ccfb5a4d\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Validation Message\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n     var singleOutMsg = new sn_cs.SinglePartOutMsg();\\n       singleOutMsg.setTextPart(gs.getMessageLang('{0}. Answer the question again', vaContext.getRequesterLang(), [vaVars.validation_message]));\\n       vaVars.validation_message = \\\"\\\";\\n       return singleOutMsg;\\n})()\\n\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9e896b67b3114d96ae504430b66716dc\": {\n          \"id\": \"9e896b67b3114d96ae504430b66716dc\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Record Producer\"\n        },\n        \"e14402d6ed324753a8415f09545ff8c2\": {\n          \"id\": \"e14402d6ed324753a8415f09545ff8c2\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Execute Contextual Search\"\n        },\n        \"ac19c7d150354af6b49927f218100a8e\": {\n          \"id\": \"ac19c7d150354af6b49927f218100a8e\",\n          \"name\": \"Get Search Variable And Context\",\n          \"script\": \"(function execute() {\\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\\n    if(gs.nil(vaVars.contextualSearchVariable)) {\\n        var searchConfig = contextualSearch.getContextualSearchVariableAndContext(vaInputs.catalog_item_id);\\n        vaVars.contextualSearchVariable = searchConfig.searchVariable;\\n        vaVars.contextualSearchContext = searchConfig.context;\\n    }\\n    return;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"0cf4021d189347e0906b78ac67d84ad0\": {\n          \"id\": \"0cf4021d189347e0906b78ac67d84ad0\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Contextual Search Variable ?\"\n        },\n        \"842240253fdb4ce8a81f01cfea5396e3\": {\n          \"id\": \"842240253fdb4ce8a81f01cfea5396e3\",\n          \"name\": \"Contextual Search\",\n          \"script\": \"(function execute() {\\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\\n    var response = contextualSearch.search(\\n        vaVars.contextualSearchContext, vaInputs.question_text.getValue(), ''\\n    );\\n    var success = contextualSearch.processSearchResponse(response);\\n    if (!success) {\\n        return;\\n    }  \\n    var relevantSearchResults = contextualSearch.processGeneralResults(response, 20, -2, vaSystem);\\n    vaVars.contextualSearchResultCount = relevantSearchResults.length;\\n    vaVars.contextualSearchResultJsonString = JSON.stringify(relevantSearchResults);\\n    vaVars.contextualSearchIndex = 0;\\n    return;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"904620a01a3445c09b2f883c3701d676\": {\n          \"id\": \"904620a01a3445c09b2f883c3701d676\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Did the search return results ?\"\n        },\n        \"5d35c039af7c4631a146c0c60b424b65\": {\n          \"id\": \"5d35c039af7c4631a146c0c60b424b65\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Display multi-link\",\n          \"url\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"label\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"header\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"multiple\",\n          \"introMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"I found some information that might help you:\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"listOfLinks\": \"(function execute(header) {\\n\\tvar contextualSearch = new global.VAGlobalContextualSearchUtil();\\n\\tvar variables = {\\n\\t\\tlimit: vaVars.contextualSearchResultLimit,\\n\\t\\tindex: vaVars.contextualSearchIndex,\\n\\t\\tsearch_result_json_string: vaVars.contextualSearchResultJsonString,\\n\\t\\tportal: ''\\n\\t}\\n\\tvar groupedLinksOutMsg = contextualSearch.getLinks(header, variables, vaSystem, vaContext);\\n\\treturn groupedLinksOutMsg;\\n})(header)\\n\"\n        },\n        \"8d07b16788dd46a3ac6086037dc7d758\": {\n          \"id\": \"8d07b16788dd46a3ac6086037dc7d758\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Did Articles Help ?\"\n        },\n        \"a4cc4c56e01047f7b0d45b9029d17b8d\": {\n          \"id\": \"a4cc4c56e01047f7b0d45b9029d17b8d\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Did Articles Help\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"Did any of this information resolve your issue?\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"29c02fc59a2044ea8ac7822eef35baec\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"ef70c2e3150f4ff4a4358cd01011f197\": {\n          \"id\": \"ef70c2e3150f4ff4a4358cd01011f197\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Confirmation Required ?\"\n        },\n        \"ffcaca766a5148b1874a9b52acef4592\": {\n          \"id\": \"ffcaca766a5148b1874a9b52acef4592\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"59b8aa46879743f7b8f4e84295210dc4\": {\n          \"id\": \"59b8aa46879743f7b8f4e84295210dc4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Catalog Builder Preview\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Preview successful\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"c7adfd19133a4c649d6698c86ae9020c\": {\n          \"id\": \"c7adfd19133a4c649d6698c86ae9020c\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"7f6ae93a22384a068958c171956f4fe8\": {\n          \"id\": \"7f6ae93a22384a068958c171956f4fe8\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Catalog Builder Preview Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Since this was a preview, the request was not submitted\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"8cefb357d56842a3b31cc3c083a62a74\": {\n          \"id\": \"8cefb357d56842a3b31cc3c083a62a74\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f53349b2dd384eb887feff0287cecbf5\": {\n          \"id\": \"f53349b2dd384eb887feff0287cecbf5\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Question Rich Text Label\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"bc8ca9598b0d4dadbf7f8e72a04f4353\": {\n          \"id\": \"bc8ca9598b0d4dadbf7f8e72a04f4353\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Default Value Acknowledgement \",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    var renderedValue = quesJson.display_value ? quesJson.display_value : quesJson.value;\\n    if (quesJson.type == 7) {\\n        renderedValue = quesJson.value == \\\"true\\\" ? \\\"Yes\\\" : \\\"No\\\";\\n    }\\n    return gs.getMessageLang(\\\"<b>{0}</b> was selected as the value for <b>{1}</b>\\\", vaContext.getRequesterLang(), [renderedValue, quesJson.label])\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.type == 7)\\n        return quesJson.has_default_value;\\n    return quesJson.value ? true : false;\\n})()\\n\"\n          },\n          \"requestFeedback\": true\n        },\n        \"cd0f50d0171b474ebbaea7e27fdf2932\": {\n          \"id\": \"cd0f50d0171b474ebbaea7e27fdf2932\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Proceed with Default\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Do you want to proceed with this value?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.type == 7)\\n        return quesJson.has_default_value;\\n    return quesJson.value ? true : false;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"b18d103ac6924ced825414c020736723\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"0df892dd8ce940be81dbdcadbcf584ff\": {\n          \"id\": \"0df892dd8ce940be81dbdcadbcf584ff\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"a6dc56d1942d4b66825f02d245edc6d4\": {\n          \"id\": \"a6dc56d1942d4b66825f02d245edc6d4\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Show end state card?\"\n        },\n        \"27123440478c41c49eac84d738a843c2\": {\n          \"id\": \"27123440478c41c49eac84d738a843c2\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"a1846ce5007045088d91003fdeb5f70e\": {\n          \"id\": \"a1846ce5007045088d91003fdeb5f70e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Messaging Channel\"\n        },\n        \"bfa0a72ef56345f78e51e37f289d2962\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Question Choice Other Channels\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (question.mandatory)\\n        return false;\\n    if (question.type === 4 && question.value === '')\\n        return true;\\n    if (question.type === 3 && question.value === '' && question.options[0].value !== '')\\n        return true;\\n    return false;\\n})();\\n\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"0cb822556e9c4949adb5cfae1b521ea7\",\n          \"id\": \"bfa0a72ef56345f78e51e37f289d2962\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var options = choices = [];\\n    var count = 0;\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n\\n    if (quesJson.type == 7)\\n        choices = [{ \\\"label\\\": gs.getMessageLang(\\\"Yes\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"yes\\\" }, { \\\"label\\\": gs.getMessageLang(\\\"No\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"no\\\" }];\\n    else\\n        choices = quesJson.options;\\n\\n    if (choices.length > 0 && quesJson.mandatory) {\\n        if (!choices[0].value)\\n            choices.shift();\\n    }\\n    \\n    count = choices.length;\\n    vaVars.count = count;\\n    options = choices.splice(index, limit);\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n    \\n    return options;    \\n})()\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No records found\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var options = choices = [];\\n    var count = 0;\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n\\n    if (quesJson.type == 7)\\n        choices = [{ \\\"label\\\": gs.getMessageLang(\\\"Yes\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"yes\\\" }, { \\\"label\\\": gs.getMessageLang(\\\"No\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"no\\\" }];\\n    else\\n        choices = quesJson.options;\\n\\n    if (choices.length > 0 && quesJson.mandatory) {\\n        if (!choices[0].value)\\n            choices.shift();\\n    }\\n    \\n    count = choices.length;\\n    vaVars.count = count;\\n    options = choices.splice(index, limit);\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n    \\n    return options;    \\n})()\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"isMultipleSelect\": false\n        },\n        \"2f13545e7aff44fea92c262a72de2f10\": {\n          \"id\": \"2f13545e7aff44fea92c262a72de2f10\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f9124c93df3c4727a0cab5a33d507c82\": {\n          \"id\": \"f9124c93df3c4727a0cab5a33d507c82\",\n          \"name\": \"Question Choice Prev Page\",\n          \"script\": \"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var c = index - limit;\\n    if ( c < 0 ) c = 0;\\n    vaVars.index = c;\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7fff18e168564d0d8bc3e955abd96328\": {\n          \"id\": \"7fff18e168564d0d8bc3e955abd96328\",\n          \"name\": \"Question Choice Next Page\",\n          \"script\": \"(function execute() {\\n    var count = parseInt(vaVars.count);\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    if ( index + limit > count )\\n        vaVars.index = 0;\\n    else\\n        vaVars.index = index + limit;\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a5d25e2774c749c7bdafb0902e5a2c69\": {\n          \"id\": \"a5d25e2774c749c7bdafb0902e5a2c69\",\n          \"name\": \"Set Question Choice Value\",\n          \"script\": \"(function execute() {\\n    if(vaInputs.question_choice_other_channels) {\\n        vaInputs.question_choice = vaInputs.question_choice_other_channels;\\n        vaInputs.question_choice_other_channels = \\\"\\\";\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"03dc98604b2743a89972102a427acdab\": {\n          \"id\": \"03dc98604b2743a89972102a427acdab\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Messaging Channel\"\n        },\n        \"68d06c7a6fad43488621e8ba2d9b72cd\": {\n          \"id\": \"68d06c7a6fad43488621e8ba2d9b72cd\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Search Reference\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Enter a value to search\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_reference_other_channels;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"fc876df4d3dd49229e790bef174eeb5b\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"d705fe0d136845f1a0a580b3a319a6a8\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Question Reference Other Channels\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"df9465dd557149c2b574ba78bf0b455a\",\n          \"id\": \"d705fe0d136845f1a0a580b3a319a6a8\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var count = 0;\\n\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variable = itemJson.variables[vaVars.qIndex];\\n    var gr = new GlideRecordSecure(variable.reference);\\n    var displayColumn = gr.getDisplayName();\\n   \\n    gr.addEncodedQuery(displayColumn + 'LIKE' + vaInputs.search_reference.getValue());\\n    gr.addQuery(variable.qualifier);\\n    if (variable.ref_ac_order_by)\\n        gr.orderBy(variable.ref_ac_order_by);\\n    else\\n        gr.orderBy(displayColumn);\\n    \\n    gr.chooseWindow(index, index + limit, true);\\n    gr.query();\\n\\n    var count = gr.getRowCount();\\n    vaVars.count = count;\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n\\n    if (count > 0) {\\n        vaVars.no_records_found = \\\"false\\\"\\n        options.push({\\n            'value' : 'search',\\n            'label' : gs.getMessageLang('Search', vaContext.getRequesterLang())\\n        });\\n    }\\n    else\\n        vaVars.no_records_found = \\\"true\\\";\\n    \\n    return options;    \\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No records found\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var count = 0;\\n\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variable = itemJson.variables[vaVars.qIndex];\\n    var gr = new GlideRecordSecure(variable.reference);\\n    var displayColumn = gr.getDisplayName();\\n   \\n    gr.addEncodedQuery(displayColumn + 'LIKE' + vaInputs.search_reference.getValue());\\n    gr.addQuery(variable.qualifier);\\n    if (variable.ref_ac_order_by)\\n        gr.orderBy(variable.ref_ac_order_by);\\n    else\\n        gr.orderBy(displayColumn);\\n    \\n    gr.chooseWindow(index, index + limit, true);\\n    gr.query();\\n\\n    var count = gr.getRowCount();\\n    vaVars.count = count;\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n\\n    if (count > 0) {\\n        vaVars.no_records_found = \\\"false\\\"\\n        options.push({\\n            'value' : 'search',\\n            'label' : gs.getMessageLang('Search', vaContext.getRequesterLang())\\n        });\\n    }\\n    else\\n        vaVars.no_records_found = \\\"true\\\";\\n    \\n    return options;    \\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"isMultipleSelect\": false\n        },\n        \"c39abbdd9d9048ebac88fa462369e4d8\": {\n          \"id\": \"c39abbdd9d9048ebac88fa462369e4d8\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"567ecb8c7e69414197b590e62fc96ffa\": {\n          \"id\": \"567ecb8c7e69414197b590e62fc96ffa\",\n          \"name\": \"Question Reference Prev Page\",\n          \"script\": \"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var c = index - limit;\\n    if ( c < 0 ) c = 0;\\n    vaVars.index = c;\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"851e1675b771476983be9d9e9a335088\": {\n          \"id\": \"851e1675b771476983be9d9e9a335088\",\n          \"name\": \"Question Reference Next Page\",\n          \"script\": \"(function execute() {\\n    var count = parseInt(vaVars.count);\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    if ( index + limit > count )\\n        vaVars.index = 0;\\n    else\\n        vaVars.index = index + limit;\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ca4281b23e314b0c84c95d012d8a9f0a\": {\n          \"id\": \"ca4281b23e314b0c84c95d012d8a9f0a\",\n          \"name\": \"Set Question Reference Value\",\n          \"script\": \"(function execute() {\\n    if(vaInputs.question_reference_other_channels) {\\n        vaInputs.question_reference = vaInputs.question_reference_other_channels;\\n        vaInputs.question_reference_other_channels = \\\"\\\";\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f7d3a19c5a144a6692fa0392fbc42601\": {\n          \"id\": \"f7d3a19c5a144a6692fa0392fbc42601\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"End state card\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"End state card for Catalog Request\",\n          \"reusableTopicId\": \"0b01391550d30110fa9b861f7d83d7f6\",\n          \"inputs\": {\n            \"record_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.record_id}}\",\n                        \"displayValue\": \"Script Variablesrecord_id\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"record_table\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.record_table}}\",\n                        \"displayValue\": \"Script Variablesrecord_table\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            }\n          },\n          \"variableIds\": [],\n          \"outputs\": [],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false\n        },\n        \"767c818240c34396a261e09b5c0e4960\": {\n          \"id\": \"767c818240c34396a261e09b5c0e4960\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Catalog item validity check\"\n        },\n        \"8f1445841a2b4402988276c2a26946d5\": {\n          \"id\": \"8f1445841a2b4402988276c2a26946d5\",\n          \"name\": \"Validate Catalog Item\",\n          \"script\": \"(function execute() {\\n   var catItemID = vaInputs.catalog_item_id.getValue();\\n   var catItem = GlideappCatalogItem.get(catItemID);\\n   if (catItem == null || !(vaContext.catalog_builder_preview == 'true' || catItem.canView())) {\\n       vaVars.isValidCatItem = false;\\n       return;\\n   }\\n   vaVars.isValidCatItem = true;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"4758ce4d476d46728a411ec16124d7e5\": {\n          \"id\": \"4758ce4d476d46728a411ec16124d7e5\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"6a90246af7eb400eb4864c65f1814e8a\": {\n          \"id\": \"6a90246af7eb400eb4864c65f1814e8a\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Change Response\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    var response = quesJson.label;\\n    var json = new JSON();\\n    var infoKeys = json.getKeys(quesJson.field_info_messages);\\n    var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n    var errKeys =  json.getKeys(quesJson.field_error_messages);\\n\\n    for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n    }\\n    for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n    }\\n    for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n    }\\n    response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Would you like to change your response?\\\", vaContext.getRequesterLang());\\n    return response;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"skippable\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"6e0b667d4dbb4459b52c0dcedcf8b5f1\",\n          \"detailDescription\": \"\"\n        },\n        \"9c92ace1fa8245c4bfa429be03bf1c56\": {\n          \"id\": \"9c92ace1fa8245c4bfa429be03bf1c56\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"677c1ab79d384e7fb39a0f9a01127016\": {\n          \"id\": \"677c1ab79d384e7fb39a0f9a01127016\",\n          \"name\": \"Decrement qIndex and clear value\",\n          \"script\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    itemJson.variables[vaVars.qIndex].value = \\\"\\\";\\n    itemJson.variables[vaVars.qIndex].field_info_messages = {};\\n    itemJson.variables[vaVars.qIndex].field_warn_messages = {};\\n    itemJson.variables[vaVars.qIndex].field_error_messages = {};\\n    vaVars.itemJSON = JSON.stringify(itemJson);\\n    var qIndex = vaVars.qIndex;\\n    vaVars.qIndex = --qIndex;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"dd80acb5f3df45a280ef8c1504148824\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d4ae63da950140f0b6ae1afa41ed3d69\",\n          \"target\": \"a5d25e2774c749c7bdafb0902e5a2c69\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f0c2895cad3946a2b00c1170db388563\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a1846ce5007045088d91003fdeb5f70e\",\n          \"target\": \"d4ae63da950140f0b6ae1afa41ed3d69\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaContext.deviceType === \\\"mweb\\\";\\n})()\\n\"\n          },\n          \"label\": \"Mobile/Web Client\"\n        },\n        {\n          \"id\": \"e751d65d536b433d91359456484e2cab\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9c92ace1fa8245c4bfa429be03bf1c56\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.change_response=false\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"false\",\n          \"fromNode\": \"- Decision\",\n          \"toNode\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"toEdge\": \"e751d65d536b433d91359456484e2cab\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"cf649868e19f4cab80f0b238a5999ad3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f7d3a19c5a144a6692fa0392fbc42601\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1fdc521371fc4ac2ba7ff66900718aa2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"f145c35d855347fa8375ede73773b057\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 31)\\n        return true;\\n})()\\n\"\n          },\n          \"label\": \"Question Requested For\"\n        },\n        {\n          \"id\": \"d84737cde6d6447580e9043144076f2a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2412f77223a04a709fc32c8e75850387\",\n          \"target\": \"a6dc56d1942d4b66825f02d245edc6d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2b4a84e13451442397b39927e2f5a44b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"11dc7c8547e9400b87f48a7c394589fd\",\n          \"target\": \"e31ef9e4ec54417eb9590f00c1a3377a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"074205ade60041a5a8074627a66d1a91\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1982378d14e14ebaa9ed9d0276f081cb\",\n          \"target\": \"b9f517e461df4167a3826bf9fa16e638\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"36bf2fbc4d7f4881a293bf6f1c415239\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4f297e652c8f404483d0f478f57215ef\",\n          \"target\": \"ca1771b4aefe41a4aef0d82910799470\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_requested_for.getValue() === 'next';\\n})()\\n\"\n          },\n          \"label\": \"Requested For Next\"\n        },\n        {\n          \"id\": \"be664a4de3d142cfa4fa5e560aef444a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"target\": \"56988cc5a07a413c951e653967010fed\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    if (itemJson.sys_class_name !== 'sc_cat_item_producer')\\n        return true;\\nreturn false;\\n})()\\n\"\n          },\n          \"label\": \"Catalog Item\"\n        },\n        {\n          \"id\": \"12d45221afae4a8cb16b86184c7e6a2e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"73d7ac3ed17042f5b5507bfb1c8b7444\",\n          \"target\": \"bd3466c304de408183ccfc9dcd0bcb19\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b571f10e472f46cd871aa985d5817613\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bd3466c304de408183ccfc9dcd0bcb19\",\n          \"target\": \"eab57865501d4f008c88c7a3e41e1f29\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e536fb9f3fa848f78c2eff171c934266\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eab57865501d4f008c88c7a3e41e1f29\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"proceed=false\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"358a1bc045884a5794a195fa9829764b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eab57865501d4f008c88c7a3e41e1f29\",\n          \"target\": \"9c32307114d54b92acebfe39291b1057\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"proceed=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"3816e95d729f480da94d3acd498aee01\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9c32307114d54b92acebfe39291b1057\",\n          \"target\": \"0b36051dccc04f43bfadae8b91720f27\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return JSON.parse(vaVars.itemJSON).va_support;\\n})()\"\n          },\n          \"label\": \"Has VA Support\"\n        },\n        {\n          \"id\": \"8ae4de53d15e41acb1d31edcb8f0769f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0b36051dccc04f43bfadae8b91720f27\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var qIndex = parseInt(vaVars.qIndex);\\n    //qIndex is -1 initially, we reset this before search again step \\n    do{\\n        qIndex++;\\n        var question = itemJson.variables[qIndex];\\n    }\\n    while(question && (!question.visible || question.readonly || question.sys_readonly));\\n\\n    if (question) {\\n       //There are variables that we can show\\n        return false;\\n    }\\n    //No variables that we can show\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"Item with no variables\"\n        },\n        {\n          \"id\": \"e854162549354ea5bb08b8c61691872e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0b36051dccc04f43bfadae8b91720f27\",\n          \"target\": \"b29723c02c774bfc92b637faa4f34233\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var qIndex = parseInt(vaVars.qIndex);\\n    //qIndex is -1 initially, we reset this before search again step \\n\\n    do{\\n        qIndex++;\\n        var question = itemJson.variables[qIndex];\\n    }\\n    while(question && (!question.visible || question.readonly || question.sys_readonly));\\n\\n    if (question) {\\n       //There are variables that we can show\\n        return true;\\n    }\\n    //No variables  that we can show\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"Item with variables\"\n        },\n        {\n          \"id\": \"70935b339caa4d9b868757ee1cad69d8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b29723c02c774bfc92b637faa4f34233\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"051144cb4ba84b429d3104b3b516d40a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"target\": \"03ddb6e3316247e1a29ee3e88693b877\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    if (itemJson.sys_class_name === 'sc_cat_item_producer')\\n        return true;\\nreturn false;\\n})()\\n\"\n          },\n          \"label\": \"Record Producer\"\n        },\n        {\n          \"id\": \"20cfd23d2979423dad8609a072498b2e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"03ddb6e3316247e1a29ee3e88693b877\",\n          \"target\": \"bd81452a9a1b46bba0dc8e99ac7537ac\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6e77eded859241339adb104c590436f3\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"bd81452a9a1b46bba0dc8e99ac7537ac\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"submit_producer=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Don't Submit\"\n        },\n        {\n          \"id\": \"7168889e76034d37b9383941c3f0881c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"56988cc5a07a413c951e653967010fed\",\n          \"target\": \"019517bc2ee94230a8baada8caa4a155\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9c0681fb08674c26aeb840668c9e2125\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"019517bc2ee94230a8baada8caa4a155\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"order_item=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Don't Order\"\n        },\n        {\n          \"id\": \"5457b79a3cc74f6381e3a7d91f92fa47\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"5d527818c230458e9568ae597f0a9978\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 9;\\n})()\\n\"\n          },\n          \"label\": \"Date Question\"\n        },\n        {\n          \"id\": \"224f8bed61c040d38602b2b92d778d50\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5d527818c230458e9568ae597f0a9978\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0bc2a2a690c440c79af860d916b3289e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"target\": \"d6cc5e3effbd474bbdef055afb145637\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fed862b7cde74a77a6a8cce1f47141f6\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d6cc5e3effbd474bbdef055afb145637\",\n          \"target\": \"2cc08096b30f45b0827119c3b5f5fa42\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.validation_message.length !== 0;\\n})()\\n\"\n          },\n          \"label\": \"Repeat Question\"\n        },\n        {\n          \"id\": \"7c6503a268d447d78ae863f57df89350\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"569ccaedd78340979feca86682affcbe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\\n    return type === 2 || type === 6 || type === 16;\\n})()\"\n          },\n          \"label\": \"Text Type Question\"\n        },\n        {\n          \"id\": \"83a0d92ad0bd473f98d130c31f892db7\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9c32307114d54b92acebfe39291b1057\",\n          \"target\": \"088c5a499e1444b38835ff2db8919544\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !JSON.parse(vaVars.itemJSON).va_support;\\n})()\"\n          },\n          \"label\": \"No VA Support\"\n        },\n        {\n          \"id\": \"f8fb34ff97154d0caea95212bc8df3cc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"088c5a499e1444b38835ff2db8919544\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b41bbd26a8864db68f82ea212716bcbc\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"9857784602ba45daa36362f8081f3f78\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 10;\\n})()\\n\"\n          },\n          \"label\": \"Date-Time Question\"\n        },\n        {\n          \"id\": \"709ecf4081854fdb960de8db89556ac0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9857784602ba45daa36362f8081f3f78\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"82a73282dbad40a1a36973441932d971\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"9401125e1c1e4da0b381fa0cf07d28ea\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    return question.type === 11 || (question.type === 0 && question._internal_type === \\\"checkbox_container\\\");\\n})()\\n\"\n          },\n          \"label\": \"Question Label\"\n        },\n        {\n          \"id\": \"27f50b52d7f14357bbcd7fbde3f925aa\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9401125e1c1e4da0b381fa0cf07d28ea\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fcceb0d42bc4408a85f737a3356a5465\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"24d9573a895a4115ac6adc4b3d0933aa\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\\n    if (type === 0 || type === 12 || type === 19 || type === 20 || type === 24)\\n        return true;\\n})()\\n\"\n          },\n          \"label\": \"Container Or Break Questions\"\n        },\n        {\n          \"id\": \"c8017104476949f0a05354cbf05c306f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"24d9573a895a4115ac6adc4b3d0933aa\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"69bf654b161b49e790cc13dd59be525d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f145c35d855347fa8375ede73773b057\",\n          \"target\": \"2a3e1c9302b7463199467b476dcc5058\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d693584b0b794971a8723ddaba6d9def\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2a3e1c9302b7463199467b476dcc5058\",\n          \"target\": \"4f297e652c8f404483d0f478f57215ef\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fff3ddb3c1be4f8c9b54246d105e886a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ca1771b4aefe41a4aef0d82910799470\",\n          \"target\": \"2a3e1c9302b7463199467b476dcc5058\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"220b96e0830340e781b25750aa2913d0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4f297e652c8f404483d0f478f57215ef\",\n          \"target\": \"f145c35d855347fa8375ede73773b057\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaInputs.question_requested_for.getValue() || vaInputs.question_requested_for.getValue() === 'search';\\n})()\\n\"\n          },\n          \"label\": \"Search Requested For\"\n        },\n        {\n          \"id\": \"e902824258024662874a21ded919da8f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4f297e652c8f404483d0f478f57215ef\",\n          \"target\": \"b76cd4c81a254855b2dc9b8150c47c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var valuePicked = vaInputs.question_requested_for.getValue();\\n    var condition = valuePicked !== 'next' && valuePicked !== 'prev';\\n    if (condition) {\\n        vaVars.count = 0;\\n        vaVars.index = 0;\\n    }\\n    return condition;\\n})();\"\n          },\n          \"label\": \"Requested For Chosen\"\n        },\n        {\n          \"id\": \"3e090a9031be4848a6786d1ff17e796c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b76cd4c81a254855b2dc9b8150c47c06\",\n          \"target\": \"f809a8503d004c1793d7d29401854a44\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"49dbd8f90bdc4a8d8c1d7c735f7b5e72\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f809a8503d004c1793d7d29401854a44\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.canView;\\n})()\\n\"\n          },\n          \"label\": \"Can View\"\n        },\n        {\n          \"id\": \"cbe3e6be58ea45ee891fda194446d2b5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4f297e652c8f404483d0f478f57215ef\",\n          \"target\": \"b14dab0c843d4491b1908a1d24f4f60e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_requested_for.getValue() === 'prev';\\n})()\\n\"\n          },\n          \"label\": \"Requested For Prev\"\n        },\n        {\n          \"id\": \"7b9f950a65384172ad099dd318941c60\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b14dab0c843d4491b1908a1d24f4f60e\",\n          \"target\": \"2a3e1c9302b7463199467b476dcc5058\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c838c4c2651643b293acc33af48c79d3\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f809a8503d004c1793d7d29401854a44\",\n          \"target\": \"be0f5328e06a4fdb8663050d29f649a1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.canView\\n})()\\n\"\n          },\n          \"label\": \"Cannot View\"\n        },\n        {\n          \"id\": \"e903bf83b59b4f8bba94aba03f20dc77\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"be0f5328e06a4fdb8663050d29f649a1\",\n          \"target\": \"a4dd39d7cdfc4162a39aea63b5104ca6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"83a3381878cc47adb3f3cee907bade55\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a4dd39d7cdfc4162a39aea63b5104ca6\",\n          \"target\": \"f145c35d855347fa8375ede73773b057\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"request_for_another_user=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Request for Another User\"\n        },\n        {\n          \"id\": \"bf924a1636d84514be098876a8f12c05\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a4dd39d7cdfc4162a39aea63b5104ca6\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"request_for_another_user=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"End Conversation\"\n        },\n        {\n          \"id\": \"03c34973c4224138bc89bd80ee6ef82c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d6cc5e3effbd474bbdef055afb145637\",\n          \"target\": \"f868531907f8475b80eee77193907c1c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.validation_message.length === 0;\\n})()\\n\"\n          },\n          \"label\": \"Next Question\"\n        },\n        {\n          \"id\": \"56b46b7917cb43fcabd4b52a0418ecc0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f868531907f8475b80eee77193907c1c\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).has_on_change_policies;\\n})()\\n\"\n          },\n          \"label\": \"No onChange Policies\"\n        },\n        {\n          \"id\": \"eac190852f204eac8581f7212ca43c27\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f868531907f8475b80eee77193907c1c\",\n          \"target\": \"f33eca4d29b24a16a32705fd29535c44\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return JSON.parse(vaVars.itemJSON).has_on_change_policies;\\n})()\\n\"\n          },\n          \"label\": \"Has onChange Policies\"\n        },\n        {\n          \"id\": \"d32594ba637648dbbe4a6a610d1283a0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var unSupportedTypes = vaVars.unsupportedVarTypes.split(',');\\n   return unSupportedTypes.indexOf(String(JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type)) !== -1;\\n})()\\n\"\n          },\n          \"label\": \"Unsupported  Variable  Types\"\n        },\n        {\n          \"id\": \"1fdbf3e8b87c4b30988c92b5f7bf9287\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"699922b57f0e404eae6f939bb9ea7bad\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 26;\\n})()\\n\"\n          },\n          \"label\": \"Email Question\"\n        },\n        {\n          \"id\": \"9c27a68278554144aa628eb37f301ba0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"699922b57f0e404eae6f939bb9ea7bad\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5453ac378401409f969a472dcc99b4b0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"805acb1d5a76490283d21adee11ace8d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 28;\\n})()\\n\"\n          },\n          \"label\": \"Ip Address Question\"\n        },\n        {\n          \"id\": \"27971880d2034371b3789bae2e4c9521\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"805acb1d5a76490283d21adee11ace8d\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ed6e00cead454c9e9f09ede9291ef430\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"de355525a3004003ba2d40597493a01d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 27;\\n})()\\n\"\n          },\n          \"label\": \"URL Question\"\n        },\n        {\n          \"id\": \"4bccbf5ece134e95bead5a269e7b17b5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"de355525a3004003ba2d40597493a01d\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a1c6a2d36fa14e3c9d004d161ef56d76\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"target\": \"ffb615404000427783e7a265d333c2b2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var qIndex = parseInt(vaVars.qIndex);\\n    //qIndex is -1 initially, we reset this before search again step \\n    do{\\n        qIndex++;\\n        var question = itemJson.variables[qIndex];\\n    }\\n    while(question && (!question.visible || question.readonly || question.sys_readonly));\\n\\n    if (question) {\\n       //There are variables that we can show\\n        return false;\\n    }\\n    //No variables that we can show\\n    return true;\\n})()\"\n          },\n          \"label\": \"Questions Done\"\n        },\n        {\n          \"id\": \"5271fdd3ebc94f0faf36c24e129d8b03\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ffb615404000427783e7a265d333c2b2\",\n          \"target\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return item.no_attachments === true;\\n})()\\n\"\n          },\n          \"label\": \"Has  No Attachment\"\n        },\n        {\n          \"id\": \"31edc9e648594e1e9e1e4b968fcc4453\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ffb615404000427783e7a265d333c2b2\",\n          \"target\": \"7233865f890743f69ab999234a25ad3e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return item.no_attachments === false;\\n})()\\n\"\n          },\n          \"label\": \"Has Attachment\"\n        },\n        {\n          \"id\": \"080f11480a4143e5b8513c814c15e677\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7233865f890743f69ab999234a25ad3e\",\n          \"target\": \"b769ea57ad464cfd8574adeeb9d0bf9e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"64b6526cfea141109ccf62351c0b7909\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b769ea57ad464cfd8574adeeb9d0bf9e\",\n          \"target\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return !item.mandatory_attachment && !vaInputs.add_attachment.getValue();\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"ec358ae0f38540b6b2b66a61f066431f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b769ea57ad464cfd8574adeeb9d0bf9e\",\n          \"target\": \"d83ad8b6307945b1b04263ffbb62443b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return item.mandatory_attachment || vaInputs.add_attachment.getValue();\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"c48fc6c853ec49f0ab08f07ce0e13158\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b9f517e461df4167a3826bf9fa16e638\",\n          \"target\": \"fd5059dafba54ec884263be207c53771\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d9c0652134124952b57c4b1cbe84135d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fd5059dafba54ec884263be207c53771\",\n          \"target\": \"d83ad8b6307945b1b04263ffbb62443b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"add_more=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"ae625599ac6349858e2a71464a1ebe44\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fd5059dafba54ec884263be207c53771\",\n          \"target\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"add_more=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"c97cfdcb7b7248a096bbb336afa528b7\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"11dc7c8547e9400b87f48a7c394589fd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 33;\\n})()\\n\"\n          },\n          \"label\": \"Question Attachment\"\n        },\n        {\n          \"id\": \"e1b5ffc7ab8348f3a24307b495720ca9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e31ef9e4ec54417eb9590f00c1a3377a\",\n          \"target\": \"fcdd14f0de7847ceae1affc008d8b0f3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bc524d864ce24dddac41b117db6bfa80\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fcdd14f0de7847ceae1affc008d8b0f3\",\n          \"target\": \"f868531907f8475b80eee77193907c1c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.validation_message.length === 0;\\n})()\\n\"\n          },\n          \"label\": \"Next Question\"\n        },\n        {\n          \"id\": \"3a671562b3ca4c49a8a1f8f7e8eb33e2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fcdd14f0de7847ceae1affc008d8b0f3\",\n          \"target\": \"1226678091eb488388097f09ccfb5a4d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.validation_message.length !== 0;\\n})()\\n\"\n          },\n          \"label\": \"Repeat Question\"\n        },\n        {\n          \"id\": \"a0dceee7b4e442ec83b875bad93c5022\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1226678091eb488388097f09ccfb5a4d\",\n          \"target\": \"11dc7c8547e9400b87f48a7c394589fd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"aef1d88cb3cf42e487ae45376a5a0ecc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"569ccaedd78340979feca86682affcbe\",\n          \"target\": \"9e896b67b3114d96ae504430b66716dc\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d13981ec519a4ed9abfd9cc96ee4df7c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9e896b67b3114d96ae504430b66716dc\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n   \\n    if (itemJson.sys_class_name !== 'sc_cat_item_producer') {\\n        return true;\\n    }    \\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"879d840573c04eaabe4cd02d8bfd771e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9e896b67b3114d96ae504430b66716dc\",\n          \"target\": \"e14402d6ed324753a8415f09545ff8c2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    if (itemJson.sys_class_name === 'sc_cat_item_producer') {\\n        return true;\\n    }    \\n    return false;\\n})()\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"8a310f1308574cb58ae32529b9408d82\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e14402d6ed324753a8415f09545ff8c2\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /**\\n     * Topic should pass execute_contextual_search as input if contextual search is required\\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\\n     */\\n    var ans = vaInputs.question_text.getValue();\\n    if(vaInputs.execute_contextual_search == 'false' || ans.trim().length === 0) {\\n        return true;\\n    }\\n    return false;    \\n})()\\n\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Execute Contextual Search\",\n          \"toNode\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"toEdge\": \"8a310f1308574cb58ae32529b9408d82\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"4402b3593c584cedb50f7863f87b647d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e14402d6ed324753a8415f09545ff8c2\",\n          \"target\": \"ac19c7d150354af6b49927f218100a8e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /**\\n     * Topic should pass execute_contextual_search as input if contextual search is required\\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\\n     */\\n    var ans = vaInputs.question_text.getValue();\\n    if(vaInputs.execute_contextual_search == 'true'  && ans.trim().length !== 0) {\\n        return true;\\n    }\\n    return false;     \\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"e433466b15f0424f965b6c0da5ecaff5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ac19c7d150354af6b49927f218100a8e\",\n          \"target\": \"0cf4021d189347e0906b78ac67d84ad0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c86576636c784247bde22c3d08aedb78\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0cf4021d189347e0906b78ac67d84ad0\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if(vaVars.contextualSearchVariable !== quesJson.sys_id) {\\n        return true;\\n    }\\n    return false;\\n})()\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Contextual Search Variable ?\",\n          \"toNode\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"toEdge\": \"c86576636c784247bde22c3d08aedb78\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"202a29a79b924c86b9d78c2473403ef1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0cf4021d189347e0906b78ac67d84ad0\",\n          \"target\": \"842240253fdb4ce8a81f01cfea5396e3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if(vaVars.contextualSearchVariable === quesJson.sys_id) {\\n        return true;\\n    }\\n    return false;\\n})()\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"52ae51f172444702b9634ff6770f4024\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"842240253fdb4ce8a81f01cfea5396e3\",\n          \"target\": \"904620a01a3445c09b2f883c3701d676\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0b34a43c230242419eda7186617bad6d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"904620a01a3445c09b2f883c3701d676\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if(vaVars.contextualSearchResultCount <= 0){\\n        return true;\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Did the search return results ?\",\n          \"toNode\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"toEdge\": \"0b34a43c230242419eda7186617bad6d\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"78de63645b1e45949263b13b2e6c4354\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"904620a01a3445c09b2f883c3701d676\",\n          \"target\": \"5d35c039af7c4631a146c0c60b424b65\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if(vaVars.contextualSearchResultCount > 0){\\n        return true;\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"18837f0906b1475eaf2e5ecacf6dd57a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8d07b16788dd46a3ac6086037dc7d758\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"did_articles_help=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"bff5b93099224de0bd5b307bdd99932e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8d07b16788dd46a3ac6086037dc7d758\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"did_articles_help!=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Decision\",\n          \"toNode\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"toEdge\": \"bff5b93099224de0bd5b307bdd99932e\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"6d4e65aca3c14b698f511adf7ec5a5b8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5d35c039af7c4631a146c0c60b424b65\",\n          \"target\": \"a4cc4c56e01047f7b0d45b9029d17b8d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7866a00eba024797a1694e40246249b6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a4cc4c56e01047f7b0d45b9029d17b8d\",\n          \"target\": \"8d07b16788dd46a3ac6086037dc7d758\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3d06d9e36c1748b1a3cf3a95299c50d1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"207e1d9738824bf8b50999392aa602e0\",\n          \"target\": \"ef70c2e3150f4ff4a4358cd01011f197\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"634b7179597547efac668e41bf884e18\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ef70c2e3150f4ff4a4358cd01011f197\",\n          \"target\": \"73d7ac3ed17042f5b5507bfb1c8b7444\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"confirm_catalog_item=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"d1498ff0c1cf480bad9575a58c594383\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ef70c2e3150f4ff4a4358cd01011f197\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"confirm_catalog_item=false\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Confirmation Required ?\",\n          \"toNode\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"toEdge\": \"d1498ff0c1cf480bad9575a58c594383\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"56acd57f4d6a4755aadc1f3556e58e42\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"019517bc2ee94230a8baada8caa4a155\",\n          \"target\": \"ffcaca766a5148b1874a9b52acef4592\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"order_item=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Order Now\"\n        },\n        {\n          \"id\": \"ed0f05ce58e147c38b14dce6f457a940\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ffcaca766a5148b1874a9b52acef4592\",\n          \"target\": \"dce2fd2f9aea4077bf04b1ba6ac992a8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaContext.catalog_builder_preview)\\n       return false;\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"Order\"\n        },\n        {\n          \"id\": \"462129d4c6fe441484477d70a6d57e65\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ffcaca766a5148b1874a9b52acef4592\",\n          \"target\": \"59b8aa46879743f7b8f4e84295210dc4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   if (vaContext.catalog_builder_preview)\\n      return true;\\n   return false;\\n})()\\n\"\n          },\n          \"label\": \"Preview\"\n        },\n        {\n          \"id\": \"0b8c6688ecc8422f9dd9315a66c17967\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"bd81452a9a1b46bba0dc8e99ac7537ac\",\n          \"target\": \"c7adfd19133a4c649d6698c86ae9020c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"submit_producer=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Submit Now\"\n        },\n        {\n          \"id\": \"88ac19880d634863aec01fef48af5b8f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c7adfd19133a4c649d6698c86ae9020c\",\n          \"target\": \"2412f77223a04a709fc32c8e75850387\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaContext.catalog_builder_preview)\\n       return false;\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"Submit\"\n        },\n        {\n          \"id\": \"91d8e6787abf48c1b6a401c72e8160a1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c7adfd19133a4c649d6698c86ae9020c\",\n          \"target\": \"59b8aa46879743f7b8f4e84295210dc4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   if (vaContext.catalog_builder_preview)\\n      return true;\\n   return false;\\n})()\\n\"\n          },\n          \"label\": \"Preview\"\n        },\n        {\n          \"id\": \"9976d66c29fe468ea263fcb71a0a88c4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"59b8aa46879743f7b8f4e84295210dc4\",\n          \"target\": \"7f6ae93a22384a068958c171956f4fe8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c926065844ed46729ec94dab555a1b24\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7f6ae93a22384a068958c171956f4fe8\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e9a26294d65847e49d65d286d5af02ae\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d83ad8b6307945b1b04263ffbb62443b\",\n          \"target\": \"8cefb357d56842a3b31cc3c083a62a74\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cc1c22febe8044d6b28971a400d416c2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8cefb357d56842a3b31cc3c083a62a74\",\n          \"target\": \"1982378d14e14ebaa9ed9d0276f081cb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.upload_attachmentISNOTEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Attachment uploaded\"\n        },\n        {\n          \"id\": \"21569982c5de466caacc81663ce36f1f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8cefb357d56842a3b31cc3c083a62a74\",\n          \"target\": \"54a0cb0947934f549dfd92844411b3c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.upload_attachmentISEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Attachment skipped\"\n        },\n        {\n          \"id\": \"206d3c40ec324e9f96bedc418f66ddc7\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"f53349b2dd384eb887feff0287cecbf5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 32;\\n})()\\n\"\n          },\n          \"label\": \"Rich Text Label Question\"\n        },\n        {\n          \"id\": \"70cde711379b4042971cb08f2a047378\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f53349b2dd384eb887feff0287cecbf5\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a33cc4a6aaa14b4ca3936ef4c6aeb510\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"target\": \"bc8ca9598b0d4dadbf7f8e72a04f4353\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n     var itemJson = JSON.parse(vaVars.itemJSON);\\n    var qIndex = parseInt(vaVars.qIndex);\\n    //qIndex is -1 initially, we reset this before search again step \\n\\n    do {\\n        qIndex++;\\n        var question = itemJson.variables[qIndex];\\n    }\\n    while(question && (!question.visible || question.readonly || question.sys_readonly));\\n\\n    if (question) {\\n        vaVars.qIndex = qIndex;\\n        return true;\\n    }\\n    return false;\\n})()\"\n          },\n          \"label\": \"Questions Left\"\n        },\n        {\n          \"id\": \"8336da010e2c49ecb39677d1d8645e98\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bc8ca9598b0d4dadbf7f8e72a04f4353\",\n          \"target\": \"cd0f50d0171b474ebbaea7e27fdf2932\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"41ffb0afb18447539016fc5865622f5e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"cd0f50d0171b474ebbaea7e27fdf2932\",\n          \"target\": \"0df892dd8ce940be81dbdcadbcf584ff\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c717d599d5ee4a93a8d62ee610fe94a4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0df892dd8ce940be81dbdcadbcf584ff\",\n          \"target\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.proceed_with_default=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Do not proceed with default value\"\n        },\n        {\n          \"id\": \"a8f225243c8c4629bdd138b55828797a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0df892dd8ce940be81dbdcadbcf584ff\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.proceed_with_default=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Proceed with default value\"\n        },\n        {\n          \"id\": \"ca761a998e61458aac8d5b0ca6f70cb8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"dce2fd2f9aea4077bf04b1ba6ac992a8\",\n          \"target\": \"a6dc56d1942d4b66825f02d245edc6d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bdd66e36fa614013ab3030a2f1da3d35\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a6dc56d1942d4b66825f02d245edc6d4\",\n          \"target\": \"8251855bc8dc431697812132c644503b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.show_end_state_card=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"24 Show end state card?\",\n          \"toNode\": \"8251855bc8dc431697812132c644503b\",\n          \"toEdge\": \"bdd66e36fa614013ab3030a2f1da3d35\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"2077f9a768754a01a614a527e953c60f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2cc08096b30f45b0827119c3b5f5fa42\",\n          \"target\": \"27123440478c41c49eac84d738a843c2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9163b311cd7541559a1f5a432e1824e2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"27123440478c41c49eac84d738a843c2\",\n          \"target\": \"569ccaedd78340979feca86682affcbe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\\n    return type === 2 || type === 6 || type === 16;\\n})()\"\n          },\n          \"label\": \"Text Type\"\n        },\n        {\n          \"id\": \"b33c741574dd42a4859391363e2ac662\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"27123440478c41c49eac84d738a843c2\",\n          \"target\": \"699922b57f0e404eae6f939bb9ea7bad\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 26;\\n})()\\n\"\n          },\n          \"label\": \"Email Type\"\n        },\n        {\n          \"id\": \"c526457ec29d4ed7ab79901ff22b12c4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"27123440478c41c49eac84d738a843c2\",\n          \"target\": \"805acb1d5a76490283d21adee11ace8d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 28;\\n})()\\n\"\n          },\n          \"label\": \"IP Address Type\"\n        },\n        {\n          \"id\": \"667b38fb082842d1ad250edb463970f0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"27123440478c41c49eac84d738a843c2\",\n          \"target\": \"de355525a3004003ba2d40597493a01d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 27;\\n})()\\n\"\n          },\n          \"label\": \"URL Type\"\n        },\n        {\n          \"id\": \"7ecc083aa28c4fc8b3370008b26d997c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"a1846ce5007045088d91003fdeb5f70e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\\n    return type === 1 || type === 3 || type === 4 || type === 5 || type === 7 || type === 18 || type === 22;\\n})()\\n\"\n          },\n          \"label\": \"Choice or Checkbox Question\"\n        },\n        {\n          \"id\": \"156841d510e7470faba8a24850b69dce\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a1846ce5007045088d91003fdeb5f70e\",\n          \"target\": \"bfa0a72ef56345f78e51e37f289d2962\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !(vaContext.deviceType === \\\"mweb\\\");\\n})()\\n\"\n          },\n          \"label\": \"Other Channels\"\n        },\n        {\n          \"id\": \"26cbdded103f4dfba96fe9e34bb08c2a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bfa0a72ef56345f78e51e37f289d2962\",\n          \"target\": \"2f13545e7aff44fea92c262a72de2f10\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0435a27ec194467f9883053008f7dd93\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2f13545e7aff44fea92c262a72de2f10\",\n          \"target\": \"f9124c93df3c4727a0cab5a33d507c82\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_choice_other_channels.getValue() === \\\"prev\\\";\\n})()\\n\"\n          },\n          \"label\": \"Question Choice Prev\"\n        },\n        {\n          \"id\": \"140cfe88ef0b4b16aabb236091b0852e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f9124c93df3c4727a0cab5a33d507c82\",\n          \"target\": \"bfa0a72ef56345f78e51e37f289d2962\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"779bff352f5d4dac86134d4d459d00ea\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2f13545e7aff44fea92c262a72de2f10\",\n          \"target\": \"7fff18e168564d0d8bc3e955abd96328\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_choice_other_channels.getValue() === \\\"next\\\";\\n})()\\n\"\n          },\n          \"label\": \"Question Choice Next\"\n        },\n        {\n          \"id\": \"01725fa189ad407bb65b6a510d86eef4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7fff18e168564d0d8bc3e955abd96328\",\n          \"target\": \"bfa0a72ef56345f78e51e37f289d2962\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"360bb8ed27344188995deee2423c88ba\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2f13545e7aff44fea92c262a72de2f10\",\n          \"target\": \"a5d25e2774c749c7bdafb0902e5a2c69\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var valuePicked = vaInputs.question_choice_other_channels.getValue();\\n    var condition = valuePicked !== 'next' && valuePicked !== 'prev';\\n    if (condition) {\\n        vaVars.count = 0;\\n        vaVars.index = 0;\\n    }\\n    return condition;\\n})();\"\n          },\n          \"label\": \"Question Choice Chosen\"\n        },\n        {\n          \"id\": \"9bed2eb32ece4f5fbc4ace0d108b2b23\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a5d25e2774c749c7bdafb0902e5a2c69\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4df71503b01d49929276552fe3a98e2f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"13f599b596ac4c52b36e610ec1364786\",\n          \"target\": \"03dc98604b2743a89972102a427acdab\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 8;\\n})()\"\n          },\n          \"label\": \"Reference Question\"\n        },\n        {\n          \"id\": \"639ffacb06c8420597c7a3c23d06bc88\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"03dc98604b2743a89972102a427acdab\",\n          \"target\": \"a8757a988a2946a885eb9e8fac4a36e6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaContext.deviceType === \\\"mweb\\\";\\n})()\\n\"\n          },\n          \"label\": \"Mobile/Web Client\"\n        },\n        {\n          \"id\": \"9bcdd2d2312f4279b667c1aa30a4149e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"03dc98604b2743a89972102a427acdab\",\n          \"target\": \"68d06c7a6fad43488621e8ba2d9b72cd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !(vaContext.deviceType === \\\"mweb\\\");\\n})()\"\n          },\n          \"label\": \"Other Channels\"\n        },\n        {\n          \"id\": \"2b989ef8b7ea45d2bcaf455d5463cdff\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"68d06c7a6fad43488621e8ba2d9b72cd\",\n          \"target\": \"d705fe0d136845f1a0a580b3a319a6a8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8ec075e84f3e47739529ef9a9f1a552f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d705fe0d136845f1a0a580b3a319a6a8\",\n          \"target\": \"c39abbdd9d9048ebac88fa462369e4d8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"caea77aed0284ef9863bbb981e454ec7\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c39abbdd9d9048ebac88fa462369e4d8\",\n          \"target\": \"567ecb8c7e69414197b590e62fc96ffa\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_reference_other_channels.getValue() === \\\"prev\\\";\\n})()\\n\"\n          },\n          \"label\": \"Question Reference Prev\"\n        },\n        {\n          \"id\": \"227b5ad325554fe3bffa09808b3aa416\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"567ecb8c7e69414197b590e62fc96ffa\",\n          \"target\": \"d705fe0d136845f1a0a580b3a319a6a8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bafc0a47d577404ca49a85ce5e455277\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c39abbdd9d9048ebac88fa462369e4d8\",\n          \"target\": \"851e1675b771476983be9d9e9a335088\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.question_reference_other_channels.getValue() === \\\"next\\\";\\n})()\\n\"\n          },\n          \"label\": \"Question Reference Next\"\n        },\n        {\n          \"id\": \"0a9c54efbb384e67a551a54f961e7a95\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"851e1675b771476983be9d9e9a335088\",\n          \"target\": \"d705fe0d136845f1a0a580b3a319a6a8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"beb61aee37ea45d39f9f4213b48fec78\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c39abbdd9d9048ebac88fa462369e4d8\",\n          \"target\": \"ca4281b23e314b0c84c95d012d8a9f0a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var valuePicked = vaInputs.question_reference_other_channels.getValue();\\n    var chosenCondition = valuePicked && valuePicked !== 'next' && valuePicked !== 'prev' && valuePicked !== 'search';\\n    var skippedCondition = vaVars.no_records_found === \\\"false\\\" && !valuePicked;\\n    if (chosenCondition || skippedCondition) {\\n        vaVars.count = 0;\\n        vaVars.index = 0;\\n    }\\n    \\n    return chosenCondition || skippedCondition;\\n})();\"\n          },\n          \"label\": \"Question Reference Chosen/Skipped\"\n        },\n        {\n          \"id\": \"7a4e884b32564d96b7d70ec004492d0b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c39abbdd9d9048ebac88fa462369e4d8\",\n          \"target\": \"68d06c7a6fad43488621e8ba2d9b72cd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var valuePicked = vaInputs.question_reference_other_channels.getValue();\\n    var condition = (vaVars.no_records_found === \\\"true\\\") || valuePicked === \\\"search\\\";\\n    if (condition) {\\n        vaVars.count = 0;\\n        vaVars.index = 0;\\n    }\\n    return condition;\\n})()\\n\"\n          },\n          \"label\": \"Search Question Reference\"\n        },\n        {\n          \"id\": \"951a49bd5e964068867c344e5704b1a1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a8757a988a2946a885eb9e8fac4a36e6\",\n          \"target\": \"ca4281b23e314b0c84c95d012d8a9f0a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"463fd979b1f14afc8de6b06748c2e95d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ca4281b23e314b0c84c95d012d8a9f0a\",\n          \"target\": \"16a1a697635b49049011bfb4b7300c06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fd29eff0bb374eb99cb2c782603ee20c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a6dc56d1942d4b66825f02d245edc6d4\",\n          \"target\": \"f7d3a19c5a144a6692fa0392fbc42601\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.show_end_state_card=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\",\n          \"fromNode\": \"24 Show end state card?\",\n          \"toNode\": \"8251855bc8dc431697812132c644503b\",\n          \"toEdge\": \"fd29eff0bb374eb99cb2c782603ee20c\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"0fb6e757db87473e8efca7d63b3449d2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"767c818240c34396a261e09b5c0e4960\",\n          \"target\": \"207e1d9738824bf8b50999392aa602e0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !!vaVars.isValidCatItem;\\n})()\\n\"\n          },\n          \"label\": \"Valid Catalog Item\",\n          \"fromNode\": \"3 Catalog item validity check\",\n          \"toNode\": \"207e1d9738824bf8b50999392aa602e0\",\n          \"toEdge\": \"0fb6e757db87473e8efca7d63b3449d2\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"8b1757a07dcd4cdcb925d22a7a0520e0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"767c818240c34396a261e09b5c0e4960\",\n          \"target\": \"088c5a499e1444b38835ff2db8919544\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.isValidCatItem;\\n})()\\n\"\n          },\n          \"label\": \"Invalid Catalog Item\",\n          \"fromNode\": \"3 Catalog item validity check\",\n          \"toNode\": \"088c5a499e1444b38835ff2db8919544\",\n          \"toEdge\": \"8b1757a07dcd4cdcb925d22a7a0520e0\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"ee1c014039fb4fc5976dd98463109796\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"df79c5242c244f1dab851ef7285d517f\",\n          \"target\": \"8f1445841a2b4402988276c2a26946d5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dd4700c577ce4ba8b928e1710f6c0431\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8f1445841a2b4402988276c2a26946d5\",\n          \"target\": \"767c818240c34396a261e09b5c0e4960\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e8d98301b2bd4060aad028c8d241cd25\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f33eca4d29b24a16a32705fd29535c44\",\n          \"target\": \"4758ce4d476d46728a411ec16124d7e5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5021376d5d38401e83d9571f529f3b22\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4758ce4d476d46728a411ec16124d7e5\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n     var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n     var json = new JSON();\\n\\n     return !((json.getKeys(quesJson.field_info_messages).length > 0) || (json.getKeys(quesJson.field_warn_messages).length > 0)\\n     || (json.getKeys(quesJson.field_error_messages).length > 0));\\n})()\\n\"\n          },\n          \"label\": \"Has no field messages\",\n          \"fromNode\": \"93 Decision\",\n          \"toNode\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"toEdge\": \"5021376d5d38401e83d9571f529f3b22\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"3588b36ff60941cc91af9ec3a925757f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4758ce4d476d46728a411ec16124d7e5\",\n          \"target\": \"6a90246af7eb400eb4864c65f1814e8a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n     var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n     var json = new JSON();\\n\\n     return ((json.getKeys(quesJson.field_info_messages).length > 0) ||\\n      (json.getKeys(quesJson.field_warn_messages).length > 0) || \\n      (json.getKeys(quesJson.field_error_messages).length > 0));\\n})()\\n\"\n          },\n          \"label\": \"Has Field info and warning messages\"\n        },\n        {\n          \"id\": \"a87c29956deb45a2bed36e2066de809d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6a90246af7eb400eb4864c65f1814e8a\",\n          \"target\": \"9c92ace1fa8245c4bfa429be03bf1c56\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"19e3d269ba4b4d71b5042b823855ccf1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9c92ace1fa8245c4bfa429be03bf1c56\",\n          \"target\": \"677c1ab79d384e7fb39a0f9a01127016\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.change_response=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"true\",\n          \"fromNode\": \"95 Decision\",\n          \"toNode\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"toEdge\": \"19e3d269ba4b4d71b5042b823855ccf1\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"f5f73eee325f4ff68503497dcd696eef\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"677c1ab79d384e7fb39a0f9a01127016\",\n          \"target\": \"b83a3b7e4d694dea99a76acd529af6f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c198e35dd6b04108a2692897fbdb153b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"27123440478c41c49eac84d738a843c2\",\n          \"target\": \"a1846ce5007045088d91003fdeb5f70e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 7;\\n})()\\n\"\n          },\n          \"label\": \"Checkbox Type\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"d96cb7476e9a411d9217a326591f0d9e\": {\n      \"id\": \"d96cb7476e9a411d9217a326591f0d9e\",\n      \"name\": \"catalog_item_id\",\n      \"label\": \"Catalog_item_id\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"df79c5242c244f1dab851ef7285d517f\",\n      \"isHidden\": false\n    },\n    \"ac6a466540e14e3fba2bc95a5031ff25\": {\n      \"id\": \"ac6a466540e14e3fba2bc95a5031ff25\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"itemJSON\",\n      \"label\": \"itemJSON\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"25f7a4b63ca646c9894f4faf0df05bbf\": {\n      \"id\": \"25f7a4b63ca646c9894f4faf0df05bbf\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"itemName\",\n      \"label\": \"itemName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1e4f5f6d535c4008a8603791f283bcb5\": {\n      \"id\": \"1e4f5f6d535c4008a8603791f283bcb5\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"record_id\",\n      \"label\": \"record_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"2e0982b3a9a44432a3f73b10c6baa16b\": {\n      \"id\": \"2e0982b3a9a44432a3f73b10c6baa16b\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"record_table\",\n      \"label\": \"record_table\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9cab67ed47ce436bb12581ee7ceefb00\": {\n      \"id\": \"9cab67ed47ce436bb12581ee7ceefb00\",\n      \"name\": \"proceed\",\n      \"label\": \"Proceed\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"bd3466c304de408183ccfc9dcd0bcb19\",\n      \"isHidden\": false\n    },\n    \"6ae91a3e02b745a49360070a47f62e04\": {\n      \"id\": \"6ae91a3e02b745a49360070a47f62e04\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"-1\"\n      },\n      \"name\": \"qIndex\",\n      \"label\": \"qIndex\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1efdcf2f469443bab274d33fd859ba49\": {\n      \"id\": \"1efdcf2f469443bab274d33fd859ba49\",\n      \"name\": \"submit_producer\",\n      \"label\": \"Submit Producer\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"03ddb6e3316247e1a29ee3e88693b877\",\n      \"isHidden\": false\n    },\n    \"a9b0f968f69d4ba2abc33a55db96f7bd\": {\n      \"id\": \"a9b0f968f69d4ba2abc33a55db96f7bd\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"7\"\n      },\n      \"name\": \"limit\",\n      \"label\": \"limit\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d33dd0303343465cba5100f17027aaa6\": {\n      \"id\": \"d33dd0303343465cba5100f17027aaa6\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"count\",\n      \"label\": \"count\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"11b4358c95c64540a372ef323b4cfb1a\": {\n      \"id\": \"11b4358c95c64540a372ef323b4cfb1a\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"index\",\n      \"label\": \"index\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"ee4278e027464dbc9047276cfda4b036\": {\n      \"id\": \"ee4278e027464dbc9047276cfda4b036\",\n      \"name\": \"order_item\",\n      \"label\": \"Order Item\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"56988cc5a07a413c951e653967010fed\",\n      \"isHidden\": false\n    },\n    \"d679323216e54589b81e8c5b3229dcb8\": {\n      \"id\": \"d679323216e54589b81e8c5b3229dcb8\",\n      \"name\": \"question_date\",\n      \"label\": \"Question Date\",\n      \"varType\": \"date_time\",\n      \"category\": \"vaInputs\",\n      \"mode\": \"date\",\n      \"nodeId\": \"5d527818c230458e9568ae597f0a9978\",\n      \"isHidden\": false\n    },\n    \"29207fbe55e844c1aaf7bac82f8b30ac\": {\n      \"id\": \"29207fbe55e844c1aaf7bac82f8b30ac\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"validation_message\",\n      \"label\": \"validation_message\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"49591097b4f9403ebc5d93ad049007f0\": {\n      \"id\": \"49591097b4f9403ebc5d93ad049007f0\",\n      \"name\": \"question_text\",\n      \"label\": \"Question Text\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"secure\": false,\n      \"encryptionSalt\": {\n        \"value\": \"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"nodeId\": \"569ccaedd78340979feca86682affcbe\",\n      \"isHidden\": false\n    },\n    \"e5e78bba2e454895a9f7de70d39027b0\": {\n      \"id\": \"e5e78bba2e454895a9f7de70d39027b0\",\n      \"name\": \"question_reference\",\n      \"label\": \"Question Reference\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"a8757a988a2946a885eb9e8fac4a36e6\",\n      \"isHidden\": false\n    },\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"40ddfd5f211f46adbb485c0c2b05ff95\": {\n      \"id\": \"40ddfd5f211f46adbb485c0c2b05ff95\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"request_for\",\n      \"label\": \"request_for\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"dc4af802dc2f47c4bbeccef60a0887c3\": {\n      \"id\": \"dc4af802dc2f47c4bbeccef60a0887c3\",\n      \"name\": \"question_choice\",\n      \"label\": \"Question Choice\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"d4ae63da950140f0b6ae1afa41ed3d69\",\n      \"isHidden\": false\n    },\n    \"c964d5c4ce17414cb95fe1bf03318b7e\": {\n      \"id\": \"c964d5c4ce17414cb95fe1bf03318b7e\",\n      \"name\": \"question_date_time\",\n      \"label\": \"Question Date Time\",\n      \"varType\": \"date_time\",\n      \"category\": \"vaInputs\",\n      \"mode\": \"date_time\",\n      \"nodeId\": \"9857784602ba45daa36362f8081f3f78\",\n      \"isHidden\": false\n    },\n    \"a9d149d98f8c4c5ebede92004778e811\": {\n      \"id\": \"a9d149d98f8c4c5ebede92004778e811\",\n      \"name\": \"question_requested_for\",\n      \"label\": \"Question Requested For\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"2a3e1c9302b7463199467b476dcc5058\",\n      \"isHidden\": false\n    },\n    \"ebbb4a512b184021b572be61b0736b0b\": {\n      \"id\": \"ebbb4a512b184021b572be61b0736b0b\",\n      \"name\": \"search_requested_for\",\n      \"label\": \"Search Requested For\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"secure\": false,\n      \"encryptionSalt\": {\n        \"value\": \"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"nodeId\": \"f145c35d855347fa8375ede73773b057\",\n      \"isHidden\": false\n    },\n    \"43b4de58879f4de19d12c9edf4595b3d\": {\n      \"id\": \"43b4de58879f4de19d12c9edf4595b3d\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return false;\\n})()\\n\"\n      },\n      \"name\": \"canView\",\n      \"label\": \"canView\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a6e7b01c1d1e46a29b5e25666374fcc5\": {\n      \"id\": \"a6e7b01c1d1e46a29b5e25666374fcc5\",\n      \"name\": \"request_for_another_user\",\n      \"label\": \"Request For Another User\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"be0f5328e06a4fdb8663050d29f649a1\",\n      \"isHidden\": false\n    },\n    \"f874ee6d91c945ed8e77457a6b3d59e5\": {\n      \"id\": \"f874ee6d91c945ed8e77457a6b3d59e5\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '14,15,17,21,23,25,29,30';\\n})()\\n\"\n      },\n      \"name\": \"unsupportedVarTypes\",\n      \"label\": \"unsupportedVarTypes\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d0e02123b54944f19a7fc9cfc1785b11\": {\n      \"id\": \"d0e02123b54944f19a7fc9cfc1785b11\",\n      \"name\": \"question_email\",\n      \"label\": \"Question Email\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"secure\": false,\n      \"encryptionSalt\": {\n        \"value\": \"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"nodeId\": \"699922b57f0e404eae6f939bb9ea7bad\",\n      \"isHidden\": false\n    },\n    \"d35b1e93084d4f8390bc356383961ada\": {\n      \"id\": \"d35b1e93084d4f8390bc356383961ada\",\n      \"name\": \"question_ip_address\",\n      \"label\": \"Question IP Address\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"secure\": false,\n      \"encryptionSalt\": {\n        \"value\": \"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"nodeId\": \"805acb1d5a76490283d21adee11ace8d\",\n      \"isHidden\": false\n    },\n    \"3951531a4d754d3f83a6cae37e53ae92\": {\n      \"id\": \"3951531a4d754d3f83a6cae37e53ae92\",\n      \"name\": \"question_url\",\n      \"label\": \"Question URL\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"secure\": false,\n      \"encryptionSalt\": {\n        \"value\": \"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"nodeId\": \"de355525a3004003ba2d40597493a01d\",\n      \"isHidden\": false\n    },\n    \"d3131dcb6d4243858d0ff60ba07588c6\": {\n      \"id\": \"d3131dcb6d4243858d0ff60ba07588c6\",\n      \"name\": \"add_attachment\",\n      \"label\": \"Add Attachment\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"7233865f890743f69ab999234a25ad3e\",\n      \"isHidden\": false\n    },\n    \"15e48e7ffe144828980d41225306d557\": {\n      \"id\": \"15e48e7ffe144828980d41225306d557\",\n      \"name\": \"upload_attachment\",\n      \"label\": \"Upload Attachment\",\n      \"varType\": \"file\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"d83ad8b6307945b1b04263ffbb62443b\",\n      \"isHidden\": false\n    },\n    \"ff738c3df8204d0984a8dddb00dfcbe0\": {\n      \"id\": \"ff738c3df8204d0984a8dddb00dfcbe0\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"media_links_form_attachment\",\n      \"label\": \"media_links_form_attachment\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b5b51b3b069f4faa8cd2c87cf9fcc097\": {\n      \"id\": \"b5b51b3b069f4faa8cd2c87cf9fcc097\",\n      \"name\": \"add_more\",\n      \"label\": \"Add More\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"b9f517e461df4167a3826bf9fa16e638\",\n      \"isHidden\": false\n    },\n    \"ada76ae131be4767832c44a0020aa739\": {\n      \"id\": \"ada76ae131be4767832c44a0020aa739\",\n      \"name\": \"question_attachment\",\n      \"label\": \"Question Attachment\",\n      \"varType\": \"file\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"11dc7c8547e9400b87f48a7c394589fd\",\n      \"isHidden\": false\n    },\n    \"e41adc12f2bf498d9937ad6c1d05c844\": {\n      \"id\": \"e41adc12f2bf498d9937ad6c1d05c844\",\n      \"name\": \"execute_contextual_search\",\n      \"label\": \"Execute_contextual_search\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"df79c5242c244f1dab851ef7285d517f\",\n      \"isHidden\": false\n    },\n    \"d77c358c72074a6c941a40b1e7ffbd34\": {\n      \"id\": \"d77c358c72074a6c941a40b1e7ffbd34\",\n      \"name\": \"confirm_catalog_item\",\n      \"label\": \"Confirm_catalog_item\",\n      \"defaultValue\": \"true\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"df79c5242c244f1dab851ef7285d517f\",\n      \"isHidden\": false\n    },\n    \"0e2b62e855e441d2b7387afcca17d774\": {\n      \"id\": \"0e2b62e855e441d2b7387afcca17d774\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"contextualSearchVariable\",\n      \"label\": \"contextualSearchVariable\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"090ca888eaa04416a884cf55f3dfa396\": {\n      \"id\": \"090ca888eaa04416a884cf55f3dfa396\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"2821675a5b30130070e4492c11f91a89\"\n      },\n      \"name\": \"contextualSearchContext\",\n      \"label\": \"contextualSearchContext\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f46db591eeab4e7bb62314a18e2cf383\": {\n      \"id\": \"f46db591eeab4e7bb62314a18e2cf383\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"3\"\n      },\n      \"name\": \"contextualSearchResultLimit\",\n      \"label\": \"contextualSearchResultLimit\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"986b9a4a65294914853db56df17c25a0\": {\n      \"id\": \"986b9a4a65294914853db56df17c25a0\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"contextualSearchIndex\",\n      \"label\": \"contextualSearchIndex\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"e09ecde1e9f24fbcbbe2e6769e527f36\": {\n      \"id\": \"e09ecde1e9f24fbcbbe2e6769e527f36\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"contextualSearchResultJsonString\",\n      \"label\": \"contextualSearchResultJsonString\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1fa546328e454a059b7789b6143d84ce\": {\n      \"id\": \"1fa546328e454a059b7789b6143d84ce\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"contextualSearchResultCount\",\n      \"label\": \"contextualSearchResultCount\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"29c02fc59a2044ea8ac7822eef35baec\": {\n      \"id\": \"29c02fc59a2044ea8ac7822eef35baec\",\n      \"name\": \"did_articles_help\",\n      \"label\": \"Did_articles_help\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"a4cc4c56e01047f7b0d45b9029d17b8d\",\n      \"isHidden\": false\n    },\n    \"b18d103ac6924ced825414c020736723\": {\n      \"id\": \"b18d103ac6924ced825414c020736723\",\n      \"name\": \"proceed_with_default\",\n      \"label\": \"Proceed With Default\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"cd0f50d0171b474ebbaea7e27fdf2932\",\n      \"isHidden\": false\n    },\n    \"8741e0dddb4d47e58f869783457c45aa\": {\n      \"id\": \"8741e0dddb4d47e58f869783457c45aa\",\n      \"name\": \"show_end_state_card\",\n      \"label\": \"Show_end_state_card\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"df79c5242c244f1dab851ef7285d517f\",\n      \"isHidden\": false\n    },\n    \"0cb822556e9c4949adb5cfae1b521ea7\": {\n      \"id\": \"0cb822556e9c4949adb5cfae1b521ea7\",\n      \"name\": \"question_choice_other_channels\",\n      \"label\": \"Question Choice Other Channels\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"bfa0a72ef56345f78e51e37f289d2962\",\n      \"isHidden\": false\n    },\n    \"fc876df4d3dd49229e790bef174eeb5b\": {\n      \"id\": \"fc876df4d3dd49229e790bef174eeb5b\",\n      \"name\": \"search_reference\",\n      \"label\": \"Search Reference\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY1MDQ4NTE4OTAxMCBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"68d06c7a6fad43488621e8ba2d9b72cd\",\n      \"isHidden\": false\n    },\n    \"df9465dd557149c2b574ba78bf0b455a\": {\n      \"id\": \"df9465dd557149c2b574ba78bf0b455a\",\n      \"name\": \"question_reference_other_channels\",\n      \"label\": \"Question Reference Other Channels\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"d705fe0d136845f1a0a580b3a319a6a8\",\n      \"isHidden\": false\n    },\n    \"eabef6d6b7b1482f8ab8a05eed92470f\": {\n      \"id\": \"eabef6d6b7b1482f8ab8a05eed92470f\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return \\\"false\\\";\\n})()\\n\"\n      },\n      \"name\": \"no_records_found\",\n      \"label\": \"no_records_found\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6e0b667d4dbb4459b52c0dcedcf8b5f1\": {\n      \"id\": \"6e0b667d4dbb4459b52c0dcedcf8b5f1\",\n      \"name\": \"change_response\",\n      \"label\": \"Change Response\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"6a90246af7eb400eb4864c65f1814e8a\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"239acd71c3a3330012d1758a7ff57eba","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_design_topic_239acd71c3a3330012d1758a7ff57eba","sys_updated_by":"admin","sys_created_on":"2019-08-29 06:22:27","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"9201727cf5b943b9935325091f320005\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"9201727cf5b943b9935325091f320005\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"9201727cf5b943b9935325091f320005\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"df79c5242c244f1dab851ef7285d517f\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"8251855bc8dc431697812132c644503b\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var itemId = vaInputs.catalog_item_id.getValue();\\n    var itemJSON = new sn_sc.CatalogConversationHelper().getItem(itemId);\\n    vaVars.itemJSON = JSON.stringify(itemJSON);\\n    vaVars.itemName = itemJSON.name;\\n})()\\n\",\"id\":\"207e1d9738824bf8b50999392aa602e0\",\"name\":\"Set Selected Item\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var response = gs.getMessageLang(\\\"Here are some more details about {0}\\\", vaContext.getRequesterLang(), [vaVars.itemName]);\\n    if (itemJson.description) \\n        return response + itemJson.description;\\n\\n    return gs.getMessageLang(\\\"Selected {0}\\\", vaContext.getRequesterLang(), [vaVars.itemName]);\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"73d7ac3ed17042f5b5507bfb1c8b7444\",\"name\":\"Item Description\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"9cab67ed47ce436bb12581ee7ceefb00\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Should I proceed with this?\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"bd3466c304de408183ccfc9dcd0bcb19\",\"name\":\"Proceed\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"Text\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"proceed=false\"},\"id\":\"005008ccdef244fdb9217f8749b118c6\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"proceed=true\"},\"id\":\"c1c20e7636244308bc4c01ef416a3562\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"eab57865501d4f008c88c7a3e41e1f29\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Has VA Support\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return JSON.parse(vaVars.itemJSON).va_support;\\n})()\"},\"id\":\"71a544e150c048f9a103d3f9459c8e8e\",\"name\":\"Has VA Support\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No VA Support\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !JSON.parse(vaVars.itemJSON).va_support;\\n})()\"},\"id\":\"87528e5041c84fcf866256b8028bd877\",\"name\":\"No VA Support\",\"expert_mode\":false}],\"id\":\"9c32307114d54b92acebfe39291b1057\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Item with no variables\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var qIndex = parseInt(vaVars.qIndex);\\n    //qIndex is -1 initially, we reset this before search again step \\n    do{\\n        qIndex++;\\n        var question = itemJson.variables[qIndex];\\n    }\\n    while(question && (!question.visible || question.readonly || question.sys_readonly));\\n\\n    if (question) {\\n       //There are variables that we can show\\n        return false;\\n    }\\n    //No variables that we can show\\n    return true;\\n})()\\n\"},\"id\":\"4e6407fe09bd42a6947d62939ac19408\",\"name\":\"Item with no variables\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Item with variables\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var qIndex = parseInt(vaVars.qIndex);\\n    //qIndex is -1 initially, we reset this before search again step \\n\\n    do{\\n        qIndex++;\\n        var question = itemJson.variables[qIndex];\\n    }\\n    while(question && (!question.visible || question.readonly || question.sys_readonly));\\n\\n    if (question) {\\n       //There are variables that we can show\\n        return true;\\n    }\\n    //No variables  that we can show\\n    return false;\\n})()\\n\"},\"id\":\"a7d389cbf035479da7c98fb3f33d5995\",\"name\":\"Item with variables\",\"expert_mode\":false}],\"id\":\"0b36051dccc04f43bfadae8b91720f27\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:3bffc2a5c363330012d1758a7ff57ebc:node:b29723c02c774bfc92b637faa4f34233:field:0\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"b29723c02c774bfc92b637faa4f34233\",\"name\":\"Start Questions\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Questions Done\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var qIndex = parseInt(vaVars.qIndex);\\n    //qIndex is -1 initially, we reset this before search again step \\n    do{\\n        qIndex++;\\n        var question = itemJson.variables[qIndex];\\n    }\\n    while(question && (!question.visible || question.readonly || question.sys_readonly));\\n\\n    if (question) {\\n       //There are variables that we can show\\n        return false;\\n    }\\n    //No variables that we can show\\n    return true;\\n})()\"},\"id\":\"e18e0706c9384790a54f03d5c3be2c71\",\"name\":\"Questions Done\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Questions Left\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n     var itemJson = JSON.parse(vaVars.itemJSON);\\n    var qIndex = parseInt(vaVars.qIndex);\\n    //qIndex is -1 initially, we reset this before search again step \\n\\n    do {\\n        qIndex++;\\n        var question = itemJson.variables[qIndex];\\n    }\\n    while(question && (!question.visible || question.readonly || question.sys_readonly));\\n\\n    if (question) {\\n        vaVars.qIndex = qIndex;\\n        return true;\\n    }\\n    return false;\\n})()\"},\"id\":\"71ae9547692447daab0121617101208a\",\"name\":\"Questions Left\",\"expert_mode\":false}],\"id\":\"b83a3b7e4d694dea99a76acd529af6f9\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Catalog Item\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    if (itemJson.sys_class_name !== 'sc_cat_item_producer')\\n        return true;\\nreturn false;\\n})()\\n\"},\"id\":\"d3bfd28723394406bc119816800db1d8\",\"name\":\"Catalog Item\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Record Producer\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    if (itemJson.sys_class_name === 'sc_cat_item_producer')\\n        return true;\\nreturn false;\\n})()\\n\"},\"id\":\"b14ef64329fb4e87ad5e9a09cf6b9ab0\",\"name\":\"Record Producer\",\"expert_mode\":false}],\"id\":\"54a0cb0947934f549dfd92844411b3c9\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"1efdcf2f469443bab274d33fd859ba49\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:3bffc2a5c363330012d1758a7ff57ebc:node:03ddb6e3316247e1a29ee3e88693b877:field:Message\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"03ddb6e3316247e1a29ee3e88693b877\",\"name\":\"Submit Producer\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"Text\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Don't Submit\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"submit_producer=\"},\"id\":\"a0521f130911406fbb51177224b2d3bc\",\"name\":\"Don't Submit\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Submit Now\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"submit_producer=true\"},\"id\":\"c436fc0bcecc4a8eb1665cce1489b41f\",\"name\":\"Submit Now\",\"expert_mode\":false}],\"id\":\"bd81452a9a1b46bba0dc8e99ac7537ac\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n   var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variablesObj = {};\\n    var attachmentIds = [];\\n    for (i = 0; i < itemJson.variables.length; i++) {\\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\\n        if (itemJson.variables[i].type === 33)\\n           attachmentIds.push(itemJson.variables[i].value);\\n    }\\n   var reqObject = {\\n       \\\"sysparm_id\\\" : itemJson.sys_id,\\n       \\\"sysparm_action\\\" : 'execute_producer',\\n        \\\"variables\\\" : variablesObj,\\n        \\\"engagement_channel\\\" : 'va'\\n   }\\n   var response = new sn_sc.CatItem(itemJson.sys_id).submitProducer(reqObject);\\n   if (response) {\\n       vaVars.record_id = response.sys_id;\\n       vaVars.record_table = response.table;\\n       // add attachment to record\\n       var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\\n       for (var i in mediaLinksFormAttachment)\\n           vaSystem.attachToRecord(mediaLinksFormAttachment[i], response.table, response.sys_id);\\n\\n       // move attachment variable to record\\n       var gr = new GlideRecord('sys_attachment');\\n       gr.addQuery('sys_id', 'IN' , attachmentIds);\\n       gr.query();\\n       while (gr.next()) {\\n           gr.setValue('table_name', 'ZZ_YY' + response.table);\\n           gr.setValue('table_sys_id', response.sys_id);\\n           gr.update();\\n       }\\n   }\\n})()\\n\",\"id\":\"2412f77223a04a709fc32c8e75850387\",\"name\":\"Insert the Record\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"ee4278e027464dbc9047276cfda4b036\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:3bffc2a5c363330012d1758a7ff57ebc:node:56988cc5a07a413c951e653967010fed:field:Message\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"56988cc5a07a413c951e653967010fed\",\"name\":\"Order Item\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"Text\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Don't Order\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"order_item=\"},\"id\":\"b59edb2987f449e282f0516b0ee0f557\",\"name\":\"Don't Order\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Order Now\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"order_item=true\"},\"id\":\"3802e83d237f400e8c648a68ae6fffc4\",\"name\":\"Order Now\",\"expert_mode\":false}],\"id\":\"019517bc2ee94230a8baada8caa4a155\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var cartname = \\\"vacart_\\\" + gs.generateGUID();\\n    var cartObj = new sn_sc.CartJS(cartname);\\n    cartObj.setRequestedFor(vaVars.request_for);\\n    cartObj.setEngagementChannel('va');\\n\\n    var variablesObj = {};\\n    var attachmentIds = [];\\n    for (i = 0; i < itemJson.variables.length; i++) {\\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\\n        if (itemJson.variables[i].type === 33)\\n           attachmentIds.push(itemJson.variables[i].value);\\n    }\\n        \\n\\n    var reqObj = {\\n        \\\"sysparm_id\\\" : itemJson.sys_id,\\n        \\\"variables\\\" : variablesObj\\n    };\\n    cartObj.addToCart(reqObj);\\n    var requestResponse = cartObj.checkoutCart(true);\\n    var requestGr = new GlideRecord('sc_request');\\n    if (requestGr.get(requestResponse.request_id)) {\\n        var reqItemGr = new GlideRecord('sc_req_item');\\n        reqItemGr.addQuery(\\\"request\\\", requestResponse.request_id);\\n        reqItemGr.query();\\n        if (reqItemGr.next()) {\\n            vaVars.record_id = reqItemGr.getUniqueValue();\\n            vaVars.record_table = 'sc_req_item';\\n            // add attachment to record\\n            var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\\n            for (var i in mediaLinksFormAttachment)\\n                vaSystem.attachToRecord(mediaLinksFormAttachment[i], vaVars.record_table, vaVars.record_id);\\n\\n        }\\n        // move attachment variable to record\\n        var gr = new GlideRecord('sys_attachment');\\n        gr.addQuery('sys_id', 'IN' , attachmentIds);\\n        gr.query();\\n        while (gr.next()) {\\n            gr.setValue('table_name', 'ZZ_YY' + vaVars.record_table);\\n            gr.setValue('table_sys_id', vaVars.record_id);\\n            gr.update();\\n        }\\n    }\\n})()\",\"id\":\"dce2fd2f9aea4077bf04b1ba6ac992a8\",\"name\":\"Checkout Cart\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Question Requested For\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 31)\\n        return true;\\n})()\\n\"},\"id\":\"ea08c94d6852444d856963dca88b69f9\",\"name\":\"Question Requested For\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Date Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 9;\\n})()\\n\"},\"id\":\"54b4201c33a74f1792ad553a552c64f7\",\"name\":\"Date Question\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Text Type Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\\n    return type === 2 || type === 6 || type === 16;\\n})()\"},\"id\":\"8ad6a58f36314752861fc027df762388\",\"name\":\"Text Type Question\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Date-Time Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 10;\\n})()\\n\"},\"id\":\"5730ff80ca214c509bc1aeb9cc058bcd\",\"name\":\"Date-Time Question\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Question Label\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    return question.type === 11 || (question.type === 0 && question._internal_type === \\\"checkbox_container\\\");\\n})()\\n\"},\"id\":\"8db288d48ecc41cc8d4c02ebfb8b8363\",\"name\":\"Question Label\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Container Or Break Questions\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\\n    if (type === 0 || type === 12 || type === 19 || type === 20 || type === 24)\\n        return true;\\n})()\\n\"},\"id\":\"6ce94baf2b3d413e8965f87515af9530\",\"name\":\"Container Or Break Questions\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Unsupported  Variable  Types\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var unSupportedTypes = vaVars.unsupportedVarTypes.split(',');\\n   return unSupportedTypes.indexOf(String(JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type)) !== -1;\\n})()\\n\"},\"id\":\"eac4771cdb0b4e61b892749345f80f89\",\"name\":\"Unsupported  Variable  Types\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Email Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 26;\\n})()\\n\"},\"id\":\"9ede820ce84642f3924d25339d58a589\",\"name\":\"Email Question\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Ip Address Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 28;\\n})()\\n\"},\"id\":\"b009a2c87ef344529658e47c208cb94f\",\"name\":\"Ip Address Question\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"URL Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 27;\\n})()\\n\"},\"id\":\"3253b4573d234c88a9517f7ebd7c124c\",\"name\":\"URL Question\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Question Attachment\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 33;\\n})()\\n\"},\"id\":\"e9bcec8853614cac9d8eda3b103260fe\",\"name\":\"Question Attachment\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Rich Text Label Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 32;\\n})()\\n\"},\"id\":\"32a9b2b9a15044b89f36a814b8750c6b\",\"name\":\"Rich Text Label Question\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Choice or Checkbox Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\\n    return type === 1 || type === 3 || type === 4 || type === 5 || type === 7 || type === 18 || type === 22;\\n})()\\n\"},\"id\":\"12143745f6114ad7bf3204c97bb13a5f\",\"name\":\"Choice or Checkbox Question\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Reference Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 8;\\n})()\"},\"id\":\"a9c4223aa7004d1d87ebeaf21dc1e95c\",\"name\":\"Reference Question\",\"expert_mode\":false}],\"id\":\"13f599b596ac4c52b36e610ec1364786\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"d679323216e54589b81e8c5b3229dcb8\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"5d527818c230458e9568ae597f0a9978\",\"name\":\"Question Date\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"Text\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    vaVars.validation_message = \\\"\\\";\\n    var quesJson = itemJson.variables[vaVars.qIndex];\\n    var type = quesJson.type;\\n    var vaFieldValidator = new global.VAFieldValidator();\\n    // If user doesn't want to proceed with the selected value and skips the question, the variable would be set to \\\"\\\"\\n    var proceedWithDefaultValue = vaInputs.proceed_with_default.getValue();\\n    switch (type) {\\n        case 2:\\n        case 6:\\n        case 16:\\n            var ans = vaInputs.question_text.getValue() || (proceedWithDefaultValue ? quesJson.display_value : \\\"\\\");\\n            if (ans.trim().length === 0 && itemJson.variables[vaVars.qIndex].mandatory) {\\n                vaVars.validation_message = gs.getMessageLang('You must answer this question', vaContext.getRequesterLang());\\n                break;\\n            }\\n            if (type === 2) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_text = \\\"\\\";\\n                break;\\n            }\\n            var q = GlideappQuestion.getQuestion(itemJson.variables[vaVars.qIndex].sys_id);\\n            var validresponse = q.validateRegex(ans);\\n            if (validresponse) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_text = \\\"\\\";\\n            } else if (!validresponse)\\n                vaVars.validation_message = q.getValidationMessage();\\n            break;\\n        case 7:\\n            var ans = (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_choice.getValue()) {\\n                switch (vaInputs.question_choice.getValue()) {\\n                    case \\\"yes\\\":\\n                        ans = \\\"true\\\";\\n                        break;\\n                    case \\\"no\\\":\\n                    case \\\"no_data\\\":\\n                    case \\\"\\\":\\n                        ans = \\\"false\\\";\\n                        break;\\n                    default:\\n                        ans = \\\"false\\\";\\n                        break;\\n                }\\n            }\\n            if (itemJson.variables[vaVars.qIndex].mandatory && ans == \\\"false\\\")\\n                vaVars.validation_message = gs.getMessageLang('It is a mandatory question, you cannot select No as the answer', vaContext.getRequesterLang());\\n            else\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n            vaInputs.question_choice = \\\"\\\";\\n            break;\\n        case 9:\\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date.getDisplayValue() || (proceedWithDefaultValue ? quesJson.display_value : \\\"\\\");\\n            vaInputs.question_date = \\\"\\\";\\n            break;\\n        case 10:\\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date_time.getDisplayValue() || (proceedWithDefaultValue ? quesJson.display_value : \\\"\\\");\\n            vaInputs.question_date_time = \\\"\\\";\\n            break;\\n        case 8:\\n            var ans = (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_reference)\\n                ans = vaInputs.question_reference.getValue();\\n\\n            itemJson.variables[vaVars.qIndex].value = ans;\\n            vaInputs.question_reference = \\\"\\\";\\n            break;\\n        case 1:\\n        case 3:\\n        case 4:\\n        case 5:\\n        case 18:\\n        case 22:\\n            var ans = (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_choice) {\\n                ans = vaInputs.question_choice.getValue();\\n                ans = ans == 'no_data' ? '' : ans;\\n            }\\n            itemJson.variables[vaVars.qIndex].value = ans;\\n            vaInputs.question_choice = \\\"\\\";\\n            break;\\n        case 26:\\n            var ans = vaInputs.question_email.getValue() || (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_email.getValue() || ans == \\\"\\\" || vaFieldValidator.validateEmailAddress(ans)) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_email = \\\"\\\";\\n            } else\\n                vaVars.validation_message = gs.getMessageLang(\\\"This isn't a valid email address\\\", vaContext.getRequesterLang());\\n            break;\\n        case 27:\\n            var ans = vaInputs.question_url.getValue() || (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_url.getValue() || ans == \\\"\\\" || vaFieldValidator.validateURL(ans)) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_url = \\\"\\\";\\n            } else\\n                vaVars.validation_message = gs.getMessageLang(\\\"This isn't a valid URL\\\", vaContext.getRequesterLang());\\n            break;\\n        case 28:\\n            var ans = vaInputs.question_ip_address.getValue() || (proceedWithDefaultValue ? quesJson.value : \\\"\\\");\\n            if (vaInputs.question_ip_address.getValue() || ans == \\\"\\\" || vaFieldValidator.validateIPAddress(ans)) {\\n                itemJson.variables[vaVars.qIndex].value = ans;\\n                vaInputs.question_ip_address = \\\"\\\";\\n            } else\\n                vaVars.validation_message = gs.getMessageLang(\\\"This isn't a valid IP Address\\\", vaContext.getRequesterLang());\\n            break;\\n        case 31:\\n            var ans = quesJson.default_value + '';\\n            if (quesJson.default_value && proceedWithDefaultValue)\\n                vaVars.request_for = ans;\\n            else if (vaVars.request_for)\\n                ans = vaVars.request_for;\\n            itemJson.variables[vaVars.qIndex].value = ans;\\n    }\\n    itemJson.variables[vaVars.qIndex].field_info_messages = {};\\n    itemJson.variables[vaVars.qIndex].field_warn_messages = {};\\n    itemJson.variables[vaVars.qIndex].field_error_messages = {};\\n\\n    if (!vaVars.request_for)\\n        vaVars.request_for = gs.getUserID() + '';\\n    var executeDataLookup = false;\\n    var executeDynamicValue = false;\\n    if (quesJson.data_lookup_ids && quesJson.data_lookup_ids.length != 0)\\n        executeDataLookup = true;\\n    if (itemJson.dynamic_value_variable_config && itemJson.dynamic_value_variable_config[quesJson.sys_id] && itemJson.dynamic_value_variable_config[quesJson.sys_id].length != 0)\\n        executeDynamicValue = true;\\n    if (executeDataLookup || executeDynamicValue) {\\n        var helper = new sn_sc.CatalogConversationHelper();\\n        vaVars.itemJSON = JSON.stringify(helper.executeVariableChangeHandlers(itemJson, quesJson.sys_id, executeDataLookup, executeDynamicValue));\\n    } else\\n        vaVars.itemJSON = JSON.stringify(itemJson);\\n\\n// resetting the value of proceed with default incase validation fails\\n   if (vaVars.validation_message.length !== 0)\\n       vaInputs.proceed_with_default = false;\\n\\n})()\\n\",\"id\":\"16a1a697635b49049011bfb4b7300c06\",\"name\":\"Post Response\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Repeat Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.validation_message.length !== 0;\\n})()\\n\"},\"id\":\"f1572be27dc64588857149bf9f553a98\",\"name\":\"Repeat Question\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Next Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.validation_message.length === 0;\\n})()\\n\"},\"id\":\"f9d9507963664ecfbb671a2dca8dc415\",\"name\":\"Next Question\",\"expert_mode\":false}],\"id\":\"d6cc5e3effbd474bbdef055afb145637\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"2cc08096b30f45b0827119c3b5f5fa42\",\"name\":\"Validation Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n      var singleOutMsg = new sn_cs.SinglePartOutMsg();\\n       singleOutMsg.setTextPart(gs.getMessageLang('{0}. Answer the question again', vaContext.getRequesterLang(), [vaVars.validation_message]));\\n       return singleOutMsg;\\n})()\"},\"secure\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"49591097b4f9403ebc5d93ad049007f0\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":true,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"569ccaedd78340979feca86682affcbe\",\"name\":\"Question Text\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"Text\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"a8757a988a2946a885eb9e8fac4a36e6\",\"name\":\"Question Reference\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"e5e78bba2e454895a9f7de70d39027b0\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variable = itemJson.variables[vaVars.qIndex];\\n\\n    var gr = new GlideRecordSecure(variable.reference);\\n    gr.addQuery(variable.qualifier);\\n    if (variable.ref_ac_order_by)\\n        gr.orderBy(variable.ref_ac_order_by);\\n    else\\n        gr.orderBy(gr.getDisplayName());\\n    \\n    gr.query();\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n    \\n    return options;    \\n})()\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No records found\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variable = itemJson.variables[vaVars.qIndex];\\n\\n    var gr = new GlideRecordSecure(variable.reference);\\n    gr.addQuery(variable.qualifier);\\n    if (variable.ref_ac_order_by)\\n        gr.orderBy(variable.ref_ac_order_by);\\n    else\\n        gr.orderBy(gr.getDisplayName());\\n    \\n    gr.query();\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n    \\n    return options;    \\n})()\"},\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.record_id = \\\"-1\\\";\\n})()\\n\",\"id\":\"088c5a499e1444b38835ff2db8919544\",\"name\":\"Set Record ID to -1\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"d4ae63da950140f0b6ae1afa41ed3d69\",\"name\":\"Question Choice\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"dc4af802dc2f47c4bbeccef60a0887c3\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (question.mandatory)\\n        return false;\\n    if (question.type === 3 && question.value === '' && question.options[0].value !== '') \\n        return true;\\n    if (question.type === 4 && question.value === '')\\n        return true;\\n    return false;\\n})();\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = choices = [];\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.type == 7)\\n        choices = [{ \\\"label\\\": gs.getMessageLang(\\\"Yes\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"yes\\\" }, { \\\"label\\\": gs.getMessageLang(\\\"No\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"no\\\" }];\\n    else\\n        choices = quesJson.options;\\n\\n    if (choices.length > 0 && quesJson.mandatory) {\\n        if (!choices[0].value)\\n            choices.shift();\\n    }\\n\\n    options = choices;\\n    return options;\\n})()\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No records found\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = choices = [];\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.type == 7)\\n        choices = [{ \\\"label\\\": gs.getMessageLang(\\\"Yes\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"yes\\\" }, { \\\"label\\\": gs.getMessageLang(\\\"No\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"no\\\" }];\\n    else\\n        choices = quesJson.options;\\n\\n    if (choices.length > 0 && quesJson.mandatory) {\\n        if (!choices[0].value)\\n            choices.shift();\\n    }\\n\\n    options = choices;\\n    return options;\\n})()\"},\"description\":\"\"},{\"type\":\"InputPrompt\",\"variable_id\":\"c964d5c4ce17414cb95fe1bf03318b7e\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"9857784602ba45daa36362f8081f3f78\",\"name\":\"Question Date Time\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"Text\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"}],\"request_feedback\":true,\"id\":\"9401125e1c1e4da0b381fa0cf07d28ea\",\"name\":\"Question Label\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (question._internal_type == \\\"checkbox_container\\\" && question.label.toUpperCase() == \\\"OPTIONS\\\"\\n        && Array.isArray(question._children) && question._children.length == 1)\\n        return false;\\n    return true;\\n})()\\n\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"}],\"request_feedback\":true,\"id\":\"24d9573a895a4115ac6adc4b3d0933aa\",\"name\":\"Container Start Question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.display_title)\\n        return true;\\n})()\\n\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"2a3e1c9302b7463199467b476dcc5058\",\"name\":\"Question Requested For\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"a9d149d98f8c4c5ebede92004778e811\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var count = 0;\\n    var gr = new GlideRecordSecure('sys_user');\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\\n    gr.addQuery(quesJson.qualifier);\\n    gr.orderBy(gr.getDisplayName());\\n    gr.chooseWindow(index, index + limit, true);\\n    gr.query();\\n\\n    var count = gr.getRowCount();\\n    vaVars.count = count;\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n    \\n    if (count > 0) {\\n        options.push({\\n            'value' : 'search',\\n            'label' : gs.getMessageLang('Someone else', vaContext.getRequesterLang())\\n        });\\n    }\\n    return options;    \\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:3bffc2a5c363330012d1758a7ff57ebc:node:2a3e1c9302b7463199467b476dcc5058:field:NoOptionsFoundMessage\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var count = 0;\\n    var gr = new GlideRecordSecure('sys_user');\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\\n    gr.addQuery(quesJson.qualifier);\\n    gr.orderBy(gr.getDisplayName());\\n    gr.chooseWindow(index, index + limit, true);\\n    gr.query();\\n\\n    var count = gr.getRowCount();\\n    vaVars.count = count;\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n    \\n    if (count > 0) {\\n        options.push({\\n            'value' : 'search',\\n            'label' : gs.getMessageLang('Someone else', vaContext.getRequesterLang())\\n        });\\n    }\\n    return options;    \\n})()\\n\"},\"description\":\"\"},{\"type\":\"InputPrompt\",\"variable_id\":\"ebbb4a512b184021b572be61b0736b0b\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Who should I set it to?\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":true,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"f145c35d855347fa8375ede73773b057\",\"name\":\"Search Requested For\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"Text\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Requested For Next\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.question_requested_for.getValue() === 'next';\\n})()\\n\"},\"id\":\"87a3d36f36f9498da2168c6c335395ee\",\"name\":\"Requested For Next\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Search Requested For\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaInputs.question_requested_for.getValue() || vaInputs.question_requested_for.getValue() === 'search';\\n})()\\n\"},\"id\":\"9ff3136842b44939b9b25c7b32730f5e\",\"name\":\"Search Requested For\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Requested For Chosen\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var valuePicked = vaInputs.question_requested_for.getValue();\\n    var condition = valuePicked !== 'next' && valuePicked !== 'prev';\\n    if (condition) {\\n        vaVars.count = 0;\\n        vaVars.index = 0;\\n    }\\n    return condition;\\n})();\"},\"id\":\"3c04fbb2b51c42ec95ad41c2b865cdcc\",\"name\":\"Requested For Chosen\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Requested For Prev\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.question_requested_for.getValue() === 'prev';\\n})()\\n\"},\"id\":\"df02b8bd15db45cb9875289ee87a06ce\",\"name\":\"Requested For Prev\",\"expert_mode\":false}],\"id\":\"4f297e652c8f404483d0f478f57215ef\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var count = parseInt(vaVars.count);\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    if ( index + limit > count )\\n        vaVars.index = 0;\\n    else\\n        vaVars.index = index + limit;\\n})();\",\"id\":\"ca1771b4aefe41a4aef0d82910799470\",\"name\":\"Requested For Next Page\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var item = new sn_sc.CatItem(JSON.parse(vaVars.itemJSON).sys_id);\\n    vaVars.request_for = vaInputs.question_requested_for.getValue() + '';\\n    vaVars.canView = item.isDelegationAllowed(vaVars.request_for);\\n})()\\n\",\"id\":\"b76cd4c81a254855b2dc9b8150c47c06\",\"name\":\"Is Delegation Allowed\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Can View\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.canView;\\n})()\\n\"},\"id\":\"7c76cf2847d54dc9b7bc6e805a158935\",\"name\":\"Can View\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Cannot View\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.canView\\n})()\\n\"},\"id\":\"955e9bee2e6a4a1abc4a9977642933e0\",\"name\":\"Cannot View\",\"expert_mode\":false}],\"id\":\"f809a8503d004c1793d7d29401854a44\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var c = index - limit;\\n    if ( c < 0 ) c = 0;\\n    vaVars.index = c;\\n})();\",\"id\":\"b14dab0c843d4491b1908a1d24f4f60e\",\"name\":\"Requested For Previous Page\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"a6e7b01c1d1e46a29b5e25666374fcc5\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"The selected user does not have access to this item. Do you want to request for  someone else?\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"be0f5328e06a4fdb8663050d29f649a1\",\"name\":\"Request For Another User\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"Text\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Request for Another User\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"request_for_another_user=true\"},\"id\":\"1eac9fb983c543c5baf4c07715cea7c0\",\"name\":\"Request for Another User\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"End Conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"request_for_another_user=\"},\"id\":\"a4fe3202393c4527b155c8af770be825\",\"name\":\"End Conversation\",\"expert_mode\":false}],\"id\":\"a4dd39d7cdfc4162a39aea63b5104ca6\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No onChange Policies\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).has_on_change_policies;\\n})()\\n\"},\"id\":\"786f0068eda544c28116aa47be68eb58\",\"name\":\"No onChange Policies\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Has onChange Policies\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return JSON.parse(vaVars.itemJSON).has_on_change_policies;\\n})()\\n\"},\"id\":\"f8b5c5d882e6409da6a9755a39ddbaba\",\"name\":\"Has onChange Policies\",\"expert_mode\":false}],\"id\":\"f868531907f8475b80eee77193907c1c\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n   vaVars.itemJSON = JSON.stringify(new sn_sc.CatalogConversationHelper().runChangePolicies(JSON.parse(vaVars.itemJSON)))\\n})()\\n\",\"id\":\"f33eca4d29b24a16a32705fd29535c44\",\"name\":\"Run OnChange Policies\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"d0e02123b54944f19a7fc9cfc1785b11\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":true,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"699922b57f0e404eae6f939bb9ea7bad\",\"name\":\"Question Email\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"33513d135b1200101f254d3ba881c7d5\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"InputPrompt\",\"variable_id\":\"d35b1e93084d4f8390bc356383961ada\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":true,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"805acb1d5a76490283d21adee11ace8d\",\"name\":\"Question IP Address\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"a860c5945b2200101f254d3ba881c7df\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"InputPrompt\",\"variable_id\":\"3951531a4d754d3f83a6cae37e53ae92\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":true,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"de355525a3004003ba2d40597493a01d\",\"name\":\"Question URL\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"77d8b2935b9200101f254d3ba881c7b9\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Has  No Attachment\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return item.no_attachments === true;\\n})()\\n\"},\"id\":\"a1adc64528e4420e91109a957a993147\",\"name\":\"Has  No Attachment\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Has Attachment\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return item.no_attachments === false;\\n})()\\n\"},\"id\":\"970ea41627644dfcab8e553779bd29cb\",\"name\":\"Has Attachment\",\"expert_mode\":false}],\"id\":\"ffb615404000427783e7a265d333c2b2\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"d3131dcb6d4243858d0ff60ba07588c6\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang('Add attachment?', vaContext.getRequesterLang());\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"7233865f890743f69ab999234a25ad3e\",\"name\":\"Add Attachment\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return !item.mandatory_attachment;\\n})()\\n\"},\"expert_mode\":false,\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return !item.mandatory_attachment && !vaInputs.add_attachment.getValue();\\n})()\\n\"},\"id\":\"1a726bede43844a9bd9128fbb4661e36\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var item = JSON.parse(vaVars.itemJSON);\\n    return item.mandatory_attachment || vaInputs.add_attachment.getValue();\\n})()\\n\"},\"id\":\"24294a3439a843a5bfecfd389bd716d5\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"b769ea57ad464cfd8574adeeb9d0bf9e\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"15e48e7ffe144828980d41225306d557\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang('Upload attachment', vaContext.getRequesterLang());\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var addMore = false;\\n    //when attachment is mandatory, to provide an option to skip add more \\n    if (vaInputs.add_more && vaInputs.add_more.getValue())\\n        addMore = true;\\n        \\n    return !JSON.parse(vaVars.itemJSON).mandatory_attachment || addMore;\\n})()\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"d83ad8b6307945b1b04263ffbb62443b\",\"name\":\"Upload Attachment\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if (!!vaVars.media_links_form_attachment)\\n        vaVars.media_links_form_attachment = vaVars.media_links_form_attachment + ',' + vaInputs.upload_attachment.getValue();\\n    else\\n        vaVars.media_links_form_attachment = vaInputs.upload_attachment.getValue();\\n})()\\n\",\"id\":\"1982378d14e14ebaa9ed9d0276f081cb\",\"name\":\"Add Media Links for Form Attachment\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"b5b51b3b069f4faa8cd2c87cf9fcc097\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang('Add more?', vaContext.getRequesterLang());\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"b9f517e461df4167a3826bf9fa16e638\",\"name\":\"Add More\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"add_more=true\"},\"id\":\"9f8e7576cc6f41eda19f892a9f7e6af2\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"add_more=\"},\"id\":\"b391619d073148e19c4fb78dc030067f\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"fd5059dafba54ec884263be207c53771\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"ada76ae131be4767832c44a0020aa739\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"11dc7c8547e9400b87f48a7c394589fd\",\"name\":\"Question Attachment\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.validation_message = \\\"\\\";\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var quesJson = itemJson.variables[vaVars.qIndex];\\n    var vaUtils = new global.VAUtils();\\n    var arr = vaInputs.question_attachment.getValue().split('/');\\n    var mediaId = arr[arr.length - 1];\\n    var gr = new GlideRecord('sys_cs_media');\\n    gr.addQuery('media_id', mediaId);\\n    gr.query();\\n    if (gr.next()) {\\n        var attachmentId = gr.getValue('sys_attachment_id');\\n        var attachRef = new GlideRecord('sys_attachment');\\n        if (attachRef.get(attachmentId)) {\\n            var file = {\\n                name: attachRef.getValue('file_name'),\\n                size: attachRef.getValue('size_bytes')\\n            };\\n            var allowedExtensions = new Array();\\n            if (quesJson.allow_extension)\\n               allowedExtensions = quesJson.allow_extension.split(';');\\n            var field = {\\n                allowedExtensions: allowedExtensions,\\n                allowedFileSize: quesJson.max_file_size\\n            };\\n            var result = vaUtils.validateAttachment(file, field);\\n            if (result.type == 'success') {\\n                quesJson.value = attachmentId;\\n                vaVars.itemJSON = JSON.stringify(itemJson);\\n                vaInputs.question_attachment.setValue('');\\n            } else\\n                vaVars.validation_message = result.message;\\n        } else \\n            vaVars.validation_message = gs.getMessageLang('Failed to upload the attachment', vaContext.getRequesterLang());\\n    } else \\n        vaVars.validation_message = gs.getMessageLang('Failed to upload the attachment', vaContext.getRequesterLang());\\n})()\\n\",\"id\":\"e31ef9e4ec54417eb9590f00c1a3377a\",\"name\":\"Validate Attachment\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"question_attachmentISNOTEMPTY\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Next Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.validation_message.length === 0;\\n})()\\n\"},\"id\":\"074bb5c3e53e4eebb91bfbedab5fe5ca\",\"name\":\"Next Question\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Repeat Question\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.validation_message.length !== 0;\\n})()\\n\"},\"id\":\"d5321481b6bf4925ac2956bbe341aed7\",\"name\":\"Repeat Question\",\"expert_mode\":false}],\"id\":\"fcdd14f0de7847ceae1affc008d8b0f3\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"1226678091eb488388097f09ccfb5a4d\",\"name\":\"Validation Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n     var singleOutMsg = new sn_cs.SinglePartOutMsg();\\n       singleOutMsg.setTextPart(gs.getMessageLang('{0}. Answer the question again', vaContext.getRequesterLang(), [vaVars.validation_message]));\\n       vaVars.validation_message = \\\"\\\";\\n       return singleOutMsg;\\n})()\\n\"},\"secure\":false},{\"type\":\"Decision\",\"name\":\"Is Record Producer\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n   \\n    if (itemJson.sys_class_name !== 'sc_cat_item_producer') {\\n        return true;\\n    }    \\n    return false;\\n})()\\n\"},\"id\":\"025fdee933674df9bab58ffea28ee95f\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    if (itemJson.sys_class_name === 'sc_cat_item_producer') {\\n        return true;\\n    }    \\n    return false;\\n})()\"},\"id\":\"feecf17f686b48f9ad3a39633987a8ee\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"9e896b67b3114d96ae504430b66716dc\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Execute Contextual Search\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /**\\n     * Topic should pass execute_contextual_search as input if contextual search is required\\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\\n     */\\n    var ans = vaInputs.question_text.getValue();\\n    if(vaInputs.execute_contextual_search == 'false' || ans.trim().length === 0) {\\n        return true;\\n    }\\n    return false;    \\n})()\\n\"},\"id\":\"f1d1698c9c93413ba6787375068e6848\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /**\\n     * Topic should pass execute_contextual_search as input if contextual search is required\\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\\n     */\\n    var ans = vaInputs.question_text.getValue();\\n    if(vaInputs.execute_contextual_search == 'true'  && ans.trim().length !== 0) {\\n        return true;\\n    }\\n    return false;     \\n})()\\n\"},\"id\":\"1da9358f8d854cd2b13e4e96137085a2\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"e14402d6ed324753a8415f09545ff8c2\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\\n    if(gs.nil(vaVars.contextualSearchVariable)) {\\n        var searchConfig = contextualSearch.getContextualSearchVariableAndContext(vaInputs.catalog_item_id);\\n        vaVars.contextualSearchVariable = searchConfig.searchVariable;\\n        vaVars.contextualSearchContext = searchConfig.context;\\n    }\\n    return;\\n})()\\n\",\"id\":\"ac19c7d150354af6b49927f218100a8e\",\"name\":\"Get Search Variable And Context\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Contextual Search Variable ?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if(vaVars.contextualSearchVariable !== quesJson.sys_id) {\\n        return true;\\n    }\\n    return false;\\n})()\"},\"id\":\"4654c30d77f1484289dac73d05dc8c5a\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if(vaVars.contextualSearchVariable === quesJson.sys_id) {\\n        return true;\\n    }\\n    return false;\\n})()\"},\"id\":\"d5d73bc319684469b9744228e0e33f10\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"0cf4021d189347e0906b78ac67d84ad0\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\\n    var response = contextualSearch.search(\\n        vaVars.contextualSearchContext, vaInputs.question_text.getValue(), ''\\n    );\\n    var success = contextualSearch.processSearchResponse(response);\\n    if (!success) {\\n        return;\\n    }  \\n    var relevantSearchResults = contextualSearch.processGeneralResults(response, 20, -2, vaSystem);\\n    vaVars.contextualSearchResultCount = relevantSearchResults.length;\\n    vaVars.contextualSearchResultJsonString = JSON.stringify(relevantSearchResults);\\n    vaVars.contextualSearchIndex = 0;\\n    return;\\n})()\\n\",\"id\":\"842240253fdb4ce8a81f01cfea5396e3\",\"name\":\"Contextual Search\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Did the search return results ?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if(vaVars.contextualSearchResultCount <= 0){\\n        return true;\\n    }\\n    return false;\\n})()\\n\"},\"id\":\"d698dc4d713a46e08218c1f5e90309e1\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if(vaVars.contextualSearchResultCount > 0){\\n        return true;\\n    }\\n    return false;\\n})()\\n\"},\"id\":\"c1038730cfd14fbdbdac907624faa087\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"904620a01a3445c09b2f883c3701d676\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"LinkOutputPrompt\",\"header\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"I found some information that might help you:\\\", vaContext.getRequesterLang())\"},\"label\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"url\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"link_type\":\"multiple\",\"multi_link_script\":\"(function execute(header) {\\n\\tvar contextualSearch = new global.VAGlobalContextualSearchUtil();\\n\\tvar variables = {\\n\\t\\tlimit: vaVars.contextualSearchResultLimit,\\n\\t\\tindex: vaVars.contextualSearchIndex,\\n\\t\\tsearch_result_json_string: vaVars.contextualSearchResultJsonString,\\n\\t\\tportal: ''\\n\\t}\\n\\tvar groupedLinksOutMsg = contextualSearch.getLinks(header, variables, vaSystem, vaContext);\\n\\treturn groupedLinksOutMsg;\\n})(header)\\n\",\"id\":\"5d35c039af7c4631a146c0c60b424b65\",\"name\":\"Display multi-link\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Did Articles Help ?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"did_articles_help=true\"},\"id\":\"c631f60d09a9456b9915ed6811da173a\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"did_articles_help!=true\"},\"id\":\"25b13f1e85d34ab2b0d690cde9cf5567\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"8d07b16788dd46a3ac6086037dc7d758\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"29c02fc59a2044ea8ac7822eef35baec\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Did any of this information resolve your issue?\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"a4cc4c56e01047f7b0d45b9029d17b8d\",\"name\":\"Did Articles Help\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Confirmation Required ?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"confirm_catalog_item=true\"},\"id\":\"13f23b3cb8ff497a93207a676cbbf5b4\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"confirm_catalog_item=false\"},\"id\":\"b79e1b0babea4f46adce9a42802b7521\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"ef70c2e3150f4ff4a4358cd01011f197\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Order\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaContext.catalog_builder_preview)\\n       return false;\\n    return true;\\n})()\\n\"},\"id\":\"d4c3cb3006de46af8253ef8418219f01\",\"name\":\"Order\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Preview\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   if (vaContext.catalog_builder_preview)\\n      return true;\\n   return false;\\n})()\\n\"},\"id\":\"0cd8e75e16544f60bc300ec102689e07\",\"name\":\"Preview\",\"expert_mode\":false}],\"id\":\"ffcaca766a5148b1874a9b52acef4592\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Preview successful\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"59b8aa46879743f7b8f4e84295210dc4\",\"name\":\"Catalog Builder Preview\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Submit\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaContext.catalog_builder_preview)\\n       return false;\\n    return true;\\n})()\\n\"},\"id\":\"cb3eb7116a564f2f8193299bf747db94\",\"name\":\"Submit\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Preview\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   if (vaContext.catalog_builder_preview)\\n      return true;\\n   return false;\\n})()\\n\"},\"id\":\"c585b6a203814130b92290a2a8d2f72a\",\"name\":\"Preview\",\"expert_mode\":false}],\"id\":\"c7adfd19133a4c649d6698c86ae9020c\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Since this was a preview, the request was not submitted\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"7f6ae93a22384a068958c171956f4fe8\",\"name\":\"Catalog Builder Preview Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Attachment uploaded\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"upload_attachmentISNOTEMPTY\"},\"id\":\"d8d6b2a8065b4e94838d2a045fd85a4c\",\"name\":\"Attachment uploaded\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Attachment skipped\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"upload_attachmentISEMPTY\"},\"id\":\"f2723cceb136480e832ce930946d876e\",\"name\":\"Attachment skipped\",\"expert_mode\":false}],\"id\":\"8cefb357d56842a3b31cc3c083a62a74\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"f53349b2dd384eb887feff0287cecbf5\",\"name\":\"Question Rich Text Label\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    var renderedValue = quesJson.display_value ? quesJson.display_value : quesJson.value;\\n    if (quesJson.type == 7) {\\n        renderedValue = quesJson.value == \\\"true\\\" ? \\\"Yes\\\" : \\\"No\\\";\\n    }\\n    return gs.getMessageLang(\\\"<b>{0}</b> was selected as the value for <b>{1}</b>\\\", vaContext.getRequesterLang(), [renderedValue, quesJson.label])\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"bc8ca9598b0d4dadbf7f8e72a04f4353\",\"name\":\"Default Value Acknowledgement \",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.type == 7)\\n        return quesJson.has_default_value;\\n    return quesJson.value ? true : false;\\n})()\\n\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"b18d103ac6924ced825414c020736723\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Do you want to proceed with this value?\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"cd0f50d0171b474ebbaea7e27fdf2932\",\"name\":\"Proceed with Default\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (quesJson.type == 7)\\n        return quesJson.has_default_value;\\n    return quesJson.value ? true : false;\\n})()\\n\"},\"expert_mode\":false,\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Do not proceed with default value\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"proceed_with_default=\"},\"id\":\"88467762ec8f48d185d22f113c1f3cb5\",\"name\":\"Do not proceed with default value\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Proceed with default value\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"proceed_with_default=true\"},\"id\":\"d9d8985c3d384dc097c8baca07d0c44e\",\"name\":\"Proceed with default value\",\"expert_mode\":false}],\"id\":\"0df892dd8ce940be81dbdcadbcf584ff\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Show end state card?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"show_end_state_card=\"},\"id\":\"68c3790308f8431896f9ca79d9a9f106\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"show_end_state_card=true\"},\"id\":\"9cac7b0ca12f46df8f3bfd825215738c\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"a6dc56d1942d4b66825f02d245edc6d4\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Text Type\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\\n    return type === 2 || type === 6 || type === 16;\\n})()\"},\"id\":\"d532a5fcc949456d9d23e17f5f1d282f\",\"name\":\"Text Type\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Email Type\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 26;\\n})()\\n\"},\"id\":\"0a490d4573114389aaa044963025bf29\",\"name\":\"Email Type\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"IP Address Type\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 28;\\n})()\\n\"},\"id\":\"4670754e4bb34a1b8e7900b2a066c68c\",\"name\":\"IP Address Type\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"URL Type\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 27;\\n})()\\n\"},\"id\":\"3adc83353b6b4681a4a71d9737914c92\",\"name\":\"URL Type\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Checkbox Type\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 7;\\n})()\\n\"},\"id\":\"7d1bf2c589884956b39a7ffda3f30bea\",\"name\":\"Checkbox Type\",\"expert_mode\":false}],\"id\":\"27123440478c41c49eac84d738a843c2\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Messaging Channel\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Mobile/Web Client\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaContext.deviceType === \\\"mweb\\\";\\n})()\\n\"},\"id\":\"e35f47ea809b4459b09b0dc93ae73ab6\",\"name\":\"Mobile/Web Client\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Other Channels\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !(vaContext.deviceType === \\\"mweb\\\");\\n})()\\n\"},\"id\":\"53af72522ee0468aa56d9435d404f9d6\",\"name\":\"Other Channels\",\"expert_mode\":false}],\"id\":\"a1846ce5007045088d91003fdeb5f70e\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"bfa0a72ef56345f78e51e37f289d2962\",\"name\":\"Question Choice Other Channels\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"0cb822556e9c4949adb5cfae1b521ea7\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    if (question.mandatory)\\n        return false;\\n    if (question.type === 4 && question.value === '')\\n        return true;\\n    if (question.type === 3 && question.value === '' && question.options[0].value !== '')\\n        return true;\\n    return false;\\n})();\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var options = choices = [];\\n    var count = 0;\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n\\n    if (quesJson.type == 7)\\n        choices = [{ \\\"label\\\": gs.getMessageLang(\\\"Yes\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"yes\\\" }, { \\\"label\\\": gs.getMessageLang(\\\"No\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"no\\\" }];\\n    else\\n        choices = quesJson.options;\\n\\n    if (choices.length > 0 && quesJson.mandatory) {\\n        if (!choices[0].value)\\n            choices.shift();\\n    }\\n    \\n    count = choices.length;\\n    vaVars.count = count;\\n    options = choices.splice(index, limit);\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n    \\n    return options;    \\n})()\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No records found\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var options = choices = [];\\n    var count = 0;\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n\\n    if (quesJson.type == 7)\\n        choices = [{ \\\"label\\\": gs.getMessageLang(\\\"Yes\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"yes\\\" }, { \\\"label\\\": gs.getMessageLang(\\\"No\\\", vaContext.getRequesterLang()), \\\"value\\\": \\\"no\\\" }];\\n    else\\n        choices = quesJson.options;\\n\\n    if (choices.length > 0 && quesJson.mandatory) {\\n        if (!choices[0].value)\\n            choices.shift();\\n    }\\n    \\n    count = choices.length;\\n    vaVars.count = count;\\n    options = choices.splice(index, limit);\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n    \\n    return options;    \\n})()\"},\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Question Choice Prev\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.question_choice_other_channels.getValue() === \\\"prev\\\";\\n})()\\n\"},\"id\":\"a34565248b66475388ea82e52f977bf4\",\"name\":\"Question Choice Prev\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Question Choice Next\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.question_choice_other_channels.getValue() === \\\"next\\\";\\n})()\\n\"},\"id\":\"8197359d971247d799131e7cdd387f36\",\"name\":\"Question Choice Next\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Question Choice Chosen\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var valuePicked = vaInputs.question_choice_other_channels.getValue();\\n    var condition = valuePicked !== 'next' && valuePicked !== 'prev';\\n    if (condition) {\\n        vaVars.count = 0;\\n        vaVars.index = 0;\\n    }\\n    return condition;\\n})();\"},\"id\":\"b8069ac541494dd08c168055949a6bdf\",\"name\":\"Question Choice Chosen\",\"expert_mode\":false}],\"id\":\"2f13545e7aff44fea92c262a72de2f10\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var c = index - limit;\\n    if ( c < 0 ) c = 0;\\n    vaVars.index = c;\\n})();\",\"id\":\"f9124c93df3c4727a0cab5a33d507c82\",\"name\":\"Question Choice Prev Page\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var count = parseInt(vaVars.count);\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    if ( index + limit > count )\\n        vaVars.index = 0;\\n    else\\n        vaVars.index = index + limit;\\n})();\",\"id\":\"7fff18e168564d0d8bc3e955abd96328\",\"name\":\"Question Choice Next Page\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if(vaInputs.question_choice_other_channels) {\\n        vaInputs.question_choice = vaInputs.question_choice_other_channels;\\n        vaInputs.question_choice_other_channels = \\\"\\\";\\n    }\\n})()\",\"id\":\"a5d25e2774c749c7bdafb0902e5a2c69\",\"name\":\"Set Question Choice Value\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Messaging Channel\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Mobile/Web Client\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaContext.deviceType === \\\"mweb\\\";\\n})()\\n\"},\"id\":\"1ef8a273a30640808ca6518c52d44238\",\"name\":\"Mobile/Web Client\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Other Channels\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !(vaContext.deviceType === \\\"mweb\\\");\\n})()\"},\"id\":\"169426a0128b405ba747519da2d00409\",\"name\":\"Other Channels\",\"expert_mode\":false}],\"id\":\"03dc98604b2743a89972102a427acdab\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"fc876df4d3dd49229e790bef174eeb5b\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Enter a value to search\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":true,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"68d06c7a6fad43488621e8ba2d9b72cd\",\"name\":\"Search Reference\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.question_reference_other_channels;\\n})()\\n\"},\"expert_mode\":false,\"formatType\":\"Text\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"d705fe0d136845f1a0a580b3a319a6a8\",\"name\":\"Question Reference Other Channels\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"df9465dd557149c2b574ba78bf0b455a\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n   var response = quesJson.label;\\n   var json = new JSON();\\n   var infoKeys = json.getKeys(quesJson.field_info_messages);\\n   var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n   var errKeys = json.getKeys(quesJson.field_error_messages);\\n   \\n   for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n   }\\n   for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n   }\\n   for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n   }\\n   return response;\\n})()\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\\n})()\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var count = 0;\\n\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variable = itemJson.variables[vaVars.qIndex];\\n    var gr = new GlideRecordSecure(variable.reference);\\n    var displayColumn = gr.getDisplayName();\\n   \\n    gr.addEncodedQuery(displayColumn + 'LIKE' + vaInputs.search_reference.getValue());\\n    gr.addQuery(variable.qualifier);\\n    if (variable.ref_ac_order_by)\\n        gr.orderBy(variable.ref_ac_order_by);\\n    else\\n        gr.orderBy(displayColumn);\\n    \\n    gr.chooseWindow(index, index + limit, true);\\n    gr.query();\\n\\n    var count = gr.getRowCount();\\n    vaVars.count = count;\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n\\n    if (count > 0) {\\n        vaVars.no_records_found = \\\"false\\\"\\n        options.push({\\n            'value' : 'search',\\n            'label' : gs.getMessageLang('Search', vaContext.getRequesterLang())\\n        });\\n    }\\n    else\\n        vaVars.no_records_found = \\\"true\\\";\\n    \\n    return options;    \\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No records found\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var count = 0;\\n\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    var variable = itemJson.variables[vaVars.qIndex];\\n    var gr = new GlideRecordSecure(variable.reference);\\n    var displayColumn = gr.getDisplayName();\\n   \\n    gr.addEncodedQuery(displayColumn + 'LIKE' + vaInputs.search_reference.getValue());\\n    gr.addQuery(variable.qualifier);\\n    if (variable.ref_ac_order_by)\\n        gr.orderBy(variable.ref_ac_order_by);\\n    else\\n        gr.orderBy(displayColumn);\\n    \\n    gr.chooseWindow(index, index + limit, true);\\n    gr.query();\\n\\n    var count = gr.getRowCount();\\n    vaVars.count = count;\\n\\n    while (gr.next()) {\\n        options.push({\\n            \\\"value\\\" : gr.getUniqueValue(),\\n            \\\"label\\\" : gr.getDisplayValue()\\n        });\\n    }\\n\\n    if (index > 0) \\n        options.push({ 'value': 'prev', 'label': gs.getMessageLang('Show previous', vaContext.getRequesterLang())});\\n    if (count > index + limit)\\n        options.push({ 'value': 'next', 'label': gs.getMessageLang('Show more', vaContext.getRequesterLang())});\\n\\n    if (count > 0) {\\n        vaVars.no_records_found = \\\"false\\\"\\n        options.push({\\n            'value' : 'search',\\n            'label' : gs.getMessageLang('Search', vaContext.getRequesterLang())\\n        });\\n    }\\n    else\\n        vaVars.no_records_found = \\\"true\\\";\\n    \\n    return options;    \\n})()\\n\"},\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Question Reference Prev\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.question_reference_other_channels.getValue() === \\\"prev\\\";\\n})()\\n\"},\"id\":\"5a578b5990a3441d956dc7da4a14aa9e\",\"name\":\"Question Reference Prev\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Question Reference Next\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.question_reference_other_channels.getValue() === \\\"next\\\";\\n})()\\n\"},\"id\":\"0c49066fbec2419cae3ea509088199c1\",\"name\":\"Question Reference Next\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Question Reference Chosen/Skipped\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var valuePicked = vaInputs.question_reference_other_channels.getValue();\\n    var chosenCondition = valuePicked && valuePicked !== 'next' && valuePicked !== 'prev' && valuePicked !== 'search';\\n    var skippedCondition = vaVars.no_records_found === \\\"false\\\" && !valuePicked;\\n    if (chosenCondition || skippedCondition) {\\n        vaVars.count = 0;\\n        vaVars.index = 0;\\n    }\\n    \\n    return chosenCondition || skippedCondition;\\n})();\"},\"id\":\"466ac04fe02d424bafcae0e7105d20ed\",\"name\":\"Question Reference Chosen/Skipped\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Search Question Reference\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var valuePicked = vaInputs.question_reference_other_channels.getValue();\\n    var condition = (vaVars.no_records_found === \\\"true\\\") || valuePicked === \\\"search\\\";\\n    if (condition) {\\n        vaVars.count = 0;\\n        vaVars.index = 0;\\n    }\\n    return condition;\\n})()\\n\"},\"id\":\"8412d55855f6464eaa04701906d968eb\",\"name\":\"Search Question Reference\",\"expert_mode\":false}],\"id\":\"c39abbdd9d9048ebac88fa462369e4d8\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    var c = index - limit;\\n    if ( c < 0 ) c = 0;\\n    vaVars.index = c;\\n})();\",\"id\":\"567ecb8c7e69414197b590e62fc96ffa\",\"name\":\"Question Reference Prev Page\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var count = parseInt(vaVars.count);\\n    var index = parseInt(vaVars.index);\\n    var limit = parseInt(vaVars.limit);\\n    if ( index + limit > count )\\n        vaVars.index = 0;\\n    else\\n        vaVars.index = index + limit;\\n})();\",\"id\":\"851e1675b771476983be9d9e9a335088\",\"name\":\"Question Reference Next Page\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if(vaInputs.question_reference_other_channels) {\\n        vaInputs.question_reference = vaInputs.question_reference_other_channels;\\n        vaInputs.question_reference_other_channels = \\\"\\\";\\n    }\\n})()\",\"id\":\"ca4281b23e314b0c84c95d012d8a9f0a\",\"name\":\"Set Question Reference Value\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"End state card for Catalog Request\",\"library_topic_id\":\"0b01391550d30110fa9b861f7d83d7f6\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"record_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.record_id}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"record_table\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.record_table}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[],\"header_card_fields\":[],\"id\":\"f7d3a19c5a144a6692fa0392fbc42601\",\"name\":\"End state card\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Catalog item validity check\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Valid Catalog Item\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !!vaVars.isValidCatItem;\\n})()\\n\"},\"id\":\"4cbd9043a56346b993825534c8886b83\",\"name\":\"Valid Catalog Item\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Invalid Catalog Item\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.isValidCatItem;\\n})()\\n\"},\"id\":\"d9010909fc094f6cab950f5c9af06c19\",\"name\":\"Invalid Catalog Item\",\"expert_mode\":false}],\"id\":\"767c818240c34396a261e09b5c0e4960\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n   var catItemID = vaInputs.catalog_item_id.getValue();\\n   var catItem = GlideappCatalogItem.get(catItemID);\\n   if (catItem == null || !(vaContext.catalog_builder_preview == 'true' || catItem.canView())) {\\n       vaVars.isValidCatItem = false;\\n       return;\\n   }\\n   vaVars.isValidCatItem = true;\\n})()\\n\",\"id\":\"8f1445841a2b4402988276c2a26946d5\",\"name\":\"Validate Catalog Item\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Has no field messages\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n     var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n     var json = new JSON();\\n\\n     return !((json.getKeys(quesJson.field_info_messages).length > 0) || (json.getKeys(quesJson.field_warn_messages).length > 0)\\n     || (json.getKeys(quesJson.field_error_messages).length > 0));\\n})()\\n\"},\"id\":\"d4b8f69ba8524b9c8a7ece1e1d276672\",\"name\":\"Has no field messages\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Has Field info and warning messages\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n     var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n     var json = new JSON();\\n\\n     return ((json.getKeys(quesJson.field_info_messages).length > 0) ||\\n      (json.getKeys(quesJson.field_warn_messages).length > 0) || \\n      (json.getKeys(quesJson.field_error_messages).length > 0));\\n})()\\n\"},\"id\":\"71d24e3ed7e24e7385e9fcc00e2ec664\",\"name\":\"Has Field info and warning messages\",\"expert_mode\":false}],\"id\":\"4758ce4d476d46728a411ec16124d7e5\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"6e0b667d4dbb4459b52c0dcedcf8b5f1\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\\n    var response = quesJson.label;\\n    var json = new JSON();\\n    var infoKeys = json.getKeys(quesJson.field_info_messages);\\n    var warnKeys = json.getKeys(quesJson.field_warn_messages);\\n    var errKeys =  json.getKeys(quesJson.field_error_messages);\\n\\n    for (var j = infoKeys.length - 1; j >= 0; j--) {\\n      response +=  \\\"\\\\n\\\" + gs.getMessageLang(\\\"Info\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_info_messages[infoKeys[j]];\\n    }\\n    for (j = warnKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Warning\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_warn_messages[warnKeys[j]];\\n    }\\n    for (j = errKeys.length - 1; j >= 0; j--) {\\n      response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Error\\\", vaContext.getRequesterLang()) + \\\": \\\" + quesJson.field_error_messages[errKeys[j]];\\n    }\\n    response += \\\"\\\\n\\\" + gs.getMessageLang(\\\"Would you like to change your response?\\\", vaContext.getRequesterLang());\\n    return response;\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"6a90246af7eb400eb4864c65f1814e8a\",\"name\":\"Change Response\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"false\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"change_response=false\"},\"id\":\"723a1797a1414c23a1ac3b51c21c0c26\",\"name\":\"false\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"true\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"change_response=true\"},\"id\":\"611a59a0ba274167be25c997ad97c22c\",\"name\":\"true\",\"expert_mode\":false}],\"id\":\"9c92ace1fa8245c4bfa429be03bf1c56\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    itemJson.variables[vaVars.qIndex].value = \\\"\\\";\\n    itemJson.variables[vaVars.qIndex].field_info_messages = {};\\n    itemJson.variables[vaVars.qIndex].field_warn_messages = {};\\n    itemJson.variables[vaVars.qIndex].field_error_messages = {};\\n    vaVars.itemJSON = JSON.stringify(itemJson);\\n    var qIndex = vaVars.qIndex;\\n    vaVars.qIndex = --qIndex;\\n})()\\n\",\"id\":\"677c1ab79d384e7fb39a0f9a01127016\",\"name\":\"Decrement qIndex and clear value\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"d4ae63da950140f0b6ae1afa41ed3d69\",\"target_node_id\":\"a5d25e2774c749c7bdafb0902e5a2c69\",\"id\":\"dd80acb5f3df45a280ef8c1504148824\"},{\"type\":\"Edge\",\"source_node_id\":\"a1846ce5007045088d91003fdeb5f70e\",\"target_node_id\":\"d4ae63da950140f0b6ae1afa41ed3d69\",\"branch_id\":\"e35f47ea809b4459b09b0dc93ae73ab6\",\"id\":\"f0c2895cad3946a2b00c1170db388563\",\"name\":\"e35f47ea809b4459b09b0dc93ae73ab6\"},{\"type\":\"Edge\",\"source_node_id\":\"9c92ace1fa8245c4bfa429be03bf1c56\",\"target_node_id\":\"b83a3b7e4d694dea99a76acd529af6f9\",\"branch_id\":\"723a1797a1414c23a1ac3b51c21c0c26\",\"id\":\"e751d65d536b433d91359456484e2cab\",\"name\":\"723a1797a1414c23a1ac3b51c21c0c26\"},{\"type\":\"Edge\",\"source_node_id\":\"f7d3a19c5a144a6692fa0392fbc42601\",\"target_node_id\":\"8251855bc8dc431697812132c644503b\",\"id\":\"cf649868e19f4cab80f0b238a5999ad3\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"f145c35d855347fa8375ede73773b057\",\"branch_id\":\"ea08c94d6852444d856963dca88b69f9\",\"id\":\"1fdc521371fc4ac2ba7ff66900718aa2\",\"name\":\"ea08c94d6852444d856963dca88b69f9\"},{\"type\":\"Edge\",\"source_node_id\":\"2412f77223a04a709fc32c8e75850387\",\"target_node_id\":\"a6dc56d1942d4b66825f02d245edc6d4\",\"id\":\"d84737cde6d6447580e9043144076f2a\"},{\"type\":\"Edge\",\"source_node_id\":\"11dc7c8547e9400b87f48a7c394589fd\",\"target_node_id\":\"e31ef9e4ec54417eb9590f00c1a3377a\",\"id\":\"2b4a84e13451442397b39927e2f5a44b\"},{\"type\":\"Edge\",\"source_node_id\":\"1982378d14e14ebaa9ed9d0276f081cb\",\"target_node_id\":\"b9f517e461df4167a3826bf9fa16e638\",\"id\":\"074205ade60041a5a8074627a66d1a91\"},{\"type\":\"Edge\",\"source_node_id\":\"4f297e652c8f404483d0f478f57215ef\",\"target_node_id\":\"ca1771b4aefe41a4aef0d82910799470\",\"branch_id\":\"87a3d36f36f9498da2168c6c335395ee\",\"id\":\"36bf2fbc4d7f4881a293bf6f1c415239\",\"name\":\"87a3d36f36f9498da2168c6c335395ee\"},{\"type\":\"Edge\",\"source_node_id\":\"54a0cb0947934f549dfd92844411b3c9\",\"target_node_id\":\"56988cc5a07a413c951e653967010fed\",\"branch_id\":\"d3bfd28723394406bc119816800db1d8\",\"id\":\"be664a4de3d142cfa4fa5e560aef444a\",\"name\":\"d3bfd28723394406bc119816800db1d8\"},{\"type\":\"Edge\",\"source_node_id\":\"73d7ac3ed17042f5b5507bfb1c8b7444\",\"target_node_id\":\"bd3466c304de408183ccfc9dcd0bcb19\",\"id\":\"12d45221afae4a8cb16b86184c7e6a2e\"},{\"type\":\"Edge\",\"source_node_id\":\"bd3466c304de408183ccfc9dcd0bcb19\",\"target_node_id\":\"eab57865501d4f008c88c7a3e41e1f29\",\"id\":\"b571f10e472f46cd871aa985d5817613\"},{\"type\":\"Edge\",\"source_node_id\":\"eab57865501d4f008c88c7a3e41e1f29\",\"target_node_id\":\"8251855bc8dc431697812132c644503b\",\"branch_id\":\"005008ccdef244fdb9217f8749b118c6\",\"id\":\"e536fb9f3fa848f78c2eff171c934266\",\"name\":\"005008ccdef244fdb9217f8749b118c6\"},{\"type\":\"Edge\",\"source_node_id\":\"eab57865501d4f008c88c7a3e41e1f29\",\"target_node_id\":\"9c32307114d54b92acebfe39291b1057\",\"branch_id\":\"c1c20e7636244308bc4c01ef416a3562\",\"id\":\"358a1bc045884a5794a195fa9829764b\",\"name\":\"c1c20e7636244308bc4c01ef416a3562\"},{\"type\":\"Edge\",\"source_node_id\":\"9c32307114d54b92acebfe39291b1057\",\"target_node_id\":\"0b36051dccc04f43bfadae8b91720f27\",\"branch_id\":\"71a544e150c048f9a103d3f9459c8e8e\",\"id\":\"3816e95d729f480da94d3acd498aee01\",\"name\":\"71a544e150c048f9a103d3f9459c8e8e\"},{\"type\":\"Edge\",\"source_node_id\":\"0b36051dccc04f43bfadae8b91720f27\",\"target_node_id\":\"b83a3b7e4d694dea99a76acd529af6f9\",\"branch_id\":\"4e6407fe09bd42a6947d62939ac19408\",\"id\":\"8ae4de53d15e41acb1d31edcb8f0769f\",\"name\":\"4e6407fe09bd42a6947d62939ac19408\"},{\"type\":\"Edge\",\"source_node_id\":\"0b36051dccc04f43bfadae8b91720f27\",\"target_node_id\":\"b29723c02c774bfc92b637faa4f34233\",\"branch_id\":\"a7d389cbf035479da7c98fb3f33d5995\",\"id\":\"e854162549354ea5bb08b8c61691872e\",\"name\":\"a7d389cbf035479da7c98fb3f33d5995\"},{\"type\":\"Edge\",\"source_node_id\":\"b29723c02c774bfc92b637faa4f34233\",\"target_node_id\":\"b83a3b7e4d694dea99a76acd529af6f9\",\"id\":\"70935b339caa4d9b868757ee1cad69d8\"},{\"type\":\"Edge\",\"source_node_id\":\"54a0cb0947934f549dfd92844411b3c9\",\"target_node_id\":\"03ddb6e3316247e1a29ee3e88693b877\",\"branch_id\":\"b14ef64329fb4e87ad5e9a09cf6b9ab0\",\"id\":\"051144cb4ba84b429d3104b3b516d40a\",\"name\":\"b14ef64329fb4e87ad5e9a09cf6b9ab0\"},{\"type\":\"Edge\",\"source_node_id\":\"03ddb6e3316247e1a29ee3e88693b877\",\"target_node_id\":\"bd81452a9a1b46bba0dc8e99ac7537ac\",\"id\":\"20cfd23d2979423dad8609a072498b2e\"},{\"type\":\"Edge\",\"source_node_id\":\"bd81452a9a1b46bba0dc8e99ac7537ac\",\"target_node_id\":\"8251855bc8dc431697812132c644503b\",\"branch_id\":\"a0521f130911406fbb51177224b2d3bc\",\"id\":\"6e77eded859241339adb104c590436f3\",\"name\":\"a0521f130911406fbb51177224b2d3bc\"},{\"type\":\"Edge\",\"source_node_id\":\"56988cc5a07a413c951e653967010fed\",\"target_node_id\":\"019517bc2ee94230a8baada8caa4a155\",\"id\":\"7168889e76034d37b9383941c3f0881c\"},{\"type\":\"Edge\",\"source_node_id\":\"019517bc2ee94230a8baada8caa4a155\",\"target_node_id\":\"8251855bc8dc431697812132c644503b\",\"branch_id\":\"b59edb2987f449e282f0516b0ee0f557\",\"id\":\"9c0681fb08674c26aeb840668c9e2125\",\"name\":\"b59edb2987f449e282f0516b0ee0f557\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"5d527818c230458e9568ae597f0a9978\",\"branch_id\":\"54b4201c33a74f1792ad553a552c64f7\",\"id\":\"5457b79a3cc74f6381e3a7d91f92fa47\",\"name\":\"54b4201c33a74f1792ad553a552c64f7\"},{\"type\":\"Edge\",\"source_node_id\":\"5d527818c230458e9568ae597f0a9978\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"id\":\"224f8bed61c040d38602b2b92d778d50\"},{\"type\":\"Edge\",\"source_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"target_node_id\":\"d6cc5e3effbd474bbdef055afb145637\",\"id\":\"0bc2a2a690c440c79af860d916b3289e\"},{\"type\":\"Edge\",\"source_node_id\":\"d6cc5e3effbd474bbdef055afb145637\",\"target_node_id\":\"2cc08096b30f45b0827119c3b5f5fa42\",\"branch_id\":\"f1572be27dc64588857149bf9f553a98\",\"id\":\"fed862b7cde74a77a6a8cce1f47141f6\",\"name\":\"f1572be27dc64588857149bf9f553a98\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"569ccaedd78340979feca86682affcbe\",\"branch_id\":\"8ad6a58f36314752861fc027df762388\",\"id\":\"7c6503a268d447d78ae863f57df89350\",\"name\":\"8ad6a58f36314752861fc027df762388\"},{\"type\":\"Edge\",\"source_node_id\":\"9c32307114d54b92acebfe39291b1057\",\"target_node_id\":\"088c5a499e1444b38835ff2db8919544\",\"branch_id\":\"87528e5041c84fcf866256b8028bd877\",\"id\":\"83a0d92ad0bd473f98d130c31f892db7\",\"name\":\"87528e5041c84fcf866256b8028bd877\"},{\"type\":\"Edge\",\"source_node_id\":\"088c5a499e1444b38835ff2db8919544\",\"target_node_id\":\"8251855bc8dc431697812132c644503b\",\"id\":\"f8fb34ff97154d0caea95212bc8df3cc\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"9857784602ba45daa36362f8081f3f78\",\"branch_id\":\"5730ff80ca214c509bc1aeb9cc058bcd\",\"id\":\"b41bbd26a8864db68f82ea212716bcbc\",\"name\":\"5730ff80ca214c509bc1aeb9cc058bcd\"},{\"type\":\"Edge\",\"source_node_id\":\"9857784602ba45daa36362f8081f3f78\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"id\":\"709ecf4081854fdb960de8db89556ac0\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"9401125e1c1e4da0b381fa0cf07d28ea\",\"branch_id\":\"8db288d48ecc41cc8d4c02ebfb8b8363\",\"id\":\"82a73282dbad40a1a36973441932d971\",\"name\":\"8db288d48ecc41cc8d4c02ebfb8b8363\"},{\"type\":\"Edge\",\"source_node_id\":\"9401125e1c1e4da0b381fa0cf07d28ea\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"id\":\"27f50b52d7f14357bbcd7fbde3f925aa\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"24d9573a895a4115ac6adc4b3d0933aa\",\"branch_id\":\"6ce94baf2b3d413e8965f87515af9530\",\"id\":\"fcceb0d42bc4408a85f737a3356a5465\",\"name\":\"6ce94baf2b3d413e8965f87515af9530\"},{\"type\":\"Edge\",\"source_node_id\":\"24d9573a895a4115ac6adc4b3d0933aa\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"id\":\"c8017104476949f0a05354cbf05c306f\"},{\"type\":\"Edge\",\"source_node_id\":\"f145c35d855347fa8375ede73773b057\",\"target_node_id\":\"2a3e1c9302b7463199467b476dcc5058\",\"id\":\"69bf654b161b49e790cc13dd59be525d\"},{\"type\":\"Edge\",\"source_node_id\":\"2a3e1c9302b7463199467b476dcc5058\",\"target_node_id\":\"4f297e652c8f404483d0f478f57215ef\",\"id\":\"d693584b0b794971a8723ddaba6d9def\"},{\"type\":\"Edge\",\"source_node_id\":\"ca1771b4aefe41a4aef0d82910799470\",\"target_node_id\":\"2a3e1c9302b7463199467b476dcc5058\",\"id\":\"fff3ddb3c1be4f8c9b54246d105e886a\"},{\"type\":\"Edge\",\"source_node_id\":\"4f297e652c8f404483d0f478f57215ef\",\"target_node_id\":\"f145c35d855347fa8375ede73773b057\",\"branch_id\":\"9ff3136842b44939b9b25c7b32730f5e\",\"id\":\"220b96e0830340e781b25750aa2913d0\",\"name\":\"9ff3136842b44939b9b25c7b32730f5e\"},{\"type\":\"Edge\",\"source_node_id\":\"4f297e652c8f404483d0f478f57215ef\",\"target_node_id\":\"b76cd4c81a254855b2dc9b8150c47c06\",\"branch_id\":\"3c04fbb2b51c42ec95ad41c2b865cdcc\",\"id\":\"e902824258024662874a21ded919da8f\",\"name\":\"3c04fbb2b51c42ec95ad41c2b865cdcc\"},{\"type\":\"Edge\",\"source_node_id\":\"b76cd4c81a254855b2dc9b8150c47c06\",\"target_node_id\":\"f809a8503d004c1793d7d29401854a44\",\"id\":\"3e090a9031be4848a6786d1ff17e796c\"},{\"type\":\"Edge\",\"source_node_id\":\"f809a8503d004c1793d7d29401854a44\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"branch_id\":\"7c76cf2847d54dc9b7bc6e805a158935\",\"id\":\"49dbd8f90bdc4a8d8c1d7c735f7b5e72\",\"name\":\"7c76cf2847d54dc9b7bc6e805a158935\"},{\"type\":\"Edge\",\"source_node_id\":\"4f297e652c8f404483d0f478f57215ef\",\"target_node_id\":\"b14dab0c843d4491b1908a1d24f4f60e\",\"branch_id\":\"df02b8bd15db45cb9875289ee87a06ce\",\"id\":\"cbe3e6be58ea45ee891fda194446d2b5\",\"name\":\"df02b8bd15db45cb9875289ee87a06ce\"},{\"type\":\"Edge\",\"source_node_id\":\"b14dab0c843d4491b1908a1d24f4f60e\",\"target_node_id\":\"2a3e1c9302b7463199467b476dcc5058\",\"id\":\"7b9f950a65384172ad099dd318941c60\"},{\"type\":\"Edge\",\"source_node_id\":\"f809a8503d004c1793d7d29401854a44\",\"target_node_id\":\"be0f5328e06a4fdb8663050d29f649a1\",\"branch_id\":\"955e9bee2e6a4a1abc4a9977642933e0\",\"id\":\"c838c4c2651643b293acc33af48c79d3\",\"name\":\"955e9bee2e6a4a1abc4a9977642933e0\"},{\"type\":\"Edge\",\"source_node_id\":\"be0f5328e06a4fdb8663050d29f649a1\",\"target_node_id\":\"a4dd39d7cdfc4162a39aea63b5104ca6\",\"id\":\"e903bf83b59b4f8bba94aba03f20dc77\"},{\"type\":\"Edge\",\"source_node_id\":\"a4dd39d7cdfc4162a39aea63b5104ca6\",\"target_node_id\":\"f145c35d855347fa8375ede73773b057\",\"branch_id\":\"1eac9fb983c543c5baf4c07715cea7c0\",\"id\":\"83a3381878cc47adb3f3cee907bade55\",\"name\":\"1eac9fb983c543c5baf4c07715cea7c0\"},{\"type\":\"Edge\",\"source_node_id\":\"a4dd39d7cdfc4162a39aea63b5104ca6\",\"target_node_id\":\"8251855bc8dc431697812132c644503b\",\"branch_id\":\"a4fe3202393c4527b155c8af770be825\",\"id\":\"bf924a1636d84514be098876a8f12c05\",\"name\":\"a4fe3202393c4527b155c8af770be825\"},{\"type\":\"Edge\",\"source_node_id\":\"d6cc5e3effbd474bbdef055afb145637\",\"target_node_id\":\"f868531907f8475b80eee77193907c1c\",\"branch_id\":\"f9d9507963664ecfbb671a2dca8dc415\",\"id\":\"03c34973c4224138bc89bd80ee6ef82c\",\"name\":\"f9d9507963664ecfbb671a2dca8dc415\"},{\"type\":\"Edge\",\"source_node_id\":\"f868531907f8475b80eee77193907c1c\",\"target_node_id\":\"b83a3b7e4d694dea99a76acd529af6f9\",\"branch_id\":\"786f0068eda544c28116aa47be68eb58\",\"id\":\"56b46b7917cb43fcabd4b52a0418ecc0\",\"name\":\"786f0068eda544c28116aa47be68eb58\"},{\"type\":\"Edge\",\"source_node_id\":\"f868531907f8475b80eee77193907c1c\",\"target_node_id\":\"f33eca4d29b24a16a32705fd29535c44\",\"branch_id\":\"f8b5c5d882e6409da6a9755a39ddbaba\",\"id\":\"eac190852f204eac8581f7212ca43c27\",\"name\":\"f8b5c5d882e6409da6a9755a39ddbaba\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"branch_id\":\"eac4771cdb0b4e61b892749345f80f89\",\"id\":\"d32594ba637648dbbe4a6a610d1283a0\",\"name\":\"eac4771cdb0b4e61b892749345f80f89\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"699922b57f0e404eae6f939bb9ea7bad\",\"branch_id\":\"9ede820ce84642f3924d25339d58a589\",\"id\":\"1fdbf3e8b87c4b30988c92b5f7bf9287\",\"name\":\"9ede820ce84642f3924d25339d58a589\"},{\"type\":\"Edge\",\"source_node_id\":\"699922b57f0e404eae6f939bb9ea7bad\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"id\":\"9c27a68278554144aa628eb37f301ba0\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"805acb1d5a76490283d21adee11ace8d\",\"branch_id\":\"b009a2c87ef344529658e47c208cb94f\",\"id\":\"5453ac378401409f969a472dcc99b4b0\",\"name\":\"b009a2c87ef344529658e47c208cb94f\"},{\"type\":\"Edge\",\"source_node_id\":\"805acb1d5a76490283d21adee11ace8d\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"id\":\"27971880d2034371b3789bae2e4c9521\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"de355525a3004003ba2d40597493a01d\",\"branch_id\":\"3253b4573d234c88a9517f7ebd7c124c\",\"id\":\"ed6e00cead454c9e9f09ede9291ef430\",\"name\":\"3253b4573d234c88a9517f7ebd7c124c\"},{\"type\":\"Edge\",\"source_node_id\":\"de355525a3004003ba2d40597493a01d\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"id\":\"4bccbf5ece134e95bead5a269e7b17b5\"},{\"type\":\"Edge\",\"source_node_id\":\"b83a3b7e4d694dea99a76acd529af6f9\",\"target_node_id\":\"ffb615404000427783e7a265d333c2b2\",\"branch_id\":\"e18e0706c9384790a54f03d5c3be2c71\",\"id\":\"a1c6a2d36fa14e3c9d004d161ef56d76\",\"name\":\"e18e0706c9384790a54f03d5c3be2c71\"},{\"type\":\"Edge\",\"source_node_id\":\"ffb615404000427783e7a265d333c2b2\",\"target_node_id\":\"54a0cb0947934f549dfd92844411b3c9\",\"branch_id\":\"a1adc64528e4420e91109a957a993147\",\"id\":\"5271fdd3ebc94f0faf36c24e129d8b03\",\"name\":\"a1adc64528e4420e91109a957a993147\"},{\"type\":\"Edge\",\"source_node_id\":\"ffb615404000427783e7a265d333c2b2\",\"target_node_id\":\"7233865f890743f69ab999234a25ad3e\",\"branch_id\":\"970ea41627644dfcab8e553779bd29cb\",\"id\":\"31edc9e648594e1e9e1e4b968fcc4453\",\"name\":\"970ea41627644dfcab8e553779bd29cb\"},{\"type\":\"Edge\",\"source_node_id\":\"7233865f890743f69ab999234a25ad3e\",\"target_node_id\":\"b769ea57ad464cfd8574adeeb9d0bf9e\",\"id\":\"080f11480a4143e5b8513c814c15e677\"},{\"type\":\"Edge\",\"source_node_id\":\"b769ea57ad464cfd8574adeeb9d0bf9e\",\"target_node_id\":\"54a0cb0947934f549dfd92844411b3c9\",\"branch_id\":\"1a726bede43844a9bd9128fbb4661e36\",\"id\":\"64b6526cfea141109ccf62351c0b7909\",\"name\":\"1a726bede43844a9bd9128fbb4661e36\"},{\"type\":\"Edge\",\"source_node_id\":\"b769ea57ad464cfd8574adeeb9d0bf9e\",\"target_node_id\":\"d83ad8b6307945b1b04263ffbb62443b\",\"branch_id\":\"24294a3439a843a5bfecfd389bd716d5\",\"id\":\"ec358ae0f38540b6b2b66a61f066431f\",\"name\":\"24294a3439a843a5bfecfd389bd716d5\"},{\"type\":\"Edge\",\"source_node_id\":\"b9f517e461df4167a3826bf9fa16e638\",\"target_node_id\":\"fd5059dafba54ec884263be207c53771\",\"id\":\"c48fc6c853ec49f0ab08f07ce0e13158\"},{\"type\":\"Edge\",\"source_node_id\":\"fd5059dafba54ec884263be207c53771\",\"target_node_id\":\"d83ad8b6307945b1b04263ffbb62443b\",\"branch_id\":\"9f8e7576cc6f41eda19f892a9f7e6af2\",\"id\":\"d9c0652134124952b57c4b1cbe84135d\",\"name\":\"9f8e7576cc6f41eda19f892a9f7e6af2\"},{\"type\":\"Edge\",\"source_node_id\":\"fd5059dafba54ec884263be207c53771\",\"target_node_id\":\"54a0cb0947934f549dfd92844411b3c9\",\"branch_id\":\"b391619d073148e19c4fb78dc030067f\",\"id\":\"ae625599ac6349858e2a71464a1ebe44\",\"name\":\"b391619d073148e19c4fb78dc030067f\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"11dc7c8547e9400b87f48a7c394589fd\",\"branch_id\":\"e9bcec8853614cac9d8eda3b103260fe\",\"id\":\"c97cfdcb7b7248a096bbb336afa528b7\",\"name\":\"e9bcec8853614cac9d8eda3b103260fe\"},{\"type\":\"Edge\",\"source_node_id\":\"e31ef9e4ec54417eb9590f00c1a3377a\",\"target_node_id\":\"fcdd14f0de7847ceae1affc008d8b0f3\",\"id\":\"e1b5ffc7ab8348f3a24307b495720ca9\"},{\"type\":\"Edge\",\"source_node_id\":\"fcdd14f0de7847ceae1affc008d8b0f3\",\"target_node_id\":\"f868531907f8475b80eee77193907c1c\",\"branch_id\":\"074bb5c3e53e4eebb91bfbedab5fe5ca\",\"id\":\"bc524d864ce24dddac41b117db6bfa80\",\"name\":\"074bb5c3e53e4eebb91bfbedab5fe5ca\"},{\"type\":\"Edge\",\"source_node_id\":\"fcdd14f0de7847ceae1affc008d8b0f3\",\"target_node_id\":\"1226678091eb488388097f09ccfb5a4d\",\"branch_id\":\"d5321481b6bf4925ac2956bbe341aed7\",\"id\":\"3a671562b3ca4c49a8a1f8f7e8eb33e2\",\"name\":\"d5321481b6bf4925ac2956bbe341aed7\"},{\"type\":\"Edge\",\"source_node_id\":\"1226678091eb488388097f09ccfb5a4d\",\"target_node_id\":\"11dc7c8547e9400b87f48a7c394589fd\",\"id\":\"a0dceee7b4e442ec83b875bad93c5022\"},{\"type\":\"Edge\",\"source_node_id\":\"569ccaedd78340979feca86682affcbe\",\"target_node_id\":\"9e896b67b3114d96ae504430b66716dc\",\"id\":\"aef1d88cb3cf42e487ae45376a5a0ecc\"},{\"type\":\"Edge\",\"source_node_id\":\"9e896b67b3114d96ae504430b66716dc\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"branch_id\":\"025fdee933674df9bab58ffea28ee95f\",\"id\":\"d13981ec519a4ed9abfd9cc96ee4df7c\",\"name\":\"025fdee933674df9bab58ffea28ee95f\"},{\"type\":\"Edge\",\"source_node_id\":\"9e896b67b3114d96ae504430b66716dc\",\"target_node_id\":\"e14402d6ed324753a8415f09545ff8c2\",\"branch_id\":\"feecf17f686b48f9ad3a39633987a8ee\",\"id\":\"879d840573c04eaabe4cd02d8bfd771e\",\"name\":\"feecf17f686b48f9ad3a39633987a8ee\"},{\"type\":\"Edge\",\"source_node_id\":\"e14402d6ed324753a8415f09545ff8c2\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"branch_id\":\"f1d1698c9c93413ba6787375068e6848\",\"id\":\"8a310f1308574cb58ae32529b9408d82\",\"name\":\"f1d1698c9c93413ba6787375068e6848\"},{\"type\":\"Edge\",\"source_node_id\":\"e14402d6ed324753a8415f09545ff8c2\",\"target_node_id\":\"ac19c7d150354af6b49927f218100a8e\",\"branch_id\":\"1da9358f8d854cd2b13e4e96137085a2\",\"id\":\"4402b3593c584cedb50f7863f87b647d\",\"name\":\"1da9358f8d854cd2b13e4e96137085a2\"},{\"type\":\"Edge\",\"source_node_id\":\"ac19c7d150354af6b49927f218100a8e\",\"target_node_id\":\"0cf4021d189347e0906b78ac67d84ad0\",\"id\":\"e433466b15f0424f965b6c0da5ecaff5\"},{\"type\":\"Edge\",\"source_node_id\":\"0cf4021d189347e0906b78ac67d84ad0\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"branch_id\":\"4654c30d77f1484289dac73d05dc8c5a\",\"id\":\"c86576636c784247bde22c3d08aedb78\",\"name\":\"4654c30d77f1484289dac73d05dc8c5a\"},{\"type\":\"Edge\",\"source_node_id\":\"0cf4021d189347e0906b78ac67d84ad0\",\"target_node_id\":\"842240253fdb4ce8a81f01cfea5396e3\",\"branch_id\":\"d5d73bc319684469b9744228e0e33f10\",\"id\":\"202a29a79b924c86b9d78c2473403ef1\",\"name\":\"d5d73bc319684469b9744228e0e33f10\"},{\"type\":\"Edge\",\"source_node_id\":\"842240253fdb4ce8a81f01cfea5396e3\",\"target_node_id\":\"904620a01a3445c09b2f883c3701d676\",\"id\":\"52ae51f172444702b9634ff6770f4024\"},{\"type\":\"Edge\",\"source_node_id\":\"904620a01a3445c09b2f883c3701d676\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"branch_id\":\"d698dc4d713a46e08218c1f5e90309e1\",\"id\":\"0b34a43c230242419eda7186617bad6d\",\"name\":\"d698dc4d713a46e08218c1f5e90309e1\"},{\"type\":\"Edge\",\"source_node_id\":\"904620a01a3445c09b2f883c3701d676\",\"target_node_id\":\"5d35c039af7c4631a146c0c60b424b65\",\"branch_id\":\"c1038730cfd14fbdbdac907624faa087\",\"id\":\"78de63645b1e45949263b13b2e6c4354\",\"name\":\"c1038730cfd14fbdbdac907624faa087\"},{\"type\":\"Edge\",\"source_node_id\":\"8d07b16788dd46a3ac6086037dc7d758\",\"target_node_id\":\"8251855bc8dc431697812132c644503b\",\"branch_id\":\"c631f60d09a9456b9915ed6811da173a\",\"id\":\"18837f0906b1475eaf2e5ecacf6dd57a\",\"name\":\"c631f60d09a9456b9915ed6811da173a\"},{\"type\":\"Edge\",\"source_node_id\":\"8d07b16788dd46a3ac6086037dc7d758\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"branch_id\":\"25b13f1e85d34ab2b0d690cde9cf5567\",\"id\":\"bff5b93099224de0bd5b307bdd99932e\",\"name\":\"25b13f1e85d34ab2b0d690cde9cf5567\"},{\"type\":\"Edge\",\"source_node_id\":\"5d35c039af7c4631a146c0c60b424b65\",\"target_node_id\":\"a4cc4c56e01047f7b0d45b9029d17b8d\",\"id\":\"6d4e65aca3c14b698f511adf7ec5a5b8\"},{\"type\":\"Edge\",\"source_node_id\":\"a4cc4c56e01047f7b0d45b9029d17b8d\",\"target_node_id\":\"8d07b16788dd46a3ac6086037dc7d758\",\"id\":\"7866a00eba024797a1694e40246249b6\"},{\"type\":\"Edge\",\"source_node_id\":\"207e1d9738824bf8b50999392aa602e0\",\"target_node_id\":\"ef70c2e3150f4ff4a4358cd01011f197\",\"id\":\"3d06d9e36c1748b1a3cf3a95299c50d1\"},{\"type\":\"Edge\",\"source_node_id\":\"ef70c2e3150f4ff4a4358cd01011f197\",\"target_node_id\":\"73d7ac3ed17042f5b5507bfb1c8b7444\",\"branch_id\":\"13f23b3cb8ff497a93207a676cbbf5b4\",\"id\":\"634b7179597547efac668e41bf884e18\",\"name\":\"13f23b3cb8ff497a93207a676cbbf5b4\"},{\"type\":\"Edge\",\"source_node_id\":\"ef70c2e3150f4ff4a4358cd01011f197\",\"target_node_id\":\"b83a3b7e4d694dea99a76acd529af6f9\",\"branch_id\":\"b79e1b0babea4f46adce9a42802b7521\",\"id\":\"d1498ff0c1cf480bad9575a58c594383\",\"name\":\"b79e1b0babea4f46adce9a42802b7521\"},{\"type\":\"Edge\",\"source_node_id\":\"019517bc2ee94230a8baada8caa4a155\",\"target_node_id\":\"ffcaca766a5148b1874a9b52acef4592\",\"branch_id\":\"3802e83d237f400e8c648a68ae6fffc4\",\"id\":\"56acd57f4d6a4755aadc1f3556e58e42\",\"name\":\"3802e83d237f400e8c648a68ae6fffc4\"},{\"type\":\"Edge\",\"source_node_id\":\"ffcaca766a5148b1874a9b52acef4592\",\"target_node_id\":\"dce2fd2f9aea4077bf04b1ba6ac992a8\",\"branch_id\":\"d4c3cb3006de46af8253ef8418219f01\",\"id\":\"ed0f05ce58e147c38b14dce6f457a940\",\"name\":\"d4c3cb3006de46af8253ef8418219f01\"},{\"type\":\"Edge\",\"source_node_id\":\"ffcaca766a5148b1874a9b52acef4592\",\"target_node_id\":\"59b8aa46879743f7b8f4e84295210dc4\",\"branch_id\":\"0cd8e75e16544f60bc300ec102689e07\",\"id\":\"462129d4c6fe441484477d70a6d57e65\",\"name\":\"0cd8e75e16544f60bc300ec102689e07\"},{\"type\":\"Edge\",\"source_node_id\":\"bd81452a9a1b46bba0dc8e99ac7537ac\",\"target_node_id\":\"c7adfd19133a4c649d6698c86ae9020c\",\"branch_id\":\"c436fc0bcecc4a8eb1665cce1489b41f\",\"id\":\"0b8c6688ecc8422f9dd9315a66c17967\",\"name\":\"c436fc0bcecc4a8eb1665cce1489b41f\"},{\"type\":\"Edge\",\"source_node_id\":\"c7adfd19133a4c649d6698c86ae9020c\",\"target_node_id\":\"2412f77223a04a709fc32c8e75850387\",\"branch_id\":\"cb3eb7116a564f2f8193299bf747db94\",\"id\":\"88ac19880d634863aec01fef48af5b8f\",\"name\":\"cb3eb7116a564f2f8193299bf747db94\"},{\"type\":\"Edge\",\"source_node_id\":\"c7adfd19133a4c649d6698c86ae9020c\",\"target_node_id\":\"59b8aa46879743f7b8f4e84295210dc4\",\"branch_id\":\"c585b6a203814130b92290a2a8d2f72a\",\"id\":\"91d8e6787abf48c1b6a401c72e8160a1\",\"name\":\"c585b6a203814130b92290a2a8d2f72a\"},{\"type\":\"Edge\",\"source_node_id\":\"59b8aa46879743f7b8f4e84295210dc4\",\"target_node_id\":\"7f6ae93a22384a068958c171956f4fe8\",\"id\":\"9976d66c29fe468ea263fcb71a0a88c4\"},{\"type\":\"Edge\",\"source_node_id\":\"7f6ae93a22384a068958c171956f4fe8\",\"target_node_id\":\"8251855bc8dc431697812132c644503b\",\"id\":\"c926065844ed46729ec94dab555a1b24\"},{\"type\":\"Edge\",\"source_node_id\":\"d83ad8b6307945b1b04263ffbb62443b\",\"target_node_id\":\"8cefb357d56842a3b31cc3c083a62a74\",\"id\":\"e9a26294d65847e49d65d286d5af02ae\"},{\"type\":\"Edge\",\"source_node_id\":\"8cefb357d56842a3b31cc3c083a62a74\",\"target_node_id\":\"1982378d14e14ebaa9ed9d0276f081cb\",\"branch_id\":\"d8d6b2a8065b4e94838d2a045fd85a4c\",\"id\":\"cc1c22febe8044d6b28971a400d416c2\",\"name\":\"d8d6b2a8065b4e94838d2a045fd85a4c\"},{\"type\":\"Edge\",\"source_node_id\":\"8cefb357d56842a3b31cc3c083a62a74\",\"target_node_id\":\"54a0cb0947934f549dfd92844411b3c9\",\"branch_id\":\"f2723cceb136480e832ce930946d876e\",\"id\":\"21569982c5de466caacc81663ce36f1f\",\"name\":\"f2723cceb136480e832ce930946d876e\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"f53349b2dd384eb887feff0287cecbf5\",\"branch_id\":\"32a9b2b9a15044b89f36a814b8750c6b\",\"id\":\"206d3c40ec324e9f96bedc418f66ddc7\",\"name\":\"32a9b2b9a15044b89f36a814b8750c6b\"},{\"type\":\"Edge\",\"source_node_id\":\"f53349b2dd384eb887feff0287cecbf5\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"id\":\"70cde711379b4042971cb08f2a047378\"},{\"type\":\"Edge\",\"source_node_id\":\"b83a3b7e4d694dea99a76acd529af6f9\",\"target_node_id\":\"bc8ca9598b0d4dadbf7f8e72a04f4353\",\"branch_id\":\"71ae9547692447daab0121617101208a\",\"id\":\"a33cc4a6aaa14b4ca3936ef4c6aeb510\",\"name\":\"71ae9547692447daab0121617101208a\"},{\"type\":\"Edge\",\"source_node_id\":\"bc8ca9598b0d4dadbf7f8e72a04f4353\",\"target_node_id\":\"cd0f50d0171b474ebbaea7e27fdf2932\",\"id\":\"8336da010e2c49ecb39677d1d8645e98\"},{\"type\":\"Edge\",\"source_node_id\":\"cd0f50d0171b474ebbaea7e27fdf2932\",\"target_node_id\":\"0df892dd8ce940be81dbdcadbcf584ff\",\"id\":\"41ffb0afb18447539016fc5865622f5e\"},{\"type\":\"Edge\",\"source_node_id\":\"0df892dd8ce940be81dbdcadbcf584ff\",\"target_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"branch_id\":\"88467762ec8f48d185d22f113c1f3cb5\",\"id\":\"c717d599d5ee4a93a8d62ee610fe94a4\",\"name\":\"88467762ec8f48d185d22f113c1f3cb5\"},{\"type\":\"Edge\",\"source_node_id\":\"0df892dd8ce940be81dbdcadbcf584ff\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"branch_id\":\"d9d8985c3d384dc097c8baca07d0c44e\",\"id\":\"a8f225243c8c4629bdd138b55828797a\",\"name\":\"d9d8985c3d384dc097c8baca07d0c44e\"},{\"type\":\"Edge\",\"source_node_id\":\"dce2fd2f9aea4077bf04b1ba6ac992a8\",\"target_node_id\":\"a6dc56d1942d4b66825f02d245edc6d4\",\"id\":\"ca761a998e61458aac8d5b0ca6f70cb8\"},{\"type\":\"Edge\",\"source_node_id\":\"a6dc56d1942d4b66825f02d245edc6d4\",\"target_node_id\":\"8251855bc8dc431697812132c644503b\",\"branch_id\":\"68c3790308f8431896f9ca79d9a9f106\",\"id\":\"bdd66e36fa614013ab3030a2f1da3d35\",\"name\":\"68c3790308f8431896f9ca79d9a9f106\"},{\"type\":\"Edge\",\"source_node_id\":\"2cc08096b30f45b0827119c3b5f5fa42\",\"target_node_id\":\"27123440478c41c49eac84d738a843c2\",\"id\":\"2077f9a768754a01a614a527e953c60f\"},{\"type\":\"Edge\",\"source_node_id\":\"27123440478c41c49eac84d738a843c2\",\"target_node_id\":\"569ccaedd78340979feca86682affcbe\",\"branch_id\":\"d532a5fcc949456d9d23e17f5f1d282f\",\"id\":\"9163b311cd7541559a1f5a432e1824e2\",\"name\":\"d532a5fcc949456d9d23e17f5f1d282f\"},{\"type\":\"Edge\",\"source_node_id\":\"27123440478c41c49eac84d738a843c2\",\"target_node_id\":\"699922b57f0e404eae6f939bb9ea7bad\",\"branch_id\":\"0a490d4573114389aaa044963025bf29\",\"id\":\"b33c741574dd42a4859391363e2ac662\",\"name\":\"0a490d4573114389aaa044963025bf29\"},{\"type\":\"Edge\",\"source_node_id\":\"27123440478c41c49eac84d738a843c2\",\"target_node_id\":\"805acb1d5a76490283d21adee11ace8d\",\"branch_id\":\"4670754e4bb34a1b8e7900b2a066c68c\",\"id\":\"c526457ec29d4ed7ab79901ff22b12c4\",\"name\":\"4670754e4bb34a1b8e7900b2a066c68c\"},{\"type\":\"Edge\",\"source_node_id\":\"27123440478c41c49eac84d738a843c2\",\"target_node_id\":\"de355525a3004003ba2d40597493a01d\",\"branch_id\":\"3adc83353b6b4681a4a71d9737914c92\",\"id\":\"667b38fb082842d1ad250edb463970f0\",\"name\":\"3adc83353b6b4681a4a71d9737914c92\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"a1846ce5007045088d91003fdeb5f70e\",\"branch_id\":\"12143745f6114ad7bf3204c97bb13a5f\",\"id\":\"7ecc083aa28c4fc8b3370008b26d997c\",\"name\":\"12143745f6114ad7bf3204c97bb13a5f\"},{\"type\":\"Edge\",\"source_node_id\":\"a1846ce5007045088d91003fdeb5f70e\",\"target_node_id\":\"bfa0a72ef56345f78e51e37f289d2962\",\"branch_id\":\"53af72522ee0468aa56d9435d404f9d6\",\"id\":\"156841d510e7470faba8a24850b69dce\",\"name\":\"53af72522ee0468aa56d9435d404f9d6\"},{\"type\":\"Edge\",\"source_node_id\":\"bfa0a72ef56345f78e51e37f289d2962\",\"target_node_id\":\"2f13545e7aff44fea92c262a72de2f10\",\"id\":\"26cbdded103f4dfba96fe9e34bb08c2a\"},{\"type\":\"Edge\",\"source_node_id\":\"2f13545e7aff44fea92c262a72de2f10\",\"target_node_id\":\"f9124c93df3c4727a0cab5a33d507c82\",\"branch_id\":\"a34565248b66475388ea82e52f977bf4\",\"id\":\"0435a27ec194467f9883053008f7dd93\",\"name\":\"a34565248b66475388ea82e52f977bf4\"},{\"type\":\"Edge\",\"source_node_id\":\"f9124c93df3c4727a0cab5a33d507c82\",\"target_node_id\":\"bfa0a72ef56345f78e51e37f289d2962\",\"id\":\"140cfe88ef0b4b16aabb236091b0852e\"},{\"type\":\"Edge\",\"source_node_id\":\"2f13545e7aff44fea92c262a72de2f10\",\"target_node_id\":\"7fff18e168564d0d8bc3e955abd96328\",\"branch_id\":\"8197359d971247d799131e7cdd387f36\",\"id\":\"779bff352f5d4dac86134d4d459d00ea\",\"name\":\"8197359d971247d799131e7cdd387f36\"},{\"type\":\"Edge\",\"source_node_id\":\"7fff18e168564d0d8bc3e955abd96328\",\"target_node_id\":\"bfa0a72ef56345f78e51e37f289d2962\",\"id\":\"01725fa189ad407bb65b6a510d86eef4\"},{\"type\":\"Edge\",\"source_node_id\":\"2f13545e7aff44fea92c262a72de2f10\",\"target_node_id\":\"a5d25e2774c749c7bdafb0902e5a2c69\",\"branch_id\":\"b8069ac541494dd08c168055949a6bdf\",\"id\":\"360bb8ed27344188995deee2423c88ba\",\"name\":\"b8069ac541494dd08c168055949a6bdf\"},{\"type\":\"Edge\",\"source_node_id\":\"a5d25e2774c749c7bdafb0902e5a2c69\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"id\":\"9bed2eb32ece4f5fbc4ace0d108b2b23\"},{\"type\":\"Edge\",\"source_node_id\":\"13f599b596ac4c52b36e610ec1364786\",\"target_node_id\":\"03dc98604b2743a89972102a427acdab\",\"branch_id\":\"a9c4223aa7004d1d87ebeaf21dc1e95c\",\"id\":\"4df71503b01d49929276552fe3a98e2f\",\"name\":\"a9c4223aa7004d1d87ebeaf21dc1e95c\"},{\"type\":\"Edge\",\"source_node_id\":\"03dc98604b2743a89972102a427acdab\",\"target_node_id\":\"a8757a988a2946a885eb9e8fac4a36e6\",\"branch_id\":\"1ef8a273a30640808ca6518c52d44238\",\"id\":\"639ffacb06c8420597c7a3c23d06bc88\",\"name\":\"1ef8a273a30640808ca6518c52d44238\"},{\"type\":\"Edge\",\"source_node_id\":\"03dc98604b2743a89972102a427acdab\",\"target_node_id\":\"68d06c7a6fad43488621e8ba2d9b72cd\",\"branch_id\":\"169426a0128b405ba747519da2d00409\",\"id\":\"9bcdd2d2312f4279b667c1aa30a4149e\",\"name\":\"169426a0128b405ba747519da2d00409\"},{\"type\":\"Edge\",\"source_node_id\":\"68d06c7a6fad43488621e8ba2d9b72cd\",\"target_node_id\":\"d705fe0d136845f1a0a580b3a319a6a8\",\"id\":\"2b989ef8b7ea45d2bcaf455d5463cdff\"},{\"type\":\"Edge\",\"source_node_id\":\"d705fe0d136845f1a0a580b3a319a6a8\",\"target_node_id\":\"c39abbdd9d9048ebac88fa462369e4d8\",\"id\":\"8ec075e84f3e47739529ef9a9f1a552f\"},{\"type\":\"Edge\",\"source_node_id\":\"c39abbdd9d9048ebac88fa462369e4d8\",\"target_node_id\":\"567ecb8c7e69414197b590e62fc96ffa\",\"branch_id\":\"5a578b5990a3441d956dc7da4a14aa9e\",\"id\":\"caea77aed0284ef9863bbb981e454ec7\",\"name\":\"5a578b5990a3441d956dc7da4a14aa9e\"},{\"type\":\"Edge\",\"source_node_id\":\"567ecb8c7e69414197b590e62fc96ffa\",\"target_node_id\":\"d705fe0d136845f1a0a580b3a319a6a8\",\"id\":\"227b5ad325554fe3bffa09808b3aa416\"},{\"type\":\"Edge\",\"source_node_id\":\"c39abbdd9d9048ebac88fa462369e4d8\",\"target_node_id\":\"851e1675b771476983be9d9e9a335088\",\"branch_id\":\"0c49066fbec2419cae3ea509088199c1\",\"id\":\"bafc0a47d577404ca49a85ce5e455277\",\"name\":\"0c49066fbec2419cae3ea509088199c1\"},{\"type\":\"Edge\",\"source_node_id\":\"851e1675b771476983be9d9e9a335088\",\"target_node_id\":\"d705fe0d136845f1a0a580b3a319a6a8\",\"id\":\"0a9c54efbb384e67a551a54f961e7a95\"},{\"type\":\"Edge\",\"source_node_id\":\"c39abbdd9d9048ebac88fa462369e4d8\",\"target_node_id\":\"ca4281b23e314b0c84c95d012d8a9f0a\",\"branch_id\":\"466ac04fe02d424bafcae0e7105d20ed\",\"id\":\"beb61aee37ea45d39f9f4213b48fec78\",\"name\":\"466ac04fe02d424bafcae0e7105d20ed\"},{\"type\":\"Edge\",\"source_node_id\":\"c39abbdd9d9048ebac88fa462369e4d8\",\"target_node_id\":\"68d06c7a6fad43488621e8ba2d9b72cd\",\"branch_id\":\"8412d55855f6464eaa04701906d968eb\",\"id\":\"7a4e884b32564d96b7d70ec004492d0b\",\"name\":\"8412d55855f6464eaa04701906d968eb\"},{\"type\":\"Edge\",\"source_node_id\":\"a8757a988a2946a885eb9e8fac4a36e6\",\"target_node_id\":\"ca4281b23e314b0c84c95d012d8a9f0a\",\"id\":\"951a49bd5e964068867c344e5704b1a1\"},{\"type\":\"Edge\",\"source_node_id\":\"ca4281b23e314b0c84c95d012d8a9f0a\",\"target_node_id\":\"16a1a697635b49049011bfb4b7300c06\",\"id\":\"463fd979b1f14afc8de6b06748c2e95d\"},{\"type\":\"Edge\",\"source_node_id\":\"a6dc56d1942d4b66825f02d245edc6d4\",\"target_node_id\":\"f7d3a19c5a144a6692fa0392fbc42601\",\"branch_id\":\"9cac7b0ca12f46df8f3bfd825215738c\",\"id\":\"fd29eff0bb374eb99cb2c782603ee20c\",\"name\":\"9cac7b0ca12f46df8f3bfd825215738c\"},{\"type\":\"Edge\",\"source_node_id\":\"767c818240c34396a261e09b5c0e4960\",\"target_node_id\":\"207e1d9738824bf8b50999392aa602e0\",\"branch_id\":\"4cbd9043a56346b993825534c8886b83\",\"id\":\"0fb6e757db87473e8efca7d63b3449d2\",\"name\":\"4cbd9043a56346b993825534c8886b83\"},{\"type\":\"Edge\",\"source_node_id\":\"767c818240c34396a261e09b5c0e4960\",\"target_node_id\":\"088c5a499e1444b38835ff2db8919544\",\"branch_id\":\"d9010909fc094f6cab950f5c9af06c19\",\"id\":\"8b1757a07dcd4cdcb925d22a7a0520e0\",\"name\":\"d9010909fc094f6cab950f5c9af06c19\"},{\"type\":\"Edge\",\"source_node_id\":\"df79c5242c244f1dab851ef7285d517f\",\"target_node_id\":\"8f1445841a2b4402988276c2a26946d5\",\"id\":\"ee1c014039fb4fc5976dd98463109796\"},{\"type\":\"Edge\",\"source_node_id\":\"8f1445841a2b4402988276c2a26946d5\",\"target_node_id\":\"767c818240c34396a261e09b5c0e4960\",\"id\":\"dd4700c577ce4ba8b928e1710f6c0431\"},{\"type\":\"Edge\",\"source_node_id\":\"f33eca4d29b24a16a32705fd29535c44\",\"target_node_id\":\"4758ce4d476d46728a411ec16124d7e5\",\"id\":\"e8d98301b2bd4060aad028c8d241cd25\"},{\"type\":\"Edge\",\"source_node_id\":\"4758ce4d476d46728a411ec16124d7e5\",\"target_node_id\":\"b83a3b7e4d694dea99a76acd529af6f9\",\"branch_id\":\"d4b8f69ba8524b9c8a7ece1e1d276672\",\"id\":\"5021376d5d38401e83d9571f529f3b22\",\"name\":\"d4b8f69ba8524b9c8a7ece1e1d276672\"},{\"type\":\"Edge\",\"source_node_id\":\"4758ce4d476d46728a411ec16124d7e5\",\"target_node_id\":\"6a90246af7eb400eb4864c65f1814e8a\",\"branch_id\":\"71d24e3ed7e24e7385e9fcc00e2ec664\",\"id\":\"3588b36ff60941cc91af9ec3a925757f\",\"name\":\"71d24e3ed7e24e7385e9fcc00e2ec664\"},{\"type\":\"Edge\",\"source_node_id\":\"6a90246af7eb400eb4864c65f1814e8a\",\"target_node_id\":\"9c92ace1fa8245c4bfa429be03bf1c56\",\"id\":\"a87c29956deb45a2bed36e2066de809d\"},{\"type\":\"Edge\",\"source_node_id\":\"9c92ace1fa8245c4bfa429be03bf1c56\",\"target_node_id\":\"677c1ab79d384e7fb39a0f9a01127016\",\"branch_id\":\"611a59a0ba274167be25c997ad97c22c\",\"id\":\"19e3d269ba4b4d71b5042b823855ccf1\",\"name\":\"611a59a0ba274167be25c997ad97c22c\"},{\"type\":\"Edge\",\"source_node_id\":\"677c1ab79d384e7fb39a0f9a01127016\",\"target_node_id\":\"b83a3b7e4d694dea99a76acd529af6f9\",\"id\":\"f5f73eee325f4ff68503497dcd696eef\"},{\"type\":\"Edge\",\"source_node_id\":\"27123440478c41c49eac84d738a843c2\",\"target_node_id\":\"a1846ce5007045088d91003fdeb5f70e\",\"branch_id\":\"7d1bf2c589884956b39a7ffda3f30bea\",\"id\":\"c198e35dd6b04108a2692897fbdb153b\",\"name\":\"7d1bf2c589884956b39a7ffda3f30bea\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"itemJSON\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"ac6a466540e14e3fba2bc95a5031ff25\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"itemName\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"25f7a4b63ca646c9894f4faf0df05bbf\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"record_id\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return '';\\n})()\\n\"},\"list\":false,\"id\":\"1e4f5f6d535c4008a8603791f283bcb5\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"record_table\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return '';\\n})()\\n\"},\"list\":false,\"id\":\"2e0982b3a9a44432a3f73b10c6baa16b\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"qIndex\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"-1\"},\"list\":false,\"id\":\"6ae91a3e02b745a49360070a47f62e04\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"limit\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"7\"},\"list\":false,\"id\":\"a9b0f968f69d4ba2abc33a55db96f7bd\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"count\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"0\"},\"list\":false,\"id\":\"d33dd0303343465cba5100f17027aaa6\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"index\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"0\"},\"list\":false,\"id\":\"11b4358c95c64540a372ef323b4cfb1a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"validation_message\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return '';\\n})()\\n\"},\"list\":false,\"id\":\"29207fbe55e844c1aaf7bac82f8b30ac\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"request_for\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return '';\\n})()\\n\"},\"list\":false,\"id\":\"40ddfd5f211f46adbb485c0c2b05ff95\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"canView\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return false;\\n})()\\n\"},\"list\":false,\"id\":\"43b4de58879f4de19d12c9edf4595b3d\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"unsupportedVarTypes\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return '14,15,17,21,23,25,29,30';\\n})()\\n\"},\"list\":false,\"id\":\"f874ee6d91c945ed8e77457a6b3d59e5\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"media_links_form_attachment\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return '';\\n})()\\n\"},\"list\":false,\"id\":\"ff738c3df8204d0984a8dddb00dfcbe0\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"contextualSearchVariable\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return '';\\n})()\\n\"},\"list\":false,\"id\":\"0e2b62e855e441d2b7387afcca17d774\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"contextualSearchContext\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"2821675a5b30130070e4492c11f91a89\"},\"list\":false,\"id\":\"090ca888eaa04416a884cf55f3dfa396\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"contextualSearchResultLimit\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"3\"},\"list\":false,\"id\":\"f46db591eeab4e7bb62314a18e2cf383\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"contextualSearchIndex\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"0\"},\"list\":false,\"id\":\"986b9a4a65294914853db56df17c25a0\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"contextualSearchResultJsonString\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"e09ecde1e9f24fbcbbe2e6769e527f36\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"contextualSearchResultCount\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"0\"},\"list\":false,\"id\":\"1fa546328e454a059b7789b6143d84ce\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"no_records_found\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return \\\"false\\\";\\n})()\\n\"},\"list\":false,\"id\":\"eabef6d6b7b1482f8ab8a05eed92470f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"glide_variables\":[{\"type\":\"String\",\"name\":\"catalog_item_id\",\"list\":false,\"id\":\"d96cb7476e9a411d9217a326591f0d9e\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"True/False\",\"id\":\"9cab67ed47ce436bb12581ee7ceefb00\",\"name\":\"proceed\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"True/False\",\"id\":\"1efdcf2f469443bab274d33fd859ba49\",\"name\":\"submit_producer\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"True/False\",\"id\":\"ee4278e027464dbc9047276cfda4b036\",\"name\":\"order_item\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"Date/Time\",\"mode\":\"date\",\"id\":\"d679323216e54589b81e8c5b3229dcb8\",\"name\":\"question_date\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"question_text\",\"list\":false,\"id\":\"49591097b4f9403ebc5d93ad049007f0\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"e5e78bba2e454895a9f7de70d39027b0\",\"name\":\"question_reference\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"table\":\"\"},{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"dc4af802dc2f47c4bbeccef60a0887c3\",\"name\":\"question_choice\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"table\":\"\"},{\"type\":\"Date/Time\",\"mode\":\"date_time\",\"id\":\"c964d5c4ce17414cb95fe1bf03318b7e\",\"name\":\"question_date_time\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"a9d149d98f8c4c5ebede92004778e811\",\"name\":\"question_requested_for\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"table\":\"\"},{\"type\":\"String\",\"name\":\"search_requested_for\",\"list\":false,\"id\":\"ebbb4a512b184021b572be61b0736b0b\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"True/False\",\"id\":\"a6e7b01c1d1e46a29b5e25666374fcc5\",\"name\":\"request_for_another_user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"question_email\",\"list\":false,\"id\":\"d0e02123b54944f19a7fc9cfc1785b11\",\"formatType\":\"33513d135b1200101f254d3ba881c7d5\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"question_ip_address\",\"list\":false,\"id\":\"d35b1e93084d4f8390bc356383961ada\",\"formatType\":\"a860c5945b2200101f254d3ba881c7df\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"question_url\",\"list\":false,\"id\":\"3951531a4d754d3f83a6cae37e53ae92\",\"formatType\":\"77d8b2935b9200101f254d3ba881c7b9\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"True/False\",\"id\":\"d3131dcb6d4243858d0ff60ba07588c6\",\"name\":\"add_attachment\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"File\",\"id\":\"15e48e7ffe144828980d41225306d557\",\"name\":\"upload_attachment\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"True/False\",\"id\":\"b5b51b3b069f4faa8cd2c87cf9fcc097\",\"name\":\"add_more\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"File\",\"id\":\"ada76ae131be4767832c44a0020aa739\",\"name\":\"question_attachment\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"execute_contextual_search\",\"list\":false,\"id\":\"e41adc12f2bf498d9937ad6c1d05c844\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"confirm_catalog_item\",\"list\":false,\"id\":\"d77c358c72074a6c941a40b1e7ffbd34\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"True/False\",\"id\":\"29c02fc59a2044ea8ac7822eef35baec\",\"name\":\"did_articles_help\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"True/False\",\"id\":\"b18d103ac6924ced825414c020736723\",\"name\":\"proceed_with_default\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"True/False\",\"id\":\"8741e0dddb4d47e58f869783457c45aa\",\"name\":\"show_end_state_card\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"0cb822556e9c4949adb5cfae1b521ea7\",\"name\":\"question_choice_other_channels\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"table\":\"\"},{\"type\":\"String\",\"name\":\"search_reference\",\"list\":false,\"id\":\"fc876df4d3dd49229e790bef174eeb5b\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"df9465dd557149c2b574ba78bf0b455a\",\"name\":\"question_reference_other_channels\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"table\":\"\"},{\"type\":\"True/False\",\"id\":\"6e0b667d4dbb4459b52c0dcedcf8b5f1\",\"name\":\"change_response\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"catalog_item_id\",\"label\":\"catalog_item_id\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"d96cb7476e9a411d9217a326591f0d9e\",\"type\":\"String\",\"hint\":\"\"},{\"name\":\"execute_contextual_search\",\"label\":\"execute_contextual_search\",\"default-value\":\"\\\"false\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"e41adc12f2bf498d9937ad6c1d05c844\",\"type\":\"String\",\"hint\":\"\"},{\"name\":\"confirm_catalog_item\",\"label\":\"confirm_catalog_item\",\"default-value\":\"\\\"true\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"d77c358c72074a6c941a40b1e7ffbd34\",\"type\":\"String\",\"hint\":\"\"},{\"name\":\"show_end_state_card\",\"label\":\"show_end_state_card\",\"default-value\":\"false\",\"required\":false,\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"8741e0dddb4d47e58f869783457c45aa\",\"type\":\"True/False\"}],\"return-values-mapping\":[{\"name\":\"record_id\",\"label\":\"record_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.record_id}}\"}},{\"name\":\"record_table\",\"label\":\"record_table\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.record_table}}\"}},{\"name\":\"variables\",\"label\":\"variables\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var itemJson = JSON.parse(vaVars.itemJSON);\\n    if (!itemJson || !itemJson.variables)\\n        return '';\\n    var variablesObj = {};\\n    for (i = 0; i < itemJson.variables.length; i++) {\\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\\n    }\\n    return JSON.stringify(variablesObj);\\n})()\\n\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"3bffc2a5c363330012d1758a7ff57ebc\",\"name\":\"Request Catalog Item\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"title\":\"Request Catalog Item\",\"library\":true,\"csTopicId\":\"a39acd71c3a3330012d1758a7ff57eb6\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Request Catalog Item","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"3bffc2a5c363330012d1758a7ff57ebc","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/a39acd71c3a3330012d1758a7ff57eb6","value":"a39acd71c3a3330012d1758a7ff57eb6"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"28","sys_updated_on":"2022-05-24 15:13:23","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"d6a4dc90cc634906871140e7858fd14d\": {\n          \"id\": \"d6a4dc90cc634906871140e7858fd14d\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"f22bf64fd7f646ab8db0f2d18fec05b1\": {\n          \"id\": \"f22bf64fd7f646ab8db0f2d18fec05b1\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"3015772bba5a470eacb3fdcde326b1a7\": {\n          \"id\": \"3015772bba5a470eacb3fdcde326b1a7\",\n          \"stepType\": \"TableOutput\",\n          \"name\": \"health_scan_table\",\n          \"header\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"AWA Health Check\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"displayColumnHeaders\": true,\n          \"dataSourceType\": \"script\",\n          \"script\": \"(function execute() {\\n\\n    var headers = ['Basic Checks', 'Result'];\\n    var rows = JSON.parse(vaVars.result).status;\\n    return {\\n        columnHeaders: headers,\\n        columnValues: rows\\n    };\\n})();\",\n          \"tableName\": \"\",\n          \"sortByColumns\": [],\n          \"tableCondition\": {\n            \"value\": \"\",\n            \"mode\": \"glide_query\"\n          },\n          \"columns\": [\n            {\n              \"key\": \"\",\n              \"value\": \"\",\n              \"label\": \"\"\n            }\n          ],\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"There is some issue while fetching the AWA Health Status.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"11765da7db734e97b01f80f4acec4b4d\": {\n          \"id\": \"11765da7db734e97b01f80f4acec4b4d\",\n          \"stepType\": \"TableOutput\",\n          \"name\": \"Warning messages\",\n          \"header\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Warning Messages\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"displayColumnHeaders\": true,\n          \"dataSourceType\": \"script\",\n          \"script\": \"(function execute() { \\n    var headers = ['Result'];\\n    var rows = JSON.parse(vaVars.result).allWarnings;\\n    return {\\n        columnHeaders: headers,\\n        columnValues: rows\\n    };\\n})()\\n\",\n          \"tableName\": \"\",\n          \"sortByColumns\": [],\n          \"tableCondition\": {\n            \"value\": \"\",\n            \"mode\": \"glide_query\"\n          },\n          \"columns\": [\n            {\n              \"key\": \"\",\n              \"value\": \"\",\n              \"label\": \"\"\n            }\n          ],\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No warning message\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b7269b370e60454789d0f8622986436a\": {\n          \"id\": \"b7269b370e60454789d0f8622986436a\",\n          \"name\": \"Fetch health check data\",\n          \"script\": \"(function execute() {\\n    var hc = new global.AWADiagnosticUtils();\\n    vaVars.result = JSON.stringify(hc.runTests());\\n    gs.error(vaVars.result);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"b2a43addfdcf41cf83898a389612c2a5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3015772bba5a470eacb3fdcde326b1a7\",\n          \"target\": \"11765da7db734e97b01f80f4acec4b4d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c5b4e29274ce495d8a44a99e23a36319\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"11765da7db734e97b01f80f4acec4b4d\",\n          \"target\": \"f22bf64fd7f646ab8db0f2d18fec05b1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d718d348ba614a7db51991415105739b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d6a4dc90cc634906871140e7858fd14d\",\n          \"target\": \"b7269b370e60454789d0f8622986436a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9c014f17a6954c86b3ab03cc3f92c9fc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b7269b370e60454789d0f8622986436a\",\n          \"target\": \"3015772bba5a470eacb3fdcde326b1a7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"8e0b570fc9b04efbb50f80d2fa010c69\": {\n      \"id\": \"8e0b570fc9b04efbb50f80d2fa010c69\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"result\",\n      \"label\": \"result\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"258bd6e353e20110d3d5ddeeff7b1269","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_cb_design_topic_258bd6e353e20110d3d5ddeeff7b1269","sys_updated_by":"admin","sys_created_on":"2022-04-05 10:38:16","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"fd410897789046d0bb4bb86c38cbe8b1\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"fd410897789046d0bb4bb86c38cbe8b1\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"fd410897789046d0bb4bb86c38cbe8b1\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"d6a4dc90cc634906871140e7858fd14d\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"f22bf64fd7f646ab8db0f2d18fec05b1\",\"name\":\"End\"},{\"type\":\"TableOutput\",\"type\":\"TableOutput\",\"mode\":\"external\",\"conditionType\":\"simple\",\"query\":\"(function execute() {\\n\\n    var headers = ['Basic Checks', 'Result'];\\n    var rows = JSON.parse(vaVars.result).status;\\n    return {\\n        columnHeaders: headers,\\n        columnValues: rows\\n    };\\n})();\",\"title\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"AWA Health Check\"},\"columns\":[],\"showColumnHeaders\":true,\"noResultsMessage\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"There is some issue while fetching the AWA Health Status.\"},\"id\":\"3015772bba5a470eacb3fdcde326b1a7\",\"name\":\"health_scan_table\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TableOutput\",\"type\":\"TableOutput\",\"mode\":\"external\",\"conditionType\":\"simple\",\"query\":\"(function execute() { \\n    var headers = ['Result'];\\n    var rows = JSON.parse(vaVars.result).allWarnings;\\n    return {\\n        columnHeaders: headers,\\n        columnValues: rows\\n    };\\n})()\\n\",\"title\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"Warning Messages\"},\"columns\":[],\"showColumnHeaders\":true,\"noResultsMessage\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"No warning message\"},\"id\":\"11765da7db734e97b01f80f4acec4b4d\",\"name\":\"Warning messages\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var hc = new global.AWADiagnosticUtils();\\n    vaVars.result = JSON.stringify(hc.runTests());\\n    gs.error(vaVars.result);\\n})()\\n\",\"id\":\"b7269b370e60454789d0f8622986436a\",\"name\":\"Fetch health check data\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"3015772bba5a470eacb3fdcde326b1a7\",\"target_node_id\":\"11765da7db734e97b01f80f4acec4b4d\",\"id\":\"b2a43addfdcf41cf83898a389612c2a5\"},{\"type\":\"Edge\",\"source_node_id\":\"11765da7db734e97b01f80f4acec4b4d\",\"target_node_id\":\"f22bf64fd7f646ab8db0f2d18fec05b1\",\"id\":\"c5b4e29274ce495d8a44a99e23a36319\"},{\"type\":\"Edge\",\"source_node_id\":\"d6a4dc90cc634906871140e7858fd14d\",\"target_node_id\":\"b7269b370e60454789d0f8622986436a\",\"id\":\"d718d348ba614a7db51991415105739b\"},{\"type\":\"Edge\",\"source_node_id\":\"b7269b370e60454789d0f8622986436a\",\"target_node_id\":\"3015772bba5a470eacb3fdcde326b1a7\",\"id\":\"9c014f17a6954c86b3ab03cc3f92c9fc\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"result\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"8e0b570fc9b04efbb50f80d2fa010c69\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run\\n       and be discoverable (or not). Using the format vaContext.liveagent_[var_name] For example:\\n\\n       var applicability = vaContext.liveagent_portal == 'csm' ? true : false;\\n       return applicability;\\n    */\\n    return false;\\n})()\\n\"},\"roles\":[],\"scope\":\"434a64fd531db410f738ddeeff7b12c7\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"afd31eeb53a20110d3d5ddeeff7b1203\",\"name\":\"AWA Health Check\",\"key_phrases\":[\"AWA Health Check\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":false,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"AWA Health Check","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"design_topic_id":"afd31eeb53a20110d3d5ddeeff7b1203","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/218b96e353e20110d3d5ddeeff7b1247","value":"218b96e353e20110d3d5ddeeff7b1247"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"0","sys_updated_on":"2024-05-28 21:32:16","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.66\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"dea80e1cbb7b40ceb46a87e6063d7c62\": {\n          \"id\": \"dea80e1cbb7b40ceb46a87e6063d7c62\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"5721b5e18c594978bcfc8ecab8cb54c3\": {\n          \"id\": \"5721b5e18c594978bcfc8ecab8cb54c3\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"77aa6d89b9a64b75aaa2de21861e0482\": {\n          \"id\": \"77aa6d89b9a64b75aaa2de21861e0482\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Survey\",\n          \"fields\": [],\n          \"reusableTopicChoice\": \"Survey-LLM\",\n          \"reusableTopicId\": \"77a94e44ff2202101b82157c03cb147e\",\n          \"inputs\": {\n            \"surveyid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars._topic_postchat_survey}}\",\n                        \"displayValue\": \"vaVars_topic_postchat_survey\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            },\n            \"confirmationneeded\": {\n              \"value\": \"(function execute() {\\n    return vaVars._topic_show_postchat_summary + '';\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            },\n            \"savequestionstocontext\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"text\": \"false\"\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            }\n          },\n          \"variableIds\": [],\n          \"outputs\": [],\n          \"outdatedNote\": false,\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"useTemplateTopic\": false\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"d63a222ffe53498ca807638199282bae\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"dea80e1cbb7b40ceb46a87e6063d7c62\",\n          \"target\": \"77aa6d89b9a64b75aaa2de21861e0482\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"750c3089c50e4a61a7214d420cb67804\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"77aa6d89b9a64b75aaa2de21861e0482\",\n          \"target\": \"5721b5e18c594978bcfc8ecab8cb54c3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"659e8182e39a4a15ae38aa2ef044106c\": {\n      \"id\": \"659e8182e39a4a15ae38aa2ef044106c\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"_topic_postchat_survey\",\n      \"label\": \"_topic_postchat_survey\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"69b9f003a7754b559077404e5e2652c7\": {\n      \"id\": \"69b9f003a7754b559077404e5e2652c7\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_postchat_user_id\",\n      \"label\": \"_topic_postchat_user_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d73d96c90b1e40739b0fc67a2bb481e2\": {\n      \"id\": \"d73d96c90b1e40739b0fc67a2bb481e2\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_show_postchat_summary\",\n      \"label\": \"_topic_show_postchat_summary\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"25af0e0cff2202101b82157c03cb145f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_25af0e0cff2202101b82157c03cb145f","sys_updated_by":"admin","sys_created_on":"2024-05-28 21:32:16","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"8dae482a63e84d45ad3b208153d4ae97\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"8dae482a63e84d45ad3b208153d4ae97\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"8dae482a63e84d45ad3b208153d4ae97\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"dea80e1cbb7b40ceb46a87e6063d7c62\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"5721b5e18c594978bcfc8ecab8cb54c3\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Survey-LLM\",\"library_topic_id\":\"77a94e44ff2202101b82157c03cb147e\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"surveyid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars._topic_postchat_survey}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"confirmationneeded\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._topic_show_postchat_summary + '';\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"savequestionstocontext\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"77aa6d89b9a64b75aaa2de21861e0482\",\"name\":\"Survey\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"dea80e1cbb7b40ceb46a87e6063d7c62\",\"target_node_id\":\"77aa6d89b9a64b75aaa2de21861e0482\",\"id\":\"d63a222ffe53498ca807638199282bae\"},{\"type\":\"Edge\",\"source_node_id\":\"77aa6d89b9a64b75aaa2de21861e0482\",\"target_node_id\":\"5721b5e18c594978bcfc8ecab8cb54c3\",\"id\":\"750c3089c50e4a61a7214d420cb67804\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_topic_postchat_survey\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"659e8182e39a4a15ae38aa2ef044106c\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_postchat_user_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"69b9f003a7754b559077404e5e2652c7\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_show_postchat_summary\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"d73d96c90b1e40739b0fc67a2bb481e2\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"83fb4e08ff2202101b82157c03cb1447\",\"name\":\"_postchat_survey_llm_\",\"key_phrases\":[\"_postchat_survey_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"description\":\"This topic is related to a post-chat survey, which is likely to include questions or prompts for gathering feedback or evaluating the quality of a chat or support interaction after it has concluded.\",\"model_type\":\"llm\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[\"e13840cf77d53110569156391e5a99ba\"],\"title\":\"_postchat_survey_\",\"library\":false,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_postchat_survey_llm_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"83fb4e08ff2202101b82157c03cb1447","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/e9af0e0cff2202101b82157c03cb145a","value":"e9af0e0cff2202101b82157c03cb145a"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"28","sys_updated_on":"2023-04-05 11:38:40","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.45\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"b7d00116b42449afb4929effec6d6afc\": {\n          \"id\": \"b7d00116b42449afb4929effec6d6afc\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"5472efa7417d4e649cfb0995a9f14799\",\n              \"name\": \"prompt\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"false\",\n              \"id\": \"5dd6352d90df45959af53803fb02bdaf\",\n              \"name\": \"allow_user_to_skip\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"8a2ffc0953564a87900dc8ce6cafadad\",\n              \"name\": \"max_file_count\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"0b075eb449d14a2ba92f569572c785e6\",\n              \"name\": \"max_file_size\",\n              \"hint\": \"Max file size in MB (accept only integer value)\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"Please try uploading again.\",\n              \"id\": \"6278561a1c3644b58a3d1aed68d2a7e0\",\n              \"name\": \"try_again_message\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"313f21dfba794ed49882efdd2118bd8b\",\n              \"name\": \"user_confirmation_to_repload_msg\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"true\",\n              \"id\": \"ecdf0ee3f44b46b6970b03b2c235891f\",\n              \"name\": \"allow_all_file_types\",\n              \"referenced\": false\n            }\n          ],\n          \"variableIds\": [\n            \"5472efa7417d4e649cfb0995a9f14799\",\n            \"5dd6352d90df45959af53803fb02bdaf\",\n            \"8a2ffc0953564a87900dc8ce6cafadad\",\n            \"0b075eb449d14a2ba92f569572c785e6\",\n            \"6278561a1c3644b58a3d1aed68d2a7e0\",\n            \"313f21dfba794ed49882efdd2118bd8b\",\n            \"ecdf0ee3f44b46b6970b03b2c235891f\"\n          ]\n        },\n        \"ca75d6035e914bb8888781804e09c6d0\": {\n          \"id\": \"ca75d6035e914bb8888781804e09c6d0\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"files\",\n              \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return vaVars.final_list;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=6f2b209377892110ea3707c77b5a99be%5Ecalling_cs_topic_idIN619b289377892110ea3707c77b5a996b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            }\n          ]\n        },\n        \"7c62fb66347f480cbc5f949fe0136078\": {\n          \"id\": \"7c62fb66347f480cbc5f949fe0136078\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"files\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaInputs.prompt}}\",\n                      \"displayValue\": \"Input VariablesPrompt\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.allow_user_to_skip.getValue();\\n})()\\n\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"b9cd5e5164004a318469d2557ba9b2ae\"\n        },\n        \"5fbf237d20454ac4a96ec045b81c4c74\": {\n          \"id\": \"5fbf237d20454ac4a96ec045b81c4c74\",\n          \"name\": \"set variables\",\n          \"script\": \"(function execute() {\\n    vaVars.global_file_upload_count_limit = vaInputs.max_file_count.getValue();\\n    vaVars.global_file_upload_size_limit = vaInputs.max_file_size.getValue();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"263f2c5b888a415db1e54e17a2767b2d\": {\n          \"id\": \"263f2c5b888a415db1e54e17a2767b2d\",\n          \"name\": \"Filter Attachments\",\n          \"script\": \"(function execute() {\\n    var uploaded_list = [];\\n    var uploadFailed_list = [];\\n    var fileControl = vaInputs.allow_all_file_types.getValue() ? vaInputs.files : vaInputs.files_image_only;\\n    var successStatus = [\\\"available\\\", null]; // null state when scan is disabled\\n    for(var index=0; index<fileControl.getFiles().length; index++) {\\n        var file = fileControl.getFiles()[index];\\n        var attachment = {\\n            \\\"contentType\\\": file.contentType,\\n            \\\"fileName\\\": file.fileName, \\n            \\\"value\\\": file.value,\\n            \\\"message\\\" : file.message,\\n            \\\"contentType\\\" : file.contentType,\\n            \\\"scanState\\\" : file.scanState,\\n            \\\"fileSize\\\" : file.fileSize\\n        };\\n        if (successStatus.indexOf(file.scanState) != -1) {\\n            uploaded_list.push(attachment);\\n        } else {\\n           uploadFailed_list.push(attachment);\\n        }\\n    }\\n\\n    vaVars.final_list = JSON.stringify(uploaded_list);\\n    vaVars.failed_list = JSON.stringify(uploadFailed_list);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"eb8de8637597492d9b7355684702f871\": {\n          \"id\": \"eb8de8637597492d9b7355684702f871\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"a5554936e8c148ae8b0370a369fdff00\": {\n          \"id\": \"a5554936e8c148ae8b0370a369fdff00\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"Reupload attachment\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaInputs.try_again_message}}\",\n                      \"displayValue\": \"Input VariablesTry_again_message\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return true;\\n})()\\n\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"9cddbc2c9d4c48769cd8816e1e27bec6\"\n        },\n        \"10fa1ef93ad74dfcbb330321b89052e8\": {\n          \"id\": \"10fa1ef93ad74dfcbb330321b89052e8\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Upload failed for message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var message = gs.getProperty(\\\"com.glide.cs.general.multi_file_upload_failed_for_msg\\\");\\n    return message;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8e053c58fcb345a7ae1062b969683023\": {\n          \"id\": \"8e053c58fcb345a7ae1062b969683023\",\n          \"name\": \"Save reuploaded attachments\",\n          \"script\": \"(function execute() {\\n    vaVars.failed_list = \\\"\\\";\\n    var uploaded_list = JSON.parse(vaVars.final_list);\\n    var uploadFailed_list = [];\\n    var fileControl = vaInputs.allow_all_file_types.getValue() ? vaInputs.reupload_attachment : vaInputs.reupload_attachment_image_only;\\n    var successStatus = [\\\"available\\\", null]; // null state when scan is disabled\\n    for(var index=0; index<fileControl.getFiles().length; index++) {\\n        var file = fileControl.getFiles()[index];\\n        var attachment = {\\n            \\\"contentType\\\": file.contentType,\\n            \\\"fileName\\\": file.fileName, \\n            \\\"value\\\": file.value,\\n            \\\"message\\\" : file.message,\\n            \\\"contentType\\\" : file.contentType,\\n            \\\"scanState\\\" : file.scanState,\\n            \\\"fileSize\\\" : file.fileSize\\n        };\\n        gs.info(\\\"test file: \\\"+ JSON.stringify(attachment));\\n        if (successStatus.indexOf(file.scanState) != -1) {\\n            uploaded_list.push(attachment);\\n        } else {\\n           uploadFailed_list.push(attachment);\\n        }\\n    }\\n    vaVars.failed_message_count = 0;\\n    vaVars.final_list = JSON.stringify(uploaded_list);\\n    vaVars.failed_list = JSON.stringify(uploadFailed_list);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"12ea619f21f3427aa960e360d3440a67\": {\n          \"id\": \"12ea619f21f3427aa960e360d3440a67\",\n          \"stepType\": \"Decision\",\n          \"name\": \"reupload skipped\"\n        },\n        \"218b60ce2f744f01a798076ff4a9495e\": {\n          \"id\": \"218b60ce2f744f01a798076ff4a9495e\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Failed message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var failed = JSON.parse(vaVars.failed_list);\\n    var message = failed[vaVars.failed_message_count -1 ].message;\\n    return message;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"84c8921a6c60414aa1f0e4d8106f2be9\": {\n          \"id\": \"84c8921a6c60414aa1f0e4d8106f2be9\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Attachment upload failed message\"\n        },\n        \"6684bd1e2dac46cd87cf95d1b6be7d54\": {\n          \"id\": \"6684bd1e2dac46cd87cf95d1b6be7d54\",\n          \"name\": \"increase counter\",\n          \"script\": \"(function execute() {\\n   var temp = vaVars.failed_message_count +1;\\n    vaVars.failed_message_count = temp;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f13130227e834abdaf13baabc2aaf80e\": {\n          \"id\": \"f13130227e834abdaf13baabc2aaf80e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Skip\"\n        },\n        \"ac266968a1da4355ab51e032af1dd212\": {\n          \"id\": \"ac266968a1da4355ab51e032af1dd212\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"0cbc2fb456d340d98c017bae3a73ad6a\": {\n          \"id\": \"0cbc2fb456d340d98c017bae3a73ad6a\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"ask to reupload\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaInputs.user_confirmation_to_repload_msg}}\",\n                      \"displayValue\": \"Input VariablesUser_confirmation_to_repload_msg\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"8994c0dbfc374eabba184624877fb08f\",\n          \"routes\": {}\n        },\n        \"495cb6a069084c2399d41ec77bb5c1a5\": {\n          \"id\": \"495cb6a069084c2399d41ec77bb5c1a5\",\n          \"stepType\": \"Decision\",\n          \"name\": \"User wants to reupload\"\n        },\n        \"3cb4aded10774e3c8c54641a912e364b\": {\n          \"id\": \"3cb4aded10774e3c8c54641a912e364b\",\n          \"stepType\": \"Decision\",\n          \"name\": \"FileType\"\n        },\n        \"d88b3276ce7b4021977abe66f40962c7\": {\n          \"id\": \"d88b3276ce7b4021977abe66f40962c7\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"files image only\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaInputs.prompt}}\",\n                      \"displayValue\": \"Input VariablesPrompt\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.allow_user_to_skip.getValue();\\n})()\\n\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"95c2b5da639f4cfc8972689839ba9a06\"\n        },\n        \"fb61efca7e0f4c28af45d57672f4275a\": {\n          \"id\": \"fb61efca7e0f4c28af45d57672f4275a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"FileType\"\n        },\n        \"c7c1c5db53c04526929a47c35d1c4636\": {\n          \"id\": \"c7c1c5db53c04526929a47c35d1c4636\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"Reupload attachment image only\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaInputs.try_again_message}}\",\n                      \"displayValue\": \"Input VariablesTry_again_message\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return true;\\n})()\\n\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"40ae209357e743759b89cac258fe041d\"\n        },\n        \"00357471349046e281d539dab0a1c655\": {\n          \"id\": \"00357471349046e281d539dab0a1c655\",\n          \"name\": \"Set Context variables\",\n          \"script\": \"(function execute() {\\n    vaVars.global_file_upload_count_limit = '0';\\n    vaVars.global_file_upload_size_limit = '0';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"e467032358f84321b054d3a6d895a248\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a5554936e8c148ae8b0370a369fdff00\",\n          \"target\": \"12ea619f21f3427aa960e360d3440a67\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8edcb408bf434882983758a0ae3bc828\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eb8de8637597492d9b7355684702f871\",\n          \"target\": \"10fa1ef93ad74dfcbb330321b89052e8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var applies =  JSON.parse(vaVars.failed_list).length > 0\\n    return applies;\\n})()\\n\"\n          },\n          \"label\": \"Some Attachment Download failed\"\n        },\n        {\n          \"id\": \"7b1acafc0a3a4ef780b6177daaeb68c9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7c62fb66347f480cbc5f949fe0136078\",\n          \"target\": \"f13130227e834abdaf13baabc2aaf80e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0856371d1ef64d15826ba1c9a3a7962b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eb8de8637597492d9b7355684702f871\",\n          \"target\": \"00357471349046e281d539dab0a1c655\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var applies = JSON.parse(vaVars.failed_list).length <= 0\\n    return applies;\\n})()\\n\"\n          },\n          \"label\": \"None failed\"\n        },\n        {\n          \"id\": \"45439bd696874661a5614ff07a7b8d8d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b7d00116b42449afb4929effec6d6afc\",\n          \"target\": \"5fbf237d20454ac4a96ec045b81c4c74\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"34da5a0a35fc4bae8b062cee23917d8c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"263f2c5b888a415db1e54e17a2767b2d\",\n          \"target\": \"eb8de8637597492d9b7355684702f871\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"69c23804e82f48c5928608a532f27706\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"12ea619f21f3427aa960e360d3440a67\",\n          \"target\": \"8e053c58fcb345a7ae1062b969683023\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.reupload_attachmentISNOTEMPTY^ORvaInputs.reupload_attachment_image_onlyISNOTEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"NO\"\n        },\n        {\n          \"id\": \"381f97e3a5e44adf8fdb5a385450d861\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"12ea619f21f3427aa960e360d3440a67\",\n          \"target\": \"00357471349046e281d539dab0a1c655\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.reupload_attachmentISEMPTY^vaInputs.reupload_attachment_image_onlyISEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"48441724d2ea442db9c488aaf16855b0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"218b60ce2f744f01a798076ff4a9495e\",\n          \"target\": \"84c8921a6c60414aa1f0e4d8106f2be9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9ad1dcb5729049a582c9b2c603a53acf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"84c8921a6c60414aa1f0e4d8106f2be9\",\n          \"target\": \"6684bd1e2dac46cd87cf95d1b6be7d54\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var failed = JSON.parse(vaVars.failed_list);\\n    var failed_list_length = failed.length;\\n    if (vaVars.failed_message_count >= failed_list_length)\\n       return false;\\n    else \\n       return true;\\n})()\\n\"\n          },\n          \"label\": \"Send more message\"\n        },\n        {\n          \"id\": \"26d5a7dbc4f847a2a348dc4a6aa6652e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"10fa1ef93ad74dfcbb330321b89052e8\",\n          \"target\": \"6684bd1e2dac46cd87cf95d1b6be7d54\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6bd34bf0356d43a4926baad40a8166ac\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6684bd1e2dac46cd87cf95d1b6be7d54\",\n          \"target\": \"218b60ce2f744f01a798076ff4a9495e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f6e3a1b55f0f498bbb911ef181793313\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f13130227e834abdaf13baabc2aaf80e\",\n          \"target\": \"263f2c5b888a415db1e54e17a2767b2d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.filesISNOTEMPTY^ORvaInputs.files_image_onlyISNOTEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"ad24d0b9eb6f430383314b079c4e59a6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8e053c58fcb345a7ae1062b969683023\",\n          \"target\": \"ac266968a1da4355ab51e032af1dd212\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"af95c2f1b846483c967e2c77edf7a736\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ac266968a1da4355ab51e032af1dd212\",\n          \"target\": \"10fa1ef93ad74dfcbb330321b89052e8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var failedListSize = JSON.parse(vaVars.failed_list).length;\\n    if (failedListSize <= 0)\\n       return false;\\n    else \\n       return true;\\n})()\\n\"\n          },\n          \"label\": \"Some failed\"\n        },\n        {\n          \"id\": \"2d17eaf01b2f4942b9dc69341e62a505\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ac266968a1da4355ab51e032af1dd212\",\n          \"target\": \"00357471349046e281d539dab0a1c655\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var failedListSize = JSON.parse(vaVars.failed_list).length;\\n    if (failedListSize <= 0)\\n       return true;\\n    else\\n       return false\\n})()\\n\"\n          },\n          \"label\": \"All Success\"\n        },\n        {\n          \"id\": \"d2ec2977c8604a319ee5169d14af0d45\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"84c8921a6c60414aa1f0e4d8106f2be9\",\n          \"target\": \"0cbc2fb456d340d98c017bae3a73ad6a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var failed = JSON.parse(vaVars.failed_list);\\n    var failed_list_length = failed.length;\\n    if(vaVars.failed_message_count >= failed_list_length)\\n    return true;\\n    else \\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"No More message\"\n        },\n        {\n          \"id\": \"28efac18c92d4a798a2bd539cecde168\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0cbc2fb456d340d98c017bae3a73ad6a\",\n          \"target\": \"495cb6a069084c2399d41ec77bb5c1a5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f8081444c502452bbf4ab620b3226db1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"495cb6a069084c2399d41ec77bb5c1a5\",\n          \"target\": \"00357471349046e281d539dab0a1c655\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.ask_to_reupload=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"341b1ef836284e3283c63d52e9edc925\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5fbf237d20454ac4a96ec045b81c4c74\",\n          \"target\": \"3cb4aded10774e3c8c54641a912e364b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"53335eb6049d4f16b041ba6ad8837229\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3cb4aded10774e3c8c54641a912e364b\",\n          \"target\": \"7c62fb66347f480cbc5f949fe0136078\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.allow_all_file_types=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Allow all types\"\n        },\n        {\n          \"id\": \"ae67db77d1a24ba8927b45d8cde81e62\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3cb4aded10774e3c8c54641a912e364b\",\n          \"target\": \"d88b3276ce7b4021977abe66f40962c7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.allow_all_file_types=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Allow image only\"\n        },\n        {\n          \"id\": \"47a1f6b8409b484699170ffe1faa5ccf\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d88b3276ce7b4021977abe66f40962c7\",\n          \"target\": \"f13130227e834abdaf13baabc2aaf80e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e5a972b333cd404dbe497a647cd9dd07\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"495cb6a069084c2399d41ec77bb5c1a5\",\n          \"target\": \"fb61efca7e0f4c28af45d57672f4275a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.ask_to_reupload=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"8ab81b9a167049a3831f7268a472d083\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fb61efca7e0f4c28af45d57672f4275a\",\n          \"target\": \"a5554936e8c148ae8b0370a369fdff00\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.allow_all_file_types=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Allow all types\"\n        },\n        {\n          \"id\": \"8c8c1ec1d0ee490484326e325f4d807e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fb61efca7e0f4c28af45d57672f4275a\",\n          \"target\": \"c7c1c5db53c04526929a47c35d1c4636\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.allow_all_file_types=false\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Allow Image only\"\n        },\n        {\n          \"id\": \"fcfb5ce0a5214eba96985469465bc2d4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c7c1c5db53c04526929a47c35d1c4636\",\n          \"target\": \"12ea619f21f3427aa960e360d3440a67\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"61abde98750c483cb0b57c57f072dc40\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f13130227e834abdaf13baabc2aaf80e\",\n          \"target\": \"00357471349046e281d539dab0a1c655\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.filesISEMPTY^vaInputs.files_image_onlyISEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"4a5f83e962224e15bea1af9006194b81\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"00357471349046e281d539dab0a1c655\",\n          \"target\": \"ca75d6035e914bb8888781804e09c6d0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"b9cd5e5164004a318469d2557ba9b2ae\": {\n      \"id\": \"b9cd5e5164004a318469d2557ba9b2ae\",\n      \"name\": \"files\",\n      \"label\": \"Files\",\n      \"varType\": \"file\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"7c62fb66347f480cbc5f949fe0136078\",\n      \"isHidden\": false\n    },\n    \"5472efa7417d4e649cfb0995a9f14799\": {\n      \"id\": \"5472efa7417d4e649cfb0995a9f14799\",\n      \"name\": \"prompt\",\n      \"label\": \"Prompt\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"5dd6352d90df45959af53803fb02bdaf\": {\n      \"id\": \"5dd6352d90df45959af53803fb02bdaf\",\n      \"name\": \"allow_user_to_skip\",\n      \"label\": \"Allow_user_to_skip\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"8a2ffc0953564a87900dc8ce6cafadad\": {\n      \"id\": \"8a2ffc0953564a87900dc8ce6cafadad\",\n      \"name\": \"max_file_count\",\n      \"label\": \"Max_file_count\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"0b075eb449d14a2ba92f569572c785e6\": {\n      \"id\": \"0b075eb449d14a2ba92f569572c785e6\",\n      \"name\": \"max_file_size\",\n      \"label\": \"Max_file_size\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"16c1f07c62044b60904e436ec37e6f7d\": {\n      \"id\": \"16c1f07c62044b60904e436ec37e6f7d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"max_file_count\",\n      \"label\": \"max_file_count\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fa0efe7917f6404396f10e40dabe631a\": {\n      \"id\": \"fa0efe7917f6404396f10e40dabe631a\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"max_file_size\",\n      \"label\": \"max_file_size\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c1add054385747b8b817334711afb3ee\": {\n      \"id\": \"c1add054385747b8b817334711afb3ee\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"1\"\n      },\n      \"name\": \"max_retry_count\",\n      \"label\": \"max_retry_count\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d486be030e70474994df141a375bef7d\": {\n      \"id\": \"d486be030e70474994df141a375bef7d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"final_list\",\n      \"label\": \"final_list\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fc38540b2de340709d1f716c23e0b5fe\": {\n      \"id\": \"fc38540b2de340709d1f716c23e0b5fe\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"failed_list\",\n      \"label\": \"failed_list\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9cddbc2c9d4c48769cd8816e1e27bec6\": {\n      \"id\": \"9cddbc2c9d4c48769cd8816e1e27bec6\",\n      \"name\": \"reupload_attachment\",\n      \"label\": \"Reupload Attachment\",\n      \"varType\": \"file\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"a5554936e8c148ae8b0370a369fdff00\",\n      \"isHidden\": false\n    },\n    \"a81c70c0743a4f1096cfa40bcfda9b4a\": {\n      \"id\": \"a81c70c0743a4f1096cfa40bcfda9b4a\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"retry_attempts_left\",\n      \"label\": \"retry_attempts_left\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6278561a1c3644b58a3d1aed68d2a7e0\": {\n      \"id\": \"6278561a1c3644b58a3d1aed68d2a7e0\",\n      \"name\": \"try_again_message\",\n      \"label\": \"Try_again_message\",\n      \"defaultValue\": \"Please try uploading again.\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"7870c050634f456eaae0660b7f9a4c81\": {\n      \"id\": \"7870c050634f456eaae0660b7f9a4c81\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"failed_message_count\",\n      \"label\": \"failed_message_count\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"8994c0dbfc374eabba184624877fb08f\": {\n      \"id\": \"8994c0dbfc374eabba184624877fb08f\",\n      \"name\": \"ask_to_reupload\",\n      \"label\": \"Ask To Reupload\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"0cbc2fb456d340d98c017bae3a73ad6a\",\n      \"isHidden\": false\n    },\n    \"313f21dfba794ed49882efdd2118bd8b\": {\n      \"id\": \"313f21dfba794ed49882efdd2118bd8b\",\n      \"name\": \"user_confirmation_to_repload_msg\",\n      \"label\": \"User_confirmation_to_repload_msg\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"ecdf0ee3f44b46b6970b03b2c235891f\": {\n      \"id\": \"ecdf0ee3f44b46b6970b03b2c235891f\",\n      \"name\": \"allow_all_file_types\",\n      \"label\": \"Allow_all_file_types\",\n      \"defaultValue\": \"true\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b7d00116b42449afb4929effec6d6afc\",\n      \"isHidden\": false\n    },\n    \"95c2b5da639f4cfc8972689839ba9a06\": {\n      \"id\": \"95c2b5da639f4cfc8972689839ba9a06\",\n      \"name\": \"files_image_only\",\n      \"label\": \"Files Image Only\",\n      \"varType\": \"image\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"d88b3276ce7b4021977abe66f40962c7\",\n      \"isHidden\": false\n    },\n    \"40ae209357e743759b89cac258fe041d\": {\n      \"id\": \"40ae209357e743759b89cac258fe041d\",\n      \"name\": \"reupload_attachment_image_only\",\n      \"label\": \"Reupload Attachment Image Only\",\n      \"varType\": \"image\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"c7c1c5db53c04526929a47c35d1c4636\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"272b209377892110ea3707c77b5a99c3","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_272b209377892110ea3707c77b5a99c3","sys_updated_by":"admin","sys_created_on":"2023-02-21 10:37:04","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"ba2eb5c7cabc4d34a56dd568e899bff2\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"ba2eb5c7cabc4d34a56dd568e899bff2\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"ba2eb5c7cabc4d34a56dd568e899bff2\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"b7d00116b42449afb4929effec6d6afc\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"ca75d6035e914bb8888781804e09c6d0\",\"name\":\"End\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"b9cd5e5164004a318469d2557ba9b2ae\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.prompt}}\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.allow_user_to_skip.getValue();\\n})()\\n\"},\"id\":\"7c62fb66347f480cbc5f949fe0136078\",\"name\":\"files\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_file_upload_count_limit = vaInputs.max_file_count.getValue();\\n    vaVars.global_file_upload_size_limit = vaInputs.max_file_size.getValue();\\n})()\\n\",\"id\":\"5fbf237d20454ac4a96ec045b81c4c74\",\"name\":\"set variables\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var uploaded_list = [];\\n    var uploadFailed_list = [];\\n    var fileControl = vaInputs.allow_all_file_types.getValue() ? vaInputs.files : vaInputs.files_image_only;\\n    var successStatus = [\\\"available\\\", null]; // null state when scan is disabled\\n    for(var index=0; index<fileControl.getFiles().length; index++) {\\n        var file = fileControl.getFiles()[index];\\n        var attachment = {\\n            \\\"contentType\\\": file.contentType,\\n            \\\"fileName\\\": file.fileName, \\n            \\\"value\\\": file.value,\\n            \\\"message\\\" : file.message,\\n            \\\"contentType\\\" : file.contentType,\\n            \\\"scanState\\\" : file.scanState,\\n            \\\"fileSize\\\" : file.fileSize\\n        };\\n        if (successStatus.indexOf(file.scanState) != -1) {\\n            uploaded_list.push(attachment);\\n        } else {\\n           uploadFailed_list.push(attachment);\\n        }\\n    }\\n\\n    vaVars.final_list = JSON.stringify(uploaded_list);\\n    vaVars.failed_list = JSON.stringify(uploadFailed_list);\\n})()\\n\",\"id\":\"263f2c5b888a415db1e54e17a2767b2d\",\"name\":\"Filter Attachments\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Some Attachment Download failed\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var applies =  JSON.parse(vaVars.failed_list).length > 0\\n    return applies;\\n})()\\n\"},\"id\":\"4832af2b62ce4313a713c6a6e49f561f\",\"name\":\"Some Attachment Download failed\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"None failed\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var applies = JSON.parse(vaVars.failed_list).length <= 0\\n    return applies;\\n})()\\n\"},\"id\":\"12a7725b0eb149f6a4ea0d0ed36eeba0\",\"name\":\"None failed\"}],\"id\":\"eb8de8637597492d9b7355684702f871\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"9cddbc2c9d4c48769cd8816e1e27bec6\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.try_again_message}}\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return true;\\n})()\\n\"},\"id\":\"a5554936e8c148ae8b0370a369fdff00\",\"name\":\"Reupload attachment\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var message = gs.getProperty(\\\"com.glide.cs.general.multi_file_upload_failed_for_msg\\\");\\n    return message;\\n})()\\n\"}],\"id\":\"10fa1ef93ad74dfcbb330321b89052e8\",\"name\":\"Upload failed for message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.failed_list = \\\"\\\";\\n    var uploaded_list = JSON.parse(vaVars.final_list);\\n    var uploadFailed_list = [];\\n    var fileControl = vaInputs.allow_all_file_types.getValue() ? vaInputs.reupload_attachment : vaInputs.reupload_attachment_image_only;\\n    var successStatus = [\\\"available\\\", null]; // null state when scan is disabled\\n    for(var index=0; index<fileControl.getFiles().length; index++) {\\n        var file = fileControl.getFiles()[index];\\n        var attachment = {\\n            \\\"contentType\\\": file.contentType,\\n            \\\"fileName\\\": file.fileName, \\n            \\\"value\\\": file.value,\\n            \\\"message\\\" : file.message,\\n            \\\"contentType\\\" : file.contentType,\\n            \\\"scanState\\\" : file.scanState,\\n            \\\"fileSize\\\" : file.fileSize\\n        };\\n        gs.info(\\\"test file: \\\"+ JSON.stringify(attachment));\\n        if (successStatus.indexOf(file.scanState) != -1) {\\n            uploaded_list.push(attachment);\\n        } else {\\n           uploadFailed_list.push(attachment);\\n        }\\n    }\\n    vaVars.failed_message_count = 0;\\n    vaVars.final_list = JSON.stringify(uploaded_list);\\n    vaVars.failed_list = JSON.stringify(uploadFailed_list);\\n})()\\n\",\"id\":\"8e053c58fcb345a7ae1062b969683023\",\"name\":\"Save reuploaded attachments\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"reupload skipped\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"NO\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"reupload_attachmentISNOTEMPTY^ORvaInputs.reupload_attachment_image_onlyISNOTEMPTY\"},\"id\":\"46800ead578040d0af0aa4c404045f50\",\"name\":\"NO\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"reupload_attachmentISEMPTY^reupload_attachment_image_onlyISEMPTY\"},\"id\":\"d0b0ca7b857f468c87e7969793483e9d\",\"name\":\"Yes\"}],\"id\":\"12ea619f21f3427aa960e360d3440a67\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var failed = JSON.parse(vaVars.failed_list);\\n    var message = failed[vaVars.failed_message_count -1 ].message;\\n    return message;\\n})()\\n\"}],\"id\":\"218b60ce2f744f01a798076ff4a9495e\",\"name\":\"Failed message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Attachment upload failed message\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Send more message\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var failed = JSON.parse(vaVars.failed_list);\\n    var failed_list_length = failed.length;\\n    if (vaVars.failed_message_count >= failed_list_length)\\n       return false;\\n    else \\n       return true;\\n})()\\n\"},\"id\":\"58489fdda6ce4c79b5a9a9a6d306822e\",\"name\":\"Send more message\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No More message\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var failed = JSON.parse(vaVars.failed_list);\\n    var failed_list_length = failed.length;\\n    if(vaVars.failed_message_count >= failed_list_length)\\n    return true;\\n    else \\n    return false;\\n})()\\n\"},\"id\":\"c124d4efe73f47d79a2ee92d65c526c1\",\"name\":\"No More message\"}],\"id\":\"84c8921a6c60414aa1f0e4d8106f2be9\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n   var temp = vaVars.failed_message_count +1;\\n    vaVars.failed_message_count = temp;\\n})()\\n\",\"id\":\"6684bd1e2dac46cd87cf95d1b6be7d54\",\"name\":\"increase counter\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Skip\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"filesISNOTEMPTY^ORvaInputs.files_image_onlyISNOTEMPTY\"},\"id\":\"73405294e5184bee94cdbc1e5302c5d0\",\"name\":\"No\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"filesISEMPTY^files_image_onlyISEMPTY\"},\"id\":\"cbf106cfc61c410f9ddc1cb067f7797c\",\"name\":\"Yes\"}],\"id\":\"f13130227e834abdaf13baabc2aaf80e\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Some failed\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var failedListSize = JSON.parse(vaVars.failed_list).length;\\n    if (failedListSize <= 0)\\n       return false;\\n    else \\n       return true;\\n})()\\n\"},\"id\":\"427ef57c75ed450686d8864295bbbe8e\",\"name\":\"Some failed\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"All Success\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var failedListSize = JSON.parse(vaVars.failed_list).length;\\n    if (failedListSize <= 0)\\n       return true;\\n    else\\n       return false\\n})()\\n\"},\"id\":\"352f6b027a4c496e8fac77c8eb63c002\",\"name\":\"All Success\"}],\"id\":\"ac266968a1da4355ab51e032af1dd212\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"8994c0dbfc374eabba184624877fb08f\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.user_confirmation_to_repload_msg}}\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"0cbc2fb456d340d98c017bae3a73ad6a\",\"name\":\"ask to reupload\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"User wants to reupload\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"ask_to_reupload=\"},\"id\":\"7a5c9c4b401d4f28a607d9cf71fc72d6\",\"name\":\"No\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"ask_to_reupload=true\"},\"id\":\"0c9b105bd7f840f98289e9deb53e3968\",\"name\":\"Yes\"}],\"id\":\"495cb6a069084c2399d41ec77bb5c1a5\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"FileType\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Allow all types\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"allow_all_file_types=true\"},\"id\":\"f69177628b314f3a8253415286200971\",\"name\":\"Allow all types\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Allow image only\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"allow_all_file_types=\"},\"id\":\"4096d62d1c8749ab9b8e78437f6c1c84\",\"name\":\"Allow image only\"}],\"id\":\"3cb4aded10774e3c8c54641a912e364b\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"95c2b5da639f4cfc8972689839ba9a06\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.prompt}}\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.allow_user_to_skip.getValue();\\n})()\\n\"},\"id\":\"d88b3276ce7b4021977abe66f40962c7\",\"name\":\"files image only\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"FileType\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Allow all types\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"allow_all_file_types=true\"},\"id\":\"6d6f09c4762740e097383207b85ef259\",\"name\":\"Allow all types\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Allow Image only\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"allow_all_file_types=false\"},\"id\":\"6d20ceb3c76340c6a705566679cfd3bb\",\"name\":\"Allow Image only\"}],\"id\":\"fb61efca7e0f4c28af45d57672f4275a\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"40ae209357e743759b89cac258fe041d\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.try_again_message}}\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return true;\\n})()\\n\"},\"id\":\"c7c1c5db53c04526929a47c35d1c4636\",\"name\":\"Reupload attachment image only\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_file_upload_count_limit = '0';\\n    vaVars.global_file_upload_size_limit = '0';\\n})()\\n\",\"id\":\"00357471349046e281d539dab0a1c655\",\"name\":\"Set Context variables\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"a5554936e8c148ae8b0370a369fdff00\",\"target_node_id\":\"12ea619f21f3427aa960e360d3440a67\",\"id\":\"e467032358f84321b054d3a6d895a248\"},{\"type\":\"Edge\",\"source_node_id\":\"eb8de8637597492d9b7355684702f871\",\"target_node_id\":\"10fa1ef93ad74dfcbb330321b89052e8\",\"branch_id\":\"4832af2b62ce4313a713c6a6e49f561f\",\"id\":\"8edcb408bf434882983758a0ae3bc828\",\"name\":\"4832af2b62ce4313a713c6a6e49f561f\"},{\"type\":\"Edge\",\"source_node_id\":\"7c62fb66347f480cbc5f949fe0136078\",\"target_node_id\":\"f13130227e834abdaf13baabc2aaf80e\",\"id\":\"7b1acafc0a3a4ef780b6177daaeb68c9\"},{\"type\":\"Edge\",\"source_node_id\":\"eb8de8637597492d9b7355684702f871\",\"target_node_id\":\"00357471349046e281d539dab0a1c655\",\"branch_id\":\"12a7725b0eb149f6a4ea0d0ed36eeba0\",\"id\":\"0856371d1ef64d15826ba1c9a3a7962b\",\"name\":\"12a7725b0eb149f6a4ea0d0ed36eeba0\"},{\"type\":\"Edge\",\"source_node_id\":\"b7d00116b42449afb4929effec6d6afc\",\"target_node_id\":\"5fbf237d20454ac4a96ec045b81c4c74\",\"id\":\"45439bd696874661a5614ff07a7b8d8d\"},{\"type\":\"Edge\",\"source_node_id\":\"263f2c5b888a415db1e54e17a2767b2d\",\"target_node_id\":\"eb8de8637597492d9b7355684702f871\",\"id\":\"34da5a0a35fc4bae8b062cee23917d8c\"},{\"type\":\"Edge\",\"source_node_id\":\"12ea619f21f3427aa960e360d3440a67\",\"target_node_id\":\"8e053c58fcb345a7ae1062b969683023\",\"branch_id\":\"46800ead578040d0af0aa4c404045f50\",\"id\":\"69c23804e82f48c5928608a532f27706\",\"name\":\"46800ead578040d0af0aa4c404045f50\"},{\"type\":\"Edge\",\"source_node_id\":\"12ea619f21f3427aa960e360d3440a67\",\"target_node_id\":\"00357471349046e281d539dab0a1c655\",\"branch_id\":\"d0b0ca7b857f468c87e7969793483e9d\",\"id\":\"381f97e3a5e44adf8fdb5a385450d861\",\"name\":\"d0b0ca7b857f468c87e7969793483e9d\"},{\"type\":\"Edge\",\"source_node_id\":\"218b60ce2f744f01a798076ff4a9495e\",\"target_node_id\":\"84c8921a6c60414aa1f0e4d8106f2be9\",\"id\":\"48441724d2ea442db9c488aaf16855b0\"},{\"type\":\"Edge\",\"source_node_id\":\"84c8921a6c60414aa1f0e4d8106f2be9\",\"target_node_id\":\"6684bd1e2dac46cd87cf95d1b6be7d54\",\"branch_id\":\"58489fdda6ce4c79b5a9a9a6d306822e\",\"id\":\"9ad1dcb5729049a582c9b2c603a53acf\",\"name\":\"58489fdda6ce4c79b5a9a9a6d306822e\"},{\"type\":\"Edge\",\"source_node_id\":\"10fa1ef93ad74dfcbb330321b89052e8\",\"target_node_id\":\"6684bd1e2dac46cd87cf95d1b6be7d54\",\"id\":\"26d5a7dbc4f847a2a348dc4a6aa6652e\"},{\"type\":\"Edge\",\"source_node_id\":\"6684bd1e2dac46cd87cf95d1b6be7d54\",\"target_node_id\":\"218b60ce2f744f01a798076ff4a9495e\",\"id\":\"6bd34bf0356d43a4926baad40a8166ac\"},{\"type\":\"Edge\",\"source_node_id\":\"f13130227e834abdaf13baabc2aaf80e\",\"target_node_id\":\"263f2c5b888a415db1e54e17a2767b2d\",\"branch_id\":\"73405294e5184bee94cdbc1e5302c5d0\",\"id\":\"f6e3a1b55f0f498bbb911ef181793313\",\"name\":\"73405294e5184bee94cdbc1e5302c5d0\"},{\"type\":\"Edge\",\"source_node_id\":\"8e053c58fcb345a7ae1062b969683023\",\"target_node_id\":\"ac266968a1da4355ab51e032af1dd212\",\"id\":\"ad24d0b9eb6f430383314b079c4e59a6\"},{\"type\":\"Edge\",\"source_node_id\":\"ac266968a1da4355ab51e032af1dd212\",\"target_node_id\":\"10fa1ef93ad74dfcbb330321b89052e8\",\"branch_id\":\"427ef57c75ed450686d8864295bbbe8e\",\"id\":\"af95c2f1b846483c967e2c77edf7a736\",\"name\":\"427ef57c75ed450686d8864295bbbe8e\"},{\"type\":\"Edge\",\"source_node_id\":\"ac266968a1da4355ab51e032af1dd212\",\"target_node_id\":\"00357471349046e281d539dab0a1c655\",\"branch_id\":\"352f6b027a4c496e8fac77c8eb63c002\",\"id\":\"2d17eaf01b2f4942b9dc69341e62a505\",\"name\":\"352f6b027a4c496e8fac77c8eb63c002\"},{\"type\":\"Edge\",\"source_node_id\":\"84c8921a6c60414aa1f0e4d8106f2be9\",\"target_node_id\":\"0cbc2fb456d340d98c017bae3a73ad6a\",\"branch_id\":\"c124d4efe73f47d79a2ee92d65c526c1\",\"id\":\"d2ec2977c8604a319ee5169d14af0d45\",\"name\":\"c124d4efe73f47d79a2ee92d65c526c1\"},{\"type\":\"Edge\",\"source_node_id\":\"0cbc2fb456d340d98c017bae3a73ad6a\",\"target_node_id\":\"495cb6a069084c2399d41ec77bb5c1a5\",\"id\":\"28efac18c92d4a798a2bd539cecde168\"},{\"type\":\"Edge\",\"source_node_id\":\"495cb6a069084c2399d41ec77bb5c1a5\",\"target_node_id\":\"00357471349046e281d539dab0a1c655\",\"branch_id\":\"7a5c9c4b401d4f28a607d9cf71fc72d6\",\"id\":\"f8081444c502452bbf4ab620b3226db1\",\"name\":\"7a5c9c4b401d4f28a607d9cf71fc72d6\"},{\"type\":\"Edge\",\"source_node_id\":\"5fbf237d20454ac4a96ec045b81c4c74\",\"target_node_id\":\"3cb4aded10774e3c8c54641a912e364b\",\"id\":\"341b1ef836284e3283c63d52e9edc925\"},{\"type\":\"Edge\",\"source_node_id\":\"3cb4aded10774e3c8c54641a912e364b\",\"target_node_id\":\"7c62fb66347f480cbc5f949fe0136078\",\"branch_id\":\"f69177628b314f3a8253415286200971\",\"id\":\"53335eb6049d4f16b041ba6ad8837229\",\"name\":\"f69177628b314f3a8253415286200971\"},{\"type\":\"Edge\",\"source_node_id\":\"3cb4aded10774e3c8c54641a912e364b\",\"target_node_id\":\"d88b3276ce7b4021977abe66f40962c7\",\"branch_id\":\"4096d62d1c8749ab9b8e78437f6c1c84\",\"id\":\"ae67db77d1a24ba8927b45d8cde81e62\",\"name\":\"4096d62d1c8749ab9b8e78437f6c1c84\"},{\"type\":\"Edge\",\"source_node_id\":\"d88b3276ce7b4021977abe66f40962c7\",\"target_node_id\":\"f13130227e834abdaf13baabc2aaf80e\",\"id\":\"47a1f6b8409b484699170ffe1faa5ccf\"},{\"type\":\"Edge\",\"source_node_id\":\"495cb6a069084c2399d41ec77bb5c1a5\",\"target_node_id\":\"fb61efca7e0f4c28af45d57672f4275a\",\"branch_id\":\"0c9b105bd7f840f98289e9deb53e3968\",\"id\":\"e5a972b333cd404dbe497a647cd9dd07\",\"name\":\"0c9b105bd7f840f98289e9deb53e3968\"},{\"type\":\"Edge\",\"source_node_id\":\"fb61efca7e0f4c28af45d57672f4275a\",\"target_node_id\":\"a5554936e8c148ae8b0370a369fdff00\",\"branch_id\":\"6d6f09c4762740e097383207b85ef259\",\"id\":\"8ab81b9a167049a3831f7268a472d083\",\"name\":\"6d6f09c4762740e097383207b85ef259\"},{\"type\":\"Edge\",\"source_node_id\":\"fb61efca7e0f4c28af45d57672f4275a\",\"target_node_id\":\"c7c1c5db53c04526929a47c35d1c4636\",\"branch_id\":\"6d20ceb3c76340c6a705566679cfd3bb\",\"id\":\"8c8c1ec1d0ee490484326e325f4d807e\",\"name\":\"6d20ceb3c76340c6a705566679cfd3bb\"},{\"type\":\"Edge\",\"source_node_id\":\"c7c1c5db53c04526929a47c35d1c4636\",\"target_node_id\":\"12ea619f21f3427aa960e360d3440a67\",\"id\":\"fcfb5ce0a5214eba96985469465bc2d4\"},{\"type\":\"Edge\",\"source_node_id\":\"f13130227e834abdaf13baabc2aaf80e\",\"target_node_id\":\"00357471349046e281d539dab0a1c655\",\"branch_id\":\"cbf106cfc61c410f9ddc1cb067f7797c\",\"id\":\"61abde98750c483cb0b57c57f072dc40\",\"name\":\"cbf106cfc61c410f9ddc1cb067f7797c\"},{\"type\":\"Edge\",\"source_node_id\":\"00357471349046e281d539dab0a1c655\",\"target_node_id\":\"ca75d6035e914bb8888781804e09c6d0\",\"id\":\"4a5f83e962224e15bea1af9006194b81\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"max_file_count\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"16c1f07c62044b60904e436ec37e6f7d\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"max_file_size\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"fa0efe7917f6404396f10e40dabe631a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"max_retry_count\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"1\"},\"list\":false,\"id\":\"c1add054385747b8b817334711afb3ee\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"final_list\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"d486be030e70474994df141a375bef7d\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"failed_list\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"fc38540b2de340709d1f716c23e0b5fe\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"retry_attempts_left\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"a81c70c0743a4f1096cfa40bcfda9b4a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"failed_message_count\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"0\"},\"list\":false,\"id\":\"7870c050634f456eaae0660b7f9a4c81\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"File\",\"type\":\"File\",\"id\":\"b9cd5e5164004a318469d2557ba9b2ae\",\"name\":\"files\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"prompt\",\"list\":false,\"id\":\"5472efa7417d4e649cfb0995a9f14799\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"type\":\"True/False\",\"id\":\"5dd6352d90df45959af53803fb02bdaf\",\"name\":\"allow_user_to_skip\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"max_file_count\",\"list\":false,\"id\":\"8a2ffc0953564a87900dc8ce6cafadad\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"max_file_size\",\"list\":false,\"id\":\"0b075eb449d14a2ba92f569572c785e6\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"File\",\"type\":\"File\",\"id\":\"9cddbc2c9d4c48769cd8816e1e27bec6\",\"name\":\"reupload_attachment\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"try_again_message\",\"list\":false,\"id\":\"6278561a1c3644b58a3d1aed68d2a7e0\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"type\":\"True/False\",\"id\":\"8994c0dbfc374eabba184624877fb08f\",\"name\":\"ask_to_reupload\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"user_confirmation_to_repload_msg\",\"list\":false,\"id\":\"313f21dfba794ed49882efdd2118bd8b\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"type\":\"True/False\",\"id\":\"ecdf0ee3f44b46b6970b03b2c235891f\",\"name\":\"allow_all_file_types\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Image\",\"type\":\"Image\",\"id\":\"95c2b5da639f4cfc8972689839ba9a06\",\"name\":\"files_image_only\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Image\",\"type\":\"Image\",\"id\":\"40ae209357e743759b89cac258fe041d\",\"name\":\"reupload_attachment_image_only\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"prompt\",\"label\":\"prompt\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"5472efa7417d4e649cfb0995a9f14799\",\"type\":\"String\"},{\"name\":\"allow_user_to_skip\",\"label\":\"allow_user_to_skip\",\"default-value\":\"false\",\"required\":false,\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"5dd6352d90df45959af53803fb02bdaf\",\"type\":\"True/False\"},{\"name\":\"max_file_count\",\"label\":\"max_file_count\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"8a2ffc0953564a87900dc8ce6cafadad\",\"type\":\"String\"},{\"name\":\"max_file_size\",\"label\":\"max_file_size\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"0b075eb449d14a2ba92f569572c785e6\",\"type\":\"String\",\"hint\":\"Max file size in MB (accept only integer value)\"},{\"name\":\"try_again_message\",\"label\":\"try_again_message\",\"default-value\":\"\\\"Please try uploading again.\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"6278561a1c3644b58a3d1aed68d2a7e0\",\"type\":\"String\"},{\"name\":\"user_confirmation_to_repload_msg\",\"label\":\"user_confirmation_to_repload_msg\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"313f21dfba794ed49882efdd2118bd8b\",\"type\":\"String\"},{\"name\":\"allow_all_file_types\",\"label\":\"allow_all_file_types\",\"default-value\":\"true\",\"required\":false,\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"ecdf0ee3f44b46b6970b03b2c235891f\",\"type\":\"True/False\"}],\"return-values-mapping\":[{\"name\":\"files\",\"label\":\"files\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return vaVars.final_list;\\n})()\\n\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"f1103e2577812110ea3707c77b5a99a2\",\"name\":\"Multi File Upload\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"modify_confirmation_enabled\":false,\"library\":true,\"csTopicId\":\"6f2b209377892110ea3707c77b5a99be\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Multi File Upload","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"f1103e2577812110ea3707c77b5a99a2","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/6f2b209377892110ea3707c77b5a99be","value":"6f2b209377892110ea3707c77b5a99be"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"155","sys_updated_on":"2025-05-09 00:10:48","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.78\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"59546fa743bb4b34ae731c1affeb8afa\": {\n          \"id\": \"59546fa743bb4b34ae731c1affeb8afa\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"420f5b75b8db47cc8ce7438588bcf7b6\": {\n          \"id\": \"420f5b75b8db47cc8ce7438588bcf7b6\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"050486306fe042e5bfb74ddc3d8c1f13\": {\n          \"id\": \"050486306fe042e5bfb74ddc3d8c1f13\",\n          \"name\": \"Setup: Welcome Topic\",\n          \"script\": \"(function execute() {\\n    vaSystem.switchTopic(vaVars._setup_welcome_topic);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._setup_welcome_topic != '';\\n})()\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"73938d5f208b4e6ea975e75dd520500b\": {\n          \"id\": \"73938d5f208b4e6ea975e75dd520500b\",\n          \"name\": \"Post-Chat Survey\",\n          \"script\": \"(function execute() {\\n    vaSystem.invokePostChat();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaSystem.liveSupportRequestAbandoned();;\\n})()\\n\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"b9c871a4ebd64ef9b362058209c01402\": {\n          \"id\": \"b9c871a4ebd64ef9b362058209c01402\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"97d284ff86914d6db9107f829c0f81a1\": {\n          \"id\": \"97d284ff86914d6db9107f829c0f81a1\",\n          \"name\": \"Live Agent Topic\",\n          \"script\": \"(function execute() {\\n    /* Code your scripted action here. For example, you might update a \\n       record based on conditional logic:\\n    \\n        if (vaVars.my_flag == 'say hello') {\\n            gs.info('hi there');\\n        } else {\\n            gs.info('bye now');\\n        }\\n    */\\n    vaSystem.switchTopic(vaVars._topic_live_agent_topic);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"6fc326cbd0994624b65d8661c9de0b4e\": {\n          \"id\": \"6fc326cbd0994624b65d8661c9de0b4e\",\n          \"name\": \"Setup: Anything Else Topic\",\n          \"script\": \"(function execute() {\\n    if (!vaSystem.liveSupportRequestAbandoned()) {\\n        vaSystem.switchTopic(vaVars._setup_anything_else_topic);\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run \\n       and be discoverable (or not).  For example:\\n\\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\\n    */\\n    return vaVars._setup_anything_else_topic != '' && !vaSystem.didConnectToLiveAgent();\\n})()\\n\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"bffc0b1e560341d5ba4d922c4620a9f6\": {\n          \"id\": \"bffc0b1e560341d5ba4d922c4620a9f6\",\n          \"name\": \"Setup: Closing Topic\",\n          \"script\": \"(function execute() {\\n    vaSystem.switchTopic(vaVars._setup_closing_topic);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run \\n       and be discoverable (or not).  For example:\\n\\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\\n    */\\n    return vaVars._setup_closing_topic != '';\\n})()\\n\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"e4637cf06d064823a0d76a37753a8a6a\": {\n          \"id\": \"e4637cf06d064823a0d76a37753a8a6a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"41fb1811caf74f71a66f63a8231e5d71\": {\n          \"id\": \"41fb1811caf74f71a66f63a8231e5d71\",\n          \"name\": \"Preview Topic\",\n          \"script\": \"(function execute() {\\n    if (!gs.nil(vaContext.skill)) {\\n        vaSystem.executeSkill(vaContext.skill, true);\\n    } else {\\n        vaSystem.previewTopic(vaVars._topic_preview_topic);\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"676add28e59f4d718c552ae01e0972cf\": {\n          \"id\": \"676add28e59f4d718c552ae01e0972cf\",\n          \"name\": \"Pre-Chat Survey\",\n          \"script\": \"(function execute() {\\n    vaVars.global_preChatExecuted = vaSystem.invokePreChat();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\\n\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"7818e1ccaccb4e3bb674a2463ebe1960\": {\n          \"id\": \"7818e1ccaccb4e3bb674a2463ebe1960\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"0a324dc188ac4ff4b605bf72399afde0\": {\n          \"id\": \"0a324dc188ac4ff4b605bf72399afde0\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Closing Message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       var result;\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang('hi there {0}', vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang('how are you {0}', vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    return vaSystem.getClosingMessage();\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaContext.suppress_end_message) || vaContext.suppress_end_message != \\\"true\\\";\\n})()\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"isCollapsible\": true\n        },\n        \"cff26e1db5224b6ba571b9733f8fe9ee\": {\n          \"id\": \"cff26e1db5224b6ba571b9733f8fe9ee\",\n          \"name\": \"Remove Hard End Conversation Identifier\",\n          \"script\": \"(function execute() {\\n    // We want the closing conversation nodes to always be executed\\n    vaVars.global_hard_end_conversation_identifier = '';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"3f167a34de274dd0814849549f8ebdd3\": {\n          \"id\": \"3f167a34de274dd0814849549f8ebdd3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"c28f2be262af40dfad8b2f994b4be24b\": {\n          \"id\": \"c28f2be262af40dfad8b2f994b4be24b\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Show agent transcript\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n       if (!vaSystem.isAMBClient(vaContext.deviceType) || !vaSystem.didConnectToLiveAgent() || !vaSystem.isAllowTranscriptDownload()){\\n           return;\\n       }\\n    \\n       vaSystem.sendSeparatorMessage();\\n       var requesterLanguage = vaContext.getRequesterLang()\\n       var conversationEndText = gs.getMessageLang('The conversation has ended', requesterLanguage);\\n       var transcriptText = gs.getMessageLang('You can download the transcript of this conversation', requesterLanguage);\\n       var downloadButtonText = gs.getMessageLang('Download', requesterLanguage);\\n       vaSystem.sendRequesterOnlySystemMessage(conversationEndText, false)\\n       vaSystem.sendRequesterOnlySystemMessage(transcriptText, false);\\n       var singleOutMsg = new sn_cs.SinglePartOutMsg();\\n       var link = 'download_agent_transcript.do?sysparm_sys_id='+vaSystem.getConversationId();\\n       singleOutMsg.setButtonLinkPart('', downloadButtonText, link);\\n       singleOutMsg.setRequesterOnlyVisibilityType();\\n       return singleOutMsg;\\n})()\\n\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"001a5a8130664291b1cae707d4b0f25e\": {\n          \"id\": \"001a5a8130664291b1cae707d4b0f25e\",\n          \"name\": \"Show post transcript separator\",\n          \"script\": \"(function execute() {\\n       if (!vaSystem.isAMBClient(vaContext.deviceType) || !vaSystem.didConnectToLiveAgent()){\\n           return;\\n       }\\n    \\n       vaSystem.sendSeparatorMessage();\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"1641b7c053cc4b7095aa20198c07cce8\": {\n          \"id\": \"1641b7c053cc4b7095aa20198c07cce8\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"75dee429ad2c4f8084e7566e3cd0e28c\": {\n          \"id\": \"75dee429ad2c4f8084e7566e3cd0e28c\",\n          \"name\": \"Execute Default Topic\",\n          \"script\": \"(function execute() {\\n    //Switch to default topic id\\n    vaSystem.switchTopicById(vaVars._topic_default_topic);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run\\n       and be discoverable (or not).  For example:\\n\\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\\n       return applicability;\\n    */\\n    return !gs.nil(vaVars._topic_default_topic);\\n})()\\n\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"678f4c482c2e4f2683ca38d06ff68521\": {\n          \"id\": \"678f4c482c2e4f2683ca38d06ff68521\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Contextual Action Keyword as Default?\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"294ee19acf634de9b550d01caecb3458\": {\n          \"id\": \"294ee19acf634de9b550d01caecb3458\",\n          \"name\": \"Clear default topic\",\n          \"script\": \"(function execute() {\\n    vaVars.global_ca_keyword_as_default_topic = false;\\n    vaVars._topic_default_topic = \\\"\\\";\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"2871d07959564835be9c1bad7ab741c9\": {\n          \"id\": \"2871d07959564835be9c1bad7ab741c9\",\n          \"name\": \"show notifications\",\n          \"script\": \"(function execute() {\\n    if(vaVars.global_show_notifications_run) {\\n        return;\\n    }\\n    if (vaSystem.isAMBClient(vaContext.deviceType)) {\\n        var web_client_channel_id = 'ecc77b49533100102f40ddeeff7b125d';\\n        var channelGR = new GlideRecord('sys_notification_channel');\\n        channelGR.get(web_client_channel_id);\\n        vaVars._notifications_enabled = (channelGR.getValue('active') === '1') ? true : false;\\n    } else {\\n        var channelId = JSON.parse(sn_cs.VASystemObject.getProviderByProviderAppId(vaContext.providerAppId)).channelId;\\n        var cschannel = new GlideRecord('sys_cs_channel');\\n        cschannel.get('sys_id',channelId);\\n        vaVars._notifications_enabled = (cschannel.getValue('enable_notification') === '1') ? true : false;\\n    }\\n    vaVars.global_show_notifications_system_topic_trigger = true;\\n    if(vaVars._notifications_enabled) {\\n        var notifications = vaSystem.getPrevNotifications(true,100);\\n        vaVars.global_show_notifications_pending_notifications = notifications;\\n        var notificationJson = JSON.parse(notifications);\\n        if(notificationJson.length > 0) {\\n            if (vaVars.global_model_type === 'llm')\\n                vaSystem.switchTopic('Now Assist Show Notification');\\n            else\\n                vaSystem.switchTopic('Show Notification');\\n            \\n            vaSystem.sendContextualActions();\\n        }\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaSystem.getShowNotificationsPending() === 'true' && !vaSystem.isNASSConversation();\\n})()\\n\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"bccf37cc3f8a4979b7ca313645d10e2f\": {\n          \"id\": \"bccf37cc3f8a4979b7ca313645d10e2f\",\n          \"name\": \"Invoke Autopilot Topic\",\n          \"script\": \"(function execute() {\\n    vaSystem.invokeAutoPilotTopic();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"8e5bea99688f44a4b2a5069d34d4d329\": {\n          \"id\": \"8e5bea99688f44a4b2a5069d34d4d329\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Was Autopilot Invoked\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"f7bf053b33544515a816aa021f623146\": {\n          \"id\": \"f7bf053b33544515a816aa021f623146\",\n          \"name\": \"Notification Topic\",\n          \"script\": \"(function execute() {\\n    vaSystem.previewTopic(vaVars._topic_notification_topic);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"87367953227146c4889d8f7e193a5795\": {\n          \"id\": \"87367953227146c4889d8f7e193a5795\",\n          \"name\": \"Closing Topic\",\n          \"script\": \"(function execute() {\\n    //Send end conversation message only for actionable notification\\n    var notification_content = JSON.parse(vaVars.global_notification_content);\\n    if (notification_content.actionable) {\\n       vaSystem.switchTopic(vaVars._setup_closing_topic);\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"05338b20f9a44eb8916e8199edaa210c\": {\n          \"id\": \"05338b20f9a44eb8916e8199edaa210c\",\n          \"name\": \"Remove Hard End Conversation Identifier\",\n          \"script\": \"(function execute() {\\n    // We want the closing conversation nodes to always be executed when conversation is force ended during notification\\n    vaVars.global_hard_end_conversation_identifier = '';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"6635b99b81be4ba8a2e0044d3626a374\": {\n          \"id\": \"6635b99b81be4ba8a2e0044d3626a374\",\n          \"name\": \"Remove Hard End Conversation Identifier\",\n          \"script\": \"(function execute() {\\n    // We want the closing conversation nodes to always be executed when conversation is force ended during notification\\n    vaVars.global_hard_end_conversation_identifier = '';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"1c01b851f5434446932a783449833417\": {\n          \"id\": \"1c01b851f5434446932a783449833417\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"_link_account_adapter_\",\n          \"fields\": [],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic && !vaSystem.isAMBClient(vaContext.deviceType);\\n})()\\n\\n\"\n          },\n          \"reusableTopicChoice\": \"_link_account_adapter_\",\n          \"reusableTopicId\": \"0902a7d2530333006e61ddeeff7b1250\",\n          \"inputs\": {},\n          \"outputs\": [\n            {\n              \"id\": \"544df27b351547e4adb82726bcc5c51d\",\n              \"value\": \"connecttola\",\n              \"mapping\": \"connecttola\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"bdbc3fd16be44be586e658c21eeb2def\",\n              \"value\": \"linkstatus\",\n              \"mapping\": \"\",\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"544df27b351547e4adb82726bcc5c51d\",\n            \"bdbc3fd16be44be586e658c21eeb2def\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"9a767bb714f444adbcc49c56741e4bb4\": {\n          \"id\": \"9a767bb714f444adbcc49c56741e4bb4\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Should Connect to Agent\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"2728efdc7ee8407abec5fc97f94c1f8c\": {\n          \"id\": \"2728efdc7ee8407abec5fc97f94c1f8c\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Proactive Id Available?\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"0528f668f291464f91fad02d1fe5cb2e\": {\n          \"id\": \"0528f668f291464f91fad02d1fe5cb2e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Proactive Triggers Enabled?\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"529903e453a049339178db69728fec0e\": {\n          \"id\": \"529903e453a049339178db69728fec0e\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Show Proactive Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    if (gs.nil(vaVars._proactive_data))\\n        return \\\"\\\";\\n    \\n    var proactiveData = JSON.parse(vaVars._proactive_data);\\n    return proactiveData.proactiveMessage;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"isCollapsible\": true\n        },\n        \"fc160a39d1a5480994e3edca9a03455d\": {\n          \"id\": \"fc160a39d1a5480994e3edca9a03455d\",\n          \"name\": \"Get Data From Proactive Extension Point\",\n          \"script\": \"(function execute() {\\n    try {\\n        var extensionPoints = new GlideScriptedExtensionPoint().getExtensions(\\\"global.SystemTopicProactiveExtensionPoint\\\");\\n        for (var i = 0; i < extensionPoints.length; i++) {\\n            vaVars._proactive_data = JSON.stringify(extensionPoints[i].process(vaVars.proactiveId));\\n        }\\n    } catch(e) {\\n        gs.error(\\\"Error running extension point: 'global.SystemTopicProactiveExtensionPoint'\\\");\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"c432c452f09143249040fad06a1b10ed\": {\n          \"id\": \"c432c452f09143249040fad06a1b10ed\",\n          \"name\": \"Set Default Topic Id\",\n          \"script\": \"(function execute() {\\n    if (gs.nil(vaVars._proactive_data))\\n        return;\\n\\n    var proactiveData = JSON.parse(vaVars._proactive_data);\\n    if (!gs.nil(proactiveData.proactiveTopicId)) {\\n        if ( global.VAConversationHelper.isModelTypeMatchedForTopicAndConversation(proactiveData.proactiveTopicId, vaVars.global_model_type, vaContext)){\\n            vaVars._topic_default_topic = proactiveData.proactiveTopicId;\\n        }\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"43e580722d4a4f33bb5b3ede65fbd37b\": {\n          \"id\": \"43e580722d4a4f33bb5b3ede65fbd37b\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Proactive Action Control Label\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    if (gs.nil(vaVars._proactive_data))\\n        return \\\"\\\";\\n\\n    var proactiveData = JSON.parse(vaVars._proactive_data);\\n    return proactiveData.proactiveActionControlLabel;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"isCollapsible\": true\n        },\n        \"74c762fca62a41bdb237c5fc2de99ccc\": {\n          \"id\": \"74c762fca62a41bdb237c5fc2de99ccc\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"f3555168a590433bbec98b2da66ecc28\": {\n          \"id\": \"f3555168a590433bbec98b2da66ecc28\",\n          \"name\": \"Execute Skill\",\n          \"script\": \"(function execute() {\\n    vaVars.global_cancel_button_identifier = true;\\n    vaSystem.executeSkill(vaContext.skill, true);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"1515fa128ee241f68063860e3d3e918a\": {\n          \"id\": \"1515fa128ee241f68063860e3d3e918a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"a96c3c7edf8942948d2196feb93744f5\": {\n          \"id\": \"a96c3c7edf8942948d2196feb93744f5\",\n          \"name\": \"Start Skill Discovery\",\n          \"script\": \"(function execute() {\\n    vaSystem.switchTopic('_empty_skill_picker_', null, true);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"8c3a678ace30449b9e0171a6fa488dce\": {\n          \"id\": \"8c3a678ace30449b9e0171a6fa488dce\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"7213fe4c4a7047f0923ed47fd5d0b530\": {\n          \"id\": \"7213fe4c4a7047f0923ed47fd5d0b530\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"3859cd57aa934456a989df992c093d29\": {\n          \"id\": \"3859cd57aa934456a989df992c093d29\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Message: Ending Preview In Channel\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"[PREVIEW ONLY] Preview complete.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"3bcae6fda725492e9cad0a53ea0eb5a4\"\n            }\n          ],\n          \"requestFeedback\": true,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_preview_in_channel === true;\\n})()\\n\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"isCollapsible\": true\n        },\n        \"57b79ab50b8c4572a8a7c97fe9a2a5a9\": {\n          \"id\": \"57b79ab50b8c4572a8a7c97fe9a2a5a9\",\n          \"name\": \"Invoke Auto Pilot\",\n          \"script\": \"(function execute() {\\n    vaSystem.invokeAutoPilotTopic();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"a4ac834b45574a34a35743507b0d8b61\": {\n          \"id\": \"a4ac834b45574a34a35743507b0d8b61\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Was Autopilot Invoked\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"c2c517ca176b41419e3d1cea9f163e08\": {\n          \"id\": \"c2c517ca176b41419e3d1cea9f163e08\",\n          \"name\": \"Live Agent Topic\",\n          \"script\": \"(function execute() {\\n    /* Code your scripted action here. For example, you might update a \\n       record based on conditional logic:\\n    \\n        if (vaVars.my_flag == 'say hello') {\\n            gs.info('hi there');\\n        } else {\\n            gs.info('bye now');\\n        }\\n    */\\n    vaSystem.switchTopic(vaVars._topic_live_agent_topic);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"d0543c9153f44cb981e828e8eca9b8bf\": {\n          \"id\": \"d0543c9153f44cb981e828e8eca9b8bf\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Legal Disclaimer Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    if(vaVars.global_model_type === 'llm' && vaVars.global_channel_on_conversation != 'NASS') {\\n        var msg = gs.getProperty(\\\"com.glide.cs.legal_disclaimer_message\\\", 'Answers generated by AI. Review for accuracy.');\\n        vaSystem.sendRequesterOnlySystemMessage(gs.getMessageLang(msg, vaContext.getRequesterLang()), false);\\n    }\\n    return '';\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"requestFeedback\": true,\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"isCollapsible\": true\n        },\n        \"60bc27db509f48138b2accccadd0c80d\": {\n          \"id\": \"60bc27db509f48138b2accccadd0c80d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"4fa308f36bcf46239d0d35a6f6bba6e6\": {\n          \"id\": \"4fa308f36bcf46239d0d35a6f6bba6e6\",\n          \"name\": \"Evaluate Conversation Flow\",\n          \"script\": \"(function execute() {\\n    vaVars.isNASSConversation = vaSystem.isNASSConversation();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        },\n        \"e8d15f53522348fd83ee47e27615492c\": {\n          \"id\": \"e8d15f53522348fd83ee47e27615492c\",\n          \"name\": \"Apply User Knowledge Graph\",\n          \"script\": \"(function execute() {\\n    // for install/upgrade reasons, make sure apps and scripts are available\\n    if (!GlidePluginManager.isActive('com.sn.va.designer.genai')) return;\\n    if ((typeof sn_vad_genai.NowAssistVAUnifiedSearchHelper === \\\"undefined\\\")) return;\\n    var helper = new sn_vad_genai.NowAssistVAUnifiedSearchHelper();\\n    if (typeof helper.getUserKnowledgeGraph !== \\\"function\\\") return;\\n    \\n    var kgUserData = helper.getUserKnowledgeGraph(gs.getUser().getID(), vaSystem.isNowAssistConversation());\\n    if (!gs.nil(kgUserData)) {\\n        // stringifying the KG User data because we've observed some odd XStream serialiazation problems...\\n        vaSystem.applyKnowledgeGraphUserData(JSON.stringify(kgUserData));\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"da90e9c48b7a4fa180ac5f14f6848c91\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"60bc27db509f48138b2accccadd0c80d\",\n          \"target\": \"c28f2be262af40dfad8b2f994b4be24b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !gs.nil(vaVars.global_soft_end_conversation_identifier) && vaSystem.didConnectToLiveAgent();\\n})()\"\n          },\n          \"label\": \"End Conversation\"\n        },\n        {\n          \"id\": \"b95014abc1f648aab20f64bd1be8d916\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"73938d5f208b4e6ea975e75dd520500b\",\n          \"target\": \"cff26e1db5224b6ba571b9733f8fe9ee\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"427bc82773b440b2ba194b4791b61a52\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"cff26e1db5224b6ba571b9733f8fe9ee\",\n          \"target\": \"2871d07959564835be9c1bad7ab741c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"64f5cbb1ebcf4ef3b0dadcfb754b13fc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2871d07959564835be9c1bad7ab741c9\",\n          \"target\": \"05338b20f9a44eb8916e8199edaa210c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7feb42e4840e44cc8ebecfdba5ccf2f0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"05338b20f9a44eb8916e8199edaa210c\",\n          \"target\": \"7818e1ccaccb4e3bb674a2463ebe1960\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"911f7f0e3cdb404688a87fa24472721b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"7818e1ccaccb4e3bb674a2463ebe1960\",\n          \"target\": \"bffc0b1e560341d5ba4d922c4620a9f6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"NORMAL\\\";\\n})()\\n\"\n          },\n          \"label\": \"Virtual Agent Normal Mode\"\n        },\n        {\n          \"id\": \"6c72fde5c6ac4aa28a3afda82970ce13\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"60bc27db509f48138b2accccadd0c80d\",\n          \"target\": \"a96c3c7edf8942948d2196feb93744f5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.global_soft_end_conversation_identifier) || !vaSystem.didConnectToLiveAgent();\\n})()\"\n          },\n          \"label\": \"Continue Conversation\"\n        },\n        {\n          \"id\": \"2faa86922bda4a3abd51b2866a8098fe\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"41fb1811caf74f71a66f63a8231e5d71\",\n          \"target\": \"7213fe4c4a7047f0923ed47fd5d0b530\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"466d86e2720e466ba45b13b479efda1e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8c3a678ace30449b9e0171a6fa488dce\",\n          \"target\": \"bffc0b1e560341d5ba4d922c4620a9f6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !gs.nil(vaVars.global_soft_end_conversation_identifier);\\n})()\\n\"\n          },\n          \"label\": \"End Conversation\"\n        },\n        {\n          \"id\": \"10dfd7fca99249738d6ab0a8b6056a3d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"050486306fe042e5bfb74ddc3d8c1f13\",\n          \"target\": \"6fc326cbd0994624b65d8661c9de0b4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c06752e4224548a28ae1ce4d39e24da3\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e4637cf06d064823a0d76a37753a8a6a\",\n          \"target\": \"050486306fe042e5bfb74ddc3d8c1f13\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"DISCOVERABLE_PREVIEW\\\";\\n})()\\n\"\n          },\n          \"label\": \"Discoverable Preview Mode\"\n        },\n        {\n          \"id\": \"6a78bd46911241ee8d1cb5cbeed82cc8\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e4637cf06d064823a0d76a37753a8a6a\",\n          \"target\": \"41fb1811caf74f71a66f63a8231e5d71\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"PREVIEW\\\";\\n})()\\n\"\n          },\n          \"label\": \"Virtual Agent Preview Mode\"\n        },\n        {\n          \"id\": \"25e292da13ae426c8902a5d765ae684a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b9c871a4ebd64ef9b362058209c01402\",\n          \"target\": \"1641b7c053cc4b7095aa20198c07cce8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"NORMAL\\\";\\n})()\\n\"\n          },\n          \"label\": \"Virtual Agent Normal Mode\"\n        },\n        {\n          \"id\": \"f9504772e63447f8903255d6e7222951\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1641b7c053cc4b7095aa20198c07cce8\",\n          \"target\": \"75dee429ad2c4f8084e7566e3cd0e28c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars._topic_default_topic > \\\"\\\";\\n})()\\n\"\n          },\n          \"label\": \"Default Topic Parameter\"\n        },\n        {\n          \"id\": \"a55fa5d1bc374a5382398b40deb3b46b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3f167a34de274dd0814849549f8ebdd3\",\n          \"target\": \"bccf37cc3f8a4979b7ca313645d10e2f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"NORMAL\\\";\\n})()\\n\"\n          },\n          \"label\": \"Virtual Agent Normal Mode\"\n        },\n        {\n          \"id\": \"a88f7250c13a45dcb6257f96494c2950\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b9c871a4ebd64ef9b362058209c01402\",\n          \"target\": \"97d284ff86914d6db9107f829c0f81a1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"LIVE_AGENT_ONLY\\\";\\n})()\\n\"\n          },\n          \"label\": \"Live Agent Mode\"\n        },\n        {\n          \"id\": \"a13bf9875dee432595b09b958add26a7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bffc0b1e560341d5ba4d922c4620a9f6\",\n          \"target\": \"420f5b75b8db47cc8ce7438588bcf7b6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b8002bc03c624f59ba359fadcd10b794\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"59546fa743bb4b34ae731c1affeb8afa\",\n          \"target\": \"e4637cf06d064823a0d76a37753a8a6a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f5b25d42f403493188528cb078bd2b28\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"676add28e59f4d718c552ae01e0972cf\",\n          \"target\": \"b9c871a4ebd64ef9b362058209c01402\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c27ab9066a29431681a88cabfddc60e0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"7818e1ccaccb4e3bb674a2463ebe1960\",\n          \"target\": \"0a324dc188ac4ff4b605bf72399afde0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode !== \\\"NORMAL\\\";\\n})()\\n\"\n          },\n          \"label\": \"Live Agent Mode\"\n        },\n        {\n          \"id\": \"ff68a952f79d483483781a8f41b86ec4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0a324dc188ac4ff4b605bf72399afde0\",\n          \"target\": \"420f5b75b8db47cc8ce7438588bcf7b6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8e67251700e44f619c173b4e16f101ee\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3f167a34de274dd0814849549f8ebdd3\",\n          \"target\": \"bffc0b1e560341d5ba4d922c4620a9f6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"DISCOVERABLE_PREVIEW\\\";\\n})()\\n\"\n          },\n          \"label\": \"Discoverable Preview Mode\"\n        },\n        {\n          \"id\": \"a4bb424828c2468a92e83cc5fd23a36b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c28f2be262af40dfad8b2f994b4be24b\",\n          \"target\": \"001a5a8130664291b1cae707d4b0f25e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"da52d9ee05ec4ff993783e154cecb7c0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"001a5a8130664291b1cae707d4b0f25e\",\n          \"target\": \"73938d5f208b4e6ea975e75dd520500b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8993b09bd89741e5adc953e1a48fe11d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1641b7c053cc4b7095aa20198c07cce8\",\n          \"target\": \"050486306fe042e5bfb74ddc3d8c1f13\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"label\": \"Go to Welcome Topic\"\n        },\n        {\n          \"id\": \"de0793ee21bd4224968a82ede3ca7bfb\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"75dee429ad2c4f8084e7566e3cd0e28c\",\n          \"target\": \"678f4c482c2e4f2683ca38d06ff68521\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e2c6d8db1d094085a6fc065f660ae685\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"678f4c482c2e4f2683ca38d06ff68521\",\n          \"target\": \"6fc326cbd0994624b65d8661c9de0b4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"2441788b31694817aaf9d2f8fab48c60\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"678f4c482c2e4f2683ca38d06ff68521\",\n          \"target\": \"294ee19acf634de9b550d01caecb3458\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_ca_keyword_as_default_topic;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"d1c15e964814479aa2fee2a94e312ce5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"294ee19acf634de9b550d01caecb3458\",\n          \"target\": \"420f5b75b8db47cc8ce7438588bcf7b6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"606e75c7bf8646dc91af56cdc94f0b07\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"97d284ff86914d6db9107f829c0f81a1\",\n          \"target\": \"bccf37cc3f8a4979b7ca313645d10e2f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"04f00d1a10a14f959227571d7c1c2d78\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bccf37cc3f8a4979b7ca313645d10e2f\",\n          \"target\": \"8e5bea99688f44a4b2a5069d34d4d329\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"99ee61d9697143a5a19fa8647ba84c29\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8e5bea99688f44a4b2a5069d34d4d329\",\n          \"target\": \"c28f2be262af40dfad8b2f994b4be24b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return gs.nil(vaVars.global_auto_pilot_indicator);\\n;\\n})()\\n\"\n          },\n          \"label\": \"No, end the conversation\"\n        },\n        {\n          \"id\": \"a99907fc797d446396d0f61807f06101\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8e5bea99688f44a4b2a5069d34d4d329\",\n          \"target\": \"97d284ff86914d6db9107f829c0f81a1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return !gs.nil(vaVars.global_auto_pilot_indicator);\\n})()\\n\"\n          },\n          \"label\": \"Yes, transfer back to the agent\"\n        },\n        {\n          \"id\": \"21270d44ec2b4204956be341407f813a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e4637cf06d064823a0d76a37753a8a6a\",\n          \"target\": \"f7bf053b33544515a816aa021f623146\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_client_mode == \\\"NOTIFICATION\\\";\\n})()\\n\"\n          },\n          \"label\": \"Virtual Agent Notification Mode\"\n        },\n        {\n          \"id\": \"fdcb368e13214ca387357a8a0a0baf7f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"87367953227146c4889d8f7e193a5795\",\n          \"target\": \"420f5b75b8db47cc8ce7438588bcf7b6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"658de020084e41d3a4685a2878173636\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f7bf053b33544515a816aa021f623146\",\n          \"target\": \"6635b99b81be4ba8a2e0044d3626a374\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"521f7aca4e8e4c709461b625a49c8802\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6635b99b81be4ba8a2e0044d3626a374\",\n          \"target\": \"87367953227146c4889d8f7e193a5795\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9f49c9f57a944e53bf192272b10bf96e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9a767bb714f444adbcc49c56741e4bb4\",\n          \"target\": \"97d284ff86914d6db9107f829c0f81a1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.connecttola=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"4d2b061680da4eb78977b0bc2775a7a9\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2728efdc7ee8407abec5fc97f94c1f8c\",\n          \"target\": \"1c01b851f5434446932a783449833417\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.proactiveId);\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"9a0f1ad5320e4f01910a62cd353e24b0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2728efdc7ee8407abec5fc97f94c1f8c\",\n          \"target\": \"0528f668f291464f91fad02d1fe5cb2e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !gs.nil(vaVars.proactiveId);\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"ac17014bb42b4318b97ec9c47dbe4291\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0528f668f291464f91fad02d1fe5cb2e\",\n          \"target\": \"1c01b851f5434446932a783449833417\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !(gs.getProperty(\\\"sn_pt.com.glide.cs.proactive_trigger.enabled\\\", false) == \\\"true\\\");\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"a4610b1f04a6404b911f5ea159814293\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"0528f668f291464f91fad02d1fe5cb2e\",\n          \"target\": \"fc160a39d1a5480994e3edca9a03455d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.getProperty(\\\"sn_pt.com.glide.cs.proactive_trigger.enabled\\\", false) == \\\"true\\\";\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"61c83d01dcb54f0eb25e3ed729015d4e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"fc160a39d1a5480994e3edca9a03455d\",\n          \"target\": \"529903e453a049339178db69728fec0e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2e9aaa74abac4490aca7c8b235dcba16\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c432c452f09143249040fad06a1b10ed\",\n          \"target\": \"1c01b851f5434446932a783449833417\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2f6148d5692a4d91b063cad47230ff68\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"529903e453a049339178db69728fec0e\",\n          \"target\": \"43e580722d4a4f33bb5b3ede65fbd37b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2ec97f9ed7574988a449806fbb86dbf3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"43e580722d4a4f33bb5b3ede65fbd37b\",\n          \"target\": \"c432c452f09143249040fad06a1b10ed\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"710ee53d30744f5f979c0c93835e6ed3\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e4637cf06d064823a0d76a37753a8a6a\",\n          \"target\": \"74c762fca62a41bdb237c5fc2de99ccc\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_client_mode != \\\"PREVIEW\\\" \\n        && vaVars.global_client_mode != \\\"DISCOVERABLE_PREVIEW\\\"\\n        && vaVars.global_client_mode != \\\"NOTIFICATION\\\";\\n})()\\n\"\n          },\n          \"label\": \"Not Preview\"\n        },\n        {\n          \"id\": \"a82063e98baa4e1cae3c6ea4e4ddbf65\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"74c762fca62a41bdb237c5fc2de99ccc\",\n          \"target\": \"2728efdc7ee8407abec5fc97f94c1f8c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n        return vaContext.deviceType != \\\"nowassistpanel\\\" || gs.nil(vaContext.skill);\\n})()\\n\"\n          },\n          \"label\": \"Do Not Execute Skill\"\n        },\n        {\n          \"id\": \"644581a8abff47088206c1cc7fadbec3\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"74c762fca62a41bdb237c5fc2de99ccc\",\n          \"target\": \"f3555168a590433bbec98b2da66ecc28\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaContext.deviceType == \\\"nowassistpanel\\\" && !gs.nil(vaContext.skill);\\n})()\\n\"\n          },\n          \"label\": \"Execute Skill\"\n        },\n        {\n          \"id\": \"45d90902a00f4dab83033c72ec0914b3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f3555168a590433bbec98b2da66ecc28\",\n          \"target\": \"a96c3c7edf8942948d2196feb93744f5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"df6193efa0e04303a80aebb7c8605d95\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1515fa128ee241f68063860e3d3e918a\",\n          \"target\": \"3f167a34de274dd0814849549f8ebdd3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaContext.deviceType != \\\"nowassistpanel\\\" && !vaVars.isNASSConversation;\\n})()\\n\"\n          },\n          \"label\": \"Not Now Assist Panel\"\n        },\n        {\n          \"id\": \"25c5f8f4672b4ef9abfeed066e1bb22b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a96c3c7edf8942948d2196feb93744f5\",\n          \"target\": \"6fc326cbd0994624b65d8661c9de0b4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3578dba9ce334eee9827c19ca3732dc4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1515fa128ee241f68063860e3d3e918a\",\n          \"target\": \"8c3a678ace30449b9e0171a6fa488dce\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaContext.deviceType == \\\"nowassistpanel\\\";\\n})()\\n\"\n          },\n          \"label\": \"Now Assist Panel\"\n        },\n        {\n          \"id\": \"f9eb97c37cb74d31a05ff61ec7341db8\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8c3a678ace30449b9e0171a6fa488dce\",\n          \"target\": \"a96c3c7edf8942948d2196feb93744f5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.global_soft_end_conversation_identifier);\\n})()\\n\"\n          },\n          \"label\": \"Continue Conversation\"\n        },\n        {\n          \"id\": \"0565ff70c35c49f9993351ab09b1fdee\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"7213fe4c4a7047f0923ed47fd5d0b530\",\n          \"target\": \"3859cd57aa934456a989df992c093d29\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return !vaSystem.didConnectToLiveAgent();\\n})()\\n\"\n          },\n          \"label\": \"Not Live Agent\"\n        },\n        {\n          \"id\": \"6077da11b8884878a75d95f1da0dcb39\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3859cd57aa934456a989df992c093d29\",\n          \"target\": \"420f5b75b8db47cc8ce7438588bcf7b6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a7829947d6ed462d952e0b24d1401239\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"7213fe4c4a7047f0923ed47fd5d0b530\",\n          \"target\": \"57b79ab50b8c4572a8a7c97fe9a2a5a9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaSystem.didConnectToLiveAgent();\\n})()\\n\"\n          },\n          \"label\": \"Live Agent\"\n        },\n        {\n          \"id\": \"91ec0f94b7a14e61b1fda30335e7f17b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"57b79ab50b8c4572a8a7c97fe9a2a5a9\",\n          \"target\": \"a4ac834b45574a34a35743507b0d8b61\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c8bdcec6eddb47ffacfb9241cbcd6371\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a4ac834b45574a34a35743507b0d8b61\",\n          \"target\": \"c2c517ca176b41419e3d1cea9f163e08\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return !gs.nil(vaVars.global_auto_pilot_indicator);\\n})()\\n\"\n          },\n          \"label\": \"Yes, transfer back to agent\"\n        },\n        {\n          \"id\": \"9dfef48ba253443c9dad4331e67c2756\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c2c517ca176b41419e3d1cea9f163e08\",\n          \"target\": \"3859cd57aa934456a989df992c093d29\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"46ff23db04424e84a214024e8649643c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a4ac834b45574a34a35743507b0d8b61\",\n          \"target\": \"3859cd57aa934456a989df992c093d29\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"\"\n          },\n          \"label\": \"No, end the conversation\"\n        },\n        {\n          \"id\": \"f77fabc83ba645bdbbf05770dfd2a465\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9a767bb714f444adbcc49c56741e4bb4\",\n          \"target\": \"d0543c9153f44cb981e828e8eca9b8bf\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var applies = vaSystem.isAMBClient(vaContext.deviceType) || vaInputs.connecttola != 'true'\\n    return applies;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"a65a771305ef473692b0dbed570a5eb2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d0543c9153f44cb981e828e8eca9b8bf\",\n          \"target\": \"676add28e59f4d718c552ae01e0972cf\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7ba9dcbb648e4a56b120aa2c8665943c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1515fa128ee241f68063860e3d3e918a\",\n          \"target\": \"60bc27db509f48138b2accccadd0c80d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.isNASSConversation;\\n})()\\n\"\n          },\n          \"label\": \"NASS\"\n        },\n        {\n          \"id\": \"c54a215acec443d1a16c0e73cb770dca\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6fc326cbd0994624b65d8661c9de0b4e\",\n          \"target\": \"4fa308f36bcf46239d0d35a6f6bba6e6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ced45eea5be840ff97683ec9eeb7d9f4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4fa308f36bcf46239d0d35a6f6bba6e6\",\n          \"target\": \"1515fa128ee241f68063860e3d3e918a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2ea5ff72cdb246188efbc114900c728d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1c01b851f5434446932a783449833417\",\n          \"target\": \"e8d15f53522348fd83ee47e27615492c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ff58d7b1bdb3458e9790d06778e8adf2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e8d15f53522348fd83ee47e27615492c\",\n          \"target\": \"9a767bb714f444adbcc49c56741e4bb4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"9e5a37b082a74741973d19c2ce173888\": {\n      \"id\": \"9e5a37b082a74741973d19c2ce173888\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_picker_control\",\n      \"label\": \"_topic_picker_control\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"06133b56a6944cde891ec5031b2eb0c2\": {\n      \"id\": \"06133b56a6944cde891ec5031b2eb0c2\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_setup_welcome_topic\",\n      \"label\": \"_setup_welcome_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3d6994a6adad4490a41525ac34989485\": {\n      \"id\": \"3d6994a6adad4490a41525ac34989485\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_setup_survey_topic\",\n      \"label\": \"_setup_survey_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"598dad2cb04b4c2ba7719895fa3325c0\": {\n      \"id\": \"598dad2cb04b4c2ba7719895fa3325c0\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_live_agent_topic\",\n      \"label\": \"_topic_live_agent_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"38722e07383c4fdea7c107925786da48\": {\n      \"id\": \"38722e07383c4fdea7c107925786da48\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_preview_topic\",\n      \"label\": \"_topic_preview_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"157fbe6ca4714e0a84e5ef20d1c2ff5a\": {\n      \"id\": \"157fbe6ca4714e0a84e5ef20d1c2ff5a\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_setup_anything_else_topic\",\n      \"label\": \"_setup_anything_else_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"840a346aab824e6ca4a071b8d6beb017\": {\n      \"id\": \"840a346aab824e6ca4a071b8d6beb017\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_setup_explore_help_topic\",\n      \"label\": \"_setup_explore_help_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"8ba5354719cd4ad39ca94abc592144dd\": {\n      \"id\": \"8ba5354719cd4ad39ca94abc592144dd\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_setup_closing_topic\",\n      \"label\": \"_setup_closing_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"b5afeac2be9c4b968db1cdf2ab8d8090\": {\n      \"id\": \"b5afeac2be9c4b968db1cdf2ab8d8090\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_default_topic\",\n      \"label\": \"_topic_default_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f9180e7cbf374c499a51de1b628b6d13\": {\n      \"id\": \"f9180e7cbf374c499a51de1b628b6d13\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_proactive_data\",\n      \"label\": \"_proactive_data\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"544df27b351547e4adb82726bcc5c51d\": {\n      \"id\": \"544df27b351547e4adb82726bcc5c51d\",\n      \"name\": \"connecttola\",\n      \"label\": \"Connecttola\",\n      \"defaultValue\": \"connecttola\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"1c01b851f5434446932a783449833417\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"275985007314330025d032e954f6a72e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_275985007314330025d032e954f6a72e","sys_updated_by":"admin","sys_created_on":"2019-03-15 06:23:33","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"cb7df964c15e4a77baf0fa5b421ba0a2\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"cb7df964c15e4a77baf0fa5b421ba0a2\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"cb7df964c15e4a77baf0fa5b421ba0a2\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"59546fa743bb4b34ae731c1affeb8afa\",\"name\":\"Start\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"420f5b75b8db47cc8ce7438588bcf7b6\",\"name\":\"End\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.switchTopic(vaVars._setup_welcome_topic);\\n})()\\n\",\"id\":\"050486306fe042e5bfb74ddc3d8c1f13\",\"name\":\"Setup: Welcome Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return vaVars._setup_welcome_topic != '';\\n})()})()\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.invokePostChat();\\n})()\\n\",\"id\":\"73938d5f208b4e6ea975e75dd520500b\",\"name\":\"Post-Chat Survey\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return !vaSystem.liveSupportRequestAbandoned();;\\n})()\\n})()\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Virtual Agent Normal Mode\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"NORMAL\\\";\\n})()\\n})()\"},\"id\":\"62988ee3f12e458895fdfc2fa3443341\",\"name\":\"Virtual Agent Normal Mode\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Live Agent Mode\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"LIVE_AGENT_ONLY\\\";\\n})()\\n})()\"},\"id\":\"0dda53911fc1441da6a517791ede2850\",\"name\":\"Live Agent Mode\",\"expert_mode\":false}],\"id\":\"b9c871a4ebd64ef9b362058209c01402\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    /* Code your scripted action here. For example, you might update a \\n       record based on conditional logic:\\n    \\n        if (vaVars.my_flag == 'say hello') {\\n            gs.info('hi there');\\n        } else {\\n            gs.info('bye now');\\n        }\\n    */\\n    vaSystem.switchTopic(vaVars._topic_live_agent_topic);\\n})()\\n\",\"id\":\"97d284ff86914d6db9107f829c0f81a1\",\"name\":\"Live Agent Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if (!vaSystem.liveSupportRequestAbandoned()) {\\n        vaSystem.switchTopic(vaVars._setup_anything_else_topic);\\n    }\\n})()\\n\",\"id\":\"6fc326cbd0994624b65d8661c9de0b4e\",\"name\":\"Setup: Anything Else Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run \\n       and be discoverable (or not).  For example:\\n\\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\\n    */\\n    return vaVars._setup_anything_else_topic != '' && !vaSystem.didConnectToLiveAgent();\\n})()\\n})()\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.switchTopic(vaVars._setup_closing_topic);\\n})()\\n\",\"id\":\"bffc0b1e560341d5ba4d922c4620a9f6\",\"name\":\"Setup: Closing Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run \\n       and be discoverable (or not).  For example:\\n\\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\\n    */\\n    return vaVars._setup_closing_topic != '';\\n})()\\n})()\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Discoverable Preview Mode\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"DISCOVERABLE_PREVIEW\\\";\\n})()\\n})()\"},\"id\":\"8a66eaa22da44e21ba6c030bd9f12d36\",\"name\":\"Discoverable Preview Mode\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Virtual Agent Preview Mode\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"PREVIEW\\\";\\n})()\\n})()\"},\"id\":\"11d6f791a52640a18fe59384f7c391f5\",\"name\":\"Virtual Agent Preview Mode\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Virtual Agent Notification Mode\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return vaVars.global_client_mode == \\\"NOTIFICATION\\\";\\n})()\\n})()\"},\"id\":\"fcaea1b05d0e4b5bbaee2d607ea541d2\",\"name\":\"Virtual Agent Notification Mode\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Not Preview\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return vaVars.global_client_mode != \\\"PREVIEW\\\" \\n        && vaVars.global_client_mode != \\\"DISCOVERABLE_PREVIEW\\\"\\n        && vaVars.global_client_mode != \\\"NOTIFICATION\\\";\\n})()\\n})()\"},\"id\":\"90384a93826d4091adfc62ad9d3e77e5\",\"name\":\"Not Preview\",\"expert_mode\":false}],\"id\":\"e4637cf06d064823a0d76a37753a8a6a\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if (!gs.nil(vaContext.skill)) {\\n        vaSystem.executeSkill(vaContext.skill, true);\\n    } else {\\n        vaSystem.previewTopic(vaVars._topic_preview_topic);\\n    }\\n})()\\n\",\"id\":\"41fb1811caf74f71a66f63a8231e5d71\",\"name\":\"Preview Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_preChatExecuted = vaSystem.invokePreChat();\\n})()\\n\",\"id\":\"676add28e59f4d718c552ae01e0972cf\",\"name\":\"Pre-Chat Survey\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\\n})()\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Virtual Agent Normal Mode\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"NORMAL\\\";\\n})()\\n})()\"},\"id\":\"adcc62287878457e8bc236fbb7f51e53\",\"name\":\"Virtual Agent Normal Mode\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Live Agent Mode\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode !== \\\"NORMAL\\\";\\n})()\\n})()\"},\"id\":\"4a73a922094d45a1a8c8ecaf36a2c991\",\"name\":\"Live Agent Mode\",\"expert_mode\":false}],\"id\":\"7818e1ccaccb4e3bb674a2463ebe1960\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       var result;\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang('hi there {0}', vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang('how are you {0}', vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    return vaSystem.getClosingMessage();\\n})()\\n\"}],\"request_feedback\":true,\"isCollapsible\":true,\"id\":\"0a324dc188ac4ff4b605bf72399afde0\",\"name\":\"Closing Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return gs.nil(vaContext.suppress_end_message) || vaContext.suppress_end_message != \\\"true\\\";\\n})()})()\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    // We want the closing conversation nodes to always be executed\\n    vaVars.global_hard_end_conversation_identifier = '';\\n})()\\n\",\"id\":\"cff26e1db5224b6ba571b9733f8fe9ee\",\"name\":\"Remove Hard End Conversation Identifier\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Virtual Agent Normal Mode\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"NORMAL\\\";\\n})()\\n})()\"},\"id\":\"1849643c191d4d3181afa70becf7bc33\",\"name\":\"Virtual Agent Normal Mode\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Discoverable Preview Mode\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.global_client_mode == \\\"DISCOVERABLE_PREVIEW\\\";\\n})()\\n})()\"},\"id\":\"8e80580676dc42ab886348c0d5fe4d2e\",\"name\":\"Discoverable Preview Mode\",\"expert_mode\":false}],\"id\":\"3f167a34de274dd0814849549f8ebdd3\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"c28f2be262af40dfad8b2f994b4be24b\",\"name\":\"Show agent transcript\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n       if (!vaSystem.isAMBClient(vaContext.deviceType) || !vaSystem.didConnectToLiveAgent() || !vaSystem.isAllowTranscriptDownload()){\\n           return;\\n       }\\n    \\n       vaSystem.sendSeparatorMessage();\\n       var requesterLanguage = vaContext.getRequesterLang()\\n       var conversationEndText = gs.getMessageLang('The conversation has ended', requesterLanguage);\\n       var transcriptText = gs.getMessageLang('You can download the transcript of this conversation', requesterLanguage);\\n       var downloadButtonText = gs.getMessageLang('Download', requesterLanguage);\\n       vaSystem.sendRequesterOnlySystemMessage(conversationEndText, false)\\n       vaSystem.sendRequesterOnlySystemMessage(transcriptText, false);\\n       var singleOutMsg = new sn_cs.SinglePartOutMsg();\\n       var link = 'download_agent_transcript.do?sysparm_sys_id='+vaSystem.getConversationId();\\n       singleOutMsg.setButtonLinkPart('', downloadButtonText, link);\\n       singleOutMsg.setRequesterOnlyVisibilityType();\\n       return singleOutMsg;\\n})()\\n\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n       if (!vaSystem.isAMBClient(vaContext.deviceType) || !vaSystem.didConnectToLiveAgent()){\\n           return;\\n       }\\n    \\n       vaSystem.sendSeparatorMessage();\\n})()\",\"id\":\"001a5a8130664291b1cae707d4b0f25e\",\"name\":\"Show post transcript separator\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Default Topic Parameter\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars._topic_default_topic > \\\"\\\";\\n})()\\n})()\"},\"id\":\"c2d05dbdbdbb43888ed3c666b7a3186e\",\"name\":\"Default Topic Parameter\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Go to Welcome Topic\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"\"},\"id\":\"814d219b5797469bbe234c876e963e15\",\"name\":\"Go to Welcome Topic\",\"expert_mode\":false}],\"id\":\"1641b7c053cc4b7095aa20198c07cce8\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    //Switch to default topic id\\n    vaSystem.switchTopicById(vaVars._topic_default_topic);\\n})()\\n\",\"id\":\"75dee429ad2c4f8084e7566e3cd0e28c\",\"name\":\"Execute Default Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run\\n       and be discoverable (or not).  For example:\\n\\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\\n       return applicability;\\n    */\\n    return !gs.nil(vaVars._topic_default_topic);\\n})()\\n})()\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Contextual Action Keyword as Default?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\\n})()\"},\"id\":\"976eb1552a9a4025b8b9223f8eb6bb6d\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return vaVars.global_ca_keyword_as_default_topic;\\n})()\\n})()\"},\"id\":\"f88f14fd7fcf41889bf20d74d3081e9d\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"678f4c482c2e4f2683ca38d06ff68521\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_ca_keyword_as_default_topic = false;\\n    vaVars._topic_default_topic = \\\"\\\";\\n})()\\n\",\"id\":\"294ee19acf634de9b550d01caecb3458\",\"name\":\"Clear default topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if(vaVars.global_show_notifications_run) {\\n        return;\\n    }\\n    if (vaSystem.isAMBClient(vaContext.deviceType)) {\\n        var web_client_channel_id = 'ecc77b49533100102f40ddeeff7b125d';\\n        var channelGR = new GlideRecord('sys_notification_channel');\\n        channelGR.get(web_client_channel_id);\\n        vaVars._notifications_enabled = (channelGR.getValue('active') === '1') ? true : false;\\n    } else {\\n        var channelId = JSON.parse(sn_cs.VASystemObject.getProviderByProviderAppId(vaContext.providerAppId)).channelId;\\n        var cschannel = new GlideRecord('sys_cs_channel');\\n        cschannel.get('sys_id',channelId);\\n        vaVars._notifications_enabled = (cschannel.getValue('enable_notification') === '1') ? true : false;\\n    }\\n    vaVars.global_show_notifications_system_topic_trigger = true;\\n    if(vaVars._notifications_enabled) {\\n        var notifications = vaSystem.getPrevNotifications(true,100);\\n        vaVars.global_show_notifications_pending_notifications = notifications;\\n        var notificationJson = JSON.parse(notifications);\\n        if(notificationJson.length > 0) {\\n            if (vaVars.global_model_type === 'llm')\\n                vaSystem.switchTopic('Now Assist Show Notification');\\n            else\\n                vaSystem.switchTopic('Show Notification');\\n            \\n            vaSystem.sendContextualActions();\\n        }\\n    }\\n})()\",\"id\":\"2871d07959564835be9c1bad7ab741c9\",\"name\":\"show notifications\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return vaSystem.getShowNotificationsPending() === 'true' && !vaSystem.isNASSConversation();\\n})()\\n})()\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.invokeAutoPilotTopic();\\n})()\\n\",\"id\":\"bccf37cc3f8a4979b7ca313645d10e2f\",\"name\":\"Invoke Autopilot Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Was Autopilot Invoked\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No, end the conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return gs.nil(vaVars.global_auto_pilot_indicator);\\n;\\n})()\\n})()\"},\"id\":\"b9502c5212d448e1afa1a9ad12e30fbd\",\"name\":\"No, end the conversation\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes, transfer back to the agent\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return !gs.nil(vaVars.global_auto_pilot_indicator);\\n})()\\n})()\"},\"id\":\"0e7e49ed10644321b6cef64199061246\",\"name\":\"Yes, transfer back to the agent\",\"expert_mode\":false}],\"id\":\"8e5bea99688f44a4b2a5069d34d4d329\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.previewTopic(vaVars._topic_notification_topic);\\n})()\\n\",\"id\":\"f7bf053b33544515a816aa021f623146\",\"name\":\"Notification Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    //Send end conversation message only for actionable notification\\n    var notification_content = JSON.parse(vaVars.global_notification_content);\\n    if (notification_content.actionable) {\\n       vaSystem.switchTopic(vaVars._setup_closing_topic);\\n    }\\n})()\\n\",\"id\":\"87367953227146c4889d8f7e193a5795\",\"name\":\"Closing Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    // We want the closing conversation nodes to always be executed when conversation is force ended during notification\\n    vaVars.global_hard_end_conversation_identifier = '';\\n})()\\n\",\"id\":\"05338b20f9a44eb8916e8199edaa210c\",\"name\":\"Remove Hard End Conversation Identifier\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    // We want the closing conversation nodes to always be executed when conversation is force ended during notification\\n    vaVars.global_hard_end_conversation_identifier = '';\\n})()\\n\",\"id\":\"6635b99b81be4ba8a2e0044d3626a374\",\"name\":\"Remove Hard End Conversation Identifier\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"_link_account_adapter_\",\"library_topic_id\":\"0902a7d2530333006e61ddeeff7b1250\",\"library_topic_is_template\":false,\"parameter-mappings\":[],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"connecttola\",\"main_topic_mapped_variable_name\":\"connecttola\"}],\"header_card_fields\":[],\"id\":\"1c01b851f5434446932a783449833417\",\"name\":\"_link_account_adapter_\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic && !vaSystem.isAMBClient(vaContext.deviceType);\\n})()\\n\\n})()\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Should Connect to Agent\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"connecttola=true\"},\"id\":\"5ce07ad277ec4258b167a4bd0f7b056e\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    var applies = vaSystem.isAMBClient(vaContext.deviceType) || vaInputs.connecttola != 'true'\\n    return applies;\\n})()\\n})()\"},\"id\":\"9c75d37c69c349c094899834c5db176c\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"9a767bb714f444adbcc49c56741e4bb4\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Is Proactive Id Available?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return gs.nil(vaVars.proactiveId);\\n})()\\n})()\"},\"id\":\"60638e0c86774499b91ea2baa721ba18\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return !gs.nil(vaVars.proactiveId);\\n})()\\n})()\"},\"id\":\"607d31dfe84b4cd9a8c1470d200472f7\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"2728efdc7ee8407abec5fc97f94c1f8c\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Is Proactive Triggers Enabled?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return !(gs.getProperty(\\\"sn_pt.com.glide.cs.proactive_trigger.enabled\\\", false) == \\\"true\\\");\\n})()\\n})()\"},\"id\":\"29359577abe74840b9baaabc2bd2d1e6\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return gs.getProperty(\\\"sn_pt.com.glide.cs.proactive_trigger.enabled\\\", false) == \\\"true\\\";\\n})()\\n})()\"},\"id\":\"36e3b2ef6d144e9986479512fcd13d01\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"0528f668f291464f91fad02d1fe5cb2e\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (gs.nil(vaVars._proactive_data))\\n        return \\\"\\\";\\n    \\n    var proactiveData = JSON.parse(vaVars._proactive_data);\\n    return proactiveData.proactiveMessage;\\n})()\\n\"}],\"request_feedback\":true,\"isCollapsible\":true,\"id\":\"529903e453a049339178db69728fec0e\",\"name\":\"Show Proactive Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    try {\\n        var extensionPoints = new GlideScriptedExtensionPoint().getExtensions(\\\"global.SystemTopicProactiveExtensionPoint\\\");\\n        for (var i = 0; i < extensionPoints.length; i++) {\\n            vaVars._proactive_data = JSON.stringify(extensionPoints[i].process(vaVars.proactiveId));\\n        }\\n    } catch(e) {\\n        gs.error(\\\"Error running extension point: 'global.SystemTopicProactiveExtensionPoint'\\\");\\n    }\\n})()\\n\",\"id\":\"fc160a39d1a5480994e3edca9a03455d\",\"name\":\"Get Data From Proactive Extension Point\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if (gs.nil(vaVars._proactive_data))\\n        return;\\n\\n    var proactiveData = JSON.parse(vaVars._proactive_data);\\n    if (!gs.nil(proactiveData.proactiveTopicId)) {\\n        if ( global.VAConversationHelper.isModelTypeMatchedForTopicAndConversation(proactiveData.proactiveTopicId, vaVars.global_model_type, vaContext)){\\n            vaVars._topic_default_topic = proactiveData.proactiveTopicId;\\n        }\\n    }\\n})()\\n\",\"id\":\"c432c452f09143249040fad06a1b10ed\",\"name\":\"Set Default Topic Id\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (gs.nil(vaVars._proactive_data))\\n        return \\\"\\\";\\n\\n    var proactiveData = JSON.parse(vaVars._proactive_data);\\n    return proactiveData.proactiveActionControlLabel;\\n})()\\n\"}],\"request_feedback\":true,\"isCollapsible\":true,\"id\":\"43e580722d4a4f33bb5b3ede65fbd37b\",\"name\":\"Proactive Action Control Label\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Do Not Execute Skill\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n        return vaContext.deviceType != \\\"nowassistpanel\\\" || gs.nil(vaContext.skill);\\n})()\\n})()\"},\"id\":\"330e94ed178e494cb9be60a95049c219\",\"name\":\"Do Not Execute Skill\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Execute Skill\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return vaContext.deviceType == \\\"nowassistpanel\\\" && !gs.nil(vaContext.skill);\\n})()\\n})()\"},\"id\":\"4e03b40ccbc34b5ab8afbf85f558d741\",\"name\":\"Execute Skill\",\"expert_mode\":false}],\"id\":\"74c762fca62a41bdb237c5fc2de99ccc\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_cancel_button_identifier = true;\\n    vaSystem.executeSkill(vaContext.skill, true);\\n})()\\n\",\"id\":\"f3555168a590433bbec98b2da66ecc28\",\"name\":\"Execute Skill\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Not Now Assist Panel\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return vaContext.deviceType != \\\"nowassistpanel\\\" && !vaVars.isNASSConversation;\\n})()\\n})()\"},\"id\":\"f89aad44f471435196bd2dced03cb817\",\"name\":\"Not Now Assist Panel\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Now Assist Panel\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return vaContext.deviceType == \\\"nowassistpanel\\\";\\n})()\\n})()\"},\"id\":\"e8438f6611f047ceb6af973e8979dc41\",\"name\":\"Now Assist Panel\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"NASS\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return vaVars.isNASSConversation;\\n})()\\n})()\"},\"id\":\"fa14e73398e443b99d6aa34f9956d315\",\"name\":\"NASS\",\"expert_mode\":false}],\"id\":\"1515fa128ee241f68063860e3d3e918a\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.switchTopic('_empty_skill_picker_', null, true);\\n})()\\n\",\"id\":\"a96c3c7edf8942948d2196feb93744f5\",\"name\":\"Start Skill Discovery\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"End Conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return !gs.nil(vaVars.global_soft_end_conversation_identifier);\\n})()\\n})()\"},\"id\":\"cd2903c0aaea424fb26e4ea7c8df67e7\",\"name\":\"End Conversation\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Continue Conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return gs.nil(vaVars.global_soft_end_conversation_identifier);\\n})()\\n})()\"},\"id\":\"cfa755c6a0fb4b41aa041e4c3616af62\",\"name\":\"Continue Conversation\",\"expert_mode\":false}],\"id\":\"8c3a678ace30449b9e0171a6fa488dce\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Not Live Agent\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return !vaSystem.didConnectToLiveAgent();\\n})()\\n})()\"},\"id\":\"bce5ce9abb83496ba13a40581cecc7b0\",\"name\":\"Not Live Agent\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Live Agent\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaSystem.didConnectToLiveAgent();\\n})()\\n})()\"},\"id\":\"5edddd24a0754bfcb398c425f06a0558\",\"name\":\"Live Agent\",\"expert_mode\":false}],\"id\":\"7213fe4c4a7047f0923ed47fd5d0b530\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"[PREVIEW ONLY] Preview complete.\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"isCollapsible\":true,\"id\":\"3859cd57aa934456a989df992c093d29\",\"name\":\"Message: Ending Preview In Channel\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return vaVars.global_preview_in_channel === true;\\n})()\\n})()\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.invokeAutoPilotTopic();\\n})()\\n\",\"id\":\"57b79ab50b8c4572a8a7c97fe9a2a5a9\",\"name\":\"Invoke Auto Pilot\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Was Autopilot Invoked\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes, transfer back to agent\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return !gs.nil(vaVars.global_auto_pilot_indicator);\\n})()\\n})()\"},\"id\":\"7ea7787ff56949c880e5b2a4569f4e62\",\"name\":\"Yes, transfer back to agent\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No, end the conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"\"},\"id\":\"d4e5405d3d2742da93726ae3f89527c1\",\"name\":\"No, end the conversation\",\"expert_mode\":false}],\"id\":\"a4ac834b45574a34a35743507b0d8b61\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    /* Code your scripted action here. For example, you might update a \\n       record based on conditional logic:\\n    \\n        if (vaVars.my_flag == 'say hello') {\\n            gs.info('hi there');\\n        } else {\\n            gs.info('bye now');\\n        }\\n    */\\n    vaSystem.switchTopic(vaVars._topic_live_agent_topic);\\n})()\\n\",\"id\":\"c2c517ca176b41419e3d1cea9f163e08\",\"name\":\"Live Agent Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if(vaVars.global_model_type === 'llm' && vaVars.global_channel_on_conversation != 'NASS') {\\n        var msg = gs.getProperty(\\\"com.glide.cs.legal_disclaimer_message\\\", 'Answers generated by AI. Review for accuracy.');\\n        vaSystem.sendRequesterOnlySystemMessage(gs.getMessageLang(msg, vaContext.getRequesterLang()), false);\\n    }\\n    return '';\\n})()\\n\"}],\"request_feedback\":true,\"isCollapsible\":true,\"id\":\"d0543c9153f44cb981e828e8eca9b8bf\",\"name\":\"Legal Disclaimer Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"End Conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return !gs.nil(vaVars.global_soft_end_conversation_identifier) && vaSystem.didConnectToLiveAgent();\\n})()})()\"},\"id\":\"de196f452b914480a95f9d425edbc34b\",\"name\":\"End Conversation\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Continue Conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function() { return (function execute() {\\n    return gs.nil(vaVars.global_soft_end_conversation_identifier) || !vaSystem.didConnectToLiveAgent();\\n})()})()\"},\"id\":\"59a4e9476bde4545a264d05a597e3dd1\",\"name\":\"Continue Conversation\",\"expert_mode\":false}],\"id\":\"60bc27db509f48138b2accccadd0c80d\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.isNASSConversation = vaSystem.isNASSConversation();\\n})()\\n\",\"id\":\"4fa308f36bcf46239d0d35a6f6bba6e6\",\"name\":\"Evaluate Conversation Flow\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    // for install/upgrade reasons, make sure apps and scripts are available\\n    if (!GlidePluginManager.isActive('com.sn.va.designer.genai')) return;\\n    if ((typeof sn_vad_genai.NowAssistVAUnifiedSearchHelper === \\\"undefined\\\")) return;\\n    var helper = new sn_vad_genai.NowAssistVAUnifiedSearchHelper();\\n    if (typeof helper.getUserKnowledgeGraph !== \\\"function\\\") return;\\n    \\n    var kgUserData = helper.getUserKnowledgeGraph(gs.getUser().getID(), vaSystem.isNowAssistConversation());\\n    if (!gs.nil(kgUserData)) {\\n        // stringifying the KG User data because we've observed some odd XStream serialiazation problems...\\n        vaSystem.applyKnowledgeGraphUserData(JSON.stringify(kgUserData));\\n    }\\n})()\",\"id\":\"e8d15f53522348fd83ee47e27615492c\",\"name\":\"Apply User Knowledge Graph\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"60bc27db509f48138b2accccadd0c80d\",\"target_node_id\":\"c28f2be262af40dfad8b2f994b4be24b\",\"branch_id\":\"de196f452b914480a95f9d425edbc34b\",\"id\":\"da90e9c48b7a4fa180ac5f14f6848c91\",\"name\":\"de196f452b914480a95f9d425edbc34b\"},{\"type\":\"Edge\",\"source_node_id\":\"73938d5f208b4e6ea975e75dd520500b\",\"target_node_id\":\"cff26e1db5224b6ba571b9733f8fe9ee\",\"id\":\"b95014abc1f648aab20f64bd1be8d916\"},{\"type\":\"Edge\",\"source_node_id\":\"cff26e1db5224b6ba571b9733f8fe9ee\",\"target_node_id\":\"2871d07959564835be9c1bad7ab741c9\",\"id\":\"427bc82773b440b2ba194b4791b61a52\"},{\"type\":\"Edge\",\"source_node_id\":\"2871d07959564835be9c1bad7ab741c9\",\"target_node_id\":\"05338b20f9a44eb8916e8199edaa210c\",\"id\":\"64f5cbb1ebcf4ef3b0dadcfb754b13fc\"},{\"type\":\"Edge\",\"source_node_id\":\"05338b20f9a44eb8916e8199edaa210c\",\"target_node_id\":\"7818e1ccaccb4e3bb674a2463ebe1960\",\"id\":\"7feb42e4840e44cc8ebecfdba5ccf2f0\"},{\"type\":\"Edge\",\"source_node_id\":\"7818e1ccaccb4e3bb674a2463ebe1960\",\"target_node_id\":\"bffc0b1e560341d5ba4d922c4620a9f6\",\"branch_id\":\"adcc62287878457e8bc236fbb7f51e53\",\"id\":\"911f7f0e3cdb404688a87fa24472721b\",\"name\":\"adcc62287878457e8bc236fbb7f51e53\"},{\"type\":\"Edge\",\"source_node_id\":\"60bc27db509f48138b2accccadd0c80d\",\"target_node_id\":\"a96c3c7edf8942948d2196feb93744f5\",\"branch_id\":\"59a4e9476bde4545a264d05a597e3dd1\",\"id\":\"6c72fde5c6ac4aa28a3afda82970ce13\",\"name\":\"59a4e9476bde4545a264d05a597e3dd1\"},{\"type\":\"Edge\",\"source_node_id\":\"41fb1811caf74f71a66f63a8231e5d71\",\"target_node_id\":\"7213fe4c4a7047f0923ed47fd5d0b530\",\"id\":\"2faa86922bda4a3abd51b2866a8098fe\"},{\"type\":\"Edge\",\"source_node_id\":\"8c3a678ace30449b9e0171a6fa488dce\",\"target_node_id\":\"bffc0b1e560341d5ba4d922c4620a9f6\",\"branch_id\":\"cd2903c0aaea424fb26e4ea7c8df67e7\",\"id\":\"466d86e2720e466ba45b13b479efda1e\",\"name\":\"cd2903c0aaea424fb26e4ea7c8df67e7\"},{\"type\":\"Edge\",\"source_node_id\":\"050486306fe042e5bfb74ddc3d8c1f13\",\"target_node_id\":\"6fc326cbd0994624b65d8661c9de0b4e\",\"id\":\"10dfd7fca99249738d6ab0a8b6056a3d\"},{\"type\":\"Edge\",\"source_node_id\":\"e4637cf06d064823a0d76a37753a8a6a\",\"target_node_id\":\"050486306fe042e5bfb74ddc3d8c1f13\",\"branch_id\":\"8a66eaa22da44e21ba6c030bd9f12d36\",\"id\":\"c06752e4224548a28ae1ce4d39e24da3\",\"name\":\"8a66eaa22da44e21ba6c030bd9f12d36\"},{\"type\":\"Edge\",\"source_node_id\":\"e4637cf06d064823a0d76a37753a8a6a\",\"target_node_id\":\"41fb1811caf74f71a66f63a8231e5d71\",\"branch_id\":\"11d6f791a52640a18fe59384f7c391f5\",\"id\":\"6a78bd46911241ee8d1cb5cbeed82cc8\",\"name\":\"11d6f791a52640a18fe59384f7c391f5\"},{\"type\":\"Edge\",\"source_node_id\":\"b9c871a4ebd64ef9b362058209c01402\",\"target_node_id\":\"1641b7c053cc4b7095aa20198c07cce8\",\"branch_id\":\"62988ee3f12e458895fdfc2fa3443341\",\"id\":\"25e292da13ae426c8902a5d765ae684a\",\"name\":\"62988ee3f12e458895fdfc2fa3443341\"},{\"type\":\"Edge\",\"source_node_id\":\"1641b7c053cc4b7095aa20198c07cce8\",\"target_node_id\":\"75dee429ad2c4f8084e7566e3cd0e28c\",\"branch_id\":\"c2d05dbdbdbb43888ed3c666b7a3186e\",\"id\":\"f9504772e63447f8903255d6e7222951\",\"name\":\"c2d05dbdbdbb43888ed3c666b7a3186e\"},{\"type\":\"Edge\",\"source_node_id\":\"3f167a34de274dd0814849549f8ebdd3\",\"target_node_id\":\"bccf37cc3f8a4979b7ca313645d10e2f\",\"branch_id\":\"1849643c191d4d3181afa70becf7bc33\",\"id\":\"a55fa5d1bc374a5382398b40deb3b46b\",\"name\":\"1849643c191d4d3181afa70becf7bc33\"},{\"type\":\"Edge\",\"source_node_id\":\"b9c871a4ebd64ef9b362058209c01402\",\"target_node_id\":\"97d284ff86914d6db9107f829c0f81a1\",\"branch_id\":\"0dda53911fc1441da6a517791ede2850\",\"id\":\"a88f7250c13a45dcb6257f96494c2950\",\"name\":\"0dda53911fc1441da6a517791ede2850\"},{\"type\":\"Edge\",\"source_node_id\":\"bffc0b1e560341d5ba4d922c4620a9f6\",\"target_node_id\":\"420f5b75b8db47cc8ce7438588bcf7b6\",\"id\":\"a13bf9875dee432595b09b958add26a7\"},{\"type\":\"Edge\",\"source_node_id\":\"59546fa743bb4b34ae731c1affeb8afa\",\"target_node_id\":\"e4637cf06d064823a0d76a37753a8a6a\",\"id\":\"b8002bc03c624f59ba359fadcd10b794\"},{\"type\":\"Edge\",\"source_node_id\":\"676add28e59f4d718c552ae01e0972cf\",\"target_node_id\":\"b9c871a4ebd64ef9b362058209c01402\",\"id\":\"f5b25d42f403493188528cb078bd2b28\"},{\"type\":\"Edge\",\"source_node_id\":\"7818e1ccaccb4e3bb674a2463ebe1960\",\"target_node_id\":\"0a324dc188ac4ff4b605bf72399afde0\",\"branch_id\":\"4a73a922094d45a1a8c8ecaf36a2c991\",\"id\":\"c27ab9066a29431681a88cabfddc60e0\",\"name\":\"4a73a922094d45a1a8c8ecaf36a2c991\"},{\"type\":\"Edge\",\"source_node_id\":\"0a324dc188ac4ff4b605bf72399afde0\",\"target_node_id\":\"420f5b75b8db47cc8ce7438588bcf7b6\",\"id\":\"ff68a952f79d483483781a8f41b86ec4\"},{\"type\":\"Edge\",\"source_node_id\":\"3f167a34de274dd0814849549f8ebdd3\",\"target_node_id\":\"bffc0b1e560341d5ba4d922c4620a9f6\",\"branch_id\":\"8e80580676dc42ab886348c0d5fe4d2e\",\"id\":\"8e67251700e44f619c173b4e16f101ee\",\"name\":\"8e80580676dc42ab886348c0d5fe4d2e\"},{\"type\":\"Edge\",\"source_node_id\":\"c28f2be262af40dfad8b2f994b4be24b\",\"target_node_id\":\"001a5a8130664291b1cae707d4b0f25e\",\"id\":\"a4bb424828c2468a92e83cc5fd23a36b\"},{\"type\":\"Edge\",\"source_node_id\":\"001a5a8130664291b1cae707d4b0f25e\",\"target_node_id\":\"73938d5f208b4e6ea975e75dd520500b\",\"id\":\"da52d9ee05ec4ff993783e154cecb7c0\"},{\"type\":\"Edge\",\"source_node_id\":\"1641b7c053cc4b7095aa20198c07cce8\",\"target_node_id\":\"050486306fe042e5bfb74ddc3d8c1f13\",\"branch_id\":\"814d219b5797469bbe234c876e963e15\",\"id\":\"8993b09bd89741e5adc953e1a48fe11d\",\"name\":\"814d219b5797469bbe234c876e963e15\"},{\"type\":\"Edge\",\"source_node_id\":\"75dee429ad2c4f8084e7566e3cd0e28c\",\"target_node_id\":\"678f4c482c2e4f2683ca38d06ff68521\",\"id\":\"de0793ee21bd4224968a82ede3ca7bfb\"},{\"type\":\"Edge\",\"source_node_id\":\"678f4c482c2e4f2683ca38d06ff68521\",\"target_node_id\":\"6fc326cbd0994624b65d8661c9de0b4e\",\"branch_id\":\"976eb1552a9a4025b8b9223f8eb6bb6d\",\"id\":\"e2c6d8db1d094085a6fc065f660ae685\",\"name\":\"976eb1552a9a4025b8b9223f8eb6bb6d\"},{\"type\":\"Edge\",\"source_node_id\":\"678f4c482c2e4f2683ca38d06ff68521\",\"target_node_id\":\"294ee19acf634de9b550d01caecb3458\",\"branch_id\":\"f88f14fd7fcf41889bf20d74d3081e9d\",\"id\":\"2441788b31694817aaf9d2f8fab48c60\",\"name\":\"f88f14fd7fcf41889bf20d74d3081e9d\"},{\"type\":\"Edge\",\"source_node_id\":\"294ee19acf634de9b550d01caecb3458\",\"target_node_id\":\"420f5b75b8db47cc8ce7438588bcf7b6\",\"id\":\"d1c15e964814479aa2fee2a94e312ce5\"},{\"type\":\"Edge\",\"source_node_id\":\"97d284ff86914d6db9107f829c0f81a1\",\"target_node_id\":\"bccf37cc3f8a4979b7ca313645d10e2f\",\"id\":\"606e75c7bf8646dc91af56cdc94f0b07\"},{\"type\":\"Edge\",\"source_node_id\":\"bccf37cc3f8a4979b7ca313645d10e2f\",\"target_node_id\":\"8e5bea99688f44a4b2a5069d34d4d329\",\"id\":\"04f00d1a10a14f959227571d7c1c2d78\"},{\"type\":\"Edge\",\"source_node_id\":\"8e5bea99688f44a4b2a5069d34d4d329\",\"target_node_id\":\"c28f2be262af40dfad8b2f994b4be24b\",\"branch_id\":\"b9502c5212d448e1afa1a9ad12e30fbd\",\"id\":\"99ee61d9697143a5a19fa8647ba84c29\",\"name\":\"b9502c5212d448e1afa1a9ad12e30fbd\"},{\"type\":\"Edge\",\"source_node_id\":\"8e5bea99688f44a4b2a5069d34d4d329\",\"target_node_id\":\"97d284ff86914d6db9107f829c0f81a1\",\"branch_id\":\"0e7e49ed10644321b6cef64199061246\",\"id\":\"a99907fc797d446396d0f61807f06101\",\"name\":\"0e7e49ed10644321b6cef64199061246\"},{\"type\":\"Edge\",\"source_node_id\":\"e4637cf06d064823a0d76a37753a8a6a\",\"target_node_id\":\"f7bf053b33544515a816aa021f623146\",\"branch_id\":\"fcaea1b05d0e4b5bbaee2d607ea541d2\",\"id\":\"21270d44ec2b4204956be341407f813a\",\"name\":\"fcaea1b05d0e4b5bbaee2d607ea541d2\"},{\"type\":\"Edge\",\"source_node_id\":\"87367953227146c4889d8f7e193a5795\",\"target_node_id\":\"420f5b75b8db47cc8ce7438588bcf7b6\",\"id\":\"fdcb368e13214ca387357a8a0a0baf7f\"},{\"type\":\"Edge\",\"source_node_id\":\"f7bf053b33544515a816aa021f623146\",\"target_node_id\":\"6635b99b81be4ba8a2e0044d3626a374\",\"id\":\"658de020084e41d3a4685a2878173636\"},{\"type\":\"Edge\",\"source_node_id\":\"6635b99b81be4ba8a2e0044d3626a374\",\"target_node_id\":\"87367953227146c4889d8f7e193a5795\",\"id\":\"521f7aca4e8e4c709461b625a49c8802\"},{\"type\":\"Edge\",\"source_node_id\":\"9a767bb714f444adbcc49c56741e4bb4\",\"target_node_id\":\"97d284ff86914d6db9107f829c0f81a1\",\"branch_id\":\"5ce07ad277ec4258b167a4bd0f7b056e\",\"id\":\"9f49c9f57a944e53bf192272b10bf96e\",\"name\":\"5ce07ad277ec4258b167a4bd0f7b056e\"},{\"type\":\"Edge\",\"source_node_id\":\"2728efdc7ee8407abec5fc97f94c1f8c\",\"target_node_id\":\"1c01b851f5434446932a783449833417\",\"branch_id\":\"60638e0c86774499b91ea2baa721ba18\",\"id\":\"4d2b061680da4eb78977b0bc2775a7a9\",\"name\":\"60638e0c86774499b91ea2baa721ba18\"},{\"type\":\"Edge\",\"source_node_id\":\"2728efdc7ee8407abec5fc97f94c1f8c\",\"target_node_id\":\"0528f668f291464f91fad02d1fe5cb2e\",\"branch_id\":\"607d31dfe84b4cd9a8c1470d200472f7\",\"id\":\"9a0f1ad5320e4f01910a62cd353e24b0\",\"name\":\"607d31dfe84b4cd9a8c1470d200472f7\"},{\"type\":\"Edge\",\"source_node_id\":\"0528f668f291464f91fad02d1fe5cb2e\",\"target_node_id\":\"1c01b851f5434446932a783449833417\",\"branch_id\":\"29359577abe74840b9baaabc2bd2d1e6\",\"id\":\"ac17014bb42b4318b97ec9c47dbe4291\",\"name\":\"29359577abe74840b9baaabc2bd2d1e6\"},{\"type\":\"Edge\",\"source_node_id\":\"0528f668f291464f91fad02d1fe5cb2e\",\"target_node_id\":\"fc160a39d1a5480994e3edca9a03455d\",\"branch_id\":\"36e3b2ef6d144e9986479512fcd13d01\",\"id\":\"a4610b1f04a6404b911f5ea159814293\",\"name\":\"36e3b2ef6d144e9986479512fcd13d01\"},{\"type\":\"Edge\",\"source_node_id\":\"fc160a39d1a5480994e3edca9a03455d\",\"target_node_id\":\"529903e453a049339178db69728fec0e\",\"id\":\"61c83d01dcb54f0eb25e3ed729015d4e\"},{\"type\":\"Edge\",\"source_node_id\":\"c432c452f09143249040fad06a1b10ed\",\"target_node_id\":\"1c01b851f5434446932a783449833417\",\"id\":\"2e9aaa74abac4490aca7c8b235dcba16\"},{\"type\":\"Edge\",\"source_node_id\":\"529903e453a049339178db69728fec0e\",\"target_node_id\":\"43e580722d4a4f33bb5b3ede65fbd37b\",\"id\":\"2f6148d5692a4d91b063cad47230ff68\"},{\"type\":\"Edge\",\"source_node_id\":\"43e580722d4a4f33bb5b3ede65fbd37b\",\"target_node_id\":\"c432c452f09143249040fad06a1b10ed\",\"id\":\"2ec97f9ed7574988a449806fbb86dbf3\"},{\"type\":\"Edge\",\"source_node_id\":\"e4637cf06d064823a0d76a37753a8a6a\",\"target_node_id\":\"74c762fca62a41bdb237c5fc2de99ccc\",\"branch_id\":\"90384a93826d4091adfc62ad9d3e77e5\",\"id\":\"710ee53d30744f5f979c0c93835e6ed3\",\"name\":\"90384a93826d4091adfc62ad9d3e77e5\"},{\"type\":\"Edge\",\"source_node_id\":\"74c762fca62a41bdb237c5fc2de99ccc\",\"target_node_id\":\"2728efdc7ee8407abec5fc97f94c1f8c\",\"branch_id\":\"330e94ed178e494cb9be60a95049c219\",\"id\":\"a82063e98baa4e1cae3c6ea4e4ddbf65\",\"name\":\"330e94ed178e494cb9be60a95049c219\"},{\"type\":\"Edge\",\"source_node_id\":\"74c762fca62a41bdb237c5fc2de99ccc\",\"target_node_id\":\"f3555168a590433bbec98b2da66ecc28\",\"branch_id\":\"4e03b40ccbc34b5ab8afbf85f558d741\",\"id\":\"644581a8abff47088206c1cc7fadbec3\",\"name\":\"4e03b40ccbc34b5ab8afbf85f558d741\"},{\"type\":\"Edge\",\"source_node_id\":\"f3555168a590433bbec98b2da66ecc28\",\"target_node_id\":\"a96c3c7edf8942948d2196feb93744f5\",\"id\":\"45d90902a00f4dab83033c72ec0914b3\"},{\"type\":\"Edge\",\"source_node_id\":\"1515fa128ee241f68063860e3d3e918a\",\"target_node_id\":\"3f167a34de274dd0814849549f8ebdd3\",\"branch_id\":\"f89aad44f471435196bd2dced03cb817\",\"id\":\"df6193efa0e04303a80aebb7c8605d95\",\"name\":\"f89aad44f471435196bd2dced03cb817\"},{\"type\":\"Edge\",\"source_node_id\":\"a96c3c7edf8942948d2196feb93744f5\",\"target_node_id\":\"6fc326cbd0994624b65d8661c9de0b4e\",\"id\":\"25c5f8f4672b4ef9abfeed066e1bb22b\"},{\"type\":\"Edge\",\"source_node_id\":\"1515fa128ee241f68063860e3d3e918a\",\"target_node_id\":\"8c3a678ace30449b9e0171a6fa488dce\",\"branch_id\":\"e8438f6611f047ceb6af973e8979dc41\",\"id\":\"3578dba9ce334eee9827c19ca3732dc4\",\"name\":\"e8438f6611f047ceb6af973e8979dc41\"},{\"type\":\"Edge\",\"source_node_id\":\"8c3a678ace30449b9e0171a6fa488dce\",\"target_node_id\":\"a96c3c7edf8942948d2196feb93744f5\",\"branch_id\":\"cfa755c6a0fb4b41aa041e4c3616af62\",\"id\":\"f9eb97c37cb74d31a05ff61ec7341db8\",\"name\":\"cfa755c6a0fb4b41aa041e4c3616af62\"},{\"type\":\"Edge\",\"source_node_id\":\"7213fe4c4a7047f0923ed47fd5d0b530\",\"target_node_id\":\"3859cd57aa934456a989df992c093d29\",\"branch_id\":\"bce5ce9abb83496ba13a40581cecc7b0\",\"id\":\"0565ff70c35c49f9993351ab09b1fdee\",\"name\":\"bce5ce9abb83496ba13a40581cecc7b0\"},{\"type\":\"Edge\",\"source_node_id\":\"3859cd57aa934456a989df992c093d29\",\"target_node_id\":\"420f5b75b8db47cc8ce7438588bcf7b6\",\"id\":\"6077da11b8884878a75d95f1da0dcb39\"},{\"type\":\"Edge\",\"source_node_id\":\"7213fe4c4a7047f0923ed47fd5d0b530\",\"target_node_id\":\"57b79ab50b8c4572a8a7c97fe9a2a5a9\",\"branch_id\":\"5edddd24a0754bfcb398c425f06a0558\",\"id\":\"a7829947d6ed462d952e0b24d1401239\",\"name\":\"5edddd24a0754bfcb398c425f06a0558\"},{\"type\":\"Edge\",\"source_node_id\":\"57b79ab50b8c4572a8a7c97fe9a2a5a9\",\"target_node_id\":\"a4ac834b45574a34a35743507b0d8b61\",\"id\":\"91ec0f94b7a14e61b1fda30335e7f17b\"},{\"type\":\"Edge\",\"source_node_id\":\"a4ac834b45574a34a35743507b0d8b61\",\"target_node_id\":\"c2c517ca176b41419e3d1cea9f163e08\",\"branch_id\":\"7ea7787ff56949c880e5b2a4569f4e62\",\"id\":\"c8bdcec6eddb47ffacfb9241cbcd6371\",\"name\":\"7ea7787ff56949c880e5b2a4569f4e62\"},{\"type\":\"Edge\",\"source_node_id\":\"c2c517ca176b41419e3d1cea9f163e08\",\"target_node_id\":\"3859cd57aa934456a989df992c093d29\",\"id\":\"9dfef48ba253443c9dad4331e67c2756\"},{\"type\":\"Edge\",\"source_node_id\":\"a4ac834b45574a34a35743507b0d8b61\",\"target_node_id\":\"3859cd57aa934456a989df992c093d29\",\"branch_id\":\"d4e5405d3d2742da93726ae3f89527c1\",\"id\":\"46ff23db04424e84a214024e8649643c\",\"name\":\"d4e5405d3d2742da93726ae3f89527c1\"},{\"type\":\"Edge\",\"source_node_id\":\"9a767bb714f444adbcc49c56741e4bb4\",\"target_node_id\":\"d0543c9153f44cb981e828e8eca9b8bf\",\"branch_id\":\"9c75d37c69c349c094899834c5db176c\",\"id\":\"f77fabc83ba645bdbbf05770dfd2a465\",\"name\":\"9c75d37c69c349c094899834c5db176c\"},{\"type\":\"Edge\",\"source_node_id\":\"d0543c9153f44cb981e828e8eca9b8bf\",\"target_node_id\":\"676add28e59f4d718c552ae01e0972cf\",\"id\":\"a65a771305ef473692b0dbed570a5eb2\"},{\"type\":\"Edge\",\"source_node_id\":\"1515fa128ee241f68063860e3d3e918a\",\"target_node_id\":\"60bc27db509f48138b2accccadd0c80d\",\"branch_id\":\"fa14e73398e443b99d6aa34f9956d315\",\"id\":\"7ba9dcbb648e4a56b120aa2c8665943c\",\"name\":\"fa14e73398e443b99d6aa34f9956d315\"},{\"type\":\"Edge\",\"source_node_id\":\"6fc326cbd0994624b65d8661c9de0b4e\",\"target_node_id\":\"4fa308f36bcf46239d0d35a6f6bba6e6\",\"id\":\"c54a215acec443d1a16c0e73cb770dca\"},{\"type\":\"Edge\",\"source_node_id\":\"4fa308f36bcf46239d0d35a6f6bba6e6\",\"target_node_id\":\"1515fa128ee241f68063860e3d3e918a\",\"id\":\"ced45eea5be840ff97683ec9eeb7d9f4\"},{\"type\":\"Edge\",\"source_node_id\":\"1c01b851f5434446932a783449833417\",\"target_node_id\":\"e8d15f53522348fd83ee47e27615492c\",\"id\":\"2ea5ff72cdb246188efbc114900c728d\"},{\"type\":\"Edge\",\"source_node_id\":\"e8d15f53522348fd83ee47e27615492c\",\"target_node_id\":\"9a767bb714f444adbcc49c56741e4bb4\",\"id\":\"ff58d7b1bdb3458e9790d06778e8adf2\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_topic_picker_control\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"9e5a37b082a74741973d19c2ce173888\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_setup_welcome_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"06133b56a6944cde891ec5031b2eb0c2\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_setup_survey_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"3d6994a6adad4490a41525ac34989485\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_live_agent_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"598dad2cb04b4c2ba7719895fa3325c0\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_preview_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"38722e07383c4fdea7c107925786da48\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_setup_anything_else_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"157fbe6ca4714e0a84e5ef20d1c2ff5a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_setup_explore_help_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"840a346aab824e6ca4a071b8d6beb017\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_setup_closing_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"8ba5354719cd4ad39ca94abc592144dd\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_default_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"b5afeac2be9c4b968db1cdf2ab8d8090\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_proactive_data\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"f9180e7cbf374c499a51de1b628b6d13\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"auto_select\":false,\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"connecttola\",\"list\":false,\"id\":\"544df27b351547e4adb82726bcc5c51d\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"6b425d1f3b7223009cbbcea234efc432\",\"name\":\"system\",\"key_phrases\":[\"system\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"title\":\"system\",\"library\":false,\"csTopicId\":\"78ac1b170b2003000e83c71437673ae5\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"system","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"6b425d1f3b7223009cbbcea234efc432","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/78ac1b170b2003000e83c71437673ae5","value":"78ac1b170b2003000e83c71437673ae5"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"2","sys_updated_on":"2024-03-21 19:13:06","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.55\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"0174cd70a9a64f0eaea26ba432df7540\": {\n          \"id\": \"0174cd70a9a64f0eaea26ba432df7540\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"489106b08417420590d4a0012f53196f\",\n              \"name\": \"catalogItemId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"64a44858b66a4e07a59b19494a08d62f\",\n              \"name\": \"requestedForId\",\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"489106b08417420590d4a0012f53196f\",\n            \"64a44858b66a4e07a59b19494a08d62f\"\n          ]\n        },\n        \"028a1455afea4405b41a10b6b72ed5a6\": {\n          \"id\": \"028a1455afea4405b41a10b6b72ed5a6\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"record_id\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.record_id}}\",\n                        \"displayValue\": \"Script Variablesrecord_id\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            },\n            {\n              \"key\": \"record_table\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.record_table}}\",\n                        \"displayValue\": \"Script Variablesrecord_table\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            },\n            {\n              \"key\": \"message\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.message}}\",\n                        \"displayValue\": \"Script Variablesmessage\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            },\n            {\n              \"key\": \"status\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.status}}\",\n                        \"displayValue\": \"Script Variablesstatus\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            }\n          ]\n        },\n        \"235695e48fe84609b5f139f247073ad5\": {\n          \"id\": \"235695e48fe84609b5f139f247073ad5\",\n          \"stepType\": \"CustomControl\",\n          \"name\": \"Catalog Item VA Input Control\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"Catalog Item VA Input Control\",\n          \"reusableTopicId\": \"59bf3f3c77700210c5c6b2a07b5a994f\",\n          \"inputs\": {\n            \"sysid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.catalogitemid}}\",\n                        \"displayValue\": \"Input VariablesCatalogItemId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"requestedfor\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.requestedforid}}\",\n                        \"displayValue\": \"Input VariablesRequestedForId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"forceclosecontrol\": {\n              \"value\": \"false\",\n              \"mode\": \"string\",\n              \"type\": \"True/False\"\n            },\n            \"outputvalue\": {\n              \"value\": \"\",\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"c5ad19d1d46a463f8d0e1af1807f6f2b\",\n              \"value\": \"responsefromcomponent\",\n              \"mapping\": \"responsefromcomponent\",\n              \"preventDisable\": true\n            }\n          ],\n          \"variableIds\": [\n            \"c5ad19d1d46a463f8d0e1af1807f6f2b\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false\n        },\n        \"101d91e78ab74c9b85d37e106dd6c634\": {\n          \"id\": \"101d91e78ab74c9b85d37e106dd6c634\",\n          \"name\": \"Compute output variables\",\n          \"script\": \"(function execute() {\\n    var output = {};\\n    if (!gs.nil(vaInputs.responsefromcomponent))\\n        output = JSON.parse(vaInputs.responsefromcomponent.getValue());\\n    vaVars.record_id = output.requestId ? output.requestId : \\\"\\\";\\n    vaVars.record_table = output.requestTable ? output.requestTable : \\\"\\\";\\n    vaVars.status = output.status ? output.status : \\\"\\\";\\n    vaVars.message = output.message ? output.message : \\\"\\\";\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"479f48e98b9e44a6bb13b7a3da55fc67\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0174cd70a9a64f0eaea26ba432df7540\",\n          \"target\": \"235695e48fe84609b5f139f247073ad5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"33ce177555f141bb92d2c1bdb27440cc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"235695e48fe84609b5f139f247073ad5\",\n          \"target\": \"101d91e78ab74c9b85d37e106dd6c634\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dbc15153a86b4ace99b9a3396275e121\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"101d91e78ab74c9b85d37e106dd6c634\",\n          \"target\": \"028a1455afea4405b41a10b6b72ed5a6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"489106b08417420590d4a0012f53196f\": {\n      \"id\": \"489106b08417420590d4a0012f53196f\",\n      \"name\": \"catalogitemid\",\n      \"label\": \"CatalogItemId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"0174cd70a9a64f0eaea26ba432df7540\",\n      \"isHidden\": false\n    },\n    \"64a44858b66a4e07a59b19494a08d62f\": {\n      \"id\": \"64a44858b66a4e07a59b19494a08d62f\",\n      \"name\": \"requestedforid\",\n      \"label\": \"RequestedForId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"0174cd70a9a64f0eaea26ba432df7540\",\n      \"isHidden\": false\n    },\n    \"1dd655022e5a4871902459945e49895f\": {\n      \"id\": \"1dd655022e5a4871902459945e49895f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"record_id\",\n      \"label\": \"record_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6112bfd2bcb94f61939c3d34f8c87aad\": {\n      \"id\": \"6112bfd2bcb94f61939c3d34f8c87aad\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"record_table\",\n      \"label\": \"record_table\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f4dc52c05e42451a8ff2d31d253307fd\": {\n      \"id\": \"f4dc52c05e42451a8ff2d31d253307fd\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"status\",\n      \"label\": \"status\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5ba9424d6b9641df9c114921e879c366\": {\n      \"id\": \"5ba9424d6b9641df9c114921e879c366\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"message\",\n      \"label\": \"message\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c5ad19d1d46a463f8d0e1af1807f6f2b\": {\n      \"id\": \"c5ad19d1d46a463f8d0e1af1807f6f2b\",\n      \"name\": \"responsefromcomponent\",\n      \"label\": \"Responsefromcomponent\",\n      \"defaultValue\": \"responsefromcomponent\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"235695e48fe84609b5f139f247073ad5\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"289a151977b00210c5c6b2a07b5a99ee","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3028ab3304f12210559073c06a02f7b7","value":"3028ab3304f12210559073c06a02f7b7"},"sys_update_name":"sys_cb_design_topic_289a151977b00210c5c6b2a07b5a99ee","sys_updated_by":"admin","sys_created_on":"2024-03-06 15:02:53","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"d18debdb86f342c3a8ae0ace1a230ff3\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"d18debdb86f342c3a8ae0ace1a230ff3\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"d18debdb86f342c3a8ae0ace1a230ff3\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"0174cd70a9a64f0eaea26ba432df7540\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"028a1455afea4405b41a10b6b72ed5a6\",\"name\":\"End\"},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Catalog Item VA Input Control\",\"library_topic_id\":\"59bf3f3c77700210c5c6b2a07b5a994f\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"sysid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.catalogitemid}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"requestedfor\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.requestedforid}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"forceclosecontrol\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"outputvalue\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"responsefromcomponent\",\"main_topic_mapped_variable_name\":\"responsefromcomponent\"}],\"id\":\"235695e48fe84609b5f139f247073ad5\",\"name\":\"Catalog Item VA Input Control\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var output = {};\\n    if (!gs.nil(vaInputs.responsefromcomponent))\\n        output = JSON.parse(vaInputs.responsefromcomponent.getValue());\\n    vaVars.record_id = output.requestId ? output.requestId : \\\"\\\";\\n    vaVars.record_table = output.requestTable ? output.requestTable : \\\"\\\";\\n    vaVars.status = output.status ? output.status : \\\"\\\";\\n    vaVars.message = output.message ? output.message : \\\"\\\";\\n})()\\n\",\"id\":\"101d91e78ab74c9b85d37e106dd6c634\",\"name\":\"Compute output variables\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"0174cd70a9a64f0eaea26ba432df7540\",\"target_node_id\":\"235695e48fe84609b5f139f247073ad5\",\"id\":\"479f48e98b9e44a6bb13b7a3da55fc67\"},{\"type\":\"Edge\",\"source_node_id\":\"235695e48fe84609b5f139f247073ad5\",\"target_node_id\":\"101d91e78ab74c9b85d37e106dd6c634\",\"id\":\"33ce177555f141bb92d2c1bdb27440cc\"},{\"type\":\"Edge\",\"source_node_id\":\"101d91e78ab74c9b85d37e106dd6c634\",\"target_node_id\":\"028a1455afea4405b41a10b6b72ed5a6\",\"id\":\"dbc15153a86b4ace99b9a3396275e121\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"record_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"1dd655022e5a4871902459945e49895f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"record_table\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"6112bfd2bcb94f61939c3d34f8c87aad\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"status\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"f4dc52c05e42451a8ff2d31d253307fd\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"message\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"5ba9424d6b9641df9c114921e879c366\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"catalogitemid\",\"list\":false,\"id\":\"489106b08417420590d4a0012f53196f\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"requestedforid\",\"list\":false,\"id\":\"64a44858b66a4e07a59b19494a08d62f\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"responsefromcomponent\",\"list\":false,\"id\":\"c5ad19d1d46a463f8d0e1af1807f6f2b\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"catalogitemid\",\"label\":\"catalogItemId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"489106b08417420590d4a0012f53196f\",\"type\":\"String\"},{\"name\":\"requestedforid\",\"label\":\"requestedForId\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"64a44858b66a4e07a59b19494a08d62f\",\"type\":\"String\"}],\"return-values-mapping\":[{\"name\":\"record_id\",\"label\":\"record_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.record_id}}\"}},{\"name\":\"record_table\",\"label\":\"record_table\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.record_table}}\"}},{\"name\":\"message\",\"label\":\"message\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.message}}\"}},{\"name\":\"status\",\"label\":\"status\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.status}}\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"f13e489577300210c5c6b2a07b5a9958\",\"name\":\"Request Catalog Item Inline-seismic\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"model_type\":\"nlu_keyword\",\"modify_confirmation_enabled\":false,\"library\":true,\"csTopicId\":\"689a151977b00210c5c6b2a07b5a99ea\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Request Catalog Item Inline-seismic","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"f13e489577300210c5c6b2a07b5a9958","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/689a151977b00210c5c6b2a07b5a99ea","value":"689a151977b00210c5c6b2a07b5a99ea"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"14","sys_updated_on":"2021-04-20 05:55:20","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"2a0e685053130010cf8cddeeff7b1280","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_2a0e685053130010cf8cddeeff7b1280","sys_updated_by":"admin","sys_created_on":"2020-02-26 22:22:10","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"cff056a90df54728bc3cdde2aafa9c94\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"cff056a90df54728bc3cdde2aafa9c94\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"cff056a90df54728bc3cdde2aafa9c94\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"bfd9ca3b74264a68a0b8543159566d20\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"a3817a5f7ca7439b83707b20c30fcf9c\",\"name\":\"End\"},{\"type\":\"OutputPrompt\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.greeting_message}}\"},\"id\":\"d2327c9f0cb74a2983f695746d52d0f2\",\"name\":\"Show Greeting Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.greeting_message = vaSystem.getGreetingMessage();\\n})()\\n\",\"id\":\"d9f84b23b3dc4d9891ddac278259decb\",\"name\":\"Get Greeting Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var greetingMessage = vaSystem.getTopicSelectionMessage();\\n    vaSystem.sendTopicPickerControl(greetingMessage);\\n})()\\n\",\"id\":\"3b0fa5a45fa94052bd1b546ea1f7303b\",\"name\":\"Send Topic Picker\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Search Text Not Set\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaVars.global_search_text)\\n})()\\n\"},\"id\":\"2818a16be1524fdca97515d464dca065\",\"name\":\"Search Text Not Set\"},{\"type\":\"Branch\",\"label\":\"Search Text Set\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !gs.nil(vaVars.global_search_text)\\n})()\\n\"},\"id\":\"6acce3a78e434f84879e1be53c2e9d0b\",\"name\":\"Search Text Set\"}],\"id\":\"60cdf6a874894c84841d99a073fbba0b\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Pre-chat not executed\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_preChatExecuted;\\n})()\\n\"},\"id\":\"606b2b838be64769bc2063cd4a712357\",\"name\":\"Pre-chat not executed\"},{\"type\":\"Branch\",\"label\":\"Pre-chat executed\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_preChatExecuted;\\n})()\\n\"},\"id\":\"ccb3fabcd9744888aa4c9fc71e915cad\",\"name\":\"Pre-chat executed\"}],\"id\":\"6bd621fcf54841abb81d20cde33081bb\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.topicDiscovery();\\n})()\\n\",\"id\":\"0896444786e74025bfa890732d0fbd24\",\"name\":\"Topic Discovery\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"d9f84b23b3dc4d9891ddac278259decb\",\"target_node_id\":\"d2327c9f0cb74a2983f695746d52d0f2\",\"id\":\"f2ee6b77d3094e7a909569c07969d920\"},{\"type\":\"Edge\",\"source_node_id\":\"d2327c9f0cb74a2983f695746d52d0f2\",\"target_node_id\":\"3b0fa5a45fa94052bd1b546ea1f7303b\",\"id\":\"a32eac00773045f6a9490f13b8896a8c\"},{\"type\":\"Edge\",\"source_node_id\":\"3b0fa5a45fa94052bd1b546ea1f7303b\",\"target_node_id\":\"a3817a5f7ca7439b83707b20c30fcf9c\",\"id\":\"3c89a30f457c488eaaa1ae8951b10a32\"},{\"type\":\"Edge\",\"source_node_id\":\"bfd9ca3b74264a68a0b8543159566d20\",\"target_node_id\":\"60cdf6a874894c84841d99a073fbba0b\",\"id\":\"36c63e9964114b97b4813b379293d4eb\"},{\"type\":\"Edge\",\"source_node_id\":\"60cdf6a874894c84841d99a073fbba0b\",\"target_node_id\":\"6bd621fcf54841abb81d20cde33081bb\",\"branch_id\":\"2818a16be1524fdca97515d464dca065\",\"id\":\"8ab72eaddb6b41df879b12ae8db8cb1a\",\"name\":\"2818a16be1524fdca97515d464dca065\"},{\"type\":\"Edge\",\"source_node_id\":\"6bd621fcf54841abb81d20cde33081bb\",\"target_node_id\":\"d9f84b23b3dc4d9891ddac278259decb\",\"branch_id\":\"606b2b838be64769bc2063cd4a712357\",\"id\":\"5a1fbe26a3694a50bb201a436a41dc70\",\"name\":\"606b2b838be64769bc2063cd4a712357\"},{\"type\":\"Edge\",\"source_node_id\":\"6bd621fcf54841abb81d20cde33081bb\",\"target_node_id\":\"3b0fa5a45fa94052bd1b546ea1f7303b\",\"branch_id\":\"ccb3fabcd9744888aa4c9fc71e915cad\",\"id\":\"e7fb7b1648f345ac917988f1ea6935db\",\"name\":\"ccb3fabcd9744888aa4c9fc71e915cad\"},{\"type\":\"Edge\",\"source_node_id\":\"60cdf6a874894c84841d99a073fbba0b\",\"target_node_id\":\"0896444786e74025bfa890732d0fbd24\",\"branch_id\":\"6acce3a78e434f84879e1be53c2e9d0b\",\"id\":\"f4e82879a84849dbb74b615c5ef5ef1d\",\"name\":\"6acce3a78e434f84879e1be53c2e9d0b\"},{\"type\":\"Edge\",\"source_node_id\":\"0896444786e74025bfa890732d0fbd24\",\"target_node_id\":\"a3817a5f7ca7439b83707b20c30fcf9c\",\"id\":\"3808fdfd503f48409c96a5e0867ab4f7\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"greeting_message\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"a76371dc6b5e47cf8929f621c0766d2c\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"3130eb193dc445d3ba59fa245cebc4e3\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"SETUP_TOPIC\",\"channels\":[],\"id\":\"120e685053130010cf8cddeeff7b12ab\",\"name\":\"Greetings.\",\"key_phrases\":[\"Greetings\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"auto_resolution_enabled\":false,\"library\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Greetings.","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"120e685053130010cf8cddeeff7b12ab","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/aa0e685053130010cf8cddeeff7b127d","value":"aa0e685053130010cf8cddeeff7b127d"},"sys_created_by":"admin","sys_policy":"read"},{"sys_mod_count":"28","sys_updated_on":"2023-06-12 13:26:45","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.47\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"5b76a00c11874c12a1c2d9a4f6eed44e\": {\n          \"id\": \"5b76a00c11874c12a1c2d9a4f6eed44e\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": \"(function execute() {\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\",\n            \"mode\": \"script\"\n          }\n        },\n        \"25f7424a561d4339a6ff24465373b4f2\": {\n          \"id\": \"25f7424a561d4339a6ff24465373b4f2\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": \"(function execute() {\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n})()\\n\",\n            \"mode\": \"script\"\n          }\n        },\n        \"b8836f9bdc9b460c90f51ff6542dbfb9\": {\n          \"id\": \"b8836f9bdc9b460c90f51ff6542dbfb9\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Connect to agent?\"\n        },\n        \"f346057dfb8e4c91abdeb194122c9397\": {\n          \"id\": \"f346057dfb8e4c91abdeb194122c9397\",\n          \"name\": \"Connect to agent\",\n          \"script\": \"(function execute() {\\n    vaSystem.switchToLiveAgentSetup();\\n    vaVars.global_ca_keyword_as_default_topic = false;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"da7bc64996a74db4b032f1f360050fcd\": {\n          \"id\": \"da7bc64996a74db4b032f1f360050fcd\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Resume conversation message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"secure\": false\n        },\n        \"f172a33c2d314863acc0a73fe553bf50\": {\n          \"id\": \"f172a33c2d314863acc0a73fe553bf50\",\n          \"name\": \"Post processing\",\n          \"script\": \"(function execute() {\\n    var cafContextualUtility = new CAFContextualUtility();\\n    cafContextualUtility.postProcess();   \\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7cca5ead8db144e08d29dc10be3ff641\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Confirmation\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"Please make a selection.\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"c082d91a753a44e5a548a8104025356d\",\n          \"id\": \"7cca5ead8db144e08d29dc10be3ff641\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"69185013286d4c7da34b9e3391e78f86\": {\n          \"id\": \"69185013286d4c7da34b9e3391e78f86\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"a6e2bf15ea3e40a295ae379286a623a3\": {\n          \"id\": \"a6e2bf15ea3e40a295ae379286a623a3\",\n          \"name\": \"Switch to help topic\",\n          \"script\": \"(function execute() {\\n    vaVars.global_topic_switch = true;\\n    vaVars.global_clicked_value = 'Cancel';\\n    vaSystem.isContextualActionApplicable('Help', vaContext.providerAppId, vaContext.providerUserId); \\n    vaSystem.switchTopic('b20fd17b532210105498ddeeff7b12b7');\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"423f3ff8f4bb4c69b2c516ead9b9bb35\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f346057dfb8e4c91abdeb194122c9397\",\n          \"target\": \"25f7424a561d4339a6ff24465373b4f2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9ab3ff928cdd4d19ac8ea797e4cc0878\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b8836f9bdc9b460c90f51ff6542dbfb9\",\n          \"target\": \"f346057dfb8e4c91abdeb194122c9397\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.confirmation=1\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Connect to agent\"\n        },\n        {\n          \"id\": \"1937712bf87c4c90a0c057a0b0d9f1c4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f172a33c2d314863acc0a73fe553bf50\",\n          \"target\": \"25f7424a561d4339a6ff24465373b4f2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0ca5af8bcd884219aaa7b41a4f4967db\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7cca5ead8db144e08d29dc10be3ff641\",\n          \"target\": \"b8836f9bdc9b460c90f51ff6542dbfb9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a320a6fed5b5478fa32dab8eea091607\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"da7bc64996a74db4b032f1f360050fcd\",\n          \"target\": \"f172a33c2d314863acc0a73fe553bf50\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c10c4e3694694031b25767c0dd64f25f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5b76a00c11874c12a1c2d9a4f6eed44e\",\n          \"target\": \"7cca5ead8db144e08d29dc10be3ff641\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"753b8ae9d9be49f2b0600230a2487b6b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b8836f9bdc9b460c90f51ff6542dbfb9\",\n          \"target\": \"69185013286d4c7da34b9e3391e78f86\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.confirmation=0\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Resume\"\n        },\n        {\n          \"id\": \"1af583594d87438995039a7ed86f0a06\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"69185013286d4c7da34b9e3391e78f86\",\n          \"target\": \"da7bc64996a74db4b032f1f360050fcd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\"\n          },\n          \"label\": \"Active conversation\"\n        },\n        {\n          \"id\": \"fc3591293d984b4fbc6c60e87377eac4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"69185013286d4c7da34b9e3391e78f86\",\n          \"target\": \"a6e2bf15ea3e40a295ae379286a623a3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_ca_keyword_as_default_topic;\\n})()\"\n          },\n          \"label\": \"No conversation\"\n        },\n        {\n          \"id\": \"260cf6da21d7454ca2980c22ea4b6fbb\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a6e2bf15ea3e40a295ae379286a623a3\",\n          \"target\": \"f172a33c2d314863acc0a73fe553bf50\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"c082d91a753a44e5a548a8104025356d\": {\n      \"id\": \"c082d91a753a44e5a548a8104025356d\",\n      \"name\": \"confirmation\",\n      \"label\": \"Confirmation\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Chat with agent\",\n          \"value\": \"1\"\n        },\n        {\n          \"label\": \"Cancel\",\n          \"value\": \"0\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"7cca5ead8db144e08d29dc10be3ff641\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"2bc45124537310100e99ddeeff7b12bb","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9cc37b3704b52210559073c06a02f781","value":"9cc37b3704b52210559073c06a02f781"},"sys_update_name":"sys_cb_design_topic_2bc45124537310100e99ddeeff7b12bb","sys_updated_by":"admin","sys_created_on":"2020-10-08 12:32:33","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"dd8309d00a27443c8d1f2740b340865d\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"dd8309d00a27443c8d1f2740b340865d\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"dd8309d00a27443c8d1f2740b340865d\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\"},\"id\":\"5b76a00c11874c12a1c2d9a4f6eed44e\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n})()\\n\"},\"id\":\"25f7424a561d4339a6ff24465373b4f2\",\"name\":\"End\"},{\"type\":\"Decision\",\"name\":\"Connect to agent?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Connect to agent\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"confirmation=1\"},\"id\":\"4a6143e1e72a46dcb6849eaf57a76f74\",\"name\":\"Connect to agent\"},{\"type\":\"Branch\",\"label\":\"Resume\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"confirmation=0\"},\"id\":\"f1bf37831bd9411bbbfe3382af5df2a1\",\"name\":\"Resume\"}],\"id\":\"b8836f9bdc9b460c90f51ff6542dbfb9\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.switchToLiveAgentSetup();\\n    vaVars.global_ca_keyword_as_default_topic = false;\\n})()\\n\",\"id\":\"f346057dfb8e4c91abdeb194122c9397\",\"name\":\"Connect to agent\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\\n\"}],\"id\":\"da7bc64996a74db4b032f1f360050fcd\",\"name\":\"Resume conversation message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var cafContextualUtility = new CAFContextualUtility();\\n    cafContextualUtility.postProcess();   \\n})()\",\"id\":\"f172a33c2d314863acc0a73fe553bf50\",\"name\":\"Post processing\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"7cca5ead8db144e08d29dc10be3ff641\",\"name\":\"Confirmation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\\n\"},\"variable_id\":\"c082d91a753a44e5a548a8104025356d\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Please make a selection.\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Active conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\"},\"id\":\"f5ff072c3ab94d029e5c27638c7dc44c\",\"name\":\"Active conversation\"},{\"type\":\"Branch\",\"label\":\"No conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_ca_keyword_as_default_topic;\\n})()\"},\"id\":\"11181e2920804c8d82c7dff3850238eb\",\"name\":\"No conversation\"}],\"id\":\"69185013286d4c7da34b9e3391e78f86\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_topic_switch = true;\\n    vaVars.global_clicked_value = 'Cancel';\\n    vaSystem.isContextualActionApplicable('Help', vaContext.providerAppId, vaContext.providerUserId); \\n    vaSystem.switchTopic('b20fd17b532210105498ddeeff7b12b7');\\n})()\",\"id\":\"a6e2bf15ea3e40a295ae379286a623a3\",\"name\":\"Switch to help topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"f346057dfb8e4c91abdeb194122c9397\",\"target_node_id\":\"25f7424a561d4339a6ff24465373b4f2\",\"id\":\"423f3ff8f4bb4c69b2c516ead9b9bb35\"},{\"type\":\"Edge\",\"source_node_id\":\"b8836f9bdc9b460c90f51ff6542dbfb9\",\"target_node_id\":\"f346057dfb8e4c91abdeb194122c9397\",\"branch_id\":\"4a6143e1e72a46dcb6849eaf57a76f74\",\"id\":\"9ab3ff928cdd4d19ac8ea797e4cc0878\",\"name\":\"4a6143e1e72a46dcb6849eaf57a76f74\"},{\"type\":\"Edge\",\"source_node_id\":\"f172a33c2d314863acc0a73fe553bf50\",\"target_node_id\":\"25f7424a561d4339a6ff24465373b4f2\",\"id\":\"1937712bf87c4c90a0c057a0b0d9f1c4\"},{\"type\":\"Edge\",\"source_node_id\":\"7cca5ead8db144e08d29dc10be3ff641\",\"target_node_id\":\"b8836f9bdc9b460c90f51ff6542dbfb9\",\"id\":\"0ca5af8bcd884219aaa7b41a4f4967db\"},{\"type\":\"Edge\",\"source_node_id\":\"da7bc64996a74db4b032f1f360050fcd\",\"target_node_id\":\"f172a33c2d314863acc0a73fe553bf50\",\"id\":\"a320a6fed5b5478fa32dab8eea091607\"},{\"type\":\"Edge\",\"source_node_id\":\"5b76a00c11874c12a1c2d9a4f6eed44e\",\"target_node_id\":\"7cca5ead8db144e08d29dc10be3ff641\",\"id\":\"c10c4e3694694031b25767c0dd64f25f\"},{\"type\":\"Edge\",\"source_node_id\":\"b8836f9bdc9b460c90f51ff6542dbfb9\",\"target_node_id\":\"69185013286d4c7da34b9e3391e78f86\",\"branch_id\":\"f1bf37831bd9411bbbfe3382af5df2a1\",\"id\":\"753b8ae9d9be49f2b0600230a2487b6b\",\"name\":\"f1bf37831bd9411bbbfe3382af5df2a1\"},{\"type\":\"Edge\",\"source_node_id\":\"69185013286d4c7da34b9e3391e78f86\",\"target_node_id\":\"da7bc64996a74db4b032f1f360050fcd\",\"branch_id\":\"f5ff072c3ab94d029e5c27638c7dc44c\",\"id\":\"1af583594d87438995039a7ed86f0a06\",\"name\":\"f5ff072c3ab94d029e5c27638c7dc44c\"},{\"type\":\"Edge\",\"source_node_id\":\"69185013286d4c7da34b9e3391e78f86\",\"target_node_id\":\"a6e2bf15ea3e40a295ae379286a623a3\",\"branch_id\":\"11181e2920804c8d82c7dff3850238eb\",\"id\":\"fc3591293d984b4fbc6c60e87377eac4\",\"name\":\"11181e2920804c8d82c7dff3850238eb\"},{\"type\":\"Edge\",\"source_node_id\":\"a6e2bf15ea3e40a295ae379286a623a3\",\"target_node_id\":\"f172a33c2d314863acc0a73fe553bf50\",\"id\":\"260cf6da21d7454ca2980c22ea4b6fbb\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[{\"name\":\"Chat with agent\",\"element\":\"1\"},{\"name\":\"Cancel\",\"element\":\"0\"}],\"id\":\"c082d91a753a44e5a548a8104025356d\",\"name\":\"confirmation\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return false;\\n})()\\n\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"8cb18371532210105498ddeeff7b123d\",\"name\":\"_agent_\",\"key_phrases\":[\"_agent_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"modify_confirmation_enabled\":false,\"library\":false,\"csTopicId\":\"e8848fb1532210105498ddeeff7b122e\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_agent_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"8cb18371532210105498ddeeff7b123d","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/e8848fb1532210105498ddeeff7b122e","value":"e8848fb1532210105498ddeeff7b122e"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"40","sys_updated_on":"2023-05-18 17:07:58","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.46\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"1530984fa49e4928a56d378d3491326a\": {\n          \"id\": \"1530984fa49e4928a56d378d3491326a\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"0235cada89d741b687583b1994415e2b\",\n              \"name\": \"authType\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"4a3932e61dee4aa7b3e599518f481bac\",\n              \"name\": \"identifiedUser\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"84ae7c4097dd44adb6b414c25bb2517f\",\n              \"name\": \"inboundId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"1a84f053b17648c9817ac6a647c6434b\",\n              \"name\": \"providerId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"false\",\n              \"id\": \"c599ed6a6ba14425aa5b9a9673b54812\",\n              \"name\": \"redirectToLA\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"0235cada89d741b687583b1994415e2b\",\n            \"4a3932e61dee4aa7b3e599518f481bac\",\n            \"84ae7c4097dd44adb6b414c25bb2517f\",\n            \"1a84f053b17648c9817ac6a647c6434b\",\n            \"c599ed6a6ba14425aa5b9a9673b54812\"\n          ]\n        },\n        \"1adcdc47357f4bb5966ba0151c0d2049\": {\n          \"id\": \"1adcdc47357f4bb5966ba0151c0d2049\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"connectToLA\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.connectToLA}}\",\n                        \"displayValue\": \"Script VariablesconnectToLA\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=e93e3a92eba71110da1861c59c5228dd%5Ecalling_cs_topic_idIN2578d02eebab1110da1861c59c5228e1\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"linkStatus\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.linkStatus}}\",\n                        \"displayValue\": \"Script VariableslinkStatus\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true\n            }\n          ]\n        },\n        \"928bf4e2b22143648a37d1b062366acb\": {\n          \"id\": \"928bf4e2b22143648a37d1b062366acb\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Should run MFA\"\n        },\n        \"152a2f441a9b43409b9ca8f9d79c9502\": {\n          \"id\": \"152a2f441a9b43409b9ca8f9d79c9502\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"SoftPIN verified - Continue to MFA\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var defaultMsg = \\\"Great. Your SoftPin is correct.\\\";\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(\\\"user_pin_verified_start_mfa_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"67113656a4644ab3a38087ff0895de83\": {\n          \"id\": \"67113656a4644ab3a38087ff0895de83\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"User Verified\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var defaultMsg = \\\"Great, youve been verified.\\\";\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(\\\"user_verification_confirmed_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"651cf6c21e134717a63aa9cd88918fe5\": {\n          \"id\": \"651cf6c21e134717a63aa9cd88918fe5\",\n          \"name\": \"Determine MFA\",\n          \"script\": \"(function execute() {\\n   \\n    if (gs.nil(vaContext.providerAppId)) {\\n        vaVars.isGoogleAuthentication = false;\\n    }\\n\\n    var two_factor_methods = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"two_factor_methods\\\", vaContext.providerAppId);\\n    if (gs.nil(two_factor_methods)) {\\n        vaVars.isGoogleAuthentication = false;\\n        return;\\n    }\\n   \\n    vaVars.isGoogleAuthentication = two_factor_methods.toLowerCase().equals(\\\"google_authenticator\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"bd1710dd751c4a3c88e2e04168033f90\": {\n          \"id\": \"bd1710dd751c4a3c88e2e04168033f90\",\n          \"name\": \"Link Account\",\n          \"script\": \"(function execute() {\\n    var userId = vaVars.identifiedUser;\\n    var status = vaSystem.elevateSession(userId);\\n    gs.debug(\\\"Elevate Session status : \\\" +status);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"383669109af9425da77daafec4a385d5\": {\n          \"id\": \"383669109af9425da77daafec4a385d5\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Which MFA to run\"\n        },\n        \"d93c37f101554687920330aa4d74d38a\": {\n          \"id\": \"d93c37f101554687920330aa4d74d38a\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Google Authenticator Verification\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"Authenticator App Verification\",\n          \"reusableTopicId\": \"6eea6ed194ce5110f877f65b88f23ea6\",\n          \"inputs\": {\n            \"userid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.identifieduser}}\",\n                        \"displayValue\": \"Input VariablesIdentifiedUser\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"verificationid\": {\n              \"value\": \"(function execute() {\\n    var verificationId = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"mfa_question_id\\\", vaContext.providerAppId);\\n    return verificationId;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            },\n            \"contextid\": {\n              \"value\": \"(function execute() {\\n  return vaSystem.getConversationId();\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"00c07e1b5b094ee5ad4845e19446d705\",\n              \"value\": \"status\",\n              \"mapping\": \"mfa_status\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"c1be0209189047209d2d0b4902c2bc86\",\n              \"value\": \"status_code\",\n              \"mapping\": \"mfa_error_code\",\n              \"preventDisable\": true\n            }\n          ],\n          \"variableIds\": [\n            \"00c07e1b5b094ee5ad4845e19446d705\",\n            \"c1be0209189047209d2d0b4902c2bc86\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false\n        },\n        \"10e5530b9b40495c85cb83321e9530fc\": {\n          \"id\": \"10e5530b9b40495c85cb83321e9530fc\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"SMS Verification\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"SMS Verification\",\n          \"reusableTopicId\": \"0ebb2b725f8e01100a9bedbf2f7313c5\",\n          \"inputs\": {\n            \"userid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.identifieduser}}\",\n                        \"displayValue\": \"Input VariablesIdentifiedUser\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"verificationid\": {\n              \"value\": \"(function execute() {\\n    var verificationQuestionId = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"mfa_question_id\\\", vaContext.providerAppId);\\n    return verificationQuestionId;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            },\n            \"contextid\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getConversationId();\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"7341b859ee034e70bafedd4a80a87c87\",\n              \"value\": \"status\",\n              \"mapping\": \"mfa_status\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"51a0a64cb7f848bda842b42723b31652\",\n              \"value\": \"error_code\",\n              \"mapping\": \"mfa_error_code\",\n              \"preventDisable\": true\n            }\n          ],\n          \"variableIds\": [\n            \"7341b859ee034e70bafedd4a80a87c87\",\n            \"51a0a64cb7f848bda842b42723b31652\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false\n        },\n        \"4bb73058be4a40a6958c70093e249852\": {\n          \"id\": \"4bb73058be4a40a6958c70093e249852\",\n          \"stepType\": \"Decision\",\n          \"name\": \"mfa_verified\"\n        },\n        \"f9380db0734947ff8dc71ea03466c14c\": {\n          \"id\": \"f9380db0734947ff8dc71ea03466c14c\",\n          \"name\": \"Set Link Status to Failure\",\n          \"script\": \"(function execute() {\\n    vaVars.linkStatus = 'failure';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"1b61a2db6c8d45d7b4333fe1a74c5288\": {\n          \"id\": \"1b61a2db6c8d45d7b4333fe1a74c5288\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Auth Failed\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var USER_NOT_ENROLLED_CODE = \\\"40001\\\";\\n    var INCORRECT_PIN_CODE = \\\"50000\\\";\\n    var CONFIGURATION_ISSUE = \\\"40002\\\";\\n    \\n    var defaultMsg = \\\"Something went wrong. Were going to transfer you to an agent. Please hold.\\\"; // config issue\\n    var custom_message_key = \\\"link_account_unexpected_error_msg\\\";\\n\\n    if(vaInputs.mfa_error_code.getValue() == USER_NOT_ENROLLED_CODE) {\\n        defaultMsg = \\\"You have not configured any device for OTP. Not to worry, we're routing you to an Agent to help you\\\";\\n        custom_message_key = \\\"user_sms_device_not_enrolled_msg\\\";\\n\\n    } else if(vaInputs.mfa_error_code.getValue() == INCORRECT_PIN_CODE) {\\n        defaultMsg = \\\"The OTP you gave us is incorrect. Were going to transfer you to an agent. Please hold.\\\";\\n        custom_message_key = \\\"user_otp_verification_failed_msg\\\";\\n        \\n    } else if(vaInputs.mfa_error_code.getValue() == CONFIGURATION_ISSUE){\\n        gs.error(\\\"Configuration error in provider channel record, please check the SysId for verification_question_id or mfa_question_id in provider properties \\\")\\n    }\\n\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(custom_message_key, vaVars.inboundId, vaVars.providerId);\\n\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n   \\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"0973e5bc0a9b4eab9d307c7ce250c10b\": {\n          \"id\": \"0973e5bc0a9b4eab9d307c7ce250c10b\",\n          \"name\": \"Set ConnectToLA variable\",\n          \"script\": \"(function execute() {\\n    var topicBlock = \\\"MFA\\\";\\n    var mfaErrorCode = gs.nil(vaInputs.mfa_error_code.getValue()) ? \\\"\\\" : \\\" topic block error code:\\\" + vaInputs.mfa_error_code.getValue();\\n    gs.error(\\\"User : \\\" + vaVars.identifiedUser + \\\" Authentication failed : topic block:\\\" + topicBlock + mfaErrorCode);\\n\\n    //For voice channels, Will connect to live agent directly, will go through topic picker in order for Setup/Reset PIN topic block to show up\\n    if (vaVars.redirectToLA)\\n        vaVars.connectToLA = true;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"61b1c8278f31415fa92a4a429a5b83ec\": {\n          \"id\": \"61b1c8278f31415fa92a4a429a5b83ec\",\n          \"name\": \"read inputs\",\n          \"script\": \"(function execute() {\\n     vaVars.authType = vaInputs.authtype.getValue();\\n     vaVars.identifiedUser = vaInputs.identifieduser.getValue();\\n     vaVars.inboundId = vaInputs.inboundid.getValue();\\n     vaVars.providerId = vaInputs.providerid.getValue();\\n     vaVars.redirectToLA = vaInputs.redirecttola.getValue();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"51e5010f6ec64f78add27e8d65b5096b\": {\n          \"id\": \"51e5010f6ec64f78add27e8d65b5096b\",\n          \"name\": \"Set Link status to Success\",\n          \"script\": \"(function execute() {\\n    vaVars.linkStatus = 'success';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"7d7115d60ba04ec3bf6af74e35ee1363\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"928bf4e2b22143648a37d1b062366acb\",\n          \"target\": \"152a2f441a9b43409b9ca8f9d79c9502\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n     var applies = vaVars.authType == \\\"QnA_and_mfa\\\" ? true : false;\\n       return applies;\\n})()\\n\"\n          },\n          \"label\": \"Run MFA\"\n        },\n        {\n          \"id\": \"d0bcddec3e0d46a7850b582ee7ed8270\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"928bf4e2b22143648a37d1b062366acb\",\n          \"target\": \"51e5010f6ec64f78add27e8d65b5096b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n     var applies = vaVars.authType == \\\"QnA\\\" ? true : false;\\n       return applies;\\n})()\\n\"\n          },\n          \"label\": \"Should not run MFA\"\n        },\n        {\n          \"id\": \"9ce6c0b9b17143f0815bd138b3c33afa\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"152a2f441a9b43409b9ca8f9d79c9502\",\n          \"target\": \"651cf6c21e134717a63aa9cd88918fe5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"245e09d37efe4e73a200a52b9a6da683\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"67113656a4644ab3a38087ff0895de83\",\n          \"target\": \"bd1710dd751c4a3c88e2e04168033f90\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"de44f89c95ff4cac97e3d40f008588cb\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bd1710dd751c4a3c88e2e04168033f90\",\n          \"target\": \"1adcdc47357f4bb5966ba0151c0d2049\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4e463ed9e3864bac94b92a0c3e102a08\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"651cf6c21e134717a63aa9cd88918fe5\",\n          \"target\": \"383669109af9425da77daafec4a385d5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4ab40149bfdf4c76bb45ef57f601ad79\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"383669109af9425da77daafec4a385d5\",\n          \"target\": \"d93c37f101554687920330aa4d74d38a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.isGoogleAuthentication;\\n})()\\n\"\n          },\n          \"label\": \"Google Authenticator\"\n        },\n        {\n          \"id\": \"2d0a15d85795473b9e5e6c0e2adc7350\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d93c37f101554687920330aa4d74d38a\",\n          \"target\": \"4bb73058be4a40a6958c70093e249852\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8c9366edfc7344ccb40ec9255439b866\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"383669109af9425da77daafec4a385d5\",\n          \"target\": \"10e5530b9b40495c85cb83321e9530fc\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.isGoogleAuthentication;\\n})()\\n\"\n          },\n          \"label\": \"SMS\"\n        },\n        {\n          \"id\": \"fe5e5800478546d6870fa783093ba7aa\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"10e5530b9b40495c85cb83321e9530fc\",\n          \"target\": \"4bb73058be4a40a6958c70093e249852\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b11476266bd24afd9046e578df32aa49\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4bb73058be4a40a6958c70093e249852\",\n          \"target\": \"f9380db0734947ff8dc71ea03466c14c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.mfa_status=Error\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"MFA user not Verified\"\n        },\n        {\n          \"id\": \"a7ade1a85e8449daa85824cca5cbe5d5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f9380db0734947ff8dc71ea03466c14c\",\n          \"target\": \"1b61a2db6c8d45d7b4333fe1a74c5288\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a92421233a804aafa114379126852e5a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1b61a2db6c8d45d7b4333fe1a74c5288\",\n          \"target\": \"0973e5bc0a9b4eab9d307c7ce250c10b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"38dc4d8be3f84119b4c21b478815e8f8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0973e5bc0a9b4eab9d307c7ce250c10b\",\n          \"target\": \"1adcdc47357f4bb5966ba0151c0d2049\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"50d648491c234e3eb696255cfec3a6e1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1530984fa49e4928a56d378d3491326a\",\n          \"target\": \"61b1c8278f31415fa92a4a429a5b83ec\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a24557d5b9b84750a3d15771a7dc0032\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"61b1c8278f31415fa92a4a429a5b83ec\",\n          \"target\": \"928bf4e2b22143648a37d1b062366acb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c3f71e90e9ca4e88a980b51553fbc900\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4bb73058be4a40a6958c70093e249852\",\n          \"target\": \"51e5010f6ec64f78add27e8d65b5096b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.mfa_status=Success\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"MFA user verified\"\n        },\n        {\n          \"id\": \"14ae26dd51e64422b8d29fa924587818\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"51e5010f6ec64f78add27e8d65b5096b\",\n          \"target\": \"67113656a4644ab3a38087ff0895de83\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"6148cdc0f2104d19b2526865749c66e5\": {\n      \"id\": \"6148cdc0f2104d19b2526865749c66e5\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"identifiedUser\",\n      \"label\": \"identifiedUser\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"0235cada89d741b687583b1994415e2b\": {\n      \"id\": \"0235cada89d741b687583b1994415e2b\",\n      \"name\": \"authtype\",\n      \"label\": \"AuthType\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"1530984fa49e4928a56d378d3491326a\",\n      \"isHidden\": false\n    },\n    \"4a3932e61dee4aa7b3e599518f481bac\": {\n      \"id\": \"4a3932e61dee4aa7b3e599518f481bac\",\n      \"name\": \"identifieduser\",\n      \"label\": \"IdentifiedUser\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"1530984fa49e4928a56d378d3491326a\",\n      \"isHidden\": false\n    },\n    \"84ae7c4097dd44adb6b414c25bb2517f\": {\n      \"id\": \"84ae7c4097dd44adb6b414c25bb2517f\",\n      \"name\": \"inboundid\",\n      \"label\": \"InboundId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"1530984fa49e4928a56d378d3491326a\",\n      \"isHidden\": false\n    },\n    \"1a84f053b17648c9817ac6a647c6434b\": {\n      \"id\": \"1a84f053b17648c9817ac6a647c6434b\",\n      \"name\": \"providerid\",\n      \"label\": \"ProviderId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"1530984fa49e4928a56d378d3491326a\",\n      \"isHidden\": false\n    },\n    \"7341b859ee034e70bafedd4a80a87c87\": {\n      \"id\": \"7341b859ee034e70bafedd4a80a87c87\",\n      \"name\": \"mfa_status_2\",\n      \"label\": \"Mfa_status (2)\",\n      \"defaultValue\": \"status\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"10e5530b9b40495c85cb83321e9530fc\",\n      \"isHidden\": false\n    },\n    \"51a0a64cb7f848bda842b42723b31652\": {\n      \"id\": \"51a0a64cb7f848bda842b42723b31652\",\n      \"name\": \"mfa_error_code_2\",\n      \"label\": \"Mfa_error_code (2)\",\n      \"defaultValue\": \"error_code\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"10e5530b9b40495c85cb83321e9530fc\",\n      \"isHidden\": false\n    },\n    \"00c07e1b5b094ee5ad4845e19446d705\": {\n      \"id\": \"00c07e1b5b094ee5ad4845e19446d705\",\n      \"name\": \"mfa_status\",\n      \"label\": \"Mfa_status\",\n      \"defaultValue\": \"status\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"d93c37f101554687920330aa4d74d38a\",\n      \"isHidden\": false\n    },\n    \"c1be0209189047209d2d0b4902c2bc86\": {\n      \"id\": \"c1be0209189047209d2d0b4902c2bc86\",\n      \"name\": \"mfa_error_code\",\n      \"label\": \"Mfa_error_code\",\n      \"defaultValue\": \"status_code\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"d93c37f101554687920330aa4d74d38a\",\n      \"isHidden\": false\n    },\n    \"3c2767a462b84b44b177a3fe49b9d1ab\": {\n      \"id\": \"3c2767a462b84b44b177a3fe49b9d1ab\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"authType\",\n      \"label\": \"authType\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"df09ff959cb74f37a66c486c68b6a864\": {\n      \"id\": \"df09ff959cb74f37a66c486c68b6a864\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"inboundId\",\n      \"label\": \"inboundId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5329777a7ec04fc083490f917387d79f\": {\n      \"id\": \"5329777a7ec04fc083490f917387d79f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"providerId\",\n      \"label\": \"providerId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4e5b0ce7d6264f5f90528227a9348008\": {\n      \"id\": \"4e5b0ce7d6264f5f90528227a9348008\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"connectToLA\",\n      \"label\": \"connectToLA\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"eb67add083144761a472403ecdee6be8\": {\n      \"id\": \"eb67add083144761a472403ecdee6be8\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"isGoogleAuthentication\",\n      \"label\": \"isGoogleAuthentication\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c90584f0c8df482197fd7ac3f67f5e82\": {\n      \"id\": \"c90584f0c8df482197fd7ac3f67f5e82\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"linkStatus\",\n      \"label\": \"linkStatus\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"e7e7a77b143b4c8a8865c50fa32d6a32\": {\n      \"id\": \"e7e7a77b143b4c8a8865c50fa32d6a32\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"redirectToLA\",\n      \"label\": \"redirectToLA\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c599ed6a6ba14425aa5b9a9673b54812\": {\n      \"id\": \"c599ed6a6ba14425aa5b9a9673b54812\",\n      \"name\": \"redirecttola\",\n      \"label\": \"RedirectToLA\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"1530984fa49e4928a56d378d3491326a\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"2d3e3a92eba71110da1861c59c5228e1","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_2d3e3a92eba71110da1861c59c5228e1","sys_updated_by":"admin","sys_created_on":"2022-12-06 05:11:22","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"6f29fc2b2ad04b98a94506fb3d565d74\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"6f29fc2b2ad04b98a94506fb3d565d74\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"6f29fc2b2ad04b98a94506fb3d565d74\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"1530984fa49e4928a56d378d3491326a\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"1adcdc47357f4bb5966ba0151c0d2049\",\"name\":\"End\"},{\"type\":\"Decision\",\"name\":\"Should run MFA\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Run MFA\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n     var applies = vaVars.authType == \\\"QnA_and_mfa\\\" ? true : false;\\n       return applies;\\n})()\\n\"},\"id\":\"d4a86ed0a781436896fdf00c02cd9cb3\",\"name\":\"Run MFA\"},{\"type\":\"Branch\",\"label\":\"Should not run MFA\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n     var applies = vaVars.authType == \\\"QnA\\\" ? true : false;\\n       return applies;\\n})()\\n\"},\"id\":\"c405a5f5dc4c47b39a2b493e6e5693d5\",\"name\":\"Should not run MFA\"}],\"id\":\"928bf4e2b22143648a37d1b062366acb\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var defaultMsg = \\\"Great. Your SoftPin is correct.\\\";\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(\\\"user_pin_verified_start_mfa_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n})()\\n\"}],\"id\":\"152a2f441a9b43409b9ca8f9d79c9502\",\"name\":\"SoftPIN verified - Continue to MFA\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var defaultMsg = \\\"Great, youve been verified.\\\";\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(\\\"user_verification_confirmed_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n})()\\n\"}],\"id\":\"67113656a4644ab3a38087ff0895de83\",\"name\":\"User Verified\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n   \\n    if (gs.nil(vaContext.providerAppId)) {\\n        vaVars.isGoogleAuthentication = false;\\n    }\\n\\n    var two_factor_methods = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"two_factor_methods\\\", vaContext.providerAppId);\\n    if (gs.nil(two_factor_methods)) {\\n        vaVars.isGoogleAuthentication = false;\\n        return;\\n    }\\n   \\n    vaVars.isGoogleAuthentication = two_factor_methods.toLowerCase().equals(\\\"google_authenticator\\\");\\n})()\\n\",\"id\":\"651cf6c21e134717a63aa9cd88918fe5\",\"name\":\"Determine MFA\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var userId = vaVars.identifiedUser;\\n    var status = vaSystem.elevateSession(userId);\\n    gs.debug(\\\"Elevate Session status : \\\" +status);\\n})()\\n\",\"id\":\"bd1710dd751c4a3c88e2e04168033f90\",\"name\":\"Link Account\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Which MFA to run\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Google Authenticator\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.isGoogleAuthentication;\\n})()\\n\"},\"id\":\"fd252c82454d499ebc15feb248717d24\",\"name\":\"Google Authenticator\"},{\"type\":\"Branch\",\"label\":\"SMS\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.isGoogleAuthentication;\\n})()\\n\"},\"id\":\"51f07f4c2749442faefcb431bc5f9184\",\"name\":\"SMS\"}],\"id\":\"383669109af9425da77daafec4a385d5\",\"goal_id\":\"primary\"},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Authenticator App Verification\",\"library_topic_id\":\"6eea6ed194ce5110f877f65b88f23ea6\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"userid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.identifieduser}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"verificationid\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var verificationId = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"mfa_question_id\\\", vaContext.providerAppId);\\n    return verificationId;\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"contextid\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n  return vaSystem.getConversationId();\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"status\",\"main_topic_mapped_variable_name\":\"mfa_status\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"status_code\",\"main_topic_mapped_variable_name\":\"mfa_error_code\"}],\"id\":\"d93c37f101554687920330aa4d74d38a\",\"name\":\"Google Authenticator Verification\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"LibraryCall\",\"library_topic_name\":\"SMS Verification\",\"library_topic_id\":\"0ebb2b725f8e01100a9bedbf2f7313c5\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"userid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.identifieduser}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"verificationid\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var verificationQuestionId = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"mfa_question_id\\\", vaContext.providerAppId);\\n    return verificationQuestionId;\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"contextid\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaSystem.getConversationId();\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"status\",\"main_topic_mapped_variable_name\":\"mfa_status\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"error_code\",\"main_topic_mapped_variable_name\":\"mfa_error_code\"}],\"id\":\"10e5530b9b40495c85cb83321e9530fc\",\"name\":\"SMS Verification\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"mfa_verified\",\"branches\":[{\"type\":\"Branch\",\"label\":\"MFA user not Verified\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"mfa_status=Error\"},\"id\":\"a30de6e4b6ae4468893a647cea7ae765\",\"name\":\"MFA user not Verified\"},{\"type\":\"Branch\",\"label\":\"MFA user verified\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"mfa_status=Success\"},\"id\":\"87310ae8ef3c475e9059a2f9a41129d2\",\"name\":\"MFA user verified\"}],\"id\":\"4bb73058be4a40a6958c70093e249852\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.linkStatus = 'failure';\\n})()\\n\",\"id\":\"f9380db0734947ff8dc71ea03466c14c\",\"name\":\"Set Link Status to Failure\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var USER_NOT_ENROLLED_CODE = \\\"40001\\\";\\n    var INCORRECT_PIN_CODE = \\\"50000\\\";\\n    var CONFIGURATION_ISSUE = \\\"40002\\\";\\n    \\n    var defaultMsg = \\\"Something went wrong. Were going to transfer you to an agent. Please hold.\\\"; // config issue\\n    var custom_message_key = \\\"link_account_unexpected_error_msg\\\";\\n\\n    if(vaInputs.mfa_error_code.getValue() == USER_NOT_ENROLLED_CODE) {\\n        defaultMsg = \\\"You have not configured any device for OTP. Not to worry, we're routing you to an Agent to help you\\\";\\n        custom_message_key = \\\"user_sms_device_not_enrolled_msg\\\";\\n\\n    } else if(vaInputs.mfa_error_code.getValue() == INCORRECT_PIN_CODE) {\\n        defaultMsg = \\\"The OTP you gave us is incorrect. Were going to transfer you to an agent. Please hold.\\\";\\n        custom_message_key = \\\"user_otp_verification_failed_msg\\\";\\n        \\n    } else if(vaInputs.mfa_error_code.getValue() == CONFIGURATION_ISSUE){\\n        gs.error(\\\"Configuration error in provider channel record, please check the SysId for verification_question_id or mfa_question_id in provider properties \\\")\\n    }\\n\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(custom_message_key, vaVars.inboundId, vaVars.providerId);\\n\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n   \\n})()\\n\"}],\"id\":\"1b61a2db6c8d45d7b4333fe1a74c5288\",\"name\":\"Auth Failed\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var topicBlock = \\\"MFA\\\";\\n    var mfaErrorCode = gs.nil(vaInputs.mfa_error_code.getValue()) ? \\\"\\\" : \\\" topic block error code:\\\" + vaInputs.mfa_error_code.getValue();\\n    gs.error(\\\"User : \\\" + vaVars.identifiedUser + \\\" Authentication failed : topic block:\\\" + topicBlock + mfaErrorCode);\\n\\n    //For voice channels, Will connect to live agent directly, will go through topic picker in order for Setup/Reset PIN topic block to show up\\n    if (vaVars.redirectToLA)\\n        vaVars.connectToLA = true;\\n})()\\n\",\"id\":\"0973e5bc0a9b4eab9d307c7ce250c10b\",\"name\":\"Set ConnectToLA variable\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n     vaVars.authType = vaInputs.authtype.getValue();\\n     vaVars.identifiedUser = vaInputs.identifieduser.getValue();\\n     vaVars.inboundId = vaInputs.inboundid.getValue();\\n     vaVars.providerId = vaInputs.providerid.getValue();\\n     vaVars.redirectToLA = vaInputs.redirecttola.getValue();\\n})()\\n\",\"id\":\"61b1c8278f31415fa92a4a429a5b83ec\",\"name\":\"read inputs\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.linkStatus = 'success';\\n})()\\n\",\"id\":\"51e5010f6ec64f78add27e8d65b5096b\",\"name\":\"Set Link status to Success\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"928bf4e2b22143648a37d1b062366acb\",\"target_node_id\":\"152a2f441a9b43409b9ca8f9d79c9502\",\"branch_id\":\"d4a86ed0a781436896fdf00c02cd9cb3\",\"id\":\"7d7115d60ba04ec3bf6af74e35ee1363\",\"name\":\"d4a86ed0a781436896fdf00c02cd9cb3\"},{\"type\":\"Edge\",\"source_node_id\":\"928bf4e2b22143648a37d1b062366acb\",\"target_node_id\":\"51e5010f6ec64f78add27e8d65b5096b\",\"branch_id\":\"c405a5f5dc4c47b39a2b493e6e5693d5\",\"id\":\"d0bcddec3e0d46a7850b582ee7ed8270\",\"name\":\"c405a5f5dc4c47b39a2b493e6e5693d5\"},{\"type\":\"Edge\",\"source_node_id\":\"152a2f441a9b43409b9ca8f9d79c9502\",\"target_node_id\":\"651cf6c21e134717a63aa9cd88918fe5\",\"id\":\"9ce6c0b9b17143f0815bd138b3c33afa\"},{\"type\":\"Edge\",\"source_node_id\":\"67113656a4644ab3a38087ff0895de83\",\"target_node_id\":\"bd1710dd751c4a3c88e2e04168033f90\",\"id\":\"245e09d37efe4e73a200a52b9a6da683\"},{\"type\":\"Edge\",\"source_node_id\":\"bd1710dd751c4a3c88e2e04168033f90\",\"target_node_id\":\"1adcdc47357f4bb5966ba0151c0d2049\",\"id\":\"de44f89c95ff4cac97e3d40f008588cb\"},{\"type\":\"Edge\",\"source_node_id\":\"651cf6c21e134717a63aa9cd88918fe5\",\"target_node_id\":\"383669109af9425da77daafec4a385d5\",\"id\":\"4e463ed9e3864bac94b92a0c3e102a08\"},{\"type\":\"Edge\",\"source_node_id\":\"383669109af9425da77daafec4a385d5\",\"target_node_id\":\"d93c37f101554687920330aa4d74d38a\",\"branch_id\":\"fd252c82454d499ebc15feb248717d24\",\"id\":\"4ab40149bfdf4c76bb45ef57f601ad79\",\"name\":\"fd252c82454d499ebc15feb248717d24\"},{\"type\":\"Edge\",\"source_node_id\":\"d93c37f101554687920330aa4d74d38a\",\"target_node_id\":\"4bb73058be4a40a6958c70093e249852\",\"id\":\"2d0a15d85795473b9e5e6c0e2adc7350\"},{\"type\":\"Edge\",\"source_node_id\":\"383669109af9425da77daafec4a385d5\",\"target_node_id\":\"10e5530b9b40495c85cb83321e9530fc\",\"branch_id\":\"51f07f4c2749442faefcb431bc5f9184\",\"id\":\"8c9366edfc7344ccb40ec9255439b866\",\"name\":\"51f07f4c2749442faefcb431bc5f9184\"},{\"type\":\"Edge\",\"source_node_id\":\"10e5530b9b40495c85cb83321e9530fc\",\"target_node_id\":\"4bb73058be4a40a6958c70093e249852\",\"id\":\"fe5e5800478546d6870fa783093ba7aa\"},{\"type\":\"Edge\",\"source_node_id\":\"4bb73058be4a40a6958c70093e249852\",\"target_node_id\":\"f9380db0734947ff8dc71ea03466c14c\",\"branch_id\":\"a30de6e4b6ae4468893a647cea7ae765\",\"id\":\"b11476266bd24afd9046e578df32aa49\",\"name\":\"a30de6e4b6ae4468893a647cea7ae765\"},{\"type\":\"Edge\",\"source_node_id\":\"f9380db0734947ff8dc71ea03466c14c\",\"target_node_id\":\"1b61a2db6c8d45d7b4333fe1a74c5288\",\"id\":\"a7ade1a85e8449daa85824cca5cbe5d5\"},{\"type\":\"Edge\",\"source_node_id\":\"1b61a2db6c8d45d7b4333fe1a74c5288\",\"target_node_id\":\"0973e5bc0a9b4eab9d307c7ce250c10b\",\"id\":\"a92421233a804aafa114379126852e5a\"},{\"type\":\"Edge\",\"source_node_id\":\"0973e5bc0a9b4eab9d307c7ce250c10b\",\"target_node_id\":\"1adcdc47357f4bb5966ba0151c0d2049\",\"id\":\"38dc4d8be3f84119b4c21b478815e8f8\"},{\"type\":\"Edge\",\"source_node_id\":\"1530984fa49e4928a56d378d3491326a\",\"target_node_id\":\"61b1c8278f31415fa92a4a429a5b83ec\",\"id\":\"50d648491c234e3eb696255cfec3a6e1\"},{\"type\":\"Edge\",\"source_node_id\":\"61b1c8278f31415fa92a4a429a5b83ec\",\"target_node_id\":\"928bf4e2b22143648a37d1b062366acb\",\"id\":\"a24557d5b9b84750a3d15771a7dc0032\"},{\"type\":\"Edge\",\"source_node_id\":\"4bb73058be4a40a6958c70093e249852\",\"target_node_id\":\"51e5010f6ec64f78add27e8d65b5096b\",\"branch_id\":\"87310ae8ef3c475e9059a2f9a41129d2\",\"id\":\"c3f71e90e9ca4e88a980b51553fbc900\",\"name\":\"87310ae8ef3c475e9059a2f9a41129d2\"},{\"type\":\"Edge\",\"source_node_id\":\"51e5010f6ec64f78add27e8d65b5096b\",\"target_node_id\":\"67113656a4644ab3a38087ff0895de83\",\"id\":\"14ae26dd51e64422b8d29fa924587818\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"identifiedUser\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"6148cdc0f2104d19b2526865749c66e5\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"authType\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"3c2767a462b84b44b177a3fe49b9d1ab\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"inboundId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"df09ff959cb74f37a66c486c68b6a864\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"providerId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"5329777a7ec04fc083490f917387d79f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"connectToLA\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"4e5b0ce7d6264f5f90528227a9348008\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"isGoogleAuthentication\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"eb67add083144761a472403ecdee6be8\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"linkStatus\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"c90584f0c8df482197fd7ac3f67f5e82\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"redirectToLA\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"e7e7a77b143b4c8a8865c50fa32d6a32\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"authtype\",\"list\":false,\"id\":\"0235cada89d741b687583b1994415e2b\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"identifieduser\",\"list\":false,\"id\":\"4a3932e61dee4aa7b3e599518f481bac\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"inboundid\",\"list\":false,\"id\":\"84ae7c4097dd44adb6b414c25bb2517f\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"providerid\",\"list\":false,\"id\":\"1a84f053b17648c9817ac6a647c6434b\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"mfa_status_2\",\"list\":false,\"id\":\"7341b859ee034e70bafedd4a80a87c87\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"mfa_error_code_2\",\"list\":false,\"id\":\"51a0a64cb7f848bda842b42723b31652\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"mfa_status\",\"list\":false,\"id\":\"00c07e1b5b094ee5ad4845e19446d705\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"mfa_error_code\",\"list\":false,\"id\":\"c1be0209189047209d2d0b4902c2bc86\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"id\":\"c599ed6a6ba14425aa5b9a9673b54812\",\"name\":\"redirecttola\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"authtype\",\"label\":\"authType\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"0235cada89d741b687583b1994415e2b\",\"type\":\"String\"},{\"name\":\"identifieduser\",\"label\":\"identifiedUser\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"4a3932e61dee4aa7b3e599518f481bac\",\"type\":\"String\"},{\"name\":\"inboundid\",\"label\":\"inboundId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"84ae7c4097dd44adb6b414c25bb2517f\",\"type\":\"String\"},{\"name\":\"providerid\",\"label\":\"providerId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"1a84f053b17648c9817ac6a647c6434b\",\"type\":\"String\"},{\"name\":\"redirecttola\",\"label\":\"redirectToLA\",\"default-value\":\"false\",\"required\":true,\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"c599ed6a6ba14425aa5b9a9673b54812\",\"type\":\"True/False\"}],\"return-values-mapping\":[{\"name\":\"connecttola\",\"label\":\"connectToLA\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.connectToLA}}\"}},{\"name\":\"linkstatus\",\"label\":\"linkStatus\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.linkStatus}}\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"255847c2eb271110da1861c59c522851\",\"name\":\"MFA_link_account\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"modify_confirmation_enabled\":false,\"library\":true,\"csTopicId\":\"e93e3a92eba71110da1861c59c5228dd\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"MFA_link_account","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"255847c2eb271110da1861c59c522851","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/e93e3a92eba71110da1861c59c5228dd","value":"e93e3a92eba71110da1861c59c5228dd"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"267","sys_updated_on":"2024-11-06 18:48:15","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.73\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"0ff6294905b34f6f9ff252ec7427362c\": {\n          \"id\": \"0ff6294905b34f6f9ff252ec7427362c\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"parameters\": [\n            {\n              \"name\": \"Search Term\",\n              \"value\": \"\",\n              \"checked\": true,\n              \"id\": \"ec4fbd7603204a83a2b664be6ac641c4\",\n              \"disabled\": true,\n              \"referenced\": true,\n              \"type\": \"String\",\n              \"required\": true\n            },\n            {\n              \"type\": \"Reference\",\n              \"value\": \"\",\n              \"id\": \"79c4509501b24ba8b0242741deba8800\",\n              \"name\": \"Search Application Configuration\",\n              \"table\": \"sys_search_context_config\",\n              \"hint\": \"(Optional) Use a custom Search Application Configuration\",\n              \"query\": \"\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"false\",\n              \"id\": \"d0cefa797f544b94bc662bc078028754\",\n              \"name\": \"Ask Another Search\",\n              \"required\": false,\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"ec4fbd7603204a83a2b664be6ac641c4\",\n            \"79c4509501b24ba8b0242741deba8800\",\n            \"d0cefa797f544b94bc662bc078028754\"\n          ]\n        },\n        \"ce2b385dd8a6432785e463128d148488\": {\n          \"id\": \"ce2b385dd8a6432785e463128d148488\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"geniusSearchResults\",\n              \"value\": \"(function execute() {\\n    if (!gs.nil(vaVars.geniusResults)) {\\n        var geniusResultsJSON = JSON.parse(vaVars.geniusResults);\\n        return global.VAAISearchHelperUtah.resizeResultIfRequired(geniusResultsJSON, 'Search metadata', vaVars);\\n    }\\n    return null;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=b19775fa536310103296ddeeff7b12ff%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"searchResults\",\n              \"value\": \"(function execute() {\\n    if (!gs.nil(vaVars.searchResults)) {\\n        var searchResultsJSON = JSON.parse(vaVars.searchResults);\\n        return global.VAAISearchHelperUtah.resizeResultIfRequired(searchResultsJSON, 'Search result', vaVars);\\n    }\\n    return null;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=b19775fa536310103296ddeeff7b12ff%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"shouldAskInfoHelpful\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.shouldAskInfoHelpful}}\",\n                        \"displayValue\": \"Script VariablesshouldAskInfoHelpful\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=b19775fa536310103296ddeeff7b12ff%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"newSearchTerm\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.new_search_term}}\",\n                        \"displayValue\": \"Input VariablesNew Search Term\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=b19775fa536310103296ddeeff7b12ff%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"shouldRunFallbackTopic\",\n              \"value\": \"(function execute() {\\n    return vaVars.didFdihInvocationTimeOut || (vaInputs.display_options == 'no') ||\\n       (gs.nil(vaVars.geniusResults) && gs.nil(vaVars.searchResults));\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=b19775fa536310103296ddeeff7b12ff%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"searchMetadata\",\n              \"value\": \"(function execute() {\\n    if (!gs.nil(vaVars.searchMetadata)) {\\n        var searchMetadataJSON = JSON.parse(vaVars.searchMetadata);\\n        return global.VAAISearchHelperUtah.resizeResultIfRequired(searchMetadataJSON, 'Search metadata', vaVars);\\n    }\\n    return null;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=b19775fa536310103296ddeeff7b12ff%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            }\n          ]\n        },\n        \"08ad47e40040419196b9edab91d8ef82\": {\n          \"id\": \"08ad47e40040419196b9edab91d8ef82\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Results to Display?\"\n        },\n        \"6197d1bbdb894ba9a0b5e9543aeb6a69\": {\n          \"id\": \"6197d1bbdb894ba9a0b5e9543aeb6a69\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Display Genius Result\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n    return global.VAAISearchHelperXanadu.generateGeniusCardResponse(\\n        vaVars.searchMetadata, vaVars.geniusResults, vaSystem, vaInputs, vaVars, vaContext, \\\"ask_genius_helpful\\\");\\n})()\\n\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"e5a0c9a11ade4dfa9424107d13edf6ea\": {\n          \"id\": \"e5a0c9a11ade4dfa9424107d13edf6ea\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Was Genius Helpful?\"\n        },\n        \"4397d6f32aee4d9585e3c1cef9f49514\": {\n          \"id\": \"4397d6f32aee4d9585e3c1cef9f49514\",\n          \"name\": \"Process Results\",\n          \"script\": \"(function execute() {\\n    var now = new GlideDateTime().getNumericValue();\\n    var elapsedTime = now - vaVars.startTime;\\n    var returnTime = now - vaInputs.end_time;\\n    var logger = global.VAAISearchHelper.getLogger(vaVars.loggingContext);\\n    logger.debug('AI Search FDIH action time: {0}ms', elapsedTime);\\n    logger.debug('AI Search FDIH returned to VA in {0}ms', returnTime);\\n\\n    var results = JSON.stringify(global.VAAISearchHelper.filterResultsForLoggedInUser(\\n        vaInputs.search_result.toString(), vaSystem, vaVars.loggingContext));\\n\\n    var processedResults = global.VAAISearchHelperUtah.processResults(results, vaSystem, vaInputs, vaVars);\\n    vaVars.searchMetadata = processedResults.searchMetadata;\\n    vaVars.geniusResults = processedResults.geniusSearchResults;\\n    vaVars.searchResults = processedResults.searchResults;\\n    if (!gs.nil(vaVars.searchMetadata) && vaVars.searchMetadata != \\\"{}\\\")\\n        logger.debug('AI Search performed on server in {0}ms',\\n            JSON.parse(vaVars.searchMetadata).glide_signals.searchResultMetadata.responseTimeInMs);\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"2045ed7aa08a414bbee05fa69e18c9cb\": {\n          \"id\": \"2045ed7aa08a414bbee05fa69e18c9cb\",\n          \"name\": \"Collect Search Info\",\n          \"script\": \"(function execute() {\\n    vaVars.loggingContext = JSON.stringify(global.VAAISearchHelperTokyo.getLoggingContext(vaSystem));\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).debug('Starting \\\"AI Search\\\" topic block');\\n    vaVars.startTime = new GlideDateTime().getNumericValue();\\n    vaVars.isSearchAvailable = global.VAAISearchHelperTokyo.isSearchEnabled(vaVars.loggingContext);\\n\\n    // This script has to run before any other operations to collect correct info.\\n    // If the node runs under the platform thread, the info can be incorrect.\\n    vaVars.session_id = gs.getSessionID();\\n    vaVars.user_id = vaInputs.user.getValue();\\n    vaVars.is_logged_in = gs.getSession().isLoggedIn();\\n    vaVars.language = gs.getSession().getLanguage();\\n    //AI Search start timestamp\\n    vaVars.time = global.VAClickMetrics.getCurrentTime();\\n\\n    // flag for sending SEARCH_RESULT_DISPLAYED event for processing \\n    vaVars.sendDisplayedSearchResultClickMetricsEvent = true;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"e1352bb47698492cbae8f2dcca00dd28\": {\n          \"id\": \"e1352bb47698492cbae8f2dcca00dd28\",\n          \"name\": \"Run AI Search\",\n          \"invocationType\": \"action\",\n          \"stepType\": \"FlowAction\",\n          \"actionSpoke\": \"global\",\n          \"actionSpokeAction\": \"2eaf23715b621010a76b04d13d81c7b5\",\n          \"actionWaitType\": \"sync\",\n          \"actionRunAs\": \"session_user\",\n          \"actionSecureField\": false,\n          \"actionSelectSecureField\": \"\",\n          \"actionPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionConfirmPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionNonSecureChannelMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionInputs\": {\n            \"input-search_term\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.search_term}}\",\n                        \"displayValue\": \"Input VariablesSearch Term\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\"\n            },\n            \"input-context_profile_id\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getContextProfileId();\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-search_context_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.search_application_configuration}}\",\n                        \"displayValue\": \"Input VariablesSearch Application Configuration\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\"\n            },\n            \"input-logging_context\": {\n              \"value\": \"(function execute() {\\n    return vaVars.loggingContext;\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-locale\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getRequesterLocale();\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-start_time\": {\n              \"value\": \"(function execute() {\\n    return vaVars.startTime;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          },\n          \"actionOutputs\": {\n            \"output-search_result\": [\n              {\n                \"id\": \"6e8d4a25a6b74763be6357f17f51ed39\",\n                \"mapping\": \"search_result\",\n                \"value\": \"Search Result\",\n                \"disabled\": false,\n                \"type\": \"json\",\n                \"variable\": \"Search_result\",\n                \"variableName\": \"search_result\"\n              }\n            ],\n            \"output-__action_status__\": [\n              {\n                \"id\": \"2473bf9d712240e9abe314285998a0e3\",\n                \"mapping\": \"Action Status\",\n                \"value\": \"Action Status\",\n                \"disabled\": false,\n                \"type\": \"object\",\n                \"variable\": \"Action Status\",\n                \"variableName\": \"action_status\"\n              }\n            ],\n            \"output-__dont_treat_as_error__\": [\n              {\n                \"id\": \"ea639d6dbe1f4f978b01e2300c16a4f2\",\n                \"mapping\": \"Don't Treat as Error\",\n                \"value\": \"Don't Treat as Error\",\n                \"disabled\": false,\n                \"type\": \"boolean\",\n                \"variable\": \"Don't Treat As Error\",\n                \"variableName\": \"don_t_treat_as_error\"\n              }\n            ],\n            \"output-end_time\": [\n              {\n                \"id\": \"9ec9e3bd1c674802942a8ad4d4e5e341\",\n                \"mapping\": \"End time\",\n                \"value\": \"End time\",\n                \"disabled\": false,\n                \"type\": \"string\",\n                \"variable\": \"End Time\",\n                \"variableName\": \"end_time\"\n              }\n            ]\n          },\n          \"actionDefinition\": {\n            \"id\": \"2eaf23715b621010a76b04d13d81c7b5\",\n            \"latest_snapshot_id\": \"2eaf23715b621010a76b04d13d81c7b5\",\n            \"parent_id\": \"c93fa3795b221010a76b04d13d81c767\",\n            \"type\": \"action\",\n            \"name\": \"atlas_search\",\n            \"label\": \"AI Search\",\n            \"scope_id\": \"global\",\n            \"description\": \"Perform asynchronous AI Search\",\n            \"category\": \"\",\n            \"parameters_have_loaded\": true,\n            \"input_parameters\": [\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_term\",\n                \"label\": \"search_term\",\n                \"type\": \"string\",\n                \"order\": 1,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"context_profile_id\",\n                \"label\": \"context_profile_id\",\n                \"type\": \"string\",\n                \"order\": 2,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_context_id\",\n                \"label\": \"search_context_id\",\n                \"type\": \"string\",\n                \"order\": 3,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"logging_context\",\n                \"label\": \"logging_context\",\n                \"type\": \"string\",\n                \"order\": 4,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"locale\",\n                \"label\": \"locale\",\n                \"type\": \"string\",\n                \"order\": 5,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"start_time\",\n                \"label\": \"start_time\",\n                \"type\": \"string\",\n                \"order\": 6,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"additional_context\",\n                \"label\": \"additional_context\",\n                \"type\": \"string\",\n                \"order\": 7,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"gr_config_filter\",\n                \"label\": \"gr_config_filter\",\n                \"type\": \"string\",\n                \"order\": 8,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_result_type\",\n                \"label\": \"search_result_type\",\n                \"type\": \"string\",\n                \"order\": 9,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              }\n            ],\n            \"output_parameters\": [\n              {\n                \"name\": \"search_result\",\n                \"label\": \"Search Result\",\n                \"type\": \"json\",\n                \"order\": 1,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"name\": \"__action_status__\",\n                \"label\": \"Action Status\",\n                \"type\": \"object\",\n                \"order\": 2,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"name\": \"__dont_treat_as_error__\",\n                \"label\": \"Don't Treat as Error\",\n                \"type\": \"boolean\",\n                \"order\": 3,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"name\": \"end_time\",\n                \"label\": \"End time\",\n                \"type\": \"string\",\n                \"order\": 4,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              }\n            ]\n          },\n          \"subflowSecureField\": false,\n          \"subflowSelectSecureField\": \"\",\n          \"subflowPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowConfirmPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowNonSecureChannelMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"This action is not supported on this channel.\"\n          },\n          \"variableIds\": [\n            \"6e8d4a25a6b74763be6357f17f51ed39\",\n            \"2473bf9d712240e9abe314285998a0e3\",\n            \"ea639d6dbe1f4f978b01e2300c16a4f2\",\n            \"9ec9e3bd1c674802942a8ad4d4e5e341\"\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"permissionsNote\": \"By default, the Action executes based on the permissions of the user who initiated the conversation. For elevated privileges, you can set to System User.\"\n        },\n        \"525306d9f27b4275a0a7e6fc96109e7e\": {\n          \"id\": \"525306d9f27b4275a0a7e6fc96109e7e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Search Enabled?\"\n        },\n        \"c48eb365a05d43d89b65179efecb9dd5\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Ask Genius Helpful\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   return gs.getMessageLang(\\\"What would you like to do now?\\\", vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"e728aa82e4374dd1b131e5718f5a1992\",\n          \"id\": \"c48eb365a05d43d89b65179efecb9dd5\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var searchTerm = vaInputs.search_term;\\n\\n    if (!gs.nil(vaVars.catalogId)) {\\n        options.unshift({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request this item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    } else {\\n        options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Show me more on \\\"{0}\\\"', vaContext.getRequesterLang(), [searchTerm]), 'render_style': 'data'});\\n    if (vaInputs.ask_another_search == 'true')\\n        options.push({ 'value': 'another_search', 'label': gs.getMessageLang('Ask something else', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var searchTerm = vaInputs.search_term;\\n\\n    if (!gs.nil(vaVars.catalogId)) {\\n        options.unshift({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request this item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    } else {\\n        options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Show me more on \\\"{0}\\\"', vaContext.getRequesterLang(), [searchTerm]), 'render_style': 'data'});\\n    if (vaInputs.ask_another_search == 'true')\\n        options.push({ 'value': 'another_search', 'label': gs.getMessageLang('Ask something else', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"bf701dc1c59347728037a98fa3df797c\": {\n          \"id\": \"bf701dc1c59347728037a98fa3df797c\",\n          \"name\": \"Get Catalog Id\",\n          \"script\": \"(function execute() {\\n    try {\\n        var jsonData = JSON.parse(vaVars.geniusResults);\\n        var catalogId = jsonData.propValues.actions[0].actionPayload.sysId.toString();\\n        \\n        vaVars.catalogRenderType = global.VAAISearchHelperXanadu.getConversationalRenderType(catalogId, vaContext.deviceType);\\n        \\n        if (vaVars.catalogRenderType == \\\"conversation\\\" || vaVars.catalogRenderType == \\\"inline-seismic\\\") {\\n            vaVars.catalogId = catalogId;\\n        }\\n    } catch (e) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).warn('No Catalog Id found for this search result.');\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"1e4448cfae3046c9b40c0f47f4790cb6\": {\n          \"id\": \"1e4448cfae3046c9b40c0f47f4790cb6\",\n          \"name\": \"Set Genius Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_genius_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"47026a9b8ef34ea39d199641087ffadf\": {\n          \"id\": \"47026a9b8ef34ea39d199641087ffadf\",\n          \"name\": \"Unset Genius Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_genius_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"3603496ffa64496c824eb53c445d16c7\": {\n          \"id\": \"3603496ffa64496c824eb53c445d16c7\",\n          \"name\": \"Calculate Request Id\",\n          \"script\": \"(function execute() {\\n    if (vaVars.catalogRecordTable.toString() == \\\"sc_req_item\\\") {\\n        var gr = new GlideRecord(\\\"sc_req_item\\\");\\n        gr.addQuery('sys_id', vaVars.catalogRecordId.toString());\\n        gr.query();\\n        if(gr.next()) {\\n            vaVars.reqItemId = gr.getValue(\\\"sys_id\\\");\\n        }\\n    } else {\\n        vaVars.reqItemId = vaVars.catalogRecordId.toString();\\n    }\\n\\n    vaVars.requestTable = vaVars.catalogRecordTable.toString();\\n})()\\n\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"874df4bb039e40c2a83798fe240f204c\": {\n          \"id\": \"874df4bb039e40c2a83798fe240f204c\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Request Catalog Item\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"Request Catalog Item\",\n          \"reusableTopicId\": \"a39acd71c3a3330012d1758a7ff57eb6\",\n          \"inputs\": {\n            \"catalog_item_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.catalogId}}\",\n                        \"displayValue\": \"Script VariablescatalogId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"execute_contextual_search\": {\n              \"value\": \"false\",\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            },\n            \"confirm_catalog_item\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"false\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"show_end_state_card\": {\n              \"value\": \"false\",\n              \"mode\": \"simple\",\n              \"type\": \"True/False\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"07ad9582bde7415f8ec79155bd6870ed\",\n              \"value\": \"record_id\",\n              \"mapping\": \"record_id\"\n            },\n            {\n              \"id\": \"bdc360493a3745ed86cb13dc4d5b0e38\",\n              \"value\": \"record_table\",\n              \"mapping\": \"record_table\"\n            },\n            {\n              \"id\": \"fee8096e6419421ebecca7d2048f97e4\",\n              \"value\": \"variables\",\n              \"mapping\": \"variables\"\n            }\n          ],\n          \"variableIds\": [\n            \"07ad9582bde7415f8ec79155bd6870ed\",\n            \"bdc360493a3745ed86cb13dc4d5b0e38\",\n            \"fee8096e6419421ebecca7d2048f97e4\"\n          ],\n          \"useTemplateTopic\": false\n        },\n        \"81ae0846d9a04fd185f833beabff5b22\": {\n          \"id\": \"81ae0846d9a04fd185f833beabff5b22\",\n          \"name\": \"Calculate Request Id\",\n          \"script\": \"(function execute() {\\n    // Special handling for requests in sc_req_item\\n    if (!gs.nil(vaVars.requestTable)) {\\n        if (vaVars.requestTable.toString() == \\\"sc_request\\\") {\\n            var grRequest = new GlideRecord(\\\"sc_request\\\");\\n            grRequest.addQuery(\\\"number\\\", vaVars.requestId);\\n            grRequest.query();\\n            if(grRequest.next()) {\\n                var grReqItem = new GlideRecord(\\\"sc_req_item\\\");\\n                grReqItem.addQuery(\\\"request\\\", grRequest.sys_id);\\n                grReqItem.query();\\n                if(grReqItem.next()) {\\n                    vaVars.reqItemId = grReqItem.getValue(\\\"sys_id\\\");\\n                    vaVars.requestTable = \\\"sc_req_item\\\";\\n                }\\n            }\\n        } else {\\n            var grTable = new GlideRecord(vaVars.requestTable.toString());\\n            grTable.addQuery(\\\"number\\\", vaVars.requestId);\\n            grTable.query();\\n            if (grTable.next()) {\\n                vaVars.reqItemId = grTable.getValue(\\\"sys_id\\\");\\n            }\\n        }\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"3d72230cd3de4205b34ec97f84373bfe\": {\n          \"id\": \"3d72230cd3de4205b34ec97f84373bfe\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Request Id Available?\"\n        },\n        \"614bdf7bcf1d4cf48f7e7a1d4adf31ec\": {\n          \"id\": \"614bdf7bcf1d4cf48f7e7a1d4adf31ec\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"End state card for Catalog Request\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"End state card for Catalog Request\",\n          \"reusableTopicId\": \"0b01391550d30110fa9b861f7d83d7f6\",\n          \"inputs\": {\n            \"record_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.reqItemId}}\",\n                        \"displayValue\": \"Script VariablesreqItemId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"record_table\": {\n              \"value\": \"(function execute() {\\n    return vaVars.requestTable;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            }\n          },\n          \"variableIds\": [],\n          \"outputs\": [],\n          \"useTemplateTopic\": false\n        },\n        \"e1fd90cb996a40479c55686ff933f948\": {\n          \"id\": \"e1fd90cb996a40479c55686ff933f948\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"New Search Term\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   return gs.getMessageLang(\\\"Ok, how else can I help?\\\", vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"19b4885bd86345abae37f28678a72080\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"08aa6cfa138048c09564bce6da538b58\": {\n          \"id\": \"08aa6cfa138048c09564bce6da538b58\",\n          \"name\": \"Check results to display\",\n          \"script\": \"(function execute() {\\n    vaVars.resultsToDisplay = global.VAAISearchHelperVancouver.calculateResultsToDisplay(vaSystem, vaInputs, vaVars, vaContext);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"e9ea713d5cff4bc1823256cbdfa1c3e5\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Display Options\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang(\\\"Here are the results you may find helpful\\\", vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"65311cc1f9bf461e98adc7d146842f0c\",\n          \"id\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n\\n    var resultMap = global.VAAISearchHelperVancouver.createResultMap(vaVars.searchMetadata, vaVars.searchResults, vaSystem, vaInputs, vaVars, vaContext);\\n    \\n    // Set false to avoid duplications. Once sent, this flag prevents the same payload from being sent again\\n    vaVars.sendDisplayedSearchResultClickMetricsEvent = false;\\n\\n    var options = [];\\n    for (var key in resultMap) {\\n        options.push({ 'value': key, 'label': resultMap[key], 'render_style': 'data'});\\n    }\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('I need more help...', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    if (vaInputs.ask_another_search == 'true')\\n        options.push({ 'value': 'another_search', 'label': gs.getMessageLang('Ask something else...', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n\\n    var resultMap = global.VAAISearchHelperVancouver.createResultMap(vaVars.searchMetadata, vaVars.searchResults, vaSystem, vaInputs, vaVars, vaContext);\\n    \\n    // Set false to avoid duplications. Once sent, this flag prevents the same payload from being sent again\\n    vaVars.sendDisplayedSearchResultClickMetricsEvent = false;\\n\\n    var options = [];\\n    for (var key in resultMap) {\\n        options.push({ 'value': key, 'label': resultMap[key], 'render_style': 'data'});\\n    }\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('I need more help...', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    if (vaInputs.ask_another_search == 'true')\\n        options.push({ 'value': 'another_search', 'label': gs.getMessageLang('Ask something else...', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"routes\": {},\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"d7b9bd2984184fd0b8da5517bd697af5\": {\n          \"id\": \"d7b9bd2984184fd0b8da5517bd697af5\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"c536398c3458489cb440181fae14bcf0\": {\n          \"id\": \"c536398c3458489cb440181fae14bcf0\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Display Results Card\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n    return global.VAAISearchHelperXanadu.generateSearchResultsResponse(\\n        vaVars.searchMetadata, vaVars.searchResults, vaSystem, vaInputs, vaVars, vaContext, \\\"ask_links_helpful\\\");\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"103422c001d34243abe3d2b490c1ad64\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Ask Links Helpful\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang(\\\"What would you like to do now?\\\", vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"ca4759ec446d42b68bb8a54d597424b0\",\n          \"id\": \"103422c001d34243abe3d2b490c1ad64\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var catalogId = vaInputs.display_options;\\n\\n    vaVars.catalogRenderType = global.VAAISearchHelperXanadu.getConversationalRenderType(catalogId, vaContext.deviceType);\\n    \\n    if (vaVars.catalogRenderType == \\\"conversation\\\" || vaVars.catalogRenderType == \\\"inline-seismic\\\") {\\n        vaVars.catalogId = catalogId;\\n        options.push({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request this item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n    \\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Go back', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var catalogId = vaInputs.display_options;\\n\\n    vaVars.catalogRenderType = global.VAAISearchHelperXanadu.getConversationalRenderType(catalogId, vaContext.deviceType);\\n    \\n    if (vaVars.catalogRenderType == \\\"conversation\\\" || vaVars.catalogRenderType == \\\"inline-seismic\\\") {\\n        vaVars.catalogId = catalogId;\\n        options.push({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request this item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n    \\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Go back', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"8a34229dec9541d9a6adb6912bf7a514\": {\n          \"id\": \"8a34229dec9541d9a6adb6912bf7a514\",\n          \"name\": \"Unset Link Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_links_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\": {\n          \"id\": \"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Was Links Helpful?\"\n        },\n        \"6eaf550a589b4c32a7f5ff99ff32a0d0\": {\n          \"id\": \"6eaf550a589b4c32a7f5ff99ff32a0d0\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"892d0a2e0be54931804dd7005978637b\": {\n          \"id\": \"892d0a2e0be54931804dd7005978637b\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Display Custom Result Link\",\n          \"url\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"label\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"header\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"multiple\",\n          \"introMsg\": {\n            \"value\": \"(function execute() {\\n    var searchTerm = vaSystem.getSearchText();\\n    return gs.getMessageLang('Here\\\\'s what I found for \\\"{0}\\\"', vaContext.getRequesterLang(), [vaInputs.display_options.getDisplayValue()]);\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"listOfLinks\": \"(function execute(header) {\\n    return global.VAAISearchHelperUtah.generateCustomResultList(vaVars.searchMetadata, vaVars.searchResults, header, vaSystem, vaInputs, vaVars, \\\"ask_custom_links_helpful\\\");\\n})(header)\"\n        },\n        \"c2c7ebc7d62442899bf1808998e39692\": {\n          \"id\": \"c2c7ebc7d62442899bf1808998e39692\",\n          \"name\": \"Set Custom Link Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_custom_links_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a5622c87208f4a9abb79068412da9507\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Ask Custom Links Helpful\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return gs.getMessageLang(\\\"What would you like to do now?\\\", vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"6cd4dbcfa11c440d8b7693ddc24facb2\",\n          \"id\": \"a5622c87208f4a9abb79068412da9507\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Go back', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Go back', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"1a72b44f5c2c4981b64b0f19aa211e74\": {\n          \"id\": \"1a72b44f5c2c4981b64b0f19aa211e74\",\n          \"name\": \"Unset Custom Link Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_custom_links_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"33046537e25c481999e7c26a7b862904\": {\n          \"id\": \"33046537e25c481999e7c26a7b862904\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Was Custom Link Helpful?\"\n        },\n        \"3532e524a59a48e5b7f17dfc0b8f773f\": {\n          \"id\": \"3532e524a59a48e5b7f17dfc0b8f773f\",\n          \"name\": \"Set Click Metrics Event\",\n          \"script\": \"(function execute() {\\n    global.VAAISearchHelperVancouver.processSearchHelpfulMetrics(vaVars.searchMetadata, vaSystem, vaInputs, vaVars);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f398fc51c4e54b939543c9659b3f7d40\": {\n          \"id\": \"f398fc51c4e54b939543c9659b3f7d40\",\n          \"name\": \"Set Click Metrics Event\",\n          \"script\": \"(function execute() {\\n    global.VAAISearchHelperVancouver.processSearchCatalogRequestedMetrics(vaVars.searchMetadata, vaSystem, vaInputs, vaVars);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"5ab22a100a124b318245675cadb51f86\": {\n          \"id\": \"5ab22a100a124b318245675cadb51f86\",\n          \"name\": \"Set Click Metrics Event\",\n          \"script\": \"(function execute() {\\n    global.VAAISearchHelperVancouver.processSearchHelpfulMetrics(vaVars.searchMetadata, vaSystem, vaInputs, vaVars);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"18bb75c617874d868be87ce68d2fbee1\": {\n          \"id\": \"18bb75c617874d868be87ce68d2fbee1\",\n          \"name\": \"Set Link Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_links_helpful\\\");\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ecc69546417844a8826ca2bb543d1009\": {\n          \"id\": \"ecc69546417844a8826ca2bb543d1009\",\n          \"name\": \"Check if Search Timed Out\",\n          \"script\": \"(function execute() {\\n    vaVars.didFdihInvocationTimeOut = vaContext.didFdihInvocationTimeOut();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"57a1973b8ade4368800172c3535d8d3d\": {\n          \"id\": \"57a1973b8ade4368800172c3535d8d3d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Check for Timeout\"\n        },\n        \"44d38a478fdf4c6fae4ad8ebd74b8e11\": {\n          \"id\": \"44d38a478fdf4c6fae4ad8ebd74b8e11\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Catalog Render Type\"\n        },\n        \"725aeaa1c78745849b0a4ee7b9365968\": {\n          \"id\": \"725aeaa1c78745849b0a4ee7b9365968\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Request Catalog Item Inline-seismic\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"useTemplateTopic\": false,\n          \"reusableTopicChoice\": \"Request Catalog Item Inline-seismic\",\n          \"reusableTopicId\": \"689a151977b00210c5c6b2a07b5a99ea\",\n          \"inputs\": {\n            \"catalogitemid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.catalogId}}\",\n                        \"displayValue\": \"Script VariablescatalogId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"requestedforid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.user}}\",\n                        \"displayValue\": \"Input VariablesUser\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"477b05c27bd6497fa5b376fca7dada1a\",\n              \"value\": \"record_id\",\n              \"mapping\": \"record_id1\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"c89765e5e7264cda9ad7c717ffc6eeac\",\n              \"value\": \"record_table\",\n              \"mapping\": \"record_table1\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"5a79d6a838414b3e95f3678d9ab79747\",\n              \"value\": \"message\",\n              \"mapping\": \"message\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"b5b4f76d6de04da19313d6c451e4f368\",\n              \"value\": \"status\",\n              \"mapping\": \"status\",\n              \"preventDisable\": false\n            }\n          ],\n          \"variableIds\": [\n            \"477b05c27bd6497fa5b376fca7dada1a\",\n            \"c89765e5e7264cda9ad7c717ffc6eeac\",\n            \"5a79d6a838414b3e95f3678d9ab79747\",\n            \"b5b4f76d6de04da19313d6c451e4f368\"\n          ],\n          \"dynamicTopicBlockName\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputDynamicModal\": {},\n          \"outputDynamicModal\": {},\n          \"outdatedNote\": false,\n          \"loading\": false\n        },\n        \"4f370616ae704df1b50edf68d8cc2a34\": {\n          \"id\": \"4f370616ae704df1b50edf68d8cc2a34\",\n          \"name\": \"Set Record Variables\",\n          \"script\": \"(function execute() {\\n    vaVars.catalogRecordId = vaInputs.record_id1;\\n    vaVars.catalogRecordTable = vaInputs.record_table1;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"50110c47284f49d7ba6ff64f48a45a2b\": {\n          \"id\": \"50110c47284f49d7ba6ff64f48a45a2b\",\n          \"name\": \"Set Record Variables\",\n          \"script\": \"(function execute() {\\n    vaVars.catalogRecordId = vaInputs.record_id;\\n    vaVars.catalogRecordTable = vaInputs.record_table;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"b46c0184554341759d80ea69ffc62ccf\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"18bb75c617874d868be87ce68d2fbee1\",\n          \"target\": \"103422c001d34243abe3d2b490c1ad64\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6f6ea9f5f0024769b08590ab97df34f5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5ab22a100a124b318245675cadb51f86\",\n          \"target\": \"81ae0846d9a04fd185f833beabff5b22\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4204dd8813d649f29036664ddbf1a8d8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8a34229dec9541d9a6adb6912bf7a514\",\n          \"target\": \"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4b341ef325454102bfde5e8d6328508d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e5a0c9a11ade4dfa9424107d13edf6ea\",\n          \"target\": \"3532e524a59a48e5b7f17dfc0b8f773f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var helpful = vaInputs.ask_genius_helpful == 'yes' ? true : false;\\n    \\n    if (helpful) {\\n        VAAISearchHelper.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the search results were helpful');\\n    }\\n\\n    return helpful;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"f8a8ef62f43b46b193876bd8ab0abe44\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4397d6f32aee4d9585e3c1cef9f49514\",\n          \"target\": \"08aa6cfa138048c09564bce6da538b58\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"25e72c1b1d09458c86605b93bfdf6ddf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d7b9bd2984184fd0b8da5517bd697af5\",\n          \"target\": \"6eaf550a589b4c32a7f5ff99ff32a0d0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var optionSelected = vaInputs.display_options;\\n    if (optionSelected == 'yes' || optionSelected == 'no' || optionSelected == 'another_search') {\\n        return false;\\n    }\\n    return true;\\n})()\"\n          },\n          \"label\": \"Result Selected\"\n        },\n        {\n          \"id\": \"be76f4ead9c1424c82413ade80584896\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"33046537e25c481999e7c26a7b862904\",\n          \"target\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_custom_links_helpful == 'no';\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"d7f6d47696e84191a11b6433cd02f0d4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"892d0a2e0be54931804dd7005978637b\",\n          \"target\": \"c2c7ebc7d62442899bf1808998e39692\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"02e9a3828a5c4472aa711dca10788157\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d7b9bd2984184fd0b8da5517bd697af5\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.display_options == 'no' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"3105034e8f1e478ab4334ca615fa79ff\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"08ad47e40040419196b9edab91d8ef82\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.didFdihInvocationTimeOut ||\\n       (gs.nil(vaVars.geniusResults) && gs.nil(vaVars.searchResults));\\n})()\"\n          },\n          \"label\": \"No Results or Error\"\n        },\n        {\n          \"id\": \"cf4a56aca1cf4bfcab51ce9985014883\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"525306d9f27b4275a0a7e6fc96109e7e\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.isSearchAvailable;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"4fe561d98e284cbbb3e2d121b784336d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e1fd90cb996a40479c55686ff933f948\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"521d97c78e824eaca36bad278225eeb7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2045ed7aa08a414bbee05fa69e18c9cb\",\n          \"target\": \"525306d9f27b4275a0a7e6fc96109e7e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8e7f8254e6104f7f810a08e7bc40c881\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"103422c001d34243abe3d2b490c1ad64\",\n          \"target\": \"8a34229dec9541d9a6adb6912bf7a514\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6a1a84c0c5e946aaa30937a7842e877b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n          \"target\": \"d7b9bd2984184fd0b8da5517bd697af5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bf2a4608144842c9b5a083af3842f28d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c48eb365a05d43d89b65179efecb9dd5\",\n          \"target\": \"47026a9b8ef34ea39d199641087ffadf\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"346c8c0758e04bb6909c05ae4ac0e069\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1e4448cfae3046c9b40c0f47f4790cb6\",\n          \"target\": \"c48eb365a05d43d89b65179efecb9dd5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"776fe05359d64a0d9fdf45bfac5ca237\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bf701dc1c59347728037a98fa3df797c\",\n          \"target\": \"1e4448cfae3046c9b40c0f47f4790cb6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"51237023c42649059ad45f25d4ef7b54\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6197d1bbdb894ba9a0b5e9543aeb6a69\",\n          \"target\": \"bf701dc1c59347728037a98fa3df797c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5735797b24a340c38246373d9eaac6bf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"08ad47e40040419196b9edab91d8ef82\",\n          \"target\": \"6197d1bbdb894ba9a0b5e9543aeb6a69\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.resultsToDisplay == \\\"geniusResult\\\";\\n})()\\n\"\n          },\n          \"label\": \"Display Genius Result\"\n        },\n        {\n          \"id\": \"90029b4a84d042eaba71ae81afcaafbc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"08aa6cfa138048c09564bce6da538b58\",\n          \"target\": \"08ad47e40040419196b9edab91d8ef82\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8feb53c0dbb945b080e87dc87f1fa552\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"525306d9f27b4275a0a7e6fc96109e7e\",\n          \"target\": \"e1352bb47698492cbae8f2dcca00dd28\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.isSearchAvailable;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"6fb78d0790ae4e4da62513cfa71b6f3b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e5a0c9a11ade4dfa9424107d13edf6ea\",\n          \"target\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'no' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"62c326eefb52487c9e555aaff4a5e596\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0ff6294905b34f6f9ff252ec7427362c\",\n          \"target\": \"2045ed7aa08a414bbee05fa69e18c9cb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5c0c5f63902545bfad258899db33e941\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"47026a9b8ef34ea39d199641087ffadf\",\n          \"target\": \"e5a0c9a11ade4dfa9424107d13edf6ea\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"70da8daf808843f7bc6f673b9c267d5f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"81ae0846d9a04fd185f833beabff5b22\",\n          \"target\": \"3d72230cd3de4205b34ec97f84373bfe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bcb205abe22f49a9be765886ebb6edbc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3603496ffa64496c824eb53c445d16c7\",\n          \"target\": \"3d72230cd3de4205b34ec97f84373bfe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5aec6dd92c7e48379e7d27d5867f9f71\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3d72230cd3de4205b34ec97f84373bfe\",\n          \"target\": \"614bdf7bcf1d4cf48f7e7a1d4adf31ec\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !gs.nil(vaVars.reqItemId);\\n})()\\n\"\n          },\n          \"label\": \"Request Id Found\"\n        },\n        {\n          \"id\": \"689951f9683c4e409b14244bfb732132\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"614bdf7bcf1d4cf48f7e7a1d4adf31ec\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8b84935952b444c79288a2302f59615d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3d72230cd3de4205b34ec97f84373bfe\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.reqItemId);\\n})()\\n\"\n          },\n          \"label\": \"Request Id Not Found\"\n        },\n        {\n          \"id\": \"d9559deee77f4d468bc1aa800f9b8262\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e5a0c9a11ade4dfa9424107d13edf6ea\",\n          \"target\": \"e1fd90cb996a40479c55686ff933f948\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'another_search' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"Another Search\"\n        },\n        {\n          \"id\": \"b38dc0edb4e340388e081be67c8d1de4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"08ad47e40040419196b9edab91d8ef82\",\n          \"target\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.resultsToDisplay == \\\"regularResult\\\";\\n})()\\n\"\n          },\n          \"label\": \"Display Results\"\n        },\n        {\n          \"id\": \"2e8fe1df154e47828202b57df6da1d55\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\n          \"target\": \"f398fc51c4e54b939543c9659b3f7d40\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_links_helpful == 'request_catalog_item';\\n})()\\n\"\n          },\n          \"label\": \"Request Catalog Item\"\n        },\n        {\n          \"id\": \"e74de6aea03b42548c1ac74e250e52c0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d7b9bd2984184fd0b8da5517bd697af5\",\n          \"target\": \"e1fd90cb996a40479c55686ff933f948\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.display_options == 'another_search' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"Another Search\"\n        },\n        {\n          \"id\": \"d6f6e7e0a22e451c864cc7371fe3059b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\n          \"target\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_links_helpful == 'no';\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"4e3d141d34c14835935a22860d8fe87c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"6eaf550a589b4c32a7f5ff99ff32a0d0\",\n          \"target\": \"c536398c3458489cb440181fae14bcf0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var prefix = vaInputs.display_options.getDisplayValue();\\n    if (prefix.includes(\\\"(Catalog)\\\") || prefix.includes(\\\"(People)\\\") || prefix.includes(\\\"(KB)\\\"))\\n       return true;\\n})()\\n\"\n          },\n          \"label\": \"OOB Result Selected\"\n        },\n        {\n          \"id\": \"e1d7727458ee44d7b8e65f429c07cf6f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"6eaf550a589b4c32a7f5ff99ff32a0d0\",\n          \"target\": \"892d0a2e0be54931804dd7005978637b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var prefix = vaInputs.display_options.getDisplayValue();\\n    if (!(prefix.includes(\\\"(Catalog)\\\")) && !(prefix.includes(\\\"(People)\\\")) && !(prefix.includes(\\\"(KB)\\\")))\\n       return true;\\n})()\\n\"\n          },\n          \"label\": \"Custom Result\"\n        },\n        {\n          \"id\": \"55bd43dac50a4ce0b70870863c1d3a71\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c2c7ebc7d62442899bf1808998e39692\",\n          \"target\": \"a5622c87208f4a9abb79068412da9507\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e7e98969b4304401808e8328ff1606df\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a5622c87208f4a9abb79068412da9507\",\n          \"target\": \"1a72b44f5c2c4981b64b0f19aa211e74\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"af57f38db5374bf6a7df68eb2a108344\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1a72b44f5c2c4981b64b0f19aa211e74\",\n          \"target\": \"33046537e25c481999e7c26a7b862904\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7b81d89ee1b14a3bac8c23924f098a96\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"33046537e25c481999e7c26a7b862904\",\n          \"target\": \"81ae0846d9a04fd185f833beabff5b22\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var helpful = vaInputs.ask_custom_links_helpful == 'yes';\\n\\n    if (helpful) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the custom search results were helpful');\\n    }\\n\\n    return helpful;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"96850e84b6364b0ca25eec20ed7beb46\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3532e524a59a48e5b7f17dfc0b8f773f\",\n          \"target\": \"81ae0846d9a04fd185f833beabff5b22\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1cbe0dc98502476c9c2ea90cd6a97bae\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e5a0c9a11ade4dfa9424107d13edf6ea\",\n          \"target\": \"f398fc51c4e54b939543c9659b3f7d40\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'request_catalog_item' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"Request Catalog Item\"\n        },\n        {\n          \"id\": \"235d9a687b2e4880997c2299bdf6470d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\n          \"target\": \"5ab22a100a124b318245675cadb51f86\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var helpful = vaInputs.ask_links_helpful == 'yes';\\n\\n    if (helpful) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the search results were helpful');\\n    }\\n\\n    return helpful;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"d9b2ebe3db6b4606aa7e690c6aa7bc31\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c536398c3458489cb440181fae14bcf0\",\n          \"target\": \"18bb75c617874d868be87ce68d2fbee1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ceec787014de40048bc90ea3344e91ff\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e1352bb47698492cbae8f2dcca00dd28\",\n          \"target\": \"ecc69546417844a8826ca2bb543d1009\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"20d9a4c2599d44cea48571eea5730c25\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ecc69546417844a8826ca2bb543d1009\",\n          \"target\": \"57a1973b8ade4368800172c3535d8d3d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9b4b8aa978f74e29bf3192982d10a3d5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"57a1973b8ade4368800172c3535d8d3d\",\n          \"target\": \"4397d6f32aee4d9585e3c1cef9f49514\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.didFdihInvocationTimeOut;\\n})()\"\n          },\n          \"label\": \"Did not timeout\"\n        },\n        {\n          \"id\": \"c542e911bffc48ecbda89fdcbb51b04a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"57a1973b8ade4368800172c3535d8d3d\",\n          \"target\": \"ce2b385dd8a6432785e463128d148488\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.didFdihInvocationTimeOut;\\n})()\"\n          },\n          \"label\": \"Timed out\"\n        },\n        {\n          \"id\": \"6999ab81db2f44ceb87d9d4f46bf67b7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f398fc51c4e54b939543c9659b3f7d40\",\n          \"target\": \"44d38a478fdf4c6fae4ad8ebd74b8e11\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c13dccc047b04b19b7d94509390d9b45\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"44d38a478fdf4c6fae4ad8ebd74b8e11\",\n          \"target\": \"874df4bb039e40c2a83798fe240f204c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.catalogRenderType === \\\"conversation\\\";\\n})()\\n\"\n          },\n          \"label\": \"Conversation\"\n        },\n        {\n          \"id\": \"f2216da5d0bd4ec4a40c1b8c20137a7e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"44d38a478fdf4c6fae4ad8ebd74b8e11\",\n          \"target\": \"725aeaa1c78745849b0a4ee7b9365968\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.catalogRenderType === \\\"inline-seismic\\\";\\n})()\\n\"\n          },\n          \"label\": \"Inline-Seismic\"\n        },\n        {\n          \"id\": \"b7cc4a3ae8b54706a204965826c8efb1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"725aeaa1c78745849b0a4ee7b9365968\",\n          \"target\": \"4f370616ae704df1b50edf68d8cc2a34\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e94c2b8cb3474171b014cec85ed33bd6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4f370616ae704df1b50edf68d8cc2a34\",\n          \"target\": \"3603496ffa64496c824eb53c445d16c7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c13345060487488193d6f7e6eee746be\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"874df4bb039e40c2a83798fe240f204c\",\n          \"target\": \"50110c47284f49d7ba6ff64f48a45a2b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"44fdff63b1114e3d97f2703bf85d73ae\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"50110c47284f49d7ba6ff64f48a45a2b\",\n          \"target\": \"3603496ffa64496c824eb53c445d16c7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"ec4fbd7603204a83a2b664be6ac641c4\": {\n      \"id\": \"ec4fbd7603204a83a2b664be6ac641c4\",\n      \"name\": \"search_term\",\n      \"label\": \"Search Term\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"0ff6294905b34f6f9ff252ec7427362c\",\n      \"isHidden\": false\n    },\n    \"3ef8f6b94c954b4dbdacee7679488d53\": {\n      \"id\": \"3ef8f6b94c954b4dbdacee7679488d53\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"geniusResults\",\n      \"label\": \"geniusResults\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"dd61e2628fdf4537bdf80433b0bfef33\": {\n      \"id\": \"dd61e2628fdf4537bdf80433b0bfef33\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"searchResults\",\n      \"label\": \"searchResults\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"61bb15ce9c404704a7d9b1c7efc7119a\": {\n      \"id\": \"61bb15ce9c404704a7d9b1c7efc7119a\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return false;\\n})()\\n\"\n      },\n      \"name\": \"shouldAskInfoHelpful\",\n      \"label\": \"shouldAskInfoHelpful\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"79c4509501b24ba8b0242741deba8800\": {\n      \"id\": \"79c4509501b24ba8b0242741deba8800\",\n      \"name\": \"search_application_configuration\",\n      \"label\": \"Search Application Configuration\",\n      \"defaultValue\": \"\",\n      \"varType\": \"reference\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"table\": \"sys_search_context_config\",\n      \"nodeId\": \"0ff6294905b34f6f9ff252ec7427362c\",\n      \"isHidden\": false\n    },\n    \"e728aa82e4374dd1b131e5718f5a1992\": {\n      \"id\": \"e728aa82e4374dd1b131e5718f5a1992\",\n      \"name\": \"ask_genius_helpful\",\n      \"label\": \"Ask Genius Helpful\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"c48eb365a05d43d89b65179efecb9dd5\",\n      \"isHidden\": false,\n      \"autoSelect\": false,\n      \"autoSelectExpression\": \"\"\n    },\n    \"2d34b3d9ee8541769cbe63615b73ba04\": {\n      \"id\": \"2d34b3d9ee8541769cbe63615b73ba04\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"searchMetadata\",\n      \"label\": \"searchMetadata\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"0a6190d6b5ae43cda309e63d6abd840d\": {\n      \"id\": \"0a6190d6b5ae43cda309e63d6abd840d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogId\",\n      \"label\": \"catalogId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4a0e5ea3868d4a4f8e5bc61ce78d1f01\": {\n      \"id\": \"4a0e5ea3868d4a4f8e5bc61ce78d1f01\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"reqItemId\",\n      \"label\": \"reqItemId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9c520c4e27c64e5581b26e4796b524dc\": {\n      \"id\": \"9c520c4e27c64e5581b26e4796b524dc\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"startTime\",\n      \"label\": \"startTime\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d0cefa797f544b94bc662bc078028754\": {\n      \"id\": \"d0cefa797f544b94bc662bc078028754\",\n      \"name\": \"ask_another_search\",\n      \"label\": \"Ask Another Search\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"0ff6294905b34f6f9ff252ec7427362c\",\n      \"isHidden\": false\n    },\n    \"07ad9582bde7415f8ec79155bd6870ed\": {\n      \"id\": \"07ad9582bde7415f8ec79155bd6870ed\",\n      \"name\": \"record_id\",\n      \"label\": \"Record_id\",\n      \"defaultValue\": \"record_id\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"nodeId\": \"874df4bb039e40c2a83798fe240f204c\",\n      \"isHidden\": false\n    },\n    \"bdc360493a3745ed86cb13dc4d5b0e38\": {\n      \"id\": \"bdc360493a3745ed86cb13dc4d5b0e38\",\n      \"name\": \"record_table\",\n      \"label\": \"Record_table\",\n      \"defaultValue\": \"record_table\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"nodeId\": \"874df4bb039e40c2a83798fe240f204c\",\n      \"isHidden\": false\n    },\n    \"fee8096e6419421ebecca7d2048f97e4\": {\n      \"id\": \"fee8096e6419421ebecca7d2048f97e4\",\n      \"name\": \"variables\",\n      \"label\": \"Variables\",\n      \"defaultValue\": \"variables\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"nodeId\": \"874df4bb039e40c2a83798fe240f204c\",\n      \"isHidden\": false\n    },\n    \"19b4885bd86345abae37f28678a72080\": {\n      \"id\": \"19b4885bd86345abae37f28678a72080\",\n      \"name\": \"new_search_term\",\n      \"label\": \"New Search Term\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY2NDQyMTYwNDc5MiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"e1fd90cb996a40479c55686ff933f948\",\n      \"isHidden\": false\n    },\n    \"65311cc1f9bf461e98adc7d146842f0c\": {\n      \"id\": \"65311cc1f9bf461e98adc7d146842f0c\",\n      \"name\": \"display_options\",\n      \"label\": \"Display Options\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"e9ea713d5cff4bc1823256cbdfa1c3e5\",\n      \"isHidden\": false,\n      \"autoSelect\": false,\n      \"autoSelectExpression\": \"\"\n    },\n    \"ca4759ec446d42b68bb8a54d597424b0\": {\n      \"id\": \"ca4759ec446d42b68bb8a54d597424b0\",\n      \"name\": \"ask_links_helpful\",\n      \"label\": \"Ask Links Helpful\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"103422c001d34243abe3d2b490c1ad64\",\n      \"isHidden\": false,\n      \"autoSelect\": false,\n      \"autoSelectExpression\": \"\"\n    },\n    \"6cd4dbcfa11c440d8b7693ddc24facb2\": {\n      \"id\": \"6cd4dbcfa11c440d8b7693ddc24facb2\",\n      \"name\": \"ask_custom_links_helpful\",\n      \"label\": \"Ask Custom Links Helpful\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"a5622c87208f4a9abb79068412da9507\",\n      \"isHidden\": false,\n      \"autoSelect\": false,\n      \"autoSelectExpression\": \"\"\n    },\n    \"d58d38bf38df47c8becf225cde3f05ff\": {\n      \"id\": \"d58d38bf38df47c8becf225cde3f05ff\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogRenderType\",\n      \"label\": \"catalogRenderType\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"54c90c455c074a6c826cb22f74cd683e\": {\n      \"id\": \"54c90c455c074a6c826cb22f74cd683e\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogRecordId\",\n      \"label\": \"catalogRecordId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1f489b95e50a4c88aae14a94eec91aec\": {\n      \"id\": \"1f489b95e50a4c88aae14a94eec91aec\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogRecordTable\",\n      \"label\": \"catalogRecordTable\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"477b05c27bd6497fa5b376fca7dada1a\": {\n      \"id\": \"477b05c27bd6497fa5b376fca7dada1a\",\n      \"name\": \"record_id1\",\n      \"label\": \"Record_id1\",\n      \"defaultValue\": \"record_id\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"725aeaa1c78745849b0a4ee7b9365968\",\n      \"isHidden\": false\n    },\n    \"c89765e5e7264cda9ad7c717ffc6eeac\": {\n      \"id\": \"c89765e5e7264cda9ad7c717ffc6eeac\",\n      \"name\": \"record_table1\",\n      \"label\": \"Record_table1\",\n      \"defaultValue\": \"record_table\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"725aeaa1c78745849b0a4ee7b9365968\",\n      \"isHidden\": false\n    },\n    \"5a79d6a838414b3e95f3678d9ab79747\": {\n      \"id\": \"5a79d6a838414b3e95f3678d9ab79747\",\n      \"name\": \"message\",\n      \"label\": \"Message\",\n      \"defaultValue\": \"message\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"725aeaa1c78745849b0a4ee7b9365968\",\n      \"isHidden\": false\n    },\n    \"b5b4f76d6de04da19313d6c451e4f368\": {\n      \"id\": \"b5b4f76d6de04da19313d6c451e4f368\",\n      \"name\": \"status\",\n      \"label\": \"Status\",\n      \"defaultValue\": \"status\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"725aeaa1c78745849b0a4ee7b9365968\",\n      \"isHidden\": false\n    },\n    \"6e8d4a25a6b74763be6357f17f51ed39\": {\n      \"id\": \"6e8d4a25a6b74763be6357f17f51ed39\",\n      \"name\": \"search_result\",\n      \"label\": \"Search_result\",\n      \"defaultValue\": \"Search Result\",\n      \"varType\": \"json\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Search_result\",\n      \"variableName\": \"search_result\",\n      \"nodeId\": \"e1352bb47698492cbae8f2dcca00dd28\",\n      \"isHidden\": false\n    },\n    \"2473bf9d712240e9abe314285998a0e3\": {\n      \"id\": \"2473bf9d712240e9abe314285998a0e3\",\n      \"name\": \"action_status\",\n      \"label\": \"Action Status\",\n      \"defaultValue\": \"Action Status\",\n      \"varType\": \"object\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Action Status\",\n      \"variableName\": \"action_status\",\n      \"nodeId\": \"e1352bb47698492cbae8f2dcca00dd28\",\n      \"isHidden\": false\n    },\n    \"ea639d6dbe1f4f978b01e2300c16a4f2\": {\n      \"id\": \"ea639d6dbe1f4f978b01e2300c16a4f2\",\n      \"name\": \"don_t_treat_as_error\",\n      \"label\": \"Don't Treat As Error\",\n      \"defaultValue\": \"Don't Treat as Error\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Don't Treat As Error\",\n      \"variableName\": \"don_t_treat_as_error\",\n      \"nodeId\": \"e1352bb47698492cbae8f2dcca00dd28\",\n      \"isHidden\": false\n    },\n    \"9ec9e3bd1c674802942a8ad4d4e5e341\": {\n      \"id\": \"9ec9e3bd1c674802942a8ad4d4e5e341\",\n      \"name\": \"end_time\",\n      \"label\": \"End Time\",\n      \"defaultValue\": \"End time\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"End Time\",\n      \"variableName\": \"end_time\",\n      \"nodeId\": \"e1352bb47698492cbae8f2dcca00dd28\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"318e25f3538120103296ddeeff7b128c","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_design_topic_318e25f3538120103296ddeeff7b128c","sys_updated_by":"admin","sys_created_on":"2020-12-19 20:03:41","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"e05f7306c5d4468c8d3d7558add39ff5\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"e05f7306c5d4468c8d3d7558add39ff5\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"e05f7306c5d4468c8d3d7558add39ff5\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"0ff6294905b34f6f9ff252ec7427362c\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"ce2b385dd8a6432785e463128d148488\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Results to Display?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No Results or Error\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.didFdihInvocationTimeOut ||\\n       (gs.nil(vaVars.geniusResults) && gs.nil(vaVars.searchResults));\\n})()\"},\"id\":\"0c0cbd98f68a41f4a4546d91a355f081\",\"name\":\"No Results or Error\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Display Genius Result\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.resultsToDisplay == \\\"geniusResult\\\";\\n})()\\n\"},\"id\":\"7842c03ef9614555a6a62af9dc95475e\",\"name\":\"Display Genius Result\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Display Results\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.resultsToDisplay == \\\"regularResult\\\";\\n})()\\n\"},\"id\":\"a1c579cb48c84f84aae62a03f4b169c0\",\"name\":\"Display Results\",\"expert_mode\":false}],\"id\":\"08ad47e40040419196b9edab91d8ef82\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"6197d1bbdb894ba9a0b5e9543aeb6a69\",\"name\":\"Display Genius Result\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n    return global.VAAISearchHelperXanadu.generateGeniusCardResponse(\\n        vaVars.searchMetadata, vaVars.geniusResults, vaSystem, vaInputs, vaVars, vaContext, \\\"ask_genius_helpful\\\");\\n})()\\n\"},\"secure\":false},{\"type\":\"Decision\",\"name\":\"Was Genius Helpful?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var helpful = vaInputs.ask_genius_helpful == 'yes' ? true : false;\\n    \\n    if (helpful) {\\n        VAAISearchHelper.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the search results were helpful');\\n    }\\n\\n    return helpful;\\n})()\\n\"},\"id\":\"8999b9f23d204a8295310ba1e9e7f8ad\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'no' ? true : false;\\n})()\\n\"},\"id\":\"ec3e5b0f44f044a38bcd623ef2454b56\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Another Search\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'another_search' ? true : false;\\n})()\\n\"},\"id\":\"aa21cf90865545bfbc5bafb4efbe3f0a\",\"name\":\"Another Search\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Request Catalog Item\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'request_catalog_item' ? true : false;\\n})()\\n\"},\"id\":\"35337888765645c0bb2f36abab1acc0e\",\"name\":\"Request Catalog Item\",\"expert_mode\":false}],\"id\":\"e5a0c9a11ade4dfa9424107d13edf6ea\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var now = new GlideDateTime().getNumericValue();\\n    var elapsedTime = now - vaVars.startTime;\\n    var returnTime = now - vaInputs.end_time;\\n    var logger = global.VAAISearchHelper.getLogger(vaVars.loggingContext);\\n    logger.debug('AI Search FDIH action time: {0}ms', elapsedTime);\\n    logger.debug('AI Search FDIH returned to VA in {0}ms', returnTime);\\n\\n    var results = JSON.stringify(global.VAAISearchHelper.filterResultsForLoggedInUser(\\n        vaInputs.search_result.toString(), vaSystem, vaVars.loggingContext));\\n\\n    var processedResults = global.VAAISearchHelperUtah.processResults(results, vaSystem, vaInputs, vaVars);\\n    vaVars.searchMetadata = processedResults.searchMetadata;\\n    vaVars.geniusResults = processedResults.geniusSearchResults;\\n    vaVars.searchResults = processedResults.searchResults;\\n    if (!gs.nil(vaVars.searchMetadata) && vaVars.searchMetadata != \\\"{}\\\")\\n        logger.debug('AI Search performed on server in {0}ms',\\n            JSON.parse(vaVars.searchMetadata).glide_signals.searchResultMetadata.responseTimeInMs);\\n})()\",\"id\":\"4397d6f32aee4d9585e3c1cef9f49514\",\"name\":\"Process Results\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.loggingContext = JSON.stringify(global.VAAISearchHelperTokyo.getLoggingContext(vaSystem));\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).debug('Starting \\\"AI Search\\\" topic block');\\n    vaVars.startTime = new GlideDateTime().getNumericValue();\\n    vaVars.isSearchAvailable = global.VAAISearchHelperTokyo.isSearchEnabled(vaVars.loggingContext);\\n\\n    // This script has to run before any other operations to collect correct info.\\n    // If the node runs under the platform thread, the info can be incorrect.\\n    vaVars.session_id = gs.getSessionID();\\n    vaVars.user_id = vaInputs.user.getValue();\\n    vaVars.is_logged_in = gs.getSession().isLoggedIn();\\n    vaVars.language = gs.getSession().getLanguage();\\n    //AI Search start timestamp\\n    vaVars.time = global.VAClickMetrics.getCurrentTime();\\n\\n    // flag for sending SEARCH_RESULT_DISPLAYED event for processing \\n    vaVars.sendDisplayedSearchResultClickMetricsEvent = true;\\n})()\\n\",\"id\":\"2045ed7aa08a414bbee05fa69e18c9cb\",\"name\":\"Collect Search Info\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"FDIHInvocation\",\"name\":\"Run AI Search\",\"kind\":\"action\",\"mode\":\"sync\",\"inputs\":[{\"supported_input_modes\":[],\"name\":\"search_term\",\"type\":\"string\",\"order\":0,\"required\":true,\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.search_term}}\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"context_profile_id\",\"type\":\"script\",\"order\":0,\"required\":true,\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaSystem.getContextProfileId();\\n})()\\n\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"search_context_id\",\"type\":\"string\",\"order\":0,\"required\":false,\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.search_application_configuration}}\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"logging_context\",\"type\":\"script\",\"order\":0,\"required\":false,\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.loggingContext;\\n})()\\n\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"locale\",\"type\":\"script\",\"order\":0,\"required\":false,\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaSystem.getRequesterLocale();\\n})()\\n\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"start_time\",\"type\":\"script\",\"order\":0,\"required\":true,\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.startTime;\\n})()\\n\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"additional_context\",\"order\":0,\"required\":false,\"value\":[],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"gr_config_filter\",\"order\":0,\"required\":false,\"value\":[],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"search_result_type\",\"order\":0,\"required\":false,\"value\":[],\"is_list_data_entry\":false}],\"outputs\":[{\"name\":\"search_result\",\"order\":0,\"value\":[],\"is_list_data_entry\":false,\"topicVariableName\":\"search_result\"},{\"name\":\"__action_status__\",\"order\":0,\"value\":[],\"is_list_data_entry\":false,\"topicVariableName\":\"action_status\"},{\"name\":\"__dont_treat_as_error__\",\"order\":0,\"value\":[],\"is_list_data_entry\":false,\"topicVariableName\":\"don_t_treat_as_error\"},{\"name\":\"end_time\",\"order\":0,\"value\":[],\"is_list_data_entry\":false,\"topicVariableName\":\"end_time\"}],\"metadata\":{\"runAs\":\"session_user\"},\"id\":\"e1352bb47698492cbae8f2dcca00dd28\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"sys_id\":\"2eaf23715b621010a76b04d13d81c7b5\",\"scope\":\"global\"},{\"type\":\"Decision\",\"name\":\"Search Enabled?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.isSearchAvailable;\\n})()\\n\"},\"id\":\"8f54052e70fe433d9b99240e6e6967f2\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.isSearchAvailable;\\n})()\\n\"},\"id\":\"7c6f8ed438574d95bbc55d883cd52d62\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"525306d9f27b4275a0a7e6fc96109e7e\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"c48eb365a05d43d89b65179efecb9dd5\",\"name\":\"Ask Genius Helpful\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"e728aa82e4374dd1b131e5718f5a1992\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return gs.getMessageLang(\\\"What would you like to do now?\\\", vaContext.getRequesterLang());\\n})()\\n\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var searchTerm = vaInputs.search_term;\\n\\n    if (!gs.nil(vaVars.catalogId)) {\\n        options.unshift({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request this item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    } else {\\n        options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Show me more on \\\"{0}\\\"', vaContext.getRequesterLang(), [searchTerm]), 'render_style': 'data'});\\n    if (vaInputs.ask_another_search == 'true')\\n        options.push({ 'value': 'another_search', 'label': gs.getMessageLang('Ask something else', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Oops, something went wrong\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    var searchTerm = vaInputs.search_term;\\n\\n    if (!gs.nil(vaVars.catalogId)) {\\n        options.unshift({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request this item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    } else {\\n        options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Show me more on \\\"{0}\\\"', vaContext.getRequesterLang(), [searchTerm]), 'render_style': 'data'});\\n    if (vaInputs.ask_another_search == 'true')\\n        options.push({ 'value': 'another_search', 'label': gs.getMessageLang('Ask something else', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\"},\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    try {\\n        var jsonData = JSON.parse(vaVars.geniusResults);\\n        var catalogId = jsonData.propValues.actions[0].actionPayload.sysId.toString();\\n        \\n        vaVars.catalogRenderType = global.VAAISearchHelperXanadu.getConversationalRenderType(catalogId, vaContext.deviceType);\\n        \\n        if (vaVars.catalogRenderType == \\\"conversation\\\" || vaVars.catalogRenderType == \\\"inline-seismic\\\") {\\n            vaVars.catalogId = catalogId;\\n        }\\n    } catch (e) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).warn('No Catalog Id found for this search result.');\\n    }\\n})()\\n\",\"id\":\"bf701dc1c59347728037a98fa3df797c\",\"name\":\"Get Catalog Id\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_genius_helpful\\\");\\n})()\\n\",\"id\":\"1e4448cfae3046c9b40c0f47f4790cb6\",\"name\":\"Set Genius Reference Choice\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_genius_helpful\\\");\\n})()\\n\",\"id\":\"47026a9b8ef34ea39d199641087ffadf\",\"name\":\"Unset Genius Reference Choice\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if (vaVars.catalogRecordTable.toString() == \\\"sc_req_item\\\") {\\n        var gr = new GlideRecord(\\\"sc_req_item\\\");\\n        gr.addQuery('sys_id', vaVars.catalogRecordId.toString());\\n        gr.query();\\n        if(gr.next()) {\\n            vaVars.reqItemId = gr.getValue(\\\"sys_id\\\");\\n        }\\n    } else {\\n        vaVars.reqItemId = vaVars.catalogRecordId.toString();\\n    }\\n\\n    vaVars.requestTable = vaVars.catalogRecordTable.toString();\\n})()\\n\\n\",\"id\":\"3603496ffa64496c824eb53c445d16c7\",\"name\":\"Calculate Request Id\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Request Catalog Item\",\"library_topic_id\":\"a39acd71c3a3330012d1758a7ff57eb6\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"catalog_item_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.catalogId}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"execute_contextual_search\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"confirm_catalog_item\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"show_end_state_card\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"record_id\",\"main_topic_mapped_variable_name\":\"record_id\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"record_table\",\"main_topic_mapped_variable_name\":\"record_table\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"variables\",\"main_topic_mapped_variable_name\":\"variables\"}],\"header_card_fields\":[],\"id\":\"874df4bb039e40c2a83798fe240f204c\",\"name\":\"Request Catalog Item\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    // Special handling for requests in sc_req_item\\n    if (!gs.nil(vaVars.requestTable)) {\\n        if (vaVars.requestTable.toString() == \\\"sc_request\\\") {\\n            var grRequest = new GlideRecord(\\\"sc_request\\\");\\n            grRequest.addQuery(\\\"number\\\", vaVars.requestId);\\n            grRequest.query();\\n            if(grRequest.next()) {\\n                var grReqItem = new GlideRecord(\\\"sc_req_item\\\");\\n                grReqItem.addQuery(\\\"request\\\", grRequest.sys_id);\\n                grReqItem.query();\\n                if(grReqItem.next()) {\\n                    vaVars.reqItemId = grReqItem.getValue(\\\"sys_id\\\");\\n                    vaVars.requestTable = \\\"sc_req_item\\\";\\n                }\\n            }\\n        } else {\\n            var grTable = new GlideRecord(vaVars.requestTable.toString());\\n            grTable.addQuery(\\\"number\\\", vaVars.requestId);\\n            grTable.query();\\n            if (grTable.next()) {\\n                vaVars.reqItemId = grTable.getValue(\\\"sys_id\\\");\\n            }\\n        }\\n    }\\n})()\\n\",\"id\":\"81ae0846d9a04fd185f833beabff5b22\",\"name\":\"Calculate Request Id\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Is Request Id Available?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Request Id Found\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !gs.nil(vaVars.reqItemId);\\n})()\\n\"},\"id\":\"859df55e1c1a4f3e94ad100d19d16863\",\"name\":\"Request Id Found\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Request Id Not Found\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaVars.reqItemId);\\n})()\\n\"},\"id\":\"e9246069dc694bf8995e32502eea4eb0\",\"name\":\"Request Id Not Found\",\"expert_mode\":false}],\"id\":\"3d72230cd3de4205b34ec97f84373bfe\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"End state card for Catalog Request\",\"library_topic_id\":\"0b01391550d30110fa9b861f7d83d7f6\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"record_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.reqItemId}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"record_table\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.requestTable;\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[],\"header_card_fields\":[],\"id\":\"614bdf7bcf1d4cf48f7e7a1d4adf31ec\",\"name\":\"End state card for Catalog Request\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"19b4885bd86345abae37f28678a72080\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return gs.getMessageLang(\\\"Ok, how else can I help?\\\", vaContext.getRequesterLang());\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":true,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"e1fd90cb996a40479c55686ff933f948\",\"name\":\"New Search Term\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"Text\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.resultsToDisplay = global.VAAISearchHelperVancouver.calculateResultsToDisplay(vaSystem, vaInputs, vaVars, vaContext);\\n})()\\n\",\"id\":\"08aa6cfa138048c09564bce6da538b58\",\"name\":\"Check results to display\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"e9ea713d5cff4bc1823256cbdfa1c3e5\",\"name\":\"Display Options\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"65311cc1f9bf461e98adc7d146842f0c\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(\\\"Here are the results you may find helpful\\\", vaContext.getRequesterLang());\\n})()\\n\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n\\n    var resultMap = global.VAAISearchHelperVancouver.createResultMap(vaVars.searchMetadata, vaVars.searchResults, vaSystem, vaInputs, vaVars, vaContext);\\n    \\n    // Set false to avoid duplications. Once sent, this flag prevents the same payload from being sent again\\n    vaVars.sendDisplayedSearchResultClickMetricsEvent = false;\\n\\n    var options = [];\\n    for (var key in resultMap) {\\n        options.push({ 'value': key, 'label': resultMap[key], 'render_style': 'data'});\\n    }\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('I need more help...', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    if (vaInputs.ask_another_search == 'true')\\n        options.push({ 'value': 'another_search', 'label': gs.getMessageLang('Ask something else...', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Oops, something went wrong\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n\\n    var resultMap = global.VAAISearchHelperVancouver.createResultMap(vaVars.searchMetadata, vaVars.searchResults, vaSystem, vaInputs, vaVars, vaContext);\\n    \\n    // Set false to avoid duplications. Once sent, this flag prevents the same payload from being sent again\\n    vaVars.sendDisplayedSearchResultClickMetricsEvent = false;\\n\\n    var options = [];\\n    for (var key in resultMap) {\\n        options.push({ 'value': key, 'label': resultMap[key], 'render_style': 'data'});\\n    }\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('I need more help...', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    if (vaInputs.ask_another_search == 'true')\\n        options.push({ 'value': 'another_search', 'label': gs.getMessageLang('Ask something else...', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\"},\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Result Selected\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var optionSelected = vaInputs.display_options;\\n    if (optionSelected == 'yes' || optionSelected == 'no' || optionSelected == 'another_search') {\\n        return false;\\n    }\\n    return true;\\n})()\"},\"id\":\"44864d5f5f8f41fa8baed158e1454fda\",\"name\":\"Result Selected\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.display_options == 'no' ? true : false;\\n})()\\n\"},\"id\":\"5f2e311997ed4493a9adbb586ebc432a\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Another Search\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.display_options == 'another_search' ? true : false;\\n})()\\n\"},\"id\":\"c7e3ffdebc0448afab5066d1a1c4aad0\",\"name\":\"Another Search\",\"expert_mode\":false}],\"id\":\"d7b9bd2984184fd0b8da5517bd697af5\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"c536398c3458489cb440181fae14bcf0\",\"name\":\"Display Results Card\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n    return global.VAAISearchHelperXanadu.generateSearchResultsResponse(\\n        vaVars.searchMetadata, vaVars.searchResults, vaSystem, vaInputs, vaVars, vaContext, \\\"ask_links_helpful\\\");\\n})()\"},\"secure\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"103422c001d34243abe3d2b490c1ad64\",\"name\":\"Ask Links Helpful\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"ca4759ec446d42b68bb8a54d597424b0\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(\\\"What would you like to do now?\\\", vaContext.getRequesterLang());\\n})()\\n\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var catalogId = vaInputs.display_options;\\n\\n    vaVars.catalogRenderType = global.VAAISearchHelperXanadu.getConversationalRenderType(catalogId, vaContext.deviceType);\\n    \\n    if (vaVars.catalogRenderType == \\\"conversation\\\" || vaVars.catalogRenderType == \\\"inline-seismic\\\") {\\n        vaVars.catalogId = catalogId;\\n        options.push({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request this item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n    \\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Go back', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Oops, something went wrong\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    var catalogId = vaInputs.display_options;\\n\\n    vaVars.catalogRenderType = global.VAAISearchHelperXanadu.getConversationalRenderType(catalogId, vaContext.deviceType);\\n    \\n    if (vaVars.catalogRenderType == \\\"conversation\\\" || vaVars.catalogRenderType == \\\"inline-seismic\\\") {\\n        vaVars.catalogId = catalogId;\\n        options.push({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request this item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n    \\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Go back', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\\n\"},\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_links_helpful\\\");\\n})()\\n\",\"id\":\"8a34229dec9541d9a6adb6912bf7a514\",\"name\":\"Unset Link Reference Choice\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Was Links Helpful?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Request Catalog Item\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.ask_links_helpful == 'request_catalog_item';\\n})()\\n\"},\"id\":\"ade02ba7a266453a9551abd5678fc44c\",\"name\":\"Request Catalog Item\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.ask_links_helpful == 'no';\\n})()\\n\"},\"id\":\"a8a113a1132243bdb4c5b9cbbbfe4b03\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var helpful = vaInputs.ask_links_helpful == 'yes';\\n\\n    if (helpful) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the search results were helpful');\\n    }\\n\\n    return helpful;\\n})()\\n\"},\"id\":\"b37ded2b4cf94226b629d367e7f331b2\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"OOB Result Selected\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var prefix = vaInputs.display_options.getDisplayValue();\\n    if (prefix.includes(\\\"(Catalog)\\\") || prefix.includes(\\\"(People)\\\") || prefix.includes(\\\"(KB)\\\"))\\n       return true;\\n})()\\n\"},\"id\":\"9086f08a1b184f37a2324e89d7733a13\",\"name\":\"OOB Result Selected\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Custom Result\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var prefix = vaInputs.display_options.getDisplayValue();\\n    if (!(prefix.includes(\\\"(Catalog)\\\")) && !(prefix.includes(\\\"(People)\\\")) && !(prefix.includes(\\\"(KB)\\\")))\\n       return true;\\n})()\\n\"},\"id\":\"3b79cb7f0d2c43e385aedccd04fefe9d\",\"name\":\"Custom Result\",\"expert_mode\":false}],\"id\":\"6eaf550a589b4c32a7f5ff99ff32a0d0\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"LinkOutputPrompt\",\"header\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var searchTerm = vaSystem.getSearchText();\\n    return gs.getMessageLang('Here\\\\'s what I found for \\\"{0}\\\"', vaContext.getRequesterLang(), [vaInputs.display_options.getDisplayValue()]);\\n})()\"},\"label\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"url\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"link_type\":\"multiple\",\"multi_link_script\":\"(function execute(header) {\\n    return global.VAAISearchHelperUtah.generateCustomResultList(vaVars.searchMetadata, vaVars.searchResults, header, vaSystem, vaInputs, vaVars, \\\"ask_custom_links_helpful\\\");\\n})(header)\",\"id\":\"892d0a2e0be54931804dd7005978637b\",\"name\":\"Display Custom Result Link\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_custom_links_helpful\\\");\\n})()\\n\",\"id\":\"c2c7ebc7d62442899bf1808998e39692\",\"name\":\"Set Custom Link Reference Choice\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"a5622c87208f4a9abb79068412da9507\",\"name\":\"Ask Custom Links Helpful\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"6cd4dbcfa11c440d8b7693ddc24facb2\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(\\\"What would you like to do now?\\\", vaContext.getRequesterLang());\\n})()\\n\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Go back', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Oops, something went wrong\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('Go back', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang(\\\"I'm all set\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\"},\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_custom_links_helpful\\\");\\n})()\\n\",\"id\":\"1a72b44f5c2c4981b64b0f19aa211e74\",\"name\":\"Unset Custom Link Reference Choice\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Was Custom Link Helpful?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.ask_custom_links_helpful == 'no';\\n})()\\n\"},\"id\":\"9a64631e002849cc96e6414b03d6b5e4\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var helpful = vaInputs.ask_custom_links_helpful == 'yes';\\n\\n    if (helpful) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the custom search results were helpful');\\n    }\\n\\n    return helpful;\\n})()\\n\"},\"id\":\"dd76cddd869c4a448ab3d35805e5abcc\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"33046537e25c481999e7c26a7b862904\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    global.VAAISearchHelperVancouver.processSearchHelpfulMetrics(vaVars.searchMetadata, vaSystem, vaInputs, vaVars);\\n})()\\n\",\"id\":\"3532e524a59a48e5b7f17dfc0b8f773f\",\"name\":\"Set Click Metrics Event\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    global.VAAISearchHelperVancouver.processSearchCatalogRequestedMetrics(vaVars.searchMetadata, vaSystem, vaInputs, vaVars);\\n})()\\n\",\"id\":\"f398fc51c4e54b939543c9659b3f7d40\",\"name\":\"Set Click Metrics Event\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    global.VAAISearchHelperVancouver.processSearchHelpfulMetrics(vaVars.searchMetadata, vaSystem, vaInputs, vaVars);\\n})()\\n\",\"id\":\"5ab22a100a124b318245675cadb51f86\",\"name\":\"Set Click Metrics Event\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_links_helpful\\\");\\n})()\",\"id\":\"18bb75c617874d868be87ce68d2fbee1\",\"name\":\"Set Link Reference Choice\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.didFdihInvocationTimeOut = vaContext.didFdihInvocationTimeOut();\\n})()\\n\",\"id\":\"ecc69546417844a8826ca2bb543d1009\",\"name\":\"Check if Search Timed Out\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Check for Timeout\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Did not timeout\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.didFdihInvocationTimeOut;\\n})()\"},\"id\":\"dbe8ed91451344aca4a311b707354ae2\",\"name\":\"Did not timeout\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Timed out\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.didFdihInvocationTimeOut;\\n})()\"},\"id\":\"1a165f3297f6479fa955b01c6171dcac\",\"name\":\"Timed out\",\"expert_mode\":false}],\"id\":\"57a1973b8ade4368800172c3535d8d3d\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Catalog Render Type\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.catalogRenderType === \\\"conversation\\\";\\n})()\\n\"},\"id\":\"c30ba91c71d44618b57d35634e798dc6\",\"name\":\"Conversation\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Inline-Seismic\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.catalogRenderType === \\\"inline-seismic\\\";\\n})()\\n\"},\"id\":\"183b523680a3477fbb4d945605522347\",\"name\":\"Inline-Seismic\",\"expert_mode\":false}],\"id\":\"44d38a478fdf4c6fae4ad8ebd74b8e11\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Request Catalog Item Inline-seismic\",\"library_topic_id\":\"689a151977b00210c5c6b2a07b5a99ea\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"catalogitemid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.catalogId}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"requestedforid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.user}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"record_id\",\"main_topic_mapped_variable_name\":\"record_id1\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"record_table\",\"main_topic_mapped_variable_name\":\"record_table1\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"message\",\"main_topic_mapped_variable_name\":\"message\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"status\",\"main_topic_mapped_variable_name\":\"status\"}],\"header_card_fields\":[],\"id\":\"725aeaa1c78745849b0a4ee7b9365968\",\"name\":\"Request Catalog Item Inline-seismic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.catalogRecordId = vaInputs.record_id1;\\n    vaVars.catalogRecordTable = vaInputs.record_table1;\\n})()\\n\",\"id\":\"4f370616ae704df1b50edf68d8cc2a34\",\"name\":\"Set Record Variables\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.catalogRecordId = vaInputs.record_id;\\n    vaVars.catalogRecordTable = vaInputs.record_table;\\n})()\\n\",\"id\":\"50110c47284f49d7ba6ff64f48a45a2b\",\"name\":\"Set Record Variables\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"18bb75c617874d868be87ce68d2fbee1\",\"target_node_id\":\"103422c001d34243abe3d2b490c1ad64\",\"id\":\"b46c0184554341759d80ea69ffc62ccf\"},{\"type\":\"Edge\",\"source_node_id\":\"5ab22a100a124b318245675cadb51f86\",\"target_node_id\":\"81ae0846d9a04fd185f833beabff5b22\",\"id\":\"6f6ea9f5f0024769b08590ab97df34f5\"},{\"type\":\"Edge\",\"source_node_id\":\"8a34229dec9541d9a6adb6912bf7a514\",\"target_node_id\":\"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\"id\":\"4204dd8813d649f29036664ddbf1a8d8\"},{\"type\":\"Edge\",\"source_node_id\":\"e5a0c9a11ade4dfa9424107d13edf6ea\",\"target_node_id\":\"3532e524a59a48e5b7f17dfc0b8f773f\",\"branch_id\":\"8999b9f23d204a8295310ba1e9e7f8ad\",\"id\":\"4b341ef325454102bfde5e8d6328508d\",\"name\":\"8999b9f23d204a8295310ba1e9e7f8ad\"},{\"type\":\"Edge\",\"source_node_id\":\"4397d6f32aee4d9585e3c1cef9f49514\",\"target_node_id\":\"08aa6cfa138048c09564bce6da538b58\",\"id\":\"f8a8ef62f43b46b193876bd8ab0abe44\"},{\"type\":\"Edge\",\"source_node_id\":\"d7b9bd2984184fd0b8da5517bd697af5\",\"target_node_id\":\"6eaf550a589b4c32a7f5ff99ff32a0d0\",\"branch_id\":\"44864d5f5f8f41fa8baed158e1454fda\",\"id\":\"25e72c1b1d09458c86605b93bfdf6ddf\",\"name\":\"44864d5f5f8f41fa8baed158e1454fda\"},{\"type\":\"Edge\",\"source_node_id\":\"33046537e25c481999e7c26a7b862904\",\"target_node_id\":\"e9ea713d5cff4bc1823256cbdfa1c3e5\",\"branch_id\":\"9a64631e002849cc96e6414b03d6b5e4\",\"id\":\"be76f4ead9c1424c82413ade80584896\",\"name\":\"9a64631e002849cc96e6414b03d6b5e4\"},{\"type\":\"Edge\",\"source_node_id\":\"892d0a2e0be54931804dd7005978637b\",\"target_node_id\":\"c2c7ebc7d62442899bf1808998e39692\",\"id\":\"d7f6d47696e84191a11b6433cd02f0d4\"},{\"type\":\"Edge\",\"source_node_id\":\"d7b9bd2984184fd0b8da5517bd697af5\",\"target_node_id\":\"ce2b385dd8a6432785e463128d148488\",\"branch_id\":\"5f2e311997ed4493a9adbb586ebc432a\",\"id\":\"02e9a3828a5c4472aa711dca10788157\",\"name\":\"5f2e311997ed4493a9adbb586ebc432a\"},{\"type\":\"Edge\",\"source_node_id\":\"08ad47e40040419196b9edab91d8ef82\",\"target_node_id\":\"ce2b385dd8a6432785e463128d148488\",\"branch_id\":\"0c0cbd98f68a41f4a4546d91a355f081\",\"id\":\"3105034e8f1e478ab4334ca615fa79ff\",\"name\":\"0c0cbd98f68a41f4a4546d91a355f081\"},{\"type\":\"Edge\",\"source_node_id\":\"525306d9f27b4275a0a7e6fc96109e7e\",\"target_node_id\":\"ce2b385dd8a6432785e463128d148488\",\"branch_id\":\"8f54052e70fe433d9b99240e6e6967f2\",\"id\":\"cf4a56aca1cf4bfcab51ce9985014883\",\"name\":\"8f54052e70fe433d9b99240e6e6967f2\"},{\"type\":\"Edge\",\"source_node_id\":\"e1fd90cb996a40479c55686ff933f948\",\"target_node_id\":\"ce2b385dd8a6432785e463128d148488\",\"id\":\"4fe561d98e284cbbb3e2d121b784336d\"},{\"type\":\"Edge\",\"source_node_id\":\"2045ed7aa08a414bbee05fa69e18c9cb\",\"target_node_id\":\"525306d9f27b4275a0a7e6fc96109e7e\",\"id\":\"521d97c78e824eaca36bad278225eeb7\"},{\"type\":\"Edge\",\"source_node_id\":\"103422c001d34243abe3d2b490c1ad64\",\"target_node_id\":\"8a34229dec9541d9a6adb6912bf7a514\",\"id\":\"8e7f8254e6104f7f810a08e7bc40c881\"},{\"type\":\"Edge\",\"source_node_id\":\"e9ea713d5cff4bc1823256cbdfa1c3e5\",\"target_node_id\":\"d7b9bd2984184fd0b8da5517bd697af5\",\"id\":\"6a1a84c0c5e946aaa30937a7842e877b\"},{\"type\":\"Edge\",\"source_node_id\":\"c48eb365a05d43d89b65179efecb9dd5\",\"target_node_id\":\"47026a9b8ef34ea39d199641087ffadf\",\"id\":\"bf2a4608144842c9b5a083af3842f28d\"},{\"type\":\"Edge\",\"source_node_id\":\"1e4448cfae3046c9b40c0f47f4790cb6\",\"target_node_id\":\"c48eb365a05d43d89b65179efecb9dd5\",\"id\":\"346c8c0758e04bb6909c05ae4ac0e069\"},{\"type\":\"Edge\",\"source_node_id\":\"bf701dc1c59347728037a98fa3df797c\",\"target_node_id\":\"1e4448cfae3046c9b40c0f47f4790cb6\",\"id\":\"776fe05359d64a0d9fdf45bfac5ca237\"},{\"type\":\"Edge\",\"source_node_id\":\"6197d1bbdb894ba9a0b5e9543aeb6a69\",\"target_node_id\":\"bf701dc1c59347728037a98fa3df797c\",\"id\":\"51237023c42649059ad45f25d4ef7b54\"},{\"type\":\"Edge\",\"source_node_id\":\"08ad47e40040419196b9edab91d8ef82\",\"target_node_id\":\"6197d1bbdb894ba9a0b5e9543aeb6a69\",\"branch_id\":\"7842c03ef9614555a6a62af9dc95475e\",\"id\":\"5735797b24a340c38246373d9eaac6bf\",\"name\":\"7842c03ef9614555a6a62af9dc95475e\"},{\"type\":\"Edge\",\"source_node_id\":\"08aa6cfa138048c09564bce6da538b58\",\"target_node_id\":\"08ad47e40040419196b9edab91d8ef82\",\"id\":\"90029b4a84d042eaba71ae81afcaafbc\"},{\"type\":\"Edge\",\"source_node_id\":\"525306d9f27b4275a0a7e6fc96109e7e\",\"target_node_id\":\"e1352bb47698492cbae8f2dcca00dd28\",\"branch_id\":\"7c6f8ed438574d95bbc55d883cd52d62\",\"id\":\"8feb53c0dbb945b080e87dc87f1fa552\",\"name\":\"7c6f8ed438574d95bbc55d883cd52d62\"},{\"type\":\"Edge\",\"source_node_id\":\"e5a0c9a11ade4dfa9424107d13edf6ea\",\"target_node_id\":\"e9ea713d5cff4bc1823256cbdfa1c3e5\",\"branch_id\":\"ec3e5b0f44f044a38bcd623ef2454b56\",\"id\":\"6fb78d0790ae4e4da62513cfa71b6f3b\",\"name\":\"ec3e5b0f44f044a38bcd623ef2454b56\"},{\"type\":\"Edge\",\"source_node_id\":\"0ff6294905b34f6f9ff252ec7427362c\",\"target_node_id\":\"2045ed7aa08a414bbee05fa69e18c9cb\",\"id\":\"62c326eefb52487c9e555aaff4a5e596\"},{\"type\":\"Edge\",\"source_node_id\":\"47026a9b8ef34ea39d199641087ffadf\",\"target_node_id\":\"e5a0c9a11ade4dfa9424107d13edf6ea\",\"id\":\"5c0c5f63902545bfad258899db33e941\"},{\"type\":\"Edge\",\"source_node_id\":\"81ae0846d9a04fd185f833beabff5b22\",\"target_node_id\":\"3d72230cd3de4205b34ec97f84373bfe\",\"id\":\"70da8daf808843f7bc6f673b9c267d5f\"},{\"type\":\"Edge\",\"source_node_id\":\"3603496ffa64496c824eb53c445d16c7\",\"target_node_id\":\"3d72230cd3de4205b34ec97f84373bfe\",\"id\":\"bcb205abe22f49a9be765886ebb6edbc\"},{\"type\":\"Edge\",\"source_node_id\":\"3d72230cd3de4205b34ec97f84373bfe\",\"target_node_id\":\"614bdf7bcf1d4cf48f7e7a1d4adf31ec\",\"branch_id\":\"859df55e1c1a4f3e94ad100d19d16863\",\"id\":\"5aec6dd92c7e48379e7d27d5867f9f71\",\"name\":\"859df55e1c1a4f3e94ad100d19d16863\"},{\"type\":\"Edge\",\"source_node_id\":\"614bdf7bcf1d4cf48f7e7a1d4adf31ec\",\"target_node_id\":\"ce2b385dd8a6432785e463128d148488\",\"id\":\"689951f9683c4e409b14244bfb732132\"},{\"type\":\"Edge\",\"source_node_id\":\"3d72230cd3de4205b34ec97f84373bfe\",\"target_node_id\":\"ce2b385dd8a6432785e463128d148488\",\"branch_id\":\"e9246069dc694bf8995e32502eea4eb0\",\"id\":\"8b84935952b444c79288a2302f59615d\",\"name\":\"e9246069dc694bf8995e32502eea4eb0\"},{\"type\":\"Edge\",\"source_node_id\":\"e5a0c9a11ade4dfa9424107d13edf6ea\",\"target_node_id\":\"e1fd90cb996a40479c55686ff933f948\",\"branch_id\":\"aa21cf90865545bfbc5bafb4efbe3f0a\",\"id\":\"d9559deee77f4d468bc1aa800f9b8262\",\"name\":\"aa21cf90865545bfbc5bafb4efbe3f0a\"},{\"type\":\"Edge\",\"source_node_id\":\"08ad47e40040419196b9edab91d8ef82\",\"target_node_id\":\"e9ea713d5cff4bc1823256cbdfa1c3e5\",\"branch_id\":\"a1c579cb48c84f84aae62a03f4b169c0\",\"id\":\"b38dc0edb4e340388e081be67c8d1de4\",\"name\":\"a1c579cb48c84f84aae62a03f4b169c0\"},{\"type\":\"Edge\",\"source_node_id\":\"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\"target_node_id\":\"f398fc51c4e54b939543c9659b3f7d40\",\"branch_id\":\"ade02ba7a266453a9551abd5678fc44c\",\"id\":\"2e8fe1df154e47828202b57df6da1d55\",\"name\":\"ade02ba7a266453a9551abd5678fc44c\"},{\"type\":\"Edge\",\"source_node_id\":\"d7b9bd2984184fd0b8da5517bd697af5\",\"target_node_id\":\"e1fd90cb996a40479c55686ff933f948\",\"branch_id\":\"c7e3ffdebc0448afab5066d1a1c4aad0\",\"id\":\"e74de6aea03b42548c1ac74e250e52c0\",\"name\":\"c7e3ffdebc0448afab5066d1a1c4aad0\"},{\"type\":\"Edge\",\"source_node_id\":\"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\"target_node_id\":\"e9ea713d5cff4bc1823256cbdfa1c3e5\",\"branch_id\":\"a8a113a1132243bdb4c5b9cbbbfe4b03\",\"id\":\"d6f6e7e0a22e451c864cc7371fe3059b\",\"name\":\"a8a113a1132243bdb4c5b9cbbbfe4b03\"},{\"type\":\"Edge\",\"source_node_id\":\"6eaf550a589b4c32a7f5ff99ff32a0d0\",\"target_node_id\":\"c536398c3458489cb440181fae14bcf0\",\"branch_id\":\"9086f08a1b184f37a2324e89d7733a13\",\"id\":\"4e3d141d34c14835935a22860d8fe87c\",\"name\":\"9086f08a1b184f37a2324e89d7733a13\"},{\"type\":\"Edge\",\"source_node_id\":\"6eaf550a589b4c32a7f5ff99ff32a0d0\",\"target_node_id\":\"892d0a2e0be54931804dd7005978637b\",\"branch_id\":\"3b79cb7f0d2c43e385aedccd04fefe9d\",\"id\":\"e1d7727458ee44d7b8e65f429c07cf6f\",\"name\":\"3b79cb7f0d2c43e385aedccd04fefe9d\"},{\"type\":\"Edge\",\"source_node_id\":\"c2c7ebc7d62442899bf1808998e39692\",\"target_node_id\":\"a5622c87208f4a9abb79068412da9507\",\"id\":\"55bd43dac50a4ce0b70870863c1d3a71\"},{\"type\":\"Edge\",\"source_node_id\":\"a5622c87208f4a9abb79068412da9507\",\"target_node_id\":\"1a72b44f5c2c4981b64b0f19aa211e74\",\"id\":\"e7e98969b4304401808e8328ff1606df\"},{\"type\":\"Edge\",\"source_node_id\":\"1a72b44f5c2c4981b64b0f19aa211e74\",\"target_node_id\":\"33046537e25c481999e7c26a7b862904\",\"id\":\"af57f38db5374bf6a7df68eb2a108344\"},{\"type\":\"Edge\",\"source_node_id\":\"33046537e25c481999e7c26a7b862904\",\"target_node_id\":\"81ae0846d9a04fd185f833beabff5b22\",\"branch_id\":\"dd76cddd869c4a448ab3d35805e5abcc\",\"id\":\"7b81d89ee1b14a3bac8c23924f098a96\",\"name\":\"dd76cddd869c4a448ab3d35805e5abcc\"},{\"type\":\"Edge\",\"source_node_id\":\"3532e524a59a48e5b7f17dfc0b8f773f\",\"target_node_id\":\"81ae0846d9a04fd185f833beabff5b22\",\"id\":\"96850e84b6364b0ca25eec20ed7beb46\"},{\"type\":\"Edge\",\"source_node_id\":\"e5a0c9a11ade4dfa9424107d13edf6ea\",\"target_node_id\":\"f398fc51c4e54b939543c9659b3f7d40\",\"branch_id\":\"35337888765645c0bb2f36abab1acc0e\",\"id\":\"1cbe0dc98502476c9c2ea90cd6a97bae\",\"name\":\"35337888765645c0bb2f36abab1acc0e\"},{\"type\":\"Edge\",\"source_node_id\":\"14bd06c9ed4e4546a0fbb5bc6c5a2bb3\",\"target_node_id\":\"5ab22a100a124b318245675cadb51f86\",\"branch_id\":\"b37ded2b4cf94226b629d367e7f331b2\",\"id\":\"235d9a687b2e4880997c2299bdf6470d\",\"name\":\"b37ded2b4cf94226b629d367e7f331b2\"},{\"type\":\"Edge\",\"source_node_id\":\"c536398c3458489cb440181fae14bcf0\",\"target_node_id\":\"18bb75c617874d868be87ce68d2fbee1\",\"id\":\"d9b2ebe3db6b4606aa7e690c6aa7bc31\"},{\"type\":\"Edge\",\"source_node_id\":\"e1352bb47698492cbae8f2dcca00dd28\",\"target_node_id\":\"ecc69546417844a8826ca2bb543d1009\",\"id\":\"ceec787014de40048bc90ea3344e91ff\"},{\"type\":\"Edge\",\"source_node_id\":\"ecc69546417844a8826ca2bb543d1009\",\"target_node_id\":\"57a1973b8ade4368800172c3535d8d3d\",\"id\":\"20d9a4c2599d44cea48571eea5730c25\"},{\"type\":\"Edge\",\"source_node_id\":\"57a1973b8ade4368800172c3535d8d3d\",\"target_node_id\":\"4397d6f32aee4d9585e3c1cef9f49514\",\"branch_id\":\"dbe8ed91451344aca4a311b707354ae2\",\"id\":\"9b4b8aa978f74e29bf3192982d10a3d5\",\"name\":\"dbe8ed91451344aca4a311b707354ae2\"},{\"type\":\"Edge\",\"source_node_id\":\"57a1973b8ade4368800172c3535d8d3d\",\"target_node_id\":\"ce2b385dd8a6432785e463128d148488\",\"branch_id\":\"1a165f3297f6479fa955b01c6171dcac\",\"id\":\"c542e911bffc48ecbda89fdcbb51b04a\",\"name\":\"1a165f3297f6479fa955b01c6171dcac\"},{\"type\":\"Edge\",\"source_node_id\":\"f398fc51c4e54b939543c9659b3f7d40\",\"target_node_id\":\"44d38a478fdf4c6fae4ad8ebd74b8e11\",\"id\":\"6999ab81db2f44ceb87d9d4f46bf67b7\"},{\"type\":\"Edge\",\"source_node_id\":\"44d38a478fdf4c6fae4ad8ebd74b8e11\",\"target_node_id\":\"874df4bb039e40c2a83798fe240f204c\",\"branch_id\":\"c30ba91c71d44618b57d35634e798dc6\",\"id\":\"c13dccc047b04b19b7d94509390d9b45\",\"name\":\"c30ba91c71d44618b57d35634e798dc6\"},{\"type\":\"Edge\",\"source_node_id\":\"44d38a478fdf4c6fae4ad8ebd74b8e11\",\"target_node_id\":\"725aeaa1c78745849b0a4ee7b9365968\",\"branch_id\":\"183b523680a3477fbb4d945605522347\",\"id\":\"f2216da5d0bd4ec4a40c1b8c20137a7e\",\"name\":\"183b523680a3477fbb4d945605522347\"},{\"type\":\"Edge\",\"source_node_id\":\"725aeaa1c78745849b0a4ee7b9365968\",\"target_node_id\":\"4f370616ae704df1b50edf68d8cc2a34\",\"id\":\"b7cc4a3ae8b54706a204965826c8efb1\"},{\"type\":\"Edge\",\"source_node_id\":\"4f370616ae704df1b50edf68d8cc2a34\",\"target_node_id\":\"3603496ffa64496c824eb53c445d16c7\",\"id\":\"e94c2b8cb3474171b014cec85ed33bd6\"},{\"type\":\"Edge\",\"source_node_id\":\"874df4bb039e40c2a83798fe240f204c\",\"target_node_id\":\"50110c47284f49d7ba6ff64f48a45a2b\",\"id\":\"c13345060487488193d6f7e6eee746be\"},{\"type\":\"Edge\",\"source_node_id\":\"50110c47284f49d7ba6ff64f48a45a2b\",\"target_node_id\":\"3603496ffa64496c824eb53c445d16c7\",\"id\":\"44fdff63b1114e3d97f2703bf85d73ae\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"geniusResults\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"3ef8f6b94c954b4dbdacee7679488d53\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"searchResults\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"dd61e2628fdf4537bdf80433b0bfef33\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"shouldAskInfoHelpful\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return false;\\n})()\\n\"},\"list\":false,\"id\":\"61bb15ce9c404704a7d9b1c7efc7119a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"searchMetadata\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"2d34b3d9ee8541769cbe63615b73ba04\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"catalogId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"0a6190d6b5ae43cda309e63d6abd840d\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"reqItemId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"4a0e5ea3868d4a4f8e5bc61ce78d1f01\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"startTime\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"9c520c4e27c64e5581b26e4796b524dc\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"catalogRenderType\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"d58d38bf38df47c8becf225cde3f05ff\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"catalogRecordId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"54c90c455c074a6c826cb22f74cd683e\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"catalogRecordTable\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"1f489b95e50a4c88aae14a94eec91aec\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"auto_select\":false,\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"search_term\",\"list\":false,\"id\":\"ec4fbd7603204a83a2b664be6ac641c4\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"Reference\",\"table\":\"sys_search_context_config\",\"auto_select\":false,\"id\":\"79c4509501b24ba8b0242741deba8800\",\"name\":\"search_application_configuration\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"e728aa82e4374dd1b131e5718f5a1992\",\"name\":\"ask_genius_helpful\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"auto_select\":false,\"table\":\"\"},{\"type\":\"True/False\",\"id\":\"d0cefa797f544b94bc662bc078028754\",\"name\":\"ask_another_search\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"record_id\",\"list\":false,\"id\":\"07ad9582bde7415f8ec79155bd6870ed\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"record_table\",\"list\":false,\"id\":\"bdc360493a3745ed86cb13dc4d5b0e38\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"variables\",\"list\":false,\"id\":\"fee8096e6419421ebecca7d2048f97e4\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"new_search_term\",\"list\":false,\"id\":\"19b4885bd86345abae37f28678a72080\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"65311cc1f9bf461e98adc7d146842f0c\",\"name\":\"display_options\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"auto_select\":false,\"table\":\"\"},{\"type\":\"Choice\",\"choices\":[],\"id\":\"ca4759ec446d42b68bb8a54d597424b0\",\"name\":\"ask_links_helpful\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"auto_select\":false,\"table\":\"\"},{\"type\":\"Choice\",\"choices\":[],\"id\":\"6cd4dbcfa11c440d8b7693ddc24facb2\",\"name\":\"ask_custom_links_helpful\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"auto_select\":false,\"table\":\"\"},{\"type\":\"String\",\"name\":\"record_id1\",\"list\":false,\"id\":\"477b05c27bd6497fa5b376fca7dada1a\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"record_table1\",\"list\":false,\"id\":\"c89765e5e7264cda9ad7c717ffc6eeac\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"message\",\"list\":false,\"id\":\"5a79d6a838414b3e95f3678d9ab79747\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"status\",\"list\":false,\"id\":\"b5b4f76d6de04da19313d6c451e4f368\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"search_result\",\"list\":false,\"id\":\"6e8d4a25a6b74763be6357f17f51ed39\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"action_status\",\"list\":false,\"id\":\"2473bf9d712240e9abe314285998a0e3\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"True/False\",\"id\":\"ea639d6dbe1f4f978b01e2300c16a4f2\",\"name\":\"don_t_treat_as_error\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"end_time\",\"list\":false,\"id\":\"9ec9e3bd1c674802942a8ad4d4e5e341\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"search_term\",\"label\":\"Search Term\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"ec4fbd7603204a83a2b664be6ac641c4\",\"type\":\"String\"},{\"name\":\"search_application_configuration\",\"label\":\"Search Application Configuration\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"Reference\",\"list\":false,\"items\":[],\"use_items\":false,\"table\":\"sys_search_context_config\",\"query\":\"\"},\"id\":\"79c4509501b24ba8b0242741deba8800\",\"type\":\"Reference\",\"hint\":\"(Optional) Use a custom Search Application Configuration\"},{\"name\":\"ask_another_search\",\"label\":\"Ask Another Search\",\"default-value\":\"false\",\"required\":false,\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"d0cefa797f544b94bc662bc078028754\",\"type\":\"True/False\"}],\"return-values-mapping\":[{\"name\":\"geniussearchresults\",\"label\":\"geniusSearchResults\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var geniusResultsJSON = JSON.parse(vaVars.geniusResults);\\n    return global.VAAISearchHelperUtah.resizeResultIfRequired(geniusResultsJSON, 'Search metadata', vaVars);\\n})()\\n\"}},{\"name\":\"searchresults\",\"label\":\"searchResults\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var searchResultsJSON = JSON.parse(vaVars.searchResults);\\n    return global.VAAISearchHelperUtah.resizeResultIfRequired(searchResultsJSON, 'Search result', vaVars);\\n})()\\n\"}},{\"name\":\"shouldaskinfohelpful\",\"label\":\"shouldAskInfoHelpful\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.shouldAskInfoHelpful}}\"}},{\"name\":\"newsearchterm\",\"label\":\"newSearchTerm\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.new_search_term}}\"}},{\"name\":\"shouldrunfallbacktopic\",\"label\":\"shouldRunFallbackTopic\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.didFdihInvocationTimeOut || (vaInputs.display_options == 'no') ||\\n       (gs.nil(vaVars.geniusResults) && gs.nil(vaVars.searchResults));\\n})()\\n\"}},{\"name\":\"searchmetadata\",\"label\":\"searchMetadata\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var searchMetadataJSON = JSON.parse(vaVars.searchMetadata);\\n    return global.VAAISearchHelperUtah.resizeResultIfRequired(searchMetadataJSON, 'Search metadata', vaVars);\\n})()\\n\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"ebef2f355b621010a76b04d13d81c7c0\",\"name\":\"AI Search\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"description\":\"Perform asynchronous AI Search\",\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"title\":\"AI Search\",\"library\":true,\"csTopicId\":\"b19775fa536310103296ddeeff7b12ff\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"AI Search","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"ebef2f355b621010a76b04d13d81c7c0","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/b19775fa536310103296ddeeff7b12ff","value":"b19775fa536310103296ddeeff7b12ff"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"64","sys_updated_on":"2024-10-02 22:16:04","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.68\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"926adfbd91864df9af54cbc168535661\": {\n          \"id\": \"926adfbd91864df9af54cbc168535661\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"ad2d60ef928c490d9fa097a67e72c28b\": {\n          \"id\": \"ad2d60ef928c490d9fa097a67e72c28b\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"30be97d6007840e09f52947ddf93be06\": {\n          \"id\": \"30be97d6007840e09f52947ddf93be06\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"acc71bac748d4ae4aa33b2291d7ba039\": {\n          \"id\": \"acc71bac748d4ae4aa33b2291d7ba039\",\n          \"name\": \"Prepare Topic For Switching\",\n          \"script\": \"(function execute() {\\n    var topics = JSON.parse(vaVars._topic_results);\\n    vaVars._topic_new = JSON.stringify(topics[0]);\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"1e7f815f20614462a9f74181d7533fde\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"show options\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       var result;\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang('hi there {0}', vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang('how are you {0}', vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    return gs.getMessageLang(vaVars._topic_choice_list_msg, vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"7906ed5fda874734bc27b71dd118b7e3\",\n          \"id\": \"1e7f815f20614462a9f74181d7533fde\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var currentTopicName;\\n    if (!gs.nil(vaVars._topic_current)) {\\n        currentTopicName = JSON.parse(vaVars._topic_current).name;\\n    }\\n\\n    var topics = JSON.parse(vaVars._topic_results);\\n        var options = [];\\n        if (!gs.nil(currentTopicName)) {\\n            options.push({ 'value': \\\"-2\\\", 'label': gs.getMessageLang(vaVars._topic_resume_current_option, vaContext.getRequesterLang()) });\\n        }\\n        for (i = 0; i < topics.length; i++) { \\n           if (!gs.nil(currentTopicName) && topics[i]['name'] == currentTopicName) continue;\\n           options.push({ 'value': topics[i]['name'], 'label': topics[i]['title'] });\\n        }\\n        options.push({ 'value': \\\"-1\\\", 'label': gs.getMessageLang(vaVars._topic_sth_else_option, vaContext.getRequesterLang()) });\\n        return options;\\n})()\\n\",\n          \"noRecordsResponseMsg\": {\n            \"mode\": \"simple\",\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"No Records Found\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ]\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var currentTopicName;\\n    if (!gs.nil(vaVars._topic_current)) {\\n        currentTopicName = JSON.parse(vaVars._topic_current).name;\\n    }\\n\\n    var topics = JSON.parse(vaVars._topic_results);\\n        var options = [];\\n        if (!gs.nil(currentTopicName)) {\\n            options.push({ 'value': \\\"-2\\\", 'label': gs.getMessageLang(vaVars._topic_resume_current_option, vaContext.getRequesterLang()) });\\n        }\\n        for (i = 0; i < topics.length; i++) { \\n           if (!gs.nil(currentTopicName) && topics[i]['name'] == currentTopicName) continue;\\n           options.push({ 'value': topics[i]['name'], 'label': topics[i]['title'] });\\n        }\\n        options.push({ 'value': \\\"-1\\\", 'label': gs.getMessageLang(vaVars._topic_sth_else_option, vaContext.getRequesterLang()) });\\n        return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"table\": \"incident\",\n          \"withNluUserInput\": true,\n          \"skipIfFulfilled\": false,\n          \"entity\": {\n            \"id\": \"\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"e55043c4a2114285a14798f711c4bd75\": {\n          \"id\": \"e55043c4a2114285a14798f711c4bd75\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"2b8a6bb814354664ab7c35e6f263a201\": {\n          \"id\": \"2b8a6bb814354664ab7c35e6f263a201\",\n          \"name\": \"Prepare Topic For Switching\",\n          \"script\": \"(function execute() {\\n    var selectedTopicName = vaInputs.show_options;\\n    var allTopics = JSON.parse(vaVars._topic_results);\\n    for (var i = 0; i < allTopics.length; i++) {\\n      if(allTopics[i][\\\"name\\\"] == selectedTopicName) {\\n          vaVars._topic_new = JSON.stringify(allTopics[i]);\\n          vaVars._topic_unsure_selected = true;\\n          return;\\n      }\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"ab4ca9e38bd1452482b3898a505ffe0c\": {\n          \"id\": \"ab4ca9e38bd1452482b3898a505ffe0c\",\n          \"name\": \"Fallback Topic\",\n          \"script\": \"(function execute() {\\n    vaSystem.switchTopic(vaVars._setup_fallback_topic);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if(gs.nil(vaVars._topic_current)) {\\n        return true;\\n    }\\n    var currentTopic = JSON.parse(vaVars._topic_current)[\\\"name\\\"];\\n    return currentTopic == vaVars._setup_explore_help_topic || currentTopic == vaVars._setup_welcome_topic;\\n})()\\n\"\n          }\n        },\n        \"c04f39b58e3e48c6a4dd6c535f6c3fb1\": {\n          \"id\": \"c04f39b58e3e48c6a4dd6c535f6c3fb1\",\n          \"name\": \"Switch Topic\",\n          \"script\": \"(function execute() {\\n    vaSystem.switchTopic(vaVars._topic_switcher_topic);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"e2366c6d24a742059cbdfefaea075bfd\": {\n          \"id\": \"e2366c6d24a742059cbdfefaea075bfd\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"9ba5218ff118492b91a660cabd847791\": {\n          \"id\": \"9ba5218ff118492b91a660cabd847791\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"0d037f75ab274b938ed40bde1d2ff67b\": {\n          \"id\": \"0d037f75ab274b938ed40bde1d2ff67b\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"No Match Preview\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"text\": \"[preview only] Your topic conversation didnt show up as one of the predicted intents. Go back to the NLU Settings tab to make this phrase more specific to the intent.\"\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"5c43188b84e344fd9328a11fbb32e2f7\": {\n          \"id\": \"5c43188b84e344fd9328a11fbb32e2f7\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"d0e19dc91a56462da2d1700b0743637a\": {\n          \"id\": \"d0e19dc91a56462da2d1700b0743637a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"7bc0c612bfbd4508a214d295c54b79e6\": {\n          \"id\": \"7bc0c612bfbd4508a214d295c54b79e6\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Preview Topic Not Selected\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"text\": \"[preview only] You selected a different topic than the one you are editing. Go back to the NLU Settings tab to make this phrase more specific to the intent.\"\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"e39adb4a47d74232b90584ce4b17f0f5\": {\n          \"id\": \"e39adb4a47d74232b90584ce4b17f0f5\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Preview Ended\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"text\": \"[preview only] This conversation will end here.\"\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"5d27b6523eec40e7b17feeebf8196a95\": {\n          \"id\": \"5d27b6523eec40e7b17feeebf8196a95\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Bad Match\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"text\": \"[preview only] Your test phrase triggered a different topic. Go back to the NLU Settings tab and make sure this phrase is tied to the correct intent.\"\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"e4522542bc67441caf359817facb1e0b\": {\n          \"id\": \"e4522542bc67441caf359817facb1e0b\",\n          \"name\": \"End conversation\",\n          \"script\": \"(function execute() {\\n    if (!gs.nil(vaVars._topic_current)) {\\n        vaSystem.cancelTask(JSON.parse(vaVars._topic_current)[\\\"task\\\"]);\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"aa9b0e7a1f9c46c3b5b61373d535bdf7\": {\n          \"id\": \"aa9b0e7a1f9c46c3b5b61373d535bdf7\",\n          \"name\": \"AI Search Fallback Topic\",\n          \"script\": \"(function execute() {\\n    vaSystem.switchTopic(vaVars._setup_search_fallback_topic);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7d01c2d6f7e646bcb752b885f23a93bf\": {\n          \"id\": \"7d01c2d6f7e646bcb752b885f23a93bf\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"9121d2c1abb146eb881c0d6ee9de16f4\": {\n          \"id\": \"9121d2c1abb146eb881c0d6ee9de16f4\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"c5ceb18ba4b2430c8b8a5f225b0b43a7\": {\n          \"id\": \"c5ceb18ba4b2430c8b8a5f225b0b43a7\",\n          \"stepType\": \"Decision\",\n          \"name\": \"If auto select confirmation enabled\"\n        },\n        \"3774fc966c4f49659cede8b615ecd959\": {\n          \"id\": \"3774fc966c4f49659cede8b615ecd959\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Proceed with auto selection\"\n        },\n        \"091c843e2a3141e7ae2b2d01959905f8\": {\n          \"id\": \"091c843e2a3141e7ae2b2d01959905f8\",\n          \"name\": \"confirm auto selected\",\n          \"script\": \"(function execute() {\\n    vaSystem.confirmAutoSelection(true, vaVars._topic_current != null);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8bde4ec59a504e22adaf925ffd5b96d0\": {\n          \"id\": \"8bde4ec59a504e22adaf925ffd5b96d0\",\n          \"name\": \"reject auto selected\",\n          \"script\": \"(function execute() {\\n    vaSystem.confirmAutoSelection(false, vaVars._topic_current != null);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"0fa999cee70847458a1aa18f6aa8be7b\": {\n          \"id\": \"0fa999cee70847458a1aa18f6aa8be7b\",\n          \"name\": \"set auto select prompt enabled\",\n          \"script\": \"(function execute() {\\n    var gr = new GlideRecord('sys_cs_general_settings');\\n    gr.addQuery('sys_domain','global');   \\n    gr.query();   \\n    if (gr.next()) { \\n         var initial = gr.getValue('auto_select_prompt_enabled_initial');\\n         var mid = gr.getValue('auto_select_prompt_enabled_mid');\\n         var prompt = gr.getValue('auto_select_prompt_message');\\n    }  \\n    vaVars.auto_select_prompt_enabled_initial = initial;\\n    vaVars.auto_select_prompt_enabled_mid = mid;\\n    vaVars.auto_select_prompt_message = prompt ? prompt : '';\\n    \\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a4c9f5f1d84e4560961d95f773c62260\": {\n          \"id\": \"a4c9f5f1d84e4560961d95f773c62260\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Auto selection condition\"\n        },\n        \"3a473a89ef6947269413e40f50eda6b0\": {\n          \"id\": \"3a473a89ef6947269413e40f50eda6b0\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"3c5b969de07d4b34b202b55255b8f216\": {\n          \"id\": \"3c5b969de07d4b34b202b55255b8f216\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Auto Select Proceed Option\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    var topics = JSON.parse(vaVars._topic_results);\\n    var topic = topics[0]; \\n    var message = vaVars.auto_select_prompt_message;\\n    const regexWithName = /{topic(\\\\s)\\\\1*name}/i;\\n    const regex = /{topic}/i;\\n    message = message.replace(regexWithName,'{0}').replace(regex,'{0}');\\n    return gs.getMessageLang(message, vaContext.getRequesterLang(), [topic.title]);\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"660cc5d151fb4e0c9ce83fd5fd1a7bb3\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"437986edd0c4426bb8f4c7341e7880de\": {\n          \"id\": \"437986edd0c4426bb8f4c7341e7880de\",\n          \"name\": \"Set Intent Classification As Incorrect\",\n          \"script\": \"(function execute() {\\n    vaSystem.setIntentClassificationToIncorrectAmongMultiple();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f37ff530fb5e4f02bbedf241f7965f60\": {\n          \"id\": \"f37ff530fb5e4f02bbedf241f7965f60\",\n          \"name\": \"Set Intent Classification As Incorrect\",\n          \"script\": \"(function execute() {\\n    vaSystem.setIntentClassificationToIncorrectAmongMultiple();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f703f9c7887744eb9a36f0d7879e511c\": {\n          \"id\": \"f703f9c7887744eb9a36f0d7879e511c\",\n          \"name\": \"Reject Mid-Topic Switch\",\n          \"script\": \"(function execute() {\\n    vaVars.global_midtopic_switch_rejected = true;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"aa7fcc66b2874d479dc6a3acfe7e092d\": {\n          \"id\": \"aa7fcc66b2874d479dc6a3acfe7e092d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"047504f82995490386f990995c1638fd\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e55043c4a2114285a14798f711c4bd75\",\n          \"target\": \"437986edd0c4426bb8f4c7341e7880de\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return vaInputs.show_options.getValue() == -1;\\n})()\\n\"\n          },\n          \"label\": \"i want something else\"\n        },\n        {\n          \"id\": \"15909c08e4db44568bd3438f7a8b1740\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c5ceb18ba4b2430c8b8a5f225b0b43a7\",\n          \"target\": \"3c5b969de07d4b34b202b55255b8f216\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars._topic_current === null) {\\n        return vaVars.auto_select_prompt_enabled_initial === '1';\\n    } else {\\n        return vaVars.auto_select_prompt_enabled_mid === '1';\\n    }  \\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"bcfd5d7cedf441d5ad41ee65bbd8fda3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0fa999cee70847458a1aa18f6aa8be7b\",\n          \"target\": \"c5ceb18ba4b2430c8b8a5f225b0b43a7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"91c41636db6c4a61bd08d101b2332fcd\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a4c9f5f1d84e4560961d95f773c62260\",\n          \"target\": \"9121d2c1abb146eb881c0d6ee9de16f4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars._topic_current == null;\\n})()\\n\"\n          },\n          \"label\": \"Initial Selection\"\n        },\n        {\n          \"id\": \"722cf257b84e4df4a903ea0af7ca0352\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8bde4ec59a504e22adaf925ffd5b96d0\",\n          \"target\": \"a4c9f5f1d84e4560961d95f773c62260\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"16d8bb1e653c4166b97e9e5866b1dd34\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"30be97d6007840e09f52947ddf93be06\",\n          \"target\": \"3a473a89ef6947269413e40f50eda6b0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._topic_strategy == \\\"sure\\\";\\n})()\\n\"\n          },\n          \"label\": \"sure\"\n        },\n        {\n          \"id\": \"9db7dc00bbed4048bc4af528c0d0b27b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e2366c6d24a742059cbdfefaea075bfd\",\n          \"target\": \"9ba5218ff118492b91a660cabd847791\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_client_mode == \\\"DISCOVERABLE_PREVIEW\\\";\\n})()\\n\"\n          },\n          \"label\": \"Preview Mode\"\n        },\n        {\n          \"id\": \"4a383622efa64c94a0918bb1d595eb0e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9ba5218ff118492b91a660cabd847791\",\n          \"target\": \"0d037f75ab274b938ed40bde1d2ff67b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars._topic_strategy == \\\"unknown\\\") {\\n        return true;\\n    }\\n    if (vaVars._topic_strategy == \\\"sure\\\") {\\n        return false;\\n    }\\n    var topics = JSON.parse(vaVars._topic_results);\\n    var index;\\n    for (index = 0; index < topics.length; index++) {\\n        if (topics[index].sys_id == vaVars._topic_preview_topic) {\\n            return false;\\n        }\\n    }\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"not a match\"\n        },\n        {\n          \"id\": \"70b756286cac47569c79238d668ff0cf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9ba5218ff118492b91a660cabd847791\",\n          \"target\": \"1e7f815f20614462a9f74181d7533fde\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars._topic_strategy == \\\"sure\\\") {\\n        return false\\n    }\\n    if (vaVars._topic_strategy == \\\"unknown\\\") {\\n        return false;\\n    }\\n    var topics = JSON.parse(vaVars._topic_results);\\n    var index;\\n    for (index = 0; index < topics.length; index++) {\\n        if (topics[index].sys_id == vaVars._topic_preview_topic) {\\n            return true;\\n        }\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"unsure\"\n        },\n        {\n          \"id\": \"c14a6fd1c37d41b18e2cbfcc784795b2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2b8a6bb814354664ab7c35e6f263a201\",\n          \"target\": \"c04f39b58e3e48c6a4dd6c535f6c3fb1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"feaaf1548de64f47a5fb7992f7a3c6de\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e55043c4a2114285a14798f711c4bd75\",\n          \"target\": \"2b8a6bb814354664ab7c35e6f263a201\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   return vaInputs.show_options.getValue() != -1 && vaInputs.show_options.getValue() != -2;\\n})()\\n\"\n          },\n          \"label\": \"select topic\"\n        },\n        {\n          \"id\": \"7a63fdf65eb241de96eee7cb84f1a0aa\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"acc71bac748d4ae4aa33b2291d7ba039\",\n          \"target\": \"c04f39b58e3e48c6a4dd6c535f6c3fb1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"37fb08159325497ba8d8894f843df892\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"30be97d6007840e09f52947ddf93be06\",\n          \"target\": \"1e7f815f20614462a9f74181d7533fde\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._topic_strategy == \\\"unsure\\\";\\n})()\\n\"\n          },\n          \"label\": \"unsure\"\n        },\n        {\n          \"id\": \"387618475aff4ad29af63d390733dfed\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ab4ca9e38bd1452482b3898a505ffe0c\",\n          \"target\": \"ad2d60ef928c490d9fa097a67e72c28b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"24c499418aaa444c8a8343909e6b1c8b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c04f39b58e3e48c6a4dd6c535f6c3fb1\",\n          \"target\": \"ad2d60ef928c490d9fa097a67e72c28b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4b95d1f34acd49f9a4572891b256c663\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"926adfbd91864df9af54cbc168535661\",\n          \"target\": \"e2366c6d24a742059cbdfefaea075bfd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bd79c6d1169a49a09f36694023d6e1b4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e2366c6d24a742059cbdfefaea075bfd\",\n          \"target\": \"30be97d6007840e09f52947ddf93be06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_client_mode != \\\"DISCOVERABLE_PREVIEW\\\";\\n})()\\n\"\n          },\n          \"label\": \"Not Preview\"\n        },\n        {\n          \"id\": \"f698f4a13fc9455a9513d5ece1d8ff43\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1e7f815f20614462a9f74181d7533fde\",\n          \"target\": \"5c43188b84e344fd9328a11fbb32e2f7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a0552a664c634dff853b9c28743e510d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"5c43188b84e344fd9328a11fbb32e2f7\",\n          \"target\": \"e55043c4a2114285a14798f711c4bd75\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_client_mode != \\\"DISCOVERABLE_PREVIEW\\\";\\n})()\\n\"\n          },\n          \"label\": \"Not Preview\"\n        },\n        {\n          \"id\": \"8ad89fb18d9c4b69ad51f2e24665280d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"5c43188b84e344fd9328a11fbb32e2f7\",\n          \"target\": \"d0e19dc91a56462da2d1700b0743637a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_client_mode == \\\"DISCOVERABLE_PREVIEW\\\";\\n})()\\n\"\n          },\n          \"label\": \"Preview\"\n        },\n        {\n          \"id\": \"74d671dfe4e24997874a4d740aae9857\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d0e19dc91a56462da2d1700b0743637a\",\n          \"target\": \"2b8a6bb814354664ab7c35e6f263a201\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaInputs.show_options.getValue() == -1) return false;\\n    var selectedTopicName = vaInputs.show_options;\\n    var allTopics = JSON.parse(vaVars._topic_results);\\n    for (var i = 0; i < allTopics.length; i++) {\\n      if(allTopics[i][\\\"name\\\"] == selectedTopicName && allTopics[i].sys_id == vaVars._topic_preview_topic) {\\n          return true;\\n      }\\n    }\\n    return false;\\n})()\"\n          },\n          \"label\": \"preview topic selected\"\n        },\n        {\n          \"id\": \"1ef061c34e914323987b449e75f2fc42\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d0e19dc91a56462da2d1700b0743637a\",\n          \"target\": \"7bc0c612bfbd4508a214d295c54b79e6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaInputs.show_options.getValue() == -1) return true;\\n    var selectedTopicName = vaInputs.show_options;\\n    var allTopics = JSON.parse(vaVars._topic_results);\\n    for (var i = 0; i < allTopics.length; i++) {\\n      if(allTopics[i][\\\"name\\\"] == selectedTopicName && allTopics[i].sys_id == vaVars._topic_preview_topic) {\\n          return false;\\n      }\\n    }\\n    return true;\\n})()\"\n          },\n          \"label\": \"not preview selected\"\n        },\n        {\n          \"id\": \"75a507543e6c4088b51bac3c906eb84e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0d037f75ab274b938ed40bde1d2ff67b\",\n          \"target\": \"e39adb4a47d74232b90584ce4b17f0f5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"99ff3ab215dd47e2b20ed907e676a497\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9ba5218ff118492b91a660cabd847791\",\n          \"target\": \"5d27b6523eec40e7b17feeebf8196a95\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars._topic_strategy == \\\"sure\\\") {\\n        var topics = JSON.parse(vaVars._topic_results);\\n        var topic = topics[0];\\n        var topicId = topic.sys_id;\\n        return topicId != vaVars._topic_preview_topic;\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"bad match\"\n        },\n        {\n          \"id\": \"85f4f90c39b24cc1a787b45e878ad7e2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5d27b6523eec40e7b17feeebf8196a95\",\n          \"target\": \"e39adb4a47d74232b90584ce4b17f0f5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"851bcddee11d4e948d4756739c3394d6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e39adb4a47d74232b90584ce4b17f0f5\",\n          \"target\": \"e4522542bc67441caf359817facb1e0b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f034e5598557428889cf6b691abcceb2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e4522542bc67441caf359817facb1e0b\",\n          \"target\": \"ad2d60ef928c490d9fa097a67e72c28b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"407c09a33a694564b0a41683bff7f335\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"aa9b0e7a1f9c46c3b5b61373d535bdf7\",\n          \"target\": \"ad2d60ef928c490d9fa097a67e72c28b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2119a3fab27942f093d9a34e97e04f9f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"7d01c2d6f7e646bcb752b885f23a93bf\",\n          \"target\": \"aa9b0e7a1f9c46c3b5b61373d535bdf7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !gs.nil(vaVars._setup_search_fallback_topic);\\n})()\\n\"\n          },\n          \"label\": \"Search Fallback Set\"\n        },\n        {\n          \"id\": \"1ec1c6169eca46a8a87049b5e4a9982c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"7d01c2d6f7e646bcb752b885f23a93bf\",\n          \"target\": \"ab4ca9e38bd1452482b3898a505ffe0c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars._setup_search_fallback_topic);\\n})()\\n\"\n          },\n          \"label\": \"Search Fallback Not Set\"\n        },\n        {\n          \"id\": \"dce735ec9d9e47dc9597904402c61110\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9121d2c1abb146eb881c0d6ee9de16f4\",\n          \"target\": \"aa9b0e7a1f9c46c3b5b61373d535bdf7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !gs.nil(vaVars._setup_search_fallback_topic);\\n})()\"\n          },\n          \"label\": \"Search Fallback Set\"\n        },\n        {\n          \"id\": \"c954951675564d199e05e1198ee1a8c9\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9121d2c1abb146eb881c0d6ee9de16f4\",\n          \"target\": \"ab4ca9e38bd1452482b3898a505ffe0c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars._setup_search_fallback_topic);\\n})()\\n\"\n          },\n          \"label\": \"Search Fallback Not Set\"\n        },\n        {\n          \"id\": \"2a16d2cde5d64f8aacd545ffc2eabaa0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c5ceb18ba4b2430c8b8a5f225b0b43a7\",\n          \"target\": \"acc71bac748d4ae4aa33b2291d7ba039\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars._topic_current === null) {\\n        return vaVars.auto_select_prompt_enabled_initial === '0';\\n    } else {\\n        return vaVars.auto_select_prompt_enabled_mid === '0';\\n    }  \\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"a24f9841b36f4cfc981a7bfb6d6f838d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3774fc966c4f49659cede8b615ecd959\",\n          \"target\": \"091c843e2a3141e7ae2b2d01959905f8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.auto_select_proceed_option=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"f690b2d0db5b426e9552246c436102bf\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"091c843e2a3141e7ae2b2d01959905f8\",\n          \"target\": \"acc71bac748d4ae4aa33b2291d7ba039\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"429ca402f5944fad9f16637e41c42540\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3774fc966c4f49659cede8b615ecd959\",\n          \"target\": \"8bde4ec59a504e22adaf925ffd5b96d0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.auto_select_proceed_option=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"050543275f9e46ed809f3bd3783d3846\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a4c9f5f1d84e4560961d95f773c62260\",\n          \"target\": \"ad2d60ef928c490d9fa097a67e72c28b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars._topic_current != null;\\n})()\\n\"\n          },\n          \"label\": \"Mid Topic Selection\"\n        },\n        {\n          \"id\": \"a9e3439838de495a859e1b0fb2b06a24\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9ba5218ff118492b91a660cabd847791\",\n          \"target\": \"3a473a89ef6947269413e40f50eda6b0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars._topic_strategy == \\\"sure\\\") {\\n        var topics = JSON.parse(vaVars._topic_results);\\n        var topic = topics[0];\\n        var topicId = topic.sys_id\\n        return topicId == vaVars._topic_preview_topic;\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"sure\"\n        },\n        {\n          \"id\": \"ab9d4084b2bb409f893ba0b71daaec2d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3a473a89ef6947269413e40f50eda6b0\",\n          \"target\": \"0fa999cee70847458a1aa18f6aa8be7b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var topics = JSON.parse(vaVars._topic_results);\\n    var topic = topics[0];\\n    return topic.utterance ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"if typed\"\n        },\n        {\n          \"id\": \"44c4ffb63891423a944f3d23343cd66f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3a473a89ef6947269413e40f50eda6b0\",\n          \"target\": \"acc71bac748d4ae4aa33b2291d7ba039\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var topics = JSON.parse(vaVars._topic_results);\\n    var topic = topics[0];\\n    return topic.utterance ? false : true;\\n})()\\n\"\n          },\n          \"label\": \"From show everything\"\n        },\n        {\n          \"id\": \"ea6b87a5cd3d4b82af8fdefcaef7455e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3c5b969de07d4b34b202b55255b8f216\",\n          \"target\": \"3774fc966c4f49659cede8b615ecd959\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cc6402476fa1405498bf818dcb8cbfa4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"437986edd0c4426bb8f4c7341e7880de\",\n          \"target\": \"9121d2c1abb146eb881c0d6ee9de16f4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b154c70160fc45f7b63a8c78c0258943\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7bc0c612bfbd4508a214d295c54b79e6\",\n          \"target\": \"f37ff530fb5e4f02bbedf241f7965f60\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"94c35dbf26914e3e9ddf188f3da12731\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f37ff530fb5e4f02bbedf241f7965f60\",\n          \"target\": \"e39adb4a47d74232b90584ce4b17f0f5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dcdc37ec3b6b444db0cac31d971d796d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e55043c4a2114285a14798f711c4bd75\",\n          \"target\": \"f703f9c7887744eb9a36f0d7879e511c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.show_options.getValue() == -2 && vaVars._topic_current != null;\\n})()\\n\"\n          },\n          \"label\": \"resume current topic\"\n        },\n        {\n          \"id\": \"2530423da0b34cf8af442da72591b872\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f703f9c7887744eb9a36f0d7879e511c\",\n          \"target\": \"ad2d60ef928c490d9fa097a67e72c28b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b8f95d0138ca45e48bb6be4f7406ef50\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"30be97d6007840e09f52947ddf93be06\",\n          \"target\": \"aa7fcc66b2874d479dc6a3acfe7e092d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._topic_strategy == \\\"unknown\\\";\\n})()\\n\"\n          },\n          \"label\": \"unknown\"\n        },\n        {\n          \"id\": \"a926177ff4914b098a90ad1a390244bf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"aa7fcc66b2874d479dc6a3acfe7e092d\",\n          \"target\": \"7d01c2d6f7e646bcb752b885f23a93bf\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars._topic_current);\\n})()\\n\"\n          },\n          \"label\": \"initial topic discovery\"\n        },\n        {\n          \"id\": \"1edf1df26b7b437f9d11c984f1535743\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"aa7fcc66b2874d479dc6a3acfe7e092d\",\n          \"target\": \"1e7f815f20614462a9f74181d7533fde\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !gs.nil(vaVars._topic_current);\\n})()\\n\"\n          },\n          \"label\": \"mid topic discovery\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"7906ed5fda874734bc27b71dd118b7e3\": {\n      \"id\": \"7906ed5fda874734bc27b71dd118b7e3\",\n      \"name\": \"show_options\",\n      \"label\": \"Show Options\",\n      \"varType\": \"reference\",\n      \"table\": \"incident\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"1e7f815f20614462a9f74181d7533fde\",\n      \"isHidden\": false\n    },\n    \"4331c57f3a1c4bf384c7b9be2603941a\": {\n      \"id\": \"4331c57f3a1c4bf384c7b9be2603941a\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       var result;\\n       if (vaInputs.first_name == 'Bill') {\\n           result = 'hi there ' + vaInputs._first_name;\\n       } else {\\n           result = 'how are you ' + vaInputs.last_name + '?';\\n       }\\n       return result;\\n    */\\n    return 'sample';\\n})()\\n\"\n      },\n      \"name\": \"_topic_results\",\n      \"label\": \"_topic_results\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"309d4c0f009b4c68a7d7da6528958bfd\": {\n      \"id\": \"309d4c0f009b4c68a7d7da6528958bfd\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_confirmation_msg\",\n      \"label\": \"_topic_confirmation_msg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c859922c8a3441ea923fc18349d7bc38\": {\n      \"id\": \"c859922c8a3441ea923fc18349d7bc38\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_wrong_msg\",\n      \"label\": \"_topic_wrong_msg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"836190f599444cefb468fbf7b869587f\": {\n      \"id\": \"836190f599444cefb468fbf7b869587f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_not_found_msg\",\n      \"label\": \"_topic_not_found_msg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b91e21ff2129431db853b21a50339048\": {\n      \"id\": \"b91e21ff2129431db853b21a50339048\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_choice_list_msg\",\n      \"label\": \"_topic_choice_list_msg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4e27fee55a6b4d0080a4acb507fdba66\": {\n      \"id\": \"4e27fee55a6b4d0080a4acb507fdba66\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_display_count\",\n      \"label\": \"_topic_display_count\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fe92fe2435744de9964ee973aabe3716\": {\n      \"id\": \"fe92fe2435744de9964ee973aabe3716\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_sorry_msg\",\n      \"label\": \"_topic_sorry_msg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"42475c0899614b1ebba957e5dd0b0395\": {\n      \"id\": \"42475c0899614b1ebba957e5dd0b0395\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_setup_fallback_topic\",\n      \"label\": \"_setup_fallback_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3fc4b4c8df1642e4a0b3b3c99ee53deb\": {\n      \"id\": \"3fc4b4c8df1642e4a0b3b3c99ee53deb\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_new\",\n      \"label\": \"_topic_new\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"82fedf43e0a34de1812fca8d1184ad4e\": {\n      \"id\": \"82fedf43e0a34de1812fca8d1184ad4e\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_switcher_topic\",\n      \"label\": \"_topic_switcher_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a877e4925af9417cb31feb75f49635e7\": {\n      \"id\": \"a877e4925af9417cb31feb75f49635e7\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_current\",\n      \"label\": \"_topic_current\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"cfde8d86a0274541a7962fc210f54c44\": {\n      \"id\": \"cfde8d86a0274541a7962fc210f54c44\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"sameTopic\",\n      \"label\": \"sameTopic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"5aef4039d87949d5880ab5a0209b771f\": {\n      \"id\": \"5aef4039d87949d5880ab5a0209b771f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_sth_else_option\",\n      \"label\": \"_topic_sth_else_option\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4e54c0e4bb7c4ed4b9db25b754754f2d\": {\n      \"id\": \"4e54c0e4bb7c4ed4b9db25b754754f2d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_setup_search_fallback_topic\",\n      \"label\": \"_setup_search_fallback_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"0862608748d843eaaba63d42f92b063a\": {\n      \"id\": \"0862608748d843eaaba63d42f92b063a\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '0';\\n})()\\n\"\n      },\n      \"name\": \"auto_select_prompt_enabled_initial\",\n      \"label\": \"auto_select_prompt_enabled_initial\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9af587f50e024ab08a53f53fa99de292\": {\n      \"id\": \"9af587f50e024ab08a53f53fa99de292\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return '0';\\n})()\\n\"\n      },\n      \"name\": \"auto_select_prompt_enabled_mid\",\n      \"label\": \"auto_select_prompt_enabled_mid\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d9da0ac30f3b4c09a88110a3acdcf8e8\": {\n      \"id\": \"d9da0ac30f3b4c09a88110a3acdcf8e8\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"auto_select_prompt_message\",\n      \"label\": \"auto_select_prompt_message\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"660cc5d151fb4e0c9ce83fd5fd1a7bb3\": {\n      \"id\": \"660cc5d151fb4e0c9ce83fd5fd1a7bb3\",\n      \"name\": \"auto_select_proceed_option\",\n      \"label\": \"Auto Select Proceed Option\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"3c5b969de07d4b34b202b55255b8f216\",\n      \"isHidden\": false\n    },\n    \"bba7667a378142fca7d22b446bcc3c8f\": {\n      \"id\": \"bba7667a378142fca7d22b446bcc3c8f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_resume_current_option\",\n      \"label\": \"_topic_resume_current_option\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"3426743553a7101055eeddeeff7b1212","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_3426743553a7101055eeddeeff7b1212","sys_updated_by":"admin","sys_created_on":"2020-09-29 21:15:16","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"739c56b7533249cdba1c9467021aa93e\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"739c56b7533249cdba1c9467021aa93e\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"739c56b7533249cdba1c9467021aa93e\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"926adfbd91864df9af54cbc168535661\",\"name\":\"Start\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"ad2d60ef928c490d9fa097a67e72c28b\",\"name\":\"End\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"sure\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._topic_strategy == \\\"sure\\\";\\n})()\\n\"},\"id\":\"ea307cc6354943e3baa8d1a5aeabc1b7\",\"name\":\"sure\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"unsure\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._topic_strategy == \\\"unsure\\\";\\n})()\\n\"},\"id\":\"4750259dea554a29a021613f9d9cb82a\",\"name\":\"unsure\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"unknown\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._topic_strategy == \\\"unknown\\\";\\n})()\\n\"},\"id\":\"0247301c36414cfc9aaaf9dcc7b2ffdd\",\"name\":\"unknown\",\"expert_mode\":false}],\"id\":\"30be97d6007840e09f52947ddf93be06\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var topics = JSON.parse(vaVars._topic_results);\\n    vaVars._topic_new = JSON.stringify(topics[0]);\\n})()\",\"id\":\"acc71bac748d4ae4aa33b2291d7ba039\",\"name\":\"Prepare Topic For Switching\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"1e7f815f20614462a9f74181d7533fde\",\"name\":\"show options\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"7906ed5fda874734bc27b71dd118b7e3\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       var result;\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang('hi there {0}', vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang('how are you {0}', vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    return gs.getMessageLang(vaVars._topic_choice_list_msg, vaContext.getRequesterLang());\\n})()\\n\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":true,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var currentTopicName;\\n    if (!gs.nil(vaVars._topic_current)) {\\n        currentTopicName = JSON.parse(vaVars._topic_current).name;\\n    }\\n\\n    var topics = JSON.parse(vaVars._topic_results);\\n        var options = [];\\n        if (!gs.nil(currentTopicName)) {\\n            options.push({ 'value': \\\"-2\\\", 'label': gs.getMessageLang(vaVars._topic_resume_current_option, vaContext.getRequesterLang()) });\\n        }\\n        for (i = 0; i < topics.length; i++) { \\n           if (!gs.nil(currentTopicName) && topics[i]['name'] == currentTopicName) continue;\\n           options.push({ 'value': topics[i]['name'], 'label': topics[i]['title'] });\\n        }\\n        options.push({ 'value': \\\"-1\\\", 'label': gs.getMessageLang(vaVars._topic_sth_else_option, vaContext.getRequesterLang()) });\\n        return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No Records Found\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var currentTopicName;\\n    if (!gs.nil(vaVars._topic_current)) {\\n        currentTopicName = JSON.parse(vaVars._topic_current).name;\\n    }\\n\\n    var topics = JSON.parse(vaVars._topic_results);\\n        var options = [];\\n        if (!gs.nil(currentTopicName)) {\\n            options.push({ 'value': \\\"-2\\\", 'label': gs.getMessageLang(vaVars._topic_resume_current_option, vaContext.getRequesterLang()) });\\n        }\\n        for (i = 0; i < topics.length; i++) { \\n           if (!gs.nil(currentTopicName) && topics[i]['name'] == currentTopicName) continue;\\n           options.push({ 'value': topics[i]['name'], 'label': topics[i]['title'] });\\n        }\\n        options.push({ 'value': \\\"-1\\\", 'label': gs.getMessageLang(vaVars._topic_sth_else_option, vaContext.getRequesterLang()) });\\n        return options;\\n})()\\n\"},\"description\":\"\",\"table\":\"incident\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"i want something else\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return vaInputs.show_options.getValue() == -1;\\n})()\\n\"},\"id\":\"18106f7e10c048278dfd6e3b7d7769a0\",\"name\":\"i want something else\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"select topic\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return vaInputs.show_options.getValue() != -1 && vaInputs.show_options.getValue() != -2;\\n})()\\n\"},\"id\":\"7bbcbe51885a4e30ab337ccd16ae4b8a\",\"name\":\"select topic\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"resume current topic\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.show_options.getValue() == -2 && vaVars._topic_current != null;\\n})()\\n\"},\"id\":\"33360d9536484014ad1b486c9e3671e6\",\"name\":\"resume current topic\",\"expert_mode\":false}],\"id\":\"e55043c4a2114285a14798f711c4bd75\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var selectedTopicName = vaInputs.show_options;\\n    var allTopics = JSON.parse(vaVars._topic_results);\\n    for (var i = 0; i < allTopics.length; i++) {\\n      if(allTopics[i][\\\"name\\\"] == selectedTopicName) {\\n          vaVars._topic_new = JSON.stringify(allTopics[i]);\\n          vaVars._topic_unsure_selected = true;\\n          return;\\n      }\\n    }\\n})()\\n\",\"id\":\"2b8a6bb814354664ab7c35e6f263a201\",\"name\":\"Prepare Topic For Switching\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.switchTopic(vaVars._setup_fallback_topic);\\n})()\\n\",\"id\":\"ab4ca9e38bd1452482b3898a505ffe0c\",\"name\":\"Fallback Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if(gs.nil(vaVars._topic_current)) {\\n        return true;\\n    }\\n    var currentTopic = JSON.parse(vaVars._topic_current)[\\\"name\\\"];\\n    return currentTopic == vaVars._setup_explore_help_topic || currentTopic == vaVars._setup_welcome_topic;\\n})()\\n\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.switchTopic(vaVars._topic_switcher_topic);\\n})()\\n\",\"id\":\"c04f39b58e3e48c6a4dd6c535f6c3fb1\",\"name\":\"Switch Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Preview Mode\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_client_mode == \\\"DISCOVERABLE_PREVIEW\\\";\\n})()\\n\"},\"id\":\"1cee168caa6340a68d3a91452ceee3c6\",\"name\":\"Preview Mode\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Not Preview\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_client_mode != \\\"DISCOVERABLE_PREVIEW\\\";\\n})()\\n\"},\"id\":\"5a8b953ed61a420fad7d805b2b2ca89c\",\"name\":\"Not Preview\",\"expert_mode\":false}],\"id\":\"e2366c6d24a742059cbdfefaea075bfd\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"not a match\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars._topic_strategy == \\\"unknown\\\") {\\n        return true;\\n    }\\n    if (vaVars._topic_strategy == \\\"sure\\\") {\\n        return false;\\n    }\\n    var topics = JSON.parse(vaVars._topic_results);\\n    var index;\\n    for (index = 0; index < topics.length; index++) {\\n        if (topics[index].sys_id == vaVars._topic_preview_topic) {\\n            return false;\\n        }\\n    }\\n    return true;\\n})()\\n\"},\"id\":\"8ad7950401be490482588e4158bc33fd\",\"name\":\"not a match\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"unsure\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars._topic_strategy == \\\"sure\\\") {\\n        return false\\n    }\\n    if (vaVars._topic_strategy == \\\"unknown\\\") {\\n        return false;\\n    }\\n    var topics = JSON.parse(vaVars._topic_results);\\n    var index;\\n    for (index = 0; index < topics.length; index++) {\\n        if (topics[index].sys_id == vaVars._topic_preview_topic) {\\n            return true;\\n        }\\n    }\\n    return false;\\n})()\\n\"},\"id\":\"e6c58c3b934640bdb2abe2e62b9a9c37\",\"name\":\"unsure\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"bad match\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars._topic_strategy == \\\"sure\\\") {\\n        var topics = JSON.parse(vaVars._topic_results);\\n        var topic = topics[0];\\n        var topicId = topic.sys_id;\\n        return topicId != vaVars._topic_preview_topic;\\n    }\\n    return false;\\n})()\\n\"},\"id\":\"2fa9fb69dfcb45b2bd44e8f4d9390465\",\"name\":\"bad match\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"sure\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars._topic_strategy == \\\"sure\\\") {\\n        var topics = JSON.parse(vaVars._topic_results);\\n        var topic = topics[0];\\n        var topicId = topic.sys_id\\n        return topicId == vaVars._topic_preview_topic;\\n    }\\n    return false;\\n})()\\n\"},\"id\":\"fa08c7671cc44fba86ff7ff50037baf0\",\"name\":\"sure\",\"expert_mode\":false}],\"id\":\"9ba5218ff118492b91a660cabd847791\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"[preview only] Your topic conversation didnt show up as one of the predicted intents. Go back to the NLU Settings tab to make this phrase more specific to the intent.\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"0d037f75ab274b938ed40bde1d2ff67b\",\"name\":\"No Match Preview\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Not Preview\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_client_mode != \\\"DISCOVERABLE_PREVIEW\\\";\\n})()\\n\"},\"id\":\"5816c526d58249189a8f328f6db1b8a6\",\"name\":\"Not Preview\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Preview\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_client_mode == \\\"DISCOVERABLE_PREVIEW\\\";\\n})()\\n\"},\"id\":\"be65dbbecd414302b8d1abd4039e19ee\",\"name\":\"Preview\",\"expert_mode\":false}],\"id\":\"5c43188b84e344fd9328a11fbb32e2f7\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"preview topic selected\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaInputs.show_options.getValue() == -1) return false;\\n    var selectedTopicName = vaInputs.show_options;\\n    var allTopics = JSON.parse(vaVars._topic_results);\\n    for (var i = 0; i < allTopics.length; i++) {\\n      if(allTopics[i][\\\"name\\\"] == selectedTopicName && allTopics[i].sys_id == vaVars._topic_preview_topic) {\\n          return true;\\n      }\\n    }\\n    return false;\\n})()\"},\"id\":\"5623cefe253947cdb81be6f914496266\",\"name\":\"preview topic selected\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"not preview selected\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaInputs.show_options.getValue() == -1) return true;\\n    var selectedTopicName = vaInputs.show_options;\\n    var allTopics = JSON.parse(vaVars._topic_results);\\n    for (var i = 0; i < allTopics.length; i++) {\\n      if(allTopics[i][\\\"name\\\"] == selectedTopicName && allTopics[i].sys_id == vaVars._topic_preview_topic) {\\n          return false;\\n      }\\n    }\\n    return true;\\n})()\"},\"id\":\"a555cd91a9824427b571bb2df5f5b2a0\",\"name\":\"not preview selected\",\"expert_mode\":false}],\"id\":\"d0e19dc91a56462da2d1700b0743637a\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"[preview only] You selected a different topic than the one you are editing. Go back to the NLU Settings tab to make this phrase more specific to the intent.\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"7bc0c612bfbd4508a214d295c54b79e6\",\"name\":\"Preview Topic Not Selected\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"[preview only] This conversation will end here.\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"e39adb4a47d74232b90584ce4b17f0f5\",\"name\":\"Preview Ended\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"[preview only] Your test phrase triggered a different topic. Go back to the NLU Settings tab and make sure this phrase is tied to the correct intent.\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"5d27b6523eec40e7b17feeebf8196a95\",\"name\":\"Bad Match\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if (!gs.nil(vaVars._topic_current)) {\\n        vaSystem.cancelTask(JSON.parse(vaVars._topic_current)[\\\"task\\\"]);\\n    }\\n})()\\n\",\"id\":\"e4522542bc67441caf359817facb1e0b\",\"name\":\"End conversation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.switchTopic(vaVars._setup_search_fallback_topic);\\n})()\\n\",\"id\":\"aa9b0e7a1f9c46c3b5b61373d535bdf7\",\"name\":\"AI Search Fallback Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Search Fallback Set\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !gs.nil(vaVars._setup_search_fallback_topic);\\n})()\\n\"},\"id\":\"9ebc92fbdb2f472dbe3dfafe53af5762\",\"name\":\"Search Fallback Set\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Search Fallback Not Set\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaVars._setup_search_fallback_topic);\\n})()\\n\"},\"id\":\"c66bbb562c5b4a3ba148cd678ee65b8e\",\"name\":\"Search Fallback Not Set\",\"expert_mode\":false}],\"id\":\"7d01c2d6f7e646bcb752b885f23a93bf\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Search Fallback Set\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !gs.nil(vaVars._setup_search_fallback_topic);\\n})()\"},\"id\":\"26c12736965446ef99ca3ae972c5aee1\",\"name\":\"Search Fallback Set\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Search Fallback Not Set\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaVars._setup_search_fallback_topic);\\n})()\\n\"},\"id\":\"38d1ec09ad5a4d9a958378fe07299c49\",\"name\":\"Search Fallback Not Set\",\"expert_mode\":false}],\"id\":\"9121d2c1abb146eb881c0d6ee9de16f4\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"If auto select confirmation enabled\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars._topic_current === null) {\\n        return vaVars.auto_select_prompt_enabled_initial === '1';\\n    } else {\\n        return vaVars.auto_select_prompt_enabled_mid === '1';\\n    }  \\n})()\\n\"},\"id\":\"86fb5d409cb645cb8411f8af385ff5d6\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars._topic_current === null) {\\n        return vaVars.auto_select_prompt_enabled_initial === '0';\\n    } else {\\n        return vaVars.auto_select_prompt_enabled_mid === '0';\\n    }  \\n})()\\n\"},\"id\":\"a8cb65e3996048438d08e0c29bf4796f\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"c5ceb18ba4b2430c8b8a5f225b0b43a7\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Proceed with auto selection\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"auto_select_proceed_option=true\"},\"id\":\"254fda8d5ef4471e8b4f2d6fc3af3e29\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"auto_select_proceed_option=\"},\"id\":\"2dff9cca5508479d8c265e9217aca8a4\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"3774fc966c4f49659cede8b615ecd959\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.confirmAutoSelection(true, vaVars._topic_current != null);\\n})()\\n\",\"id\":\"091c843e2a3141e7ae2b2d01959905f8\",\"name\":\"confirm auto selected\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.confirmAutoSelection(false, vaVars._topic_current != null);\\n})()\\n\",\"id\":\"8bde4ec59a504e22adaf925ffd5b96d0\",\"name\":\"reject auto selected\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var gr = new GlideRecord('sys_cs_general_settings');\\n    gr.addQuery('sys_domain','global');   \\n    gr.query();   \\n    if (gr.next()) { \\n         var initial = gr.getValue('auto_select_prompt_enabled_initial');\\n         var mid = gr.getValue('auto_select_prompt_enabled_mid');\\n         var prompt = gr.getValue('auto_select_prompt_message');\\n    }  \\n    vaVars.auto_select_prompt_enabled_initial = initial;\\n    vaVars.auto_select_prompt_enabled_mid = mid;\\n    vaVars.auto_select_prompt_message = prompt ? prompt : '';\\n    \\n})()\\n\",\"id\":\"0fa999cee70847458a1aa18f6aa8be7b\",\"name\":\"set auto select prompt enabled\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Auto selection condition\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Initial Selection\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars._topic_current == null;\\n})()\\n\"},\"id\":\"774dabe2df244589a1a9234981f6fcec\",\"name\":\"Initial Selection\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Mid Topic Selection\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars._topic_current != null;\\n})()\\n\"},\"id\":\"7b3d49f6f46841a88813c9aa7ba12dea\",\"name\":\"Mid Topic Selection\",\"expert_mode\":false}],\"id\":\"a4c9f5f1d84e4560961d95f773c62260\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"if typed\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var topics = JSON.parse(vaVars._topic_results);\\n    var topic = topics[0];\\n    return topic.utterance ? true : false;\\n})()\\n\"},\"id\":\"998bc20cd959473ea435bc4884d1faf8\",\"name\":\"if typed\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"From show everything\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var topics = JSON.parse(vaVars._topic_results);\\n    var topic = topics[0];\\n    return topic.utterance ? false : true;\\n})()\\n\"},\"id\":\"450c57dd2d134f4596884e30aa56f683\",\"name\":\"From show everything\",\"expert_mode\":false}],\"id\":\"3a473a89ef6947269413e40f50eda6b0\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"660cc5d151fb4e0c9ce83fd5fd1a7bb3\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var topics = JSON.parse(vaVars._topic_results);\\n    var topic = topics[0]; \\n    var message = vaVars.auto_select_prompt_message;\\n    const regexWithName = /{topic(\\\\s)\\\\1*name}/i;\\n    const regex = /{topic}/i;\\n    message = message.replace(regexWithName,'{0}').replace(regex,'{0}');\\n    return gs.getMessageLang(message, vaContext.getRequesterLang(), [topic.title]);\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"3c5b969de07d4b34b202b55255b8f216\",\"name\":\"Auto Select Proceed Option\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.setIntentClassificationToIncorrectAmongMultiple();\\n})()\\n\",\"id\":\"437986edd0c4426bb8f4c7341e7880de\",\"name\":\"Set Intent Classification As Incorrect\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.setIntentClassificationToIncorrectAmongMultiple();\\n})()\\n\",\"id\":\"f37ff530fb5e4f02bbedf241f7965f60\",\"name\":\"Set Intent Classification As Incorrect\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_midtopic_switch_rejected = true;\\n})()\\n\",\"id\":\"f703f9c7887744eb9a36f0d7879e511c\",\"name\":\"Reject Mid-Topic Switch\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"initial topic discovery\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaVars._topic_current);\\n})()\\n\"},\"id\":\"edd88b28af634b0899d541e609c4a3f8\",\"name\":\"initial topic discovery\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"mid topic discovery\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !gs.nil(vaVars._topic_current);\\n})()\\n\"},\"id\":\"9a5d6a87675a492f8895f4ff5120727a\",\"name\":\"mid topic discovery\",\"expert_mode\":false}],\"id\":\"aa7fcc66b2874d479dc6a3acfe7e092d\",\"goal_id\":\"primary\",\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"e55043c4a2114285a14798f711c4bd75\",\"target_node_id\":\"437986edd0c4426bb8f4c7341e7880de\",\"branch_id\":\"18106f7e10c048278dfd6e3b7d7769a0\",\"id\":\"047504f82995490386f990995c1638fd\",\"name\":\"18106f7e10c048278dfd6e3b7d7769a0\"},{\"type\":\"Edge\",\"source_node_id\":\"c5ceb18ba4b2430c8b8a5f225b0b43a7\",\"target_node_id\":\"3c5b969de07d4b34b202b55255b8f216\",\"branch_id\":\"86fb5d409cb645cb8411f8af385ff5d6\",\"id\":\"15909c08e4db44568bd3438f7a8b1740\",\"name\":\"86fb5d409cb645cb8411f8af385ff5d6\"},{\"type\":\"Edge\",\"source_node_id\":\"0fa999cee70847458a1aa18f6aa8be7b\",\"target_node_id\":\"c5ceb18ba4b2430c8b8a5f225b0b43a7\",\"id\":\"bcfd5d7cedf441d5ad41ee65bbd8fda3\"},{\"type\":\"Edge\",\"source_node_id\":\"a4c9f5f1d84e4560961d95f773c62260\",\"target_node_id\":\"9121d2c1abb146eb881c0d6ee9de16f4\",\"branch_id\":\"774dabe2df244589a1a9234981f6fcec\",\"id\":\"91c41636db6c4a61bd08d101b2332fcd\",\"name\":\"774dabe2df244589a1a9234981f6fcec\"},{\"type\":\"Edge\",\"source_node_id\":\"8bde4ec59a504e22adaf925ffd5b96d0\",\"target_node_id\":\"a4c9f5f1d84e4560961d95f773c62260\",\"id\":\"722cf257b84e4df4a903ea0af7ca0352\"},{\"type\":\"Edge\",\"source_node_id\":\"30be97d6007840e09f52947ddf93be06\",\"target_node_id\":\"3a473a89ef6947269413e40f50eda6b0\",\"branch_id\":\"ea307cc6354943e3baa8d1a5aeabc1b7\",\"id\":\"16d8bb1e653c4166b97e9e5866b1dd34\",\"name\":\"ea307cc6354943e3baa8d1a5aeabc1b7\"},{\"type\":\"Edge\",\"source_node_id\":\"e2366c6d24a742059cbdfefaea075bfd\",\"target_node_id\":\"9ba5218ff118492b91a660cabd847791\",\"branch_id\":\"1cee168caa6340a68d3a91452ceee3c6\",\"id\":\"9db7dc00bbed4048bc4af528c0d0b27b\",\"name\":\"1cee168caa6340a68d3a91452ceee3c6\"},{\"type\":\"Edge\",\"source_node_id\":\"9ba5218ff118492b91a660cabd847791\",\"target_node_id\":\"0d037f75ab274b938ed40bde1d2ff67b\",\"branch_id\":\"8ad7950401be490482588e4158bc33fd\",\"id\":\"4a383622efa64c94a0918bb1d595eb0e\",\"name\":\"8ad7950401be490482588e4158bc33fd\"},{\"type\":\"Edge\",\"source_node_id\":\"9ba5218ff118492b91a660cabd847791\",\"target_node_id\":\"1e7f815f20614462a9f74181d7533fde\",\"branch_id\":\"e6c58c3b934640bdb2abe2e62b9a9c37\",\"id\":\"70b756286cac47569c79238d668ff0cf\",\"name\":\"e6c58c3b934640bdb2abe2e62b9a9c37\"},{\"type\":\"Edge\",\"source_node_id\":\"2b8a6bb814354664ab7c35e6f263a201\",\"target_node_id\":\"c04f39b58e3e48c6a4dd6c535f6c3fb1\",\"id\":\"c14a6fd1c37d41b18e2cbfcc784795b2\"},{\"type\":\"Edge\",\"source_node_id\":\"e55043c4a2114285a14798f711c4bd75\",\"target_node_id\":\"2b8a6bb814354664ab7c35e6f263a201\",\"branch_id\":\"7bbcbe51885a4e30ab337ccd16ae4b8a\",\"id\":\"feaaf1548de64f47a5fb7992f7a3c6de\",\"name\":\"7bbcbe51885a4e30ab337ccd16ae4b8a\"},{\"type\":\"Edge\",\"source_node_id\":\"acc71bac748d4ae4aa33b2291d7ba039\",\"target_node_id\":\"c04f39b58e3e48c6a4dd6c535f6c3fb1\",\"id\":\"7a63fdf65eb241de96eee7cb84f1a0aa\"},{\"type\":\"Edge\",\"source_node_id\":\"30be97d6007840e09f52947ddf93be06\",\"target_node_id\":\"1e7f815f20614462a9f74181d7533fde\",\"branch_id\":\"4750259dea554a29a021613f9d9cb82a\",\"id\":\"37fb08159325497ba8d8894f843df892\",\"name\":\"4750259dea554a29a021613f9d9cb82a\"},{\"type\":\"Edge\",\"source_node_id\":\"ab4ca9e38bd1452482b3898a505ffe0c\",\"target_node_id\":\"ad2d60ef928c490d9fa097a67e72c28b\",\"id\":\"387618475aff4ad29af63d390733dfed\"},{\"type\":\"Edge\",\"source_node_id\":\"c04f39b58e3e48c6a4dd6c535f6c3fb1\",\"target_node_id\":\"ad2d60ef928c490d9fa097a67e72c28b\",\"id\":\"24c499418aaa444c8a8343909e6b1c8b\"},{\"type\":\"Edge\",\"source_node_id\":\"926adfbd91864df9af54cbc168535661\",\"target_node_id\":\"e2366c6d24a742059cbdfefaea075bfd\",\"id\":\"4b95d1f34acd49f9a4572891b256c663\"},{\"type\":\"Edge\",\"source_node_id\":\"e2366c6d24a742059cbdfefaea075bfd\",\"target_node_id\":\"30be97d6007840e09f52947ddf93be06\",\"branch_id\":\"5a8b953ed61a420fad7d805b2b2ca89c\",\"id\":\"bd79c6d1169a49a09f36694023d6e1b4\",\"name\":\"5a8b953ed61a420fad7d805b2b2ca89c\"},{\"type\":\"Edge\",\"source_node_id\":\"1e7f815f20614462a9f74181d7533fde\",\"target_node_id\":\"5c43188b84e344fd9328a11fbb32e2f7\",\"id\":\"f698f4a13fc9455a9513d5ece1d8ff43\"},{\"type\":\"Edge\",\"source_node_id\":\"5c43188b84e344fd9328a11fbb32e2f7\",\"target_node_id\":\"e55043c4a2114285a14798f711c4bd75\",\"branch_id\":\"5816c526d58249189a8f328f6db1b8a6\",\"id\":\"a0552a664c634dff853b9c28743e510d\",\"name\":\"5816c526d58249189a8f328f6db1b8a6\"},{\"type\":\"Edge\",\"source_node_id\":\"5c43188b84e344fd9328a11fbb32e2f7\",\"target_node_id\":\"d0e19dc91a56462da2d1700b0743637a\",\"branch_id\":\"be65dbbecd414302b8d1abd4039e19ee\",\"id\":\"8ad89fb18d9c4b69ad51f2e24665280d\",\"name\":\"be65dbbecd414302b8d1abd4039e19ee\"},{\"type\":\"Edge\",\"source_node_id\":\"d0e19dc91a56462da2d1700b0743637a\",\"target_node_id\":\"2b8a6bb814354664ab7c35e6f263a201\",\"branch_id\":\"5623cefe253947cdb81be6f914496266\",\"id\":\"74d671dfe4e24997874a4d740aae9857\",\"name\":\"5623cefe253947cdb81be6f914496266\"},{\"type\":\"Edge\",\"source_node_id\":\"d0e19dc91a56462da2d1700b0743637a\",\"target_node_id\":\"7bc0c612bfbd4508a214d295c54b79e6\",\"branch_id\":\"a555cd91a9824427b571bb2df5f5b2a0\",\"id\":\"1ef061c34e914323987b449e75f2fc42\",\"name\":\"a555cd91a9824427b571bb2df5f5b2a0\"},{\"type\":\"Edge\",\"source_node_id\":\"0d037f75ab274b938ed40bde1d2ff67b\",\"target_node_id\":\"e39adb4a47d74232b90584ce4b17f0f5\",\"id\":\"75a507543e6c4088b51bac3c906eb84e\"},{\"type\":\"Edge\",\"source_node_id\":\"9ba5218ff118492b91a660cabd847791\",\"target_node_id\":\"5d27b6523eec40e7b17feeebf8196a95\",\"branch_id\":\"2fa9fb69dfcb45b2bd44e8f4d9390465\",\"id\":\"99ff3ab215dd47e2b20ed907e676a497\",\"name\":\"2fa9fb69dfcb45b2bd44e8f4d9390465\"},{\"type\":\"Edge\",\"source_node_id\":\"5d27b6523eec40e7b17feeebf8196a95\",\"target_node_id\":\"e39adb4a47d74232b90584ce4b17f0f5\",\"id\":\"85f4f90c39b24cc1a787b45e878ad7e2\"},{\"type\":\"Edge\",\"source_node_id\":\"e39adb4a47d74232b90584ce4b17f0f5\",\"target_node_id\":\"e4522542bc67441caf359817facb1e0b\",\"id\":\"851bcddee11d4e948d4756739c3394d6\"},{\"type\":\"Edge\",\"source_node_id\":\"e4522542bc67441caf359817facb1e0b\",\"target_node_id\":\"ad2d60ef928c490d9fa097a67e72c28b\",\"id\":\"f034e5598557428889cf6b691abcceb2\"},{\"type\":\"Edge\",\"source_node_id\":\"aa9b0e7a1f9c46c3b5b61373d535bdf7\",\"target_node_id\":\"ad2d60ef928c490d9fa097a67e72c28b\",\"id\":\"407c09a33a694564b0a41683bff7f335\"},{\"type\":\"Edge\",\"source_node_id\":\"7d01c2d6f7e646bcb752b885f23a93bf\",\"target_node_id\":\"aa9b0e7a1f9c46c3b5b61373d535bdf7\",\"branch_id\":\"9ebc92fbdb2f472dbe3dfafe53af5762\",\"id\":\"2119a3fab27942f093d9a34e97e04f9f\",\"name\":\"9ebc92fbdb2f472dbe3dfafe53af5762\"},{\"type\":\"Edge\",\"source_node_id\":\"7d01c2d6f7e646bcb752b885f23a93bf\",\"target_node_id\":\"ab4ca9e38bd1452482b3898a505ffe0c\",\"branch_id\":\"c66bbb562c5b4a3ba148cd678ee65b8e\",\"id\":\"1ec1c6169eca46a8a87049b5e4a9982c\",\"name\":\"c66bbb562c5b4a3ba148cd678ee65b8e\"},{\"type\":\"Edge\",\"source_node_id\":\"9121d2c1abb146eb881c0d6ee9de16f4\",\"target_node_id\":\"aa9b0e7a1f9c46c3b5b61373d535bdf7\",\"branch_id\":\"26c12736965446ef99ca3ae972c5aee1\",\"id\":\"dce735ec9d9e47dc9597904402c61110\",\"name\":\"26c12736965446ef99ca3ae972c5aee1\"},{\"type\":\"Edge\",\"source_node_id\":\"9121d2c1abb146eb881c0d6ee9de16f4\",\"target_node_id\":\"ab4ca9e38bd1452482b3898a505ffe0c\",\"branch_id\":\"38d1ec09ad5a4d9a958378fe07299c49\",\"id\":\"c954951675564d199e05e1198ee1a8c9\",\"name\":\"38d1ec09ad5a4d9a958378fe07299c49\"},{\"type\":\"Edge\",\"source_node_id\":\"c5ceb18ba4b2430c8b8a5f225b0b43a7\",\"target_node_id\":\"acc71bac748d4ae4aa33b2291d7ba039\",\"branch_id\":\"a8cb65e3996048438d08e0c29bf4796f\",\"id\":\"2a16d2cde5d64f8aacd545ffc2eabaa0\",\"name\":\"a8cb65e3996048438d08e0c29bf4796f\"},{\"type\":\"Edge\",\"source_node_id\":\"3774fc966c4f49659cede8b615ecd959\",\"target_node_id\":\"091c843e2a3141e7ae2b2d01959905f8\",\"branch_id\":\"254fda8d5ef4471e8b4f2d6fc3af3e29\",\"id\":\"a24f9841b36f4cfc981a7bfb6d6f838d\",\"name\":\"254fda8d5ef4471e8b4f2d6fc3af3e29\"},{\"type\":\"Edge\",\"source_node_id\":\"091c843e2a3141e7ae2b2d01959905f8\",\"target_node_id\":\"acc71bac748d4ae4aa33b2291d7ba039\",\"id\":\"f690b2d0db5b426e9552246c436102bf\"},{\"type\":\"Edge\",\"source_node_id\":\"3774fc966c4f49659cede8b615ecd959\",\"target_node_id\":\"8bde4ec59a504e22adaf925ffd5b96d0\",\"branch_id\":\"2dff9cca5508479d8c265e9217aca8a4\",\"id\":\"429ca402f5944fad9f16637e41c42540\",\"name\":\"2dff9cca5508479d8c265e9217aca8a4\"},{\"type\":\"Edge\",\"source_node_id\":\"a4c9f5f1d84e4560961d95f773c62260\",\"target_node_id\":\"ad2d60ef928c490d9fa097a67e72c28b\",\"branch_id\":\"7b3d49f6f46841a88813c9aa7ba12dea\",\"id\":\"050543275f9e46ed809f3bd3783d3846\",\"name\":\"7b3d49f6f46841a88813c9aa7ba12dea\"},{\"type\":\"Edge\",\"source_node_id\":\"9ba5218ff118492b91a660cabd847791\",\"target_node_id\":\"3a473a89ef6947269413e40f50eda6b0\",\"branch_id\":\"fa08c7671cc44fba86ff7ff50037baf0\",\"id\":\"a9e3439838de495a859e1b0fb2b06a24\",\"name\":\"fa08c7671cc44fba86ff7ff50037baf0\"},{\"type\":\"Edge\",\"source_node_id\":\"3a473a89ef6947269413e40f50eda6b0\",\"target_node_id\":\"0fa999cee70847458a1aa18f6aa8be7b\",\"branch_id\":\"998bc20cd959473ea435bc4884d1faf8\",\"id\":\"ab9d4084b2bb409f893ba0b71daaec2d\",\"name\":\"998bc20cd959473ea435bc4884d1faf8\"},{\"type\":\"Edge\",\"source_node_id\":\"3a473a89ef6947269413e40f50eda6b0\",\"target_node_id\":\"acc71bac748d4ae4aa33b2291d7ba039\",\"branch_id\":\"450c57dd2d134f4596884e30aa56f683\",\"id\":\"44c4ffb63891423a944f3d23343cd66f\",\"name\":\"450c57dd2d134f4596884e30aa56f683\"},{\"type\":\"Edge\",\"source_node_id\":\"3c5b969de07d4b34b202b55255b8f216\",\"target_node_id\":\"3774fc966c4f49659cede8b615ecd959\",\"id\":\"ea6b87a5cd3d4b82af8fdefcaef7455e\"},{\"type\":\"Edge\",\"source_node_id\":\"437986edd0c4426bb8f4c7341e7880de\",\"target_node_id\":\"9121d2c1abb146eb881c0d6ee9de16f4\",\"id\":\"cc6402476fa1405498bf818dcb8cbfa4\"},{\"type\":\"Edge\",\"source_node_id\":\"7bc0c612bfbd4508a214d295c54b79e6\",\"target_node_id\":\"f37ff530fb5e4f02bbedf241f7965f60\",\"id\":\"b154c70160fc45f7b63a8c78c0258943\"},{\"type\":\"Edge\",\"source_node_id\":\"f37ff530fb5e4f02bbedf241f7965f60\",\"target_node_id\":\"e39adb4a47d74232b90584ce4b17f0f5\",\"id\":\"94c35dbf26914e3e9ddf188f3da12731\"},{\"type\":\"Edge\",\"source_node_id\":\"e55043c4a2114285a14798f711c4bd75\",\"target_node_id\":\"f703f9c7887744eb9a36f0d7879e511c\",\"branch_id\":\"33360d9536484014ad1b486c9e3671e6\",\"id\":\"dcdc37ec3b6b444db0cac31d971d796d\",\"name\":\"33360d9536484014ad1b486c9e3671e6\"},{\"type\":\"Edge\",\"source_node_id\":\"f703f9c7887744eb9a36f0d7879e511c\",\"target_node_id\":\"ad2d60ef928c490d9fa097a67e72c28b\",\"id\":\"2530423da0b34cf8af442da72591b872\"},{\"type\":\"Edge\",\"source_node_id\":\"30be97d6007840e09f52947ddf93be06\",\"target_node_id\":\"aa7fcc66b2874d479dc6a3acfe7e092d\",\"branch_id\":\"0247301c36414cfc9aaaf9dcc7b2ffdd\",\"id\":\"b8f95d0138ca45e48bb6be4f7406ef50\",\"name\":\"0247301c36414cfc9aaaf9dcc7b2ffdd\"},{\"type\":\"Edge\",\"source_node_id\":\"aa7fcc66b2874d479dc6a3acfe7e092d\",\"target_node_id\":\"7d01c2d6f7e646bcb752b885f23a93bf\",\"branch_id\":\"edd88b28af634b0899d541e609c4a3f8\",\"id\":\"a926177ff4914b098a90ad1a390244bf\",\"name\":\"edd88b28af634b0899d541e609c4a3f8\"},{\"type\":\"Edge\",\"source_node_id\":\"aa7fcc66b2874d479dc6a3acfe7e092d\",\"target_node_id\":\"1e7f815f20614462a9f74181d7533fde\",\"branch_id\":\"9a5d6a87675a492f8895f4ff5120727a\",\"id\":\"1edf1df26b7b437f9d11c984f1535743\",\"name\":\"9a5d6a87675a492f8895f4ff5120727a\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_topic_results\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       var result;\\n       if (vaInputs.first_name == 'Bill') {\\n           result = 'hi there ' + vaInputs._first_name;\\n       } else {\\n           result = 'how are you ' + vaInputs.last_name + '?';\\n       }\\n       return result;\\n    */\\n    return 'sample';\\n})()\\n\"},\"list\":false,\"id\":\"4331c57f3a1c4bf384c7b9be2603941a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_confirmation_msg\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"309d4c0f009b4c68a7d7da6528958bfd\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_wrong_msg\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"c859922c8a3441ea923fc18349d7bc38\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_not_found_msg\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"836190f599444cefb468fbf7b869587f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_choice_list_msg\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"b91e21ff2129431db853b21a50339048\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_display_count\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"4e27fee55a6b4d0080a4acb507fdba66\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_sorry_msg\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"fe92fe2435744de9964ee973aabe3716\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_setup_fallback_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"42475c0899614b1ebba957e5dd0b0395\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_new\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"3fc4b4c8df1642e4a0b3b3c99ee53deb\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_switcher_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"82fedf43e0a34de1812fca8d1184ad4e\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_current\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"a877e4925af9417cb31feb75f49635e7\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"sameTopic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"cfde8d86a0274541a7962fc210f54c44\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_sth_else_option\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"5aef4039d87949d5880ab5a0209b771f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_setup_search_fallback_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"4e54c0e4bb7c4ed4b9db25b754754f2d\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"auto_select_prompt_enabled_initial\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return '0';\\n})()\\n\"},\"list\":false,\"id\":\"0862608748d843eaaba63d42f92b063a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"auto_select_prompt_enabled_mid\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return '0';\\n})()\\n\"},\"list\":false,\"id\":\"9af587f50e024ab08a53f53fa99de292\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"auto_select_prompt_message\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"d9da0ac30f3b4c09a88110a3acdcf8e8\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_resume_current_option\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"bba7667a378142fca7d22b446bcc3c8f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"glide_variables\":[{\"type\":\"Choice\",\"choices\":[],\"id\":\"7906ed5fda874734bc27b71dd118b7e3\",\"name\":\"show_options\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"table\":\"incident\"},{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"True/False\",\"id\":\"660cc5d151fb4e0c9ce83fd5fd1a7bb3\",\"name\":\"auto_select_proceed_option\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n      return false;\\n      })()\\n    \"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"b672fb443b1323009cbbcea234efc4ba\",\"name\":\"_topic_discovery_\",\"key_phrases\":[\"_topic_discovery_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"description\":\"Topic Discovery System Topic\",\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"title\":\"_topic_discovery_\",\"library\":false,\"csTopicId\":\"379d23143b2323009cbbcea234efc414\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_topic_discovery_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"b672fb443b1323009cbbcea234efc4ba","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/379d23143b2323009cbbcea234efc414","value":"379d23143b2323009cbbcea234efc414"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"1","sys_updated_on":"2024-04-25 22:14:17","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.65\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"c381274a2bfc4aadbcbb1aa0a7f2fbc6\": {\n          \"id\": \"c381274a2bfc4aadbcbb1aa0a7f2fbc6\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"7dec3dbc051f4cfd82341989b4f1ccf4\": {\n          \"id\": \"7dec3dbc051f4cfd82341989b4f1ccf4\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"b484b9ea8c23430d8ad057953abb6847\": {\n          \"id\": \"b484b9ea8c23430d8ad057953abb6847\",\n          \"name\": \"Send Skill Picker\",\n          \"script\": \"(function execute() {\\n    var skillSelectionMessage = vaSystem.getContextProfileMessage(\\\"skill_selection\\\");\\n    vaSystem.sendSkillPickerControl(skillSelectionMessage, {\\\"hideShowMeEverything\\\": false});\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"9f6988595fe94e75a32908f8de62065c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c381274a2bfc4aadbcbb1aa0a7f2fbc6\",\n          \"target\": \"b484b9ea8c23430d8ad057953abb6847\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a7980198a6294da183651ab27bea44a6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b484b9ea8c23430d8ad057953abb6847\",\n          \"target\": \"7dec3dbc051f4cfd82341989b4f1ccf4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"365a54e1a33102101268c160441e611f","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_365a54e1a33102101268c160441e611f","sys_updated_by":"admin","sys_created_on":"2024-04-25 22:03:36","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"e33b76ab61d94908af57e6ac8bed8371\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"e33b76ab61d94908af57e6ac8bed8371\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"e33b76ab61d94908af57e6ac8bed8371\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"c381274a2bfc4aadbcbb1aa0a7f2fbc6\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"7dec3dbc051f4cfd82341989b4f1ccf4\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var skillSelectionMessage = vaSystem.getContextProfileMessage(\\\"skill_selection\\\");\\n    vaSystem.sendSkillPickerControl(skillSelectionMessage, {\\\"hideShowMeEverything\\\": false});\\n})()\\n\",\"id\":\"b484b9ea8c23430d8ad057953abb6847\",\"name\":\"Send Skill Picker\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"c381274a2bfc4aadbcbb1aa0a7f2fbc6\",\"target_node_id\":\"b484b9ea8c23430d8ad057953abb6847\",\"id\":\"9f6988595fe94e75a32908f8de62065c\"},{\"type\":\"Edge\",\"source_node_id\":\"b484b9ea8c23430d8ad057953abb6847\",\"target_node_id\":\"7dec3dbc051f4cfd82341989b4f1ccf4\",\"id\":\"a7980198a6294da183651ab27bea44a6\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"081ad8a1a33102101268c160441e610d\",\"name\":\"_skill_picker_\",\"key_phrases\":[\"_skill_picker_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"description\":\"Used to send out the skill picker again. This is similar to the Greetings topic that send out a greetings message and the skill picker control.\",\"model_type\":\"llm\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"library\":false,\"csTopicId\":\"f25ad8a1a33102101268c160441e6187\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_skill_picker_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"081ad8a1a33102101268c160441e610d","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/f25ad8a1a33102101268c160441e6187","value":"f25ad8a1a33102101268c160441e6187"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"1","sys_updated_on":"2020-02-26 22:20:30","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"3cade05053130010cf8cddeeff7b12f7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_3cade05053130010cf8cddeeff7b12f7","sys_updated_by":"admin","sys_created_on":"2020-02-26 22:20:24","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"e488892cc6c347c7a7755ff80b3c35e6\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"e488892cc6c347c7a7755ff80b3c35e6\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"e488892cc6c347c7a7755ff80b3c35e6\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"d00c482141544ad98e290101cd722d50\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"2893024bb0e54aed9bbfeaf8b31c5a06\",\"name\":\"End\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"anything_else!=true\"},\"id\":\"a952aaeb96934b0689f07dbe2b18001d\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"anything_else=true\"},\"id\":\"0cfac1f171a84b1684b42388332a0237\",\"name\":\"Yes\"}],\"id\":\"ab73ef455e1744da86c158f900b97c2a\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"variable_id\":\"cfae41274e5e486ea52c2b3018b88c38\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Is there anything else I can assist you with?\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"name\":\"\",\"allow_text_input\":true,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"8d019fb7d3c54f36ace5890baf49a2fe\",\"name\":\"Anything Else\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.switchTopic(vaVars._setup_explore_help_topic);\\n})()\\n\",\"id\":\"30d0ebfb1f9049d7a174fe27746b58e4\",\"name\":\"show topics\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars._topic_current = null;\\n})()\\n\",\"id\":\"14020e3f863d4cdf89fb41908609b779\",\"name\":\"Reset Current Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"ab73ef455e1744da86c158f900b97c2a\",\"target_node_id\":\"2893024bb0e54aed9bbfeaf8b31c5a06\",\"branch_id\":\"a952aaeb96934b0689f07dbe2b18001d\",\"id\":\"ad83a877b08e4c57b4c80eccd8bc1e3a\",\"name\":\"a952aaeb96934b0689f07dbe2b18001d\"},{\"type\":\"Edge\",\"source_node_id\":\"8d019fb7d3c54f36ace5890baf49a2fe\",\"target_node_id\":\"ab73ef455e1744da86c158f900b97c2a\",\"id\":\"280e6366184c409ba4c685a2077b86c3\"},{\"type\":\"Edge\",\"source_node_id\":\"ab73ef455e1744da86c158f900b97c2a\",\"target_node_id\":\"30d0ebfb1f9049d7a174fe27746b58e4\",\"branch_id\":\"0cfac1f171a84b1684b42388332a0237\",\"id\":\"883ef4dc83c245b3b2364cbd4cdbedd0\",\"name\":\"0cfac1f171a84b1684b42388332a0237\"},{\"type\":\"Edge\",\"source_node_id\":\"30d0ebfb1f9049d7a174fe27746b58e4\",\"target_node_id\":\"14020e3f863d4cdf89fb41908609b779\",\"id\":\"ef5ba16114504cc69527c6116d0a1816\"},{\"type\":\"Edge\",\"source_node_id\":\"d00c482141544ad98e290101cd722d50\",\"target_node_id\":\"14020e3f863d4cdf89fb41908609b779\",\"id\":\"084ce52938f4498989458162459ff455\"},{\"type\":\"Edge\",\"source_node_id\":\"14020e3f863d4cdf89fb41908609b779\",\"target_node_id\":\"8d019fb7d3c54f36ace5890baf49a2fe\",\"id\":\"3929c0b9f80542318554844e988cf0aa\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_setup_explore_help_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"id\":\"55e6560fca7b42daae64684801b8a949\",\"formatType\":\"text\"},{\"type\":\"String\",\"name\":\"_topic_current\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"id\":\"515a9715d8634bc2ae98689b1142cca1\",\"formatType\":\"text\"}],\"glide_variables\":[{\"type\":\"True/False\",\"id\":\"cfae41274e5e486ea52c2b3018b88c38\",\"name\":\"anything_else\",\"formatType\":\"text\"},{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"09d2f8854caa44c2b0a1aff3eb394c11\",\"name\":\"user\",\"formatType\":\"text\"}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return false;\\n})()\\n\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"id\":\"748d605053130010cf8cddeeff7b128e\",\"name\":\"Anything Else Topic (Template)\",\"key_phrases\":[\"Anything Else Topic\"],\"nlu_provider\":\"\",\"flexible_conversation_switching\":false,\"design_category\":\"5628e7f27373230025d032e954f6a7de\",\"library\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Anything Else Topic (Template)","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"748d605053130010cf8cddeeff7b128e","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/30ade05053130010cf8cddeeff7b12f3","value":"30ade05053130010cf8cddeeff7b12f3"},"sys_created_by":"admin","sys_policy":"read"},{"sys_mod_count":"5","sys_updated_on":"2024-03-28 04:24:25","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.57\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"0e3d646d372d4eed9e85ec13d8cecefb\": {\n          \"id\": \"0e3d646d372d4eed9e85ec13d8cecefb\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"d7b96080f33c4ee5bfc1557a0e2e826d\",\n              \"name\": \"record_id\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": false\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"153e4009f75043cf8339739dc081e419\",\n              \"name\": \"record_table\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": false\n            }\n          ],\n          \"variableIds\": [\n            \"d7b96080f33c4ee5bfc1557a0e2e826d\",\n            \"153e4009f75043cf8339739dc081e419\"\n          ]\n        },\n        \"9e18d27b47eb47f9aec7cb7efbb36c79\": {\n          \"id\": \"9e18d27b47eb47f9aec7cb7efbb36c79\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"28ba5b2c879b4e1a90431a33c4cd55d9\": {\n          \"id\": \"28ba5b2c879b4e1a90431a33c4cd55d9\",\n          \"name\": \"Process end state details\",\n          \"script\": \"(function execute() {\\n    var tableName = vaInputs.record_table;\\n    var recordId = vaInputs.record_id;\\n\\n    var tableUtils = new TableUtils(tableName);\\n    vaVars.isTaskBasedTable = (tableUtils.getAbsoluteBase() == 'task');\\n\\n    var pageId = 'form';\\n    if (vaVars.isTaskBasedTable)\\n        pageId = 'ticket';\\n\\n    var link = '';\\n    var screenId = '';\\n    if (vaVars.portalName === 'mesp') {\\n        var mobileDLink = new global.MobileDeepLinkGenerator('request');\\n        if (tableName == 'sc_req_item')\\n            screenId = '7516f9d787232300e0ef0cf888cb0b4d';\\n        else if (tableName == 'sc_request')\\n            screenId = '276dd3edb79033001befcd58de11a9c7';\\n        else if (tableName == 'incident')\\n            screenId = 'ebb94d9c0f2033001befa68ca8767e4e';\\n        else\\n            screenId = 'd39eb2db87772300e0ef0cf888cb0bcb';\\n\\n        link = mobileDLink.getFormScreenLink(screenId, tableName, recordId);\\n    } else\\n        link = vaSystem.applyLinkTemplate(recordId, tableName);\\n    vaVars.recordLink = link;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"121d348459004aefa284d769eaa80bc7\": {\n          \"id\": \"121d348459004aefa284d769eaa80bc7\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"3c88f4e6d4d94b0d9857d3cf6203412c\": {\n          \"id\": \"3c88f4e6d4d94b0d9857d3cf6203412c\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Request complete message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Your request has been submitted. Here are the details:\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"3ad892d84e324da7bcfde7a737e34dfb\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"70cfdbc88e41480fb40aab496c953171\": {\n          \"id\": \"70cfdbc88e41480fb40aab496c953171\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Your request has been submitted. Here ar\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n\\n    var tableName = vaInputs.record_table;\\n    var recordId = vaInputs.record_id;\\n\\n    var title = '';\\n    var subtitle = '';\\n    var fields = [];\\n    var short_description = '';\\n    var gr;\\n\\n    if (vaVars.isTaskBasedTable)\\n        gr = new GlideRecord('task');\\n    else\\n        gr = new GlideRecord(tableName);\\n    gr.addQuery('sys_id', recordId);\\n    gr.query();\\n    var inputTableGR = new GlideRecord(tableName);\\n    title = inputTableGR.getClassDisplayValue();\\n    if (gr.next()) {\\n        if (gr.isValidField('task_effective_number'))\\n            subtitle = gr.getValue('task_effective_number').toString();\\n        else\\n            subtitle = gr.number.toString();\\n\\n        if (gr.isValidField('short_description')) {\\n            if (vaVars.isTaskBasedTable) {\\n                var checkCanRead = {checkRecordCanRead: false, checkElementCanRead: false};\\n                var shortDescriptionDetails = new global.TaskTableUtils().getTaskFieldDetails(gr, \\\"short_description\\\", checkCanRead);\\n                short_description = shortDescriptionDetails.displayValue;\\n            } else {\\n                short_description = gr.getDisplayValue('short_description').toString();\\n            }\\n            fields.push({\\n                \\\"fieldLabel\\\": gr.getElement('short_description').getLabel(),\\n                \\\"fieldValue\\\": short_description\\n            });\\n        }\\n        if (gr.isValidField('state')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gr.getElement('state').getLabel(),\\n                \\\"fieldValue\\\": gr.getDisplayValue('state').toString()\\n            });\\n        }\\n    }\\n\\n    var card_data = JSON.stringify({\\n        \\\"title\\\": title,\\n        \\\"subtitle\\\": subtitle,\\n        \\\"fields\\\": fields,\\n        \\\"url\\\": vaVars.recordLink.toString()\\n    });\\n    return vaSystem.renderCard(\\\"Card\\\", card_data);\\n})()\\n\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ad14a199bfc442e08d45683e27aa8742\": {\n          \"id\": \"ad14a199bfc442e08d45683e27aa8742\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Submitted record link\",\n          \"url\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaVars.recordLink}}\",\n                      \"displayValue\": \"Script VariablesrecordLink\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"label\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Click here to view the created record\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"header\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Your request has been submitted\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"single\",\n          \"introMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"listOfLinks\": \"\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"4c5fc78a9bc54e0c9293010b6c8e378c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0e3d646d372d4eed9e85ec13d8cecefb\",\n          \"target\": \"28ba5b2c879b4e1a90431a33c4cd55d9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e8c83cd5665248afa1eb9c63f386f261\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"28ba5b2c879b4e1a90431a33c4cd55d9\",\n          \"target\": \"121d348459004aefa284d769eaa80bc7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e1db12cd2985418c9bb0c2e52090c47a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"121d348459004aefa284d769eaa80bc7\",\n          \"target\": \"3c88f4e6d4d94b0d9857d3cf6203412c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.isTaskBasedTable;\\n})()\\n\"\n          },\n          \"label\": \"Task based table\"\n        },\n        {\n          \"id\": \"2aac0bc97c1c4717aa79a5eeb4616c84\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3c88f4e6d4d94b0d9857d3cf6203412c\",\n          \"target\": \"70cfdbc88e41480fb40aab496c953171\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3178a76e29e74f588b133a129b0e55da\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"70cfdbc88e41480fb40aab496c953171\",\n          \"target\": \"9e18d27b47eb47f9aec7cb7efbb36c79\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"18988e8f114c439b8d9353eeafca8058\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"121d348459004aefa284d769eaa80bc7\",\n          \"target\": \"ad14a199bfc442e08d45683e27aa8742\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.isTaskBasedTable;\\n})()\\n\"\n          },\n          \"label\": \"Non-Task based table\"\n        },\n        {\n          \"id\": \"3c0b518346fc4c859d2d75cc749b7ab7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ad14a199bfc442e08d45683e27aa8742\",\n          \"target\": \"9e18d27b47eb47f9aec7cb7efbb36c79\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"7ebfee8cf6f74300b3453e5d931c6f58\": {\n      \"id\": \"7ebfee8cf6f74300b3453e5d931c6f58\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return gs.getProperty('glide.servlet.uri', '');\\n})()\"\n      },\n      \"name\": \"baseUri\",\n      \"label\": \"baseUri\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"519d30b11b6a43fc9501c8e59ef88408\": {\n      \"id\": \"519d30b11b6a43fc9501c8e59ef88408\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"isTaskBasedTable\",\n      \"label\": \"isTaskBasedTable\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9cf332b2faa1463f9f729ab0e051d9cf\": {\n      \"id\": \"9cf332b2faa1463f9f729ab0e051d9cf\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    if (vaContext.deviceType == 'ios' || vaContext.deviceType == 'android')\\n        return 'mesp';\\n\\n    return gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url','sp');\\n})()\\n\"\n      },\n      \"name\": \"portalName\",\n      \"label\": \"portalName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4f8af35066ed48a0bf81b59806d64db7\": {\n      \"id\": \"4f8af35066ed48a0bf81b59806d64db7\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"recordLink\",\n      \"label\": \"recordLink\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d7b96080f33c4ee5bfc1557a0e2e826d\": {\n      \"id\": \"d7b96080f33c4ee5bfc1557a0e2e826d\",\n      \"name\": \"record_id\",\n      \"label\": \"Record_id\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"0e3d646d372d4eed9e85ec13d8cecefb\",\n      \"isHidden\": false\n    },\n    \"153e4009f75043cf8339739dc081e419\": {\n      \"id\": \"153e4009f75043cf8339739dc081e419\",\n      \"name\": \"record_table\",\n      \"label\": \"Record_table\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"0e3d646d372d4eed9e85ec13d8cecefb\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"4b01391550d30110fa9b861f7d83d7fa","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_design_topic_4b01391550d30110fa9b861f7d83d7fa","sys_updated_by":"admin","sys_created_on":"2022-05-05 14:33:26","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"f7bfb7a0a9f24422950e949230b608ea\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"f7bfb7a0a9f24422950e949230b608ea\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"f7bfb7a0a9f24422950e949230b608ea\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"0e3d646d372d4eed9e85ec13d8cecefb\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"9e18d27b47eb47f9aec7cb7efbb36c79\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var tableName = vaInputs.record_table;\\n    var recordId = vaInputs.record_id;\\n\\n    var tableUtils = new TableUtils(tableName);\\n    vaVars.isTaskBasedTable = (tableUtils.getAbsoluteBase() == 'task');\\n\\n    var pageId = 'form';\\n    if (vaVars.isTaskBasedTable)\\n        pageId = 'ticket';\\n\\n    var link = '';\\n    var screenId = '';\\n    if (vaVars.portalName === 'mesp') {\\n        var mobileDLink = new global.MobileDeepLinkGenerator('request');\\n        if (tableName == 'sc_req_item')\\n            screenId = '7516f9d787232300e0ef0cf888cb0b4d';\\n        else if (tableName == 'sc_request')\\n            screenId = '276dd3edb79033001befcd58de11a9c7';\\n        else if (tableName == 'incident')\\n            screenId = 'ebb94d9c0f2033001befa68ca8767e4e';\\n        else\\n            screenId = 'd39eb2db87772300e0ef0cf888cb0bcb';\\n\\n        link = mobileDLink.getFormScreenLink(screenId, tableName, recordId);\\n    } else\\n        link = vaSystem.applyLinkTemplate(recordId, tableName);\\n    vaVars.recordLink = link;\\n})()\\n\",\"id\":\"28ba5b2c879b4e1a90431a33c4cd55d9\",\"name\":\"Process end state details\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Task based table\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.isTaskBasedTable;\\n})()\\n\"},\"id\":\"c8c46c8d6e7540318c6e5f6f2a83504c\",\"name\":\"Task based table\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Non-Task based table\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.isTaskBasedTable;\\n})()\\n\"},\"id\":\"7afd9e8f94f84458a1546e1730c3ae01\",\"name\":\"Non-Task based table\",\"expert_mode\":false}],\"id\":\"121d348459004aefa284d769eaa80bc7\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Your request has been submitted. Here are the details:\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"3c88f4e6d4d94b0d9857d3cf6203412c\",\"name\":\"Request complete message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"70cfdbc88e41480fb40aab496c953171\",\"name\":\"Your request has been submitted. Here ar\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n\\n    var tableName = vaInputs.record_table;\\n    var recordId = vaInputs.record_id;\\n\\n    var title = '';\\n    var subtitle = '';\\n    var fields = [];\\n    var short_description = '';\\n    var gr;\\n\\n    if (vaVars.isTaskBasedTable)\\n        gr = new GlideRecord('task');\\n    else\\n        gr = new GlideRecord(tableName);\\n    gr.addQuery('sys_id', recordId);\\n    gr.query();\\n    var inputTableGR = new GlideRecord(tableName);\\n    title = inputTableGR.getClassDisplayValue();\\n    if (gr.next()) {\\n        if (gr.isValidField('task_effective_number'))\\n            subtitle = gr.getValue('task_effective_number').toString();\\n        else\\n            subtitle = gr.number.toString();\\n\\n        if (gr.isValidField('short_description')) {\\n            if (vaVars.isTaskBasedTable) {\\n                var checkCanRead = {checkRecordCanRead: false, checkElementCanRead: false};\\n                var shortDescriptionDetails = new global.TaskTableUtils().getTaskFieldDetails(gr, \\\"short_description\\\", checkCanRead);\\n                short_description = shortDescriptionDetails.displayValue;\\n            } else {\\n                short_description = gr.getDisplayValue('short_description').toString();\\n            }\\n            fields.push({\\n                \\\"fieldLabel\\\": gr.getElement('short_description').getLabel(),\\n                \\\"fieldValue\\\": short_description\\n            });\\n        }\\n        if (gr.isValidField('state')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gr.getElement('state').getLabel(),\\n                \\\"fieldValue\\\": gr.getDisplayValue('state').toString()\\n            });\\n        }\\n    }\\n\\n    var card_data = JSON.stringify({\\n        \\\"title\\\": title,\\n        \\\"subtitle\\\": subtitle,\\n        \\\"fields\\\": fields,\\n        \\\"url\\\": vaVars.recordLink.toString()\\n    });\\n    return vaSystem.renderCard(\\\"Card\\\", card_data);\\n})()\\n\"},\"secure\":false},{\"type\":\"LinkOutputPrompt\",\"header\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Your request has been submitted\\\", vaContext.getRequesterLang())\"},\"label\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Click here to view the created record\\\", vaContext.getRequesterLang())\"},\"url\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.recordLink}}\"},\"link_type\":\"single\",\"multi_link_script\":\"\",\"id\":\"ad14a199bfc442e08d45683e27aa8742\",\"name\":\"Submitted record link\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"0e3d646d372d4eed9e85ec13d8cecefb\",\"target_node_id\":\"28ba5b2c879b4e1a90431a33c4cd55d9\",\"id\":\"4c5fc78a9bc54e0c9293010b6c8e378c\"},{\"type\":\"Edge\",\"source_node_id\":\"28ba5b2c879b4e1a90431a33c4cd55d9\",\"target_node_id\":\"121d348459004aefa284d769eaa80bc7\",\"id\":\"e8c83cd5665248afa1eb9c63f386f261\"},{\"type\":\"Edge\",\"source_node_id\":\"121d348459004aefa284d769eaa80bc7\",\"target_node_id\":\"3c88f4e6d4d94b0d9857d3cf6203412c\",\"branch_id\":\"c8c46c8d6e7540318c6e5f6f2a83504c\",\"id\":\"e1db12cd2985418c9bb0c2e52090c47a\",\"name\":\"c8c46c8d6e7540318c6e5f6f2a83504c\"},{\"type\":\"Edge\",\"source_node_id\":\"3c88f4e6d4d94b0d9857d3cf6203412c\",\"target_node_id\":\"70cfdbc88e41480fb40aab496c953171\",\"id\":\"2aac0bc97c1c4717aa79a5eeb4616c84\"},{\"type\":\"Edge\",\"source_node_id\":\"70cfdbc88e41480fb40aab496c953171\",\"target_node_id\":\"9e18d27b47eb47f9aec7cb7efbb36c79\",\"id\":\"3178a76e29e74f588b133a129b0e55da\"},{\"type\":\"Edge\",\"source_node_id\":\"121d348459004aefa284d769eaa80bc7\",\"target_node_id\":\"ad14a199bfc442e08d45683e27aa8742\",\"branch_id\":\"7afd9e8f94f84458a1546e1730c3ae01\",\"id\":\"18988e8f114c439b8d9353eeafca8058\",\"name\":\"7afd9e8f94f84458a1546e1730c3ae01\"},{\"type\":\"Edge\",\"source_node_id\":\"ad14a199bfc442e08d45683e27aa8742\",\"target_node_id\":\"9e18d27b47eb47f9aec7cb7efbb36c79\",\"id\":\"3c0b518346fc4c859d2d75cc749b7ab7\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"baseUri\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getProperty('glide.servlet.uri', '');\\n})()\"},\"list\":false,\"id\":\"7ebfee8cf6f74300b3453e5d931c6f58\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"isTaskBasedTable\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"519d30b11b6a43fc9501c8e59ef88408\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"portalName\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaContext.deviceType == 'ios' || vaContext.deviceType == 'android')\\n        return 'mesp';\\n\\n    return gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url','sp');\\n})()\\n\"},\"list\":false,\"id\":\"9cf332b2faa1463f9f729ab0e051d9cf\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"recordLink\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return '';\\n})()\\n\"},\"list\":false,\"id\":\"4f8af35066ed48a0bf81b59806d64db7\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"record_id\",\"list\":false,\"id\":\"d7b96080f33c4ee5bfc1557a0e2e826d\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"record_table\",\"list\":false,\"id\":\"153e4009f75043cf8339739dc081e419\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"record_id\",\"label\":\"record_id\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"d7b96080f33c4ee5bfc1557a0e2e826d\",\"type\":\"String\"},{\"name\":\"record_table\",\"label\":\"record_table\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"153e4009f75043cf8339739dc081e419\",\"type\":\"String\"}],\"return-values-mapping\":[]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"4aef659d50930110fa9b861f7d83d769\",\"name\":\"End state card for Catalog Request\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"description\":\"Displays details of the created catalog request\",\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"library\":true,\"csTopicId\":\"0b01391550d30110fa9b861f7d83d7f6\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"End state card for Catalog Request","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"4aef659d50930110fa9b861f7d83d769","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/0b01391550d30110fa9b861f7d83d7f6","value":"0b01391550d30110fa9b861f7d83d7f6"},"sys_created_by":"maint","sys_policy":""},{"sys_mod_count":"41","sys_updated_on":"2022-09-02 09:26:00","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"5eb7936e8dcc4f50ad733deb0614cbac\": {\n          \"id\": \"5eb7936e8dcc4f50ad733deb0614cbac\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"0bf3054ca10545998d3e712db776c858\": {\n          \"id\": \"0bf3054ca10545998d3e712db776c858\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"86ca2cdb206c4d2fa6dfcacd8fd2883b\": {\n          \"id\": \"86ca2cdb206c4d2fa6dfcacd8fd2883b\",\n          \"name\": \"Connect To Agent\",\n          \"script\": \"(function execute() {\\n    vaSystem.connectToAgent();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"1334d05c3c1148caa2fa2060bf408d7d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5eb7936e8dcc4f50ad733deb0614cbac\",\n          \"target\": \"86ca2cdb206c4d2fa6dfcacd8fd2883b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1d75ef54e6034402b28a090cddc283fe\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"86ca2cdb206c4d2fa6dfcacd8fd2883b\",\n          \"target\": \"0bf3054ca10545998d3e712db776c858\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"90178d4516494d3c82f1a08081cdc6ef\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"90178d4516494d3c82f1a08081cdc6ef\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"4e2ee85053130010cf8cddeeff7b12c2","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_4e2ee85053130010cf8cddeeff7b12c2","sys_updated_by":"admin","sys_created_on":"2020-02-26 22:22:40","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"ff5de3f57faf4e61a974a5492994c3f2\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"ff5de3f57faf4e61a974a5492994c3f2\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"ff5de3f57faf4e61a974a5492994c3f2\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"5eb7936e8dcc4f50ad733deb0614cbac\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"0bf3054ca10545998d3e712db776c858\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.connectToAgent();\\n})()\\n\",\"id\":\"86ca2cdb206c4d2fa6dfcacd8fd2883b\",\"name\":\"Connect To Agent\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"5eb7936e8dcc4f50ad733deb0614cbac\",\"target_node_id\":\"86ca2cdb206c4d2fa6dfcacd8fd2883b\",\"id\":\"1334d05c3c1148caa2fa2060bf408d7d\"},{\"type\":\"Edge\",\"source_node_id\":\"86ca2cdb206c4d2fa6dfcacd8fd2883b\",\"target_node_id\":\"0bf3054ca10545998d3e712db776c858\",\"id\":\"1d75ef54e6034402b28a090cddc283fe\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"90178d4516494d3c82f1a08081cdc6ef\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (typeof vaContext === \\\"undefined\\\")\\n        return true;\\n\\n    if(vaContext.disable_live_agent == \\\"true\\\") \\n        return false;\\n        \\n    return true;\\n\\n})()\\n\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"SETUP_TOPIC\",\"channels\":[],\"id\":\"212ee85053130010cf8cddeeff7b1280\",\"name\":\"Live Agent Support.\",\"key_phrases\":[\"agent\",\"live agent\",\"Live Agent Support\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":false,\"csTopicId\":\"ce2ee85053130010cf8cddeeff7b12bf\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Live Agent Support.","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"212ee85053130010cf8cddeeff7b1280","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/ce2ee85053130010cf8cddeeff7b12bf","value":"ce2ee85053130010cf8cddeeff7b12bf"},"sys_created_by":"admin","sys_policy":"read"},{"sys_mod_count":"6","sys_updated_on":"2021-08-09 12:36:47","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"50e49124537310100e99ddeeff7b12b4","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9cc37b3704b52210559073c06a02f781","value":"9cc37b3704b52210559073c06a02f781"},"sys_update_name":"sys_cb_design_topic_50e49124537310100e99ddeeff7b12b4","sys_updated_by":"admin","sys_created_on":"2020-10-08 12:32:53","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"cefd20bcfb234228aeddbec571408f2e\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"cefd20bcfb234228aeddbec571408f2e\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"cefd20bcfb234228aeddbec571408f2e\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\"},\"id\":\"90552af13eed411b860f873bcc5e721c\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n})()\\n\"},\"id\":\"0f406d45b8284b8aa1a13008f226377b\",\"name\":\"End\"},{\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"efd74460a9c045d5ad45bc59bb1ffe02\",\"name\":\"Confirmation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\\n\"},\"variable_id\":\"39f03c55798643f4a639d2faeb608e85\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.unlink_account.confirmation_message'), vaContext.getRequesterLang());\\n})()\\n\\n\"},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"Decision\",\"name\":\"Unlink account?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"confirmation=1\"},\"id\":\"964bd6115d934dbea37d1649a7d159e4\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"confirmation=0\"},\"id\":\"18343d5b0d8f493fb3848d0df5180959\",\"name\":\"No\"}],\"id\":\"b3674f2d65cf4df4aeae2c9ed9fc1901\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var x = new sn_cs_adapter.VaLinkAccountUtil();\\n    vaVars._unlink_successful = x.unLinkUserAccount(vaVars.global_provider_auth, vaContext.providerUserId, vaVars.global_channel_id);\\n})()\\n\",\"id\":\"2064f1aa24e04481a91205ed7666971a\",\"name\":\"Unlink\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Unlink Successful\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars._unlink_successful;\\n})()\\n\"},\"id\":\"ad91299f619743b8934c3b12af86f364\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._unlink_successful;\\n})()\\n\"},\"id\":\"adc77619d0524f1795c52a6fff7af0ad\",\"name\":\"Yes\"}],\"id\":\"0076f9fb85f04e8fb1aa0d0b71c42a74\",\"goal_id\":\"primary\"},{\"type\":\"OutputPrompt\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.unlinking_account.message'), vaContext.getRequesterLang());\\n})()\"},\"id\":\"efb96d6ff78249dcaeceb7187796317c\",\"name\":\"Unlink message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.endConversation();\\n})()\\n\",\"id\":\"66e49ba2d3e643a2981f714c2192f5ee\",\"name\":\"End Conversation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var cafContextualUtility = new CAFContextualUtility();\\n    cafContextualUtility.postProcess();   \\n})()\",\"id\":\"904b4e2b428d4ed0afdea9261587f402\",\"name\":\"Post processing\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"OutputPrompt\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\"},\"id\":\"4647c7bbd4d34a48bf49542110b0ae8d\",\"name\":\"Resume conversation message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n   vaSystem.expireNotificationOnUnsubscribe();\\n})()\\n\",\"id\":\"5d0a665e4883433bbd2b56164a5502f7\",\"name\":\"Clear Actionable Notifications\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Active conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_ca_keyword_as_default_topic;\\n})()\"},\"id\":\"2619d7e08bd0494c905551df954a1540\",\"name\":\"Active conversation\"},{\"type\":\"Branch\",\"label\":\"No conversation\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_ca_keyword_as_default_topic;\\n})()\"},\"id\":\"770db2ec2ae240ef9386d67a20071660\",\"name\":\"No conversation\"}],\"id\":\"a67ea973469f480fb13e14ee21d11561\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_topic_switch = true;\\n    vaVars.global_clicked_value = 'No';\\n    vaSystem.isContextualActionApplicable('Help', vaContext.providerAppId, vaContext.providerUserId); \\n    vaSystem.switchTopic('b20fd17b532210105498ddeeff7b12b7');\\n})()\",\"id\":\"06673f607b2449008b44c9d4c5be3955\",\"name\":\"Switch to help topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"904b4e2b428d4ed0afdea9261587f402\",\"target_node_id\":\"0f406d45b8284b8aa1a13008f226377b\",\"id\":\"d5c61c54685d4795afbc783c3df8c398\"},{\"type\":\"Edge\",\"source_node_id\":\"90552af13eed411b860f873bcc5e721c\",\"target_node_id\":\"efd74460a9c045d5ad45bc59bb1ffe02\",\"id\":\"a85970aceb334ec3a5aaa53d708848dc\"},{\"type\":\"Edge\",\"source_node_id\":\"efd74460a9c045d5ad45bc59bb1ffe02\",\"target_node_id\":\"b3674f2d65cf4df4aeae2c9ed9fc1901\",\"id\":\"ed813c73ab9f49a5acc59375c59c761f\"},{\"type\":\"Edge\",\"source_node_id\":\"b3674f2d65cf4df4aeae2c9ed9fc1901\",\"target_node_id\":\"2064f1aa24e04481a91205ed7666971a\",\"branch_id\":\"964bd6115d934dbea37d1649a7d159e4\",\"id\":\"f25792c1d05e46e6a1095f875b20d543\",\"name\":\"964bd6115d934dbea37d1649a7d159e4\"},{\"type\":\"Edge\",\"source_node_id\":\"2064f1aa24e04481a91205ed7666971a\",\"target_node_id\":\"0076f9fb85f04e8fb1aa0d0b71c42a74\",\"id\":\"32faad8b0c30459191a8ffefdb6d58b9\"},{\"type\":\"Edge\",\"source_node_id\":\"efb96d6ff78249dcaeceb7187796317c\",\"target_node_id\":\"66e49ba2d3e643a2981f714c2192f5ee\",\"id\":\"62e270f1abcb4ccaad6a378f5e22ca80\"},{\"type\":\"Edge\",\"source_node_id\":\"66e49ba2d3e643a2981f714c2192f5ee\",\"target_node_id\":\"0f406d45b8284b8aa1a13008f226377b\",\"id\":\"efc511a41303441aa6c495278392456a\"},{\"type\":\"Edge\",\"source_node_id\":\"0076f9fb85f04e8fb1aa0d0b71c42a74\",\"target_node_id\":\"904b4e2b428d4ed0afdea9261587f402\",\"branch_id\":\"ad91299f619743b8934c3b12af86f364\",\"id\":\"f190b006112c4ff9af0edceeaedc27fc\",\"name\":\"ad91299f619743b8934c3b12af86f364\"},{\"type\":\"Edge\",\"source_node_id\":\"4647c7bbd4d34a48bf49542110b0ae8d\",\"target_node_id\":\"904b4e2b428d4ed0afdea9261587f402\",\"id\":\"5bea0fbcf7924f698ccc65f2803f9be2\"},{\"type\":\"Edge\",\"source_node_id\":\"0076f9fb85f04e8fb1aa0d0b71c42a74\",\"target_node_id\":\"5d0a665e4883433bbd2b56164a5502f7\",\"branch_id\":\"adc77619d0524f1795c52a6fff7af0ad\",\"id\":\"044ce5494db2481985954797a3f4a90c\",\"name\":\"adc77619d0524f1795c52a6fff7af0ad\"},{\"type\":\"Edge\",\"source_node_id\":\"5d0a665e4883433bbd2b56164a5502f7\",\"target_node_id\":\"efb96d6ff78249dcaeceb7187796317c\",\"id\":\"9f847480f94f47ae9e1b2e46c1097403\"},{\"type\":\"Edge\",\"source_node_id\":\"b3674f2d65cf4df4aeae2c9ed9fc1901\",\"target_node_id\":\"a67ea973469f480fb13e14ee21d11561\",\"branch_id\":\"18343d5b0d8f493fb3848d0df5180959\",\"id\":\"8ec62b88a8194043be1b8bf4112ad4dc\",\"name\":\"18343d5b0d8f493fb3848d0df5180959\"},{\"type\":\"Edge\",\"source_node_id\":\"a67ea973469f480fb13e14ee21d11561\",\"target_node_id\":\"4647c7bbd4d34a48bf49542110b0ae8d\",\"branch_id\":\"2619d7e08bd0494c905551df954a1540\",\"id\":\"30cc5f2856aa498bbc67641f52eb8c11\",\"name\":\"2619d7e08bd0494c905551df954a1540\"},{\"type\":\"Edge\",\"source_node_id\":\"a67ea973469f480fb13e14ee21d11561\",\"target_node_id\":\"06673f607b2449008b44c9d4c5be3955\",\"branch_id\":\"770db2ec2ae240ef9386d67a20071660\",\"id\":\"b19e05ba51004885bdd00cd226a193f2\",\"name\":\"770db2ec2ae240ef9386d67a20071660\"},{\"type\":\"Edge\",\"source_node_id\":\"06673f607b2449008b44c9d4c5be3955\",\"target_node_id\":\"904b4e2b428d4ed0afdea9261587f402\",\"id\":\"3b30a819bf3c40eba76797fa7bbb63be\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_unlink_successful\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"023608c00230447993273f7423fbf6c2\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[{\"name\":\"Yes\",\"element\":\"1\"},{\"name\":\"No\",\"element\":\"0\"}],\"id\":\"39f03c55798643f4a639d2faeb608e85\",\"name\":\"confirmation\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"a13179d0533210105498ddeeff7b12b5\",\"name\":\"_logout_\",\"key_phrases\":[\"_logout_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_logout_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"a13179d0533210105498ddeeff7b12b5","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/1d44fd14533210105498ddeeff7b1221","value":"1d44fd14533210105498ddeeff7b1221"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"4","sys_updated_on":"2023-09-05 14:54:10","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.47\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"ce45834ee2c94a4dbec5eac8676fa5e1\": {\n          \"id\": \"ce45834ee2c94a4dbec5eac8676fa5e1\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"83bace1414c04ac88e856feb1e84d6f6\",\n              \"name\": \"userId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"f0aa6a970c494845ab48560f3a1041e0\",\n              \"name\": \"verificationId\",\n              \"referenced\": true,\n              \"required\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"c770be2d81bd4e44b62e6fd82268dc5a\",\n              \"name\": \"contextId\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"required\": true\n            }\n          ],\n          \"variableIds\": [\n            \"83bace1414c04ac88e856feb1e84d6f6\",\n            \"f0aa6a970c494845ab48560f3a1041e0\",\n            \"c770be2d81bd4e44b62e6fd82268dc5a\"\n          ]\n        },\n        \"07aed834619a4e7783e2b0a5c10b98f6\": {\n          \"id\": \"07aed834619a4e7783e2b0a5c10b98f6\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"Status\",\n              \"value\": \"(function execute() {\\n    var response = vaVars.input_validation_error ? 'Error' : 'Success';\\n    return response;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=decd38545382011017c3ddeeff7b127f%5Ecalling_cs_topic_idIN0902a7d2530333006e61ddeeff7b1250,2578d02eebab1110da1861c59c5228e1\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"error_code\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.error_code}}\",\n                        \"displayValue\": \"Script Variableserror_code\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": false\n            }\n          ]\n        },\n        \"1c3800ef0b694affb79c55cbdc03ba00\": {\n          \"id\": \"1c3800ef0b694affb79c55cbdc03ba00\",\n          \"name\": \"Validate Inputs\",\n          \"script\": \"(function execute() {\\n    var SOFTPIN_VERIFICATION_TYPE = 'a67585845302011017c3ddeeff7b1267';\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId = vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n\\n    //Validate verification and type\\n    var passwordResetScopedUtil = new PasswordResetScopedUtil();\\n    var verification = passwordResetScopedUtil.getVerificationById(verificationId);\\n    if (gs.nil(verificationId) ||\\n        !verification.exists() ||\\n        verification.getVerificationTypeId() != SOFTPIN_VERIFICATION_TYPE) {\\n        vaVars.input_validation_error = true; // Not a valid verification type\\n        return;\\n    }\\n\\n    //Check for valid context_id\\n    if (gs.nil(contextId)) {\\n        vaVars.input_validation_error = true;\\n        return;\\n    }\\n\\n     //Check for valid user\\n    var userInfo = GlideUser.getUserByID(userId);\\n    if (gs.nil(userId) ||\\n        !userInfo.exists()) {\\n        vaVars.user_validation_error = true; // User Not Found\\n    }\\n\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"de09aba86bc0410ba6af149d57952e6a\": {\n          \"id\": \"de09aba86bc0410ba6af149d57952e6a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Input Validation Check\"\n        },\n        \"bf4a8ffe77dc48fb80c288e59ef06d7b\": {\n          \"id\": \"bf4a8ffe77dc48fb80c288e59ef06d7b\",\n          \"name\": \"Get SoftPIN Question\",\n          \"script\": \"(function execute() {\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId = vaInputs.verificationid.getValue();\\n\\n    //Get question for the verification\\n    var passwordResetScopedUtil = new global.PasswordResetScopedUtil();\\n    var enrollmentMgr = new SNC.PwdEnrollmentManager();\\n    vaVars.softpin_question = passwordResetScopedUtil.getSoftPINQuestion(verificationId);\\n\\n    //Get salt\\n    if(vaVars.user_validation_error) {\\n         vaVars.salt = passwordResetScopedUtil.getRandomSalt();\\n    } else {\\n        vaVars.salt = new SNC.PwdSoftPINManager().getSaltByUserAndVerificationId(userId, verificationId);\\n\\n        if(JSUtil.nil(vaVars.salt)) { // User not enrolled\\n            vaVars.salt = passwordResetScopedUtil.getRandomSalt();\\n            vaVars.user_validation_error = true; \\n        }\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"109ea03f67ea4e718d8f355089e514e6\": {\n          \"id\": \"109ea03f67ea4e718d8f355089e514e6\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"SoftPIN input\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.softpin_question;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"a2853cc02a384d42b2fd4dd5dc129237\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d7aaada7ec634643874ff207142cb894\": {\n          \"id\": \"d7aaada7ec634643874ff207142cb894\",\n          \"name\": \"Validate User provided PIN\",\n          \"script\": \"(function execute() {\\n    if(vaVars.user_validation_error) {\\n        vaVars.input_validation_error = true;\\n        vaVars.error_code = 40000; //Invalid Soft PIN\\n        return;\\n    }\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId = vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n    var hashedSoftPIN = vaInputs.softpin_input.getValue();\\n    var requestId = '';\\n    var requestExists = new SNC.PwdTrackingManager().requestExists(contextId); //Move to verify processor\\n    if (requestExists)\\n        requestId = contextId;\\n\\n    var userInputs = [];\\n    userInputs.push({ key: 'sysparm_softpin', value: hashedSoftPIN });\\n    userInputs.push({ key: 'isEncrypted', value: true });\\n    userInputs.push({ key: 'request_id', value: requestId });\\n    userInputs.push({ key: 'context_id', value: contextId });\\n\\n    var passwordResetScopedUtil = new global.PasswordResetScopedUtil();\\n    var verificationResult = passwordResetScopedUtil.verify(userId, '', verificationId, requestId, userInputs);\\n    if (!verificationResult) {\\n        vaVars.input_validation_error = true;\\n        vaVars.error_code = 40000; //Invalid Soft PIN\\n        var pwdSoftpinMgr = new SNC.PwdSoftPINManager();\\n        if(pwdSoftpinMgr.isPinExpirationEnabled() && pwdSoftpinMgr.isPinExpired(userId, verificationId, hashedSoftPIN, true)) {\\n                vaVars.error_code = 40001; //Expired Soft PIN\\n        }\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"55bb2a52a7f6420ab7b990b47c4a6887\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bf4a8ffe77dc48fb80c288e59ef06d7b\",\n          \"target\": \"109ea03f67ea4e718d8f355089e514e6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0b6ea5c7a9114fe393d56f442ee75105\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d7aaada7ec634643874ff207142cb894\",\n          \"target\": \"07aed834619a4e7783e2b0a5c10b98f6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"90b1017bcc3a416ea1f78840343b8820\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ce45834ee2c94a4dbec5eac8676fa5e1\",\n          \"target\": \"1c3800ef0b694affb79c55cbdc03ba00\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c2bd1e97f692409abd878d272b15d0a9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1c3800ef0b694affb79c55cbdc03ba00\",\n          \"target\": \"de09aba86bc0410ba6af149d57952e6a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"37f711b2df314210b4957dc93cb61c80\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"de09aba86bc0410ba6af149d57952e6a\",\n          \"target\": \"07aed834619a4e7783e2b0a5c10b98f6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.input_validation_error;\\n})()\\n\"\n          },\n          \"label\": \"Invalid Inputs\"\n        },\n        {\n          \"id\": \"88efaab428224a1e80b79a02aec2ba0c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"de09aba86bc0410ba6af149d57952e6a\",\n          \"target\": \"bf4a8ffe77dc48fb80c288e59ef06d7b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.input_validation_error;\\n})()\\n\"\n          },\n          \"label\": \"Valid Inputs\"\n        },\n        {\n          \"id\": \"ca28351d9661403486e055ec429e2509\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"109ea03f67ea4e718d8f355089e514e6\",\n          \"target\": \"d7aaada7ec634643874ff207142cb894\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"501e1d0b94504c74b61d99a14906a21d\": {\n      \"id\": \"501e1d0b94504c74b61d99a14906a21d\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return false;\\n})()\\n\"\n      },\n      \"name\": \"input_validation_error\",\n      \"label\": \"input_validation_error\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"8cec1fb2f0254ad5bb58921c6e3e79fc\": {\n      \"id\": \"8cec1fb2f0254ad5bb58921c6e3e79fc\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"softpin_question\",\n      \"label\": \"softpin_question\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f98bab99cd78476e8c9a1431f47fb5ca\": {\n      \"id\": \"f98bab99cd78476e8c9a1431f47fb5ca\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"is_user_enrolled\",\n      \"label\": \"is_user_enrolled\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a2853cc02a384d42b2fd4dd5dc129237\": {\n      \"id\": \"a2853cc02a384d42b2fd4dd5dc129237\",\n      \"name\": \"softpin_input\",\n      \"label\": \"SoftPIN Input\",\n      \"varType\": \"string\",\n      \"secure\": true,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"(function execute() {\\n    return vaVars.salt;\\n})()\\n\",\n        \"mode\": \"script\"\n      },\n      \"nodeId\": \"109ea03f67ea4e718d8f355089e514e6\",\n      \"isHidden\": false\n    },\n    \"c585a84423604129996ce1bc719c0358\": {\n      \"id\": \"c585a84423604129996ce1bc719c0358\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"salt\",\n      \"label\": \"salt\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"83bace1414c04ac88e856feb1e84d6f6\": {\n      \"id\": \"83bace1414c04ac88e856feb1e84d6f6\",\n      \"name\": \"userid\",\n      \"label\": \"UserId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"ce45834ee2c94a4dbec5eac8676fa5e1\",\n      \"isHidden\": false\n    },\n    \"f0aa6a970c494845ab48560f3a1041e0\": {\n      \"id\": \"f0aa6a970c494845ab48560f3a1041e0\",\n      \"name\": \"verificationid\",\n      \"label\": \"VerificationId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"ce45834ee2c94a4dbec5eac8676fa5e1\",\n      \"isHidden\": false\n    },\n    \"c770be2d81bd4e44b62e6fd82268dc5a\": {\n      \"id\": \"c770be2d81bd4e44b62e6fd82268dc5a\",\n      \"name\": \"contextid\",\n      \"label\": \"ContextId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"ce45834ee2c94a4dbec5eac8676fa5e1\",\n      \"isHidden\": false\n    },\n    \"6e1ddb3cdfc143598b88c9d7fb795f7b\": {\n      \"id\": \"6e1ddb3cdfc143598b88c9d7fb795f7b\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return false;\\n})()\\n\"\n      },\n      \"name\": \"user_validation_error\",\n      \"label\": \"user_validation_error\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"00024f4e87af4d0db560c574d8f1bcb3\": {\n      \"id\": \"00024f4e87af4d0db560c574d8f1bcb3\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"error_code\",\n      \"label\": \"error_code\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"52cd38545382011017c3ddeeff7b1286","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sys_cb_design_topic_52cd38545382011017c3ddeeff7b1286","sys_updated_by":"admin","sys_created_on":"2022-03-01 04:57:05","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"3ec2f026fe4f4c40afb5bda1172bba93\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"3ec2f026fe4f4c40afb5bda1172bba93\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"3ec2f026fe4f4c40afb5bda1172bba93\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"ce45834ee2c94a4dbec5eac8676fa5e1\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"07aed834619a4e7783e2b0a5c10b98f6\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var SOFTPIN_VERIFICATION_TYPE = 'a67585845302011017c3ddeeff7b1267';\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId = vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n\\n    //Validate verification and type\\n    var passwordResetScopedUtil = new PasswordResetScopedUtil();\\n    var verification = passwordResetScopedUtil.getVerificationById(verificationId);\\n    if (gs.nil(verificationId) ||\\n        !verification.exists() ||\\n        verification.getVerificationTypeId() != SOFTPIN_VERIFICATION_TYPE) {\\n        vaVars.input_validation_error = true; // Not a valid verification type\\n        return;\\n    }\\n\\n    //Check for valid context_id\\n    if (gs.nil(contextId)) {\\n        vaVars.input_validation_error = true;\\n        return;\\n    }\\n\\n     //Check for valid user\\n    var userInfo = GlideUser.getUserByID(userId);\\n    if (gs.nil(userId) ||\\n        !userInfo.exists()) {\\n        vaVars.user_validation_error = true; // User Not Found\\n    }\\n\\n})()\\n\",\"id\":\"1c3800ef0b694affb79c55cbdc03ba00\",\"name\":\"Validate Inputs\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Input Validation Check\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Invalid Inputs\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.input_validation_error;\\n})()\\n\"},\"id\":\"1ab25bc56fe5408dbaff9f3a687e1c21\",\"name\":\"Invalid Inputs\"},{\"type\":\"Branch\",\"label\":\"Valid Inputs\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.input_validation_error;\\n})()\\n\"},\"id\":\"26782cd3dd6147849ce620ec75c32b6e\",\"name\":\"Valid Inputs\"}],\"id\":\"de09aba86bc0410ba6af149d57952e6a\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId = vaInputs.verificationid.getValue();\\n\\n    //Get question for the verification\\n    var passwordResetScopedUtil = new global.PasswordResetScopedUtil();\\n    var enrollmentMgr = new SNC.PwdEnrollmentManager();\\n    vaVars.softpin_question = passwordResetScopedUtil.getSoftPINQuestion(verificationId);\\n\\n    //Get salt\\n    if(vaVars.user_validation_error) {\\n         vaVars.salt = passwordResetScopedUtil.getRandomSalt();\\n    } else {\\n        vaVars.salt = new SNC.PwdSoftPINManager().getSaltByUserAndVerificationId(userId, verificationId);\\n\\n        if(JSUtil.nil(vaVars.salt)) { // User not enrolled\\n            vaVars.salt = passwordResetScopedUtil.getRandomSalt();\\n            vaVars.user_validation_error = true; \\n        }\\n    }\\n})()\\n\",\"id\":\"bf4a8ffe77dc48fb80c288e59ef06d7b\",\"name\":\"Get SoftPIN Question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"InputPrompt\",\"variable_id\":\"a2853cc02a384d42b2fd4dd5dc129237\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.softpin_question;\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"109ea03f67ea4e718d8f355089e514e6\",\"name\":\"SoftPIN input\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if(vaVars.user_validation_error) {\\n        vaVars.input_validation_error = true;\\n        vaVars.error_code = 40000; //Invalid Soft PIN\\n        return;\\n    }\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId = vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n    var hashedSoftPIN = vaInputs.softpin_input.getValue();\\n    var requestId = '';\\n    var requestExists = new SNC.PwdTrackingManager().requestExists(contextId); //Move to verify processor\\n    if (requestExists)\\n        requestId = contextId;\\n\\n    var userInputs = [];\\n    userInputs.push({ key: 'sysparm_softpin', value: hashedSoftPIN });\\n    userInputs.push({ key: 'isEncrypted', value: true });\\n    userInputs.push({ key: 'request_id', value: requestId });\\n    userInputs.push({ key: 'context_id', value: contextId });\\n\\n    var passwordResetScopedUtil = new global.PasswordResetScopedUtil();\\n    var verificationResult = passwordResetScopedUtil.verify(userId, '', verificationId, requestId, userInputs);\\n    if (!verificationResult) {\\n        vaVars.input_validation_error = true;\\n        vaVars.error_code = 40000; //Invalid Soft PIN\\n        var pwdSoftpinMgr = new SNC.PwdSoftPINManager();\\n        if(pwdSoftpinMgr.isPinExpirationEnabled() && pwdSoftpinMgr.isPinExpired(userId, verificationId, hashedSoftPIN, true)) {\\n                vaVars.error_code = 40001; //Expired Soft PIN\\n        }\\n    }\\n})()\",\"id\":\"d7aaada7ec634643874ff207142cb894\",\"name\":\"Validate User provided PIN\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"bf4a8ffe77dc48fb80c288e59ef06d7b\",\"target_node_id\":\"109ea03f67ea4e718d8f355089e514e6\",\"id\":\"55bb2a52a7f6420ab7b990b47c4a6887\"},{\"type\":\"Edge\",\"source_node_id\":\"d7aaada7ec634643874ff207142cb894\",\"target_node_id\":\"07aed834619a4e7783e2b0a5c10b98f6\",\"id\":\"0b6ea5c7a9114fe393d56f442ee75105\"},{\"type\":\"Edge\",\"source_node_id\":\"ce45834ee2c94a4dbec5eac8676fa5e1\",\"target_node_id\":\"1c3800ef0b694affb79c55cbdc03ba00\",\"id\":\"90b1017bcc3a416ea1f78840343b8820\"},{\"type\":\"Edge\",\"source_node_id\":\"1c3800ef0b694affb79c55cbdc03ba00\",\"target_node_id\":\"de09aba86bc0410ba6af149d57952e6a\",\"id\":\"c2bd1e97f692409abd878d272b15d0a9\"},{\"type\":\"Edge\",\"source_node_id\":\"de09aba86bc0410ba6af149d57952e6a\",\"target_node_id\":\"07aed834619a4e7783e2b0a5c10b98f6\",\"branch_id\":\"1ab25bc56fe5408dbaff9f3a687e1c21\",\"id\":\"37f711b2df314210b4957dc93cb61c80\",\"name\":\"1ab25bc56fe5408dbaff9f3a687e1c21\"},{\"type\":\"Edge\",\"source_node_id\":\"de09aba86bc0410ba6af149d57952e6a\",\"target_node_id\":\"bf4a8ffe77dc48fb80c288e59ef06d7b\",\"branch_id\":\"26782cd3dd6147849ce620ec75c32b6e\",\"id\":\"88efaab428224a1e80b79a02aec2ba0c\",\"name\":\"26782cd3dd6147849ce620ec75c32b6e\"},{\"type\":\"Edge\",\"source_node_id\":\"109ea03f67ea4e718d8f355089e514e6\",\"target_node_id\":\"d7aaada7ec634643874ff207142cb894\",\"id\":\"ca28351d9661403486e055ec429e2509\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"input_validation_error\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return false;\\n})()\\n\"},\"list\":false,\"id\":\"501e1d0b94504c74b61d99a14906a21d\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"softpin_question\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"8cec1fb2f0254ad5bb58921c6e3e79fc\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"is_user_enrolled\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"f98bab99cd78476e8c9a1431f47fb5ca\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"salt\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"c585a84423604129996ce1bc719c0358\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"user_validation_error\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return false;\\n})()\\n\"},\"list\":false,\"id\":\"6e1ddb3cdfc143598b88c9d7fb795f7b\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"error_code\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"00024f4e87af4d0db560c574d8f1bcb3\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"softpin_input\",\"list\":false,\"id\":\"a2853cc02a384d42b2fd4dd5dc129237\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":true,\"sensitive\":false,\"encryptionSalt\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.salt;\\n})()\\n\"},\"encryptionHashFunction\":\"SHA-256\"},{\"type\":\"String\",\"name\":\"userid\",\"list\":false,\"id\":\"83bace1414c04ac88e856feb1e84d6f6\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"verificationid\",\"list\":false,\"id\":\"f0aa6a970c494845ab48560f3a1041e0\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"contextid\",\"list\":false,\"id\":\"c770be2d81bd4e44b62e6fd82268dc5a\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"userid\",\"label\":\"userId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"83bace1414c04ac88e856feb1e84d6f6\",\"type\":\"String\"},{\"name\":\"verificationid\",\"label\":\"verificationId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"f0aa6a970c494845ab48560f3a1041e0\",\"type\":\"String\"},{\"name\":\"contextid\",\"label\":\"contextId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"c770be2d81bd4e44b62e6fd82268dc5a\",\"type\":\"String\"}],\"return-values-mapping\":[{\"name\":\"status\",\"label\":\"Status\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var response = vaVars.input_validation_error ? 'Error' : 'Success';\\n    return response;\\n})()\\n\"}},{\"name\":\"error_code\",\"label\":\"error_code\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.error_code}}\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"610cb8d05382011017c3ddeeff7b12b7\",\"name\":\"SoftPIN Verification\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"modify_confirmation_enabled\":false,\"library\":true,\"csTopicId\":\"decd38545382011017c3ddeeff7b127f\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SoftPIN Verification","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"610cb8d05382011017c3ddeeff7b12b7","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/decd38545382011017c3ddeeff7b127f","value":"decd38545382011017c3ddeeff7b127f"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"16","sys_updated_on":"2024-05-10 09:32:10","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.65\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"b28c8757a8c147838ec362764002cc21\": {\n          \"id\": \"b28c8757a8c147838ec362764002cc21\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"09b180bfa63946e8899125a96110d2e6\",\n              \"name\": \"sysId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"083d4d2efd2e464aaf60180d2819fa3c\",\n              \"name\": \"requestedFor\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"false\",\n              \"id\": \"813c26917e8d41da88b3c9071ff94d20\",\n              \"name\": \"forceCloseControl\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"355a85aa4f9b41b284141fa31b5c37b3\",\n              \"name\": \"outputValue\",\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"09b180bfa63946e8899125a96110d2e6\",\n            \"083d4d2efd2e464aaf60180d2819fa3c\",\n            \"813c26917e8d41da88b3c9071ff94d20\",\n            \"355a85aa4f9b41b284141fa31b5c37b3\"\n          ]\n        },\n        \"2ab5e7535adf41d3999f6d67aa8a19e8\": {\n          \"id\": \"2ab5e7535adf41d3999f6d67aa8a19e8\",\n          \"stepType\": \"CustomInput\",\n          \"name\": \"CATALOG_ITEM_VA_CONTROL\",\n          \"generateDataFunction\": \"function execute() {\\n    if (gs.nil(vaInputs.requestedfor))\\n        return { 'sysId': vaInputs.sysid.getValue(), 'forceCloseControl': vaInputs.forceclosecontrol.getValue(), 'outputValue': vaInputs.outputvalue.getValue(), 'catalogItemName': vaVars.catalogItemName, 'bare': true };\\n    else\\n        return { 'sysId': vaInputs.sysid.getValue(), 'requestedFor': vaInputs.requestedfor.getValue(), 'forceCloseControl': vaInputs.forceclosecontrol.getValue(), 'outputValue': vaInputs.outputvalue.getValue(), 'catalogItemName': vaVars.catalogItemName, 'bare': true };\\n}\\n\",\n          \"messageTranscriptFunction\": \"function execute(controlData) {\\n    return gs.getMessage('The Custom Control Catalog item VA just rendered item: {0}', controlData.catalogItemName);\\n}\",\n          \"inputResponseHandlerFunction\": \"function execute(controlData, responseValue) {\\n    if (responseValue && responseValue.status == \\\"SUCCESS\\\" && responseValue.requestTable == \\\"sc_request\\\" && responseValue.requestId != \\\"\\\") {\\n        var gr = new GlideRecord(\\\"sc_req_item\\\");\\n        gr.addEncodedQuery(\\\"request=\\\" + responseValue.requestId);\\n        gr.query();\\n        if (gr.next()) {\\n            responseValue.requestTable = \\\"sc_req_item\\\";\\n            responseValue.requestId = gr.getUniqueValue();\\n        }\\n    }\\n    vaVars.responseFromComponent = JSON.stringify(responseValue);\\n}\\n\",\n          \"inputResponseMessageTranscriptFunction\": \"function execute(controlData, responseValue) {\\n    if (responseValue.status == 'SUCCESS')\\n        return gs.getMessage('Catalog item request completed');\\n    else if (responseValue.status == 'CANCELED')\\n        return gs.getMessage('Catalog item request cancelled');\\n\\n    return gs.getMessage('Status for catalog item request is: {0}', [responseValue.status]);\\n}\",\n          \"unsupportedDeviceMessage\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Sorry, this channel is not supported.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"invocationType\": \"action\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"2cf6986802d049e297ef20fc8b390f76\": {\n          \"id\": \"2cf6986802d049e297ef20fc8b390f76\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"responseFromComponent\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.responseFromComponent}}\",\n                        \"displayValue\": \"Script VariablesresponseFromComponent\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true\n            }\n          ]\n        },\n        \"e60c9bdddc1d4e1fa4b485626b4daa6f\": {\n          \"id\": \"e60c9bdddc1d4e1fa4b485626b4daa6f\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"29b73f5e2eaf430ca20fb02f3834c8ac\": {\n          \"id\": \"29b73f5e2eaf430ca20fb02f3834c8ac\",\n          \"name\": \"Compute Item Name\",\n          \"script\": \"(function execute() {\\n    vaVars.catalogItemName = \\\"\\\";\\n    var item = GlideappCatalogItem.get(vaInputs.sysid.getValue());\\n    if (item)\\n        vaVars.catalogItemName = item.getName();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"9520f9a1e21b415c86a5091934e5f6ee\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2ab5e7535adf41d3999f6d67aa8a19e8\",\n          \"target\": \"2cf6986802d049e297ef20fc8b390f76\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a69479ae2c7a4f81897fb08669b8acbd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b28c8757a8c147838ec362764002cc21\",\n          \"target\": \"e60c9bdddc1d4e1fa4b485626b4daa6f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cbbb931af3df4a479f630da1a8afbb3d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e60c9bdddc1d4e1fa4b485626b4daa6f\",\n          \"target\": \"2cf6986802d049e297ef20fc8b390f76\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.sysidISEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"SysID empty\"\n        },\n        {\n          \"id\": \"1432a33cf78f4f5f8e917f9c1b9bddd0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e60c9bdddc1d4e1fa4b485626b4daa6f\",\n          \"target\": \"29b73f5e2eaf430ca20fb02f3834c8ac\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.sysidISNOTEMPTY\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"SysID not empty\"\n        },\n        {\n          \"id\": \"78c739591cfe45c6bc12ca66cee4adcb\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"29b73f5e2eaf430ca20fb02f3834c8ac\",\n          \"target\": \"2ab5e7535adf41d3999f6d67aa8a19e8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"09b180bfa63946e8899125a96110d2e6\": {\n      \"id\": \"09b180bfa63946e8899125a96110d2e6\",\n      \"name\": \"sysid\",\n      \"label\": \"SysId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b28c8757a8c147838ec362764002cc21\",\n      \"isHidden\": false\n    },\n    \"083d4d2efd2e464aaf60180d2819fa3c\": {\n      \"id\": \"083d4d2efd2e464aaf60180d2819fa3c\",\n      \"name\": \"requestedfor\",\n      \"label\": \"RequestedFor\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b28c8757a8c147838ec362764002cc21\",\n      \"isHidden\": false\n    },\n    \"8d969f87e13b4cfe9807f68a133a0bf1\": {\n      \"id\": \"8d969f87e13b4cfe9807f68a133a0bf1\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"responseFromComponent\",\n      \"label\": \"responseFromComponent\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"813c26917e8d41da88b3c9071ff94d20\": {\n      \"id\": \"813c26917e8d41da88b3c9071ff94d20\",\n      \"name\": \"forceclosecontrol\",\n      \"label\": \"ForceCloseControl\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b28c8757a8c147838ec362764002cc21\",\n      \"isHidden\": false\n    },\n    \"355a85aa4f9b41b284141fa31b5c37b3\": {\n      \"id\": \"355a85aa4f9b41b284141fa31b5c37b3\",\n      \"name\": \"outputvalue\",\n      \"label\": \"OutputValue\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b28c8757a8c147838ec362764002cc21\",\n      \"isHidden\": false\n    },\n    \"06d23bd9ea664b3cb381d5cb13eb9319\": {\n      \"id\": \"06d23bd9ea664b3cb381d5cb13eb9319\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogItemName\",\n      \"label\": \"catalogItemName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"55bf3f3c77700210c5c6b2a07b5a9953","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/3028ab3304f12210559073c06a02f7b7","value":"3028ab3304f12210559073c06a02f7b7"},"sys_update_name":"sys_cb_design_topic_55bf3f3c77700210c5c6b2a07b5a9953","sys_updated_by":"admin","sys_created_on":"2024-03-05 13:47:25","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"e1290d640c574cb98ec0ff4513d3565f\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"e1290d640c574cb98ec0ff4513d3565f\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"e1290d640c574cb98ec0ff4513d3565f\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"b28c8757a8c147838ec362764002cc21\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"CustomNode\",\"name\":\"CATALOG_ITEM_VA_CONTROL\",\"mode\":\"input\",\"generateDataFunction\":\"function execute() {\\n    if (gs.nil(vaInputs.requestedfor))\\n        return { 'sysId': vaInputs.sysid.getValue(), 'forceCloseControl': vaInputs.forceclosecontrol.getValue(), 'outputValue': vaInputs.outputvalue.getValue(), 'catalogItemName': vaVars.catalogItemName, 'bare': true };\\n    else\\n        return { 'sysId': vaInputs.sysid.getValue(), 'requestedFor': vaInputs.requestedfor.getValue(), 'forceCloseControl': vaInputs.forceclosecontrol.getValue(), 'outputValue': vaInputs.outputvalue.getValue(), 'catalogItemName': vaVars.catalogItemName, 'bare': true };\\n}\\n\",\"messageTranscriptFunction\":\"function execute(controlData) {\\n    return gs.getMessage('The Custom Control Catalog item VA just rendered item: {0}', controlData.catalogItemName);\\n}\",\"inputResponseHandlerFunction\":\"function execute(controlData, responseValue) {\\n    if (responseValue && responseValue.status == \\\"SUCCESS\\\" && responseValue.requestTable == \\\"sc_request\\\" && responseValue.requestId != \\\"\\\") {\\n        var gr = new GlideRecord(\\\"sc_req_item\\\");\\n        gr.addEncodedQuery(\\\"request=\\\" + responseValue.requestId);\\n        gr.query();\\n        if (gr.next()) {\\n            responseValue.requestTable = \\\"sc_req_item\\\";\\n            responseValue.requestId = gr.getUniqueValue();\\n        }\\n    }\\n    vaVars.responseFromComponent = JSON.stringify(responseValue);\\n}\\n\",\"inputResponseMessageTranscriptFunction\":\"function execute(controlData, responseValue) {\\n    if (responseValue.status == 'SUCCESS')\\n        return gs.getMessage('Catalog item request completed');\\n    else if (responseValue.status == 'CANCELED')\\n        return gs.getMessage('Catalog item request cancelled');\\n\\n    return gs.getMessage('Status for catalog item request is: {0}', [responseValue.status]);\\n}\",\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"unsupportedDeviceMessage\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"Sorry, this channel is not supported.\"},\"id\":\"2ab5e7535adf41d3999f6d67aa8a19e8\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"2cf6986802d049e297ef20fc8b390f76\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"SysID empty\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"sysidISEMPTY\"},\"id\":\"35c523b36d3345b7b088865d1e6adc70\",\"name\":\"SysID empty\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"SysID not empty\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"sysidISNOTEMPTY\"},\"id\":\"71bc581c63ab4ab8b625cac1d7aa0a16\",\"name\":\"SysID not empty\",\"expert_mode\":false}],\"id\":\"e60c9bdddc1d4e1fa4b485626b4daa6f\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.catalogItemName = \\\"\\\";\\n    var item = GlideappCatalogItem.get(vaInputs.sysid.getValue());\\n    if (item)\\n        vaVars.catalogItemName = item.getName();\\n})()\\n\",\"id\":\"29b73f5e2eaf430ca20fb02f3834c8ac\",\"name\":\"Compute Item Name\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"2ab5e7535adf41d3999f6d67aa8a19e8\",\"target_node_id\":\"2cf6986802d049e297ef20fc8b390f76\",\"id\":\"9520f9a1e21b415c86a5091934e5f6ee\"},{\"type\":\"Edge\",\"source_node_id\":\"b28c8757a8c147838ec362764002cc21\",\"target_node_id\":\"e60c9bdddc1d4e1fa4b485626b4daa6f\",\"id\":\"a69479ae2c7a4f81897fb08669b8acbd\"},{\"type\":\"Edge\",\"source_node_id\":\"e60c9bdddc1d4e1fa4b485626b4daa6f\",\"target_node_id\":\"2cf6986802d049e297ef20fc8b390f76\",\"branch_id\":\"35c523b36d3345b7b088865d1e6adc70\",\"id\":\"cbbb931af3df4a479f630da1a8afbb3d\",\"name\":\"35c523b36d3345b7b088865d1e6adc70\"},{\"type\":\"Edge\",\"source_node_id\":\"e60c9bdddc1d4e1fa4b485626b4daa6f\",\"target_node_id\":\"29b73f5e2eaf430ca20fb02f3834c8ac\",\"branch_id\":\"71bc581c63ab4ab8b625cac1d7aa0a16\",\"id\":\"1432a33cf78f4f5f8e917f9c1b9bddd0\",\"name\":\"71bc581c63ab4ab8b625cac1d7aa0a16\"},{\"type\":\"Edge\",\"source_node_id\":\"29b73f5e2eaf430ca20fb02f3834c8ac\",\"target_node_id\":\"2ab5e7535adf41d3999f6d67aa8a19e8\",\"id\":\"78c739591cfe45c6bc12ca66cee4adcb\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"responseFromComponent\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"8d969f87e13b4cfe9807f68a133a0bf1\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"catalogItemName\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"06d23bd9ea664b3cb381d5cb13eb9319\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"sysid\",\"list\":false,\"id\":\"09b180bfa63946e8899125a96110d2e6\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"requestedfor\",\"list\":false,\"id\":\"083d4d2efd2e464aaf60180d2819fa3c\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"True/False\",\"id\":\"813c26917e8d41da88b3c9071ff94d20\",\"name\":\"forceclosecontrol\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"outputvalue\",\"list\":false,\"id\":\"355a85aa4f9b41b284141fa31b5c37b3\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"sysid\",\"label\":\"sysId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"09b180bfa63946e8899125a96110d2e6\",\"type\":\"String\"},{\"name\":\"requestedfor\",\"label\":\"requestedFor\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"083d4d2efd2e464aaf60180d2819fa3c\",\"type\":\"String\"},{\"name\":\"forceclosecontrol\",\"label\":\"forceCloseControl\",\"default-value\":\"false\",\"required\":false,\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"813c26917e8d41da88b3c9071ff94d20\",\"type\":\"True/False\"},{\"name\":\"outputvalue\",\"label\":\"outputValue\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"355a85aa4f9b41b284141fa31b5c37b3\",\"type\":\"String\"}],\"return-values-mapping\":[{\"name\":\"responsefromcomponent\",\"label\":\"responseFromComponent\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.responseFromComponent}}\"}}]},\"domain\":\"global\",\"topic_type\":\"CUSTOM_INPUT\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"79ebbb3877700210c5c6b2a07b5a99a9\",\"name\":\"Catalog Item VA Input Control\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"library\":true,\"csTopicId\":\"59bf3f3c77700210c5c6b2a07b5a994f\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Catalog Item VA Input Control","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"79ebbb3877700210c5c6b2a07b5a99a9","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/59bf3f3c77700210c5c6b2a07b5a994f","value":"59bf3f3c77700210c5c6b2a07b5a994f"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"13","sys_updated_on":"2021-07-29 04:25:56","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"59b7784453022010b6e8ddeeff7b12de","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_design_topic_59b7784453022010b6e8ddeeff7b12de","sys_updated_by":"admin","sys_created_on":"2021-01-26 17:29:44","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"0c136470a64d4a60a34c6710c8269d05\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"0c136470a64d4a60a34c6710c8269d05\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"0c136470a64d4a60a34c6710c8269d05\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"86b7d83a7a4641bd9f38c5fb6a81ebe6\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"41cf7b34b57e49eca1fb8322112fccae\",\"name\":\"End\"},{\"type\":\"Decision\",\"name\":\"Geolocation permission granted?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_is_geolocation_permission_granted === false;\\n})()\\n\"},\"id\":\"53f7190dea4d45ea855856bfbfa87cda\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_is_geolocation_permission_granted === true;\\n})()\"},\"id\":\"d1d1f100a0fa4d6896baff1f5fee98f9\",\"name\":\"Yes\"}],\"id\":\"57d5fe598cbb40f8b4ef8528a0472c2e\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"share_location_=\"},\"id\":\"6f8e8e7c00354fd1a13d6fc14ed827a1\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"share_location_=true\"},\"id\":\"ae658c885142439aa784eb9f796a35a1\",\"name\":\"Yes\"}],\"id\":\"180b3121614b4a049c13e2effa657c9c\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"variable_id\":\"094a68b61a15473a95761801711747f1\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(vaInputs.permissionprompt, vaContext.getRequesterLang());\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"26e2bda364894708acbd80938dffd97a\",\"name\":\"share location?\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Geolocation control\",\"library_topic_id\":\"358d45bb53312010b6e8ddeeff7b1276\",\"parameter-mappings\":[],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"georesponsejsonstring\",\"main_topic_mapped_variable_name\":\"georesponse\"}],\"id\":\"78562d92fdcd4f418e50acaf1444c8ce\",\"name\":\"Geolocation control\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"/*\\nThe Geolocation API\\nstatus: OK if location coordinates were fetched successfully, ERROR` otherwise.\\nlatitude, longitude: the geolocation coordinates\\nisGeoPermissionGrantedForNextUse: determines if the user has granted geolocation permission to fetch location coordinates if requested again during the conversation.\\n  true: do not display permission prompt since the user has granted permission on their device\\n  false: display permission prompt since the user either denied permission or used allow once\\nerrorMessage: message associated with the error (optional)\\nerrortype:\\n    PERMISSION_DENIED\\n    POSITION_UNAVAILABLE\\n    TIMED_OUT\\n    UNKOWN_ERROR\\n*/\\n(function execute() {\\n\\tif (vaInputs.share_location_ == 'false') {\\n\\t\\t//set the appropriate error response if the user denied permission to access location\\n\\t\\tvaVars.status = \\\"ERROR\\\";\\n\\t\\tvaVars.errorType = \\\"PERMISSION_DENIED\\\";\\n\\t\\tvaVars.global_is_geolocation_permission_granted = false;\\n\\t\\treturn;\\n\\t}\\n\\n\\tif (vaInputs.georesponse) {\\n\\t\\tconst geolocationResponseObj = JSON.parse(vaInputs.georesponse);\\n\\t\\tvaVars.status = geolocationResponseObj.status;\\n\\t\\tif (geolocationResponseObj.status == 'OK') {\\n\\t\\t\\tvaVars.latitude = geolocationResponseObj.latitude;\\n\\t\\t\\tvaVars.longitude = geolocationResponseObj.longitude;\\n\\t\\t} else {\\n\\t\\t\\tvaVars.errorType = geolocationResponseObj.errorType;\\n\\t\\t\\tif (geolocationResponseObj.hasOwnProperty('errorMessage')) {\\n\\t\\t\\t\\tvaVars.errorMessage = geolocationResponseObj.errorMessage;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tif (geolocationResponseObj.hasOwnProperty('isGeoPermissionGrantedForNextUse')) {\\n\\t\\t\\tvaVars.global_is_geolocation_permission_granted = geolocationResponseObj.isGeoPermissionGrantedForNextUse;\\n\\t\\t}\\n\\t}\\n\\n})()\",\"id\":\"94c8d0930dfd4e47be7df0e7f4aa5967\",\"name\":\"Record output\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"180b3121614b4a049c13e2effa657c9c\",\"target_node_id\":\"94c8d0930dfd4e47be7df0e7f4aa5967\",\"branch_id\":\"6f8e8e7c00354fd1a13d6fc14ed827a1\",\"id\":\"0bf55b12ae414f2797c8ad608d7398cc\",\"name\":\"6f8e8e7c00354fd1a13d6fc14ed827a1\"},{\"type\":\"Edge\",\"source_node_id\":\"86b7d83a7a4641bd9f38c5fb6a81ebe6\",\"target_node_id\":\"57d5fe598cbb40f8b4ef8528a0472c2e\",\"id\":\"89e32470e6fb41d79ac3b938fe614e47\"},{\"type\":\"Edge\",\"source_node_id\":\"57d5fe598cbb40f8b4ef8528a0472c2e\",\"target_node_id\":\"26e2bda364894708acbd80938dffd97a\",\"branch_id\":\"53f7190dea4d45ea855856bfbfa87cda\",\"id\":\"614adfc0e9be44038012ee841fdced9f\",\"name\":\"53f7190dea4d45ea855856bfbfa87cda\"},{\"type\":\"Edge\",\"source_node_id\":\"26e2bda364894708acbd80938dffd97a\",\"target_node_id\":\"180b3121614b4a049c13e2effa657c9c\",\"id\":\"2308579d79814f40a83c4e744c5867c4\"},{\"type\":\"Edge\",\"source_node_id\":\"180b3121614b4a049c13e2effa657c9c\",\"target_node_id\":\"78562d92fdcd4f418e50acaf1444c8ce\",\"branch_id\":\"ae658c885142439aa784eb9f796a35a1\",\"id\":\"6097d8fd7896411a859416428b1be595\",\"name\":\"ae658c885142439aa784eb9f796a35a1\"},{\"type\":\"Edge\",\"source_node_id\":\"57d5fe598cbb40f8b4ef8528a0472c2e\",\"target_node_id\":\"78562d92fdcd4f418e50acaf1444c8ce\",\"branch_id\":\"d1d1f100a0fa4d6896baff1f5fee98f9\",\"id\":\"468e1f3a5e77410496512bb9feb191d9\",\"name\":\"d1d1f100a0fa4d6896baff1f5fee98f9\"},{\"type\":\"Edge\",\"source_node_id\":\"78562d92fdcd4f418e50acaf1444c8ce\",\"target_node_id\":\"94c8d0930dfd4e47be7df0e7f4aa5967\",\"id\":\"2ec5aaa33bd44fa4af85111589b0b8b1\"},{\"type\":\"Edge\",\"source_node_id\":\"94c8d0930dfd4e47be7df0e7f4aa5967\",\"target_node_id\":\"41cf7b34b57e49eca1fb8322112fccae\",\"id\":\"71d56b71340f4c9b8146f75b33116380\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"latitude\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"58a22652bd3f44a08c352740a14a847f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"longitude\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"6975a4c756014aca955003aa94055354\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"errorMessage\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"2cdf44cb5026417192415f99be6b2dd3\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"errorType\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"adcfce2a67a5423ab9e75c97dea569df\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"status\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"3c73bb5206094202bbb3cfed50180e47\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"permissionprompt\",\"list\":false,\"id\":\"1617196d3b124152a4edd6a117a07e83\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"id\":\"094a68b61a15473a95761801711747f1\",\"name\":\"share_location_\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"georesponse\",\"list\":false,\"id\":\"a7de13939f9345688810684754b87792\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"permissionprompt\",\"label\":\"permissionPrompt\",\"default-value\":\"\\\"Would you like to share your location?\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"1617196d3b124152a4edd6a117a07e83\",\"type\":\"String\"}],\"return-values-mapping\":[{\"name\":\"latitude\",\"label\":\"latitude\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.latitude}}\"}},{\"name\":\"longitude\",\"label\":\"longitude\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.longitude}}\"}},{\"name\":\"errormessage\",\"label\":\"errorMessage\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.errorMessage}}\"}},{\"name\":\"errortype\",\"label\":\"errorType\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.errorType}}\"}},{\"name\":\"status\",\"label\":\"status\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.status}}\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"id\":\"3f85123353712010b6e8ddeeff7b1225\",\"name\":\"Geolocation\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":true,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Geolocation","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"3f85123353712010b6e8ddeeff7b1225","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/19b7784453022010b6e8ddeeff7b12da","value":"19b7784453022010b6e8ddeeff7b12da"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"6","sys_updated_on":"2021-04-07 16:30:46","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"5a36dc0f534e2010c232ddeeff7b12da","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_design_topic_5a36dc0f534e2010c232ddeeff7b12da","sys_updated_by":"admin","sys_created_on":"2021-02-04 22:45:13","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"0a451a6ca2ba4aaea98b740e137d5620\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"0a451a6ca2ba4aaea98b740e137d5620\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"0a451a6ca2ba4aaea98b740e137d5620\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"f213af4f8a574ee8a1da7299ca8439a1\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"2cadc2f5cf8c48d381f321cf6a52da91\",\"name\":\"End\"},{\"type\":\"FDIHInvocation\",\"name\":\"Pause\",\"kind\":\"subflow\",\"mode\":\"sync\",\"inputs\":[{\"supported_input_modes\":[],\"name\":\"seconds\",\"type\":\"string\",\"order\":0,\"required\":false,\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.maximum_duration_to_pause}}\"}}],\"outputs\":[],\"id\":\"450ba1c4d6304cc9a3611cdb3a9c8955\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"sys_id\":\"88b3d88b534e2010c232ddeeff7b1296\",\"scope\":\"global\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var maximumDurationToPause = vaInputs.seconds.getValue();\\n    var timeout = gs.getProperty('com.glide.cs.fdih.interactive.timeout') || 60;\\n    \\n    // need parseInt because input seconds is of type String\\n    if (isNaN(maximumDurationToPause) || parseInt(maximumDurationToPause) > timeout) {\\n        maximumDurationToPause = timeout;\\n    }\\n    vaVars.maximum_duration_to_pause = maximumDurationToPause;\\n})()\\n\",\"id\":\"73a90fa5a7454856a825dd29956a33b8\",\"name\":\"Validate duration\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"450ba1c4d6304cc9a3611cdb3a9c8955\",\"target_node_id\":\"2cadc2f5cf8c48d381f321cf6a52da91\",\"id\":\"4c565c63d3d64ecb9e7a45c9e2c18b0f\"},{\"type\":\"Edge\",\"source_node_id\":\"f213af4f8a574ee8a1da7299ca8439a1\",\"target_node_id\":\"73a90fa5a7454856a825dd29956a33b8\",\"id\":\"483277d4eea7437694f74ec7bbf5acc5\"},{\"type\":\"Edge\",\"source_node_id\":\"73a90fa5a7454856a825dd29956a33b8\",\"target_node_id\":\"450ba1c4d6304cc9a3611cdb3a9c8955\",\"id\":\"dfd278fb94b24feb93a6f2bf7b901aaf\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"maximum_duration_to_pause\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"507c6eb8937d4263b8cba2a2b557df88\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"seconds\",\"list\":false,\"id\":\"9eaff46b908640dfbfe4a9cecf4c96e7\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"seconds\",\"label\":\"Seconds\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"9eaff46b908640dfbfe4a9cecf4c96e7\",\"type\":\"String\",\"hint\":\"Any duration value greater than the maximum defined in the system will revert to the maximum or 60 seconds if not defined.\"}],\"return-values-mapping\":[]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"id\":\"86d5980f534e2010c232ddeeff7b1238\",\"name\":\"Pause\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"auto_resolution_enabled\":false,\"library\":true,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Pause","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"86d5980f534e2010c232ddeeff7b1238","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/da36dc0f534e2010c232ddeeff7b12d4","value":"da36dc0f534e2010c232ddeeff7b12d4"},"sys_created_by":"admin","sys_policy":"read"},{"sys_mod_count":"30","sys_updated_on":"2023-05-02 11:22:16","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.46\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"972110b2590b4356b3a031d4f7cb9012\": {\n          \"id\": \"972110b2590b4356b3a031d4f7cb9012\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"166984db1c57489dab720923fe6859ee\": {\n          \"id\": \"166984db1c57489dab720923fe6859ee\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"8d50a162291448b890a6f6f3e02596a4\": {\n          \"id\": \"8d50a162291448b890a6f6f3e02596a4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Closing Message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return vaSystem.getClosingMessage();\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaContext.suppress_end_message) || vaContext.suppress_end_message != \\\"true\\\";\\n})()\"\n          },\n          \"secure\": false\n        },\n        \"7d750541738445b797f5ca4d6554fdc8\": {\n          \"id\": \"7d750541738445b797f5ca4d6554fdc8\",\n          \"name\": \"Close Conversation\",\n          \"script\": \"(function execute() {\\n    vaSystem.endConversation();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n     if (vaVars.didConnectToLiveAgent) {\\n         return false;\\n     }\\n})()\\n\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"415b1517f7814431b30e3c9584cd25ce\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8d50a162291448b890a6f6f3e02596a4\",\n          \"target\": \"7d750541738445b797f5ca4d6554fdc8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a80f24c74c7d4db08cb2255349a25f67\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7d750541738445b797f5ca4d6554fdc8\",\n          \"target\": \"166984db1c57489dab720923fe6859ee\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b6c897c2939c4efaafd75c3f1da9a693\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"972110b2590b4356b3a031d4f7cb9012\",\n          \"target\": \"8d50a162291448b890a6f6f3e02596a4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"3b29e6aaa255448c94f2855def5f82fb\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"3b29e6aaa255448c94f2855def5f82fb\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"5bcde45053130010cf8cddeeff7b1294","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_5bcde45053130010cf8cddeeff7b1294","sys_updated_by":"admin","sys_created_on":"2020-02-26 22:21:07","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"b5350a4e73c2440bb128afb4224d0086\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"b5350a4e73c2440bb128afb4224d0086\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"b5350a4e73c2440bb128afb4224d0086\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"972110b2590b4356b3a031d4f7cb9012\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"166984db1c57489dab720923fe6859ee\",\"name\":\"End\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaSystem.getClosingMessage();\\n})()\\n\"}],\"id\":\"8d50a162291448b890a6f6f3e02596a4\",\"name\":\"Closing Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaContext.suppress_end_message) || vaContext.suppress_end_message != \\\"true\\\";\\n})()\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.endConversation();\\n})()\\n\",\"id\":\"7d750541738445b797f5ca4d6554fdc8\",\"name\":\"Close Conversation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n     if (vaVars.didConnectToLiveAgent) {\\n         return false;\\n     }\\n})()\\n\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"8d50a162291448b890a6f6f3e02596a4\",\"target_node_id\":\"7d750541738445b797f5ca4d6554fdc8\",\"id\":\"415b1517f7814431b30e3c9584cd25ce\"},{\"type\":\"Edge\",\"source_node_id\":\"7d750541738445b797f5ca4d6554fdc8\",\"target_node_id\":\"166984db1c57489dab720923fe6859ee\",\"id\":\"a80f24c74c7d4db08cb2255349a25f67\"},{\"type\":\"Edge\",\"source_node_id\":\"972110b2590b4356b3a031d4f7cb9012\",\"target_node_id\":\"8d50a162291448b890a6f6f3e02596a4\",\"id\":\"b6c897c2939c4efaafd75c3f1da9a693\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"3b29e6aaa255448c94f2855def5f82fb\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"SETUP_TOPIC\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"1acd645053130010cf8cddeeff7b12cd\",\"name\":\"Closing Conversation.\",\"key_phrases\":[\"Closing Conversation\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"modify_confirmation_enabled\":false,\"library\":false,\"csTopicId\":\"57cde45053130010cf8cddeeff7b1291\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Closing Conversation.","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"1acd645053130010cf8cddeeff7b12cd","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/57cde45053130010cf8cddeeff7b1291","value":"57cde45053130010cf8cddeeff7b1291"},"sys_created_by":"admin","sys_policy":"read"},{"sys_mod_count":"0","sys_updated_on":"2020-09-29 15:53:05","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"5d6c236153a3101055eeddeeff7b12a1","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_5d6c236153a3101055eeddeeff7b12a1","sys_updated_by":"admin","sys_created_on":"2020-09-29 15:53:05","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"07efad69e6db4394bdc21b346c81efbe\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"07efad69e6db4394bdc21b346c81efbe\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"07efad69e6db4394bdc21b346c81efbe\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"fc8a2e4ec9e740e58bcad69e0ec67c0d\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"43401c707ddf4a2c8ded7dcd67773d49\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars._topic_current = vaVars._topic_new;\\n})()\\n\",\"id\":\"ff7527496aca45d6ae55b73598954e43\",\"name\":\"New => Current\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.cancelTask(JSON.parse(vaVars._topic_current)[\\\"task\\\"]);\\n})()\\n\",\"id\":\"c5f98aa720664888923e2693808417e1\",\"name\":\"End Current Task\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Subtopic\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars._topic_new)[\\\"type\\\"] == 'subtopic';\\n})()\\n\"},\"id\":\"ab10dd02989f4bee86e2bebf7d4e2528\",\"name\":\"Subtopic\"},{\"type\":\"Branch\",\"label\":\"Regular Topic\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars._topic_new)[\\\"type\\\"] != 'subtopic';\\n})()\\n\"},\"id\":\"9dd5fa1c125647bcb0be7f4d35300c36\",\"name\":\"Regular Topic\"}],\"id\":\"bf63f809cb1448f1b42445e2b961f0dd\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Current Topic Exists\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !gs.nil(vaVars._topic_current);\\n})()\\n\"},\"id\":\"686817758a714e31ba9f8782b229b382\",\"name\":\"Current Topic Exists\"},{\"type\":\"Branch\",\"label\":\"Current Topic Doesn't Exist\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaVars._topic_current);\\n})()\"},\"id\":\"bebc57a80cc34a21ba4736df4294cda0\",\"name\":\"Current Topic Doesn't Exist\"}],\"id\":\"9766971de7ce44ef9f6440f537e66576\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars._topic_update_current_task = true;\\n    vaSystem.switchTopic(JSON.parse(vaVars._topic_new)[\\\"name\\\"]);\\n})()\\n\",\"id\":\"7af8c504b26040f7a400344eaa73281c\",\"name\":\"Switch to New\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"fc8a2e4ec9e740e58bcad69e0ec67c0d\",\"target_node_id\":\"bf63f809cb1448f1b42445e2b961f0dd\",\"id\":\"917a45527cc04e2a9dcfb9c14a8ea2df\"},{\"type\":\"Edge\",\"source_node_id\":\"bf63f809cb1448f1b42445e2b961f0dd\",\"target_node_id\":\"ff7527496aca45d6ae55b73598954e43\",\"branch_id\":\"ab10dd02989f4bee86e2bebf7d4e2528\",\"id\":\"0bfa9496a0804ab5aced962d255cd5c6\",\"name\":\"ab10dd02989f4bee86e2bebf7d4e2528\"},{\"type\":\"Edge\",\"source_node_id\":\"9766971de7ce44ef9f6440f537e66576\",\"target_node_id\":\"c5f98aa720664888923e2693808417e1\",\"branch_id\":\"686817758a714e31ba9f8782b229b382\",\"id\":\"913b28edc8ee4f089b388e58f28e122b\",\"name\":\"686817758a714e31ba9f8782b229b382\"},{\"type\":\"Edge\",\"source_node_id\":\"c5f98aa720664888923e2693808417e1\",\"target_node_id\":\"ff7527496aca45d6ae55b73598954e43\",\"id\":\"188c8de11dc840f4a64f1bcbaaec6d9e\"},{\"type\":\"Edge\",\"source_node_id\":\"bf63f809cb1448f1b42445e2b961f0dd\",\"target_node_id\":\"9766971de7ce44ef9f6440f537e66576\",\"branch_id\":\"9dd5fa1c125647bcb0be7f4d35300c36\",\"id\":\"a295ba95e0f745f6a01deb8fe31c0429\",\"name\":\"9dd5fa1c125647bcb0be7f4d35300c36\"},{\"type\":\"Edge\",\"source_node_id\":\"9766971de7ce44ef9f6440f537e66576\",\"target_node_id\":\"ff7527496aca45d6ae55b73598954e43\",\"branch_id\":\"bebc57a80cc34a21ba4736df4294cda0\",\"id\":\"d5e1b0584cea4753ac97be9ac0f38162\",\"name\":\"bebc57a80cc34a21ba4736df4294cda0\"},{\"type\":\"Edge\",\"source_node_id\":\"ff7527496aca45d6ae55b73598954e43\",\"target_node_id\":\"7af8c504b26040f7a400344eaa73281c\",\"id\":\"bc1efd1257974accbf82cbfa07636ea7\"},{\"type\":\"Edge\",\"source_node_id\":\"7af8c504b26040f7a400344eaa73281c\",\"target_node_id\":\"43401c707ddf4a2c8ded7dcd67773d49\",\"id\":\"2d710094f431411fbd6e552f2e47632e\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_topic_new\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"id\":\"292a9536f2dd4d098c5361dec38ac877\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"_topic_current\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"id\":\"7a7e5644287d47d5a93b806295b62bc7\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"_topic_update_current_task\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"id\":\"7081fc5c6b044484873f9ad41493e203\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"sameTopic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"id\":\"9bfaba7fb17441f1a7c5731460535680\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return false;\\n})()\\n\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"e211fa753b1033009cbbcea234efc42a\",\"name\":\"_topic_switcher_\",\"key_phrases\":[\"_topic_switcher_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"auto_resolution_enabled\":false,\"library\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_topic_switcher_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"e211fa753b1033009cbbcea234efc42a","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/bc26cca6db503300d534f5131f961954","value":"bc26cca6db503300d534f5131f961954"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"0","sys_updated_on":"2024-06-26 18:43:43","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.67\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"2d6092adc41d408f95234de56a91e2fb\": {\n          \"id\": \"2d6092adc41d408f95234de56a91e2fb\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"8b1f7ce5e11e495aa0ea30c24f18b515\": {\n          \"id\": \"8b1f7ce5e11e495aa0ea30c24f18b515\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"72ea8334096a4e08aecc9481f3c6034a\": {\n          \"id\": \"72ea8334096a4e08aecc9481f3c6034a\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Survey-LLM\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"useTemplateTopic\": false,\n          \"reusableTopicChoice\": \"Survey-LLM\",\n          \"reusableTopicId\": \"77a94e44ff2202101b82157c03cb147e\",\n          \"inputs\": {\n            \"surveyid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"a259f6969f3220100d74d46d842e702a\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"confirmationneeded\": {\n              \"value\": \"false\",\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            },\n            \"savequestionstocontext\": {\n              \"value\": \"false\",\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            }\n          },\n          \"variableIds\": [],\n          \"dynamicTopicBlockName\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputDynamicModal\": {},\n          \"outputDynamicModal\": {},\n          \"outputs\": []\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"87a00089704b47ea8f348147811c01a3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2d6092adc41d408f95234de56a91e2fb\",\n          \"target\": \"72ea8334096a4e08aecc9481f3c6034a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8fa2a7b2f988433296e468440c99c6ad\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"72ea8334096a4e08aecc9481f3c6034a\",\n          \"target\": \"8b1f7ce5e11e495aa0ea30c24f18b515\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"632ff6d1b74302101b828443ae11a9ca","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_632ff6d1b74302101b828443ae11a9ca","sys_updated_by":"admin","sys_created_on":"2024-06-26 18:43:43","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"715b38bfb0524291baf03eb266e03b2c\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"715b38bfb0524291baf03eb266e03b2c\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"715b38bfb0524291baf03eb266e03b2c\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"2d6092adc41d408f95234de56a91e2fb\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"8b1f7ce5e11e495aa0ea30c24f18b515\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Survey-LLM\",\"library_topic_id\":\"77a94e44ff2202101b82157c03cb147e\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"surveyid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"a259f6969f3220100d74d46d842e702a\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"confirmationneeded\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"savequestionstocontext\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"72ea8334096a4e08aecc9481f3c6034a\",\"name\":\"Survey-LLM\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"2d6092adc41d408f95234de56a91e2fb\",\"target_node_id\":\"72ea8334096a4e08aecc9481f3c6034a\",\"id\":\"87a00089704b47ea8f348147811c01a3\"},{\"type\":\"Edge\",\"source_node_id\":\"72ea8334096a4e08aecc9481f3c6034a\",\"target_node_id\":\"8b1f7ce5e11e495aa0ea30c24f18b515\",\"id\":\"8fa2a7b2f988433296e468440c99c6ad\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"SETUP_TOPIC\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"28deba91b74302101b828443ae11a94b\",\"name\":\"Now Assist - Virtual Agent Feedback.\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"description\":\"Enables users to provide feedback on their conversational experience, before the conversation ends.\",\"model_type\":\"llm\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[\"e13840cf77d53110569156391e5a99ba\"],\"title\":\"Now Assist - Virtual Agent Feedback.\",\"library\":false,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Now Assist - Virtual Agent Feedback.","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"28deba91b74302101b828443ae11a94b","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/db2fb2d1b74302101b828443ae11a96a","value":"db2fb2d1b74302101b828443ae11a96a"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"0","sys_updated_on":"2022-02-17 01:49:38","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.40\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"5e7d9609ce50439ea71acb1a1daae8e9\": {\n          \"id\": \"5e7d9609ce50439ea71acb1a1daae8e9\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"1d8a9efc5f2a41f397ea061ce5b8e3eb\",\n              \"name\": \"diagnosticContent\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": false\n            }\n          ],\n          \"variableIds\": [\n            \"1d8a9efc5f2a41f397ea061ce5b8e3eb\"\n          ]\n        },\n        \"1d356664df1c4cc7882ae029bca9eb8f\": {\n          \"id\": \"1d356664df1c4cc7882ae029bca9eb8f\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"isTopicExecuted\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.topic_execution_confirmation}}\",\n                        \"displayValue\": \"Input VariablesTopic Execution Confirmation\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=6fcf5a148775c150b6edcbfc0ebb3518%5Ecalling_cs_topic_idINf5f9fcaf87ed0150b6edcbfc0ebb35d1,a27f9841874ecd50b6edcbfc0ebb3573\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"isDataCollectionTopicExecuted\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.data_collection_topic_confirmation}}\",\n                        \"displayValue\": \"Input VariablesData Collection Topic Confirmation\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true\n            }\n          ]\n        },\n        \"299b43a3ae234736a71e4c09da148c43\": {\n          \"id\": \"299b43a3ae234736a71e4c09da148c43\",\n          \"name\": \"Execute Topic\",\n          \"script\": \"(function execute() {\\n    vaSystem.switchTopic(JSON.parse(vaInputs.diagnosticcontent).topic,'resume');\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"1479a30029aa41b1b03b0b67df37d353\": {\n          \"id\": \"1479a30029aa41b1b03b0b67df37d353\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"Topic execution confirmation\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Please confirm if you want to proceed with a topic flow to solve your issue\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"b2226783c64745a296ba707d881dee90\"\n        },\n        \"afc4fbeebe3446ff8ec0794e8a1578be\": {\n          \"id\": \"afc4fbeebe3446ff8ec0794e8a1578be\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"4e8b14fb7c2048549ccc8aca8d0abb61\": {\n          \"id\": \"4e8b14fb7c2048549ccc8aca8d0abb61\",\n          \"name\": \"Execute Health Check Topic\",\n          \"script\": \"(function execute() {\\n    var content = JSON.parse(vaInputs.diagnosticcontent);\\n    gs.error('selected diagnostic content ------ '+vaInputs.diagnosticcontent);\\n    if (content.healthCheckTopic && content.healthCheckTopic != ''){\\n        vaSystem.switchTopic(content.healthCheckTopic,'resume');\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"eba28c1250c34694b7f0530270f0763a\": {\n          \"id\": \"eba28c1250c34694b7f0530270f0763a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"3eedc143c48148fd8ba2a0da5de37deb\": {\n          \"id\": \"3eedc143c48148fd8ba2a0da5de37deb\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"Data collection topic confirmation\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"If  the solution is not helpful you can answer some more question for customer support. Please select yes to continue.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"7e253fcd8521422fab36ea9325de1d8c\"\n        },\n        \"5b49458968f44cc8b852b685d54d11bc\": {\n          \"id\": \"5b49458968f44cc8b852b685d54d11bc\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"3021336aff194c9a82b0d950df7f42df\": {\n          \"id\": \"3021336aff194c9a82b0d950df7f42df\",\n          \"name\": \"Execute Data collection Topic\",\n          \"script\": \"(function execute() {\\n    vaSystem.switchTopic(JSON.parse(vaInputs.diagnosticcontent).dataCollectionTopic, 'resume');\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"41b65b9157394b0897d883e7d1eab654\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"299b43a3ae234736a71e4c09da148c43\",\n          \"target\": \"eba28c1250c34694b7f0530270f0763a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"048f2361686643b08cd1f34d1ca6f33d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"afc4fbeebe3446ff8ec0794e8a1578be\",\n          \"target\": \"1d356664df1c4cc7882ae029bca9eb8f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.topic_execution_confirmation=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Not confirmed\"\n        },\n        {\n          \"id\": \"60f2417a701a44edb78de15ca2ba7d0d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1479a30029aa41b1b03b0b67df37d353\",\n          \"target\": \"afc4fbeebe3446ff8ec0794e8a1578be\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1e3ca294aee94a6781db1e662dfeea8b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"afc4fbeebe3446ff8ec0794e8a1578be\",\n          \"target\": \"299b43a3ae234736a71e4c09da148c43\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.topic_execution_confirmation=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Confirmed\"\n        },\n        {\n          \"id\": \"9474642159fa4285adcbb191e6fcf382\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5e7d9609ce50439ea71acb1a1daae8e9\",\n          \"target\": \"4e8b14fb7c2048549ccc8aca8d0abb61\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ebfafe691a2248368e7b7f25356e0eb7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4e8b14fb7c2048549ccc8aca8d0abb61\",\n          \"target\": \"1479a30029aa41b1b03b0b67df37d353\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5d8f9a73dcda475f89940ce76020c1e1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eba28c1250c34694b7f0530270f0763a\",\n          \"target\": \"1d356664df1c4cc7882ae029bca9eb8f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var content = JSON.parse(vaInputs.diagnosticcontent);\\n    return !content.dataCollectionTopic || content.dataCollectionTopic == ''\\n})()\\n\"\n          },\n          \"label\": \"Data collection topic not exist\"\n        },\n        {\n          \"id\": \"a6b0c170320547ea9fffc5e0fc4191f8\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eba28c1250c34694b7f0530270f0763a\",\n          \"target\": \"3eedc143c48148fd8ba2a0da5de37deb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var content = JSON.parse(vaInputs.diagnosticcontent);\\n    return content.dataCollectionTopic && content.dataCollectionTopic != ''\\n})()\\n\"\n          },\n          \"label\": \"Data collection topic exist\"\n        },\n        {\n          \"id\": \"b97ae119489f404da2c7d25b515890e5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3eedc143c48148fd8ba2a0da5de37deb\",\n          \"target\": \"5b49458968f44cc8b852b685d54d11bc\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"55a57495b4e5406ab1f68dd77c5acb98\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"5b49458968f44cc8b852b685d54d11bc\",\n          \"target\": \"1d356664df1c4cc7882ae029bca9eb8f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.data_collection_topic_confirmation=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"40df44f089d6473da8373f66a37d752f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"5b49458968f44cc8b852b685d54d11bc\",\n          \"target\": \"3021336aff194c9a82b0d950df7f42df\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.data_collection_topic_confirmation=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"64467e9a77ba4847bc336a9bc2d2d0bf\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3021336aff194c9a82b0d950df7f42df\",\n          \"target\": \"1d356664df1c4cc7882ae029bca9eb8f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"b2226783c64745a296ba707d881dee90\": {\n      \"id\": \"b2226783c64745a296ba707d881dee90\",\n      \"name\": \"topic_execution_confirmation\",\n      \"label\": \"Topic Execution Confirmation\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\"\n    },\n    \"8a76249fc9fa411dbdab1735a87972a3\": {\n      \"id\": \"8a76249fc9fa411dbdab1735a87972a3\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"topicNotExecuted\",\n      \"label\": \"topicNotExecuted\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1d8a9efc5f2a41f397ea061ce5b8e3eb\": {\n      \"id\": \"1d8a9efc5f2a41f397ea061ce5b8e3eb\",\n      \"name\": \"diagnosticcontent\",\n      \"label\": \"DiagnosticContent\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      }\n    },\n    \"7e253fcd8521422fab36ea9325de1d8c\": {\n      \"id\": \"7e253fcd8521422fab36ea9325de1d8c\",\n      \"name\": \"data_collection_topic_confirmation\",\n      \"label\": \"Data Collection Topic Confirmation\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"63cf5a148775c150b6edcbfc0ebb351e","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/434a64fd531db410f738ddeeff7b12c7","value":"434a64fd531db410f738ddeeff7b12c7"},"sys_update_name":"sys_cb_design_topic_63cf5a148775c150b6edcbfc0ebb351e","sys_updated_by":"admin","sys_created_on":"2022-02-17 01:49:38","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"5aa7c43e82914bddaff830e2f294ec11\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"5aa7c43e82914bddaff830e2f294ec11\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"5aa7c43e82914bddaff830e2f294ec11\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"5e7d9609ce50439ea71acb1a1daae8e9\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"1d356664df1c4cc7882ae029bca9eb8f\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.switchTopic(JSON.parse(vaInputs.diagnosticcontent).topic,'resume');\\n})()\\n\",\"id\":\"299b43a3ae234736a71e4c09da148c43\",\"name\":\"Execute Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"b2226783c64745a296ba707d881dee90\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Please confirm if you want to proceed with a topic flow to solve your issue\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"1479a30029aa41b1b03b0b67df37d353\",\"name\":\"Topic execution confirmation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Not confirmed\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"topic_execution_confirmation=\"},\"id\":\"622496a0b316451cb04d9ab36d09e96d\",\"name\":\"Not confirmed\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Confirmed\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"topic_execution_confirmation=true\"},\"id\":\"0ef6261429a746b7b9b120a575096799\",\"name\":\"Confirmed\"}],\"id\":\"afc4fbeebe3446ff8ec0794e8a1578be\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var content = JSON.parse(vaInputs.diagnosticcontent);\\n    gs.error('selected diagnostic content ------ '+vaInputs.diagnosticcontent);\\n    if (content.healthCheckTopic && content.healthCheckTopic != ''){\\n        vaSystem.switchTopic(content.healthCheckTopic,'resume');\\n    }\\n})()\\n\",\"id\":\"4e8b14fb7c2048549ccc8aca8d0abb61\",\"name\":\"Execute Health Check Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Data collection topic not exist\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var content = JSON.parse(vaInputs.diagnosticcontent);\\n    return !content.dataCollectionTopic || content.dataCollectionTopic == ''\\n})()\\n\"},\"id\":\"15d26aa7929046f1b3c19bf0ed0b939d\",\"name\":\"Data collection topic not exist\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Data collection topic exist\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var content = JSON.parse(vaInputs.diagnosticcontent);\\n    return content.dataCollectionTopic && content.dataCollectionTopic != ''\\n})()\\n\"},\"id\":\"90f4554887014e8ab3cbda6268c5ec3c\",\"name\":\"Data collection topic exist\"}],\"id\":\"eba28c1250c34694b7f0530270f0763a\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"7e253fcd8521422fab36ea9325de1d8c\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"If  the solution is not helpful you can answer some more question for customer support. Please select yes to continue.\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"3eedc143c48148fd8ba2a0da5de37deb\",\"name\":\"Data collection topic confirmation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"data_collection_topic_confirmation=\"},\"id\":\"ebabdb5f66344bd99c45ce7d4d6ade3d\",\"name\":\"No\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"data_collection_topic_confirmation=true\"},\"id\":\"7e804d9949f94867af48ebfd96414e25\",\"name\":\"Yes\"}],\"id\":\"5b49458968f44cc8b852b685d54d11bc\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.switchTopic(JSON.parse(vaInputs.diagnosticcontent).dataCollectionTopic, 'resume');\\n})()\\n\",\"id\":\"3021336aff194c9a82b0d950df7f42df\",\"name\":\"Execute Data collection Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"299b43a3ae234736a71e4c09da148c43\",\"target_node_id\":\"eba28c1250c34694b7f0530270f0763a\",\"id\":\"41b65b9157394b0897d883e7d1eab654\"},{\"type\":\"Edge\",\"source_node_id\":\"afc4fbeebe3446ff8ec0794e8a1578be\",\"target_node_id\":\"1d356664df1c4cc7882ae029bca9eb8f\",\"branch_id\":\"622496a0b316451cb04d9ab36d09e96d\",\"id\":\"048f2361686643b08cd1f34d1ca6f33d\",\"name\":\"622496a0b316451cb04d9ab36d09e96d\"},{\"type\":\"Edge\",\"source_node_id\":\"1479a30029aa41b1b03b0b67df37d353\",\"target_node_id\":\"afc4fbeebe3446ff8ec0794e8a1578be\",\"id\":\"60f2417a701a44edb78de15ca2ba7d0d\"},{\"type\":\"Edge\",\"source_node_id\":\"afc4fbeebe3446ff8ec0794e8a1578be\",\"target_node_id\":\"299b43a3ae234736a71e4c09da148c43\",\"branch_id\":\"0ef6261429a746b7b9b120a575096799\",\"id\":\"1e3ca294aee94a6781db1e662dfeea8b\",\"name\":\"0ef6261429a746b7b9b120a575096799\"},{\"type\":\"Edge\",\"source_node_id\":\"5e7d9609ce50439ea71acb1a1daae8e9\",\"target_node_id\":\"4e8b14fb7c2048549ccc8aca8d0abb61\",\"id\":\"9474642159fa4285adcbb191e6fcf382\"},{\"type\":\"Edge\",\"source_node_id\":\"4e8b14fb7c2048549ccc8aca8d0abb61\",\"target_node_id\":\"1479a30029aa41b1b03b0b67df37d353\",\"id\":\"ebfafe691a2248368e7b7f25356e0eb7\"},{\"type\":\"Edge\",\"source_node_id\":\"eba28c1250c34694b7f0530270f0763a\",\"target_node_id\":\"1d356664df1c4cc7882ae029bca9eb8f\",\"branch_id\":\"15d26aa7929046f1b3c19bf0ed0b939d\",\"id\":\"5d8f9a73dcda475f89940ce76020c1e1\",\"name\":\"15d26aa7929046f1b3c19bf0ed0b939d\"},{\"type\":\"Edge\",\"source_node_id\":\"eba28c1250c34694b7f0530270f0763a\",\"target_node_id\":\"3eedc143c48148fd8ba2a0da5de37deb\",\"branch_id\":\"90f4554887014e8ab3cbda6268c5ec3c\",\"id\":\"a6b0c170320547ea9fffc5e0fc4191f8\",\"name\":\"90f4554887014e8ab3cbda6268c5ec3c\"},{\"type\":\"Edge\",\"source_node_id\":\"3eedc143c48148fd8ba2a0da5de37deb\",\"target_node_id\":\"5b49458968f44cc8b852b685d54d11bc\",\"id\":\"b97ae119489f404da2c7d25b515890e5\"},{\"type\":\"Edge\",\"source_node_id\":\"5b49458968f44cc8b852b685d54d11bc\",\"target_node_id\":\"1d356664df1c4cc7882ae029bca9eb8f\",\"branch_id\":\"ebabdb5f66344bd99c45ce7d4d6ade3d\",\"id\":\"55a57495b4e5406ab1f68dd77c5acb98\",\"name\":\"ebabdb5f66344bd99c45ce7d4d6ade3d\"},{\"type\":\"Edge\",\"source_node_id\":\"5b49458968f44cc8b852b685d54d11bc\",\"target_node_id\":\"3021336aff194c9a82b0d950df7f42df\",\"branch_id\":\"7e804d9949f94867af48ebfd96414e25\",\"id\":\"40df44f089d6473da8373f66a37d752f\",\"name\":\"7e804d9949f94867af48ebfd96414e25\"},{\"type\":\"Edge\",\"source_node_id\":\"3021336aff194c9a82b0d950df7f42df\",\"target_node_id\":\"1d356664df1c4cc7882ae029bca9eb8f\",\"id\":\"64467e9a77ba4847bc336a9bc2d2d0bf\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"topicNotExecuted\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"8a76249fc9fa411dbdab1735a87972a3\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"True/False\",\"type\":\"True/False\",\"id\":\"b2226783c64745a296ba707d881dee90\",\"name\":\"topic_execution_confirmation\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"diagnosticcontent\",\"list\":false,\"id\":\"1d8a9efc5f2a41f397ea061ce5b8e3eb\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"type\":\"True/False\",\"id\":\"7e253fcd8521422fab36ea9325de1d8c\",\"name\":\"data_collection_topic_confirmation\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"434a64fd531db410f738ddeeff7b12c7\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"diagnosticcontent\",\"label\":\"diagnosticContent\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"1d8a9efc5f2a41f397ea061ce5b8e3eb\",\"type\":\"String\"}],\"return-values-mapping\":[{\"name\":\"istopicexecuted\",\"label\":\"isTopicExecuted\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.topic_execution_confirmation}}\"}},{\"name\":\"isdatacollectiontopicexecuted\",\"label\":\"isDataCollectionTopicExecuted\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.data_collection_topic_confirmation}}\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"id\":\"5a9d5e908775c150b6edcbfc0ebb3573\",\"name\":\"Diagnostic Topic Executer\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":true,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Diagnostic Topic Executer","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/434a64fd531db410f738ddeeff7b12c7","value":"434a64fd531db410f738ddeeff7b12c7"},"design_topic_id":"5a9d5e908775c150b6edcbfc0ebb3573","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/6fcf5a148775c150b6edcbfc0ebb3518","value":"6fcf5a148775c150b6edcbfc0ebb3518"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"7","sys_updated_on":"2021-08-31 09:18:24","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"69d49124537310100e99ddeeff7b1227","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9cc37b3704b52210559073c06a02f781","value":"9cc37b3704b52210559073c06a02f781"},"sys_update_name":"sys_cb_design_topic_69d49124537310100e99ddeeff7b1227","sys_updated_by":"admin","sys_created_on":"2020-10-08 12:32:41","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"d1f25cde36b3427b836b56d33bf6a4e2\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"d1f25cde36b3427b836b56d33bf6a4e2\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"d1f25cde36b3427b836b56d33bf6a4e2\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\"},\"id\":\"c16a945b798b482ab7fdf2bed0af010f\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n})()\\n\"},\"id\":\"403fd7d866864738a94d9754d0052b4b\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var cafContextualUtility = new CAFContextualUtility();\\n    cafContextualUtility.postProcess();   \\n})()\",\"id\":\"aef55f283fb4482badef2e0d96d60db7\",\"name\":\"Post processing\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"bf27f8ff7c1e41cfbd4eb0202388feb3\",\"name\":\"Help card\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n    return vaSystem.renderCard(\\\"Help\\\", vaVars._help_card);\\n})()\\n\"},\"secure\":false},{\"type\":\"OutputPrompt\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Here are some helpful commands you can enter any time:\\\", vaContext.getRequesterLang())\"},\"id\":\"63a8cb25590f4606a4b39dcbe2b75f3c\",\"name\":\"Helpful commands message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"OutputPrompt\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"I can help you with your questions and requests.\\\", vaContext.getRequesterLang())\"},\"id\":\"dd5e170db103464a8fec5a246b79b4fb\",\"name\":\"I can help message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var applicableKeywords = [];\\n    if (vaVars.global_hi_keyword != undefined && vaVars.global_hi_keyword != \\\"\\\") {\\n        applicableKeywords.push({\\n            \\\"fieldLabel\\\": vaVars.global_hi_keyword,\\n            \\\"fieldValue\\\": gs.getMessageLang(\\\"Greet the bot to start or end a conversation.\\\", vaContext.getRequesterLang())\\n        });\\n        vaVars.global_hi_keyword = \\\"\\\";\\n    }\\n    if (vaVars.global_topic_switch != true  && vaVars.global_bye_keyword != undefined && vaVars.global_bye_keyword != \\\"\\\") {\\n        applicableKeywords.push({\\n            \\\"fieldLabel\\\": vaVars.global_bye_keyword,\\n            \\\"fieldValue\\\": gs.getMessageLang(\\\"End current conversation.\\\", vaContext.getRequesterLang())\\n        });\\n        vaVars.global_hi_keyword = \\\"\\\";\\n    }\\n    if (vaVars.global_restart_keyword != undefined && vaVars.global_restart_keyword != \\\"\\\") {\\n        applicableKeywords.push({\\n            \\\"fieldLabel\\\": vaVars.global_restart_keyword,\\n            \\\"fieldValue\\\": gs.getMessageLang(\\\"Begin a new conversation and end the current one.\\\", vaContext.getRequesterLang())\\n        });\\n        vaVars.global_restart_keyword = \\\"\\\";\\n    }\\n    if (vaVars.global_agent_keyword != undefined && vaVars.global_agent_keyword != \\\"\\\") {\\n        applicableKeywords.push({\\n            \\\"fieldLabel\\\": vaVars.global_agent_keyword,\\n            \\\"fieldValue\\\": gs.getMessageLang(\\\"Request a transfer to a live agent.\\\", vaContext.getRequesterLang())\\n        });\\n        vaVars.global_agent_keyword = \\\"\\\";\\n    }\\n    if (vaVars.global_logout_keyword != undefined && vaVars.global_logout_keyword != \\\"\\\") {\\n        applicableKeywords.push({\\n            \\\"fieldLabel\\\": vaVars.global_logout_keyword,\\n            \\\"fieldValue\\\": gs.getMessageLang(\\\"Unlink your account with ServiceNow.\\\", vaContext.getRequesterLang())\\n        });\\n        vaVars.global_logout_keyword = \\\"\\\";\\n    }\\n    if (vaVars.global_notifications_keyword != undefined && vaVars.global_notifications_keyword != \\\"\\\") {\\n        applicableKeywords.push({\\n            \\\"fieldLabel\\\": vaVars.global_notifications_keyword,\\n            \\\"fieldValue\\\": gs.getMessageLang(\\\"To subscribe or unsubscribe from notification.\\\", vaContext.getRequesterLang())\\n        });\\n        vaVars.global_notifications_keyword = \\\"\\\";\\n    }\\n\\n    if (typeof applicableKeywords != \\\"undefined\\\" && applicableKeywords != null && \\n        applicableKeywords.length != null && applicableKeywords.length > 0) {\\n        var card_data = JSON.stringify({\\n            \\\"title\\\":gs.getMessageLang(\\\"Tips\\\", vaContext.getRequesterLang()),\\n            \\\"fields\\\":applicableKeywords,\\n        });\\n        vaVars._help_card = card_data;\\n    }\\n})()\\n\",\"id\":\"92bc1f76b1ad44279fd3f637bdc26de5\",\"name\":\"Generate help card\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Any Contextual Actions?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars._help_card == '' || vaVars._help_card == null)\\n    return true;\\n    else\\n    return false;\\n})()\\n\"},\"id\":\"e4fd91158b9e4d74ac94daa70110d5b0\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars._help_card != '' && vaVars._help_card != null)\\n    return true;\\n    else \\n    return false;\\n})()\\n\"},\"id\":\"c5a84de4b670447f874f206e5c0c3a15\",\"name\":\"Yes\"}],\"id\":\"81ccc739ce514c29b4acaa39b44959a5\",\"goal_id\":\"primary\"},{\"type\":\"OutputPrompt\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No contextual action keywords are available at the moment.\\\", vaContext.getRequesterLang())\"},\"id\":\"2f0ab005f10945d0b4939a310d0565dd\",\"name\":\"No keywords available message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Invoked from keyword\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !(vaVars.global_topic_switch == true);\\n})()\\n\"},\"id\":\"a7fbb96711934999af70b208afe859cd\",\"name\":\"Invoked from keyword\"},{\"type\":\"Branch\",\"label\":\"Invoked from Topic\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_topic_switch == true;\\n})()\\n\"},\"id\":\"0f42af18fc6145b5bbb048501593a606\",\"name\":\"Invoked from Topic\"}],\"id\":\"38a5010cef164b3aa116f2c0c69ed596\",\"goal_id\":\"primary\"},{\"type\":\"OutputPrompt\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var selectedOption = gs.getMessageLang(vaVars.global_clicked_value);\\n    return gs.getMessageLang(\\\"Ok. So, you have selected {0}.\\\", vaContext.getRequesterLang(), [selectedOption]);\\n})()\\n\"},\"id\":\"c4a48f64d2d54aa595320c61d6fcbe52\",\"name\":\"Option selection message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"aef55f283fb4482badef2e0d96d60db7\",\"target_node_id\":\"403fd7d866864738a94d9754d0052b4b\",\"id\":\"9ce50483138749e4b73f4f38e80a1771\"},{\"type\":\"Edge\",\"source_node_id\":\"63a8cb25590f4606a4b39dcbe2b75f3c\",\"target_node_id\":\"bf27f8ff7c1e41cfbd4eb0202388feb3\",\"id\":\"f13767e9f8ec448790b4d8b5d642faa9\"},{\"type\":\"Edge\",\"source_node_id\":\"bf27f8ff7c1e41cfbd4eb0202388feb3\",\"target_node_id\":\"aef55f283fb4482badef2e0d96d60db7\",\"id\":\"2e8f6d42819543b39db2480da1f38465\"},{\"type\":\"Edge\",\"source_node_id\":\"dd5e170db103464a8fec5a246b79b4fb\",\"target_node_id\":\"63a8cb25590f4606a4b39dcbe2b75f3c\",\"id\":\"cf00bba611bc4cb2aa6a8fba7ea830cc\"},{\"type\":\"Edge\",\"source_node_id\":\"c16a945b798b482ab7fdf2bed0af010f\",\"target_node_id\":\"92bc1f76b1ad44279fd3f637bdc26de5\",\"id\":\"6b772dbd0b7b4071863d247032daf76a\"},{\"type\":\"Edge\",\"source_node_id\":\"92bc1f76b1ad44279fd3f637bdc26de5\",\"target_node_id\":\"81ccc739ce514c29b4acaa39b44959a5\",\"id\":\"284780d0bde44835941349c3d19f04ca\"},{\"type\":\"Edge\",\"source_node_id\":\"81ccc739ce514c29b4acaa39b44959a5\",\"target_node_id\":\"2f0ab005f10945d0b4939a310d0565dd\",\"branch_id\":\"e4fd91158b9e4d74ac94daa70110d5b0\",\"id\":\"08a659282a7e4d1e9bbc191273745658\",\"name\":\"e4fd91158b9e4d74ac94daa70110d5b0\"},{\"type\":\"Edge\",\"source_node_id\":\"2f0ab005f10945d0b4939a310d0565dd\",\"target_node_id\":\"aef55f283fb4482badef2e0d96d60db7\",\"id\":\"9c94906e2bb84cb3b2f426af11d0b9a3\"},{\"type\":\"Edge\",\"source_node_id\":\"81ccc739ce514c29b4acaa39b44959a5\",\"target_node_id\":\"38a5010cef164b3aa116f2c0c69ed596\",\"branch_id\":\"c5a84de4b670447f874f206e5c0c3a15\",\"id\":\"554af317350643c7a20f37d31939e768\",\"name\":\"c5a84de4b670447f874f206e5c0c3a15\"},{\"type\":\"Edge\",\"source_node_id\":\"38a5010cef164b3aa116f2c0c69ed596\",\"target_node_id\":\"dd5e170db103464a8fec5a246b79b4fb\",\"branch_id\":\"a7fbb96711934999af70b208afe859cd\",\"id\":\"b0175314e6534015a033ed1fc1cde8c3\",\"name\":\"a7fbb96711934999af70b208afe859cd\"},{\"type\":\"Edge\",\"source_node_id\":\"38a5010cef164b3aa116f2c0c69ed596\",\"target_node_id\":\"c4a48f64d2d54aa595320c61d6fcbe52\",\"branch_id\":\"0f42af18fc6145b5bbb048501593a606\",\"id\":\"4a25549c057349798ba95a61af745e82\",\"name\":\"0f42af18fc6145b5bbb048501593a606\"},{\"type\":\"Edge\",\"source_node_id\":\"c4a48f64d2d54aa595320c61d6fcbe52\",\"target_node_id\":\"63a8cb25590f4606a4b39dcbe2b75f3c\",\"id\":\"078c26a4751542d28e3a41e9bb3148fc\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_help_card\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return '';\\n})()\\n\"},\"list\":false,\"id\":\"b985787a8bc74c43bc019567bdd89ce1\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return false;\\n})()\\n\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"c9fe517b532210105498ddeeff7b123c\",\"name\":\"_help_\",\"key_phrases\":[\"_help_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_help_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"c9fe517b532210105498ddeeff7b123c","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/b20fd17b532210105498ddeeff7b12b7","value":"b20fd17b532210105498ddeeff7b12b7"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"10","sys_updated_on":"2022-08-31 22:49:54","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"617b84f27732429db094912ed8a43cc4\": {\n          \"id\": \"617b84f27732429db094912ed8a43cc4\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"82992a076ffe431a80ea5c7701ba939a\": {\n          \"id\": \"82992a076ffe431a80ea5c7701ba939a\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"If tests have passed and you're still having trouble, please proceed with a topic flow.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          }\n        },\n        \"078d33ed65c74fd092e625ff45129151\": {\n          \"id\": \"078d33ed65c74fd092e625ff45129151\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Configuration health check confirmation\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"The health check report for each configuration will show below.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"01f9e81bb589449aa74d7b86d460ad11\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"3a0250fd6ac940da9b9a8a60a85742e1\": {\n          \"id\": \"3a0250fd6ac940da9b9a8a60a85742e1\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"6cd5eb4df08d405d95b1f153957c2a83\": {\n          \"id\": \"6cd5eb4df08d405d95b1f153957c2a83\",\n          \"stepType\": \"TableOutput\",\n          \"name\": \"Config health check report\",\n          \"header\": {\n            \"value\": \"(function execute() {\\n    var iar_config_names = JSON.parse(vaVars.iar_config_names);\\n    var config = iar_config_names.shift();\\n    vaVars.iar_config_names = JSON.stringify(iar_config_names);\\n    return config;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"displayColumnHeaders\": true,\n          \"dataSourceType\": \"script\",\n          \"script\": \"(function execute() {\\n    var iar_config_list = JSON.parse(vaVars.iar_config_list);\\n    var currConfig = iar_config_list.shift();\\n    vaVars.iar_config_list = JSON.stringify(iar_config_list);\\n    var grConfig = new GlideRecord(\\\"sys_cs_auto_resolution_configuration\\\");\\n    grConfig.get(currConfig);\\n\\n    // check that configuration is active\\n    var isActive = sn_oe_sfs.IARHealthCheck.checkConfigActive(currConfig) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n    \\n    // check that language configuration is active\\n    var configLanguageActive = sn_oe_sfs.IARHealthCheck.checkConfigLanguageActive(currConfig) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    // check for there is an active response channel\\n    var responseChannelActive = sn_oe_sfs.IARHealthCheck.checkReponseChannelActive(currConfig) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    // check for active intent topic map if incident\\n    var incidentIntentTopicMapActive = null;\\n    if (grConfig.target_table_name == \\\"incident\\\") {\\n        incidentIntentTopicMapActive = sn_oe_sfs.IARHealthCheck.checkIntentTopicMapActive(currConfig) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n    }\\n\\n    var aiSearchEnabled = null;\\n    var hrSlaEngine = null;\\n    if (global.AutoResolutionAPI.isHRCaseTable(grConfig.target_table_name.toString())) {\\n        // check that AI search is enabled if HR case\\n        aiSearchEnabled = sn_oe_sfs.IARHealthCheck.checkAISearchEnabled(currConfig) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n        // check that \\\"Use SLA Engine\\\" field is checked if HR case\\n        hrSlaEngine = sn_oe_sfs.IARHealthCheck.checkUseSLA(currConfig) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n    }\\n\\n    var headers = [];\\n    var rows = [];\\n    rows.push([\\n        \\\"Configuration is active\\\", isActive\\n    ]);\\n    rows.push([\\n        \\\"Language configuration is active\\\", configLanguageActive\\n    ]);\\n    rows.push([\\n        \\\"There is an active response channel\\\", responseChannelActive\\n    ]);\\n    if (incidentIntentTopicMapActive) {\\n        rows.push([\\n            \\\"There is an active intent topic map for incident configuration\\\", incidentIntentTopicMapActive\\n        ]);\\n    }\\n    if (aiSearchEnabled) {\\n        rows.push([\\n            \\\"AI search is enabled for HR configuration\\\", aiSearchEnabled\\n        ]);\\n    }\\n    if (hrSlaEngine) {\\n        rows.push([\\n            \\\"SLA engine is used for HR configuration\\\", hrSlaEngine\\n        ]);\\n    }\\n\\n    return {\\n        columnHeaders: headers,\\n        columnValues: rows\\n    };\\n})()\",\n          \"tableName\": \"\",\n          \"sortByColumns\": [],\n          \"tableCondition\": {\n            \"value\": \"\",\n            \"mode\": \"glide_query\"\n          },\n          \"columns\": [\n            {\n              \"key\": \"\",\n              \"value\": \"\",\n              \"label\": \"\"\n            }\n          ],\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Unable to run the health check on this configuration.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"e597cc2b3e304a1ebdba4eece6454ce7\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Choose table for health check\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"I found IAR configurations that I can run a health check on for the following related tables. Which table is the issue/case in? If you are unsure, you can run health check on all configurations.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"f1be52bb310d407bb548b264dcff2ad0\",\n          \"id\": \"e597cc2b3e304a1ebdba4eece6454ce7\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var configs = sn_oe_sfs.IARHealthCheck.getIARConfigurations();\\n    configs.map(function(config){\\n        options.push({\\n            'value': config[\\\"sys_id\\\"], 'label': config[\\\"table_display_value\\\"], 'render_style': 'data' \\n        });\\n    });\\n    options.push({\\n        'value': 'all_configs', 'label': gs.getMessageLang('Run health check on all configurations', vaContext.getRequesterLang()), 'render_style': 'data' \\n    });\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"There are no IAR configurations.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var configs = sn_oe_sfs.IARHealthCheck.getIARConfigurations();\\n    configs.map(function(config){\\n        options.push({\\n            'value': config[\\\"sys_id\\\"], 'label': config[\\\"table_display_value\\\"], 'render_style': 'data' \\n        });\\n    });\\n    options.push({\\n        'value': 'all_configs', 'label': gs.getMessageLang('Run health check on all configurations', vaContext.getRequesterLang()), 'render_style': 'data' \\n    });\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"eeb1e3f16c04413eb26b215a63f14c2a\": {\n          \"id\": \"eeb1e3f16c04413eb26b215a63f14c2a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"15e937f28a0d4e41bf1d728eb0578e6c\": {\n          \"id\": \"15e937f28a0d4e41bf1d728eb0578e6c\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Configuration health check confirmation\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return 'The health check report for the configuration with the related list ' + vaInputs.choose_table_for_health_check.getDisplayValue() + ' will show below.';\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"481394011558461aa9b301bac4b21fea\": {\n          \"id\": \"481394011558461aa9b301bac4b21fea\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Health check confirmation\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Here is the report for the general IAR configuration health check.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"11c2c82af93f40fbb57e162e3a6c5d19\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"94359dc2aa61412993f2566c54094e06\": {\n          \"id\": \"94359dc2aa61412993f2566c54094e06\",\n          \"stepType\": \"TableOutput\",\n          \"name\": \"Health check report\",\n          \"header\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"IAR Health Check\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"displayColumnHeaders\": true,\n          \"dataSourceType\": \"script\",\n          \"script\": \"(function execute() {\\n    gs.info(\\\"1--- \\\" + vaVars.iar_config_list);\\n    gs.info(\\\"1--- \\\" + vaVars.iar_config_names);\\n    // check if prediction server is up\\n    var predictionServerUp = sn_oe_sfs.IARHealthCheck.checkIsPredictionServerUp() ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    // check for existing configurations\\n    var configsExist = sn_oe_sfs.IARHealthCheck.checkConfigsExist() ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    // check for active configurations\\n    var configsActive = sn_oe_sfs.IARHealthCheck.checkActiveConfigExists() ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    var headers = [\\n        'Test',\\n        'Result'\\n    ];\\n    var rows = [];\\n    rows.push([\\n        'Prediction server is up', predictionServerUp\\n    ]);\\n    rows.push([\\n        'There are existing IAR configurations', configsExist\\n    ]);\\n    rows.push([\\n        'There is an active IAR configuration', configsActive\\n    ]);\\n    return {\\n        columnHeaders: headers,\\n        columnValues: rows\\n    };\\n})()\",\n          \"tableName\": \"\",\n          \"sortByColumns\": [],\n          \"tableCondition\": {\n            \"value\": \"\",\n            \"mode\": \"glide_query\"\n          },\n          \"columns\": [\n            {\n              \"key\": \"\",\n              \"value\": \"\",\n              \"label\": \"\"\n            }\n          ],\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Unable to run health check on IAR configurations.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"1d1ab5891d864ed186da2634bc743d83\": {\n          \"id\": \"1d1ab5891d864ed186da2634bc743d83\",\n          \"stepType\": \"TableOutput\",\n          \"name\": \"Config health check report\",\n          \"header\": {\n            \"value\": \"(function execute() {\\n    return vaInputs.choose_table_for_health_check.getDisplayValue();\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"displayColumnHeaders\": true,\n          \"dataSourceType\": \"script\",\n          \"script\": \"(function execute() {\\n    var configSysID = vaInputs.choose_table_for_health_check;\\n    var grConfig = new GlideRecord(\\\"sys_cs_auto_resolution_configuration\\\");\\n    grConfig.get(configSysID);\\n\\n    // check that configuration is active\\n    var isActive = sn_oe_sfs.IARHealthCheck.checkConfigActive(configSysID) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n    \\n    // check that language configuration is active\\n    var configLanguageActive = sn_oe_sfs.IARHealthCheck.checkConfigLanguageActive(configSysID) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    // check for there is an active response channel\\n    var responseChannelActive = sn_oe_sfs.IARHealthCheck.checkReponseChannelActive(configSysID) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    // check for active intent topic map if incident\\n    var incidentIntentTopicMapActive = null;\\n    if (grConfig.target_table_name == \\\"incident\\\") {\\n        incidentIntentTopicMapActive = sn_oe_sfs.IARHealthCheck.checkIntentTopicMapActive(configSysID) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n    }\\n\\n    var aiSearchEnabled = null;\\n    var hrSlaEngine = null;\\n    if (global.AutoResolutionAPI.isHRCaseTable(grConfig.target_table_name.toString())) {\\n        // check that AI search is enabled if HR case\\n        aiSearchEnabled = sn_oe_sfs.IARHealthCheck.checkAISearchEnabled(configSysID) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n        // check that \\\"Use SLA Engine\\\" field is checked if HR case\\n        hrSlaEngine = sn_oe_sfs.IARHealthCheck.checkUseSLA(configSysID) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n    }\\n\\n    var headers = [];\\n    var rows = [];\\n    rows.push([\\n        \\\"Configuration is active\\\", isActive\\n    ]);\\n    rows.push([\\n        \\\"Language configuration is active\\\", configLanguageActive\\n    ]);\\n    rows.push([\\n        \\\"There is an active response channel\\\", responseChannelActive\\n    ]);\\n    if (incidentIntentTopicMapActive) {\\n        rows.push([\\n            \\\"There is an active intent topic map for incident configuration\\\", incidentIntentTopicMapActive\\n        ]);\\n    }\\n    if (aiSearchEnabled) {\\n        rows.push([\\n            \\\"AI search is enabled for HR configuration\\\", aiSearchEnabled\\n        ]);\\n    }\\n    if (hrSlaEngine) {\\n        rows.push([\\n            \\\"SLA engine is used for HR configuration\\\", hrSlaEngine\\n        ]);\\n    }\\n\\n    return {\\n        columnHeaders: headers,\\n        columnValues: rows\\n    };\\n})()\\n\",\n          \"tableName\": \"\",\n          \"sortByColumns\": [],\n          \"tableCondition\": {\n            \"value\": \"\",\n            \"mode\": \"glide_query\"\n          },\n          \"columns\": [\n            {\n              \"key\": \"\",\n              \"value\": \"\",\n              \"label\": \"\"\n            }\n          ],\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Unable to run the health check on this configuration.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"819e7cace6de4c7bad90e24aa61dae74\": {\n          \"id\": \"819e7cace6de4c7bad90e24aa61dae74\",\n          \"name\": \"Get all configurations\",\n          \"script\": \"(function execute() {\\n    var iar_config_list = JSON.parse(vaVars.iar_config_list);\\n    var iar_config_names = JSON.parse(vaVars.iar_config_names);\\n\\n    var configs = sn_oe_sfs.IARHealthCheck.getIARConfigurations();\\n    configs.map(function(config){\\n        iar_config_list.push(config[\\\"sys_id\\\"]);\\n        iar_config_names.push(config[\\\"table_display_value\\\"]);\\n    });\\n\\n    vaVars.iar_config_list = JSON.stringify(iar_config_list);\\n    vaVars.iar_config_names = JSON.stringify(iar_config_names);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"a612fad9e58c459890787929bb13f5fa\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3a0250fd6ac940da9b9a8a60a85742e1\",\n          \"target\": \"82992a076ffe431a80ea5c7701ba939a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var iar_config_list = JSON.parse(vaVars.iar_config_list);\\n    return (iar_config_list.length == 0);\\n})()\"\n          },\n          \"label\": \"No config reports left\"\n        },\n        {\n          \"id\": \"a38d0d10ddb94403a6a94aed38d9a71c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eeb1e3f16c04413eb26b215a63f14c2a\",\n          \"target\": \"078d33ed65c74fd092e625ff45129151\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.choose_table_for_health_check == 'all_configs';\\n})()\\n\"\n          },\n          \"label\": \"Show all configs\"\n        },\n        {\n          \"id\": \"c612aa213736422da73f7d265807cf6f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"617b84f27732429db094912ed8a43cc4\",\n          \"target\": \"e597cc2b3e304a1ebdba4eece6454ce7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fa3d58f766114e4c8b5d80d4a4b4802d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"3a0250fd6ac940da9b9a8a60a85742e1\",\n          \"target\": \"6cd5eb4df08d405d95b1f153957c2a83\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var iar_config_list = JSON.parse(vaVars.iar_config_list);\\n    return (iar_config_list.length > 0);\\n})()\"\n          },\n          \"label\": \"Config reports left\"\n        },\n        {\n          \"id\": \"7df03aa908a942899803ce71e9178376\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6cd5eb4df08d405d95b1f153957c2a83\",\n          \"target\": \"3a0250fd6ac940da9b9a8a60a85742e1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3673e174d79c4498bbb6ff70980f41e3\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eeb1e3f16c04413eb26b215a63f14c2a\",\n          \"target\": \"15e937f28a0d4e41bf1d728eb0578e6c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.choose_table_for_health_check != 'all_configs';\\n})()\\n\"\n          },\n          \"label\": \"Show specific configuration\"\n        },\n        {\n          \"id\": \"05288161a7424cdbb82c36494f332388\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e597cc2b3e304a1ebdba4eece6454ce7\",\n          \"target\": \"481394011558461aa9b301bac4b21fea\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"aafc8bbd2138441dadf7d2e487fbd5f4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"481394011558461aa9b301bac4b21fea\",\n          \"target\": \"94359dc2aa61412993f2566c54094e06\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bf8094d51ee54610b401a01ff3e37ebf\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"94359dc2aa61412993f2566c54094e06\",\n          \"target\": \"eeb1e3f16c04413eb26b215a63f14c2a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b493aacdd1324bbc95eac78e6ffd2a29\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"15e937f28a0d4e41bf1d728eb0578e6c\",\n          \"target\": \"1d1ab5891d864ed186da2634bc743d83\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0eaac076c5ad4b718a12a9b33c8e3d36\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1d1ab5891d864ed186da2634bc743d83\",\n          \"target\": \"82992a076ffe431a80ea5c7701ba939a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7885d6e4451c46c386ff8bb9825caf3f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"078d33ed65c74fd092e625ff45129151\",\n          \"target\": \"819e7cace6de4c7bad90e24aa61dae74\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"35e1ac562902455d8158ba7145abc5a3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"819e7cace6de4c7bad90e24aa61dae74\",\n          \"target\": \"3a0250fd6ac940da9b9a8a60a85742e1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"40ae26c1821440f4ab40b0f96300bf71\": {\n      \"id\": \"40ae26c1821440f4ab40b0f96300bf71\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return [];\\n})()\\n\"\n      },\n      \"name\": \"iar_config_list\",\n      \"label\": \"iar_config_list\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5527aed663e9435a9d95e605ad66187b\": {\n      \"id\": \"5527aed663e9435a9d95e605ad66187b\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return [];\\n})()\\n\"\n      },\n      \"name\": \"iar_config_names\",\n      \"label\": \"iar_config_names\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f1be52bb310d407bb548b264dcff2ad0\": {\n      \"id\": \"f1be52bb310d407bb548b264dcff2ad0\",\n      \"name\": \"choose_table_for_health_check\",\n      \"label\": \"Choose Table For Health Check\",\n      \"varType\": \"reference\",\n      \"table\": \"sys_cs_auto_resolution_configuration\",\n      \"category\": \"vaInputs\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"6db8406ec0781d10f877e9d0ea777a84","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_cb_design_topic_6db8406ec0781d10f877e9d0ea777a84","sys_updated_by":"maint","sys_created_on":"2022-07-22 17:44:11","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"683359f7d6a8433b9016deb8daae780c\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"683359f7d6a8433b9016deb8daae780c\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"683359f7d6a8433b9016deb8daae780c\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"617b84f27732429db094912ed8a43cc4\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"If tests have passed and you're still having trouble, please proceed with a topic flow.\\\", vaContext.getRequesterLang())\"},\"id\":\"82992a076ffe431a80ea5c7701ba939a\",\"name\":\"End\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"The health check report for each configuration will show below.\\\", vaContext.getRequesterLang())\"}],\"id\":\"078d33ed65c74fd092e625ff45129151\",\"name\":\"Configuration health check confirmation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No config reports left\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var iar_config_list = JSON.parse(vaVars.iar_config_list);\\n    return (iar_config_list.length == 0);\\n})()\"},\"id\":\"3ff54d2539b74214bea1972c8afa43f8\",\"name\":\"No config reports left\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Config reports left\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var iar_config_list = JSON.parse(vaVars.iar_config_list);\\n    return (iar_config_list.length > 0);\\n})()\"},\"id\":\"abf88d795dd646309080a0162e2a044c\",\"name\":\"Config reports left\"}],\"id\":\"3a0250fd6ac940da9b9a8a60a85742e1\",\"goal_id\":\"primary\"},{\"type\":\"TableOutput\",\"type\":\"TableOutput\",\"mode\":\"external\",\"conditionType\":\"simple\",\"query\":\"(function execute() {\\n    var iar_config_list = JSON.parse(vaVars.iar_config_list);\\n    var currConfig = iar_config_list.shift();\\n    vaVars.iar_config_list = JSON.stringify(iar_config_list);\\n    var grConfig = new GlideRecord(\\\"sys_cs_auto_resolution_configuration\\\");\\n    grConfig.get(currConfig);\\n\\n    // check that configuration is active\\n    var isActive = sn_oe_sfs.IARHealthCheck.checkConfigActive(currConfig) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n    \\n    // check that language configuration is active\\n    var configLanguageActive = sn_oe_sfs.IARHealthCheck.checkConfigLanguageActive(currConfig) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    // check for there is an active response channel\\n    var responseChannelActive = sn_oe_sfs.IARHealthCheck.checkReponseChannelActive(currConfig) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    // check for active intent topic map if incident\\n    var incidentIntentTopicMapActive = null;\\n    if (grConfig.target_table_name == \\\"incident\\\") {\\n        incidentIntentTopicMapActive = sn_oe_sfs.IARHealthCheck.checkIntentTopicMapActive(currConfig) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n    }\\n\\n    var aiSearchEnabled = null;\\n    var hrSlaEngine = null;\\n    if (global.AutoResolutionAPI.isHRCaseTable(grConfig.target_table_name.toString())) {\\n        // check that AI search is enabled if HR case\\n        aiSearchEnabled = sn_oe_sfs.IARHealthCheck.checkAISearchEnabled(currConfig) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n        // check that \\\"Use SLA Engine\\\" field is checked if HR case\\n        hrSlaEngine = sn_oe_sfs.IARHealthCheck.checkUseSLA(currConfig) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n    }\\n\\n    var headers = [];\\n    var rows = [];\\n    rows.push([\\n        \\\"Configuration is active\\\", isActive\\n    ]);\\n    rows.push([\\n        \\\"Language configuration is active\\\", configLanguageActive\\n    ]);\\n    rows.push([\\n        \\\"There is an active response channel\\\", responseChannelActive\\n    ]);\\n    if (incidentIntentTopicMapActive) {\\n        rows.push([\\n            \\\"There is an active intent topic map for incident configuration\\\", incidentIntentTopicMapActive\\n        ]);\\n    }\\n    if (aiSearchEnabled) {\\n        rows.push([\\n            \\\"AI search is enabled for HR configuration\\\", aiSearchEnabled\\n        ]);\\n    }\\n    if (hrSlaEngine) {\\n        rows.push([\\n            \\\"SLA engine is used for HR configuration\\\", hrSlaEngine\\n        ]);\\n    }\\n\\n    return {\\n        columnHeaders: headers,\\n        columnValues: rows\\n    };\\n})()\",\"title\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var iar_config_names = JSON.parse(vaVars.iar_config_names);\\n    var config = iar_config_names.shift();\\n    vaVars.iar_config_names = JSON.stringify(iar_config_names);\\n    return config;\\n})()\"},\"columns\":[],\"showColumnHeaders\":true,\"noResultsMessage\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"Unable to run the health check on this configuration.\"},\"id\":\"6cd5eb4df08d405d95b1f153957c2a83\",\"name\":\"Config health check report\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ReferenceChoiceInputPrompt\",\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"e597cc2b3e304a1ebdba4eece6454ce7\",\"name\":\"Choose table for health check\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"f1be52bb310d407bb548b264dcff2ad0\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"I found IAR configurations that I can run a health check on for the following related tables. Which table is the issue/case in? If you are unsure, you can run health check on all configurations.\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var configs = sn_oe_sfs.IARHealthCheck.getIARConfigurations();\\n    configs.map(function(config){\\n        options.push({\\n            'value': config[\\\"sys_id\\\"], 'label': config[\\\"table_display_value\\\"], 'render_style': 'data' \\n        });\\n    });\\n    options.push({\\n        'value': 'all_configs', 'label': gs.getMessageLang('Run health check on all configurations', vaContext.getRequesterLang()), 'render_style': 'data' \\n    });\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"There are no IAR configurations.\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    var configs = sn_oe_sfs.IARHealthCheck.getIARConfigurations();\\n    configs.map(function(config){\\n        options.push({\\n            'value': config[\\\"sys_id\\\"], 'label': config[\\\"table_display_value\\\"], 'render_style': 'data' \\n        });\\n    });\\n    options.push({\\n        'value': 'all_configs', 'label': gs.getMessageLang('Run health check on all configurations', vaContext.getRequesterLang()), 'render_style': 'data' \\n    });\\n    return options;\\n})()\\n\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Show all configs\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.choose_table_for_health_check == 'all_configs';\\n})()\\n\"},\"id\":\"f0a7c03fac144fe8b2bb425587fc7a95\",\"name\":\"Show all configs\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Show specific configuration\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.choose_table_for_health_check != 'all_configs';\\n})()\\n\"},\"id\":\"4779a482da3b4e3bb7cadf7e7cac6267\",\"name\":\"Show specific configuration\"}],\"id\":\"eeb1e3f16c04413eb26b215a63f14c2a\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return 'The health check report for the configuration with the related list ' + vaInputs.choose_table_for_health_check.getDisplayValue() + ' will show below.';\\n})()\\n\"}],\"id\":\"15e937f28a0d4e41bf1d728eb0578e6c\",\"name\":\"Configuration health check confirmation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Here is the report for the general IAR configuration health check.\\\", vaContext.getRequesterLang())\"}],\"id\":\"481394011558461aa9b301bac4b21fea\",\"name\":\"Health check confirmation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TableOutput\",\"type\":\"TableOutput\",\"mode\":\"external\",\"conditionType\":\"simple\",\"query\":\"(function execute() {\\n    gs.info(\\\"1--- \\\" + vaVars.iar_config_list);\\n    gs.info(\\\"1--- \\\" + vaVars.iar_config_names);\\n    // check if prediction server is up\\n    var predictionServerUp = sn_oe_sfs.IARHealthCheck.checkIsPredictionServerUp() ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    // check for existing configurations\\n    var configsExist = sn_oe_sfs.IARHealthCheck.checkConfigsExist() ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    // check for active configurations\\n    var configsActive = sn_oe_sfs.IARHealthCheck.checkActiveConfigExists() ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    var headers = [\\n        'Test',\\n        'Result'\\n    ];\\n    var rows = [];\\n    rows.push([\\n        'Prediction server is up', predictionServerUp\\n    ]);\\n    rows.push([\\n        'There are existing IAR configurations', configsExist\\n    ]);\\n    rows.push([\\n        'There is an active IAR configuration', configsActive\\n    ]);\\n    return {\\n        columnHeaders: headers,\\n        columnValues: rows\\n    };\\n})()\",\"title\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"IAR Health Check\"},\"columns\":[],\"showColumnHeaders\":true,\"noResultsMessage\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"Unable to run health check on IAR configurations.\"},\"id\":\"94359dc2aa61412993f2566c54094e06\",\"name\":\"Health check report\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TableOutput\",\"type\":\"TableOutput\",\"mode\":\"external\",\"conditionType\":\"simple\",\"query\":\"(function execute() {\\n    var configSysID = vaInputs.choose_table_for_health_check;\\n    var grConfig = new GlideRecord(\\\"sys_cs_auto_resolution_configuration\\\");\\n    grConfig.get(configSysID);\\n\\n    // check that configuration is active\\n    var isActive = sn_oe_sfs.IARHealthCheck.checkConfigActive(configSysID) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n    \\n    // check that language configuration is active\\n    var configLanguageActive = sn_oe_sfs.IARHealthCheck.checkConfigLanguageActive(configSysID) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    // check for there is an active response channel\\n    var responseChannelActive = sn_oe_sfs.IARHealthCheck.checkReponseChannelActive(configSysID) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n    // check for active intent topic map if incident\\n    var incidentIntentTopicMapActive = null;\\n    if (grConfig.target_table_name == \\\"incident\\\") {\\n        incidentIntentTopicMapActive = sn_oe_sfs.IARHealthCheck.checkIntentTopicMapActive(configSysID) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n    }\\n\\n    var aiSearchEnabled = null;\\n    var hrSlaEngine = null;\\n    if (global.AutoResolutionAPI.isHRCaseTable(grConfig.target_table_name.toString())) {\\n        // check that AI search is enabled if HR case\\n        aiSearchEnabled = sn_oe_sfs.IARHealthCheck.checkAISearchEnabled(configSysID) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n\\n        // check that \\\"Use SLA Engine\\\" field is checked if HR case\\n        hrSlaEngine = sn_oe_sfs.IARHealthCheck.checkUseSLA(configSysID) ? \\\"PASSED\\\" : \\\"FAILED\\\";\\n    }\\n\\n    var headers = [];\\n    var rows = [];\\n    rows.push([\\n        \\\"Configuration is active\\\", isActive\\n    ]);\\n    rows.push([\\n        \\\"Language configuration is active\\\", configLanguageActive\\n    ]);\\n    rows.push([\\n        \\\"There is an active response channel\\\", responseChannelActive\\n    ]);\\n    if (incidentIntentTopicMapActive) {\\n        rows.push([\\n            \\\"There is an active intent topic map for incident configuration\\\", incidentIntentTopicMapActive\\n        ]);\\n    }\\n    if (aiSearchEnabled) {\\n        rows.push([\\n            \\\"AI search is enabled for HR configuration\\\", aiSearchEnabled\\n        ]);\\n    }\\n    if (hrSlaEngine) {\\n        rows.push([\\n            \\\"SLA engine is used for HR configuration\\\", hrSlaEngine\\n        ]);\\n    }\\n\\n    return {\\n        columnHeaders: headers,\\n        columnValues: rows\\n    };\\n})()\\n\",\"title\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.choose_table_for_health_check.getDisplayValue();\\n})()\\n\"},\"columns\":[],\"showColumnHeaders\":true,\"noResultsMessage\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"Unable to run the health check on this configuration.\"},\"id\":\"1d1ab5891d864ed186da2634bc743d83\",\"name\":\"Config health check report\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var iar_config_list = JSON.parse(vaVars.iar_config_list);\\n    var iar_config_names = JSON.parse(vaVars.iar_config_names);\\n\\n    var configs = sn_oe_sfs.IARHealthCheck.getIARConfigurations();\\n    configs.map(function(config){\\n        iar_config_list.push(config[\\\"sys_id\\\"]);\\n        iar_config_names.push(config[\\\"table_display_value\\\"]);\\n    });\\n\\n    vaVars.iar_config_list = JSON.stringify(iar_config_list);\\n    vaVars.iar_config_names = JSON.stringify(iar_config_names);\\n})()\\n\",\"id\":\"819e7cace6de4c7bad90e24aa61dae74\",\"name\":\"Get all configurations\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"3a0250fd6ac940da9b9a8a60a85742e1\",\"target_node_id\":\"82992a076ffe431a80ea5c7701ba939a\",\"branch_id\":\"3ff54d2539b74214bea1972c8afa43f8\",\"id\":\"a612fad9e58c459890787929bb13f5fa\",\"name\":\"3ff54d2539b74214bea1972c8afa43f8\"},{\"type\":\"Edge\",\"source_node_id\":\"eeb1e3f16c04413eb26b215a63f14c2a\",\"target_node_id\":\"078d33ed65c74fd092e625ff45129151\",\"branch_id\":\"f0a7c03fac144fe8b2bb425587fc7a95\",\"id\":\"a38d0d10ddb94403a6a94aed38d9a71c\",\"name\":\"f0a7c03fac144fe8b2bb425587fc7a95\"},{\"type\":\"Edge\",\"source_node_id\":\"617b84f27732429db094912ed8a43cc4\",\"target_node_id\":\"e597cc2b3e304a1ebdba4eece6454ce7\",\"id\":\"c612aa213736422da73f7d265807cf6f\"},{\"type\":\"Edge\",\"source_node_id\":\"3a0250fd6ac940da9b9a8a60a85742e1\",\"target_node_id\":\"6cd5eb4df08d405d95b1f153957c2a83\",\"branch_id\":\"abf88d795dd646309080a0162e2a044c\",\"id\":\"fa3d58f766114e4c8b5d80d4a4b4802d\",\"name\":\"abf88d795dd646309080a0162e2a044c\"},{\"type\":\"Edge\",\"source_node_id\":\"6cd5eb4df08d405d95b1f153957c2a83\",\"target_node_id\":\"3a0250fd6ac940da9b9a8a60a85742e1\",\"id\":\"7df03aa908a942899803ce71e9178376\"},{\"type\":\"Edge\",\"source_node_id\":\"eeb1e3f16c04413eb26b215a63f14c2a\",\"target_node_id\":\"15e937f28a0d4e41bf1d728eb0578e6c\",\"branch_id\":\"4779a482da3b4e3bb7cadf7e7cac6267\",\"id\":\"3673e174d79c4498bbb6ff70980f41e3\",\"name\":\"4779a482da3b4e3bb7cadf7e7cac6267\"},{\"type\":\"Edge\",\"source_node_id\":\"e597cc2b3e304a1ebdba4eece6454ce7\",\"target_node_id\":\"481394011558461aa9b301bac4b21fea\",\"id\":\"05288161a7424cdbb82c36494f332388\"},{\"type\":\"Edge\",\"source_node_id\":\"481394011558461aa9b301bac4b21fea\",\"target_node_id\":\"94359dc2aa61412993f2566c54094e06\",\"id\":\"aafc8bbd2138441dadf7d2e487fbd5f4\"},{\"type\":\"Edge\",\"source_node_id\":\"94359dc2aa61412993f2566c54094e06\",\"target_node_id\":\"eeb1e3f16c04413eb26b215a63f14c2a\",\"id\":\"bf8094d51ee54610b401a01ff3e37ebf\"},{\"type\":\"Edge\",\"source_node_id\":\"15e937f28a0d4e41bf1d728eb0578e6c\",\"target_node_id\":\"1d1ab5891d864ed186da2634bc743d83\",\"id\":\"b493aacdd1324bbc95eac78e6ffd2a29\"},{\"type\":\"Edge\",\"source_node_id\":\"1d1ab5891d864ed186da2634bc743d83\",\"target_node_id\":\"82992a076ffe431a80ea5c7701ba939a\",\"id\":\"0eaac076c5ad4b718a12a9b33c8e3d36\"},{\"type\":\"Edge\",\"source_node_id\":\"078d33ed65c74fd092e625ff45129151\",\"target_node_id\":\"819e7cace6de4c7bad90e24aa61dae74\",\"id\":\"7885d6e4451c46c386ff8bb9825caf3f\"},{\"type\":\"Edge\",\"source_node_id\":\"819e7cace6de4c7bad90e24aa61dae74\",\"target_node_id\":\"3a0250fd6ac940da9b9a8a60a85742e1\",\"id\":\"35e1ac562902455d8158ba7145abc5a3\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"iar_config_list\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return [];\\n})()\\n\"},\"list\":false,\"id\":\"40ae26c1821440f4ab40b0f96300bf71\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"iar_config_names\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return [];\\n})()\\n\"},\"list\":false,\"id\":\"5527aed663e9435a9d95e605ad66187b\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[],\"id\":\"f1be52bb310d407bb548b264dcff2ad0\",\"name\":\"choose_table_for_health_check\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"sys_cs_auto_resolution_configuration\"}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"53b1b0e79761011018b2fa98c253afcc\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"ef710f42c0f4d910f877e9d0ea777a61\",\"name\":\"IAR Health Check\",\"key_phrases\":[\"IAR Health Check\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":false,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"IAR Health Check","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"design_topic_id":"ef710f42c0f4d910f877e9d0ea777a61","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/e1b8406ec0781d10f877e9d0ea777a80","value":"e1b8406ec0781d10f877e9d0ea777a80"},"sys_created_by":"maint","sys_policy":""},{"sys_mod_count":"20","sys_updated_on":"2022-09-13 15:16:26","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"4a0a528f521b458c8bc47d2ddbd06d0c\": {\n          \"id\": \"4a0a528f521b458c8bc47d2ddbd06d0c\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"d6949f2427b84faf894e7b7498997ade\": {\n          \"id\": \"d6949f2427b84faf894e7b7498997ade\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"5b4a4854f67a46ec926e8a34d10cbcb1\": {\n          \"id\": \"5b4a4854f67a46ec926e8a34d10cbcb1\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"Task number\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Please enter the incident/case number.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.global_task_number);\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"a989eaca2d1840c6a7602e03fad56f3d\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"f550de1f7de8427a8413e37037984074\": {\n          \"id\": \"f550de1f7de8427a8413e37037984074\",\n          \"name\": \"Find task\",\n          \"script\": \"(function execute() {\\n    if (!gs.nil(vaVars.global_task_number)) {\\n        vaInputs.task_number = vaVars.global_task_number;\\n        vaVars.global_task_number = \\\"\\\";\\n    }\\n    var task = sn_oe_sfs.IARIssueNotAssignedDiagnostic.findTask(vaInputs.task_number);\\n    if (!gs.nil(task)) {\\n        vaVars.task_number_found = true;\\n        vaVars.task_sys_id = task[\\\"sys_id\\\"];\\n        vaVars.config_name = task[\\\"config_table_name\\\"];\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9dd27ab0c12c4cb28dd16531fa58b68a\": {\n          \"id\": \"9dd27ab0c12c4cb28dd16531fa58b68a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"ad4dea1e1aa944b79bb0b52c51c4ce31\": {\n          \"id\": \"ad4dea1e1aa944b79bb0b52c51c4ce31\",\n          \"name\": \"Find IAR configuration for task\",\n          \"script\": \"(function execute() {\\n    var config = sn_oe_sfs.IARIssueNotAssignedDiagnostic.findConfig(vaVars.config_name);\\n    if (!gs.nil(config)) {\\n        vaVars.task_config_found = true;\\n        vaVars.config_sys_id = config;\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a341495e164e4e8f8eff85cd2d254f33\": {\n          \"id\": \"a341495e164e4e8f8eff85cd2d254f33\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"8eaa1f219d7f43eca1bf7bb4b274ca38\": {\n          \"id\": \"8eaa1f219d7f43eca1bf7bb4b274ca38\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"No config for task\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"IAR invocation failed because there is no IAR configuration for this task.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"24075b118c704ac8911d218991199156\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8de3469013ab4d3ab6e3c017c400c70c\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Task confirmation\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return \\\"I found the task with number \\\" + vaInputs.task_number + \\\". Are you sure this is the task you are looking for?\\\";\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"4a6acad144d34b8292780fda066df1f4\",\n          \"id\": \"8de3469013ab4d3ab6e3c017c400c70c\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"44d87b0ae6bb42dfbfec74239f70f657\": {\n          \"id\": \"44d87b0ae6bb42dfbfec74239f70f657\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f786e492543a46b884f92682da48c008\": {\n          \"id\": \"f786e492543a46b884f92682da48c008\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"IAR configuration name\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return \\\"I have found an Auto-Resolution configuration for \\\" + vaVars.config_name + \\\".\\\";\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"eb392a3078d54509bc3c30c1aea28f8d\": {\n          \"id\": \"eb392a3078d54509bc3c30c1aea28f8d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"9afe98a9b8144656b59a3607418501da\": {\n          \"id\": \"9afe98a9b8144656b59a3607418501da\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Retry task search\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return \\\"Unable to find the task with number \\\" + vaInputs.task_number + \\\". Please try again.\\\";\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"2b6f2f4ddafe4ef3af2f7c9529a9a4fa\": {\n          \"id\": \"2b6f2f4ddafe4ef3af2f7c9529a9a4fa\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Unable to find task\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return \\\"Sorry, I am not able to find the task with the number \\\" + vaInputs.task_number + \\\".\\\";\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"25cd2099525e4179a3d65d08750666a6\": {\n          \"id\": \"25cd2099525e4179a3d65d08750666a6\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"bd9e71c6074d488ea529c08fbd58d8f4\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Reroute confirmation\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Since the task was assigned to a bot user and IAR invocation succeeded, I can reroute you to the Diagnose IAR Flow Failure topic. Would you like to proceed?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"d94a19fbc23d4881b00817009b354d12\",\n          \"id\": \"bd9e71c6074d488ea529c08fbd58d8f4\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"84a9b0145a364bb98d434f851e0cecfb\": {\n          \"id\": \"84a9b0145a364bb98d434f851e0cecfb\",\n          \"name\": \"Reroute to Flow Failure topic\",\n          \"script\": \"(function execute() {\\n    vaVars.global_task_number = vaInputs.task_number;\\n    vaSystem.switchTopicById(\\\"c3bc9400c09d5190f877e9d0ea777a39\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"vaInputs.reroute_confirmation=reroute\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9b1971d1f9c94c0ea39a7cfb6e38d2fb\": {\n          \"id\": \"9b1971d1f9c94c0ea39a7cfb6e38d2fb\",\n          \"name\": \"Run checks\",\n          \"script\": \"(function execute() {\\n    var grConfig = new GlideRecord(\\\"sys_cs_auto_resolution_configuration\\\");\\n    grConfig.get(vaVars.config_sys_id);\\n    var errors = JSON.parse(vaVars.errors);\\n    \\n    if (grConfig.iar_invocation == \\\"api\\\") {\\n        // check that if business rule exists, it is inactive\\n        var configBr = sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkBrExists(vaVars.config_sys_id);\\n        if (!gs.nil(configBr) && sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkBrActive(configBr)) {\\n            errors.push(\\\"Configuration trigger is set to on demand, but it has an active business rule\\\");\\n        }\\n    }\\n    else if (grConfig.iar_invocation == \\\"business_rule\\\") {\\n        // check that business rule exists\\n        var configBr = sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkBrExists(vaVars.config_sys_id);\\n        if (gs.nil(configBr)) {\\n            errors.push(\\\"No business rule exists for this Auto-resolution configuration\\\");\\n        }\\n        \\n        else {\\n            // check that business rule is active\\n            if (!sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkBrActive(configBr))\\n                errors.push(\\\"Business rule is not active\\\");\\n            \\n            // check that business rule order is highest\\n            if (!sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkBrOrderIsHighest(configBr)) \\n                errors.push(\\\"Business rule order is not the highest\\\");\\n            \\n            // check that there is only 1 trigger business rule associated with the configuration\\n            if (!sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkConfigHasOneBr(configBr, vaVars.config_name)) \\n                errors.push(\\\"There is more than 1 trigger business rule associated with this Auto-resolution configuration\\\");\\n        }      \\n    }\\n\\n    // check that config conditions match incident condition\\n    if (!sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkTaskAndConfigConditionsMatch(vaVars.task_sys_id, vaVars.config_sys_id, vaVars.config_name)) {\\n        errors.push(\\\"Task created does not match the entry conditions on Auto-resolution configuration\\\")\\n    }\\n    \\n    vaVars.errors = JSON.stringify(errors);\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d84aefe43b434ee1b2f88a497433f17a\": {\n          \"id\": \"d84aefe43b434ee1b2f88a497433f17a\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Result\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var errors = JSON.parse(vaVars.errors);\\n    if (errors.length == 0) {\\n        vaVars.iar_invocation_succeeded = true;\\n        var assignedTo = sn_oe_sfs.IARIssueNotAssignedDiagnostic.getTaskAssignedTo(vaVars.config_sys_id);\\n        return \\\"After running checks, IAR invocation succeeded and the task should be assigned to \\\" + assignedTo + \\\".\\\";\\n    }\\n    else {\\n        var result = \\\"After running checks, IAR invocation failed. The error(s) are as follows:\\\\n\\\";\\n        while (errors.length != 0) {\\n            result += \\\"- \\\" + errors.shift();\\n            if (errors.length != 0) {\\n                result += \\\"\\\\n\\\";\\n            }\\n        }\\n        return result;\\n    }\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"205a7f4c590c41658fd2d69676865df9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4a0a528f521b458c8bc47d2ddbd06d0c\",\n          \"target\": \"5b4a4854f67a46ec926e8a34d10cbcb1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2399d95c7c1f4a698fbf985827d15d83\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"84a9b0145a364bb98d434f851e0cecfb\",\n          \"target\": \"d6949f2427b84faf894e7b7498997ade\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"93936f321a364df588e9aec388ce396f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f786e492543a46b884f92682da48c008\",\n          \"target\": \"9b1971d1f9c94c0ea39a7cfb6e38d2fb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"59609a0dbf21432e9501e5daca7dba27\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9dd27ab0c12c4cb28dd16531fa58b68a\",\n          \"target\": \"eb392a3078d54509bc3c30c1aea28f8d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.task_number_found;\\n})()\\n\"\n          },\n          \"label\": \"Task number not found\"\n        },\n        {\n          \"id\": \"cba27289643e449ab235ff563c68eab8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f550de1f7de8427a8413e37037984074\",\n          \"target\": \"9dd27ab0c12c4cb28dd16531fa58b68a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c0d0d1e6c441403d9d7fc366a8421feb\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5b4a4854f67a46ec926e8a34d10cbcb1\",\n          \"target\": \"f550de1f7de8427a8413e37037984074\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"99fc38cabb85476dba5b63e4ea8cb71a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ad4dea1e1aa944b79bb0b52c51c4ce31\",\n          \"target\": \"a341495e164e4e8f8eff85cd2d254f33\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1b2f448f3d76403ab9f73bc9a3d504b5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a341495e164e4e8f8eff85cd2d254f33\",\n          \"target\": \"8eaa1f219d7f43eca1bf7bb4b274ca38\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.task_config_found;\\n})()\\n\"\n          },\n          \"label\": \"Task Config Not Found\"\n        },\n        {\n          \"id\": \"fea155cf25e34fc382ce99ae3336e71d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8eaa1f219d7f43eca1bf7bb4b274ca38\",\n          \"target\": \"d6949f2427b84faf894e7b7498997ade\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bf07ceb8a9134bdd9adebe0e3257ce8f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9dd27ab0c12c4cb28dd16531fa58b68a\",\n          \"target\": \"8de3469013ab4d3ab6e3c017c400c70c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.task_number_found;\\n})()\\n\"\n          },\n          \"label\": \"Task number found\"\n        },\n        {\n          \"id\": \"b7f58587c16b402eb8777c8840133871\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8de3469013ab4d3ab6e3c017c400c70c\",\n          \"target\": \"44d87b0ae6bb42dfbfec74239f70f657\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6ea309592690423fa940fc2d5bbb93f4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"44d87b0ae6bb42dfbfec74239f70f657\",\n          \"target\": \"ad4dea1e1aa944b79bb0b52c51c4ce31\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.task_confirmation=correct_task\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Correct task found\"\n        },\n        {\n          \"id\": \"2f4e082612e34e9aaf03990391b4e109\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"44d87b0ae6bb42dfbfec74239f70f657\",\n          \"target\": \"5b4a4854f67a46ec926e8a34d10cbcb1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.task_confirmation=incorrect_task\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Incorrect task found\"\n        },\n        {\n          \"id\": \"3c7318e0af86438ba04a19275fe9dee3\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a341495e164e4e8f8eff85cd2d254f33\",\n          \"target\": \"f786e492543a46b884f92682da48c008\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.task_config_found;\\n})()\\n\"\n          },\n          \"label\": \"Task Config Found\"\n        },\n        {\n          \"id\": \"f8480e35971d448f81596039ed7960fc\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eb392a3078d54509bc3c30c1aea28f8d\",\n          \"target\": \"9afe98a9b8144656b59a3607418501da\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    vaVars.retry_task_search_count += 1;\\n    return vaVars.retry_task_search_count < 3;\\n})()\\n\"\n          },\n          \"label\": \"Retried < 3 times\"\n        },\n        {\n          \"id\": \"9eb7c9bc04a940c98c0fa05a5a8ee4ab\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9afe98a9b8144656b59a3607418501da\",\n          \"target\": \"5b4a4854f67a46ec926e8a34d10cbcb1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9bdd1fff7bb04f19bcaec0c1c2c95584\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"eb392a3078d54509bc3c30c1aea28f8d\",\n          \"target\": \"2b6f2f4ddafe4ef3af2f7c9529a9a4fa\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.retry_task_search_count == 3;\\n})()\\n\"\n          },\n          \"label\": \"Retried 3 times\"\n        },\n        {\n          \"id\": \"2c3af55888fa4fcf9fc9cc22924a2565\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2b6f2f4ddafe4ef3af2f7c9529a9a4fa\",\n          \"target\": \"d6949f2427b84faf894e7b7498997ade\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9f70b4fa7ff446c180974ba7ddc1968c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"25cd2099525e4179a3d65d08750666a6\",\n          \"target\": \"d6949f2427b84faf894e7b7498997ade\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.iar_invocation_succeeded;\\n})()\\n\"\n          },\n          \"label\": \"IAR invocation failed\"\n        },\n        {\n          \"id\": \"453b0ba133a0443492e81c2b7e4286f8\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"25cd2099525e4179a3d65d08750666a6\",\n          \"target\": \"bd9e71c6074d488ea529c08fbd58d8f4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.iar_invocation_succeeded;\\n})()\\n\"\n          },\n          \"label\": \"IAR invocation succeeded\"\n        },\n        {\n          \"id\": \"f2e1e37f20054b7cb63f65fd1fa5b108\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bd9e71c6074d488ea529c08fbd58d8f4\",\n          \"target\": \"84a9b0145a364bb98d434f851e0cecfb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"562463cecc9043c29885db6c1f41d991\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9b1971d1f9c94c0ea39a7cfb6e38d2fb\",\n          \"target\": \"d84aefe43b434ee1b2f88a497433f17a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5dfb63ba81064a2eb2fdd59d85814abf\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d84aefe43b434ee1b2f88a497433f17a\",\n          \"target\": \"25cd2099525e4179a3d65d08750666a6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"a989eaca2d1840c6a7602e03fad56f3d\": {\n      \"id\": \"a989eaca2d1840c6a7602e03fad56f3d\",\n      \"name\": \"task_number\",\n      \"label\": \"Task Number\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY1ODg2OTgxMTc0MSBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"5b4a4854f67a46ec926e8a34d10cbcb1\",\n      \"isHidden\": false\n    },\n    \"dfb2a00e40be444fbde7a3e7f6f1eb34\": {\n      \"id\": \"dfb2a00e40be444fbde7a3e7f6f1eb34\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"task_number_found\",\n      \"label\": \"task_number_found\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a0464d4721a54d8a8c5a11026ea3a7a9\": {\n      \"id\": \"a0464d4721a54d8a8c5a11026ea3a7a9\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"task_config_found\",\n      \"label\": \"task_config_found\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"7082bb74102b4834add344bf7ce2b963\": {\n      \"id\": \"7082bb74102b4834add344bf7ce2b963\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"config_name\",\n      \"label\": \"config_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a6fd108c84da4545ac7e081a93da1655\": {\n      \"id\": \"a6fd108c84da4545ac7e081a93da1655\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"config_sys_id\",\n      \"label\": \"config_sys_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4a6acad144d34b8292780fda066df1f4\": {\n      \"id\": \"4a6acad144d34b8292780fda066df1f4\",\n      \"name\": \"task_confirmation\",\n      \"label\": \"Task Confirmation\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Yes\",\n          \"value\": \"correct_task\"\n        },\n        {\n          \"label\": \"No\",\n          \"value\": \"incorrect_task\"\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"8de3469013ab4d3ab6e3c017c400c70c\",\n      \"isHidden\": false\n    },\n    \"9d9b063bdde44a8c8a7ef2f044c755c9\": {\n      \"id\": \"9d9b063bdde44a8c8a7ef2f044c755c9\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"task_sys_id\",\n      \"label\": \"task_sys_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d63c5d37f1774d5f97059edad6d206e9\": {\n      \"id\": \"d63c5d37f1774d5f97059edad6d206e9\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"[]\"\n      },\n      \"name\": \"errors\",\n      \"label\": \"errors\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b5029559c50a4eadaddbd22743db6829\": {\n      \"id\": \"b5029559c50a4eadaddbd22743db6829\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"retry_task_search_count\",\n      \"label\": \"retry_task_search_count\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6660d9180aac4d3f887bd459b7aa0216\": {\n      \"id\": \"6660d9180aac4d3f887bd459b7aa0216\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"iar_invocation_succeeded\",\n      \"label\": \"iar_invocation_succeeded\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d94a19fbc23d4881b00817009b354d12\": {\n      \"id\": \"d94a19fbc23d4881b00817009b354d12\",\n      \"name\": \"reroute_confirmation\",\n      \"label\": \"Reroute Confirmation\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Yes\",\n          \"value\": \"reroute\"\n        },\n        {\n          \"label\": \"No\",\n          \"value\": \"do_not_reroute\"\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"bd9e71c6074d488ea529c08fbd58d8f4\",\n      \"isHidden\": false\n    },\n    \"b6b6f4c828f64867822831743fe04bb8\": {\n      \"id\": \"b6b6f4c828f64867822831743fe04bb8\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"global_task_number\",\n      \"label\": \"global_task_number\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"70d6cec4c0499150f877e9d0ea777a22","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_cb_design_topic_70d6cec4c0499150f877e9d0ea777a22","sys_updated_by":"admin","sys_created_on":"2022-07-27 18:46:04","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"cb4997b03b6841b6a6756380396c70b3\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"cb4997b03b6841b6a6756380396c70b3\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"cb4997b03b6841b6a6756380396c70b3\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"4a0a528f521b458c8bc47d2ddbd06d0c\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"d6949f2427b84faf894e7b7498997ade\",\"name\":\"End\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"a989eaca2d1840c6a7602e03fad56f3d\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Please enter the incident/case number.\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"5b4a4854f67a46ec926e8a34d10cbcb1\",\"name\":\"Task number\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaVars.global_task_number);\\n})()\\n\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if (!gs.nil(vaVars.global_task_number)) {\\n        vaInputs.task_number = vaVars.global_task_number;\\n        vaVars.global_task_number = \\\"\\\";\\n    }\\n    var task = sn_oe_sfs.IARIssueNotAssignedDiagnostic.findTask(vaInputs.task_number);\\n    if (!gs.nil(task)) {\\n        vaVars.task_number_found = true;\\n        vaVars.task_sys_id = task[\\\"sys_id\\\"];\\n        vaVars.config_name = task[\\\"config_table_name\\\"];\\n    }\\n})()\\n\",\"id\":\"f550de1f7de8427a8413e37037984074\",\"name\":\"Find task\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Task number not found\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.task_number_found;\\n})()\\n\"},\"id\":\"24242b8b1ea841eb9e0c3ade27da397c\",\"name\":\"Task number not found\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Task number found\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.task_number_found;\\n})()\\n\"},\"id\":\"5da0819f5b5a4c26a24b29223f22065b\",\"name\":\"Task number found\"}],\"id\":\"9dd27ab0c12c4cb28dd16531fa58b68a\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var config = sn_oe_sfs.IARIssueNotAssignedDiagnostic.findConfig(vaVars.config_name);\\n    if (!gs.nil(config)) {\\n        vaVars.task_config_found = true;\\n        vaVars.config_sys_id = config;\\n    }\\n})()\",\"id\":\"ad4dea1e1aa944b79bb0b52c51c4ce31\",\"name\":\"Find IAR configuration for task\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Task Config Not Found\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.task_config_found;\\n})()\\n\"},\"id\":\"c7d32add7d2a41f5a460214f1a3d42f3\",\"name\":\"Task Config Not Found\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Task Config Found\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.task_config_found;\\n})()\\n\"},\"id\":\"3eb2a27741634017940ec9cbe70cf7e6\",\"name\":\"Task Config Found\"}],\"id\":\"a341495e164e4e8f8eff85cd2d254f33\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"IAR invocation failed because there is no IAR configuration for this task.\\\", vaContext.getRequesterLang())\"}],\"id\":\"8eaa1f219d7f43eca1bf7bb4b274ca38\",\"name\":\"No config for task\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"8de3469013ab4d3ab6e3c017c400c70c\",\"name\":\"Task confirmation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"4a6acad144d34b8292780fda066df1f4\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return \\\"I found the task with number \\\" + vaInputs.task_number + \\\". Are you sure this is the task you are looking for?\\\";\\n})()\\n\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Correct task found\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"task_confirmation=correct_task\"},\"id\":\"a36f4fac104044dd82928fa615e3b988\",\"name\":\"Correct task found\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Incorrect task found\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"task_confirmation=incorrect_task\"},\"id\":\"4c4933f4d8bb40fbad3bf40cdf57fd63\",\"name\":\"Incorrect task found\"}],\"id\":\"44d87b0ae6bb42dfbfec74239f70f657\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return \\\"I have found an Auto-Resolution configuration for \\\" + vaVars.config_name + \\\".\\\";\\n})()\"}],\"id\":\"f786e492543a46b884f92682da48c008\",\"name\":\"IAR configuration name\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Retried < 3 times\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.retry_task_search_count += 1;\\n    return vaVars.retry_task_search_count < 3;\\n})()\\n\"},\"id\":\"8b8a10bdd0c14cf5badba894394447e0\",\"name\":\"Retried < 3 times\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Retried 3 times\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.retry_task_search_count == 3;\\n})()\\n\"},\"id\":\"7ea4ab5b3d404a5398f0e271eff0463c\",\"name\":\"Retried 3 times\"}],\"id\":\"eb392a3078d54509bc3c30c1aea28f8d\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return \\\"Unable to find the task with number \\\" + vaInputs.task_number + \\\". Please try again.\\\";\\n})()\\n\"}],\"id\":\"9afe98a9b8144656b59a3607418501da\",\"name\":\"Retry task search\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return \\\"Sorry, I am not able to find the task with the number \\\" + vaInputs.task_number + \\\".\\\";\\n})()\\n\"}],\"id\":\"2b6f2f4ddafe4ef3af2f7c9529a9a4fa\",\"name\":\"Unable to find task\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"IAR invocation failed\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.iar_invocation_succeeded;\\n})()\\n\"},\"id\":\"97eb870171784650ac099a3593d11c4d\",\"name\":\"IAR invocation failed\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"IAR invocation succeeded\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.iar_invocation_succeeded;\\n})()\\n\"},\"id\":\"3b5d079c092d4bf1819bb334da4292e8\",\"name\":\"IAR invocation succeeded\"}],\"id\":\"25cd2099525e4179a3d65d08750666a6\",\"goal_id\":\"primary\"},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"bd9e71c6074d488ea529c08fbd58d8f4\",\"name\":\"Reroute confirmation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"d94a19fbc23d4881b00817009b354d12\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Since the task was assigned to a bot user and IAR invocation succeeded, I can reroute you to the Diagnose IAR Flow Failure topic. Would you like to proceed?\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_task_number = vaInputs.task_number;\\n    vaSystem.switchTopicById(\\\"c3bc9400c09d5190f877e9d0ea777a39\\\");\\n})()\\n\",\"id\":\"84a9b0145a364bb98d434f851e0cecfb\",\"name\":\"Reroute to Flow Failure topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"reroute_confirmation=reroute\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var grConfig = new GlideRecord(\\\"sys_cs_auto_resolution_configuration\\\");\\n    grConfig.get(vaVars.config_sys_id);\\n    var errors = JSON.parse(vaVars.errors);\\n    \\n    if (grConfig.iar_invocation == \\\"api\\\") {\\n        // check that if business rule exists, it is inactive\\n        var configBr = sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkBrExists(vaVars.config_sys_id);\\n        if (!gs.nil(configBr) && sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkBrActive(configBr)) {\\n            errors.push(\\\"Configuration trigger is set to on demand, but it has an active business rule\\\");\\n        }\\n    }\\n    else if (grConfig.iar_invocation == \\\"business_rule\\\") {\\n        // check that business rule exists\\n        var configBr = sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkBrExists(vaVars.config_sys_id);\\n        if (gs.nil(configBr)) {\\n            errors.push(\\\"No business rule exists for this Auto-resolution configuration\\\");\\n        }\\n        \\n        else {\\n            // check that business rule is active\\n            if (!sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkBrActive(configBr))\\n                errors.push(\\\"Business rule is not active\\\");\\n            \\n            // check that business rule order is highest\\n            if (!sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkBrOrderIsHighest(configBr)) \\n                errors.push(\\\"Business rule order is not the highest\\\");\\n            \\n            // check that there is only 1 trigger business rule associated with the configuration\\n            if (!sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkConfigHasOneBr(configBr, vaVars.config_name)) \\n                errors.push(\\\"There is more than 1 trigger business rule associated with this Auto-resolution configuration\\\");\\n        }      \\n    }\\n\\n    // check that config conditions match incident condition\\n    if (!sn_oe_sfs.IARIssueNotAssignedDiagnostic.checkTaskAndConfigConditionsMatch(vaVars.task_sys_id, vaVars.config_sys_id, vaVars.config_name)) {\\n        errors.push(\\\"Task created does not match the entry conditions on Auto-resolution configuration\\\")\\n    }\\n    \\n    vaVars.errors = JSON.stringify(errors);\\n})()\",\"id\":\"9b1971d1f9c94c0ea39a7cfb6e38d2fb\",\"name\":\"Run checks\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var errors = JSON.parse(vaVars.errors);\\n    if (errors.length == 0) {\\n        vaVars.iar_invocation_succeeded = true;\\n        var assignedTo = sn_oe_sfs.IARIssueNotAssignedDiagnostic.getTaskAssignedTo(vaVars.config_sys_id);\\n        return \\\"After running checks, IAR invocation succeeded and the task should be assigned to \\\" + assignedTo + \\\".\\\";\\n    }\\n    else {\\n        var result = \\\"After running checks, IAR invocation failed. The error(s) are as follows:\\\\n\\\";\\n        while (errors.length != 0) {\\n            result += \\\"- \\\" + errors.shift();\\n            if (errors.length != 0) {\\n                result += \\\"\\\\n\\\";\\n            }\\n        }\\n        return result;\\n    }\\n})()\"}],\"id\":\"d84aefe43b434ee1b2f88a497433f17a\",\"name\":\"Result\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"4a0a528f521b458c8bc47d2ddbd06d0c\",\"target_node_id\":\"5b4a4854f67a46ec926e8a34d10cbcb1\",\"id\":\"205a7f4c590c41658fd2d69676865df9\"},{\"type\":\"Edge\",\"source_node_id\":\"84a9b0145a364bb98d434f851e0cecfb\",\"target_node_id\":\"d6949f2427b84faf894e7b7498997ade\",\"id\":\"2399d95c7c1f4a698fbf985827d15d83\"},{\"type\":\"Edge\",\"source_node_id\":\"f786e492543a46b884f92682da48c008\",\"target_node_id\":\"9b1971d1f9c94c0ea39a7cfb6e38d2fb\",\"id\":\"93936f321a364df588e9aec388ce396f\"},{\"type\":\"Edge\",\"source_node_id\":\"9dd27ab0c12c4cb28dd16531fa58b68a\",\"target_node_id\":\"eb392a3078d54509bc3c30c1aea28f8d\",\"branch_id\":\"24242b8b1ea841eb9e0c3ade27da397c\",\"id\":\"59609a0dbf21432e9501e5daca7dba27\",\"name\":\"24242b8b1ea841eb9e0c3ade27da397c\"},{\"type\":\"Edge\",\"source_node_id\":\"f550de1f7de8427a8413e37037984074\",\"target_node_id\":\"9dd27ab0c12c4cb28dd16531fa58b68a\",\"id\":\"cba27289643e449ab235ff563c68eab8\"},{\"type\":\"Edge\",\"source_node_id\":\"5b4a4854f67a46ec926e8a34d10cbcb1\",\"target_node_id\":\"f550de1f7de8427a8413e37037984074\",\"id\":\"c0d0d1e6c441403d9d7fc366a8421feb\"},{\"type\":\"Edge\",\"source_node_id\":\"ad4dea1e1aa944b79bb0b52c51c4ce31\",\"target_node_id\":\"a341495e164e4e8f8eff85cd2d254f33\",\"id\":\"99fc38cabb85476dba5b63e4ea8cb71a\"},{\"type\":\"Edge\",\"source_node_id\":\"a341495e164e4e8f8eff85cd2d254f33\",\"target_node_id\":\"8eaa1f219d7f43eca1bf7bb4b274ca38\",\"branch_id\":\"c7d32add7d2a41f5a460214f1a3d42f3\",\"id\":\"1b2f448f3d76403ab9f73bc9a3d504b5\",\"name\":\"c7d32add7d2a41f5a460214f1a3d42f3\"},{\"type\":\"Edge\",\"source_node_id\":\"8eaa1f219d7f43eca1bf7bb4b274ca38\",\"target_node_id\":\"d6949f2427b84faf894e7b7498997ade\",\"id\":\"fea155cf25e34fc382ce99ae3336e71d\"},{\"type\":\"Edge\",\"source_node_id\":\"9dd27ab0c12c4cb28dd16531fa58b68a\",\"target_node_id\":\"8de3469013ab4d3ab6e3c017c400c70c\",\"branch_id\":\"5da0819f5b5a4c26a24b29223f22065b\",\"id\":\"bf07ceb8a9134bdd9adebe0e3257ce8f\",\"name\":\"5da0819f5b5a4c26a24b29223f22065b\"},{\"type\":\"Edge\",\"source_node_id\":\"8de3469013ab4d3ab6e3c017c400c70c\",\"target_node_id\":\"44d87b0ae6bb42dfbfec74239f70f657\",\"id\":\"b7f58587c16b402eb8777c8840133871\"},{\"type\":\"Edge\",\"source_node_id\":\"44d87b0ae6bb42dfbfec74239f70f657\",\"target_node_id\":\"ad4dea1e1aa944b79bb0b52c51c4ce31\",\"branch_id\":\"a36f4fac104044dd82928fa615e3b988\",\"id\":\"6ea309592690423fa940fc2d5bbb93f4\",\"name\":\"a36f4fac104044dd82928fa615e3b988\"},{\"type\":\"Edge\",\"source_node_id\":\"44d87b0ae6bb42dfbfec74239f70f657\",\"target_node_id\":\"5b4a4854f67a46ec926e8a34d10cbcb1\",\"branch_id\":\"4c4933f4d8bb40fbad3bf40cdf57fd63\",\"id\":\"2f4e082612e34e9aaf03990391b4e109\",\"name\":\"4c4933f4d8bb40fbad3bf40cdf57fd63\"},{\"type\":\"Edge\",\"source_node_id\":\"a341495e164e4e8f8eff85cd2d254f33\",\"target_node_id\":\"f786e492543a46b884f92682da48c008\",\"branch_id\":\"3eb2a27741634017940ec9cbe70cf7e6\",\"id\":\"3c7318e0af86438ba04a19275fe9dee3\",\"name\":\"3eb2a27741634017940ec9cbe70cf7e6\"},{\"type\":\"Edge\",\"source_node_id\":\"eb392a3078d54509bc3c30c1aea28f8d\",\"target_node_id\":\"9afe98a9b8144656b59a3607418501da\",\"branch_id\":\"8b8a10bdd0c14cf5badba894394447e0\",\"id\":\"f8480e35971d448f81596039ed7960fc\",\"name\":\"8b8a10bdd0c14cf5badba894394447e0\"},{\"type\":\"Edge\",\"source_node_id\":\"9afe98a9b8144656b59a3607418501da\",\"target_node_id\":\"5b4a4854f67a46ec926e8a34d10cbcb1\",\"id\":\"9eb7c9bc04a940c98c0fa05a5a8ee4ab\"},{\"type\":\"Edge\",\"source_node_id\":\"eb392a3078d54509bc3c30c1aea28f8d\",\"target_node_id\":\"2b6f2f4ddafe4ef3af2f7c9529a9a4fa\",\"branch_id\":\"7ea4ab5b3d404a5398f0e271eff0463c\",\"id\":\"9bdd1fff7bb04f19bcaec0c1c2c95584\",\"name\":\"7ea4ab5b3d404a5398f0e271eff0463c\"},{\"type\":\"Edge\",\"source_node_id\":\"2b6f2f4ddafe4ef3af2f7c9529a9a4fa\",\"target_node_id\":\"d6949f2427b84faf894e7b7498997ade\",\"id\":\"2c3af55888fa4fcf9fc9cc22924a2565\"},{\"type\":\"Edge\",\"source_node_id\":\"25cd2099525e4179a3d65d08750666a6\",\"target_node_id\":\"d6949f2427b84faf894e7b7498997ade\",\"branch_id\":\"97eb870171784650ac099a3593d11c4d\",\"id\":\"9f70b4fa7ff446c180974ba7ddc1968c\",\"name\":\"97eb870171784650ac099a3593d11c4d\"},{\"type\":\"Edge\",\"source_node_id\":\"25cd2099525e4179a3d65d08750666a6\",\"target_node_id\":\"bd9e71c6074d488ea529c08fbd58d8f4\",\"branch_id\":\"3b5d079c092d4bf1819bb334da4292e8\",\"id\":\"453b0ba133a0443492e81c2b7e4286f8\",\"name\":\"3b5d079c092d4bf1819bb334da4292e8\"},{\"type\":\"Edge\",\"source_node_id\":\"bd9e71c6074d488ea529c08fbd58d8f4\",\"target_node_id\":\"84a9b0145a364bb98d434f851e0cecfb\",\"id\":\"f2e1e37f20054b7cb63f65fd1fa5b108\"},{\"type\":\"Edge\",\"source_node_id\":\"9b1971d1f9c94c0ea39a7cfb6e38d2fb\",\"target_node_id\":\"d84aefe43b434ee1b2f88a497433f17a\",\"id\":\"562463cecc9043c29885db6c1f41d991\"},{\"type\":\"Edge\",\"source_node_id\":\"d84aefe43b434ee1b2f88a497433f17a\",\"target_node_id\":\"25cd2099525e4179a3d65d08750666a6\",\"id\":\"5dfb63ba81064a2eb2fdd59d85814abf\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"task_number_found\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"dfb2a00e40be444fbde7a3e7f6f1eb34\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"task_config_found\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"a0464d4721a54d8a8c5a11026ea3a7a9\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"config_name\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"7082bb74102b4834add344bf7ce2b963\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"config_sys_id\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"a6fd108c84da4545ac7e081a93da1655\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"task_sys_id\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"9d9b063bdde44a8c8a7ef2f044c755c9\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"errors\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"[]\"},\"list\":false,\"id\":\"d63c5d37f1774d5f97059edad6d206e9\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"retry_task_search_count\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"0\"},\"list\":false,\"id\":\"b5029559c50a4eadaddbd22743db6829\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"iar_invocation_succeeded\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"6660d9180aac4d3f887bd459b7aa0216\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"global_task_number\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"b6b6f4c828f64867822831743fe04bb8\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"task_number\",\"list\":false,\"id\":\"a989eaca2d1840c6a7602e03fad56f3d\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Yes\",\"element\":\"correct_task\"},{\"name\":\"No\",\"element\":\"incorrect_task\"}],\"id\":\"4a6acad144d34b8292780fda066df1f4\",\"name\":\"task_confirmation\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Yes\",\"element\":\"reroute\"},{\"name\":\"No\",\"element\":\"do_not_reroute\"}],\"id\":\"d94a19fbc23d4881b00817009b354d12\",\"name\":\"reroute_confirmation\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"53b1b0e79761011018b2fa98c253afcc\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"aefc0937c0f45150f877e9d0ea777a15\",\"name\":\"Diagnose IAR Issue Not Assigned\",\"key_phrases\":[\"Diagnose IAR Issue Not Assigned\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":false,\"csTopicId\":\"38d6cec4c0499150f877e9d0ea777a1b\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Diagnose IAR Issue Not Assigned","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"design_topic_id":"aefc0937c0f45150f877e9d0ea777a15","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/38d6cec4c0499150f877e9d0ea777a1b","value":"38d6cec4c0499150f877e9d0ea777a1b"},"sys_created_by":"maint","sys_policy":""},{"sys_mod_count":"44","sys_updated_on":"2024-10-22 02:34:11","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.71\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"1821b76dae664951984624918a8f2bef\": {\n          \"id\": \"1821b76dae664951984624918a8f2bef\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"b4df58eeb84749dfa3737fac3bca85ff\": {\n          \"id\": \"b4df58eeb84749dfa3737fac3bca85ff\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"441b4d33a3604280a4133889dbc973eb\": {\n          \"id\": \"441b4d33a3604280a4133889dbc973eb\",\n          \"name\": \"Validation\",\n          \"script\": \"(function execute() {\\n    \\n    var notificationContext = JSON.parse(vaVars.global_notification_context);\\n    vaVars.auto_resolution_context_id = notificationContext.tableSysId;\\n    vaVars.action_sys_id = notificationContext.actionId;\\n    interactionId = vaSystem.getInteractionSysId();\\n\\n    var contextHelper = new global.AutoResolutionContextHelper();\\n    var context = contextHelper.getContextDetails(vaVars.auto_resolution_context_id);\\n    contextHelper.setInteraction(vaVars.auto_resolution_context_id, interactionId);\\n    new global.AutoResolutionTaskHelper().associateTaskToInteraction(context.taskTable, context.taskId, interactionId);\\n    \\n    vaVars.topic_id = context.topicId;\\n    vaVars.task_id = context.taskId;\\n    vaVars.task_table = context.taskTable;\\n    vaVars.is_valid = context.isValid;\\n    vaVars.validation_reason = context.validationReason;\\n    vaVars.is_notification_expired = context.validationReason == 'Notification expired';\\n    vaVars.is_notification_accepted = context.validationReason == 'Notification accepted';\\n\\n    var logUtils = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContextId(vaVars.auto_resolution_context_id)\\n                        .withTaskValues(vaVars.task_id, vaVars.task_table)\\n                        .withLanguage(context.language)\\n                        .withConfiguration(context.configId)\\n                        .withTopic(vaVars.topic_id);\\n    vaVars.loggingContext = JSON.stringify(logUtils.CONTEXT);\\n    var logger = logUtils.createLogger();\\n    logger.info('Starting Auto-Resoluton Topic');\\n    \\n     //!!!!!IMPORTANT: DO NOT CHANGE THIS VALUE!!!!!\\n    vaVars.is_iar_wrapper_topic = true;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b2ce1b4e581845e4867c0a2ee5c30ee8\": {\n          \"id\": \"b2ce1b4e581845e4867c0a2ee5c30ee8\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Help Now?\"\n        },\n        \"717d9e4d03b048c3963ad44c30ecee0b\": {\n          \"id\": \"717d9e4d03b048c3963ad44c30ecee0b\",\n          \"name\": \"Invoke Resolution Topic\",\n          \"script\": \"(function execute() {\\n    var context = contextHelper.getContextDetails(vaVars.auto_resolution_context_id);\\n    var logUtils = new global.AutoResolutionLoggingUtils()    \\n                       .withName('topic')\\n                       .withContextId(vaVars.auto_resolution_context_id)\\n                       .withTaskValues(vaVars.task_id, vaVars.task_table)\\n                       .withLanguage(context.language)\\n                       .withConfiguration(context.configId)\\n                       .withTopic(vaVars.topic_id);\\n    vaVars.loggingContext = JSON.stringify(logUtils.CONTEXT);\\n    var logger = logUtils.createLogger();\\n    var contextHelper = new global.AutoResolutionContextHelper();\\n    contextHelper.updateNotificationResponded(vaVars.auto_resolution_context_id, 'accepted');\\n    logger.debug('Marking context={0} as accepted', vaVars.auto_resolution_context_id);\\n\\n    logger.info('User accepted the Auto-Resolution topic. Swtiching to topic={0}', vaVars.topic_id);\\n    vaSystem.switchTopicById(vaVars.topic_id);\\n    vaSystem.switchTopicById(vaVars.topic_id);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f11ef09e6ff442c2b1f9d2cceea83728\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Close Task Input\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"If there's anything else you need related to this ticket, I can keep it open.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"5a3f98adebba43c5a9fc639ce6b24e00\",\n          \"id\": \"f11ef09e6ff442c2b1f9d2cceea83728\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"055e230ea978461ea3c3ed93353cf81d\": {\n          \"id\": \"055e230ea978461ea3c3ed93353cf81d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Close Task?\"\n        },\n        \"5f245cbc4b12423f95bf6575fa767ace\": {\n          \"id\": \"5f245cbc4b12423f95bf6575fa767ace\",\n          \"name\": \"Unassign Task and keep task open\",\n          \"script\": \"(function execute() {\\n    \\n   var helper = new global.AutoResolutionContextHelper();\\n   helper.executeTemplate(helper.UNRESOLVED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\\n\\n   var logger = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContext(vaVars.loggingContext)\\n                        .createLogger();\\n    logger.info('User decided to keep the task={0} open', vaVars.task_id);\\n\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7ec718a8c47b4fc98aa9e1463325008d\": {\n          \"id\": \"7ec718a8c47b4fc98aa9e1463325008d\",\n          \"name\": \"Mark Task Resolved\",\n          \"script\": \"(function execute() {\\n\\n    var helper = new global.AutoResolutionContextHelper();\\n    helper.executeTemplate(helper.RESOLVED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\\n\\n    var logger = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContext(vaVars.loggingContext)\\n                        .createLogger();\\n    logger.info('User decided to mark the task={0} as resolved', vaVars.task_id);\\n    \\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9425a0357c314d708f3972dcdcaed14c\": {\n          \"id\": \"9425a0357c314d708f3972dcdcaed14c\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Unable to Proceed\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n\\n    var logger = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContext(vaVars.loggingContext)\\n                        .createLogger();\\n    var message;\\n\\n    if (vaVars.is_notification_expired || vaVars.is_notification_accepted)\\n        message =  gs.getMessageLang(\\\"It looks like another agent is already working on your incident. I wont be able to help you at this time.\\\");\\n    else\\n        message =  gs.getMessageLang(\\\"Im currently unable to help with your request.\\\");\\n\\n    logger.info('Unable to proceed with Auto-resolution topic, reason={0}', message);\\n    return message;\\n\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"c1b0535da95a4dd096fc349276a8202e\": {\n          \"id\": \"c1b0535da95a4dd096fc349276a8202e\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Let's Get Started\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Great, if it turns out you need more help with it, we can leave the ticket open.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"67530d569a93410eacf29e636ba93906\": {\n          \"id\": \"67530d569a93410eacf29e636ba93906\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Unassigned Task Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"text\": \"I unassigned myself from the ticket. An agent will reach out to help you with it.\"\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"c7cfcba603c34a8da11217e04fd97509\": {\n          \"id\": \"c7cfcba603c34a8da11217e04fd97509\",\n          \"name\": \"Apply topic completion template\",\n          \"script\": \"(function execute() {\\n    var helper = new global.AutoResolutionContextHelper();\\n    helper.executeTemplate(helper.TOPIC_COMPLETED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7fa3072b5d074027a9af99e78568e9d8\": {\n          \"id\": \"7fa3072b5d074027a9af99e78568e9d8\",\n          \"name\": \"Mark context declined\",\n          \"script\": \"(function execute() {\\n\\n    var contextHelper = new global.AutoResolutionContextHelper();\\n    contextHelper.updateNotificationResponded(vaVars.auto_resolution_context_id, \\\"declined\\\");\\n    contextHelper.executeTemplate(contextHelper.DECLINED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\\n\\n    var logger = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContext(vaVars.loggingContext)\\n                        .createLogger();\\n    logger.info('User declined the Auto-Resolution topic');\\n\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"45f270501fa2417483eb2d026107bb4e\": {\n          \"id\": \"45f270501fa2417483eb2d026107bb4e\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Close message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Awesome! I've closed it!  Check in with me next time you need help with things like this.  \"\n                    },\n                    {\n                      \"type\": \"emoji\",\n                      \"emoji\": {\n                        \"id\": \"wave\",\n                        \"name\": \"Waving Hand Sign\",\n                        \"short_names\": [\n                          \"wave\"\n                        ],\n                        \"colons\": \":wave:\",\n                        \"emoticons\": [],\n                        \"unified\": \"1f44b\",\n                        \"skin\": 1,\n                        \"native\": \"\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"emoji\",\n                      \"emoji\": {\n                        \"id\": \"wave\",\n                        \"name\": \"Waving Hand Sign\",\n                        \"short_names\": [\n                          \"wave\"\n                        ],\n                        \"colons\": \":wave:\",\n                        \"emoticons\": [],\n                        \"unified\": \"1f44b\",\n                        \"skin\": 1,\n                        \"native\": \"\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"emoji\",\n                      \"emoji\": {\n                        \"id\": \"wave\",\n                        \"name\": \"Waving Hand Sign\",\n                        \"short_names\": [\n                          \"wave\"\n                        ],\n                        \"colons\": \":wave:\",\n                        \"emoticons\": [],\n                        \"unified\": \"1f44b\",\n                        \"skin\": 1,\n                        \"native\": \"\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"f2c2f98ab1c441d289a1fb21b302327b\": {\n          \"id\": \"f2c2f98ab1c441d289a1fb21b302327b\",\n          \"stepType\": \"Component\",\n          \"name\": \"Track Deflection\",\n          \"fields\": [],\n          \"reusableTopicId\": \"7fb4ca055303201033cdddeeff7b12b3\",\n          \"reusableTopicChoice\": \"Deflection Tracker\",\n          \"sourceType\": \"TOPIC_BLOCK\",\n          \"loading\": false,\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputs\": {\n            \"deflection_configuration\": {\n              \"value\": \"93d2f7645383201033cdddeeff7b1208\",\n              \"mode\": \"simple\",\n              \"type\": \"Reference\",\n              \"table\": \"ssa_deflection_configuration\"\n            },\n            \"deflection_pattern\": {\n              \"value\": \"d7d6f3285383201033cdddeeff7b12c0\",\n              \"mode\": \"string\",\n              \"type\": \"Reference\",\n              \"table\": \"ssa_deflection_pattern\"\n            },\n            \"activity_table\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.task_table}}\",\n                        \"displayValue\": \"Script Variablestask_table\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"activity_ids\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.task_id}}\",\n                        \"displayValue\": \"Script Variablestask_id\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            }\n          },\n          \"outputs\": [],\n          \"outdatedNote\": false,\n          \"variableIds\": []\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"7411b0c39d0142cb898086f156be0428\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"441b4d33a3604280a4133889dbc973eb\",\n          \"target\": \"b2ce1b4e581845e4867c0a2ee5c30ee8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"38bcade537794d948dd8730c147df3df\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c7cfcba603c34a8da11217e04fd97509\",\n          \"target\": \"f11ef09e6ff442c2b1f9d2cceea83728\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"60ef0859eb1c4459b44c8663019d79c9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"67530d569a93410eacf29e636ba93906\",\n          \"target\": \"b4df58eeb84749dfa3737fac3bca85ff\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e7f46f7d4c644c1b9d98dc8f8f2eb445\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"055e230ea978461ea3c3ed93353cf81d\",\n          \"target\": \"7ec718a8c47b4fc98aa9e1463325008d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.close_task_input=close\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"58099978b2d440db96e82559e7132ee5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1821b76dae664951984624918a8f2bef\",\n          \"target\": \"441b4d33a3604280a4133889dbc973eb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bc53304cee554965970c4b2c31106087\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f11ef09e6ff442c2b1f9d2cceea83728\",\n          \"target\": \"055e230ea978461ea3c3ed93353cf81d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9a646ea8d1284e2f9686f42932c5b6b9\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"055e230ea978461ea3c3ed93353cf81d\",\n          \"target\": \"5f245cbc4b12423f95bf6575fa767ace\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.close_task_input=open\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"b5d82663f76f41cbb1666cc224408a24\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b2ce1b4e581845e4867c0a2ee5c30ee8\",\n          \"target\": \"9425a0357c314d708f3972dcdcaed14c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.is_valid;\\n})()\\n\"\n          },\n          \"label\": \"Error/Timeout\"\n        },\n        {\n          \"id\": \"f9c098736e644ee5b2c4a09c15f02eb9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9425a0357c314d708f3972dcdcaed14c\",\n          \"target\": \"b4df58eeb84749dfa3737fac3bca85ff\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f7514a26e3954f138cdd3eb53291c904\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b2ce1b4e581845e4867c0a2ee5c30ee8\",\n          \"target\": \"c1b0535da95a4dd096fc349276a8202e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var yesActions = ['19164c195377101055eeddeeff7b129d', '93373e4a53910110af71ddeeff7b12af'];\\n    return vaVars.is_valid && yesActions.indexOf(vaVars.action_sys_id) >= 0;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"dd3d57cdc10a436887667b9c80a02994\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c1b0535da95a4dd096fc349276a8202e\",\n          \"target\": \"717d9e4d03b048c3963ad44c30ecee0b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2bd7fb91a2e94268a3a51705e09d4c15\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5f245cbc4b12423f95bf6575fa767ace\",\n          \"target\": \"67530d569a93410eacf29e636ba93906\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b5ae1fe0bb9f4cbfb7cfc7aa36eff9e7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"717d9e4d03b048c3963ad44c30ecee0b\",\n          \"target\": \"c7cfcba603c34a8da11217e04fd97509\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dbd211d235d148bab9430eec07628e39\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b2ce1b4e581845e4867c0a2ee5c30ee8\",\n          \"target\": \"7fa3072b5d074027a9af99e78568e9d8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var noActions = ['2a2f0c421b77101093b5ebda234bcb7f', '9a577e4a53910110af71ddeeff7b12c6']\\n    return vaVars.is_valid && noActions.indexOf(vaVars.action_sys_id) >= 0;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"5868f07662df4a26a95e4f2bca2ad297\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7fa3072b5d074027a9af99e78568e9d8\",\n          \"target\": \"67530d569a93410eacf29e636ba93906\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b0b64935a32c46ada31246b668ce3fa2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"45f270501fa2417483eb2d026107bb4e\",\n          \"target\": \"b4df58eeb84749dfa3737fac3bca85ff\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b675d9fa19f64caeb1eecdf171d199e5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7ec718a8c47b4fc98aa9e1463325008d\",\n          \"target\": \"f2c2f98ab1c441d289a1fb21b302327b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0ad3670e9c224848a4c4be34e32bc4cd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f2c2f98ab1c441d289a1fb21b302327b\",\n          \"target\": \"45f270501fa2417483eb2d026107bb4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"730322e0452043b895efd30399e62105\": {\n      \"id\": \"730322e0452043b895efd30399e62105\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n})()\\n\"\n      },\n      \"name\": \"is_valid\",\n      \"label\": \"is_valid\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"8cb5bc1f3872420ca70dfc736c2f3786\": {\n      \"id\": \"8cb5bc1f3872420ca70dfc736c2f3786\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"validation_reason\",\n      \"label\": \"validation_reason\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"58eccd7187854813a49a047c2169ff4b\": {\n      \"id\": \"58eccd7187854813a49a047c2169ff4b\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"auto_resolution_context_id\",\n      \"label\": \"auto_resolution_context_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"eb0f71f002c549dcb921e48b2efa1a61\": {\n      \"id\": \"eb0f71f002c549dcb921e48b2efa1a61\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"topic_id\",\n      \"label\": \"topic_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5a3f98adebba43c5a9fc639ce6b24e00\": {\n      \"id\": \"5a3f98adebba43c5a9fc639ce6b24e00\",\n      \"name\": \"close_task_input\",\n      \"label\": \"Close Task Input\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"No, close it\",\n          \"value\": \"close\"\n        },\n        {\n          \"label\": \"Yes, keep it open\",\n          \"value\": \"open\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"f11ef09e6ff442c2b1f9d2cceea83728\",\n      \"isHidden\": false\n    },\n    \"dc8c00f606624e19b210dececb6d6282\": {\n      \"id\": \"dc8c00f606624e19b210dececb6d6282\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"task_id\",\n      \"label\": \"task_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fdcdbf7fc87a495b95a547738fd6d3fe\": {\n      \"id\": \"fdcdbf7fc87a495b95a547738fd6d3fe\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"task_table\",\n      \"label\": \"task_table\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9de5e5e9746748878952302a3485d3bf\": {\n      \"id\": \"9de5e5e9746748878952302a3485d3bf\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"is_notification_expired\",\n      \"label\": \"is_notification_expired\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3a3d030e447e4f988d8b364e53c1ca40\": {\n      \"id\": \"3a3d030e447e4f988d8b364e53c1ca40\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"action_sys_id\",\n      \"label\": \"action_sys_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"7aba24c94343465a9bf034c6ff98937a\": {\n      \"id\": \"7aba24c94343465a9bf034c6ff98937a\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"true\"\n      },\n      \"name\": \"is_iar_wrapper_topic\",\n      \"label\": \"is_iar_wrapper_topic\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"7c44137b538710107a1cddeeff7b125c","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sys_cb_design_topic_7c44137b538710107a1cddeeff7b125c","sys_updated_by":"admin","sys_created_on":"2020-09-11 17:22:34","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"6dc0daea994b4c0d8bdf641b01c896f4\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"6dc0daea994b4c0d8bdf641b01c896f4\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"6dc0daea994b4c0d8bdf641b01c896f4\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"1821b76dae664951984624918a8f2bef\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"b4df58eeb84749dfa3737fac3bca85ff\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    \\n    var notificationContext = JSON.parse(vaVars.global_notification_context);\\n    vaVars.auto_resolution_context_id = notificationContext.tableSysId;\\n    vaVars.action_sys_id = notificationContext.actionId;\\n    interactionId = vaSystem.getInteractionSysId();\\n\\n    var contextHelper = new global.AutoResolutionContextHelper();\\n    var context = contextHelper.getContextDetails(vaVars.auto_resolution_context_id);\\n    contextHelper.setInteraction(vaVars.auto_resolution_context_id, interactionId);\\n    new global.AutoResolutionTaskHelper().associateTaskToInteraction(context.taskTable, context.taskId, interactionId);\\n    \\n    vaVars.topic_id = context.topicId;\\n    vaVars.task_id = context.taskId;\\n    vaVars.task_table = context.taskTable;\\n    vaVars.is_valid = context.isValid;\\n    vaVars.validation_reason = context.validationReason;\\n    vaVars.is_notification_expired = context.validationReason == 'Notification expired';\\n    vaVars.is_notification_accepted = context.validationReason == 'Notification accepted';\\n\\n    var logUtils = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContextId(vaVars.auto_resolution_context_id)\\n                        .withTaskValues(vaVars.task_id, vaVars.task_table)\\n                        .withLanguage(context.language)\\n                        .withConfiguration(context.configId)\\n                        .withTopic(vaVars.topic_id);\\n    vaVars.loggingContext = JSON.stringify(logUtils.CONTEXT);\\n    var logger = logUtils.createLogger();\\n    logger.info('Starting Auto-Resoluton Topic');\\n    \\n     //!!!!!IMPORTANT: DO NOT CHANGE THIS VALUE!!!!!\\n    vaVars.is_iar_wrapper_topic = true;\\n})()\\n\",\"id\":\"441b4d33a3604280a4133889dbc973eb\",\"name\":\"Validation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Help Now?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Error/Timeout\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.is_valid;\\n})()\\n\"},\"id\":\"29b5ae854e2548d99ba1dc18830f8c77\",\"name\":\"Error/Timeout\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var yesActions = ['19164c195377101055eeddeeff7b129d', '93373e4a53910110af71ddeeff7b12af'];\\n    return vaVars.is_valid && yesActions.indexOf(vaVars.action_sys_id) >= 0;\\n})()\\n\"},\"id\":\"d372764e757b4d49a92861cbc12516ba\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var noActions = ['2a2f0c421b77101093b5ebda234bcb7f', '9a577e4a53910110af71ddeeff7b12c6']\\n    return vaVars.is_valid && noActions.indexOf(vaVars.action_sys_id) >= 0;\\n})()\\n\"},\"id\":\"55f18f195f4c46fa8a021398b9a4b450\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"b2ce1b4e581845e4867c0a2ee5c30ee8\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var context = contextHelper.getContextDetails(vaVars.auto_resolution_context_id);\\n    var logUtils = new global.AutoResolutionLoggingUtils()    \\n                       .withName('topic')\\n                       .withContextId(vaVars.auto_resolution_context_id)\\n                       .withTaskValues(vaVars.task_id, vaVars.task_table)\\n                       .withLanguage(context.language)\\n                       .withConfiguration(context.configId)\\n                       .withTopic(vaVars.topic_id);\\n    vaVars.loggingContext = JSON.stringify(logUtils.CONTEXT);\\n    var logger = logUtils.createLogger();\\n    var contextHelper = new global.AutoResolutionContextHelper();\\n    contextHelper.updateNotificationResponded(vaVars.auto_resolution_context_id, 'accepted');\\n    logger.debug('Marking context={0} as accepted', vaVars.auto_resolution_context_id);\\n\\n    logger.info('User accepted the Auto-Resolution topic. Swtiching to topic={0}', vaVars.topic_id);\\n    vaSystem.switchTopicById(vaVars.topic_id);\\n    vaSystem.switchTopicById(vaVars.topic_id);\\n})()\\n\",\"id\":\"717d9e4d03b048c3963ad44c30ecee0b\",\"name\":\"Invoke Resolution Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"f11ef09e6ff442c2b1f9d2cceea83728\",\"name\":\"Close Task Input\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"5a3f98adebba43c5a9fc639ce6b24e00\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:d1cf2a4e5316101055eeddeeff7b12cc:node:f11ef09e6ff442c2b1f9d2cceea83728:field:Message\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Close Task?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"close_task_input=close\"},\"id\":\"b60ef7ddf9864925a71b8ac6df1d05b9\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"close_task_input=open\"},\"id\":\"6f7120a59c02414396875dd3bc79bddf\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"055e230ea978461ea3c3ed93353cf81d\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    \\n   var helper = new global.AutoResolutionContextHelper();\\n   helper.executeTemplate(helper.UNRESOLVED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\\n\\n   var logger = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContext(vaVars.loggingContext)\\n                        .createLogger();\\n    logger.info('User decided to keep the task={0} open', vaVars.task_id);\\n\\n})()\\n\",\"id\":\"5f245cbc4b12423f95bf6575fa767ace\",\"name\":\"Unassign Task and keep task open\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n\\n    var helper = new global.AutoResolutionContextHelper();\\n    helper.executeTemplate(helper.RESOLVED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\\n\\n    var logger = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContext(vaVars.loggingContext)\\n                        .createLogger();\\n    logger.info('User decided to mark the task={0} as resolved', vaVars.task_id);\\n    \\n})()\\n\",\"id\":\"7ec718a8c47b4fc98aa9e1463325008d\",\"name\":\"Mark Task Resolved\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n\\n    var logger = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContext(vaVars.loggingContext)\\n                        .createLogger();\\n    var message;\\n\\n    if (vaVars.is_notification_expired || vaVars.is_notification_accepted)\\n        message =  gs.getMessageLang(\\\"It looks like another agent is already working on your incident. I wont be able to help you at this time.\\\");\\n    else\\n        message =  gs.getMessageLang(\\\"Im currently unable to help with your request.\\\");\\n\\n    logger.info('Unable to proceed with Auto-resolution topic, reason={0}', message);\\n    return message;\\n\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"9425a0357c314d708f3972dcdcaed14c\",\"name\":\"Unable to Proceed\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Great, if it turns out you need more help with it, we can leave the ticket open.\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"c1b0535da95a4dd096fc349276a8202e\",\"name\":\"Let's Get Started\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"I unassigned myself from the ticket. An agent will reach out to help you with it.\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"67530d569a93410eacf29e636ba93906\",\"name\":\"Unassigned Task Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var helper = new global.AutoResolutionContextHelper();\\n    helper.executeTemplate(helper.TOPIC_COMPLETED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\\n})()\\n\",\"id\":\"c7cfcba603c34a8da11217e04fd97509\",\"name\":\"Apply topic completion template\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n\\n    var contextHelper = new global.AutoResolutionContextHelper();\\n    contextHelper.updateNotificationResponded(vaVars.auto_resolution_context_id, \\\"declined\\\");\\n    contextHelper.executeTemplate(contextHelper.DECLINED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\\n\\n    var logger = new global.AutoResolutionLoggingUtils()\\n                        .withName('topic')\\n                        .withContext(vaVars.loggingContext)\\n                        .createLogger();\\n    logger.info('User declined the Auto-Resolution topic');\\n\\n})()\\n\",\"id\":\"7fa3072b5d074027a9af99e78568e9d8\",\"name\":\"Mark context declined\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:d1cf2a4e5316101055eeddeeff7b12cc:node:45f270501fa2417483eb2d026107bb4e:field:0\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"45f270501fa2417483eb2d026107bb4e\",\"name\":\"Close message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Deflection Tracker\",\"library_topic_id\":\"7fb4ca055303201033cdddeeff7b12b3\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"deflection_configuration\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"93d2f7645383201033cdddeeff7b1208\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"items\":[],\"use_items\":false,\"table\":\"ssa_deflection_configuration\"}},{\"parameter-name\":\"deflection_pattern\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"d7d6f3285383201033cdddeeff7b12c0\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"items\":[],\"use_items\":false,\"table\":\"ssa_deflection_pattern\"}},{\"parameter-name\":\"activity_table\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.task_table}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"activity_ids\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.task_id}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[],\"header_card_fields\":[],\"id\":\"f2c2f98ab1c441d289a1fb21b302327b\",\"name\":\"Track Deflection\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"441b4d33a3604280a4133889dbc973eb\",\"target_node_id\":\"b2ce1b4e581845e4867c0a2ee5c30ee8\",\"id\":\"7411b0c39d0142cb898086f156be0428\"},{\"type\":\"Edge\",\"source_node_id\":\"c7cfcba603c34a8da11217e04fd97509\",\"target_node_id\":\"f11ef09e6ff442c2b1f9d2cceea83728\",\"id\":\"38bcade537794d948dd8730c147df3df\"},{\"type\":\"Edge\",\"source_node_id\":\"67530d569a93410eacf29e636ba93906\",\"target_node_id\":\"b4df58eeb84749dfa3737fac3bca85ff\",\"id\":\"60ef0859eb1c4459b44c8663019d79c9\"},{\"type\":\"Edge\",\"source_node_id\":\"055e230ea978461ea3c3ed93353cf81d\",\"target_node_id\":\"7ec718a8c47b4fc98aa9e1463325008d\",\"branch_id\":\"b60ef7ddf9864925a71b8ac6df1d05b9\",\"id\":\"e7f46f7d4c644c1b9d98dc8f8f2eb445\",\"name\":\"b60ef7ddf9864925a71b8ac6df1d05b9\"},{\"type\":\"Edge\",\"source_node_id\":\"1821b76dae664951984624918a8f2bef\",\"target_node_id\":\"441b4d33a3604280a4133889dbc973eb\",\"id\":\"58099978b2d440db96e82559e7132ee5\"},{\"type\":\"Edge\",\"source_node_id\":\"f11ef09e6ff442c2b1f9d2cceea83728\",\"target_node_id\":\"055e230ea978461ea3c3ed93353cf81d\",\"id\":\"bc53304cee554965970c4b2c31106087\"},{\"type\":\"Edge\",\"source_node_id\":\"055e230ea978461ea3c3ed93353cf81d\",\"target_node_id\":\"5f245cbc4b12423f95bf6575fa767ace\",\"branch_id\":\"6f7120a59c02414396875dd3bc79bddf\",\"id\":\"9a646ea8d1284e2f9686f42932c5b6b9\",\"name\":\"6f7120a59c02414396875dd3bc79bddf\"},{\"type\":\"Edge\",\"source_node_id\":\"b2ce1b4e581845e4867c0a2ee5c30ee8\",\"target_node_id\":\"9425a0357c314d708f3972dcdcaed14c\",\"branch_id\":\"29b5ae854e2548d99ba1dc18830f8c77\",\"id\":\"b5d82663f76f41cbb1666cc224408a24\",\"name\":\"29b5ae854e2548d99ba1dc18830f8c77\"},{\"type\":\"Edge\",\"source_node_id\":\"9425a0357c314d708f3972dcdcaed14c\",\"target_node_id\":\"b4df58eeb84749dfa3737fac3bca85ff\",\"id\":\"f9c098736e644ee5b2c4a09c15f02eb9\"},{\"type\":\"Edge\",\"source_node_id\":\"b2ce1b4e581845e4867c0a2ee5c30ee8\",\"target_node_id\":\"c1b0535da95a4dd096fc349276a8202e\",\"branch_id\":\"d372764e757b4d49a92861cbc12516ba\",\"id\":\"f7514a26e3954f138cdd3eb53291c904\",\"name\":\"d372764e757b4d49a92861cbc12516ba\"},{\"type\":\"Edge\",\"source_node_id\":\"c1b0535da95a4dd096fc349276a8202e\",\"target_node_id\":\"717d9e4d03b048c3963ad44c30ecee0b\",\"id\":\"dd3d57cdc10a436887667b9c80a02994\"},{\"type\":\"Edge\",\"source_node_id\":\"5f245cbc4b12423f95bf6575fa767ace\",\"target_node_id\":\"67530d569a93410eacf29e636ba93906\",\"id\":\"2bd7fb91a2e94268a3a51705e09d4c15\"},{\"type\":\"Edge\",\"source_node_id\":\"717d9e4d03b048c3963ad44c30ecee0b\",\"target_node_id\":\"c7cfcba603c34a8da11217e04fd97509\",\"id\":\"b5ae1fe0bb9f4cbfb7cfc7aa36eff9e7\"},{\"type\":\"Edge\",\"source_node_id\":\"b2ce1b4e581845e4867c0a2ee5c30ee8\",\"target_node_id\":\"7fa3072b5d074027a9af99e78568e9d8\",\"branch_id\":\"55f18f195f4c46fa8a021398b9a4b450\",\"id\":\"dbd211d235d148bab9430eec07628e39\",\"name\":\"55f18f195f4c46fa8a021398b9a4b450\"},{\"type\":\"Edge\",\"source_node_id\":\"7fa3072b5d074027a9af99e78568e9d8\",\"target_node_id\":\"67530d569a93410eacf29e636ba93906\",\"id\":\"5868f07662df4a26a95e4f2bca2ad297\"},{\"type\":\"Edge\",\"source_node_id\":\"45f270501fa2417483eb2d026107bb4e\",\"target_node_id\":\"b4df58eeb84749dfa3737fac3bca85ff\",\"id\":\"b0b64935a32c46ada31246b668ce3fa2\"},{\"type\":\"Edge\",\"source_node_id\":\"7ec718a8c47b4fc98aa9e1463325008d\",\"target_node_id\":\"f2c2f98ab1c441d289a1fb21b302327b\",\"id\":\"b675d9fa19f64caeb1eecdf171d199e5\"},{\"type\":\"Edge\",\"source_node_id\":\"f2c2f98ab1c441d289a1fb21b302327b\",\"target_node_id\":\"45f270501fa2417483eb2d026107bb4e\",\"id\":\"0ad3670e9c224848a4c4be34e32bc4cd\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"is_valid\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n})()\\n\"},\"list\":false,\"id\":\"730322e0452043b895efd30399e62105\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"validation_reason\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"8cb5bc1f3872420ca70dfc736c2f3786\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"auto_resolution_context_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"58eccd7187854813a49a047c2169ff4b\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"topic_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"eb0f71f002c549dcb921e48b2efa1a61\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"task_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"dc8c00f606624e19b210dececb6d6282\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"task_table\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"fdcdbf7fc87a495b95a547738fd6d3fe\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"is_notification_expired\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"9de5e5e9746748878952302a3485d3bf\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"action_sys_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"3a3d030e447e4f988d8b364e53c1ca40\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"is_iar_wrapper_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"true\"},\"list\":false,\"id\":\"7aba24c94343465a9bf034c6ff98937a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"auto_select\":false,\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[{\"name\":\"No, close it\",\"element\":\"close\"},{\"name\":\"Yes, keep it open\",\"element\":\"open\"}],\"id\":\"5a3f98adebba43c5a9fc639ce6b24e00\",\"name\":\"close_task_input\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"label\":\"Close Task Input\"}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"d1cf2a4e5316101055eeddeeff7b12cc\",\"name\":\"Issue Auto-Resolution\",\"key_phrases\":[\"Issue Auto-Resolution\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"description\":\"Auto Resolution Topic\",\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"title\":\"Issue Auto-Resolution\",\"library\":false,\"csTopicId\":\"86cf6a4e5316101055eeddeeff7b12ba\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Issue Auto-Resolution","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"d1cf2a4e5316101055eeddeeff7b12cc","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/86cf6a4e5316101055eeddeeff7b12ba","value":"86cf6a4e5316101055eeddeeff7b12ba"},"sys_created_by":"admin","sys_policy":"read"},{"sys_mod_count":"131","sys_updated_on":"2022-06-22 16:20:55","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"4db66b3e81e7461b89753fafc20c5026\": {\n          \"id\": \"4db66b3e81e7461b89753fafc20c5026\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\": {\n          \"id\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"f2843eaef896486f93adc94eee664f38\": {\n          \"id\": \"f2843eaef896486f93adc94eee664f38\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Results to Display?\"\n        },\n        \"fadbf60b3e7a49739666715ddd717b5d\": {\n          \"id\": \"fadbf60b3e7a49739666715ddd717b5d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Was Links Helpful?\"\n        },\n        \"345c7e123a9f4c69914bd8d1cc7e04d9\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Specific Link Feedback\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Select any recommendations that helped:\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"45c7c4040c50450abe98b33cd1afd8f6\",\n          \"id\": \"345c7e123a9f4c69914bd8d1cc7e04d9\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var response = JSON.parse(vaVars.search_results);\\n    var resultsLength = global.VAAISearchHelperTokyo.getRegularSearchDisplaySize(response);\\n\\n    for (i = 0; i < resultsLength; i++) {\\n        var searchResult = response[i];\\n        var propValues = searchResult.propValues;\\n        var title = global.VAAISearchHelperTokyo.buildSearchTitle(propValues);\\n        options.push({ 'value': searchResult.auto_resolution_line_item_sys_id, 'label': title });\\n    }\\n\\n    options.push({ 'value': 'skip', 'label': gs.getMessageLang('Skip', vaContext.getRequesterLang()) });\\n\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var response = JSON.parse(vaVars.search_results);\\n    var resultsLength = global.VAAISearchHelperTokyo.getRegularSearchDisplaySize(response);\\n\\n    for (i = 0; i < resultsLength; i++) {\\n        var searchResult = response[i];\\n        var propValues = searchResult.propValues;\\n        var title = global.VAAISearchHelperTokyo.buildSearchTitle(propValues);\\n        options.push({ 'value': searchResult.auto_resolution_line_item_sys_id, 'label': title });\\n    }\\n\\n    options.push({ 'value': 'skip', 'label': gs.getMessageLang('Skip', vaContext.getRequesterLang()) });\\n\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"d940e9fb74e04a69a6d42cd71243f6c9\": {\n          \"id\": \"d940e9fb74e04a69a6d42cd71243f6c9\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Display Genius Card\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n    return global.VAAISearchHelperTokyo.generateGeniusCardResponse(\\n        vaVars.search_metadata, vaVars.genius_results, vaSystem, vaInputs, vaVars, \\\"ask_genius_helpful\\\");\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"605bcf7d03ce4adc900660fe114626d4\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Ask Genius Helpful\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Did this recommendation help you?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"3b012a952bfa41b686ac7c2fc1a06283\",\n          \"id\": \"605bcf7d03ce4adc900660fe114626d4\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n\\n    if (!gs.nil(vaVars.catalogId)) {\\n        options.push({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request Catalog Item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang('Yes, it helped', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('No, show me more', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n\\n    if (!gs.nil(vaVars.catalogId)) {\\n        options.push({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request Catalog Item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang('Yes, it helped', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('No, show me more', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"0c400259238b4663acbc31542f884ab5\": {\n          \"id\": \"0c400259238b4663acbc31542f884ab5\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Display Link Results\",\n          \"url\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"label\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"header\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"multiple\",\n          \"introMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Your recommendations...\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"listOfLinks\": \"(function execute(header) {\\n    return global.VAAISearchHelperTokyo.generateSearchResultsResponse(\\n        vaVars.search_metadata, vaVars.search_results, header, vaSystem, vaInputs, vaVars, \\\"ask_links_helpful\\\");\\n})(header)\\n\"\n        },\n        \"499df9625eb343d086a36b742715235d\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Ask Links Helpful\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Did any of the recommendations help you?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"4d42432855d34401a5651afa3e548116\",\n          \"id\": \"499df9625eb343d086a36b742715235d\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang('Yes, they helped', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('No, they did not help', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Oops, something went wrong\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang('Yes, they helped', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('No, they did not help', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"1e07489c143b4e769963467cbb9ec0b6\": {\n          \"id\": \"1e07489c143b4e769963467cbb9ec0b6\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Was Genius Helpful?\"\n        },\n        \"6c79a718ccd449e39199ba395fd2ded3\": {\n          \"id\": \"6c79a718ccd449e39199ba395fd2ded3\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Request Catalog Item\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"Request Catalog Item\",\n          \"reusableTopicId\": \"a39acd71c3a3330012d1758a7ff57eb6\",\n          \"inputs\": {\n            \"catalog_item_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.catalogId}}\",\n                        \"displayValue\": \"Script VariablescatalogId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"execute_contextual_search\": {\n              \"value\": \"false\",\n              \"mode\": \"simple\",\n              \"type\": \"String\"\n            },\n            \"confirm_catalog_item\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"false\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"show_end_state_card\": {\n              \"value\": \"false\",\n              \"mode\": \"simple\",\n              \"type\": \"True/False\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"f5579d07d75b4bbd9cb8663e892360f6\",\n              \"value\": \"record_id\",\n              \"mapping\": \"record_id\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"3f39ab5f55dd4adbb5771bc33bb63acb\",\n              \"value\": \"record_table\",\n              \"mapping\": \"record_table\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"929f4cdf61f1470d9ddfaf5002a82786\",\n              \"value\": \"variables\",\n              \"mapping\": \"variables\",\n              \"preventDisable\": false\n            }\n          ],\n          \"variableIds\": [\n            \"f5579d07d75b4bbd9cb8663e892360f6\",\n            \"3f39ab5f55dd4adbb5771bc33bb63acb\",\n            \"929f4cdf61f1470d9ddfaf5002a82786\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false\n        },\n        \"61bdf71c77c640f2a50d49689f2d1473\": {\n          \"id\": \"61bdf71c77c640f2a50d49689f2d1473\",\n          \"name\": \"Setup\",\n          \"script\": \"(function execute() {\\n    vaVars.loggingContext = JSON.stringify(global.VAAISearchHelperTokyo.getLoggingContext(vaSystem));\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info('Starting \\\"IAR - AI Search\\\" topic');\\n\\n    // get results from api\\n    var contextId = JSON.parse(vaVars.global_notification_context).tableSysId;\\n    var aiSearchResult = global.AutoResolutionAISearchHelper.getSearchResultByContextId(contextId);\\n    \\n    if (aiSearchResult) {\\n        vaVars.ai_search_result_id = aiSearchResult.getSysId();\\n\\n        // adding click metrics params\\n        vaVars.user_id = aiSearchResult.getUserId();\\n        vaVars.session_id = aiSearchResult.getSessionId();\\n        vaVars.is_logged_in = gs.getSession().isLoggedIn();\\n        vaVars.language = gs.getSession().getLanguage();\\n        \\n        var processedResults = global.VAAISearchHelperTokyo.processResults(aiSearchResult.getResultPayload(), vaSystem, vaInputs, vaVars);\\n        var formattedResults = global.AutoResolutionAISearchHelper.formatResultsForIAR(aiSearchResult, processedResults);\\n        \\n        vaVars.search_metadata = formattedResults.searchMetadata;\\n        vaVars.genius_results = formattedResults.geniusSearchResult;\\n        vaVars.search_results = formattedResults.searchResults;\\n    }\\n\\n    try {\\n        var jsonData = JSON.parse(vaVars.genius_results);\\n        var catalogId = jsonData.propValues.actions[0].actionPayload.sysId.toString();\\n        var isCatalogSupported = new sn_sc.CatalogConversationHelper().getConversationalRenderType(catalogId, true);\\n        if (isCatalogSupported == \\\"conversation\\\")\\n          vaVars.catalogId = catalogId;\\n    } catch (e) {\\n        gs.info(\\\"No Catalog Id found for this search result.\\\");\\n    }\\n    \\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"91bb029143f44c42a5b8c06ff4005641\": {\n          \"id\": \"91bb029143f44c42a5b8c06ff4005641\",\n          \"name\": \"Send Feedback\",\n          \"script\": \"(function execute() {\\n    // send feedback for specific result\\n    if (vaInputs.specific_link_feedback != 'skip') {\\n        var positiveValues = AutoResolutionAISearchHelper.getAvailablePositiveFeedbackValues();\\n        \\n        // have to concat string to convert to correct string\\n        global.AutoResolutionAISearchHelper.updateResultLineItemFeedback(vaInputs.specific_link_feedback + '',\\n            global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_POSITIVE, positiveValues[0].value, true);\\n\\n        if (vaVars.ai_search_result_id) {\\n            global.AutoResolutionAISearchHelper.updateAISResultFeedback(vaVars.ai_search_result_id, \\n                                global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_POSITIVE);\\n        }\\n\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"fa37aead0eff47a4836d639a660ad677\": {\n          \"id\": \"fa37aead0eff47a4836d639a660ad677\",\n          \"name\": \"Set Genius Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_genius_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"22f80de33c1b48ee8c67c2a270cfbdb2\": {\n          \"id\": \"22f80de33c1b48ee8c67c2a270cfbdb2\",\n          \"name\": \"Unset Genius Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_genius_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"5f3bf320efc04bc4b09aa155c35aedb9\": {\n          \"id\": \"5f3bf320efc04bc4b09aa155c35aedb9\",\n          \"name\": \"Set Link Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_links_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"abe789bfa2d24fbdb70aa3e10b014b05\": {\n          \"id\": \"abe789bfa2d24fbdb70aa3e10b014b05\",\n          \"name\": \"Unset Link Reference Choice\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_links_helpful\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7236a8903bd14705b2addbd0640f5e95\": {\n          \"id\": \"7236a8903bd14705b2addbd0640f5e95\",\n          \"stepType\": \"RecordOutput\",\n          \"name\": \"Request Output Card\",\n          \"variableId\": \"\",\n          \"cardTemplate\": \"General\",\n          \"cardFields\": {},\n          \"mode\": \"script\",\n          \"tableName\": \"sc_req_item\",\n          \"fields\": [\n            \"number\",\n            \"cat_item\",\n            \"price\",\n            \"quantity\",\n            \"requested_for\",\n            \"estimated_delivery\"\n          ],\n          \"cardDefinition\": {\n            \"name\": \"Record\",\n            \"value\": \"General\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"condition\": {\n            \"mode\": \"glide_scripted_query\",\n            \"value\": \"(function execute(table) {\\n       var gr = new GlideRecord(\\\"sc_req_item\\\");\\n       gr.addQuery('sys_id', vaInputs.record_id.toString());\\n       gr.query();\\n       if(gr.next()) {\\n          return gr;\\n       }\\n})(table)\\n\"\n          }\n        },\n        \"83cc02186bbc48f39ee7e2dd2dc109a1\": {\n          \"id\": \"83cc02186bbc48f39ee7e2dd2dc109a1\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Feedback Submitted?\"\n        },\n        \"968247e074bc44029b3baec51485aa3f\": {\n          \"id\": \"968247e074bc44029b3baec51485aa3f\",\n          \"name\": \"Check Feedback Submitted\",\n          \"script\": \"(function execute() {\\n    var response = JSON.parse(vaVars.search_results);\\n    var resultsLength = global.VAAISearchHelperTokyo.getRegularSearchDisplaySize(response);\\n    vaVars.feedback_submitted = 'false';\\n\\n    for (i = 0; i < resultsLength; i++) {\\n        var searchResult = response[i];\\n        var lineItem = new global.AutoResolutionAISearchResultLineItem(searchResult.auto_resolution_line_item_sys_id);\\n        if (lineItem.isFeedbackSubmitted() == true) {\\n            vaVars.feedback_submitted = 'true';\\n        }\\n    }\\n    \\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"2248a68d66a144d49c788243c5ed6695\": {\n          \"id\": \"2248a68d66a144d49c788243c5ed6695\",\n          \"name\": \"Find Request Id\",\n          \"script\": \"(function execute() {\\n    var gr = new GlideRecord(\\\"sc_req_item\\\");\\n    gr.addQuery('sys_id', vaInputs.record_id.toString());\\n    gr.query();\\n    if(gr.next()) {\\n        vaVars.reqItemId = gr.getValue(\\\"sys_id\\\");\\n    }\\n})()\\n\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"722f741ffc2c41f4b588cfc665b984af\": {\n          \"id\": \"722f741ffc2c41f4b588cfc665b984af\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"e2bf60e473d3443ab8c8071e800d4950\": {\n          \"id\": \"e2bf60e473d3443ab8c8071e800d4950\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Request Submitted\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Your request has been submitted successfully.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"2628aceccb0848adb505bdacb7bfb440\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"61696651fa884fa59e934a18c5930bcb\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4db66b3e81e7461b89753fafc20c5026\",\n          \"target\": \"61bdf71c77c640f2a50d49689f2d1473\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e07198421df047b1b67f7effa2d8e994\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fadbf60b3e7a49739666715ddd717b5d\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var notHelpful = vaInputs.ask_links_helpful == 'no' ? true : false;\\n    if(notHelpful && vaVars.ai_search_result_id) {\\n        global.AutoResolutionAISearchHelper.updateAISResultFeedback(vaVars.ai_search_result_id, \\n                                global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_NEGATIVE);\\n    }\\n    return notHelpful;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"6d91d1a7cbdf4fb5ba43e56ca85157d9\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f2843eaef896486f93adc94eee664f38\",\n          \"target\": \"d940e9fb74e04a69a6d42cd71243f6c9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return global.VAAISearchHelperTokyo.shouldDisplayGeniusResult(vaVars.genius_results, vaVars.loggingContext);\\n})()\"\n          },\n          \"label\": \"Display Genius Result\"\n        },\n        {\n          \"id\": \"8e35935b0104468db7272364190a0f68\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f2843eaef896486f93adc94eee664f38\",\n          \"target\": \"0c400259238b4663acbc31542f884ab5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.genius_results) && !gs.nil(vaVars.search_results);\\n})()\"\n          },\n          \"label\": \"Display Results\"\n        },\n        {\n          \"id\": \"ab57e58231444c4c95b057d0fe8c0a34\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1e07489c143b4e769963467cbb9ec0b6\",\n          \"target\": \"0c400259238b4663acbc31542f884ab5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'no' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"70a2a2a62d8f4fa1be715cece9862dd2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1e07489c143b4e769963467cbb9ec0b6\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var helpful = vaInputs.ask_genius_helpful == 'yes' ? true : false;\\n\\n    if (helpful) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the genius search result was helpful');\\n\\n        // send feedback\\n        var lineItemSysId = JSON.parse(vaVars.genius_results).auto_resolution_line_item_sys_id;\\n        var positiveValues = AutoResolutionAISearchHelper.getAvailablePositiveFeedbackValues();\\n        \\n        global.AutoResolutionAISearchHelper.updateResultLineItemFeedback(lineItemSysId,\\n            global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_POSITIVE, positiveValues[0].value, true);\\n        \\n        if (vaVars.ai_search_result_id) {\\n            global.AutoResolutionAISearchHelper.updateAISResultFeedback(vaVars.ai_search_result_id, \\n                                global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_POSITIVE);\\n        }\\n    }\\n\\n    return helpful;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"b16fe85fb99e48808aea5fa83a83fda4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1e07489c143b4e769963467cbb9ec0b6\",\n          \"target\": \"6c79a718ccd449e39199ba395fd2ded3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'request_catalog_item' ? true : false;\\n})()\\n\"\n          },\n          \"label\": \"Request Catalog Item\"\n        },\n        {\n          \"id\": \"0ae77cbdfaaa4aa2b69992451e98db85\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f2843eaef896486f93adc94eee664f38\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.didFdihInvocationTimeOut ||\\n        (gs.nil(vaVars.genius_results) && gs.nil(vaVars.search_results));\\n})()\"\n          },\n          \"label\": \"No Results or Error\"\n        },\n        {\n          \"id\": \"604066d6af654e0cb0341baa103dbf6b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"61bdf71c77c640f2a50d49689f2d1473\",\n          \"target\": \"f2843eaef896486f93adc94eee664f38\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ca86076161fd4c5ab0e688dd29f9bb50\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"345c7e123a9f4c69914bd8d1cc7e04d9\",\n          \"target\": \"91bb029143f44c42a5b8c06ff4005641\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7da8f6f3443843f78d51b13142144481\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"91bb029143f44c42a5b8c06ff4005641\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"603f5572f2044a549e5ece7a89aa0afd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d940e9fb74e04a69a6d42cd71243f6c9\",\n          \"target\": \"fa37aead0eff47a4836d639a660ad677\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9a4f14c9f98946729ae5a434f7f93069\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"fa37aead0eff47a4836d639a660ad677\",\n          \"target\": \"605bcf7d03ce4adc900660fe114626d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a80d3749418b4a3a8755328cfa8d602a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"605bcf7d03ce4adc900660fe114626d4\",\n          \"target\": \"22f80de33c1b48ee8c67c2a270cfbdb2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"78eabe7115394c50add4ce520f7dfc27\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"22f80de33c1b48ee8c67c2a270cfbdb2\",\n          \"target\": \"1e07489c143b4e769963467cbb9ec0b6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"026833c3714d4126bc500c66f587f29a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0c400259238b4663acbc31542f884ab5\",\n          \"target\": \"5f3bf320efc04bc4b09aa155c35aedb9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"049351e23e42420586df22109f29eca3\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5f3bf320efc04bc4b09aa155c35aedb9\",\n          \"target\": \"499df9625eb343d086a36b742715235d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ff512005d01c4072b8544b4d6030c333\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"499df9625eb343d086a36b742715235d\",\n          \"target\": \"abe789bfa2d24fbdb70aa3e10b014b05\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"63650a014857465a93eb2fdc3dd145ee\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"abe789bfa2d24fbdb70aa3e10b014b05\",\n          \"target\": \"fadbf60b3e7a49739666715ddd717b5d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"860ff9291d7d440dbab91f3f1c39d06d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7236a8903bd14705b2addbd0640f5e95\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3f41535464704f6f98d5e21585b21e41\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"83cc02186bbc48f39ee7e2dd2dc109a1\",\n          \"target\": \"345c7e123a9f4c69914bd8d1cc7e04d9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.feedback_submitted == 'false';\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"f297a7e6792f4406b8c4b5aaec7a2d09\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"83cc02186bbc48f39ee7e2dd2dc109a1\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.feedback_submitted == 'true';\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"ff9f8dfcd7c343f9aa019a8c50dd1f6a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fadbf60b3e7a49739666715ddd717b5d\",\n          \"target\": \"968247e074bc44029b3baec51485aa3f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var helpful = vaInputs.ask_links_helpful == 'yes' ? true : false;\\n\\n    if (helpful) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the genius search result was helpful');\\n    }\\n\\n    return helpful;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"ebaf69a9ed4b43afba5d733e01b0c56a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"968247e074bc44029b3baec51485aa3f\",\n          \"target\": \"83cc02186bbc48f39ee7e2dd2dc109a1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f2d59a87dffa4668a6878f34bacbe58b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6c79a718ccd449e39199ba395fd2ded3\",\n          \"target\": \"2248a68d66a144d49c788243c5ed6695\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f4dd832306534f1a841825842f11bf2e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2248a68d66a144d49c788243c5ed6695\",\n          \"target\": \"722f741ffc2c41f4b588cfc665b984af\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5b6ce42128894fa79d679d49d0ca1566\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"722f741ffc2c41f4b588cfc665b984af\",\n          \"target\": \"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.reqItemId);\\n})()\\n\"\n          },\n          \"label\": \"RequestId Not Found\"\n        },\n        {\n          \"id\": \"caa8ae39b03643938ad4cb33a02e40c9\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"722f741ffc2c41f4b588cfc665b984af\",\n          \"target\": \"e2bf60e473d3443ab8c8071e800d4950\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !gs.nil(vaVars.reqItemId);\\n})()\\n\"\n          },\n          \"label\": \"RequestId Found\"\n        },\n        {\n          \"id\": \"d2a87e144807457389268361823dcfbd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e2bf60e473d3443ab8c8071e800d4950\",\n          \"target\": \"7236a8903bd14705b2addbd0640f5e95\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"a7bd66563d53484b8140d15c3ff37ebf\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"a7bd66563d53484b8140d15c3ff37ebf\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"45c7c4040c50450abe98b33cd1afd8f6\": {\n      \"id\": \"45c7c4040c50450abe98b33cd1afd8f6\",\n      \"name\": \"specific_link_feedback\",\n      \"label\": \"Specific Link Feedback\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\"\n    },\n    \"3b012a952bfa41b686ac7c2fc1a06283\": {\n      \"id\": \"3b012a952bfa41b686ac7c2fc1a06283\",\n      \"name\": \"ask_genius_helpful\",\n      \"label\": \"Ask Genius Helpful\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\"\n    },\n    \"4d42432855d34401a5651afa3e548116\": {\n      \"id\": \"4d42432855d34401a5651afa3e548116\",\n      \"name\": \"ask_links_helpful\",\n      \"label\": \"Ask Links Helpful\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\"\n    },\n    \"ef2a8f8a05314200ac31929fa74c4386\": {\n      \"id\": \"ef2a8f8a05314200ac31929fa74c4386\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"catalogId\",\n      \"label\": \"catalogId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3091e02519da428286ed4fcc4d0f1a83\": {\n      \"id\": \"3091e02519da428286ed4fcc4d0f1a83\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"search_results\",\n      \"label\": \"search_results\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"431b443853d840318ba551a42692d6db\": {\n      \"id\": \"431b443853d840318ba551a42692d6db\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"genius_results\",\n      \"label\": \"genius_results\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fc9451029d91402087ad4d5ceee81dd3\": {\n      \"id\": \"fc9451029d91402087ad4d5ceee81dd3\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"search_metadata\",\n      \"label\": \"search_metadata\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"916908b4cfef4ba4adbc531f444a548e\": {\n      \"id\": \"916908b4cfef4ba4adbc531f444a548e\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"ai_search_result_id\",\n      \"label\": \"ai_search_result_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f8a4a23696fd4d8e9cea8cd28dc8514e\": {\n      \"id\": \"f8a4a23696fd4d8e9cea8cd28dc8514e\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"feedback_submitted\",\n      \"label\": \"feedback_submitted\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f5579d07d75b4bbd9cb8663e892360f6\": {\n      \"id\": \"f5579d07d75b4bbd9cb8663e892360f6\",\n      \"name\": \"record_id\",\n      \"label\": \"Record_id\",\n      \"defaultValue\": \"record_id\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true\n    },\n    \"3f39ab5f55dd4adbb5771bc33bb63acb\": {\n      \"id\": \"3f39ab5f55dd4adbb5771bc33bb63acb\",\n      \"name\": \"record_table\",\n      \"label\": \"Record_table\",\n      \"defaultValue\": \"record_table\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false\n    },\n    \"929f4cdf61f1470d9ddfaf5002a82786\": {\n      \"id\": \"929f4cdf61f1470d9ddfaf5002a82786\",\n      \"name\": \"variables\",\n      \"label\": \"Variables\",\n      \"defaultValue\": \"variables\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false\n    },\n    \"9cf78d5508bf48f68764e75cdb0eb4ff\": {\n      \"id\": \"9cf78d5508bf48f68764e75cdb0eb4ff\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"reqItemId\",\n      \"label\": \"reqItemId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"7d430a1feb1001102c672add08522849","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca4f3f704b52210559073c06a02f789","value":"aca4f3f704b52210559073c06a02f789"},"sys_update_name":"sys_cb_design_topic_7d430a1feb1001102c672add08522849","sys_updated_by":"admin","sys_created_on":"2021-12-13 17:52:34","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"aa98e2f00c194f0ab76c97808497389f\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"aa98e2f00c194f0ab76c97808497389f\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"aa98e2f00c194f0ab76c97808497389f\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"4db66b3e81e7461b89753fafc20c5026\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\"name\":\"End\"},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Results to Display?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Display Genius Result\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return global.VAAISearchHelperTokyo.shouldDisplayGeniusResult(vaVars.genius_results, vaVars.loggingContext);\\n})()\"},\"id\":\"3716892da85a45fd81549da359d5949e\",\"name\":\"Display Genius Result\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Display Results\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaVars.genius_results) && !gs.nil(vaVars.search_results);\\n})()\"},\"id\":\"8d39d3e700bf4766ac42b5c3e47b40ab\",\"name\":\"Display Results\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No Results or Error\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.didFdihInvocationTimeOut ||\\n        (gs.nil(vaVars.genius_results) && gs.nil(vaVars.search_results));\\n})()\"},\"id\":\"bf297794e7d64a61bf1b571d3d2d6d57\",\"name\":\"No Results or Error\"}],\"id\":\"f2843eaef896486f93adc94eee664f38\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Was Links Helpful?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notHelpful = vaInputs.ask_links_helpful == 'no' ? true : false;\\n    if(notHelpful && vaVars.ai_search_result_id) {\\n        global.AutoResolutionAISearchHelper.updateAISResultFeedback(vaVars.ai_search_result_id, \\n                                global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_NEGATIVE);\\n    }\\n    return notHelpful;\\n})()\\n\"},\"id\":\"7d63c838b3a64fd494521ce1a6bd48af\",\"name\":\"No\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var helpful = vaInputs.ask_links_helpful == 'yes' ? true : false;\\n\\n    if (helpful) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the genius search result was helpful');\\n    }\\n\\n    return helpful;\\n})()\\n\"},\"id\":\"6e8b7b75e34f483aa972c8e8e6e9b5de\",\"name\":\"Yes\"}],\"id\":\"fadbf60b3e7a49739666715ddd717b5d\",\"goal_id\":\"primary\"},{\"type\":\"ReferenceChoiceInputPrompt\",\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"345c7e123a9f4c69914bd8d1cc7e04d9\",\"name\":\"Specific Link Feedback\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"45c7c4040c50450abe98b33cd1afd8f6\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Select any recommendations that helped:\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var response = JSON.parse(vaVars.search_results);\\n    var resultsLength = global.VAAISearchHelperTokyo.getRegularSearchDisplaySize(response);\\n\\n    for (i = 0; i < resultsLength; i++) {\\n        var searchResult = response[i];\\n        var propValues = searchResult.propValues;\\n        var title = global.VAAISearchHelperTokyo.buildSearchTitle(propValues);\\n        options.push({ 'value': searchResult.auto_resolution_line_item_sys_id, 'label': title });\\n    }\\n\\n    options.push({ 'value': 'skip', 'label': gs.getMessageLang('Skip', vaContext.getRequesterLang()) });\\n\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Oops, something went wrong\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    var response = JSON.parse(vaVars.search_results);\\n    var resultsLength = global.VAAISearchHelperTokyo.getRegularSearchDisplaySize(response);\\n\\n    for (i = 0; i < resultsLength; i++) {\\n        var searchResult = response[i];\\n        var propValues = searchResult.propValues;\\n        var title = global.VAAISearchHelperTokyo.buildSearchTitle(propValues);\\n        options.push({ 'value': searchResult.auto_resolution_line_item_sys_id, 'label': title });\\n    }\\n\\n    options.push({ 'value': 'skip', 'label': gs.getMessageLang('Skip', vaContext.getRequesterLang()) });\\n\\n    return options;\\n})()\\n\"}},{\"type\":\"ScriptOutputPrompt\",\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"d940e9fb74e04a69a6d42cd71243f6c9\",\"name\":\"Display Genius Card\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n    return global.VAAISearchHelperTokyo.generateGeniusCardResponse(\\n        vaVars.search_metadata, vaVars.genius_results, vaSystem, vaInputs, vaVars, \\\"ask_genius_helpful\\\");\\n})()\"},\"secure\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"605bcf7d03ce4adc900660fe114626d4\",\"name\":\"Ask Genius Helpful\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"3b012a952bfa41b686ac7c2fc1a06283\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Did this recommendation help you?\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n\\n    if (!gs.nil(vaVars.catalogId)) {\\n        options.push({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request Catalog Item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang('Yes, it helped', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('No, show me more', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Oops, something went wrong\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n\\n    if (!gs.nil(vaVars.catalogId)) {\\n        options.push({ 'value': 'request_catalog_item', 'label': gs.getMessageLang('Request Catalog Item', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    }\\n\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang('Yes, it helped', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('No, show me more', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\"}},{\"type\":\"LinkOutputPrompt\",\"type\":\"LinkOutputPrompt\",\"header\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Your recommendations...\\\", vaContext.getRequesterLang())\"},\"label\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"url\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"link_type\":\"multiple\",\"multi_link_script\":\"(function execute(header) {\\n    return global.VAAISearchHelperTokyo.generateSearchResultsResponse(\\n        vaVars.search_metadata, vaVars.search_results, header, vaSystem, vaInputs, vaVars, \\\"ask_links_helpful\\\");\\n})(header)\\n\",\"id\":\"0c400259238b4663acbc31542f884ab5\",\"name\":\"Display Link Results\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ReferenceChoiceInputPrompt\",\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"499df9625eb343d086a36b742715235d\",\"name\":\"Ask Links Helpful\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"4d42432855d34401a5651afa3e548116\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Did any of the recommendations help you?\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang('Yes, they helped', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('No, they did not help', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Oops, something went wrong\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    options.push({ 'value': 'yes', 'label': gs.getMessageLang('Yes, they helped', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({ 'value': 'no', 'label': gs.getMessageLang('No, they did not help', vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Was Genius Helpful?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'no' ? true : false;\\n})()\\n\"},\"id\":\"f890f363eadf4547a698dd91c2f8d3e2\",\"name\":\"No\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var helpful = vaInputs.ask_genius_helpful == 'yes' ? true : false;\\n\\n    if (helpful) {\\n        global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info(\\n            'User has decided that the genius search result was helpful');\\n\\n        // send feedback\\n        var lineItemSysId = JSON.parse(vaVars.genius_results).auto_resolution_line_item_sys_id;\\n        var positiveValues = AutoResolutionAISearchHelper.getAvailablePositiveFeedbackValues();\\n        \\n        global.AutoResolutionAISearchHelper.updateResultLineItemFeedback(lineItemSysId,\\n            global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_POSITIVE, positiveValues[0].value, true);\\n        \\n        if (vaVars.ai_search_result_id) {\\n            global.AutoResolutionAISearchHelper.updateAISResultFeedback(vaVars.ai_search_result_id, \\n                                global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_POSITIVE);\\n        }\\n    }\\n\\n    return helpful;\\n})()\\n\"},\"id\":\"eefbf736e6a5445c97c4ec1bfd4d0b77\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Request Catalog Item\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.ask_genius_helpful == 'request_catalog_item' ? true : false;\\n})()\\n\"},\"id\":\"e6b90c414ec245508609a4c71c29ed1e\",\"name\":\"Request Catalog Item\"}],\"id\":\"1e07489c143b4e769963467cbb9ec0b6\",\"goal_id\":\"primary\"},{\"type\":\"LibraryCall\",\"type\":\"LibraryCall\",\"library_topic_name\":\"Request Catalog Item\",\"library_topic_id\":\"a39acd71c3a3330012d1758a7ff57eb6\",\"parameter-mappings\":[{\"parameter-name\":\"catalog_item_id\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.catalogId}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"execute_contextual_search\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"confirm_catalog_item\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"show_end_state_card\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"record_id\",\"main_topic_mapped_variable_name\":\"record_id\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"record_table\",\"main_topic_mapped_variable_name\":\"record_table\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"variables\",\"main_topic_mapped_variable_name\":\"variables\"}],\"id\":\"6c79a718ccd449e39199ba395fd2ded3\",\"name\":\"Request Catalog Item\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.loggingContext = JSON.stringify(global.VAAISearchHelperTokyo.getLoggingContext(vaSystem));\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).info('Starting \\\"IAR - AI Search\\\" topic');\\n\\n    // get results from api\\n    var contextId = JSON.parse(vaVars.global_notification_context).tableSysId;\\n    var aiSearchResult = global.AutoResolutionAISearchHelper.getSearchResultByContextId(contextId);\\n    \\n    if (aiSearchResult) {\\n        vaVars.ai_search_result_id = aiSearchResult.getSysId();\\n\\n        // adding click metrics params\\n        vaVars.user_id = aiSearchResult.getUserId();\\n        vaVars.session_id = aiSearchResult.getSessionId();\\n        vaVars.is_logged_in = gs.getSession().isLoggedIn();\\n        vaVars.language = gs.getSession().getLanguage();\\n        \\n        var processedResults = global.VAAISearchHelperTokyo.processResults(aiSearchResult.getResultPayload(), vaSystem, vaInputs, vaVars);\\n        var formattedResults = global.AutoResolutionAISearchHelper.formatResultsForIAR(aiSearchResult, processedResults);\\n        \\n        vaVars.search_metadata = formattedResults.searchMetadata;\\n        vaVars.genius_results = formattedResults.geniusSearchResult;\\n        vaVars.search_results = formattedResults.searchResults;\\n    }\\n\\n    try {\\n        var jsonData = JSON.parse(vaVars.genius_results);\\n        var catalogId = jsonData.propValues.actions[0].actionPayload.sysId.toString();\\n        var isCatalogSupported = new sn_sc.CatalogConversationHelper().getConversationalRenderType(catalogId, true);\\n        if (isCatalogSupported == \\\"conversation\\\")\\n          vaVars.catalogId = catalogId;\\n    } catch (e) {\\n        gs.info(\\\"No Catalog Id found for this search result.\\\");\\n    }\\n    \\n})()\\n\",\"id\":\"61bdf71c77c640f2a50d49689f2d1473\",\"name\":\"Setup\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    // send feedback for specific result\\n    if (vaInputs.specific_link_feedback != 'skip') {\\n        var positiveValues = AutoResolutionAISearchHelper.getAvailablePositiveFeedbackValues();\\n        \\n        // have to concat string to convert to correct string\\n        global.AutoResolutionAISearchHelper.updateResultLineItemFeedback(vaInputs.specific_link_feedback + '',\\n            global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_POSITIVE, positiveValues[0].value, true);\\n\\n        if (vaVars.ai_search_result_id) {\\n            global.AutoResolutionAISearchHelper.updateAISResultFeedback(vaVars.ai_search_result_id, \\n                                global.AutoResolutionAISearchResultLineItem.FEEDBACK_TYPE_POSITIVE);\\n        }\\n\\n    }\\n})()\\n\",\"id\":\"91bb029143f44c42a5b8c06ff4005641\",\"name\":\"Send Feedback\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_genius_helpful\\\");\\n})()\\n\",\"id\":\"fa37aead0eff47a4836d639a660ad677\",\"name\":\"Set Genius Reference Choice\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_genius_helpful\\\");\\n})()\\n\",\"id\":\"22f80de33c1b48ee8c67c2a270cfbdb2\",\"name\":\"Unset Genius Reference Choice\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.acceptUIBMessages(true, \\\"ask_links_helpful\\\");\\n})()\\n\",\"id\":\"5f3bf320efc04bc4b09aa155c35aedb9\",\"name\":\"Set Link Reference Choice\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"ask_links_helpful\\\");\\n})()\\n\",\"id\":\"abe789bfa2d24fbdb70aa3e10b014b05\",\"name\":\"Unset Link Reference Choice\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"RecordOutputPrompt\",\"type\":\"RecordOutputPrompt\",\"mode\":\"script\",\"table\":\"sc_req_item\",\"script\":\"(function execute(table) {\\n       var gr = new GlideRecord(\\\"sc_req_item\\\");\\n       gr.addQuery('sys_id', vaInputs.record_id.toString());\\n       gr.query();\\n       if(gr.next()) {\\n          return gr;\\n       }\\n})(table)\\n\",\"fields\":[\"number\",\"cat_item\",\"price\",\"quantity\",\"requested_for\",\"estimated_delivery\"],\"id\":\"7236a8903bd14705b2addbd0640f5e95\",\"name\":\"Request Output Card\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"glide_scripted_query\",\"value\":\"(function execute(table) {\\n       var gr = new GlideRecord(\\\"sc_req_item\\\");\\n       gr.addQuery('sys_id', vaInputs.record_id.toString());\\n       gr.query();\\n       if(gr.next()) {\\n          return gr;\\n       }\\n})(table)\\n\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Is Feedback Submitted?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.feedback_submitted == 'false';\\n})()\\n\"},\"id\":\"299b2802bbc9493691a23a69870b0a64\",\"name\":\"No\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.feedback_submitted == 'true';\\n})()\\n\"},\"id\":\"4c00050bfce64c009ccf8eff37de0136\",\"name\":\"Yes\"}],\"id\":\"83cc02186bbc48f39ee7e2dd2dc109a1\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var response = JSON.parse(vaVars.search_results);\\n    var resultsLength = global.VAAISearchHelperTokyo.getRegularSearchDisplaySize(response);\\n    vaVars.feedback_submitted = 'false';\\n\\n    for (i = 0; i < resultsLength; i++) {\\n        var searchResult = response[i];\\n        var lineItem = new global.AutoResolutionAISearchResultLineItem(searchResult.auto_resolution_line_item_sys_id);\\n        if (lineItem.isFeedbackSubmitted() == true) {\\n            vaVars.feedback_submitted = 'true';\\n        }\\n    }\\n    \\n})()\\n\",\"id\":\"968247e074bc44029b3baec51485aa3f\",\"name\":\"Check Feedback Submitted\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var gr = new GlideRecord(\\\"sc_req_item\\\");\\n    gr.addQuery('sys_id', vaInputs.record_id.toString());\\n    gr.query();\\n    if(gr.next()) {\\n        vaVars.reqItemId = gr.getValue(\\\"sys_id\\\");\\n    }\\n})()\\n\\n\",\"id\":\"2248a68d66a144d49c788243c5ed6695\",\"name\":\"Find Request Id\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"RequestId Not Found\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaVars.reqItemId);\\n})()\\n\"},\"id\":\"a31dede8fee94f0680fea0a1dd2c1843\",\"name\":\"RequestId Not Found\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"RequestId Found\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !gs.nil(vaVars.reqItemId);\\n})()\\n\"},\"id\":\"0ca33c7391df4de086d793a6b1ace181\",\"name\":\"RequestId Found\"}],\"id\":\"722f741ffc2c41f4b588cfc665b984af\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Your request has been submitted successfully.\\\", vaContext.getRequesterLang())\"}],\"id\":\"e2bf60e473d3443ab8c8071e800d4950\",\"name\":\"Request Submitted\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"4db66b3e81e7461b89753fafc20c5026\",\"target_node_id\":\"61bdf71c77c640f2a50d49689f2d1473\",\"id\":\"61696651fa884fa59e934a18c5930bcb\"},{\"type\":\"Edge\",\"source_node_id\":\"fadbf60b3e7a49739666715ddd717b5d\",\"target_node_id\":\"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\"branch_id\":\"7d63c838b3a64fd494521ce1a6bd48af\",\"id\":\"e07198421df047b1b67f7effa2d8e994\",\"name\":\"7d63c838b3a64fd494521ce1a6bd48af\"},{\"type\":\"Edge\",\"source_node_id\":\"f2843eaef896486f93adc94eee664f38\",\"target_node_id\":\"d940e9fb74e04a69a6d42cd71243f6c9\",\"branch_id\":\"3716892da85a45fd81549da359d5949e\",\"id\":\"6d91d1a7cbdf4fb5ba43e56ca85157d9\",\"name\":\"3716892da85a45fd81549da359d5949e\"},{\"type\":\"Edge\",\"source_node_id\":\"f2843eaef896486f93adc94eee664f38\",\"target_node_id\":\"0c400259238b4663acbc31542f884ab5\",\"branch_id\":\"8d39d3e700bf4766ac42b5c3e47b40ab\",\"id\":\"8e35935b0104468db7272364190a0f68\",\"name\":\"8d39d3e700bf4766ac42b5c3e47b40ab\"},{\"type\":\"Edge\",\"source_node_id\":\"1e07489c143b4e769963467cbb9ec0b6\",\"target_node_id\":\"0c400259238b4663acbc31542f884ab5\",\"branch_id\":\"f890f363eadf4547a698dd91c2f8d3e2\",\"id\":\"ab57e58231444c4c95b057d0fe8c0a34\",\"name\":\"f890f363eadf4547a698dd91c2f8d3e2\"},{\"type\":\"Edge\",\"source_node_id\":\"1e07489c143b4e769963467cbb9ec0b6\",\"target_node_id\":\"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\"branch_id\":\"eefbf736e6a5445c97c4ec1bfd4d0b77\",\"id\":\"70a2a2a62d8f4fa1be715cece9862dd2\",\"name\":\"eefbf736e6a5445c97c4ec1bfd4d0b77\"},{\"type\":\"Edge\",\"source_node_id\":\"1e07489c143b4e769963467cbb9ec0b6\",\"target_node_id\":\"6c79a718ccd449e39199ba395fd2ded3\",\"branch_id\":\"e6b90c414ec245508609a4c71c29ed1e\",\"id\":\"b16fe85fb99e48808aea5fa83a83fda4\",\"name\":\"e6b90c414ec245508609a4c71c29ed1e\"},{\"type\":\"Edge\",\"source_node_id\":\"f2843eaef896486f93adc94eee664f38\",\"target_node_id\":\"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\"branch_id\":\"bf297794e7d64a61bf1b571d3d2d6d57\",\"id\":\"0ae77cbdfaaa4aa2b69992451e98db85\",\"name\":\"bf297794e7d64a61bf1b571d3d2d6d57\"},{\"type\":\"Edge\",\"source_node_id\":\"61bdf71c77c640f2a50d49689f2d1473\",\"target_node_id\":\"f2843eaef896486f93adc94eee664f38\",\"id\":\"604066d6af654e0cb0341baa103dbf6b\"},{\"type\":\"Edge\",\"source_node_id\":\"345c7e123a9f4c69914bd8d1cc7e04d9\",\"target_node_id\":\"91bb029143f44c42a5b8c06ff4005641\",\"id\":\"ca86076161fd4c5ab0e688dd29f9bb50\"},{\"type\":\"Edge\",\"source_node_id\":\"91bb029143f44c42a5b8c06ff4005641\",\"target_node_id\":\"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\"id\":\"7da8f6f3443843f78d51b13142144481\"},{\"type\":\"Edge\",\"source_node_id\":\"d940e9fb74e04a69a6d42cd71243f6c9\",\"target_node_id\":\"fa37aead0eff47a4836d639a660ad677\",\"id\":\"603f5572f2044a549e5ece7a89aa0afd\"},{\"type\":\"Edge\",\"source_node_id\":\"fa37aead0eff47a4836d639a660ad677\",\"target_node_id\":\"605bcf7d03ce4adc900660fe114626d4\",\"id\":\"9a4f14c9f98946729ae5a434f7f93069\"},{\"type\":\"Edge\",\"source_node_id\":\"605bcf7d03ce4adc900660fe114626d4\",\"target_node_id\":\"22f80de33c1b48ee8c67c2a270cfbdb2\",\"id\":\"a80d3749418b4a3a8755328cfa8d602a\"},{\"type\":\"Edge\",\"source_node_id\":\"22f80de33c1b48ee8c67c2a270cfbdb2\",\"target_node_id\":\"1e07489c143b4e769963467cbb9ec0b6\",\"id\":\"78eabe7115394c50add4ce520f7dfc27\"},{\"type\":\"Edge\",\"source_node_id\":\"0c400259238b4663acbc31542f884ab5\",\"target_node_id\":\"5f3bf320efc04bc4b09aa155c35aedb9\",\"id\":\"026833c3714d4126bc500c66f587f29a\"},{\"type\":\"Edge\",\"source_node_id\":\"5f3bf320efc04bc4b09aa155c35aedb9\",\"target_node_id\":\"499df9625eb343d086a36b742715235d\",\"id\":\"049351e23e42420586df22109f29eca3\"},{\"type\":\"Edge\",\"source_node_id\":\"499df9625eb343d086a36b742715235d\",\"target_node_id\":\"abe789bfa2d24fbdb70aa3e10b014b05\",\"id\":\"ff512005d01c4072b8544b4d6030c333\"},{\"type\":\"Edge\",\"source_node_id\":\"abe789bfa2d24fbdb70aa3e10b014b05\",\"target_node_id\":\"fadbf60b3e7a49739666715ddd717b5d\",\"id\":\"63650a014857465a93eb2fdc3dd145ee\"},{\"type\":\"Edge\",\"source_node_id\":\"7236a8903bd14705b2addbd0640f5e95\",\"target_node_id\":\"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\"id\":\"860ff9291d7d440dbab91f3f1c39d06d\"},{\"type\":\"Edge\",\"source_node_id\":\"83cc02186bbc48f39ee7e2dd2dc109a1\",\"target_node_id\":\"345c7e123a9f4c69914bd8d1cc7e04d9\",\"branch_id\":\"299b2802bbc9493691a23a69870b0a64\",\"id\":\"3f41535464704f6f98d5e21585b21e41\",\"name\":\"299b2802bbc9493691a23a69870b0a64\"},{\"type\":\"Edge\",\"source_node_id\":\"83cc02186bbc48f39ee7e2dd2dc109a1\",\"target_node_id\":\"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\"branch_id\":\"4c00050bfce64c009ccf8eff37de0136\",\"id\":\"f297a7e6792f4406b8c4b5aaec7a2d09\",\"name\":\"4c00050bfce64c009ccf8eff37de0136\"},{\"type\":\"Edge\",\"source_node_id\":\"fadbf60b3e7a49739666715ddd717b5d\",\"target_node_id\":\"968247e074bc44029b3baec51485aa3f\",\"branch_id\":\"6e8b7b75e34f483aa972c8e8e6e9b5de\",\"id\":\"ff9f8dfcd7c343f9aa019a8c50dd1f6a\",\"name\":\"6e8b7b75e34f483aa972c8e8e6e9b5de\"},{\"type\":\"Edge\",\"source_node_id\":\"968247e074bc44029b3baec51485aa3f\",\"target_node_id\":\"83cc02186bbc48f39ee7e2dd2dc109a1\",\"id\":\"ebaf69a9ed4b43afba5d733e01b0c56a\"},{\"type\":\"Edge\",\"source_node_id\":\"6c79a718ccd449e39199ba395fd2ded3\",\"target_node_id\":\"2248a68d66a144d49c788243c5ed6695\",\"id\":\"f2d59a87dffa4668a6878f34bacbe58b\"},{\"type\":\"Edge\",\"source_node_id\":\"2248a68d66a144d49c788243c5ed6695\",\"target_node_id\":\"722f741ffc2c41f4b588cfc665b984af\",\"id\":\"f4dd832306534f1a841825842f11bf2e\"},{\"type\":\"Edge\",\"source_node_id\":\"722f741ffc2c41f4b588cfc665b984af\",\"target_node_id\":\"686dd6cb5f7b4ab0b2b2f4b5bf49dd4e\",\"branch_id\":\"a31dede8fee94f0680fea0a1dd2c1843\",\"id\":\"5b6ce42128894fa79d679d49d0ca1566\",\"name\":\"a31dede8fee94f0680fea0a1dd2c1843\"},{\"type\":\"Edge\",\"source_node_id\":\"722f741ffc2c41f4b588cfc665b984af\",\"target_node_id\":\"e2bf60e473d3443ab8c8071e800d4950\",\"branch_id\":\"0ca33c7391df4de086d793a6b1ace181\",\"id\":\"caa8ae39b03643938ad4cb33a02e40c9\",\"name\":\"0ca33c7391df4de086d793a6b1ace181\"},{\"type\":\"Edge\",\"source_node_id\":\"e2bf60e473d3443ab8c8071e800d4950\",\"target_node_id\":\"7236a8903bd14705b2addbd0640f5e95\",\"id\":\"d2a87e144807457389268361823dcfbd\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"catalogId\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"ef2a8f8a05314200ac31929fa74c4386\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"search_results\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"3091e02519da428286ed4fcc4d0f1a83\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"genius_results\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"431b443853d840318ba551a42692d6db\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"search_metadata\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"fc9451029d91402087ad4d5ceee81dd3\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"ai_search_result_id\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"916908b4cfef4ba4adbc531f444a548e\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"feedback_submitted\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"f8a4a23696fd4d8e9cea8cd28dc8514e\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"reqItemId\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"9cf78d5508bf48f68764e75cdb0eb4ff\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"a7bd66563d53484b8140d15c3ff37ebf\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[],\"id\":\"45c7c4040c50450abe98b33cd1afd8f6\",\"name\":\"specific_link_feedback\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[],\"id\":\"3b012a952bfa41b686ac7c2fc1a06283\",\"name\":\"ask_genius_helpful\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[],\"id\":\"4d42432855d34401a5651afa3e548116\",\"name\":\"ask_links_helpful\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"record_id\",\"list\":false,\"id\":\"f5579d07d75b4bbd9cb8663e892360f6\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"record_table\",\"list\":false,\"id\":\"3f39ab5f55dd4adbb5771bc33bb63acb\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"variables\",\"list\":false,\"id\":\"929f4cdf61f1470d9ddfaf5002a82786\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"SETUP_TOPIC\",\"channels\":[],\"id\":\"9ce691b1eb1001102c672add0852288a\",\"name\":\"IAR - AI Search\",\"key_phrases\":[\"IAR - AI Search\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":false,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"IAR - AI Search","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"9ce691b1eb1001102c672add0852288a","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/39430a1feb1001102c672add08522843","value":"39430a1feb1001102c672add08522843"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"17","sys_updated_on":"2021-10-16 09:36:20","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"80c4ca055303201033cdddeeff7b12b7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_design_topic_80c4ca055303201033cdddeeff7b12b7","sys_updated_by":"admin","sys_created_on":"2021-03-20 18:43:03","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"0a30a83902184edd92a751296155d691\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"0a30a83902184edd92a751296155d691\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"0a30a83902184edd92a751296155d691\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"15c39eaf9abc4b2d8e6aeea0b8b3eeb4\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"7fdd8bf925bb487397ee19e566d1f221\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    // Check if VA Deflection tracking is enabled\\n    var enableVaDfTracking = gs.getProperty(\\\"com.glide.cs.va.deflection_tracking.enable\\\",\\\"false\\\");\\n    if (enableVaDfTracking !== \\\"true\\\") \\n        return;\\n\\n    try {\\n        var metricInfo = {\\n            config_id: new String(vaInputs.deflection_configuration),\\n            pattern_id: new String(vaInputs.deflection_pattern),\\n            conversation_task_id: vaVars._topic_calling_task\\n        };\\n\\n        var activitiesInfo = {\\n            activity_table: new String(vaInputs.activity_table),\\n            activity_ids: new String(vaInputs.activity_ids), // comma separated sys_ids\\n        };\\n\\n        // \\\"va.deflection_metric.insert\\\" event script action handles metric inserts\\n        gs.eventQueue(\\n            \\\"va.deflection_metric.insert\\\",\\n            null,\\n            JSON.stringify(metricInfo),\\n            JSON.stringify(activitiesInfo)\\n        );\\n    } catch (e) {\\n        gs.warn(\\\"VA Deflection: Metric-event insert failed \\\" + e);\\n    }\\n})();\\n\",\"id\":\"9292738bed6c4164862d638e6e44d25b\",\"name\":\"Deflection tracking script\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"15c39eaf9abc4b2d8e6aeea0b8b3eeb4\",\"target_node_id\":\"9292738bed6c4164862d638e6e44d25b\",\"id\":\"69495313dc30434d9138cce0ca2a17ac\"},{\"type\":\"Edge\",\"source_node_id\":\"9292738bed6c4164862d638e6e44d25b\",\"target_node_id\":\"7fdd8bf925bb487397ee19e566d1f221\",\"id\":\"5475d9c52bf4457bb24a232a5aa95e7a\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Reference\",\"table\":\"ssa_deflection_configuration\",\"id\":\"e9d620c83fe5416d8acc3f181c816ba7\",\"name\":\"deflection_configuration\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Reference\",\"table\":\"ssa_deflection_pattern\",\"id\":\"c9fdc198eaaf449e86a2ec28cc010431\",\"name\":\"deflection_pattern\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"activity_table\",\"list\":false,\"id\":\"13de6646ab214dcaafc640a6abc15be6\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"activity_ids\",\"list\":false,\"id\":\"125c894468914d149d8f3c23a19e8990\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"deflection_configuration\",\"label\":\"Deflection Configuration\",\"default-value\":\"\\\"93d2f7645383201033cdddeeff7b1208\\\"\",\"required\":true,\"metadata\":{\"type\":\"Reference\",\"list\":false,\"items\":[],\"use_items\":false,\"table\":\"ssa_deflection_configuration\",\"query\":\"activity_context=7b43fb645383201033cdddeeff7b1246\"},\"id\":\"e9d620c83fe5416d8acc3f181c816ba7\",\"type\":\"Reference\",\"hint\":\"Choose a pre-defined Deflection Configuration\"},{\"name\":\"deflection_pattern\",\"label\":\"Deflection Pattern\",\"required\":true,\"metadata\":{\"type\":\"Reference\",\"list\":false,\"items\":[],\"use_items\":false,\"table\":\"ssa_deflection_pattern\",\"query\":\"deflection_configuration.activity_context=7b43fb645383201033cdddeeff7b1246\"},\"id\":\"c9fdc198eaaf449e86a2ec28cc010431\",\"type\":\"Reference\",\"hint\":\"Choose a deflection pattern. Note: The list is not filtered by the Deflection Configuration. Make sure to select a pattern that is tied to the chosen Deflection Configuration. \"},{\"name\":\"activity_table\",\"label\":\"Activity Table\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"13de6646ab214dcaafc640a6abc15be6\",\"type\":\"String\",\"hint\":\"Optional field: Table name that the deflection activity occurred or would have occurred. Recommend adding incident or task tables related to the deflection \"},{\"name\":\"activity_ids\",\"label\":\"Activity Ids\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"125c894468914d149d8f3c23a19e8990\",\"type\":\"String\",\"hint\":\"Optional field: List of comma-separated Activity SysIds. Recommend adding AI-search results or related tasks in the deflection occurrence\"}],\"return-values-mapping\":[]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"id\":\"43c0c9895347201033cdddeeff7b127a\",\"name\":\"Deflection\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":true,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Deflection","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"43c0c9895347201033cdddeeff7b127a","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/7fb4ca055303201033cdddeeff7b12b3","value":"7fb4ca055303201033cdddeeff7b12b3"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"1","sys_updated_on":"2021-02-24 03:20:39","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"8c8533053b50001074bc456993efc4c3","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_8c8533053b50001074bc456993efc4c3","sys_updated_by":"admin","sys_created_on":"2019-10-03 17:40:42","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"e5f4d5d20377462c8979e5959e78929f\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"e5f4d5d20377462c8979e5959e78929f\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"e5f4d5d20377462c8979e5959e78929f\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"548c4fc520344eeaa7b38612e22d0cfc\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"92547723c85a4393ab6a80b5b0ecc42b\",\"name\":\"End\"},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Survey\",\"library_topic_id\":\"26baac293b77330074bc456993efc4dd\",\"parameter-mappings\":[{\"parameter-name\":\"surveyid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars._topic_prechat_survey}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"confirmationneeded\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return vaVars._topic_show_prechat_summary + '';\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"savequestionstocontext\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"true\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"e35cbebcc9844e2f994bdce2ffe036bc\",\"name\":\"Survey\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n      vaSystem.setSearchTextFromPreChat();\\n})()\\n\",\"id\":\"32ea8808a1b34b56bd11551a98deda91\",\"name\":\"Set Search Text\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"548c4fc520344eeaa7b38612e22d0cfc\",\"target_node_id\":\"e35cbebcc9844e2f994bdce2ffe036bc\",\"id\":\"ad8f22df31fd4070ad1e8ccc69c73d0a\"},{\"type\":\"Edge\",\"source_node_id\":\"e35cbebcc9844e2f994bdce2ffe036bc\",\"target_node_id\":\"32ea8808a1b34b56bd11551a98deda91\",\"id\":\"974a593fadf24481abf983e243168e75\"},{\"type\":\"Edge\",\"source_node_id\":\"32ea8808a1b34b56bd11551a98deda91\",\"target_node_id\":\"92547723c85a4393ab6a80b5b0ecc42b\",\"id\":\"0566171160d64ca5a82cc554d6e9bf18\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_topic_prechat_survey\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"ab0a7df75bee4c47b1c9674f22fa9244\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"_topic_show_prechat_summary\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"dd16bca488d34fc59716cdbd396de6a2\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"ef16a5ec0f323300d95aff5eef767edd\",\"name\":\"_prechat_survey_\",\"key_phrases\":[\"_prechat_survey_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"auto_resolution_enabled\":false,\"library\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_prechat_survey_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"ef16a5ec0f323300d95aff5eef767edd","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/56b6adec0f323300d95aff5eef767e0c","value":"56b6adec0f323300d95aff5eef767e0c"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"14","sys_updated_on":"2023-02-10 21:46:16","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.44\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"8ce0521d9a4d4a99bf9adc285f985f14\": {\n          \"id\": \"8ce0521d9a4d4a99bf9adc285f985f14\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"76a54136706b46d5bd7e6d391f308e72\",\n              \"name\": \"record_id\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"31ff2beb4ee449a8a9c126060b922789\",\n              \"name\": \"record_table\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"76a54136706b46d5bd7e6d391f308e72\",\n            \"31ff2beb4ee449a8a9c126060b922789\"\n          ]\n        },\n        \"b36f4837498045cc88d133b0169e9d92\": {\n          \"id\": \"b36f4837498045cc88d133b0169e9d92\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"de6f6508b2984f1da80761ada0027468\": {\n          \"id\": \"de6f6508b2984f1da80761ada0027468\",\n          \"name\": \"Process end state details\",\n          \"script\": \"(function execute() {\\n    var tableName = vaInputs.record_table;\\n    var recordId = vaInputs.record_id;\\n\\n    var tableUtils = new TableUtils(tableName);\\n    vaVars.isTaskBasedTable = (tableUtils.getAbsoluteBase() == 'task');\\n\\n    var pageId = 'form';\\n    if (vaVars.isTaskBasedTable)\\n        pageId = 'ticket';\\n\\n    var link = '';\\n    var screenId = '';\\n    if (vaVars.portalName === 'mesp') {\\n        var mobileDLink = new global.MobileDeepLinkGenerator('request');\\n        if (tableName == 'sc_req_item')\\n            screenId = '7516f9d787232300e0ef0cf888cb0b4d';\\n        else if (tableName == 'sc_request')\\n            screenId = '276dd3edb79033001befcd58de11a9c7';\\n        else if (tableName == 'incident')\\n            screenId = 'ebb94d9c0f2033001befa68ca8767e4e';\\n        else\\n            screenId = 'd39eb2db87772300e0ef0cf888cb0bcb';\\n\\n        link = mobileDLink.getFormScreenLink(screenId, tableName, recordId);\\n    } else\\n        link = vaVars.baseUri + vaVars.portalName + \\\"?id=\\\" + pageId + \\\"&table=\\\" + tableName + \\\"&sys_id=\\\" + recordId;\\n\\n    vaVars.recordLink = link;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"6633db3c19804c49b5d1eff3c25b040d\": {\n          \"id\": \"6633db3c19804c49b5d1eff3c25b040d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"1423e7dbc90d4ff5bf1e5626f2829de4\": {\n          \"id\": \"1423e7dbc90d4ff5bf1e5626f2829de4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Request complete message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Your request has been submitted. Here are the details:\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"3ad892d84e324da7bcfde7a737e34dfb\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a71461805bf541b5b58f210b025eb8e2\": {\n          \"id\": \"a71461805bf541b5b58f210b025eb8e2\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Your request has been submitted.\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n\\n    var tableName = vaInputs.record_table;\\n    var recordId = vaInputs.record_id;\\n\\n    var title = '';\\n    var subtitle = '';\\n    var fields = [];\\n\\n    var gr = new GlideRecord(tableName);\\n    gr.addQuery('sys_id', recordId);\\n    gr.query();\\n    title = gr.getClassDisplayValue();\\n    if (gr.next()) {\\n        if (gr.isValidField('task_effective_number'))\\n            subtitle = gr.getValue('task_effective_number').toString();\\n        else\\n            subtitle = gr.number.toString();\\n\\n        if (gr.isValidField('short_description')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gr.getElement('short_description').getLabel(),\\n                \\\"fieldValue\\\": gr.getDisplayValue('short_description').toString()\\n            });\\n        }\\n        if (gr.isValidField('state')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gr.getElement('state').getLabel(),\\n                \\\"fieldValue\\\": gr.getDisplayValue('state').toString()\\n            });\\n        }\\n    }\\n\\n    var card_data = JSON.stringify({\\n        \\\"title\\\": title,\\n        \\\"subtitle\\\": subtitle,\\n        \\\"fields\\\": fields,\\n        \\\"url\\\": vaVars.recordLink.toString()\\n    });\\n    return vaSystem.renderCard(\\\"Card\\\", card_data);\\n})()\\n\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f204f270a57448959d342d2532271f9a\": {\n          \"id\": \"f204f270a57448959d342d2532271f9a\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Submitted record link\",\n          \"url\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaVars.recordLink}}\",\n                      \"displayValue\": \"Script VariablesrecordLink\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"label\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Click here to view the created record\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"header\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Your request has been submitted\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"single\",\n          \"introMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"listOfLinks\": \"\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"93a307d50ebe44e78ca1205726b5ff73\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8ce0521d9a4d4a99bf9adc285f985f14\",\n          \"target\": \"de6f6508b2984f1da80761ada0027468\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8e5e7d4108d74c03b6182c7693dbe2ab\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"de6f6508b2984f1da80761ada0027468\",\n          \"target\": \"6633db3c19804c49b5d1eff3c25b040d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4a77c825421c4ac482237668399e1ca1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"6633db3c19804c49b5d1eff3c25b040d\",\n          \"target\": \"1423e7dbc90d4ff5bf1e5626f2829de4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.isTaskBasedTable;\\n})()\\n\"\n          },\n          \"label\": \"Task based table\"\n        },\n        {\n          \"id\": \"e5d05d834995458f95b560163bacdef0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1423e7dbc90d4ff5bf1e5626f2829de4\",\n          \"target\": \"a71461805bf541b5b58f210b025eb8e2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d67be8eb5001481d8b6cfbff2fa8b489\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a71461805bf541b5b58f210b025eb8e2\",\n          \"target\": \"b36f4837498045cc88d133b0169e9d92\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ce41cf3ebfc146bfbc655663229fae08\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"6633db3c19804c49b5d1eff3c25b040d\",\n          \"target\": \"f204f270a57448959d342d2532271f9a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.isTaskBasedTable;\\n})()\\n\"\n          },\n          \"label\": \"Non-Task based table\"\n        },\n        {\n          \"id\": \"5324a448ce7b4e53b5e5af09d1eb6aba\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f204f270a57448959d342d2532271f9a\",\n          \"target\": \"b36f4837498045cc88d133b0169e9d92\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"22358b8183c44e5c8cdbe356854a21e1\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"22358b8183c44e5c8cdbe356854a21e1\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"e46067b350d94c8ea060a94e4c71e33c\": {\n      \"id\": \"e46067b350d94c8ea060a94e4c71e33c\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return gs.getProperty('glide.servlet.uri', '');\\n})()\"\n      },\n      \"name\": \"baseUri\",\n      \"label\": \"baseUri\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"255f7286cf7a4dfea673673c4d4c81b9\": {\n      \"id\": \"255f7286cf7a4dfea673673c4d4c81b9\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"isTaskBasedTable\",\n      \"label\": \"isTaskBasedTable\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"10705689977341d39dc07e3fe83ecce5\": {\n      \"id\": \"10705689977341d39dc07e3fe83ecce5\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    if (vaContext.deviceType == 'ios' || vaContext.deviceType == 'android')\\n        return 'mesp';\\n\\n    var portalName = vaContext.liveagent_portal;\\n\\n    if (portalName)\\n        return portalName;\\n\\n    return 'sp';\\n})()\\n\"\n      },\n      \"name\": \"portalName\",\n      \"label\": \"portalName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fffc7c1088c041e2b02197dfc872397f\": {\n      \"id\": \"fffc7c1088c041e2b02197dfc872397f\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"recordLink\",\n      \"label\": \"recordLink\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"76a54136706b46d5bd7e6d391f308e72\": {\n      \"id\": \"76a54136706b46d5bd7e6d391f308e72\",\n      \"name\": \"record_id\",\n      \"label\": \"Record_id\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"8ce0521d9a4d4a99bf9adc285f985f14\",\n      \"isHidden\": false\n    },\n    \"31ff2beb4ee449a8a9c126060b922789\": {\n      \"id\": \"31ff2beb4ee449a8a9c126060b922789\",\n      \"name\": \"record_table\",\n      \"label\": \"Record_table\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"8ce0521d9a4d4a99bf9adc285f985f14\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"973ee5374370211057da84b49bb8f2a0","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_973ee5374370211057da84b49bb8f2a0","sys_updated_by":"admin","sys_created_on":"2023-02-10 18:31:19","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"de53988ff6f94fbdb05cb1302d02e147\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"de53988ff6f94fbdb05cb1302d02e147\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"de53988ff6f94fbdb05cb1302d02e147\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"8ce0521d9a4d4a99bf9adc285f985f14\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"b36f4837498045cc88d133b0169e9d92\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var tableName = vaInputs.record_table;\\n    var recordId = vaInputs.record_id;\\n\\n    var tableUtils = new TableUtils(tableName);\\n    vaVars.isTaskBasedTable = (tableUtils.getAbsoluteBase() == 'task');\\n\\n    var pageId = 'form';\\n    if (vaVars.isTaskBasedTable)\\n        pageId = 'ticket';\\n\\n    var link = '';\\n    var screenId = '';\\n    if (vaVars.portalName === 'mesp') {\\n        var mobileDLink = new global.MobileDeepLinkGenerator('request');\\n        if (tableName == 'sc_req_item')\\n            screenId = '7516f9d787232300e0ef0cf888cb0b4d';\\n        else if (tableName == 'sc_request')\\n            screenId = '276dd3edb79033001befcd58de11a9c7';\\n        else if (tableName == 'incident')\\n            screenId = 'ebb94d9c0f2033001befa68ca8767e4e';\\n        else\\n            screenId = 'd39eb2db87772300e0ef0cf888cb0bcb';\\n\\n        link = mobileDLink.getFormScreenLink(screenId, tableName, recordId);\\n    } else\\n        link = vaVars.baseUri + vaVars.portalName + \\\"?id=\\\" + pageId + \\\"&table=\\\" + tableName + \\\"&sys_id=\\\" + recordId;\\n\\n    vaVars.recordLink = link;\\n})()\\n\",\"id\":\"de6f6508b2984f1da80761ada0027468\",\"name\":\"Process end state details\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Task based table\",\"id\":\"271a29ccfc9a4fcdb80a9913193cf8bc\",\"name\":\"Task based table\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.isTaskBasedTable;\\n})()\\n\"}},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Non-Task based table\",\"id\":\"0a5a26ea37394d5a8c6acf6bbc3f180a\",\"name\":\"Non-Task based table\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.isTaskBasedTable;\\n})()\\n\"}}],\"id\":\"6633db3c19804c49b5d1eff3c25b040d\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Your request has been submitted. Here are the details:\\\", vaContext.getRequesterLang())\"}],\"id\":\"1423e7dbc90d4ff5bf1e5626f2829de4\",\"name\":\"Request complete message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptOutputPrompt\",\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"a71461805bf541b5b58f210b025eb8e2\",\"name\":\"Your request has been submitted.\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n\\n    var tableName = vaInputs.record_table;\\n    var recordId = vaInputs.record_id;\\n\\n    var title = '';\\n    var subtitle = '';\\n    var fields = [];\\n\\n    var gr = new GlideRecord(tableName);\\n    gr.addQuery('sys_id', recordId);\\n    gr.query();\\n    title = gr.getClassDisplayValue();\\n    if (gr.next()) {\\n        if (gr.isValidField('task_effective_number'))\\n            subtitle = gr.getValue('task_effective_number').toString();\\n        else\\n            subtitle = gr.number.toString();\\n\\n        if (gr.isValidField('short_description')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gr.getElement('short_description').getLabel(),\\n                \\\"fieldValue\\\": gr.getDisplayValue('short_description').toString()\\n            });\\n        }\\n        if (gr.isValidField('state')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gr.getElement('state').getLabel(),\\n                \\\"fieldValue\\\": gr.getDisplayValue('state').toString()\\n            });\\n        }\\n    }\\n\\n    var card_data = JSON.stringify({\\n        \\\"title\\\": title,\\n        \\\"subtitle\\\": subtitle,\\n        \\\"fields\\\": fields,\\n        \\\"url\\\": vaVars.recordLink.toString()\\n    });\\n    return vaSystem.renderCard(\\\"Card\\\", card_data);\\n})()\\n\"},\"secure\":false},{\"type\":\"LinkOutputPrompt\",\"type\":\"LinkOutputPrompt\",\"header\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Your request has been submitted\\\", vaContext.getRequesterLang())\"},\"label\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Click here to view the created record\\\", vaContext.getRequesterLang())\"},\"url\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.recordLink}}\"},\"link_type\":\"single\",\"multi_link_script\":\"\",\"id\":\"f204f270a57448959d342d2532271f9a\",\"name\":\"Submitted record link\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"8ce0521d9a4d4a99bf9adc285f985f14\",\"target_node_id\":\"de6f6508b2984f1da80761ada0027468\",\"id\":\"93a307d50ebe44e78ca1205726b5ff73\"},{\"type\":\"Edge\",\"source_node_id\":\"de6f6508b2984f1da80761ada0027468\",\"target_node_id\":\"6633db3c19804c49b5d1eff3c25b040d\",\"id\":\"8e5e7d4108d74c03b6182c7693dbe2ab\"},{\"type\":\"Edge\",\"source_node_id\":\"6633db3c19804c49b5d1eff3c25b040d\",\"target_node_id\":\"1423e7dbc90d4ff5bf1e5626f2829de4\",\"branch_id\":\"271a29ccfc9a4fcdb80a9913193cf8bc\",\"id\":\"4a77c825421c4ac482237668399e1ca1\",\"name\":\"271a29ccfc9a4fcdb80a9913193cf8bc\"},{\"type\":\"Edge\",\"source_node_id\":\"1423e7dbc90d4ff5bf1e5626f2829de4\",\"target_node_id\":\"a71461805bf541b5b58f210b025eb8e2\",\"id\":\"e5d05d834995458f95b560163bacdef0\"},{\"type\":\"Edge\",\"source_node_id\":\"a71461805bf541b5b58f210b025eb8e2\",\"target_node_id\":\"b36f4837498045cc88d133b0169e9d92\",\"id\":\"d67be8eb5001481d8b6cfbff2fa8b489\"},{\"type\":\"Edge\",\"source_node_id\":\"6633db3c19804c49b5d1eff3c25b040d\",\"target_node_id\":\"f204f270a57448959d342d2532271f9a\",\"branch_id\":\"0a5a26ea37394d5a8c6acf6bbc3f180a\",\"id\":\"ce41cf3ebfc146bfbc655663229fae08\",\"name\":\"0a5a26ea37394d5a8c6acf6bbc3f180a\"},{\"type\":\"Edge\",\"source_node_id\":\"f204f270a57448959d342d2532271f9a\",\"target_node_id\":\"b36f4837498045cc88d133b0169e9d92\",\"id\":\"5324a448ce7b4e53b5e5af09d1eb6aba\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"baseUri\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getProperty('glide.servlet.uri', '');\\n})()\"},\"list\":false,\"id\":\"e46067b350d94c8ea060a94e4c71e33c\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"isTaskBasedTable\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"255f7286cf7a4dfea673673c4d4c81b9\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"portalName\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaContext.deviceType == 'ios' || vaContext.deviceType == 'android')\\n        return 'mesp';\\n\\n    var portalName = vaContext.liveagent_portal;\\n\\n    if (portalName)\\n        return portalName;\\n\\n    return 'sp';\\n})()\\n\"},\"list\":false,\"id\":\"10705689977341d39dc07e3fe83ecce5\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"recordLink\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return '';\\n})()\\n\"},\"list\":false,\"id\":\"fffc7c1088c041e2b02197dfc872397f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"22358b8183c44e5c8cdbe356854a21e1\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"record_id\",\"list\":false,\"id\":\"76a54136706b46d5bd7e6d391f308e72\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"record_table\",\"list\":false,\"id\":\"31ff2beb4ee449a8a9c126060b922789\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"record_id\",\"label\":\"record_id\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"76a54136706b46d5bd7e6d391f308e72\",\"type\":\"String\"},{\"name\":\"record_table\",\"label\":\"record_table\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"31ff2beb4ee449a8a9c126060b922789\",\"type\":\"String\"}],\"return-values-mapping\":[]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"id\":\"3d3ee5f34370211057da84b49bb8f22d\",\"name\":\"End state card for Form Content Popup\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":true,\"csTopicId\":\"173ee5374370211057da84b49bb8f29c\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"End state card for Form Content Popup","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"3d3ee5f34370211057da84b49bb8f22d","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/173ee5374370211057da84b49bb8f29c","value":"173ee5374370211057da84b49bb8f29c"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"1","sys_updated_on":"2024-07-18 22:41:56","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.68\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"0c2761fc561b4196970a68928f8a6a3d\": {\n          \"id\": \"0c2761fc561b4196970a68928f8a6a3d\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"dafe6c9e9fdb47c4804711eba7b4f571\": {\n          \"id\": \"dafe6c9e9fdb47c4804711eba7b4f571\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"25c2e10cb5cc41878f70aa6b218f75d1\": {\n          \"id\": \"25c2e10cb5cc41878f70aa6b218f75d1\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Get Personalized Greeting topic message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var result;\\n       if (vaInputs.user.first_name.getDisplayValue()) {\\n  return  gs.getMessageLang('Hi {0}, {1}', vaContext.getRequesterLang(), [vaInputs.user.first_name.getDisplayValue(), vaSystem.getGreetingMessage()]);\\n       } else {\\n            return gs.getMessageLang('Hi {0}, {1}', vaContext.getRequesterLang(), [gs.getUser().getFirstName(), vaSystem.getGreetingMessage()]);\\n       }\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"aa8a754371394818b9853853f66e8d5f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0c2761fc561b4196970a68928f8a6a3d\",\n          \"target\": \"25c2e10cb5cc41878f70aa6b218f75d1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6ad678a5978841baaefa5c1d57bfa0ff\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"25c2e10cb5cc41878f70aa6b218f75d1\",\n          \"target\": \"dafe6c9e9fdb47c4804711eba7b4f571\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"9e002206edb544e0bd29addf195e026f\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"9e002206edb544e0bd29addf195e026f\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"a44e2c5053130010cf8cddeeff7b12e2","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_a44e2c5053130010cf8cddeeff7b12e2","sys_updated_by":"admin","sys_created_on":"2020-02-26 22:23:07","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"fde9054073e04cb1bdf4984a7b9d2ee9\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"fde9054073e04cb1bdf4984a7b9d2ee9\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"fde9054073e04cb1bdf4984a7b9d2ee9\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"0c2761fc561b4196970a68928f8a6a3d\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"dafe6c9e9fdb47c4804711eba7b4f571\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var result;\\n       if (vaInputs.user.first_name.getDisplayValue()) {\\n  return  gs.getMessageLang('Hi {0}, {1}', vaContext.getRequesterLang(), [vaInputs.user.first_name.getDisplayValue(), vaSystem.getGreetingMessage()]);\\n       } else {\\n            return gs.getMessageLang('Hi {0}, {1}', vaContext.getRequesterLang(), [gs.getUser().getFirstName(), vaSystem.getGreetingMessage()]);\\n       }\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"25c2e10cb5cc41878f70aa6b218f75d1\",\"name\":\"Get Personalized Greeting topic message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"0c2761fc561b4196970a68928f8a6a3d\",\"target_node_id\":\"25c2e10cb5cc41878f70aa6b218f75d1\",\"id\":\"aa8a754371394818b9853853f66e8d5f\"},{\"type\":\"Edge\",\"source_node_id\":\"25c2e10cb5cc41878f70aa6b218f75d1\",\"target_node_id\":\"dafe6c9e9fdb47c4804711eba7b4f571\",\"id\":\"6ad678a5978841baaefa5c1d57bfa0ff\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"9e002206edb544e0bd29addf195e026f\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"SETUP_TOPIC\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"0c4ee85053130010cf8cddeeff7b12a3\",\"name\":\"Personalized Greeting Topic.\",\"key_phrases\":[\"Personalized Greeting Topic\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"description\":\"Personalized Greeting Topic\",\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"title\":\"Personalized Greeting Topic.\",\"library\":false,\"csTopicId\":\"284e2c5053130010cf8cddeeff7b12df\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Personalized Greeting Topic.","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"0c4ee85053130010cf8cddeeff7b12a3","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/284e2c5053130010cf8cddeeff7b12df","value":"284e2c5053130010cf8cddeeff7b12df"},"sys_created_by":"admin","sys_policy":"read"},{"sys_mod_count":"2","sys_updated_on":"2021-02-24 03:20:20","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"a4753fc13b50001074bc456993efc4dc","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_a4753fc13b50001074bc456993efc4dc","sys_updated_by":"admin","sys_created_on":"2019-10-03 17:40:27","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"3ccdc22aac2b4b3d9c79a988e27e3725\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"3ccdc22aac2b4b3d9c79a988e27e3725\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"3ccdc22aac2b4b3d9c79a988e27e3725\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"dea80e1cbb7b40ceb46a87e6063d7c62\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"5721b5e18c594978bcfc8ecab8cb54c3\",\"name\":\"End\"},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Survey\",\"library_topic_id\":\"26baac293b77330074bc456993efc4dd\",\"parameter-mappings\":[{\"parameter-name\":\"surveyid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars._topic_postchat_survey}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"confirmationneeded\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._topic_show_postchat_summary + '';\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"savequestionstocontext\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"77aa6d89b9a64b75aaa2de21861e0482\",\"name\":\"Survey\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"dea80e1cbb7b40ceb46a87e6063d7c62\",\"target_node_id\":\"77aa6d89b9a64b75aaa2de21861e0482\",\"id\":\"d63a222ffe53498ca807638199282bae\"},{\"type\":\"Edge\",\"source_node_id\":\"77aa6d89b9a64b75aaa2de21861e0482\",\"target_node_id\":\"5721b5e18c594978bcfc8ecab8cb54c3\",\"id\":\"750c3089c50e4a61a7214d420cb67804\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_topic_postchat_survey\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"659e8182e39a4a15ae38aa2ef044106c\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"_topic_postchat_user_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"69b9f003a7754b559077404e5e2652c7\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"_topic_show_postchat_summary\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"d73d96c90b1e40739b0fc67a2bb481e2\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"6077cbc39f0333003f50947f842e7030\",\"name\":\"_postchat_survey_\",\"key_phrases\":[\"_postchat_survey_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"auto_resolution_enabled\":false,\"library\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_postchat_survey_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"6077cbc39f0333003f50947f842e7030","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/6b77cfc39f0333003f50947f842e7052","value":"6b77cfc39f0333003f50947f842e7052"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"161","sys_updated_on":"2023-06-14 17:52:25","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.47\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"b90ef5f7024d4e34b5ceaf628345df9c\": {\n          \"id\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"parameters\": [\n            {\n              \"name\": \"surveyId\",\n              \"value\": \"\",\n              \"id\": \"1132a62678c24bbda688337615fd51bb\",\n              \"disabled\": true,\n              \"referenced\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            },\n            {\n              \"name\": \"confirmationNeeded\",\n              \"value\": \"false\",\n              \"id\": \"75bc445130284002947077d668cac779\",\n              \"referenced\": false,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            },\n            {\n              \"name\": \"saveQuestionsToContext\",\n              \"value\": \"false\",\n              \"id\": \"ba2a161b94a3468a86603955cca630a1\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            }\n          ],\n          \"variableIds\": [\n            \"1132a62678c24bbda688337615fd51bb\",\n            \"75bc445130284002947077d668cac779\",\n            \"ba2a161b94a3468a86603955cca630a1\"\n          ]\n        },\n        \"da165a652daf475698c988c6427d008f\": {\n          \"id\": \"da165a652daf475698c988c6427d008f\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": []\n        },\n        \"4761ab4e62324e3cb07ce4efc77ffd1f\": {\n          \"id\": \"4761ab4e62324e3cb07ce4efc77ffd1f\",\n          \"name\": \"Load survey instance\",\n          \"script\": \"(function execute() {\\n\\tvar gr = new GlideRecord('asmt_metric_type');\\n\\tgr.get(vaInputs.surveyid);vaVars.active = gr.active;vaVars.endNote = vaSystem.getTranslation(gr, 'end_note', vaContext.getRequesterLang(), gr.end_note.getValue() || '');vaVars.introduction = vaSystem.getTranslation(gr, 'introduction', vaContext.getRequesterLang(), gr.introduction.getValue() || '');vaVars.surveyName = gr.name.toString();vaVars.surveyVerificationMsg = vaSystem.getSurveyVerificationMessage();\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"bbe4918b84a9426abbec7d055f7f555a\": {\n          \"id\": \"bbe4918b84a9426abbec7d055f7f555a\",\n          \"name\": \"Load questions\",\n          \"script\": \"(function execute() {\\n    var gr = new GlideRecord('asmt_metric_category');\\n    gr.addQuery('metric_type', vaInputs.surveyid);\\n    gr.query();\\n    gr.next();\\n\\n    var surveyCategory = gr.getUniqueValue();\\n\\n    var gr = new GlideRecord('asmt_metric')\\n    gr.addQuery('category', surveyCategory);\\n    gr.addQuery('active', true);\\n    gr.orderBy('order');\\n    gr.query();\\n\\n    var questions = [];\\n    while (gr.next()) {\\n        var question = {\\n            sys_id: gr.getUniqueValue(),\\n            scale: gr.scale + '',\\n            metric: gr.sys_id + '',\\n            type: gr.datatype + '',\\n            display: vaSystem.getTranslation(gr, 'question', vaContext.getRequesterLang(), gr.question) + '',\\n            dependsOn: gr.depends_on + '',\\n            displayedWhen: gr.displayed_when + '',\\n            name: gr.name + '',\\n            max: gr.max + '',\\n            min: gr.min + '',\\n            mandatory: gr.mandatory + '',\\n            field_validation: gr.field_validation + '',\\n            reference_table: gr.reference_table + '',\\n            condition: gr.condition + '',\\n        };\\n\\n        // boolean and checkbox type questions use different displayed_when fields\\n        var dependsOnType = gr.depends_on.datatype + '';\\n        if (dependsOnType === 'boolean')\\n            question['displayedWhen'] = gr.displayed_when_yesno + '';\\n        else if (dependsOnType === 'checkbox')\\n            question['displayedWhen'] = gr.displayed_when_checkbox + '';\\n\\n        questions.push(question);\\n    }\\n    vaVars.surveyQuestions = JSON.stringify(questions);\\n    vaVars.questionCount = questions.length;\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8ad01595341c4a6186e46eb203320658\": {\n          \"id\": \"8ad01595341c4a6186e46eb203320658\",\n          \"name\": \"Set next question\",\n          \"script\": \"(function execute() {\\n    vaVars.questionIndex++;\\n    if (!(vaVars.questionCount && vaVars.questionIndex < vaVars.questionCount))\\n        return;\\n\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n\\n    // Set question type & display value\\n    vaVars.currentQuestionId = questions[i].sys_id;\\n    vaVars.currentQuestionType = questions[i].type;\\n    vaVars.currentQuestionMetric = questions[i].metric;\\n    vaVars.currentQuestionDisplay = questions[i].display;\\n    vaVars.currentQuestionMax = questions[i].max;\\n    vaVars.currentQuestionMin = questions[i].min;\\n    vaVars.currentQuestionMandatory = questions[i].mandatory;\\n    vaVars.currentQuestionFieldValidator = questions[i].field_validation;\\n    vaVars.currentQuestionReferenceTable = questions[i].reference_table;\\n    vaVars.currentQuestionReferenceCondition = questions[i].condition;\\n\\n    // Load choices if relevant\\n    if (questions[i].type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(questions[i].type) > -1) {\\n        questions[i].choices = getChoices(questions[i]);\\n        vaVars.surveyQuestions = JSON.stringify(questions);\\n    }\\n})();\\n\\nfunction getChoices(q) {\\n    var gr = new GlideRecord('asmt_metric_definition');\\n    gr.addQuery('metric', q.metric);\\n    gr.orderBy('order');\\n    gr.query();\\n\\n    var choices = [];\\n    while (gr.next()) {\\n        choices.push({\\n            sys_id: gr.getUniqueValue(),\\n            display: vaSystem.getTranslation(gr, 'display', vaContext.getRequesterLang(),gr.display),\\n            value: gr.getValue('value'),\\n            selected: gr.getDisplayValue('selected_image'),\\n            unselected: gr.getDisplayValue('unselected_image')\\n        });\\n    }\\n    return choices;\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ca66aaa54c614102a4a2fd4bad818b9a\": {\n          \"id\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Out of questions?\"\n        },\n        \"280229f5f0f74d11a6d06328dfb8fa1a\": {\n          \"id\": \"280229f5f0f74d11a6d06328dfb8fa1a\",\n          \"name\": \"Set answers\",\n          \"script\": \"(function execute() {\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n    answers[vaVars.currentQuestionId] = getInput();\\n    vaVars.surveyAnswers = JSON.stringify(answers);\\n})();\\n\\nfunction getInput() {\\n    var values = {'value': null, 'Qtype': vaVars.currentQuestionType, 'displayValue':null};\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        values.value = getValueIfSet(vaInputs.show_choice_question);\\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_choice_question,values.value);\\n    }\\n\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        values.value = getValueIfSet(vaInputs.show_text_input_question);\\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_text_input_question,values.value);\\n    }\\n\\n    switch (vaVars.currentQuestionType) {\\n        case 'imagescale':\\n            values.value = getValueIfSet(vaInputs.show_image_scale_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_image_scale_question,values.value);\\n            var questions = JSON.parse(vaVars.surveyQuestions);\\n            //stores correct displayValue, vaInputs returns display+value\\n            if(vaInputs.show_image_scale_question && vaInputs.show_image_scale_question != null){\\n                questions[vaVars.questionIndex].choices.forEach(function(c){\\n                    if(c.value === values.value)\\n                        values.displayValue = c.display;\\n                });\\n            }\\n            break;\\n        case 'boolean':\\n            values.value = getValueIfSet(vaInputs.show_boolean_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\\n            break;\\n        case 'checkbox':\\n            values.value= getValueIfSet(vaInputs.show_boolean_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\\n            break;\\n        case 'attachment':\\n            values.value = getValueIfSet(vaInputs.show_attachment_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_attachment_question,values.value);\\n            break;\\n        case 'date':\\n            const date = getValueIfSet(vaInputs.show_date_question);\\n            values.value = (date != null) ? date.toString() : null;\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_date_question,values.value);\\n            break;\\n        case 'datetime':\\n            const dateTime = getValueIfSet(vaInputs.show_datetime_question);\\n            values.value = (dateTime != null) ? dateTime.toString() : null;\\n            vaInputs.show_datetime_question.setTimeZone(vaContext.getDeviceTimeZone());\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_datetime_question,values.value);\\n            break;\\n        case 'reference':\\n            values.value = getValueIfSet(vaInputs.show_reference_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_reference_question,values.value);\\n    }\\n    return values;\\n}\\n\\nfunction getValueIfSet(field){\\n    return field && field.isValueSet() ? field.getValue() : null;\\n}\\n\\nfunction getDisplayValueIfSet(field, val){\\n    if (!field || field == null)\\n       return val;\\n    var dv = field.getDisplayValue();\\n     return dv && dv.length > 0  ? dv : val;\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9ee3c8b3d800414c89edc50c2746da57\": {\n          \"id\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Does question satisfy dependency?\"\n        },\n        \"385869dc18c746b88db71bdd7c349c56\": {\n          \"id\": \"385869dc18c746b88db71bdd7c349c56\",\n          \"name\": \"Check question dependency\",\n          \"script\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var q = questions[i];\\n\\n    var satisfied = true;\\n    var hasDependency = !(!q.dependsOn);\\n    vaVars.currentIsDependencySatisfied = !hasDependency || isSat(q);\\n})();\\n\\nfunction isSat(q) {\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n\\n    var answerValid = false;\\n    questions.forEach(function(question) {\\n        if (question.metric !== q.dependsOn)\\n            return;\\n\\n        var answerExists = question.sys_id in answers;\\n        if (!answerExists)\\n            return;\\n\\n        var selectedChoice = answers[question.sys_id]['value'];\\n\\n        if (question.type === 'boolean' || question.type === 'checkbox') {\\n            if ((selectedChoice === true && q.displayedWhen === '1') || (selectedChoice === false && q.displayedWhen === '0'))\\n                answerValid = true;\\n        } else {\\n            var choices = question.choices.filter(function(c) {\\n                return c.value === selectedChoice;\\n            });\\n\\n            if (choices.length && choices[0].sys_id)\\n                answerValid = q.displayedWhen.indexOf(choices[0].sys_id) !== -1;\\n        }\\n    });\\n\\n    return answerValid;\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"6fc30a2a583e40d2a737eee77bb5e73f\": {\n          \"id\": \"6fc30a2a583e40d2a737eee77bb5e73f\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Show boolean question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if ((vaVars.currentQuestionType === 'boolean') || (vaVars.currentQuestionType === 'checkbox')) {\\n        vaInputs.show_boolean_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"3bd6649edfb04f1d870a98c96130be34\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"6460cac852834b46a4977c093a2b1a67\": {\n          \"id\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"name\": \"Submit survey answers\",\n          \"script\": \"(function execute() {\\n    if(vaInputs.savequestionstocontext == 'true'){ \\n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createAssessments(vaInputs.surveyid, '', gs.getUserID(), false, '', false, '', vaVars._interaction_record_sysid, false, 'interaction');\\n        vaVars.surveyInstanceId = vaVars.surveyInstanceId.substring(0, 32);\\n        vaVars.LiveAgent_pre_assessment_instance = vaVars.surveyInstanceId;\\n        vaVars.LiveAgent_pre_chat_survey_name = vaVars.surveyName;\\n    } else{ \\n        var userId = !gs.nil(vaVars._topic_postchat_user_id) ? vaVars._topic_postchat_user_id : gs.getUserID();\\n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createAssessments(vaInputs.surveyid, '', userId, false, '', false, '', vaVars._interaction_record_sysid, false, 'interaction');\\n        vaVars.surveyInstanceId = vaVars.surveyInstanceId.substring(0, 32);\\n        vaVars.LiveAgent_post_assessment_instance = vaVars.surveyInstanceId;\\n        vaVars.LiveAgent_post_chat_survey_name = vaVars.surveyName;    \\n    }\\n\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n    var data = {\\n        sysparm_instance_id: vaVars.surveyInstanceId,\\n        sysparm_action: 'submit'\\n    };\\n data.channel = 'va'; \\n    var questionData = new global.TopicPreChatUtil().getQuestionData(vaVars.surveyInstanceId);\\n\\n    Object.keys(answers).forEach(function(q) {\\n        if (answers[q] && answers[q] && answers[q].value != null){ \\n            if (answers[q]['Qtype'] === 'boolean') {\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? '1' : '0';\\n            } else if (answers[q]['Qtype'] === 'checkbox') {\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? 'true' : '';\\n            } else\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = answers[q]['value'];\\n            if (vaInputs.savequestionstocontext == 'true')\\n                saveToContext(questionData[q].name, answers[q], questionData[q].contextVar, questionData[q].type);\\n        }\\n        \\n    });\\n    var response = new global.AssessmentSubmitProcessor().processRequest(data);\\n})()\\n\\nfunction saveToContext(name, a, contextVar, type){\\n        if(contextVar != \\\"\\\") {\\n            var contextVarName = contextVar;\\n        } else {\\n            //remove all special characters and replace spaces with _\\n            var questionName = name.toString().replace(/[^a-zA-Z0-9]/g, '_').replace(/_$/,'');     \\n            //append survey name to question name\\n            var contextVarName = \\\"liveagent_\\\" +vaVars.surveyName +\\\".\\\"+ questionName;\\n        }\\n        vaVars[contextVarName] = a.value.toString();\\n        //for choice questions, store response and not response index as context var\\n        if (type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(type) > -1) { \\n             vaVars[contextVarName] = a.displayValue.toString();    \\n        }\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a37d9e0c9af54fbb93c16fe65d7f33e0\": {\n          \"id\": \"a37d9e0c9af54fbb93c16fe65d7f33e0\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Show text input question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'long')\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\n    else if (vaVars.currentQuestionType === 'percentage')\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\n    else\\n        return vaVars.currentQuestionDisplay;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_text_input_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"24bdbf9a7cc4465f9a4f4ab220cdb2c7\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Custom\",\n            \"script\": \"function validate(value) {\\n    // for \\\"skip\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\n        return {\\n            valid: true,\\n        }; \\n\\n    // for string type with validator defined, and question is not skipped\\n    var validatorGr = new GlideRecord(\\\"sys_cs_field_script_validator\\\");\\n    if (!validatorGr.isValid())\\n\\t    return {\\n           valid: false,\\n           error: gs.getMessageLang(\\\"validator table does not exist\\\", vaContext.getRequesterLang())\\n        };\\n\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\n        var scriptBuild = \\\"(\\\" + validatorGr.validator + \\\")('\\\"+ value + \\\"');\\\";\\n        var isValidAnswer = eval(scriptBuild);\\n        return {\\n            valid: isValidAnswer,\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\n        };\\n    } else {\\n        return {\\n            valid: false,\\n            error: gs.getMessageLang(\\\"validator record does not exist\\\", vaContext.getRequesterLang())\\n        };\\n    }\\n}\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"74fc296442cc4d7f8269e94e25cad5a4\": {\n          \"id\": \"74fc296442cc4d7f8269e94e25cad5a4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"End note\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.endNote}}\",\n                        \"displayValue\": \"vaVarsendNote\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"8351c5b9bf8942ff8d31f773b77a5ee3\": {\n          \"id\": \"8351c5b9bf8942ff8d31f773b77a5ee3\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Introduction\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.introduction}}\",\n                        \"displayValue\": \"vaVarsintroduction\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"9ecd2ca830064b97967dca21062c30fc\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Show choice question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_choice_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\\n\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"43d0530ce6724cde95932f286155da8f\",\n          \"id\": \"9ecd2ca830064b97967dca21062c30fc\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'render_style':'bubble',\\n            'label': c.display,\\n            'value': c.value\\n        });\\n    }\\n\\n    return options;\\n})()\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"No data found\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'render_style':'bubble',\\n            'label': c.display,\\n            'value': c.value\\n        });\\n    }\\n\\n    return options;\\n})()\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"64d85b2098094a4fa02f25f7a1444c50\": {\n          \"id\": \"64d85b2098094a4fa02f25f7a1444c50\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"Show attachment question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'attachment') {\\n        vaInputs.show_attachment_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"\n          },\n          \"optional\": false,\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": {\n            \"id\": \"\"\n          },\n          \"variableId\": \"bba30ac7475c47cc93da35130951478b\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"c86161c0b4ea42dab11005dd0f69556a\": {\n          \"id\": \"c86161c0b4ea42dab11005dd0f69556a\",\n          \"stepType\": \"DateTimePrompt\",\n          \"name\": \"Show date question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'date') {\\n        vaInputs.show_date_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"f7bd8a67b7874023816be1a2eccd99da\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"bab80169de204bdf98d7955c940792c7\": {\n          \"id\": \"bab80169de204bdf98d7955c940792c7\",\n          \"stepType\": \"DateTimePrompt\",\n          \"name\": \"Show datetime question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'datetime') {\\n        vaInputs.show_datetime_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"d5c40882740949d285112e17f40f7b2c\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f9950611be314fe6b0c891e8e65771d2\": {\n          \"id\": \"f9950611be314fe6b0c891e8e65771d2\",\n          \"name\": \"Answer validation\",\n          \"script\": \"(function execute() {\\n    vaVars.currentAnswerValidation = true;\\n    vaVars.currentAnswerErrorMsg = '';\\n\\n    if (vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage')\\n        validateFieldLimits();\\n})();\\n\\nfunction validateFieldLimits() {\\n\\tif ((!vaInputs.show_text_input_question.isValueSet() || vaInputs.show_text_input_question.getValue().length == 0)\\n\\t    && !vaInputs.show_text_input_question.isRequired())\\n\\t\\treturn;\\n\\tvar max = vaVars.currentQuestionMax;\\n\\tvar min = vaVars.currentQuestionMin;\\n\\t\\t\\n\\tvar value = vaInputs.show_text_input_question.getValue();\\n\\tvar newvalue = Number(value);\\n\\tif (isNaN(newvalue)) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is not a valid number. Please try again', vaContext.getRequesterLang());\\n\\t} else if (newvalue > max || newvalue < min) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is outside the valid range. Please try again', vaContext.getRequesterLang());\\n\\t}\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"607a63448c1a4acca85166124f375118\": {\n          \"id\": \"607a63448c1a4acca85166124f375118\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Check range\"\n        },\n        \"194fae9f28f045ac94643564ef50c9db\": {\n          \"id\": \"194fae9f28f045ac94643564ef50c9db\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Validation failed\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return vaVars.currentAnswerErrorMsg;\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"786cec348ec048a78c4c2c6c4fed5ac2\": {\n          \"stepType\": \"CarouselPrompt\",\n          \"name\": \"Show image scale question\",\n          \"prompt\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'imagescale') {\\n        vaInputs.show_image_scale_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"7df928600c0b443a99b74c93a456775a\",\n          \"id\": \"786cec348ec048a78c4c2c6c4fed5ac2\",\n          \"carouselLabel\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"carouselItemExpression\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'Name': c.display,\\n            'Value': c.value,\\n            'Body': c.unselected\\n        });\\n    }\\n\\n    return options;\\n})()\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"No data found\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"c24324650a514984946fed64207f0c24\": {\n          \"id\": \"c24324650a514984946fed64207f0c24\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Summary\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n      var questions = JSON.parse(vaVars.surveyQuestions);\\n      var answers = JSON.parse(vaVars.surveyAnswers);\\n      var questionAnswerPairs = [];\\n\\n      questions.forEach(function(q) {\\n            var question = q.display.toString();\\n            var answer = answers[q.metric];\\n            var questionAnswer = answer.displayValue != null ? answer.displayValue :\\n            answer.value != null ? answer.value : '';\\n            var questionType = q.type + '';\\n            \\n            if(questionType == 'checkbox' || questionType == 'boolean'){\\n                  if (questionAnswer == \\\"1\\\") {\\n                        questionAnswer = \\\"Yes\\\";\\n                  } else if (questionAnswer == \\\"0\\\") {\\n                        questionAnswer = \\\"No\\\"\\n                  }\\n            }\\n            if(answer){questionAnswerPairs.push({\\\"fieldLabel\\\": question, \\\"fieldValue\\\": questionAnswer});}         \\n      });\\n      \\n      var card_data = JSON.stringify({\\n            \\\"title\\\":gs.getMessageLang(\\\"Response Summary\\\", vaContext.getRequesterLang()),\\n            \\\"fields\\\":questionAnswerPairs,\\n      });\\n\\n      return vaSystem.renderCard(\\\"PreChat\\\", card_data, true);\\n})()\\n\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"e9cf114b0f3443a88c35756df8073df5\": {\n          \"id\": \"e9cf114b0f3443a88c35756df8073df5\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Verify Response\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"type\": \"datapill\",\n                    \"dataPill\": {\n                      \"value\": \"{{vaVars.surveyVerificationMsg}}\",\n                      \"displayValue\": \"vaVarssurveyVerificationMsg\"\n                    },\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"variableId\": \"5fdb137d926849b9a9e41edf8bb67509\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8c9927f71ad04890afd342b20df99100\": {\n          \"id\": \"8c9927f71ad04890afd342b20df99100\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Summary Correct?\"\n        },\n        \"3c232bba33f34219b4a554c511faa4da\": {\n          \"id\": \"3c232bba33f34219b4a554c511faa4da\",\n          \"name\": \"Reset Question Index\",\n          \"script\": \"(function execute() {\\n    vaVars.questionIndex = -1;\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"9f8dfc6260824d0b863c4275cbd6e2f3\": {\n          \"id\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Confirmation\"\n        },\n        \"0f849053babf4775a81a81355823b3db\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Show reference question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if ((vaVars.currentQuestionType === 'reference')) {\\n        vaInputs.show_reference_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"217beaae2c9b4289859d6b32fc9877e6\",\n          \"id\": \"0f849053babf4775a81a81355823b3db\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var table = vaVars.currentQuestionReferenceTable;\\n    var condition = vaVars.currentQuestionReferenceCondition;\\n    if (!table)\\n        return options;\\n \\n    var taskExtensions = new TableUtils(\\\"task\\\").getTableExtensions();\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\n\\n    var gr = new GlideRecord(table);\\n    if (condition)\\n        gr.addEncodedQuery(condition);\\n    gr.query();\\n    while (gr.next()) {\\n        options.push({\\n            'render_style':'bubble',\\n            'value': gr.sys_id + '',\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\n        });\\n    }\\n    return options;\\n})()\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"No reference found\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var table = vaVars.currentQuestionReferenceTable;\\n    var condition = vaVars.currentQuestionReferenceCondition;\\n    if (!table)\\n        return options;\\n \\n    var taskExtensions = new TableUtils(\\\"task\\\").getTableExtensions();\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\n\\n    var gr = new GlideRecord(table);\\n    if (condition)\\n        gr.addEncodedQuery(condition);\\n    gr.query();\\n    while (gr.next()) {\\n        options.push({\\n            'render_style':'bubble',\\n            'value': gr.sys_id + '',\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\n        });\\n    }\\n    return options;\\n})()\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ca955a1d346d48b09e9ce792dde52cc3\": {\n          \"id\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Survey Active?\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"d723d392011a4489b5e9707ea710ae01\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"target\": \"da165a652daf475698c988c6427d008f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    gs.warn(\\\"Survey is not active\\\")\\n    return vaVars.active != true;\\n})()\\n\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Is Survey Active\",\n          \"toNode\": \"da165a652daf475698c988c6427d008f\",\n          \"toEdge\": \"d723d392011a4489b5e9707ea710ae01\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"d5d8414f7d124779a993b68bf5fb0c83\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n          \"target\": \"4761ab4e62324e3cb07ce4efc77ffd1f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9c490fb1ee7b48e2ab62d5120713a01f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9ecd2ca830064b97967dca21062c30fc\",\n          \"target\": \"6fc30a2a583e40d2a737eee77bb5e73f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"380d37400e614773a95863c9a11548ab\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"target\": \"a37d9e0c9af54fbb93c16fe65d7f33e0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.currentIsDependencySatisfied;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"ad83e8a8966b4569bf2a2adc0acf21c0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"385869dc18c746b88db71bdd7c349c56\",\n          \"target\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e0feebc1fe63415aaa292ddf81cb735d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8ad01595341c4a6186e46eb203320658\",\n          \"target\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e9629798f480430ca040141729435c8a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"280229f5f0f74d11a6d06328dfb8fa1a\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"65ebda13c269463d875828687d4d02c5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.currentIsDependencySatisfied;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"87d89661bc144db1930085298213794f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"target\": \"385869dc18c746b88db71bdd7c349c56\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.questionIndex < vaVars.questionCount;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"af0cf0a9cffd4cb88e90a49da908d3aa\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"target\": \"74fc296442cc4d7f8269e94e25cad5a4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a59671cb37be433ca9aad55c9f432474\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"74fc296442cc4d7f8269e94e25cad5a4\",\n          \"target\": \"da165a652daf475698c988c6427d008f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"921b07f0136140b3b3c3dd1ab561bb08\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bbe4918b84a9426abbec7d055f7f555a\",\n          \"target\": \"8351c5b9bf8942ff8d31f773b77a5ee3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4c33e19c61de47b6a365058f905ba7db\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8351c5b9bf8942ff8d31f773b77a5ee3\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ee2e867ed68047d794c46b45bc4ce496\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6fc30a2a583e40d2a737eee77bb5e73f\",\n          \"target\": \"64d85b2098094a4fa02f25f7a1444c50\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0ec6f85012064093931d18af01990021\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"64d85b2098094a4fa02f25f7a1444c50\",\n          \"target\": \"c86161c0b4ea42dab11005dd0f69556a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4b32d599cc7145c9bef29624ed16ce09\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c86161c0b4ea42dab11005dd0f69556a\",\n          \"target\": \"bab80169de204bdf98d7955c940792c7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"166e3abc2610434380c01a42e67a6e57\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f9950611be314fe6b0c891e8e65771d2\",\n          \"target\": \"607a63448c1a4acca85166124f375118\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"240492096e0e4691a1481592d27639d2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"607a63448c1a4acca85166124f375118\",\n          \"target\": \"280229f5f0f74d11a6d06328dfb8fa1a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.currentAnswerValidation;\\n})()\"\n          },\n          \"label\": \"In range\"\n        },\n        {\n          \"id\": \"11d51d8d83d4441dbd99f5ddff1399a5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"607a63448c1a4acca85166124f375118\",\n          \"target\": \"194fae9f28f045ac94643564ef50c9db\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.currentAnswerValidation;\\n})()\"\n          },\n          \"label\": \"Out of range\"\n        },\n        {\n          \"id\": \"fb80daf341154f44b06eed52008d631b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"194fae9f28f045ac94643564ef50c9db\",\n          \"target\": \"a37d9e0c9af54fbb93c16fe65d7f33e0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f499ad9ec75d4d029dc327aeada3ff88\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a37d9e0c9af54fbb93c16fe65d7f33e0\",\n          \"target\": \"786cec348ec048a78c4c2c6c4fed5ac2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6932b81a81aa40239c7279a917bb3816\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"786cec348ec048a78c4c2c6c4fed5ac2\",\n          \"target\": \"9ecd2ca830064b97967dca21062c30fc\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1d4e280c848b4646967db37b37aa6971\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c24324650a514984946fed64207f0c24\",\n          \"target\": \"e9cf114b0f3443a88c35756df8073df5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e5675c80eaaf4501b0872eb2375e31a7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e9cf114b0f3443a88c35756df8073df5\",\n          \"target\": \"8c9927f71ad04890afd342b20df99100\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8f26f9a4757b45299f913e7ca3b948d1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8c9927f71ad04890afd342b20df99100\",\n          \"target\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"verify_response=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"d52c9a7bde9841f5a5fe1e96330547a2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8c9927f71ad04890afd342b20df99100\",\n          \"target\": \"3c232bba33f34219b4a554c511faa4da\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"verify_response=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"339812eec1c44e0ba4847f30f4f5e5d0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3c232bba33f34219b4a554c511faa4da\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"83c8dcc16e06476b8bdb8a991918171e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"target\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.questionIndex >= vaVars.questionCount;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"8e5c522a68604d14b48d408ab8d30df0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"target\": \"c24324650a514984946fed64207f0c24\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"confirmationneeded=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Confirmation?\"\n        },\n        {\n          \"id\": \"53df8ead704541ba8b2b12abd376513d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"target\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"confirmationneeded!=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"dfb7472e691f4770a126df453f8bd986\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bab80169de204bdf98d7955c940792c7\",\n          \"target\": \"0f849053babf4775a81a81355823b3db\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4771447e2c9e47a497c00226182f0aa2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0f849053babf4775a81a81355823b3db\",\n          \"target\": \"f9950611be314fe6b0c891e8e65771d2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fe8bc0685a84441e85e38f22c6d8f929\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4761ab4e62324e3cb07ce4efc77ffd1f\",\n          \"target\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9f77c4762dd94e248ecc9bda5e2cf8d0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"target\": \"bbe4918b84a9426abbec7d055f7f555a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.active == true;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"42731da272e043d29de8a18ae4abe8ec\": {\n      \"id\": \"42731da272e043d29de8a18ae4abe8ec\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"surveyInstanceId\",\n      \"label\": \"surveyInstanceId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a019f4d9d2034f1e8ce4413ad6814d4c\": {\n      \"id\": \"a019f4d9d2034f1e8ce4413ad6814d4c\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"surveyQuestions\",\n      \"label\": \"surveyQuestions\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4606ff81e3b1466dba105ac8db0a3ff1\": {\n      \"id\": \"4606ff81e3b1466dba105ac8db0a3ff1\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"-1\"\n      },\n      \"name\": \"questionIndex\",\n      \"label\": \"questionIndex\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"7df928600c0b443a99b74c93a456775a\": {\n      \"id\": \"7df928600c0b443a99b74c93a456775a\",\n      \"name\": \"show_image_scale_question\",\n      \"label\": \"Show Image Scale Question\",\n      \"varType\": \"carousel-image\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"786cec348ec048a78c4c2c6c4fed5ac2\",\n      \"isHidden\": false\n    },\n    \"701eeb0ead3946b4a95fc310996f51d5\": {\n      \"id\": \"701eeb0ead3946b4a95fc310996f51d5\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"questionCount\",\n      \"label\": \"questionCount\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"24bdbf9a7cc4465f9a4f4ab220cdb2c7\": {\n      \"id\": \"24bdbf9a7cc4465f9a4f4ab220cdb2c7\",\n      \"name\": \"show_text_input_question\",\n      \"label\": \"Show Text Input Question\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"secure\": false,\n      \"encryptionSalt\": {\n        \"value\": \"MTYxNDA5ODY2MTE1NSBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"nodeId\": \"a37d9e0c9af54fbb93c16fe65d7f33e0\",\n      \"isHidden\": false\n    },\n    \"e0b97ea5de424260a17d367b713e6233\": {\n      \"id\": \"e0b97ea5de424260a17d367b713e6233\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"{}\"\n      },\n      \"name\": \"surveyAnswers\",\n      \"label\": \"surveyAnswers\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3bd6649edfb04f1d870a98c96130be34\": {\n      \"id\": \"3bd6649edfb04f1d870a98c96130be34\",\n      \"name\": \"show_boolean_question\",\n      \"label\": \"Show Boolean Question\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"6fc30a2a583e40d2a737eee77bb5e73f\",\n      \"isHidden\": false\n    },\n    \"5fa5bab12ab3407fa0243a6e4b1e5b55\": {\n      \"id\": \"5fa5bab12ab3407fa0243a6e4b1e5b55\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"choice,scale,numericscale\"\n      },\n      \"name\": \"choiceTypes\",\n      \"label\": \"choiceTypes\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"43d0530ce6724cde95932f286155da8f\": {\n      \"id\": \"43d0530ce6724cde95932f286155da8f\",\n      \"name\": \"show_choice_question\",\n      \"label\": \"Show Choice Question\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"9ecd2ca830064b97967dca21062c30fc\",\n      \"isHidden\": false\n    },\n    \"953851ffa4294d04859d006bf28a4986\": {\n      \"id\": \"953851ffa4294d04859d006bf28a4986\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionId\",\n      \"label\": \"currentQuestionId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1d2077df93314785b211efe410798278\": {\n      \"id\": \"1d2077df93314785b211efe410798278\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionType\",\n      \"label\": \"currentQuestionType\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"00d261d656824f6f8f150a2025f4eaae\": {\n      \"id\": \"00d261d656824f6f8f150a2025f4eaae\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionMetric\",\n      \"label\": \"currentQuestionMetric\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"601f508ef27a49a18330230ddcc12772\": {\n      \"id\": \"601f508ef27a49a18330230ddcc12772\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionDisplay\",\n      \"label\": \"currentQuestionDisplay\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b56216c2f682436d9e56d9ef36471bcb\": {\n      \"id\": \"b56216c2f682436d9e56d9ef36471bcb\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"introduction\",\n      \"label\": \"introduction\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"0c33e298eff44fc88364434b538e805f\": {\n      \"id\": \"0c33e298eff44fc88364434b538e805f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"endNote\",\n      \"label\": \"endNote\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6545133e2b144832a1ecea359dcc39b9\": {\n      \"id\": \"6545133e2b144832a1ecea359dcc39b9\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"string,long,percentage\"\n      },\n      \"name\": \"textTypes\",\n      \"label\": \"textTypes\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"dd7230f4e76642c4b1676e04fa2af480\": {\n      \"id\": \"dd7230f4e76642c4b1676e04fa2af480\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionMax\",\n      \"label\": \"currentQuestionMax\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3f8a633cceb94a7a8c29a2622f003795\": {\n      \"id\": \"3f8a633cceb94a7a8c29a2622f003795\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionMin\",\n      \"label\": \"currentQuestionMin\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"cf9a19900c7043bd817ff9f5794941ed\": {\n      \"id\": \"cf9a19900c7043bd817ff9f5794941ed\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentAnswerValidation\",\n      \"label\": \"currentAnswerValidation\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"607bdaced73d4d7fab9239c0d64a4210\": {\n      \"id\": \"607bdaced73d4d7fab9239c0d64a4210\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"''\"\n      },\n      \"name\": \"currentAnswerErrorMsg\",\n      \"label\": \"currentAnswerErrorMsg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"bba30ac7475c47cc93da35130951478b\": {\n      \"id\": \"bba30ac7475c47cc93da35130951478b\",\n      \"name\": \"show_attachment_question\",\n      \"label\": \"Show Attachment Question\",\n      \"varType\": \"image\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"64d85b2098094a4fa02f25f7a1444c50\",\n      \"isHidden\": false\n    },\n    \"f7bd8a67b7874023816be1a2eccd99da\": {\n      \"id\": \"f7bd8a67b7874023816be1a2eccd99da\",\n      \"name\": \"show_date_question\",\n      \"label\": \"Show Date Question\",\n      \"varType\": \"date_time\",\n      \"category\": \"vaInputs\",\n      \"mode\": \"date\",\n      \"nodeId\": \"c86161c0b4ea42dab11005dd0f69556a\",\n      \"isHidden\": false\n    },\n    \"d5c40882740949d285112e17f40f7b2c\": {\n      \"id\": \"d5c40882740949d285112e17f40f7b2c\",\n      \"name\": \"show_datetime_question\",\n      \"label\": \"Show Datetime Question\",\n      \"varType\": \"date_time\",\n      \"category\": \"vaInputs\",\n      \"mode\": \"date_time\",\n      \"nodeId\": \"bab80169de204bdf98d7955c940792c7\",\n      \"isHidden\": false\n    },\n    \"1132a62678c24bbda688337615fd51bb\": {\n      \"id\": \"1132a62678c24bbda688337615fd51bb\",\n      \"name\": \"surveyid\",\n      \"label\": \"SurveyId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n      \"isHidden\": false\n    },\n    \"5fdb137d926849b9a9e41edf8bb67509\": {\n      \"id\": \"5fdb137d926849b9a9e41edf8bb67509\",\n      \"name\": \"verify_response\",\n      \"label\": \"Verify Response\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"e9cf114b0f3443a88c35756df8073df5\",\n      \"isHidden\": false\n    },\n    \"e5e2dc8c74a64bf7ba531a2b734bd9cd\": {\n      \"id\": \"e5e2dc8c74a64bf7ba531a2b734bd9cd\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"surveyVerificationMsg\",\n      \"label\": \"surveyVerificationMsg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"75bc445130284002947077d668cac779\": {\n      \"id\": \"75bc445130284002947077d668cac779\",\n      \"name\": \"confirmationneeded\",\n      \"label\": \"ConfirmationNeeded\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n      \"isHidden\": false\n    },\n    \"f4cfc3cbbdca4d46b23a1de57709a8e0\": {\n      \"id\": \"f4cfc3cbbdca4d46b23a1de57709a8e0\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"true\"\n      },\n      \"name\": \"currentQuestionMandatory\",\n      \"label\": \"currentQuestionMandatory\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"ba2a161b94a3468a86603955cca630a1\": {\n      \"id\": \"ba2a161b94a3468a86603955cca630a1\",\n      \"name\": \"savequestionstocontext\",\n      \"label\": \"SaveQuestionsToContext\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n      \"isHidden\": false\n    },\n    \"1ebd3fa354824ebcb2abd32c7f5a08ee\": {\n      \"id\": \"1ebd3fa354824ebcb2abd32c7f5a08ee\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_postchat_user_id\",\n      \"label\": \"_topic_postchat_user_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fbdedb6037d443fc94ac909130d72657\": {\n      \"id\": \"fbdedb6037d443fc94ac909130d72657\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"surveyName\",\n      \"label\": \"surveyName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"62b3a6b4779d449faee2e5abee5678a5\": {\n      \"id\": \"62b3a6b4779d449faee2e5abee5678a5\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_pre_chat_survey_name\",\n      \"label\": \"LiveAgent_pre_chat_survey_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b712f462443f422882112475625c1f51\": {\n      \"id\": \"b712f462443f422882112475625c1f51\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_post_chat_survey_name\",\n      \"label\": \"LiveAgent_post_chat_survey_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c561d907f23a4ee485d105e3deefe041\": {\n      \"id\": \"c561d907f23a4ee485d105e3deefe041\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_pre_assessment_instance\",\n      \"label\": \"LiveAgent_pre_assessment_instance\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5f4fab2392e34755a790d59670b35294\": {\n      \"id\": \"5f4fab2392e34755a790d59670b35294\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_post_assessment_instance\",\n      \"label\": \"LiveAgent_post_assessment_instance\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"b0a2dbc7899742b19e9f2d904b7bfc3e\": {\n      \"id\": \"b0a2dbc7899742b19e9f2d904b7bfc3e\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"defaultSurveyName\",\n      \"label\": \"defaultSurveyName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9c7e90dca34b47489835d0bcdc8e4933\": {\n      \"id\": \"9c7e90dca34b47489835d0bcdc8e4933\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionFieldValidator\",\n      \"label\": \"currentQuestionFieldValidator\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"217beaae2c9b4289859d6b32fc9877e6\": {\n      \"id\": \"217beaae2c9b4289859d6b32fc9877e6\",\n      \"name\": \"show_reference_question\",\n      \"label\": \"Show Reference Question\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"0f849053babf4775a81a81355823b3db\",\n      \"isHidden\": false\n    },\n    \"a7b460d515ca4a2087c92d2c8bf5fbc9\": {\n      \"id\": \"a7b460d515ca4a2087c92d2c8bf5fbc9\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionReferenceTable\",\n      \"label\": \"currentQuestionReferenceTable\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6ec01bc01b7144ec90530b7f9af69bb2\": {\n      \"id\": \"6ec01bc01b7144ec90530b7f9af69bb2\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionReferenceCondition\",\n      \"label\": \"currentQuestionReferenceCondition\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3f44cb42666b408fbb6f952fe939d920\": {\n      \"id\": \"3f44cb42666b408fbb6f952fe939d920\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"active\",\n      \"label\": \"active\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"a6baac293b77330074bc456993efc4e0","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_a6baac293b77330074bc456993efc4e0","sys_updated_by":"admin","sys_created_on":"2019-09-09 19:40:20","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"53a72e601fa64be982f3a79c152d4df0\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"53a72e601fa64be982f3a79c152d4df0\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"53a72e601fa64be982f3a79c152d4df0\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"b90ef5f7024d4e34b5ceaf628345df9c\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"da165a652daf475698c988c6427d008f\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n\\tvar gr = new GlideRecord('asmt_metric_type');\\n\\tgr.get(vaInputs.surveyid);vaVars.active = gr.active;vaVars.endNote = vaSystem.getTranslation(gr, 'end_note', vaContext.getRequesterLang(), gr.end_note.getValue() || '');vaVars.introduction = vaSystem.getTranslation(gr, 'introduction', vaContext.getRequesterLang(), gr.introduction.getValue() || '');vaVars.surveyName = gr.name.toString();vaVars.surveyVerificationMsg = vaSystem.getSurveyVerificationMessage();\\n})()\",\"id\":\"4761ab4e62324e3cb07ce4efc77ffd1f\",\"name\":\"Load survey instance\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var gr = new GlideRecord('asmt_metric_category');\\n    gr.addQuery('metric_type', vaInputs.surveyid);\\n    gr.query();\\n    gr.next();\\n\\n    var surveyCategory = gr.getUniqueValue();\\n\\n    var gr = new GlideRecord('asmt_metric')\\n    gr.addQuery('category', surveyCategory);\\n    gr.addQuery('active', true);\\n    gr.orderBy('order');\\n    gr.query();\\n\\n    var questions = [];\\n    while (gr.next()) {\\n        var question = {\\n            sys_id: gr.getUniqueValue(),\\n            scale: gr.scale + '',\\n            metric: gr.sys_id + '',\\n            type: gr.datatype + '',\\n            display: vaSystem.getTranslation(gr, 'question', vaContext.getRequesterLang(), gr.question) + '',\\n            dependsOn: gr.depends_on + '',\\n            displayedWhen: gr.displayed_when + '',\\n            name: gr.name + '',\\n            max: gr.max + '',\\n            min: gr.min + '',\\n            mandatory: gr.mandatory + '',\\n            field_validation: gr.field_validation + '',\\n            reference_table: gr.reference_table + '',\\n            condition: gr.condition + '',\\n        };\\n\\n        // boolean and checkbox type questions use different displayed_when fields\\n        var dependsOnType = gr.depends_on.datatype + '';\\n        if (dependsOnType === 'boolean')\\n            question['displayedWhen'] = gr.displayed_when_yesno + '';\\n        else if (dependsOnType === 'checkbox')\\n            question['displayedWhen'] = gr.displayed_when_checkbox + '';\\n\\n        questions.push(question);\\n    }\\n    vaVars.surveyQuestions = JSON.stringify(questions);\\n    vaVars.questionCount = questions.length;\\n})()\",\"id\":\"bbe4918b84a9426abbec7d055f7f555a\",\"name\":\"Load questions\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.questionIndex++;\\n    if (!(vaVars.questionCount && vaVars.questionIndex < vaVars.questionCount))\\n        return;\\n\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n\\n    // Set question type & display value\\n    vaVars.currentQuestionId = questions[i].sys_id;\\n    vaVars.currentQuestionType = questions[i].type;\\n    vaVars.currentQuestionMetric = questions[i].metric;\\n    vaVars.currentQuestionDisplay = questions[i].display;\\n    vaVars.currentQuestionMax = questions[i].max;\\n    vaVars.currentQuestionMin = questions[i].min;\\n    vaVars.currentQuestionMandatory = questions[i].mandatory;\\n    vaVars.currentQuestionFieldValidator = questions[i].field_validation;\\n    vaVars.currentQuestionReferenceTable = questions[i].reference_table;\\n    vaVars.currentQuestionReferenceCondition = questions[i].condition;\\n\\n    // Load choices if relevant\\n    if (questions[i].type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(questions[i].type) > -1) {\\n        questions[i].choices = getChoices(questions[i]);\\n        vaVars.surveyQuestions = JSON.stringify(questions);\\n    }\\n})();\\n\\nfunction getChoices(q) {\\n    var gr = new GlideRecord('asmt_metric_definition');\\n    gr.addQuery('metric', q.metric);\\n    gr.orderBy('order');\\n    gr.query();\\n\\n    var choices = [];\\n    while (gr.next()) {\\n        choices.push({\\n            sys_id: gr.getUniqueValue(),\\n            display: vaSystem.getTranslation(gr, 'display', vaContext.getRequesterLang(),gr.display),\\n            value: gr.getValue('value'),\\n            selected: gr.getDisplayValue('selected_image'),\\n            unselected: gr.getDisplayValue('unselected_image')\\n        });\\n    }\\n    return choices;\\n}\",\"id\":\"8ad01595341c4a6186e46eb203320658\",\"name\":\"Set next question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Out of questions?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.questionIndex < vaVars.questionCount;\\n})()\\n\"},\"id\":\"32694605c770431cabebfcb1eaed619a\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.questionIndex >= vaVars.questionCount;\\n})()\\n\"},\"id\":\"cb0e213e6ddd40e2ac98cf5f9c49b666\",\"name\":\"Yes\"}],\"id\":\"ca66aaa54c614102a4a2fd4bad818b9a\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n    answers[vaVars.currentQuestionId] = getInput();\\n    vaVars.surveyAnswers = JSON.stringify(answers);\\n})();\\n\\nfunction getInput() {\\n    var values = {'value': null, 'Qtype': vaVars.currentQuestionType, 'displayValue':null};\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        values.value = getValueIfSet(vaInputs.show_choice_question);\\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_choice_question,values.value);\\n    }\\n\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        values.value = getValueIfSet(vaInputs.show_text_input_question);\\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_text_input_question,values.value);\\n    }\\n\\n    switch (vaVars.currentQuestionType) {\\n        case 'imagescale':\\n            values.value = getValueIfSet(vaInputs.show_image_scale_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_image_scale_question,values.value);\\n            var questions = JSON.parse(vaVars.surveyQuestions);\\n            //stores correct displayValue, vaInputs returns display+value\\n            if(vaInputs.show_image_scale_question && vaInputs.show_image_scale_question != null){\\n                questions[vaVars.questionIndex].choices.forEach(function(c){\\n                    if(c.value === values.value)\\n                        values.displayValue = c.display;\\n                });\\n            }\\n            break;\\n        case 'boolean':\\n            values.value = getValueIfSet(vaInputs.show_boolean_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\\n            break;\\n        case 'checkbox':\\n            values.value= getValueIfSet(vaInputs.show_boolean_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\\n            break;\\n        case 'attachment':\\n            values.value = getValueIfSet(vaInputs.show_attachment_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_attachment_question,values.value);\\n            break;\\n        case 'date':\\n            const date = getValueIfSet(vaInputs.show_date_question);\\n            values.value = (date != null) ? date.toString() : null;\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_date_question,values.value);\\n            break;\\n        case 'datetime':\\n            const dateTime = getValueIfSet(vaInputs.show_datetime_question);\\n            values.value = (dateTime != null) ? dateTime.toString() : null;\\n            vaInputs.show_datetime_question.setTimeZone(vaContext.getDeviceTimeZone());\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_datetime_question,values.value);\\n            break;\\n        case 'reference':\\n            values.value = getValueIfSet(vaInputs.show_reference_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_reference_question,values.value);\\n    }\\n    return values;\\n}\\n\\nfunction getValueIfSet(field){\\n    return field && field.isValueSet() ? field.getValue() : null;\\n}\\n\\nfunction getDisplayValueIfSet(field, val){\\n    if (!field || field == null)\\n       return val;\\n    var dv = field.getDisplayValue();\\n     return dv && dv.length > 0  ? dv : val;\\n}\",\"id\":\"280229f5f0f74d11a6d06328dfb8fa1a\",\"name\":\"Set answers\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Does question satisfy dependency?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentIsDependencySatisfied;\\n})()\\n\"},\"id\":\"0b1660a4969a4114826e607acfa29693\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.currentIsDependencySatisfied;\\n})()\\n\"},\"id\":\"ccc9c4364e3c4419a7470e2b7322ed88\",\"name\":\"No\"}],\"id\":\"9ee3c8b3d800414c89edc50c2746da57\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var q = questions[i];\\n\\n    var satisfied = true;\\n    var hasDependency = !(!q.dependsOn);\\n    vaVars.currentIsDependencySatisfied = !hasDependency || isSat(q);\\n})();\\n\\nfunction isSat(q) {\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n\\n    var answerValid = false;\\n    questions.forEach(function(question) {\\n        if (question.metric !== q.dependsOn)\\n            return;\\n\\n        var answerExists = question.sys_id in answers;\\n        if (!answerExists)\\n            return;\\n\\n        var selectedChoice = answers[question.sys_id]['value'];\\n\\n        if (question.type === 'boolean' || question.type === 'checkbox') {\\n            if ((selectedChoice === true && q.displayedWhen === '1') || (selectedChoice === false && q.displayedWhen === '0'))\\n                answerValid = true;\\n        } else {\\n            var choices = question.choices.filter(function(c) {\\n                return c.value === selectedChoice;\\n            });\\n\\n            if (choices.length && choices[0].sys_id)\\n                answerValid = q.displayedWhen.indexOf(choices[0].sys_id) !== -1;\\n        }\\n    });\\n\\n    return answerValid;\\n}\",\"id\":\"385869dc18c746b88db71bdd7c349c56\",\"name\":\"Check question dependency\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"InputPrompt\",\"variable_id\":\"3bd6649edfb04f1d870a98c96130be34\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"6fc30a2a583e40d2a737eee77bb5e73f\",\"name\":\"Show boolean question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if ((vaVars.currentQuestionType === 'boolean') || (vaVars.currentQuestionType === 'checkbox')) {\\n        vaInputs.show_boolean_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if(vaInputs.savequestionstocontext == 'true'){ \\n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createAssessments(vaInputs.surveyid, '', gs.getUserID(), false, '', false, '', vaVars._interaction_record_sysid, false, 'interaction');\\n        vaVars.surveyInstanceId = vaVars.surveyInstanceId.substring(0, 32);\\n        vaVars.LiveAgent_pre_assessment_instance = vaVars.surveyInstanceId;\\n        vaVars.LiveAgent_pre_chat_survey_name = vaVars.surveyName;\\n    } else{ \\n        var userId = !gs.nil(vaVars._topic_postchat_user_id) ? vaVars._topic_postchat_user_id : gs.getUserID();\\n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createAssessments(vaInputs.surveyid, '', userId, false, '', false, '', vaVars._interaction_record_sysid, false, 'interaction');\\n        vaVars.surveyInstanceId = vaVars.surveyInstanceId.substring(0, 32);\\n        vaVars.LiveAgent_post_assessment_instance = vaVars.surveyInstanceId;\\n        vaVars.LiveAgent_post_chat_survey_name = vaVars.surveyName;    \\n    }\\n\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n    var data = {\\n        sysparm_instance_id: vaVars.surveyInstanceId,\\n        sysparm_action: 'submit'\\n    };\\n data.channel = 'va'; \\n    var questionData = new global.TopicPreChatUtil().getQuestionData(vaVars.surveyInstanceId);\\n\\n    Object.keys(answers).forEach(function(q) {\\n        if (answers[q] && answers[q] && answers[q].value != null){ \\n            if (answers[q]['Qtype'] === 'boolean') {\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? '1' : '0';\\n            } else if (answers[q]['Qtype'] === 'checkbox') {\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? 'true' : '';\\n            } else\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = answers[q]['value'];\\n            if (vaInputs.savequestionstocontext == 'true')\\n                saveToContext(questionData[q].name, answers[q], questionData[q].contextVar, questionData[q].type);\\n        }\\n        \\n    });\\n    var response = new global.AssessmentSubmitProcessor().processRequest(data);\\n})()\\n\\nfunction saveToContext(name, a, contextVar, type){\\n        if(contextVar != \\\"\\\") {\\n            var contextVarName = contextVar;\\n        } else {\\n            //remove all special characters and replace spaces with _\\n            var questionName = name.toString().replace(/[^a-zA-Z0-9]/g, '_').replace(/_$/,'');     \\n            //append survey name to question name\\n            var contextVarName = \\\"liveagent_\\\" +vaVars.surveyName +\\\".\\\"+ questionName;\\n        }\\n        vaVars[contextVarName] = a.value.toString();\\n        //for choice questions, store response and not response index as context var\\n        if (type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(type) > -1) { \\n             vaVars[contextVarName] = a.displayValue.toString();    \\n        }\\n}\",\"id\":\"6460cac852834b46a4977c093a2b1a67\",\"name\":\"Submit survey answers\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"InputPrompt\",\"variable_id\":\"24bdbf9a7cc4465f9a4f4ab220cdb2c7\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.currentQuestionType === 'long')\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\n    else if (vaVars.currentQuestionType === 'percentage')\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\n    else\\n        return vaVars.currentQuestionDisplay;\\n})()\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"a37d9e0c9af54fbb93c16fe65d7f33e0\",\"name\":\"Show text input question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_text_input_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"},\"formatType\":\"Custom\",\"validationScript\":\"function validate(value) {\\n    // for \\\"skip\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\n        return {\\n            valid: true,\\n        }; \\n\\n    // for string type with validator defined, and question is not skipped\\n    var validatorGr = new GlideRecord(\\\"sys_cs_field_script_validator\\\");\\n    if (!validatorGr.isValid())\\n\\t    return {\\n           valid: false,\\n           error: gs.getMessageLang(\\\"validator table does not exist\\\", vaContext.getRequesterLang())\\n        };\\n\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\n        var scriptBuild = \\\"(\\\" + validatorGr.validator + \\\")('\\\"+ value + \\\"');\\\";\\n        var isValidAnswer = eval(scriptBuild);\\n        return {\\n            valid: isValidAnswer,\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\n        };\\n    } else {\\n        return {\\n            valid: false,\\n            error: gs.getMessageLang(\\\"validator record does not exist\\\", vaContext.getRequesterLang())\\n        };\\n    }\\n}\"},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.endNote}}\"}],\"id\":\"74fc296442cc4d7f8269e94e25cad5a4\",\"name\":\"End note\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.introduction}}\"}],\"id\":\"8351c5b9bf8942ff8d31f773b77a5ee3\",\"name\":\"Introduction\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"9ecd2ca830064b97967dca21062c30fc\",\"name\":\"Show choice question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_choice_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\\n\"},\"variable_id\":\"43d0530ce6724cde95932f286155da8f\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\"},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'render_style':'bubble',\\n            'label': c.display,\\n            'value': c.value\\n        });\\n    }\\n\\n    return options;\\n})()\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No data found\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'render_style':'bubble',\\n            'label': c.display,\\n            'value': c.value\\n        });\\n    }\\n\\n    return options;\\n})()\"}},{\"type\":\"InputPrompt\",\"variable_id\":\"bba30ac7475c47cc93da35130951478b\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"64d85b2098094a4fa02f25f7a1444c50\",\"name\":\"Show attachment question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.currentQuestionType === 'attachment') {\\n        vaInputs.show_attachment_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"InputPrompt\",\"variable_id\":\"f7bd8a67b7874023816be1a2eccd99da\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"c86161c0b4ea42dab11005dd0f69556a\",\"name\":\"Show date question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.currentQuestionType === 'date') {\\n        vaInputs.show_date_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"InputPrompt\",\"variable_id\":\"d5c40882740949d285112e17f40f7b2c\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"bab80169de204bdf98d7955c940792c7\",\"name\":\"Show datetime question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.currentQuestionType === 'datetime') {\\n        vaInputs.show_datetime_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.currentAnswerValidation = true;\\n    vaVars.currentAnswerErrorMsg = '';\\n\\n    if (vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage')\\n        validateFieldLimits();\\n})();\\n\\nfunction validateFieldLimits() {\\n\\tif ((!vaInputs.show_text_input_question.isValueSet() || vaInputs.show_text_input_question.getValue().length == 0)\\n\\t    && !vaInputs.show_text_input_question.isRequired())\\n\\t\\treturn;\\n\\tvar max = vaVars.currentQuestionMax;\\n\\tvar min = vaVars.currentQuestionMin;\\n\\t\\t\\n\\tvar value = vaInputs.show_text_input_question.getValue();\\n\\tvar newvalue = Number(value);\\n\\tif (isNaN(newvalue)) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is not a valid number. Please try again', vaContext.getRequesterLang());\\n\\t} else if (newvalue > max || newvalue < min) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is outside the valid range. Please try again', vaContext.getRequesterLang());\\n\\t}\\n}\",\"id\":\"f9950611be314fe6b0c891e8e65771d2\",\"name\":\"Answer validation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Check range\",\"branches\":[{\"type\":\"Branch\",\"label\":\"In range\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentAnswerValidation;\\n})()\"},\"id\":\"dc380193d18c4b5abaabbe26e1f7946c\",\"name\":\"In range\"},{\"type\":\"Branch\",\"label\":\"Out of range\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.currentAnswerValidation;\\n})()\"},\"id\":\"1bcfcd2bdabe4321b159379514136e53\",\"name\":\"Out of range\"}],\"id\":\"607a63448c1a4acca85166124f375118\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentAnswerErrorMsg;\\n})()\"}],\"id\":\"194fae9f28f045ac94643564ef50c9db\",\"name\":\"Validation failed\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"CarouselInputPrompt\",\"carousel_options_script\":\"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'Name': c.display,\\n            'Value': c.value,\\n            'Body': c.unselected\\n        });\\n    }\\n\\n    return options;\\n})()\",\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No data found\\\", vaContext.getRequesterLang())\"},\"id\":\"786cec348ec048a78c4c2c6c4fed5ac2\",\"name\":\"Show image scale question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.currentQuestionType === 'imagescale') {\\n        vaInputs.show_image_scale_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"},\"variable_id\":\"7df928600c0b443a99b74c93a456775a\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\"},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"c24324650a514984946fed64207f0c24\",\"name\":\"Summary\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n      var questions = JSON.parse(vaVars.surveyQuestions);\\n      var answers = JSON.parse(vaVars.surveyAnswers);\\n      var questionAnswerPairs = [];\\n\\n      questions.forEach(function(q) {\\n            var question = q.display.toString();\\n            var answer = answers[q.metric];\\n            var questionAnswer = answer.displayValue != null ? answer.displayValue :\\n            answer.value != null ? answer.value : '';\\n            var questionType = q.type + '';\\n            \\n            if(questionType == 'checkbox' || questionType == 'boolean'){\\n                  if (questionAnswer == \\\"1\\\") {\\n                        questionAnswer = \\\"Yes\\\";\\n                  } else if (questionAnswer == \\\"0\\\") {\\n                        questionAnswer = \\\"No\\\"\\n                  }\\n            }\\n            if(answer){questionAnswerPairs.push({\\\"fieldLabel\\\": question, \\\"fieldValue\\\": questionAnswer});}         \\n      });\\n      \\n      var card_data = JSON.stringify({\\n            \\\"title\\\":gs.getMessageLang(\\\"Response Summary\\\", vaContext.getRequesterLang()),\\n            \\\"fields\\\":questionAnswerPairs,\\n      });\\n\\n      return vaSystem.renderCard(\\\"PreChat\\\", card_data, true);\\n})()\\n\"},\"secure\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"5fdb137d926849b9a9e41edf8bb67509\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.surveyVerificationMsg}}\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"e9cf114b0f3443a88c35756df8073df5\",\"name\":\"Verify Response\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"Decision\",\"name\":\"Summary Correct?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"verify_response=true\"},\"id\":\"d9bd1000b14c4d14b9fadb6a6ef2f746\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"verify_response=\"},\"id\":\"4265c0b44d844aa498700dee9769144b\",\"name\":\"No\"}],\"id\":\"8c9927f71ad04890afd342b20df99100\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.questionIndex = -1;\\n})()\",\"id\":\"3c232bba33f34219b4a554c511faa4da\",\"name\":\"Reset Question Index\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Confirmation\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Confirmation?\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"confirmationneeded=true\"},\"id\":\"7bb72fa865374209805f2cee3fbac36f\",\"name\":\"Confirmation?\"},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"confirmationneeded!=true\"},\"id\":\"203d2ea9494343939be43c215e4f8397\",\"name\":\"No\"}],\"id\":\"9f8dfc6260824d0b863c4275cbd6e2f3\",\"goal_id\":\"primary\"},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"0f849053babf4775a81a81355823b3db\",\"name\":\"Show reference question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if ((vaVars.currentQuestionType === 'reference')) {\\n        vaInputs.show_reference_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"},\"variable_id\":\"217beaae2c9b4289859d6b32fc9877e6\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\"},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var table = vaVars.currentQuestionReferenceTable;\\n    var condition = vaVars.currentQuestionReferenceCondition;\\n    if (!table)\\n        return options;\\n \\n    var taskExtensions = new TableUtils(\\\"task\\\").getTableExtensions();\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\n\\n    var gr = new GlideRecord(table);\\n    if (condition)\\n        gr.addEncodedQuery(condition);\\n    gr.query();\\n    while (gr.next()) {\\n        options.push({\\n            'render_style':'bubble',\\n            'value': gr.sys_id + '',\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\n        });\\n    }\\n    return options;\\n})()\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No reference found\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    var table = vaVars.currentQuestionReferenceTable;\\n    var condition = vaVars.currentQuestionReferenceCondition;\\n    if (!table)\\n        return options;\\n \\n    var taskExtensions = new TableUtils(\\\"task\\\").getTableExtensions();\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\n\\n    var gr = new GlideRecord(table);\\n    if (condition)\\n        gr.addEncodedQuery(condition);\\n    gr.query();\\n    while (gr.next()) {\\n        options.push({\\n            'render_style':'bubble',\\n            'value': gr.sys_id + '',\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\n        });\\n    }\\n    return options;\\n})()\"}},{\"type\":\"Decision\",\"name\":\"Is Survey Active?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    gs.warn(\\\"Survey is not active\\\")\\n    return vaVars.active != true;\\n})()\\n\"},\"id\":\"37f870160f3646e8ac4449a9cb1903f9\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.active == true;\\n})()\\n\"},\"id\":\"d7cab70d895d45bf8e51463a8d22e72b\",\"name\":\"Yes\"}],\"id\":\"ca955a1d346d48b09e9ce792dde52cc3\",\"goal_id\":\"primary\"}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"ca955a1d346d48b09e9ce792dde52cc3\",\"target_node_id\":\"da165a652daf475698c988c6427d008f\",\"branch_id\":\"37f870160f3646e8ac4449a9cb1903f9\",\"id\":\"d723d392011a4489b5e9707ea710ae01\",\"name\":\"37f870160f3646e8ac4449a9cb1903f9\"},{\"type\":\"Edge\",\"source_node_id\":\"b90ef5f7024d4e34b5ceaf628345df9c\",\"target_node_id\":\"4761ab4e62324e3cb07ce4efc77ffd1f\",\"id\":\"d5d8414f7d124779a993b68bf5fb0c83\"},{\"type\":\"Edge\",\"source_node_id\":\"9ecd2ca830064b97967dca21062c30fc\",\"target_node_id\":\"6fc30a2a583e40d2a737eee77bb5e73f\",\"id\":\"9c490fb1ee7b48e2ab62d5120713a01f\"},{\"type\":\"Edge\",\"source_node_id\":\"9ee3c8b3d800414c89edc50c2746da57\",\"target_node_id\":\"a37d9e0c9af54fbb93c16fe65d7f33e0\",\"branch_id\":\"0b1660a4969a4114826e607acfa29693\",\"id\":\"380d37400e614773a95863c9a11548ab\",\"name\":\"0b1660a4969a4114826e607acfa29693\"},{\"type\":\"Edge\",\"source_node_id\":\"385869dc18c746b88db71bdd7c349c56\",\"target_node_id\":\"9ee3c8b3d800414c89edc50c2746da57\",\"id\":\"ad83e8a8966b4569bf2a2adc0acf21c0\"},{\"type\":\"Edge\",\"source_node_id\":\"8ad01595341c4a6186e46eb203320658\",\"target_node_id\":\"ca66aaa54c614102a4a2fd4bad818b9a\",\"id\":\"e0feebc1fe63415aaa292ddf81cb735d\"},{\"type\":\"Edge\",\"source_node_id\":\"280229f5f0f74d11a6d06328dfb8fa1a\",\"target_node_id\":\"8ad01595341c4a6186e46eb203320658\",\"id\":\"e9629798f480430ca040141729435c8a\"},{\"type\":\"Edge\",\"source_node_id\":\"9ee3c8b3d800414c89edc50c2746da57\",\"target_node_id\":\"8ad01595341c4a6186e46eb203320658\",\"branch_id\":\"ccc9c4364e3c4419a7470e2b7322ed88\",\"id\":\"65ebda13c269463d875828687d4d02c5\",\"name\":\"ccc9c4364e3c4419a7470e2b7322ed88\"},{\"type\":\"Edge\",\"source_node_id\":\"ca66aaa54c614102a4a2fd4bad818b9a\",\"target_node_id\":\"385869dc18c746b88db71bdd7c349c56\",\"branch_id\":\"32694605c770431cabebfcb1eaed619a\",\"id\":\"87d89661bc144db1930085298213794f\",\"name\":\"32694605c770431cabebfcb1eaed619a\"},{\"type\":\"Edge\",\"source_node_id\":\"6460cac852834b46a4977c093a2b1a67\",\"target_node_id\":\"74fc296442cc4d7f8269e94e25cad5a4\",\"id\":\"af0cf0a9cffd4cb88e90a49da908d3aa\"},{\"type\":\"Edge\",\"source_node_id\":\"74fc296442cc4d7f8269e94e25cad5a4\",\"target_node_id\":\"da165a652daf475698c988c6427d008f\",\"id\":\"a59671cb37be433ca9aad55c9f432474\"},{\"type\":\"Edge\",\"source_node_id\":\"bbe4918b84a9426abbec7d055f7f555a\",\"target_node_id\":\"8351c5b9bf8942ff8d31f773b77a5ee3\",\"id\":\"921b07f0136140b3b3c3dd1ab561bb08\"},{\"type\":\"Edge\",\"source_node_id\":\"8351c5b9bf8942ff8d31f773b77a5ee3\",\"target_node_id\":\"8ad01595341c4a6186e46eb203320658\",\"id\":\"4c33e19c61de47b6a365058f905ba7db\"},{\"type\":\"Edge\",\"source_node_id\":\"6fc30a2a583e40d2a737eee77bb5e73f\",\"target_node_id\":\"64d85b2098094a4fa02f25f7a1444c50\",\"id\":\"ee2e867ed68047d794c46b45bc4ce496\"},{\"type\":\"Edge\",\"source_node_id\":\"64d85b2098094a4fa02f25f7a1444c50\",\"target_node_id\":\"c86161c0b4ea42dab11005dd0f69556a\",\"id\":\"0ec6f85012064093931d18af01990021\"},{\"type\":\"Edge\",\"source_node_id\":\"c86161c0b4ea42dab11005dd0f69556a\",\"target_node_id\":\"bab80169de204bdf98d7955c940792c7\",\"id\":\"4b32d599cc7145c9bef29624ed16ce09\"},{\"type\":\"Edge\",\"source_node_id\":\"f9950611be314fe6b0c891e8e65771d2\",\"target_node_id\":\"607a63448c1a4acca85166124f375118\",\"id\":\"166e3abc2610434380c01a42e67a6e57\"},{\"type\":\"Edge\",\"source_node_id\":\"607a63448c1a4acca85166124f375118\",\"target_node_id\":\"280229f5f0f74d11a6d06328dfb8fa1a\",\"branch_id\":\"dc380193d18c4b5abaabbe26e1f7946c\",\"id\":\"240492096e0e4691a1481592d27639d2\",\"name\":\"dc380193d18c4b5abaabbe26e1f7946c\"},{\"type\":\"Edge\",\"source_node_id\":\"607a63448c1a4acca85166124f375118\",\"target_node_id\":\"194fae9f28f045ac94643564ef50c9db\",\"branch_id\":\"1bcfcd2bdabe4321b159379514136e53\",\"id\":\"11d51d8d83d4441dbd99f5ddff1399a5\",\"name\":\"1bcfcd2bdabe4321b159379514136e53\"},{\"type\":\"Edge\",\"source_node_id\":\"194fae9f28f045ac94643564ef50c9db\",\"target_node_id\":\"a37d9e0c9af54fbb93c16fe65d7f33e0\",\"id\":\"fb80daf341154f44b06eed52008d631b\"},{\"type\":\"Edge\",\"source_node_id\":\"a37d9e0c9af54fbb93c16fe65d7f33e0\",\"target_node_id\":\"786cec348ec048a78c4c2c6c4fed5ac2\",\"id\":\"f499ad9ec75d4d029dc327aeada3ff88\"},{\"type\":\"Edge\",\"source_node_id\":\"786cec348ec048a78c4c2c6c4fed5ac2\",\"target_node_id\":\"9ecd2ca830064b97967dca21062c30fc\",\"id\":\"6932b81a81aa40239c7279a917bb3816\"},{\"type\":\"Edge\",\"source_node_id\":\"c24324650a514984946fed64207f0c24\",\"target_node_id\":\"e9cf114b0f3443a88c35756df8073df5\",\"id\":\"1d4e280c848b4646967db37b37aa6971\"},{\"type\":\"Edge\",\"source_node_id\":\"e9cf114b0f3443a88c35756df8073df5\",\"target_node_id\":\"8c9927f71ad04890afd342b20df99100\",\"id\":\"e5675c80eaaf4501b0872eb2375e31a7\"},{\"type\":\"Edge\",\"source_node_id\":\"8c9927f71ad04890afd342b20df99100\",\"target_node_id\":\"6460cac852834b46a4977c093a2b1a67\",\"branch_id\":\"d9bd1000b14c4d14b9fadb6a6ef2f746\",\"id\":\"8f26f9a4757b45299f913e7ca3b948d1\",\"name\":\"d9bd1000b14c4d14b9fadb6a6ef2f746\"},{\"type\":\"Edge\",\"source_node_id\":\"8c9927f71ad04890afd342b20df99100\",\"target_node_id\":\"3c232bba33f34219b4a554c511faa4da\",\"branch_id\":\"4265c0b44d844aa498700dee9769144b\",\"id\":\"d52c9a7bde9841f5a5fe1e96330547a2\",\"name\":\"4265c0b44d844aa498700dee9769144b\"},{\"type\":\"Edge\",\"source_node_id\":\"3c232bba33f34219b4a554c511faa4da\",\"target_node_id\":\"8ad01595341c4a6186e46eb203320658\",\"id\":\"339812eec1c44e0ba4847f30f4f5e5d0\"},{\"type\":\"Edge\",\"source_node_id\":\"ca66aaa54c614102a4a2fd4bad818b9a\",\"target_node_id\":\"9f8dfc6260824d0b863c4275cbd6e2f3\",\"branch_id\":\"cb0e213e6ddd40e2ac98cf5f9c49b666\",\"id\":\"83c8dcc16e06476b8bdb8a991918171e\",\"name\":\"cb0e213e6ddd40e2ac98cf5f9c49b666\"},{\"type\":\"Edge\",\"source_node_id\":\"9f8dfc6260824d0b863c4275cbd6e2f3\",\"target_node_id\":\"c24324650a514984946fed64207f0c24\",\"branch_id\":\"7bb72fa865374209805f2cee3fbac36f\",\"id\":\"8e5c522a68604d14b48d408ab8d30df0\",\"name\":\"7bb72fa865374209805f2cee3fbac36f\"},{\"type\":\"Edge\",\"source_node_id\":\"9f8dfc6260824d0b863c4275cbd6e2f3\",\"target_node_id\":\"6460cac852834b46a4977c093a2b1a67\",\"branch_id\":\"203d2ea9494343939be43c215e4f8397\",\"id\":\"53df8ead704541ba8b2b12abd376513d\",\"name\":\"203d2ea9494343939be43c215e4f8397\"},{\"type\":\"Edge\",\"source_node_id\":\"bab80169de204bdf98d7955c940792c7\",\"target_node_id\":\"0f849053babf4775a81a81355823b3db\",\"id\":\"dfb7472e691f4770a126df453f8bd986\"},{\"type\":\"Edge\",\"source_node_id\":\"0f849053babf4775a81a81355823b3db\",\"target_node_id\":\"f9950611be314fe6b0c891e8e65771d2\",\"id\":\"4771447e2c9e47a497c00226182f0aa2\"},{\"type\":\"Edge\",\"source_node_id\":\"4761ab4e62324e3cb07ce4efc77ffd1f\",\"target_node_id\":\"ca955a1d346d48b09e9ce792dde52cc3\",\"id\":\"fe8bc0685a84441e85e38f22c6d8f929\"},{\"type\":\"Edge\",\"source_node_id\":\"ca955a1d346d48b09e9ce792dde52cc3\",\"target_node_id\":\"bbe4918b84a9426abbec7d055f7f555a\",\"branch_id\":\"d7cab70d895d45bf8e51463a8d22e72b\",\"id\":\"9f77c4762dd94e248ecc9bda5e2cf8d0\",\"name\":\"d7cab70d895d45bf8e51463a8d22e72b\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"surveyInstanceId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"42731da272e043d29de8a18ae4abe8ec\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"surveyQuestions\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"a019f4d9d2034f1e8ce4413ad6814d4c\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"questionIndex\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"-1\"},\"list\":false,\"id\":\"4606ff81e3b1466dba105ac8db0a3ff1\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"questionCount\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"0\"},\"list\":false,\"id\":\"701eeb0ead3946b4a95fc310996f51d5\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"surveyAnswers\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{}\"},\"list\":false,\"id\":\"e0b97ea5de424260a17d367b713e6233\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"choiceTypes\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"choice,scale,numericscale\"},\"list\":false,\"id\":\"5fa5bab12ab3407fa0243a6e4b1e5b55\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"currentQuestionId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"953851ffa4294d04859d006bf28a4986\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"currentQuestionType\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"1d2077df93314785b211efe410798278\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"currentQuestionMetric\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"00d261d656824f6f8f150a2025f4eaae\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"currentQuestionDisplay\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"601f508ef27a49a18330230ddcc12772\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"introduction\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"b56216c2f682436d9e56d9ef36471bcb\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"endNote\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"0c33e298eff44fc88364434b538e805f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"textTypes\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"string,long,percentage\"},\"list\":false,\"id\":\"6545133e2b144832a1ecea359dcc39b9\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"currentQuestionMax\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"dd7230f4e76642c4b1676e04fa2af480\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"currentQuestionMin\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"3f8a633cceb94a7a8c29a2622f003795\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"currentAnswerValidation\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"cf9a19900c7043bd817ff9f5794941ed\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"currentAnswerErrorMsg\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"list\":false,\"id\":\"607bdaced73d4d7fab9239c0d64a4210\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"surveyVerificationMsg\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"e5e2dc8c74a64bf7ba531a2b734bd9cd\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"currentQuestionMandatory\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"true\"},\"list\":false,\"id\":\"f4cfc3cbbdca4d46b23a1de57709a8e0\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"_topic_postchat_user_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"1ebd3fa354824ebcb2abd32c7f5a08ee\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"surveyName\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"fbdedb6037d443fc94ac909130d72657\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"LiveAgent_pre_chat_survey_name\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"62b3a6b4779d449faee2e5abee5678a5\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"LiveAgent_post_chat_survey_name\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"b712f462443f422882112475625c1f51\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"LiveAgent_pre_assessment_instance\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"c561d907f23a4ee485d105e3deefe041\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"LiveAgent_post_assessment_instance\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"5f4fab2392e34755a790d59670b35294\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"defaultSurveyName\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"b0a2dbc7899742b19e9f2d904b7bfc3e\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"currentQuestionFieldValidator\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"9c7e90dca34b47489835d0bcdc8e4933\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"currentQuestionReferenceTable\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"a7b460d515ca4a2087c92d2c8bf5fbc9\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"currentQuestionReferenceCondition\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"6ec01bc01b7144ec90530b7f9af69bb2\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"active\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"3f44cb42666b408fbb6f952fe939d920\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"CarouselImage\",\"id\":\"7df928600c0b443a99b74c93a456775a\",\"name\":\"show_image_scale_question\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"show_text_input_question\",\"list\":false,\"id\":\"24bdbf9a7cc4465f9a4f4ab220cdb2c7\",\"formatType\":\"Custom\",\"validationScript\":\"function validate(value) {\\n    // for \\\"skip\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\n        return {\\n            valid: true,\\n        }; \\n\\n    // for string type with validator defined, and question is not skipped\\n    var validatorGr = new GlideRecord(\\\"sys_cs_field_script_validator\\\");\\n    if (!validatorGr.isValid())\\n\\t    return {\\n           valid: false,\\n           error: gs.getMessageLang(\\\"validator table does not exist\\\", vaContext.getRequesterLang())\\n        };\\n\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\n        var scriptBuild = \\\"(\\\" + validatorGr.validator + \\\")('\\\"+ value + \\\"');\\\";\\n        var isValidAnswer = eval(scriptBuild);\\n        return {\\n            valid: isValidAnswer,\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\n        };\\n    } else {\\n        return {\\n            valid: false,\\n            error: gs.getMessageLang(\\\"validator record does not exist\\\", vaContext.getRequesterLang())\\n        };\\n    }\\n}\",\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"id\":\"3bd6649edfb04f1d870a98c96130be34\",\"name\":\"show_boolean_question\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"43d0530ce6724cde95932f286155da8f\",\"name\":\"show_choice_question\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"},{\"type\":\"Image\",\"id\":\"bba30ac7475c47cc93da35130951478b\",\"name\":\"show_attachment_question\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Date/Time\",\"mode\":\"date\",\"id\":\"f7bd8a67b7874023816be1a2eccd99da\",\"name\":\"show_date_question\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Date/Time\",\"mode\":\"date_time\",\"id\":\"d5c40882740949d285112e17f40f7b2c\",\"name\":\"show_datetime_question\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"surveyid\",\"list\":false,\"id\":\"1132a62678c24bbda688337615fd51bb\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"id\":\"5fdb137d926849b9a9e41edf8bb67509\",\"name\":\"verify_response\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"confirmationneeded\",\"list\":false,\"id\":\"75bc445130284002947077d668cac779\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"savequestionstocontext\",\"list\":false,\"id\":\"ba2a161b94a3468a86603955cca630a1\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"217beaae2c9b4289859d6b32fc9877e6\",\"name\":\"show_reference_question\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"surveyid\",\"label\":\"surveyId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"1132a62678c24bbda688337615fd51bb\",\"type\":\"String\",\"hint\":\"\"},{\"name\":\"confirmationneeded\",\"label\":\"confirmationNeeded\",\"default-value\":\"\\\"false\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"75bc445130284002947077d668cac779\",\"type\":\"String\",\"hint\":\"\"},{\"name\":\"savequestionstocontext\",\"label\":\"saveQuestionsToContext\",\"default-value\":\"\\\"false\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"ba2a161b94a3468a86603955cca630a1\",\"type\":\"String\",\"hint\":\"\"}],\"return-values-mapping\":[]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"11d818213b77330074bc456993efc4c2\",\"name\":\"Survey\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"modify_confirmation_enabled\":false,\"library\":true,\"csTopicId\":\"26baac293b77330074bc456993efc4dd\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Survey","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"11d818213b77330074bc456993efc4c2","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/26baac293b77330074bc456993efc4dd","value":"26baac293b77330074bc456993efc4dd"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"1","sys_updated_on":"2022-09-01 11:41:43","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"7cf1c2509d9742ca8f1ce97e86fc7685\": {\n          \"id\": \"7cf1c2509d9742ca8f1ce97e86fc7685\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"e8ec88a807cf45b8896aa485e6c227f2\": {\n          \"id\": \"e8ec88a807cf45b8896aa485e6c227f2\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"a6215c31fa1949f8a572c2abec970c5c\": {\n          \"id\": \"a6215c31fa1949f8a572c2abec970c5c\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"User Id\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Enter your user id\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"ddffdc75f27c42d8b3ba560f6b6f8d27\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"702749d9495d4c8a8f8387c2999b22c8\": {\n          \"id\": \"702749d9495d4c8a8f8387c2999b22c8\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"OfficePhone\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Enter your office phone number\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"582de663d75342fe91a426d91543c99e\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"b38f237751234de5bb63f9e2f443a471\": {\n          \"id\": \"b38f237751234de5bb63f9e2f443a471\",\n          \"name\": \"Script Node\",\n          \"script\": \"(function execute() {\\n    var gr = new GlideRecord(\\\"sys_user\\\");\\n    gr.addQuery(\\\"user_name\\\", vaInputs.user_id);\\n    gr.addQuery(\\\"phone\\\", vaInputs.officephone);\\n    gr.query();\\n    if(gr.next()) {\\n        vaVars.global_linkaccount_verification_userid = gr.getValue(\\\"sys_id\\\");\\n    } else {\\n        vaVars.global_linkaccount_verification_userid = \\\"\\\";\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"ea5862cb6a184840b5f30c3d8080e028\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7cf1c2509d9742ca8f1ce97e86fc7685\",\n          \"target\": \"a6215c31fa1949f8a572c2abec970c5c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9b211a8e579146c38a7d5064b1483d40\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a6215c31fa1949f8a572c2abec970c5c\",\n          \"target\": \"702749d9495d4c8a8f8387c2999b22c8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9111f1d20220415bb73d2e69d6158948\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"702749d9495d4c8a8f8387c2999b22c8\",\n          \"target\": \"b38f237751234de5bb63f9e2f443a471\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8686ee99081341dc91e705fcf5345047\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b38f237751234de5bb63f9e2f443a471\",\n          \"target\": \"e8ec88a807cf45b8896aa485e6c227f2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"ddffdc75f27c42d8b3ba560f6b6f8d27\": {\n      \"id\": \"ddffdc75f27c42d8b3ba560f6b6f8d27\",\n      \"name\": \"user_id\",\n      \"label\": \"User Id\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY2MjAzMTg3MjU1MyBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"a6215c31fa1949f8a572c2abec970c5c\",\n      \"isHidden\": false\n    },\n    \"582de663d75342fe91a426d91543c99e\": {\n      \"id\": \"582de663d75342fe91a426d91543c99e\",\n      \"name\": \"officephone\",\n      \"label\": \"OfficePhone\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY2MjAzMTg5MDQyMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"702749d9495d4c8a8f8387c2999b22c8\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"a9eeb52feb2951102b57e530695228c9","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_a9eeb52feb2951102b57e530695228c9","sys_updated_by":"admin","sys_created_on":"2022-09-01 11:41:34","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"861f262710cd484a9423c6378d53fdf0\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"861f262710cd484a9423c6378d53fdf0\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"861f262710cd484a9423c6378d53fdf0\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"7cf1c2509d9742ca8f1ce97e86fc7685\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"e8ec88a807cf45b8896aa485e6c227f2\",\"name\":\"End\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"ddffdc75f27c42d8b3ba560f6b6f8d27\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Enter your user id\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"a6215c31fa1949f8a572c2abec970c5c\",\"name\":\"User Id\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"582de663d75342fe91a426d91543c99e\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Enter your office phone number\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"702749d9495d4c8a8f8387c2999b22c8\",\"name\":\"OfficePhone\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var gr = new GlideRecord(\\\"sys_user\\\");\\n    gr.addQuery(\\\"user_name\\\", vaInputs.user_id);\\n    gr.addQuery(\\\"phone\\\", vaInputs.officephone);\\n    gr.query();\\n    if(gr.next()) {\\n        vaVars.global_linkaccount_verification_userid = gr.getValue(\\\"sys_id\\\");\\n    } else {\\n        vaVars.global_linkaccount_verification_userid = \\\"\\\";\\n    }\\n})()\\n\",\"id\":\"b38f237751234de5bb63f9e2f443a471\",\"name\":\"Script Node\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"7cf1c2509d9742ca8f1ce97e86fc7685\",\"target_node_id\":\"a6215c31fa1949f8a572c2abec970c5c\",\"id\":\"ea5862cb6a184840b5f30c3d8080e028\"},{\"type\":\"Edge\",\"source_node_id\":\"a6215c31fa1949f8a572c2abec970c5c\",\"target_node_id\":\"702749d9495d4c8a8f8387c2999b22c8\",\"id\":\"9b211a8e579146c38a7d5064b1483d40\"},{\"type\":\"Edge\",\"source_node_id\":\"702749d9495d4c8a8f8387c2999b22c8\",\"target_node_id\":\"b38f237751234de5bb63f9e2f443a471\",\"id\":\"9111f1d20220415bb73d2e69d6158948\"},{\"type\":\"Edge\",\"source_node_id\":\"b38f237751234de5bb63f9e2f443a471\",\"target_node_id\":\"e8ec88a807cf45b8896aa485e6c227f2\",\"id\":\"8686ee99081341dc91e705fcf5345047\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"user_id\",\"list\":false,\"id\":\"ddffdc75f27c42d8b3ba560f6b6f8d27\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"officephone\",\"list\":false,\"id\":\"582de663d75342fe91a426d91543c99e\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"c76c35abeb2951102b57e5306952288d\",\"name\":\"Account Link User Validation(Template)\",\"key_phrases\":[\"Account Link User Validation(Template)\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":false,\"csTopicId\":\"e5eeb5abeb2951102b57e5306952282c\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Account Link User Validation(Template)","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"c76c35abeb2951102b57e5306952288d","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/e5eeb5abeb2951102b57e5306952282c","value":"e5eeb5abeb2951102b57e5306952282c"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"31","sys_updated_on":"2024-11-06 18:45:32","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.73\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"50e01c07df09448a8c8f3658dc0b6e05\": {\n          \"id\": \"50e01c07df09448a8c8f3658dc0b6e05\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"0d61e2e97d3d46ff901d0293ad33cfcd\",\n              \"name\": \"Search Term\",\n              \"referenced\": true,\n              \"required\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"Reference\",\n              \"value\": \"\",\n              \"id\": \"44b6a5502ea948da89d8a01bb7bfa2ba\",\n              \"name\": \"Search Application Configuration\",\n              \"table\": \"sys_search_context_config\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"hint\": \"(Optional) Use a custom Search Application Configuration\",\n              \"query\": \"\"\n            }\n          ],\n          \"variableIds\": [\n            \"0d61e2e97d3d46ff901d0293ad33cfcd\",\n            \"44b6a5502ea948da89d8a01bb7bfa2ba\"\n          ]\n        },\n        \"4ccbe1bad0854bcebee83db3aef492fe\": {\n          \"id\": \"4ccbe1bad0854bcebee83db3aef492fe\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"Genius_Results\",\n              \"value\": \"(function execute() {\\n    var geniusResultsJSON = JSON.parse(vaVars.geniusResults);\\n    return global.VAAISearchHelperUtah.resizeResultIfRequired(geniusResultsJSON, 'Search metadata', vaVars);\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=d74748a253513010af71ddeeff7b128e%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b,8c2348c0eb1f2110d8652add0852288c\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"Search_Results\",\n              \"value\": \"(function execute() {\\n    var searchResultsJSON = JSON.parse(vaVars.searchResults);\\n    return global.VAAISearchHelperUtah.resizeResultIfRequired(searchResultsJSON, 'Search result', vaVars);\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=d74748a253513010af71ddeeff7b128e%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b,8c2348c0eb1f2110d8652add0852288c\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"Search_Metadata\",\n              \"value\": \"(function execute() {\\n    var searchMetadataJSON = JSON.parse(vaVars.searchMetadata);\\n    return global.VAAISearchHelperUtah.resizeResultIfRequired(searchMetadataJSON, 'Search metadata', vaVars);\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=d74748a253513010af71ddeeff7b128e%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b,8c2348c0eb1f2110d8652add0852288c\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"Errors\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.errors}}\",\n                        \"displayValue\": \"Script Variableserrors\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=d74748a253513010af71ddeeff7b128e%5Ecalling_cs_topic_idIN426bfd8b53f13010af71ddeeff7b121b,8c2348c0eb1f2110d8652add0852288c\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            }\n          ]\n        },\n        \"298ddf999e3d4fb68803b2f7818e0aee\": {\n          \"id\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n          \"name\": \"Run AI Search\",\n          \"invocationType\": \"action\",\n          \"stepType\": \"FlowAction\",\n          \"actionSpoke\": \"global\",\n          \"actionSpokeAction\": \"2eaf23715b621010a76b04d13d81c7b5\",\n          \"actionWaitType\": \"sync\",\n          \"actionRunAs\": \"session_user\",\n          \"actionSecureField\": false,\n          \"actionSelectSecureField\": \"\",\n          \"actionPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionConfirmPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionNonSecureChannelMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionInputs\": {\n            \"input-search_term\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.search_term}}\",\n                        \"displayValue\": \"Input VariablesSearch Term\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\"\n            },\n            \"input-context_profile_id\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getContextProfileId();\\n})()\",\n              \"mode\": \"script\"\n            },\n            \"input-search_context_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.search_application_configuration}}\",\n                        \"displayValue\": \"Input VariablesSearch Application Configuration\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\"\n            },\n            \"input-logging_context\": {\n              \"value\": \"(function execute() {\\n    return vaVars.loggingContext;\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-locale\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getRequesterLocale();\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-start_time\": {\n              \"value\": \"(function execute() {\\n    return vaVars.startTime;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          },\n          \"actionOutputs\": {\n            \"output-search_result\": [\n              {\n                \"id\": \"ccc36200f97a4b4d9b4289d0f08ee80d\",\n                \"mapping\": \"Search Result\",\n                \"value\": \"Search Result\",\n                \"disabled\": false,\n                \"type\": \"json\",\n                \"variable\": \"Search Result\",\n                \"variableName\": \"search_result\"\n              }\n            ],\n            \"output-__action_status__\": [\n              {\n                \"id\": \"66d492e860f441879fb5e4dfc3dd89b4\",\n                \"mapping\": \"Action Status\",\n                \"value\": \"Action Status\",\n                \"disabled\": false,\n                \"type\": \"object\",\n                \"variable\": \"Action Status\",\n                \"variableName\": \"action_status\"\n              }\n            ],\n            \"output-__dont_treat_as_error__\": [\n              {\n                \"id\": \"3848418504444de7a546d0ed1cb9df9c\",\n                \"mapping\": \"Don't Treat as Error\",\n                \"value\": \"Don't Treat as Error\",\n                \"disabled\": false,\n                \"type\": \"boolean\",\n                \"variable\": \"Don't Treat As Error\",\n                \"variableName\": \"don_t_treat_as_error\"\n              }\n            ],\n            \"output-end_time\": [\n              {\n                \"id\": \"7faeb1107c4b4312b4aee8544fa8b4ee\",\n                \"mapping\": \"End time\",\n                \"value\": \"End time\",\n                \"disabled\": false,\n                \"type\": \"string\",\n                \"variable\": \"End Time\",\n                \"variableName\": \"end_time\"\n              }\n            ]\n          },\n          \"actionDefinition\": {\n            \"id\": \"2eaf23715b621010a76b04d13d81c7b5\",\n            \"latest_snapshot_id\": \"2eaf23715b621010a76b04d13d81c7b5\",\n            \"parent_id\": \"c93fa3795b221010a76b04d13d81c767\",\n            \"type\": \"action\",\n            \"name\": \"atlas_search\",\n            \"label\": \"AI Search\",\n            \"scope_id\": \"global\",\n            \"description\": \"Perform asynchronous AI Search\",\n            \"category\": \"\",\n            \"parameters_have_loaded\": true,\n            \"input_parameters\": [\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_term\",\n                \"label\": \"search_term\",\n                \"type\": \"string\",\n                \"order\": 1,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"context_profile_id\",\n                \"label\": \"context_profile_id\",\n                \"type\": \"string\",\n                \"order\": 2,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_context_id\",\n                \"label\": \"search_context_id\",\n                \"type\": \"string\",\n                \"order\": 3,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"logging_context\",\n                \"label\": \"logging_context\",\n                \"type\": \"string\",\n                \"order\": 4,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"locale\",\n                \"label\": \"locale\",\n                \"type\": \"string\",\n                \"order\": 5,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"start_time\",\n                \"label\": \"start_time\",\n                \"type\": \"string\",\n                \"order\": 6,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"additional_context\",\n                \"label\": \"additional_context\",\n                \"type\": \"string\",\n                \"order\": 7,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"gr_config_filter\",\n                \"label\": \"gr_config_filter\",\n                \"type\": \"string\",\n                \"order\": 8,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_result_type\",\n                \"label\": \"search_result_type\",\n                \"type\": \"string\",\n                \"order\": 9,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              }\n            ],\n            \"output_parameters\": [\n              {\n                \"name\": \"search_result\",\n                \"label\": \"Search Result\",\n                \"type\": \"json\",\n                \"order\": 1,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"name\": \"__action_status__\",\n                \"label\": \"Action Status\",\n                \"type\": \"object\",\n                \"order\": 2,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"name\": \"__dont_treat_as_error__\",\n                \"label\": \"Don't Treat as Error\",\n                \"type\": \"boolean\",\n                \"order\": 3,\n                \"required\": false,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              },\n              {\n                \"name\": \"end_time\",\n                \"label\": \"End time\",\n                \"type\": \"string\",\n                \"order\": 4,\n                \"required\": true,\n                \"value\": [],\n                \"description\": \"\",\n                \"is_list_data_entry\": false,\n                \"dependent_on_field\": \"\"\n              }\n            ]\n          },\n          \"subflowSecureField\": false,\n          \"subflowSelectSecureField\": \"\",\n          \"subflowPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowConfirmPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowNonSecureChannelMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"This action is not supported on this channel.\"\n          },\n          \"variableIds\": [\n            \"ccc36200f97a4b4d9b4289d0f08ee80d\",\n            \"66d492e860f441879fb5e4dfc3dd89b4\",\n            \"3848418504444de7a546d0ed1cb9df9c\",\n            \"7faeb1107c4b4312b4aee8544fa8b4ee\"\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"permissionsNote\": \"By default, the Action executes based on the permissions of the user who initiated the conversation. For elevated privileges, you can set to System User.\"\n        },\n        \"c420857cfd1c4ed2bacf8e07bb4ad6f5\": {\n          \"id\": \"c420857cfd1c4ed2bacf8e07bb4ad6f5\",\n          \"name\": \"Process Results\",\n          \"script\": \"(function execute() {\\n    var now = new GlideDateTime().getNumericValue();\\n    var elapsedTime = now - vaVars.startTime;\\n    var returnTime = now - vaInputs.end_time;\\n    var logger = global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext);\\n    logger.debug('AI Search FDIH action time: {0}ms', elapsedTime);\\n    logger.debug('AI Search FDIH returned to VA in {0}ms', returnTime);\\n\\n    var results = JSON.stringify(global.VAAISearchHelperTokyo.filterResultsForLoggedInUser(\\n        vaInputs.search_result.toString(), vaSystem, vaVars.loggingContext));\\n\\n    var processedResults = global.VAAISearchHelperUtah.processResults(results, vaSystem, vaInputs, vaVars);\\n    vaVars.searchMetadata = processedResults.searchMetadata;\\n    vaVars.geniusResults = processedResults.geniusSearchResults;\\n    vaVars.searchResults = processedResults.searchResults;\\n    vaVars.errors = processedResults.errors;\\n    if (!gs.nil(vaVars.searchMetadata) && vaVars.searchMetadata != \\\"{}\\\")\\n        logger.debug('AI Search performed on server in {0}ms',\\n            JSON.parse(vaVars.searchMetadata).glide_signals.searchResultMetadata.responseTimeInMs);\\n\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b25c83ae549d4d3c98b39ea2a2f6fe9d\": {\n          \"id\": \"b25c83ae549d4d3c98b39ea2a2f6fe9d\",\n          \"name\": \"Collect Search Info\",\n          \"script\": \"(function execute() {\\n    vaVars.loggingContext = JSON.stringify(global.VAAISearchHelperTokyo.getLoggingContext(vaSystem));\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).debug('Starting \\\"Run AI Search\\\" topic block');\\n    vaVars.startTime = new GlideDateTime().getNumericValue();\\n    vaVars.isSearchAvailable = global.VAAISearchHelperTokyo.isSearchEnabled(vaVars.loggingContext);\\n\\n    // This script has to run before any other operations to collect correct info.\\n    // If the node runs under the platform thread, the info can be incorrect.\\n    vaVars.session_id = gs.getSessionID();\\n    vaVars.user_id = vaInputs.user.getValue();\\n    vaVars.is_logged_in = gs.getSession().isLoggedIn();\\n    vaVars.language = gs.getSession().getLanguage();\\n    //AI Search start timestamp\\n    vaVars.time = global.VAClickMetrics.getCurrentTime();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"\"\n          }\n        },\n        \"839d829b30a046b38012a5f08067acb5\": {\n          \"id\": \"839d829b30a046b38012a5f08067acb5\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Search Enabled?\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"88c212a0b051483ea589949c4d58ed90\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c420857cfd1c4ed2bacf8e07bb4ad6f5\",\n          \"target\": \"4ccbe1bad0854bcebee83db3aef492fe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"65a61f915df74f67beccab15bd79b67c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n          \"target\": \"c420857cfd1c4ed2bacf8e07bb4ad6f5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"de28ee7fd2dd4823a9d7afeba3a90bd5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"50e01c07df09448a8c8f3658dc0b6e05\",\n          \"target\": \"b25c83ae549d4d3c98b39ea2a2f6fe9d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cb06001c5dec413db5444b44a0201823\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b25c83ae549d4d3c98b39ea2a2f6fe9d\",\n          \"target\": \"839d829b30a046b38012a5f08067acb5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1c78de6a593449ff9c14159de164e9b5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"839d829b30a046b38012a5f08067acb5\",\n          \"target\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.isSearchAvailable;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"b6449ce73c4a400e8b4ff6b0ab968cc1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"839d829b30a046b38012a5f08067acb5\",\n          \"target\": \"4ccbe1bad0854bcebee83db3aef492fe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.isSearchAvailable;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"0d61e2e97d3d46ff901d0293ad33cfcd\": {\n      \"id\": \"0d61e2e97d3d46ff901d0293ad33cfcd\",\n      \"name\": \"search_term\",\n      \"label\": \"Search Term\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"50e01c07df09448a8c8f3658dc0b6e05\",\n      \"isHidden\": false\n    },\n    \"44b6a5502ea948da89d8a01bb7bfa2ba\": {\n      \"id\": \"44b6a5502ea948da89d8a01bb7bfa2ba\",\n      \"name\": \"search_application_configuration\",\n      \"label\": \"Search Application Configuration\",\n      \"defaultValue\": \"\",\n      \"varType\": \"reference\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"table\": \"sys_search_context_config\",\n      \"nodeId\": \"50e01c07df09448a8c8f3658dc0b6e05\",\n      \"isHidden\": false\n    },\n    \"5f82ed84dc1346fa92c7f0457f0fceec\": {\n      \"id\": \"5f82ed84dc1346fa92c7f0457f0fceec\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"searchMetadata\",\n      \"label\": \"searchMetadata\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fc845a894f934fbc899121a0e9b47c3d\": {\n      \"id\": \"fc845a894f934fbc899121a0e9b47c3d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"geniusResults\",\n      \"label\": \"geniusResults\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3f424190be82446c87ab56617880b907\": {\n      \"id\": \"3f424190be82446c87ab56617880b907\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"searchResults\",\n      \"label\": \"searchResults\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"2f95af87ceb64a8fb084590fe2ab2df0\": {\n      \"id\": \"2f95af87ceb64a8fb084590fe2ab2df0\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"errors\",\n      \"label\": \"errors\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"ccc36200f97a4b4d9b4289d0f08ee80d\": {\n      \"id\": \"ccc36200f97a4b4d9b4289d0f08ee80d\",\n      \"name\": \"search_result\",\n      \"label\": \"Search Result\",\n      \"defaultValue\": \"Search Result\",\n      \"varType\": \"json\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Search Result\",\n      \"variableName\": \"search_result\",\n      \"nodeId\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n      \"isHidden\": false\n    },\n    \"66d492e860f441879fb5e4dfc3dd89b4\": {\n      \"id\": \"66d492e860f441879fb5e4dfc3dd89b4\",\n      \"name\": \"action_status\",\n      \"label\": \"Action Status\",\n      \"defaultValue\": \"Action Status\",\n      \"varType\": \"object\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Action Status\",\n      \"variableName\": \"action_status\",\n      \"nodeId\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n      \"isHidden\": false\n    },\n    \"3848418504444de7a546d0ed1cb9df9c\": {\n      \"id\": \"3848418504444de7a546d0ed1cb9df9c\",\n      \"name\": \"don_t_treat_as_error\",\n      \"label\": \"Don't Treat As Error\",\n      \"defaultValue\": \"Don't Treat as Error\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Don't Treat As Error\",\n      \"variableName\": \"don_t_treat_as_error\",\n      \"nodeId\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n      \"isHidden\": false\n    },\n    \"7faeb1107c4b4312b4aee8544fa8b4ee\": {\n      \"id\": \"7faeb1107c4b4312b4aee8544fa8b4ee\",\n      \"name\": \"end_time\",\n      \"label\": \"End Time\",\n      \"defaultValue\": \"End time\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"End Time\",\n      \"variableName\": \"end_time\",\n      \"nodeId\": \"298ddf999e3d4fb68803b2f7818e0aee\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"b4a5254debdb0110506f7558b552283a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_design_topic_b4a5254debdb0110506f7558b552283a","sys_updated_by":"admin","sys_created_on":"2022-05-04 19:05:07","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"5b9c606cd54a4a8e9287b7b6ed57e82b\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"5b9c606cd54a4a8e9287b7b6ed57e82b\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"5b9c606cd54a4a8e9287b7b6ed57e82b\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"50e01c07df09448a8c8f3658dc0b6e05\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"4ccbe1bad0854bcebee83db3aef492fe\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"FDIHInvocation\",\"name\":\"Run AI Search\",\"kind\":\"action\",\"mode\":\"sync\",\"inputs\":[{\"supported_input_modes\":[],\"name\":\"search_term\",\"type\":\"string\",\"order\":0,\"required\":true,\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.search_term}}\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"context_profile_id\",\"type\":\"script\",\"order\":0,\"required\":true,\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaSystem.getContextProfileId();\\n})()\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"search_context_id\",\"type\":\"string\",\"order\":0,\"required\":false,\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.search_application_configuration}}\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"logging_context\",\"type\":\"script\",\"order\":0,\"required\":false,\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.loggingContext;\\n})()\\n\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"locale\",\"type\":\"script\",\"order\":0,\"required\":false,\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaSystem.getRequesterLocale();\\n})()\\n\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"start_time\",\"type\":\"script\",\"order\":0,\"required\":true,\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.startTime;\\n})()\\n\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"additional_context\",\"order\":0,\"required\":false,\"value\":[],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"gr_config_filter\",\"order\":0,\"required\":false,\"value\":[],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"search_result_type\",\"order\":0,\"required\":false,\"value\":[],\"is_list_data_entry\":false}],\"outputs\":[{\"name\":\"search_result\",\"order\":0,\"value\":[],\"is_list_data_entry\":false,\"topicVariableName\":\"search_result\"},{\"name\":\"__action_status__\",\"order\":0,\"value\":[],\"is_list_data_entry\":false,\"topicVariableName\":\"action_status\"},{\"name\":\"__dont_treat_as_error__\",\"order\":0,\"value\":[],\"is_list_data_entry\":false,\"topicVariableName\":\"don_t_treat_as_error\"},{\"name\":\"end_time\",\"order\":0,\"value\":[],\"is_list_data_entry\":false,\"topicVariableName\":\"end_time\"}],\"metadata\":{\"runAs\":\"session_user\"},\"id\":\"298ddf999e3d4fb68803b2f7818e0aee\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"sys_id\":\"2eaf23715b621010a76b04d13d81c7b5\",\"scope\":\"global\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var now = new GlideDateTime().getNumericValue();\\n    var elapsedTime = now - vaVars.startTime;\\n    var returnTime = now - vaInputs.end_time;\\n    var logger = global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext);\\n    logger.debug('AI Search FDIH action time: {0}ms', elapsedTime);\\n    logger.debug('AI Search FDIH returned to VA in {0}ms', returnTime);\\n\\n    var results = JSON.stringify(global.VAAISearchHelperTokyo.filterResultsForLoggedInUser(\\n        vaInputs.search_result.toString(), vaSystem, vaVars.loggingContext));\\n\\n    var processedResults = global.VAAISearchHelperUtah.processResults(results, vaSystem, vaInputs, vaVars);\\n    vaVars.searchMetadata = processedResults.searchMetadata;\\n    vaVars.geniusResults = processedResults.geniusSearchResults;\\n    vaVars.searchResults = processedResults.searchResults;\\n    vaVars.errors = processedResults.errors;\\n    if (!gs.nil(vaVars.searchMetadata) && vaVars.searchMetadata != \\\"{}\\\")\\n        logger.debug('AI Search performed on server in {0}ms',\\n            JSON.parse(vaVars.searchMetadata).glide_signals.searchResultMetadata.responseTimeInMs);\\n\\n})()\",\"id\":\"c420857cfd1c4ed2bacf8e07bb4ad6f5\",\"name\":\"Process Results\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.loggingContext = JSON.stringify(global.VAAISearchHelperTokyo.getLoggingContext(vaSystem));\\n    global.VAAISearchHelperTokyo.getLogger(vaVars.loggingContext).debug('Starting \\\"Run AI Search\\\" topic block');\\n    vaVars.startTime = new GlideDateTime().getNumericValue();\\n    vaVars.isSearchAvailable = global.VAAISearchHelperTokyo.isSearchEnabled(vaVars.loggingContext);\\n\\n    // This script has to run before any other operations to collect correct info.\\n    // If the node runs under the platform thread, the info can be incorrect.\\n    vaVars.session_id = gs.getSessionID();\\n    vaVars.user_id = vaInputs.user.getValue();\\n    vaVars.is_logged_in = gs.getSession().isLoggedIn();\\n    vaVars.language = gs.getSession().getLanguage();\\n    //AI Search start timestamp\\n    vaVars.time = global.VAClickMetrics.getCurrentTime();\\n})()\\n\",\"id\":\"b25c83ae549d4d3c98b39ea2a2f6fe9d\",\"name\":\"Collect Search Info\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Search Enabled?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.isSearchAvailable;\\n})()\\n\"},\"id\":\"e0a2854015324cdd800d94c1e85efd36\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.isSearchAvailable;\\n})()\\n\"},\"id\":\"0d5df2808a63452a86f894bb0f1909ba\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"839d829b30a046b38012a5f08067acb5\",\"goal_id\":\"primary\",\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"c420857cfd1c4ed2bacf8e07bb4ad6f5\",\"target_node_id\":\"4ccbe1bad0854bcebee83db3aef492fe\",\"id\":\"88c212a0b051483ea589949c4d58ed90\"},{\"type\":\"Edge\",\"source_node_id\":\"298ddf999e3d4fb68803b2f7818e0aee\",\"target_node_id\":\"c420857cfd1c4ed2bacf8e07bb4ad6f5\",\"id\":\"65a61f915df74f67beccab15bd79b67c\"},{\"type\":\"Edge\",\"source_node_id\":\"50e01c07df09448a8c8f3658dc0b6e05\",\"target_node_id\":\"b25c83ae549d4d3c98b39ea2a2f6fe9d\",\"id\":\"de28ee7fd2dd4823a9d7afeba3a90bd5\"},{\"type\":\"Edge\",\"source_node_id\":\"b25c83ae549d4d3c98b39ea2a2f6fe9d\",\"target_node_id\":\"839d829b30a046b38012a5f08067acb5\",\"id\":\"cb06001c5dec413db5444b44a0201823\"},{\"type\":\"Edge\",\"source_node_id\":\"839d829b30a046b38012a5f08067acb5\",\"target_node_id\":\"298ddf999e3d4fb68803b2f7818e0aee\",\"branch_id\":\"e0a2854015324cdd800d94c1e85efd36\",\"id\":\"1c78de6a593449ff9c14159de164e9b5\",\"name\":\"e0a2854015324cdd800d94c1e85efd36\"},{\"type\":\"Edge\",\"source_node_id\":\"839d829b30a046b38012a5f08067acb5\",\"target_node_id\":\"4ccbe1bad0854bcebee83db3aef492fe\",\"branch_id\":\"0d5df2808a63452a86f894bb0f1909ba\",\"id\":\"b6449ce73c4a400e8b4ff6b0ab968cc1\",\"name\":\"0d5df2808a63452a86f894bb0f1909ba\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"searchMetadata\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"5f82ed84dc1346fa92c7f0457f0fceec\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"geniusResults\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"fc845a894f934fbc899121a0e9b47c3d\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"searchResults\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"3f424190be82446c87ab56617880b907\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"errors\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"2f95af87ceb64a8fb084590fe2ab2df0\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"auto_select\":false,\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"search_term\",\"list\":false,\"id\":\"0d61e2e97d3d46ff901d0293ad33cfcd\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"Reference\",\"table\":\"sys_search_context_config\",\"auto_select\":false,\"id\":\"44b6a5502ea948da89d8a01bb7bfa2ba\",\"name\":\"search_application_configuration\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"search_result\",\"list\":false,\"id\":\"ccc36200f97a4b4d9b4289d0f08ee80d\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"action_status\",\"list\":false,\"id\":\"66d492e860f441879fb5e4dfc3dd89b4\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"True/False\",\"id\":\"3848418504444de7a546d0ed1cb9df9c\",\"name\":\"don_t_treat_as_error\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"end_time\",\"list\":false,\"id\":\"7faeb1107c4b4312b4aee8544fa8b4ee\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"search_term\",\"label\":\"Search Term\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"0d61e2e97d3d46ff901d0293ad33cfcd\",\"type\":\"String\"},{\"name\":\"search_application_configuration\",\"label\":\"Search Application Configuration\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"Reference\",\"list\":false,\"items\":[],\"use_items\":false,\"table\":\"sys_search_context_config\",\"query\":\"\"},\"id\":\"44b6a5502ea948da89d8a01bb7bfa2ba\",\"type\":\"Reference\",\"hint\":\"(Optional) Use a custom Search Application Configuration\"}],\"return-values-mapping\":[{\"name\":\"genius_results\",\"label\":\"Genius_Results\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var geniusResultsJSON = JSON.parse(vaVars.geniusResults);\\n    return global.VAAISearchHelperUtah.resizeResultIfRequired(geniusResultsJSON, 'Search metadata', vaVars);\\n})()\\n\"}},{\"name\":\"search_results\",\"label\":\"Search_Results\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var searchResultsJSON = JSON.parse(vaVars.searchResults);\\n    return global.VAAISearchHelperUtah.resizeResultIfRequired(searchResultsJSON, 'Search result', vaVars);\\n})()\\n\"}},{\"name\":\"search_metadata\",\"label\":\"Search_Metadata\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var searchMetadataJSON = JSON.parse(vaVars.searchMetadata);\\n    return global.VAAISearchHelperUtah.resizeResultIfRequired(searchMetadataJSON, 'Search metadata', vaVars);\\n})()\\n\"}},{\"name\":\"errors\",\"label\":\"Errors\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.errors}}\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"f9e444ee53113010af71ddeeff7b1223\",\"name\":\"Run AI Search\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"description\":\"Perform asynchronous AI Search\",\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"title\":\"Run AI Search\",\"library\":true,\"csTopicId\":\"d74748a253513010af71ddeeff7b128e\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Run AI Search","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"f9e444ee53113010af71ddeeff7b1223","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/d74748a253513010af71ddeeff7b128e","value":"d74748a253513010af71ddeeff7b128e"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"2","sys_updated_on":"2024-10-02 21:00:50","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.68\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"f6c73c5de66f4ee8a67cd992bac57ace\": {\n          \"id\": \"f6c73c5de66f4ee8a67cd992bac57ace\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"name\": \"query\",\n              \"value\": \"\",\n              \"id\": \"d3b4a2dfabae4582a6bde857ca9dddf4\",\n              \"disabled\": true,\n              \"referenced\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            },\n            {\n              \"name\": \"portal\",\n              \"value\": \"\",\n              \"id\": \"f0d3a9136af949e99faf47e6fecc188d\",\n              \"referenced\": false,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": false\n            },\n            {\n              \"name\": \"kb_knowledge_base\",\n              \"value\": \"\",\n              \"id\": \"502f202695044ea883cefa9ceb6de424\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": false\n            }\n          ],\n          \"variableIds\": [\n            \"d3b4a2dfabae4582a6bde857ca9dddf4\",\n            \"f0d3a9136af949e99faf47e6fecc188d\",\n            \"502f202695044ea883cefa9ceb6de424\"\n          ]\n        },\n        \"ab1eb0cf7f2c4b1fb17f116198a2fa8b\": {\n          \"id\": \"ab1eb0cf7f2c4b1fb17f116198a2fa8b\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"Results_Returned\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.results_returned}}\",\n                        \"displayValue\": \"vaVarsresults_returned\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            },\n            {\n              \"key\": \"Results_Helpful\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.results_helpful}}\",\n                        \"displayValue\": \"vaVarsresults_helpful\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": false\n            }\n          ]\n        },\n        \"000df41e27ee439e8622ae78cf59ae8e\": {\n          \"id\": \"000df41e27ee439e8622ae78cf59ae8e\",\n          \"name\": \"FAQ Conversation Builder\",\n          \"script\": \"(function execute() {\\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\\n    var response = contextualSearch.search(\\n        vaVars.search_context_sys_id, vaInputs.query, vaInputs.kb_knowledge_base\\n    );\\n    var success = contextualSearch.processSearchResponse(response);\\n    if (!success) {\\n        return;\\n    }\\n\\n    var relevantSearchResults = contextualSearch.processGeneralResults(response, 6, -2, vaSystem);\\n    vaVars.searchResultCount = relevantSearchResults.length;\\n    vaVars.search_result_json_string = JSON.stringify(relevantSearchResults);\\n    vaVars.index = 0;\\n    return;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"39362b36cffd49a6847adfaed75284eb\": {\n          \"id\": \"39362b36cffd49a6847adfaed75284eb\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Did the search return results?\"\n        },\n        \"e857c2794e864bb88fe9fe6835424228\": {\n          \"id\": \"e857c2794e864bb88fe9fe6835424228\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Did Info Help\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"Did this information help you?\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"24c1f84aa4554693934e136b10052132\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"25c9bf78462c43ac8f222941c32a4f85\": {\n          \"id\": \"25c9bf78462c43ac8f222941c32a4f85\",\n          \"name\": \"Record Outputs\",\n          \"script\": \"(function execute() {\\n    if(vaInputs.did_info_help == 'true') {\\n        vaVars.results_helpful = true;\\n    } else {\\n        vaVars.results_helpful = false;\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"97e6ba4ac4994fa3b6d51d11a44b27f9\": {\n          \"id\": \"97e6ba4ac4994fa3b6d51d11a44b27f9\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Found Information\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"text\": \"I found this information that might help you\"\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"a121a58686e349389bfb2d87c500bbf4\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Choose FAQ\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"I found some information that might help you\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"b8d263516fe442cab62a76e97f88ea85\",\n          \"id\": \"a121a58686e349389bfb2d87c500bbf4\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\\n\\n    for (i = 0; i < searchJsonObj.length; i++) {\\n        options.push({ 'value': i, 'label': searchJsonObj[i].title });\\n    }\\n\\n    options.push({ 'value': '-1', 'label': 'I\\\\'m looking for something else' })\\n\\n    return options;\\n})()\\n\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"No records found.\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\\n\\n    for (i = 0; i < searchJsonObj.length; i++) {\\n        options.push({ 'value': i, 'label': searchJsonObj[i].title });\\n    }\\n\\n    options.push({ 'value': '-1', 'label': 'I\\\\'m looking for something else' })\\n\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"20a65688fa144d31b08edbcc4221900c\": {\n          \"id\": \"20a65688fa144d31b08edbcc4221900c\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"715713859aad4988b21d989932fd5c4d\": {\n          \"id\": \"715713859aad4988b21d989932fd5c4d\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Display FAQ\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n   // relevant properties to get record\\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\\n    var resultNumber = searchJsonObj[vaVars.selected_faq].meta.number;\\n    var faqUtil = new global.VAFaqUtil();\\n    // build the header text\\n    header_text =  faqUtil.buildHeaderText(resultNumber, vaVars.selected_type);\\n    \\n    header_text += '<br><br>';\\n\\n    var linkBuilder = new global.cxs_SearchResultLinkBuilder();\\n    var link = linkBuilder.build(searchJsonObj[vaVars.selected_faq], vaInputs.portal);\\n\\n    header_text += '<a href=\\\"'+link.link+'\\\" target=\\\"_blank\\\" >'+ 'Read full article'+ '</a>';\\n    //header_text += '[Read full article]('+link.link+')'\\n    return header_text;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"b4f61440bc6a4ed285c0b41004176975\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"715713859aad4988b21d989932fd5c4d\",\n          \"target\": \"e857c2794e864bb88fe9fe6835424228\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cfdd788f234f41439c62550133fb69d5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e857c2794e864bb88fe9fe6835424228\",\n          \"target\": \"25c9bf78462c43ac8f222941c32a4f85\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bfced8c9d7844407861578b25adeda19\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"39362b36cffd49a6847adfaed75284eb\",\n          \"target\": \"a121a58686e349389bfb2d87c500bbf4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if(vaVars.searchResultCount > 1) {\\n        vaVars.results_returned = true;\\n        return true;\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"More than one\"\n        },\n        {\n          \"id\": \"6c8ed8984ecf453d99b5cbb33e701466\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"39362b36cffd49a6847adfaed75284eb\",\n          \"target\": \"ab1eb0cf7f2c4b1fb17f116198a2fa8b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (!(vaVars.searchResultCount > 0)) {\\n        vaVars.results_helpful = false;\\n        vaVars.results_returned = false;\\n        return true;\\n    }\\n    return false;\\n\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"8b9293ae660f4e2ab52c3a4019775fa9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f6c73c5de66f4ee8a67cd992bac57ace\",\n          \"target\": \"000df41e27ee439e8622ae78cf59ae8e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f33dceaf22d74448a5a0bf72c97b007b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"000df41e27ee439e8622ae78cf59ae8e\",\n          \"target\": \"39362b36cffd49a6847adfaed75284eb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"72e1ebb1e9b24ab09473e85a9d2ce7c7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"25c9bf78462c43ac8f222941c32a4f85\",\n          \"target\": \"ab1eb0cf7f2c4b1fb17f116198a2fa8b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fa92125b6d164b67ad7396861735142f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"39362b36cffd49a6847adfaed75284eb\",\n          \"target\": \"97e6ba4ac4994fa3b6d51d11a44b27f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if(vaVars.searchResultCount === 1) {\\n        vaVars.results_returned = true;\\n        vaVars.selected_faq = 0;\\n        vaVars.selected_type = 'single';\\n        return true;\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"Found one\"\n        },\n        {\n          \"id\": \"07848213c0474b9e9c8e439aac465b3d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a121a58686e349389bfb2d87c500bbf4\",\n          \"target\": \"20a65688fa144d31b08edbcc4221900c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7fcab0167c41412d83df7cb5525fefaa\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"20a65688fa144d31b08edbcc4221900c\",\n          \"target\": \"ab1eb0cf7f2c4b1fb17f116198a2fa8b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaInputs.choose_faq.getValue() == '-1';\\n})()\\n\"\n          },\n          \"label\": \"Something else\"\n        },\n        {\n          \"id\": \"0cb304cf11eb4faa8b483861fd379591\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"20a65688fa144d31b08edbcc4221900c\",\n          \"target\": \"715713859aad4988b21d989932fd5c4d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaInputs.choose_faq.getValue() != '-1') {\\n        // need parseInt because it was keeping decimals\\n        vaVars.selected_faq = parseInt(vaInputs.choose_faq.getValue());\\n        vaVars.selected_type = 'multi';\\n        return true;\\n    }\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"Selected one\"\n        },\n        {\n          \"id\": \"e4d6570f5f1743589f0d870a9781250b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"97e6ba4ac4994fa3b6d51d11a44b27f9\",\n          \"target\": \"715713859aad4988b21d989932fd5c4d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"d3b4a2dfabae4582a6bde857ca9dddf4\": {\n      \"id\": \"d3b4a2dfabae4582a6bde857ca9dddf4\",\n      \"name\": \"query\",\n      \"label\": \"Query\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"f6c73c5de66f4ee8a67cd992bac57ace\",\n      \"isHidden\": false\n    },\n    \"f0d3a9136af949e99faf47e6fecc188d\": {\n      \"id\": \"f0d3a9136af949e99faf47e6fecc188d\",\n      \"name\": \"portal\",\n      \"label\": \"Portal\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"f6c73c5de66f4ee8a67cd992bac57ace\",\n      \"isHidden\": false\n    },\n    \"502f202695044ea883cefa9ceb6de424\": {\n      \"id\": \"502f202695044ea883cefa9ceb6de424\",\n      \"name\": \"kb_knowledge_base\",\n      \"label\": \"Kb_knowledge_base\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"f6c73c5de66f4ee8a67cd992bac57ace\",\n      \"isHidden\": false\n    },\n    \"015b41a0d2854206a6d16e9e0d1a7847\": {\n      \"id\": \"015b41a0d2854206a6d16e9e0d1a7847\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"search_result_json_string\",\n      \"label\": \"search_result_json_string\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"da1f29f67f014b7ab38be2af098d512f\": {\n      \"id\": \"da1f29f67f014b7ab38be2af098d512f\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"index\",\n      \"label\": \"index\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"cf0ea9b6e582499e8d27fa193e5263aa\": {\n      \"id\": \"cf0ea9b6e582499e8d27fa193e5263aa\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"3\"\n      },\n      \"name\": \"limit\",\n      \"label\": \"limit\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c5d7293c470648058916b524b55e36b8\": {\n      \"id\": \"c5d7293c470648058916b524b55e36b8\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"753c0f743b4290102c67667993efc459\"\n      },\n      \"name\": \"search_context_sys_id\",\n      \"label\": \"search_context_sys_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"286c3dc4e01c41eb8ce96e221054dbb6\": {\n      \"id\": \"286c3dc4e01c41eb8ce96e221054dbb6\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"searchResultCount\",\n      \"label\": \"searchResultCount\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4f43a1dc506f41a0be90761ebc0be688\": {\n      \"id\": \"4f43a1dc506f41a0be90761ebc0be688\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"results_returned\",\n      \"label\": \"results_returned\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4d2ef878c61e4658b0ca3b874ead7cce\": {\n      \"id\": \"4d2ef878c61e4658b0ca3b874ead7cce\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"results_helpful\",\n      \"label\": \"results_helpful\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"dbc9b074f96146b6ba9d234490a75461\": {\n      \"id\": \"dbc9b074f96146b6ba9d234490a75461\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"DEBUG_JSON_RESULT\",\n      \"label\": \"DEBUG_JSON_RESULT\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"24c1f84aa4554693934e136b10052132\": {\n      \"id\": \"24c1f84aa4554693934e136b10052132\",\n      \"name\": \"did_info_help\",\n      \"label\": \"Did Info Help\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"e857c2794e864bb88fe9fe6835424228\",\n      \"isHidden\": false\n    },\n    \"b8d263516fe442cab62a76e97f88ea85\": {\n      \"id\": \"b8d263516fe442cab62a76e97f88ea85\",\n      \"name\": \"choose_faq\",\n      \"label\": \"Choose FAQ\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"a121a58686e349389bfb2d87c500bbf4\",\n      \"isHidden\": false\n    },\n    \"c8fc39ab3cfc42d0ab37505be696ee0d\": {\n      \"id\": \"c8fc39ab3cfc42d0ab37505be696ee0d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"selected_faq\",\n      \"label\": \"selected_faq\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"66f751f675a14311a4fca3326995e602\": {\n      \"id\": \"66f751f675a14311a4fca3326995e602\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return 'none';\\n})()\\n\"\n      },\n      \"name\": \"selected_type\",\n      \"label\": \"selected_type\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"b638c9167361201076a71f8afaf6a717","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_design_topic_b638c9167361201076a71f8afaf6a717","sys_updated_by":"admin","sys_created_on":"2021-01-08 21:56:51","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"e94dce7826e74726b4a3f4d7b4dd40b9\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"e94dce7826e74726b4a3f4d7b4dd40b9\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"e94dce7826e74726b4a3f4d7b4dd40b9\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"f6c73c5de66f4ee8a67cd992bac57ace\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"ab1eb0cf7f2c4b1fb17f116198a2fa8b\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\\n    var response = contextualSearch.search(\\n        vaVars.search_context_sys_id, vaInputs.query, vaInputs.kb_knowledge_base\\n    );\\n    var success = contextualSearch.processSearchResponse(response);\\n    if (!success) {\\n        return;\\n    }\\n\\n    var relevantSearchResults = contextualSearch.processGeneralResults(response, 6, -2, vaSystem);\\n    vaVars.searchResultCount = relevantSearchResults.length;\\n    vaVars.search_result_json_string = JSON.stringify(relevantSearchResults);\\n    vaVars.index = 0;\\n    return;\\n})()\\n\",\"id\":\"000df41e27ee439e8622ae78cf59ae8e\",\"name\":\"FAQ Conversation Builder\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Did the search return results?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"More than one\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if(vaVars.searchResultCount > 1) {\\n        vaVars.results_returned = true;\\n        return true;\\n    }\\n    return false;\\n})()\\n\"},\"id\":\"d3c14d34a05143999560b0cf1724e218\",\"name\":\"More than one\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (!(vaVars.searchResultCount > 0)) {\\n        vaVars.results_helpful = false;\\n        vaVars.results_returned = false;\\n        return true;\\n    }\\n    return false;\\n\\n})()\\n\"},\"id\":\"3cf36e8f724b4de68b676c94b4ae6d90\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Found one\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if(vaVars.searchResultCount === 1) {\\n        vaVars.results_returned = true;\\n        vaVars.selected_faq = 0;\\n        vaVars.selected_type = 'single';\\n        return true;\\n    }\\n    return false;\\n})()\\n\"},\"id\":\"2009a71f4138415f8b01f64cf569a0f6\",\"name\":\"Found one\",\"expert_mode\":false}],\"id\":\"39362b36cffd49a6847adfaed75284eb\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"24c1f84aa4554693934e136b10052132\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Did this information help you?\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"e857c2794e864bb88fe9fe6835424228\",\"name\":\"Did Info Help\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if(vaInputs.did_info_help == 'true') {\\n        vaVars.results_helpful = true;\\n    } else {\\n        vaVars.results_helpful = false;\\n    }\\n})()\\n\",\"id\":\"25c9bf78462c43ac8f222941c32a4f85\",\"name\":\"Record Outputs\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"I found this information that might help you\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"97e6ba4ac4994fa3b6d51d11a44b27f9\",\"name\":\"Found Information\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"a121a58686e349389bfb2d87c500bbf4\",\"name\":\"Choose FAQ\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"b8d263516fe442cab62a76e97f88ea85\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"I found some information that might help you\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\\n\\n    for (i = 0; i < searchJsonObj.length; i++) {\\n        options.push({ 'value': i, 'label': searchJsonObj[i].title });\\n    }\\n\\n    options.push({ 'value': '-1', 'label': 'I\\\\'m looking for something else' })\\n\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No records found.\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\\n\\n    for (i = 0; i < searchJsonObj.length; i++) {\\n        options.push({ 'value': i, 'label': searchJsonObj[i].title });\\n    }\\n\\n    options.push({ 'value': '-1', 'label': 'I\\\\'m looking for something else' })\\n\\n    return options;\\n})()\\n\"},\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Something else\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaInputs.choose_faq.getValue() == '-1';\\n})()\\n\"},\"id\":\"1d741e2bfb48460d994403222f93fedd\",\"name\":\"Something else\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Selected one\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaInputs.choose_faq.getValue() != '-1') {\\n        // need parseInt because it was keeping decimals\\n        vaVars.selected_faq = parseInt(vaInputs.choose_faq.getValue());\\n        vaVars.selected_type = 'multi';\\n        return true;\\n    }\\n    return false;\\n})()\\n\"},\"id\":\"3a3204aa31dd49cb986ab75f3481c397\",\"name\":\"Selected one\",\"expert_mode\":false}],\"id\":\"20a65688fa144d31b08edbcc4221900c\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   // relevant properties to get record\\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\\n    var resultNumber = searchJsonObj[vaVars.selected_faq].meta.number;\\n    var faqUtil = new global.VAFaqUtil();\\n    // build the header text\\n    header_text =  faqUtil.buildHeaderText(resultNumber, vaVars.selected_type);\\n    \\n    header_text += '<br><br>';\\n\\n    var linkBuilder = new global.cxs_SearchResultLinkBuilder();\\n    var link = linkBuilder.build(searchJsonObj[vaVars.selected_faq], vaInputs.portal);\\n\\n    header_text += '<a href=\\\"'+link.link+'\\\" target=\\\"_blank\\\" >'+ 'Read full article'+ '</a>';\\n    //header_text += '[Read full article]('+link.link+')'\\n    return header_text;\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"715713859aad4988b21d989932fd5c4d\",\"name\":\"Display FAQ\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"715713859aad4988b21d989932fd5c4d\",\"target_node_id\":\"e857c2794e864bb88fe9fe6835424228\",\"id\":\"b4f61440bc6a4ed285c0b41004176975\"},{\"type\":\"Edge\",\"source_node_id\":\"e857c2794e864bb88fe9fe6835424228\",\"target_node_id\":\"25c9bf78462c43ac8f222941c32a4f85\",\"id\":\"cfdd788f234f41439c62550133fb69d5\"},{\"type\":\"Edge\",\"source_node_id\":\"39362b36cffd49a6847adfaed75284eb\",\"target_node_id\":\"a121a58686e349389bfb2d87c500bbf4\",\"branch_id\":\"d3c14d34a05143999560b0cf1724e218\",\"id\":\"bfced8c9d7844407861578b25adeda19\",\"name\":\"d3c14d34a05143999560b0cf1724e218\"},{\"type\":\"Edge\",\"source_node_id\":\"39362b36cffd49a6847adfaed75284eb\",\"target_node_id\":\"ab1eb0cf7f2c4b1fb17f116198a2fa8b\",\"branch_id\":\"3cf36e8f724b4de68b676c94b4ae6d90\",\"id\":\"6c8ed8984ecf453d99b5cbb33e701466\",\"name\":\"3cf36e8f724b4de68b676c94b4ae6d90\"},{\"type\":\"Edge\",\"source_node_id\":\"f6c73c5de66f4ee8a67cd992bac57ace\",\"target_node_id\":\"000df41e27ee439e8622ae78cf59ae8e\",\"id\":\"8b9293ae660f4e2ab52c3a4019775fa9\"},{\"type\":\"Edge\",\"source_node_id\":\"000df41e27ee439e8622ae78cf59ae8e\",\"target_node_id\":\"39362b36cffd49a6847adfaed75284eb\",\"id\":\"f33dceaf22d74448a5a0bf72c97b007b\"},{\"type\":\"Edge\",\"source_node_id\":\"25c9bf78462c43ac8f222941c32a4f85\",\"target_node_id\":\"ab1eb0cf7f2c4b1fb17f116198a2fa8b\",\"id\":\"72e1ebb1e9b24ab09473e85a9d2ce7c7\"},{\"type\":\"Edge\",\"source_node_id\":\"39362b36cffd49a6847adfaed75284eb\",\"target_node_id\":\"97e6ba4ac4994fa3b6d51d11a44b27f9\",\"branch_id\":\"2009a71f4138415f8b01f64cf569a0f6\",\"id\":\"fa92125b6d164b67ad7396861735142f\",\"name\":\"2009a71f4138415f8b01f64cf569a0f6\"},{\"type\":\"Edge\",\"source_node_id\":\"a121a58686e349389bfb2d87c500bbf4\",\"target_node_id\":\"20a65688fa144d31b08edbcc4221900c\",\"id\":\"07848213c0474b9e9c8e439aac465b3d\"},{\"type\":\"Edge\",\"source_node_id\":\"20a65688fa144d31b08edbcc4221900c\",\"target_node_id\":\"ab1eb0cf7f2c4b1fb17f116198a2fa8b\",\"branch_id\":\"1d741e2bfb48460d994403222f93fedd\",\"id\":\"7fcab0167c41412d83df7cb5525fefaa\",\"name\":\"1d741e2bfb48460d994403222f93fedd\"},{\"type\":\"Edge\",\"source_node_id\":\"20a65688fa144d31b08edbcc4221900c\",\"target_node_id\":\"715713859aad4988b21d989932fd5c4d\",\"branch_id\":\"3a3204aa31dd49cb986ab75f3481c397\",\"id\":\"0cb304cf11eb4faa8b483861fd379591\",\"name\":\"3a3204aa31dd49cb986ab75f3481c397\"},{\"type\":\"Edge\",\"source_node_id\":\"97e6ba4ac4994fa3b6d51d11a44b27f9\",\"target_node_id\":\"715713859aad4988b21d989932fd5c4d\",\"id\":\"e4d6570f5f1743589f0d870a9781250b\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"search_result_json_string\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"015b41a0d2854206a6d16e9e0d1a7847\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"index\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return '';\\n})()\\n\"},\"list\":false,\"id\":\"da1f29f67f014b7ab38be2af098d512f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"limit\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"3\"},\"list\":false,\"id\":\"cf0ea9b6e582499e8d27fa193e5263aa\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"search_context_sys_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"753c0f743b4290102c67667993efc459\"},\"list\":false,\"id\":\"c5d7293c470648058916b524b55e36b8\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"searchResultCount\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"0\"},\"list\":false,\"id\":\"286c3dc4e01c41eb8ce96e221054dbb6\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"results_returned\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"4f43a1dc506f41a0be90761ebc0be688\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"results_helpful\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"4d2ef878c61e4658b0ca3b874ead7cce\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"DEBUG_JSON_RESULT\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"dbc9b074f96146b6ba9d234490a75461\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"selected_faq\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"c8fc39ab3cfc42d0ab37505be696ee0d\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"selected_type\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return 'none';\\n})()\\n\"},\"list\":false,\"id\":\"66f751f675a14311a4fca3326995e602\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"query\",\"list\":false,\"id\":\"d3b4a2dfabae4582a6bde857ca9dddf4\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"portal\",\"list\":false,\"id\":\"f0d3a9136af949e99faf47e6fecc188d\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"kb_knowledge_base\",\"list\":false,\"id\":\"502f202695044ea883cefa9ceb6de424\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"True/False\",\"id\":\"24c1f84aa4554693934e136b10052132\",\"name\":\"did_info_help\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"b8d263516fe442cab62a76e97f88ea85\",\"name\":\"choose_faq\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"table\":\"\"}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"query\",\"label\":\"query\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"d3b4a2dfabae4582a6bde857ca9dddf4\",\"type\":\"String\",\"hint\":\"\"},{\"name\":\"portal\",\"label\":\"portal\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"f0d3a9136af949e99faf47e6fecc188d\",\"type\":\"String\",\"hint\":\"\"},{\"name\":\"kb_knowledge_base\",\"label\":\"kb_knowledge_base\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"502f202695044ea883cefa9ceb6de424\",\"type\":\"String\",\"hint\":\"\"}],\"return-values-mapping\":[{\"name\":\"results_returned\",\"label\":\"Results_Returned\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.results_returned}}\"}},{\"name\":\"results_helpful\",\"label\":\"Results_Helpful\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.results_helpful}}\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"3596671a3b3110102c67667993efc489\",\"name\":\"FAQ Conversation Builder\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"description\":\"Contextual search to search only knowledge articles that have been made with the FAQ template.\",\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"title\":\"FAQ Conversation Builder\",\"library\":true,\"csTopicId\":\"ec276f1a3b3110102c67667993efc48b\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"FAQ Conversation Builder","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"3596671a3b3110102c67667993efc489","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/ec276f1a3b3110102c67667993efc48b","value":"ec276f1a3b3110102c67667993efc48b"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"111","sys_updated_on":"2024-10-02 22:07:23","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.68\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"222af2f0606f4e1f9dc817965842027b\": {\n          \"id\": \"222af2f0606f4e1f9dc817965842027b\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"c4563133ee3b41cf8a9b276406741797\": {\n          \"id\": \"c4563133ee3b41cf8a9b276406741797\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"08420fdb3b724a13b421d9d83fa04447\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"notifications\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Thanks, select the notification you'd like to view.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"d6843611727b45e9bc62d522d0e9d6f6\",\n          \"id\": \"08420fdb3b724a13b421d9d83fa04447\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var notifications = JSON.parse(vaVars.notifications);\\n    var options = []; \\n    \\n\\n    for (var i = 0 ; i < notifications.length ; i++) {\\n        var regExp = new RegExp('(\\\\\\\\r\\\\\\\\n)+', 'g');\\n        var replacedMessage = '';\\n        if(notifications[i].content.messageHeading) {\\n            var messageHeading = notifications[i].content.messageHeading;\\n            replacedMessage = messageHeading.replace(regExp, ' ');\\n        } else {\\n            var message = notifications[i].content.message;\\n            replacedMessage = message.replace(regExp, ' ');\\n        }\\n        options.push({\\n            'value' : notifications[i].sysId,\\n            'label' : replacedMessage,\\n            'render_style': 'data'\\n        });   \\n    }\\n    return options;\\n})()\\n\",\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"No notifications found.\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var notifications = JSON.parse(vaVars.notifications);\\n    var options = []; \\n    \\n\\n    for (var i = 0 ; i < notifications.length ; i++) {\\n        var regExp = new RegExp('(\\\\\\\\r\\\\\\\\n)+', 'g');\\n        var replacedMessage = '';\\n        if(notifications[i].content.messageHeading) {\\n            var messageHeading = notifications[i].content.messageHeading;\\n            replacedMessage = messageHeading.replace(regExp, ' ');\\n        } else {\\n            var message = notifications[i].content.message;\\n            replacedMessage = message.replace(regExp, ' ');\\n        }\\n        options.push({\\n            'value' : notifications[i].sysId,\\n            'label' : replacedMessage,\\n            'render_style': 'data'\\n        });   \\n    }\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"50ee5663da4e4027a71f4de559b7bc7c\": {\n          \"id\": \"50ee5663da4e4027a71f4de559b7bc7c\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"_notification_controller_topic_block_\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"_notification_controller_topic_block_\",\n          \"reusableTopicId\": \"bb9714a9530210106e61ddeeff7b1201\",\n          \"inputs\": {\n            \"notification_content\": {\n              \"value\": \"(function execute() {\\n    var notificationId = vaInputs.notifications;\\n    var gr = new GlideRecord(\\\"sys_cs_notification\\\");\\n    gr.get(notificationId);\\n    var content = gr.getValue(\\\"content\\\");\\n    gr.setValue(\\\"state\\\", \\\"sent\\\");\\n    gr.setValue(\\\"conversation\\\", vaSystem.getConversationId());\\n    gr.update();\\n\\n    var notifications = JSON.parse(vaVars.notifications);\\n    for (var i = 0 ; i < notifications.length ; i++) {\\n        if(notifications[i].sysId == notificationId) {\\n           content = JSON.stringify(notifications[i].content);\\n           break;\\n        }\\n    }\\n    return content;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            }\n          },\n          \"variableIds\": [],\n          \"outputs\": [],\n          \"outdatedNote\": false,\n          \"useTemplateTopic\": false\n        },\n        \"ce566adc14524d9c9cb34ea811c926f6\": {\n          \"id\": \"ce566adc14524d9c9cb34ea811c926f6\",\n          \"name\": \"fetch notifications\",\n          \"script\": \"(function execute() {\\n    var notifications = vaSystem.getPrevNotifications(true,100);\\n    vaVars.notifications = notifications;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"78c3789a11e04adf9e23c831b067240a\": {\n          \"id\": \"78c3789a11e04adf9e23c831b067240a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"number of notifications\"\n        },\n        \"edd8f382a1da4627afc46a90d53b39c4\": {\n          \"id\": \"edd8f382a1da4627afc46a90d53b39c4\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"_notification_controller_topic_block_\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"_notification_controller_topic_block_\",\n          \"reusableTopicId\": \"bb9714a9530210106e61ddeeff7b1201\",\n          \"inputs\": {\n            \"notification_content\": {\n              \"value\": \"(function execute() {\\n    var notifications = JSON.parse(vaVars.notifications);\\n    var gr = new GlideRecord(\\\"sys_cs_notification\\\");\\n    gr.get(notifications[0].sysId);\\n    gr.setValue(\\\"state\\\",\\\"sent\\\");\\n    gr.setValue(\\\"conversation\\\", vaSystem.getConversationId());\\n    gr.update();\\n    return JSON.stringify(notifications[0].content);\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            }\n          },\n          \"variableIds\": [],\n          \"outputs\": [],\n          \"outdatedNote\": false,\n          \"useTemplateTopic\": false\n        },\n        \"94f165bef0564d7485b1d0aa98f9f6d1\": {\n          \"id\": \"94f165bef0564d7485b1d0aa98f9f6d1\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"No notifications msg\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"You have no actionable notifications to be viewed.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"0994285d7f1d42bb98af00b3bc91d3dd\": {\n          \"id\": \"0994285d7f1d42bb98af00b3bc91d3dd\",\n          \"name\": \"check notification enabled\",\n          \"script\": \"(function execute() {\\n    if (vaSystem.isMWebAMBClient(vaContext.deviceType)) {\\n        var web_client_channel_id = 'ecc77b49533100102f40ddeeff7b125d';\\n        var channelGR = new GlideRecord('sys_notification_channel');\\n        channelGR.get(web_client_channel_id);\\n        vaVars._notifications_enabled = (channelGR.getValue('active') === '1') ? true : false;\\n    } else if(vaSystem.isAMBClient(vaContext.deviceType)) {\\n        var cschannel = new GlideRecord('sys_cs_channel');\\n        cschannel.get('sys_id', 'b023fcb3537321106167ddeeff7b12a8');\\n        vaVars._notifications_enabled = (cschannel.getValue('enable_notification') === '1') ? true : false;\\n    }  else {\\n        var providerAppDetails = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n        var providerDetails = JSON.parse(sn_cs.VASystemObject.getProviderById(providerAppDetails.providerId));\\n        var channelSysId = providerDetails.channelId;\\n        \\n        var cschannel = new GlideRecord('sys_cs_channel');\\n        cschannel.get('sys_id', channelSysId);\\n        vaVars._notifications_enabled = (cschannel.getValue('enable_notification') === '1') ? true : false;\\n    }\\n     vaVars.global_show_notifications_run = true;\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8b34c64a7cbf43349d465131cc9c473a\": {\n          \"id\": \"8b34c64a7cbf43349d465131cc9c473a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"8932d22a23ee4a17b3d5926dcd382dad\": {\n          \"id\": \"8932d22a23ee4a17b3d5926dcd382dad\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"notification disabled msg\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Looks like notifications have been turned off by your admin. Check with them for more info.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"00d0649b0f05425e8beff2d338ceddf4\": {\n          \"id\": \"00d0649b0f05425e8beff2d338ceddf4\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is triggered from system topic\"\n        },\n        \"f2e2678de4284d49bd514cbffd6c12ea\": {\n          \"id\": \"f2e2678de4284d49bd514cbffd6c12ea\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Confirmation\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    var notifications = JSON.parse(vaVars.global_show_notifications_pending_notifications);\\n    return notifications.length == 1 ?\\n         gs.getMessageLang(\\\"You have a pending notification. Would you like to view it now?\\\", vaContext.getRequesterLang()) :\\n         gs.getMessageLang(\\\"You have pending notifications. Would you like to view them now?\\\", vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"25694a4bfc1449d597a89213d0d8ab40\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"b41edcf7370a4e9799afa256ae145e1b\": {\n          \"id\": \"b41edcf7370a4e9799afa256ae145e1b\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"7a9c2eb7eae14f9286932bfe3e415f8d\": {\n          \"id\": \"7a9c2eb7eae14f9286932bfe3e415f8d\",\n          \"name\": \"Set Notifications variable\",\n          \"script\": \"(function execute() {\\n     vaVars.notifications = vaVars.global_show_notifications_pending_notifications;\\n     vaVars.global_show_notifications_pending_notifications = '';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"afbb215be6b24b23bb97aaa769c9d47d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"78c3789a11e04adf9e23c831b067240a\",\n          \"target\": \"08420fdb3b724a13b421d9d83fa04447\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var notifications = JSON.parse(vaVars.notifications);\\n    return notifications.length > 1;\\n})()\\n\"\n          },\n          \"label\": \"More than one notification\"\n        },\n        {\n          \"id\": \"c0a6e292a70343758f1eaa10314afa67\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"08420fdb3b724a13b421d9d83fa04447\",\n          \"target\": \"50ee5663da4e4027a71f4de559b7bc7c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"965df5a8385541f4b9880d0ef3e4ed1b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ce566adc14524d9c9cb34ea811c926f6\",\n          \"target\": \"78c3789a11e04adf9e23c831b067240a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ca64b90101ee425b9b302b09d11a8c06\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"50ee5663da4e4027a71f4de559b7bc7c\",\n          \"target\": \"c4563133ee3b41cf8a9b276406741797\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"df9e807e4eb44db0aafa1c0d84ed2831\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"78c3789a11e04adf9e23c831b067240a\",\n          \"target\": \"edd8f382a1da4627afc46a90d53b39c4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var notifications = JSON.parse(vaVars.notifications);\\n    return notifications.length == 1;\\n})()\\n\"\n          },\n          \"label\": \"one pending notification\"\n        },\n        {\n          \"id\": \"fa75e66ba1b94ac7947928d4052839f4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"edd8f382a1da4627afc46a90d53b39c4\",\n          \"target\": \"c4563133ee3b41cf8a9b276406741797\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"82693db2c337457ab80faceb5e227a67\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"78c3789a11e04adf9e23c831b067240a\",\n          \"target\": \"94f165bef0564d7485b1d0aa98f9f6d1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var notifications = JSON.parse(vaVars.notifications);\\n    return notifications.length == 0;\\n})()\\n\"\n          },\n          \"label\": \"No pending notifications\"\n        },\n        {\n          \"id\": \"f6a9293495fc4c889f01cd74524465fe\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"94f165bef0564d7485b1d0aa98f9f6d1\",\n          \"target\": \"c4563133ee3b41cf8a9b276406741797\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e910cb2b3be648b38e48bc52ff662f27\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"0994285d7f1d42bb98af00b3bc91d3dd\",\n          \"target\": \"8b34c64a7cbf43349d465131cc9c473a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3ba8f7c6019d4b97bc904d24b9045757\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8b34c64a7cbf43349d465131cc9c473a\",\n          \"target\": \"ce566adc14524d9c9cb34ea811c926f6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._notifications_enabled;\\n})()\"\n          },\n          \"label\": \"notification enabled\"\n        },\n        {\n          \"id\": \"fe29c0f9dccf480d944476f25e653854\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8b34c64a7cbf43349d465131cc9c473a\",\n          \"target\": \"8932d22a23ee4a17b3d5926dcd382dad\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars._notifications_enabled;\\n})()\"\n          },\n          \"label\": \"notification disabled\"\n        },\n        {\n          \"id\": \"1e43c86f71384f788a55928299ba5edc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8932d22a23ee4a17b3d5926dcd382dad\",\n          \"target\": \"c4563133ee3b41cf8a9b276406741797\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"53859238a6c44abdb80cf139a2b71d60\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"222af2f0606f4e1f9dc817965842027b\",\n          \"target\": \"00d0649b0f05425e8beff2d338ceddf4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"30e7e369ef3549b4aa091e1de1ed03da\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"00d0649b0f05425e8beff2d338ceddf4\",\n          \"target\": \"0994285d7f1d42bb98af00b3bc91d3dd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_show_notifications_system_topic_trigger;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"6df3b5fe73ad4a0b8da2f7986cdff312\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"00d0649b0f05425e8beff2d338ceddf4\",\n          \"target\": \"f2e2678de4284d49bd514cbffd6c12ea\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_show_notifications_system_topic_trigger;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"c1e24e5fd59c4e11876727f245df6e75\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f2e2678de4284d49bd514cbffd6c12ea\",\n          \"target\": \"b41edcf7370a4e9799afa256ae145e1b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4ccb3680bfa345db8a80e1b97db7d1c0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b41edcf7370a4e9799afa256ae145e1b\",\n          \"target\": \"c4563133ee3b41cf8a9b276406741797\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.confirmation=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"e48e79c41e6d4e5ea0eb8e00cd799029\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b41edcf7370a4e9799afa256ae145e1b\",\n          \"target\": \"7a9c2eb7eae14f9286932bfe3e415f8d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.confirmation=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"60958a28434e4f18837b3e7668d958af\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7a9c2eb7eae14f9286932bfe3e415f8d\",\n          \"target\": \"78c3789a11e04adf9e23c831b067240a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"d6843611727b45e9bc62d522d0e9d6f6\": {\n      \"id\": \"d6843611727b45e9bc62d522d0e9d6f6\",\n      \"name\": \"notifications\",\n      \"label\": \"Notifications\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"08420fdb3b724a13b421d9d83fa04447\",\n      \"isHidden\": false\n    },\n    \"25694a4bfc1449d597a89213d0d8ab40\": {\n      \"id\": \"25694a4bfc1449d597a89213d0d8ab40\",\n      \"name\": \"confirmation\",\n      \"label\": \"Confirmation\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"f2e2678de4284d49bd514cbffd6c12ea\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"b83c859073a3101066c7e9344ef6a7e6","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_b83c859073a3101066c7e9344ef6a7e6","sys_updated_by":"admin","sys_created_on":"2020-09-25 07:00:47","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"7172ad57814d4670bd8322413934eb3a\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"7172ad57814d4670bd8322413934eb3a\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"7172ad57814d4670bd8322413934eb3a\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"222af2f0606f4e1f9dc817965842027b\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"c4563133ee3b41cf8a9b276406741797\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"08420fdb3b724a13b421d9d83fa04447\",\"name\":\"notifications\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"d6843611727b45e9bc62d522d0e9d6f6\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:50c480f1c31310102fa86e221f40dd47:node:08420fdb3b724a13b421d9d83fa04447:field:Message\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var notifications = JSON.parse(vaVars.notifications);\\n    var options = []; \\n    \\n\\n    for (var i = 0 ; i < notifications.length ; i++) {\\n        var regExp = new RegExp('(\\\\\\\\r\\\\\\\\n)+', 'g');\\n        var replacedMessage = '';\\n        if(notifications[i].content.messageHeading) {\\n            var messageHeading = notifications[i].content.messageHeading;\\n            replacedMessage = messageHeading.replace(regExp, ' ');\\n        } else {\\n            var message = notifications[i].content.message;\\n            replacedMessage = message.replace(regExp, ' ');\\n        }\\n        options.push({\\n            'value' : notifications[i].sysId,\\n            'label' : replacedMessage,\\n            'render_style': 'data'\\n        });   \\n    }\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No notifications found.\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var notifications = JSON.parse(vaVars.notifications);\\n    var options = []; \\n    \\n\\n    for (var i = 0 ; i < notifications.length ; i++) {\\n        var regExp = new RegExp('(\\\\\\\\r\\\\\\\\n)+', 'g');\\n        var replacedMessage = '';\\n        if(notifications[i].content.messageHeading) {\\n            var messageHeading = notifications[i].content.messageHeading;\\n            replacedMessage = messageHeading.replace(regExp, ' ');\\n        } else {\\n            var message = notifications[i].content.message;\\n            replacedMessage = message.replace(regExp, ' ');\\n        }\\n        options.push({\\n            'value' : notifications[i].sysId,\\n            'label' : replacedMessage,\\n            'render_style': 'data'\\n        });   \\n    }\\n    return options;\\n})()\\n\"},\"description\":\"\"},{\"type\":\"LibraryCall\",\"library_topic_name\":\"_notification_controller_topic_block_\",\"library_topic_id\":\"bb9714a9530210106e61ddeeff7b1201\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"notification_content\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notificationId = vaInputs.notifications;\\n    var gr = new GlideRecord(\\\"sys_cs_notification\\\");\\n    gr.get(notificationId);\\n    var content = gr.getValue(\\\"content\\\");\\n    gr.setValue(\\\"state\\\", \\\"sent\\\");\\n    gr.setValue(\\\"conversation\\\", vaSystem.getConversationId());\\n    gr.update();\\n\\n    var notifications = JSON.parse(vaVars.notifications);\\n    for (var i = 0 ; i < notifications.length ; i++) {\\n        if(notifications[i].sysId == notificationId) {\\n           content = JSON.stringify(notifications[i].content);\\n           break;\\n        }\\n    }\\n    return content;\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[],\"header_card_fields\":[],\"id\":\"50ee5663da4e4027a71f4de559b7bc7c\",\"name\":\"_notification_controller_topic_block_\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var notifications = vaSystem.getPrevNotifications(true,100);\\n    vaVars.notifications = notifications;\\n})()\\n\",\"id\":\"ce566adc14524d9c9cb34ea811c926f6\",\"name\":\"fetch notifications\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"number of notifications\",\"branches\":[{\"type\":\"Branch\",\"label\":\"More than one notification\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var notifications = JSON.parse(vaVars.notifications);\\n    return notifications.length > 1;\\n})()\\n\"},\"id\":\"f46c1e0bb12242cfa512dd016d6b3606\",\"name\":\"More than one notification\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"one pending notification\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var notifications = JSON.parse(vaVars.notifications);\\n    return notifications.length == 1;\\n})()\\n\"},\"id\":\"6b10c59098744e6398459037095033d1\",\"name\":\"one pending notification\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No pending notifications\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var notifications = JSON.parse(vaVars.notifications);\\n    return notifications.length == 0;\\n})()\\n\"},\"id\":\"572a157491b24c6f8de6e63f2048fc38\",\"name\":\"No pending notifications\",\"expert_mode\":false}],\"id\":\"78c3789a11e04adf9e23c831b067240a\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"_notification_controller_topic_block_\",\"library_topic_id\":\"bb9714a9530210106e61ddeeff7b1201\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"notification_content\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notifications = JSON.parse(vaVars.notifications);\\n    var gr = new GlideRecord(\\\"sys_cs_notification\\\");\\n    gr.get(notifications[0].sysId);\\n    gr.setValue(\\\"state\\\",\\\"sent\\\");\\n    gr.setValue(\\\"conversation\\\", vaSystem.getConversationId());\\n    gr.update();\\n    return JSON.stringify(notifications[0].content);\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[],\"header_card_fields\":[],\"id\":\"edd8f382a1da4627afc46a90d53b39c4\",\"name\":\"_notification_controller_topic_block_\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"You have no actionable notifications to be viewed.\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"94f165bef0564d7485b1d0aa98f9f6d1\",\"name\":\"No notifications msg\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if (vaSystem.isMWebAMBClient(vaContext.deviceType)) {\\n        var web_client_channel_id = 'ecc77b49533100102f40ddeeff7b125d';\\n        var channelGR = new GlideRecord('sys_notification_channel');\\n        channelGR.get(web_client_channel_id);\\n        vaVars._notifications_enabled = (channelGR.getValue('active') === '1') ? true : false;\\n    } else if(vaSystem.isAMBClient(vaContext.deviceType)) {\\n        var cschannel = new GlideRecord('sys_cs_channel');\\n        cschannel.get('sys_id', 'b023fcb3537321106167ddeeff7b12a8');\\n        vaVars._notifications_enabled = (cschannel.getValue('enable_notification') === '1') ? true : false;\\n    }  else {\\n        var providerAppDetails = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n        var providerDetails = JSON.parse(sn_cs.VASystemObject.getProviderById(providerAppDetails.providerId));\\n        var channelSysId = providerDetails.channelId;\\n        \\n        var cschannel = new GlideRecord('sys_cs_channel');\\n        cschannel.get('sys_id', channelSysId);\\n        vaVars._notifications_enabled = (cschannel.getValue('enable_notification') === '1') ? true : false;\\n    }\\n     vaVars.global_show_notifications_run = true;\\n})()\",\"id\":\"0994285d7f1d42bb98af00b3bc91d3dd\",\"name\":\"check notification enabled\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"notification enabled\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._notifications_enabled;\\n})()\"},\"id\":\"9380da14661f462bbb0530362df10e1c\",\"name\":\"notification enabled\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"notification disabled\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars._notifications_enabled;\\n})()\"},\"id\":\"6d8b1998acc841f08793b21863b253c7\",\"name\":\"notification disabled\",\"expert_mode\":false}],\"id\":\"8b34c64a7cbf43349d465131cc9c473a\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Looks like notifications have been turned off by your admin. Check with them for more info.\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"8932d22a23ee4a17b3d5926dcd382dad\",\"name\":\"notification disabled msg\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"Decision\",\"name\":\"Is triggered from system topic\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_show_notifications_system_topic_trigger;\\n})()\\n\"},\"id\":\"e5531654dfc3471e9589633395fb1c38\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_show_notifications_system_topic_trigger;\\n})()\\n\"},\"id\":\"53a2a4bd062c4809aaa45fefc6ebb718\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"00d0649b0f05425e8beff2d338ceddf4\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"25694a4bfc1449d597a89213d0d8ab40\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var notifications = JSON.parse(vaVars.global_show_notifications_pending_notifications);\\n    return notifications.length == 1 ?\\n         gs.getMessageLang(\\\"You have a pending notification. Would you like to view it now?\\\", vaContext.getRequesterLang()) :\\n         gs.getMessageLang(\\\"You have pending notifications. Would you like to view them now?\\\", vaContext.getRequesterLang());\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"f2e2678de4284d49bd514cbffd6c12ea\",\"name\":\"Confirmation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"confirmation=\"},\"id\":\"d34acc846ab04d909ebdedac095f1cc3\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"confirmation=true\"},\"id\":\"d14770c6cf8c402fac8ddaa91841c0e8\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"b41edcf7370a4e9799afa256ae145e1b\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n     vaVars.notifications = vaVars.global_show_notifications_pending_notifications;\\n     vaVars.global_show_notifications_pending_notifications = '';\\n})()\\n\",\"id\":\"7a9c2eb7eae14f9286932bfe3e415f8d\",\"name\":\"Set Notifications variable\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"78c3789a11e04adf9e23c831b067240a\",\"target_node_id\":\"08420fdb3b724a13b421d9d83fa04447\",\"branch_id\":\"f46c1e0bb12242cfa512dd016d6b3606\",\"id\":\"afbb215be6b24b23bb97aaa769c9d47d\",\"name\":\"f46c1e0bb12242cfa512dd016d6b3606\"},{\"type\":\"Edge\",\"source_node_id\":\"08420fdb3b724a13b421d9d83fa04447\",\"target_node_id\":\"50ee5663da4e4027a71f4de559b7bc7c\",\"id\":\"c0a6e292a70343758f1eaa10314afa67\"},{\"type\":\"Edge\",\"source_node_id\":\"ce566adc14524d9c9cb34ea811c926f6\",\"target_node_id\":\"78c3789a11e04adf9e23c831b067240a\",\"id\":\"965df5a8385541f4b9880d0ef3e4ed1b\"},{\"type\":\"Edge\",\"source_node_id\":\"50ee5663da4e4027a71f4de559b7bc7c\",\"target_node_id\":\"c4563133ee3b41cf8a9b276406741797\",\"id\":\"ca64b90101ee425b9b302b09d11a8c06\"},{\"type\":\"Edge\",\"source_node_id\":\"78c3789a11e04adf9e23c831b067240a\",\"target_node_id\":\"edd8f382a1da4627afc46a90d53b39c4\",\"branch_id\":\"6b10c59098744e6398459037095033d1\",\"id\":\"df9e807e4eb44db0aafa1c0d84ed2831\",\"name\":\"6b10c59098744e6398459037095033d1\"},{\"type\":\"Edge\",\"source_node_id\":\"edd8f382a1da4627afc46a90d53b39c4\",\"target_node_id\":\"c4563133ee3b41cf8a9b276406741797\",\"id\":\"fa75e66ba1b94ac7947928d4052839f4\"},{\"type\":\"Edge\",\"source_node_id\":\"78c3789a11e04adf9e23c831b067240a\",\"target_node_id\":\"94f165bef0564d7485b1d0aa98f9f6d1\",\"branch_id\":\"572a157491b24c6f8de6e63f2048fc38\",\"id\":\"82693db2c337457ab80faceb5e227a67\",\"name\":\"572a157491b24c6f8de6e63f2048fc38\"},{\"type\":\"Edge\",\"source_node_id\":\"94f165bef0564d7485b1d0aa98f9f6d1\",\"target_node_id\":\"c4563133ee3b41cf8a9b276406741797\",\"id\":\"f6a9293495fc4c889f01cd74524465fe\"},{\"type\":\"Edge\",\"source_node_id\":\"0994285d7f1d42bb98af00b3bc91d3dd\",\"target_node_id\":\"8b34c64a7cbf43349d465131cc9c473a\",\"id\":\"e910cb2b3be648b38e48bc52ff662f27\"},{\"type\":\"Edge\",\"source_node_id\":\"8b34c64a7cbf43349d465131cc9c473a\",\"target_node_id\":\"ce566adc14524d9c9cb34ea811c926f6\",\"branch_id\":\"9380da14661f462bbb0530362df10e1c\",\"id\":\"3ba8f7c6019d4b97bc904d24b9045757\",\"name\":\"9380da14661f462bbb0530362df10e1c\"},{\"type\":\"Edge\",\"source_node_id\":\"8b34c64a7cbf43349d465131cc9c473a\",\"target_node_id\":\"8932d22a23ee4a17b3d5926dcd382dad\",\"branch_id\":\"6d8b1998acc841f08793b21863b253c7\",\"id\":\"fe29c0f9dccf480d944476f25e653854\",\"name\":\"6d8b1998acc841f08793b21863b253c7\"},{\"type\":\"Edge\",\"source_node_id\":\"8932d22a23ee4a17b3d5926dcd382dad\",\"target_node_id\":\"c4563133ee3b41cf8a9b276406741797\",\"id\":\"1e43c86f71384f788a55928299ba5edc\"},{\"type\":\"Edge\",\"source_node_id\":\"222af2f0606f4e1f9dc817965842027b\",\"target_node_id\":\"00d0649b0f05425e8beff2d338ceddf4\",\"id\":\"53859238a6c44abdb80cf139a2b71d60\"},{\"type\":\"Edge\",\"source_node_id\":\"00d0649b0f05425e8beff2d338ceddf4\",\"target_node_id\":\"0994285d7f1d42bb98af00b3bc91d3dd\",\"branch_id\":\"e5531654dfc3471e9589633395fb1c38\",\"id\":\"30e7e369ef3549b4aa091e1de1ed03da\",\"name\":\"e5531654dfc3471e9589633395fb1c38\"},{\"type\":\"Edge\",\"source_node_id\":\"00d0649b0f05425e8beff2d338ceddf4\",\"target_node_id\":\"f2e2678de4284d49bd514cbffd6c12ea\",\"branch_id\":\"53a2a4bd062c4809aaa45fefc6ebb718\",\"id\":\"6df3b5fe73ad4a0b8da2f7986cdff312\",\"name\":\"53a2a4bd062c4809aaa45fefc6ebb718\"},{\"type\":\"Edge\",\"source_node_id\":\"f2e2678de4284d49bd514cbffd6c12ea\",\"target_node_id\":\"b41edcf7370a4e9799afa256ae145e1b\",\"id\":\"c1e24e5fd59c4e11876727f245df6e75\"},{\"type\":\"Edge\",\"source_node_id\":\"b41edcf7370a4e9799afa256ae145e1b\",\"target_node_id\":\"c4563133ee3b41cf8a9b276406741797\",\"branch_id\":\"d34acc846ab04d909ebdedac095f1cc3\",\"id\":\"4ccb3680bfa345db8a80e1b97db7d1c0\",\"name\":\"d34acc846ab04d909ebdedac095f1cc3\"},{\"type\":\"Edge\",\"source_node_id\":\"b41edcf7370a4e9799afa256ae145e1b\",\"target_node_id\":\"7a9c2eb7eae14f9286932bfe3e415f8d\",\"branch_id\":\"d14770c6cf8c402fac8ddaa91841c0e8\",\"id\":\"e48e79c41e6d4e5ea0eb8e00cd799029\",\"name\":\"d14770c6cf8c402fac8ddaa91841c0e8\"},{\"type\":\"Edge\",\"source_node_id\":\"7a9c2eb7eae14f9286932bfe3e415f8d\",\"target_node_id\":\"78c3789a11e04adf9e23c831b067240a\",\"id\":\"60958a28434e4f18837b3e7668d958af\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"d6843611727b45e9bc62d522d0e9d6f6\",\"name\":\"notifications\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"table\":\"\"},{\"type\":\"True/False\",\"id\":\"25694a4bfc1449d597a89213d0d8ab40\",\"name\":\"confirmation\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"50c480f1c31310102fa86e221f40dd47\",\"name\":\"Show Notification\",\"key_phrases\":[\"Show Notification\",\"Show Notifications\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"description\":\"displays all actionable notifications that are pending to be seen\",\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"title\":\"Show Notification\",\"library\":false,\"csTopicId\":\"7c3c819073a3101066c7e9344ef6a7e4\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Show Notification","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"50c480f1c31310102fa86e221f40dd47","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/7c3c819073a3101066c7e9344ef6a7e4","value":"7c3c819073a3101066c7e9344ef6a7e4"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"94","sys_updated_on":"2022-10-24 17:16:21","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"7d356091fd3346a1a8917cc873b18803\": {\n          \"id\": \"7d356091fd3346a1a8917cc873b18803\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\",\n            \"mode\": \"script\"\n          }\n        },\n        \"7b08bc2f17d347bc8197ce477c29b7c6\": {\n          \"id\": \"7b08bc2f17d347bc8197ce477c29b7c6\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n\\n})()\\n\",\n            \"mode\": \"script\"\n          }\n        },\n        \"9078709c69a045218b1f0358dd154b05\": {\n          \"id\": \"9078709c69a045218b1f0358dd154b05\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"setup message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    \\n    return gs.getMessageLang(\\\"You can setup or reset your account verification setting using the below link.\\\", vaContext.getRequesterLang());\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"669a994b5ed646589cff8598bd53dd71\": {\n          \"id\": \"669a994b5ed646589cff8598bd53dd71\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"setup_link\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n  \\n    var hostURL = gs.getProperty('glide.servlet.uri');\\n    var link = hostURL+\\\"now/nav/ui/classic/params/target/%24pwd_enrollment_form_container.do\\\"\\n    return link;\\n  \\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"6bdd38c89d7940e4a4cbc5f5e3514508\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7d356091fd3346a1a8917cc873b18803\",\n          \"target\": \"9078709c69a045218b1f0358dd154b05\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"de703b5a54de4964b8f24b66fc21bf42\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9078709c69a045218b1f0358dd154b05\",\n          \"target\": \"669a994b5ed646589cff8598bd53dd71\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3118ab5ac3b64e6381e306546decdf2b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"669a994b5ed646589cff8598bd53dd71\",\n          \"target\": \"7b08bc2f17d347bc8197ce477c29b7c6\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"b8930f6087551110a21cc9d7dabb3524","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9cc37b3704b52210559073c06a02f781","value":"9cc37b3704b52210559073c06a02f781"},"sys_update_name":"sys_cb_design_topic_b8930f6087551110a21cc9d7dabb3524","sys_updated_by":"admin","sys_created_on":"2022-08-10 22:44:09","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"5a01a734d6b54c859cf3aaafba685829\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"5a01a734d6b54c859cf3aaafba685829\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"5a01a734d6b54c859cf3aaafba685829\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\"},\"id\":\"7d356091fd3346a1a8917cc873b18803\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n\\n})()\\n\"},\"id\":\"7b08bc2f17d347bc8197ce477c29b7c6\",\"name\":\"End\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    \\n    return gs.getMessageLang(\\\"You can setup or reset your account verification setting using the below link.\\\", vaContext.getRequesterLang());\\n})()\\n\"}],\"id\":\"9078709c69a045218b1f0358dd154b05\",\"name\":\"setup message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n  \\n    var hostURL = gs.getProperty('glide.servlet.uri');\\n    var link = hostURL+\\\"now/nav/ui/classic/params/target/%24pwd_enrollment_form_container.do\\\"\\n    return link;\\n  \\n})()\\n\"}],\"id\":\"669a994b5ed646589cff8598bd53dd71\",\"name\":\"setup_link\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"7d356091fd3346a1a8917cc873b18803\",\"target_node_id\":\"9078709c69a045218b1f0358dd154b05\",\"id\":\"6bdd38c89d7940e4a4cbc5f5e3514508\"},{\"type\":\"Edge\",\"source_node_id\":\"9078709c69a045218b1f0358dd154b05\",\"target_node_id\":\"669a994b5ed646589cff8598bd53dd71\",\"id\":\"de703b5a54de4964b8f24b66fc21bf42\"},{\"type\":\"Edge\",\"source_node_id\":\"669a994b5ed646589cff8598bd53dd71\",\"target_node_id\":\"7b08bc2f17d347bc8197ce477c29b7c6\",\"id\":\"3118ab5ac3b64e6381e306546decdf2b\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n  \\n    if(gs.nil(vaContext.providerAppId)){\\n        return false;\\n    }\\n     var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n     if(gs.nil(providerApp)){\\n         return false;\\n     }\\n \\n     var SMS_CHANNEL = '5ae1b3e3771700105d7b3882a91061bd';\\n     var providerSysId = providerApp.providerId;\\n     var csProviderGR = new GlideRecord(\\\"sys_cs_provider\\\");\\n     csProviderGR.addQuery(\\\"sys_id\\\", providerSysId);\\n     csProviderGR.addEncodedQuery(\\\"link_account_enabled=true^account_link_type!=basic\\\");\\n     csProviderGR.query();\\n\\n     var result = false;\\n     if(csProviderGR.next()){\\n         if(!csProviderGR.getValue(\\\"channel\\\").equals(SMS_CHANNEL)){\\n            return false;\\n         }\\n\\n         result = true;     \\n     }\\n  \\n     var session = gs.getSession();\\n     var loggedIn = session.isLoggedIn();\\n     result = result && (!loggedIn);\\n     return result;\\n   \\n})()\\n\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[\"SMS\"],\"id\":\"f072432087551110a21cc9d7dabb35e9\",\"name\":\"Setup/Reset Verification Profile\",\"key_phrases\":[\"Setup/Reset Verification Profile\",\"reset\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":false,\"csTopicId\":\"38930f6087551110a21cc9d7dabb3520\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Setup/Reset Verification Profile","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"f072432087551110a21cc9d7dabb35e9","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/38930f6087551110a21cc9d7dabb3520","value":"38930f6087551110a21cc9d7dabb3520"},"sys_created_by":"rachel.wu@snc","sys_policy":""},{"sys_mod_count":"3","sys_updated_on":"2024-06-07 16:50:31","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.67\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"b90ef5f7024d4e34b5ceaf628345df9c\": {\n          \"id\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"parameters\": [\n            {\n              \"name\": \"surveyId\",\n              \"value\": \"\",\n              \"id\": \"1132a62678c24bbda688337615fd51bb\",\n              \"disabled\": true,\n              \"referenced\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            },\n            {\n              \"name\": \"confirmationNeeded\",\n              \"value\": \"false\",\n              \"id\": \"75bc445130284002947077d668cac779\",\n              \"referenced\": false,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            },\n            {\n              \"name\": \"saveQuestionsToContext\",\n              \"value\": \"false\",\n              \"id\": \"ba2a161b94a3468a86603955cca630a1\",\n              \"referenced\": true,\n              \"disabled\": true,\n              \"type\": \"String\",\n              \"hint\": \"\",\n              \"required\": true\n            }\n          ],\n          \"variableIds\": [\n            \"1132a62678c24bbda688337615fd51bb\",\n            \"75bc445130284002947077d668cac779\",\n            \"ba2a161b94a3468a86603955cca630a1\"\n          ]\n        },\n        \"da165a652daf475698c988c6427d008f\": {\n          \"id\": \"da165a652daf475698c988c6427d008f\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": []\n        },\n        \"4761ab4e62324e3cb07ce4efc77ffd1f\": {\n          \"id\": \"4761ab4e62324e3cb07ce4efc77ffd1f\",\n          \"name\": \"Load survey instance\",\n          \"script\": \"(function execute() {\\n\\tvar gr = new GlideRecord('asmt_metric_type');\\n\\tgr.get(vaInputs.surveyid);vaVars.active = gr.active;vaVars.endNote = vaSystem.getTranslation(gr, 'end_note', vaContext.getRequesterLang(), gr.end_note.getValue() || '');vaVars.introduction = vaSystem.getTranslation(gr, 'introduction', vaContext.getRequesterLang(), gr.introduction.getValue() || '');vaVars.surveyName = gr.name.toString();vaVars.surveyVerificationMsg = vaSystem.getSurveyVerificationMessage();\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"bbe4918b84a9426abbec7d055f7f555a\": {\n          \"id\": \"bbe4918b84a9426abbec7d055f7f555a\",\n          \"name\": \"Load questions\",\n          \"script\": \"(function execute() {\\n    var gr = new GlideRecord('asmt_metric_category');\\n    gr.addQuery('metric_type', vaInputs.surveyid);\\n    gr.query();\\n    gr.next();\\n\\n    var surveyCategory = gr.getUniqueValue();\\n\\n    var gr = new GlideRecord('asmt_metric')\\n    gr.addQuery('category', surveyCategory);\\n    gr.addQuery('active', true);\\n    gr.orderBy('order');\\n    gr.query();\\n\\n    var questions = [];\\n    while (gr.next()) {\\n        var question = {\\n            sys_id: gr.getUniqueValue(),\\n            scale: gr.scale + '',\\n            metric: gr.sys_id + '',\\n            type: gr.datatype + '',\\n            display: vaSystem.getTranslation(gr, 'question', vaContext.getRequesterLang(), gr.question) + '',\\n            dependsOn: gr.depends_on + '',\\n            displayedWhen: gr.displayed_when + '',\\n            name: gr.name + '',\\n            max: gr.max + '',\\n            min: gr.min + '',\\n            mandatory: gr.mandatory + '',\\n            field_validation: gr.field_validation + '',\\n            reference_table: gr.reference_table + '',\\n            condition: gr.condition + '',\\n        };\\n\\n        // boolean and checkbox type questions use different displayed_when fields\\n        var dependsOnType = gr.depends_on.datatype + '';\\n        if (dependsOnType === 'boolean')\\n            question['displayedWhen'] = gr.displayed_when_yesno + '';\\n        else if (dependsOnType === 'checkbox')\\n            question['displayedWhen'] = gr.displayed_when_checkbox + '';\\n\\n        questions.push(question);\\n    }\\n    vaVars.surveyQuestions = JSON.stringify(questions);\\n    vaVars.questionCount = questions.length;\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8ad01595341c4a6186e46eb203320658\": {\n          \"id\": \"8ad01595341c4a6186e46eb203320658\",\n          \"name\": \"Set next question\",\n          \"script\": \"(function execute() {\\n    vaVars.questionIndex++;\\n    if (!(vaVars.questionCount && vaVars.questionIndex < vaVars.questionCount))\\n        return;\\n\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n\\n    // Set question type & display value\\n    vaVars.currentQuestionId = questions[i].sys_id;\\n    vaVars.currentQuestionType = questions[i].type;\\n    vaVars.currentQuestionMetric = questions[i].metric;\\n    vaVars.currentQuestionDisplay = questions[i].display;\\n    vaVars.currentQuestionMax = questions[i].max;\\n    vaVars.currentQuestionMin = questions[i].min;\\n    vaVars.currentQuestionMandatory = questions[i].mandatory;\\n    vaVars.currentQuestionFieldValidator = questions[i].field_validation;\\n    vaVars.currentQuestionReferenceTable = questions[i].reference_table;\\n    vaVars.currentQuestionReferenceCondition = questions[i].condition;\\n\\n    // Load choices if relevant\\n    if (questions[i].type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(questions[i].type) > -1) {\\n        questions[i].choices = getChoices(questions[i]);\\n        vaVars.surveyQuestions = JSON.stringify(questions);\\n    }\\n})();\\n\\nfunction getChoices(q) {\\n    var gr = new GlideRecord('asmt_metric_definition');\\n    gr.addQuery('metric', q.metric);\\n    gr.orderBy('order');\\n    gr.query();\\n\\n    var choices = [];\\n    while (gr.next()) {\\n        choices.push({\\n            sys_id: gr.getUniqueValue(),\\n            display: vaSystem.getTranslation(gr, 'display', vaContext.getRequesterLang(),gr.display),\\n            value: gr.getValue('value'),\\n            selected: gr.getDisplayValue('selected_image'),\\n            unselected: gr.getDisplayValue('unselected_image')\\n        });\\n    }\\n    return choices;\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ca66aaa54c614102a4a2fd4bad818b9a\": {\n          \"id\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Out of questions?\"\n        },\n        \"280229f5f0f74d11a6d06328dfb8fa1a\": {\n          \"id\": \"280229f5f0f74d11a6d06328dfb8fa1a\",\n          \"name\": \"Set answers\",\n          \"script\": \"(function execute() {\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n    answers[vaVars.currentQuestionId] = getInput();\\n    vaVars.surveyAnswers = JSON.stringify(answers);\\n})();\\n\\nfunction getInput() {\\n    var values = {'value': null, 'Qtype': vaVars.currentQuestionType, 'displayValue':null};\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        values.value = getValueIfSet(vaInputs.show_choice_question);\\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_choice_question,values.value);\\n    }\\n\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        values.value = getValueIfSet(vaInputs.show_text_input_question);\\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_text_input_question,values.value);\\n    }\\n\\n    switch (vaVars.currentQuestionType) {\\n        case 'imagescale':\\n            values.value = getValueIfSet(vaInputs.show_image_scale_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_image_scale_question,values.value);\\n            var questions = JSON.parse(vaVars.surveyQuestions);\\n            //stores correct displayValue, vaInputs returns display+value\\n            if(vaInputs.show_image_scale_question && vaInputs.show_image_scale_question != null){\\n                questions[vaVars.questionIndex].choices.forEach(function(c){\\n                    if(c.value === values.value)\\n                        values.displayValue = c.display;\\n                });\\n            }\\n            break;\\n        case 'boolean':\\n            values.value = getValueIfSet(vaInputs.show_boolean_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\\n            break;\\n        case 'checkbox':\\n            values.value= getValueIfSet(vaInputs.show_boolean_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\\n            break;\\n        case 'attachment':\\n            values.value = getValueIfSet(vaInputs.show_attachment_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_attachment_question,values.value);\\n            break;\\n        case 'date':\\n            const date = getValueIfSet(vaInputs.show_date_question);\\n            values.value = (date != null) ? date.toString() : null;\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_date_question,values.value);\\n            break;\\n        case 'datetime':\\n            const dateTime = getValueIfSet(vaInputs.show_datetime_question);\\n            values.value = (dateTime != null) ? dateTime.toString() : null;\\n            vaInputs.show_datetime_question.setTimeZone(vaContext.getDeviceTimeZone());\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_datetime_question,values.value);\\n            break;\\n        case 'reference':\\n            values.value = getValueIfSet(vaInputs.show_reference_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_reference_question,values.value);\\n    }\\n    return values;\\n}\\n\\nfunction getValueIfSet(field){\\n    return field && field.isValueSet() ? field.getValue() : null;\\n}\\n\\nfunction getDisplayValueIfSet(field, val){\\n    if (!field || field == null)\\n       return val;\\n    var dv = field.getDisplayValue();\\n     return dv && dv.length > 0  ? dv : val;\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9ee3c8b3d800414c89edc50c2746da57\": {\n          \"id\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Does question satisfy dependency?\"\n        },\n        \"385869dc18c746b88db71bdd7c349c56\": {\n          \"id\": \"385869dc18c746b88db71bdd7c349c56\",\n          \"name\": \"Check question dependency\",\n          \"script\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var q = questions[i];\\n\\n    var satisfied = true;\\n    var hasDependency = !(!q.dependsOn);\\n    vaVars.currentIsDependencySatisfied = !hasDependency || isSat(q);\\n})();\\n\\nfunction isSat(q) {\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n\\n    var answerValid = false;\\n    questions.forEach(function(question) {\\n        if (question.metric !== q.dependsOn)\\n            return;\\n\\n        var answerExists = question.sys_id in answers;\\n        if (!answerExists)\\n            return;\\n\\n        var selectedChoice = answers[question.sys_id]['value'];\\n\\n        if (question.type === 'boolean' || question.type === 'checkbox') {\\n            if ((selectedChoice === true && q.displayedWhen === '1') || (selectedChoice === false && q.displayedWhen === '0'))\\n                answerValid = true;\\n        } else {\\n            var choices = question.choices.filter(function(c) {\\n                return c.value === selectedChoice;\\n            });\\n\\n            if (choices.length && choices[0].sys_id)\\n                answerValid = q.displayedWhen.indexOf(choices[0].sys_id) !== -1;\\n        }\\n    });\\n\\n    return answerValid;\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8a8d038a0f75488885032aceabd284ce\": {\n          \"id\": \"8a8d038a0f75488885032aceabd284ce\",\n          \"stepType\": \"StandaloneAIBooleanPrompt\",\n          \"name\": \"Show boolean question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"bd696a7cf14b452b987bc0a3b01fd079\",\n              \"displayName\": \"Show boolean question\",\n              \"name\": \"show_boolean_question\",\n              \"description\": \"This type of question allows users to choose between two distinct options, typically representing \\\"Yes\\\" or \\\"No,\\\" \\\"True\\\" or \\\"False,\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\",\n              \"type\": \"boolean\",\n              \"variableId\": \"b5790fea6a77427aaf10a8cb5ee3cef0\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"\",\n              \"script\": \"\",\n              \"condition\": {\n                \"value\": \"\",\n                \"mode\": \"glide_query\"\n              },\n              \"stepType\": \"BooleanPrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n   return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if ((vaVars.currentQuestionType === 'boolean') || (vaVars.currentQuestionType === 'checkbox')) {\\n        vaInputs.show_boolean_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\"\n          },\n          \"hiddenVariableIds\": [\n            \"2f2b481c82a94d1996f70567027cbb41\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"b5790fea6a77427aaf10a8cb5ee3cef0\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"6460cac852834b46a4977c093a2b1a67\": {\n          \"id\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"name\": \"Submit survey answers\",\n          \"script\": \"(function execute() {\\n    if(vaInputs.savequestionstocontext == 'true'){ \\n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createAssessments(vaInputs.surveyid, '', gs.getUserID(), false, '', false, '', vaVars._interaction_record_sysid, false, 'interaction');\\n        vaVars.surveyInstanceId = vaVars.surveyInstanceId.substring(0, 32);\\n        vaVars.LiveAgent_pre_assessment_instance = vaVars.surveyInstanceId;\\n        vaVars.LiveAgent_pre_chat_survey_name = vaVars.surveyName;\\n    } else{ \\n        var userId = !gs.nil(vaVars._topic_postchat_user_id) ? vaVars._topic_postchat_user_id : gs.getUserID();\\n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createAssessments(vaInputs.surveyid, '', userId, false, '', false, '', vaVars._interaction_record_sysid, false, 'interaction');\\n        vaVars.surveyInstanceId = vaVars.surveyInstanceId.substring(0, 32);\\n        vaVars.LiveAgent_post_assessment_instance = vaVars.surveyInstanceId;\\n        vaVars.LiveAgent_post_chat_survey_name = vaVars.surveyName;    \\n    }\\n\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n    var data = {\\n        sysparm_instance_id: vaVars.surveyInstanceId,\\n        sysparm_action: 'submit'\\n    };\\n data.channel = 'va'; \\n    var questionData = new global.TopicPreChatUtil().getQuestionData(vaVars.surveyInstanceId);\\n\\n    Object.keys(answers).forEach(function(q) {\\n        if (answers[q] && answers[q] && answers[q].value != null){ \\n            if (answers[q]['Qtype'] === 'boolean') {\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? '1' : '0';\\n            } else if (answers[q]['Qtype'] === 'checkbox') {\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? 'true' : '';\\n            } else\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = answers[q]['value'];\\n            if (vaInputs.savequestionstocontext == 'true')\\n                saveToContext(questionData[q].name, answers[q], questionData[q].contextVar, questionData[q].type);\\n        }\\n        \\n    });\\n    var response = new global.AssessmentSubmitProcessor().processRequest(data);\\n})()\\n\\nfunction saveToContext(name, a, contextVar, type){\\n        if(contextVar != \\\"\\\") {\\n            var contextVarName = contextVar;\\n        } else {\\n            //remove all special characters and replace spaces with _\\n            var questionName = name.toString().replace(/[^a-zA-Z0-9]/g, '_').replace(/_$/,'');     \\n            //append survey name to question name\\n            var contextVarName = \\\"liveagent_\\\" +vaVars.surveyName +\\\".\\\"+ questionName;\\n        }\\n        vaVars[contextVarName] = a.value.toString();\\n        //for choice questions, store response and not response index as context var\\n        if (type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(type) > -1) { \\n             vaVars[contextVarName] = a.displayValue.toString();    \\n        }\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"369375049a91494e9da6cd6e6cb3cb28\": {\n          \"id\": \"369375049a91494e9da6cd6e6cb3cb28\",\n          \"stepType\": \"StandaloneAITextPrompt\",\n          \"name\": \"Show text input question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"b0faacee59fd448c9cc01beaf7d5bd72\",\n              \"displayName\": \"Show text input question\",\n              \"name\": \"show_text_input_question\",\n              \"description\": \"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\",\n              \"type\": \"string\",\n              \"variableId\": \"0775ff6cf5b94c4692d1a7be6b9fe010\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"\",\n              \"script\": \"\",\n              \"condition\": {\n                \"value\": \"\",\n                \"mode\": \"glide_query\"\n              },\n              \"stepType\": \"TextPrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n   return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'long')\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\n    else if (vaVars.currentQuestionType === 'percentage')\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\n    else\\n        return vaVars.currentQuestionDisplay;\\n})()\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Custom\",\n                \"script\": \"function validate(value) {\\n    // for \\\"skip\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\n        return {\\n            valid: true,\\n        }; \\n\\n    // for string type with validator defined, and question is not skipped\\n    var validatorGr = new GlideRecord(\\\"sys_cs_field_script_validator\\\");\\n    if (!validatorGr.isValid())\\n\\t    return {\\n           valid: false,\\n           error: gs.getMessageLang(\\\"validator table does not exist\\\", vaContext.getRequesterLang())\\n        };\\n\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\n        var scriptBuild = \\\"(\\\" + validatorGr.validator + \\\")('\\\"+ value + \\\"');\\\";\\n        var isValidAnswer = eval(scriptBuild);\\n        return {\\n            valid: isValidAnswer,\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\n        };\\n    } else {\\n        return {\\n            valid: false,\\n            error: gs.getMessageLang(\\\"validator record does not exist\\\", vaContext.getRequesterLang())\\n        };\\n    }\\n}\"\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_text_input_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"\n          },\n          \"hiddenVariableIds\": [\n            \"5229b91bab174a52829686976666ed1b\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"0775ff6cf5b94c4692d1a7be6b9fe010\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"74fc296442cc4d7f8269e94e25cad5a4\": {\n          \"id\": \"74fc296442cc4d7f8269e94e25cad5a4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"End note\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.endNote}}\",\n                        \"displayValue\": \"vaVarsendNote\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"8351c5b9bf8942ff8d31f773b77a5ee3\": {\n          \"id\": \"8351c5b9bf8942ff8d31f773b77a5ee3\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Introduction\",\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.introduction}}\",\n                        \"displayValue\": \"vaVarsintroduction\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"8d2ac71ed40a416a9751e5bd73a6e442\": {\n          \"id\": \"8d2ac71ed40a416a9751e5bd73a6e442\",\n          \"stepType\": \"StandaloneAIReferenceChoicePrompt\",\n          \"name\": \"Show choice question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"c261f784256b4212b50dc64ed3f869dd\",\n              \"displayName\": \"Show choice question\",\n              \"name\": \"show_choice_question\",\n              \"description\": \"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\",\n              \"type\": \"reference\",\n              \"variableId\": \"dea29579e2c44cdab652446be7273444\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"external\",\n              \"script\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'render_style':'bubble',\\n            'label': c.display,\\n            'value': c.value\\n        });\\n    }\\n\\n    return options;\\n})()\",\n              \"condition\": {\n                \"value\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'render_style':'bubble',\\n            'label': c.display,\\n            'value': c.value\\n        });\\n    }\\n\\n    return options;\\n})()\",\n                \"mode\": \"external_script\"\n              },\n              \"stepType\": \"ReferenceChoicePrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"hasCardHeader\": false,\n              \"cardMetadata\": {\n                \"mode\": \"card\",\n                \"metadataScript\": \"\",\n                \"cardTemplate\": \"\",\n                \"cardFields\": {},\n                \"cardDefinition\": {}\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_choice_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\\n\"\n          },\n          \"hiddenVariableIds\": [\n            \"9421933d83ba4506b292d81bb60b2999\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"dea29579e2c44cdab652446be7273444\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"64d85b2098094a4fa02f25f7a1444c50\": {\n          \"id\": \"64d85b2098094a4fa02f25f7a1444c50\",\n          \"stepType\": \"FilePrompt\",\n          \"name\": \"Show attachment question\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'attachment') {\\n        vaInputs.show_attachment_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"\n          },\n          \"optional\": false,\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": {\n            \"id\": \"\"\n          },\n          \"variableId\": \"bba30ac7475c47cc93da35130951478b\",\n          \"skippable\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n          },\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"e8625b3c4b794d769bb0da9d0a606848\": {\n          \"id\": \"e8625b3c4b794d769bb0da9d0a606848\",\n          \"stepType\": \"StandaloneAIDateTimePrompt\",\n          \"name\": \"Show date question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"cf9f71079460466fa6a82d5df4885397\",\n              \"displayName\": \"Show date question\",\n              \"name\": \"show_date_question\",\n              \"description\": \"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\",\n              \"type\": \"date_time\",\n              \"variableId\": \"fbe9af88d71a49f3845d37b4a93bbe15\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"\",\n              \"script\": \"\",\n              \"condition\": {\n                \"value\": \"\",\n                \"mode\": \"glide_query\"\n              },\n              \"stepType\": \"DateTimePrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'date') {\\n        vaInputs.show_date_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"\n          },\n          \"hiddenVariableIds\": [\n            \"e5d8423283fc4d2595fd661bd5a2eb69\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"fbe9af88d71a49f3845d37b4a93bbe15\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"cb013d5f2f4b4d0789b486a504e6d2f2\": {\n          \"id\": \"cb013d5f2f4b4d0789b486a504e6d2f2\",\n          \"stepType\": \"StandaloneAIDateTimePrompt\",\n          \"name\": \"Show datetime question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"c9c909aee2dc44b7bcd4852909ce04cf\",\n              \"displayName\": \"Show datetime question\",\n              \"name\": \"show_datetime_question\",\n              \"description\": \"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\",\n              \"type\": \"date_time\",\n              \"variableId\": \"c1d6aa7022164ba6a2b0291228d96249\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"\",\n              \"script\": \"\",\n              \"condition\": {\n                \"value\": \"\",\n                \"mode\": \"glide_query\"\n              },\n              \"stepType\": \"DateTimePrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n   return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'datetime') {\\n        vaInputs.show_datetime_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\"\n          },\n          \"hiddenVariableIds\": [\n            \"a7dc2985e75f4c5cbd8b508e8ab6620c\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"c1d6aa7022164ba6a2b0291228d96249\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"f9950611be314fe6b0c891e8e65771d2\": {\n          \"id\": \"f9950611be314fe6b0c891e8e65771d2\",\n          \"name\": \"Answer validation\",\n          \"script\": \"(function execute() {\\n    vaVars.currentAnswerValidation = true;\\n    vaVars.currentAnswerErrorMsg = '';\\n\\n    if (vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage')\\n        validateFieldLimits();\\n})();\\n\\nfunction validateFieldLimits() {\\n\\tif ((!vaInputs.show_text_input_question.isValueSet() || vaInputs.show_text_input_question.getValue().length == 0)\\n\\t    && !vaInputs.show_text_input_question.isRequired())\\n\\t\\treturn;\\n\\tvar max = vaVars.currentQuestionMax;\\n\\tvar min = vaVars.currentQuestionMin;\\n\\t\\t\\n\\tvar value = vaInputs.show_text_input_question.getValue();\\n\\tvar newvalue = Number(value);\\n\\tif (isNaN(newvalue)) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is not a valid number. Please try again', vaContext.getRequesterLang());\\n\\t} else if (newvalue > max || newvalue < min) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is outside the valid range. Please try again', vaContext.getRequesterLang());\\n\\t}\\n}\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"607a63448c1a4acca85166124f375118\": {\n          \"id\": \"607a63448c1a4acca85166124f375118\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Check range\"\n        },\n        \"194fae9f28f045ac94643564ef50c9db\": {\n          \"id\": \"194fae9f28f045ac94643564ef50c9db\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Validation failed\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return vaVars.currentAnswerErrorMsg;\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"26cffe08aa7147c79ffc7489da676135\": {\n          \"id\": \"26cffe08aa7147c79ffc7489da676135\",\n          \"stepType\": \"StandaloneAICarouselPrompt\",\n          \"name\": \"Show image scale question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"40dd6f5709604e4ca77af9d6f7af4453\",\n              \"displayName\": \"Show image scale question\",\n              \"name\": \"show_image_scale_question\",\n              \"description\": \"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\",\n              \"type\": \"carousel-image\",\n              \"variableId\": \"b600afffba2d46a1a225c17e62ee4734\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"\",\n              \"script\": \"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var choices = questions[i].choices;\\n    var options = [];\\n    for (var j = 0; j < choices.length; j++) {\\n        var c = choices[j];\\n        options.push({\\n            'Name': c.display,\\n            'Value': c.value,\\n            'Body': c.unselected\\n        });\\n    }\\n\\n    return options;\\n})()\",\n              \"condition\": {\n                \"value\": \"\",\n                \"mode\": \"glide_query\"\n              },\n              \"stepType\": \"CarouselPrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n   return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaVars.currentQuestionType === 'imagescale') {\\n        vaInputs.show_image_scale_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"\n          },\n          \"hiddenVariableIds\": [\n            \"78de1c7f496f430985b8d3ac5f93acac\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"b600afffba2d46a1a225c17e62ee4734\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"c24324650a514984946fed64207f0c24\": {\n          \"id\": \"c24324650a514984946fed64207f0c24\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Summary\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n      var questions = JSON.parse(vaVars.surveyQuestions);\\n      var answers = JSON.parse(vaVars.surveyAnswers);\\n      var questionAnswerPairs = [];\\n\\n      questions.forEach(function(q) {\\n            var question = q.display.toString();\\n            var answer = answers[q.metric];\\n            var questionAnswer = answer.displayValue != null ? answer.displayValue :\\n            answer.value != null ? answer.value : '';\\n            var questionType = q.type + '';\\n            \\n            if(questionType == 'checkbox' || questionType == 'boolean'){\\n                  if (questionAnswer == \\\"1\\\") {\\n                        questionAnswer = \\\"Yes\\\";\\n                  } else if (questionAnswer == \\\"0\\\") {\\n                        questionAnswer = \\\"No\\\"\\n                  }\\n            }\\n            if(answer){questionAnswerPairs.push({\\\"fieldLabel\\\": question, \\\"fieldValue\\\": questionAnswer});}         \\n      });\\n      \\n      var card_data = JSON.stringify({\\n            \\\"title\\\":gs.getMessageLang(\\\"Response Summary\\\", vaContext.getRequesterLang()),\\n            \\\"fields\\\":questionAnswerPairs,\\n      });\\n\\n      return vaSystem.renderCard(\\\"PreChat\\\", card_data, true);\\n})()\\n\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"c0f7a2a49b4f49688d9a1c1dd4e216f9\": {\n          \"id\": \"c0f7a2a49b4f49688d9a1c1dd4e216f9\",\n          \"stepType\": \"StandaloneAIBooleanPrompt\",\n          \"name\": \"Verify Response\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"be7e09bc5c674b5ba5c2ddbf7dd55aea\",\n              \"displayName\": \"Verify Response\",\n              \"name\": \"verify_response\",\n              \"description\": \"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\",\n              \"type\": \"boolean\",\n              \"variableId\": \"a813e0458a174bb0b415483fe89c00e4\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"\",\n              \"script\": \"\",\n              \"condition\": {\n                \"value\": \"\",\n                \"mode\": \"glide_query\"\n              },\n              \"stepType\": \"BooleanPrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"value\": \"\",\n                \"mode\": \"query\"\n              },\n              \"promptMessage\": {\n                \"value\": [\n                  {\n                    \"type\": \"paragraph\",\n                    \"children\": [\n                      {\n                        \"text\": \"\"\n                      },\n                      {\n                        \"type\": \"datapill\",\n                        \"dataPill\": {\n                          \"value\": \"{{vaVars.surveyVerificationMsg}}\",\n                          \"displayValue\": \"vaVarssurveyVerificationMsg\"\n                        },\n                        \"children\": [\n                          {\n                            \"text\": \"\"\n                          }\n                        ]\n                      },\n                      {\n                        \"text\": \"\"\n                      }\n                    ]\n                  }\n                ],\n                \"mode\": \"simple\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"hiddenVariableIds\": [\n            \"3148914579f645b88e5e0bbc22ab9cf4\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"a813e0458a174bb0b415483fe89c00e4\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"8c9927f71ad04890afd342b20df99100\": {\n          \"id\": \"8c9927f71ad04890afd342b20df99100\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Summary Correct?\"\n        },\n        \"3c232bba33f34219b4a554c511faa4da\": {\n          \"id\": \"3c232bba33f34219b4a554c511faa4da\",\n          \"name\": \"Reset Question Index\",\n          \"script\": \"(function execute() {\\n    vaVars.questionIndex = -1;\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          }\n        },\n        \"9f8dfc6260824d0b863c4275cbd6e2f3\": {\n          \"id\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Confirmation\"\n        },\n        \"b6173737c4e740c584b5efe1424aec8b\": {\n          \"id\": \"b6173737c4e740c584b5efe1424aec8b\",\n          \"stepType\": \"StandaloneAIReferenceChoicePrompt\",\n          \"name\": \"Show reference question\",\n          \"purpose\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"instructions\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"inputs\": [\n            {\n              \"itemId\": \"b70e2bd9da1e435093a4dfa8ca6b7429\",\n              \"displayName\": \"Show reference question\",\n              \"name\": \"show_reference_question\",\n              \"description\": \"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\",\n              \"type\": \"reference\",\n              \"variableId\": \"1b42a3cd06f14eda968880b670491ebb\",\n              \"choices\": [\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                },\n                {\n                  \"label\": \"\",\n                  \"value\": \"\"\n                }\n              ],\n              \"mode\": \"external\",\n              \"script\": \"(function execute() {\\n    var options = [];\\n    var table = vaVars.currentQuestionReferenceTable;\\n    var condition = vaVars.currentQuestionReferenceCondition;\\n    if (!table)\\n        return options;\\n \\n    var taskExtensions = new TableUtils(\\\"task\\\").getTableExtensions();\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\n\\n    var gr = new GlideRecord(table);\\n    if (condition)\\n        gr.addEncodedQuery(condition);\\n    gr.query();\\n    while (gr.next()) {\\n        options.push({\\n            'render_style':'bubble',\\n            'value': gr.sys_id + '',\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\n        });\\n    }\\n    return options;\\n})()\",\n              \"condition\": {\n                \"value\": \"(function execute() {\\n    var options = [];\\n    var table = vaVars.currentQuestionReferenceTable;\\n    var condition = vaVars.currentQuestionReferenceCondition;\\n    if (!table)\\n        return options;\\n \\n    var taskExtensions = new TableUtils(\\\"task\\\").getTableExtensions();\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\n\\n    var gr = new GlideRecord(table);\\n    if (condition)\\n        gr.addEncodedQuery(condition);\\n    gr.query();\\n    while (gr.next()) {\\n        options.push({\\n            'render_style':'bubble',\\n            'value': gr.sys_id + '',\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\n        });\\n    }\\n    return options;\\n})()\",\n                \"mode\": \"external_script\"\n              },\n              \"stepType\": \"ReferenceChoicePrompt\",\n              \"enforcePrompt\": true,\n              \"skippable\": {\n                \"mode\": \"script\",\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"\n              },\n              \"promptMessage\": {\n                \"value\": \"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\",\n                \"mode\": \"script\"\n              },\n              \"inputType\": {\n                \"format\": \"Text\",\n                \"script\": \"\"\n              },\n              \"hasCardHeader\": false,\n              \"cardMetadata\": {\n                \"mode\": \"card\",\n                \"metadataScript\": \"\",\n                \"cardTemplate\": \"\",\n                \"cardFields\": {},\n                \"cardDefinition\": {}\n              },\n              \"isMultipleSelect\": false\n            }\n          ],\n          \"outputs\": [],\n          \"advanced_parameters\": \"\",\n          \"confirmSummary\": false,\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if ((vaVars.currentQuestionType === 'reference')) {\\n        vaInputs.show_reference_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"\n          },\n          \"hiddenVariableIds\": [\n            \"498f5de051d6461d87508d10b8a73ecf\"\n          ],\n          \"hiddenVariableNames\": [\n            \"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\"\n          ],\n          \"standalone\": true,\n          \"variableIds\": [\n            \"1b42a3cd06f14eda968880b670491ebb\"\n          ],\n          \"useSlots\": false,\n          \"slots\": \"\"\n        },\n        \"ca955a1d346d48b09e9ce792dde52cc3\": {\n          \"id\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Survey Active?\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"d723d392011a4489b5e9707ea710ae01\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"target\": \"da165a652daf475698c988c6427d008f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    gs.warn(\\\"Survey is not active\\\")\\n    return vaVars.active != true;\\n})()\\n\"\n          },\n          \"label\": \"No\",\n          \"fromNode\": \"- Is Survey Active\",\n          \"toNode\": \"da165a652daf475698c988c6427d008f\",\n          \"toEdge\": \"d723d392011a4489b5e9707ea710ae01\",\n          \"addNode\": {},\n          \"nodeEntries\": {}\n        },\n        {\n          \"id\": \"d5d8414f7d124779a993b68bf5fb0c83\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n          \"target\": \"4761ab4e62324e3cb07ce4efc77ffd1f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9c490fb1ee7b48e2ab62d5120713a01f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8d2ac71ed40a416a9751e5bd73a6e442\",\n          \"target\": \"8a8d038a0f75488885032aceabd284ce\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"380d37400e614773a95863c9a11548ab\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"target\": \"369375049a91494e9da6cd6e6cb3cb28\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.currentIsDependencySatisfied;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"ad83e8a8966b4569bf2a2adc0acf21c0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"385869dc18c746b88db71bdd7c349c56\",\n          \"target\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e0feebc1fe63415aaa292ddf81cb735d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8ad01595341c4a6186e46eb203320658\",\n          \"target\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e9629798f480430ca040141729435c8a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"280229f5f0f74d11a6d06328dfb8fa1a\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"65ebda13c269463d875828687d4d02c5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9ee3c8b3d800414c89edc50c2746da57\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.currentIsDependencySatisfied;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"87d89661bc144db1930085298213794f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"target\": \"385869dc18c746b88db71bdd7c349c56\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.questionIndex < vaVars.questionCount;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"af0cf0a9cffd4cb88e90a49da908d3aa\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"target\": \"74fc296442cc4d7f8269e94e25cad5a4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a59671cb37be433ca9aad55c9f432474\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"74fc296442cc4d7f8269e94e25cad5a4\",\n          \"target\": \"da165a652daf475698c988c6427d008f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"921b07f0136140b3b3c3dd1ab561bb08\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bbe4918b84a9426abbec7d055f7f555a\",\n          \"target\": \"8351c5b9bf8942ff8d31f773b77a5ee3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4c33e19c61de47b6a365058f905ba7db\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8351c5b9bf8942ff8d31f773b77a5ee3\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ee2e867ed68047d794c46b45bc4ce496\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8a8d038a0f75488885032aceabd284ce\",\n          \"target\": \"64d85b2098094a4fa02f25f7a1444c50\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0ec6f85012064093931d18af01990021\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"64d85b2098094a4fa02f25f7a1444c50\",\n          \"target\": \"e8625b3c4b794d769bb0da9d0a606848\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4b32d599cc7145c9bef29624ed16ce09\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e8625b3c4b794d769bb0da9d0a606848\",\n          \"target\": \"cb013d5f2f4b4d0789b486a504e6d2f2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"166e3abc2610434380c01a42e67a6e57\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f9950611be314fe6b0c891e8e65771d2\",\n          \"target\": \"607a63448c1a4acca85166124f375118\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"240492096e0e4691a1481592d27639d2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"607a63448c1a4acca85166124f375118\",\n          \"target\": \"280229f5f0f74d11a6d06328dfb8fa1a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.currentAnswerValidation;\\n})()\"\n          },\n          \"label\": \"In range\"\n        },\n        {\n          \"id\": \"11d51d8d83d4441dbd99f5ddff1399a5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"607a63448c1a4acca85166124f375118\",\n          \"target\": \"194fae9f28f045ac94643564ef50c9db\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.currentAnswerValidation;\\n})()\"\n          },\n          \"label\": \"Out of range\"\n        },\n        {\n          \"id\": \"fb80daf341154f44b06eed52008d631b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"194fae9f28f045ac94643564ef50c9db\",\n          \"target\": \"369375049a91494e9da6cd6e6cb3cb28\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f499ad9ec75d4d029dc327aeada3ff88\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"369375049a91494e9da6cd6e6cb3cb28\",\n          \"target\": \"26cffe08aa7147c79ffc7489da676135\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6932b81a81aa40239c7279a917bb3816\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"26cffe08aa7147c79ffc7489da676135\",\n          \"target\": \"8d2ac71ed40a416a9751e5bd73a6e442\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1d4e280c848b4646967db37b37aa6971\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c24324650a514984946fed64207f0c24\",\n          \"target\": \"c0f7a2a49b4f49688d9a1c1dd4e216f9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e5675c80eaaf4501b0872eb2375e31a7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c0f7a2a49b4f49688d9a1c1dd4e216f9\",\n          \"target\": \"8c9927f71ad04890afd342b20df99100\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8f26f9a4757b45299f913e7ca3b948d1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8c9927f71ad04890afd342b20df99100\",\n          \"target\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"verify_response=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"d52c9a7bde9841f5a5fe1e96330547a2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8c9927f71ad04890afd342b20df99100\",\n          \"target\": \"3c232bba33f34219b4a554c511faa4da\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"verify_response=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"339812eec1c44e0ba4847f30f4f5e5d0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3c232bba33f34219b4a554c511faa4da\",\n          \"target\": \"8ad01595341c4a6186e46eb203320658\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"83c8dcc16e06476b8bdb8a991918171e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca66aaa54c614102a4a2fd4bad818b9a\",\n          \"target\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.questionIndex >= vaVars.questionCount;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"8e5c522a68604d14b48d408ab8d30df0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"target\": \"c24324650a514984946fed64207f0c24\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"confirmationneeded=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Confirmation?\"\n        },\n        {\n          \"id\": \"53df8ead704541ba8b2b12abd376513d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9f8dfc6260824d0b863c4275cbd6e2f3\",\n          \"target\": \"6460cac852834b46a4977c093a2b1a67\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"confirmationneeded!=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"dfb7472e691f4770a126df453f8bd986\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"cb013d5f2f4b4d0789b486a504e6d2f2\",\n          \"target\": \"b6173737c4e740c584b5efe1424aec8b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4771447e2c9e47a497c00226182f0aa2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b6173737c4e740c584b5efe1424aec8b\",\n          \"target\": \"f9950611be314fe6b0c891e8e65771d2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fe8bc0685a84441e85e38f22c6d8f929\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4761ab4e62324e3cb07ce4efc77ffd1f\",\n          \"target\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9f77c4762dd94e248ecc9bda5e2cf8d0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ca955a1d346d48b09e9ce792dde52cc3\",\n          \"target\": \"bbe4918b84a9426abbec7d055f7f555a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.active == true;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"42731da272e043d29de8a18ae4abe8ec\": {\n      \"id\": \"42731da272e043d29de8a18ae4abe8ec\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"surveyInstanceId\",\n      \"label\": \"surveyInstanceId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a019f4d9d2034f1e8ce4413ad6814d4c\": {\n      \"id\": \"a019f4d9d2034f1e8ce4413ad6814d4c\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"surveyQuestions\",\n      \"label\": \"surveyQuestions\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4606ff81e3b1466dba105ac8db0a3ff1\": {\n      \"id\": \"4606ff81e3b1466dba105ac8db0a3ff1\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"-1\"\n      },\n      \"name\": \"questionIndex\",\n      \"label\": \"questionIndex\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"701eeb0ead3946b4a95fc310996f51d5\": {\n      \"id\": \"701eeb0ead3946b4a95fc310996f51d5\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"questionCount\",\n      \"label\": \"questionCount\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"e0b97ea5de424260a17d367b713e6233\": {\n      \"id\": \"e0b97ea5de424260a17d367b713e6233\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"{}\"\n      },\n      \"name\": \"surveyAnswers\",\n      \"label\": \"surveyAnswers\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5fa5bab12ab3407fa0243a6e4b1e5b55\": {\n      \"id\": \"5fa5bab12ab3407fa0243a6e4b1e5b55\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"choice,scale,numericscale\"\n      },\n      \"name\": \"choiceTypes\",\n      \"label\": \"choiceTypes\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"953851ffa4294d04859d006bf28a4986\": {\n      \"id\": \"953851ffa4294d04859d006bf28a4986\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionId\",\n      \"label\": \"currentQuestionId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1d2077df93314785b211efe410798278\": {\n      \"id\": \"1d2077df93314785b211efe410798278\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionType\",\n      \"label\": \"currentQuestionType\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"00d261d656824f6f8f150a2025f4eaae\": {\n      \"id\": \"00d261d656824f6f8f150a2025f4eaae\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionMetric\",\n      \"label\": \"currentQuestionMetric\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"601f508ef27a49a18330230ddcc12772\": {\n      \"id\": \"601f508ef27a49a18330230ddcc12772\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"currentQuestionDisplay\",\n      \"label\": \"currentQuestionDisplay\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b56216c2f682436d9e56d9ef36471bcb\": {\n      \"id\": \"b56216c2f682436d9e56d9ef36471bcb\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"introduction\",\n      \"label\": \"introduction\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"0c33e298eff44fc88364434b538e805f\": {\n      \"id\": \"0c33e298eff44fc88364434b538e805f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"endNote\",\n      \"label\": \"endNote\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6545133e2b144832a1ecea359dcc39b9\": {\n      \"id\": \"6545133e2b144832a1ecea359dcc39b9\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"string,long,percentage\"\n      },\n      \"name\": \"textTypes\",\n      \"label\": \"textTypes\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"dd7230f4e76642c4b1676e04fa2af480\": {\n      \"id\": \"dd7230f4e76642c4b1676e04fa2af480\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionMax\",\n      \"label\": \"currentQuestionMax\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3f8a633cceb94a7a8c29a2622f003795\": {\n      \"id\": \"3f8a633cceb94a7a8c29a2622f003795\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionMin\",\n      \"label\": \"currentQuestionMin\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"cf9a19900c7043bd817ff9f5794941ed\": {\n      \"id\": \"cf9a19900c7043bd817ff9f5794941ed\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentAnswerValidation\",\n      \"label\": \"currentAnswerValidation\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"607bdaced73d4d7fab9239c0d64a4210\": {\n      \"id\": \"607bdaced73d4d7fab9239c0d64a4210\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"''\"\n      },\n      \"name\": \"currentAnswerErrorMsg\",\n      \"label\": \"currentAnswerErrorMsg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"bba30ac7475c47cc93da35130951478b\": {\n      \"id\": \"bba30ac7475c47cc93da35130951478b\",\n      \"name\": \"show_attachment_question\",\n      \"label\": \"Show Attachment Question\",\n      \"varType\": \"image\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"64d85b2098094a4fa02f25f7a1444c50\",\n      \"isHidden\": false\n    },\n    \"1132a62678c24bbda688337615fd51bb\": {\n      \"id\": \"1132a62678c24bbda688337615fd51bb\",\n      \"name\": \"surveyid\",\n      \"label\": \"SurveyId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n      \"isHidden\": false\n    },\n    \"e5e2dc8c74a64bf7ba531a2b734bd9cd\": {\n      \"id\": \"e5e2dc8c74a64bf7ba531a2b734bd9cd\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"\"\n      },\n      \"name\": \"surveyVerificationMsg\",\n      \"label\": \"surveyVerificationMsg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"75bc445130284002947077d668cac779\": {\n      \"id\": \"75bc445130284002947077d668cac779\",\n      \"name\": \"confirmationneeded\",\n      \"label\": \"ConfirmationNeeded\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n      \"isHidden\": false\n    },\n    \"f4cfc3cbbdca4d46b23a1de57709a8e0\": {\n      \"id\": \"f4cfc3cbbdca4d46b23a1de57709a8e0\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"true\"\n      },\n      \"name\": \"currentQuestionMandatory\",\n      \"label\": \"currentQuestionMandatory\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"ba2a161b94a3468a86603955cca630a1\": {\n      \"id\": \"ba2a161b94a3468a86603955cca630a1\",\n      \"name\": \"savequestionstocontext\",\n      \"label\": \"SaveQuestionsToContext\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"b90ef5f7024d4e34b5ceaf628345df9c\",\n      \"isHidden\": false\n    },\n    \"1ebd3fa354824ebcb2abd32c7f5a08ee\": {\n      \"id\": \"1ebd3fa354824ebcb2abd32c7f5a08ee\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_topic_postchat_user_id\",\n      \"label\": \"_topic_postchat_user_id\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"fbdedb6037d443fc94ac909130d72657\": {\n      \"id\": \"fbdedb6037d443fc94ac909130d72657\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"surveyName\",\n      \"label\": \"surveyName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"62b3a6b4779d449faee2e5abee5678a5\": {\n      \"id\": \"62b3a6b4779d449faee2e5abee5678a5\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_pre_chat_survey_name\",\n      \"label\": \"LiveAgent_pre_chat_survey_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b712f462443f422882112475625c1f51\": {\n      \"id\": \"b712f462443f422882112475625c1f51\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_post_chat_survey_name\",\n      \"label\": \"LiveAgent_post_chat_survey_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c561d907f23a4ee485d105e3deefe041\": {\n      \"id\": \"c561d907f23a4ee485d105e3deefe041\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_pre_assessment_instance\",\n      \"label\": \"LiveAgent_pre_assessment_instance\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5f4fab2392e34755a790d59670b35294\": {\n      \"id\": \"5f4fab2392e34755a790d59670b35294\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"LiveAgent_post_assessment_instance\",\n      \"label\": \"LiveAgent_post_assessment_instance\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"b0a2dbc7899742b19e9f2d904b7bfc3e\": {\n      \"id\": \"b0a2dbc7899742b19e9f2d904b7bfc3e\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"defaultSurveyName\",\n      \"label\": \"defaultSurveyName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9c7e90dca34b47489835d0bcdc8e4933\": {\n      \"id\": \"9c7e90dca34b47489835d0bcdc8e4933\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionFieldValidator\",\n      \"label\": \"currentQuestionFieldValidator\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a7b460d515ca4a2087c92d2c8bf5fbc9\": {\n      \"id\": \"a7b460d515ca4a2087c92d2c8bf5fbc9\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionReferenceTable\",\n      \"label\": \"currentQuestionReferenceTable\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6ec01bc01b7144ec90530b7f9af69bb2\": {\n      \"id\": \"6ec01bc01b7144ec90530b7f9af69bb2\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"currentQuestionReferenceCondition\",\n      \"label\": \"currentQuestionReferenceCondition\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3f44cb42666b408fbb6f952fe939d920\": {\n      \"id\": \"3f44cb42666b408fbb6f952fe939d920\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"active\",\n      \"label\": \"active\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"2f2b481c82a94d1996f70567027cbb41\": {\n      \"id\": \"2f2b481c82a94d1996f70567027cbb41\",\n      \"name\": \"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\",\n      \"label\": \"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"b5790fea6a77427aaf10a8cb5ee3cef0\": {\n      \"id\": \"b5790fea6a77427aaf10a8cb5ee3cef0\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Boolean Question\",\n      \"name\": \"show_boolean_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"8a8d038a0f75488885032aceabd284ce\",\n      \"isHidden\": false,\n      \"description\": \"This type of question allows users to choose between two distinct options, typically representing \\\"Yes\\\" or \\\"No,\\\" \\\"True\\\" or \\\"False,\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\"\n    },\n    \"5229b91bab174a52829686976666ed1b\": {\n      \"id\": \"5229b91bab174a52829686976666ed1b\",\n      \"name\": \"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\",\n      \"label\": \"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"0775ff6cf5b94c4692d1a7be6b9fe010\": {\n      \"id\": \"0775ff6cf5b94c4692d1a7be6b9fe010\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Text Input Question\",\n      \"name\": \"show_text_input_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"369375049a91494e9da6cd6e6cb3cb28\",\n      \"isHidden\": false,\n      \"description\": \"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\"\n    },\n    \"9421933d83ba4506b292d81bb60b2999\": {\n      \"id\": \"9421933d83ba4506b292d81bb60b2999\",\n      \"name\": \"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\",\n      \"label\": \"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"dea29579e2c44cdab652446be7273444\": {\n      \"id\": \"dea29579e2c44cdab652446be7273444\",\n      \"varType\": \"reference\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Choice Question\",\n      \"name\": \"show_choice_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"external\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"8d2ac71ed40a416a9751e5bd73a6e442\",\n      \"isHidden\": false,\n      \"description\": \"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\"\n    },\n    \"e5d8423283fc4d2595fd661bd5a2eb69\": {\n      \"id\": \"e5d8423283fc4d2595fd661bd5a2eb69\",\n      \"name\": \"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\",\n      \"label\": \"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"fbe9af88d71a49f3845d37b4a93bbe15\": {\n      \"id\": \"fbe9af88d71a49f3845d37b4a93bbe15\",\n      \"varType\": \"date_time\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Date Question\",\n      \"name\": \"show_date_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"date\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"e8625b3c4b794d769bb0da9d0a606848\",\n      \"isHidden\": false,\n      \"description\": \"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\"\n    },\n    \"a7dc2985e75f4c5cbd8b508e8ab6620c\": {\n      \"id\": \"a7dc2985e75f4c5cbd8b508e8ab6620c\",\n      \"name\": \"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\",\n      \"label\": \"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"c1d6aa7022164ba6a2b0291228d96249\": {\n      \"id\": \"c1d6aa7022164ba6a2b0291228d96249\",\n      \"varType\": \"date_time\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Datetime Question\",\n      \"name\": \"show_datetime_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"date_time\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"cb013d5f2f4b4d0789b486a504e6d2f2\",\n      \"isHidden\": false,\n      \"description\": \"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\"\n    },\n    \"78de1c7f496f430985b8d3ac5f93acac\": {\n      \"id\": \"78de1c7f496f430985b8d3ac5f93acac\",\n      \"name\": \"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\",\n      \"label\": \"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"b600afffba2d46a1a225c17e62ee4734\": {\n      \"id\": \"b600afffba2d46a1a225c17e62ee4734\",\n      \"varType\": \"carousel-image\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Image Scale Question\",\n      \"name\": \"show_image_scale_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"26cffe08aa7147c79ffc7489da676135\",\n      \"isHidden\": false,\n      \"description\": \"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\"\n    },\n    \"3148914579f645b88e5e0bbc22ab9cf4\": {\n      \"id\": \"3148914579f645b88e5e0bbc22ab9cf4\",\n      \"name\": \"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\",\n      \"label\": \"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"a813e0458a174bb0b415483fe89c00e4\": {\n      \"id\": \"a813e0458a174bb0b415483fe89c00e4\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Verify Response\",\n      \"name\": \"verify_response\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"c0f7a2a49b4f49688d9a1c1dd4e216f9\",\n      \"isHidden\": false,\n      \"description\": \"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\"\n    },\n    \"498f5de051d6461d87508d10b8a73ecf\": {\n      \"id\": \"498f5de051d6461d87508d10b8a73ecf\",\n      \"name\": \"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\",\n      \"label\": \"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\",\n      \"isReferenceable\": false,\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      }\n    },\n    \"1b42a3cd06f14eda968880b670491ebb\": {\n      \"id\": \"1b42a3cd06f14eda968880b670491ebb\",\n      \"varType\": \"reference\",\n      \"category\": \"vaInputs\",\n      \"label\": \"Show Reference Question\",\n      \"name\": \"show_reference_question\",\n      \"choices\": [\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        {\n          \"label\": \"\",\n          \"value\": \"\"\n        }\n      ],\n      \"mode\": \"external\",\n      \"table\": \"\",\n      \"aiInput\": true,\n      \"inputId\": 0,\n      \"nodeId\": \"b6173737c4e740c584b5efe1424aec8b\",\n      \"isHidden\": false,\n      \"description\": \"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"bfa94e44ff2202101b82157c03cb1485","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_bfa94e44ff2202101b82157c03cb1485","sys_updated_by":"admin","sys_created_on":"2024-05-28 21:06:12","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"bdbae08aad2347b98343aa611c7d6703\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"bdbae08aad2347b98343aa611c7d6703\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"bdbae08aad2347b98343aa611c7d6703\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"b90ef5f7024d4e34b5ceaf628345df9c\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"da165a652daf475698c988c6427d008f\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n\\tvar gr = new GlideRecord('asmt_metric_type');\\n\\tgr.get(vaInputs.surveyid);vaVars.active = gr.active;vaVars.endNote = vaSystem.getTranslation(gr, 'end_note', vaContext.getRequesterLang(), gr.end_note.getValue() || '');vaVars.introduction = vaSystem.getTranslation(gr, 'introduction', vaContext.getRequesterLang(), gr.introduction.getValue() || '');vaVars.surveyName = gr.name.toString();vaVars.surveyVerificationMsg = vaSystem.getSurveyVerificationMessage();\\n})()\",\"id\":\"4761ab4e62324e3cb07ce4efc77ffd1f\",\"name\":\"Load survey instance\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var gr = new GlideRecord('asmt_metric_category');\\n    gr.addQuery('metric_type', vaInputs.surveyid);\\n    gr.query();\\n    gr.next();\\n\\n    var surveyCategory = gr.getUniqueValue();\\n\\n    var gr = new GlideRecord('asmt_metric')\\n    gr.addQuery('category', surveyCategory);\\n    gr.addQuery('active', true);\\n    gr.orderBy('order');\\n    gr.query();\\n\\n    var questions = [];\\n    while (gr.next()) {\\n        var question = {\\n            sys_id: gr.getUniqueValue(),\\n            scale: gr.scale + '',\\n            metric: gr.sys_id + '',\\n            type: gr.datatype + '',\\n            display: vaSystem.getTranslation(gr, 'question', vaContext.getRequesterLang(), gr.question) + '',\\n            dependsOn: gr.depends_on + '',\\n            displayedWhen: gr.displayed_when + '',\\n            name: gr.name + '',\\n            max: gr.max + '',\\n            min: gr.min + '',\\n            mandatory: gr.mandatory + '',\\n            field_validation: gr.field_validation + '',\\n            reference_table: gr.reference_table + '',\\n            condition: gr.condition + '',\\n        };\\n\\n        // boolean and checkbox type questions use different displayed_when fields\\n        var dependsOnType = gr.depends_on.datatype + '';\\n        if (dependsOnType === 'boolean')\\n            question['displayedWhen'] = gr.displayed_when_yesno + '';\\n        else if (dependsOnType === 'checkbox')\\n            question['displayedWhen'] = gr.displayed_when_checkbox + '';\\n\\n        questions.push(question);\\n    }\\n    vaVars.surveyQuestions = JSON.stringify(questions);\\n    vaVars.questionCount = questions.length;\\n})()\",\"id\":\"bbe4918b84a9426abbec7d055f7f555a\",\"name\":\"Load questions\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.questionIndex++;\\n    if (!(vaVars.questionCount && vaVars.questionIndex < vaVars.questionCount))\\n        return;\\n\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n\\n    // Set question type & display value\\n    vaVars.currentQuestionId = questions[i].sys_id;\\n    vaVars.currentQuestionType = questions[i].type;\\n    vaVars.currentQuestionMetric = questions[i].metric;\\n    vaVars.currentQuestionDisplay = questions[i].display;\\n    vaVars.currentQuestionMax = questions[i].max;\\n    vaVars.currentQuestionMin = questions[i].min;\\n    vaVars.currentQuestionMandatory = questions[i].mandatory;\\n    vaVars.currentQuestionFieldValidator = questions[i].field_validation;\\n    vaVars.currentQuestionReferenceTable = questions[i].reference_table;\\n    vaVars.currentQuestionReferenceCondition = questions[i].condition;\\n\\n    // Load choices if relevant\\n    if (questions[i].type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(questions[i].type) > -1) {\\n        questions[i].choices = getChoices(questions[i]);\\n        vaVars.surveyQuestions = JSON.stringify(questions);\\n    }\\n})();\\n\\nfunction getChoices(q) {\\n    var gr = new GlideRecord('asmt_metric_definition');\\n    gr.addQuery('metric', q.metric);\\n    gr.orderBy('order');\\n    gr.query();\\n\\n    var choices = [];\\n    while (gr.next()) {\\n        choices.push({\\n            sys_id: gr.getUniqueValue(),\\n            display: vaSystem.getTranslation(gr, 'display', vaContext.getRequesterLang(),gr.display),\\n            value: gr.getValue('value'),\\n            selected: gr.getDisplayValue('selected_image'),\\n            unselected: gr.getDisplayValue('unselected_image')\\n        });\\n    }\\n    return choices;\\n}\",\"id\":\"8ad01595341c4a6186e46eb203320658\",\"name\":\"Set next question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Out of questions?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.questionIndex < vaVars.questionCount;\\n})()\\n\"},\"id\":\"8f1e5c9fd47845a1a5572b957062e587\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.questionIndex >= vaVars.questionCount;\\n})()\\n\"},\"id\":\"24aa8e916a88482295023833f9c12c98\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"ca66aaa54c614102a4a2fd4bad818b9a\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n    answers[vaVars.currentQuestionId] = getInput();\\n    vaVars.surveyAnswers = JSON.stringify(answers);\\n})();\\n\\nfunction getInput() {\\n    var values = {'value': null, 'Qtype': vaVars.currentQuestionType, 'displayValue':null};\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        values.value = getValueIfSet(vaInputs.show_choice_question);\\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_choice_question,values.value);\\n    }\\n\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        values.value = getValueIfSet(vaInputs.show_text_input_question);\\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_text_input_question,values.value);\\n    }\\n\\n    switch (vaVars.currentQuestionType) {\\n        case 'imagescale':\\n            values.value = getValueIfSet(vaInputs.show_image_scale_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_image_scale_question,values.value);\\n            var questions = JSON.parse(vaVars.surveyQuestions);\\n            //stores correct displayValue, vaInputs returns display+value\\n            if(vaInputs.show_image_scale_question && vaInputs.show_image_scale_question != null){\\n                questions[vaVars.questionIndex].choices.forEach(function(c){\\n                    if(c.value === values.value)\\n                        values.displayValue = c.display;\\n                });\\n            }\\n            break;\\n        case 'boolean':\\n            values.value = getValueIfSet(vaInputs.show_boolean_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\\n            break;\\n        case 'checkbox':\\n            values.value= getValueIfSet(vaInputs.show_boolean_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\\n            break;\\n        case 'attachment':\\n            values.value = getValueIfSet(vaInputs.show_attachment_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_attachment_question,values.value);\\n            break;\\n        case 'date':\\n            const date = getValueIfSet(vaInputs.show_date_question);\\n            values.value = (date != null) ? date.toString() : null;\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_date_question,values.value);\\n            break;\\n        case 'datetime':\\n            const dateTime = getValueIfSet(vaInputs.show_datetime_question);\\n            values.value = (dateTime != null) ? dateTime.toString() : null;\\n            vaInputs.show_datetime_question.setTimeZone(vaContext.getDeviceTimeZone());\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_datetime_question,values.value);\\n            break;\\n        case 'reference':\\n            values.value = getValueIfSet(vaInputs.show_reference_question);\\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_reference_question,values.value);\\n    }\\n    return values;\\n}\\n\\nfunction getValueIfSet(field){\\n    return field && field.isValueSet() ? field.getValue() : null;\\n}\\n\\nfunction getDisplayValueIfSet(field, val){\\n    if (!field || field == null)\\n       return val;\\n    var dv = field.getDisplayValue();\\n     return dv && dv.length > 0  ? dv : val;\\n}\",\"id\":\"280229f5f0f74d11a6d06328dfb8fa1a\",\"name\":\"Set answers\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Does question satisfy dependency?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentIsDependencySatisfied;\\n})()\\n\"},\"id\":\"48fc587c9e73478dbd55682862668182\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.currentIsDependencySatisfied;\\n})()\\n\"},\"id\":\"68d5eda18db54d50b43f5dde17c5f92d\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"9ee3c8b3d800414c89edc50c2746da57\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var i = vaVars.questionIndex;\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var q = questions[i];\\n\\n    var satisfied = true;\\n    var hasDependency = !(!q.dependsOn);\\n    vaVars.currentIsDependencySatisfied = !hasDependency || isSat(q);\\n})();\\n\\nfunction isSat(q) {\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n\\n    var answerValid = false;\\n    questions.forEach(function(question) {\\n        if (question.metric !== q.dependsOn)\\n            return;\\n\\n        var answerExists = question.sys_id in answers;\\n        if (!answerExists)\\n            return;\\n\\n        var selectedChoice = answers[question.sys_id]['value'];\\n\\n        if (question.type === 'boolean' || question.type === 'checkbox') {\\n            if ((selectedChoice === true && q.displayedWhen === '1') || (selectedChoice === false && q.displayedWhen === '0'))\\n                answerValid = true;\\n        } else {\\n            var choices = question.choices.filter(function(c) {\\n                return c.value === selectedChoice;\\n            });\\n\\n            if (choices.length && choices[0].sys_id)\\n                answerValid = q.displayedWhen.indexOf(choices[0].sys_id) !== -1;\\n        }\\n    });\\n\\n    return answerValid;\\n}\",\"id\":\"385869dc18c746b88db71bdd7c349c56\",\"name\":\"Check question dependency\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Data Collector\",\"library_topic_id\":\"4c19933e4322211006650464dbb8f22d\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"definition\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n        var config = {\\n            configuration: {\\\"purpose\\\":\\\"{{0}}\\\",\\\"inputs\\\":[{\\\"name\\\":\\\"show_boolean_question\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\",\\\"skipMode\\\":\\\"'script'\\\",\\\"skipCondition\\\":\\\"(function() {vaVars = _taskVaVars[{{4}}];vaInputs = _taskVaInputs[{{5}}];return (function execute() {\\\\n   return vaVars.currentQuestionMandatory === 'false';\\\\n})()\\\\n;})()\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{6}}];vaInputs = _taskVaInputs[{{7}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\"}],\\\"instructions\\\":\\\"{{1}}\\\",\\\"advanced_parameters\\\":\\\"{{2}}\\\",\\\"callingTask\\\":\\\"{{3}}\\\",\\\"confirm_summary\\\":false,\\\"slots\\\":[{\\\"name\\\":\\\"show_text_input_question\\\",\\\"type\\\":\\\"string\\\",\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{8}}];vaInputs = _taskVaInputs[{{9}}];return (function execute() {\\\\n    if (vaVars.currentQuestionType === 'long')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else if (vaVars.currentQuestionType === 'percentage')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else\\\\n        return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"script\\\":\\\"function validate(value) {\\\\n    // for \\\\\\\"skip\\\\\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\\\n        return {\\\\n            valid: true,\\\\n        }; \\\\n\\\\n    // for string type with validator defined, and question is not skipped\\\\n    var validatorGr = new GlideRecord(\\\\\\\"sys_cs_field_script_validator\\\\\\\");\\\\n    if (!validatorGr.isValid())\\\\n\\\\t    return {\\\\n           valid: false,\\\\n           error: gs.getMessageLang(\\\\\\\"validator table does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n\\\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\\\n        var scriptBuild = \\\\\\\"(\\\\\\\" + validatorGr.validator + \\\\\\\")('\\\\\\\"+ value + \\\\\\\"');\\\\\\\";\\\\n        var isValidAnswer = eval(scriptBuild);\\\\n        return {\\\\n            valid: isValidAnswer,\\\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\\\n        };\\\\n    } else {\\\\n        return {\\\\n            valid: false,\\\\n            error: gs.getMessageLang(\\\\\\\"validator record does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n    }\\\\n}\\\"},{\\\"name\\\":\\\"show_choice_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{10}}];vaInputs = _taskVaInputs[{{11}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{12}}];vaInputs = _taskVaInputs[{{13}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'label': c.display,\\\\n            'value': c.value\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"},{\\\"name\\\":\\\"show_date_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{14}}];vaInputs = _taskVaInputs[{{15}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date\\\"},{\\\"name\\\":\\\"show_datetime_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{16}}];vaInputs = _taskVaInputs[{{17}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date_time\\\"},{\\\"name\\\":\\\"show_image_scale_question\\\",\\\"type\\\":\\\"carousel\\\",\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{18}}];vaInputs = _taskVaInputs[{{19}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{20}}];vaInputs = _taskVaInputs[{{21}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'Name': c.display,\\\\n            'Value': c.value,\\\\n            'Body': c.unselected\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\"},{\\\"name\\\":\\\"verify_response\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\",\\\"message\\\":\\\"{{22}}\\\"},{\\\"name\\\":\\\"show_reference_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{23}}];vaInputs = _taskVaInputs[{{24}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{25}}];vaInputs = _taskVaInputs[{{26}}];return (function execute() {\\\\n    var options = [];\\\\n    var table = vaVars.currentQuestionReferenceTable;\\\\n    var condition = vaVars.currentQuestionReferenceCondition;\\\\n    if (!table)\\\\n        return options;\\\\n \\\\n    var taskExtensions = new TableUtils(\\\\\\\"task\\\\\\\").getTableExtensions();\\\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\\\n\\\\n    var gr = new GlideRecord(table);\\\\n    if (condition)\\\\n        gr.addEncodedQuery(condition);\\\\n    gr.query();\\\\n    while (gr.next()) {\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'value': gr.sys_id + '',\\\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\\\n        });\\\\n    }\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"}]}\\n        };\\n        return JSON.stringify(config);\\n    })()\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"inputs\",\"metadata\":{\"type\":\"String\",\"list\":true,\"items\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"Collect user input\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return vaSystem.getConversationTaskId()})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\\\"{{vaVars.surveyVerificationMsg}}\\\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"}],\"use_items\":true}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"outputs\",\"main_topic_mapped_variable_name\":\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\"}],\"id\":\"8a8d038a0f75488885032aceabd284ce\",\"name\":\"Show boolean question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if ((vaVars.currentQuestionType === 'boolean') || (vaVars.currentQuestionType === 'checkbox')) {\\n        vaInputs.show_boolean_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\"},\"expert_mode\":false,\"variableIds\":[\"b5790fea6a77427aaf10a8cb5ee3cef0\"]},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if(vaInputs.savequestionstocontext == 'true'){ \\n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createAssessments(vaInputs.surveyid, '', gs.getUserID(), false, '', false, '', vaVars._interaction_record_sysid, false, 'interaction');\\n        vaVars.surveyInstanceId = vaVars.surveyInstanceId.substring(0, 32);\\n        vaVars.LiveAgent_pre_assessment_instance = vaVars.surveyInstanceId;\\n        vaVars.LiveAgent_pre_chat_survey_name = vaVars.surveyName;\\n    } else{ \\n        var userId = !gs.nil(vaVars._topic_postchat_user_id) ? vaVars._topic_postchat_user_id : gs.getUserID();\\n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createAssessments(vaInputs.surveyid, '', userId, false, '', false, '', vaVars._interaction_record_sysid, false, 'interaction');\\n        vaVars.surveyInstanceId = vaVars.surveyInstanceId.substring(0, 32);\\n        vaVars.LiveAgent_post_assessment_instance = vaVars.surveyInstanceId;\\n        vaVars.LiveAgent_post_chat_survey_name = vaVars.surveyName;    \\n    }\\n\\n    var answers = JSON.parse(vaVars.surveyAnswers);\\n    var data = {\\n        sysparm_instance_id: vaVars.surveyInstanceId,\\n        sysparm_action: 'submit'\\n    };\\n data.channel = 'va'; \\n    var questionData = new global.TopicPreChatUtil().getQuestionData(vaVars.surveyInstanceId);\\n\\n    Object.keys(answers).forEach(function(q) {\\n        if (answers[q] && answers[q] && answers[q].value != null){ \\n            if (answers[q]['Qtype'] === 'boolean') {\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? '1' : '0';\\n            } else if (answers[q]['Qtype'] === 'checkbox') {\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? 'true' : '';\\n            } else\\n                data['ASMTQUESTION:' + questionData[q].instanceID] = answers[q]['value'];\\n            if (vaInputs.savequestionstocontext == 'true')\\n                saveToContext(questionData[q].name, answers[q], questionData[q].contextVar, questionData[q].type);\\n        }\\n        \\n    });\\n    var response = new global.AssessmentSubmitProcessor().processRequest(data);\\n})()\\n\\nfunction saveToContext(name, a, contextVar, type){\\n        if(contextVar != \\\"\\\") {\\n            var contextVarName = contextVar;\\n        } else {\\n            //remove all special characters and replace spaces with _\\n            var questionName = name.toString().replace(/[^a-zA-Z0-9]/g, '_').replace(/_$/,'');     \\n            //append survey name to question name\\n            var contextVarName = \\\"liveagent_\\\" +vaVars.surveyName +\\\".\\\"+ questionName;\\n        }\\n        vaVars[contextVarName] = a.value.toString();\\n        //for choice questions, store response and not response index as context var\\n        if (type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(type) > -1) { \\n             vaVars[contextVarName] = a.displayValue.toString();    \\n        }\\n}\",\"id\":\"6460cac852834b46a4977c093a2b1a67\",\"name\":\"Submit survey answers\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Data Collector\",\"library_topic_id\":\"4c19933e4322211006650464dbb8f22d\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"definition\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n        var config = {\\n            configuration: {\\\"purpose\\\":\\\"{{0}}\\\",\\\"inputs\\\":[{\\\"name\\\":\\\"show_text_input_question\\\",\\\"type\\\":\\\"string\\\",\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\",\\\"skipMode\\\":\\\"'script'\\\",\\\"skipCondition\\\":\\\"(function() {vaVars = _taskVaVars[{{4}}];vaInputs = _taskVaInputs[{{5}}];return (function execute() {\\\\n   return vaVars.currentQuestionMandatory === 'false';\\\\n})()\\\\n;})()\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{6}}];vaInputs = _taskVaInputs[{{7}}];return (function execute() {\\\\n    if (vaVars.currentQuestionType === 'long')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else if (vaVars.currentQuestionType === 'percentage')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else\\\\n        return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"script\\\":\\\"function validate(value) {\\\\n    // for \\\\\\\"skip\\\\\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\\\n        return {\\\\n            valid: true,\\\\n        }; \\\\n\\\\n    // for string type with validator defined, and question is not skipped\\\\n    var validatorGr = new GlideRecord(\\\\\\\"sys_cs_field_script_validator\\\\\\\");\\\\n    if (!validatorGr.isValid())\\\\n\\\\t    return {\\\\n           valid: false,\\\\n           error: gs.getMessageLang(\\\\\\\"validator table does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n\\\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\\\n        var scriptBuild = \\\\\\\"(\\\\\\\" + validatorGr.validator + \\\\\\\")('\\\\\\\"+ value + \\\\\\\"');\\\\\\\";\\\\n        var isValidAnswer = eval(scriptBuild);\\\\n        return {\\\\n            valid: isValidAnswer,\\\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\\\n        };\\\\n    } else {\\\\n        return {\\\\n            valid: false,\\\\n            error: gs.getMessageLang(\\\\\\\"validator record does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n    }\\\\n}\\\"}],\\\"instructions\\\":\\\"{{1}}\\\",\\\"advanced_parameters\\\":\\\"{{2}}\\\",\\\"callingTask\\\":\\\"{{3}}\\\",\\\"confirm_summary\\\":false,\\\"slots\\\":[{\\\"name\\\":\\\"show_boolean_question\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{8}}];vaInputs = _taskVaInputs[{{9}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\"},{\\\"name\\\":\\\"show_choice_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{10}}];vaInputs = _taskVaInputs[{{11}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{12}}];vaInputs = _taskVaInputs[{{13}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'label': c.display,\\\\n            'value': c.value\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"},{\\\"name\\\":\\\"show_date_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{14}}];vaInputs = _taskVaInputs[{{15}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date\\\"},{\\\"name\\\":\\\"show_datetime_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{16}}];vaInputs = _taskVaInputs[{{17}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date_time\\\"},{\\\"name\\\":\\\"show_image_scale_question\\\",\\\"type\\\":\\\"carousel\\\",\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{18}}];vaInputs = _taskVaInputs[{{19}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{20}}];vaInputs = _taskVaInputs[{{21}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'Name': c.display,\\\\n            'Value': c.value,\\\\n            'Body': c.unselected\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\"},{\\\"name\\\":\\\"verify_response\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\",\\\"message\\\":\\\"{{22}}\\\"},{\\\"name\\\":\\\"show_reference_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{23}}];vaInputs = _taskVaInputs[{{24}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{25}}];vaInputs = _taskVaInputs[{{26}}];return (function execute() {\\\\n    var options = [];\\\\n    var table = vaVars.currentQuestionReferenceTable;\\\\n    var condition = vaVars.currentQuestionReferenceCondition;\\\\n    if (!table)\\\\n        return options;\\\\n \\\\n    var taskExtensions = new TableUtils(\\\\\\\"task\\\\\\\").getTableExtensions();\\\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\\\n\\\\n    var gr = new GlideRecord(table);\\\\n    if (condition)\\\\n        gr.addEncodedQuery(condition);\\\\n    gr.query();\\\\n    while (gr.next()) {\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'value': gr.sys_id + '',\\\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\\\n        });\\\\n    }\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"}]}\\n        };\\n        return JSON.stringify(config);\\n    })()\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"inputs\",\"metadata\":{\"type\":\"String\",\"list\":true,\"items\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"Collect user input\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return vaSystem.getConversationTaskId()})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\\\"{{vaVars.surveyVerificationMsg}}\\\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"}],\"use_items\":true}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"outputs\",\"main_topic_mapped_variable_name\":\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\"}],\"id\":\"369375049a91494e9da6cd6e6cb3cb28\",\"name\":\"Show text input question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_text_input_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"},\"expert_mode\":false,\"variableIds\":[\"0775ff6cf5b94c4692d1a7be6b9fe010\"]},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.endNote}}\"}],\"request_feedback\":true,\"id\":\"74fc296442cc4d7f8269e94e25cad5a4\",\"name\":\"End note\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.introduction}}\"}],\"request_feedback\":true,\"id\":\"8351c5b9bf8942ff8d31f773b77a5ee3\",\"name\":\"Introduction\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Data Collector\",\"library_topic_id\":\"4c19933e4322211006650464dbb8f22d\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"definition\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n        var config = {\\n            configuration: {\\\"purpose\\\":\\\"{{0}}\\\",\\\"inputs\\\":[{\\\"name\\\":\\\"show_choice_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\",\\\"skipMode\\\":\\\"'script'\\\",\\\"skipCondition\\\":\\\"(function() {vaVars = _taskVaVars[{{4}}];vaInputs = _taskVaInputs[{{5}}];return (function execute() {\\\\n    return vaVars.currentQuestionMandatory === 'false';\\\\n})()\\\\n;})()\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{6}}];vaInputs = _taskVaInputs[{{7}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{8}}];vaInputs = _taskVaInputs[{{9}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'label': c.display,\\\\n            'value': c.value\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"}],\\\"instructions\\\":\\\"{{1}}\\\",\\\"advanced_parameters\\\":\\\"{{2}}\\\",\\\"callingTask\\\":\\\"{{3}}\\\",\\\"confirm_summary\\\":false,\\\"slots\\\":[{\\\"name\\\":\\\"show_boolean_question\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{10}}];vaInputs = _taskVaInputs[{{11}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\"},{\\\"name\\\":\\\"show_text_input_question\\\",\\\"type\\\":\\\"string\\\",\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{12}}];vaInputs = _taskVaInputs[{{13}}];return (function execute() {\\\\n    if (vaVars.currentQuestionType === 'long')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else if (vaVars.currentQuestionType === 'percentage')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else\\\\n        return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"script\\\":\\\"function validate(value) {\\\\n    // for \\\\\\\"skip\\\\\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\\\n        return {\\\\n            valid: true,\\\\n        }; \\\\n\\\\n    // for string type with validator defined, and question is not skipped\\\\n    var validatorGr = new GlideRecord(\\\\\\\"sys_cs_field_script_validator\\\\\\\");\\\\n    if (!validatorGr.isValid())\\\\n\\\\t    return {\\\\n           valid: false,\\\\n           error: gs.getMessageLang(\\\\\\\"validator table does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n\\\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\\\n        var scriptBuild = \\\\\\\"(\\\\\\\" + validatorGr.validator + \\\\\\\")('\\\\\\\"+ value + \\\\\\\"');\\\\\\\";\\\\n        var isValidAnswer = eval(scriptBuild);\\\\n        return {\\\\n            valid: isValidAnswer,\\\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\\\n        };\\\\n    } else {\\\\n        return {\\\\n            valid: false,\\\\n            error: gs.getMessageLang(\\\\\\\"validator record does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n    }\\\\n}\\\"},{\\\"name\\\":\\\"show_date_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{14}}];vaInputs = _taskVaInputs[{{15}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date\\\"},{\\\"name\\\":\\\"show_datetime_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{16}}];vaInputs = _taskVaInputs[{{17}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date_time\\\"},{\\\"name\\\":\\\"show_image_scale_question\\\",\\\"type\\\":\\\"carousel\\\",\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{18}}];vaInputs = _taskVaInputs[{{19}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{20}}];vaInputs = _taskVaInputs[{{21}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'Name': c.display,\\\\n            'Value': c.value,\\\\n            'Body': c.unselected\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\"},{\\\"name\\\":\\\"verify_response\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\",\\\"message\\\":\\\"{{22}}\\\"},{\\\"name\\\":\\\"show_reference_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{23}}];vaInputs = _taskVaInputs[{{24}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{25}}];vaInputs = _taskVaInputs[{{26}}];return (function execute() {\\\\n    var options = [];\\\\n    var table = vaVars.currentQuestionReferenceTable;\\\\n    var condition = vaVars.currentQuestionReferenceCondition;\\\\n    if (!table)\\\\n        return options;\\\\n \\\\n    var taskExtensions = new TableUtils(\\\\\\\"task\\\\\\\").getTableExtensions();\\\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\\\n\\\\n    var gr = new GlideRecord(table);\\\\n    if (condition)\\\\n        gr.addEncodedQuery(condition);\\\\n    gr.query();\\\\n    while (gr.next()) {\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'value': gr.sys_id + '',\\\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\\\n        });\\\\n    }\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"}]}\\n        };\\n        return JSON.stringify(config);\\n    })()\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"inputs\",\"metadata\":{\"type\":\"String\",\"list\":true,\"items\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"Collect user input\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return vaSystem.getConversationTaskId()})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\\\"{{vaVars.surveyVerificationMsg}}\\\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"}],\"use_items\":true}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"outputs\",\"main_topic_mapped_variable_name\":\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\"}],\"id\":\"8d2ac71ed40a416a9751e5bd73a6e442\",\"name\":\"Show choice question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_choice_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\\n\"},\"expert_mode\":false,\"variableIds\":[\"dea29579e2c44cdab652446be7273444\"]},{\"type\":\"InputPrompt\",\"variable_id\":\"bba30ac7475c47cc93da35130951478b\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentQuestionDisplay;\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentQuestionMandatory === 'false';\\n})()\\n\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"64d85b2098094a4fa02f25f7a1444c50\",\"name\":\"Show attachment question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.currentQuestionType === 'attachment') {\\n        vaInputs.show_attachment_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"},\"expert_mode\":false,\"formatType\":\"Text\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Data Collector\",\"library_topic_id\":\"4c19933e4322211006650464dbb8f22d\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"definition\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n        var config = {\\n            configuration: {\\\"purpose\\\":\\\"{{0}}\\\",\\\"inputs\\\":[{\\\"name\\\":\\\"show_date_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\",\\\"skipMode\\\":\\\"'script'\\\",\\\"skipCondition\\\":\\\"(function() {vaVars = _taskVaVars[{{4}}];vaInputs = _taskVaInputs[{{5}}];return (function execute() {\\\\n    return vaVars.currentQuestionMandatory === 'false';\\\\n})()\\\\n;})()\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{6}}];vaInputs = _taskVaInputs[{{7}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date\\\"}],\\\"instructions\\\":\\\"{{1}}\\\",\\\"advanced_parameters\\\":\\\"{{2}}\\\",\\\"callingTask\\\":\\\"{{3}}\\\",\\\"confirm_summary\\\":false,\\\"slots\\\":[{\\\"name\\\":\\\"show_boolean_question\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{8}}];vaInputs = _taskVaInputs[{{9}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\"},{\\\"name\\\":\\\"show_text_input_question\\\",\\\"type\\\":\\\"string\\\",\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{10}}];vaInputs = _taskVaInputs[{{11}}];return (function execute() {\\\\n    if (vaVars.currentQuestionType === 'long')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else if (vaVars.currentQuestionType === 'percentage')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else\\\\n        return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"script\\\":\\\"function validate(value) {\\\\n    // for \\\\\\\"skip\\\\\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\\\n        return {\\\\n            valid: true,\\\\n        }; \\\\n\\\\n    // for string type with validator defined, and question is not skipped\\\\n    var validatorGr = new GlideRecord(\\\\\\\"sys_cs_field_script_validator\\\\\\\");\\\\n    if (!validatorGr.isValid())\\\\n\\\\t    return {\\\\n           valid: false,\\\\n           error: gs.getMessageLang(\\\\\\\"validator table does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n\\\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\\\n        var scriptBuild = \\\\\\\"(\\\\\\\" + validatorGr.validator + \\\\\\\")('\\\\\\\"+ value + \\\\\\\"');\\\\\\\";\\\\n        var isValidAnswer = eval(scriptBuild);\\\\n        return {\\\\n            valid: isValidAnswer,\\\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\\\n        };\\\\n    } else {\\\\n        return {\\\\n            valid: false,\\\\n            error: gs.getMessageLang(\\\\\\\"validator record does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n    }\\\\n}\\\"},{\\\"name\\\":\\\"show_choice_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{12}}];vaInputs = _taskVaInputs[{{13}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{14}}];vaInputs = _taskVaInputs[{{15}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'label': c.display,\\\\n            'value': c.value\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"},{\\\"name\\\":\\\"show_datetime_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{16}}];vaInputs = _taskVaInputs[{{17}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date_time\\\"},{\\\"name\\\":\\\"show_image_scale_question\\\",\\\"type\\\":\\\"carousel\\\",\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{18}}];vaInputs = _taskVaInputs[{{19}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{20}}];vaInputs = _taskVaInputs[{{21}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'Name': c.display,\\\\n            'Value': c.value,\\\\n            'Body': c.unselected\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\"},{\\\"name\\\":\\\"verify_response\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\",\\\"message\\\":\\\"{{22}}\\\"},{\\\"name\\\":\\\"show_reference_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{23}}];vaInputs = _taskVaInputs[{{24}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{25}}];vaInputs = _taskVaInputs[{{26}}];return (function execute() {\\\\n    var options = [];\\\\n    var table = vaVars.currentQuestionReferenceTable;\\\\n    var condition = vaVars.currentQuestionReferenceCondition;\\\\n    if (!table)\\\\n        return options;\\\\n \\\\n    var taskExtensions = new TableUtils(\\\\\\\"task\\\\\\\").getTableExtensions();\\\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\\\n\\\\n    var gr = new GlideRecord(table);\\\\n    if (condition)\\\\n        gr.addEncodedQuery(condition);\\\\n    gr.query();\\\\n    while (gr.next()) {\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'value': gr.sys_id + '',\\\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\\\n        });\\\\n    }\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"}]}\\n        };\\n        return JSON.stringify(config);\\n    })()\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"inputs\",\"metadata\":{\"type\":\"String\",\"list\":true,\"items\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"Collect user input\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return vaSystem.getConversationTaskId()})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\\\"{{vaVars.surveyVerificationMsg}}\\\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"}],\"use_items\":true}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"outputs\",\"main_topic_mapped_variable_name\":\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\"}],\"id\":\"e8625b3c4b794d769bb0da9d0a606848\",\"name\":\"Show date question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.currentQuestionType === 'date') {\\n        vaInputs.show_date_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"},\"expert_mode\":false,\"variableIds\":[\"fbe9af88d71a49f3845d37b4a93bbe15\"]},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Data Collector\",\"library_topic_id\":\"4c19933e4322211006650464dbb8f22d\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"definition\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n        var config = {\\n            configuration: {\\\"purpose\\\":\\\"{{0}}\\\",\\\"inputs\\\":[{\\\"name\\\":\\\"show_datetime_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\",\\\"skipMode\\\":\\\"'script'\\\",\\\"skipCondition\\\":\\\"(function() {vaVars = _taskVaVars[{{4}}];vaInputs = _taskVaInputs[{{5}}];return (function execute() {\\\\n   return vaVars.currentQuestionMandatory === 'false';\\\\n})()\\\\n;})()\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{6}}];vaInputs = _taskVaInputs[{{7}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date_time\\\"}],\\\"instructions\\\":\\\"{{1}}\\\",\\\"advanced_parameters\\\":\\\"{{2}}\\\",\\\"callingTask\\\":\\\"{{3}}\\\",\\\"confirm_summary\\\":false,\\\"slots\\\":[{\\\"name\\\":\\\"show_boolean_question\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{8}}];vaInputs = _taskVaInputs[{{9}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\"},{\\\"name\\\":\\\"show_text_input_question\\\",\\\"type\\\":\\\"string\\\",\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{10}}];vaInputs = _taskVaInputs[{{11}}];return (function execute() {\\\\n    if (vaVars.currentQuestionType === 'long')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else if (vaVars.currentQuestionType === 'percentage')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else\\\\n        return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"script\\\":\\\"function validate(value) {\\\\n    // for \\\\\\\"skip\\\\\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\\\n        return {\\\\n            valid: true,\\\\n        }; \\\\n\\\\n    // for string type with validator defined, and question is not skipped\\\\n    var validatorGr = new GlideRecord(\\\\\\\"sys_cs_field_script_validator\\\\\\\");\\\\n    if (!validatorGr.isValid())\\\\n\\\\t    return {\\\\n           valid: false,\\\\n           error: gs.getMessageLang(\\\\\\\"validator table does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n\\\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\\\n        var scriptBuild = \\\\\\\"(\\\\\\\" + validatorGr.validator + \\\\\\\")('\\\\\\\"+ value + \\\\\\\"');\\\\\\\";\\\\n        var isValidAnswer = eval(scriptBuild);\\\\n        return {\\\\n            valid: isValidAnswer,\\\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\\\n        };\\\\n    } else {\\\\n        return {\\\\n            valid: false,\\\\n            error: gs.getMessageLang(\\\\\\\"validator record does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n    }\\\\n}\\\"},{\\\"name\\\":\\\"show_choice_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{12}}];vaInputs = _taskVaInputs[{{13}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{14}}];vaInputs = _taskVaInputs[{{15}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'label': c.display,\\\\n            'value': c.value\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"},{\\\"name\\\":\\\"show_date_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{16}}];vaInputs = _taskVaInputs[{{17}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date\\\"},{\\\"name\\\":\\\"show_image_scale_question\\\",\\\"type\\\":\\\"carousel\\\",\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{18}}];vaInputs = _taskVaInputs[{{19}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{20}}];vaInputs = _taskVaInputs[{{21}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'Name': c.display,\\\\n            'Value': c.value,\\\\n            'Body': c.unselected\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\"},{\\\"name\\\":\\\"verify_response\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\",\\\"message\\\":\\\"{{22}}\\\"},{\\\"name\\\":\\\"show_reference_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{23}}];vaInputs = _taskVaInputs[{{24}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{25}}];vaInputs = _taskVaInputs[{{26}}];return (function execute() {\\\\n    var options = [];\\\\n    var table = vaVars.currentQuestionReferenceTable;\\\\n    var condition = vaVars.currentQuestionReferenceCondition;\\\\n    if (!table)\\\\n        return options;\\\\n \\\\n    var taskExtensions = new TableUtils(\\\\\\\"task\\\\\\\").getTableExtensions();\\\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\\\n\\\\n    var gr = new GlideRecord(table);\\\\n    if (condition)\\\\n        gr.addEncodedQuery(condition);\\\\n    gr.query();\\\\n    while (gr.next()) {\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'value': gr.sys_id + '',\\\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\\\n        });\\\\n    }\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"}]}\\n        };\\n        return JSON.stringify(config);\\n    })()\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"inputs\",\"metadata\":{\"type\":\"String\",\"list\":true,\"items\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"Collect user input\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return vaSystem.getConversationTaskId()})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\\\"{{vaVars.surveyVerificationMsg}}\\\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"}],\"use_items\":true}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"outputs\",\"main_topic_mapped_variable_name\":\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\"}],\"id\":\"cb013d5f2f4b4d0789b486a504e6d2f2\",\"name\":\"Show datetime question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.currentQuestionType === 'datetime') {\\n        vaInputs.show_datetime_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\"},\"expert_mode\":false,\"variableIds\":[\"c1d6aa7022164ba6a2b0291228d96249\"]},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.currentAnswerValidation = true;\\n    vaVars.currentAnswerErrorMsg = '';\\n\\n    if (vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage')\\n        validateFieldLimits();\\n})();\\n\\nfunction validateFieldLimits() {\\n\\tif ((!vaInputs.show_text_input_question.isValueSet() || vaInputs.show_text_input_question.getValue().length == 0)\\n\\t    && !vaInputs.show_text_input_question.isRequired())\\n\\t\\treturn;\\n\\tvar max = vaVars.currentQuestionMax;\\n\\tvar min = vaVars.currentQuestionMin;\\n\\t\\t\\n\\tvar value = vaInputs.show_text_input_question.getValue();\\n\\tvar newvalue = Number(value);\\n\\tif (isNaN(newvalue)) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is not a valid number. Please try again', vaContext.getRequesterLang());\\n\\t} else if (newvalue > max || newvalue < min) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is outside the valid range. Please try again', vaContext.getRequesterLang());\\n\\t}\\n}\",\"id\":\"f9950611be314fe6b0c891e8e65771d2\",\"name\":\"Answer validation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Check range\",\"branches\":[{\"type\":\"Branch\",\"label\":\"In range\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentAnswerValidation;\\n})()\"},\"id\":\"3caee78c5ebc4684acb190021f2a55d3\",\"name\":\"In range\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Out of range\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.currentAnswerValidation;\\n})()\"},\"id\":\"8384d2712a51413b8951fa4a8f2b2c05\",\"name\":\"Out of range\",\"expert_mode\":false}],\"id\":\"607a63448c1a4acca85166124f375118\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.currentAnswerErrorMsg;\\n})()\"}],\"request_feedback\":true,\"id\":\"194fae9f28f045ac94643564ef50c9db\",\"name\":\"Validation failed\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Data Collector\",\"library_topic_id\":\"4c19933e4322211006650464dbb8f22d\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"definition\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n        var config = {\\n            configuration: {\\\"purpose\\\":\\\"{{0}}\\\",\\\"inputs\\\":[{\\\"name\\\":\\\"show_image_scale_question\\\",\\\"type\\\":\\\"carousel\\\",\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\",\\\"skipMode\\\":\\\"'script'\\\",\\\"skipCondition\\\":\\\"(function() {vaVars = _taskVaVars[{{4}}];vaInputs = _taskVaInputs[{{5}}];return (function execute() {\\\\n   return vaVars.currentQuestionMandatory === 'false';\\\\n})()\\\\n;})()\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{6}}];vaInputs = _taskVaInputs[{{7}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{8}}];vaInputs = _taskVaInputs[{{9}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'Name': c.display,\\\\n            'Value': c.value,\\\\n            'Body': c.unselected\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\"}],\\\"instructions\\\":\\\"{{1}}\\\",\\\"advanced_parameters\\\":\\\"{{2}}\\\",\\\"callingTask\\\":\\\"{{3}}\\\",\\\"confirm_summary\\\":false,\\\"slots\\\":[{\\\"name\\\":\\\"show_boolean_question\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{10}}];vaInputs = _taskVaInputs[{{11}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\"},{\\\"name\\\":\\\"show_text_input_question\\\",\\\"type\\\":\\\"string\\\",\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{12}}];vaInputs = _taskVaInputs[{{13}}];return (function execute() {\\\\n    if (vaVars.currentQuestionType === 'long')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else if (vaVars.currentQuestionType === 'percentage')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else\\\\n        return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"script\\\":\\\"function validate(value) {\\\\n    // for \\\\\\\"skip\\\\\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\\\n        return {\\\\n            valid: true,\\\\n        }; \\\\n\\\\n    // for string type with validator defined, and question is not skipped\\\\n    var validatorGr = new GlideRecord(\\\\\\\"sys_cs_field_script_validator\\\\\\\");\\\\n    if (!validatorGr.isValid())\\\\n\\\\t    return {\\\\n           valid: false,\\\\n           error: gs.getMessageLang(\\\\\\\"validator table does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n\\\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\\\n        var scriptBuild = \\\\\\\"(\\\\\\\" + validatorGr.validator + \\\\\\\")('\\\\\\\"+ value + \\\\\\\"');\\\\\\\";\\\\n        var isValidAnswer = eval(scriptBuild);\\\\n        return {\\\\n            valid: isValidAnswer,\\\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\\\n        };\\\\n    } else {\\\\n        return {\\\\n            valid: false,\\\\n            error: gs.getMessageLang(\\\\\\\"validator record does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n    }\\\\n}\\\"},{\\\"name\\\":\\\"show_choice_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{14}}];vaInputs = _taskVaInputs[{{15}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{16}}];vaInputs = _taskVaInputs[{{17}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'label': c.display,\\\\n            'value': c.value\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"},{\\\"name\\\":\\\"show_date_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{18}}];vaInputs = _taskVaInputs[{{19}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date\\\"},{\\\"name\\\":\\\"show_datetime_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{20}}];vaInputs = _taskVaInputs[{{21}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date_time\\\"},{\\\"name\\\":\\\"verify_response\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\",\\\"message\\\":\\\"{{22}}\\\"},{\\\"name\\\":\\\"show_reference_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{23}}];vaInputs = _taskVaInputs[{{24}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{25}}];vaInputs = _taskVaInputs[{{26}}];return (function execute() {\\\\n    var options = [];\\\\n    var table = vaVars.currentQuestionReferenceTable;\\\\n    var condition = vaVars.currentQuestionReferenceCondition;\\\\n    if (!table)\\\\n        return options;\\\\n \\\\n    var taskExtensions = new TableUtils(\\\\\\\"task\\\\\\\").getTableExtensions();\\\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\\\n\\\\n    var gr = new GlideRecord(table);\\\\n    if (condition)\\\\n        gr.addEncodedQuery(condition);\\\\n    gr.query();\\\\n    while (gr.next()) {\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'value': gr.sys_id + '',\\\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\\\n        });\\\\n    }\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"}]}\\n        };\\n        return JSON.stringify(config);\\n    })()\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"inputs\",\"metadata\":{\"type\":\"String\",\"list\":true,\"items\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"Collect user input\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return vaSystem.getConversationTaskId()})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\\\"{{vaVars.surveyVerificationMsg}}\\\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"}],\"use_items\":true}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"outputs\",\"main_topic_mapped_variable_name\":\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\"}],\"id\":\"26cffe08aa7147c79ffc7489da676135\",\"name\":\"Show image scale question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.currentQuestionType === 'imagescale') {\\n        vaInputs.show_image_scale_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"},\"expert_mode\":false,\"variableIds\":[\"b600afffba2d46a1a225c17e62ee4734\"]},{\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"c24324650a514984946fed64207f0c24\",\"name\":\"Summary\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n      var questions = JSON.parse(vaVars.surveyQuestions);\\n      var answers = JSON.parse(vaVars.surveyAnswers);\\n      var questionAnswerPairs = [];\\n\\n      questions.forEach(function(q) {\\n            var question = q.display.toString();\\n            var answer = answers[q.metric];\\n            var questionAnswer = answer.displayValue != null ? answer.displayValue :\\n            answer.value != null ? answer.value : '';\\n            var questionType = q.type + '';\\n            \\n            if(questionType == 'checkbox' || questionType == 'boolean'){\\n                  if (questionAnswer == \\\"1\\\") {\\n                        questionAnswer = \\\"Yes\\\";\\n                  } else if (questionAnswer == \\\"0\\\") {\\n                        questionAnswer = \\\"No\\\"\\n                  }\\n            }\\n            if(answer){questionAnswerPairs.push({\\\"fieldLabel\\\": question, \\\"fieldValue\\\": questionAnswer});}         \\n      });\\n      \\n      var card_data = JSON.stringify({\\n            \\\"title\\\":gs.getMessageLang(\\\"Response Summary\\\", vaContext.getRequesterLang()),\\n            \\\"fields\\\":questionAnswerPairs,\\n      });\\n\\n      return vaSystem.renderCard(\\\"PreChat\\\", card_data, true);\\n})()\\n\"},\"secure\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Data Collector\",\"library_topic_id\":\"4c19933e4322211006650464dbb8f22d\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"definition\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n        var config = {\\n            configuration: {\\\"purpose\\\":\\\"{{0}}\\\",\\\"inputs\\\":[{\\\"name\\\":\\\"verify_response\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\",\\\"skipMode\\\":\\\"'simple'\\\",\\\"skipCondition\\\":\\\"\\\\\\\"\\\\\\\"\\\",\\\"message\\\":\\\"{{4}}\\\"}],\\\"instructions\\\":\\\"{{1}}\\\",\\\"advanced_parameters\\\":\\\"{{2}}\\\",\\\"callingTask\\\":\\\"{{3}}\\\",\\\"confirm_summary\\\":false,\\\"slots\\\":[{\\\"name\\\":\\\"show_boolean_question\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{5}}];vaInputs = _taskVaInputs[{{6}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\"},{\\\"name\\\":\\\"show_text_input_question\\\",\\\"type\\\":\\\"string\\\",\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{7}}];vaInputs = _taskVaInputs[{{8}}];return (function execute() {\\\\n    if (vaVars.currentQuestionType === 'long')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else if (vaVars.currentQuestionType === 'percentage')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else\\\\n        return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"script\\\":\\\"function validate(value) {\\\\n    // for \\\\\\\"skip\\\\\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\\\n        return {\\\\n            valid: true,\\\\n        }; \\\\n\\\\n    // for string type with validator defined, and question is not skipped\\\\n    var validatorGr = new GlideRecord(\\\\\\\"sys_cs_field_script_validator\\\\\\\");\\\\n    if (!validatorGr.isValid())\\\\n\\\\t    return {\\\\n           valid: false,\\\\n           error: gs.getMessageLang(\\\\\\\"validator table does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n\\\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\\\n        var scriptBuild = \\\\\\\"(\\\\\\\" + validatorGr.validator + \\\\\\\")('\\\\\\\"+ value + \\\\\\\"');\\\\\\\";\\\\n        var isValidAnswer = eval(scriptBuild);\\\\n        return {\\\\n            valid: isValidAnswer,\\\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\\\n        };\\\\n    } else {\\\\n        return {\\\\n            valid: false,\\\\n            error: gs.getMessageLang(\\\\\\\"validator record does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n    }\\\\n}\\\"},{\\\"name\\\":\\\"show_choice_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{9}}];vaInputs = _taskVaInputs[{{10}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{11}}];vaInputs = _taskVaInputs[{{12}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'label': c.display,\\\\n            'value': c.value\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"},{\\\"name\\\":\\\"show_date_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{13}}];vaInputs = _taskVaInputs[{{14}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date\\\"},{\\\"name\\\":\\\"show_datetime_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{15}}];vaInputs = _taskVaInputs[{{16}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date_time\\\"},{\\\"name\\\":\\\"show_image_scale_question\\\",\\\"type\\\":\\\"carousel\\\",\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{17}}];vaInputs = _taskVaInputs[{{18}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{19}}];vaInputs = _taskVaInputs[{{20}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'Name': c.display,\\\\n            'Value': c.value,\\\\n            'Body': c.unselected\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\"},{\\\"name\\\":\\\"show_reference_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{21}}];vaInputs = _taskVaInputs[{{22}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{23}}];vaInputs = _taskVaInputs[{{24}}];return (function execute() {\\\\n    var options = [];\\\\n    var table = vaVars.currentQuestionReferenceTable;\\\\n    var condition = vaVars.currentQuestionReferenceCondition;\\\\n    if (!table)\\\\n        return options;\\\\n \\\\n    var taskExtensions = new TableUtils(\\\\\\\"task\\\\\\\").getTableExtensions();\\\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\\\n\\\\n    var gr = new GlideRecord(table);\\\\n    if (condition)\\\\n        gr.addEncodedQuery(condition);\\\\n    gr.query();\\\\n    while (gr.next()) {\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'value': gr.sys_id + '',\\\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\\\n        });\\\\n    }\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"}]}\\n        };\\n        return JSON.stringify(config);\\n    })()\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"inputs\",\"metadata\":{\"type\":\"String\",\"list\":true,\"items\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"Collect user input\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return vaSystem.getConversationTaskId()})()\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\\\"{{vaVars.surveyVerificationMsg}}\\\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"}],\"use_items\":true}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"outputs\",\"main_topic_mapped_variable_name\":\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\"}],\"id\":\"c0f7a2a49b4f49688d9a1c1dd4e216f9\",\"name\":\"Verify Response\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variableIds\":[\"a813e0458a174bb0b415483fe89c00e4\"]},{\"type\":\"Decision\",\"name\":\"Summary Correct?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"verify_response=true\"},\"id\":\"b93ef511c5d241b7a2e1e6b795516162\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"verify_response=\"},\"id\":\"dbf373c1e52f416786748cdf8f4b1099\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"8c9927f71ad04890afd342b20df99100\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.questionIndex = -1;\\n})()\",\"id\":\"3c232bba33f34219b4a554c511faa4da\",\"name\":\"Reset Question Index\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Confirmation\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Confirmation?\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"confirmationneeded=true\"},\"id\":\"c17695ed3d7f4fb688164cdd16b9b8c0\",\"name\":\"Confirmation?\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"confirmationneeded!=true\"},\"id\":\"059dd280a80a452dad159acd2124f431\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"9f8dfc6260824d0b863c4275cbd6e2f3\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Data Collector\",\"library_topic_id\":\"4c19933e4322211006650464dbb8f22d\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"definition\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n        var config = {\\n            configuration: {\\\"purpose\\\":\\\"{{0}}\\\",\\\"inputs\\\":[{\\\"name\\\":\\\"show_reference_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\",\\\"skipMode\\\":\\\"'script'\\\",\\\"skipCondition\\\":\\\"(function() {vaVars = _taskVaVars[{{4}}];vaInputs = _taskVaInputs[{{5}}];return (function execute() {\\\\n    return vaVars.currentQuestionMandatory === 'false';\\\\n})()\\\\n;})()\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{6}}];vaInputs = _taskVaInputs[{{7}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{8}}];vaInputs = _taskVaInputs[{{9}}];return (function execute() {\\\\n    var options = [];\\\\n    var table = vaVars.currentQuestionReferenceTable;\\\\n    var condition = vaVars.currentQuestionReferenceCondition;\\\\n    if (!table)\\\\n        return options;\\\\n \\\\n    var taskExtensions = new TableUtils(\\\\\\\"task\\\\\\\").getTableExtensions();\\\\n    var isTask = (taskExtensions.indexOf(table) > -1) ? true : false;\\\\n\\\\n    var gr = new GlideRecord(table);\\\\n    if (condition)\\\\n        gr.addEncodedQuery(condition);\\\\n    gr.query();\\\\n    while (gr.next()) {\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'value': gr.sys_id + '',\\\\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\\\\n        });\\\\n    }\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"}],\\\"instructions\\\":\\\"{{1}}\\\",\\\"advanced_parameters\\\":\\\"{{2}}\\\",\\\"callingTask\\\":\\\"{{3}}\\\",\\\"confirm_summary\\\":false,\\\"slots\\\":[{\\\"name\\\":\\\"show_boolean_question\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{10}}];vaInputs = _taskVaInputs[{{11}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\"},{\\\"name\\\":\\\"show_text_input_question\\\",\\\"type\\\":\\\"string\\\",\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{12}}];vaInputs = _taskVaInputs[{{13}}];return (function execute() {\\\\n    if (vaVars.currentQuestionType === 'long')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else if (vaVars.currentQuestionType === 'percentage')\\\\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\\\\n    else\\\\n        return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"script\\\":\\\"function validate(value) {\\\\n    // for \\\\\\\"skip\\\\\\\" which has input value as empty, long or percentage type, general string type with no validator defined\\\\n    if ((gs.nil(value) && vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\\\\n        return {\\\\n            valid: true,\\\\n        }; \\\\n\\\\n    // for string type with validator defined, and question is not skipped\\\\n    var validatorGr = new GlideRecord(\\\\\\\"sys_cs_field_script_validator\\\\\\\");\\\\n    if (!validatorGr.isValid())\\\\n\\\\t    return {\\\\n           valid: false,\\\\n           error: gs.getMessageLang(\\\\\\\"validator table does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n\\\\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\\\\n        var scriptBuild = \\\\\\\"(\\\\\\\" + validatorGr.validator + \\\\\\\")('\\\\\\\"+ value + \\\\\\\"');\\\\\\\";\\\\n        var isValidAnswer = eval(scriptBuild);\\\\n        return {\\\\n            valid: isValidAnswer,\\\\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\\\\n        };\\\\n    } else {\\\\n        return {\\\\n            valid: false,\\\\n            error: gs.getMessageLang(\\\\\\\"validator record does not exist\\\\\\\", vaContext.getRequesterLang())\\\\n        };\\\\n    }\\\\n}\\\"},{\\\"name\\\":\\\"show_choice_question\\\",\\\"type\\\":\\\"reference\\\",\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{14}}];vaInputs = _taskVaInputs[{{15}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"choiceMode\\\":\\\"'script'\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{16}}];vaInputs = _taskVaInputs[{{17}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'render_style':'bubble',\\\\n            'label': c.display,\\\\n            'value': c.value\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\",\\\"multipleSelect\\\":\\\"false\\\"},{\\\"name\\\":\\\"show_date_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{18}}];vaInputs = _taskVaInputs[{{19}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date\\\"},{\\\"name\\\":\\\"show_datetime_question\\\",\\\"type\\\":\\\"date_time\\\",\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{20}}];vaInputs = _taskVaInputs[{{21}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})();})()\\\",\\\"format\\\":\\\"date_time\\\"},{\\\"name\\\":\\\"show_image_scale_question\\\",\\\"type\\\":\\\"carousel\\\",\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\",\\\"message\\\":\\\"(function() {vaVars = _taskVaVars[{{22}}];vaInputs = _taskVaInputs[{{23}}];return (function execute() {\\\\n    return vaVars.currentQuestionDisplay;\\\\n})()\\\\n;})()\\\",\\\"script\\\":\\\"(function() {vaVars = _taskVaVars[{{24}}];vaInputs = _taskVaInputs[{{25}}];return (function execute() {\\\\n    var i = vaVars.questionIndex;\\\\n    var questions = JSON.parse(vaVars.surveyQuestions);\\\\n    var choices = questions[i].choices;\\\\n    var options = [];\\\\n    for (var j = 0; j < choices.length; j++) {\\\\n        var c = choices[j];\\\\n        options.push({\\\\n            'Name': c.display,\\\\n            'Value': c.value,\\\\n            'Body': c.unselected\\\\n        });\\\\n    }\\\\n\\\\n    return options;\\\\n})();})()\\\"},{\\\"name\\\":\\\"verify_response\\\",\\\"type\\\":\\\"boolean\\\",\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\",\\\"message\\\":\\\"{{26}}\\\"}]}\\n        };\\n        return JSON.stringify(config);\\n    })()\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"inputs\",\"metadata\":{\"type\":\"String\",\"list\":true,\"items\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"Collect user input\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return vaSystem.getConversationTaskId()})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function() { return JSON.stringify(vaSystem.getConversationTaskId())})()\"},{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\\\"{{vaVars.surveyVerificationMsg}}\\\"\"}],\"use_items\":true}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"outputs\",\"main_topic_mapped_variable_name\":\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\"}],\"id\":\"b6173737c4e740c584b5efe1424aec8b\",\"name\":\"Show reference question\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if ((vaVars.currentQuestionType === 'reference')) {\\n        vaInputs.show_reference_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"},\"expert_mode\":false,\"variableIds\":[\"1b42a3cd06f14eda968880b670491ebb\"]},{\"type\":\"Decision\",\"name\":\"Is Survey Active?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    gs.warn(\\\"Survey is not active\\\")\\n    return vaVars.active != true;\\n})()\\n\"},\"id\":\"2bb2b7ba46ac475dbbab176b7334562b\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.active == true;\\n})()\\n\"},\"id\":\"107778af78344637be73190984b81d44\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"ca955a1d346d48b09e9ce792dde52cc3\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n                    var mappings = {\\\"show_boolean_question\\\":\\\"show_boolean_question\\\",\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\"};\\n                    var output = JSON.parse(vaInputs['ai_data_collector_8a8d038a0f75488885032aceabd284ce_output']);\\n                    var variables = {\\\"surveyInstanceId\\\":{\\\"id\\\":\\\"42731da272e043d29de8a18ae4abe8ec\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyInstanceId\\\",\\\"label\\\":\\\"surveyInstanceId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyQuestions\\\":{\\\"id\\\":\\\"a019f4d9d2034f1e8ce4413ad6814d4c\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyQuestions\\\",\\\"label\\\":\\\"surveyQuestions\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionIndex\\\":{\\\"id\\\":\\\"4606ff81e3b1466dba105ac8db0a3ff1\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"-1\\\"},\\\"name\\\":\\\"questionIndex\\\",\\\"label\\\":\\\"questionIndex\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionCount\\\":{\\\"id\\\":\\\"701eeb0ead3946b4a95fc310996f51d5\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"0\\\"},\\\"name\\\":\\\"questionCount\\\",\\\"label\\\":\\\"questionCount\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyAnswers\\\":{\\\"id\\\":\\\"e0b97ea5de424260a17d367b713e6233\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"{}\\\"},\\\"name\\\":\\\"surveyAnswers\\\",\\\"label\\\":\\\"surveyAnswers\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"choiceTypes\\\":{\\\"id\\\":\\\"5fa5bab12ab3407fa0243a6e4b1e5b55\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"choice,scale,numericscale\\\"},\\\"name\\\":\\\"choiceTypes\\\",\\\"label\\\":\\\"choiceTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionId\\\":{\\\"id\\\":\\\"953851ffa4294d04859d006bf28a4986\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionId\\\",\\\"label\\\":\\\"currentQuestionId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionType\\\":{\\\"id\\\":\\\"1d2077df93314785b211efe410798278\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionType\\\",\\\"label\\\":\\\"currentQuestionType\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMetric\\\":{\\\"id\\\":\\\"00d261d656824f6f8f150a2025f4eaae\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionMetric\\\",\\\"label\\\":\\\"currentQuestionMetric\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionDisplay\\\":{\\\"id\\\":\\\"601f508ef27a49a18330230ddcc12772\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionDisplay\\\",\\\"label\\\":\\\"currentQuestionDisplay\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"introduction\\\":{\\\"id\\\":\\\"b56216c2f682436d9e56d9ef36471bcb\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"introduction\\\",\\\"label\\\":\\\"introduction\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"endNote\\\":{\\\"id\\\":\\\"0c33e298eff44fc88364434b538e805f\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"endNote\\\",\\\"label\\\":\\\"endNote\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"textTypes\\\":{\\\"id\\\":\\\"6545133e2b144832a1ecea359dcc39b9\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"string,long,percentage\\\"},\\\"name\\\":\\\"textTypes\\\",\\\"label\\\":\\\"textTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMax\\\":{\\\"id\\\":\\\"dd7230f4e76642c4b1676e04fa2af480\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMax\\\",\\\"label\\\":\\\"currentQuestionMax\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMin\\\":{\\\"id\\\":\\\"3f8a633cceb94a7a8c29a2622f003795\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMin\\\",\\\"label\\\":\\\"currentQuestionMin\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerValidation\\\":{\\\"id\\\":\\\"cf9a19900c7043bd817ff9f5794941ed\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentAnswerValidation\\\",\\\"label\\\":\\\"currentAnswerValidation\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerErrorMsg\\\":{\\\"id\\\":\\\"607bdaced73d4d7fab9239c0d64a4210\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"''\\\"},\\\"name\\\":\\\"currentAnswerErrorMsg\\\",\\\"label\\\":\\\"currentAnswerErrorMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"show_attachment_question\\\":{\\\"id\\\":\\\"bba30ac7475c47cc93da35130951478b\\\",\\\"name\\\":\\\"show_attachment_question\\\",\\\"label\\\":\\\"Show Attachment Question\\\",\\\"varType\\\":\\\"image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"nodeId\\\":\\\"64d85b2098094a4fa02f25f7a1444c50\\\",\\\"isHidden\\\":false},\\\"surveyid\\\":{\\\"id\\\":\\\"1132a62678c24bbda688337615fd51bb\\\",\\\"name\\\":\\\"surveyid\\\",\\\"label\\\":\\\"SurveyId\\\",\\\"defaultValue\\\":\\\"\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"surveyVerificationMsg\\\":{\\\"id\\\":\\\"e5e2dc8c74a64bf7ba531a2b734bd9cd\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"surveyVerificationMsg\\\",\\\"label\\\":\\\"surveyVerificationMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"confirmationneeded\\\":{\\\"id\\\":\\\"75bc445130284002947077d668cac779\\\",\\\"name\\\":\\\"confirmationneeded\\\",\\\"label\\\":\\\"ConfirmationNeeded\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"currentQuestionMandatory\\\":{\\\"id\\\":\\\"f4cfc3cbbdca4d46b23a1de57709a8e0\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"true\\\"},\\\"name\\\":\\\"currentQuestionMandatory\\\",\\\"label\\\":\\\"currentQuestionMandatory\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"savequestionstocontext\\\":{\\\"id\\\":\\\"ba2a161b94a3468a86603955cca630a1\\\",\\\"name\\\":\\\"savequestionstocontext\\\",\\\"label\\\":\\\"SaveQuestionsToContext\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"_topic_postchat_user_id\\\":{\\\"id\\\":\\\"1ebd3fa354824ebcb2abd32c7f5a08ee\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"_topic_postchat_user_id\\\",\\\"label\\\":\\\"_topic_postchat_user_id\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyName\\\":{\\\"id\\\":\\\"fbdedb6037d443fc94ac909130d72657\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyName\\\",\\\"label\\\":\\\"surveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_chat_survey_name\\\":{\\\"id\\\":\\\"62b3a6b4779d449faee2e5abee5678a5\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_chat_survey_name\\\":{\\\"id\\\":\\\"b712f462443f422882112475625c1f51\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_assessment_instance\\\":{\\\"id\\\":\\\"c561d907f23a4ee485d105e3deefe041\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_assessment_instance\\\":{\\\"id\\\":\\\"5f4fab2392e34755a790d59670b35294\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"user\\\":{\\\"category\\\":\\\"vaInputs\\\",\\\"id\\\":\\\"current-user\\\",\\\"label\\\":\\\"User\\\",\\\"name\\\":\\\"user\\\",\\\"table\\\":\\\"sys_user\\\",\\\"varType\\\":\\\"reference\\\"},\\\"defaultSurveyName\\\":{\\\"id\\\":\\\"b0a2dbc7899742b19e9f2d904b7bfc3e\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"defaultSurveyName\\\",\\\"label\\\":\\\"defaultSurveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionFieldValidator\\\":{\\\"id\\\":\\\"9c7e90dca34b47489835d0bcdc8e4933\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionFieldValidator\\\",\\\"label\\\":\\\"currentQuestionFieldValidator\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceTable\\\":{\\\"id\\\":\\\"a7b460d515ca4a2087c92d2c8bf5fbc9\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceTable\\\",\\\"label\\\":\\\"currentQuestionReferenceTable\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceCondition\\\":{\\\"id\\\":\\\"6ec01bc01b7144ec90530b7f9af69bb2\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceCondition\\\",\\\"label\\\":\\\"currentQuestionReferenceCondition\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"active\\\":{\\\"id\\\":\\\"3f44cb42666b408fbb6f952fe939d920\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"false\\\"},\\\"name\\\":\\\"active\\\",\\\"label\\\":\\\"active\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\":{\\\"id\\\":\\\"2f2b481c82a94d1996f70567027cbb41\\\",\\\"name\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"label\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_boolean_question\\\":{\\\"id\\\":\\\"b5790fea6a77427aaf10a8cb5ee3cef0\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Boolean Question\\\",\\\"name\\\":\\\"show_boolean_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8a8d038a0f75488885032aceabd284ce\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\"},\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\":{\\\"id\\\":\\\"5229b91bab174a52829686976666ed1b\\\",\\\"name\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"label\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_text_input_question\\\":{\\\"id\\\":\\\"0775ff6cf5b94c4692d1a7be6b9fe010\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Text Input Question\\\",\\\"name\\\":\\\"show_text_input_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"369375049a91494e9da6cd6e6cb3cb28\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\"},\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\":{\\\"id\\\":\\\"9421933d83ba4506b292d81bb60b2999\\\",\\\"name\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"label\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_choice_question\\\":{\\\"id\\\":\\\"dea29579e2c44cdab652446be7273444\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Choice Question\\\",\\\"name\\\":\\\"show_choice_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8d2ac71ed40a416a9751e5bd73a6e442\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\"},\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\":{\\\"id\\\":\\\"e5d8423283fc4d2595fd661bd5a2eb69\\\",\\\"name\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"label\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_date_question\\\":{\\\"id\\\":\\\"fbe9af88d71a49f3845d37b4a93bbe15\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Date Question\\\",\\\"name\\\":\\\"show_date_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"e8625b3c4b794d769bb0da9d0a606848\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\"},\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\":{\\\"id\\\":\\\"a7dc2985e75f4c5cbd8b508e8ab6620c\\\",\\\"name\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"label\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_datetime_question\\\":{\\\"id\\\":\\\"c1d6aa7022164ba6a2b0291228d96249\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Datetime Question\\\",\\\"name\\\":\\\"show_datetime_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date_time\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"cb013d5f2f4b4d0789b486a504e6d2f2\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\"},\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\":{\\\"id\\\":\\\"78de1c7f496f430985b8d3ac5f93acac\\\",\\\"name\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"label\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_image_scale_question\\\":{\\\"id\\\":\\\"b600afffba2d46a1a225c17e62ee4734\\\",\\\"varType\\\":\\\"carousel-image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Image Scale Question\\\",\\\"name\\\":\\\"show_image_scale_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"26cffe08aa7147c79ffc7489da676135\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\"},\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\":{\\\"id\\\":\\\"3148914579f645b88e5e0bbc22ab9cf4\\\",\\\"name\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"label\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"verify_response\\\":{\\\"id\\\":\\\"a813e0458a174bb0b415483fe89c00e4\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Verify Response\\\",\\\"name\\\":\\\"verify_response\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"c0f7a2a49b4f49688d9a1c1dd4e216f9\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\"},\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\":{\\\"id\\\":\\\"498f5de051d6461d87508d10b8a73ecf\\\",\\\"name\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"label\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_reference_question\\\":{\\\"id\\\":\\\"1b42a3cd06f14eda968880b670491ebb\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Reference Question\\\",\\\"name\\\":\\\"show_reference_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"b6173737c4e740c584b5efe1424aec8b\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\"}}\\n                    Object.keys(output).forEach(function(key) {\\n                        var mappedKey = mappings[key];\\n                        if (!vaInputs[mappedKey]) {vaInputs.initialize(mappedKey);}\\n                        var isMultiSelect = variables[mappedKey].varType === 'array.reference';\\n                        if (isMultiSelect) {vaInputs[mappedKey] = output[key] ? JSON.parse(output[key]) : '';}\\n                        else {vaInputs[mappedKey] = output[key];}\\n                    });\\n                })()\",\"id\":\"fb3e125fa323444dba61777481a0b155\",\"name\":\"8a8d038a0f75488885032aceabd284ce_ai_data_collector_output_handler\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if ((vaVars.currentQuestionType === 'boolean') || (vaVars.currentQuestionType === 'checkbox')) {\\n        vaInputs.show_boolean_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n                    var mappings = {\\\"show_text_input_question\\\":\\\"show_text_input_question\\\",\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\"};\\n                    var output = JSON.parse(vaInputs['ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output']);\\n                    var variables = {\\\"surveyInstanceId\\\":{\\\"id\\\":\\\"42731da272e043d29de8a18ae4abe8ec\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyInstanceId\\\",\\\"label\\\":\\\"surveyInstanceId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyQuestions\\\":{\\\"id\\\":\\\"a019f4d9d2034f1e8ce4413ad6814d4c\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyQuestions\\\",\\\"label\\\":\\\"surveyQuestions\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionIndex\\\":{\\\"id\\\":\\\"4606ff81e3b1466dba105ac8db0a3ff1\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"-1\\\"},\\\"name\\\":\\\"questionIndex\\\",\\\"label\\\":\\\"questionIndex\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionCount\\\":{\\\"id\\\":\\\"701eeb0ead3946b4a95fc310996f51d5\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"0\\\"},\\\"name\\\":\\\"questionCount\\\",\\\"label\\\":\\\"questionCount\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyAnswers\\\":{\\\"id\\\":\\\"e0b97ea5de424260a17d367b713e6233\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"{}\\\"},\\\"name\\\":\\\"surveyAnswers\\\",\\\"label\\\":\\\"surveyAnswers\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"choiceTypes\\\":{\\\"id\\\":\\\"5fa5bab12ab3407fa0243a6e4b1e5b55\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"choice,scale,numericscale\\\"},\\\"name\\\":\\\"choiceTypes\\\",\\\"label\\\":\\\"choiceTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionId\\\":{\\\"id\\\":\\\"953851ffa4294d04859d006bf28a4986\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionId\\\",\\\"label\\\":\\\"currentQuestionId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionType\\\":{\\\"id\\\":\\\"1d2077df93314785b211efe410798278\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionType\\\",\\\"label\\\":\\\"currentQuestionType\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMetric\\\":{\\\"id\\\":\\\"00d261d656824f6f8f150a2025f4eaae\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionMetric\\\",\\\"label\\\":\\\"currentQuestionMetric\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionDisplay\\\":{\\\"id\\\":\\\"601f508ef27a49a18330230ddcc12772\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionDisplay\\\",\\\"label\\\":\\\"currentQuestionDisplay\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"introduction\\\":{\\\"id\\\":\\\"b56216c2f682436d9e56d9ef36471bcb\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"introduction\\\",\\\"label\\\":\\\"introduction\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"endNote\\\":{\\\"id\\\":\\\"0c33e298eff44fc88364434b538e805f\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"endNote\\\",\\\"label\\\":\\\"endNote\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"textTypes\\\":{\\\"id\\\":\\\"6545133e2b144832a1ecea359dcc39b9\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"string,long,percentage\\\"},\\\"name\\\":\\\"textTypes\\\",\\\"label\\\":\\\"textTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMax\\\":{\\\"id\\\":\\\"dd7230f4e76642c4b1676e04fa2af480\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMax\\\",\\\"label\\\":\\\"currentQuestionMax\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMin\\\":{\\\"id\\\":\\\"3f8a633cceb94a7a8c29a2622f003795\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMin\\\",\\\"label\\\":\\\"currentQuestionMin\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerValidation\\\":{\\\"id\\\":\\\"cf9a19900c7043bd817ff9f5794941ed\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentAnswerValidation\\\",\\\"label\\\":\\\"currentAnswerValidation\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerErrorMsg\\\":{\\\"id\\\":\\\"607bdaced73d4d7fab9239c0d64a4210\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"''\\\"},\\\"name\\\":\\\"currentAnswerErrorMsg\\\",\\\"label\\\":\\\"currentAnswerErrorMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"show_attachment_question\\\":{\\\"id\\\":\\\"bba30ac7475c47cc93da35130951478b\\\",\\\"name\\\":\\\"show_attachment_question\\\",\\\"label\\\":\\\"Show Attachment Question\\\",\\\"varType\\\":\\\"image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"nodeId\\\":\\\"64d85b2098094a4fa02f25f7a1444c50\\\",\\\"isHidden\\\":false},\\\"surveyid\\\":{\\\"id\\\":\\\"1132a62678c24bbda688337615fd51bb\\\",\\\"name\\\":\\\"surveyid\\\",\\\"label\\\":\\\"SurveyId\\\",\\\"defaultValue\\\":\\\"\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"surveyVerificationMsg\\\":{\\\"id\\\":\\\"e5e2dc8c74a64bf7ba531a2b734bd9cd\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"surveyVerificationMsg\\\",\\\"label\\\":\\\"surveyVerificationMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"confirmationneeded\\\":{\\\"id\\\":\\\"75bc445130284002947077d668cac779\\\",\\\"name\\\":\\\"confirmationneeded\\\",\\\"label\\\":\\\"ConfirmationNeeded\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"currentQuestionMandatory\\\":{\\\"id\\\":\\\"f4cfc3cbbdca4d46b23a1de57709a8e0\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"true\\\"},\\\"name\\\":\\\"currentQuestionMandatory\\\",\\\"label\\\":\\\"currentQuestionMandatory\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"savequestionstocontext\\\":{\\\"id\\\":\\\"ba2a161b94a3468a86603955cca630a1\\\",\\\"name\\\":\\\"savequestionstocontext\\\",\\\"label\\\":\\\"SaveQuestionsToContext\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"_topic_postchat_user_id\\\":{\\\"id\\\":\\\"1ebd3fa354824ebcb2abd32c7f5a08ee\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"_topic_postchat_user_id\\\",\\\"label\\\":\\\"_topic_postchat_user_id\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyName\\\":{\\\"id\\\":\\\"fbdedb6037d443fc94ac909130d72657\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyName\\\",\\\"label\\\":\\\"surveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_chat_survey_name\\\":{\\\"id\\\":\\\"62b3a6b4779d449faee2e5abee5678a5\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_chat_survey_name\\\":{\\\"id\\\":\\\"b712f462443f422882112475625c1f51\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_assessment_instance\\\":{\\\"id\\\":\\\"c561d907f23a4ee485d105e3deefe041\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_assessment_instance\\\":{\\\"id\\\":\\\"5f4fab2392e34755a790d59670b35294\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"user\\\":{\\\"category\\\":\\\"vaInputs\\\",\\\"id\\\":\\\"current-user\\\",\\\"label\\\":\\\"User\\\",\\\"name\\\":\\\"user\\\",\\\"table\\\":\\\"sys_user\\\",\\\"varType\\\":\\\"reference\\\"},\\\"defaultSurveyName\\\":{\\\"id\\\":\\\"b0a2dbc7899742b19e9f2d904b7bfc3e\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"defaultSurveyName\\\",\\\"label\\\":\\\"defaultSurveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionFieldValidator\\\":{\\\"id\\\":\\\"9c7e90dca34b47489835d0bcdc8e4933\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionFieldValidator\\\",\\\"label\\\":\\\"currentQuestionFieldValidator\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceTable\\\":{\\\"id\\\":\\\"a7b460d515ca4a2087c92d2c8bf5fbc9\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceTable\\\",\\\"label\\\":\\\"currentQuestionReferenceTable\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceCondition\\\":{\\\"id\\\":\\\"6ec01bc01b7144ec90530b7f9af69bb2\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceCondition\\\",\\\"label\\\":\\\"currentQuestionReferenceCondition\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"active\\\":{\\\"id\\\":\\\"3f44cb42666b408fbb6f952fe939d920\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"false\\\"},\\\"name\\\":\\\"active\\\",\\\"label\\\":\\\"active\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\":{\\\"id\\\":\\\"2f2b481c82a94d1996f70567027cbb41\\\",\\\"name\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"label\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_boolean_question\\\":{\\\"id\\\":\\\"b5790fea6a77427aaf10a8cb5ee3cef0\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Boolean Question\\\",\\\"name\\\":\\\"show_boolean_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8a8d038a0f75488885032aceabd284ce\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\"},\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\":{\\\"id\\\":\\\"5229b91bab174a52829686976666ed1b\\\",\\\"name\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"label\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_text_input_question\\\":{\\\"id\\\":\\\"0775ff6cf5b94c4692d1a7be6b9fe010\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Text Input Question\\\",\\\"name\\\":\\\"show_text_input_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"369375049a91494e9da6cd6e6cb3cb28\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\"},\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\":{\\\"id\\\":\\\"9421933d83ba4506b292d81bb60b2999\\\",\\\"name\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"label\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_choice_question\\\":{\\\"id\\\":\\\"dea29579e2c44cdab652446be7273444\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Choice Question\\\",\\\"name\\\":\\\"show_choice_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8d2ac71ed40a416a9751e5bd73a6e442\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\"},\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\":{\\\"id\\\":\\\"e5d8423283fc4d2595fd661bd5a2eb69\\\",\\\"name\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"label\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_date_question\\\":{\\\"id\\\":\\\"fbe9af88d71a49f3845d37b4a93bbe15\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Date Question\\\",\\\"name\\\":\\\"show_date_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"e8625b3c4b794d769bb0da9d0a606848\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\"},\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\":{\\\"id\\\":\\\"a7dc2985e75f4c5cbd8b508e8ab6620c\\\",\\\"name\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"label\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_datetime_question\\\":{\\\"id\\\":\\\"c1d6aa7022164ba6a2b0291228d96249\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Datetime Question\\\",\\\"name\\\":\\\"show_datetime_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date_time\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"cb013d5f2f4b4d0789b486a504e6d2f2\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\"},\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\":{\\\"id\\\":\\\"78de1c7f496f430985b8d3ac5f93acac\\\",\\\"name\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"label\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_image_scale_question\\\":{\\\"id\\\":\\\"b600afffba2d46a1a225c17e62ee4734\\\",\\\"varType\\\":\\\"carousel-image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Image Scale Question\\\",\\\"name\\\":\\\"show_image_scale_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"26cffe08aa7147c79ffc7489da676135\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\"},\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\":{\\\"id\\\":\\\"3148914579f645b88e5e0bbc22ab9cf4\\\",\\\"name\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"label\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"verify_response\\\":{\\\"id\\\":\\\"a813e0458a174bb0b415483fe89c00e4\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Verify Response\\\",\\\"name\\\":\\\"verify_response\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"c0f7a2a49b4f49688d9a1c1dd4e216f9\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\"},\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\":{\\\"id\\\":\\\"498f5de051d6461d87508d10b8a73ecf\\\",\\\"name\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"label\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_reference_question\\\":{\\\"id\\\":\\\"1b42a3cd06f14eda968880b670491ebb\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Reference Question\\\",\\\"name\\\":\\\"show_reference_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"b6173737c4e740c584b5efe1424aec8b\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\"}}\\n                    Object.keys(output).forEach(function(key) {\\n                        var mappedKey = mappings[key];\\n                        if (!vaInputs[mappedKey]) {vaInputs.initialize(mappedKey);}\\n                        var isMultiSelect = variables[mappedKey].varType === 'array.reference';\\n                        if (isMultiSelect) {vaInputs[mappedKey] = output[key] ? JSON.parse(output[key]) : '';}\\n                        else {vaInputs[mappedKey] = output[key];}\\n                    });\\n                })()\",\"id\":\"ae7744982ee74754962162296ce1fc4f\",\"name\":\"369375049a91494e9da6cd6e6cb3cb28_ai_data_collector_output_handler\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_text_input_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n                    var mappings = {\\\"show_choice_question\\\":\\\"show_choice_question\\\",\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\"};\\n                    var output = JSON.parse(vaInputs['ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output']);\\n                    var variables = {\\\"surveyInstanceId\\\":{\\\"id\\\":\\\"42731da272e043d29de8a18ae4abe8ec\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyInstanceId\\\",\\\"label\\\":\\\"surveyInstanceId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyQuestions\\\":{\\\"id\\\":\\\"a019f4d9d2034f1e8ce4413ad6814d4c\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyQuestions\\\",\\\"label\\\":\\\"surveyQuestions\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionIndex\\\":{\\\"id\\\":\\\"4606ff81e3b1466dba105ac8db0a3ff1\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"-1\\\"},\\\"name\\\":\\\"questionIndex\\\",\\\"label\\\":\\\"questionIndex\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionCount\\\":{\\\"id\\\":\\\"701eeb0ead3946b4a95fc310996f51d5\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"0\\\"},\\\"name\\\":\\\"questionCount\\\",\\\"label\\\":\\\"questionCount\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyAnswers\\\":{\\\"id\\\":\\\"e0b97ea5de424260a17d367b713e6233\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"{}\\\"},\\\"name\\\":\\\"surveyAnswers\\\",\\\"label\\\":\\\"surveyAnswers\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"choiceTypes\\\":{\\\"id\\\":\\\"5fa5bab12ab3407fa0243a6e4b1e5b55\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"choice,scale,numericscale\\\"},\\\"name\\\":\\\"choiceTypes\\\",\\\"label\\\":\\\"choiceTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionId\\\":{\\\"id\\\":\\\"953851ffa4294d04859d006bf28a4986\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionId\\\",\\\"label\\\":\\\"currentQuestionId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionType\\\":{\\\"id\\\":\\\"1d2077df93314785b211efe410798278\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionType\\\",\\\"label\\\":\\\"currentQuestionType\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMetric\\\":{\\\"id\\\":\\\"00d261d656824f6f8f150a2025f4eaae\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionMetric\\\",\\\"label\\\":\\\"currentQuestionMetric\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionDisplay\\\":{\\\"id\\\":\\\"601f508ef27a49a18330230ddcc12772\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionDisplay\\\",\\\"label\\\":\\\"currentQuestionDisplay\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"introduction\\\":{\\\"id\\\":\\\"b56216c2f682436d9e56d9ef36471bcb\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"introduction\\\",\\\"label\\\":\\\"introduction\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"endNote\\\":{\\\"id\\\":\\\"0c33e298eff44fc88364434b538e805f\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"endNote\\\",\\\"label\\\":\\\"endNote\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"textTypes\\\":{\\\"id\\\":\\\"6545133e2b144832a1ecea359dcc39b9\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"string,long,percentage\\\"},\\\"name\\\":\\\"textTypes\\\",\\\"label\\\":\\\"textTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMax\\\":{\\\"id\\\":\\\"dd7230f4e76642c4b1676e04fa2af480\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMax\\\",\\\"label\\\":\\\"currentQuestionMax\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMin\\\":{\\\"id\\\":\\\"3f8a633cceb94a7a8c29a2622f003795\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMin\\\",\\\"label\\\":\\\"currentQuestionMin\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerValidation\\\":{\\\"id\\\":\\\"cf9a19900c7043bd817ff9f5794941ed\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentAnswerValidation\\\",\\\"label\\\":\\\"currentAnswerValidation\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerErrorMsg\\\":{\\\"id\\\":\\\"607bdaced73d4d7fab9239c0d64a4210\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"''\\\"},\\\"name\\\":\\\"currentAnswerErrorMsg\\\",\\\"label\\\":\\\"currentAnswerErrorMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"show_attachment_question\\\":{\\\"id\\\":\\\"bba30ac7475c47cc93da35130951478b\\\",\\\"name\\\":\\\"show_attachment_question\\\",\\\"label\\\":\\\"Show Attachment Question\\\",\\\"varType\\\":\\\"image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"nodeId\\\":\\\"64d85b2098094a4fa02f25f7a1444c50\\\",\\\"isHidden\\\":false},\\\"surveyid\\\":{\\\"id\\\":\\\"1132a62678c24bbda688337615fd51bb\\\",\\\"name\\\":\\\"surveyid\\\",\\\"label\\\":\\\"SurveyId\\\",\\\"defaultValue\\\":\\\"\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"surveyVerificationMsg\\\":{\\\"id\\\":\\\"e5e2dc8c74a64bf7ba531a2b734bd9cd\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"surveyVerificationMsg\\\",\\\"label\\\":\\\"surveyVerificationMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"confirmationneeded\\\":{\\\"id\\\":\\\"75bc445130284002947077d668cac779\\\",\\\"name\\\":\\\"confirmationneeded\\\",\\\"label\\\":\\\"ConfirmationNeeded\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"currentQuestionMandatory\\\":{\\\"id\\\":\\\"f4cfc3cbbdca4d46b23a1de57709a8e0\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"true\\\"},\\\"name\\\":\\\"currentQuestionMandatory\\\",\\\"label\\\":\\\"currentQuestionMandatory\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"savequestionstocontext\\\":{\\\"id\\\":\\\"ba2a161b94a3468a86603955cca630a1\\\",\\\"name\\\":\\\"savequestionstocontext\\\",\\\"label\\\":\\\"SaveQuestionsToContext\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"_topic_postchat_user_id\\\":{\\\"id\\\":\\\"1ebd3fa354824ebcb2abd32c7f5a08ee\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"_topic_postchat_user_id\\\",\\\"label\\\":\\\"_topic_postchat_user_id\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyName\\\":{\\\"id\\\":\\\"fbdedb6037d443fc94ac909130d72657\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyName\\\",\\\"label\\\":\\\"surveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_chat_survey_name\\\":{\\\"id\\\":\\\"62b3a6b4779d449faee2e5abee5678a5\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_chat_survey_name\\\":{\\\"id\\\":\\\"b712f462443f422882112475625c1f51\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_assessment_instance\\\":{\\\"id\\\":\\\"c561d907f23a4ee485d105e3deefe041\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_assessment_instance\\\":{\\\"id\\\":\\\"5f4fab2392e34755a790d59670b35294\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"user\\\":{\\\"category\\\":\\\"vaInputs\\\",\\\"id\\\":\\\"current-user\\\",\\\"label\\\":\\\"User\\\",\\\"name\\\":\\\"user\\\",\\\"table\\\":\\\"sys_user\\\",\\\"varType\\\":\\\"reference\\\"},\\\"defaultSurveyName\\\":{\\\"id\\\":\\\"b0a2dbc7899742b19e9f2d904b7bfc3e\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"defaultSurveyName\\\",\\\"label\\\":\\\"defaultSurveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionFieldValidator\\\":{\\\"id\\\":\\\"9c7e90dca34b47489835d0bcdc8e4933\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionFieldValidator\\\",\\\"label\\\":\\\"currentQuestionFieldValidator\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceTable\\\":{\\\"id\\\":\\\"a7b460d515ca4a2087c92d2c8bf5fbc9\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceTable\\\",\\\"label\\\":\\\"currentQuestionReferenceTable\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceCondition\\\":{\\\"id\\\":\\\"6ec01bc01b7144ec90530b7f9af69bb2\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceCondition\\\",\\\"label\\\":\\\"currentQuestionReferenceCondition\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"active\\\":{\\\"id\\\":\\\"3f44cb42666b408fbb6f952fe939d920\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"false\\\"},\\\"name\\\":\\\"active\\\",\\\"label\\\":\\\"active\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\":{\\\"id\\\":\\\"2f2b481c82a94d1996f70567027cbb41\\\",\\\"name\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"label\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_boolean_question\\\":{\\\"id\\\":\\\"b5790fea6a77427aaf10a8cb5ee3cef0\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Boolean Question\\\",\\\"name\\\":\\\"show_boolean_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8a8d038a0f75488885032aceabd284ce\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\"},\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\":{\\\"id\\\":\\\"5229b91bab174a52829686976666ed1b\\\",\\\"name\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"label\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_text_input_question\\\":{\\\"id\\\":\\\"0775ff6cf5b94c4692d1a7be6b9fe010\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Text Input Question\\\",\\\"name\\\":\\\"show_text_input_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"369375049a91494e9da6cd6e6cb3cb28\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\"},\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\":{\\\"id\\\":\\\"9421933d83ba4506b292d81bb60b2999\\\",\\\"name\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"label\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_choice_question\\\":{\\\"id\\\":\\\"dea29579e2c44cdab652446be7273444\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Choice Question\\\",\\\"name\\\":\\\"show_choice_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8d2ac71ed40a416a9751e5bd73a6e442\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\"},\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\":{\\\"id\\\":\\\"e5d8423283fc4d2595fd661bd5a2eb69\\\",\\\"name\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"label\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_date_question\\\":{\\\"id\\\":\\\"fbe9af88d71a49f3845d37b4a93bbe15\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Date Question\\\",\\\"name\\\":\\\"show_date_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"e8625b3c4b794d769bb0da9d0a606848\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\"},\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\":{\\\"id\\\":\\\"a7dc2985e75f4c5cbd8b508e8ab6620c\\\",\\\"name\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"label\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_datetime_question\\\":{\\\"id\\\":\\\"c1d6aa7022164ba6a2b0291228d96249\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Datetime Question\\\",\\\"name\\\":\\\"show_datetime_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date_time\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"cb013d5f2f4b4d0789b486a504e6d2f2\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\"},\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\":{\\\"id\\\":\\\"78de1c7f496f430985b8d3ac5f93acac\\\",\\\"name\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"label\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_image_scale_question\\\":{\\\"id\\\":\\\"b600afffba2d46a1a225c17e62ee4734\\\",\\\"varType\\\":\\\"carousel-image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Image Scale Question\\\",\\\"name\\\":\\\"show_image_scale_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"26cffe08aa7147c79ffc7489da676135\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\"},\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\":{\\\"id\\\":\\\"3148914579f645b88e5e0bbc22ab9cf4\\\",\\\"name\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"label\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"verify_response\\\":{\\\"id\\\":\\\"a813e0458a174bb0b415483fe89c00e4\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Verify Response\\\",\\\"name\\\":\\\"verify_response\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"c0f7a2a49b4f49688d9a1c1dd4e216f9\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\"},\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\":{\\\"id\\\":\\\"498f5de051d6461d87508d10b8a73ecf\\\",\\\"name\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"label\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_reference_question\\\":{\\\"id\\\":\\\"1b42a3cd06f14eda968880b670491ebb\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Reference Question\\\",\\\"name\\\":\\\"show_reference_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"b6173737c4e740c584b5efe1424aec8b\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\"}}\\n                    Object.keys(output).forEach(function(key) {\\n                        var mappedKey = mappings[key];\\n                        if (!vaInputs[mappedKey]) {vaInputs.initialize(mappedKey);}\\n                        var isMultiSelect = variables[mappedKey].varType === 'array.reference';\\n                        if (isMultiSelect) {vaInputs[mappedKey] = output[key] ? JSON.parse(output[key]) : '';}\\n                        else {vaInputs[mappedKey] = output[key];}\\n                    });\\n                })()\",\"id\":\"9612b1f2b9b74eaea67b272ce2e7ef7c\",\"name\":\"8d2ac71ed40a416a9751e5bd73a6e442_ai_data_collector_output_handler\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) > -1) {\\n        vaInputs.show_choice_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    }\\n        return false;\\n})()\\n\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n                    var mappings = {\\\"show_date_question\\\":\\\"show_date_question\\\",\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\"};\\n                    var output = JSON.parse(vaInputs['ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output']);\\n                    var variables = {\\\"surveyInstanceId\\\":{\\\"id\\\":\\\"42731da272e043d29de8a18ae4abe8ec\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyInstanceId\\\",\\\"label\\\":\\\"surveyInstanceId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyQuestions\\\":{\\\"id\\\":\\\"a019f4d9d2034f1e8ce4413ad6814d4c\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyQuestions\\\",\\\"label\\\":\\\"surveyQuestions\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionIndex\\\":{\\\"id\\\":\\\"4606ff81e3b1466dba105ac8db0a3ff1\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"-1\\\"},\\\"name\\\":\\\"questionIndex\\\",\\\"label\\\":\\\"questionIndex\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionCount\\\":{\\\"id\\\":\\\"701eeb0ead3946b4a95fc310996f51d5\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"0\\\"},\\\"name\\\":\\\"questionCount\\\",\\\"label\\\":\\\"questionCount\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyAnswers\\\":{\\\"id\\\":\\\"e0b97ea5de424260a17d367b713e6233\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"{}\\\"},\\\"name\\\":\\\"surveyAnswers\\\",\\\"label\\\":\\\"surveyAnswers\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"choiceTypes\\\":{\\\"id\\\":\\\"5fa5bab12ab3407fa0243a6e4b1e5b55\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"choice,scale,numericscale\\\"},\\\"name\\\":\\\"choiceTypes\\\",\\\"label\\\":\\\"choiceTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionId\\\":{\\\"id\\\":\\\"953851ffa4294d04859d006bf28a4986\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionId\\\",\\\"label\\\":\\\"currentQuestionId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionType\\\":{\\\"id\\\":\\\"1d2077df93314785b211efe410798278\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionType\\\",\\\"label\\\":\\\"currentQuestionType\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMetric\\\":{\\\"id\\\":\\\"00d261d656824f6f8f150a2025f4eaae\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionMetric\\\",\\\"label\\\":\\\"currentQuestionMetric\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionDisplay\\\":{\\\"id\\\":\\\"601f508ef27a49a18330230ddcc12772\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionDisplay\\\",\\\"label\\\":\\\"currentQuestionDisplay\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"introduction\\\":{\\\"id\\\":\\\"b56216c2f682436d9e56d9ef36471bcb\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"introduction\\\",\\\"label\\\":\\\"introduction\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"endNote\\\":{\\\"id\\\":\\\"0c33e298eff44fc88364434b538e805f\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"endNote\\\",\\\"label\\\":\\\"endNote\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"textTypes\\\":{\\\"id\\\":\\\"6545133e2b144832a1ecea359dcc39b9\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"string,long,percentage\\\"},\\\"name\\\":\\\"textTypes\\\",\\\"label\\\":\\\"textTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMax\\\":{\\\"id\\\":\\\"dd7230f4e76642c4b1676e04fa2af480\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMax\\\",\\\"label\\\":\\\"currentQuestionMax\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMin\\\":{\\\"id\\\":\\\"3f8a633cceb94a7a8c29a2622f003795\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMin\\\",\\\"label\\\":\\\"currentQuestionMin\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerValidation\\\":{\\\"id\\\":\\\"cf9a19900c7043bd817ff9f5794941ed\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentAnswerValidation\\\",\\\"label\\\":\\\"currentAnswerValidation\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerErrorMsg\\\":{\\\"id\\\":\\\"607bdaced73d4d7fab9239c0d64a4210\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"''\\\"},\\\"name\\\":\\\"currentAnswerErrorMsg\\\",\\\"label\\\":\\\"currentAnswerErrorMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"show_attachment_question\\\":{\\\"id\\\":\\\"bba30ac7475c47cc93da35130951478b\\\",\\\"name\\\":\\\"show_attachment_question\\\",\\\"label\\\":\\\"Show Attachment Question\\\",\\\"varType\\\":\\\"image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"nodeId\\\":\\\"64d85b2098094a4fa02f25f7a1444c50\\\",\\\"isHidden\\\":false},\\\"surveyid\\\":{\\\"id\\\":\\\"1132a62678c24bbda688337615fd51bb\\\",\\\"name\\\":\\\"surveyid\\\",\\\"label\\\":\\\"SurveyId\\\",\\\"defaultValue\\\":\\\"\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"surveyVerificationMsg\\\":{\\\"id\\\":\\\"e5e2dc8c74a64bf7ba531a2b734bd9cd\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"surveyVerificationMsg\\\",\\\"label\\\":\\\"surveyVerificationMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"confirmationneeded\\\":{\\\"id\\\":\\\"75bc445130284002947077d668cac779\\\",\\\"name\\\":\\\"confirmationneeded\\\",\\\"label\\\":\\\"ConfirmationNeeded\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"currentQuestionMandatory\\\":{\\\"id\\\":\\\"f4cfc3cbbdca4d46b23a1de57709a8e0\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"true\\\"},\\\"name\\\":\\\"currentQuestionMandatory\\\",\\\"label\\\":\\\"currentQuestionMandatory\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"savequestionstocontext\\\":{\\\"id\\\":\\\"ba2a161b94a3468a86603955cca630a1\\\",\\\"name\\\":\\\"savequestionstocontext\\\",\\\"label\\\":\\\"SaveQuestionsToContext\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"_topic_postchat_user_id\\\":{\\\"id\\\":\\\"1ebd3fa354824ebcb2abd32c7f5a08ee\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"_topic_postchat_user_id\\\",\\\"label\\\":\\\"_topic_postchat_user_id\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyName\\\":{\\\"id\\\":\\\"fbdedb6037d443fc94ac909130d72657\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyName\\\",\\\"label\\\":\\\"surveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_chat_survey_name\\\":{\\\"id\\\":\\\"62b3a6b4779d449faee2e5abee5678a5\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_chat_survey_name\\\":{\\\"id\\\":\\\"b712f462443f422882112475625c1f51\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_assessment_instance\\\":{\\\"id\\\":\\\"c561d907f23a4ee485d105e3deefe041\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_assessment_instance\\\":{\\\"id\\\":\\\"5f4fab2392e34755a790d59670b35294\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"user\\\":{\\\"category\\\":\\\"vaInputs\\\",\\\"id\\\":\\\"current-user\\\",\\\"label\\\":\\\"User\\\",\\\"name\\\":\\\"user\\\",\\\"table\\\":\\\"sys_user\\\",\\\"varType\\\":\\\"reference\\\"},\\\"defaultSurveyName\\\":{\\\"id\\\":\\\"b0a2dbc7899742b19e9f2d904b7bfc3e\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"defaultSurveyName\\\",\\\"label\\\":\\\"defaultSurveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionFieldValidator\\\":{\\\"id\\\":\\\"9c7e90dca34b47489835d0bcdc8e4933\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionFieldValidator\\\",\\\"label\\\":\\\"currentQuestionFieldValidator\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceTable\\\":{\\\"id\\\":\\\"a7b460d515ca4a2087c92d2c8bf5fbc9\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceTable\\\",\\\"label\\\":\\\"currentQuestionReferenceTable\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceCondition\\\":{\\\"id\\\":\\\"6ec01bc01b7144ec90530b7f9af69bb2\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceCondition\\\",\\\"label\\\":\\\"currentQuestionReferenceCondition\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"active\\\":{\\\"id\\\":\\\"3f44cb42666b408fbb6f952fe939d920\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"false\\\"},\\\"name\\\":\\\"active\\\",\\\"label\\\":\\\"active\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\":{\\\"id\\\":\\\"2f2b481c82a94d1996f70567027cbb41\\\",\\\"name\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"label\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_boolean_question\\\":{\\\"id\\\":\\\"b5790fea6a77427aaf10a8cb5ee3cef0\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Boolean Question\\\",\\\"name\\\":\\\"show_boolean_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8a8d038a0f75488885032aceabd284ce\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\"},\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\":{\\\"id\\\":\\\"5229b91bab174a52829686976666ed1b\\\",\\\"name\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"label\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_text_input_question\\\":{\\\"id\\\":\\\"0775ff6cf5b94c4692d1a7be6b9fe010\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Text Input Question\\\",\\\"name\\\":\\\"show_text_input_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"369375049a91494e9da6cd6e6cb3cb28\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\"},\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\":{\\\"id\\\":\\\"9421933d83ba4506b292d81bb60b2999\\\",\\\"name\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"label\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_choice_question\\\":{\\\"id\\\":\\\"dea29579e2c44cdab652446be7273444\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Choice Question\\\",\\\"name\\\":\\\"show_choice_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8d2ac71ed40a416a9751e5bd73a6e442\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\"},\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\":{\\\"id\\\":\\\"e5d8423283fc4d2595fd661bd5a2eb69\\\",\\\"name\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"label\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_date_question\\\":{\\\"id\\\":\\\"fbe9af88d71a49f3845d37b4a93bbe15\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Date Question\\\",\\\"name\\\":\\\"show_date_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"e8625b3c4b794d769bb0da9d0a606848\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\"},\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\":{\\\"id\\\":\\\"a7dc2985e75f4c5cbd8b508e8ab6620c\\\",\\\"name\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"label\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_datetime_question\\\":{\\\"id\\\":\\\"c1d6aa7022164ba6a2b0291228d96249\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Datetime Question\\\",\\\"name\\\":\\\"show_datetime_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date_time\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"cb013d5f2f4b4d0789b486a504e6d2f2\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\"},\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\":{\\\"id\\\":\\\"78de1c7f496f430985b8d3ac5f93acac\\\",\\\"name\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"label\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_image_scale_question\\\":{\\\"id\\\":\\\"b600afffba2d46a1a225c17e62ee4734\\\",\\\"varType\\\":\\\"carousel-image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Image Scale Question\\\",\\\"name\\\":\\\"show_image_scale_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"26cffe08aa7147c79ffc7489da676135\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\"},\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\":{\\\"id\\\":\\\"3148914579f645b88e5e0bbc22ab9cf4\\\",\\\"name\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"label\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"verify_response\\\":{\\\"id\\\":\\\"a813e0458a174bb0b415483fe89c00e4\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Verify Response\\\",\\\"name\\\":\\\"verify_response\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"c0f7a2a49b4f49688d9a1c1dd4e216f9\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\"},\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\":{\\\"id\\\":\\\"498f5de051d6461d87508d10b8a73ecf\\\",\\\"name\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"label\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_reference_question\\\":{\\\"id\\\":\\\"1b42a3cd06f14eda968880b670491ebb\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Reference Question\\\",\\\"name\\\":\\\"show_reference_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"b6173737c4e740c584b5efe1424aec8b\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\"}}\\n                    Object.keys(output).forEach(function(key) {\\n                        var mappedKey = mappings[key];\\n                        if (!vaInputs[mappedKey]) {vaInputs.initialize(mappedKey);}\\n                        var isMultiSelect = variables[mappedKey].varType === 'array.reference';\\n                        if (isMultiSelect) {vaInputs[mappedKey] = output[key] ? JSON.parse(output[key]) : '';}\\n                        else {vaInputs[mappedKey] = output[key];}\\n                    });\\n                })()\",\"id\":\"1db930a352404d8683f9d2bf1c28ef53\",\"name\":\"e8625b3c4b794d769bb0da9d0a606848_ai_data_collector_output_handler\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.currentQuestionType === 'date') {\\n        vaInputs.show_date_question.setRequired (vaVars.currentQuestionMandatory);\\n        return true;\\n    } else \\n        return false;\\n})()\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n                    var mappings = {\\\"show_datetime_question\\\":\\\"show_datetime_question\\\",\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\"};\\n                    var output = JSON.parse(vaInputs['ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output']);\\n                    var variables = {\\\"surveyInstanceId\\\":{\\\"id\\\":\\\"42731da272e043d29de8a18ae4abe8ec\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyInstanceId\\\",\\\"label\\\":\\\"surveyInstanceId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyQuestions\\\":{\\\"id\\\":\\\"a019f4d9d2034f1e8ce4413ad6814d4c\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyQuestions\\\",\\\"label\\\":\\\"surveyQuestions\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionIndex\\\":{\\\"id\\\":\\\"4606ff81e3b1466dba105ac8db0a3ff1\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"-1\\\"},\\\"name\\\":\\\"questionIndex\\\",\\\"label\\\":\\\"questionIndex\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionCount\\\":{\\\"id\\\":\\\"701eeb0ead3946b4a95fc310996f51d5\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"0\\\"},\\\"name\\\":\\\"questionCount\\\",\\\"label\\\":\\\"questionCount\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyAnswers\\\":{\\\"id\\\":\\\"e0b97ea5de424260a17d367b713e6233\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"{}\\\"},\\\"name\\\":\\\"surveyAnswers\\\",\\\"label\\\":\\\"surveyAnswers\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"choiceTypes\\\":{\\\"id\\\":\\\"5fa5bab12ab3407fa0243a6e4b1e5b55\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"choice,scale,numericscale\\\"},\\\"name\\\":\\\"choiceTypes\\\",\\\"label\\\":\\\"choiceTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionId\\\":{\\\"id\\\":\\\"953851ffa4294d04859d006bf28a4986\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionId\\\",\\\"label\\\":\\\"currentQuestionId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionType\\\":{\\\"id\\\":\\\"1d2077df93314785b211efe410798278\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionType\\\",\\\"label\\\":\\\"currentQuestionType\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMetric\\\":{\\\"id\\\":\\\"00d261d656824f6f8f150a2025f4eaae\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionMetric\\\",\\\"label\\\":\\\"currentQuestionMetric\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionDisplay\\\":{\\\"id\\\":\\\"601f508ef27a49a18330230ddcc12772\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionDisplay\\\",\\\"label\\\":\\\"currentQuestionDisplay\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"introduction\\\":{\\\"id\\\":\\\"b56216c2f682436d9e56d9ef36471bcb\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"introduction\\\",\\\"label\\\":\\\"introduction\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"endNote\\\":{\\\"id\\\":\\\"0c33e298eff44fc88364434b538e805f\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"endNote\\\",\\\"label\\\":\\\"endNote\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"textTypes\\\":{\\\"id\\\":\\\"6545133e2b144832a1ecea359dcc39b9\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"string,long,percentage\\\"},\\\"name\\\":\\\"textTypes\\\",\\\"label\\\":\\\"textTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMax\\\":{\\\"id\\\":\\\"dd7230f4e76642c4b1676e04fa2af480\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMax\\\",\\\"label\\\":\\\"currentQuestionMax\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMin\\\":{\\\"id\\\":\\\"3f8a633cceb94a7a8c29a2622f003795\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMin\\\",\\\"label\\\":\\\"currentQuestionMin\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerValidation\\\":{\\\"id\\\":\\\"cf9a19900c7043bd817ff9f5794941ed\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentAnswerValidation\\\",\\\"label\\\":\\\"currentAnswerValidation\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerErrorMsg\\\":{\\\"id\\\":\\\"607bdaced73d4d7fab9239c0d64a4210\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"''\\\"},\\\"name\\\":\\\"currentAnswerErrorMsg\\\",\\\"label\\\":\\\"currentAnswerErrorMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"show_attachment_question\\\":{\\\"id\\\":\\\"bba30ac7475c47cc93da35130951478b\\\",\\\"name\\\":\\\"show_attachment_question\\\",\\\"label\\\":\\\"Show Attachment Question\\\",\\\"varType\\\":\\\"image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"nodeId\\\":\\\"64d85b2098094a4fa02f25f7a1444c50\\\",\\\"isHidden\\\":false},\\\"surveyid\\\":{\\\"id\\\":\\\"1132a62678c24bbda688337615fd51bb\\\",\\\"name\\\":\\\"surveyid\\\",\\\"label\\\":\\\"SurveyId\\\",\\\"defaultValue\\\":\\\"\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"surveyVerificationMsg\\\":{\\\"id\\\":\\\"e5e2dc8c74a64bf7ba531a2b734bd9cd\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"surveyVerificationMsg\\\",\\\"label\\\":\\\"surveyVerificationMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"confirmationneeded\\\":{\\\"id\\\":\\\"75bc445130284002947077d668cac779\\\",\\\"name\\\":\\\"confirmationneeded\\\",\\\"label\\\":\\\"ConfirmationNeeded\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"currentQuestionMandatory\\\":{\\\"id\\\":\\\"f4cfc3cbbdca4d46b23a1de57709a8e0\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"true\\\"},\\\"name\\\":\\\"currentQuestionMandatory\\\",\\\"label\\\":\\\"currentQuestionMandatory\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"savequestionstocontext\\\":{\\\"id\\\":\\\"ba2a161b94a3468a86603955cca630a1\\\",\\\"name\\\":\\\"savequestionstocontext\\\",\\\"label\\\":\\\"SaveQuestionsToContext\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"_topic_postchat_user_id\\\":{\\\"id\\\":\\\"1ebd3fa354824ebcb2abd32c7f5a08ee\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"_topic_postchat_user_id\\\",\\\"label\\\":\\\"_topic_postchat_user_id\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyName\\\":{\\\"id\\\":\\\"fbdedb6037d443fc94ac909130d72657\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyName\\\",\\\"label\\\":\\\"surveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_chat_survey_name\\\":{\\\"id\\\":\\\"62b3a6b4779d449faee2e5abee5678a5\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_chat_survey_name\\\":{\\\"id\\\":\\\"b712f462443f422882112475625c1f51\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_assessment_instance\\\":{\\\"id\\\":\\\"c561d907f23a4ee485d105e3deefe041\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_assessment_instance\\\":{\\\"id\\\":\\\"5f4fab2392e34755a790d59670b35294\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"user\\\":{\\\"category\\\":\\\"vaInputs\\\",\\\"id\\\":\\\"current-user\\\",\\\"label\\\":\\\"User\\\",\\\"name\\\":\\\"user\\\",\\\"table\\\":\\\"sys_user\\\",\\\"varType\\\":\\\"reference\\\"},\\\"defaultSurveyName\\\":{\\\"id\\\":\\\"b0a2dbc7899742b19e9f2d904b7bfc3e\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"defaultSurveyName\\\",\\\"label\\\":\\\"defaultSurveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionFieldValidator\\\":{\\\"id\\\":\\\"9c7e90dca34b47489835d0bcdc8e4933\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionFieldValidator\\\",\\\"label\\\":\\\"currentQuestionFieldValidator\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceTable\\\":{\\\"id\\\":\\\"a7b460d515ca4a2087c92d2c8bf5fbc9\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceTable\\\",\\\"label\\\":\\\"currentQuestionReferenceTable\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceCondition\\\":{\\\"id\\\":\\\"6ec01bc01b7144ec90530b7f9af69bb2\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceCondition\\\",\\\"label\\\":\\\"currentQuestionReferenceCondition\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"active\\\":{\\\"id\\\":\\\"3f44cb42666b408fbb6f952fe939d920\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"false\\\"},\\\"name\\\":\\\"active\\\",\\\"label\\\":\\\"active\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\":{\\\"id\\\":\\\"2f2b481c82a94d1996f70567027cbb41\\\",\\\"name\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"label\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_boolean_question\\\":{\\\"id\\\":\\\"b5790fea6a77427aaf10a8cb5ee3cef0\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Boolean Question\\\",\\\"name\\\":\\\"show_boolean_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8a8d038a0f75488885032aceabd284ce\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\"},\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\":{\\\"id\\\":\\\"5229b91bab174a52829686976666ed1b\\\",\\\"name\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"label\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_text_input_question\\\":{\\\"id\\\":\\\"0775ff6cf5b94c4692d1a7be6b9fe010\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Text Input Question\\\",\\\"name\\\":\\\"show_text_input_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"369375049a91494e9da6cd6e6cb3cb28\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\"},\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\":{\\\"id\\\":\\\"9421933d83ba4506b292d81bb60b2999\\\",\\\"name\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"label\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_choice_question\\\":{\\\"id\\\":\\\"dea29579e2c44cdab652446be7273444\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Choice Question\\\",\\\"name\\\":\\\"show_choice_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8d2ac71ed40a416a9751e5bd73a6e442\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\"},\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\":{\\\"id\\\":\\\"e5d8423283fc4d2595fd661bd5a2eb69\\\",\\\"name\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"label\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_date_question\\\":{\\\"id\\\":\\\"fbe9af88d71a49f3845d37b4a93bbe15\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Date Question\\\",\\\"name\\\":\\\"show_date_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"e8625b3c4b794d769bb0da9d0a606848\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\"},\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\":{\\\"id\\\":\\\"a7dc2985e75f4c5cbd8b508e8ab6620c\\\",\\\"name\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"label\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_datetime_question\\\":{\\\"id\\\":\\\"c1d6aa7022164ba6a2b0291228d96249\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Datetime Question\\\",\\\"name\\\":\\\"show_datetime_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date_time\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"cb013d5f2f4b4d0789b486a504e6d2f2\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\"},\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\":{\\\"id\\\":\\\"78de1c7f496f430985b8d3ac5f93acac\\\",\\\"name\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"label\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_image_scale_question\\\":{\\\"id\\\":\\\"b600afffba2d46a1a225c17e62ee4734\\\",\\\"varType\\\":\\\"carousel-image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Image Scale Question\\\",\\\"name\\\":\\\"show_image_scale_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"26cffe08aa7147c79ffc7489da676135\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\"},\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\":{\\\"id\\\":\\\"3148914579f645b88e5e0bbc22ab9cf4\\\",\\\"name\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"label\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"verify_response\\\":{\\\"id\\\":\\\"a813e0458a174bb0b415483fe89c00e4\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Verify Response\\\",\\\"name\\\":\\\"verify_response\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"c0f7a2a49b4f49688d9a1c1dd4e216f9\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\"},\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\":{\\\"id\\\":\\\"498f5de051d6461d87508d10b8a73ecf\\\",\\\"name\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"label\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_reference_question\\\":{\\\"id\\\":\\\"1b42a3cd06f14eda968880b670491ebb\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Reference Question\\\",\\\"name\\\":\\\"show_reference_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"b6173737c4e740c584b5efe1424aec8b\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\"}}\\n                    Object.keys(output).forEach(function(key) {\\n                        var mappedKey = mappings[key];\\n                        if (!vaInputs[mappedKey]) {vaInputs.initialize(mappedKey);}\\n                        var isMultiSelect = variables[mappedKey].varType === 'array.reference';\\n                        if (isMultiSelect) {vaInputs[mappedKey] = output[key] ? JSON.parse(output[key]) : '';}\\n                        else {vaInputs[mappedKey] = output[key];}\\n                    });\\n                })()\",\"id\":\"678d5a89f6a84a24a1598164a63e5ddf\",\"name\":\"cb013d5f2f4b4d0789b486a504e6d2f2_ai_data_collector_output_handler\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.currentQuestionType === 'datetime') {\\n        vaInputs.show_datetime_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n                    var mappings = {\\\"show_image_scale_question\\\":\\\"show_image_scale_question\\\",\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\"};\\n                    var output = JSON.parse(vaInputs['ai_data_collector_26cffe08aa7147c79ffc7489da676135_output']);\\n                    var variables = {\\\"surveyInstanceId\\\":{\\\"id\\\":\\\"42731da272e043d29de8a18ae4abe8ec\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyInstanceId\\\",\\\"label\\\":\\\"surveyInstanceId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyQuestions\\\":{\\\"id\\\":\\\"a019f4d9d2034f1e8ce4413ad6814d4c\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyQuestions\\\",\\\"label\\\":\\\"surveyQuestions\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionIndex\\\":{\\\"id\\\":\\\"4606ff81e3b1466dba105ac8db0a3ff1\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"-1\\\"},\\\"name\\\":\\\"questionIndex\\\",\\\"label\\\":\\\"questionIndex\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionCount\\\":{\\\"id\\\":\\\"701eeb0ead3946b4a95fc310996f51d5\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"0\\\"},\\\"name\\\":\\\"questionCount\\\",\\\"label\\\":\\\"questionCount\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyAnswers\\\":{\\\"id\\\":\\\"e0b97ea5de424260a17d367b713e6233\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"{}\\\"},\\\"name\\\":\\\"surveyAnswers\\\",\\\"label\\\":\\\"surveyAnswers\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"choiceTypes\\\":{\\\"id\\\":\\\"5fa5bab12ab3407fa0243a6e4b1e5b55\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"choice,scale,numericscale\\\"},\\\"name\\\":\\\"choiceTypes\\\",\\\"label\\\":\\\"choiceTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionId\\\":{\\\"id\\\":\\\"953851ffa4294d04859d006bf28a4986\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionId\\\",\\\"label\\\":\\\"currentQuestionId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionType\\\":{\\\"id\\\":\\\"1d2077df93314785b211efe410798278\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionType\\\",\\\"label\\\":\\\"currentQuestionType\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMetric\\\":{\\\"id\\\":\\\"00d261d656824f6f8f150a2025f4eaae\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionMetric\\\",\\\"label\\\":\\\"currentQuestionMetric\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionDisplay\\\":{\\\"id\\\":\\\"601f508ef27a49a18330230ddcc12772\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionDisplay\\\",\\\"label\\\":\\\"currentQuestionDisplay\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"introduction\\\":{\\\"id\\\":\\\"b56216c2f682436d9e56d9ef36471bcb\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"introduction\\\",\\\"label\\\":\\\"introduction\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"endNote\\\":{\\\"id\\\":\\\"0c33e298eff44fc88364434b538e805f\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"endNote\\\",\\\"label\\\":\\\"endNote\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"textTypes\\\":{\\\"id\\\":\\\"6545133e2b144832a1ecea359dcc39b9\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"string,long,percentage\\\"},\\\"name\\\":\\\"textTypes\\\",\\\"label\\\":\\\"textTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMax\\\":{\\\"id\\\":\\\"dd7230f4e76642c4b1676e04fa2af480\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMax\\\",\\\"label\\\":\\\"currentQuestionMax\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMin\\\":{\\\"id\\\":\\\"3f8a633cceb94a7a8c29a2622f003795\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMin\\\",\\\"label\\\":\\\"currentQuestionMin\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerValidation\\\":{\\\"id\\\":\\\"cf9a19900c7043bd817ff9f5794941ed\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentAnswerValidation\\\",\\\"label\\\":\\\"currentAnswerValidation\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerErrorMsg\\\":{\\\"id\\\":\\\"607bdaced73d4d7fab9239c0d64a4210\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"''\\\"},\\\"name\\\":\\\"currentAnswerErrorMsg\\\",\\\"label\\\":\\\"currentAnswerErrorMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"show_attachment_question\\\":{\\\"id\\\":\\\"bba30ac7475c47cc93da35130951478b\\\",\\\"name\\\":\\\"show_attachment_question\\\",\\\"label\\\":\\\"Show Attachment Question\\\",\\\"varType\\\":\\\"image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"nodeId\\\":\\\"64d85b2098094a4fa02f25f7a1444c50\\\",\\\"isHidden\\\":false},\\\"surveyid\\\":{\\\"id\\\":\\\"1132a62678c24bbda688337615fd51bb\\\",\\\"name\\\":\\\"surveyid\\\",\\\"label\\\":\\\"SurveyId\\\",\\\"defaultValue\\\":\\\"\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"surveyVerificationMsg\\\":{\\\"id\\\":\\\"e5e2dc8c74a64bf7ba531a2b734bd9cd\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"surveyVerificationMsg\\\",\\\"label\\\":\\\"surveyVerificationMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"confirmationneeded\\\":{\\\"id\\\":\\\"75bc445130284002947077d668cac779\\\",\\\"name\\\":\\\"confirmationneeded\\\",\\\"label\\\":\\\"ConfirmationNeeded\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"currentQuestionMandatory\\\":{\\\"id\\\":\\\"f4cfc3cbbdca4d46b23a1de57709a8e0\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"true\\\"},\\\"name\\\":\\\"currentQuestionMandatory\\\",\\\"label\\\":\\\"currentQuestionMandatory\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"savequestionstocontext\\\":{\\\"id\\\":\\\"ba2a161b94a3468a86603955cca630a1\\\",\\\"name\\\":\\\"savequestionstocontext\\\",\\\"label\\\":\\\"SaveQuestionsToContext\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"_topic_postchat_user_id\\\":{\\\"id\\\":\\\"1ebd3fa354824ebcb2abd32c7f5a08ee\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"_topic_postchat_user_id\\\",\\\"label\\\":\\\"_topic_postchat_user_id\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyName\\\":{\\\"id\\\":\\\"fbdedb6037d443fc94ac909130d72657\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyName\\\",\\\"label\\\":\\\"surveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_chat_survey_name\\\":{\\\"id\\\":\\\"62b3a6b4779d449faee2e5abee5678a5\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_chat_survey_name\\\":{\\\"id\\\":\\\"b712f462443f422882112475625c1f51\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_assessment_instance\\\":{\\\"id\\\":\\\"c561d907f23a4ee485d105e3deefe041\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_assessment_instance\\\":{\\\"id\\\":\\\"5f4fab2392e34755a790d59670b35294\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"user\\\":{\\\"category\\\":\\\"vaInputs\\\",\\\"id\\\":\\\"current-user\\\",\\\"label\\\":\\\"User\\\",\\\"name\\\":\\\"user\\\",\\\"table\\\":\\\"sys_user\\\",\\\"varType\\\":\\\"reference\\\"},\\\"defaultSurveyName\\\":{\\\"id\\\":\\\"b0a2dbc7899742b19e9f2d904b7bfc3e\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"defaultSurveyName\\\",\\\"label\\\":\\\"defaultSurveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionFieldValidator\\\":{\\\"id\\\":\\\"9c7e90dca34b47489835d0bcdc8e4933\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionFieldValidator\\\",\\\"label\\\":\\\"currentQuestionFieldValidator\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceTable\\\":{\\\"id\\\":\\\"a7b460d515ca4a2087c92d2c8bf5fbc9\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceTable\\\",\\\"label\\\":\\\"currentQuestionReferenceTable\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceCondition\\\":{\\\"id\\\":\\\"6ec01bc01b7144ec90530b7f9af69bb2\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceCondition\\\",\\\"label\\\":\\\"currentQuestionReferenceCondition\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"active\\\":{\\\"id\\\":\\\"3f44cb42666b408fbb6f952fe939d920\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"false\\\"},\\\"name\\\":\\\"active\\\",\\\"label\\\":\\\"active\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\":{\\\"id\\\":\\\"2f2b481c82a94d1996f70567027cbb41\\\",\\\"name\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"label\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_boolean_question\\\":{\\\"id\\\":\\\"b5790fea6a77427aaf10a8cb5ee3cef0\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Boolean Question\\\",\\\"name\\\":\\\"show_boolean_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8a8d038a0f75488885032aceabd284ce\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\"},\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\":{\\\"id\\\":\\\"5229b91bab174a52829686976666ed1b\\\",\\\"name\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"label\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_text_input_question\\\":{\\\"id\\\":\\\"0775ff6cf5b94c4692d1a7be6b9fe010\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Text Input Question\\\",\\\"name\\\":\\\"show_text_input_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"369375049a91494e9da6cd6e6cb3cb28\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\"},\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\":{\\\"id\\\":\\\"9421933d83ba4506b292d81bb60b2999\\\",\\\"name\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"label\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_choice_question\\\":{\\\"id\\\":\\\"dea29579e2c44cdab652446be7273444\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Choice Question\\\",\\\"name\\\":\\\"show_choice_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8d2ac71ed40a416a9751e5bd73a6e442\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\"},\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\":{\\\"id\\\":\\\"e5d8423283fc4d2595fd661bd5a2eb69\\\",\\\"name\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"label\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_date_question\\\":{\\\"id\\\":\\\"fbe9af88d71a49f3845d37b4a93bbe15\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Date Question\\\",\\\"name\\\":\\\"show_date_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"e8625b3c4b794d769bb0da9d0a606848\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\"},\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\":{\\\"id\\\":\\\"a7dc2985e75f4c5cbd8b508e8ab6620c\\\",\\\"name\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"label\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_datetime_question\\\":{\\\"id\\\":\\\"c1d6aa7022164ba6a2b0291228d96249\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Datetime Question\\\",\\\"name\\\":\\\"show_datetime_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date_time\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"cb013d5f2f4b4d0789b486a504e6d2f2\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\"},\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\":{\\\"id\\\":\\\"78de1c7f496f430985b8d3ac5f93acac\\\",\\\"name\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"label\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_image_scale_question\\\":{\\\"id\\\":\\\"b600afffba2d46a1a225c17e62ee4734\\\",\\\"varType\\\":\\\"carousel-image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Image Scale Question\\\",\\\"name\\\":\\\"show_image_scale_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"26cffe08aa7147c79ffc7489da676135\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\"},\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\":{\\\"id\\\":\\\"3148914579f645b88e5e0bbc22ab9cf4\\\",\\\"name\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"label\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"verify_response\\\":{\\\"id\\\":\\\"a813e0458a174bb0b415483fe89c00e4\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Verify Response\\\",\\\"name\\\":\\\"verify_response\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"c0f7a2a49b4f49688d9a1c1dd4e216f9\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\"},\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\":{\\\"id\\\":\\\"498f5de051d6461d87508d10b8a73ecf\\\",\\\"name\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"label\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_reference_question\\\":{\\\"id\\\":\\\"1b42a3cd06f14eda968880b670491ebb\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Reference Question\\\",\\\"name\\\":\\\"show_reference_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"b6173737c4e740c584b5efe1424aec8b\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\"}}\\n                    Object.keys(output).forEach(function(key) {\\n                        var mappedKey = mappings[key];\\n                        if (!vaInputs[mappedKey]) {vaInputs.initialize(mappedKey);}\\n                        var isMultiSelect = variables[mappedKey].varType === 'array.reference';\\n                        if (isMultiSelect) {vaInputs[mappedKey] = output[key] ? JSON.parse(output[key]) : '';}\\n                        else {vaInputs[mappedKey] = output[key];}\\n                    });\\n                })()\",\"id\":\"6fd902ee231941d6b6a0dfa9106d2c43\",\"name\":\"26cffe08aa7147c79ffc7489da676135_ai_data_collector_output_handler\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaVars.currentQuestionType === 'imagescale') {\\n        vaInputs.show_image_scale_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n                    var mappings = {\\\"verify_response\\\":\\\"verify_response\\\",\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\"};\\n                    var output = JSON.parse(vaInputs['ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output']);\\n                    var variables = {\\\"surveyInstanceId\\\":{\\\"id\\\":\\\"42731da272e043d29de8a18ae4abe8ec\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyInstanceId\\\",\\\"label\\\":\\\"surveyInstanceId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyQuestions\\\":{\\\"id\\\":\\\"a019f4d9d2034f1e8ce4413ad6814d4c\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyQuestions\\\",\\\"label\\\":\\\"surveyQuestions\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionIndex\\\":{\\\"id\\\":\\\"4606ff81e3b1466dba105ac8db0a3ff1\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"-1\\\"},\\\"name\\\":\\\"questionIndex\\\",\\\"label\\\":\\\"questionIndex\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionCount\\\":{\\\"id\\\":\\\"701eeb0ead3946b4a95fc310996f51d5\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"0\\\"},\\\"name\\\":\\\"questionCount\\\",\\\"label\\\":\\\"questionCount\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyAnswers\\\":{\\\"id\\\":\\\"e0b97ea5de424260a17d367b713e6233\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"{}\\\"},\\\"name\\\":\\\"surveyAnswers\\\",\\\"label\\\":\\\"surveyAnswers\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"choiceTypes\\\":{\\\"id\\\":\\\"5fa5bab12ab3407fa0243a6e4b1e5b55\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"choice,scale,numericscale\\\"},\\\"name\\\":\\\"choiceTypes\\\",\\\"label\\\":\\\"choiceTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionId\\\":{\\\"id\\\":\\\"953851ffa4294d04859d006bf28a4986\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionId\\\",\\\"label\\\":\\\"currentQuestionId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionType\\\":{\\\"id\\\":\\\"1d2077df93314785b211efe410798278\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionType\\\",\\\"label\\\":\\\"currentQuestionType\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMetric\\\":{\\\"id\\\":\\\"00d261d656824f6f8f150a2025f4eaae\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionMetric\\\",\\\"label\\\":\\\"currentQuestionMetric\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionDisplay\\\":{\\\"id\\\":\\\"601f508ef27a49a18330230ddcc12772\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionDisplay\\\",\\\"label\\\":\\\"currentQuestionDisplay\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"introduction\\\":{\\\"id\\\":\\\"b56216c2f682436d9e56d9ef36471bcb\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"introduction\\\",\\\"label\\\":\\\"introduction\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"endNote\\\":{\\\"id\\\":\\\"0c33e298eff44fc88364434b538e805f\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"endNote\\\",\\\"label\\\":\\\"endNote\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"textTypes\\\":{\\\"id\\\":\\\"6545133e2b144832a1ecea359dcc39b9\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"string,long,percentage\\\"},\\\"name\\\":\\\"textTypes\\\",\\\"label\\\":\\\"textTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMax\\\":{\\\"id\\\":\\\"dd7230f4e76642c4b1676e04fa2af480\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMax\\\",\\\"label\\\":\\\"currentQuestionMax\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMin\\\":{\\\"id\\\":\\\"3f8a633cceb94a7a8c29a2622f003795\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMin\\\",\\\"label\\\":\\\"currentQuestionMin\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerValidation\\\":{\\\"id\\\":\\\"cf9a19900c7043bd817ff9f5794941ed\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentAnswerValidation\\\",\\\"label\\\":\\\"currentAnswerValidation\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerErrorMsg\\\":{\\\"id\\\":\\\"607bdaced73d4d7fab9239c0d64a4210\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"''\\\"},\\\"name\\\":\\\"currentAnswerErrorMsg\\\",\\\"label\\\":\\\"currentAnswerErrorMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"show_attachment_question\\\":{\\\"id\\\":\\\"bba30ac7475c47cc93da35130951478b\\\",\\\"name\\\":\\\"show_attachment_question\\\",\\\"label\\\":\\\"Show Attachment Question\\\",\\\"varType\\\":\\\"image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"nodeId\\\":\\\"64d85b2098094a4fa02f25f7a1444c50\\\",\\\"isHidden\\\":false},\\\"surveyid\\\":{\\\"id\\\":\\\"1132a62678c24bbda688337615fd51bb\\\",\\\"name\\\":\\\"surveyid\\\",\\\"label\\\":\\\"SurveyId\\\",\\\"defaultValue\\\":\\\"\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"surveyVerificationMsg\\\":{\\\"id\\\":\\\"e5e2dc8c74a64bf7ba531a2b734bd9cd\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"surveyVerificationMsg\\\",\\\"label\\\":\\\"surveyVerificationMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"confirmationneeded\\\":{\\\"id\\\":\\\"75bc445130284002947077d668cac779\\\",\\\"name\\\":\\\"confirmationneeded\\\",\\\"label\\\":\\\"ConfirmationNeeded\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"currentQuestionMandatory\\\":{\\\"id\\\":\\\"f4cfc3cbbdca4d46b23a1de57709a8e0\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"true\\\"},\\\"name\\\":\\\"currentQuestionMandatory\\\",\\\"label\\\":\\\"currentQuestionMandatory\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"savequestionstocontext\\\":{\\\"id\\\":\\\"ba2a161b94a3468a86603955cca630a1\\\",\\\"name\\\":\\\"savequestionstocontext\\\",\\\"label\\\":\\\"SaveQuestionsToContext\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"_topic_postchat_user_id\\\":{\\\"id\\\":\\\"1ebd3fa354824ebcb2abd32c7f5a08ee\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"_topic_postchat_user_id\\\",\\\"label\\\":\\\"_topic_postchat_user_id\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyName\\\":{\\\"id\\\":\\\"fbdedb6037d443fc94ac909130d72657\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyName\\\",\\\"label\\\":\\\"surveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_chat_survey_name\\\":{\\\"id\\\":\\\"62b3a6b4779d449faee2e5abee5678a5\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_chat_survey_name\\\":{\\\"id\\\":\\\"b712f462443f422882112475625c1f51\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_assessment_instance\\\":{\\\"id\\\":\\\"c561d907f23a4ee485d105e3deefe041\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_assessment_instance\\\":{\\\"id\\\":\\\"5f4fab2392e34755a790d59670b35294\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"user\\\":{\\\"category\\\":\\\"vaInputs\\\",\\\"id\\\":\\\"current-user\\\",\\\"label\\\":\\\"User\\\",\\\"name\\\":\\\"user\\\",\\\"table\\\":\\\"sys_user\\\",\\\"varType\\\":\\\"reference\\\"},\\\"defaultSurveyName\\\":{\\\"id\\\":\\\"b0a2dbc7899742b19e9f2d904b7bfc3e\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"defaultSurveyName\\\",\\\"label\\\":\\\"defaultSurveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionFieldValidator\\\":{\\\"id\\\":\\\"9c7e90dca34b47489835d0bcdc8e4933\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionFieldValidator\\\",\\\"label\\\":\\\"currentQuestionFieldValidator\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceTable\\\":{\\\"id\\\":\\\"a7b460d515ca4a2087c92d2c8bf5fbc9\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceTable\\\",\\\"label\\\":\\\"currentQuestionReferenceTable\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceCondition\\\":{\\\"id\\\":\\\"6ec01bc01b7144ec90530b7f9af69bb2\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceCondition\\\",\\\"label\\\":\\\"currentQuestionReferenceCondition\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"active\\\":{\\\"id\\\":\\\"3f44cb42666b408fbb6f952fe939d920\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"false\\\"},\\\"name\\\":\\\"active\\\",\\\"label\\\":\\\"active\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\":{\\\"id\\\":\\\"2f2b481c82a94d1996f70567027cbb41\\\",\\\"name\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"label\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_boolean_question\\\":{\\\"id\\\":\\\"b5790fea6a77427aaf10a8cb5ee3cef0\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Boolean Question\\\",\\\"name\\\":\\\"show_boolean_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8a8d038a0f75488885032aceabd284ce\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\"},\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\":{\\\"id\\\":\\\"5229b91bab174a52829686976666ed1b\\\",\\\"name\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"label\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_text_input_question\\\":{\\\"id\\\":\\\"0775ff6cf5b94c4692d1a7be6b9fe010\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Text Input Question\\\",\\\"name\\\":\\\"show_text_input_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"369375049a91494e9da6cd6e6cb3cb28\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\"},\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\":{\\\"id\\\":\\\"9421933d83ba4506b292d81bb60b2999\\\",\\\"name\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"label\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_choice_question\\\":{\\\"id\\\":\\\"dea29579e2c44cdab652446be7273444\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Choice Question\\\",\\\"name\\\":\\\"show_choice_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8d2ac71ed40a416a9751e5bd73a6e442\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\"},\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\":{\\\"id\\\":\\\"e5d8423283fc4d2595fd661bd5a2eb69\\\",\\\"name\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"label\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_date_question\\\":{\\\"id\\\":\\\"fbe9af88d71a49f3845d37b4a93bbe15\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Date Question\\\",\\\"name\\\":\\\"show_date_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"e8625b3c4b794d769bb0da9d0a606848\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\"},\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\":{\\\"id\\\":\\\"a7dc2985e75f4c5cbd8b508e8ab6620c\\\",\\\"name\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"label\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_datetime_question\\\":{\\\"id\\\":\\\"c1d6aa7022164ba6a2b0291228d96249\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Datetime Question\\\",\\\"name\\\":\\\"show_datetime_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date_time\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"cb013d5f2f4b4d0789b486a504e6d2f2\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\"},\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\":{\\\"id\\\":\\\"78de1c7f496f430985b8d3ac5f93acac\\\",\\\"name\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"label\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_image_scale_question\\\":{\\\"id\\\":\\\"b600afffba2d46a1a225c17e62ee4734\\\",\\\"varType\\\":\\\"carousel-image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Image Scale Question\\\",\\\"name\\\":\\\"show_image_scale_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"26cffe08aa7147c79ffc7489da676135\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\"},\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\":{\\\"id\\\":\\\"3148914579f645b88e5e0bbc22ab9cf4\\\",\\\"name\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"label\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"verify_response\\\":{\\\"id\\\":\\\"a813e0458a174bb0b415483fe89c00e4\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Verify Response\\\",\\\"name\\\":\\\"verify_response\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"c0f7a2a49b4f49688d9a1c1dd4e216f9\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\"},\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\":{\\\"id\\\":\\\"498f5de051d6461d87508d10b8a73ecf\\\",\\\"name\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"label\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_reference_question\\\":{\\\"id\\\":\\\"1b42a3cd06f14eda968880b670491ebb\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Reference Question\\\",\\\"name\\\":\\\"show_reference_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"b6173737c4e740c584b5efe1424aec8b\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\"}}\\n                    Object.keys(output).forEach(function(key) {\\n                        var mappedKey = mappings[key];\\n                        if (!vaInputs[mappedKey]) {vaInputs.initialize(mappedKey);}\\n                        var isMultiSelect = variables[mappedKey].varType === 'array.reference';\\n                        if (isMultiSelect) {vaInputs[mappedKey] = output[key] ? JSON.parse(output[key]) : '';}\\n                        else {vaInputs[mappedKey] = output[key];}\\n                    });\\n                })()\",\"id\":\"7737a847cc6d4552ae8b773f750b7b1d\",\"name\":\"c0f7a2a49b4f49688d9a1c1dd4e216f9_ai_data_collector_output_handler\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n                    var mappings = {\\\"show_reference_question\\\":\\\"show_reference_question\\\",\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\"};\\n                    var output = JSON.parse(vaInputs['ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output']);\\n                    var variables = {\\\"surveyInstanceId\\\":{\\\"id\\\":\\\"42731da272e043d29de8a18ae4abe8ec\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyInstanceId\\\",\\\"label\\\":\\\"surveyInstanceId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyQuestions\\\":{\\\"id\\\":\\\"a019f4d9d2034f1e8ce4413ad6814d4c\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyQuestions\\\",\\\"label\\\":\\\"surveyQuestions\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionIndex\\\":{\\\"id\\\":\\\"4606ff81e3b1466dba105ac8db0a3ff1\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"-1\\\"},\\\"name\\\":\\\"questionIndex\\\",\\\"label\\\":\\\"questionIndex\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"questionCount\\\":{\\\"id\\\":\\\"701eeb0ead3946b4a95fc310996f51d5\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"0\\\"},\\\"name\\\":\\\"questionCount\\\",\\\"label\\\":\\\"questionCount\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyAnswers\\\":{\\\"id\\\":\\\"e0b97ea5de424260a17d367b713e6233\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"{}\\\"},\\\"name\\\":\\\"surveyAnswers\\\",\\\"label\\\":\\\"surveyAnswers\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"choiceTypes\\\":{\\\"id\\\":\\\"5fa5bab12ab3407fa0243a6e4b1e5b55\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"choice,scale,numericscale\\\"},\\\"name\\\":\\\"choiceTypes\\\",\\\"label\\\":\\\"choiceTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionId\\\":{\\\"id\\\":\\\"953851ffa4294d04859d006bf28a4986\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionId\\\",\\\"label\\\":\\\"currentQuestionId\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionType\\\":{\\\"id\\\":\\\"1d2077df93314785b211efe410798278\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionType\\\",\\\"label\\\":\\\"currentQuestionType\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMetric\\\":{\\\"id\\\":\\\"00d261d656824f6f8f150a2025f4eaae\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionMetric\\\",\\\"label\\\":\\\"currentQuestionMetric\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionDisplay\\\":{\\\"id\\\":\\\"601f508ef27a49a18330230ddcc12772\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"currentQuestionDisplay\\\",\\\"label\\\":\\\"currentQuestionDisplay\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"introduction\\\":{\\\"id\\\":\\\"b56216c2f682436d9e56d9ef36471bcb\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"introduction\\\",\\\"label\\\":\\\"introduction\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"endNote\\\":{\\\"id\\\":\\\"0c33e298eff44fc88364434b538e805f\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"endNote\\\",\\\"label\\\":\\\"endNote\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"textTypes\\\":{\\\"id\\\":\\\"6545133e2b144832a1ecea359dcc39b9\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"string,long,percentage\\\"},\\\"name\\\":\\\"textTypes\\\",\\\"label\\\":\\\"textTypes\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMax\\\":{\\\"id\\\":\\\"dd7230f4e76642c4b1676e04fa2af480\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMax\\\",\\\"label\\\":\\\"currentQuestionMax\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionMin\\\":{\\\"id\\\":\\\"3f8a633cceb94a7a8c29a2622f003795\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionMin\\\",\\\"label\\\":\\\"currentQuestionMin\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerValidation\\\":{\\\"id\\\":\\\"cf9a19900c7043bd817ff9f5794941ed\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentAnswerValidation\\\",\\\"label\\\":\\\"currentAnswerValidation\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentAnswerErrorMsg\\\":{\\\"id\\\":\\\"607bdaced73d4d7fab9239c0d64a4210\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"''\\\"},\\\"name\\\":\\\"currentAnswerErrorMsg\\\",\\\"label\\\":\\\"currentAnswerErrorMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"show_attachment_question\\\":{\\\"id\\\":\\\"bba30ac7475c47cc93da35130951478b\\\",\\\"name\\\":\\\"show_attachment_question\\\",\\\"label\\\":\\\"Show Attachment Question\\\",\\\"varType\\\":\\\"image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"nodeId\\\":\\\"64d85b2098094a4fa02f25f7a1444c50\\\",\\\"isHidden\\\":false},\\\"surveyid\\\":{\\\"id\\\":\\\"1132a62678c24bbda688337615fd51bb\\\",\\\"name\\\":\\\"surveyid\\\",\\\"label\\\":\\\"SurveyId\\\",\\\"defaultValue\\\":\\\"\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"surveyVerificationMsg\\\":{\\\"id\\\":\\\"e5e2dc8c74a64bf7ba531a2b734bd9cd\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"\\\"},\\\"name\\\":\\\"surveyVerificationMsg\\\",\\\"label\\\":\\\"surveyVerificationMsg\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"confirmationneeded\\\":{\\\"id\\\":\\\"75bc445130284002947077d668cac779\\\",\\\"name\\\":\\\"confirmationneeded\\\",\\\"label\\\":\\\"ConfirmationNeeded\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"currentQuestionMandatory\\\":{\\\"id\\\":\\\"f4cfc3cbbdca4d46b23a1de57709a8e0\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"true\\\"},\\\"name\\\":\\\"currentQuestionMandatory\\\",\\\"label\\\":\\\"currentQuestionMandatory\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"savequestionstocontext\\\":{\\\"id\\\":\\\"ba2a161b94a3468a86603955cca630a1\\\",\\\"name\\\":\\\"savequestionstocontext\\\",\\\"label\\\":\\\"SaveQuestionsToContext\\\",\\\"defaultValue\\\":\\\"false\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"input\\\"},\\\"nodeId\\\":\\\"b90ef5f7024d4e34b5ceaf628345df9c\\\",\\\"isHidden\\\":false},\\\"_topic_postchat_user_id\\\":{\\\"id\\\":\\\"1ebd3fa354824ebcb2abd32c7f5a08ee\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"_topic_postchat_user_id\\\",\\\"label\\\":\\\"_topic_postchat_user_id\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"surveyName\\\":{\\\"id\\\":\\\"fbdedb6037d443fc94ac909130d72657\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"surveyName\\\",\\\"label\\\":\\\"surveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_chat_survey_name\\\":{\\\"id\\\":\\\"62b3a6b4779d449faee2e5abee5678a5\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_pre_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_chat_survey_name\\\":{\\\"id\\\":\\\"b712f462443f422882112475625c1f51\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"label\\\":\\\"LiveAgent_post_chat_survey_name\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_pre_assessment_instance\\\":{\\\"id\\\":\\\"c561d907f23a4ee485d105e3deefe041\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_pre_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"LiveAgent_post_assessment_instance\\\":{\\\"id\\\":\\\"5f4fab2392e34755a790d59670b35294\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"label\\\":\\\"LiveAgent_post_assessment_instance\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"user\\\":{\\\"category\\\":\\\"vaInputs\\\",\\\"id\\\":\\\"current-user\\\",\\\"label\\\":\\\"User\\\",\\\"name\\\":\\\"user\\\",\\\"table\\\":\\\"sys_user\\\",\\\"varType\\\":\\\"reference\\\"},\\\"defaultSurveyName\\\":{\\\"id\\\":\\\"b0a2dbc7899742b19e9f2d904b7bfc3e\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"defaultSurveyName\\\",\\\"label\\\":\\\"defaultSurveyName\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionFieldValidator\\\":{\\\"id\\\":\\\"9c7e90dca34b47489835d0bcdc8e4933\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionFieldValidator\\\",\\\"label\\\":\\\"currentQuestionFieldValidator\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceTable\\\":{\\\"id\\\":\\\"a7b460d515ca4a2087c92d2c8bf5fbc9\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceTable\\\",\\\"label\\\":\\\"currentQuestionReferenceTable\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"currentQuestionReferenceCondition\\\":{\\\"id\\\":\\\"6ec01bc01b7144ec90530b7f9af69bb2\\\",\\\"value\\\":{\\\"value\\\":\\\"\\\",\\\"mode\\\":\\\"simple\\\"},\\\"name\\\":\\\"currentQuestionReferenceCondition\\\",\\\"label\\\":\\\"currentQuestionReferenceCondition\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"active\\\":{\\\"id\\\":\\\"3f44cb42666b408fbb6f952fe939d920\\\",\\\"value\\\":{\\\"mode\\\":\\\"simple\\\",\\\"value\\\":\\\"false\\\"},\\\"name\\\":\\\"active\\\",\\\"label\\\":\\\"active\\\",\\\"varType\\\":\\\"script\\\",\\\"category\\\":\\\"vaVars\\\"},\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\":{\\\"id\\\":\\\"2f2b481c82a94d1996f70567027cbb41\\\",\\\"name\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"label\\\":\\\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_boolean_question\\\":{\\\"id\\\":\\\"b5790fea6a77427aaf10a8cb5ee3cef0\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Boolean Question\\\",\\\"name\\\":\\\"show_boolean_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8a8d038a0f75488885032aceabd284ce\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to choose between two distinct options, typically representing \\\\\\\"Yes\\\\\\\" or \\\\\\\"No,\\\\\\\" \\\\\\\"True\\\\\\\" or \\\\\\\"False,\\\\\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\\\"},\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\":{\\\"id\\\":\\\"5229b91bab174a52829686976666ed1b\\\",\\\"name\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"label\\\":\\\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_text_input_question\\\":{\\\"id\\\":\\\"0775ff6cf5b94c4692d1a7be6b9fe010\\\",\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Text Input Question\\\",\\\"name\\\":\\\"show_text_input_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"369375049a91494e9da6cd6e6cb3cb28\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\\\"},\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\":{\\\"id\\\":\\\"9421933d83ba4506b292d81bb60b2999\\\",\\\"name\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"label\\\":\\\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_choice_question\\\":{\\\"id\\\":\\\"dea29579e2c44cdab652446be7273444\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Choice Question\\\",\\\"name\\\":\\\"show_choice_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"8d2ac71ed40a416a9751e5bd73a6e442\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\\\"},\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\":{\\\"id\\\":\\\"e5d8423283fc4d2595fd661bd5a2eb69\\\",\\\"name\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"label\\\":\\\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_date_question\\\":{\\\"id\\\":\\\"fbe9af88d71a49f3845d37b4a93bbe15\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Date Question\\\",\\\"name\\\":\\\"show_date_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"e8625b3c4b794d769bb0da9d0a606848\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\\\"},\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\":{\\\"id\\\":\\\"a7dc2985e75f4c5cbd8b508e8ab6620c\\\",\\\"name\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"label\\\":\\\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_datetime_question\\\":{\\\"id\\\":\\\"c1d6aa7022164ba6a2b0291228d96249\\\",\\\"varType\\\":\\\"date_time\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Datetime Question\\\",\\\"name\\\":\\\"show_datetime_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"date_time\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"cb013d5f2f4b4d0789b486a504e6d2f2\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\\\"},\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\":{\\\"id\\\":\\\"78de1c7f496f430985b8d3ac5f93acac\\\",\\\"name\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"label\\\":\\\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_image_scale_question\\\":{\\\"id\\\":\\\"b600afffba2d46a1a225c17e62ee4734\\\",\\\"varType\\\":\\\"carousel-image\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Image Scale Question\\\",\\\"name\\\":\\\"show_image_scale_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"26cffe08aa7147c79ffc7489da676135\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\\\"},\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\":{\\\"id\\\":\\\"3148914579f645b88e5e0bbc22ab9cf4\\\",\\\"name\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"label\\\":\\\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"verify_response\\\":{\\\"id\\\":\\\"a813e0458a174bb0b415483fe89c00e4\\\",\\\"varType\\\":\\\"boolean\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Verify Response\\\",\\\"name\\\":\\\"verify_response\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"c0f7a2a49b4f49688d9a1c1dd4e216f9\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\\\"},\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\":{\\\"id\\\":\\\"498f5de051d6461d87508d10b8a73ecf\\\",\\\"name\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"label\\\":\\\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\\\",\\\"isReferenceable\\\":false,\\\"varType\\\":\\\"string\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"metadata\\\":{\\\"libraryMappingType\\\":\\\"output\\\"}},\\\"show_reference_question\\\":{\\\"id\\\":\\\"1b42a3cd06f14eda968880b670491ebb\\\",\\\"varType\\\":\\\"reference\\\",\\\"category\\\":\\\"vaInputs\\\",\\\"label\\\":\\\"Show Reference Question\\\",\\\"name\\\":\\\"show_reference_question\\\",\\\"choices\\\":[{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"label\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}],\\\"mode\\\":\\\"external\\\",\\\"table\\\":\\\"\\\",\\\"aiInput\\\":true,\\\"inputId\\\":0,\\\"nodeId\\\":\\\"b6173737c4e740c584b5efe1424aec8b\\\",\\\"isHidden\\\":false,\\\"description\\\":\\\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\\\"}}\\n                    Object.keys(output).forEach(function(key) {\\n                        var mappedKey = mappings[key];\\n                        if (!vaInputs[mappedKey]) {vaInputs.initialize(mappedKey);}\\n                        var isMultiSelect = variables[mappedKey].varType === 'array.reference';\\n                        if (isMultiSelect) {vaInputs[mappedKey] = output[key] ? JSON.parse(output[key]) : '';}\\n                        else {vaInputs[mappedKey] = output[key];}\\n                    });\\n                })()\",\"id\":\"647ea2e210604a668d897db69405bf60\",\"name\":\"b6173737c4e740c584b5efe1424aec8b_ai_data_collector_output_handler\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if ((vaVars.currentQuestionType === 'reference')) {\\n        vaInputs.show_reference_question.setRequired(vaVars.currentQuestionMandatory);\\n        return true;\\n    } else\\n        return false;\\n})()\\n\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"ca955a1d346d48b09e9ce792dde52cc3\",\"target_node_id\":\"da165a652daf475698c988c6427d008f\",\"branch_id\":\"2bb2b7ba46ac475dbbab176b7334562b\",\"id\":\"d723d392011a4489b5e9707ea710ae01\",\"name\":\"2bb2b7ba46ac475dbbab176b7334562b\"},{\"type\":\"Edge\",\"source_node_id\":\"b90ef5f7024d4e34b5ceaf628345df9c\",\"target_node_id\":\"4761ab4e62324e3cb07ce4efc77ffd1f\",\"id\":\"d5d8414f7d124779a993b68bf5fb0c83\"},{\"type\":\"Edge\",\"source_node_id\":\"8d2ac71ed40a416a9751e5bd73a6e442\",\"target_node_id\":\"9612b1f2b9b74eaea67b272ce2e7ef7c\",\"id\":\"8303bc50a8db4769956dc4e82e5424cd\"},{\"type\":\"Edge\",\"source_node_id\":\"9612b1f2b9b74eaea67b272ce2e7ef7c\",\"target_node_id\":\"8a8d038a0f75488885032aceabd284ce\",\"id\":\"9082a69f7d6f4cc99c5db3abe0e7c29f\"},{\"type\":\"Edge\",\"source_node_id\":\"9ee3c8b3d800414c89edc50c2746da57\",\"target_node_id\":\"369375049a91494e9da6cd6e6cb3cb28\",\"branch_id\":\"48fc587c9e73478dbd55682862668182\",\"id\":\"380d37400e614773a95863c9a11548ab\",\"name\":\"48fc587c9e73478dbd55682862668182\"},{\"type\":\"Edge\",\"source_node_id\":\"385869dc18c746b88db71bdd7c349c56\",\"target_node_id\":\"9ee3c8b3d800414c89edc50c2746da57\",\"id\":\"ad83e8a8966b4569bf2a2adc0acf21c0\"},{\"type\":\"Edge\",\"source_node_id\":\"8ad01595341c4a6186e46eb203320658\",\"target_node_id\":\"ca66aaa54c614102a4a2fd4bad818b9a\",\"id\":\"e0feebc1fe63415aaa292ddf81cb735d\"},{\"type\":\"Edge\",\"source_node_id\":\"280229f5f0f74d11a6d06328dfb8fa1a\",\"target_node_id\":\"8ad01595341c4a6186e46eb203320658\",\"id\":\"e9629798f480430ca040141729435c8a\"},{\"type\":\"Edge\",\"source_node_id\":\"9ee3c8b3d800414c89edc50c2746da57\",\"target_node_id\":\"8ad01595341c4a6186e46eb203320658\",\"branch_id\":\"68d5eda18db54d50b43f5dde17c5f92d\",\"id\":\"65ebda13c269463d875828687d4d02c5\",\"name\":\"68d5eda18db54d50b43f5dde17c5f92d\"},{\"type\":\"Edge\",\"source_node_id\":\"ca66aaa54c614102a4a2fd4bad818b9a\",\"target_node_id\":\"385869dc18c746b88db71bdd7c349c56\",\"branch_id\":\"8f1e5c9fd47845a1a5572b957062e587\",\"id\":\"87d89661bc144db1930085298213794f\",\"name\":\"8f1e5c9fd47845a1a5572b957062e587\"},{\"type\":\"Edge\",\"source_node_id\":\"6460cac852834b46a4977c093a2b1a67\",\"target_node_id\":\"74fc296442cc4d7f8269e94e25cad5a4\",\"id\":\"af0cf0a9cffd4cb88e90a49da908d3aa\"},{\"type\":\"Edge\",\"source_node_id\":\"74fc296442cc4d7f8269e94e25cad5a4\",\"target_node_id\":\"da165a652daf475698c988c6427d008f\",\"id\":\"a59671cb37be433ca9aad55c9f432474\"},{\"type\":\"Edge\",\"source_node_id\":\"bbe4918b84a9426abbec7d055f7f555a\",\"target_node_id\":\"8351c5b9bf8942ff8d31f773b77a5ee3\",\"id\":\"921b07f0136140b3b3c3dd1ab561bb08\"},{\"type\":\"Edge\",\"source_node_id\":\"8351c5b9bf8942ff8d31f773b77a5ee3\",\"target_node_id\":\"8ad01595341c4a6186e46eb203320658\",\"id\":\"4c33e19c61de47b6a365058f905ba7db\"},{\"type\":\"Edge\",\"source_node_id\":\"8a8d038a0f75488885032aceabd284ce\",\"target_node_id\":\"fb3e125fa323444dba61777481a0b155\",\"id\":\"9153a69a0092480eae22853f278f7353\"},{\"type\":\"Edge\",\"source_node_id\":\"fb3e125fa323444dba61777481a0b155\",\"target_node_id\":\"64d85b2098094a4fa02f25f7a1444c50\",\"id\":\"6572b04701eb4d26a9e75910f45efd52\"},{\"type\":\"Edge\",\"source_node_id\":\"64d85b2098094a4fa02f25f7a1444c50\",\"target_node_id\":\"e8625b3c4b794d769bb0da9d0a606848\",\"id\":\"0ec6f85012064093931d18af01990021\"},{\"type\":\"Edge\",\"source_node_id\":\"e8625b3c4b794d769bb0da9d0a606848\",\"target_node_id\":\"1db930a352404d8683f9d2bf1c28ef53\",\"id\":\"dc2df1e903764b279db1b82c6e1426be\"},{\"type\":\"Edge\",\"source_node_id\":\"1db930a352404d8683f9d2bf1c28ef53\",\"target_node_id\":\"cb013d5f2f4b4d0789b486a504e6d2f2\",\"id\":\"e9aeb853be95429292a73a4fadc2b06a\"},{\"type\":\"Edge\",\"source_node_id\":\"f9950611be314fe6b0c891e8e65771d2\",\"target_node_id\":\"607a63448c1a4acca85166124f375118\",\"id\":\"166e3abc2610434380c01a42e67a6e57\"},{\"type\":\"Edge\",\"source_node_id\":\"607a63448c1a4acca85166124f375118\",\"target_node_id\":\"280229f5f0f74d11a6d06328dfb8fa1a\",\"branch_id\":\"3caee78c5ebc4684acb190021f2a55d3\",\"id\":\"240492096e0e4691a1481592d27639d2\",\"name\":\"3caee78c5ebc4684acb190021f2a55d3\"},{\"type\":\"Edge\",\"source_node_id\":\"607a63448c1a4acca85166124f375118\",\"target_node_id\":\"194fae9f28f045ac94643564ef50c9db\",\"branch_id\":\"8384d2712a51413b8951fa4a8f2b2c05\",\"id\":\"11d51d8d83d4441dbd99f5ddff1399a5\",\"name\":\"8384d2712a51413b8951fa4a8f2b2c05\"},{\"type\":\"Edge\",\"source_node_id\":\"194fae9f28f045ac94643564ef50c9db\",\"target_node_id\":\"369375049a91494e9da6cd6e6cb3cb28\",\"id\":\"fb80daf341154f44b06eed52008d631b\"},{\"type\":\"Edge\",\"source_node_id\":\"369375049a91494e9da6cd6e6cb3cb28\",\"target_node_id\":\"ae7744982ee74754962162296ce1fc4f\",\"id\":\"693a283afbab42b7af11ba6b52718793\"},{\"type\":\"Edge\",\"source_node_id\":\"ae7744982ee74754962162296ce1fc4f\",\"target_node_id\":\"26cffe08aa7147c79ffc7489da676135\",\"id\":\"54ea26d0b4f44de5961a23f0279ece8c\"},{\"type\":\"Edge\",\"source_node_id\":\"26cffe08aa7147c79ffc7489da676135\",\"target_node_id\":\"6fd902ee231941d6b6a0dfa9106d2c43\",\"id\":\"e37e5d09beed465ba100f3d9e24bd7b4\"},{\"type\":\"Edge\",\"source_node_id\":\"6fd902ee231941d6b6a0dfa9106d2c43\",\"target_node_id\":\"8d2ac71ed40a416a9751e5bd73a6e442\",\"id\":\"09ff58aec2c546cd859d144711d3ae9e\"},{\"type\":\"Edge\",\"source_node_id\":\"c24324650a514984946fed64207f0c24\",\"target_node_id\":\"c0f7a2a49b4f49688d9a1c1dd4e216f9\",\"id\":\"1d4e280c848b4646967db37b37aa6971\"},{\"type\":\"Edge\",\"source_node_id\":\"c0f7a2a49b4f49688d9a1c1dd4e216f9\",\"target_node_id\":\"7737a847cc6d4552ae8b773f750b7b1d\",\"id\":\"7e55562df8cd43a192182398816d2b3b\"},{\"type\":\"Edge\",\"source_node_id\":\"7737a847cc6d4552ae8b773f750b7b1d\",\"target_node_id\":\"8c9927f71ad04890afd342b20df99100\",\"id\":\"25b5d0d88a87487895ca57c4c0f25969\"},{\"type\":\"Edge\",\"source_node_id\":\"8c9927f71ad04890afd342b20df99100\",\"target_node_id\":\"6460cac852834b46a4977c093a2b1a67\",\"branch_id\":\"b93ef511c5d241b7a2e1e6b795516162\",\"id\":\"8f26f9a4757b45299f913e7ca3b948d1\",\"name\":\"b93ef511c5d241b7a2e1e6b795516162\"},{\"type\":\"Edge\",\"source_node_id\":\"8c9927f71ad04890afd342b20df99100\",\"target_node_id\":\"3c232bba33f34219b4a554c511faa4da\",\"branch_id\":\"dbf373c1e52f416786748cdf8f4b1099\",\"id\":\"d52c9a7bde9841f5a5fe1e96330547a2\",\"name\":\"dbf373c1e52f416786748cdf8f4b1099\"},{\"type\":\"Edge\",\"source_node_id\":\"3c232bba33f34219b4a554c511faa4da\",\"target_node_id\":\"8ad01595341c4a6186e46eb203320658\",\"id\":\"339812eec1c44e0ba4847f30f4f5e5d0\"},{\"type\":\"Edge\",\"source_node_id\":\"ca66aaa54c614102a4a2fd4bad818b9a\",\"target_node_id\":\"9f8dfc6260824d0b863c4275cbd6e2f3\",\"branch_id\":\"24aa8e916a88482295023833f9c12c98\",\"id\":\"83c8dcc16e06476b8bdb8a991918171e\",\"name\":\"24aa8e916a88482295023833f9c12c98\"},{\"type\":\"Edge\",\"source_node_id\":\"9f8dfc6260824d0b863c4275cbd6e2f3\",\"target_node_id\":\"c24324650a514984946fed64207f0c24\",\"branch_id\":\"c17695ed3d7f4fb688164cdd16b9b8c0\",\"id\":\"8e5c522a68604d14b48d408ab8d30df0\",\"name\":\"c17695ed3d7f4fb688164cdd16b9b8c0\"},{\"type\":\"Edge\",\"source_node_id\":\"9f8dfc6260824d0b863c4275cbd6e2f3\",\"target_node_id\":\"6460cac852834b46a4977c093a2b1a67\",\"branch_id\":\"059dd280a80a452dad159acd2124f431\",\"id\":\"53df8ead704541ba8b2b12abd376513d\",\"name\":\"059dd280a80a452dad159acd2124f431\"},{\"type\":\"Edge\",\"source_node_id\":\"cb013d5f2f4b4d0789b486a504e6d2f2\",\"target_node_id\":\"678d5a89f6a84a24a1598164a63e5ddf\",\"id\":\"48398e9c1b8b4d84b5b39ebed20805fd\"},{\"type\":\"Edge\",\"source_node_id\":\"678d5a89f6a84a24a1598164a63e5ddf\",\"target_node_id\":\"b6173737c4e740c584b5efe1424aec8b\",\"id\":\"fdf75490c928400cac34352755952a73\"},{\"type\":\"Edge\",\"source_node_id\":\"b6173737c4e740c584b5efe1424aec8b\",\"target_node_id\":\"647ea2e210604a668d897db69405bf60\",\"id\":\"0883550757a14c41a4e9fea474f80542\"},{\"type\":\"Edge\",\"source_node_id\":\"647ea2e210604a668d897db69405bf60\",\"target_node_id\":\"f9950611be314fe6b0c891e8e65771d2\",\"id\":\"cc62f9c03a554aa6a57f71f4649d6256\"},{\"type\":\"Edge\",\"source_node_id\":\"4761ab4e62324e3cb07ce4efc77ffd1f\",\"target_node_id\":\"ca955a1d346d48b09e9ce792dde52cc3\",\"id\":\"fe8bc0685a84441e85e38f22c6d8f929\"},{\"type\":\"Edge\",\"source_node_id\":\"ca955a1d346d48b09e9ce792dde52cc3\",\"target_node_id\":\"bbe4918b84a9426abbec7d055f7f555a\",\"branch_id\":\"107778af78344637be73190984b81d44\",\"id\":\"9f77c4762dd94e248ecc9bda5e2cf8d0\",\"name\":\"107778af78344637be73190984b81d44\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"surveyInstanceId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"42731da272e043d29de8a18ae4abe8ec\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"surveyQuestions\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"a019f4d9d2034f1e8ce4413ad6814d4c\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"questionIndex\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"-1\"},\"list\":false,\"id\":\"4606ff81e3b1466dba105ac8db0a3ff1\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"questionCount\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"0\"},\"list\":false,\"id\":\"701eeb0ead3946b4a95fc310996f51d5\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"surveyAnswers\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{}\"},\"list\":false,\"id\":\"e0b97ea5de424260a17d367b713e6233\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"choiceTypes\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"choice,scale,numericscale\"},\"list\":false,\"id\":\"5fa5bab12ab3407fa0243a6e4b1e5b55\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"currentQuestionId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"953851ffa4294d04859d006bf28a4986\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"currentQuestionType\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"1d2077df93314785b211efe410798278\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"currentQuestionMetric\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"00d261d656824f6f8f150a2025f4eaae\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"currentQuestionDisplay\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"601f508ef27a49a18330230ddcc12772\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"introduction\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"b56216c2f682436d9e56d9ef36471bcb\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"endNote\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"0c33e298eff44fc88364434b538e805f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"textTypes\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"string,long,percentage\"},\"list\":false,\"id\":\"6545133e2b144832a1ecea359dcc39b9\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"currentQuestionMax\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"dd7230f4e76642c4b1676e04fa2af480\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"currentQuestionMin\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"3f8a633cceb94a7a8c29a2622f003795\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"currentAnswerValidation\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"cf9a19900c7043bd817ff9f5794941ed\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"currentAnswerErrorMsg\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"list\":false,\"id\":\"607bdaced73d4d7fab9239c0d64a4210\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"surveyVerificationMsg\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"e5e2dc8c74a64bf7ba531a2b734bd9cd\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"currentQuestionMandatory\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"true\"},\"list\":false,\"id\":\"f4cfc3cbbdca4d46b23a1de57709a8e0\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_topic_postchat_user_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"1ebd3fa354824ebcb2abd32c7f5a08ee\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"surveyName\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"fbdedb6037d443fc94ac909130d72657\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"LiveAgent_pre_chat_survey_name\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"62b3a6b4779d449faee2e5abee5678a5\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"LiveAgent_post_chat_survey_name\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"b712f462443f422882112475625c1f51\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"LiveAgent_pre_assessment_instance\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"c561d907f23a4ee485d105e3deefe041\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"LiveAgent_post_assessment_instance\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"5f4fab2392e34755a790d59670b35294\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"defaultSurveyName\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"b0a2dbc7899742b19e9f2d904b7bfc3e\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"currentQuestionFieldValidator\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"9c7e90dca34b47489835d0bcdc8e4933\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"currentQuestionReferenceTable\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"a7b460d515ca4a2087c92d2c8bf5fbc9\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"currentQuestionReferenceCondition\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"6ec01bc01b7144ec90530b7f9af69bb2\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"active\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"3f44cb42666b408fbb6f952fe939d920\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"glide_variables\":[{\"type\":\"Image\",\"id\":\"bba30ac7475c47cc93da35130951478b\",\"name\":\"show_attachment_question\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"surveyid\",\"list\":false,\"id\":\"1132a62678c24bbda688337615fd51bb\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"confirmationneeded\",\"list\":false,\"id\":\"75bc445130284002947077d668cac779\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"savequestionstocontext\",\"list\":false,\"id\":\"ba2a161b94a3468a86603955cca630a1\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"String\",\"name\":\"ai_data_collector_8a8d038a0f75488885032aceabd284ce_output\",\"list\":false,\"id\":\"2f2b481c82a94d1996f70567027cbb41\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"True/False\",\"id\":\"b5790fea6a77427aaf10a8cb5ee3cef0\",\"name\":\"show_boolean_question\",\"description\":\"This type of question allows users to choose between two distinct options, typically representing \\\"Yes\\\" or \\\"No,\\\" \\\"True\\\" or \\\"False,\\\" or similar binary choices. It is designed to capture clear, decisive answers, making it an effective tool for gathering straightforward information or opinions. Commonly used in surveys, assessments, and decision-making processes, this format simplifies the response process and facilitates easy data analysis.\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":true,\"list\":false},{\"type\":\"String\",\"name\":\"ai_data_collector_369375049a91494e9da6cd6e6cb3cb28_output\",\"list\":false,\"id\":\"5229b91bab174a52829686976666ed1b\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"show_text_input_question\",\"description\":\"This type of question allows users to input a free-form text response. It's ideal for gathering detailed, personalized information and enables respondents to express their thoughts, opinions, or answers in their own words. This format is often used in surveys, feedback forms, and assessments where open-ended responses are valuable.\",\"list\":false,\"id\":\"0775ff6cf5b94c4692d1a7be6b9fe010\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":true},{\"type\":\"String\",\"name\":\"ai_data_collector_8d2ac71ed40a416a9751e5bd73a6e442_output\",\"list\":false,\"id\":\"9421933d83ba4506b292d81bb60b2999\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"dea29579e2c44cdab652446be7273444\",\"name\":\"show_choice_question\",\"description\":\"This type of question presents users with a set of predefined options from which they can select their answer. It is designed to streamline the response process by offering multiple choices, making it easier for respondents to provide quick and clear answers. This format is commonly used in surveys, polls, quizzes, and assessments to gather specific information, preferences, or opinions. By limiting the response options, it also simplifies data analysis and interpretation.\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":true,\"list\":false,\"table\":\"\"},{\"type\":\"String\",\"name\":\"ai_data_collector_e8625b3c4b794d769bb0da9d0a606848_output\",\"list\":false,\"id\":\"e5d8423283fc4d2595fd661bd5a2eb69\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"Date/Time\",\"mode\":\"date\",\"id\":\"fbe9af88d71a49f3845d37b4a93bbe15\",\"name\":\"show_date_question\",\"description\":\"This type of question allows users to input a specific date. It is designed to collect precise temporal information, such as birthdates, event dates, or deadlines. Often featuring a calendar interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, and applications requiring date-specific data, it ensures standardized date entries and simplifies subsequent data processing.\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":true,\"list\":false},{\"type\":\"String\",\"name\":\"ai_data_collector_cb013d5f2f4b4d0789b486a504e6d2f2_output\",\"list\":false,\"id\":\"a7dc2985e75f4c5cbd8b508e8ab6620c\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"Date/Time\",\"mode\":\"date_time\",\"id\":\"c1d6aa7022164ba6a2b0291228d96249\",\"name\":\"show_datetime_question\",\"description\":\"This type of question allows users to input both a specific date and time. It is designed to gather precise temporal information, capturing the exact moment of an event or action. Often featuring a combined calendar and time picker interface for easy selection, this format enhances accuracy and user experience. Commonly used in forms, surveys, scheduling applications, and event planning, it ensures standardized datetime entries and simplifies data processing and analysis.\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":true,\"list\":false},{\"type\":\"String\",\"name\":\"ai_data_collector_26cffe08aa7147c79ffc7489da676135_output\",\"list\":false,\"id\":\"78de1c7f496f430985b8d3ac5f93acac\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"CarouselImage\",\"id\":\"b600afffba2d46a1a225c17e62ee4734\",\"name\":\"show_image_scale_question\",\"description\":\"This type of question allows users to rate or evaluate something using a visual scale represented by images. Each image corresponds to a different level of satisfaction, agreement, or intensity. It's an effective way to collect nuanced feedback by leveraging visual cues, making it easier for respondents to express their preferences or opinions. Commonly used in surveys, reviews, and user experience studies, this format enhances engagement and clarity in responses.\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":true,\"list\":false},{\"type\":\"String\",\"name\":\"ai_data_collector_c0f7a2a49b4f49688d9a1c1dd4e216f9_output\",\"list\":false,\"id\":\"3148914579f645b88e5e0bbc22ab9cf4\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"True/False\",\"id\":\"a813e0458a174bb0b415483fe89c00e4\",\"name\":\"verify_response\",\"description\":\"This action is used to confirm the accuracy and validity of a user's input. It involves checking the response against predefined criteria or rules to ensure it meets the required standards. Often implemented in forms, surveys, and data entry processes, this step helps maintain data quality by identifying and prompting correction of errors, inconsistencies, or incomplete entries. Verifying responses ensures that the collected information is reliable and fit for analysis or further processing.\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":true,\"list\":false},{\"type\":\"String\",\"name\":\"ai_data_collector_b6173737c4e740c584b5efe1424aec8b_output\",\"list\":false,\"id\":\"498f5de051d6461d87508d10b8a73ecf\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"1b42a3cd06f14eda968880b670491ebb\",\"name\":\"show_reference_question\",\"description\":\"This type of question allows users to provide a reference, such as a document, URL, or citation, that supports their response or provides additional context. It is designed to collect verifiable information, often used for academic, professional, or formal purposes. This format is ideal for surveys, applications, research forms, and any scenario where substantiating information with credible sources is necessary. By enabling users to include references, it enhances the reliability and depth of the collected data.\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":true,\"list\":false,\"table\":\"\"}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"surveyid\",\"label\":\"surveyId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"1132a62678c24bbda688337615fd51bb\",\"type\":\"String\",\"hint\":\"\"},{\"name\":\"confirmationneeded\",\"label\":\"confirmationNeeded\",\"default-value\":\"\\\"false\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"75bc445130284002947077d668cac779\",\"type\":\"String\",\"hint\":\"\"},{\"name\":\"savequestionstocontext\",\"label\":\"saveQuestionsToContext\",\"default-value\":\"\\\"false\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"ba2a161b94a3468a86603955cca630a1\",\"type\":\"String\",\"hint\":\"\"}],\"return-values-mapping\":[]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"dba94e44ff2202101b82157c03cb145a\",\"name\":\"Survey-LLM\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"description\":\"Enables users to provide feedback on their conversational experience, before the conversation ends.\",\"model_type\":\"llm\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"title\":\"Survey\",\"library\":true,\"csTopicId\":\"77a94e44ff2202101b82157c03cb147e\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Survey-LLM","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"dba94e44ff2202101b82157c03cb145a","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/77a94e44ff2202101b82157c03cb147e","value":"77a94e44ff2202101b82157c03cb147e"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"3","sys_updated_on":"2022-05-26 09:26:00","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"6431e35f37a54b9890326cb59ca312c5\": {\n          \"id\": \"6431e35f37a54b9890326cb59ca312c5\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"7b061ff91b0c42d59972887515332a8e\": {\n          \"id\": \"7b061ff91b0c42d59972887515332a8e\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"77b764b3382247fba4efb6c683e93a71\": {\n          \"id\": \"77b764b3382247fba4efb6c683e93a71\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"agent_id\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Please input agent sys id \"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"93ab62111e5a44168db40cb7ed1937e1\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"b7bdab292a074764a60c88836b7aaba1\": {\n          \"id\": \"b7bdab292a074764a60c88836b7aaba1\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Calculate Capacity\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n\\n    var agent_sys_id = vaInputs.agent_id;\\n    var final_capacity = new global.AWADiagnosticUtils().getAgentCurrentCapacity(agent_sys_id);\\n\\n    var singleOutMsg = new sn_cs.SinglePartOutMsg();\\n    var text = \\\"Current Capacity of Agent with SysId  \\\" + agent_sys_id + \\\" is \\\" + final_capacity;\\n    singleOutMsg.setTextPart(text);\\n    return singleOutMsg;\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"285133bedcdf462ca982fe6fdb3e08d4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6431e35f37a54b9890326cb59ca312c5\",\n          \"target\": \"77b764b3382247fba4efb6c683e93a71\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"428f7f59477645fbbe181a5fcbb8fdc4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"77b764b3382247fba4efb6c683e93a71\",\n          \"target\": \"b7bdab292a074764a60c88836b7aaba1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a098af53d1a94c348ab1a2f4b1089b16\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b7bdab292a074764a60c88836b7aaba1\",\n          \"target\": \"7b061ff91b0c42d59972887515332a8e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"93ab62111e5a44168db40cb7ed1937e1\": {\n      \"id\": \"93ab62111e5a44168db40cb7ed1937e1\",\n      \"name\": \"agent_id\",\n      \"label\": \"Agent_id\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY1MzM4NDI2OTU1NiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      }\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"bfb7aedb53230110d3d5ddeeff7b122a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_cb_design_topic_bfb7aedb53230110d3d5ddeeff7b122a","sys_updated_by":"admin","sys_created_on":"2022-05-24 09:55:58","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"fcad5081b0cb4eeea444d1a3feb8b8c2\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"fcad5081b0cb4eeea444d1a3feb8b8c2\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"fcad5081b0cb4eeea444d1a3feb8b8c2\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"6431e35f37a54b9890326cb59ca312c5\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"7b061ff91b0c42d59972887515332a8e\",\"name\":\"End\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"93ab62111e5a44168db40cb7ed1937e1\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Please input agent sys id\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"77b764b3382247fba4efb6c683e93a71\",\"name\":\"agent_id\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"ScriptOutputPrompt\",\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"b7bdab292a074764a60c88836b7aaba1\",\"name\":\"Calculate Capacity\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n\\n    var agent_sys_id = vaInputs.agent_id;\\n    var final_capacity = new global.AWADiagnosticUtils().getAgentCurrentCapacity(agent_sys_id);\\n\\n    var singleOutMsg = new sn_cs.SinglePartOutMsg();\\n    var text = \\\"Current Capacity of Agent with SysId  \\\" + agent_sys_id + \\\" is \\\" + final_capacity;\\n    singleOutMsg.setTextPart(text);\\n    return singleOutMsg;\\n})()\"},\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"6431e35f37a54b9890326cb59ca312c5\",\"target_node_id\":\"77b764b3382247fba4efb6c683e93a71\",\"id\":\"285133bedcdf462ca982fe6fdb3e08d4\"},{\"type\":\"Edge\",\"source_node_id\":\"77b764b3382247fba4efb6c683e93a71\",\"target_node_id\":\"b7bdab292a074764a60c88836b7aaba1\",\"id\":\"428f7f59477645fbbe181a5fcbb8fdc4\"},{\"type\":\"Edge\",\"source_node_id\":\"b7bdab292a074764a60c88836b7aaba1\",\"target_node_id\":\"7b061ff91b0c42d59972887515332a8e\",\"id\":\"a098af53d1a94c348ab1a2f4b1089b16\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"agent_id\",\"list\":false,\"id\":\"93ab62111e5a44168db40cb7ed1937e1\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run\\n       and be discoverable (or not). Using the format vaContext.liveagent_[var_name] For example:\\n\\n       var applicability = vaContext.liveagent_portal == 'csm' ? true : false;\\n       return applicability;\\n    */\\n    return false;\\n})()\\n\"},\"roles\":[],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"89806a5b53230110d3d5ddeeff7b1220\",\"name\":\"AWA Current Agent Capacity\",\"key_phrases\":[\"AWA Current Agent Capacity\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":false,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"AWA Current Agent Capacity","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"design_topic_id":"89806a5b53230110d3d5ddeeff7b1220","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/33b7eadb53230110d3d5ddeeff7b120b","value":"33b7eadb53230110d3d5ddeeff7b120b"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"141","sys_updated_on":"2024-10-08 16:59:02","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.71\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"80a4569188244427b20b2d34b9a647c2\": {\n          \"id\": \"80a4569188244427b20b2d34b9a647c2\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"791e9717d6fb4d0eaf6050fd714d76d4\": {\n          \"id\": \"791e9717d6fb4d0eaf6050fd714d76d4\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"fc306a42377d4f6894218122b96e0921\": {\n          \"id\": \"fc306a42377d4f6894218122b96e0921\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Live Agent Configured?\"\n        },\n        \"34fc9c495f8d4ab0b74243465d67ee01\": {\n          \"id\": \"34fc9c495f8d4ab0b74243465d67ee01\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Live Agent Available?\"\n        },\n        \"679a8c4a39014c188cfad0733b2c44b5\": {\n          \"id\": \"679a8c4a39014c188cfad0733b2c44b5\",\n          \"name\": \"Transfer To Live Agent\",\n          \"script\": \"(function execute() {\\n    vaSystem.connectToAgentUnsafe();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9c1e1a29c55446258284465956c3ea99\": {\n          \"id\": \"9c1e1a29c55446258284465956c3ea99\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Live Agent Not Available Message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    // Skip this message if callback topic executed, since this must have already presented.\\n    if (vaVars.global_show_no_agent_available_msg)\\n        return gs.getMessageLang(vaVars._liveagent_handoff_error_msg, vaContext.getRequesterLang());\\n\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"b940710986ce49849bd03f94859c11f0\": {\n          \"id\": \"b940710986ce49849bd03f94859c11f0\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Live Agent Not Configured Message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return gs.getMessageLang(vaVars._liveagent_disabled_msg, vaContext.getRequesterLang());\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false,\n          \"requestFeedback\": true\n        },\n        \"f481029fd130402ebb2c70b36e79b1ab\": {\n          \"id\": \"f481029fd130402ebb2c70b36e79b1ab\",\n          \"name\": \"Set Connect Support Queue\",\n          \"script\": \"(function execute() {\\n    vaSystem.setQueue();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"33587ca71d5343b4bf3b15cf2285f626\": {\n          \"id\": \"33587ca71d5343b4bf3b15cf2285f626\",\n          \"name\": \"End Conversation If Contextual Action\",\n          \"script\": \"(function execute() {\\n    vaVars.global_start_chat_contextual_action_no_agents = true;\\n    vaSystem.endConversation();\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    // only execute this node if a contextual action starting a chat was attempted.\\n    return vaVars.global_start_chat_contextual_action;\\n})()\\n\"\n          }\n        },\n        \"e20a0502bfb64a69843de106535f92fd\": {\n          \"id\": \"e20a0502bfb64a69843de106535f92fd\",\n          \"name\": \"Callback Configured\",\n          \"script\": \"(function execute() {\\n    vaVars.global_show_no_agent_available_msg = true;\\n    var isEnabled = gs.getProperty('com.glide.cs.callback.enabled', 'false');\\n    if (isEnabled == 'true')\\n        vaVars._callback_enabled = true;\\n    else\\n        vaVars._callback_enabled = false;\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"bfc18bafba454763b305e044e434e97d\": {\n          \"id\": \"bfc18bafba454763b305e044e434e97d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Callback Enabled ?\"\n        },\n        \"1a256cd5a8b34df7b648aa03d060d9a3\": {\n          \"id\": \"1a256cd5a8b34df7b648aa03d060d9a3\",\n          \"name\": \"Invoke Custom Callback Topic\",\n          \"script\": \"(function execute() {\\n    var CALLBACK_DECISION_SYS_ID = \\\"05c6cc55eb9a0110ad88ca5d2352281e\\\";\\n    var callbackTopicId;\\n    var deviceType = vaContext.deviceType;\\n\\n    // Default callback flow is diabled \\n    vaVars.global_callback_executed = false;\\n\\n    // The callback Topic Id is being fetched form Custom Adapter Properties using Decision rules. \\n    // The callback_topic_id has to be publish topic id from sys_cs_topic.\\n    var inputs = new Object();\\n    inputs[\\\"channel_id\\\"] = vaSystem.getChannelIdByName(deviceType);\\n    inputs[\\\"portal\\\"] = vaContext.portal;\\n    inputs[\\\"provider_application_id\\\"] = vaContext.providerAppId;\\n\\n    var decisionTable = new sn_dt.DecisionTableAPI();\\n    try {\\n        var answer = decisionTable.getDecision(CALLBACK_DECISION_SYS_ID, inputs);\\n        if (answer)\\n            callbackTopicId = answer.getValue(\\\"value\\\");\\n\\n    } catch (e) {\\n        gs.error(\\\"Error while running the decison rules for callback topic, \\\" + callbackTopicId);\\n    }\\n    // Switch the custom/default callback topic\\n    if (callbackTopicId) {\\n        vaSystem.switchTopicById(callbackTopicId);\\n    }\\n\\n    // Expcted output from the callback topic would be vaVars._transfer_to_agent flag.\\n})();\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"2d51f4985f53434eab15cf0da4420e84\": {\n          \"id\": \"2d51f4985f53434eab15cf0da4420e84\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Callback Executed ?\"\n        },\n        \"36c6958adacd4825a81bae9604927498\": {\n          \"id\": \"36c6958adacd4825a81bae9604927498\",\n          \"name\": \"End Conversation\",\n          \"script\": \"(function execute() {\\n    vaSystem.endConversation();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"61c27b1520904ed29f03313094ef2f61\": {\n          \"id\": \"61c27b1520904ed29f03313094ef2f61\",\n          \"name\": \"Check Live Agent Configured\",\n          \"script\": \"(function execute() {\\n    vaVars._liveagent_configured = vaSystem.isLiveAgentConfigured();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"fd2da68324e84b6db0b2c9b84504d1b0\": {\n          \"id\": \"fd2da68324e84b6db0b2c9b84504d1b0\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Agent Available\"\n        },\n        \"4e80168aab92495a8be016a0d39388fa\": {\n          \"id\": \"4e80168aab92495a8be016a0d39388fa\",\n          \"name\": \"Ext agent configuration\",\n          \"script\": \"(function execute() {\\n    vaVars._external_agent_config = vaSystem.getMatchingLAConfig();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ee89ffc5ce2c44fcb4db798c593734fc\": {\n          \"id\": \"ee89ffc5ce2c44fcb4db798c593734fc\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Has valid ext agent config\"\n        },\n        \"c4522da1fc23449e9d38a637bb4a2468\": {\n          \"name\": \"Ask user for to pick config\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Choose an Agent config\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 1)\\n       return true;\\n    return false;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"5e8ed811d104475e9ac698ec32e40fea\",\n          \"id\": \"c4522da1fc23449e9d38a637bb4a2468\",\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    var options = [];\\n    for(var i=0; i<config.length; i++){\\n      options.push({ 'value': config[i].sysID, 'label': gs.getMessageLang(config[i].name, vaContext.getRequesterLang()), 'render_style': 'data' });\\n    }\\n     return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No Agent config\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    var options = [];\\n    for(var i=0; i<config.length; i++){\\n      options.push({ 'value': config[i].sysID, 'label': gs.getMessageLang(config[i].name, vaContext.getRequesterLang()), 'render_style': 'data' });\\n    }\\n     return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"detailDescription\": \"\"\n        },\n        \"90eec3d6fc8641188365ba1e200c5a4e\": {\n          \"id\": \"90eec3d6fc8641188365ba1e200c5a4e\",\n          \"name\": \"Call API to connect to agent\",\n          \"script\": \"(function execute(){\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 1)\\n       vaSystem.connectToExternalAgent(vaInputs.ask_user_for_to_pick_config.getValue());\\n    else\\n       vaSystem.connectToExternalAgent(config[0].sysID);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"6982005ef8e24e6c8b7863df358aa28e\": {\n          \"id\": \"6982005ef8e24e6c8b7863df358aa28e\",\n          \"name\": \"Ext Agent config\",\n          \"script\": \"(function execute() {\\n    vaVars._external_agent_config = vaSystem.getMatchingLAConfig();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"8a26a53c4cc04930bfa0c6969181f195\": {\n          \"id\": \"8a26a53c4cc04930bfa0c6969181f195\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Valid LA config\"\n        },\n        \"1bce72547d4741a99e1f1d2ad89c3800\": {\n          \"name\": \"Ask user to choose LA\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Choose an Agent config\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 1)\\n       return true;\\n    return false;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"7709ed43bbbc4b5ca8742cbcba81937f\",\n          \"id\": \"1bce72547d4741a99e1f1d2ad89c3800\",\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    var options = [];\\n    for(var i=0; i<config.length; i++){\\n      options.push({ 'value': config[i].sysID, 'label': gs.getMessageLang(config[i].name, vaContext.getRequesterLang()), 'render_style': 'data' });\\n    }\\n     return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No Agent config\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    var options = [];\\n    for(var i=0; i<config.length; i++){\\n      options.push({ 'value': config[i].sysID, 'label': gs.getMessageLang(config[i].name, vaContext.getRequesterLang()), 'render_style': 'data' });\\n    }\\n     return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"detailDescription\": \"\"\n        },\n        \"c072a2c94c5647bb8d5c83c96736e769\": {\n          \"id\": \"c072a2c94c5647bb8d5c83c96736e769\",\n          \"name\": \"Connect to ext Agent\",\n          \"script\": \"(function execute(){\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 1)\\n       vaSystem.connectToExternalAgent(vaInputs.ask_user_to_choose_la.getValue());\\n    else\\n       vaSystem.connectToExternalAgent(config[0].sysID);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a681368190c349a4ae6d35271c17af29\": {\n          \"id\": \"a681368190c349a4ae6d35271c17af29\",\n          \"name\": \"Check Live Agent Available\",\n          \"script\": \"(function execute() {\\n    vaVars._liveagent_available = vaSystem.isLiveAgentAvailable();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"80884a989214431993a2681042d5413a\": {\n          \"id\": \"80884a989214431993a2681042d5413a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"117cae83067644d58f9afffcdfd87b86\": {\n          \"id\": \"117cae83067644d58f9afffcdfd87b86\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"244bc8e2706a49078aa9e1837600f2b1\": {\n          \"id\": \"244bc8e2706a49078aa9e1837600f2b1\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Other Live Agent in progress\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"It looks like you're already talking to live agent in another chat. You'll need to end that chat to start a new one.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"6238025805d8477dbabd1afff5232d24\"\n            }\n          ],\n          \"requestFeedback\": true,\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f1272095bee94c158a1a184f31ea6897\": {\n          \"id\": \"f1272095bee94c158a1a184f31ea6897\",\n          \"name\": \"Close NASS Conversation\",\n          \"script\": \"(function execute() {\\n    var isNASSFlow = vaSystem.isNASSConversation();\\n    if (isNASSFlow) {\\n        vaSystem.endConversation();\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"a306597e467b47819ae2329171e6deea\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"bfc18bafba454763b305e044e434e97d\",\n          \"target\": \"34fc9c495f8d4ab0b74243465d67ee01\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._callback_enabled == false;\\n})()\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"6ae0d0d65d6848d9a60a12bbd3b245ad\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"61c27b1520904ed29f03313094ef2f61\",\n          \"target\": \"fc306a42377d4f6894218122b96e0921\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d1e9f62d5c294e118f8016d8c002476f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9c1e1a29c55446258284465956c3ea99\",\n          \"target\": \"33587ca71d5343b4bf3b15cf2285f626\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"09bcb5073ebd4f2381eddeea91f46c59\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b940710986ce49849bd03f94859c11f0\",\n          \"target\": \"791e9717d6fb4d0eaf6050fd714d76d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"43df976b334c48f29fbcf229331f709e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"34fc9c495f8d4ab0b74243465d67ee01\",\n          \"target\": \"9c1e1a29c55446258284465956c3ea99\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return !vaVars._liveagent_available;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"bf1d6f4c7ae84a97bd512a093d21d6d4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fc306a42377d4f6894218122b96e0921\",\n          \"target\": \"f481029fd130402ebb2c70b36e79b1ab\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._liveagent_configured;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"9a3087ebcf3c4e4bbca0f14677e50664\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"33587ca71d5343b4bf3b15cf2285f626\",\n          \"target\": \"791e9717d6fb4d0eaf6050fd714d76d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6b5fba34f83b464d9f46e773ec3162d4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e20a0502bfb64a69843de106535f92fd\",\n          \"target\": \"bfc18bafba454763b305e044e434e97d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dd0ec2a3c359466c8c6c651c416b1d29\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"bfc18bafba454763b305e044e434e97d\",\n          \"target\": \"1a256cd5a8b34df7b648aa03d060d9a3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._callback_enabled == true;\\n})()\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"49d3a8606ae042e7869efe6820f19fdb\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1a256cd5a8b34df7b648aa03d060d9a3\",\n          \"target\": \"2d51f4985f53434eab15cf0da4420e84\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1eeeec92dc014396a8216cda1db9653b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2d51f4985f53434eab15cf0da4420e84\",\n          \"target\": \"34fc9c495f8d4ab0b74243465d67ee01\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_callback_executed == false;\\n})()\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"4268392f07274ba9956cc760b237c513\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2d51f4985f53434eab15cf0da4420e84\",\n          \"target\": \"36c6958adacd4825a81bae9604927498\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_callback_executed == true;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"5d377ed7a57f4e1999b8237e4106c1c1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"36c6958adacd4825a81bae9604927498\",\n          \"target\": \"791e9717d6fb4d0eaf6050fd714d76d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9da607f1038a47b3a2ee0b2914aec1d1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"80a4569188244427b20b2d34b9a647c2\",\n          \"target\": \"61c27b1520904ed29f03313094ef2f61\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"075586609c474c65bf5fd5163004507d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fd2da68324e84b6db0b2c9b84504d1b0\",\n          \"target\": \"e20a0502bfb64a69843de106535f92fd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars._liveagent_available;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"916cbe6835ae4f8bbb6f10348b3e089c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fd2da68324e84b6db0b2c9b84504d1b0\",\n          \"target\": \"4e80168aab92495a8be016a0d39388fa\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars._liveagent_available;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"c85856bc1b8740d6aa0793f56b0b5e04\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4e80168aab92495a8be016a0d39388fa\",\n          \"target\": \"ee89ffc5ce2c44fcb4db798c593734fc\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cc05be970e7548c28cd9e695dcbfe366\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ee89ffc5ce2c44fcb4db798c593734fc\",\n          \"target\": \"e20a0502bfb64a69843de106535f92fd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (gs.nil(vaVars._external_agent_config))\\n        return true;\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 0)\\n       return false;\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"181253be9ba14855a6c332ec22dbcc4a\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ee89ffc5ce2c44fcb4db798c593734fc\",\n          \"target\": \"c4522da1fc23449e9d38a637bb4a2468\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 0)\\n       return true;\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"0d03bd3fd0144c32bc65e376d92c84ab\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c4522da1fc23449e9d38a637bb4a2468\",\n          \"target\": \"90eec3d6fc8641188365ba1e200c5a4e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"5ad4e728edc74b3eb39388f7acdb2c67\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"90eec3d6fc8641188365ba1e200c5a4e\",\n          \"target\": \"791e9717d6fb4d0eaf6050fd714d76d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f1b1e7cf29ca4ef98e3fc56b296411b9\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"fc306a42377d4f6894218122b96e0921\",\n          \"target\": \"6982005ef8e24e6c8b7863df358aa28e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars._liveagent_configured;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"b503b4b09d69444cb34a87d3adcb3b1f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6982005ef8e24e6c8b7863df358aa28e\",\n          \"target\": \"8a26a53c4cc04930bfa0c6969181f195\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e21e34841a4941c8acc1e556f1e88834\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8a26a53c4cc04930bfa0c6969181f195\",\n          \"target\": \"b940710986ce49849bd03f94859c11f0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (gs.nil(vaVars._external_agent_config))\\n        return true;\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 0)\\n       return false;\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"adec8e603941489c8bcb59e52b5e3985\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"8a26a53c4cc04930bfa0c6969181f195\",\n          \"target\": \"1bce72547d4741a99e1f1d2ad89c3800\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 0)\\n       return true;\\n    return false;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"836fdd392ab4419d8823cc795836192c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1bce72547d4741a99e1f1d2ad89c3800\",\n          \"target\": \"c072a2c94c5647bb8d5c83c96736e769\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ce3d2993544a44959d760c15bfbed2e1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c072a2c94c5647bb8d5c83c96736e769\",\n          \"target\": \"791e9717d6fb4d0eaf6050fd714d76d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"85bd9cef7c2e4a9a9e1bc5402203002c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f481029fd130402ebb2c70b36e79b1ab\",\n          \"target\": \"a681368190c349a4ae6d35271c17af29\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f9ff0bd1c554419abab3bcd5f33d729f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a681368190c349a4ae6d35271c17af29\",\n          \"target\": \"fd2da68324e84b6db0b2c9b84504d1b0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2fe517c428914f298c225059dfd8ccde\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"34fc9c495f8d4ab0b74243465d67ee01\",\n          \"target\": \"80884a989214431993a2681042d5413a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars._liveagent_available;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"d76f709fa19a4258b1e5e524c0f3a370\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"80884a989214431993a2681042d5413a\",\n          \"target\": \"679a8c4a39014c188cfad0733b2c44b5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return !vaSystem.isNASSConversation();\\n})()\\n\"\n          },\n          \"label\": \"Not self service\"\n        },\n        {\n          \"id\": \"3aeb7ab5e8ea4734976075bfa14029d5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"80884a989214431993a2681042d5413a\",\n          \"target\": \"117cae83067644d58f9afffcdfd87b86\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaSystem.isNASSConversation();\\n})()\\n\"\n          },\n          \"label\": \"is self service\"\n        },\n        {\n          \"id\": \"f71475577fe34b61b7f48e8c29bd8f67\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"117cae83067644d58f9afffcdfd87b86\",\n          \"target\": \"679a8c4a39014c188cfad0733b2c44b5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return !vaSystem.hasOtherLiveAgentChatInProgress();\\n})()\\n\"\n          },\n          \"label\": \"No LA Chat in Progress\"\n        },\n        {\n          \"id\": \"9b3eef76364b4e62ba0fbdc654385aaf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"117cae83067644d58f9afffcdfd87b86\",\n          \"target\": \"244bc8e2706a49078aa9e1837600f2b1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaSystem.hasOtherLiveAgentChatInProgress();\\n})()\\n\"\n          },\n          \"label\": \"Other LA chat in Progress\"\n        },\n        {\n          \"id\": \"148335cee81f462188d2851aef8fea7f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"244bc8e2706a49078aa9e1837600f2b1\",\n          \"target\": \"791e9717d6fb4d0eaf6050fd714d76d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"eac2c24bde174a7191ea4dff6f4db0ae\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"679a8c4a39014c188cfad0733b2c44b5\",\n          \"target\": \"f1272095bee94c158a1a184f31ea6897\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3933d91dce0c4d148ff74548517df655\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f1272095bee94c158a1a184f31ea6897\",\n          \"target\": \"791e9717d6fb4d0eaf6050fd714d76d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"51cd14e9647848349000e151b3a23186\": {\n      \"id\": \"51cd14e9647848349000e151b3a23186\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_liveagent_disabled_msg\",\n      \"label\": \"_liveagent_disabled_msg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"cf59f5de11bb42e8898d499cf33c9d62\": {\n      \"id\": \"cf59f5de11bb42e8898d499cf33c9d62\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_liveagent_handoff_error_msg\",\n      \"label\": \"_liveagent_handoff_error_msg\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"2644d2dab92b4bd596de666e2aae6626\": {\n      \"id\": \"2644d2dab92b4bd596de666e2aae6626\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_liveagent_configured\",\n      \"label\": \"_liveagent_configured\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a4ee6f84465f4baf9cc0dfa989a12cf7\": {\n      \"id\": \"a4ee6f84465f4baf9cc0dfa989a12cf7\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_liveagent_available\",\n      \"label\": \"_liveagent_available\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"88a0fe2014ba4f1cb4e088b5b1008cf3\": {\n      \"id\": \"88a0fe2014ba4f1cb4e088b5b1008cf3\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"_liveagent_external\",\n      \"label\": \"_liveagent_external\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5e8ed811d104475e9ac698ec32e40fea\": {\n      \"id\": \"5e8ed811d104475e9ac698ec32e40fea\",\n      \"name\": \"ask_user_for_to_pick_config\",\n      \"label\": \"Ask User For To Pick Config\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"c4522da1fc23449e9d38a637bb4a2468\",\n      \"isHidden\": false,\n      \"autoSelect\": false\n    },\n    \"85e820f7b9204b04b55df33041f02eb1\": {\n      \"id\": \"85e820f7b9204b04b55df33041f02eb1\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"_external_agent_config\",\n      \"label\": \"_external_agent_config\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"7709ed43bbbc4b5ca8742cbcba81937f\": {\n      \"id\": \"7709ed43bbbc4b5ca8742cbcba81937f\",\n      \"name\": \"ask_user_to_choose_la\",\n      \"label\": \"Ask User To Choose LA\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"1bce72547d4741a99e1f1d2ad89c3800\",\n      \"isHidden\": false,\n      \"autoSelect\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"c428f935535130101fdbddeeff7b1200","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_c428f935535130101fdbddeeff7b1200","sys_updated_by":"admin","sys_created_on":"2021-07-12 22:04:36","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"b964c426913f473eb7c9cacce5bf559d\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"b964c426913f473eb7c9cacce5bf559d\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"b964c426913f473eb7c9cacce5bf559d\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"80a4569188244427b20b2d34b9a647c2\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"791e9717d6fb4d0eaf6050fd714d76d4\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Live Agent Configured?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._liveagent_configured;\\n})()\\n\"},\"id\":\"963c376280fc43c8a0493b6af940d6ac\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars._liveagent_configured;\\n})()\\n\"},\"id\":\"9fb518d474e84cc0a9184e991893d305\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"fc306a42377d4f6894218122b96e0921\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Live Agent Available?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return !vaVars._liveagent_available;\\n})()\\n\"},\"id\":\"138384057c584028a02e2aabadff209a\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars._liveagent_available;\\n})()\\n\"},\"id\":\"c4c197e84b49480682aa577c46ccd5c8\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"34fc9c495f8d4ab0b74243465d67ee01\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.connectToAgentUnsafe();\\n})()\\n\",\"id\":\"679a8c4a39014c188cfad0733b2c44b5\",\"name\":\"Transfer To Live Agent\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    // Skip this message if callback topic executed, since this must have already presented.\\n    if (vaVars.global_show_no_agent_available_msg)\\n        return gs.getMessageLang(vaVars._liveagent_handoff_error_msg, vaContext.getRequesterLang());\\n\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"9c1e1a29c55446258284465956c3ea99\",\"name\":\"Live Agent Not Available Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(vaVars._liveagent_disabled_msg, vaContext.getRequesterLang());\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"b940710986ce49849bd03f94859c11f0\",\"name\":\"Live Agent Not Configured Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.setQueue();\\n})()\\n\",\"id\":\"f481029fd130402ebb2c70b36e79b1ab\",\"name\":\"Set Connect Support Queue\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_start_chat_contextual_action_no_agents = true;\\n    vaSystem.endConversation();\\n})()\",\"id\":\"33587ca71d5343b4bf3b15cf2285f626\",\"name\":\"End Conversation If Contextual Action\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    // only execute this node if a contextual action starting a chat was attempted.\\n    return vaVars.global_start_chat_contextual_action;\\n})()\\n\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_show_no_agent_available_msg = true;\\n    var isEnabled = gs.getProperty('com.glide.cs.callback.enabled', 'false');\\n    if (isEnabled == 'true')\\n        vaVars._callback_enabled = true;\\n    else\\n        vaVars._callback_enabled = false;\\n})()\",\"id\":\"e20a0502bfb64a69843de106535f92fd\",\"name\":\"Callback Configured\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Callback Enabled ?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._callback_enabled == false;\\n})()\"},\"id\":\"51299f0cd1634de8ace29d923646955a\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._callback_enabled == true;\\n})()\"},\"id\":\"031e6c6959254becbec11e3f602dc4e2\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"bfc18bafba454763b305e044e434e97d\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var CALLBACK_DECISION_SYS_ID = \\\"05c6cc55eb9a0110ad88ca5d2352281e\\\";\\n    var callbackTopicId;\\n    var deviceType = vaContext.deviceType;\\n\\n    // Default callback flow is diabled \\n    vaVars.global_callback_executed = false;\\n\\n    // The callback Topic Id is being fetched form Custom Adapter Properties using Decision rules. \\n    // The callback_topic_id has to be publish topic id from sys_cs_topic.\\n    var inputs = new Object();\\n    inputs[\\\"channel_id\\\"] = vaSystem.getChannelIdByName(deviceType);\\n    inputs[\\\"portal\\\"] = vaContext.portal;\\n    inputs[\\\"provider_application_id\\\"] = vaContext.providerAppId;\\n\\n    var decisionTable = new sn_dt.DecisionTableAPI();\\n    try {\\n        var answer = decisionTable.getDecision(CALLBACK_DECISION_SYS_ID, inputs);\\n        if (answer)\\n            callbackTopicId = answer.getValue(\\\"value\\\");\\n\\n    } catch (e) {\\n        gs.error(\\\"Error while running the decison rules for callback topic, \\\" + callbackTopicId);\\n    }\\n    // Switch the custom/default callback topic\\n    if (callbackTopicId) {\\n        vaSystem.switchTopicById(callbackTopicId);\\n    }\\n\\n    // Expcted output from the callback topic would be vaVars._transfer_to_agent flag.\\n})();\",\"id\":\"1a256cd5a8b34df7b648aa03d060d9a3\",\"name\":\"Invoke Custom Callback Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Callback Executed ?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_callback_executed == false;\\n})()\"},\"id\":\"e33426097f4847edb5cbef150f5d76ca\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_callback_executed == true;\\n})()\\n\"},\"id\":\"207a19a93c87417d8c56fab905654819\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"2d51f4985f53434eab15cf0da4420e84\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.endConversation();\\n})()\\n\",\"id\":\"36c6958adacd4825a81bae9604927498\",\"name\":\"End Conversation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars._liveagent_configured = vaSystem.isLiveAgentConfigured();\\n})()\\n\",\"id\":\"61c27b1520904ed29f03313094ef2f61\",\"name\":\"Check Live Agent Configured\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Agent Available\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._liveagent_available;\\n})()\\n\"},\"id\":\"c88061e6f40247cab49918c4b1864634\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars._liveagent_available;\\n})()\\n\"},\"id\":\"49eeb37ced224ae299e5edae043a21ec\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"fd2da68324e84b6db0b2c9b84504d1b0\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars._external_agent_config = vaSystem.getMatchingLAConfig();\\n})()\\n\",\"id\":\"4e80168aab92495a8be016a0d39388fa\",\"name\":\"Ext agent configuration\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Has valid ext agent config\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (gs.nil(vaVars._external_agent_config))\\n        return true;\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 0)\\n       return false;\\n    return true;\\n})()\\n\"},\"id\":\"057b3bf443d74300a02d9e6fa259611c\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 0)\\n       return true;\\n    return false;\\n})()\\n\"},\"id\":\"1ba1653c8ec84cd9b99aa6e5dc3e6f2d\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"ee89ffc5ce2c44fcb4db798c593734fc\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"c4522da1fc23449e9d38a637bb4a2468\",\"name\":\"Ask user for to pick config\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 1)\\n       return true;\\n    return false;\\n})()\\n\"},\"expert_mode\":false,\"variable_id\":\"5e8ed811d104475e9ac698ec32e40fea\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Choose an Agent config\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    var options = [];\\n    for(var i=0; i<config.length; i++){\\n      options.push({ 'value': config[i].sysID, 'label': gs.getMessageLang(config[i].name, vaContext.getRequesterLang()), 'render_style': 'data' });\\n    }\\n     return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No Agent config\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    var options = [];\\n    for(var i=0; i<config.length; i++){\\n      options.push({ 'value': config[i].sysID, 'label': gs.getMessageLang(config[i].name, vaContext.getRequesterLang()), 'render_style': 'data' });\\n    }\\n     return options;\\n})()\\n\"},\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute(){\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 1)\\n       vaSystem.connectToExternalAgent(vaInputs.ask_user_for_to_pick_config.getValue());\\n    else\\n       vaSystem.connectToExternalAgent(config[0].sysID);\\n})()\\n\",\"id\":\"90eec3d6fc8641188365ba1e200c5a4e\",\"name\":\"Call API to connect to agent\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars._external_agent_config = vaSystem.getMatchingLAConfig();\\n})()\\n\",\"id\":\"6982005ef8e24e6c8b7863df358aa28e\",\"name\":\"Ext Agent config\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Valid LA config\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (gs.nil(vaVars._external_agent_config))\\n        return true;\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 0)\\n       return false;\\n    return true;\\n})()\\n\"},\"id\":\"a2249c52f79946268681fb5346f6adb1\",\"name\":\"No\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 0)\\n       return true;\\n    return false;\\n})()\\n\"},\"id\":\"2790873fc1b74b14b8ff5c022795f266\",\"name\":\"Yes\",\"expert_mode\":false}],\"id\":\"8a26a53c4cc04930bfa0c6969181f195\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"1bce72547d4741a99e1f1d2ad89c3800\",\"name\":\"Ask user to choose LA\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 1)\\n       return true;\\n    return false;\\n})()\\n\"},\"expert_mode\":false,\"variable_id\":\"7709ed43bbbc4b5ca8742cbcba81937f\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Choose an Agent config\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    var options = [];\\n    for(var i=0; i<config.length; i++){\\n      options.push({ 'value': config[i].sysID, 'label': gs.getMessageLang(config[i].name, vaContext.getRequesterLang()), 'render_style': 'data' });\\n    }\\n     return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No Agent config\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    var options = [];\\n    for(var i=0; i<config.length; i++){\\n      options.push({ 'value': config[i].sysID, 'label': gs.getMessageLang(config[i].name, vaContext.getRequesterLang()), 'render_style': 'data' });\\n    }\\n     return options;\\n})()\\n\"},\"description\":\"\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute(){\\n    var config = JSON.parse(vaVars._external_agent_config);\\n    if (config.length > 1)\\n       vaSystem.connectToExternalAgent(vaInputs.ask_user_to_choose_la.getValue());\\n    else\\n       vaSystem.connectToExternalAgent(config[0].sysID);\\n})()\\n\",\"id\":\"c072a2c94c5647bb8d5c83c96736e769\",\"name\":\"Connect to ext Agent\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars._liveagent_available = vaSystem.isLiveAgentAvailable();\\n})()\\n\",\"id\":\"a681368190c349a4ae6d35271c17af29\",\"name\":\"Check Live Agent Available\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Not self service\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return !vaSystem.isNASSConversation();\\n})()\\n\"},\"id\":\"b7b7a94929404ddabd9b50acbd9e036e\",\"name\":\"Not self service\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"is self service\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaSystem.isNASSConversation();\\n})()\\n\"},\"id\":\"a5096819ee674c0d88908b609e57644d\",\"name\":\"is self service\",\"expert_mode\":false}],\"id\":\"80884a989214431993a2681042d5413a\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No LA Chat in Progress\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return !vaSystem.hasOtherLiveAgentChatInProgress();\\n})()\\n\"},\"id\":\"e231743dd0c04615b9577eb49837f4f2\",\"name\":\"No LA Chat in Progress\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Other LA chat in Progress\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaSystem.hasOtherLiveAgentChatInProgress();\\n})()\\n\"},\"id\":\"31ac31eca0f6444ebb16c08c4e7abe48\",\"name\":\"Other LA chat in Progress\",\"expert_mode\":false}],\"id\":\"117cae83067644d58f9afffcdfd87b86\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:301cdb5c3b1323009cbbcea234efc468:node:244bc8e2706a49078aa9e1837600f2b1:field:0\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"244bc8e2706a49078aa9e1837600f2b1\",\"name\":\"Other Live Agent in progress\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var isNASSFlow = vaSystem.isNASSConversation();\\n    if (isNASSFlow) {\\n        vaSystem.endConversation();\\n    }\\n})()\\n\",\"id\":\"f1272095bee94c158a1a184f31ea6897\",\"name\":\"Close NASS Conversation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"bfc18bafba454763b305e044e434e97d\",\"target_node_id\":\"34fc9c495f8d4ab0b74243465d67ee01\",\"branch_id\":\"51299f0cd1634de8ace29d923646955a\",\"id\":\"a306597e467b47819ae2329171e6deea\",\"name\":\"51299f0cd1634de8ace29d923646955a\"},{\"type\":\"Edge\",\"source_node_id\":\"61c27b1520904ed29f03313094ef2f61\",\"target_node_id\":\"fc306a42377d4f6894218122b96e0921\",\"id\":\"6ae0d0d65d6848d9a60a12bbd3b245ad\"},{\"type\":\"Edge\",\"source_node_id\":\"9c1e1a29c55446258284465956c3ea99\",\"target_node_id\":\"33587ca71d5343b4bf3b15cf2285f626\",\"id\":\"d1e9f62d5c294e118f8016d8c002476f\"},{\"type\":\"Edge\",\"source_node_id\":\"b940710986ce49849bd03f94859c11f0\",\"target_node_id\":\"791e9717d6fb4d0eaf6050fd714d76d4\",\"id\":\"09bcb5073ebd4f2381eddeea91f46c59\"},{\"type\":\"Edge\",\"source_node_id\":\"34fc9c495f8d4ab0b74243465d67ee01\",\"target_node_id\":\"9c1e1a29c55446258284465956c3ea99\",\"branch_id\":\"138384057c584028a02e2aabadff209a\",\"id\":\"43df976b334c48f29fbcf229331f709e\",\"name\":\"138384057c584028a02e2aabadff209a\"},{\"type\":\"Edge\",\"source_node_id\":\"fc306a42377d4f6894218122b96e0921\",\"target_node_id\":\"f481029fd130402ebb2c70b36e79b1ab\",\"branch_id\":\"963c376280fc43c8a0493b6af940d6ac\",\"id\":\"bf1d6f4c7ae84a97bd512a093d21d6d4\",\"name\":\"963c376280fc43c8a0493b6af940d6ac\"},{\"type\":\"Edge\",\"source_node_id\":\"33587ca71d5343b4bf3b15cf2285f626\",\"target_node_id\":\"791e9717d6fb4d0eaf6050fd714d76d4\",\"id\":\"9a3087ebcf3c4e4bbca0f14677e50664\"},{\"type\":\"Edge\",\"source_node_id\":\"e20a0502bfb64a69843de106535f92fd\",\"target_node_id\":\"bfc18bafba454763b305e044e434e97d\",\"id\":\"6b5fba34f83b464d9f46e773ec3162d4\"},{\"type\":\"Edge\",\"source_node_id\":\"bfc18bafba454763b305e044e434e97d\",\"target_node_id\":\"1a256cd5a8b34df7b648aa03d060d9a3\",\"branch_id\":\"031e6c6959254becbec11e3f602dc4e2\",\"id\":\"dd0ec2a3c359466c8c6c651c416b1d29\",\"name\":\"031e6c6959254becbec11e3f602dc4e2\"},{\"type\":\"Edge\",\"source_node_id\":\"1a256cd5a8b34df7b648aa03d060d9a3\",\"target_node_id\":\"2d51f4985f53434eab15cf0da4420e84\",\"id\":\"49d3a8606ae042e7869efe6820f19fdb\"},{\"type\":\"Edge\",\"source_node_id\":\"2d51f4985f53434eab15cf0da4420e84\",\"target_node_id\":\"34fc9c495f8d4ab0b74243465d67ee01\",\"branch_id\":\"e33426097f4847edb5cbef150f5d76ca\",\"id\":\"1eeeec92dc014396a8216cda1db9653b\",\"name\":\"e33426097f4847edb5cbef150f5d76ca\"},{\"type\":\"Edge\",\"source_node_id\":\"2d51f4985f53434eab15cf0da4420e84\",\"target_node_id\":\"36c6958adacd4825a81bae9604927498\",\"branch_id\":\"207a19a93c87417d8c56fab905654819\",\"id\":\"4268392f07274ba9956cc760b237c513\",\"name\":\"207a19a93c87417d8c56fab905654819\"},{\"type\":\"Edge\",\"source_node_id\":\"36c6958adacd4825a81bae9604927498\",\"target_node_id\":\"791e9717d6fb4d0eaf6050fd714d76d4\",\"id\":\"5d377ed7a57f4e1999b8237e4106c1c1\"},{\"type\":\"Edge\",\"source_node_id\":\"80a4569188244427b20b2d34b9a647c2\",\"target_node_id\":\"61c27b1520904ed29f03313094ef2f61\",\"id\":\"9da607f1038a47b3a2ee0b2914aec1d1\"},{\"type\":\"Edge\",\"source_node_id\":\"fd2da68324e84b6db0b2c9b84504d1b0\",\"target_node_id\":\"e20a0502bfb64a69843de106535f92fd\",\"branch_id\":\"c88061e6f40247cab49918c4b1864634\",\"id\":\"075586609c474c65bf5fd5163004507d\",\"name\":\"c88061e6f40247cab49918c4b1864634\"},{\"type\":\"Edge\",\"source_node_id\":\"fd2da68324e84b6db0b2c9b84504d1b0\",\"target_node_id\":\"4e80168aab92495a8be016a0d39388fa\",\"branch_id\":\"49eeb37ced224ae299e5edae043a21ec\",\"id\":\"916cbe6835ae4f8bbb6f10348b3e089c\",\"name\":\"49eeb37ced224ae299e5edae043a21ec\"},{\"type\":\"Edge\",\"source_node_id\":\"4e80168aab92495a8be016a0d39388fa\",\"target_node_id\":\"ee89ffc5ce2c44fcb4db798c593734fc\",\"id\":\"c85856bc1b8740d6aa0793f56b0b5e04\"},{\"type\":\"Edge\",\"source_node_id\":\"ee89ffc5ce2c44fcb4db798c593734fc\",\"target_node_id\":\"e20a0502bfb64a69843de106535f92fd\",\"branch_id\":\"057b3bf443d74300a02d9e6fa259611c\",\"id\":\"cc05be970e7548c28cd9e695dcbfe366\",\"name\":\"057b3bf443d74300a02d9e6fa259611c\"},{\"type\":\"Edge\",\"source_node_id\":\"ee89ffc5ce2c44fcb4db798c593734fc\",\"target_node_id\":\"c4522da1fc23449e9d38a637bb4a2468\",\"branch_id\":\"1ba1653c8ec84cd9b99aa6e5dc3e6f2d\",\"id\":\"181253be9ba14855a6c332ec22dbcc4a\",\"name\":\"1ba1653c8ec84cd9b99aa6e5dc3e6f2d\"},{\"type\":\"Edge\",\"source_node_id\":\"c4522da1fc23449e9d38a637bb4a2468\",\"target_node_id\":\"90eec3d6fc8641188365ba1e200c5a4e\",\"id\":\"0d03bd3fd0144c32bc65e376d92c84ab\"},{\"type\":\"Edge\",\"source_node_id\":\"90eec3d6fc8641188365ba1e200c5a4e\",\"target_node_id\":\"791e9717d6fb4d0eaf6050fd714d76d4\",\"id\":\"5ad4e728edc74b3eb39388f7acdb2c67\"},{\"type\":\"Edge\",\"source_node_id\":\"fc306a42377d4f6894218122b96e0921\",\"target_node_id\":\"6982005ef8e24e6c8b7863df358aa28e\",\"branch_id\":\"9fb518d474e84cc0a9184e991893d305\",\"id\":\"f1b1e7cf29ca4ef98e3fc56b296411b9\",\"name\":\"9fb518d474e84cc0a9184e991893d305\"},{\"type\":\"Edge\",\"source_node_id\":\"6982005ef8e24e6c8b7863df358aa28e\",\"target_node_id\":\"8a26a53c4cc04930bfa0c6969181f195\",\"id\":\"b503b4b09d69444cb34a87d3adcb3b1f\"},{\"type\":\"Edge\",\"source_node_id\":\"8a26a53c4cc04930bfa0c6969181f195\",\"target_node_id\":\"b940710986ce49849bd03f94859c11f0\",\"branch_id\":\"a2249c52f79946268681fb5346f6adb1\",\"id\":\"e21e34841a4941c8acc1e556f1e88834\",\"name\":\"a2249c52f79946268681fb5346f6adb1\"},{\"type\":\"Edge\",\"source_node_id\":\"8a26a53c4cc04930bfa0c6969181f195\",\"target_node_id\":\"1bce72547d4741a99e1f1d2ad89c3800\",\"branch_id\":\"2790873fc1b74b14b8ff5c022795f266\",\"id\":\"adec8e603941489c8bcb59e52b5e3985\",\"name\":\"2790873fc1b74b14b8ff5c022795f266\"},{\"type\":\"Edge\",\"source_node_id\":\"1bce72547d4741a99e1f1d2ad89c3800\",\"target_node_id\":\"c072a2c94c5647bb8d5c83c96736e769\",\"id\":\"836fdd392ab4419d8823cc795836192c\"},{\"type\":\"Edge\",\"source_node_id\":\"c072a2c94c5647bb8d5c83c96736e769\",\"target_node_id\":\"791e9717d6fb4d0eaf6050fd714d76d4\",\"id\":\"ce3d2993544a44959d760c15bfbed2e1\"},{\"type\":\"Edge\",\"source_node_id\":\"f481029fd130402ebb2c70b36e79b1ab\",\"target_node_id\":\"a681368190c349a4ae6d35271c17af29\",\"id\":\"85bd9cef7c2e4a9a9e1bc5402203002c\"},{\"type\":\"Edge\",\"source_node_id\":\"a681368190c349a4ae6d35271c17af29\",\"target_node_id\":\"fd2da68324e84b6db0b2c9b84504d1b0\",\"id\":\"f9ff0bd1c554419abab3bcd5f33d729f\"},{\"type\":\"Edge\",\"source_node_id\":\"34fc9c495f8d4ab0b74243465d67ee01\",\"target_node_id\":\"80884a989214431993a2681042d5413a\",\"branch_id\":\"c4c197e84b49480682aa577c46ccd5c8\",\"id\":\"2fe517c428914f298c225059dfd8ccde\",\"name\":\"c4c197e84b49480682aa577c46ccd5c8\"},{\"type\":\"Edge\",\"source_node_id\":\"80884a989214431993a2681042d5413a\",\"target_node_id\":\"679a8c4a39014c188cfad0733b2c44b5\",\"branch_id\":\"b7b7a94929404ddabd9b50acbd9e036e\",\"id\":\"d76f709fa19a4258b1e5e524c0f3a370\",\"name\":\"b7b7a94929404ddabd9b50acbd9e036e\"},{\"type\":\"Edge\",\"source_node_id\":\"80884a989214431993a2681042d5413a\",\"target_node_id\":\"117cae83067644d58f9afffcdfd87b86\",\"branch_id\":\"a5096819ee674c0d88908b609e57644d\",\"id\":\"3aeb7ab5e8ea4734976075bfa14029d5\",\"name\":\"a5096819ee674c0d88908b609e57644d\"},{\"type\":\"Edge\",\"source_node_id\":\"117cae83067644d58f9afffcdfd87b86\",\"target_node_id\":\"679a8c4a39014c188cfad0733b2c44b5\",\"branch_id\":\"e231743dd0c04615b9577eb49837f4f2\",\"id\":\"f71475577fe34b61b7f48e8c29bd8f67\",\"name\":\"e231743dd0c04615b9577eb49837f4f2\"},{\"type\":\"Edge\",\"source_node_id\":\"117cae83067644d58f9afffcdfd87b86\",\"target_node_id\":\"244bc8e2706a49078aa9e1837600f2b1\",\"branch_id\":\"31ac31eca0f6444ebb16c08c4e7abe48\",\"id\":\"9b3eef76364b4e62ba0fbdc654385aaf\",\"name\":\"31ac31eca0f6444ebb16c08c4e7abe48\"},{\"type\":\"Edge\",\"source_node_id\":\"244bc8e2706a49078aa9e1837600f2b1\",\"target_node_id\":\"791e9717d6fb4d0eaf6050fd714d76d4\",\"id\":\"148335cee81f462188d2851aef8fea7f\"},{\"type\":\"Edge\",\"source_node_id\":\"679a8c4a39014c188cfad0733b2c44b5\",\"target_node_id\":\"f1272095bee94c158a1a184f31ea6897\",\"id\":\"eac2c24bde174a7191ea4dff6f4db0ae\"},{\"type\":\"Edge\",\"source_node_id\":\"f1272095bee94c158a1a184f31ea6897\",\"target_node_id\":\"791e9717d6fb4d0eaf6050fd714d76d4\",\"id\":\"3933d91dce0c4d148ff74548517df655\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_liveagent_disabled_msg\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"51cd14e9647848349000e151b3a23186\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_liveagent_handoff_error_msg\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"cf59f5de11bb42e8898d499cf33c9d62\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_liveagent_configured\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"2644d2dab92b4bd596de666e2aae6626\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_liveagent_available\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"a4ee6f84465f4baf9cc0dfa989a12cf7\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_liveagent_external\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"88a0fe2014ba4f1cb4e088b5b1008cf3\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false},{\"type\":\"String\",\"name\":\"_external_agent_config\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"85e820f7b9204b04b55df33041f02eb1\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"auto_select\":false,\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"5e8ed811d104475e9ac698ec32e40fea\",\"name\":\"ask_user_for_to_pick_config\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"table\":\"\"},{\"type\":\"Choice\",\"choices\":[],\"id\":\"7709ed43bbbc4b5ca8742cbcba81937f\",\"name\":\"ask_user_to_choose_la\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"aiInput\":false,\"list\":false,\"table\":\"\"}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"301cdb5c3b1323009cbbcea234efc468\",\"name\":\"_live_agent_support_\",\"key_phrases\":[\"_live_agent_support_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"title\":\"_live_agent_support_\",\"library\":false,\"csTopicId\":\"ef989365c32013009cbbdccdf3d3ae53\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_live_agent_support_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"301cdb5c3b1323009cbbcea234efc468","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/ef989365c32013009cbbdccdf3d3ae53","value":"ef989365c32013009cbbdccdf3d3ae53"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"322","sys_updated_on":"2023-05-24 07:12:52","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.46\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"bcf37dda2ef34e0f85edc4eaf06dc29b\": {\n          \"id\": \"bcf37dda2ef34e0f85edc4eaf06dc29b\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"e12d86c0d70b4821adabcbf17fb75c65\": {\n          \"id\": \"e12d86c0d70b4821adabcbf17fb75c65\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       var result;\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\\n       }\\n    */\\n\\n    return '';\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"connectToLA\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.connectToLA}}\",\n                        \"displayValue\": \"Script VariablesconnectToLA\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=0902a7d2530333006e61ddeeff7b1250%5Ecalling_cs_topic_idINbb9714a9530210106e61ddeeff7b1201\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"linkStatus\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.linkStatus}}\",\n                        \"displayValue\": \"Script VariableslinkStatus\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=0902a7d2530333006e61ddeeff7b1250%5Ecalling_cs_topic_idINbb9714a9530210106e61ddeeff7b1201\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            }\n          ]\n        },\n        \"1d7f42200a2c46b5859004249f54bc73\": {\n          \"id\": \"1d7f42200a2c46b5859004249f54bc73\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"2f53f162a0894890b678e4c5c8123db8\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Link Account\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n   var linkAccountProp = gs.getProperty('com.glide.cs.link_account_msg');\\n   var linkAccountMessage =  gs.getMessageLang(linkAccountProp, vaContext.getRequesterLang());\\n   return linkAccountMessage;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return true;\\n})()\\n\"\n          },\n          \"optional\": false,\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"b2edee387e19409ea8c550c59348fd73\",\n          \"id\": \"2f53f162a0894890b678e4c5c8123db8\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];    \\n        options.push({ 'value': vaVars.challengeUrl, 'label': gs.getMessageLang('Link to ServiceNow', vaContext.getRequesterLang())});//vaSystem.getAdapterMessage(\\\"link_account_label\\\", true) });\\n        options.push({ 'value': 'continue_as_guest', 'label': gs.getMessageLang(\\\"Continue as Guest\\\", vaContext.getRequesterLang()) });\\n        if(vaContext.deviceType != 'adapter') {\\n            //options.push({ 'value': vaSystem.getAdapterMessage(\\\"help_required_keyword\\\", false), 'label': gs.getMessageLang(\\\"Check out Tips\\\", vaContext.getRequesterLang()) });\\n            options.push({ 'value': 'help', 'label': gs.getMessageLang(\\\"Check out Tips\\\", vaContext.getRequesterLang()) });\\n        }\\n        \\n    return options;    \\n})()\\n\",\n          \"noRecordsResponseMsg\": {\n            \"value\": \"(function execute() {\\n    return 'Failed';\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];    \\n        options.push({ 'value': vaVars.challengeUrl, 'label': gs.getMessageLang('Link to ServiceNow', vaContext.getRequesterLang())});//vaSystem.getAdapterMessage(\\\"link_account_label\\\", true) });\\n        options.push({ 'value': 'continue_as_guest', 'label': gs.getMessageLang(\\\"Continue as Guest\\\", vaContext.getRequesterLang()) });\\n        if(vaContext.deviceType != 'adapter') {\\n            //options.push({ 'value': vaSystem.getAdapterMessage(\\\"help_required_keyword\\\", false), 'label': gs.getMessageLang(\\\"Check out Tips\\\", vaContext.getRequesterLang()) });\\n            options.push({ 'value': 'help', 'label': gs.getMessageLang(\\\"Check out Tips\\\", vaContext.getRequesterLang()) });\\n        }\\n        \\n    return options;    \\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"entity\": \"\",\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"71559e800290496facf94dc45c321daa\": {\n          \"id\": \"71559e800290496facf94dc45c321daa\",\n          \"name\": \"getChallengeUrl\",\n          \"script\": \"(function execute() {\\n    var x = new sn_cs_adapter.VaLinkAccountUtil();\\n    vaVars.challengeUrl = x.getChallengeURL(vaContext.deviceId, vaContext.deviceType, vaContext.providerAppId, vaContext.providerUserId, vaContext.providerUserName, vaSystem.getConversationId());\\n    if(vaVars.challengeUrl && vaVars.challengeUrl.trim().length > 0){\\n        vaVars.challengeUrl = \\\"ext:\\\" + vaVars.challengeUrl; \\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return true;\\n})()\\n\"\n          }\n        },\n        \"4b82d00977394bd8bed5c10fa5efeee8\": {\n          \"id\": \"4b82d00977394bd8bed5c10fa5efeee8\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f3cf90ccc3924eb0be1fcd34fba37efe\": {\n          \"id\": \"f3cf90ccc3924eb0be1fcd34fba37efe\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Does user have an account\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    var defaultMsg = \\\"To better serve you, we can authenticate your identity if you have an existing account. Do you know your Soft PIN?\\\"\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(\\\"ask_to_link_account_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"1848d8a57d8545f19b410c01f2e74c7c\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b7f5788b078c42629bf9d2a294ae020d\": {\n          \"id\": \"b7f5788b078c42629bf9d2a294ae020d\",\n          \"name\": \"set Auth Type\",\n          \"script\": \"(function execute() {\\n    var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n    vaVars.providerId = providerApp.providerId;\\n    vaVars.inboundId = providerApp.inboundId;\\n    \\n    var cafScriptObject = new sn_cs.CustomAdapterScriptObject();\\n    var accountLinkType = cafScriptObject.getAccountLinkType(vaContext.providerAppId);\\n    vaVars.authType = accountLinkType;\\n\\n    vaVars.identifiedUser = vaContext.identifiedUser;\\n\\n    vaVars.redirectToLA = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\n                                    'redirect_to_live_agent_on_softpin_failure', vaContext.providerAppId) == 'true' ? true : false;\\n\\n    vaVars.softPinLockoutEnabled = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\n                                    'softpin_lockout_enabled', vaContext.providerAppId) == 'true' ? true : false;\\n    // There is a possibility that account linking flow might be aborted by the user\\n    // For example, when presented with a question if they want to enter soft PIN, they may say no. \\n    // This output variable holds that information, so that the topic/topic block that calls this topic block\\n    // can make informed decisions\\n    vaVars.linkStatus = 'aborted';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a9210c057bd444fba27f4dbe690bd631\": {\n          \"id\": \"a9210c057bd444fba27f4dbe690bd631\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Should Continue as Guest\"\n        },\n        \"d50ebfde9cdf4a21aebd7d36117a71ae\": {\n          \"id\": \"d50ebfde9cdf4a21aebd7d36117a71ae\",\n          \"name\": \"ContinueAsGuestAction\",\n          \"script\": \"(function execute() {\\n    return;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"79f59fb518b94f25bda4b2ce158b6729\": {\n          \"id\": \"79f59fb518b94f25bda4b2ce158b6729\",\n          \"stepType\": \"Decision\",\n          \"name\": \"User Identified\"\n        },\n        \"40e6967d11224724831071bce9599eed\": {\n          \"id\": \"40e6967d11224724831071bce9599eed\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Link Account Greeting Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var message = sn_cs.VASystemObject.getBotMessage(\\\"account_link_greeting_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    return gs.getMessageLang(message, vaContext.getRequesterLang());\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var msg = sn_cs.VASystemObject.getBotMessage(\\\"account_link_greeting_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    return !gs.nil(msg)\\n})()\\n\"\n          }\n        },\n        \"8714cde4b6eb4aee96b6efedcb0519ec\": {\n          \"id\": \"8714cde4b6eb4aee96b6efedcb0519ec\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"User not identified\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var defaultMsg = \\\"We dont recognize your phone number. That's okay. You can continue as a guest.\\\"\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(\\\"user_not_recognized_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"6225eef7cb3543ddb3990f966d79efa3\": {\n          \"id\": \"6225eef7cb3543ddb3990f966d79efa3\",\n          \"name\": \"Check Additional identification property\",\n          \"script\": \"(function execute() {\\n    var value = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"verification_custom_user_identification\\\", vaContext.providerAppId);\\n    vaVars.customVerificationEnabled = value;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a6085b918db949f4b1d0967c62b625e9\": {\n          \"id\": \"a6085b918db949f4b1d0967c62b625e9\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Custom Identification Enabled\"\n        },\n        \"43e38609b3c6460d9eec7fec70a2b86c\": {\n          \"id\": \"43e38609b3c6460d9eec7fec70a2b86c\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Does User want to identify himself\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    var defaultMsg = \\\"To better serve you, we can authenticate your identity if you have an existing account. Do you know your Soft PIN?\\\"\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(\\\"ask_to_link_account_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"1fe40bca22654dc5a20bf40cf5b6c541\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f365b3389c1b4701aede2f776f9c223a\": {\n          \"id\": \"f365b3389c1b4701aede2f776f9c223a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Should Continue as identified user\"\n        },\n        \"1dd754f377984c61be0feac516cc2cb2\": {\n          \"id\": \"1dd754f377984c61be0feac516cc2cb2\",\n          \"name\": \"Execute Custom Identification Topic\",\n          \"script\": \"(function execute() {\\n    var value = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"verification_custom_user_topic\\\", vaContext.providerAppId);\\n    if(!value)\\n       gs.debug(\\\"Custom identification topic is not configured\\\");\\n    vaSystem.switchTopicById(value);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"5410c4f0a1e145a08f7038fe14f03f9a\": {\n          \"id\": \"5410c4f0a1e145a08f7038fe14f03f9a\",\n          \"name\": \"Set User Identifier\",\n          \"script\": \"(function execute() {\\n    vaVars.identifiedUser = vaVars.global_linkaccount_verification_userid;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"2a8ab05760574e07b03278769568ddba\": {\n          \"id\": \"2a8ab05760574e07b03278769568ddba\",\n          \"stepType\": \"Decision\",\n          \"name\": \"SoftPIN Lockout Enabled\"\n        },\n        \"5d428eac2b1e4f7e89c4b617a9c778bb\": {\n          \"id\": \"5d428eac2b1e4f7e89c4b617a9c778bb\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is User Locked Out\"\n        },\n        \"d3e0972f2f7b421e9368373667d7c879\": {\n          \"id\": \"d3e0972f2f7b421e9368373667d7c879\",\n          \"name\": \"Get User Lockout Status\",\n          \"script\": \"(function execute() {\\n\\n    var providerAppId = vaContext.providerAppId;\\n    var maxAttempts = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy('softpin_max_retry_attempts', providerAppId);\\n    var invalidRetryInterval = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy('softpin_max_invalid_attempts_interval_hrs', providerAppId);\\n\\n    vaVars.userLockedOutOnInvalidSoftPinAttempts = CustomAdapterSoftPinHelper.isUserLockedOutOnMaxAttempts(\\n                                        providerAppId, vaContext.providerUserId, maxAttempts, invalidRetryInterval,vaVars.identifiedUser);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"9303aaf2df364c27b7039dc38ae3771a\": {\n          \"id\": \"9303aaf2df364c27b7039dc38ae3771a\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Show SoftPIN Lockout Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var defaultMessage = 'Your account has been locked due to invalid Soft PIN entries. Please try again later.';\\n    var customMessage = sn_cs.VASystemObject.getBotMessage('softpin_lockout_message',  vaVars.inboundId, vaVars.providerId);\\n\\n    var promptMessage = customMessage || defaultMessage;\\n\\n    return gs.getMessageLang(promptMessage, vaContext.getRequesterLang());\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.customVerificationEnabled != 'true';\\n})()\\n\"\n          }\n        },\n        \"bfc60f9beba14d3aaa959cac8fe698a3\": {\n          \"id\": \"bfc60f9beba14d3aaa959cac8fe698a3\",\n          \"name\": \"Set Linking Aborted Output Flag\",\n          \"script\": \"(function execute() {\\n    vaVars.linkingAborted = true;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a629f51d29d142e3baf84be9199efe51\": {\n          \"id\": \"a629f51d29d142e3baf84be9199efe51\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is User Identified?\"\n        },\n        \"65a5435d6c2548358cfcabfc29a9280b\": {\n          \"id\": \"65a5435d6c2548358cfcabfc29a9280b\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Custom Identification Enabled\"\n        },\n        \"814b691d93d1435f85a00aa51064d7b1\": {\n          \"id\": \"814b691d93d1435f85a00aa51064d7b1\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"SoftPin authorisation\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"SoftPin_authorisation\",\n          \"reusableTopicId\": \"2578d02eebab1110da1861c59c5228e1\",\n          \"inputs\": {\n            \"softpinretrycount\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.softpinRetryCount}}\",\n                        \"displayValue\": \"Script VariablessoftpinRetryCount\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"identifieduser\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.identifiedUser}}\",\n                        \"displayValue\": \"Script VariablesidentifiedUser\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"softpinlockoutenabled\": {\n              \"value\": \"{{vaVars.softPinLockoutEnabled}}\",\n              \"mode\": \"data_pill\",\n              \"type\": \"True/False\"\n            },\n            \"inboundid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.inboundId}}\",\n                        \"displayValue\": \"Script VariablesinboundId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"providerid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.providerId}}\",\n                        \"displayValue\": \"Script VariablesproviderId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"authtype\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.authType}}\",\n                        \"displayValue\": \"Script VariablesauthType\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"redirecttola\": {\n              \"value\": \"{{vaVars.redirectToLA}}\",\n              \"mode\": \"data_pill\",\n              \"type\": \"True/False\"\n            }\n          },\n          \"variableIds\": [\n            \"f70e5c7f73184dfea53388f929fd45f6\",\n            \"8e5b0c8b30d44ad48d4aa10f35e43da7\"\n          ],\n          \"outputs\": [\n            {\n              \"id\": \"f70e5c7f73184dfea53388f929fd45f6\",\n              \"value\": \"linkstatus\",\n              \"mapping\": \"sa_linkstatus\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"8e5b0c8b30d44ad48d4aa10f35e43da7\",\n              \"value\": \"connecttola\",\n              \"mapping\": \"sa_connecttola\",\n              \"preventDisable\": true\n            }\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false\n        },\n        \"17a7a8a0b2f944b896ca55dabbb99cff\": {\n          \"id\": \"17a7a8a0b2f944b896ca55dabbb99cff\",\n          \"name\": \"set softPin authorisation  response\",\n          \"script\": \"(function execute() {\\n    vaVars.connectToLA = vaInputs.sa_connecttola.getValue();\\n    vaVars.linkStatus = vaInputs.sa_linkstatus.getValue();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"55877490cd6e488fba4eed6100026530\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a629f51d29d142e3baf84be9199efe51\",\n          \"target\": \"814b691d93d1435f85a00aa51064d7b1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.identifiedUser);\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"40df5df4dce742868a20c1d199536cb2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f365b3389c1b4701aede2f776f9c223a\",\n          \"target\": \"d50ebfde9cdf4a21aebd7d36117a71ae\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.does_user_want_to_identify_himself=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"793a14d9d104493199ac8f17fe5d5706\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f3cf90ccc3924eb0be1fcd34fba37efe\",\n          \"target\": \"a9210c057bd444fba27f4dbe690bd631\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ac09c3b1dcbe48e7b34d85a97d02a65b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bcf37dda2ef34e0f85edc4eaf06dc29b\",\n          \"target\": \"b7f5788b078c42629bf9d2a294ae020d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"becd0766aa4b432d82a444e36fc81543\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4b82d00977394bd8bed5c10fa5efeee8\",\n          \"target\": \"71559e800290496facf94dc45c321daa\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   var applies = vaVars.authType == \\\"basic\\\" || vaVars.authType == '';\\n       return applies;\\n})()\\n\"\n          },\n          \"label\": \"Link\"\n        },\n        {\n          \"id\": \"3b1d130be3d541e8b2fb1b9b2813eb14\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"71559e800290496facf94dc45c321daa\",\n          \"target\": \"1d7f42200a2c46b5859004249f54bc73\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cd9470c660c540359b129b987b4140c1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2f53f162a0894890b678e4c5c8123db8\",\n          \"target\": \"e12d86c0d70b4821adabcbf17fb75c65\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a800746be38c4607b3530965ab759480\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1d7f42200a2c46b5859004249f54bc73\",\n          \"target\": \"e12d86c0d70b4821adabcbf17fb75c65\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n   if (vaVars.challengeUrl === \\\"\\\")\\n    return true;\\n})()\\n\"\n          },\n          \"label\": \"Account linked or AMB Client\"\n        },\n        {\n          \"id\": \"289a318346ff420e817f7bf3943c2bba\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"1d7f42200a2c46b5859004249f54bc73\",\n          \"target\": \"2f53f162a0894890b678e4c5c8123db8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    if (vaInputs.challengeUrl != \\\"\\\")\\n         return true;\\n    \\n\\n})()\\n\"\n          },\n          \"label\": \"Guest User\"\n        },\n        {\n          \"id\": \"4614ee19e6c142be845e3744f019ad7d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d50ebfde9cdf4a21aebd7d36117a71ae\",\n          \"target\": \"e12d86c0d70b4821adabcbf17fb75c65\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d25e9e011f1644a681f791880d0baf3c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4b82d00977394bd8bed5c10fa5efeee8\",\n          \"target\": \"79f59fb518b94f25bda4b2ce158b6729\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var applies = vaVars.authType == \\\"QnA\\\" || vaVars.authType == \\\"QnA_and_mfa\\\";\\n    return applies;\\n})()\\n\"\n          },\n          \"label\": \"MFA\"\n        },\n        {\n          \"id\": \"914494e032744768b40c923db12bf031\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a9210c057bd444fba27f4dbe690bd631\",\n          \"target\": \"814b691d93d1435f85a00aa51064d7b1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.does_user_have_an_account=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"721796ce74314815831668542305c180\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b7f5788b078c42629bf9d2a294ae020d\",\n          \"target\": \"40e6967d11224724831071bce9599eed\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dd30c04812cc4a7a8a5cfc5c1d2767fd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"40e6967d11224724831071bce9599eed\",\n          \"target\": \"4b82d00977394bd8bed5c10fa5efeee8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"009f93c541af46018d30ecd250a6dd8b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8714cde4b6eb4aee96b6efedcb0519ec\",\n          \"target\": \"d50ebfde9cdf4a21aebd7d36117a71ae\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c6c53c3cf21246b6bfa3b4769df8a871\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"79f59fb518b94f25bda4b2ce158b6729\",\n          \"target\": \"6225eef7cb3543ddb3990f966d79efa3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return gs.nil(vaVars.identifiedUser);\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"a7d538ae846945b29a72806e28bc97c8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6225eef7cb3543ddb3990f966d79efa3\",\n          \"target\": \"a6085b918db949f4b1d0967c62b625e9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"194ba823904f4bdb8703e59a13b770f7\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a6085b918db949f4b1d0967c62b625e9\",\n          \"target\": \"8714cde4b6eb4aee96b6efedcb0519ec\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var flag = vaVars.customVerificationEnabled != \\\"true\\\";\\n    return flag;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"20df9e140bcf4e259f286e7cc35712c9\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a6085b918db949f4b1d0967c62b625e9\",\n          \"target\": \"43e38609b3c6460d9eec7fec70a2b86c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var flag = vaVars.customVerificationEnabled == \\\"true\\\";\\n    return flag;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"2fcdf4eea69849df8ce7f1a57f282ca9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"43e38609b3c6460d9eec7fec70a2b86c\",\n          \"target\": \"f365b3389c1b4701aede2f776f9c223a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"08d92b97f5824d8da5ad58e58af2f832\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f365b3389c1b4701aede2f776f9c223a\",\n          \"target\": \"1dd754f377984c61be0feac516cc2cb2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.does_user_want_to_identify_himself=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"8f46caa7d5414da4966cf920501b20e1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1dd754f377984c61be0feac516cc2cb2\",\n          \"target\": \"5410c4f0a1e145a08f7038fe14f03f9a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a86ecf127a5e4f6baf45651ba40e19ed\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"79f59fb518b94f25bda4b2ce158b6729\",\n          \"target\": \"2a8ab05760574e07b03278769568ddba\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !gs.nil(vaVars.identifiedUser);\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"a5bdd1b161764b1a822da00751e8a87f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2a8ab05760574e07b03278769568ddba\",\n          \"target\": \"f3cf90ccc3924eb0be1fcd34fba37efe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.softPinLockoutEnabled == false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"b179bf11cba94b169e6d6dffccfdbcfd\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2a8ab05760574e07b03278769568ddba\",\n          \"target\": \"d3e0972f2f7b421e9368373667d7c879\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.softPinLockoutEnabled == true;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"9122ff0d2e324709ab9e81bc2c9d57b6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d3e0972f2f7b421e9368373667d7c879\",\n          \"target\": \"5d428eac2b1e4f7e89c4b617a9c778bb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1ca6bd20d8e34ba48b74ca3bbc751c33\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"5d428eac2b1e4f7e89c4b617a9c778bb\",\n          \"target\": \"9303aaf2df364c27b7039dc38ae3771a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.userLockedOutOnInvalidSoftPinAttempts == true;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"5c313325403a4750ae8f98fc28872d36\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9303aaf2df364c27b7039dc38ae3771a\",\n          \"target\": \"d50ebfde9cdf4a21aebd7d36117a71ae\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"583474175972422e95d208b51b13958c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a9210c057bd444fba27f4dbe690bd631\",\n          \"target\": \"bfc60f9beba14d3aaa959cac8fe698a3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.does_user_have_an_account=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"3762cb5c27694fbe90aef2a7f4aa56b5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bfc60f9beba14d3aaa959cac8fe698a3\",\n          \"target\": \"d50ebfde9cdf4a21aebd7d36117a71ae\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3ab0a765b8f4459b9e02ce202e1b354c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5410c4f0a1e145a08f7038fe14f03f9a\",\n          \"target\": \"a629f51d29d142e3baf84be9199efe51\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"da79efc2a9a4465591119d98233ea856\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a629f51d29d142e3baf84be9199efe51\",\n          \"target\": \"d3e0972f2f7b421e9368373667d7c879\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !gs.nil(vaVars.identifiedUser) && (vaVars.softPinLockoutEnabled == true);\\n})()\\n\"\n          },\n          \"label\": \"Yes & Soft PIN Enabled\"\n        },\n        {\n          \"id\": \"bffc5577f97044ffb3229f036068ce81\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"5d428eac2b1e4f7e89c4b617a9c778bb\",\n          \"target\": \"65a5435d6c2548358cfcabfc29a9280b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.userLockedOutOnInvalidSoftPinAttempts == false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"18d683be013b467f94e81e6bf6018976\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"65a5435d6c2548358cfcabfc29a9280b\",\n          \"target\": \"f3cf90ccc3924eb0be1fcd34fba37efe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var flag = vaVars.customVerificationEnabled != 'true';\\n    return flag;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"6e0a223fd7d048cbad87dde044341b95\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"65a5435d6c2548358cfcabfc29a9280b\",\n          \"target\": \"814b691d93d1435f85a00aa51064d7b1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var flag = vaVars.customVerificationEnabled == 'true';\\n    return flag;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"3c5d865d867b4813a2ee14c7f8aa2674\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"814b691d93d1435f85a00aa51064d7b1\",\n          \"target\": \"17a7a8a0b2f944b896ca55dabbb99cff\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f34ff4bb0f3d41af8a32412bb9c5d1ea\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"17a7a8a0b2f944b896ca55dabbb99cff\",\n          \"target\": \"e12d86c0d70b4821adabcbf17fb75c65\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"b2edee387e19409ea8c550c59348fd73\": {\n      \"id\": \"b2edee387e19409ea8c550c59348fd73\",\n      \"name\": \"link_account\",\n      \"label\": \"Link Account\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"2f53f162a0894890b678e4c5c8123db8\",\n      \"isHidden\": false\n    },\n    \"17d96a21a938402281434829e5e39c48\": {\n      \"id\": \"17d96a21a938402281434829e5e39c48\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"challengeUrl\",\n      \"label\": \"challengeUrl\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"a1c34dac42a14aea995258de1cc04a5c\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"a1c34dac42a14aea995258de1cc04a5c\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"1848d8a57d8545f19b410c01f2e74c7c\": {\n      \"id\": \"1848d8a57d8545f19b410c01f2e74c7c\",\n      \"name\": \"does_user_have_an_account\",\n      \"label\": \"Does User Have An Account\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"f3cf90ccc3924eb0be1fcd34fba37efe\",\n      \"isHidden\": false\n    },\n    \"055722e94d824c4dbde64b83a772ebd7\": {\n      \"id\": \"055722e94d824c4dbde64b83a772ebd7\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"authType\",\n      \"label\": \"authType\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3ad18f1ed02d4dcfa5f4ce53c40d94ad\": {\n      \"id\": \"3ad18f1ed02d4dcfa5f4ce53c40d94ad\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return false;\\n})()\\n\"\n      },\n      \"name\": \"connectToLA\",\n      \"label\": \"connectToLA\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"47a82260f1594737851fb2eedab3aa06\": {\n      \"id\": \"47a82260f1594737851fb2eedab3aa06\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"providerId\",\n      \"label\": \"providerId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4964357ebc174cbe82b34de8cfcd42ff\": {\n      \"id\": \"4964357ebc174cbe82b34de8cfcd42ff\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"inboundId\",\n      \"label\": \"inboundId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"0b70822feb8647339a87f945bc774674\": {\n      \"id\": \"0b70822feb8647339a87f945bc774674\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"identifiedUser\",\n      \"label\": \"identifiedUser\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9b9ecfb30f9946f3bc4e2fe4884ada5f\": {\n      \"id\": \"9b9ecfb30f9946f3bc4e2fe4884ada5f\",\n      \"name\": \"mfa_userverified\",\n      \"label\": \"Mfa_userVerified\",\n      \"defaultValue\": \"userverified\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false\n    },\n    \"c5f7c28c06764747885733dbead1a3ff\": {\n      \"id\": \"c5f7c28c06764747885733dbead1a3ff\",\n      \"name\": \"vq_status\",\n      \"label\": \"Vq_status\",\n      \"defaultValue\": \"status\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true\n    },\n    \"aa035398982640a582619851a1797043\": {\n      \"id\": \"aa035398982640a582619851a1797043\",\n      \"name\": \"vq_error_code\",\n      \"label\": \"Vq_error_code\",\n      \"defaultValue\": \"error_code\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false\n    },\n    \"a75cef48fff54850b13f9e16b4592bc8\": {\n      \"id\": \"a75cef48fff54850b13f9e16b4592bc8\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"softpinRetryCount\",\n      \"label\": \"softpinRetryCount\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1fe40bca22654dc5a20bf40cf5b6c541\": {\n      \"id\": \"1fe40bca22654dc5a20bf40cf5b6c541\",\n      \"name\": \"does_user_want_to_identify_himself\",\n      \"label\": \"Does User Want To Identify Himself\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"43e38609b3c6460d9eec7fec70a2b86c\",\n      \"isHidden\": false\n    },\n    \"0c75b889caea46cfbd1850755a1ba7ec\": {\n      \"id\": \"0c75b889caea46cfbd1850755a1ba7ec\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return 'false';\\n})()\\n\"\n      },\n      \"name\": \"customVerificationEnabled\",\n      \"label\": \"customVerificationEnabled\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"58679cac8e0f4a7291919141504e02d0\": {\n      \"id\": \"58679cac8e0f4a7291919141504e02d0\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return false;\\n})()\\n\"\n      },\n      \"name\": \"isGoogleAuthentication\",\n      \"label\": \"isGoogleAuthentication\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d2c648cd18b54396bee10327eec1073c\": {\n      \"id\": \"d2c648cd18b54396bee10327eec1073c\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return false;\\n})()\\n\"\n      },\n      \"name\": \"isSMSChannel\",\n      \"label\": \"isSMSChannel\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"de05e3e0ebe84a64ac54a7fd5ce356b2\": {\n      \"id\": \"de05e3e0ebe84a64ac54a7fd5ce356b2\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return 'aborted';\\n})()\\n\"\n      },\n      \"name\": \"linkStatus\",\n      \"label\": \"linkStatus\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"31a03ad358254b72b00a3dec1efb7a06\": {\n      \"id\": \"31a03ad358254b72b00a3dec1efb7a06\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n   return false;\\n})()\\n\"\n      },\n      \"name\": \"softPinLockoutEnabled\",\n      \"label\": \"softPinLockoutEnabled\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"2d49113d242f4d828e9022a8010dac73\": {\n      \"id\": \"2d49113d242f4d828e9022a8010dac73\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"redirectToLA\",\n      \"label\": \"redirectToLA\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f70e5c7f73184dfea53388f929fd45f6\": {\n      \"id\": \"f70e5c7f73184dfea53388f929fd45f6\",\n      \"name\": \"sa_linkstatus\",\n      \"label\": \"Sa_linkstatus\",\n      \"defaultValue\": \"linkstatus\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"814b691d93d1435f85a00aa51064d7b1\",\n      \"isHidden\": false\n    },\n    \"8e5b0c8b30d44ad48d4aa10f35e43da7\": {\n      \"id\": \"8e5b0c8b30d44ad48d4aa10f35e43da7\",\n      \"name\": \"sa_connecttola\",\n      \"label\": \"Sa_connecttola\",\n      \"defaultValue\": \"connecttola\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"814b691d93d1435f85a00aa51064d7b1\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"d0fe78957344101066c7e9344ef6a7d1","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_d0fe78957344101066c7e9344ef6a7d1","sys_updated_by":"admin","sys_created_on":"2020-04-07 08:57:01","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"4e9a829a34e54cca9f0d7b57135c92fe\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"4e9a829a34e54cca9f0d7b57135c92fe\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"4e9a829a34e54cca9f0d7b57135c92fe\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"bcf37dda2ef34e0f85edc4eaf06dc29b\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       var result;\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\\n       }\\n    */\\n\\n    return '';\\n})()\\n\"},\"id\":\"e12d86c0d70b4821adabcbf17fb75c65\",\"name\":\"End\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Account linked or AMB Client\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   if (vaVars.challengeUrl === \\\"\\\")\\n    return true;\\n})()\\n\"},\"id\":\"2172b3d1bdd1421c82481ac5549d643d\",\"name\":\"Account linked or AMB Client\"},{\"type\":\"Branch\",\"label\":\"Guest User\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    if (vaInputs.challengeUrl != \\\"\\\")\\n         return true;\\n    \\n\\n})()\\n\"},\"id\":\"323a4ac029ae45ec85efd9f8ad6537fe\",\"name\":\"Guest User\"}],\"id\":\"1d7f42200a2c46b5859004249f54bc73\",\"goal_id\":\"primary\"},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"2f53f162a0894890b678e4c5c8123db8\",\"name\":\"Link Account\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return true;\\n})()\\n\"},\"variable_id\":\"b2edee387e19409ea8c550c59348fd73\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var linkAccountProp = gs.getProperty('com.glide.cs.link_account_msg');\\n   var linkAccountMessage =  gs.getMessageLang(linkAccountProp, vaContext.getRequesterLang());\\n   return linkAccountMessage;\\n})()\\n\"},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];    \\n        options.push({ 'value': vaVars.challengeUrl, 'label': gs.getMessageLang('Link to ServiceNow', vaContext.getRequesterLang())});//vaSystem.getAdapterMessage(\\\"link_account_label\\\", true) });\\n        options.push({ 'value': 'continue_as_guest', 'label': gs.getMessageLang(\\\"Continue as Guest\\\", vaContext.getRequesterLang()) });\\n        if(vaContext.deviceType != 'adapter') {\\n            //options.push({ 'value': vaSystem.getAdapterMessage(\\\"help_required_keyword\\\", false), 'label': gs.getMessageLang(\\\"Check out Tips\\\", vaContext.getRequesterLang()) });\\n            options.push({ 'value': 'help', 'label': gs.getMessageLang(\\\"Check out Tips\\\", vaContext.getRequesterLang()) });\\n        }\\n        \\n    return options;    \\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return 'Failed';\\n})()\\n\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];    \\n        options.push({ 'value': vaVars.challengeUrl, 'label': gs.getMessageLang('Link to ServiceNow', vaContext.getRequesterLang())});//vaSystem.getAdapterMessage(\\\"link_account_label\\\", true) });\\n        options.push({ 'value': 'continue_as_guest', 'label': gs.getMessageLang(\\\"Continue as Guest\\\", vaContext.getRequesterLang()) });\\n        if(vaContext.deviceType != 'adapter') {\\n            //options.push({ 'value': vaSystem.getAdapterMessage(\\\"help_required_keyword\\\", false), 'label': gs.getMessageLang(\\\"Check out Tips\\\", vaContext.getRequesterLang()) });\\n            options.push({ 'value': 'help', 'label': gs.getMessageLang(\\\"Check out Tips\\\", vaContext.getRequesterLang()) });\\n        }\\n        \\n    return options;    \\n})()\\n\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var x = new sn_cs_adapter.VaLinkAccountUtil();\\n    vaVars.challengeUrl = x.getChallengeURL(vaContext.deviceId, vaContext.deviceType, vaContext.providerAppId, vaContext.providerUserId, vaContext.providerUserName, vaSystem.getConversationId());\\n    if(vaVars.challengeUrl && vaVars.challengeUrl.trim().length > 0){\\n        vaVars.challengeUrl = \\\"ext:\\\" + vaVars.challengeUrl; \\n    }\\n})()\\n\",\"id\":\"71559e800290496facf94dc45c321daa\",\"name\":\"getChallengeUrl\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return true;\\n})()\\n\"}},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Link\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   var applies = vaVars.authType == \\\"basic\\\" || vaVars.authType == '';\\n       return applies;\\n})()\\n\"},\"id\":\"1e7747603e9f471283169c90eed26663\",\"name\":\"Link\"},{\"type\":\"Branch\",\"label\":\"MFA\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var applies = vaVars.authType == \\\"QnA\\\" || vaVars.authType == \\\"QnA_and_mfa\\\";\\n    return applies;\\n})()\\n\"},\"id\":\"6368e7f0fd154169aab14f355e9405e3\",\"name\":\"MFA\"}],\"id\":\"4b82d00977394bd8bed5c10fa5efeee8\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"variable_id\":\"1848d8a57d8545f19b410c01f2e74c7c\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var defaultMsg = \\\"To better serve you, we can authenticate your identity if you have an existing account. Do you know your Soft PIN?\\\"\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(\\\"ask_to_link_account_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"f3cf90ccc3924eb0be1fcd34fba37efe\",\"name\":\"Does user have an account\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n    vaVars.providerId = providerApp.providerId;\\n    vaVars.inboundId = providerApp.inboundId;\\n    \\n    var cafScriptObject = new sn_cs.CustomAdapterScriptObject();\\n    var accountLinkType = cafScriptObject.getAccountLinkType(vaContext.providerAppId);\\n    vaVars.authType = accountLinkType;\\n\\n    vaVars.identifiedUser = vaContext.identifiedUser;\\n\\n    vaVars.redirectToLA = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\n                                    'redirect_to_live_agent_on_softpin_failure', vaContext.providerAppId) == 'true' ? true : false;\\n\\n    vaVars.softPinLockoutEnabled = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\n                                    'softpin_lockout_enabled', vaContext.providerAppId) == 'true' ? true : false;\\n    // There is a possibility that account linking flow might be aborted by the user\\n    // For example, when presented with a question if they want to enter soft PIN, they may say no. \\n    // This output variable holds that information, so that the topic/topic block that calls this topic block\\n    // can make informed decisions\\n    vaVars.linkStatus = 'aborted';\\n})()\\n\",\"id\":\"b7f5788b078c42629bf9d2a294ae020d\",\"name\":\"set Auth Type\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Should Continue as Guest\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"does_user_have_an_account=true\"},\"id\":\"21444dd80a614d88995ca57d6a481c0a\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"does_user_have_an_account=\"},\"id\":\"1ccf81c06fe64be7b558a572bdf5c94e\",\"name\":\"No\"}],\"id\":\"a9210c057bd444fba27f4dbe690bd631\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    return;\\n})()\\n\",\"id\":\"d50ebfde9cdf4a21aebd7d36117a71ae\",\"name\":\"ContinueAsGuestAction\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"User Identified\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaVars.identifiedUser);\\n})()\\n\"},\"id\":\"c39a5281eee44726ab27fcfd9ba6e0d8\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !gs.nil(vaVars.identifiedUser);\\n})()\\n\"},\"id\":\"4789caa11ed24526adbf54de0765a67c\",\"name\":\"Yes\"}],\"id\":\"79f59fb518b94f25bda4b2ce158b6729\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var message = sn_cs.VASystemObject.getBotMessage(\\\"account_link_greeting_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    return gs.getMessageLang(message, vaContext.getRequesterLang());\\n})()\\n\"}],\"id\":\"40e6967d11224724831071bce9599eed\",\"name\":\"Link Account Greeting Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var msg = sn_cs.VASystemObject.getBotMessage(\\\"account_link_greeting_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    return !gs.nil(msg)\\n})()\\n\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var defaultMsg = \\\"We dont recognize your phone number. That's okay. You can continue as a guest.\\\"\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(\\\"user_not_recognized_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n})()\\n\"}],\"id\":\"8714cde4b6eb4aee96b6efedcb0519ec\",\"name\":\"User not identified\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var value = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"verification_custom_user_identification\\\", vaContext.providerAppId);\\n    vaVars.customVerificationEnabled = value;\\n})()\\n\",\"id\":\"6225eef7cb3543ddb3990f966d79efa3\",\"name\":\"Check Additional identification property\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Custom Identification Enabled\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var flag = vaVars.customVerificationEnabled != \\\"true\\\";\\n    return flag;\\n})()\\n\"},\"id\":\"1f965c7661754d228d0350d639d7b880\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var flag = vaVars.customVerificationEnabled == \\\"true\\\";\\n    return flag;\\n})()\\n\"},\"id\":\"bf1f7125d1314234b0aba1914fb576ef\",\"name\":\"Yes\"}],\"id\":\"a6085b918db949f4b1d0967c62b625e9\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"variable_id\":\"1fe40bca22654dc5a20bf40cf5b6c541\",\"message\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var defaultMsg = \\\"To better serve you, we can authenticate your identity if you have an existing account. Do you know your Soft PIN?\\\"\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(\\\"ask_to_link_account_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n})()\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"43e38609b3c6460d9eec7fec70a2b86c\",\"name\":\"Does User want to identify himself\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Should Continue as identified user\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"does_user_want_to_identify_himself=\"},\"id\":\"62cea6530bf84c08aa028b4b0ca50bad\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"does_user_want_to_identify_himself=true\"},\"id\":\"98207cfff41c476fb552304adb551967\",\"name\":\"Yes\"}],\"id\":\"f365b3389c1b4701aede2f776f9c223a\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var value = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"verification_custom_user_topic\\\", vaContext.providerAppId);\\n    if(!value)\\n       gs.debug(\\\"Custom identification topic is not configured\\\");\\n    vaSystem.switchTopicById(value);\\n})()\\n\",\"id\":\"1dd754f377984c61be0feac516cc2cb2\",\"name\":\"Execute Custom Identification Topic\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.identifiedUser = vaVars.global_linkaccount_verification_userid;\\n})()\\n\",\"id\":\"5410c4f0a1e145a08f7038fe14f03f9a\",\"name\":\"Set User Identifier\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"SoftPIN Lockout Enabled\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.softPinLockoutEnabled == false;\\n})()\\n\"},\"id\":\"cdbed5bf786b45c2bdb1fd566545d51f\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.softPinLockoutEnabled == true;\\n})()\\n\"},\"id\":\"93ef7693cfee4072abb9f64f59e6d267\",\"name\":\"Yes\"}],\"id\":\"2a8ab05760574e07b03278769568ddba\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"name\":\"Is User Locked Out\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.userLockedOutOnInvalidSoftPinAttempts == true;\\n})()\\n\"},\"id\":\"9761f4e6c8c04d2e90e7a311941036e0\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.userLockedOutOnInvalidSoftPinAttempts == false;\\n})()\\n\"},\"id\":\"8fa1876c1e16472d86474253b50b83df\",\"name\":\"No\"}],\"id\":\"5d428eac2b1e4f7e89c4b617a9c778bb\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n\\n    var providerAppId = vaContext.providerAppId;\\n    var maxAttempts = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy('softpin_max_retry_attempts', providerAppId);\\n    var invalidRetryInterval = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy('softpin_max_invalid_attempts_interval_hrs', providerAppId);\\n\\n    vaVars.userLockedOutOnInvalidSoftPinAttempts = CustomAdapterSoftPinHelper.isUserLockedOutOnMaxAttempts(\\n                                        providerAppId, vaContext.providerUserId, maxAttempts, invalidRetryInterval,vaVars.identifiedUser);\\n})()\\n\",\"id\":\"d3e0972f2f7b421e9368373667d7c879\",\"name\":\"Get User Lockout Status\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var defaultMessage = 'Your account has been locked due to invalid Soft PIN entries. Please try again later.';\\n    var customMessage = sn_cs.VASystemObject.getBotMessage('softpin_lockout_message',  vaVars.inboundId, vaVars.providerId);\\n\\n    var promptMessage = customMessage || defaultMessage;\\n\\n    return gs.getMessageLang(promptMessage, vaContext.getRequesterLang());\\n})()\\n\"}],\"id\":\"9303aaf2df364c27b7039dc38ae3771a\",\"name\":\"Show SoftPIN Lockout Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.customVerificationEnabled != 'true';\\n})()\\n\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.linkingAborted = true;\\n})()\\n\",\"id\":\"bfc60f9beba14d3aaa959cac8fe698a3\",\"name\":\"Set Linking Aborted Output Flag\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"Is User Identified?\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.nil(vaVars.identifiedUser);\\n})()\\n\"},\"id\":\"44b2a21216f14c40b43517048ea20217\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes & Soft PIN Enabled\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !gs.nil(vaVars.identifiedUser) && (vaVars.softPinLockoutEnabled == true);\\n})()\\n\"},\"id\":\"84d16520a1b04b348254c9fd4b8eecca\",\"name\":\"Yes & Soft PIN Enabled\"}],\"id\":\"a629f51d29d142e3baf84be9199efe51\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"name\":\"Is Custom Identification Enabled\",\"branches\":[{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var flag = vaVars.customVerificationEnabled != 'true';\\n    return flag;\\n})()\\n\"},\"id\":\"13cc866ce1a347a6b158076d34d48536\",\"name\":\"No\"},{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var flag = vaVars.customVerificationEnabled == 'true';\\n    return flag;\\n})()\\n\"},\"id\":\"0e46abf6ecc14709aa78fd7d767b5580\",\"name\":\"Yes\"}],\"id\":\"65a5435d6c2548358cfcabfc29a9280b\",\"goal_id\":\"primary\"},{\"type\":\"LibraryCall\",\"library_topic_name\":\"SoftPin_authorisation\",\"library_topic_id\":\"2578d02eebab1110da1861c59c5228e1\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"softpinretrycount\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.softpinRetryCount}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"identifieduser\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.identifiedUser}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"softpinlockoutenabled\",\"value\":{\"type\":\"String\",\"mode\":\"data_pill\",\"value\":\"{{vaVars.softPinLockoutEnabled}}\"},\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"inboundid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.inboundId}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"providerid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.providerId}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"authtype\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.authType}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"redirecttola\",\"value\":{\"type\":\"String\",\"mode\":\"data_pill\",\"value\":\"{{vaVars.redirectToLA}}\"},\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"linkstatus\",\"main_topic_mapped_variable_name\":\"sa_linkstatus\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"connecttola\",\"main_topic_mapped_variable_name\":\"sa_connecttola\"}],\"id\":\"814b691d93d1435f85a00aa51064d7b1\",\"name\":\"SoftPin authorisation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.connectToLA = vaInputs.sa_connecttola.getValue();\\n    vaVars.linkStatus = vaInputs.sa_linkstatus.getValue();\\n})()\\n\",\"id\":\"17a7a8a0b2f944b896ca55dabbb99cff\",\"name\":\"set softPin authorisation  response\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"a629f51d29d142e3baf84be9199efe51\",\"target_node_id\":\"814b691d93d1435f85a00aa51064d7b1\",\"branch_id\":\"44b2a21216f14c40b43517048ea20217\",\"id\":\"55877490cd6e488fba4eed6100026530\",\"name\":\"44b2a21216f14c40b43517048ea20217\"},{\"type\":\"Edge\",\"source_node_id\":\"f365b3389c1b4701aede2f776f9c223a\",\"target_node_id\":\"d50ebfde9cdf4a21aebd7d36117a71ae\",\"branch_id\":\"62cea6530bf84c08aa028b4b0ca50bad\",\"id\":\"40df5df4dce742868a20c1d199536cb2\",\"name\":\"62cea6530bf84c08aa028b4b0ca50bad\"},{\"type\":\"Edge\",\"source_node_id\":\"f3cf90ccc3924eb0be1fcd34fba37efe\",\"target_node_id\":\"a9210c057bd444fba27f4dbe690bd631\",\"id\":\"793a14d9d104493199ac8f17fe5d5706\"},{\"type\":\"Edge\",\"source_node_id\":\"bcf37dda2ef34e0f85edc4eaf06dc29b\",\"target_node_id\":\"b7f5788b078c42629bf9d2a294ae020d\",\"id\":\"ac09c3b1dcbe48e7b34d85a97d02a65b\"},{\"type\":\"Edge\",\"source_node_id\":\"4b82d00977394bd8bed5c10fa5efeee8\",\"target_node_id\":\"71559e800290496facf94dc45c321daa\",\"branch_id\":\"1e7747603e9f471283169c90eed26663\",\"id\":\"becd0766aa4b432d82a444e36fc81543\",\"name\":\"1e7747603e9f471283169c90eed26663\"},{\"type\":\"Edge\",\"source_node_id\":\"71559e800290496facf94dc45c321daa\",\"target_node_id\":\"1d7f42200a2c46b5859004249f54bc73\",\"id\":\"3b1d130be3d541e8b2fb1b9b2813eb14\"},{\"type\":\"Edge\",\"source_node_id\":\"2f53f162a0894890b678e4c5c8123db8\",\"target_node_id\":\"e12d86c0d70b4821adabcbf17fb75c65\",\"id\":\"cd9470c660c540359b129b987b4140c1\"},{\"type\":\"Edge\",\"source_node_id\":\"1d7f42200a2c46b5859004249f54bc73\",\"target_node_id\":\"e12d86c0d70b4821adabcbf17fb75c65\",\"branch_id\":\"2172b3d1bdd1421c82481ac5549d643d\",\"id\":\"a800746be38c4607b3530965ab759480\",\"name\":\"2172b3d1bdd1421c82481ac5549d643d\"},{\"type\":\"Edge\",\"source_node_id\":\"1d7f42200a2c46b5859004249f54bc73\",\"target_node_id\":\"2f53f162a0894890b678e4c5c8123db8\",\"branch_id\":\"323a4ac029ae45ec85efd9f8ad6537fe\",\"id\":\"289a318346ff420e817f7bf3943c2bba\",\"name\":\"323a4ac029ae45ec85efd9f8ad6537fe\"},{\"type\":\"Edge\",\"source_node_id\":\"d50ebfde9cdf4a21aebd7d36117a71ae\",\"target_node_id\":\"e12d86c0d70b4821adabcbf17fb75c65\",\"id\":\"4614ee19e6c142be845e3744f019ad7d\"},{\"type\":\"Edge\",\"source_node_id\":\"4b82d00977394bd8bed5c10fa5efeee8\",\"target_node_id\":\"79f59fb518b94f25bda4b2ce158b6729\",\"branch_id\":\"6368e7f0fd154169aab14f355e9405e3\",\"id\":\"d25e9e011f1644a681f791880d0baf3c\",\"name\":\"6368e7f0fd154169aab14f355e9405e3\"},{\"type\":\"Edge\",\"source_node_id\":\"a9210c057bd444fba27f4dbe690bd631\",\"target_node_id\":\"814b691d93d1435f85a00aa51064d7b1\",\"branch_id\":\"21444dd80a614d88995ca57d6a481c0a\",\"id\":\"914494e032744768b40c923db12bf031\",\"name\":\"21444dd80a614d88995ca57d6a481c0a\"},{\"type\":\"Edge\",\"source_node_id\":\"b7f5788b078c42629bf9d2a294ae020d\",\"target_node_id\":\"40e6967d11224724831071bce9599eed\",\"id\":\"721796ce74314815831668542305c180\"},{\"type\":\"Edge\",\"source_node_id\":\"40e6967d11224724831071bce9599eed\",\"target_node_id\":\"4b82d00977394bd8bed5c10fa5efeee8\",\"id\":\"dd30c04812cc4a7a8a5cfc5c1d2767fd\"},{\"type\":\"Edge\",\"source_node_id\":\"8714cde4b6eb4aee96b6efedcb0519ec\",\"target_node_id\":\"d50ebfde9cdf4a21aebd7d36117a71ae\",\"id\":\"009f93c541af46018d30ecd250a6dd8b\"},{\"type\":\"Edge\",\"source_node_id\":\"79f59fb518b94f25bda4b2ce158b6729\",\"target_node_id\":\"6225eef7cb3543ddb3990f966d79efa3\",\"branch_id\":\"c39a5281eee44726ab27fcfd9ba6e0d8\",\"id\":\"c6c53c3cf21246b6bfa3b4769df8a871\",\"name\":\"c39a5281eee44726ab27fcfd9ba6e0d8\"},{\"type\":\"Edge\",\"source_node_id\":\"6225eef7cb3543ddb3990f966d79efa3\",\"target_node_id\":\"a6085b918db949f4b1d0967c62b625e9\",\"id\":\"a7d538ae846945b29a72806e28bc97c8\"},{\"type\":\"Edge\",\"source_node_id\":\"a6085b918db949f4b1d0967c62b625e9\",\"target_node_id\":\"8714cde4b6eb4aee96b6efedcb0519ec\",\"branch_id\":\"1f965c7661754d228d0350d639d7b880\",\"id\":\"194ba823904f4bdb8703e59a13b770f7\",\"name\":\"1f965c7661754d228d0350d639d7b880\"},{\"type\":\"Edge\",\"source_node_id\":\"a6085b918db949f4b1d0967c62b625e9\",\"target_node_id\":\"43e38609b3c6460d9eec7fec70a2b86c\",\"branch_id\":\"bf1f7125d1314234b0aba1914fb576ef\",\"id\":\"20df9e140bcf4e259f286e7cc35712c9\",\"name\":\"bf1f7125d1314234b0aba1914fb576ef\"},{\"type\":\"Edge\",\"source_node_id\":\"43e38609b3c6460d9eec7fec70a2b86c\",\"target_node_id\":\"f365b3389c1b4701aede2f776f9c223a\",\"id\":\"2fcdf4eea69849df8ce7f1a57f282ca9\"},{\"type\":\"Edge\",\"source_node_id\":\"f365b3389c1b4701aede2f776f9c223a\",\"target_node_id\":\"1dd754f377984c61be0feac516cc2cb2\",\"branch_id\":\"98207cfff41c476fb552304adb551967\",\"id\":\"08d92b97f5824d8da5ad58e58af2f832\",\"name\":\"98207cfff41c476fb552304adb551967\"},{\"type\":\"Edge\",\"source_node_id\":\"1dd754f377984c61be0feac516cc2cb2\",\"target_node_id\":\"5410c4f0a1e145a08f7038fe14f03f9a\",\"id\":\"8f46caa7d5414da4966cf920501b20e1\"},{\"type\":\"Edge\",\"source_node_id\":\"79f59fb518b94f25bda4b2ce158b6729\",\"target_node_id\":\"2a8ab05760574e07b03278769568ddba\",\"branch_id\":\"4789caa11ed24526adbf54de0765a67c\",\"id\":\"a86ecf127a5e4f6baf45651ba40e19ed\",\"name\":\"4789caa11ed24526adbf54de0765a67c\"},{\"type\":\"Edge\",\"source_node_id\":\"2a8ab05760574e07b03278769568ddba\",\"target_node_id\":\"f3cf90ccc3924eb0be1fcd34fba37efe\",\"branch_id\":\"cdbed5bf786b45c2bdb1fd566545d51f\",\"id\":\"a5bdd1b161764b1a822da00751e8a87f\",\"name\":\"cdbed5bf786b45c2bdb1fd566545d51f\"},{\"type\":\"Edge\",\"source_node_id\":\"2a8ab05760574e07b03278769568ddba\",\"target_node_id\":\"d3e0972f2f7b421e9368373667d7c879\",\"branch_id\":\"93ef7693cfee4072abb9f64f59e6d267\",\"id\":\"b179bf11cba94b169e6d6dffccfdbcfd\",\"name\":\"93ef7693cfee4072abb9f64f59e6d267\"},{\"type\":\"Edge\",\"source_node_id\":\"d3e0972f2f7b421e9368373667d7c879\",\"target_node_id\":\"5d428eac2b1e4f7e89c4b617a9c778bb\",\"id\":\"9122ff0d2e324709ab9e81bc2c9d57b6\"},{\"type\":\"Edge\",\"source_node_id\":\"5d428eac2b1e4f7e89c4b617a9c778bb\",\"target_node_id\":\"9303aaf2df364c27b7039dc38ae3771a\",\"branch_id\":\"9761f4e6c8c04d2e90e7a311941036e0\",\"id\":\"1ca6bd20d8e34ba48b74ca3bbc751c33\",\"name\":\"9761f4e6c8c04d2e90e7a311941036e0\"},{\"type\":\"Edge\",\"source_node_id\":\"9303aaf2df364c27b7039dc38ae3771a\",\"target_node_id\":\"d50ebfde9cdf4a21aebd7d36117a71ae\",\"id\":\"5c313325403a4750ae8f98fc28872d36\"},{\"type\":\"Edge\",\"source_node_id\":\"a9210c057bd444fba27f4dbe690bd631\",\"target_node_id\":\"bfc60f9beba14d3aaa959cac8fe698a3\",\"branch_id\":\"1ccf81c06fe64be7b558a572bdf5c94e\",\"id\":\"583474175972422e95d208b51b13958c\",\"name\":\"1ccf81c06fe64be7b558a572bdf5c94e\"},{\"type\":\"Edge\",\"source_node_id\":\"bfc60f9beba14d3aaa959cac8fe698a3\",\"target_node_id\":\"d50ebfde9cdf4a21aebd7d36117a71ae\",\"id\":\"3762cb5c27694fbe90aef2a7f4aa56b5\"},{\"type\":\"Edge\",\"source_node_id\":\"5410c4f0a1e145a08f7038fe14f03f9a\",\"target_node_id\":\"a629f51d29d142e3baf84be9199efe51\",\"id\":\"3ab0a765b8f4459b9e02ce202e1b354c\"},{\"type\":\"Edge\",\"source_node_id\":\"a629f51d29d142e3baf84be9199efe51\",\"target_node_id\":\"d3e0972f2f7b421e9368373667d7c879\",\"branch_id\":\"84d16520a1b04b348254c9fd4b8eecca\",\"id\":\"da79efc2a9a4465591119d98233ea856\",\"name\":\"84d16520a1b04b348254c9fd4b8eecca\"},{\"type\":\"Edge\",\"source_node_id\":\"5d428eac2b1e4f7e89c4b617a9c778bb\",\"target_node_id\":\"65a5435d6c2548358cfcabfc29a9280b\",\"branch_id\":\"8fa1876c1e16472d86474253b50b83df\",\"id\":\"bffc5577f97044ffb3229f036068ce81\",\"name\":\"8fa1876c1e16472d86474253b50b83df\"},{\"type\":\"Edge\",\"source_node_id\":\"65a5435d6c2548358cfcabfc29a9280b\",\"target_node_id\":\"f3cf90ccc3924eb0be1fcd34fba37efe\",\"branch_id\":\"13cc866ce1a347a6b158076d34d48536\",\"id\":\"18d683be013b467f94e81e6bf6018976\",\"name\":\"13cc866ce1a347a6b158076d34d48536\"},{\"type\":\"Edge\",\"source_node_id\":\"65a5435d6c2548358cfcabfc29a9280b\",\"target_node_id\":\"814b691d93d1435f85a00aa51064d7b1\",\"branch_id\":\"0e46abf6ecc14709aa78fd7d767b5580\",\"id\":\"6e0a223fd7d048cbad87dde044341b95\",\"name\":\"0e46abf6ecc14709aa78fd7d767b5580\"},{\"type\":\"Edge\",\"source_node_id\":\"814b691d93d1435f85a00aa51064d7b1\",\"target_node_id\":\"17a7a8a0b2f944b896ca55dabbb99cff\",\"id\":\"3c5d865d867b4813a2ee14c7f8aa2674\"},{\"type\":\"Edge\",\"source_node_id\":\"17a7a8a0b2f944b896ca55dabbb99cff\",\"target_node_id\":\"e12d86c0d70b4821adabcbf17fb75c65\",\"id\":\"f34ff4bb0f3d41af8a32412bb9c5d1ea\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"challengeUrl\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"17d96a21a938402281434829e5e39c48\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"authType\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"055722e94d824c4dbde64b83a772ebd7\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"connectToLA\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return false;\\n})()\\n\"},\"list\":false,\"id\":\"3ad18f1ed02d4dcfa5f4ce53c40d94ad\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"providerId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"47a82260f1594737851fb2eedab3aa06\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"inboundId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"4964357ebc174cbe82b34de8cfcd42ff\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"identifiedUser\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"0b70822feb8647339a87f945bc774674\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"softpinRetryCount\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"0\"},\"list\":false,\"id\":\"a75cef48fff54850b13f9e16b4592bc8\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"customVerificationEnabled\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return 'false';\\n})()\\n\"},\"list\":false,\"id\":\"0c75b889caea46cfbd1850755a1ba7ec\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"isGoogleAuthentication\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return false;\\n})()\\n\"},\"list\":false,\"id\":\"58679cac8e0f4a7291919141504e02d0\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"isSMSChannel\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return false;\\n})()\\n\"},\"list\":false,\"id\":\"d2c648cd18b54396bee10327eec1073c\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"linkStatus\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return 'aborted';\\n})()\\n\"},\"list\":false,\"id\":\"de05e3e0ebe84a64ac54a7fd5ce356b2\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"softPinLockoutEnabled\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n   return false;\\n})()\\n\"},\"list\":false,\"id\":\"31a03ad358254b72b00a3dec1efb7a06\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"redirectToLA\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"2d49113d242f4d828e9022a8010dac73\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Choice\",\"choices\":[],\"id\":\"b2edee387e19409ea8c550c59348fd73\",\"name\":\"link_account\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"},{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"a1c34dac42a14aea995258de1cc04a5c\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"True/False\",\"id\":\"1848d8a57d8545f19b410c01f2e74c7c\",\"name\":\"does_user_have_an_account\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"mfa_userverified\",\"list\":false,\"id\":\"9b9ecfb30f9946f3bc4e2fe4884ada5f\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"vq_status\",\"list\":false,\"id\":\"c5f7c28c06764747885733dbead1a3ff\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"vq_error_code\",\"list\":false,\"id\":\"aa035398982640a582619851a1797043\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"id\":\"1fe40bca22654dc5a20bf40cf5b6c541\",\"name\":\"does_user_want_to_identify_himself\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"sa_linkstatus\",\"list\":false,\"id\":\"f70e5c7f73184dfea53388f929fd45f6\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"sa_connecttola\",\"list\":false,\"id\":\"8e5b0c8b30d44ad48d4aa10f35e43da7\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[],\"return-values-mapping\":[{\"name\":\"connecttola\",\"label\":\"connectToLA\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.connectToLA}}\"}},{\"name\":\"linkstatus\",\"label\":\"linkStatus\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.linkStatus}}\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"981a1f16530333006e61ddeeff7b12ed\",\"name\":\"_link_account_adapter_\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"modify_confirmation_enabled\":false,\"library\":true,\"csTopicId\":\"0902a7d2530333006e61ddeeff7b1250\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_link_account_adapter_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"981a1f16530333006e61ddeeff7b12ed","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/0902a7d2530333006e61ddeeff7b1250","value":"0902a7d2530333006e61ddeeff7b1250"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"152","sys_updated_on":"2023-02-16 00:15:24","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.44\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"4f9941eb27a543ba89f1b2811a30963a\": {\n          \"id\": \"4f9941eb27a543ba89f1b2811a30963a\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"2093830fb8b44f9b92edcf7495007cf3\",\n              \"name\": \"sysId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"f5bdb66603fc411e8e24a0bc41b88d99\",\n              \"name\": \"table\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"6191a1bbace8469eb9551447b0df2783\",\n              \"name\": \"view\",\n              \"referenced\": false,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"2093830fb8b44f9b92edcf7495007cf3\",\n            \"f5bdb66603fc411e8e24a0bc41b88d99\",\n            \"6191a1bbace8469eb9551447b0df2783\"\n          ]\n        },\n        \"0bc6267a202c4be496febedad51f7ad8\": {\n          \"id\": \"0bc6267a202c4be496febedad51f7ad8\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"a7b131c4c17f449caae0551e74fc2d18\": {\n          \"id\": \"a7b131c4c17f449caae0551e74fc2d18\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Form Link Component\",\n          \"url\": {\n            \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    \\n    var uibLink = gs.getProperty(\\\"glide.servlet.uri\\\")+ \\\"now/virtual-agent/content/forms/\\\"+ vaInputs.sysid + \\\"/\\\" + vaInputs.table + \\\"/\\\"+ vaSystem.getConversationId()+\\\"/\\\"+vaSystem.getConversationTaskId()+\\\"/\\\"+ vaSystem.getSessionIdOnConversation() + \\\"/form_choice_list\\\";\\n    \\n    if (vaInputs.view) { \\n        return uibLink + \\\"/params/view/\\\" + vaInputs.view; \\n    }\\n\\n    if(!gs.isLoggedIn()){\\n        if (vaInputs.view) { \\n            return uibLink + \\\"/guestSessionIdentifier/\\\" + vaSystem.getGuestSessionIdentifier();\\n        }\\n        return uibLink + \\\"/params/guestSessionIdentifier/\\\"+ vaSystem.getGuestSessionIdentifier();\\n    }\\n    return uibLink;\\n\\n    \\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"label\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Click on this link\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"header\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Submit your form here: \"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"single\",\n          \"introMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"listOfLinks\": \"\"\n        },\n        \"3e3646f4e2454b9889d8de7db60f0123\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"form_choice_list\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"What would you like to do? \"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"57e02103967c461887498674a5b72d75\",\n          \"id\": \"3e3646f4e2454b9889d8de7db60f0123\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = []; // add options here...\\n    options.push({'value': 'form_choice_1', 'label' : gs.getMessageLang(\\\"I don't want to fill out the form.\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({'value': 'form_choice_2', 'label' : gs.getMessageLang(\\\"I'm done.\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Can't find records. \"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = []; // add options here...\\n    options.push({'value': 'form_choice_1', 'label' : gs.getMessageLang(\\\"I don't want to fill out the form.\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({'value': 'form_choice_2', 'label' : gs.getMessageLang(\\\"I'm done.\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"c64282a73b714148b77467934d2acafe\": {\n          \"id\": \"c64282a73b714148b77467934d2acafe\",\n          \"name\": \"Accept UIB Page Responses\",\n          \"script\": \"(function execute() {\\n   vaSystem.acceptUIBMessages(true, \\\"form_choice_list\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"da9867eca4124d4c87049ae9004b8c64\": {\n          \"id\": \"da9867eca4124d4c87049ae9004b8c64\",\n          \"name\": \"Disable UIB Page Responses\",\n          \"script\": \"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"form_choice_list\\\");\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"afd26b30d27d4019b4bef8536dc140b2\": {\n          \"id\": \"afd26b30d27d4019b4bef8536dc140b2\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"d2672c9441094c7fa0186fa194b2c90a\": {\n          \"id\": \"d2672c9441094c7fa0186fa194b2c90a\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"I'm done. \",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"I understand you don't want to fill out the form at this time. Feel free to reach out to the Live Agent at any time.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"0c30918635eb401ba3381cfee6897c0b\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a10073e987f54c6ca3cab2541c8ccc9d\": {\n          \"id\": \"a10073e987f54c6ca3cab2541c8ccc9d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"1367c44343164fb3b1998123cb499d88\": {\n          \"id\": \"1367c44343164fb3b1998123cb499d88\",\n          \"stepType\": \"ScriptOutput\",\n          \"name\": \"Record Card\",\n          \"output_type\": \"single_part\",\n          \"script\": \"(function execute() {\\n    vaVars.table_name = vaInputs.table;    \\n\\n    var title = '';\\n    var subtitle = '';\\n    var fields = [];\\n\\n    var gr = new GlideRecord(vaVars.table_name);\\n    gr.addQuery('sys_id', vaVars.newRecordSysId);\\n    gr.query();\\n    title = gr.getClassDisplayValue();\\n    if (gr.next()) {\\n        subtitle = gr.getDisplayValue();\\n\\n        if (gr.isValidField('short_description') && gr.getValue('short_description')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gs.getMessageLang(gr.getElement('short_description').getLabel(), vaContext.getRequesterLang()),\\n                \\\"fieldValue\\\": gr.getDisplayValue('short_description').toString()\\n            });\\n        } else if (gr.isValidField('description') && gr.getValue('description')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gs.getMessageLang(gr.getElement('description').getLabel(), vaContext.getRequesterLang()),\\n                \\\"fieldValue\\\": gr.getDisplayValue('description').toString()\\n            });\\n        }\\n\\n        if (gr.isValidField('state') && gr.getValue('state')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gs.getMessageLang(gr.getElement('state').getLabel(), vaContext.getRequesterLang()),\\n                \\\"fieldValue\\\": gr.getDisplayValue('state').toString()\\n            });\\n        }\\n    }\\n\\n    var card_data = JSON.stringify({\\n        \\\"title\\\": title,\\n        \\\"subtitle\\\": subtitle,\\n        \\\"fields\\\": fields,\\n        \\\"table_name\\\": vaVars.table_name,\\n        \\\"sys_id\\\": vaVars.newRecordSysId\\n    });\\n    return vaSystem.renderCard(\\\"Card\\\", card_data);\\n})()\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b9d9f32264a94cac8fd6e220df10d9c4\": {\n          \"id\": \"b9d9f32264a94cac8fd6e220df10d9c4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Request complete message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Your request has been submitted. Here are the details:\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"e66eb783413a492d8f88fd5739c45b25\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"894892f2f4b9497f8328d1fdd62b02e1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a10073e987f54c6ca3cab2541c8ccc9d\",\n          \"target\": \"b9d9f32264a94cac8fd6e220df10d9c4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.newRecordSysId != null;\\n})()\\n\"\n          },\n          \"label\": \"Record created\"\n        },\n        {\n          \"id\": \"cd5fd44c74314468a97b38b1f58dc99a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1367c44343164fb3b1998123cb499d88\",\n          \"target\": \"0bc6267a202c4be496febedad51f7ad8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f843769004bb431282b6d0ed103a263d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a10073e987f54c6ca3cab2541c8ccc9d\",\n          \"target\": \"0bc6267a202c4be496febedad51f7ad8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.newRecordSysId == null;\\n})()\\n\"\n          },\n          \"label\": \"Record not created\"\n        },\n        {\n          \"id\": \"35c88e26579b499f94a6efb92b2b4833\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"da9867eca4124d4c87049ae9004b8c64\",\n          \"target\": \"afd26b30d27d4019b4bef8536dc140b2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"065c6a7974a24313afe672c985f0cdcc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4f9941eb27a543ba89f1b2811a30963a\",\n          \"target\": \"a7b131c4c17f449caae0551e74fc2d18\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"77ffbcac51904e3db5015aebeb140ecd\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a7b131c4c17f449caae0551e74fc2d18\",\n          \"target\": \"c64282a73b714148b77467934d2acafe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9901b31d68894f19a9afdc6fa58951e0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c64282a73b714148b77467934d2acafe\",\n          \"target\": \"3e3646f4e2454b9889d8de7db60f0123\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8d95ac18c4dc4339b39922ff2d497a24\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"3e3646f4e2454b9889d8de7db60f0123\",\n          \"target\": \"da9867eca4124d4c87049ae9004b8c64\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3718394980d2484da3826c7c6d3a88df\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"afd26b30d27d4019b4bef8536dc140b2\",\n          \"target\": \"d2672c9441094c7fa0186fa194b2c90a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n      return vaInputs.form_choice_list != \\\"form_choice_2\\\"; \\n\\n})()\\n\"\n          },\n          \"label\": \"I'm done. \"\n        },\n        {\n          \"id\": \"aa23171727d141f4bcec23fcc30a97f0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d2672c9441094c7fa0186fa194b2c90a\",\n          \"target\": \"0bc6267a202c4be496febedad51f7ad8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fadaadc0f2e1465294d3b7cc8227ee9f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"afd26b30d27d4019b4bef8536dc140b2\",\n          \"target\": \"a10073e987f54c6ca3cab2541c8ccc9d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n      return vaInputs.form_choice_list == \\\"form_choice_2\\\"; \\n\\n})()\\n\"\n          },\n          \"label\": \"Completed\"\n        },\n        {\n          \"id\": \"8afb01988e72401ebde84e221ff89944\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b9d9f32264a94cac8fd6e220df10d9c4\",\n          \"target\": \"1367c44343164fb3b1998123cb499d88\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"2093830fb8b44f9b92edcf7495007cf3\": {\n      \"id\": \"2093830fb8b44f9b92edcf7495007cf3\",\n      \"name\": \"sysid\",\n      \"label\": \"SysId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"4f9941eb27a543ba89f1b2811a30963a\",\n      \"isHidden\": false\n    },\n    \"f5bdb66603fc411e8e24a0bc41b88d99\": {\n      \"id\": \"f5bdb66603fc411e8e24a0bc41b88d99\",\n      \"name\": \"table\",\n      \"label\": \"Table\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"4f9941eb27a543ba89f1b2811a30963a\",\n      \"isHidden\": false\n    },\n    \"6191a1bbace8469eb9551447b0df2783\": {\n      \"id\": \"6191a1bbace8469eb9551447b0df2783\",\n      \"name\": \"view\",\n      \"label\": \"View\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"4f9941eb27a543ba89f1b2811a30963a\",\n      \"isHidden\": false\n    },\n    \"57e02103967c461887498674a5b72d75\": {\n      \"id\": \"57e02103967c461887498674a5b72d75\",\n      \"name\": \"form_choice_list\",\n      \"label\": \"Form_choice_list\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"3e3646f4e2454b9889d8de7db60f0123\",\n      \"isHidden\": false\n    },\n    \"485766ad31704ceeb35ed8f10cd94c98\": {\n      \"id\": \"485766ad31704ceeb35ed8f10cd94c98\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return vaVars.newRecordSysId;\\n})()\\n\"\n      },\n      \"name\": \"newRecordSysId\",\n      \"label\": \"newRecordSysId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"04051196da854f07a5b7af23d9d5f200\": {\n      \"id\": \"04051196da854f07a5b7af23d9d5f200\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    return '';\\n})()\\n\"\n      },\n      \"name\": \"table_name\",\n      \"label\": \"table_name\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"db4a188277320110768bc6438c5a9983","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_db4a188277320110768bc6438c5a9983","sys_updated_by":"admin","sys_created_on":"2022-04-12 19:38:29","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"ef650eee089242e4aa3521c32095c702\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"ef650eee089242e4aa3521c32095c702\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"ef650eee089242e4aa3521c32095c702\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"4f9941eb27a543ba89f1b2811a30963a\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"0bc6267a202c4be496febedad51f7ad8\",\"name\":\"End\"},{\"type\":\"LinkOutputPrompt\",\"type\":\"LinkOutputPrompt\",\"header\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Submit your form here:\\\", vaContext.getRequesterLang())\"},\"label\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Click on this link\\\", vaContext.getRequesterLang())\"},\"url\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    \\n    var uibLink = gs.getProperty(\\\"glide.servlet.uri\\\")+ \\\"now/virtual-agent/content/forms/\\\"+ vaInputs.sysid + \\\"/\\\" + vaInputs.table + \\\"/\\\"+ vaSystem.getConversationId()+\\\"/\\\"+vaSystem.getConversationTaskId()+\\\"/\\\"+ vaSystem.getSessionIdOnConversation() + \\\"/form_choice_list\\\";\\n    \\n    if (vaInputs.view) { \\n        return uibLink + \\\"/params/view/\\\" + vaInputs.view; \\n    }\\n\\n    if(!gs.isLoggedIn()){\\n        if (vaInputs.view) { \\n            return uibLink + \\\"/guestSessionIdentifier/\\\" + vaSystem.getGuestSessionIdentifier();\\n        }\\n        return uibLink + \\\"/params/guestSessionIdentifier/\\\"+ vaSystem.getGuestSessionIdentifier();\\n    }\\n    return uibLink;\\n\\n    \\n})()\\n\"},\"link_type\":\"single\",\"multi_link_script\":\"\",\"id\":\"a7b131c4c17f449caae0551e74fc2d18\",\"name\":\"Form Link Component\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ReferenceChoiceInputPrompt\",\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"3e3646f4e2454b9889d8de7db60f0123\",\"name\":\"form_choice_list\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"57e02103967c461887498674a5b72d75\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"What would you like to do?\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"reprompt_if_modified\":false,\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = []; // add options here...\\n    options.push({'value': 'form_choice_1', 'label' : gs.getMessageLang(\\\"I don't want to fill out the form.\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({'value': 'form_choice_2', 'label' : gs.getMessageLang(\\\"I'm done.\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:bcc89c0277320110768bc6438c5a9902:node:3e3646f4e2454b9889d8de7db60f0123:field:NoOptionsFoundMessage\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = []; // add options here...\\n    options.push({'value': 'form_choice_1', 'label' : gs.getMessageLang(\\\"I don't want to fill out the form.\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    options.push({'value': 'form_choice_2', 'label' : gs.getMessageLang(\\\"I'm done.\\\", vaContext.getRequesterLang()), 'render_style': 'data'});\\n    return options;\\n})()\\n\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n   vaSystem.acceptUIBMessages(true, \\\"form_choice_list\\\");\\n})()\\n\",\"id\":\"c64282a73b714148b77467934d2acafe\",\"name\":\"Accept UIB Page Responses\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.acceptUIBMessages(false, \\\"form_choice_list\\\");\\n})()\\n\",\"id\":\"da9867eca4124d4c87049ae9004b8c64\",\"name\":\"Disable UIB Page Responses\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"I'm done. \",\"id\":\"7ae1ea1f7de94b4aa4274814127a00b6\",\"name\":\"I'm done. \",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n      return vaInputs.form_choice_list != \\\"form_choice_2\\\"; \\n\\n})()\\n\"}},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Completed\",\"id\":\"cecef51dbce64aaa89b9edf5eac60a93\",\"name\":\"Completed\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n      return vaInputs.form_choice_list == \\\"form_choice_2\\\"; \\n\\n})()\\n\"}}],\"id\":\"afd26b30d27d4019b4bef8536dc140b2\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:bcc89c0277320110768bc6438c5a9902:node:d2672c9441094c7fa0186fa194b2c90a:field:0\\\", vaContext.getRequesterLang())\"}],\"id\":\"d2672c9441094c7fa0186fa194b2c90a\",\"name\":\"I'm done. \",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Record created\",\"id\":\"a6a46abbdf7241bf87653d4af8665073\",\"name\":\"Record created\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.newRecordSysId != null;\\n})()\\n\"}},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Record not created\",\"id\":\"85aadce576a640f9a25591f2d17cf0e1\",\"name\":\"Record not created\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaVars.newRecordSysId == null;\\n})()\\n\"}}],\"id\":\"a10073e987f54c6ca3cab2541c8ccc9d\",\"goal_id\":\"primary\"},{\"type\":\"ScriptOutputPrompt\",\"type\":\"ScriptOutputPrompt\",\"output_type\":\"single_part\",\"id\":\"1367c44343164fb3b1998123cb499d88\",\"name\":\"Record Card\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"(function execute() {\\n    vaVars.table_name = vaInputs.table;    \\n\\n    var title = '';\\n    var subtitle = '';\\n    var fields = [];\\n\\n    var gr = new GlideRecord(vaVars.table_name);\\n    gr.addQuery('sys_id', vaVars.newRecordSysId);\\n    gr.query();\\n    title = gr.getClassDisplayValue();\\n    if (gr.next()) {\\n        subtitle = gr.getDisplayValue();\\n\\n        if (gr.isValidField('short_description') && gr.getValue('short_description')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gs.getMessageLang(gr.getElement('short_description').getLabel(), vaContext.getRequesterLang()),\\n                \\\"fieldValue\\\": gr.getDisplayValue('short_description').toString()\\n            });\\n        } else if (gr.isValidField('description') && gr.getValue('description')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gs.getMessageLang(gr.getElement('description').getLabel(), vaContext.getRequesterLang()),\\n                \\\"fieldValue\\\": gr.getDisplayValue('description').toString()\\n            });\\n        }\\n\\n        if (gr.isValidField('state') && gr.getValue('state')) {\\n            fields.push({\\n                \\\"fieldLabel\\\": gs.getMessageLang(gr.getElement('state').getLabel(), vaContext.getRequesterLang()),\\n                \\\"fieldValue\\\": gr.getDisplayValue('state').toString()\\n            });\\n        }\\n    }\\n\\n    var card_data = JSON.stringify({\\n        \\\"title\\\": title,\\n        \\\"subtitle\\\": subtitle,\\n        \\\"fields\\\": fields,\\n        \\\"table_name\\\": vaVars.table_name,\\n        \\\"sys_id\\\": vaVars.newRecordSysId\\n    });\\n    return vaSystem.renderCard(\\\"Card\\\", card_data);\\n})()\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Your request has been submitted. Here are the details:\\\", vaContext.getRequesterLang())\"}],\"id\":\"b9d9f32264a94cac8fd6e220df10d9c4\",\"name\":\"Request complete message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"a10073e987f54c6ca3cab2541c8ccc9d\",\"target_node_id\":\"b9d9f32264a94cac8fd6e220df10d9c4\",\"branch_id\":\"a6a46abbdf7241bf87653d4af8665073\",\"id\":\"894892f2f4b9497f8328d1fdd62b02e1\",\"name\":\"a6a46abbdf7241bf87653d4af8665073\"},{\"type\":\"Edge\",\"source_node_id\":\"1367c44343164fb3b1998123cb499d88\",\"target_node_id\":\"0bc6267a202c4be496febedad51f7ad8\",\"id\":\"cd5fd44c74314468a97b38b1f58dc99a\"},{\"type\":\"Edge\",\"source_node_id\":\"a10073e987f54c6ca3cab2541c8ccc9d\",\"target_node_id\":\"0bc6267a202c4be496febedad51f7ad8\",\"branch_id\":\"85aadce576a640f9a25591f2d17cf0e1\",\"id\":\"f843769004bb431282b6d0ed103a263d\",\"name\":\"85aadce576a640f9a25591f2d17cf0e1\"},{\"type\":\"Edge\",\"source_node_id\":\"da9867eca4124d4c87049ae9004b8c64\",\"target_node_id\":\"afd26b30d27d4019b4bef8536dc140b2\",\"id\":\"35c88e26579b499f94a6efb92b2b4833\"},{\"type\":\"Edge\",\"source_node_id\":\"4f9941eb27a543ba89f1b2811a30963a\",\"target_node_id\":\"a7b131c4c17f449caae0551e74fc2d18\",\"id\":\"065c6a7974a24313afe672c985f0cdcc\"},{\"type\":\"Edge\",\"source_node_id\":\"a7b131c4c17f449caae0551e74fc2d18\",\"target_node_id\":\"c64282a73b714148b77467934d2acafe\",\"id\":\"77ffbcac51904e3db5015aebeb140ecd\"},{\"type\":\"Edge\",\"source_node_id\":\"c64282a73b714148b77467934d2acafe\",\"target_node_id\":\"3e3646f4e2454b9889d8de7db60f0123\",\"id\":\"9901b31d68894f19a9afdc6fa58951e0\"},{\"type\":\"Edge\",\"source_node_id\":\"3e3646f4e2454b9889d8de7db60f0123\",\"target_node_id\":\"da9867eca4124d4c87049ae9004b8c64\",\"id\":\"8d95ac18c4dc4339b39922ff2d497a24\"},{\"type\":\"Edge\",\"source_node_id\":\"afd26b30d27d4019b4bef8536dc140b2\",\"target_node_id\":\"d2672c9441094c7fa0186fa194b2c90a\",\"branch_id\":\"7ae1ea1f7de94b4aa4274814127a00b6\",\"id\":\"3718394980d2484da3826c7c6d3a88df\",\"name\":\"7ae1ea1f7de94b4aa4274814127a00b6\"},{\"type\":\"Edge\",\"source_node_id\":\"d2672c9441094c7fa0186fa194b2c90a\",\"target_node_id\":\"0bc6267a202c4be496febedad51f7ad8\",\"id\":\"aa23171727d141f4bcec23fcc30a97f0\"},{\"type\":\"Edge\",\"source_node_id\":\"afd26b30d27d4019b4bef8536dc140b2\",\"target_node_id\":\"a10073e987f54c6ca3cab2541c8ccc9d\",\"branch_id\":\"cecef51dbce64aaa89b9edf5eac60a93\",\"id\":\"fadaadc0f2e1465294d3b7cc8227ee9f\",\"name\":\"cecef51dbce64aaa89b9edf5eac60a93\"},{\"type\":\"Edge\",\"source_node_id\":\"b9d9f32264a94cac8fd6e220df10d9c4\",\"target_node_id\":\"1367c44343164fb3b1998123cb499d88\",\"id\":\"8afb01988e72401ebde84e221ff89944\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"newRecordSysId\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.newRecordSysId;\\n})()\\n\"},\"list\":false,\"id\":\"485766ad31704ceeb35ed8f10cd94c98\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"table_name\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    return '';\\n})()\\n\"},\"list\":false,\"id\":\"04051196da854f07a5b7af23d9d5f200\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"sysid\",\"list\":false,\"id\":\"2093830fb8b44f9b92edcf7495007cf3\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"table\",\"list\":false,\"id\":\"f5bdb66603fc411e8e24a0bc41b88d99\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"view\",\"list\":false,\"id\":\"6191a1bbace8469eb9551447b0df2783\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[],\"id\":\"57e02103967c461887498674a5b72d75\",\"name\":\"form_choice_list\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"sysid\",\"label\":\"sysId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"2093830fb8b44f9b92edcf7495007cf3\",\"type\":\"String\"},{\"name\":\"table\",\"label\":\"table\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"f5bdb66603fc411e8e24a0bc41b88d99\",\"type\":\"String\"},{\"name\":\"view\",\"label\":\"view\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"6191a1bbace8469eb9551447b0df2783\",\"type\":\"String\"}],\"return-values-mapping\":[]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"bcc89c0277320110768bc6438c5a9902\",\"name\":\"Form Content Popup Topic Block\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":true,\"csTopicId\":\"0b4a188277320110768bc6438c5a997d\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Form Content Popup Topic Block","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"bcc89c0277320110768bc6438c5a9902","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/0b4a188277320110768bc6438c5a997d","value":"0b4a188277320110768bc6438c5a997d"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"55","sys_updated_on":"2022-04-20 12:40:36","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.40\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"1adaad9e5bb04c48aaccaa11304f3cd7\": {\n          \"id\": \"1adaad9e5bb04c48aaccaa11304f3cd7\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"e0fab02ea0574435884e802516e0fa9c\",\n              \"name\": \"userId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"ac3fbbe707fb4d5ba55f773377d9704f\",\n              \"name\": \"verificationId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"4c69b59b32b146628d74759222a3b96c\",\n              \"name\": \"contextId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"e0fab02ea0574435884e802516e0fa9c\",\n            \"ac3fbbe707fb4d5ba55f773377d9704f\",\n            \"4c69b59b32b146628d74759222a3b96c\"\n          ]\n        },\n        \"9e23f6091ef4486bb56f1cff58156a99\": {\n          \"id\": \"9e23f6091ef4486bb56f1cff58156a99\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"status\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.status}}\",\n                        \"displayValue\": \"Script Variablesstatus\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=0ebb2b725f8e01100a9bedbf2f7313c5%5Ecalling_cs_topic_idIN83a6ec255f1201100a9bedbf2f731366\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"error_code\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.status_code}}\",\n                        \"displayValue\": \"Script Variablesstatus_code\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=0ebb2b725f8e01100a9bedbf2f7313c5%5Ecalling_cs_topic_idIN83a6ec255f1201100a9bedbf2f731366\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            }\n          ]\n        },\n        \"f6bb3e9f748b49088ef1e046fdc18c2e\": {\n          \"id\": \"f6bb3e9f748b49088ef1e046fdc18c2e\",\n          \"name\": \"Set SMS Verification Mode\",\n          \"script\": \"(function execute() {\\n    vaVars.sms_code_verification_mode  = \\n    new global.PwdNotificationHelper().getSMSCodeVerificationMode(vaInputs.userid.getValue());\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"\"\n          }\n        },\n        \"5efd81b075e34bdf958e00a59be43042\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"SMS Providers\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    var message =  gs.getMessageLang(\\\"Select your mobile service provider\\\", vaContext.getRequesterLang());\\n    var custom_message = '';\\n    if (!gs.nil(vaVars.inboundId))\\n        custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_select_provider_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n    message = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang());\\n        \\n    return message;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\nreturn vaVars.sms_code_verification_mode != undefined\\n    && vaVars.sms_code_verification_mode.toString() == 'mobile' \\n    && (new global.PasswordResetScopedUtil().isNotifyPluginEnabled() == false);\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"c920f4b082104c3aaec7d88470b4fb5d\",\n          \"id\": \"5efd81b075e34bdf958e00a59be43042\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    return new PasswordResetScopedUtil().getNotificationProviders();\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Providers not found\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    return new PasswordResetScopedUtil().getNotificationProviders();\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"2d3fd1b9047643b4a14ad7aa1df3e764\": {\n          \"id\": \"2d3fd1b9047643b4a14ad7aa1df3e764\",\n          \"name\": \"Send SMS Code\",\n          \"script\": \"(function execute() {\\n    var SYSPARM_SMS_VERIFICATION_MODE = 'sysparm_sms_verification_mode';\\n    var MODE_MOBILE = 'mobile';\\n\\n    if (vaVars.sms_code_verification_mode == undefined) {\\n        vaVars.status_code = 40001;\\n        return;\\n    }\\n    \\n    var providerId = '';\\n    if (MODE_MOBILE == vaVars.sms_code_verification_mode.toString() &&\\n        (new global.PasswordResetScopedUtil().isNotifyPluginEnabled() == false)) {\\n        providerId = vaInputs.sms_providers.toString();\\n    }\\n\\n    vaVars.device_code_status =\\n        new global.PasswordResetScopedUtil().sendSMSCodeToUser(vaInputs.contextid.getValue(), vaInputs.verificationid.getValue(), vaVars.sms_code_verification_mode.toString(), providerId, vaInputs.userid.getValue());\\n\\n    var userInputs = [];\\n    userInputs.push({\\n        key: SYSPARM_SMS_VERIFICATION_MODE,\\n        value: vaVars.sms_code_verification_mode.toString()\\n    });\\n\\n    vaVars.userInputs = JSON.stringify(userInputs);\\n\\n    var devices = new global.PwdNotificationHelper().getSubscribedMobileDevices(vaInputs.userid.getValue(), true);\\n\\n    if (devices.length > 0 && devices != null) {\\n        var devicesList = '';\\n        for(var i =0 ; i < devices.length ; i++) {\\n            devicesList = devicesList + '- ' + devices[i].device + '\\\\n';\\n        }\\n        vaVars.device_list = new global.PwdNotificationHelper().prepareMessageFromResponseCode(parseInt(vaVars.device_code_status), vaInputs.verificationid.getValue(), devicesList, vaVars.inboundId, vaVars.providerId);\\n    } else {\\n        var message =  gs.getMessageLang(\\\"Can't send verification code as you are not enrolled.\\\", vaContext.getRequesterLang());\\n        var custom_message = '';\\n        if (!gs.nil(vaVars.inboundId))\\n            custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_user_not_enrolled_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n        vaVars.device_list = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang());\\n        vaVars.status_code = 40001;\\n    }\\n})()\\n\\n\\n    \\n        \\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d6d8f1d54c8f4985b9cae5244b34a4a9\": {\n          \"id\": \"d6d8f1d54c8f4985b9cae5244b34a4a9\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Show Devices List\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return vaVars.device_list.toString();\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.status_code == 20000;\\n})()\\n\"\n          }\n        },\n        \"9f2a6a002a8f41b5a4f6e7cd9a81ef71\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"SMS Code Choice\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    var message =  gs.getMessageLang(\\\"What would you like to do?\\\", vaContext.getRequesterLang());\\n    var custom_message = '';\\n    if (!gs.nil(vaVars.inboundId))\\n        custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_select_code_choice_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n    message = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang());\\n        \\n    return message;\\n})()\\n\\n\\n\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run\\n       and be discoverable (or not).  For example:\\n\\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\\n       return applicability;\\n    */\\n    return vaVars.sms_code_verification_mode != undefined;\\n})()\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"63fa0487bf4d4d959d2d2fb014ef6dff\",\n          \"id\": \"9f2a6a002a8f41b5a4f6e7cd9a81ef71\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"e839ad90e55446959f962d061c77ea33\": {\n          \"id\": \"e839ad90e55446959f962d061c77ea33\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Check SMS Code Choice\"\n        },\n        \"46189bef2e1b4c788b856439fb0beb02\": {\n          \"id\": \"46189bef2e1b4c788b856439fb0beb02\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"Enter Verification Code\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    --vaVars.remaining_attempts;\\n    var message =  gs.getMessageLang(\\\"Enter the code you have received over SMS\\\", vaContext.getRequesterLang());\\n    var custom_message = '';\\n    if (!gs.nil(vaVars.inboundId))\\n        custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_enter_code_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n    message = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang());\\n        \\n    return message;\\n})()\\n\\n\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"2d28081a66b64453a6d3e9664bf2c4f8\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"6a500c6b88684ab289ab9065ef086918\": {\n          \"id\": \"6a500c6b88684ab289ab9065ef086918\",\n          \"name\": \"Verify SMS Code and Set Response\",\n          \"script\": \"(function execute() {\\n    var SYSPARM_ANSWER_SMS_CODE = 'sysparm_answer_sms_code';\\n    var userInputs = JSON.parse(vaVars.userInputs);\\n    userInputs.push({ key: SYSPARM_ANSWER_SMS_CODE, value: vaInputs.enter_verification_code.getValue() });\\n\\n    vaVars.userInputs = JSON.stringify(userInputs);\\n\\n    var passwordResetScopedUtil = new global.PasswordResetScopedUtil();\\n    var verification_status = passwordResetScopedUtil.verify(vaInputs.userid, '', vaInputs.verificationid, vaInputs.contextid, userInputs);\\n    vaVars.status_code = verification_status ? 20000 : 50000;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"95684608d1034ba09ac1ef606879cc38\": {\n          \"id\": \"95684608d1034ba09ac1ef606879cc38\",\n          \"name\": \"Validate Input\",\n          \"script\": \"(function execute() {\\n    var SMS_VERIFICATION_TYPE = '58a2f398eb6001006a668c505206fed3';\\n    var GLIDE_CS_PLUGIN_ID = 'com.glide.cs';\\n    vaVars.status_code = 20000;\\n\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId =vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n    \\n    var pluginManager = new GlidePluginManager();\\n    if (pluginManager.isActive(GLIDE_CS_PLUGIN_ID)) {\\n        try {\\n            var providerJsonString = sn_cs.VASystemObject.getProviderByProviderAppId(vaContext.providerAppId);\\n            if (!gs.nil(providerJsonString)) {\\n                var providerJson = JSON.parse(providerJsonString);\\n                vaVars.channel = providerJson.channelType;\\n            }\\n        } catch (error) {\\n            gs.warn('Plugin : [com.glide.cs] is active, but failed in sn_cs.VASystemObject.getProviderByProviderAppId');\\n        }\\n    }\\n\\n    //Check for valid sms verification\\n    var passwordResetScopedUtil = new PasswordResetScopedUtil();\\n    var verification = passwordResetScopedUtil.getVerificationById(verificationId);\\n    if (gs.nil(verificationId) ||\\n        !verification.exists() ||\\n        verification.getVerificationTypeId() != SMS_VERIFICATION_TYPE) {\\n        vaVars.status_code = 40003;\\n        return;\\n    }\\n\\n    //Check for valid user\\n    var user = GlideUser.getUserByID(vaInputs.userid.getValue());\\n    if (gs.nil(userId) ||\\n        !user.exists()) {\\n        vaVars.status_code = 40004; \\n        return;\\n    }\\n\\n    //Check for valid context_id\\n    if (gs.nil(contextId)) {\\n        vaVars.status_code = 40002;\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"150eaf73430647cc9ac6c70e21fe15c8\": {\n          \"id\": \"150eaf73430647cc9ac6c70e21fe15c8\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Input Validation Check\"\n        },\n        \"b54d9ca80e8042609695a15b2b81b0e9\": {\n          \"id\": \"b54d9ca80e8042609695a15b2b81b0e9\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Request Validation Check\"\n        },\n        \"bc47be43b2f54dc3baa1b5d6e0a7445a\": {\n          \"id\": \"bc47be43b2f54dc3baa1b5d6e0a7445a\",\n          \"name\": \"Initialise Output\",\n          \"script\": \"(function execute() {\\n    vaVars.status = vaVars.status_code == 20000 ? 'Success' : 'Error';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"51bded08eb3c43f480ae97c230165d7e\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Reconfirm\",\n          \"prompt\": {\n            \"value\": \"(function execute() {\\n    var message =  gs.getMessageLang(\\\"You have entered {0}\\\", vaContext.getRequesterLang(), [vaInputs.enter_verification_code.getValue()]);\\n    var custom_message = '';\\n    if (!gs.nil(vaVars.inboundId))\\n        custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_reconfirm_code_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n    message = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang(), [vaInputs.enter_verification_code.getValue()]);\\n        \\n    return message;\\n})()\\n\\n\",\n            \"mode\": \"script\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return (vaVars.remaining_attempts >= 0) && (vaVars.channel == vaVars.IVR_CHANNEL_ID);\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"41404e2e0065467c841211d211a79498\",\n          \"id\": \"51bded08eb3c43f480ae97c230165d7e\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"4a3f7b25e6d0480692b8de0636b06008\": {\n          \"id\": \"4a3f7b25e6d0480692b8de0636b06008\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Confirmation\"\n        },\n        \"b95ffa14459545708916693566a4a2f4\": {\n          \"id\": \"b95ffa14459545708916693566a4a2f4\",\n          \"name\": \"Set Provider Details\",\n          \"script\": \"(function execute() {\\n    var providerAppId = vaContext.providerAppId;\\n    if (!gs.nil(providerAppId)) {\\n        var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n        vaVars.providerId = providerApp.providerId;\\n        vaVars.inboundId = providerApp.inboundId;\\n    }\\n    \\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"14b85f2e7e4e44079084f6eeb06dd9e1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b54d9ca80e8042609695a15b2b81b0e9\",\n          \"target\": \"9f2a6a002a8f41b5a4f6e7cd9a81ef71\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.status_code == 20000;\\n})()\\n\"\n          },\n          \"label\": \"Valid\"\n        },\n        {\n          \"id\": \"66804b3452164452a8bb910ff6a7e09e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b95ffa14459545708916693566a4a2f4\",\n          \"target\": \"150eaf73430647cc9ac6c70e21fe15c8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b249927224b04cddadf50ef9ec55aee5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6a500c6b88684ab289ab9065ef086918\",\n          \"target\": \"bc47be43b2f54dc3baa1b5d6e0a7445a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"af64cad5afe8406cb8c79c29cf73856c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f6bb3e9f748b49088ef1e046fdc18c2e\",\n          \"target\": \"5efd81b075e34bdf958e00a59be43042\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"359bb5dc04574359a3e7491f05b8cb56\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5efd81b075e34bdf958e00a59be43042\",\n          \"target\": \"2d3fd1b9047643b4a14ad7aa1df3e764\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"61f83693c1e64a93b76987676adaf16f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2d3fd1b9047643b4a14ad7aa1df3e764\",\n          \"target\": \"d6d8f1d54c8f4985b9cae5244b34a4a9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"34bab9afd25546d0a807d3bc88c4a277\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9f2a6a002a8f41b5a4f6e7cd9a81ef71\",\n          \"target\": \"e839ad90e55446959f962d061c77ea33\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"d7b2c7a5bba5478ea9fee9ad40b167ee\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e839ad90e55446959f962d061c77ea33\",\n          \"target\": \"2d3fd1b9047643b4a14ad7aa1df3e764\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.sms_code_choice=2\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Resend SMS Code\"\n        },\n        {\n          \"id\": \"1fb0e411525a4497be3dee9128e55189\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"e839ad90e55446959f962d061c77ea33\",\n          \"target\": \"46189bef2e1b4c788b856439fb0beb02\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.sms_code_choice=1\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Enter SMS Code\"\n        },\n        {\n          \"id\": \"85972b355ad3436697ae4efbf5f5d95f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1adaad9e5bb04c48aaccaa11304f3cd7\",\n          \"target\": \"95684608d1034ba09ac1ef606879cc38\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"64870be9d3644fe08d0a9e3d7617d789\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"150eaf73430647cc9ac6c70e21fe15c8\",\n          \"target\": \"f6bb3e9f748b49088ef1e046fdc18c2e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.status_code == 20000;\\n})()\\n\"\n          },\n          \"label\": \"Valid Input\"\n        },\n        {\n          \"id\": \"2716271585f64f049fbb9050373eca29\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"150eaf73430647cc9ac6c70e21fe15c8\",\n          \"target\": \"bc47be43b2f54dc3baa1b5d6e0a7445a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.status_code != 20000;\\n})()\\n\"\n          },\n          \"label\": \"Invalid Input\"\n        },\n        {\n          \"id\": \"e83a413412954ea3a5d2bacbb97746cc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d6d8f1d54c8f4985b9cae5244b34a4a9\",\n          \"target\": \"b54d9ca80e8042609695a15b2b81b0e9\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dca3e88c870a46eb8850d927d843e617\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b54d9ca80e8042609695a15b2b81b0e9\",\n          \"target\": \"bc47be43b2f54dc3baa1b5d6e0a7445a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.status_code != 20000;\\n})()\\n\"\n          },\n          \"label\": \"Invalid\"\n        },\n        {\n          \"id\": \"df8043a432e94c09b2be00a6207048ce\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"bc47be43b2f54dc3baa1b5d6e0a7445a\",\n          \"target\": \"9e23f6091ef4486bb56f1cff58156a99\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"2d93411f2787477ebf8c16673077ab24\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"46189bef2e1b4c788b856439fb0beb02\",\n          \"target\": \"51bded08eb3c43f480ae97c230165d7e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6fb48c74620c4fadaf8161960bc9dc35\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"51bded08eb3c43f480ae97c230165d7e\",\n          \"target\": \"4a3f7b25e6d0480692b8de0636b06008\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a60ae24eb5b64681bab3085e0722efcf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4a3f7b25e6d0480692b8de0636b06008\",\n          \"target\": \"6a500c6b88684ab289ab9065ef086918\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return gs.nil(vaInputs.reconfirm) || (vaInputs.reconfirm == 1);\\n})()\\n\"\n          },\n          \"label\": \"Confirm\"\n        },\n        {\n          \"id\": \"06762f2540594b039b3fd41417d4fcc1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4a3f7b25e6d0480692b8de0636b06008\",\n          \"target\": \"46189bef2e1b4c788b856439fb0beb02\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.reconfirm=2\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Re-Enter\"\n        },\n        {\n          \"id\": \"ca0895b391dc4371ac8368f05f13587c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"95684608d1034ba09ac1ef606879cc38\",\n          \"target\": \"b95ffa14459545708916693566a4a2f4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"e0fab02ea0574435884e802516e0fa9c\": {\n      \"id\": \"e0fab02ea0574435884e802516e0fa9c\",\n      \"name\": \"userid\",\n      \"label\": \"UserId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      }\n    },\n    \"ac3fbbe707fb4d5ba55f773377d9704f\": {\n      \"id\": \"ac3fbbe707fb4d5ba55f773377d9704f\",\n      \"name\": \"verificationid\",\n      \"label\": \"VerificationId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      }\n    },\n    \"4c69b59b32b146628d74759222a3b96c\": {\n      \"id\": \"4c69b59b32b146628d74759222a3b96c\",\n      \"name\": \"contextid\",\n      \"label\": \"ContextId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      }\n    },\n    \"c920f4b082104c3aaec7d88470b4fb5d\": {\n      \"id\": \"c920f4b082104c3aaec7d88470b4fb5d\",\n      \"name\": \"sms_providers\",\n      \"label\": \"SMS Providers\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\"\n    },\n    \"63fa0487bf4d4d959d2d2fb014ef6dff\": {\n      \"id\": \"63fa0487bf4d4d959d2d2fb014ef6dff\",\n      \"name\": \"sms_code_choice\",\n      \"label\": \"SMS Code Choice\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Enter SMS code\",\n          \"value\": \"1\"\n        },\n        {\n          \"label\": \"Resend SMS code\",\n          \"value\": \"2\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\"\n    },\n    \"2d28081a66b64453a6d3e9664bf2c4f8\": {\n      \"id\": \"2d28081a66b64453a6d3e9664bf2c4f8\",\n      \"name\": \"enter_verification_code\",\n      \"label\": \"Enter Verification Code\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY0NjY3NTQ2Njk1MyBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      }\n    },\n    \"467764aa5fd340a68409445a0d18c317\": {\n      \"id\": \"467764aa5fd340a68409445a0d18c317\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"sms_code_verification_mode\",\n      \"label\": \"sms_code_verification_mode\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"f6a25e14a5bd48eea80c88833a2567e3\": {\n      \"id\": \"f6a25e14a5bd48eea80c88833a2567e3\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"userInputs\",\n      \"label\": \"userInputs\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5ade8887f3384cdc978e4136d8c24b78\": {\n      \"id\": \"5ade8887f3384cdc978e4136d8c24b78\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"device_code_status\",\n      \"label\": \"device_code_status\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"5690e660b6f64196b7f952e60e24037f\": {\n      \"id\": \"5690e660b6f64196b7f952e60e24037f\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"status_code\",\n      \"label\": \"status_code\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b263e4eb4e0a40d7bef3da09ed5c1121\": {\n      \"id\": \"b263e4eb4e0a40d7bef3da09ed5c1121\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"device_list\",\n      \"label\": \"device_list\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"d0c96e7525a14a088f79d93722c56c8b\": {\n      \"id\": \"d0c96e7525a14a088f79d93722c56c8b\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"status\",\n      \"label\": \"status\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"41404e2e0065467c841211d211a79498\": {\n      \"id\": \"41404e2e0065467c841211d211a79498\",\n      \"name\": \"reconfirm\",\n      \"label\": \"Reconfirm\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Confirm\",\n          \"value\": \"1\"\n        },\n        {\n          \"label\": \"Re-Enter\",\n          \"value\": \"2\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\"\n    },\n    \"c2edad24151d4479b08acff4e06a4782\": {\n      \"id\": \"c2edad24151d4479b08acff4e06a4782\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    /* return 'a default value'; */\\n    var attempts = gs.getProperty(\\\"password_reset.ivr.retry_count\\\", \\\"0\\\");\\n    var attemptsNumber = parseInt(attempts);\\n    return (isNaN(attemptsNumber) ? 0 : attemptsNumber);\\n})()\\n\"\n      },\n      \"name\": \"remaining_attempts\",\n      \"label\": \"remaining_attempts\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"1f19ae8f6d094517a3bfa77f6c33b637\": {\n      \"id\": \"1f19ae8f6d094517a3bfa77f6c33b637\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"channel\",\n      \"label\": \"channel\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4fa89132e8e440b7846258c1a60150c1\": {\n      \"id\": \"4fa89132e8e440b7846258c1a60150c1\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"phone\"\n      },\n      \"name\": \"IVR_CHANNEL_ID\",\n      \"label\": \"IVR_CHANNEL_ID\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"7ee31df53a8f458097d17d649f4b123d\": {\n      \"id\": \"7ee31df53a8f458097d17d649f4b123d\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"providerId\",\n      \"label\": \"providerId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6361d62c02f94d6e8662192ea16f3325\": {\n      \"id\": \"6361d62c02f94d6e8662192ea16f3325\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"inboundId\",\n      \"label\": \"inboundId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"debb2b725f8e01100a9bedbf2f7313cb","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sys_cb_design_topic_debb2b725f8e01100a9bedbf2f7313cb","sys_updated_by":"maint","sys_created_on":"2022-03-09 12:01:50","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"c48b1b357fc44bbc8f6191f9bdd6f1b8\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"c48b1b357fc44bbc8f6191f9bdd6f1b8\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"c48b1b357fc44bbc8f6191f9bdd6f1b8\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"1adaad9e5bb04c48aaccaa11304f3cd7\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"9e23f6091ef4486bb56f1cff58156a99\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.sms_code_verification_mode  = \\n    new global.PwdNotificationHelper().getSMSCodeVerificationMode(vaInputs.userid.getValue());\\n})()\\n\",\"id\":\"f6bb3e9f748b49088ef1e046fdc18c2e\",\"name\":\"Set SMS Verification Mode\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ReferenceChoiceInputPrompt\",\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"5efd81b075e34bdf958e00a59be43042\",\"name\":\"SMS Providers\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\nreturn vaVars.sms_code_verification_mode != undefined\\n    && vaVars.sms_code_verification_mode.toString() == 'mobile' \\n    && (new global.PasswordResetScopedUtil().isNotifyPluginEnabled() == false);\\n})()\\n\"},\"variable_id\":\"c920f4b082104c3aaec7d88470b4fb5d\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var message =  gs.getMessageLang(\\\"Select your mobile service provider\\\", vaContext.getRequesterLang());\\n    var custom_message = '';\\n    if (!gs.nil(vaVars.inboundId))\\n        custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_select_provider_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n    message = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang());\\n        \\n    return message;\\n})()\\n\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    return new PasswordResetScopedUtil().getNotificationProviders();\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Providers not found\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    return new PasswordResetScopedUtil().getNotificationProviders();\\n})()\\n\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var SYSPARM_SMS_VERIFICATION_MODE = 'sysparm_sms_verification_mode';\\n    var MODE_MOBILE = 'mobile';\\n\\n    if (vaVars.sms_code_verification_mode == undefined) {\\n        vaVars.status_code = 40001;\\n        return;\\n    }\\n    \\n    var providerId = '';\\n    if (MODE_MOBILE == vaVars.sms_code_verification_mode.toString() &&\\n        (new global.PasswordResetScopedUtil().isNotifyPluginEnabled() == false)) {\\n        providerId = vaInputs.sms_providers.toString();\\n    }\\n\\n    vaVars.device_code_status =\\n        new global.PasswordResetScopedUtil().sendSMSCodeToUser(vaInputs.contextid.getValue(), vaInputs.verificationid.getValue(), vaVars.sms_code_verification_mode.toString(), providerId, vaInputs.userid.getValue());\\n\\n    var userInputs = [];\\n    userInputs.push({\\n        key: SYSPARM_SMS_VERIFICATION_MODE,\\n        value: vaVars.sms_code_verification_mode.toString()\\n    });\\n\\n    vaVars.userInputs = JSON.stringify(userInputs);\\n\\n    var devices = new global.PwdNotificationHelper().getSubscribedMobileDevices(vaInputs.userid.getValue(), true);\\n\\n    if (devices.length > 0 && devices != null) {\\n        var devicesList = '';\\n        for(var i =0 ; i < devices.length ; i++) {\\n            devicesList = devicesList + '- ' + devices[i].device + '\\\\n';\\n        }\\n        vaVars.device_list = new global.PwdNotificationHelper().prepareMessageFromResponseCode(parseInt(vaVars.device_code_status), vaInputs.verificationid.getValue(), devicesList, vaVars.inboundId, vaVars.providerId);\\n    } else {\\n        var message =  gs.getMessageLang(\\\"Can't send verification code as you are not enrolled.\\\", vaContext.getRequesterLang());\\n        var custom_message = '';\\n        if (!gs.nil(vaVars.inboundId))\\n            custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_user_not_enrolled_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n        vaVars.device_list = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang());\\n        vaVars.status_code = 40001;\\n    }\\n})()\\n\\n\\n    \\n        \\n\",\"id\":\"2d3fd1b9047643b4a14ad7aa1df3e764\",\"name\":\"Send SMS Code\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.device_list.toString();\\n})()\"}],\"id\":\"d6d8f1d54c8f4985b9cae5244b34a4a9\",\"name\":\"Show Devices List\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.status_code == 20000;\\n})()\\n\"},\"secure\":false},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"9f2a6a002a8f41b5a4f6e7cd9a81ef71\",\"name\":\"SMS Code Choice\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run\\n       and be discoverable (or not).  For example:\\n\\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\\n       return applicability;\\n    */\\n    return vaVars.sms_code_verification_mode != undefined;\\n})()\"},\"variable_id\":\"63fa0487bf4d4d959d2d2fb014ef6dff\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var message =  gs.getMessageLang(\\\"What would you like to do?\\\", vaContext.getRequesterLang());\\n    var custom_message = '';\\n    if (!gs.nil(vaVars.inboundId))\\n        custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_select_code_choice_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n    message = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang());\\n        \\n    return message;\\n})()\\n\\n\\n\\n\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Check SMS Code Choice\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Resend SMS Code\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"sms_code_choice=2\"},\"id\":\"7264988dfee24783a5258b5944b4ee7f\",\"name\":\"Resend SMS Code\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Enter SMS Code\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"sms_code_choice=1\"},\"id\":\"304bdc2c64db43718bac0466cd2f8a96\",\"name\":\"Enter SMS Code\"}],\"id\":\"e839ad90e55446959f962d061c77ea33\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"2d28081a66b64453a6d3e9664bf2c4f8\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    --vaVars.remaining_attempts;\\n    var message =  gs.getMessageLang(\\\"Enter the code you have received over SMS\\\", vaContext.getRequesterLang());\\n    var custom_message = '';\\n    if (!gs.nil(vaVars.inboundId))\\n        custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_enter_code_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n    message = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang());\\n        \\n    return message;\\n})()\\n\\n\\n\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"46189bef2e1b4c788b856439fb0beb02\",\"name\":\"Enter Verification Code\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var SYSPARM_ANSWER_SMS_CODE = 'sysparm_answer_sms_code';\\n    var userInputs = JSON.parse(vaVars.userInputs);\\n    userInputs.push({ key: SYSPARM_ANSWER_SMS_CODE, value: vaInputs.enter_verification_code.getValue() });\\n\\n    vaVars.userInputs = JSON.stringify(userInputs);\\n\\n    var passwordResetScopedUtil = new global.PasswordResetScopedUtil();\\n    var verification_status = passwordResetScopedUtil.verify(vaInputs.userid, '', vaInputs.verificationid, vaInputs.contextid, userInputs);\\n    vaVars.status_code = verification_status ? 20000 : 50000;\\n})()\\n\",\"id\":\"6a500c6b88684ab289ab9065ef086918\",\"name\":\"Verify SMS Code and Set Response\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var SMS_VERIFICATION_TYPE = '58a2f398eb6001006a668c505206fed3';\\n    var GLIDE_CS_PLUGIN_ID = 'com.glide.cs';\\n    vaVars.status_code = 20000;\\n\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId =vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n    \\n    var pluginManager = new GlidePluginManager();\\n    if (pluginManager.isActive(GLIDE_CS_PLUGIN_ID)) {\\n        try {\\n            var providerJsonString = sn_cs.VASystemObject.getProviderByProviderAppId(vaContext.providerAppId);\\n            if (!gs.nil(providerJsonString)) {\\n                var providerJson = JSON.parse(providerJsonString);\\n                vaVars.channel = providerJson.channelType;\\n            }\\n        } catch (error) {\\n            gs.warn('Plugin : [com.glide.cs] is active, but failed in sn_cs.VASystemObject.getProviderByProviderAppId');\\n        }\\n    }\\n\\n    //Check for valid sms verification\\n    var passwordResetScopedUtil = new PasswordResetScopedUtil();\\n    var verification = passwordResetScopedUtil.getVerificationById(verificationId);\\n    if (gs.nil(verificationId) ||\\n        !verification.exists() ||\\n        verification.getVerificationTypeId() != SMS_VERIFICATION_TYPE) {\\n        vaVars.status_code = 40003;\\n        return;\\n    }\\n\\n    //Check for valid user\\n    var user = GlideUser.getUserByID(vaInputs.userid.getValue());\\n    if (gs.nil(userId) ||\\n        !user.exists()) {\\n        vaVars.status_code = 40004; \\n        return;\\n    }\\n\\n    //Check for valid context_id\\n    if (gs.nil(contextId)) {\\n        vaVars.status_code = 40002;\\n    }\\n})()\\n\",\"id\":\"95684608d1034ba09ac1ef606879cc38\",\"name\":\"Validate Input\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Input Validation Check\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Valid Input\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.status_code == 20000;\\n})()\\n\"},\"id\":\"277ecb56fc4c4c9f9c90de4ad52b9ef7\",\"name\":\"Valid Input\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Invalid Input\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.status_code != 20000;\\n})()\\n\"},\"id\":\"50505b6504b04478bd3aedd99b38906f\",\"name\":\"Invalid Input\"}],\"id\":\"150eaf73430647cc9ac6c70e21fe15c8\",\"goal_id\":\"primary\"},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Request Validation Check\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Valid\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.status_code == 20000;\\n})()\\n\"},\"id\":\"5f63a68d0f944c4cb2c44e6a27640fc9\",\"name\":\"Valid\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Invalid\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.status_code != 20000;\\n})()\\n\"},\"id\":\"8f4e215ed5b846278f222749a7da7a60\",\"name\":\"Invalid\"}],\"id\":\"b54d9ca80e8042609695a15b2b81b0e9\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.status = vaVars.status_code == 20000 ? 'Success' : 'Error';\\n})()\\n\",\"id\":\"bc47be43b2f54dc3baa1b5d6e0a7445a\",\"name\":\"Initialise Output\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"51bded08eb3c43f480ae97c230165d7e\",\"name\":\"Reconfirm\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return (vaVars.remaining_attempts >= 0) && (vaVars.channel == vaVars.IVR_CHANNEL_ID);\\n})()\\n\"},\"variable_id\":\"41404e2e0065467c841211d211a79498\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var message =  gs.getMessageLang(\\\"You have entered {0}\\\", vaContext.getRequesterLang(), [vaInputs.enter_verification_code.getValue()]);\\n    var custom_message = '';\\n    if (!gs.nil(vaVars.inboundId))\\n        custom_message = sn_cs.VASystemObject.getBotMessage(\\\"sms_reconfirm_code_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    \\n    message = gs.nil(custom_message) ? message : gs.getMessageLang(custom_message, vaContext.getRequesterLang(), [vaInputs.enter_verification_code.getValue()]);\\n        \\n    return message;\\n})()\\n\\n\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Confirmation\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Confirm\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return gs.nil(vaInputs.reconfirm) || (vaInputs.reconfirm == 1);\\n})()\\n\"},\"id\":\"9e83e5619cac46b6878fd017c0a3813b\",\"name\":\"Confirm\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Re-Enter\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"reconfirm=2\"},\"id\":\"c728e8d2feda4ec2af712fc374e34b41\",\"name\":\"Re-Enter\"}],\"id\":\"4a3f7b25e6d0480692b8de0636b06008\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var providerAppId = vaContext.providerAppId;\\n    if (!gs.nil(providerAppId)) {\\n        var providerApp = JSON.parse(sn_cs.VASystemObject.getProviderAppById(vaContext.providerAppId));\\n        vaVars.providerId = providerApp.providerId;\\n        vaVars.inboundId = providerApp.inboundId;\\n    }\\n    \\n})()\\n\",\"id\":\"b95ffa14459545708916693566a4a2f4\",\"name\":\"Set Provider Details\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"b54d9ca80e8042609695a15b2b81b0e9\",\"target_node_id\":\"9f2a6a002a8f41b5a4f6e7cd9a81ef71\",\"branch_id\":\"5f63a68d0f944c4cb2c44e6a27640fc9\",\"id\":\"14b85f2e7e4e44079084f6eeb06dd9e1\",\"name\":\"5f63a68d0f944c4cb2c44e6a27640fc9\"},{\"type\":\"Edge\",\"source_node_id\":\"b95ffa14459545708916693566a4a2f4\",\"target_node_id\":\"150eaf73430647cc9ac6c70e21fe15c8\",\"id\":\"66804b3452164452a8bb910ff6a7e09e\"},{\"type\":\"Edge\",\"source_node_id\":\"6a500c6b88684ab289ab9065ef086918\",\"target_node_id\":\"bc47be43b2f54dc3baa1b5d6e0a7445a\",\"id\":\"b249927224b04cddadf50ef9ec55aee5\"},{\"type\":\"Edge\",\"source_node_id\":\"f6bb3e9f748b49088ef1e046fdc18c2e\",\"target_node_id\":\"5efd81b075e34bdf958e00a59be43042\",\"id\":\"af64cad5afe8406cb8c79c29cf73856c\"},{\"type\":\"Edge\",\"source_node_id\":\"5efd81b075e34bdf958e00a59be43042\",\"target_node_id\":\"2d3fd1b9047643b4a14ad7aa1df3e764\",\"id\":\"359bb5dc04574359a3e7491f05b8cb56\"},{\"type\":\"Edge\",\"source_node_id\":\"2d3fd1b9047643b4a14ad7aa1df3e764\",\"target_node_id\":\"d6d8f1d54c8f4985b9cae5244b34a4a9\",\"id\":\"61f83693c1e64a93b76987676adaf16f\"},{\"type\":\"Edge\",\"source_node_id\":\"9f2a6a002a8f41b5a4f6e7cd9a81ef71\",\"target_node_id\":\"e839ad90e55446959f962d061c77ea33\",\"id\":\"34bab9afd25546d0a807d3bc88c4a277\"},{\"type\":\"Edge\",\"source_node_id\":\"e839ad90e55446959f962d061c77ea33\",\"target_node_id\":\"2d3fd1b9047643b4a14ad7aa1df3e764\",\"branch_id\":\"7264988dfee24783a5258b5944b4ee7f\",\"id\":\"d7b2c7a5bba5478ea9fee9ad40b167ee\",\"name\":\"7264988dfee24783a5258b5944b4ee7f\"},{\"type\":\"Edge\",\"source_node_id\":\"e839ad90e55446959f962d061c77ea33\",\"target_node_id\":\"46189bef2e1b4c788b856439fb0beb02\",\"branch_id\":\"304bdc2c64db43718bac0466cd2f8a96\",\"id\":\"1fb0e411525a4497be3dee9128e55189\",\"name\":\"304bdc2c64db43718bac0466cd2f8a96\"},{\"type\":\"Edge\",\"source_node_id\":\"1adaad9e5bb04c48aaccaa11304f3cd7\",\"target_node_id\":\"95684608d1034ba09ac1ef606879cc38\",\"id\":\"85972b355ad3436697ae4efbf5f5d95f\"},{\"type\":\"Edge\",\"source_node_id\":\"150eaf73430647cc9ac6c70e21fe15c8\",\"target_node_id\":\"f6bb3e9f748b49088ef1e046fdc18c2e\",\"branch_id\":\"277ecb56fc4c4c9f9c90de4ad52b9ef7\",\"id\":\"64870be9d3644fe08d0a9e3d7617d789\",\"name\":\"277ecb56fc4c4c9f9c90de4ad52b9ef7\"},{\"type\":\"Edge\",\"source_node_id\":\"150eaf73430647cc9ac6c70e21fe15c8\",\"target_node_id\":\"bc47be43b2f54dc3baa1b5d6e0a7445a\",\"branch_id\":\"50505b6504b04478bd3aedd99b38906f\",\"id\":\"2716271585f64f049fbb9050373eca29\",\"name\":\"50505b6504b04478bd3aedd99b38906f\"},{\"type\":\"Edge\",\"source_node_id\":\"d6d8f1d54c8f4985b9cae5244b34a4a9\",\"target_node_id\":\"b54d9ca80e8042609695a15b2b81b0e9\",\"id\":\"e83a413412954ea3a5d2bacbb97746cc\"},{\"type\":\"Edge\",\"source_node_id\":\"b54d9ca80e8042609695a15b2b81b0e9\",\"target_node_id\":\"bc47be43b2f54dc3baa1b5d6e0a7445a\",\"branch_id\":\"8f4e215ed5b846278f222749a7da7a60\",\"id\":\"dca3e88c870a46eb8850d927d843e617\",\"name\":\"8f4e215ed5b846278f222749a7da7a60\"},{\"type\":\"Edge\",\"source_node_id\":\"bc47be43b2f54dc3baa1b5d6e0a7445a\",\"target_node_id\":\"9e23f6091ef4486bb56f1cff58156a99\",\"id\":\"df8043a432e94c09b2be00a6207048ce\"},{\"type\":\"Edge\",\"source_node_id\":\"46189bef2e1b4c788b856439fb0beb02\",\"target_node_id\":\"51bded08eb3c43f480ae97c230165d7e\",\"id\":\"2d93411f2787477ebf8c16673077ab24\"},{\"type\":\"Edge\",\"source_node_id\":\"51bded08eb3c43f480ae97c230165d7e\",\"target_node_id\":\"4a3f7b25e6d0480692b8de0636b06008\",\"id\":\"6fb48c74620c4fadaf8161960bc9dc35\"},{\"type\":\"Edge\",\"source_node_id\":\"4a3f7b25e6d0480692b8de0636b06008\",\"target_node_id\":\"6a500c6b88684ab289ab9065ef086918\",\"branch_id\":\"9e83e5619cac46b6878fd017c0a3813b\",\"id\":\"a60ae24eb5b64681bab3085e0722efcf\",\"name\":\"9e83e5619cac46b6878fd017c0a3813b\"},{\"type\":\"Edge\",\"source_node_id\":\"4a3f7b25e6d0480692b8de0636b06008\",\"target_node_id\":\"46189bef2e1b4c788b856439fb0beb02\",\"branch_id\":\"c728e8d2feda4ec2af712fc374e34b41\",\"id\":\"06762f2540594b039b3fd41417d4fcc1\",\"name\":\"c728e8d2feda4ec2af712fc374e34b41\"},{\"type\":\"Edge\",\"source_node_id\":\"95684608d1034ba09ac1ef606879cc38\",\"target_node_id\":\"b95ffa14459545708916693566a4a2f4\",\"id\":\"ca0895b391dc4371ac8368f05f13587c\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"sms_code_verification_mode\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"467764aa5fd340a68409445a0d18c317\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"userInputs\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"f6a25e14a5bd48eea80c88833a2567e3\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"device_code_status\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"5ade8887f3384cdc978e4136d8c24b78\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"status_code\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"5690e660b6f64196b7f952e60e24037f\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"device_list\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"b263e4eb4e0a40d7bef3da09ed5c1121\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"status\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"d0c96e7525a14a088f79d93722c56c8b\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"remaining_attempts\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* return 'a default value'; */\\n    var attempts = gs.getProperty(\\\"password_reset.ivr.retry_count\\\", \\\"0\\\");\\n    var attemptsNumber = parseInt(attempts);\\n    return (isNaN(attemptsNumber) ? 0 : attemptsNumber);\\n})()\\n\"},\"list\":false,\"id\":\"c2edad24151d4479b08acff4e06a4782\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"channel\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"1f19ae8f6d094517a3bfa77f6c33b637\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"IVR_CHANNEL_ID\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"phone\"},\"list\":false,\"id\":\"4fa89132e8e440b7846258c1a60150c1\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"providerId\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"7ee31df53a8f458097d17d649f4b123d\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"inboundId\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"6361d62c02f94d6e8662192ea16f3325\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"userid\",\"list\":false,\"id\":\"e0fab02ea0574435884e802516e0fa9c\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"verificationid\",\"list\":false,\"id\":\"ac3fbbe707fb4d5ba55f773377d9704f\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"contextid\",\"list\":false,\"id\":\"4c69b59b32b146628d74759222a3b96c\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[],\"id\":\"c920f4b082104c3aaec7d88470b4fb5d\",\"name\":\"sms_providers\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Enter SMS code\",\"element\":\"1\"},{\"name\":\"Resend SMS code\",\"element\":\"2\"}],\"id\":\"63fa0487bf4d4d959d2d2fb014ef6dff\",\"name\":\"sms_code_choice\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"enter_verification_code\",\"list\":false,\"id\":\"2d28081a66b64453a6d3e9664bf2c4f8\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Confirm\",\"element\":\"1\"},{\"name\":\"Re-Enter\",\"element\":\"2\"}],\"id\":\"41404e2e0065467c841211d211a79498\",\"name\":\"reconfirm\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"userid\",\"label\":\"userId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"e0fab02ea0574435884e802516e0fa9c\",\"type\":\"String\"},{\"name\":\"verificationid\",\"label\":\"verificationId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"ac3fbbe707fb4d5ba55f773377d9704f\",\"type\":\"String\"},{\"name\":\"contextid\",\"label\":\"contextId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"4c69b59b32b146628d74759222a3b96c\",\"type\":\"String\"}],\"return-values-mapping\":[{\"name\":\"status\",\"label\":\"status\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.status}}\"}},{\"name\":\"error_code\",\"label\":\"error_code\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.status_code}}\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"id\":\"933de149774201100a9bcac5ec5a991a\",\"name\":\"SMS Verification\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":true,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SMS Verification","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"933de149774201100a9bcac5ec5a991a","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/0ebb2b725f8e01100a9bedbf2f7313c5","value":"0ebb2b725f8e01100a9bedbf2f7313c5"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"31","sys_updated_on":"2024-04-16 05:20:34","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.65\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"2dfbd35d50d24550819ac779ddabe692\": {\n          \"id\": \"2dfbd35d50d24550819ac779ddabe692\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"91324efa7c8d413ab438069107bfe3ee\": {\n          \"id\": \"91324efa7c8d413ab438069107bfe3ee\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"b36a83ea4c9c4e518df8738d85507563\": {\n          \"id\": \"b36a83ea4c9c4e518df8738d85507563\",\n          \"stepType\": \"TextPrompt\",\n          \"name\": \"Issue description\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Could you please provide a short description of your issue?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"7c4884db8f2b462ea027e62238424281\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          },\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\",\n          \"requestFeedback\": true\n        },\n        \"8de76ea8a4c6480c81f97522d037e263\": {\n          \"id\": \"8de76ea8a4c6480c81f97522d037e263\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"AI search diagnostics\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"AI search diagnostics\",\n          \"reusableTopicId\": \"7adc619487e10910b6edcbfc0ebb358c\",\n          \"inputs\": {\n            \"search_term\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.issue_description}}\",\n                        \"displayValue\": \"Input VariablesIssue Description\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"search_application_configuration\": {\n              \"value\": \"113e3f608742cd50b6edcbfc0ebb350e\",\n              \"mode\": \"string\",\n              \"type\": \"Reference\",\n              \"table\": \"sys_search_context_config\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"89fd3ee1c1fd48a8969fec1d01725aea\",\n              \"value\": \"geniussearchresults\",\n              \"mapping\": \"geniussearchresults\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"143081dcebc04bd094b0a812be80a58a\",\n              \"value\": \"searchresults\",\n              \"mapping\": \"searchresults\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"c7118ba75e824742b16e4ca7d05e1678\",\n              \"value\": \"shouldaskinfohelpful\",\n              \"mapping\": \"shouldaskinfohelpful\",\n              \"preventDisable\": false\n            }\n          ],\n          \"variableIds\": [\n            \"89fd3ee1c1fd48a8969fec1d01725aea\",\n            \"143081dcebc04bd094b0a812be80a58a\",\n            \"c7118ba75e824742b16e4ca7d05e1678\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false\n        },\n        \"a757cd548f5449d0bf585a1e031e6036\": {\n          \"id\": \"a757cd548f5449d0bf585a1e031e6036\",\n          \"name\": \"Capture system information\",\n          \"script\": \"(function execute() {\\n    var info = gs.getProperty('glide.buildtag');\\n    var build = 'tokyo';\\n    var patch = '';\\n    if(info && info != ''){\\n        var arr = info.split('__');\\n        var build = arr[0].split('-')[1];\\n        var patch = '';\\n        if (arr.length == 2) {\\n            patch = arr[1].split('-')[0].slice(5);\\n        }\\n    }\\n    varinstanceURL=gs.getProperty('glide.servlet.uri');\\n    varinstanceName=gs.getProperty('instance_name');\\n    var ais_enable = gs.getProperty('glide.ais.enabled') && gs.getProperty(\\\"sn_ci_diagnostics.ais_enable\\\", \\\"false\\\");\\n    var gr = new GlideRecord('sys_upgrade_history');\\n    gr.addEncodedQuery('to_versionLIKEglide-');\\n    gr.query();\\n    if(gr.next()){\\n       var latestUpgrade = {};\\n       latestUpgrade.from = gr.getValue('from_version');\\n       latestUpgrade.to = gr.getValue('to_version');\\n       latestUpgrade.dateTime = gr.getValue('upgrade_finished');\\n    }\\n    var systemInfo = {'instanceName':instanceName, 'instanceURL':instanceURL, 'build':build, 'patch':patch, 'ais_enable':ais_enable, 'latestUpgrade':latestUpgrade};\\n    vaVars.systemInformation = JSON.stringify(systemInfo);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"6a016cff73d14c6cad2e65998ad362ac\": {\n          \"id\": \"6a016cff73d14c6cad2e65998ad362ac\",\n          \"name\": \"Cleanup\",\n          \"script\": \"(function execute() {\\n    vaVars.pluginName = null;\\n    vaVars.selections = null;\\n    vaVars.pluginRecords = null;\\n    vaVars.selectedPlugin = null;\\n    vaVars.executeOption = null;\\n    vaVars.categories = null;\\n    vaVars.selectedCategory = null;\\n    vaVars.global_search_kb = false;\\n    vaVars.global_issue_description = null;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a701d259a7fc4ed088a223c0b70a7389\": {\n          \"id\": \"a701d259a7fc4ed088a223c0b70a7389\",\n          \"name\": \"Capture Sys Ids\",\n          \"script\": \"(function execute() {\\n    vaVars.global_issue_description = vaInputs.issue_description;\\n    var output=[];\\n    if(vaInputs.searchresults && vaInputs.searchresults != '') {\\n        var results = JSON.parse(vaInputs.searchresults);\\n        if(results && results.length && results.length > 0 ){\\n            for(var i = 0; i < results.length; i++){\\n                var result = results[i];\\n                var sysId=result.propValues.model.sys_id;\\n                output.push(sysId);\\n            }\\n        }\\n    }\\n    vaVars.selections=JSON.stringify(output);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a47898371b4343a0b135d83a228108ba\": {\n          \"id\": \"a47898371b4343a0b135d83a228108ba\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"b148c9cb19ad473b9638e968b2fa9bf0\": {\n          \"id\": \"b148c9cb19ad473b9638e968b2fa9bf0\",\n          \"name\": \"Get Applicable Diagnostics records\",\n          \"script\": \"(function execute() {\\n    var ifRequiredPluginNotInstalled = function(pluginIds){\\n        if(!pluginIds || pluginIds == ''){\\n            return false;\\n        }\\n        var plugins = pluginIds.split(',');\\n        var pm = new GlidePluginManager();\\n        for(var i=0; i < plugins.length; i++){\\n            if(!pm.isActive(plugins[i]))\\n              return true;\\n        }\\n        return false;\\n    };\\n    var gr = new GlideRecord('ci_diagnostic_content');\\n    var selectionObj = JSON.parse(vaVars.selections);\\n    var sysids = '';\\n    for(var i=0; i < selectionObj.length; i++){\\n        if (i!=0){\\n           sysids = sysids + ',';\\n        }\\n        sysids = sysids +  selectionObj[i];\\n    }\\n    gr.addQuery('sys_id','IN',sysids);\\n    gr.query();\\n    var recs = {}\\n    var allRecords = [];\\n    while(gr.next()){\\n        var requiredPlugins = gr.getValue('plugin_dependency')\\n        if(ifRequiredPluginNotInstalled(requiredPlugins)){\\n             continue;\\n        }\\n        var obj = {};\\n        var category = gr.category.name;\\n        obj.sysId = gr.getUniqueValue();\\n        obj.name = gr.getValue('name');\\n        obj.desc = gr.getValue('description');\\n        obj.category = gr.getValue('category');\\n        obj.categoryName = gr.category.name + '';\\n        obj.topic = gr.support_topic.name + '';\\n        obj.dataCollectionTopic = gr.data_collection_topic.name + '';\\n        obj.healthCheckTopic = gr.category.health_check_topic.name + '';\\n        if (recs[category] && recs[category].length > 0 ) {\\n            recs[category].push(obj);\\n        }else {\\n            var arr = [];\\n            arr.push(obj);\\n            recs[category] = arr;\\n        }\\n        allRecords.push(obj);\\n    }\\n    vaVars.pluginRecords = JSON.stringify(allRecords);\\n    vaVars.categories = JSON.stringify(recs);\\n}\\n)()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"be2f7d6d62334ab79a0338ced4983748\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Select plugin\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Based on your input, I found below solutions. Could you please select one from the list to proceed further?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"2a1eb1ae35b34c9dae7a9d4425b7c982\",\n          \"id\": \"be2f7d6d62334ab79a0338ced4983748\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = [];\\n    var plugins = JSON.parse(vaVars.pluginRecords);\\n    for(var i=0; i<plugins.length ; i++){\\n        options.push({'value': plugins[i].sysId, 'label': plugins[i].name});\\n    }\\n    options.push({'value': 'none', 'label': gs.getMessage('Not matching')});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No records found please re search\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = [];\\n    var plugins = JSON.parse(vaVars.pluginRecords);\\n    for(var i=0; i<plugins.length ; i++){\\n        options.push({'value': plugins[i].sysId, 'label': plugins[i].name});\\n    }\\n    options.push({'value': 'none', 'label': gs.getMessage('Not matching')});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"af37f96b1a714c29b16247aee689604e\": {\n          \"id\": \"af37f96b1a714c29b16247aee689604e\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"5052404e25374c36bc320a17f50ef2f3\": {\n          \"id\": \"5052404e25374c36bc320a17f50ef2f3\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Show plugin description\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    return JSON.parse(vaVars.selectedPlugin).desc;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"5f599fd114e74492bcb4aeb3e6291f91\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Proceed options\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Want to proceed with this diagnosis? \"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"33c64562a19243c78287f65bd396853c\",\n          \"id\": \"5f599fd114e74492bcb4aeb3e6291f91\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"06da96960a8b439aaf7f959f6185ba81\": {\n          \"id\": \"06da96960a8b439aaf7f959f6185ba81\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"1bc8fd3e5095447a9fdf96612f55c1c2\": {\n          \"id\": \"1bc8fd3e5095447a9fdf96612f55c1c2\",\n          \"name\": \"Store selected plugin\",\n          \"script\": \"(function execute() {\\n    var selected;\\n    var categoriesCount = Object.keys(JSON.parse(vaVars.categories)).length;\\n    if (categoriesCount > 1 && vaInputs.select_category.getValue() != 'all'){\\n        selected = vaInputs.select_categorised_plugin.getValue();\\n    }else {\\n        selected = vaInputs.select_plugin.getValue();\\n    }\\n    var plugins = JSON.parse(vaVars.pluginRecords);\\n    for(var i=0; i<plugins.length; i++){\\n       if(selected == plugins[i].sysId){\\n           vaVars.selectedPlugin = JSON.stringify(plugins[i]);\\n           break;\\n       }\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"40132f4e46e34defa6d93f728716e22c\": {\n          \"id\": \"40132f4e46e34defa6d93f728716e22c\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"No matching diagnostic found\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"No diagnosis available now for your issue\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"5f81f4ae933d4df68b93cb1d4c455ce0\": {\n          \"id\": \"5f81f4ae933d4df68b93cb1d4c455ce0\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"Diagnostic Topic Executer\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"Diagnostic Topic Executer\",\n          \"reusableTopicId\": \"6fcf5a148775c150b6edcbfc0ebb3518\",\n          \"inputs\": {\n            \"diagnosticcontent\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.selectedPlugin}}\",\n                        \"displayValue\": \"Script VariablesselectedPlugin\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"41731779b65c44b685fd1b74e7a4fce1\",\n              \"value\": \"istopicexecuted\",\n              \"mapping\": \"istopicexecuted\",\n              \"preventDisable\": false\n            },\n            {\n              \"id\": \"35ebba4a5c0b4c428d17675d52186edc\",\n              \"value\": \"isdatacollectiontopicexecuted\",\n              \"mapping\": \"isdatacollectiontopicexecuted\"\n            }\n          ],\n          \"variableIds\": [\n            \"41731779b65c44b685fd1b74e7a4fce1\",\n            \"35ebba4a5c0b4c428d17675d52186edc\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false\n        },\n        \"6d728da7a306462fa293a0d7910cca56\": {\n          \"id\": \"6d728da7a306462fa293a0d7910cca56\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"74742f9aef66479eba0263ab91bc516b\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"Select Category\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Based on your input, I found below categories. Could you please select one from the list to proceed further?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"9f31374489a2415580281699cfb47095\",\n          \"id\": \"74742f9aef66479eba0263ab91bc516b\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = [];\\n    var plugins = Object.keys(JSON.parse(vaVars.categories));\\n    for(var i=0; i<plugins.length ; i++){\\n        options.push({'value': plugins[i] , 'label': plugins[i]});\\n    }\\n    options.push({'value': 'all', 'label': gs.getMessage('Show all')});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No records found please re search\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = [];\\n    var plugins = Object.keys(JSON.parse(vaVars.categories));\\n    for(var i=0; i<plugins.length ; i++){\\n        options.push({'value': plugins[i] , 'label': plugins[i]});\\n    }\\n    options.push({'value': 'all', 'label': gs.getMessage('Show all')});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"675a73dc31114775a73439abfaa4cc80\": {\n          \"id\": \"675a73dc31114775a73439abfaa4cc80\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f52886830ae34d958627821e6672d1ac\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"select categorised plugin\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Based on your input we found below issues. Please select one to proceed further\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"e5ca855f6d3441b7977b2177717c41f7\",\n          \"id\": \"f52886830ae34d958627821e6672d1ac\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = [];\\n    var plugins = JSON.parse(vaVars.categories)[vaInputs.select_category.getValue()];\\n    for(var i=0; i<plugins.length ; i++){\\n        options.push({'value': plugins[i].sysId, 'label': plugins[i].name});\\n    }\\n    options.push({'value': 'back', 'label': gs.getMessage('Back to Category')});\\n    options.push({'value': 'all', 'label': gs.getMessage('Show all')});\\n    return options;\\n})()\\n\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"No records found please re search\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = [];\\n    var plugins = JSON.parse(vaVars.categories)[vaInputs.select_category.getValue()];\\n    for(var i=0; i<plugins.length ; i++){\\n        options.push({'value': plugins[i].sysId, 'label': plugins[i].name});\\n    }\\n    options.push({'value': 'back', 'label': gs.getMessage('Back to Category')});\\n    options.push({'value': 'all', 'label': gs.getMessage('Show all')});\\n    return options;\\n})()\\n\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"2d9ef8d6f9e2466797a772929a71dca8\": {\n          \"id\": \"2d9ef8d6f9e2466797a772929a71dca8\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"c9c2dc8f5d4f4d91a06456ba134d80aa\": {\n          \"id\": \"c9c2dc8f5d4f4d91a06456ba134d80aa\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"f7265333c487496ea671913385c98a0c\": {\n          \"id\": \"f7265333c487496ea671913385c98a0c\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Kb Option\",\n          \"url\": {\n            \"value\": \"(function execute() {\\n        return encodeURI('https://support.servicenow.com/kb?id=ns_search&filters=kb&q=' + vaInputs.issue_description);\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"label\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Click here\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"header\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"You can use the link below to search available KBs related to your search.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"single\",\n          \"introMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"listOfLinks\": \"\"\n        },\n        \"4852e70cd76440409d0b24ebe920c86a\": {\n          \"id\": \"4852e70cd76440409d0b24ebe920c86a\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"6707d43b9a4249e38872e9c9af66d701\": {\n          \"id\": \"6707d43b9a4249e38872e9c9af66d701\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Is the solution helpful?\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"If you found a solution, please click yes to exit or no for further diagnosis which includes downloading support data.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"50898b7bb2c94c0bb11050336eed765f\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"64c06aaa2c2245fbb921feffaee03580\": {\n          \"id\": \"64c06aaa2c2245fbb921feffaee03580\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"End Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Thanks for using Diagnostics tools. Bye\"\n                    },\n                    {\n                      \"type\": \"emoji\",\n                      \"emoji\": {\n                        \"id\": \"slightly_smiling_face\",\n                        \"name\": \"Slightly Smiling Face\",\n                        \"short_names\": [\n                          \"slightly_smiling_face\"\n                        ],\n                        \"colons\": \":slightly_smiling_face:\",\n                        \"emoticons\": [\n                          \":)\",\n                          \"(:\",\n                          \":-)\"\n                        ],\n                        \"unified\": \"1f642\",\n                        \"skin\": null,\n                        \"native\": \"\uD83D\uDE42\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"acdd55d7398648f0958239c2f3556f0a\": {\n          \"id\": \"acdd55d7398648f0958239c2f3556f0a\",\n          \"stepType\": \"BooleanPrompt\",\n          \"name\": \"Ask for search again?\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Do you want to search again? Press yes to search or no to download support data and exit.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"701fd0f2d7ca4f8c9887c1a5b721dca3\",\n          \"skipReprompt\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"detailDescription\": \"\"\n        },\n        \"346d2d04f4ec48f1933dfb20ce7f2f7d\": {\n          \"id\": \"346d2d04f4ec48f1933dfb20ce7f2f7d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"e202b4df73cd448ebfb18be84b5eaccd\": {\n          \"id\": \"e202b4df73cd448ebfb18be84b5eaccd\",\n          \"stepType\": \"LinkOutput\",\n          \"name\": \"Download Support Data\",\n          \"url\": {\n            \"value\": \"(function execute() {\\n    var transcript = JSON.stringify(vaSystem.getTranscript());\\n    var diagnosticData = {};\\n    diagnosticData.systemInformation = JSON.parse(vaVars.systemInformation);\\n    if(vaVars.global_diagnosticdata && vaVars.global_diagnosticdata != ''){\\n        var plugindata = JSON.parse(vaVars.global_diagnosticdata);\\n        var pluginName = JSON.parse(vaVars.selectedPlugin).name;\\n        var pluginCategory = JSON.parse(vaVars.selectedPlugin).categoryName;\\n        var appendData = {};\\n        appendData[pluginName] = plugindata;\\n        diagnosticData[pluginCategory] = appendData;\\n    }\\n    diagnosticData.transcript = transcript;\\n    var interactionSysId = vaSystem.getInteractionSysId();\\n    var gr = new GlideRecord('interaction');\\n    gr.get(interactionSysId);\\n    var gsa = new GlideSysAttachment();\\n    var id = gsa.write(gr, \\\"diagnostic_data.json\\\", 'text/plain', JSON.stringify(diagnosticData, null, 4));\\n    return '/sys_attachment.do?sys_id='+id;\\n})()\\n\",\n            \"mode\": \"script\"\n          },\n          \"label\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Download Here\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"header\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Download Support Data\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"linkType\": \"single\",\n          \"introMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"listOfLinks\": \"\"\n        },\n        \"c1f844b7fe3947bd932e67f2c7f4d614\": {\n          \"id\": \"c1f844b7fe3947bd932e67f2c7f4d614\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Greetings\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Hi, I'm your Virtual Agent and I will help resolve your issue.\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"requestFeedback\": true\n        },\n        \"9f40b537df03430a9c91619fbb3c71d7\": {\n          \"id\": \"9f40b537df03430a9c91619fbb3c71d7\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"cebab24cfc7c4e7f812bca0110423fd1\": {\n          \"id\": \"cebab24cfc7c4e7f812bca0110423fd1\",\n          \"name\": \"Get Records\",\n          \"script\": \"(function execute() {\\n    var output=[];\\n    var gr = new GlideRecord('ci_diagnostic_content');\\n    gr.addQuery('IR_AND_OR_QUERY', vaInputs.issue_description);\\n    gr.addQuery('active','true');\\n    gr.query();\\n    while(gr.next()){\\n       output.push(gr.getUniqueValue());\\n    }\\n    vaVars.selections=JSON.stringify(output);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"90f970af09a74ee6bbe1198a4682708d\": {\n          \"id\": \"90f970af09a74ee6bbe1198a4682708d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"1c8d58a63f9d453ca4db4f8fbb53c796\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5f81f4ae933d4df68b93cb1d4c455ce0\",\n          \"target\": \"c9c2dc8f5d4f4d91a06456ba134d80aa\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c45f354ecaa14608a27fe4a73e7f7188\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9f40b537df03430a9c91619fbb3c71d7\",\n          \"target\": \"8de76ea8a4c6480c81f97522d037e263\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.systemInformation).ais_enable === 'true';\\n})()\\n\"\n          },\n          \"label\": \"ai enable\"\n        },\n        {\n          \"id\": \"cf36331cd6d1456cb564bbb695397aeb\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9f40b537df03430a9c91619fbb3c71d7\",\n          \"target\": \"cebab24cfc7c4e7f812bca0110423fd1\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return JSON.parse(vaVars.systemInformation).ais_enable === 'false';\\n})()\\n\"\n          },\n          \"label\": \"ai disable\"\n        },\n        {\n          \"id\": \"cbcf8590536c48d3ba42c80aabc7bce5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c9c2dc8f5d4f4d91a06456ba134d80aa\",\n          \"target\": \"e202b4df73cd448ebfb18be84b5eaccd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaInputs.isdatacollectiontopicexecuted.getValue() == 'true';\\n})()\\n\"\n          },\n          \"label\": \"Data collected\"\n        },\n        {\n          \"id\": \"92a63803602d405190bf73edd9724c91\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"af37f96b1a714c29b16247aee689604e\",\n          \"target\": \"f7265333c487496ea671913385c98a0c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var categoriesCount = Object.keys(JSON.parse(vaVars.categories)).length;\\n    if (categoriesCount > 1 && vaInputs.select_category.getValue() != 'all' && vaInputs.select_categorised_plugin.getValue() != 'all'){\\n        return vaInputs.select_categorised_plugin.getValue() == 'none';\\n    }else {\\n        return vaInputs.select_plugin.getValue() == 'none';\\n    }\\n})()\\n\"\n          },\n          \"label\": \"If not matching\"\n        },\n        {\n          \"id\": \"14f5e1a2e7a949e3b28faccc2134c4e8\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"06da96960a8b439aaf7f959f6185ba81\",\n          \"target\": \"5f81f4ae933d4df68b93cb1d4c455ce0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.proceed_options=1\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Proceed with selected Diagnostic\"\n        },\n        {\n          \"id\": \"2fd2a8bdacc84bb99ec01624e8637530\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a701d259a7fc4ed088a223c0b70a7389\",\n          \"target\": \"a47898371b4343a0b135d83a228108ba\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"749c01e9195042d38799fd4865c11552\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a757cd548f5449d0bf585a1e031e6036\",\n          \"target\": \"6a016cff73d14c6cad2e65998ad362ac\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"eb5c58630ddb462c8bd24618e53c036c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6a016cff73d14c6cad2e65998ad362ac\",\n          \"target\": \"b36a83ea4c9c4e518df8738d85507563\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9a529d5dbb704419b46a6b693886e8b9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"8de76ea8a4c6480c81f97522d037e263\",\n          \"target\": \"a701d259a7fc4ed088a223c0b70a7389\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c9fbe6d77bd2414ea3bd104bdcdb3674\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a47898371b4343a0b135d83a228108ba\",\n          \"target\": \"b148c9cb19ad473b9638e968b2fa9bf0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var sysIds = JSON.parse(vaVars.selections);\\n    return sysIds.length > 0;\\n})()\\n\\n\"\n          },\n          \"label\": \"Search result exist\"\n        },\n        {\n          \"id\": \"276cdfffd5534d02a799213a0f5a6139\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"be2f7d6d62334ab79a0338ced4983748\",\n          \"target\": \"af37f96b1a714c29b16247aee689604e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"682861de7e4146fa84f289fa26694ef2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5052404e25374c36bc320a17f50ef2f3\",\n          \"target\": \"5f599fd114e74492bcb4aeb3e6291f91\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4ecc1615b4c4451bb84cacd26152021a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5f599fd114e74492bcb4aeb3e6291f91\",\n          \"target\": \"06da96960a8b439aaf7f959f6185ba81\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fc8d266d1f744a85a20871f320d6f7d1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"06da96960a8b439aaf7f959f6185ba81\",\n          \"target\": \"6d728da7a306462fa293a0d7910cca56\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.proceed_options=2\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Back to searched result\"\n        },\n        {\n          \"id\": \"b3b6369e5f51454a9fe45150e24983d1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"06da96960a8b439aaf7f959f6185ba81\",\n          \"target\": \"6a016cff73d14c6cad2e65998ad362ac\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.proceed_options=4\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Search again\"\n        },\n        {\n          \"id\": \"79c9759f242249f4aaef004ed38744bd\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"af37f96b1a714c29b16247aee689604e\",\n          \"target\": \"1bc8fd3e5095447a9fdf96612f55c1c2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var categoriesCount = Object.keys(JSON.parse(vaVars.categories)).length;\\n    if (categoriesCount > 1 && vaInputs.select_category.getValue() != 'all'){\\n        vaInputs.select_categorised_plugin.getValue() != 'all' && vaInputs.select_categorised_plugin.getValue() != 'back';\\n    }else {\\n        return vaInputs.select_plugin.getValue() != 'none';\\n    }\\n})()\\n\\n\"\n          },\n          \"label\": \"Selected plugin record\"\n        },\n        {\n          \"id\": \"e6d05a6ae2074220a3765a07874d4059\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1bc8fd3e5095447a9fdf96612f55c1c2\",\n          \"target\": \"5052404e25374c36bc320a17f50ef2f3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"417b28212fb149d59517fcc288ff3c75\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a47898371b4343a0b135d83a228108ba\",\n          \"target\": \"40132f4e46e34defa6d93f728716e22c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var sysIds = JSON.parse(vaVars.selections);\\n    return sysIds.length == 0;\\n})()\\n\"\n          },\n          \"label\": \"Search result empty\"\n        },\n        {\n          \"id\": \"411380edc9ac480892917d10d26a19c1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"40132f4e46e34defa6d93f728716e22c\",\n          \"target\": \"f7265333c487496ea671913385c98a0c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4e3729f6cccc41dc9b11c1053dbed8c3\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"6d728da7a306462fa293a0d7910cca56\",\n          \"target\": \"be2f7d6d62334ab79a0338ced4983748\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var plugins = Object.keys(JSON.parse(vaVars.categories));\\n    return plugins.length == 1;\\n})()\\n\"\n          },\n          \"label\": \"only one category\"\n        },\n        {\n          \"id\": \"7e072b67414c43c38fcf1f2f03ee0286\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"6d728da7a306462fa293a0d7910cca56\",\n          \"target\": \"74742f9aef66479eba0263ab91bc516b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var plugins = Object.keys(JSON.parse(vaVars.categories));\\n    return plugins.length > 1;\\n})()\\n\"\n          },\n          \"label\": \"multiple category\"\n        },\n        {\n          \"id\": \"03adda8f13c349b3acc90fc5345224fc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"74742f9aef66479eba0263ab91bc516b\",\n          \"target\": \"675a73dc31114775a73439abfaa4cc80\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"00ad01eee0e349fba4abe9369cded3bf\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"675a73dc31114775a73439abfaa4cc80\",\n          \"target\": \"be2f7d6d62334ab79a0338ced4983748\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaInputs.select_category.getValue() == 'all';\\n})()\\n\"\n          },\n          \"label\": \"Show all\"\n        },\n        {\n          \"id\": \"05d641c679724be5b455f9d14e8645aa\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"675a73dc31114775a73439abfaa4cc80\",\n          \"target\": \"f52886830ae34d958627821e6672d1ac\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaInputs.select_category.getValue() != 'all';\\n})()\\n\"\n          },\n          \"label\": \"Category selected\"\n        },\n        {\n          \"id\": \"a02fb4a1e60f408c8c17150aba3bcae8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f52886830ae34d958627821e6672d1ac\",\n          \"target\": \"2d9ef8d6f9e2466797a772929a71dca8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3dc2c105ecd747c7b7ea15861ec6106c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2d9ef8d6f9e2466797a772929a71dca8\",\n          \"target\": \"1bc8fd3e5095447a9fdf96612f55c1c2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaInputs.select_categorised_plugin.getValue() != 'all' && vaInputs.select_categorised_plugin.getValue() != 'back';\\n})()\\n\"\n          },\n          \"label\": \"Selected Plugin\"\n        },\n        {\n          \"id\": \"bedc38cad44d4125b3cdb2c3257187a4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2d9ef8d6f9e2466797a772929a71dca8\",\n          \"target\": \"be2f7d6d62334ab79a0338ced4983748\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    //return vaInputs.select_category.getValue() == 'all';\\n    return vaInputs.select_categorised_plugin.getValue() == 'all';\\n})()\\n\"\n          },\n          \"label\": \"Show all\"\n        },\n        {\n          \"id\": \"83812394208f4b98bb1e656656ae5fad\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"2d9ef8d6f9e2466797a772929a71dca8\",\n          \"target\": \"74742f9aef66479eba0263ab91bc516b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaInputs.select_categorised_plugin.getValue() == 'back';\\n})()\\n\"\n          },\n          \"label\": \"Back to Category\"\n        },\n        {\n          \"id\": \"b9086246df5d4f8b91ab566c8c22dcc7\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"06da96960a8b439aaf7f959f6185ba81\",\n          \"target\": \"f7265333c487496ea671913385c98a0c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.proceed_options=3\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Search  KB\"\n        },\n        {\n          \"id\": \"acbacb99a1dc4079b6b4de12b0a8188f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4852e70cd76440409d0b24ebe920c86a\",\n          \"target\": \"64c06aaa2c2245fbb921feffaee03580\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.is_the_solution_helpful_=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"dc40ad3503e24da4a3430893b7095f45\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"c9c2dc8f5d4f4d91a06456ba134d80aa\",\n          \"target\": \"6707d43b9a4249e38872e9c9af66d701\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var dataCollectionTopic = vaVars.selectedPlugin.dataCollectionTopic;\\n    var dataCollectionTopicExist = dataCollectionTopic && dataCollectionTopic != ''\\n    return !dataCollectionTopicExist || vaInputs.istopicexecuted.getValue() == 'false' || vaInputs.isdatacollectiontopicexecuted.getValue() == 'false';\\n})()\\n\"\n          },\n          \"label\": \"No data collection done\"\n        },\n        {\n          \"id\": \"60740bea0ef1435c83f20731379039f2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6707d43b9a4249e38872e9c9af66d701\",\n          \"target\": \"4852e70cd76440409d0b24ebe920c86a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9e49cf37af1447ff9f959554c238d484\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"4852e70cd76440409d0b24ebe920c86a\",\n          \"target\": \"f7265333c487496ea671913385c98a0c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.is_the_solution_helpful_=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"8e44013ec234438582c77accfee90164\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"64c06aaa2c2245fbb921feffaee03580\",\n          \"target\": \"91324efa7c8d413ab438069107bfe3ee\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"003affc3a6184d01ba592f393d7e4166\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f7265333c487496ea671913385c98a0c\",\n          \"target\": \"acdd55d7398648f0958239c2f3556f0a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4799ca75e8294af3b7b23ad8bf83f247\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"acdd55d7398648f0958239c2f3556f0a\",\n          \"target\": \"346d2d04f4ec48f1933dfb20ce7f2f7d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c753cc92fb974382aac28a32c869aa59\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"346d2d04f4ec48f1933dfb20ce7f2f7d\",\n          \"target\": \"6a016cff73d14c6cad2e65998ad362ac\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.ask_for_search_again_=true\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"d6fd61cc15ee41a2aa6f7d036b159a0f\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"346d2d04f4ec48f1933dfb20ce7f2f7d\",\n          \"target\": \"e202b4df73cd448ebfb18be84b5eaccd\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.ask_for_search_again_=\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"d9b644b0bd5e4ddebffda11ffc2daae9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e202b4df73cd448ebfb18be84b5eaccd\",\n          \"target\": \"64c06aaa2c2245fbb921feffaee03580\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3788787b5d5b4ba28e9287f5109a6ae1\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"2dfbd35d50d24550819ac779ddabe692\",\n          \"target\": \"c1f844b7fe3947bd932e67f2c7f4d614\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"fc01c1c43253407dbdfe3829e5a8de33\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c1f844b7fe3947bd932e67f2c7f4d614\",\n          \"target\": \"a757cd548f5449d0bf585a1e031e6036\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9ff07f64a54c401794956b595a911a9c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b36a83ea4c9c4e518df8738d85507563\",\n          \"target\": \"9f40b537df03430a9c91619fbb3c71d7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"52b673e0057c42a3b8b70f2f7cca3e1d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"cebab24cfc7c4e7f812bca0110423fd1\",\n          \"target\": \"a47898371b4343a0b135d83a228108ba\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"69f790c9ff3b45fa8bc0972fd0de9799\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b148c9cb19ad473b9638e968b2fa9bf0\",\n          \"target\": \"90f970af09a74ee6bbe1198a4682708d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"53f9a9265bc14a09a002ecc03a9c8165\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"90f970af09a74ee6bbe1198a4682708d\",\n          \"target\": \"6d728da7a306462fa293a0d7910cca56\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var records = JSON.parse(vaVars.pluginRecords);\\n    return records.length > 0;\\n})()\\n\"\n          },\n          \"label\": \"Valid Content Present\"\n        },\n        {\n          \"id\": \"1594da16ad7546e08e959e1d08d33c3b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"90f970af09a74ee6bbe1198a4682708d\",\n          \"target\": \"40132f4e46e34defa6d93f728716e22c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var records = JSON.parse(vaVars.pluginRecords);\\n    return records.length == 0;\\n})()\\n\"\n          },\n          \"label\": \"No Valid Content Present\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"9397d2bfc4a442058898f8372ffeb7de\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"9397d2bfc4a442058898f8372ffeb7de\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"7c4884db8f2b462ea027e62238424281\": {\n      \"id\": \"7c4884db8f2b462ea027e62238424281\",\n      \"name\": \"issue_description\",\n      \"label\": \"Issue Description\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY0NDgxOTEzNDU5MSBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"b36a83ea4c9c4e518df8738d85507563\",\n      \"isHidden\": false\n    },\n    \"d61025af5e7f4783b6d41c266ebe788c\": {\n      \"id\": \"d61025af5e7f4783b6d41c266ebe788c\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"systemInformation\",\n      \"label\": \"systemInformation\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"3f7b5c2d9ffc40a59213bb8f91a9c682\": {\n      \"id\": \"3f7b5c2d9ffc40a59213bb8f91a9c682\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"pluginName\",\n      \"label\": \"pluginName\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"19f811cd8b47453c9e5a7967b738737b\": {\n      \"id\": \"19f811cd8b47453c9e5a7967b738737b\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"selections\",\n      \"label\": \"selections\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"bc9795aba2ad45bf8c8771cc773e50da\": {\n      \"id\": \"bc9795aba2ad45bf8c8771cc773e50da\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"pluginRecords\",\n      \"label\": \"pluginRecords\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"e95e98848eac4a739e01ce414e85fb72\": {\n      \"id\": \"e95e98848eac4a739e01ce414e85fb72\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"selectedPlugin\",\n      \"label\": \"selectedPlugin\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"2a1eb1ae35b34c9dae7a9d4425b7c982\": {\n      \"id\": \"2a1eb1ae35b34c9dae7a9d4425b7c982\",\n      \"name\": \"select_plugin\",\n      \"label\": \"Select Plugin\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"be2f7d6d62334ab79a0338ced4983748\",\n      \"isHidden\": false\n    },\n    \"33c64562a19243c78287f65bd396853c\": {\n      \"id\": \"33c64562a19243c78287f65bd396853c\",\n      \"name\": \"proceed_options\",\n      \"label\": \"Proceed Options\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Yes\",\n          \"value\": \"1\"\n        },\n        {\n          \"label\": \"Back to Searched result\",\n          \"value\": \"2\",\n          \"checked\": true\n        },\n        {\n          \"label\": \"Search KB\",\n          \"value\": \"3\",\n          \"checked\": true\n        },\n        {\n          \"label\": \"Search again\",\n          \"value\": \"4\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"5f599fd114e74492bcb4aeb3e6291f91\",\n      \"isHidden\": false\n    },\n    \"66ca1b11cca047a59b2eaeced75262a5\": {\n      \"id\": \"66ca1b11cca047a59b2eaeced75262a5\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"diagnosticExecutionResult\",\n      \"label\": \"diagnosticExecutionResult\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"80f7a9f812d149d08b0a1855c117b5da\": {\n      \"id\": \"80f7a9f812d149d08b0a1855c117b5da\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"false\"\n      },\n      \"name\": \"isDiagnosticWorked\",\n      \"label\": \"isDiagnosticWorked\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"e04fc14edc7b4520bd95f7dd0073e152\": {\n      \"id\": \"e04fc14edc7b4520bd95f7dd0073e152\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"executeOption\",\n      \"label\": \"executeOption\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"00782042bd9f4659b93db2ef71945123\": {\n      \"id\": \"00782042bd9f4659b93db2ef71945123\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"categories\",\n      \"label\": \"categories\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"653517f063f44468914867e3e4cd1648\": {\n      \"id\": \"653517f063f44468914867e3e4cd1648\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"selectedCategory\",\n      \"label\": \"selectedCategory\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"9f31374489a2415580281699cfb47095\": {\n      \"id\": \"9f31374489a2415580281699cfb47095\",\n      \"name\": \"select_category\",\n      \"label\": \"Select Category\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"74742f9aef66479eba0263ab91bc516b\",\n      \"isHidden\": false\n    },\n    \"e5ca855f6d3441b7977b2177717c41f7\": {\n      \"id\": \"e5ca855f6d3441b7977b2177717c41f7\",\n      \"name\": \"select_categorised_plugin\",\n      \"label\": \"Select Categorised Plugin\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"f52886830ae34d958627821e6672d1ac\",\n      \"isHidden\": false\n    },\n    \"41731779b65c44b685fd1b74e7a4fce1\": {\n      \"id\": \"41731779b65c44b685fd1b74e7a4fce1\",\n      \"name\": \"istopicexecuted\",\n      \"label\": \"Istopicexecuted\",\n      \"defaultValue\": \"istopicexecuted\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"5f81f4ae933d4df68b93cb1d4c455ce0\",\n      \"isHidden\": false\n    },\n    \"35ebba4a5c0b4c428d17675d52186edc\": {\n      \"id\": \"35ebba4a5c0b4c428d17675d52186edc\",\n      \"name\": \"isdatacollectiontopicexecuted\",\n      \"label\": \"Isdatacollectiontopicexecuted\",\n      \"defaultValue\": \"isdatacollectiontopicexecuted\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"nodeId\": \"5f81f4ae933d4df68b93cb1d4c455ce0\",\n      \"isHidden\": false\n    },\n    \"50898b7bb2c94c0bb11050336eed765f\": {\n      \"id\": \"50898b7bb2c94c0bb11050336eed765f\",\n      \"name\": \"is_the_solution_helpful_\",\n      \"label\": \"Is The Solution Helpful?\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"6707d43b9a4249e38872e9c9af66d701\",\n      \"isHidden\": false\n    },\n    \"701fd0f2d7ca4f8c9887c1a5b721dca3\": {\n      \"id\": \"701fd0f2d7ca4f8c9887c1a5b721dca3\",\n      \"name\": \"ask_for_search_again_\",\n      \"label\": \"Ask For Search Again?\",\n      \"varType\": \"boolean\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"nodeId\": \"acdd55d7398648f0958239c2f3556f0a\",\n      \"isHidden\": false\n    },\n    \"89fd3ee1c1fd48a8969fec1d01725aea\": {\n      \"id\": \"89fd3ee1c1fd48a8969fec1d01725aea\",\n      \"name\": \"geniussearchresults\",\n      \"label\": \"Geniussearchresults\",\n      \"defaultValue\": \"geniussearchresults\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"8de76ea8a4c6480c81f97522d037e263\",\n      \"isHidden\": false\n    },\n    \"143081dcebc04bd094b0a812be80a58a\": {\n      \"id\": \"143081dcebc04bd094b0a812be80a58a\",\n      \"name\": \"searchresults\",\n      \"label\": \"Searchresults\",\n      \"defaultValue\": \"searchresults\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"8de76ea8a4c6480c81f97522d037e263\",\n      \"isHidden\": false\n    },\n    \"c7118ba75e824742b16e4ca7d05e1678\": {\n      \"id\": \"c7118ba75e824742b16e4ca7d05e1678\",\n      \"name\": \"shouldaskinfohelpful\",\n      \"label\": \"Shouldaskinfohelpful\",\n      \"defaultValue\": \"shouldaskinfohelpful\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"8de76ea8a4c6480c81f97522d037e263\",\n      \"isHidden\": false\n    },\n    \"816c85e83b254eb58846f1ed76219a9a\": {\n      \"id\": \"816c85e83b254eb58846f1ed76219a9a\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"global_diagnosticdata\",\n      \"label\": \"global_diagnosticdata\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"e85e545b870e4590b6edcbfc0ebb3529","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/434a64fd531db410f738ddeeff7b12c7","value":"434a64fd531db410f738ddeeff7b12c7"},"sys_update_name":"sys_cb_design_topic_e85e545b870e4590b6edcbfc0ebb3529","sys_updated_by":"admin","sys_created_on":"2022-03-10 10:21:22","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"ab9f77522faf4a0d825bdd9264a2e89d\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"ab9f77522faf4a0d825bdd9264a2e89d\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"ab9f77522faf4a0d825bdd9264a2e89d\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"2dfbd35d50d24550819ac779ddabe692\",\"name\":\"Start\",\"expert_mode\":false},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"91324efa7c8d413ab438069107bfe3ee\",\"name\":\"End\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"7c4884db8f2b462ea027e62238424281\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Could you please provide a short description of your issue?\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":true,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"b36a83ea4c9c4e518df8738d85507563\",\"name\":\"Issue description\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"formatType\":\"Text\",\"validationScript\":\"\",\"description\":\"\"},{\"type\":\"LibraryCall\",\"library_topic_name\":\"AI search diagnostics\",\"library_topic_id\":\"7adc619487e10910b6edcbfc0ebb358c\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"search_term\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.issue_description}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"search_application_configuration\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"113e3f608742cd50b6edcbfc0ebb350e\"},\"metadata\":{\"type\":\"Reference\",\"list\":false,\"items\":[],\"use_items\":false,\"table\":\"sys_search_context_config\"}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"geniussearchresults\",\"main_topic_mapped_variable_name\":\"geniussearchresults\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"searchresults\",\"main_topic_mapped_variable_name\":\"searchresults\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"shouldaskinfohelpful\",\"main_topic_mapped_variable_name\":\"shouldaskinfohelpful\"}],\"id\":\"8de76ea8a4c6480c81f97522d037e263\",\"name\":\"AI search diagnostics\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var info = gs.getProperty('glide.buildtag');\\n    var build = 'tokyo';\\n    var patch = '';\\n    if(info && info != ''){\\n        var arr = info.split('__');\\n        var build = arr[0].split('-')[1];\\n        var patch = '';\\n        if (arr.length == 2) {\\n            patch = arr[1].split('-')[0].slice(5);\\n        }\\n    }\\n    varinstanceURL=gs.getProperty('glide.servlet.uri');\\n    varinstanceName=gs.getProperty('instance_name');\\n    var ais_enable = gs.getProperty('glide.ais.enabled') && gs.getProperty(\\\"sn_ci_diagnostics.ais_enable\\\", \\\"false\\\");\\n    var gr = new GlideRecord('sys_upgrade_history');\\n    gr.addEncodedQuery('to_versionLIKEglide-');\\n    gr.query();\\n    if(gr.next()){\\n       var latestUpgrade = {};\\n       latestUpgrade.from = gr.getValue('from_version');\\n       latestUpgrade.to = gr.getValue('to_version');\\n       latestUpgrade.dateTime = gr.getValue('upgrade_finished');\\n    }\\n    var systemInfo = {'instanceName':instanceName, 'instanceURL':instanceURL, 'build':build, 'patch':patch, 'ais_enable':ais_enable, 'latestUpgrade':latestUpgrade};\\n    vaVars.systemInformation = JSON.stringify(systemInfo);\\n})()\\n\",\"id\":\"a757cd548f5449d0bf585a1e031e6036\",\"name\":\"Capture system information\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.pluginName = null;\\n    vaVars.selections = null;\\n    vaVars.pluginRecords = null;\\n    vaVars.selectedPlugin = null;\\n    vaVars.executeOption = null;\\n    vaVars.categories = null;\\n    vaVars.selectedCategory = null;\\n    vaVars.global_search_kb = false;\\n    vaVars.global_issue_description = null;\\n})()\\n\",\"id\":\"6a016cff73d14c6cad2e65998ad362ac\",\"name\":\"Cleanup\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_issue_description = vaInputs.issue_description;\\n    var output=[];\\n    if(vaInputs.searchresults && vaInputs.searchresults != '') {\\n        var results = JSON.parse(vaInputs.searchresults);\\n        if(results && results.length && results.length > 0 ){\\n            for(var i = 0; i < results.length; i++){\\n                var result = results[i];\\n                var sysId=result.propValues.model.sys_id;\\n                output.push(sysId);\\n            }\\n        }\\n    }\\n    vaVars.selections=JSON.stringify(output);\\n})()\\n\",\"id\":\"a701d259a7fc4ed088a223c0b70a7389\",\"name\":\"Capture Sys Ids\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Search result exist\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var sysIds = JSON.parse(vaVars.selections);\\n    return sysIds.length > 0;\\n})()\\n\\n\"},\"id\":\"e089ec8ee50847a5938e7cb71b86012d\",\"name\":\"Search result exist\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Search result empty\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var sysIds = JSON.parse(vaVars.selections);\\n    return sysIds.length == 0;\\n})()\\n\"},\"id\":\"bc85295946854491a45eee2e5e951e51\",\"name\":\"Search result empty\",\"expert_mode\":false}],\"id\":\"a47898371b4343a0b135d83a228108ba\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var ifRequiredPluginNotInstalled = function(pluginIds){\\n        if(!pluginIds || pluginIds == ''){\\n            return false;\\n        }\\n        var plugins = pluginIds.split(',');\\n        var pm = new GlidePluginManager();\\n        for(var i=0; i < plugins.length; i++){\\n            if(!pm.isActive(plugins[i]))\\n              return true;\\n        }\\n        return false;\\n    };\\n    var gr = new GlideRecord('ci_diagnostic_content');\\n    var selectionObj = JSON.parse(vaVars.selections);\\n    var sysids = '';\\n    for(var i=0; i < selectionObj.length; i++){\\n        if (i!=0){\\n           sysids = sysids + ',';\\n        }\\n        sysids = sysids +  selectionObj[i];\\n    }\\n    gr.addQuery('sys_id','IN',sysids);\\n    gr.query();\\n    var recs = {}\\n    var allRecords = [];\\n    while(gr.next()){\\n        var requiredPlugins = gr.getValue('plugin_dependency')\\n        if(ifRequiredPluginNotInstalled(requiredPlugins)){\\n             continue;\\n        }\\n        var obj = {};\\n        var category = gr.category.name;\\n        obj.sysId = gr.getUniqueValue();\\n        obj.name = gr.getValue('name');\\n        obj.desc = gr.getValue('description');\\n        obj.category = gr.getValue('category');\\n        obj.categoryName = gr.category.name + '';\\n        obj.topic = gr.support_topic.name + '';\\n        obj.dataCollectionTopic = gr.data_collection_topic.name + '';\\n        obj.healthCheckTopic = gr.category.health_check_topic.name + '';\\n        if (recs[category] && recs[category].length > 0 ) {\\n            recs[category].push(obj);\\n        }else {\\n            var arr = [];\\n            arr.push(obj);\\n            recs[category] = arr;\\n        }\\n        allRecords.push(obj);\\n    }\\n    vaVars.pluginRecords = JSON.stringify(allRecords);\\n    vaVars.categories = JSON.stringify(recs);\\n}\\n)()\",\"id\":\"b148c9cb19ad473b9638e968b2fa9bf0\",\"name\":\"Get Applicable Diagnostics records\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"be2f7d6d62334ab79a0338ced4983748\",\"name\":\"Select plugin\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"2a1eb1ae35b34c9dae7a9d4425b7c982\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Based on your input, I found below solutions. Could you please select one from the list to proceed further?\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = [];\\n    var plugins = JSON.parse(vaVars.pluginRecords);\\n    for(var i=0; i<plugins.length ; i++){\\n        options.push({'value': plugins[i].sysId, 'label': plugins[i].name});\\n    }\\n    options.push({'value': 'none', 'label': gs.getMessage('Not matching')});\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No records found please re search\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = [];\\n    var plugins = JSON.parse(vaVars.pluginRecords);\\n    for(var i=0; i<plugins.length ; i++){\\n        options.push({'value': plugins[i].sysId, 'label': plugins[i].name});\\n    }\\n    options.push({'value': 'none', 'label': gs.getMessage('Not matching')});\\n    return options;\\n})()\\n\"},\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"If not matching\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var categoriesCount = Object.keys(JSON.parse(vaVars.categories)).length;\\n    if (categoriesCount > 1 && vaInputs.select_category.getValue() != 'all' && vaInputs.select_categorised_plugin.getValue() != 'all'){\\n        return vaInputs.select_categorised_plugin.getValue() == 'none';\\n    }else {\\n        return vaInputs.select_plugin.getValue() == 'none';\\n    }\\n})()\\n\"},\"id\":\"b3cc876e7f7645ba9360c99f495f0099\",\"name\":\"If not matching\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Selected plugin record\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var categoriesCount = Object.keys(JSON.parse(vaVars.categories)).length;\\n    if (categoriesCount > 1 && vaInputs.select_category.getValue() != 'all'){\\n        vaInputs.select_categorised_plugin.getValue() != 'all' && vaInputs.select_categorised_plugin.getValue() != 'back';\\n    }else {\\n        return vaInputs.select_plugin.getValue() != 'none';\\n    }\\n})()\\n\\n\"},\"id\":\"a9cc12da3cd34b599178ef2eebecd6af\",\"name\":\"Selected plugin record\",\"expert_mode\":false}],\"id\":\"af37f96b1a714c29b16247aee689604e\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    return JSON.parse(vaVars.selectedPlugin).desc;\\n})()\\n\"}],\"request_feedback\":true,\"id\":\"5052404e25374c36bc320a17f50ef2f3\",\"name\":\"Show plugin description\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"5f599fd114e74492bcb4aeb3e6291f91\",\"name\":\"Proceed options\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"33c64562a19243c78287f65bd396853c\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Want to proceed with this diagnosis?\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Proceed with selected Diagnostic\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"proceed_options=1\"},\"id\":\"80607576ffc44170ae5e39d469c7d604\",\"name\":\"Proceed with selected Diagnostic\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Back to searched result\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"proceed_options=2\"},\"id\":\"3120ed6bbbda4179919c3933f55c3a42\",\"name\":\"Back to searched result\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Search again\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"proceed_options=4\"},\"id\":\"e1300834353c49bcb80eb30b287ca1ed\",\"name\":\"Search again\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Search  KB\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"proceed_options=3\"},\"id\":\"692e2e764fd54fe999edb1b8c48e7f45\",\"name\":\"Search  KB\",\"expert_mode\":false}],\"id\":\"06da96960a8b439aaf7f959f6185ba81\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var selected;\\n    var categoriesCount = Object.keys(JSON.parse(vaVars.categories)).length;\\n    if (categoriesCount > 1 && vaInputs.select_category.getValue() != 'all'){\\n        selected = vaInputs.select_categorised_plugin.getValue();\\n    }else {\\n        selected = vaInputs.select_plugin.getValue();\\n    }\\n    var plugins = JSON.parse(vaVars.pluginRecords);\\n    for(var i=0; i<plugins.length; i++){\\n       if(selected == plugins[i].sysId){\\n           vaVars.selectedPlugin = JSON.stringify(plugins[i]);\\n           break;\\n       }\\n    }\\n})()\\n\",\"id\":\"1bc8fd3e5095447a9fdf96612f55c1c2\",\"name\":\"Store selected plugin\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No diagnosis available now for your issue\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"40132f4e46e34defa6d93f728716e22c\",\"name\":\"No matching diagnostic found\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Diagnostic Topic Executer\",\"library_topic_id\":\"6fcf5a148775c150b6edcbfc0ebb3518\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"diagnosticcontent\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.selectedPlugin}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"istopicexecuted\",\"main_topic_mapped_variable_name\":\"istopicexecuted\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"isdatacollectiontopicexecuted\",\"main_topic_mapped_variable_name\":\"isdatacollectiontopicexecuted\"}],\"id\":\"5f81f4ae933d4df68b93cb1d4c455ce0\",\"name\":\"Diagnostic Topic Executer\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"only one category\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var plugins = Object.keys(JSON.parse(vaVars.categories));\\n    return plugins.length == 1;\\n})()\\n\"},\"id\":\"ab361d1c251343f19feeb6878a52d7b4\",\"name\":\"only one category\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"multiple category\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var plugins = Object.keys(JSON.parse(vaVars.categories));\\n    return plugins.length > 1;\\n})()\\n\"},\"id\":\"d30b8de9284a431bacb1c0eaa9bc0e92\",\"name\":\"multiple category\",\"expert_mode\":false}],\"id\":\"6d728da7a306462fa293a0d7910cca56\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"74742f9aef66479eba0263ab91bc516b\",\"name\":\"Select Category\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"9f31374489a2415580281699cfb47095\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Based on your input, I found below categories. Could you please select one from the list to proceed further?\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = [];\\n    var plugins = Object.keys(JSON.parse(vaVars.categories));\\n    for(var i=0; i<plugins.length ; i++){\\n        options.push({'value': plugins[i] , 'label': plugins[i]});\\n    }\\n    options.push({'value': 'all', 'label': gs.getMessage('Show all')});\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No records found please re search\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = [];\\n    var plugins = Object.keys(JSON.parse(vaVars.categories));\\n    for(var i=0; i<plugins.length ; i++){\\n        options.push({'value': plugins[i] , 'label': plugins[i]});\\n    }\\n    options.push({'value': 'all', 'label': gs.getMessage('Show all')});\\n    return options;\\n})()\\n\"},\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Show all\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaInputs.select_category.getValue() == 'all';\\n})()\\n\"},\"id\":\"0d1aaca934f94a68b3590e1a5d6ada0f\",\"name\":\"Show all\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Category selected\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaInputs.select_category.getValue() != 'all';\\n})()\\n\"},\"id\":\"3630f5518ef44e62b81665b5c4ddbd0a\",\"name\":\"Category selected\",\"expert_mode\":false}],\"id\":\"675a73dc31114775a73439abfaa4cc80\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"f52886830ae34d958627821e6672d1ac\",\"name\":\"select categorised plugin\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"variable_id\":\"e5ca855f6d3441b7977b2177717c41f7\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Based on your input we found below issues. Please select one to proceed further\\\", vaContext.getRequesterLang())\"},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = [];\\n    var plugins = JSON.parse(vaVars.categories)[vaInputs.select_category.getValue()];\\n    for(var i=0; i<plugins.length ; i++){\\n        options.push({'value': plugins[i].sysId, 'label': plugins[i].name});\\n    }\\n    options.push({'value': 'back', 'label': gs.getMessage('Back to Category')});\\n    options.push({'value': 'all', 'label': gs.getMessage('Show all')});\\n    return options;\\n})()\\n\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"No records found please re search\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    /* Code your script logic here. For example, you might want to call an external web service\\n       to find the best local Italian restaurants.  Call a Restaurants Web Service then use the results\\n       to populate an options array.\\n\\n        var options = [];\\n        options.push({ 'value': 'best_italian_1', 'label': gs.getMessageLang(\\\"Best Italian Restaurant Ever\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        options.push({ 'value': 'best_italian_2', 'label': gs.getMessageLang(\\\"Even Better Italian Restaurant\\\", vaContext.getRequesterLang()), 'render_style': 'data' });\\n        return options;\\n    */\\n\\n    var options = [];\\n    var plugins = JSON.parse(vaVars.categories)[vaInputs.select_category.getValue()];\\n    for(var i=0; i<plugins.length ; i++){\\n        options.push({'value': plugins[i].sysId, 'label': plugins[i].name});\\n    }\\n    options.push({'value': 'back', 'label': gs.getMessage('Back to Category')});\\n    options.push({'value': 'all', 'label': gs.getMessage('Show all')});\\n    return options;\\n})()\\n\"},\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Selected Plugin\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaInputs.select_categorised_plugin.getValue() != 'all' && vaInputs.select_categorised_plugin.getValue() != 'back';\\n})()\\n\"},\"id\":\"c615a5b70df44c7b90a896f25fa1c1fd\",\"name\":\"Selected Plugin\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Show all\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    //return vaInputs.select_category.getValue() == 'all';\\n    return vaInputs.select_categorised_plugin.getValue() == 'all';\\n})()\\n\"},\"id\":\"2c888e2d364646cca4afeef80b3650e9\",\"name\":\"Show all\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"Back to Category\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaInputs.select_categorised_plugin.getValue() == 'back';\\n})()\\n\"},\"id\":\"976dde4fa0f84376801fc4ac2324ccdd\",\"name\":\"Back to Category\",\"expert_mode\":false}],\"id\":\"2d9ef8d6f9e2466797a772929a71dca8\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Data collected\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    return vaInputs.isdatacollectiontopicexecuted.getValue() == 'true';\\n})()\\n\"},\"id\":\"f21647c021ff4a478a11b41d29b5b615\",\"name\":\"Data collected\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No data collection done\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate the branch condition's applicability.\\n       For example:\\n\\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\\n       return applies;\\n    */\\n    var dataCollectionTopic = vaVars.selectedPlugin.dataCollectionTopic;\\n    var dataCollectionTopicExist = dataCollectionTopic && dataCollectionTopic != ''\\n    return !dataCollectionTopicExist || vaInputs.istopicexecuted.getValue() == 'false' || vaInputs.isdatacollectiontopicexecuted.getValue() == 'false';\\n})()\\n\"},\"id\":\"085a140a03044f7a808d54130814bf6a\",\"name\":\"No data collection done\",\"expert_mode\":false}],\"id\":\"c9c2dc8f5d4f4d91a06456ba134d80aa\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"LinkOutputPrompt\",\"header\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"You can use the link below to search available KBs related to your search.\\\", vaContext.getRequesterLang())\"},\"label\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Click here\\\", vaContext.getRequesterLang())\"},\"url\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n        return encodeURI('https://support.servicenow.com/kb?id=ns_search&filters=kb&q=' + vaInputs.issue_description);\\n})()\\n\"},\"link_type\":\"single\",\"multi_link_script\":\"\",\"id\":\"f7265333c487496ea671913385c98a0c\",\"name\":\"Kb Option\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"is_the_solution_helpful_=true\"},\"id\":\"bc4d52a9f5064da6aa40abd02787a6f6\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"is_the_solution_helpful_=\"},\"id\":\"dce013038d89457cb24b218c67f74e80\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"4852e70cd76440409d0b24ebe920c86a\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"50898b7bb2c94c0bb11050336eed765f\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"If you found a solution, please click yes to exit or no for further diagnosis which includes downloading support data.\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"6707d43b9a4249e38872e9c9af66d701\",\"name\":\"Is the solution helpful?\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"description\":\"\"},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:48974c0387424590b6edcbfc0ebb3514:node:64c06aaa2c2245fbb921feffaee03580:field:0\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"64c06aaa2c2245fbb921feffaee03580\",\"name\":\"End Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"InputPrompt\",\"variable_id\":\"701fd0f2d7ca4f8c9887c1a5b721dca3\",\"message\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Do you want to search again? Press yes to search or no to download support data and exit.\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"request_feedback\":false,\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"skipreprompt\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"acdd55d7398648f0958239c2f3556f0a\",\"name\":\"Ask for search again?\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"description\":\"\"},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"ask_for_search_again_=true\"},\"id\":\"7dd365a4294a41fabb39c9c9a68af734\",\"name\":\"Yes\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"ask_for_search_again_=\"},\"id\":\"65f44562698040508b6e6235c3196f73\",\"name\":\"No\",\"expert_mode\":false}],\"id\":\"346d2d04f4ec48f1933dfb20ce7f2f7d\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"LinkOutputPrompt\",\"header\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Download Support Data\\\", vaContext.getRequesterLang())\"},\"label\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Download Here\\\", vaContext.getRequesterLang())\"},\"url\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var transcript = JSON.stringify(vaSystem.getTranscript());\\n    var diagnosticData = {};\\n    diagnosticData.systemInformation = JSON.parse(vaVars.systemInformation);\\n    if(vaVars.global_diagnosticdata && vaVars.global_diagnosticdata != ''){\\n        var plugindata = JSON.parse(vaVars.global_diagnosticdata);\\n        var pluginName = JSON.parse(vaVars.selectedPlugin).name;\\n        var pluginCategory = JSON.parse(vaVars.selectedPlugin).categoryName;\\n        var appendData = {};\\n        appendData[pluginName] = plugindata;\\n        diagnosticData[pluginCategory] = appendData;\\n    }\\n    diagnosticData.transcript = transcript;\\n    var interactionSysId = vaSystem.getInteractionSysId();\\n    var gr = new GlideRecord('interaction');\\n    gr.get(interactionSysId);\\n    var gsa = new GlideSysAttachment();\\n    var id = gsa.write(gr, \\\"diagnostic_data.json\\\", 'text/plain', JSON.stringify(diagnosticData, null, 4));\\n    return '/sys_attachment.do?sys_id='+id;\\n})()\\n\"},\"link_type\":\"single\",\"multi_link_script\":\"\",\"id\":\"e202b4df73cd448ebfb18be84b5eaccd\",\"name\":\"Download Support Data\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"va:topic:48974c0387424590b6edcbfc0ebb3514:node:c1f844b7fe3947bd932e67f2c7f4d614:field:0\\\", vaContext.getRequesterLang())\"}],\"request_feedback\":true,\"id\":\"c1f844b7fe3947bd932e67f2c7f4d614\",\"name\":\"Greetings\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false,\"secure\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"ai enable\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.systemInformation).ais_enable === 'true';\\n})()\\n\"},\"id\":\"11a2cb84186646d291f80dd67ca72eec\",\"name\":\"ai enable\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"ai disable\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.parse(vaVars.systemInformation).ais_enable === 'false';\\n})()\\n\"},\"id\":\"2a320eab206d456a800c917bb6780dc7\",\"name\":\"ai disable\",\"expert_mode\":false}],\"id\":\"9f40b537df03430a9c91619fbb3c71d7\",\"goal_id\":\"primary\",\"expert_mode\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var output=[];\\n    var gr = new GlideRecord('ci_diagnostic_content');\\n    gr.addQuery('IR_AND_OR_QUERY', vaInputs.issue_description);\\n    gr.addQuery('active','true');\\n    gr.query();\\n    while(gr.next()){\\n       output.push(gr.getUniqueValue());\\n    }\\n    vaVars.selections=JSON.stringify(output);\\n})()\\n\",\"id\":\"cebab24cfc7c4e7f812bca0110423fd1\",\"name\":\"Get Records\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"expert_mode\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Valid Content Present\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var records = JSON.parse(vaVars.pluginRecords);\\n    return records.length > 0;\\n})()\\n\"},\"id\":\"1270e4131a0a475481af3cc0bac6b34c\",\"name\":\"Valid Content Present\",\"expert_mode\":false},{\"type\":\"Branch\",\"label\":\"No Valid Content Present\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var records = JSON.parse(vaVars.pluginRecords);\\n    return records.length == 0;\\n})()\\n\"},\"id\":\"0a2c8bffc73c4f178cee5243997bbed3\",\"name\":\"No Valid Content Present\",\"expert_mode\":false}],\"id\":\"90f970af09a74ee6bbe1198a4682708d\",\"goal_id\":\"primary\",\"expert_mode\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"5f81f4ae933d4df68b93cb1d4c455ce0\",\"target_node_id\":\"c9c2dc8f5d4f4d91a06456ba134d80aa\",\"id\":\"1c8d58a63f9d453ca4db4f8fbb53c796\"},{\"type\":\"Edge\",\"source_node_id\":\"9f40b537df03430a9c91619fbb3c71d7\",\"target_node_id\":\"8de76ea8a4c6480c81f97522d037e263\",\"branch_id\":\"11a2cb84186646d291f80dd67ca72eec\",\"id\":\"c45f354ecaa14608a27fe4a73e7f7188\",\"name\":\"11a2cb84186646d291f80dd67ca72eec\"},{\"type\":\"Edge\",\"source_node_id\":\"9f40b537df03430a9c91619fbb3c71d7\",\"target_node_id\":\"cebab24cfc7c4e7f812bca0110423fd1\",\"branch_id\":\"2a320eab206d456a800c917bb6780dc7\",\"id\":\"cf36331cd6d1456cb564bbb695397aeb\",\"name\":\"2a320eab206d456a800c917bb6780dc7\"},{\"type\":\"Edge\",\"source_node_id\":\"c9c2dc8f5d4f4d91a06456ba134d80aa\",\"target_node_id\":\"e202b4df73cd448ebfb18be84b5eaccd\",\"branch_id\":\"f21647c021ff4a478a11b41d29b5b615\",\"id\":\"cbcf8590536c48d3ba42c80aabc7bce5\",\"name\":\"f21647c021ff4a478a11b41d29b5b615\"},{\"type\":\"Edge\",\"source_node_id\":\"af37f96b1a714c29b16247aee689604e\",\"target_node_id\":\"f7265333c487496ea671913385c98a0c\",\"branch_id\":\"b3cc876e7f7645ba9360c99f495f0099\",\"id\":\"92a63803602d405190bf73edd9724c91\",\"name\":\"b3cc876e7f7645ba9360c99f495f0099\"},{\"type\":\"Edge\",\"source_node_id\":\"06da96960a8b439aaf7f959f6185ba81\",\"target_node_id\":\"5f81f4ae933d4df68b93cb1d4c455ce0\",\"branch_id\":\"80607576ffc44170ae5e39d469c7d604\",\"id\":\"14f5e1a2e7a949e3b28faccc2134c4e8\",\"name\":\"80607576ffc44170ae5e39d469c7d604\"},{\"type\":\"Edge\",\"source_node_id\":\"a701d259a7fc4ed088a223c0b70a7389\",\"target_node_id\":\"a47898371b4343a0b135d83a228108ba\",\"id\":\"2fd2a8bdacc84bb99ec01624e8637530\"},{\"type\":\"Edge\",\"source_node_id\":\"a757cd548f5449d0bf585a1e031e6036\",\"target_node_id\":\"6a016cff73d14c6cad2e65998ad362ac\",\"id\":\"749c01e9195042d38799fd4865c11552\"},{\"type\":\"Edge\",\"source_node_id\":\"6a016cff73d14c6cad2e65998ad362ac\",\"target_node_id\":\"b36a83ea4c9c4e518df8738d85507563\",\"id\":\"eb5c58630ddb462c8bd24618e53c036c\"},{\"type\":\"Edge\",\"source_node_id\":\"8de76ea8a4c6480c81f97522d037e263\",\"target_node_id\":\"a701d259a7fc4ed088a223c0b70a7389\",\"id\":\"9a529d5dbb704419b46a6b693886e8b9\"},{\"type\":\"Edge\",\"source_node_id\":\"a47898371b4343a0b135d83a228108ba\",\"target_node_id\":\"b148c9cb19ad473b9638e968b2fa9bf0\",\"branch_id\":\"e089ec8ee50847a5938e7cb71b86012d\",\"id\":\"c9fbe6d77bd2414ea3bd104bdcdb3674\",\"name\":\"e089ec8ee50847a5938e7cb71b86012d\"},{\"type\":\"Edge\",\"source_node_id\":\"be2f7d6d62334ab79a0338ced4983748\",\"target_node_id\":\"af37f96b1a714c29b16247aee689604e\",\"id\":\"276cdfffd5534d02a799213a0f5a6139\"},{\"type\":\"Edge\",\"source_node_id\":\"5052404e25374c36bc320a17f50ef2f3\",\"target_node_id\":\"5f599fd114e74492bcb4aeb3e6291f91\",\"id\":\"682861de7e4146fa84f289fa26694ef2\"},{\"type\":\"Edge\",\"source_node_id\":\"5f599fd114e74492bcb4aeb3e6291f91\",\"target_node_id\":\"06da96960a8b439aaf7f959f6185ba81\",\"id\":\"4ecc1615b4c4451bb84cacd26152021a\"},{\"type\":\"Edge\",\"source_node_id\":\"06da96960a8b439aaf7f959f6185ba81\",\"target_node_id\":\"6d728da7a306462fa293a0d7910cca56\",\"branch_id\":\"3120ed6bbbda4179919c3933f55c3a42\",\"id\":\"fc8d266d1f744a85a20871f320d6f7d1\",\"name\":\"3120ed6bbbda4179919c3933f55c3a42\"},{\"type\":\"Edge\",\"source_node_id\":\"06da96960a8b439aaf7f959f6185ba81\",\"target_node_id\":\"6a016cff73d14c6cad2e65998ad362ac\",\"branch_id\":\"e1300834353c49bcb80eb30b287ca1ed\",\"id\":\"b3b6369e5f51454a9fe45150e24983d1\",\"name\":\"e1300834353c49bcb80eb30b287ca1ed\"},{\"type\":\"Edge\",\"source_node_id\":\"af37f96b1a714c29b16247aee689604e\",\"target_node_id\":\"1bc8fd3e5095447a9fdf96612f55c1c2\",\"branch_id\":\"a9cc12da3cd34b599178ef2eebecd6af\",\"id\":\"79c9759f242249f4aaef004ed38744bd\",\"name\":\"a9cc12da3cd34b599178ef2eebecd6af\"},{\"type\":\"Edge\",\"source_node_id\":\"1bc8fd3e5095447a9fdf96612f55c1c2\",\"target_node_id\":\"5052404e25374c36bc320a17f50ef2f3\",\"id\":\"e6d05a6ae2074220a3765a07874d4059\"},{\"type\":\"Edge\",\"source_node_id\":\"a47898371b4343a0b135d83a228108ba\",\"target_node_id\":\"40132f4e46e34defa6d93f728716e22c\",\"branch_id\":\"bc85295946854491a45eee2e5e951e51\",\"id\":\"417b28212fb149d59517fcc288ff3c75\",\"name\":\"bc85295946854491a45eee2e5e951e51\"},{\"type\":\"Edge\",\"source_node_id\":\"40132f4e46e34defa6d93f728716e22c\",\"target_node_id\":\"f7265333c487496ea671913385c98a0c\",\"id\":\"411380edc9ac480892917d10d26a19c1\"},{\"type\":\"Edge\",\"source_node_id\":\"6d728da7a306462fa293a0d7910cca56\",\"target_node_id\":\"be2f7d6d62334ab79a0338ced4983748\",\"branch_id\":\"ab361d1c251343f19feeb6878a52d7b4\",\"id\":\"4e3729f6cccc41dc9b11c1053dbed8c3\",\"name\":\"ab361d1c251343f19feeb6878a52d7b4\"},{\"type\":\"Edge\",\"source_node_id\":\"6d728da7a306462fa293a0d7910cca56\",\"target_node_id\":\"74742f9aef66479eba0263ab91bc516b\",\"branch_id\":\"d30b8de9284a431bacb1c0eaa9bc0e92\",\"id\":\"7e072b67414c43c38fcf1f2f03ee0286\",\"name\":\"d30b8de9284a431bacb1c0eaa9bc0e92\"},{\"type\":\"Edge\",\"source_node_id\":\"74742f9aef66479eba0263ab91bc516b\",\"target_node_id\":\"675a73dc31114775a73439abfaa4cc80\",\"id\":\"03adda8f13c349b3acc90fc5345224fc\"},{\"type\":\"Edge\",\"source_node_id\":\"675a73dc31114775a73439abfaa4cc80\",\"target_node_id\":\"be2f7d6d62334ab79a0338ced4983748\",\"branch_id\":\"0d1aaca934f94a68b3590e1a5d6ada0f\",\"id\":\"00ad01eee0e349fba4abe9369cded3bf\",\"name\":\"0d1aaca934f94a68b3590e1a5d6ada0f\"},{\"type\":\"Edge\",\"source_node_id\":\"675a73dc31114775a73439abfaa4cc80\",\"target_node_id\":\"f52886830ae34d958627821e6672d1ac\",\"branch_id\":\"3630f5518ef44e62b81665b5c4ddbd0a\",\"id\":\"05d641c679724be5b455f9d14e8645aa\",\"name\":\"3630f5518ef44e62b81665b5c4ddbd0a\"},{\"type\":\"Edge\",\"source_node_id\":\"f52886830ae34d958627821e6672d1ac\",\"target_node_id\":\"2d9ef8d6f9e2466797a772929a71dca8\",\"id\":\"a02fb4a1e60f408c8c17150aba3bcae8\"},{\"type\":\"Edge\",\"source_node_id\":\"2d9ef8d6f9e2466797a772929a71dca8\",\"target_node_id\":\"1bc8fd3e5095447a9fdf96612f55c1c2\",\"branch_id\":\"c615a5b70df44c7b90a896f25fa1c1fd\",\"id\":\"3dc2c105ecd747c7b7ea15861ec6106c\",\"name\":\"c615a5b70df44c7b90a896f25fa1c1fd\"},{\"type\":\"Edge\",\"source_node_id\":\"2d9ef8d6f9e2466797a772929a71dca8\",\"target_node_id\":\"be2f7d6d62334ab79a0338ced4983748\",\"branch_id\":\"2c888e2d364646cca4afeef80b3650e9\",\"id\":\"bedc38cad44d4125b3cdb2c3257187a4\",\"name\":\"2c888e2d364646cca4afeef80b3650e9\"},{\"type\":\"Edge\",\"source_node_id\":\"2d9ef8d6f9e2466797a772929a71dca8\",\"target_node_id\":\"74742f9aef66479eba0263ab91bc516b\",\"branch_id\":\"976dde4fa0f84376801fc4ac2324ccdd\",\"id\":\"83812394208f4b98bb1e656656ae5fad\",\"name\":\"976dde4fa0f84376801fc4ac2324ccdd\"},{\"type\":\"Edge\",\"source_node_id\":\"06da96960a8b439aaf7f959f6185ba81\",\"target_node_id\":\"f7265333c487496ea671913385c98a0c\",\"branch_id\":\"692e2e764fd54fe999edb1b8c48e7f45\",\"id\":\"b9086246df5d4f8b91ab566c8c22dcc7\",\"name\":\"692e2e764fd54fe999edb1b8c48e7f45\"},{\"type\":\"Edge\",\"source_node_id\":\"4852e70cd76440409d0b24ebe920c86a\",\"target_node_id\":\"64c06aaa2c2245fbb921feffaee03580\",\"branch_id\":\"bc4d52a9f5064da6aa40abd02787a6f6\",\"id\":\"acbacb99a1dc4079b6b4de12b0a8188f\",\"name\":\"bc4d52a9f5064da6aa40abd02787a6f6\"},{\"type\":\"Edge\",\"source_node_id\":\"c9c2dc8f5d4f4d91a06456ba134d80aa\",\"target_node_id\":\"6707d43b9a4249e38872e9c9af66d701\",\"branch_id\":\"085a140a03044f7a808d54130814bf6a\",\"id\":\"dc40ad3503e24da4a3430893b7095f45\",\"name\":\"085a140a03044f7a808d54130814bf6a\"},{\"type\":\"Edge\",\"source_node_id\":\"6707d43b9a4249e38872e9c9af66d701\",\"target_node_id\":\"4852e70cd76440409d0b24ebe920c86a\",\"id\":\"60740bea0ef1435c83f20731379039f2\"},{\"type\":\"Edge\",\"source_node_id\":\"4852e70cd76440409d0b24ebe920c86a\",\"target_node_id\":\"f7265333c487496ea671913385c98a0c\",\"branch_id\":\"dce013038d89457cb24b218c67f74e80\",\"id\":\"9e49cf37af1447ff9f959554c238d484\",\"name\":\"dce013038d89457cb24b218c67f74e80\"},{\"type\":\"Edge\",\"source_node_id\":\"64c06aaa2c2245fbb921feffaee03580\",\"target_node_id\":\"91324efa7c8d413ab438069107bfe3ee\",\"id\":\"8e44013ec234438582c77accfee90164\"},{\"type\":\"Edge\",\"source_node_id\":\"f7265333c487496ea671913385c98a0c\",\"target_node_id\":\"acdd55d7398648f0958239c2f3556f0a\",\"id\":\"003affc3a6184d01ba592f393d7e4166\"},{\"type\":\"Edge\",\"source_node_id\":\"acdd55d7398648f0958239c2f3556f0a\",\"target_node_id\":\"346d2d04f4ec48f1933dfb20ce7f2f7d\",\"id\":\"4799ca75e8294af3b7b23ad8bf83f247\"},{\"type\":\"Edge\",\"source_node_id\":\"346d2d04f4ec48f1933dfb20ce7f2f7d\",\"target_node_id\":\"6a016cff73d14c6cad2e65998ad362ac\",\"branch_id\":\"7dd365a4294a41fabb39c9c9a68af734\",\"id\":\"c753cc92fb974382aac28a32c869aa59\",\"name\":\"7dd365a4294a41fabb39c9c9a68af734\"},{\"type\":\"Edge\",\"source_node_id\":\"346d2d04f4ec48f1933dfb20ce7f2f7d\",\"target_node_id\":\"e202b4df73cd448ebfb18be84b5eaccd\",\"branch_id\":\"65f44562698040508b6e6235c3196f73\",\"id\":\"d6fd61cc15ee41a2aa6f7d036b159a0f\",\"name\":\"65f44562698040508b6e6235c3196f73\"},{\"type\":\"Edge\",\"source_node_id\":\"e202b4df73cd448ebfb18be84b5eaccd\",\"target_node_id\":\"64c06aaa2c2245fbb921feffaee03580\",\"id\":\"d9b644b0bd5e4ddebffda11ffc2daae9\"},{\"type\":\"Edge\",\"source_node_id\":\"2dfbd35d50d24550819ac779ddabe692\",\"target_node_id\":\"c1f844b7fe3947bd932e67f2c7f4d614\",\"id\":\"3788787b5d5b4ba28e9287f5109a6ae1\"},{\"type\":\"Edge\",\"source_node_id\":\"c1f844b7fe3947bd932e67f2c7f4d614\",\"target_node_id\":\"a757cd548f5449d0bf585a1e031e6036\",\"id\":\"fc01c1c43253407dbdfe3829e5a8de33\"},{\"type\":\"Edge\",\"source_node_id\":\"b36a83ea4c9c4e518df8738d85507563\",\"target_node_id\":\"9f40b537df03430a9c91619fbb3c71d7\",\"id\":\"9ff07f64a54c401794956b595a911a9c\"},{\"type\":\"Edge\",\"source_node_id\":\"cebab24cfc7c4e7f812bca0110423fd1\",\"target_node_id\":\"a47898371b4343a0b135d83a228108ba\",\"id\":\"52b673e0057c42a3b8b70f2f7cca3e1d\"},{\"type\":\"Edge\",\"source_node_id\":\"b148c9cb19ad473b9638e968b2fa9bf0\",\"target_node_id\":\"90f970af09a74ee6bbe1198a4682708d\",\"id\":\"69f790c9ff3b45fa8bc0972fd0de9799\"},{\"type\":\"Edge\",\"source_node_id\":\"90f970af09a74ee6bbe1198a4682708d\",\"target_node_id\":\"6d728da7a306462fa293a0d7910cca56\",\"branch_id\":\"1270e4131a0a475481af3cc0bac6b34c\",\"id\":\"53f9a9265bc14a09a002ecc03a9c8165\",\"name\":\"1270e4131a0a475481af3cc0bac6b34c\"},{\"type\":\"Edge\",\"source_node_id\":\"90f970af09a74ee6bbe1198a4682708d\",\"target_node_id\":\"40132f4e46e34defa6d93f728716e22c\",\"branch_id\":\"0a2c8bffc73c4f178cee5243997bbed3\",\"id\":\"1594da16ad7546e08e959e1d08d33c3b\",\"name\":\"0a2c8bffc73c4f178cee5243997bbed3\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"systemInformation\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"d61025af5e7f4783b6d41c266ebe788c\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"pluginName\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"3f7b5c2d9ffc40a59213bb8f91a9c682\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"selections\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"19f811cd8b47453c9e5a7967b738737b\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"pluginRecords\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"bc9795aba2ad45bf8c8771cc773e50da\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"selectedPlugin\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"e95e98848eac4a739e01ce414e85fb72\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"diagnosticExecutionResult\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"66ca1b11cca047a59b2eaeced75262a5\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"isDiagnosticWorked\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"list\":false,\"id\":\"80f7a9f812d149d08b0a1855c117b5da\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"executeOption\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"e04fc14edc7b4520bd95f7dd0073e152\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"categories\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"00782042bd9f4659b93db2ef71945123\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"selectedCategory\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"653517f063f44468914867e3e4cd1648\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"global_diagnosticdata\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"816c85e83b254eb58846f1ed76219a9a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"9397d2bfc4a442058898f8372ffeb7de\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"issue_description\",\"list\":false,\"id\":\"7c4884db8f2b462ea027e62238424281\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false},{\"type\":\"Choice\",\"choices\":[],\"id\":\"2a1eb1ae35b34c9dae7a9d4425b7c982\",\"name\":\"select_plugin\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"},{\"type\":\"Choice\",\"choices\":[{\"name\":\"Yes\",\"element\":\"1\"},{\"name\":\"Back to Searched result\",\"element\":\"2\"},{\"name\":\"Search KB\",\"element\":\"3\"},{\"name\":\"Search again\",\"element\":\"4\"}],\"id\":\"33c64562a19243c78287f65bd396853c\",\"name\":\"proceed_options\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"label\":\"Proceed Options\"},{\"type\":\"Choice\",\"choices\":[],\"id\":\"9f31374489a2415580281699cfb47095\",\"name\":\"select_category\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"},{\"type\":\"Choice\",\"choices\":[],\"id\":\"e5ca855f6d3441b7977b2177717c41f7\",\"name\":\"select_categorised_plugin\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"},{\"type\":\"String\",\"name\":\"istopicexecuted\",\"list\":false,\"id\":\"41731779b65c44b685fd1b74e7a4fce1\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"isdatacollectiontopicexecuted\",\"list\":false,\"id\":\"35ebba4a5c0b4c428d17675d52186edc\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"id\":\"50898b7bb2c94c0bb11050336eed765f\",\"name\":\"is_the_solution_helpful_\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"True/False\",\"id\":\"701fd0f2d7ca4f8c9887c1a5b721dca3\",\"name\":\"ask_for_search_again_\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"geniussearchresults\",\"list\":false,\"id\":\"89fd3ee1c1fd48a8969fec1d01725aea\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"searchresults\",\"list\":false,\"id\":\"143081dcebc04bd094b0a812be80a58a\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"shouldaskinfohelpful\",\"list\":false,\"id\":\"c7118ba75e824742b16e4ca7d05e1678\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.hasRole(\\\"admin\\\") || gs.hasRole(\\\"virtual_agent_admin\\\");\\n})()\\n\"},\"roles\":[\"virtual_agent_admin\",\"admin\"],\"scope\":\"434a64fd531db410f738ddeeff7b12c7\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"48974c0387424590b6edcbfc0ebb3514\",\"name\":\"Diagnostic Pre Chat\",\"key_phrases\":[\"Diagnostic Pre Chat\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"description\":\"Basic Diagnostic Flow\",\"model_type\":\"nlu_keyword\",\"foundational\":false,\"modify_confirmation_enabled\":false,\"context_profiles\":[],\"library\":false,\"csTopicId\":\"545e545b870e4590b6edcbfc0ebb3524\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Diagnostic Pre Chat","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/434a64fd531db410f738ddeeff7b12c7","value":"434a64fd531db410f738ddeeff7b12c7"},"design_topic_id":"48974c0387424590b6edcbfc0ebb3514","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/545e545b870e4590b6edcbfc0ebb3524","value":"545e545b870e4590b6edcbfc0ebb3524"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"31","sys_updated_on":"2023-05-18 17:12:41","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.46\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"d2044dface7044d5ad4ce7c07639e590\": {\n          \"id\": \"d2044dface7044d5ad4ce7c07639e590\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"836888d2813441ba825fb0910ca5d890\",\n              \"name\": \"softpinRetryCount\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"c1274b78cf3145dc932f3de4f8baa0f9\",\n              \"name\": \"identifiedUser\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"true\",\n              \"id\": \"16b5da46d17743b4abe3f0cba5a8d901\",\n              \"name\": \"softPinLockoutEnabled\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"c4bf711a588c422cad9cae453ff5f2d6\",\n              \"name\": \"inboundId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"4a46ad74d3f14266933dfab8dff08d0a\",\n              \"name\": \"providerId\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"e60c7edf99db40e7828f64c398ed83b3\",\n              \"name\": \"authType\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"True/False\",\n              \"value\": \"false\",\n              \"id\": \"12fdea464a834b49bdc5b9a6f9e906d2\",\n              \"name\": \"redirectToLA\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"836888d2813441ba825fb0910ca5d890\",\n            \"c1274b78cf3145dc932f3de4f8baa0f9\",\n            \"16b5da46d17743b4abe3f0cba5a8d901\",\n            \"c4bf711a588c422cad9cae453ff5f2d6\",\n            \"4a46ad74d3f14266933dfab8dff08d0a\",\n            \"e60c7edf99db40e7828f64c398ed83b3\",\n            \"12fdea464a834b49bdc5b9a6f9e906d2\"\n          ]\n        },\n        \"d04c47bf1b7b42219679d037dde1f706\": {\n          \"id\": \"d04c47bf1b7b42219679d037dde1f706\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"linkStatus\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.linkStatus}}\",\n                        \"displayValue\": \"Script VariableslinkStatus\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true\n            },\n            {\n              \"key\": \"connectToLA\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.connectToLA}}\",\n                        \"displayValue\": \"Script VariablesconnectToLA\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true\n            }\n          ]\n        },\n        \"cb26e271f53e4f0eaea239827dad56de\": {\n          \"id\": \"cb26e271f53e4f0eaea239827dad56de\",\n          \"name\": \"SoftPin Retry : Increment retry count\",\n          \"script\": \"(function execute() {\\n    if (vaVars.softpinRetryCount == 0) {\\n        vaVars.softpinRetryCount = 1;\\n    } else {\\n        CustomAdapterSoftPinHelper.recordInvalidAttempt(vaContext.providerAppId, vaContext.providerUserId);\\n        vaVars.softpinRetryCount = vaVars.softpinRetryCount + 1;\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"1e603b3abf7c437796e94989a70c7c78\": {\n          \"id\": \"1e603b3abf7c437796e94989a70c7c78\",\n          \"name\": \"set inputs\",\n          \"script\": \"(function execute() {\\n    vaVars.identifiedUser = vaInputs.identifieduser.getValue();\\n    vaVars.softpinRetryCount = vaInputs.softpinretrycount.getValue();\\n    vaVars.softPinLockoutEnabled = vaInputs.softpinlockoutenabled.getValue();\\n    vaVars.inboundId = vaInputs.inboundid.getValue();\\n    vaVars.providerId = vaInputs.providerid.getValue();\\n    vaVars.redirectToLA = vaInputs.redirecttola.getValue();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"eedf04585a7a481c952c8f1bcc047ff2\": {\n          \"id\": \"eedf04585a7a481c952c8f1bcc047ff2\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"_verification_question_topic_block\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"SoftPIN Verification\",\n          \"reusableTopicId\": \"decd38545382011017c3ddeeff7b127f\",\n          \"inputs\": {\n            \"userid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.identifieduser}}\",\n                        \"displayValue\": \"Input VariablesIdentifiedUser\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"verificationid\": {\n              \"value\": \"(function execute() {\\n    var verificationQuestionId = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"verification_question_id\\\", vaContext.providerAppId);\\n    return verificationQuestionId;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            },\n            \"contextid\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getConversationId();\\n})()\\n\",\n              \"mode\": \"script\",\n              \"type\": \"String\"\n            }\n          },\n          \"outputs\": [\n            {\n              \"id\": \"b5da1443933e4c4380b46748bde62818\",\n              \"value\": \"status\",\n              \"mapping\": \"Vq_status\",\n              \"preventDisable\": false\n            }\n          ],\n          \"variableIds\": [\n            \"b5da1443933e4c4380b46748bde62818\"\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false\n        },\n        \"b74b8fddb2674afa8f3a6b021ecf7d74\": {\n          \"id\": \"b74b8fddb2674afa8f3a6b021ecf7d74\",\n          \"stepType\": \"Decision\",\n          \"name\": \"qna_userVerified\"\n        },\n        \"f19fdd12474b4788b8c6dc822dceee16\": {\n          \"id\": \"f19fdd12474b4788b8c6dc822dceee16\",\n          \"name\": \"SoftPin Retry: Initialize\",\n          \"script\": \"(function execute() {\\n    var providerAppId = vaContext.providerAppId;\\n    var retryInterval = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy('softpin_max_invalid_attempts_interval_hrs', providerAppId);\\n    \\n    if (vaVars.softPinLockoutEnabled)\\n        vaVars.softpinRetryCount = CustomAdapterSoftPinHelper.getInvalidAttemptsForUserInInterval(providerAppId, vaContext.providerUserId, retryInterval);\\n    \\n    vaVars.defaultMaxSoftPinInvalidAttempts = CustomAdapterSoftPinHelper.DEFAULT_MAX_INVALID_ATTEMPTS;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ed061e944fb2494c99e1d18b0396c2fe\": {\n          \"id\": \"ed061e944fb2494c99e1d18b0396c2fe\",\n          \"stepType\": \"Decision\",\n          \"name\": \"SoftPIN Lockout Enabled\"\n        },\n        \"fe8ee7a6a0cb4dadbb41fd72c90ecb09\": {\n          \"id\": \"fe8ee7a6a0cb4dadbb41fd72c90ecb09\",\n          \"name\": \"Record Invalid SoftPin Attempt\",\n          \"script\": \"(function execute() {\\n    CustomAdapterSoftPinHelper.recordInvalidAttempt(vaContext.providerAppId, vaContext.providerUserId);\\n    \\n    // If soft pin lockout is enabled, we will set this flag so that the calling topic knows that they\\n    // should connect to LA\\n    if (vaVars.softPinLockoutEnabled)\\n        vaVars.connectToLA = true;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"be8a47f5cbde4eb0b025b7a6dbbd9c22\": {\n          \"id\": \"be8a47f5cbde4eb0b025b7a6dbbd9c22\",\n          \"name\": \"Set Link Status to Failure\",\n          \"script\": \"(function execute() {\\n    vaVars.linkStatus = 'failure';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"80675cf459854d96b0d6cc2c05625407\": {\n          \"id\": \"80675cf459854d96b0d6cc2c05625407\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Auth Failed\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var USER_NOT_ENROLLED_CODE = \\\"40001\\\";\\n    var INCORRECT_PIN_CODE = \\\"50000\\\";\\n    var CONFIGURATION_ISSUE = \\\"40002\\\";\\n    \\n    var defaultMsg = \\\"Something went wrong. Were going to transfer you to an agent. Please hold.\\\"; // config issue\\n    var custom_message_key = \\\"link_account_unexpected_error_msg\\\";\\n\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(custom_message_key, vaVars.inboundId, vaVars.providerId);\\n\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n   \\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"aa6a33ff76764ef69d3474f27c0b8435\": {\n          \"id\": \"aa6a33ff76764ef69d3474f27c0b8435\",\n          \"name\": \"Set ConnectToLA variable\",\n          \"script\": \"(function execute() {\\n    gs.error(\\\"User : \\\" + vaVars.identifiedUser + \\\" Authentication failed : topic block: SoftPIN\\\" );\\n    //For SMS, will not connect to live agent directly, will go through topic picker in order for Setup/Reset PIN topic block to show up\\n    if (vaVars.redirectToLA)\\n        vaVars.connectToLA = true;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"c7024765d1d6426c89cfcfafedf209db\": {\n          \"id\": \"c7024765d1d6426c89cfcfafedf209db\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Retry Message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var defaultMsg = \\\"The response you provided is incorrect. Please try again.\\\";\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(\\\"invalid_pin_retry_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"7efce0d5daa2426f8d723bdde6031245\": {\n          \"id\": \"7efce0d5daa2426f8d723bdde6031245\",\n          \"name\": \"Reset SoftPIN Metadata for User\",\n          \"script\": \"(function execute() {\\n    \\n    if (vaVars.softPinLockoutEnabled) {\\n        CustomAdapterSoftPinHelper.markInvalidAttemptsInactive(vaContext.providerAppId, \\n                                                                vaContext.providerUserId);\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"83361ac8b9d14a63b29350c18e81f82b\": {\n          \"id\": \"83361ac8b9d14a63b29350c18e81f82b\",\n          \"name\": \"Set Link Status to Success\",\n          \"script\": \"(function execute() {\\n    vaVars.linkStatus = 'success';\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b08b37a6513a4b588c891eaa2d75fc19\": {\n          \"id\": \"b08b37a6513a4b588c891eaa2d75fc19\",\n          \"stepType\": \"ReusableTopic\",\n          \"name\": \"MFA_link_account\",\n          \"fields\": [],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"reusableTopicChoice\": \"MFA_link_account\",\n          \"reusableTopicId\": \"e93e3a92eba71110da1861c59c5228dd\",\n          \"inputs\": {\n            \"authtype\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.authtype}}\",\n                        \"displayValue\": \"Input VariablesAuthType\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"identifieduser\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.identifiedUser}}\",\n                        \"displayValue\": \"Script VariablesidentifiedUser\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"inboundid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.inboundId}}\",\n                        \"displayValue\": \"Script VariablesinboundId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"providerid\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.providerId}}\",\n                        \"displayValue\": \"Script VariablesproviderId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\",\n              \"type\": \"String\"\n            },\n            \"redirecttola\": {\n              \"value\": \"{{vaVars.redirectToLA}}\",\n              \"mode\": \"data_pill\",\n              \"type\": \"True/False\"\n            }\n          },\n          \"variableIds\": [\n            \"c5fa81c5a9c348c5a8dad5358cc9538e\",\n            \"bd47d05159204894be826fd88d6cb6a3\"\n          ],\n          \"outputs\": [\n            {\n              \"id\": \"c5fa81c5a9c348c5a8dad5358cc9538e\",\n              \"value\": \"connecttola\",\n              \"mapping\": \"mfa_connecttola\",\n              \"preventDisable\": true\n            },\n            {\n              \"id\": \"bd47d05159204894be826fd88d6cb6a3\",\n              \"value\": \"linkstatus\",\n              \"mapping\": \"mfa_linkstatus\",\n              \"preventDisable\": true\n            }\n          ],\n          \"outdatedNote\": false,\n          \"loading\": false,\n          \"useTemplateTopic\": false\n        },\n        \"5da631f9ec9349018eeee02da61f5599\": {\n          \"id\": \"5da631f9ec9349018eeee02da61f5599\",\n          \"name\": \"set connectToLA\",\n          \"script\": \"(function execute() {\\n   vaVars.connectToLA = vaInputs.mfa_connecttola.getValue();\\n   vaVars.linkStatus = vaInputs.mfa_linkstatus.getValue();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"50b57b88aff1427fbc930f24e2c9612f\": {\n          \"id\": \"50b57b88aff1427fbc930f24e2c9612f\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Show Soft PIN lockout message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var defaultMessage = 'Your account has been locked due to invalid Soft PIN entries. Please try again later.';\\n    var customMessage = sn_cs.VASystemObject.getBotMessage('softpin_lockout_message',  vaVars.inboundId, vaVars.providerId);\\n\\n    var promptMessage = customMessage || defaultMessage;\\n\\n    return gs.getMessageLang(promptMessage, vaContext.getRequesterLang());\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"da5618ebec164c1f827f198606dd7c69\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"eedf04585a7a481c952c8f1bcc047ff2\",\n          \"target\": \"b74b8fddb2674afa8f3a6b021ecf7d74\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4495ba5a80514c1d81ef1fef4b3d99f5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d2044dface7044d5ad4ce7c07639e590\",\n          \"target\": \"1e603b3abf7c437796e94989a70c7c78\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ae6f833b09d947988ce118f81756948b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"cb26e271f53e4f0eaea239827dad56de\",\n          \"target\": \"eedf04585a7a481c952c8f1bcc047ff2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3343bf8c50ea4f39b679ee7512b113b0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1e603b3abf7c437796e94989a70c7c78\",\n          \"target\": \"f19fdd12474b4788b8c6dc822dceee16\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3b70a4c34eed4134aa874a8949d56c4f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f19fdd12474b4788b8c6dc822dceee16\",\n          \"target\": \"cb26e271f53e4f0eaea239827dad56de\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"378c25e792cb40ca8ec69571c8f6fabd\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b74b8fddb2674afa8f3a6b021ecf7d74\",\n          \"target\": \"ed061e944fb2494c99e1d18b0396c2fe\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var MAX_RETRY_COUNT = parseInt(sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"softpin_max_retry_attempts\\\", vaContext.providerAppId)) || vaVars.defaultMaxSoftPinInvalidAttempts;\\n    var value = vaInputs.vq_status.getValue() == \\\"Error\\\"  && vaVars.softpinRetryCount>= MAX_RETRY_COUNT;\\n\\n    return value;\\n})()\\n\"\n          },\n          \"label\": \"User not verified\"\n        },\n        {\n          \"id\": \"60feb8ae2b6544b7a2f78e820246dce4\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ed061e944fb2494c99e1d18b0396c2fe\",\n          \"target\": \"fe8ee7a6a0cb4dadbb41fd72c90ecb09\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.softPinLockoutEnabled == true;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"4bc9307b5b494be2b5c93a658818c224\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"fe8ee7a6a0cb4dadbb41fd72c90ecb09\",\n          \"target\": \"be8a47f5cbde4eb0b025b7a6dbbd9c22\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0cf2df7d363243fc8f958f092dc8e7db\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"ed061e944fb2494c99e1d18b0396c2fe\",\n          \"target\": \"80675cf459854d96b0d6cc2c05625407\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.softPinLockoutEnabled == false;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"7244d6bdf364441585a40c5e9054120b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"80675cf459854d96b0d6cc2c05625407\",\n          \"target\": \"aa6a33ff76764ef69d3474f27c0b8435\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"f0b09923634f4dc4a94ec1cfe58c42f7\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"aa6a33ff76764ef69d3474f27c0b8435\",\n          \"target\": \"d04c47bf1b7b42219679d037dde1f706\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3aa9417c3e344070bf211b6bc43246f5\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b74b8fddb2674afa8f3a6b021ecf7d74\",\n          \"target\": \"c7024765d1d6426c89cfcfafedf209db\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var MAX_RETRY_COUNT = parseInt(sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"softpin_max_retry_attempts\\\", vaContext.providerAppId)) || vaVars.defaultMaxSoftPinInvalidAttempts;\\n    var value =  vaInputs.vq_status.getValue() == \\\"Error\\\" && vaVars.softpinRetryCount < MAX_RETRY_COUNT;\\n    return value;\\n})()\\n\"\n          },\n          \"label\": \"Should Retry - staus_Error\"\n        },\n        {\n          \"id\": \"7e3fbc0362e34d32b38c6989a30e35c8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c7024765d1d6426c89cfcfafedf209db\",\n          \"target\": \"cb26e271f53e4f0eaea239827dad56de\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6a12b7c634f64a7cb7edd78bc0de29bd\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"b74b8fddb2674afa8f3a6b021ecf7d74\",\n          \"target\": \"7efce0d5daa2426f8d723bdde6031245\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.vq_status=Success\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"UserVerified - status_Success\"\n        },\n        {\n          \"id\": \"677dfb9fdf3046ad8676bf593b65adcf\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7efce0d5daa2426f8d723bdde6031245\",\n          \"target\": \"83361ac8b9d14a63b29350c18e81f82b\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"df91c00a01b04dcf864082442bf9a1b5\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"83361ac8b9d14a63b29350c18e81f82b\",\n          \"target\": \"b08b37a6513a4b588c891eaa2d75fc19\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ba5ecfed812b45a39ba02cd280105c1a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"b08b37a6513a4b588c891eaa2d75fc19\",\n          \"target\": \"5da631f9ec9349018eeee02da61f5599\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"a9dce86f54c14b83a13435ddde3bafa2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"5da631f9ec9349018eeee02da61f5599\",\n          \"target\": \"d04c47bf1b7b42219679d037dde1f706\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"95f4d147eba44a139272659e75a45b1f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"be8a47f5cbde4eb0b025b7a6dbbd9c22\",\n          \"target\": \"50b57b88aff1427fbc930f24e2c9612f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"262f07eaf2de4d31bbbba347c1b8581d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"50b57b88aff1427fbc930f24e2c9612f\",\n          \"target\": \"d04c47bf1b7b42219679d037dde1f706\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"7f1dee12edf447a3b03067d2c3bd3ada\": {\n      \"id\": \"7f1dee12edf447a3b03067d2c3bd3ada\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"softpinRetryCount\",\n      \"label\": \"softpinRetryCount\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"836888d2813441ba825fb0910ca5d890\": {\n      \"id\": \"836888d2813441ba825fb0910ca5d890\",\n      \"name\": \"softpinretrycount\",\n      \"label\": \"SoftpinRetryCount\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"d2044dface7044d5ad4ce7c07639e590\",\n      \"isHidden\": false\n    },\n    \"c1274b78cf3145dc932f3de4f8baa0f9\": {\n      \"id\": \"c1274b78cf3145dc932f3de4f8baa0f9\",\n      \"name\": \"identifieduser\",\n      \"label\": \"IdentifiedUser\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"d2044dface7044d5ad4ce7c07639e590\",\n      \"isHidden\": false\n    },\n    \"16b5da46d17743b4abe3f0cba5a8d901\": {\n      \"id\": \"16b5da46d17743b4abe3f0cba5a8d901\",\n      \"name\": \"softpinlockoutenabled\",\n      \"label\": \"SoftPinLockoutEnabled\",\n      \"defaultValue\": \"true\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"d2044dface7044d5ad4ce7c07639e590\",\n      \"isHidden\": false\n    },\n    \"c4bf711a588c422cad9cae453ff5f2d6\": {\n      \"id\": \"c4bf711a588c422cad9cae453ff5f2d6\",\n      \"name\": \"inboundid\",\n      \"label\": \"InboundId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"d2044dface7044d5ad4ce7c07639e590\",\n      \"isHidden\": false\n    },\n    \"4a46ad74d3f14266933dfab8dff08d0a\": {\n      \"id\": \"4a46ad74d3f14266933dfab8dff08d0a\",\n      \"name\": \"providerid\",\n      \"label\": \"ProviderId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"d2044dface7044d5ad4ce7c07639e590\",\n      \"isHidden\": false\n    },\n    \"b9842635c8a34471935dc3ff21f5d146\": {\n      \"id\": \"b9842635c8a34471935dc3ff21f5d146\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"inboundId\",\n      \"label\": \"inboundId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4ebeee4f10ab4e7785e4ff6bc4ac3bf1\": {\n      \"id\": \"4ebeee4f10ab4e7785e4ff6bc4ac3bf1\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"providerId\",\n      \"label\": \"providerId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"571a5c779047447c9fa08eb48341e31a\": {\n      \"id\": \"571a5c779047447c9fa08eb48341e31a\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"softPinLockoutEnabled\",\n      \"label\": \"softPinLockoutEnabled\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"bf34ee397cf44ca8a429c47c6bd6817a\": {\n      \"id\": \"bf34ee397cf44ca8a429c47c6bd6817a\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"identifiedUser\",\n      \"label\": \"identifiedUser\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"b5da1443933e4c4380b46748bde62818\": {\n      \"id\": \"b5da1443933e4c4380b46748bde62818\",\n      \"name\": \"vq_status\",\n      \"label\": \"Vq_status\",\n      \"defaultValue\": \"status\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": false,\n      \"nodeId\": \"eedf04585a7a481c952c8f1bcc047ff2\",\n      \"isHidden\": false\n    },\n    \"e60c7edf99db40e7828f64c398ed83b3\": {\n      \"id\": \"e60c7edf99db40e7828f64c398ed83b3\",\n      \"name\": \"authtype\",\n      \"label\": \"AuthType\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"d2044dface7044d5ad4ce7c07639e590\",\n      \"isHidden\": false\n    },\n    \"781011b6fe464ff6896028ca2e9763b0\": {\n      \"id\": \"781011b6fe464ff6896028ca2e9763b0\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"connectToLA\",\n      \"label\": \"connectToLA\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"419b25df61e248b5bb768d3d52432c17\": {\n      \"id\": \"419b25df61e248b5bb768d3d52432c17\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"linkStatus\",\n      \"label\": \"linkStatus\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"12f772231adb4c01bd0e5976335bf87c\": {\n      \"id\": \"12f772231adb4c01bd0e5976335bf87c\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"redirectToLA\",\n      \"label\": \"redirectToLA\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"12fdea464a834b49bdc5b9a6f9e906d2\": {\n      \"id\": \"12fdea464a834b49bdc5b9a6f9e906d2\",\n      \"name\": \"redirecttola\",\n      \"label\": \"RedirectToLA\",\n      \"defaultValue\": \"false\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"d2044dface7044d5ad4ce7c07639e590\",\n      \"isHidden\": false\n    },\n    \"c5fa81c5a9c348c5a8dad5358cc9538e\": {\n      \"id\": \"c5fa81c5a9c348c5a8dad5358cc9538e\",\n      \"name\": \"mfa_connecttola\",\n      \"label\": \"Mfa_connecttola\",\n      \"defaultValue\": \"connecttola\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"b08b37a6513a4b588c891eaa2d75fc19\",\n      \"isHidden\": false\n    },\n    \"bd47d05159204894be826fd88d6cb6a3\": {\n      \"id\": \"bd47d05159204894be826fd88d6cb6a3\",\n      \"name\": \"mfa_linkstatus\",\n      \"label\": \"Mfa_linkstatus\",\n      \"defaultValue\": \"linkstatus\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"preventDisable\": true,\n      \"nodeId\": \"b08b37a6513a4b588c891eaa2d75fc19\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"e978d02eebab1110da1861c59c5228e7","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_e978d02eebab1110da1861c59c5228e7","sys_updated_by":"admin","sys_created_on":"2022-12-06 11:45:40","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"bafb5d79c1c94055baaef2e048e1f966\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"bafb5d79c1c94055baaef2e048e1f966\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"bafb5d79c1c94055baaef2e048e1f966\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"d2044dface7044d5ad4ce7c07639e590\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"d04c47bf1b7b42219679d037dde1f706\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if (vaVars.softpinRetryCount == 0) {\\n        vaVars.softpinRetryCount = 1;\\n    } else {\\n        CustomAdapterSoftPinHelper.recordInvalidAttempt(vaContext.providerAppId, vaContext.providerUserId);\\n        vaVars.softpinRetryCount = vaVars.softpinRetryCount + 1;\\n    }\\n})()\\n\",\"id\":\"cb26e271f53e4f0eaea239827dad56de\",\"name\":\"SoftPin Retry : Increment retry count\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.identifiedUser = vaInputs.identifieduser.getValue();\\n    vaVars.softpinRetryCount = vaInputs.softpinretrycount.getValue();\\n    vaVars.softPinLockoutEnabled = vaInputs.softpinlockoutenabled.getValue();\\n    vaVars.inboundId = vaInputs.inboundid.getValue();\\n    vaVars.providerId = vaInputs.providerid.getValue();\\n    vaVars.redirectToLA = vaInputs.redirecttola.getValue();\\n})()\\n\",\"id\":\"1e603b3abf7c437796e94989a70c7c78\",\"name\":\"set inputs\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"LibraryCall\",\"library_topic_name\":\"SoftPIN Verification\",\"library_topic_id\":\"decd38545382011017c3ddeeff7b127f\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"userid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.identifieduser}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"verificationid\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var verificationQuestionId = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"verification_question_id\\\", vaContext.providerAppId);\\n    return verificationQuestionId;\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"contextid\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaSystem.getConversationId();\\n})()\\n\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"status\",\"main_topic_mapped_variable_name\":\"vq_status\"}],\"id\":\"eedf04585a7a481c952c8f1bcc047ff2\",\"name\":\"_verification_question_topic_block\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"qna_userVerified\",\"branches\":[{\"type\":\"Branch\",\"label\":\"User not verified\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var MAX_RETRY_COUNT = parseInt(sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"softpin_max_retry_attempts\\\", vaContext.providerAppId)) || vaVars.defaultMaxSoftPinInvalidAttempts;\\n    var value = vaInputs.vq_status.getValue() == \\\"Error\\\"  && vaVars.softpinRetryCount>= MAX_RETRY_COUNT;\\n\\n    return value;\\n})()\\n\"},\"id\":\"079f3b6755f446e2af067e910dd23a72\",\"name\":\"User not verified\"},{\"type\":\"Branch\",\"label\":\"Should Retry - staus_Error\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var MAX_RETRY_COUNT = parseInt(sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy(\\\"softpin_max_retry_attempts\\\", vaContext.providerAppId)) || vaVars.defaultMaxSoftPinInvalidAttempts;\\n    var value =  vaInputs.vq_status.getValue() == \\\"Error\\\" && vaVars.softpinRetryCount < MAX_RETRY_COUNT;\\n    return value;\\n})()\\n\"},\"id\":\"8e3475c488a448adaf8d6e02936898bc\",\"name\":\"Should Retry - staus_Error\"},{\"type\":\"Branch\",\"label\":\"UserVerified - status_Success\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"vq_status=Success\"},\"id\":\"f5409ffb1b394fc9accde69d1a6dd013\",\"name\":\"UserVerified - status_Success\"}],\"id\":\"b74b8fddb2674afa8f3a6b021ecf7d74\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var providerAppId = vaContext.providerAppId;\\n    var retryInterval = sn_cs.VASystemObject.getCustomAdapterPropertyWithHierarchy('softpin_max_invalid_attempts_interval_hrs', providerAppId);\\n    \\n    if (vaVars.softPinLockoutEnabled)\\n        vaVars.softpinRetryCount = CustomAdapterSoftPinHelper.getInvalidAttemptsForUserInInterval(providerAppId, vaContext.providerUserId, retryInterval);\\n    \\n    vaVars.defaultMaxSoftPinInvalidAttempts = CustomAdapterSoftPinHelper.DEFAULT_MAX_INVALID_ATTEMPTS;\\n})()\\n\",\"id\":\"f19fdd12474b4788b8c6dc822dceee16\",\"name\":\"SoftPin Retry: Initialize\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"name\":\"SoftPIN Lockout Enabled\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.softPinLockoutEnabled == true;\\n})()\\n\"},\"id\":\"6efe4e79fe9d4e08a46eeb4365ef0af3\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.softPinLockoutEnabled == false;\\n})()\\n\"},\"id\":\"8901a92c052746d480f199a74a33be23\",\"name\":\"No\"}],\"id\":\"ed061e944fb2494c99e1d18b0396c2fe\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    CustomAdapterSoftPinHelper.recordInvalidAttempt(vaContext.providerAppId, vaContext.providerUserId);\\n    \\n    // If soft pin lockout is enabled, we will set this flag so that the calling topic knows that they\\n    // should connect to LA\\n    if (vaVars.softPinLockoutEnabled)\\n        vaVars.connectToLA = true;\\n})()\\n\",\"id\":\"fe8ee7a6a0cb4dadbb41fd72c90ecb09\",\"name\":\"Record Invalid SoftPin Attempt\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.linkStatus = 'failure';\\n})()\\n\",\"id\":\"be8a47f5cbde4eb0b025b7a6dbbd9c22\",\"name\":\"Set Link Status to Failure\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var USER_NOT_ENROLLED_CODE = \\\"40001\\\";\\n    var INCORRECT_PIN_CODE = \\\"50000\\\";\\n    var CONFIGURATION_ISSUE = \\\"40002\\\";\\n    \\n    var defaultMsg = \\\"Something went wrong. Were going to transfer you to an agent. Please hold.\\\"; // config issue\\n    var custom_message_key = \\\"link_account_unexpected_error_msg\\\";\\n\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(custom_message_key, vaVars.inboundId, vaVars.providerId);\\n\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n   \\n})()\\n\"}],\"id\":\"80675cf459854d96b0d6cc2c05625407\",\"name\":\"Auth Failed\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    gs.error(\\\"User : \\\" + vaVars.identifiedUser + \\\" Authentication failed : topic block: SoftPIN\\\" );\\n    //For SMS, will not connect to live agent directly, will go through topic picker in order for Setup/Reset PIN topic block to show up\\n    if (vaVars.redirectToLA)\\n        vaVars.connectToLA = true;\\n})()\\n\",\"id\":\"aa6a33ff76764ef69d3474f27c0b8435\",\"name\":\"Set ConnectToLA variable\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var defaultMsg = \\\"The response you provided is incorrect. Please try again.\\\";\\n    var custom_message = sn_cs.VASystemObject.getBotMessage(\\\"invalid_pin_retry_msg\\\", vaVars.inboundId, vaVars.providerId);\\n    var prompt = custom_message || defaultMsg;\\n    return gs.getMessageLang(prompt, vaContext.getRequesterLang());\\n})()\\n\"}],\"id\":\"c7024765d1d6426c89cfcfafedf209db\",\"name\":\"Retry Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    \\n    if (vaVars.softPinLockoutEnabled) {\\n        CustomAdapterSoftPinHelper.markInvalidAttemptsInactive(vaContext.providerAppId, \\n                                                                vaContext.providerUserId);\\n    }\\n})()\\n\",\"id\":\"7efce0d5daa2426f8d723bdde6031245\",\"name\":\"Reset SoftPIN Metadata for User\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.linkStatus = 'success';\\n})()\\n\",\"id\":\"83361ac8b9d14a63b29350c18e81f82b\",\"name\":\"Set Link Status to Success\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"LibraryCall\",\"library_topic_name\":\"MFA_link_account\",\"library_topic_id\":\"e93e3a92eba71110da1861c59c5228dd\",\"library_topic_is_template\":false,\"parameter-mappings\":[{\"parameter-name\":\"authtype\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.authtype}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"identifieduser\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.identifiedUser}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"inboundid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.inboundId}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"providerid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.providerId}}\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"redirecttola\",\"value\":{\"type\":\"String\",\"mode\":\"data_pill\",\"value\":\"{{vaVars.redirectToLA}}\"},\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"connecttola\",\"main_topic_mapped_variable_name\":\"mfa_connecttola\"},{\"main_topic_variable_namespace\":\"vaInputs\",\"library_topic_return_parameter_name\":\"linkstatus\",\"main_topic_mapped_variable_name\":\"mfa_linkstatus\"}],\"id\":\"b08b37a6513a4b588c891eaa2d75fc19\",\"name\":\"MFA_link_account\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n   vaVars.connectToLA = vaInputs.mfa_connecttola.getValue();\\n   vaVars.linkStatus = vaInputs.mfa_linkstatus.getValue();\\n})()\\n\",\"id\":\"5da631f9ec9349018eeee02da61f5599\",\"name\":\"set connectToLA\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var defaultMessage = 'Your account has been locked due to invalid Soft PIN entries. Please try again later.';\\n    var customMessage = sn_cs.VASystemObject.getBotMessage('softpin_lockout_message',  vaVars.inboundId, vaVars.providerId);\\n\\n    var promptMessage = customMessage || defaultMessage;\\n\\n    return gs.getMessageLang(promptMessage, vaContext.getRequesterLang());\\n})()\\n\"}],\"id\":\"50b57b88aff1427fbc930f24e2c9612f\",\"name\":\"Show Soft PIN lockout message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"eedf04585a7a481c952c8f1bcc047ff2\",\"target_node_id\":\"b74b8fddb2674afa8f3a6b021ecf7d74\",\"id\":\"da5618ebec164c1f827f198606dd7c69\"},{\"type\":\"Edge\",\"source_node_id\":\"d2044dface7044d5ad4ce7c07639e590\",\"target_node_id\":\"1e603b3abf7c437796e94989a70c7c78\",\"id\":\"4495ba5a80514c1d81ef1fef4b3d99f5\"},{\"type\":\"Edge\",\"source_node_id\":\"cb26e271f53e4f0eaea239827dad56de\",\"target_node_id\":\"eedf04585a7a481c952c8f1bcc047ff2\",\"id\":\"ae6f833b09d947988ce118f81756948b\"},{\"type\":\"Edge\",\"source_node_id\":\"1e603b3abf7c437796e94989a70c7c78\",\"target_node_id\":\"f19fdd12474b4788b8c6dc822dceee16\",\"id\":\"3343bf8c50ea4f39b679ee7512b113b0\"},{\"type\":\"Edge\",\"source_node_id\":\"f19fdd12474b4788b8c6dc822dceee16\",\"target_node_id\":\"cb26e271f53e4f0eaea239827dad56de\",\"id\":\"3b70a4c34eed4134aa874a8949d56c4f\"},{\"type\":\"Edge\",\"source_node_id\":\"b74b8fddb2674afa8f3a6b021ecf7d74\",\"target_node_id\":\"ed061e944fb2494c99e1d18b0396c2fe\",\"branch_id\":\"079f3b6755f446e2af067e910dd23a72\",\"id\":\"378c25e792cb40ca8ec69571c8f6fabd\",\"name\":\"079f3b6755f446e2af067e910dd23a72\"},{\"type\":\"Edge\",\"source_node_id\":\"ed061e944fb2494c99e1d18b0396c2fe\",\"target_node_id\":\"fe8ee7a6a0cb4dadbb41fd72c90ecb09\",\"branch_id\":\"6efe4e79fe9d4e08a46eeb4365ef0af3\",\"id\":\"60feb8ae2b6544b7a2f78e820246dce4\",\"name\":\"6efe4e79fe9d4e08a46eeb4365ef0af3\"},{\"type\":\"Edge\",\"source_node_id\":\"fe8ee7a6a0cb4dadbb41fd72c90ecb09\",\"target_node_id\":\"be8a47f5cbde4eb0b025b7a6dbbd9c22\",\"id\":\"4bc9307b5b494be2b5c93a658818c224\"},{\"type\":\"Edge\",\"source_node_id\":\"ed061e944fb2494c99e1d18b0396c2fe\",\"target_node_id\":\"80675cf459854d96b0d6cc2c05625407\",\"branch_id\":\"8901a92c052746d480f199a74a33be23\",\"id\":\"0cf2df7d363243fc8f958f092dc8e7db\",\"name\":\"8901a92c052746d480f199a74a33be23\"},{\"type\":\"Edge\",\"source_node_id\":\"80675cf459854d96b0d6cc2c05625407\",\"target_node_id\":\"aa6a33ff76764ef69d3474f27c0b8435\",\"id\":\"7244d6bdf364441585a40c5e9054120b\"},{\"type\":\"Edge\",\"source_node_id\":\"aa6a33ff76764ef69d3474f27c0b8435\",\"target_node_id\":\"d04c47bf1b7b42219679d037dde1f706\",\"id\":\"f0b09923634f4dc4a94ec1cfe58c42f7\"},{\"type\":\"Edge\",\"source_node_id\":\"b74b8fddb2674afa8f3a6b021ecf7d74\",\"target_node_id\":\"c7024765d1d6426c89cfcfafedf209db\",\"branch_id\":\"8e3475c488a448adaf8d6e02936898bc\",\"id\":\"3aa9417c3e344070bf211b6bc43246f5\",\"name\":\"8e3475c488a448adaf8d6e02936898bc\"},{\"type\":\"Edge\",\"source_node_id\":\"c7024765d1d6426c89cfcfafedf209db\",\"target_node_id\":\"cb26e271f53e4f0eaea239827dad56de\",\"id\":\"7e3fbc0362e34d32b38c6989a30e35c8\"},{\"type\":\"Edge\",\"source_node_id\":\"b74b8fddb2674afa8f3a6b021ecf7d74\",\"target_node_id\":\"7efce0d5daa2426f8d723bdde6031245\",\"branch_id\":\"f5409ffb1b394fc9accde69d1a6dd013\",\"id\":\"6a12b7c634f64a7cb7edd78bc0de29bd\",\"name\":\"f5409ffb1b394fc9accde69d1a6dd013\"},{\"type\":\"Edge\",\"source_node_id\":\"7efce0d5daa2426f8d723bdde6031245\",\"target_node_id\":\"83361ac8b9d14a63b29350c18e81f82b\",\"id\":\"677dfb9fdf3046ad8676bf593b65adcf\"},{\"type\":\"Edge\",\"source_node_id\":\"83361ac8b9d14a63b29350c18e81f82b\",\"target_node_id\":\"b08b37a6513a4b588c891eaa2d75fc19\",\"id\":\"df91c00a01b04dcf864082442bf9a1b5\"},{\"type\":\"Edge\",\"source_node_id\":\"b08b37a6513a4b588c891eaa2d75fc19\",\"target_node_id\":\"5da631f9ec9349018eeee02da61f5599\",\"id\":\"ba5ecfed812b45a39ba02cd280105c1a\"},{\"type\":\"Edge\",\"source_node_id\":\"5da631f9ec9349018eeee02da61f5599\",\"target_node_id\":\"d04c47bf1b7b42219679d037dde1f706\",\"id\":\"a9dce86f54c14b83a13435ddde3bafa2\"},{\"type\":\"Edge\",\"source_node_id\":\"be8a47f5cbde4eb0b025b7a6dbbd9c22\",\"target_node_id\":\"50b57b88aff1427fbc930f24e2c9612f\",\"id\":\"95f4d147eba44a139272659e75a45b1f\"},{\"type\":\"Edge\",\"source_node_id\":\"50b57b88aff1427fbc930f24e2c9612f\",\"target_node_id\":\"d04c47bf1b7b42219679d037dde1f706\",\"id\":\"262f07eaf2de4d31bbbba347c1b8581d\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"softpinRetryCount\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"7f1dee12edf447a3b03067d2c3bd3ada\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"inboundId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"b9842635c8a34471935dc3ff21f5d146\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"providerId\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"4ebeee4f10ab4e7785e4ff6bc4ac3bf1\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"softPinLockoutEnabled\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"571a5c779047447c9fa08eb48341e31a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"identifiedUser\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"bf34ee397cf44ca8a429c47c6bd6817a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"connectToLA\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"781011b6fe464ff6896028ca2e9763b0\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"linkStatus\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"419b25df61e248b5bb768d3d52432c17\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"redirectToLA\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"12f772231adb4c01bd0e5976335bf87c\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"softpinretrycount\",\"list\":false,\"id\":\"836888d2813441ba825fb0910ca5d890\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"identifieduser\",\"list\":false,\"id\":\"c1274b78cf3145dc932f3de4f8baa0f9\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"id\":\"16b5da46d17743b4abe3f0cba5a8d901\",\"name\":\"softpinlockoutenabled\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"inboundid\",\"list\":false,\"id\":\"c4bf711a588c422cad9cae453ff5f2d6\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"providerid\",\"list\":false,\"id\":\"4a46ad74d3f14266933dfab8dff08d0a\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"vq_status\",\"list\":false,\"id\":\"b5da1443933e4c4380b46748bde62818\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"authtype\",\"list\":false,\"id\":\"e60c7edf99db40e7828f64c398ed83b3\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"id\":\"12fdea464a834b49bdc5b9a6f9e906d2\",\"name\":\"redirecttola\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"mfa_connecttola\",\"list\":false,\"id\":\"c5fa81c5a9c348c5a8dad5358cc9538e\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"mfa_linkstatus\",\"list\":false,\"id\":\"bd47d05159204894be826fd88d6cb6a3\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"softpinretrycount\",\"label\":\"softpinRetryCount\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"836888d2813441ba825fb0910ca5d890\",\"type\":\"String\"},{\"name\":\"identifieduser\",\"label\":\"identifiedUser\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"c1274b78cf3145dc932f3de4f8baa0f9\",\"type\":\"String\"},{\"name\":\"softpinlockoutenabled\",\"label\":\"softPinLockoutEnabled\",\"default-value\":\"true\",\"required\":true,\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"16b5da46d17743b4abe3f0cba5a8d901\",\"type\":\"True/False\"},{\"name\":\"inboundid\",\"label\":\"inboundId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"c4bf711a588c422cad9cae453ff5f2d6\",\"type\":\"String\"},{\"name\":\"providerid\",\"label\":\"providerId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"4a46ad74d3f14266933dfab8dff08d0a\",\"type\":\"String\"},{\"name\":\"authtype\",\"label\":\"authType\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"e60c7edf99db40e7828f64c398ed83b3\",\"type\":\"String\"},{\"name\":\"redirecttola\",\"label\":\"redirectToLA\",\"default-value\":\"false\",\"required\":true,\"metadata\":{\"type\":\"True/False\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"12fdea464a834b49bdc5b9a6f9e906d2\",\"type\":\"True/False\"}],\"return-values-mapping\":[{\"name\":\"linkstatus\",\"label\":\"linkStatus\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.linkStatus}}\"}},{\"name\":\"connecttola\",\"label\":\"connectToLA\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.connectToLA}}\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"919714eaebab1110da1861c59c52286a\",\"name\":\"SoftPin_authorisation\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"modify_confirmation_enabled\":false,\"library\":true,\"csTopicId\":\"2578d02eebab1110da1861c59c5228e1\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"SoftPin_authorisation","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"919714eaebab1110da1861c59c52286a","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/2578d02eebab1110da1861c59c5228e1","value":"2578d02eebab1110da1861c59c5228e1"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"1","sys_updated_on":"2022-10-12 16:29:20","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"4455bf091f754383aae397316d4f8f13\": {\n          \"id\": \"4455bf091f754383aae397316d4f8f13\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"1c88f87df8284af0b6d8e8655e33d986\",\n              \"name\": \"userId\",\n              \"required\": true,\n              \"hint\": \"sys_user table record sys_id\",\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"b0f347297b704b4b8eb4cf2d11055ce5\",\n              \"name\": \"verificationId\",\n              \"hint\": \"pwd_verification table record sys_id\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"9887e174c9c041f3a4381eaa8a1802d3\",\n              \"name\": \"contextId\",\n              \"required\": true,\n              \"hint\": \"conversation context Id\",\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"1c88f87df8284af0b6d8e8655e33d986\",\n            \"b0f347297b704b4b8eb4cf2d11055ce5\",\n            \"9887e174c9c041f3a4381eaa8a1802d3\"\n          ]\n        },\n        \"4d646d8b0511459b9256b969cc056790\": {\n          \"id\": \"4d646d8b0511459b9256b969cc056790\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"Status\",\n              \"value\": \"(function execute() {\\n    return vaVars.input_validation_error ? 'Error' : 'Success';\\n})()\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=6eea6ed194ce5110f877f65b88f23ea6%5Ecalling_cs_topic_idINa51beed194ce5110f877f65b88f23e26\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            },\n            {\n              \"key\": \"Status_Code\",\n              \"value\": \"(function execute() {\\n    var SUCCESS_CODE = \\\"20000\\\";\\n    return vaVars.input_validation_error ? vaVars.error_code : SUCCESS_CODE;\\n})()\\n\",\n              \"mode\": \"script\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": true,\n              \"alertMessage\": \"You cannot delete this parameter because other calling topics use it.\",\n              \"additionalInfoUrl\": \"/sys_cs_topic_library_usage_list.do?sysparm_query=library_cs_topic_id=6eea6ed194ce5110f877f65b88f23ea6%5Ecalling_cs_topic_idINa51beed194ce5110f877f65b88f23e26\",\n              \"additionalInfoLabel\": \"See calling topics\"\n            }\n          ]\n        },\n        \"17c5346b48454f05a13f3740a53e6ff0\": {\n          \"id\": \"17c5346b48454f05a13f3740a53e6ff0\",\n          \"name\": \"Validate Inputs\",\n          \"script\": \"(function execute() {\\n    var passwordResetScopedUtil = new PasswordResetScopedUtil();\\n    var AUTHENTICATOR_VERIFICATION_TYPE = 'c7835ab787773200cfab6dd207cb0b88';\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId =vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n    var INVALID_USER = \\\"40000\\\";\\n    var CONFIGURATION_ISSUE = \\\"40002\\\";\\n    //Check for valid user\\n    var userInfo = passwordResetScopedUtil.getUserByID(userId);\\n    if (gs.nil(userId) || !userInfo.exists()) {\\n        vaVars.is_user_valid = false; // Invalid user\\n        vaVars.error_code = INVALID_USER;\\n    }\\n\\n    //Check for valid context_id\\n    if (gs.nil(contextId)) {\\n        vaVars.input_validation_error = true;\\n        vaVars.error_code = CONFIGURATION_ISSUE;\\n        return;\\n    }\\n\\n    //Check for valid Google authenticator verification type\\n    var verification = passwordResetScopedUtil.getVerificationById(verificationId);\\n    if (gs.nil(verificationId) || !verification.exists() ||\\n        verification.getVerificationTypeId() != AUTHENTICATOR_VERIFICATION_TYPE) {\\n        vaVars.input_validation_error = true; // Invalid verification type\\n        vaVars.error_code = CONFIGURATION_ISSUE;\\n        return;\\n    }\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d21a01f5b6ea42c8912b9261373786da\": {\n          \"id\": \"d21a01f5b6ea42c8912b9261373786da\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Input Validation Check\"\n        },\n        \"e9b43cf468474a028b1a02210e1a24da\": {\n          \"id\": \"e9b43cf468474a028b1a02210e1a24da\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"Authenticator Code\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Type in the authentication code that's showing on your app screen.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"fb80fc6c23154a5d8ade7411ad7a479d\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"a36155f098484653a9a4968e6eb85a3c\": {\n          \"id\": \"a36155f098484653a9a4968e6eb85a3c\",\n          \"name\": \"Validate Authenticator Code\",\n          \"script\": \"(function execute() {\\n    if(!vaVars.is_user_valid) {\\n        vaVars.input_validation_error = true;\\n        return;\\n    } else {\\n        var userId = vaInputs.userid.getValue();\\n        var verificationId = vaInputs.verificationid.getValue();\\n        var enrollmentMgr = new SNC.PwdEnrollmentManager();\\n        var USER_NOT_ENROLLED_CODE  = \\\"40001\\\";\\n        var is_user_enrolled = enrollmentMgr.isUserEnrolledByVerificationId(userId, verificationId);\\n        if (!is_user_enrolled) {\\n            vaVars.input_validation_error = true; // User not enrolled\\n            vaVars.error_code = USER_NOT_ENROLLED_CODE;\\n            return; \\n        }\\n    }\\n\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId = vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n    var SYSPARM_OTP_CODE = 'sysparm_otp_code';\\n    var INCORRECT_PIN_CODE = \\\"50000\\\";\\n\\n    var userInputs = [];\\n    userInputs.push({ key: SYSPARM_OTP_CODE, value: vaInputs.authenticator_code.getValue()});\\n\\n    var passwordResetScopedUtil = new global.PasswordResetScopedUtil();\\n    var verification_status = passwordResetScopedUtil.verify(userId, '', verificationId, contextId, userInputs);\\n\\n    if (!verification_status) {\\n        vaVars.input_validation_error = true;\\n        vaVars.error_code = INCORRECT_PIN_CODE;\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"0f3b0067c2a142689546d56fa6999d74\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d21a01f5b6ea42c8912b9261373786da\",\n          \"target\": \"e9b43cf468474a028b1a02210e1a24da\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.input_validation_error;\\n})()\"\n          },\n          \"label\": \"Valid Inputs\"\n        },\n        {\n          \"id\": \"91a071b5050b45dfb0349cb4ba42743a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4455bf091f754383aae397316d4f8f13\",\n          \"target\": \"17c5346b48454f05a13f3740a53e6ff0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"0812852acbc348c787cfa86304eb56c0\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"17c5346b48454f05a13f3740a53e6ff0\",\n          \"target\": \"d21a01f5b6ea42c8912b9261373786da\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c0687a5d29e94fc29cc757b769013115\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d21a01f5b6ea42c8912b9261373786da\",\n          \"target\": \"4d646d8b0511459b9256b969cc056790\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.input_validation_error;\\n})()\"\n          },\n          \"label\": \"Invalid Inputs\"\n        },\n        {\n          \"id\": \"bff1b056da70456aada5ddfc703d1890\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"e9b43cf468474a028b1a02210e1a24da\",\n          \"target\": \"a36155f098484653a9a4968e6eb85a3c\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"de14833206754fd8aede67514ec8dd3e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a36155f098484653a9a4968e6eb85a3c\",\n          \"target\": \"4d646d8b0511459b9256b969cc056790\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"01de649ec6b0445086fb076523eb2268\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"01de649ec6b0445086fb076523eb2268\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"1c88f87df8284af0b6d8e8655e33d986\": {\n      \"id\": \"1c88f87df8284af0b6d8e8655e33d986\",\n      \"name\": \"userid\",\n      \"label\": \"UserId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"4455bf091f754383aae397316d4f8f13\",\n      \"isHidden\": false\n    },\n    \"b0f347297b704b4b8eb4cf2d11055ce5\": {\n      \"id\": \"b0f347297b704b4b8eb4cf2d11055ce5\",\n      \"name\": \"verificationid\",\n      \"label\": \"VerificationId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"4455bf091f754383aae397316d4f8f13\",\n      \"isHidden\": false\n    },\n    \"9887e174c9c041f3a4381eaa8a1802d3\": {\n      \"id\": \"9887e174c9c041f3a4381eaa8a1802d3\",\n      \"name\": \"contextid\",\n      \"label\": \"ContextId\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"4455bf091f754383aae397316d4f8f13\",\n      \"isHidden\": false\n    },\n    \"fb80fc6c23154a5d8ade7411ad7a479d\": {\n      \"id\": \"fb80fc6c23154a5d8ade7411ad7a479d\",\n      \"name\": \"authenticator_code\",\n      \"label\": \"Authenticator Code\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY2MzU3NzAxNDUzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      },\n      \"nodeId\": \"e9b43cf468474a028b1a02210e1a24da\",\n      \"isHidden\": false\n    },\n    \"d8283e50fe0f43a594fc0f92a65152f8\": {\n      \"id\": \"d8283e50fe0f43a594fc0f92a65152f8\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return false;\\n})()\"\n      },\n      \"name\": \"input_validation_error\",\n      \"label\": \"input_validation_error\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"c6bce03321924b1c8f668fbf2a8d0b93\": {\n      \"id\": \"c6bce03321924b1c8f668fbf2a8d0b93\",\n      \"value\": {\n        \"mode\": \"script\",\n        \"value\": \"(function execute() {\\n    return true;\\n})()\\n\"\n      },\n      \"name\": \"is_user_valid\",\n      \"label\": \"is_user_valid\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"82cf64fe54254df9a13c977bd6c79e00\": {\n      \"id\": \"82cf64fe54254df9a13c977bd6c79e00\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"0\"\n      },\n      \"name\": \"error_code\",\n      \"label\": \"error_code\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"eaea6e1594ce5110f877f65b88f23ea6","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/421beb3304352210559073c06a02f7ef","value":"421beb3304352210559073c06a02f7ef"},"sys_update_name":"sys_cb_design_topic_eaea6e1594ce5110f877f65b88f23ea6","sys_updated_by":"admin","sys_created_on":"2022-09-19 11:38:57","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"db85c203bad143afb6909a148f5398ee\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"db85c203bad143afb6909a148f5398ee\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"db85c203bad143afb6909a148f5398ee\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"4455bf091f754383aae397316d4f8f13\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"4d646d8b0511459b9256b969cc056790\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var passwordResetScopedUtil = new PasswordResetScopedUtil();\\n    var AUTHENTICATOR_VERIFICATION_TYPE = 'c7835ab787773200cfab6dd207cb0b88';\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId =vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n    var INVALID_USER = \\\"40000\\\";\\n    var CONFIGURATION_ISSUE = \\\"40002\\\";\\n    //Check for valid user\\n    var userInfo = passwordResetScopedUtil.getUserByID(userId);\\n    if (gs.nil(userId) || !userInfo.exists()) {\\n        vaVars.is_user_valid = false; // Invalid user\\n        vaVars.error_code = INVALID_USER;\\n    }\\n\\n    //Check for valid context_id\\n    if (gs.nil(contextId)) {\\n        vaVars.input_validation_error = true;\\n        vaVars.error_code = CONFIGURATION_ISSUE;\\n        return;\\n    }\\n\\n    //Check for valid Google authenticator verification type\\n    var verification = passwordResetScopedUtil.getVerificationById(verificationId);\\n    if (gs.nil(verificationId) || !verification.exists() ||\\n        verification.getVerificationTypeId() != AUTHENTICATOR_VERIFICATION_TYPE) {\\n        vaVars.input_validation_error = true; // Invalid verification type\\n        vaVars.error_code = CONFIGURATION_ISSUE;\\n        return;\\n    }\\n})()\",\"id\":\"17c5346b48454f05a13f3740a53e6ff0\",\"name\":\"Validate Inputs\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Input Validation Check\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Valid Inputs\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.input_validation_error;\\n})()\"},\"id\":\"eab9ee06b14a4eb1bb3b34e4ac1d51db\",\"name\":\"Valid Inputs\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Invalid Inputs\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.input_validation_error;\\n})()\"},\"id\":\"1474e56acab54d5fa5f1a3ae88e09130\",\"name\":\"Invalid Inputs\"}],\"id\":\"d21a01f5b6ea42c8912b9261373786da\",\"goal_id\":\"primary\"},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"fb80fc6c23154a5d8ade7411ad7a479d\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Type in the authentication code that's showing on your app screen.\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"e9b43cf468474a028b1a02210e1a24da\",\"name\":\"Authenticator Code\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    if(!vaVars.is_user_valid) {\\n        vaVars.input_validation_error = true;\\n        return;\\n    } else {\\n        var userId = vaInputs.userid.getValue();\\n        var verificationId = vaInputs.verificationid.getValue();\\n        var enrollmentMgr = new SNC.PwdEnrollmentManager();\\n        var USER_NOT_ENROLLED_CODE  = \\\"40001\\\";\\n        var is_user_enrolled = enrollmentMgr.isUserEnrolledByVerificationId(userId, verificationId);\\n        if (!is_user_enrolled) {\\n            vaVars.input_validation_error = true; // User not enrolled\\n            vaVars.error_code = USER_NOT_ENROLLED_CODE;\\n            return; \\n        }\\n    }\\n\\n    var userId = vaInputs.userid.getValue();\\n    var verificationId = vaInputs.verificationid.getValue();\\n    var contextId = vaInputs.contextid.getValue();\\n    var SYSPARM_OTP_CODE = 'sysparm_otp_code';\\n    var INCORRECT_PIN_CODE = \\\"50000\\\";\\n\\n    var userInputs = [];\\n    userInputs.push({ key: SYSPARM_OTP_CODE, value: vaInputs.authenticator_code.getValue()});\\n\\n    var passwordResetScopedUtil = new global.PasswordResetScopedUtil();\\n    var verification_status = passwordResetScopedUtil.verify(userId, '', verificationId, contextId, userInputs);\\n\\n    if (!verification_status) {\\n        vaVars.input_validation_error = true;\\n        vaVars.error_code = INCORRECT_PIN_CODE;\\n    }\\n})()\\n\",\"id\":\"a36155f098484653a9a4968e6eb85a3c\",\"name\":\"Validate Authenticator Code\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"d21a01f5b6ea42c8912b9261373786da\",\"target_node_id\":\"e9b43cf468474a028b1a02210e1a24da\",\"branch_id\":\"eab9ee06b14a4eb1bb3b34e4ac1d51db\",\"id\":\"0f3b0067c2a142689546d56fa6999d74\",\"name\":\"eab9ee06b14a4eb1bb3b34e4ac1d51db\"},{\"type\":\"Edge\",\"source_node_id\":\"4455bf091f754383aae397316d4f8f13\",\"target_node_id\":\"17c5346b48454f05a13f3740a53e6ff0\",\"id\":\"91a071b5050b45dfb0349cb4ba42743a\"},{\"type\":\"Edge\",\"source_node_id\":\"17c5346b48454f05a13f3740a53e6ff0\",\"target_node_id\":\"d21a01f5b6ea42c8912b9261373786da\",\"id\":\"0812852acbc348c787cfa86304eb56c0\"},{\"type\":\"Edge\",\"source_node_id\":\"d21a01f5b6ea42c8912b9261373786da\",\"target_node_id\":\"4d646d8b0511459b9256b969cc056790\",\"branch_id\":\"1474e56acab54d5fa5f1a3ae88e09130\",\"id\":\"c0687a5d29e94fc29cc757b769013115\",\"name\":\"1474e56acab54d5fa5f1a3ae88e09130\"},{\"type\":\"Edge\",\"source_node_id\":\"e9b43cf468474a028b1a02210e1a24da\",\"target_node_id\":\"a36155f098484653a9a4968e6eb85a3c\",\"id\":\"bff1b056da70456aada5ddfc703d1890\"},{\"type\":\"Edge\",\"source_node_id\":\"a36155f098484653a9a4968e6eb85a3c\",\"target_node_id\":\"4d646d8b0511459b9256b969cc056790\",\"id\":\"de14833206754fd8aede67514ec8dd3e\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"input_validation_error\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return false;\\n})()\"},\"list\":false,\"id\":\"d8283e50fe0f43a594fc0f92a65152f8\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"is_user_valid\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return true;\\n})()\\n\"},\"list\":false,\"id\":\"c6bce03321924b1c8f668fbf2a8d0b93\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"error_code\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"0\"},\"list\":false,\"id\":\"82cf64fe54254df9a13c977bd6c79e00\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"01de649ec6b0445086fb076523eb2268\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"userid\",\"list\":false,\"id\":\"1c88f87df8284af0b6d8e8655e33d986\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"verificationid\",\"list\":false,\"id\":\"b0f347297b704b4b8eb4cf2d11055ce5\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"contextid\",\"list\":false,\"id\":\"9887e174c9c041f3a4381eaa8a1802d3\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"authenticator_code\",\"list\":false,\"id\":\"fb80fc6c23154a5d8ade7411ad7a479d\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"userid\",\"label\":\"userId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"1c88f87df8284af0b6d8e8655e33d986\",\"type\":\"String\",\"hint\":\"sys_user table record sys_id\"},{\"name\":\"verificationid\",\"label\":\"verificationId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"b0f347297b704b4b8eb4cf2d11055ce5\",\"type\":\"String\",\"hint\":\"pwd_verification table record sys_id\"},{\"name\":\"contextid\",\"label\":\"contextId\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"9887e174c9c041f3a4381eaa8a1802d3\",\"type\":\"String\",\"hint\":\"conversation context Id\"}],\"return-values-mapping\":[{\"name\":\"status\",\"label\":\"Status\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.input_validation_error ? 'Error' : 'Success';\\n})()\"}},{\"name\":\"status_code\",\"label\":\"Status_Code\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var SUCCESS_CODE = \\\"20000\\\";\\n    return vaVars.input_validation_error ? vaVars.error_code : SUCCESS_CODE;\\n})()\\n\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"id\":\"44eaeed194ce5110f877f65b88f23e33\",\"name\":\"Authenticator App Verification\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":true,\"csTopicId\":\"6eea6ed194ce5110f877f65b88f23ea6\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Authenticator App Verification","sys_name":"Authenticator App Verification","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"44eaeed194ce5110f877f65b88f23e33","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/6eea6ed194ce5110f877f65b88f23ea6","value":"6eea6ed194ce5110f877f65b88f23ea6"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"6","sys_updated_on":"2021-10-06 03:44:42","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"eafd685053130010cf8cddeeff7b12b5","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_eafd685053130010cf8cddeeff7b12b5","sys_updated_by":"admin","sys_created_on":"2020-02-26 22:21:52","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"47779507579d43b58b70d768b6b42e66\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"47779507579d43b58b70d768b6b42e66\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"47779507579d43b58b70d768b6b42e66\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"66e0e8619a704b3fac501eb9c80ced91\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"abf976c8a7b8433899157c307ea662d6\",\"name\":\"End\"},{\"type\":\"OutputPrompt\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(vaVars._topic_wrong_msg, vaContext.getRequesterLang());\\n})()\\n\"},\"id\":\"ce566f5f90e84abd9477686b710dc11f\",\"name\":\"Show Wrong Topic Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"label\":\"Wrong Topic\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._topic_strategy != 'unknown';\\n})()\\n\"},\"id\":\"b3dbefe169fc45068e876bc162877670\",\"name\":\"Wrong Topic\"},{\"type\":\"Branch\",\"label\":\"Topic Not Found\",\"expression\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars._topic_strategy == 'unknown';\\n})()\\n\"},\"id\":\"8e29466c73d440cd9411496280606eae\",\"name\":\"Topic Not Found\"}],\"id\":\"b224bd3220dc4489bfdcad5f3b03ff2d\",\"goal_id\":\"primary\"},{\"type\":\"OutputPrompt\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(vaVars._topic_sorry_msg, vaContext.getRequesterLang());\\n})()\"},\"id\":\"c647c62c280e47fbafedcdb9012c0ce2\",\"name\":\"Show Sorry Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"OutputPrompt\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(vaVars._topic_not_found_msg, vaContext.getRequesterLang());\\n})()\\n\\n\"},\"id\":\"64995fad3aa747be8ce77fc9a46de1ec\",\"name\":\"Show Topic Not Found Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.switchTopic(vaVars._setup_explore_help_topic);\\n})()\",\"id\":\"be796a8b6b1943f18c22d470df4d97b9\",\"name\":\"Show Topics\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"64995fad3aa747be8ce77fc9a46de1ec\",\"target_node_id\":\"be796a8b6b1943f18c22d470df4d97b9\",\"id\":\"580989e419a648b2b9cc9919718f2c55\"},{\"type\":\"Edge\",\"source_node_id\":\"66e0e8619a704b3fac501eb9c80ced91\",\"target_node_id\":\"b224bd3220dc4489bfdcad5f3b03ff2d\",\"id\":\"4f239cb33ecb4dc39357cf6c02f7eccd\"},{\"type\":\"Edge\",\"source_node_id\":\"b224bd3220dc4489bfdcad5f3b03ff2d\",\"target_node_id\":\"ce566f5f90e84abd9477686b710dc11f\",\"branch_id\":\"b3dbefe169fc45068e876bc162877670\",\"id\":\"9b010f541e1d4a49ba6ed86cef2edbf8\",\"name\":\"b3dbefe169fc45068e876bc162877670\"},{\"type\":\"Edge\",\"source_node_id\":\"b224bd3220dc4489bfdcad5f3b03ff2d\",\"target_node_id\":\"c647c62c280e47fbafedcdb9012c0ce2\",\"branch_id\":\"8e29466c73d440cd9411496280606eae\",\"id\":\"cd9ad8a9f5a646e69cab6dc562e7f44b\",\"name\":\"8e29466c73d440cd9411496280606eae\"},{\"type\":\"Edge\",\"source_node_id\":\"c647c62c280e47fbafedcdb9012c0ce2\",\"target_node_id\":\"64995fad3aa747be8ce77fc9a46de1ec\",\"id\":\"ddc5acc8bc2d41aeb9b7880b64f47bb7\"},{\"type\":\"Edge\",\"source_node_id\":\"ce566f5f90e84abd9477686b710dc11f\",\"target_node_id\":\"be796a8b6b1943f18c22d470df4d97b9\",\"id\":\"aed2ebd04a724fcc89e192e66d5878b7\"},{\"type\":\"Edge\",\"source_node_id\":\"be796a8b6b1943f18c22d470df4d97b9\",\"target_node_id\":\"abf976c8a7b8433899157c307ea662d6\",\"id\":\"0ae38f06b03c48dcb48b3be277976a40\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_topic_strategy\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"9a28be8f09df4aee84bbe18fadd58005\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"_topic_wrong_msg\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"4a7ca7bf40b048b5972127166e2003b7\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"_topic_sorry_msg\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"5026f2ef637a4784bdec9d0d1e6257fb\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"_topic_not_found_msg\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"0b1e01e49d044b5aacbcf342b2f46f66\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"_setup_explore_help_topic\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"330805faf81c483eb2dcee58e7afb06b\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"a0a0dc606e77454aa9f0d6c82382b73e\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n      return false;\\n      })()\\n    \"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"SETUP_TOPIC\",\"channels\":[],\"id\":\"0efd285053130010cf8cddeeff7b12a5\",\"name\":\"Fallback Topic.\",\"key_phrases\":[\"Fallback Topic\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Fallback Topic.","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"0efd285053130010cf8cddeeff7b12a5","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/eefd285053130010cf8cddeeff7b12b9","value":"eefd285053130010cf8cddeeff7b12b9"},"sys_created_by":"admin","sys_policy":"read"},{"sys_mod_count":"10","sys_updated_on":"2022-05-30 15:32:46","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"6988b72ebb644c26a3575acef20911c3\": {\n          \"id\": \"6988b72ebb644c26a3575acef20911c3\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"efe7ac16acd74160b057a9e5ceaad576\": {\n          \"id\": \"efe7ac16acd74160b057a9e5ceaad576\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"7a2f68d59bf04d09854f2167b10c8500\": {\n          \"stepType\": \"ReferenceChoicePrompt\",\n          \"name\": \"choose document table\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Choose the document table\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"a63edfe8bebe4cfc8a341613152a6e59\",\n          \"id\": \"7a2f68d59bf04d09854f2167b10c8500\",\n          \"mode\": \"external\",\n          \"script\": \"(function execute() {\\n    var options = [];\\n    var gr = new GlideAggregate('awa_service_channel'); //GlideAggregate query\\n    gr.addAggregate('count');\\n    gr.groupBy('workitem_table'); //Group aggregate by work_item table field\\n    gr.query();\\n    //options.push({'value':'test','label':'test'});\\n    while (gr.next()) {\\n        //options.push(gr.getValue('workitem_table'));\\n        options.push({ 'value': gr.getValue('workitem_table'), 'label': gr.getValue('workitem_table') })\\n    }\\n    return options;\\n})()\",\n          \"metadataScript\": \"\",\n          \"cardData\": {},\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"There are no active service channels in your instance.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"condition\": {\n            \"value\": \"(function execute() {\\n    var options = [];\\n    var gr = new GlideAggregate('awa_service_channel'); //GlideAggregate query\\n    gr.addAggregate('count');\\n    gr.groupBy('workitem_table'); //Group aggregate by work_item table field\\n    gr.query();\\n    //options.push({'value':'test','label':'test'});\\n    while (gr.next()) {\\n        //options.push(gr.getValue('workitem_table'));\\n        options.push({ 'value': gr.getValue('workitem_table'), 'label': gr.getValue('workitem_table') })\\n    }\\n    return options;\\n})()\",\n            \"mode\": \"external_script\"\n          },\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"63559385f0b54b74bc6ed9da9a011597\": {\n          \"id\": \"63559385f0b54b74bc6ed9da9a011597\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"7b7c7694b54d44b3b821b1b8e298e790\": {\n          \"id\": \"7b7c7694b54d44b3b821b1b8e298e790\",\n          \"name\": \"Fetch Active Service Channels\",\n          \"script\": \"(function execute() {\\nvar options = [];\\nvar gr = new GlideAggregate('awa_service_channel'); //GlideAggregate query\\ngr.addAggregate('count');\\ngr.addQuery('active',true);\\ngr.groupBy('workitem_table'); //Group aggregate by work_item table field\\ngr.query();\\nwhile(gr.next()){\\n   options.push(gr.getValue('workitem_table'));\\n}\\nvaVars.documentTables = JSON.stringify(options);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"932512c14a4b4f069b58622fe218e18a\": {\n          \"id\": \"932512c14a4b4f069b58622fe218e18a\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"No Service channel message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"There are no active service channels available in the instance\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"0421b0fd76604d6482af87cdda0e7c5a\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d3e0680e0190493d9b7975899d9f2444\": {\n          \"id\": \"d3e0680e0190493d9b7975899d9f2444\",\n          \"stepType\": \"Prompt\",\n          \"name\": \"input document number\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Input document number\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"variableId\": \"bb6ce3e0102b4eb9ae5a05f615e99e02\",\n          \"inputType\": {\n            \"format\": \"Text\",\n            \"script\": \"\"\n          }\n        },\n        \"78d510f35098476e96a297194902d584\": {\n          \"id\": \"78d510f35098476e96a297194902d584\",\n          \"stepType\": \"TableOutput\",\n          \"name\": \"QueryQueueCondition\",\n          \"header\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"displayColumnHeaders\": true,\n          \"dataSourceType\": \"script\",\n          \"script\": \"(function execute() {\\n    var util = new global.AWADiagnosticUtils();\\n    var output = util.queryQueueCondition(vaVars.documentTable,vaInputs.input_document_number);\\n    var rows = output.validqs;\\n    vaVars.validQueues = JSON.stringify(rows);\\n    var headers = ['Queues with matching Conditions'];\\n    \\n    return {\\n        columnHeaders: headers,\\n        columnValues: rows\\n    };\\n})()\\n\",\n          \"tableName\": \"\",\n          \"sortByColumns\": [],\n          \"tableCondition\": {\n            \"value\": \"\",\n            \"mode\": \"glide_query\"\n          },\n          \"columns\": [\n            {\n              \"key\": \"\",\n              \"value\": \"\",\n              \"label\": \"\"\n            }\n          ],\n          \"noRecordsResponseMsg\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"There are no active matching queues. Please check logs with the message - 'Invalid query detected' for any queues with invalid conditions.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"6b52ac24e3034dc69a2549f82f1aa384\": {\n          \"id\": \"6b52ac24e3034dc69a2549f82f1aa384\",\n          \"name\": \"set documentTable\",\n          \"script\": \"(function execute() {\\n    vaVars.documentTable = vaInputs.choose_document_table.getValue();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"6631ce18485f4dc18e1ee3f371d58f91\": {\n          \"id\": \"6631ce18485f4dc18e1ee3f371d58f91\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"16f9f39f5c7d4647bf90d5a8d121d76f\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"re-enter input\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"The document is not a valid document. Do you want to enter a different document number?\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"734c40b1982e4d2eb52d39c791e1cfa0\",\n          \"id\": \"16f9f39f5c7d4647bf90d5a8d121d76f\",\n          \"hasCardHeader\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false\n        },\n        \"cd04a55a7f2d4f69990a73d3d68c0564\": {\n          \"id\": \"cd04a55a7f2d4f69990a73d3d68c0564\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"332c66874021451b8a9ba34dc400d1b5\": {\n          \"id\": \"332c66874021451b8a9ba34dc400d1b5\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"checkWarningMessageInfo\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    var output = JSON.parse(vaVars.validQueues);\\n    var response = '';\\n    if(output.length > 0){\\n     //it means there are no matching queues found. So inform admin to check for responders status   \\n    response = gs.getMessage('Check for warning messages on responders from health check report');\\n    }\\n    return response;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"81c8f8b1802e486d9e6a0adeccf76366\": {\n          \"id\": \"81c8f8b1802e486d9e6a0adeccf76366\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"ec9c52382b814de88624a3546cbfe3ba\": {\n          \"id\": \"ec9c52382b814de88624a3546cbfe3ba\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Work Item exists message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"Work Item for the given document number \"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.input_document_number}}\",\n                        \"displayValue\": \"Input VariablesInput Document Number\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \" exists. Work Item Sys Id - \"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.workItemSysId}}\",\n                        \"displayValue\": \"Script VariablesworkItemSysId\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"_key\": \"2e15745441224dceadb39a8c5ae59d80\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"4809dd91d699417e93ed76f3fd3d11d6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d3e0680e0190493d9b7975899d9f2444\",\n          \"target\": \"6631ce18485f4dc18e1ee3f371d58f91\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"41823c27800a4c7eab2ae7fe119a9416\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"63559385f0b54b74bc6ed9da9a011597\",\n          \"target\": \"d3e0680e0190493d9b7975899d9f2444\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var tablesString = vaVars.documentTables;\\n    var tables = JSON.parse(tablesString);\\n    if(tables.length === 1){\\n    vaVars.documentTable = tables[0];\\n    }\\n    return tables.length === 1;\\n})()\\n\"\n          },\n          \"label\": \"one service channel\"\n        },\n        {\n          \"id\": \"32e6023dbf6f4a0292d4d31a5ea032b0\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"63559385f0b54b74bc6ed9da9a011597\",\n          \"target\": \"7a2f68d59bf04d09854f2167b10c8500\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var tablesString = vaVars.documentTables;\\n    var tables = JSON.parse(tablesString);\\n    return tables.length > 1;\\n})()\\n\"\n          },\n          \"label\": \"multiple service channels\"\n        },\n        {\n          \"id\": \"dd72357399ca4b10ab726a7ff800247e\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6988b72ebb644c26a3575acef20911c3\",\n          \"target\": \"7b7c7694b54d44b3b821b1b8e298e790\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"57430bb313ea48eea9cc028c3fa9036b\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7b7c7694b54d44b3b821b1b8e298e790\",\n          \"target\": \"63559385f0b54b74bc6ed9da9a011597\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"aa7c0f3a4dc54ec8bb4d17e10b8ad997\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"63559385f0b54b74bc6ed9da9a011597\",\n          \"target\": \"932512c14a4b4f069b58622fe218e18a\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var tablesString = vaVars.documentTables;\\n    var tables = JSON.parse(tablesString);\\n    return tables.length == 0;\\n})()\\n\"\n          },\n          \"label\": \"no service channel\"\n        },\n        {\n          \"id\": \"95c7e25c39134ac9be00cab4ea9bd6ff\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"932512c14a4b4f069b58622fe218e18a\",\n          \"target\": \"efe7ac16acd74160b057a9e5ceaad576\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"af9afaade7984d6e96e99fb749087cd4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7a2f68d59bf04d09854f2167b10c8500\",\n          \"target\": \"6b52ac24e3034dc69a2549f82f1aa384\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"6474f9324bf048938efdf193918f357a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"6b52ac24e3034dc69a2549f82f1aa384\",\n          \"target\": \"d3e0680e0190493d9b7975899d9f2444\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"3b31670e82de4833b8d2b0ce4659b3bc\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"6631ce18485f4dc18e1ee3f371d58f91\",\n          \"target\": \"16f9f39f5c7d4647bf90d5a8d121d76f\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var util = new global.AWADiagnosticUtils();\\n    var documentSysId = util.getDocumentSysId(vaVars.documentTable, vaInputs.input_document_number);\\n    return documentSysId ==='';\\n})()\\n\"\n          },\n          \"label\": \"invalid document\"\n        },\n        {\n          \"id\": \"5e966a752df84c1a9eaed43d615e021f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"16f9f39f5c7d4647bf90d5a8d121d76f\",\n          \"target\": \"cd04a55a7f2d4f69990a73d3d68c0564\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"7749fbfa58604a2c9ddcb0f7a4396fa2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"cd04a55a7f2d4f69990a73d3d68c0564\",\n          \"target\": \"d3e0680e0190493d9b7975899d9f2444\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.re_enter_input=yes\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Re enter document number\"\n        },\n        {\n          \"id\": \"97fc5550046f4084b088bd5dc2544461\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"cd04a55a7f2d4f69990a73d3d68c0564\",\n          \"target\": \"efe7ac16acd74160b057a9e5ceaad576\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.re_enter_input=no\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Donot re-enter document number\"\n        },\n        {\n          \"id\": \"46f9c6314fc942e4a6d0ec9e7abe5aaf\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"78d510f35098476e96a297194902d584\",\n          \"target\": \"332c66874021451b8a9ba34dc400d1b5\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"bb2aa4d52e274377bf38c5075d35a45f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"332c66874021451b8a9ba34dc400d1b5\",\n          \"target\": \"efe7ac16acd74160b057a9e5ceaad576\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"dc3e5f2a993e497bbddd30d8646b3e78\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"6631ce18485f4dc18e1ee3f371d58f91\",\n          \"target\": \"81c8f8b1802e486d9e6a0adeccf76366\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var util = new global.AWADiagnosticUtils();\\n    var documentSysId = util.getDocumentSysId(vaVars.documentTable, vaInputs.input_document_number);\\n    vaVars.documentSysId = documentSysId;\\n    return documentSysId!='';\\n})()\\n\"\n          },\n          \"label\": \"valid document\"\n        },\n        {\n          \"id\": \"d7c2f43316534b6ba38460e8f834de6c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"81c8f8b1802e486d9e6a0adeccf76366\",\n          \"target\": \"78d510f35098476e96a297194902d584\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var util = new global.AWADiagnosticUtils();\\n    var workItemSysId = util.getWorkItemSysId(vaVars.documentTable, vaVars.documentSysId);\\n    return workItemSysId ==='';\\n})()\\n\"\n          },\n          \"label\": \"work item does not exist\"\n        },\n        {\n          \"id\": \"2f1280163bb5426ea17e21232d23130b\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"81c8f8b1802e486d9e6a0adeccf76366\",\n          \"target\": \"ec9c52382b814de88624a3546cbfe3ba\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    var util = new global.AWADiagnosticUtils();\\n    var workItemSysId = util.getWorkItemSysId(vaVars.documentTable, vaVars.documentSysId);\\n    vaVars.workItemSysId = workItemSysId;\\n    return workItemSysId !='';\\n})()\\n\"\n          },\n          \"label\": \"work item exist\"\n        },\n        {\n          \"id\": \"fe6641046e9a4bc0a6b4355f70c5e0f2\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ec9c52382b814de88624a3546cbfe3ba\",\n          \"target\": \"efe7ac16acd74160b057a9e5ceaad576\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"a63edfe8bebe4cfc8a341613152a6e59\": {\n      \"id\": \"a63edfe8bebe4cfc8a341613152a6e59\",\n      \"name\": \"choose_document_table\",\n      \"label\": \"Choose Document Table\",\n      \"varType\": \"reference\",\n      \"table\": \"\",\n      \"category\": \"vaInputs\"\n    },\n    \"4d66c08510ad4c4fbe48bc7930161dfe\": {\n      \"id\": \"4d66c08510ad4c4fbe48bc7930161dfe\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"documentTables\",\n      \"label\": \"documentTables\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"bb6ce3e0102b4eb9ae5a05f615e99e02\": {\n      \"id\": \"bb6ce3e0102b4eb9ae5a05f615e99e02\",\n      \"name\": \"input_document_number\",\n      \"label\": \"Input Document Number\",\n      \"varType\": \"string\",\n      \"secure\": false,\n      \"category\": \"vaInputs\",\n      \"encryptionHashFunction\": \"SHA-256\",\n      \"encryptionSalt\": {\n        \"value\": \"MTY1MzM4NjEzMTA1NSBWQSBEZXNpZ25lciBpcyBhd2Vzb21l\",\n        \"mode\": \"simple\"\n      }\n    },\n    \"d0bdc828538f41739e82eb20cf0fe728\": {\n      \"id\": \"d0bdc828538f41739e82eb20cf0fe728\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"documentTable\",\n      \"label\": \"documentTable\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4048f6720c25404fba5a2de4bb5b3a80\": {\n      \"id\": \"4048f6720c25404fba5a2de4bb5b3a80\",\n      \"value\": {\n        \"mode\": \"simple\",\n        \"value\": \"null\"\n      },\n      \"name\": \"documentSysId\",\n      \"label\": \"documentSysId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"734c40b1982e4d2eb52d39c791e1cfa0\": {\n      \"id\": \"734c40b1982e4d2eb52d39c791e1cfa0\",\n      \"name\": \"re_enter_input\",\n      \"label\": \"Re-enter Input\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"Yes\",\n          \"value\": \"yes\"\n        },\n        {\n          \"label\": \"No\",\n          \"value\": \"no\"\n        }\n      ],\n      \"category\": \"vaInputs\"\n    },\n    \"de0e64a6fef847f389d343f7fc2e0654\": {\n      \"id\": \"de0e64a6fef847f389d343f7fc2e0654\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"validQueues\",\n      \"label\": \"validQueues\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"dad05703c88344aba620e15bf6e2ee84\": {\n      \"id\": \"dad05703c88344aba620e15bf6e2ee84\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"workItemSysId\",\n      \"label\": \"workItemSysId\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"f19684fb772301104646d99dbd5a9995","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"sys_update_name":"sys_cb_design_topic_f19684fb772301104646d99dbd5a9995","sys_updated_by":"admin","sys_created_on":"2022-05-25 11:28:51","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"85c6a8f927224cf8bb2bd27b318791f2\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"85c6a8f927224cf8bb2bd27b318791f2\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"85c6a8f927224cf8bb2bd27b318791f2\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"6988b72ebb644c26a3575acef20911c3\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"efe7ac16acd74160b057a9e5ceaad576\",\"name\":\"End\"},{\"type\":\"ReferenceChoiceInputPrompt\",\"type\":\"ReferenceChoiceInputPrompt\",\"mode\":\"external\",\"id\":\"7a2f68d59bf04d09854f2167b10c8500\",\"name\":\"choose document table\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"a63edfe8bebe4cfc8a341613152a6e59\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Choose the document table\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"expression_mode\":\"script\",\"script\":\"(function execute() {\\n    var options = [];\\n    var gr = new GlideAggregate('awa_service_channel'); //GlideAggregate query\\n    gr.addAggregate('count');\\n    gr.groupBy('workitem_table'); //Group aggregate by work_item table field\\n    gr.query();\\n    //options.push({'value':'test','label':'test'});\\n    while (gr.next()) {\\n        //options.push(gr.getValue('workitem_table'));\\n        options.push({ 'value': gr.getValue('workitem_table'), 'label': gr.getValue('workitem_table') })\\n    }\\n    return options;\\n})()\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"no_options_found_message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"There are no active service channels in your instance.\\\", vaContext.getRequesterLang())\"},\"condition\":{\"type\":\"Condition\",\"mode\":\"external_script\",\"value\":\"(function execute() {\\n    var options = [];\\n    var gr = new GlideAggregate('awa_service_channel'); //GlideAggregate query\\n    gr.addAggregate('count');\\n    gr.groupBy('workitem_table'); //Group aggregate by work_item table field\\n    gr.query();\\n    //options.push({'value':'test','label':'test'});\\n    while (gr.next()) {\\n        //options.push(gr.getValue('workitem_table'));\\n        options.push({ 'value': gr.getValue('workitem_table'), 'label': gr.getValue('workitem_table') })\\n    }\\n    return options;\\n})()\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"one service channel\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var tablesString = vaVars.documentTables;\\n    var tables = JSON.parse(tablesString);\\n    if(tables.length === 1){\\n    vaVars.documentTable = tables[0];\\n    }\\n    return tables.length === 1;\\n})()\\n\"},\"id\":\"abd8e3ddc369401b886c8959db28eea6\",\"name\":\"one service channel\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"multiple service channels\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var tablesString = vaVars.documentTables;\\n    var tables = JSON.parse(tablesString);\\n    return tables.length > 1;\\n})()\\n\"},\"id\":\"4c3bf4eade974864961f388326f55022\",\"name\":\"multiple service channels\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"no service channel\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var tablesString = vaVars.documentTables;\\n    var tables = JSON.parse(tablesString);\\n    return tables.length == 0;\\n})()\\n\"},\"id\":\"f1365933e02942d0ac8b8e60b6329ea3\",\"name\":\"no service channel\"}],\"id\":\"63559385f0b54b74bc6ed9da9a011597\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\nvar options = [];\\nvar gr = new GlideAggregate('awa_service_channel'); //GlideAggregate query\\ngr.addAggregate('count');\\ngr.addQuery('active',true);\\ngr.groupBy('workitem_table'); //Group aggregate by work_item table field\\ngr.query();\\nwhile(gr.next()){\\n   options.push(gr.getValue('workitem_table'));\\n}\\nvaVars.documentTables = JSON.stringify(options);\\n})()\\n\",\"id\":\"7b7c7694b54d44b3b821b1b8e298e790\",\"name\":\"Fetch Active Service Channels\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"There are no active service channels available in the instance\\\", vaContext.getRequesterLang())\"}],\"id\":\"932512c14a4b4f069b58622fe218e18a\",\"name\":\"No Service channel message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"InputPrompt\",\"type\":\"InputPrompt\",\"variable_id\":\"bb6ce3e0102b4eb9ae5a05f615e99e02\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Input document number\\\", vaContext.getRequesterLang())\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"id\":\"d3e0680e0190493d9b7975899d9f2444\",\"name\":\"input document number\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"formatType\":\"Text\",\"validationScript\":\"\"},{\"type\":\"TableOutput\",\"type\":\"TableOutput\",\"mode\":\"external\",\"conditionType\":\"simple\",\"query\":\"(function execute() {\\n    var util = new global.AWADiagnosticUtils();\\n    var output = util.queryQueueCondition(vaVars.documentTable,vaInputs.input_document_number);\\n    var rows = output.validqs;\\n    vaVars.validQueues = JSON.stringify(rows);\\n    var headers = ['Queues with matching Conditions'];\\n    \\n    return {\\n        columnHeaders: headers,\\n        columnValues: rows\\n    };\\n})()\\n\",\"title\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"columns\":[],\"showColumnHeaders\":true,\"noResultsMessage\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"There are no active matching queues. Please check logs with the message - 'Invalid query detected' for any queues with invalid conditions.\"},\"id\":\"78d510f35098476e96a297194902d584\",\"name\":\"QueryQueueCondition\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.documentTable = vaInputs.choose_document_table.getValue();\\n})()\\n\",\"id\":\"6b52ac24e3034dc69a2549f82f1aa384\",\"name\":\"set documentTable\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"invalid document\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var util = new global.AWADiagnosticUtils();\\n    var documentSysId = util.getDocumentSysId(vaVars.documentTable, vaInputs.input_document_number);\\n    return documentSysId ==='';\\n})()\\n\"},\"id\":\"0fc4bdc7200b4f388bb84a1cfd4cb314\",\"name\":\"invalid document\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"valid document\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var util = new global.AWADiagnosticUtils();\\n    var documentSysId = util.getDocumentSysId(vaVars.documentTable, vaInputs.input_document_number);\\n    vaVars.documentSysId = documentSysId;\\n    return documentSysId!='';\\n})()\\n\"},\"id\":\"581b6f12c47c4dd6b9a70a4842035219\",\"name\":\"valid document\"}],\"id\":\"6631ce18485f4dc18e1ee3f371d58f91\",\"goal_id\":\"primary\"},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"16f9f39f5c7d4647bf90d5a8d121d76f\",\"name\":\"re-enter input\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"734c40b1982e4d2eb52d39c791e1cfa0\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"The document is not a valid document. Do you want to enter a different document number?\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Re enter document number\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"re_enter_input=yes\"},\"id\":\"76ed4332a5234be6828a9662575bddf4\",\"name\":\"Re enter document number\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Donot re-enter document number\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"re_enter_input=no\"},\"id\":\"d13c4347f72d46ab8a66486803780527\",\"name\":\"Donot re-enter document number\"}],\"id\":\"cd04a55a7f2d4f69990a73d3d68c0564\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var output = JSON.parse(vaVars.validQueues);\\n    var response = '';\\n    if(output.length > 0){\\n     //it means there are no matching queues found. So inform admin to check for responders status   \\n    response = gs.getMessage('Check for warning messages on responders from health check report');\\n    }\\n    return response;\\n})()\\n\"}],\"id\":\"332c66874021451b8a9ba34dc400d1b5\",\"name\":\"checkWarningMessageInfo\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"work item does not exist\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var util = new global.AWADiagnosticUtils();\\n    var workItemSysId = util.getWorkItemSysId(vaVars.documentTable, vaVars.documentSysId);\\n    return workItemSysId ==='';\\n})()\\n\"},\"id\":\"a0ecca40fe9c4a3f9f741ad6ba16c69b\",\"name\":\"work item does not exist\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"work item exist\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    var util = new global.AWADiagnosticUtils();\\n    var workItemSysId = util.getWorkItemSysId(vaVars.documentTable, vaVars.documentSysId);\\n    vaVars.workItemSysId = workItemSysId;\\n    return workItemSysId !='';\\n})()\\n\"},\"id\":\"13d66dde8c1040fdaba5c5c698e6f8e1\",\"name\":\"work item exist\"}],\"id\":\"81c8f8b1802e486d9e6a0adeccf76366\",\"goal_id\":\"primary\"},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Work Item for the given document number {0} exists. Work Item Sys Id - {1}\\\", vaContext.getRequesterLang(), [vaInputs.input_document_number,vaVars.workItemSysId])\"}],\"id\":\"ec9c52382b814de88624a3546cbfe3ba\",\"name\":\"Work Item exists message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"d3e0680e0190493d9b7975899d9f2444\",\"target_node_id\":\"6631ce18485f4dc18e1ee3f371d58f91\",\"id\":\"4809dd91d699417e93ed76f3fd3d11d6\"},{\"type\":\"Edge\",\"source_node_id\":\"63559385f0b54b74bc6ed9da9a011597\",\"target_node_id\":\"d3e0680e0190493d9b7975899d9f2444\",\"branch_id\":\"abd8e3ddc369401b886c8959db28eea6\",\"id\":\"41823c27800a4c7eab2ae7fe119a9416\",\"name\":\"abd8e3ddc369401b886c8959db28eea6\"},{\"type\":\"Edge\",\"source_node_id\":\"63559385f0b54b74bc6ed9da9a011597\",\"target_node_id\":\"7a2f68d59bf04d09854f2167b10c8500\",\"branch_id\":\"4c3bf4eade974864961f388326f55022\",\"id\":\"32e6023dbf6f4a0292d4d31a5ea032b0\",\"name\":\"4c3bf4eade974864961f388326f55022\"},{\"type\":\"Edge\",\"source_node_id\":\"6988b72ebb644c26a3575acef20911c3\",\"target_node_id\":\"7b7c7694b54d44b3b821b1b8e298e790\",\"id\":\"dd72357399ca4b10ab726a7ff800247e\"},{\"type\":\"Edge\",\"source_node_id\":\"7b7c7694b54d44b3b821b1b8e298e790\",\"target_node_id\":\"63559385f0b54b74bc6ed9da9a011597\",\"id\":\"57430bb313ea48eea9cc028c3fa9036b\"},{\"type\":\"Edge\",\"source_node_id\":\"63559385f0b54b74bc6ed9da9a011597\",\"target_node_id\":\"932512c14a4b4f069b58622fe218e18a\",\"branch_id\":\"f1365933e02942d0ac8b8e60b6329ea3\",\"id\":\"aa7c0f3a4dc54ec8bb4d17e10b8ad997\",\"name\":\"f1365933e02942d0ac8b8e60b6329ea3\"},{\"type\":\"Edge\",\"source_node_id\":\"932512c14a4b4f069b58622fe218e18a\",\"target_node_id\":\"efe7ac16acd74160b057a9e5ceaad576\",\"id\":\"95c7e25c39134ac9be00cab4ea9bd6ff\"},{\"type\":\"Edge\",\"source_node_id\":\"7a2f68d59bf04d09854f2167b10c8500\",\"target_node_id\":\"6b52ac24e3034dc69a2549f82f1aa384\",\"id\":\"af9afaade7984d6e96e99fb749087cd4\"},{\"type\":\"Edge\",\"source_node_id\":\"6b52ac24e3034dc69a2549f82f1aa384\",\"target_node_id\":\"d3e0680e0190493d9b7975899d9f2444\",\"id\":\"6474f9324bf048938efdf193918f357a\"},{\"type\":\"Edge\",\"source_node_id\":\"6631ce18485f4dc18e1ee3f371d58f91\",\"target_node_id\":\"16f9f39f5c7d4647bf90d5a8d121d76f\",\"branch_id\":\"0fc4bdc7200b4f388bb84a1cfd4cb314\",\"id\":\"3b31670e82de4833b8d2b0ce4659b3bc\",\"name\":\"0fc4bdc7200b4f388bb84a1cfd4cb314\"},{\"type\":\"Edge\",\"source_node_id\":\"16f9f39f5c7d4647bf90d5a8d121d76f\",\"target_node_id\":\"cd04a55a7f2d4f69990a73d3d68c0564\",\"id\":\"5e966a752df84c1a9eaed43d615e021f\"},{\"type\":\"Edge\",\"source_node_id\":\"cd04a55a7f2d4f69990a73d3d68c0564\",\"target_node_id\":\"d3e0680e0190493d9b7975899d9f2444\",\"branch_id\":\"76ed4332a5234be6828a9662575bddf4\",\"id\":\"7749fbfa58604a2c9ddcb0f7a4396fa2\",\"name\":\"76ed4332a5234be6828a9662575bddf4\"},{\"type\":\"Edge\",\"source_node_id\":\"cd04a55a7f2d4f69990a73d3d68c0564\",\"target_node_id\":\"efe7ac16acd74160b057a9e5ceaad576\",\"branch_id\":\"d13c4347f72d46ab8a66486803780527\",\"id\":\"97fc5550046f4084b088bd5dc2544461\",\"name\":\"d13c4347f72d46ab8a66486803780527\"},{\"type\":\"Edge\",\"source_node_id\":\"78d510f35098476e96a297194902d584\",\"target_node_id\":\"332c66874021451b8a9ba34dc400d1b5\",\"id\":\"46f9c6314fc942e4a6d0ec9e7abe5aaf\"},{\"type\":\"Edge\",\"source_node_id\":\"332c66874021451b8a9ba34dc400d1b5\",\"target_node_id\":\"efe7ac16acd74160b057a9e5ceaad576\",\"id\":\"bb2aa4d52e274377bf38c5075d35a45f\"},{\"type\":\"Edge\",\"source_node_id\":\"6631ce18485f4dc18e1ee3f371d58f91\",\"target_node_id\":\"81c8f8b1802e486d9e6a0adeccf76366\",\"branch_id\":\"581b6f12c47c4dd6b9a70a4842035219\",\"id\":\"dc3e5f2a993e497bbddd30d8646b3e78\",\"name\":\"581b6f12c47c4dd6b9a70a4842035219\"},{\"type\":\"Edge\",\"source_node_id\":\"81c8f8b1802e486d9e6a0adeccf76366\",\"target_node_id\":\"78d510f35098476e96a297194902d584\",\"branch_id\":\"a0ecca40fe9c4a3f9f741ad6ba16c69b\",\"id\":\"d7c2f43316534b6ba38460e8f834de6c\",\"name\":\"a0ecca40fe9c4a3f9f741ad6ba16c69b\"},{\"type\":\"Edge\",\"source_node_id\":\"81c8f8b1802e486d9e6a0adeccf76366\",\"target_node_id\":\"ec9c52382b814de88624a3546cbfe3ba\",\"branch_id\":\"13d66dde8c1040fdaba5c5c698e6f8e1\",\"id\":\"2f1280163bb5426ea17e21232d23130b\",\"name\":\"13d66dde8c1040fdaba5c5c698e6f8e1\"},{\"type\":\"Edge\",\"source_node_id\":\"ec9c52382b814de88624a3546cbfe3ba\",\"target_node_id\":\"efe7ac16acd74160b057a9e5ceaad576\",\"id\":\"fe6641046e9a4bc0a6b4355f70c5e0f2\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"documentTables\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"4d66c08510ad4c4fbe48bc7930161dfe\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"documentTable\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"d0bdc828538f41739e82eb20cf0fe728\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"documentSysId\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"null\"},\"list\":false,\"id\":\"4048f6720c25404fba5a2de4bb5b3a80\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"validQueues\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"de0e64a6fef847f389d343f7fc2e0654\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"workItemSysId\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"dad05703c88344aba620e15bf6e2ee84\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[],\"id\":\"a63edfe8bebe4cfc8a341613152a6e59\",\"name\":\"choose_document_table\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false,\"table\":\"\"},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"input_document_number\",\"list\":false,\"id\":\"bb6ce3e0102b4eb9ae5a05f615e99e02\",\"formatType\":\"Text\",\"validationScript\":\"\",\"secure\":false,\"sensitive\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"Yes\",\"element\":\"yes\"},{\"name\":\"No\",\"element\":\"no\"}],\"id\":\"734c40b1982e4d2eb52d39c791e1cfa0\",\"name\":\"re_enter_input\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return true or false to indicate if the topic or topic node can run\\n       and be discoverable (or not). Using the format vaContext.liveagent_[var_name] For example:\\n\\n       var applicability = vaContext.liveagent_portal == 'csm' ? true : false;\\n       return applicability;\\n    */\\n    return false;\\n})()\\n\"},\"roles\":[],\"scope\":\"434a64fd531db410f738ddeeff7b12c7\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"d0796d0f77e301104646d99dbd5a994b\",\"name\":\"WorkItem not created\",\"key_phrases\":[\"workitem not created\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":false,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"WorkItem not created","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"design_topic_id":"d0796d0f77e301104646d99dbd5a994b","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/b596c0fb772301104646d99dbd5a995c","value":"b596c0fb772301104646d99dbd5a995c"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"15","sys_updated_on":"2022-09-02 09:41:40","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"4b103659ec784d338689491eac76a4bc\": {\n          \"id\": \"4b103659ec784d338689491eac76a4bc\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"9dad814726fe46a688c1c537506c7584\": {\n          \"id\": \"9dad814726fe46a688c1c537506c7584\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          }\n        },\n        \"18ff37f3dc9e4d36a4924013fa7269d4\": {\n          \"id\": \"18ff37f3dc9e4d36a4924013fa7269d4\",\n          \"name\": \"Initiate Connect To Agent\",\n          \"script\": \"(function execute() {\\n    vaSystem.connectToAgent();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"78a36aa546044f589df474d6baacc234\": {\n          \"id\": \"78a36aa546044f589df474d6baacc234\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Display Error Message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return vaVars.global_error_message;\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"secure\": false\n        },\n        \"d611757099fd4a0493d9eefb87339a79\": {\n          \"id\": \"d611757099fd4a0493d9eefb87339a79\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is Live Agent Applicable?\"\n        },\n        \"49ddd8596d6d449cb74b79c80ee10cd7\": {\n          \"id\": \"49ddd8596d6d449cb74b79c80ee10cd7\",\n          \"name\": \"Set Live Agent Applicability\",\n          \"script\": \"(function execute() {\\n    vaVars.isLiveAgentApplicable = true;\\n\\n    if(vaContext && vaContext.disable_live_agent == \\\"true\\\") {\\n        vaVars.isLiveAgentApplicable = false;\\n    }\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"a3af26089b5a42468213f705fe72b26a\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"18ff37f3dc9e4d36a4924013fa7269d4\",\n          \"target\": \"9dad814726fe46a688c1c537506c7584\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e26adac3538943799d33073198191a11\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4b103659ec784d338689491eac76a4bc\",\n          \"target\": \"78a36aa546044f589df474d6baacc234\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"52f5925cf8fd4d26b5bf2a68a615d4ce\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d611757099fd4a0493d9eefb87339a79\",\n          \"target\": \"18ff37f3dc9e4d36a4924013fa7269d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.isLiveAgentApplicable;\\n})()\\n\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"f98e80443f514d658359979710403d4d\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"d611757099fd4a0493d9eefb87339a79\",\n          \"target\": \"9dad814726fe46a688c1c537506c7584\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.isLiveAgentApplicable;\\n})()\\n\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"3b906a44a95d48ba9ca67917a247d7b8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"78a36aa546044f589df474d6baacc234\",\n          \"target\": \"49ddd8596d6d449cb74b79c80ee10cd7\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8c003eb9a0ed4277bafd7594dbafa451\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"49ddd8596d6d449cb74b79c80ee10cd7\",\n          \"target\": \"d611757099fd4a0493d9eefb87339a79\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"ce4258236285487baa863a4eaefd1bcb\": {\n      \"id\": \"ce4258236285487baa863a4eaefd1bcb\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"global_error_message\",\n      \"label\": \"global_error_message\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"038f2447465e494c90fd1e5d6002db2b\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"038f2447465e494c90fd1e5d6002db2b\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"f1ed285053130010cf8cddeeff7b12e4","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_f1ed285053130010cf8cddeeff7b12e4","sys_updated_by":"admin","sys_created_on":"2020-02-26 22:21:34","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"f890433cb41b48e4896b17d9a8d53284\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"f890433cb41b48e4896b17d9a8d53284\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"f890433cb41b48e4896b17d9a8d53284\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"4b103659ec784d338689491eac76a4bc\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"9dad814726fe46a688c1c537506c7584\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.connectToAgent();\\n})()\\n\",\"id\":\"18ff37f3dc9e4d36a4924013fa7269d4\",\"name\":\"Initiate Connect To Agent\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_error_message;\\n})()\\n\"}],\"id\":\"78a36aa546044f589df474d6baacc234\",\"name\":\"Display Error Message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Is Live Agent Applicable?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.isLiveAgentApplicable;\\n})()\\n\"},\"id\":\"26005996060045238d603ab8c6c35f3e\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.isLiveAgentApplicable;\\n})()\\n\"},\"id\":\"7b725ae6d79349e9b90070f8c083ae3c\",\"name\":\"No\"}],\"id\":\"d611757099fd4a0493d9eefb87339a79\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.isLiveAgentApplicable = true;\\n\\n    if(vaContext && vaContext.disable_live_agent == \\\"true\\\") {\\n        vaVars.isLiveAgentApplicable = false;\\n    }\\n})()\\n\",\"id\":\"49ddd8596d6d449cb74b79c80ee10cd7\",\"name\":\"Set Live Agent Applicability\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"18ff37f3dc9e4d36a4924013fa7269d4\",\"target_node_id\":\"9dad814726fe46a688c1c537506c7584\",\"id\":\"a3af26089b5a42468213f705fe72b26a\"},{\"type\":\"Edge\",\"source_node_id\":\"4b103659ec784d338689491eac76a4bc\",\"target_node_id\":\"78a36aa546044f589df474d6baacc234\",\"id\":\"e26adac3538943799d33073198191a11\"},{\"type\":\"Edge\",\"source_node_id\":\"d611757099fd4a0493d9eefb87339a79\",\"target_node_id\":\"18ff37f3dc9e4d36a4924013fa7269d4\",\"branch_id\":\"26005996060045238d603ab8c6c35f3e\",\"id\":\"52f5925cf8fd4d26b5bf2a68a615d4ce\",\"name\":\"26005996060045238d603ab8c6c35f3e\"},{\"type\":\"Edge\",\"source_node_id\":\"d611757099fd4a0493d9eefb87339a79\",\"target_node_id\":\"9dad814726fe46a688c1c537506c7584\",\"branch_id\":\"7b725ae6d79349e9b90070f8c083ae3c\",\"id\":\"f98e80443f514d658359979710403d4d\",\"name\":\"7b725ae6d79349e9b90070f8c083ae3c\"},{\"type\":\"Edge\",\"source_node_id\":\"78a36aa546044f589df474d6baacc234\",\"target_node_id\":\"49ddd8596d6d449cb74b79c80ee10cd7\",\"id\":\"3b906a44a95d48ba9ca67917a247d7b8\"},{\"type\":\"Edge\",\"source_node_id\":\"49ddd8596d6d449cb74b79c80ee10cd7\",\"target_node_id\":\"d611757099fd4a0493d9eefb87339a79\",\"id\":\"8c003eb9a0ed4277bafd7594dbafa451\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"global_error_message\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"ce4258236285487baa863a4eaefd1bcb\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"038f2447465e494c90fd1e5d6002db2b\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n            return false;\\n            })()\\n        \"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"SETUP_TOPIC\",\"channels\":[],\"id\":\"95ede45053130010cf8cddeeff7b1289\",\"name\":\"Error Handling Topic.\",\"key_phrases\":[\"Error Handling Topic\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":false,\"csTopicId\":\"f5ed285053130010cf8cddeeff7b12e1\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Error Handling Topic.","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"95ede45053130010cf8cddeeff7b1289","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/f5ed285053130010cf8cddeeff7b12e1","value":"f5ed285053130010cf8cddeeff7b12e1"},"sys_created_by":"admin","sys_policy":"read"},{"sys_mod_count":"24","sys_updated_on":"2022-07-20 14:29:39","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"35c3a8c9afc8478daff6bcb1429efd66\": {\n          \"id\": \"35c3a8c9afc8478daff6bcb1429efd66\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": \"(function execute() {\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\",\n            \"mode\": \"script\"\n          }\n        },\n        \"9acf9eee27074cee9f245953a65d5595\": {\n          \"id\": \"9acf9eee27074cee9f245953a65d5595\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"value\": \"(function execute() {\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n})()\\n\",\n            \"mode\": \"script\"\n          }\n        },\n        \"31d0f55c3e8748a797c27a893cd90613\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Prompt in LA\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  },\n                  {\n                    \"text\": \"Please make a selection.\"\n                  },\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"query\",\n            \"value\": \"\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"2fbbb7be0db44abeb80b54bc8acb33a4\",\n          \"id\": \"31d0f55c3e8748a797c27a893cd90613\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false\n        },\n        \"41376bb7c1894496a83d64ca278419bb\": {\n          \"id\": \"41376bb7c1894496a83d64ca278419bb\",\n          \"stepType\": \"Decision\",\n          \"name\": \"End conversation?\"\n        },\n        \"9f566534175b4f748dedfc77677a1d2e\": {\n          \"id\": \"9f566534175b4f748dedfc77677a1d2e\",\n          \"name\": \"End chat\",\n          \"script\": \"(function execute() {\\n    vaSystem.endConversation();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_isInChat;\\n})()\\n\"\n          }\n        },\n        \"64727848000b430d8470cf72d1bca5b3\": {\n          \"id\": \"64727848000b430d8470cf72d1bca5b3\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Resume conversation message\",\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\\n\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_isInChat;\\n})()\\n\"\n          },\n          \"secure\": false\n        },\n        \"88816418bef245c3a82100d0156c55d4\": {\n          \"id\": \"88816418bef245c3a82100d0156c55d4\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Closing message if not in chat\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return vaSystem.getClosingMessage();\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_isInChat;\\n})()\\n\"\n          }\n        },\n        \"7cbaa78fda0a40fe845678ef367a7be3\": {\n          \"id\": \"7cbaa78fda0a40fe845678ef367a7be3\",\n          \"name\": \"Set flag for LA mode\",\n          \"script\": \"(function execute() {\\n    var conversationId = vaSystem.getConversationId();\\n    vaVars.global_isInChat = vaSystem.isInChat(conversationId);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"a38c71e0191a4f83ab0e4453dbe5711d\": {\n          \"id\": \"a38c71e0191a4f83ab0e4453dbe5711d\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Is in LA chat?\"\n        },\n        \"76b6bdc74acd4d4fb664bf459a7768b2\": {\n          \"stepType\": \"ChoicePrompt\",\n          \"name\": \"Prompt in VA\",\n          \"prompt\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Please make a selection.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"confirmMessage\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"acknowledgeMsg\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"applicability\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\\n\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"defaultValue\": {\n            \"value\": \"\",\n            \"mode\": \"simple\"\n          },\n          \"variableId\": \"221ac9fe99534eda8a18677d0cde407b\",\n          \"id\": \"76b6bdc74acd4d4fb664bf459a7768b2\",\n          \"withNluUserInput\": false,\n          \"skipIfFulfilled\": false,\n          \"cardMetadata\": {\n            \"mode\": \"card\",\n            \"metadataScript\": \"\",\n            \"cardTemplate\": \"\",\n            \"cardFields\": {},\n            \"cardDefinition\": {}\n          },\n          \"hasCardHeader\": false\n        },\n        \"9a67e889fe494f3982b0de1588338cec\": {\n          \"id\": \"9a67e889fe494f3982b0de1588338cec\",\n          \"stepType\": \"Decision\",\n          \"name\": \"End conversation?\"\n        },\n        \"63c977abd8364e0d9943ae5d4e581a5e\": {\n          \"id\": \"63c977abd8364e0d9943ae5d4e581a5e\",\n          \"name\": \"End conversation\",\n          \"script\": \"(function execute() {\\n    vaSystem.endConversation();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"4ac00fbe56694d3d892b14c10da2f560\": {\n          \"id\": \"4ac00fbe56694d3d892b14c10da2f560\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Resume conversation message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": \"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\",\n              \"mode\": \"script\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f2e0641e03624315b9f8dc8ea3ebebac\": {\n          \"id\": \"f2e0641e03624315b9f8dc8ea3ebebac\",\n          \"name\": \"Post-process\",\n          \"script\": \"(function execute() {\\n    var cafContextualUtility = new CAFContextualUtility();\\n    cafContextualUtility.postProcess();   \\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"950c859ab9ef480dbefd3d89ffbb1342\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"9f566534175b4f748dedfc77677a1d2e\",\n          \"target\": \"88816418bef245c3a82100d0156c55d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"843da9475d974aad85be2371da7ebfea\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"41376bb7c1894496a83d64ca278419bb\",\n          \"target\": \"9f566534175b4f748dedfc77677a1d2e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.prompt_in_la=1\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"176f0eea01634cec9d595387353a2937\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"31d0f55c3e8748a797c27a893cd90613\",\n          \"target\": \"41376bb7c1894496a83d64ca278419bb\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"9f8e4042ec634b1c9232120857fe0753\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"41376bb7c1894496a83d64ca278419bb\",\n          \"target\": \"64727848000b430d8470cf72d1bca5b3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.prompt_in_la=0\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"c80795d48c40436d8cccd03600266e02\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"64727848000b430d8470cf72d1bca5b3\",\n          \"target\": \"88816418bef245c3a82100d0156c55d4\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"cd57f0309cce46c5b5f90a5fcc9e3b44\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"88816418bef245c3a82100d0156c55d4\",\n          \"target\": \"9acf9eee27074cee9f245953a65d5595\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"468a01ed57104f4c9da52dd2ebf2b396\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"35c3a8c9afc8478daff6bcb1429efd66\",\n          \"target\": \"7cbaa78fda0a40fe845678ef367a7be3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"4eb00b9aa9a2466dbc30c01ec1fa04c8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"7cbaa78fda0a40fe845678ef367a7be3\",\n          \"target\": \"a38c71e0191a4f83ab0e4453dbe5711d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"58608625f4b34d80a910a7e636670ed2\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a38c71e0191a4f83ab0e4453dbe5711d\",\n          \"target\": \"31d0f55c3e8748a797c27a893cd90613\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return vaVars.global_isInChat;\\n})()\\n\"\n          },\n          \"label\": \"LA\"\n        },\n        {\n          \"id\": \"3d603be7a95f42aa96ba04a2e37c267e\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"a38c71e0191a4f83ab0e4453dbe5711d\",\n          \"target\": \"76b6bdc74acd4d4fb664bf459a7768b2\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !vaVars.global_isInChat;\\n})()\\n\"\n          },\n          \"label\": \"VA\"\n        },\n        {\n          \"id\": \"88361a7b195b41c98344947955d79c23\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"76b6bdc74acd4d4fb664bf459a7768b2\",\n          \"target\": \"9a67e889fe494f3982b0de1588338cec\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"ea3735907d0449068b082026e676e492\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9a67e889fe494f3982b0de1588338cec\",\n          \"target\": \"63c977abd8364e0d9943ae5d4e581a5e\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.prompt_in_va=1\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"Yes\"\n        },\n        {\n          \"id\": \"3ee750b602244966ae53fac3f03cd677\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"63c977abd8364e0d9943ae5d4e581a5e\",\n          \"target\": \"9acf9eee27074cee9f245953a65d5595\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"928cd667f92d40a5ba14c6bf3bbf7106\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"9a67e889fe494f3982b0de1588338cec\",\n          \"target\": \"4ac00fbe56694d3d892b14c10da2f560\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"value\": \"vaInputs.prompt_in_va=0\",\n            \"mode\": \"query\"\n          },\n          \"label\": \"No\"\n        },\n        {\n          \"id\": \"e0066dd134a84cabae667fc967836bf6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"4ac00fbe56694d3d892b14c10da2f560\",\n          \"target\": \"f2e0641e03624315b9f8dc8ea3ebebac\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"8c019431cba049bcad498a5cef23c5c9\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f2e0641e03624315b9f8dc8ea3ebebac\",\n          \"target\": \"9acf9eee27074cee9f245953a65d5595\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"current-user\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"current-user\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"2fbbb7be0db44abeb80b54bc8acb33a4\": {\n      \"id\": \"2fbbb7be0db44abeb80b54bc8acb33a4\",\n      \"name\": \"prompt_in_la\",\n      \"label\": \"Prompt In LA\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"End chat\",\n          \"value\": \"1\"\n        },\n        {\n          \"label\": \"Cancel\",\n          \"value\": \"0\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\"\n    },\n    \"5c93b52379d248208e110112068bbf50\": {\n      \"id\": \"5c93b52379d248208e110112068bbf50\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"isInChat\",\n      \"label\": \"isInChat\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"221ac9fe99534eda8a18677d0cde407b\": {\n      \"id\": \"221ac9fe99534eda8a18677d0cde407b\",\n      \"name\": \"prompt_in_va\",\n      \"label\": \"Prompt In VA\",\n      \"varType\": \"choice\",\n      \"choices\": [\n        {\n          \"label\": \"End conversation\",\n          \"value\": \"1\"\n        },\n        {\n          \"label\": \"Cancel\",\n          \"value\": \"0\",\n          \"checked\": true\n        }\n      ],\n      \"category\": \"vaInputs\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"f4d45124537310100e99ddeeff7b12d2","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/9cc37b3704b52210559073c06a02f781","value":"9cc37b3704b52210559073c06a02f781"},"sys_update_name":"sys_cb_design_topic_f4d45124537310100e99ddeeff7b12d2","sys_updated_by":"admin","sys_created_on":"2020-10-08 12:32:38","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"cbcaa8b9eded4a6db9d0a15ab0e20fc1\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"cbcaa8b9eded4a6db9d0a15ab0e20fc1\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"cbcaa8b9eded4a6db9d0a15ab0e20fc1\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.global_keyword_topic_finished = false;\\n    return '';\\n})()\\n\"},\"id\":\"35c3a8c9afc8478daff6bcb1429efd66\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    vaVars.global_keyword_topic_finished = true;\\n    return '';\\n})()\\n\"},\"id\":\"9acf9eee27074cee9f245953a65d5595\",\"name\":\"End\"},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"31d0f55c3e8748a797c27a893cd90613\",\"name\":\"Prompt in LA\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"variable_id\":\"2fbbb7be0db44abeb80b54bc8acb33a4\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Please make a selection.\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"End conversation?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"prompt_in_la=1\"},\"id\":\"8d67d0ab8dbf4f08bcce7f789827d4b1\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"prompt_in_la=0\"},\"id\":\"fdebb7748a264395a2c8d7479ac66d6c\",\"name\":\"No\"}],\"id\":\"41376bb7c1894496a83d64ca278419bb\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.endConversation();\\n})()\\n\",\"id\":\"9f566534175b4f748dedfc77677a1d2e\",\"name\":\"End chat\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_isInChat;\\n})()\\n\"}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\\n\\n\"}],\"id\":\"64727848000b430d8470cf72d1bca5b3\",\"name\":\"Resume conversation message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_isInChat;\\n})()\\n\"},\"secure\":false},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaSystem.getClosingMessage();\\n})()\\n\"}],\"id\":\"88816418bef245c3a82100d0156c55d4\",\"name\":\"Closing message if not in chat\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_isInChat;\\n})()\\n\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var conversationId = vaSystem.getConversationId();\\n    vaVars.global_isInChat = vaSystem.isInChat(conversationId);\\n})()\\n\",\"id\":\"7cbaa78fda0a40fe845678ef367a7be3\",\"name\":\"Set flag for LA mode\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Is in LA chat?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"LA\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaVars.global_isInChat;\\n})()\\n\"},\"id\":\"e74cf090ee5a4fb3a611f6f0e4081cf9\",\"name\":\"LA\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"VA\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_isInChat;\\n})()\\n\"},\"id\":\"0530b4b9186c4e209f7e72c94d9d6f54\",\"name\":\"VA\"}],\"id\":\"a38c71e0191a4f83ab0e4453dbe5711d\",\"goal_id\":\"primary\"},{\"type\":\"ChoiceInputPrompt\",\"type\":\"ChoiceInputPrompt\",\"expression_mode\":\"simple\",\"metadataScript\":\"\",\"cardName\":\"\",\"cardFields\":[],\"id\":\"76b6bdc74acd4d4fb664bf459a7768b2\",\"name\":\"Prompt in VA\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !vaVars.global_keyword_topic_finished;\\n})()\\n\"},\"variable_id\":\"221ac9fe99534eda8a18677d0cde407b\",\"message\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"gs.getMessageLang(\\\"Please make a selection.\\\", vaContext.getRequesterLang())\"},\"skippable\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"nlu_entity_binding\":{\"type\":\"NLUEntityBinding\",\"allow_text_input\":false,\"use_confirmation_prompt\":true}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"End conversation?\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Yes\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"prompt_in_va=1\"},\"id\":\"0731b72c4b2f48cb9bb40011e3714037\",\"name\":\"Yes\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"No\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"query\",\"value\":\"prompt_in_va=0\"},\"id\":\"c8def05739914023983620b7488312a0\",\"name\":\"No\"}],\"id\":\"9a67e889fe494f3982b0de1588338cec\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaSystem.endConversation();\\n})()\\n\",\"id\":\"63c977abd8364e0d9943ae5d4e581a5e\",\"name\":\"End conversation\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TextOutputPrompt\",\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(gs.getProperty('com.glide.cs.resume_conversation.message'), vaContext.getRequesterLang());\\n})()\"}],\"id\":\"4ac00fbe56694d3d892b14c10da2f560\",\"name\":\"Resume conversation message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var cafContextualUtility = new CAFContextualUtility();\\n    cafContextualUtility.postProcess();   \\n})()\",\"id\":\"f2e0641e03624315b9f8dc8ea3ebebac\",\"name\":\"Post-process\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"9f566534175b4f748dedfc77677a1d2e\",\"target_node_id\":\"88816418bef245c3a82100d0156c55d4\",\"id\":\"950c859ab9ef480dbefd3d89ffbb1342\"},{\"type\":\"Edge\",\"source_node_id\":\"41376bb7c1894496a83d64ca278419bb\",\"target_node_id\":\"9f566534175b4f748dedfc77677a1d2e\",\"branch_id\":\"8d67d0ab8dbf4f08bcce7f789827d4b1\",\"id\":\"843da9475d974aad85be2371da7ebfea\",\"name\":\"8d67d0ab8dbf4f08bcce7f789827d4b1\"},{\"type\":\"Edge\",\"source_node_id\":\"31d0f55c3e8748a797c27a893cd90613\",\"target_node_id\":\"41376bb7c1894496a83d64ca278419bb\",\"id\":\"176f0eea01634cec9d595387353a2937\"},{\"type\":\"Edge\",\"source_node_id\":\"41376bb7c1894496a83d64ca278419bb\",\"target_node_id\":\"64727848000b430d8470cf72d1bca5b3\",\"branch_id\":\"fdebb7748a264395a2c8d7479ac66d6c\",\"id\":\"9f8e4042ec634b1c9232120857fe0753\",\"name\":\"fdebb7748a264395a2c8d7479ac66d6c\"},{\"type\":\"Edge\",\"source_node_id\":\"64727848000b430d8470cf72d1bca5b3\",\"target_node_id\":\"88816418bef245c3a82100d0156c55d4\",\"id\":\"c80795d48c40436d8cccd03600266e02\"},{\"type\":\"Edge\",\"source_node_id\":\"88816418bef245c3a82100d0156c55d4\",\"target_node_id\":\"9acf9eee27074cee9f245953a65d5595\",\"id\":\"cd57f0309cce46c5b5f90a5fcc9e3b44\"},{\"type\":\"Edge\",\"source_node_id\":\"35c3a8c9afc8478daff6bcb1429efd66\",\"target_node_id\":\"7cbaa78fda0a40fe845678ef367a7be3\",\"id\":\"468a01ed57104f4c9da52dd2ebf2b396\"},{\"type\":\"Edge\",\"source_node_id\":\"7cbaa78fda0a40fe845678ef367a7be3\",\"target_node_id\":\"a38c71e0191a4f83ab0e4453dbe5711d\",\"id\":\"4eb00b9aa9a2466dbc30c01ec1fa04c8\"},{\"type\":\"Edge\",\"source_node_id\":\"a38c71e0191a4f83ab0e4453dbe5711d\",\"target_node_id\":\"31d0f55c3e8748a797c27a893cd90613\",\"branch_id\":\"e74cf090ee5a4fb3a611f6f0e4081cf9\",\"id\":\"58608625f4b34d80a910a7e636670ed2\",\"name\":\"e74cf090ee5a4fb3a611f6f0e4081cf9\"},{\"type\":\"Edge\",\"source_node_id\":\"a38c71e0191a4f83ab0e4453dbe5711d\",\"target_node_id\":\"76b6bdc74acd4d4fb664bf459a7768b2\",\"branch_id\":\"0530b4b9186c4e209f7e72c94d9d6f54\",\"id\":\"3d603be7a95f42aa96ba04a2e37c267e\",\"name\":\"0530b4b9186c4e209f7e72c94d9d6f54\"},{\"type\":\"Edge\",\"source_node_id\":\"76b6bdc74acd4d4fb664bf459a7768b2\",\"target_node_id\":\"9a67e889fe494f3982b0de1588338cec\",\"id\":\"88361a7b195b41c98344947955d79c23\"},{\"type\":\"Edge\",\"source_node_id\":\"9a67e889fe494f3982b0de1588338cec\",\"target_node_id\":\"63c977abd8364e0d9943ae5d4e581a5e\",\"branch_id\":\"0731b72c4b2f48cb9bb40011e3714037\",\"id\":\"ea3735907d0449068b082026e676e492\",\"name\":\"0731b72c4b2f48cb9bb40011e3714037\"},{\"type\":\"Edge\",\"source_node_id\":\"63c977abd8364e0d9943ae5d4e581a5e\",\"target_node_id\":\"9acf9eee27074cee9f245953a65d5595\",\"id\":\"3ee750b602244966ae53fac3f03cd677\"},{\"type\":\"Edge\",\"source_node_id\":\"9a67e889fe494f3982b0de1588338cec\",\"target_node_id\":\"4ac00fbe56694d3d892b14c10da2f560\",\"branch_id\":\"c8def05739914023983620b7488312a0\",\"id\":\"928cd667f92d40a5ba14c6bf3bbf7106\",\"name\":\"c8def05739914023983620b7488312a0\"},{\"type\":\"Edge\",\"source_node_id\":\"4ac00fbe56694d3d892b14c10da2f560\",\"target_node_id\":\"f2e0641e03624315b9f8dc8ea3ebebac\",\"id\":\"e0066dd134a84cabae667fc967836bf6\"},{\"type\":\"Edge\",\"source_node_id\":\"f2e0641e03624315b9f8dc8ea3ebebac\",\"target_node_id\":\"9acf9eee27074cee9f245953a65d5595\",\"id\":\"8c019431cba049bcad498a5cef23c5c9\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"isInChat\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"5c93b52379d248208e110112068bbf50\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"End chat\",\"element\":\"1\"},{\"name\":\"Cancel\",\"element\":\"0\"}],\"id\":\"2fbbb7be0db44abeb80b54bc8acb33a4\",\"name\":\"prompt_in_la\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"Choice\",\"type\":\"Choice\",\"choices\":[{\"name\":\"End conversation\",\"element\":\"1\"},{\"name\":\"Cancel\",\"element\":\"0\"}],\"id\":\"221ac9fe99534eda8a18677d0cde407b\",\"name\":\"prompt_in_va\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n      return false;\\n      })()\\n    \"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"b7725371533210105498ddeeff7b125b\",\"name\":\"_bye_\",\"key_phrases\":[\"_bye_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":false,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_bye_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"b7725371533210105498ddeeff7b125b","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/4dd3d371533210105498ddeeff7b124d","value":"4dd3d371533210105498ddeeff7b124d"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"58","sys_updated_on":"2022-01-18 19:31:31","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"f58d385853130010cf8cddeeff7b1200","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_f58d385853130010cf8cddeeff7b1200","sys_updated_by":"admin","sys_created_on":"2020-02-26 23:29:49","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"06e88b383ad7478c8dcd0a64054ae4ad\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"06e88b383ad7478c8dcd0a64054ae4ad\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"06e88b383ad7478c8dcd0a64054ae4ad\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"fc647203b9874c609457026d9fb4faf4\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"e1afb17d101b4bcfa4cfc6268d3c0d0d\",\"name\":\"End\"},{\"type\":\"LibraryCall\",\"library_topic_name\":\"Survey\",\"library_topic_id\":\"26baac293b77330074bc456993efc4dd\",\"parameter-mappings\":[{\"parameter-name\":\"surveyid\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"a259f6969f3220100d74d46d842e702a\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"confirmationneeded\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}},{\"parameter-name\":\"savequestionstocontext\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"false\"},\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false}}],\"return-value-mappings\":[],\"id\":\"c649fa75cf3b485cb682534e231b2ee9\",\"name\":\"Survey topic block\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"fc647203b9874c609457026d9fb4faf4\",\"target_node_id\":\"c649fa75cf3b485cb682534e231b2ee9\",\"id\":\"0271f86bda1a414ebca2ff11890346e1\"},{\"type\":\"Edge\",\"source_node_id\":\"c649fa75cf3b485cb682534e231b2ee9\",\"target_node_id\":\"e1afb17d101b4bcfa4cfc6268d3c0d0d\",\"id\":\"1f9e2fd2e58744e09c7f37ff4c634d07\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"_topic_postchat_user_id\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"e1c9338b837b400c9ca6b0ef36c25354\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"3dc0eb4e6fbe46ff8f306448e4f24de0\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"SETUP_TOPIC\",\"channels\":[],\"id\":\"c98db45853130010cf8cddeeff7b12e1\",\"name\":\"Virtual Agent Feedback.\",\"key_phrases\":[\"Survey\",\" Provide Virtual Agent Feedback\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Virtual Agent Feedback.","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"c98db45853130010cf8cddeeff7b12e1","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/b18df45853130010cf8cddeeff7b12fd","value":"b18df45853130010cf8cddeeff7b12fd"},"sys_created_by":"admin","sys_policy":"read"},{"sys_mod_count":"22","sys_updated_on":"2020-10-08 12:32:56","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"f67dc2f5532333002f40ddeeff7b123a","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/aca3b33704b52210559073c06a02f7d3","value":"aca3b33704b52210559073c06a02f7d3"},"sys_update_name":"sys_cb_design_topic_f67dc2f5532333002f40ddeeff7b123a","sys_updated_by":"admin","sys_created_on":"2019-08-29 11:14:34","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"38b5d28180824ade84fb28d666087793\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"38b5d28180824ade84fb28d666087793\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"38b5d28180824ade84fb28d666087793\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"a0cecc5bfbe648f7922168f1c41b276b\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"8238beb84cdd438aa625b60ec3aa0a57\",\"name\":\"End\"},{\"type\":\"LibraryCall\",\"library_topic_name\":\"_notification_controller_topic_block_\",\"library_topic_id\":\"bb9714a9530210106e61ddeeff7b1201\",\"parameter-mappings\":[{\"parameter-name\":\"notification_content\",\"value\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\\n       }\\n    */\\n    return vaVars.global_notification_content;\\n})()\\n\"}}],\"return-value-mappings\":[],\"id\":\"f04f488570c64135997a87cfea559e6f\",\"name\":\"_notification_controller_topic_block_\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.global_client_mode = \\\"NORMAL\\\";\\n})()\\n\",\"id\":\"fc450ccc12194598990a618500ec5a1f\",\"name\":\"Set Client Mode\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"a0cecc5bfbe648f7922168f1c41b276b\",\"target_node_id\":\"f04f488570c64135997a87cfea559e6f\",\"id\":\"981cfd6c1e414f4b89ec7aeb337ba00f\"},{\"type\":\"Edge\",\"source_node_id\":\"f04f488570c64135997a87cfea559e6f\",\"target_node_id\":\"fc450ccc12194598990a618500ec5a1f\",\"id\":\"07cee918cf59401296e830379168cd8f\"},{\"type\":\"Edge\",\"source_node_id\":\"fc450ccc12194598990a618500ec5a1f\",\"target_node_id\":\"8238beb84cdd438aa625b60ec3aa0a57\",\"id\":\"05ae94ba1e0d4d7f8ee51adbdbd657b0\"}],\"id\":\"primary\"}],\"script_variables\":[],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return false;\\n})()\\n\"},\"roles\":[\"public\"],\"scope\":\"global\",\"domain\":\"global\",\"topic_type\":\"STANDARD\",\"channels\":[],\"id\":\"b8acce75532333002f40ddeeff7b1213\",\"name\":\"_notification_controller_\",\"key_phrases\":[\"_notification_controller_\"],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"auto_resolution_enabled\":false,\"library\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"_notification_controller_","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"b8acce75532333002f40ddeeff7b1213","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/b67dc2f5532333002f40ddeeff7b1237","value":"b67dc2f5532333002f40ddeeff7b1237"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"17","sys_updated_on":"2022-06-14 07:27:47","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.41\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"f7b1faf3c9234206bc440a77b65bff04\": {\n          \"id\": \"f7b1faf3c9234206bc440a77b65bff04\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"parameters\": [\n            {\n              \"name\": \"Search Term\",\n              \"value\": \"\",\n              \"checked\": true,\n              \"id\": \"f8bf797c07f64e949d14d50321704e0c\",\n              \"disabled\": true,\n              \"referenced\": true,\n              \"type\": \"String\",\n              \"required\": true\n            },\n            {\n              \"type\": \"Reference\",\n              \"value\": \"\",\n              \"id\": \"41ea99fb9d1e4abcb2f83964ab24e066\",\n              \"name\": \"Search Application Configuration\",\n              \"table\": \"sys_search_context_config\",\n              \"hint\": \"(Optional) Use a custom Search Application Configuration\",\n              \"query\": \"\",\n              \"referenced\": true,\n              \"disabled\": true\n            }\n          ],\n          \"variableIds\": [\n            \"f8bf797c07f64e949d14d50321704e0c\",\n            \"41ea99fb9d1e4abcb2f83964ab24e066\"\n          ]\n        },\n        \"9c1e4a5124fa4361ae213788e8495117\": {\n          \"id\": \"9c1e4a5124fa4361ae213788e8495117\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"geniusSearchResults\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.geniusSearchResults}}\",\n                        \"displayValue\": \"vaVarsgeniusSearchResults\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": false\n            },\n            {\n              \"key\": \"searchResults\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.searchResults}}\",\n                        \"displayValue\": \"vaVarssearchResults\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true,\n              \"cannotBeDeleted\": false\n            },\n            {\n              \"key\": \"shouldAskInfoHelpful\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.shouldAskInfoHelpful}}\",\n                        \"displayValue\": \"Script VariablesshouldAskInfoHelpful\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true\n            }\n          ]\n        },\n        \"40298c4bf66a49a9bd6a8e0daba757e0\": {\n          \"id\": \"40298c4bf66a49a9bd6a8e0daba757e0\",\n          \"name\": \"Process Search Results\",\n          \"script\": \"(function execute() {\\n    var result = global.VAAISearchHelper.processResults(vaInputs.search_results.toString(), vaSystem, vaInputs, vaVars);\\n    var out = JSON.parse(vaInputs.search_results);\\n    gs.error('AI results count ----> '+ JSON.stringify(out.result[0].executionResult.searchResultsTemplates.items.length));\\n    vaVars.searchMetadata = result.searchMetadata;\\n    vaVars.geniusSearchResults = result.geniusSearchResults;\\n    vaVars.searchResults = JSON.stringify(out.result[0].executionResult.searchResultsTemplates.items);\\n    vaVars.shouldAskInfoHelpful = result.shouldAskInfoHelpful;\\n})()\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"f236fd40c0724a6aa3b8d2fb9e08cfa8\": {\n          \"id\": \"f236fd40c0724a6aa3b8d2fb9e08cfa8\",\n          \"stepType\": \"Decision\",\n          \"name\": \"Decision\"\n        },\n        \"26edd2989dfb4f2d9098d4a502f3445d\": {\n          \"id\": \"26edd2989dfb4f2d9098d4a502f3445d\",\n          \"name\": \"Reset Values\",\n          \"script\": \"(function execute() {\\n    vaVars.geniusSearchResults = null;\\n    vaVars.searchResults = null;\\n    vaVars.shouldAskInfoHelpful = false;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"ce4e542151e84c0db595f6718b4c8b9d\": {\n          \"id\": \"ce4e542151e84c0db595f6718b4c8b9d\",\n          \"name\": \"Reset Ask For Help\",\n          \"script\": \"(function execute() {\\n    vaVars.shouldAskInfoHelpful = false;\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"34f4e384de1d46a2bb9b99a1437a4444\": {\n          \"id\": \"34f4e384de1d46a2bb9b99a1437a4444\",\n          \"name\": \"Filter Results for User\",\n          \"script\": \"(function execute() {\\n    vaInputs.search_results = global.VAAISearchHelper.filterResultsForLoggedInUser(\\n        vaInputs.search_results.toString(), vaSystem);\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"d52755e087dd4cbab96545418fecd688\": {\n          \"id\": \"d52755e087dd4cbab96545418fecd688\",\n          \"name\": \"Get Session Info\",\n          \"script\": \"(function execute() {\\n    vaVars.session_id = gs.getSessionID();\\n    vaVars.user_id = vaInputs.user.getValue();\\n    vaVars.is_logged_in = gs.getSession().isLoggedIn();\\n    vaVars.language = gs.getSession().getLanguage();\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"1ffdfec8578745bb9c2bb5daa0af4854\": {\n          \"id\": \"1ffdfec8578745bb9c2bb5daa0af4854\",\n          \"name\": \"AI Search\",\n          \"invocationType\": \"action\",\n          \"stepType\": \"FlowAction\",\n          \"actionSpoke\": \"global\",\n          \"actionSpokeAction\": \"2eaf23715b621010a76b04d13d81c7b5\",\n          \"actionWaitType\": \"sync\",\n          \"actionRunAs\": \"session_user\",\n          \"actionSecureField\": false,\n          \"actionSelectSecureField\": \"\",\n          \"actionPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionConfirmPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionNonSecureChannelMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"actionInputs\": {\n            \"input-search_term\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.search_term}}\",\n                        \"displayValue\": \"Input VariablesSearch Term\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\"\n            },\n            \"input-context_profile_id\": {\n              \"value\": \"(function execute() {\\n    return vaSystem.getContextProfileId();\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-search_context_id\": {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaInputs.search_application_configuration}}\",\n                        \"displayValue\": \"Input VariablesSearch Application Configuration\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"string\"\n            },\n            \"input-logging_context\": {\n              \"value\": \"(function execute() {\\n    return JSON.stringify(global.VAAISearchHelper.getLoggingContext(vaSystem));\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-locale\": {\n              \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    return vaSystem.getRequesterLocale();\\n})()\\n\",\n              \"mode\": \"script\"\n            },\n            \"input-start_time\": {\n              \"value\": \"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    return new GlideDateTime().getNumericValue();\\n})()\\n\",\n              \"mode\": \"script\"\n            }\n          },\n          \"actionOutputs\": {\n            \"output-search_result\": [\n              {\n                \"id\": \"ddc192713244460f96a8c403cceee804\",\n                \"mapping\": \"search_results\",\n                \"value\": \"Search Result\",\n                \"disabled\": false,\n                \"type\": \"json\",\n                \"variable\": \"Search_results\"\n              }\n            ],\n            \"output-__action_status__\": [\n              {\n                \"id\": \"addf18208481458da907fbb21ad184cb\",\n                \"mapping\": \"Action Status\",\n                \"value\": \"Action Status\",\n                \"disabled\": false,\n                \"type\": \"object\",\n                \"variable\": \"Action Status\"\n              }\n            ],\n            \"output-__dont_treat_as_error__\": [\n              {\n                \"id\": \"65406b028d82464a8f837e48d1ed708e\",\n                \"mapping\": \"Don't Treat as Error\",\n                \"value\": \"Don't Treat as Error\",\n                \"disabled\": false,\n                \"type\": \"boolean\",\n                \"variable\": \"Don't Treat As Error\"\n              }\n            ],\n            \"output-end_time\": [\n              {\n                \"id\": \"29b4381490fa47b6ae04679b74784709\",\n                \"mapping\": \"End time\",\n                \"value\": [],\n                \"disabled\": false,\n                \"type\": \"string\",\n                \"is_list_data_entry\": false,\n                \"variable\": \"End Time\"\n              }\n            ]\n          },\n          \"actionDefinition\": {\n            \"id\": \"2eaf23715b621010a76b04d13d81c7b5\",\n            \"latest_snapshot_id\": \"2eaf23715b621010a76b04d13d81c7b5\",\n            \"type\": \"action\",\n            \"name\": \"atlas_search\",\n            \"label\": \"AI Search\",\n            \"scope_id\": \"global\",\n            \"description\": \"Perform asynchronous AI Search\",\n            \"category\": \"\",\n            \"parameters_have_loaded\": true,\n            \"input_parameters\": [\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_term\",\n                \"label\": \"search_term\",\n                \"type\": \"string\",\n                \"order\": 1,\n                \"required\": true,\n                \"value\": [],\n                \"is_list_data_entry\": false\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"context_profile_id\",\n                \"label\": \"context_profile_id\",\n                \"type\": \"string\",\n                \"order\": 2,\n                \"required\": true,\n                \"value\": [],\n                \"is_list_data_entry\": false\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"search_context_id\",\n                \"label\": \"search_context_id\",\n                \"type\": \"string\",\n                \"order\": 3,\n                \"required\": false,\n                \"value\": [],\n                \"is_list_data_entry\": false\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"logging_context\",\n                \"label\": \"logging_context\",\n                \"type\": \"string\",\n                \"order\": 4,\n                \"required\": false,\n                \"value\": [],\n                \"is_list_data_entry\": false\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"locale\",\n                \"label\": \"locale\",\n                \"type\": \"string\",\n                \"order\": 5,\n                \"required\": false,\n                \"value\": [],\n                \"is_list_data_entry\": false\n              },\n              {\n                \"supported_input_modes\": [\n                  \"script\",\n                  \"data_pill\",\n                  \"data_entry\"\n                ],\n                \"name\": \"start_time\",\n                \"label\": \"start_time\",\n                \"type\": \"string\",\n                \"order\": 6,\n                \"required\": true,\n                \"value\": [],\n                \"is_list_data_entry\": false\n              }\n            ],\n            \"output_parameters\": [\n              {\n                \"name\": \"search_result\",\n                \"label\": \"Search Result\",\n                \"type\": \"json\",\n                \"order\": 1,\n                \"required\": true,\n                \"value\": [],\n                \"is_list_data_entry\": false\n              },\n              {\n                \"name\": \"__action_status__\",\n                \"label\": \"Action Status\",\n                \"type\": \"object\",\n                \"order\": 2,\n                \"required\": false,\n                \"value\": [],\n                \"is_list_data_entry\": false\n              },\n              {\n                \"name\": \"__dont_treat_as_error__\",\n                \"label\": \"Don't Treat as Error\",\n                \"type\": \"boolean\",\n                \"order\": 3,\n                \"required\": false,\n                \"value\": [],\n                \"is_list_data_entry\": false\n              },\n              {\n                \"name\": \"end_time\",\n                \"label\": \"End time\",\n                \"type\": \"string\",\n                \"order\": 4,\n                \"required\": true,\n                \"value\": [],\n                \"is_list_data_entry\": false\n              }\n            ]\n          },\n          \"subflowSecureField\": false,\n          \"subflowSelectSecureField\": \"\",\n          \"subflowPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowConfirmPromptSecureField\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"subflowNonSecureChannelMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"This action is not supported on this channel.\"\n          },\n          \"variableIds\": [\n            \"ddc192713244460f96a8c403cceee804\",\n            \"addf18208481458da907fbb21ad184cb\",\n            \"65406b028d82464a8f837e48d1ed708e\",\n            \"29b4381490fa47b6ae04679b74784709\"\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"permissionsNote\": \"By default, the Action executes based on the permissions of the user who initiated the conversation. For elevated privileges, you can set to System User.\"\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"6367d15d588c438e934dd8cccc322122\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"1ffdfec8578745bb9c2bb5daa0af4854\",\n          \"target\": \"34f4e384de1d46a2bb9b99a1437a4444\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"77f743668b604b44998f94dfa0e09ba8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"40298c4bf66a49a9bd6a8e0daba757e0\",\n          \"target\": \"ce4e542151e84c0db595f6718b4c8b9d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"b6d0c4196d0241f088124f66571c38b1\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f236fd40c0724a6aa3b8d2fb9e08cfa8\",\n          \"target\": \"40298c4bf66a49a9bd6a8e0daba757e0\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return global.VAAISearchHelper.isSearchSuccessful(vaInputs.search_results.toString());\\n})()\\n\"\n          },\n          \"label\": \"Success\"\n        },\n        {\n          \"id\": \"cb15e7bb80fa47daaa393e4e3b3cf51c\",\n          \"edgeType\": \"Branch\",\n          \"source\": \"f236fd40c0724a6aa3b8d2fb9e08cfa8\",\n          \"target\": \"26edd2989dfb4f2d9098d4a502f3445d\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\",\n          \"expression\": {\n            \"mode\": \"script\",\n            \"value\": \"(function execute() {\\n    return !global.VAAISearchHelper.isSearchSuccessful(vaInputs.search_results.toString());\\n})()\\n\"\n          },\n          \"label\": \"Failure\"\n        },\n        {\n          \"id\": \"e76da427c4de416d9558363d629ac4e4\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"26edd2989dfb4f2d9098d4a502f3445d\",\n          \"target\": \"9c1e4a5124fa4361ae213788e8495117\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c2963652393147e0b849ac53085623df\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"ce4e542151e84c0db595f6718b4c8b9d\",\n          \"target\": \"9c1e4a5124fa4361ae213788e8495117\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"c5cd51cd97ab4c4bae5f2533d0f94f1f\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"34f4e384de1d46a2bb9b99a1437a4444\",\n          \"target\": \"f236fd40c0724a6aa3b8d2fb9e08cfa8\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"51176f91d263411da57d8110856a03c8\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"f7b1faf3c9234206bc440a77b65bff04\",\n          \"target\": \"d52755e087dd4cbab96545418fecd688\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"941628e2d7ac46d9b2aeaa843795abbc\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"d52755e087dd4cbab96545418fecd688\",\n          \"target\": \"1ffdfec8578745bb9c2bb5daa0af4854\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"6c0387e9a1e243e0a3b69798a353af1e\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"6c0387e9a1e243e0a3b69798a353af1e\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"f8bf797c07f64e949d14d50321704e0c\": {\n      \"id\": \"f8bf797c07f64e949d14d50321704e0c\",\n      \"name\": \"search_term\",\n      \"label\": \"Search Term\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      }\n    },\n    \"077379a6c629402d90800491410a62a2\": {\n      \"id\": \"077379a6c629402d90800491410a62a2\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"geniusSearchResults\",\n      \"label\": \"geniusSearchResults\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"0e6f879c7f024eebbd94175aa370044a\": {\n      \"id\": \"0e6f879c7f024eebbd94175aa370044a\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"searchResults\",\n      \"label\": \"searchResults\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"744dbeb5c84f4102b278240b750bec86\": {\n      \"id\": \"744dbeb5c84f4102b278240b750bec86\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"shouldAskInfoHelpful\",\n      \"label\": \"shouldAskInfoHelpful\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"41ea99fb9d1e4abcb2f83964ab24e066\": {\n      \"id\": \"41ea99fb9d1e4abcb2f83964ab24e066\",\n      \"name\": \"search_application_configuration\",\n      \"label\": \"Search Application Configuration\",\n      \"defaultValue\": \"\",\n      \"varType\": \"reference\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"table\": \"sys_search_context_config\"\n    },\n    \"ddc192713244460f96a8c403cceee804\": {\n      \"id\": \"ddc192713244460f96a8c403cceee804\",\n      \"name\": \"search_results\",\n      \"label\": \"Search_results\",\n      \"defaultValue\": \"Search Result\",\n      \"varType\": \"json\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Search_results\"\n    },\n    \"addf18208481458da907fbb21ad184cb\": {\n      \"id\": \"addf18208481458da907fbb21ad184cb\",\n      \"name\": \"action_status\",\n      \"label\": \"Action Status\",\n      \"defaultValue\": \"Action Status\",\n      \"varType\": \"object\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Action Status\"\n    },\n    \"65406b028d82464a8f837e48d1ed708e\": {\n      \"id\": \"65406b028d82464a8f837e48d1ed708e\",\n      \"name\": \"don_t_treat_as_error\",\n      \"label\": \"Don't Treat As Error\",\n      \"defaultValue\": \"Don't Treat as Error\",\n      \"varType\": \"boolean\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"variable\": \"Don't Treat As Error\"\n    },\n    \"29b4381490fa47b6ae04679b74784709\": {\n      \"id\": \"29b4381490fa47b6ae04679b74784709\",\n      \"name\": \"end_time\",\n      \"label\": \"End Time\",\n      \"defaultValue\": [],\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"output\"\n      },\n      \"is_list_data_entry\": false,\n      \"variable\": \"End Time\"\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"f6dc619487e10910b6edcbfc0ebb3590","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/434a64fd531db410f738ddeeff7b12c7","value":"434a64fd531db410f738ddeeff7b12c7"},"sys_update_name":"sys_cb_design_topic_f6dc619487e10910b6edcbfc0ebb3590","sys_updated_by":"admin","sys_created_on":"2022-02-04 11:51:20","design_definition":"{\"type\":\"FlowTopic\",\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"321f7900ced74484b3bcfdb1c7c2f0cc\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"321f7900ced74484b3bcfdb1c7c2f0cc\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"321f7900ced74484b3bcfdb1c7c2f0cc\",\"nodes\":[{\"type\":\"StartGoal\",\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"f7b1faf3c9234206bc440a77b65bff04\",\"name\":\"Start\"},{\"type\":\"TerminateGoal\",\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"9c1e4a5124fa4361ae213788e8495117\",\"name\":\"End\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    var result = global.VAAISearchHelper.processResults(vaInputs.search_results.toString(), vaSystem, vaInputs, vaVars);\\n    var out = JSON.parse(vaInputs.search_results);\\n    gs.error('AI results count ----> '+ JSON.stringify(out.result[0].executionResult.searchResultsTemplates.items.length));\\n    vaVars.searchMetadata = result.searchMetadata;\\n    vaVars.geniusSearchResults = result.geniusSearchResults;\\n    vaVars.searchResults = JSON.stringify(out.result[0].executionResult.searchResultsTemplates.items);\\n    vaVars.shouldAskInfoHelpful = result.shouldAskInfoHelpful;\\n})()\",\"id\":\"40298c4bf66a49a9bd6a8e0daba757e0\",\"name\":\"Process Search Results\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"Decision\",\"type\":\"Decision\",\"name\":\"Decision\",\"branches\":[{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Success\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return global.VAAISearchHelper.isSearchSuccessful(vaInputs.search_results.toString());\\n})()\\n\"},\"id\":\"1c0ecfc97ef94330aacb6b822834d11c\",\"name\":\"Success\"},{\"type\":\"Branch\",\"type\":\"Branch\",\"label\":\"Failure\",\"expression\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return !global.VAAISearchHelper.isSearchSuccessful(vaInputs.search_results.toString());\\n})()\\n\"},\"id\":\"e4041c2d51bc40fda6507596f8b5ba3a\",\"name\":\"Failure\"}],\"id\":\"f236fd40c0724a6aa3b8d2fb9e08cfa8\",\"goal_id\":\"primary\"},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.geniusSearchResults = null;\\n    vaVars.searchResults = null;\\n    vaVars.shouldAskInfoHelpful = false;\\n})()\\n\",\"id\":\"26edd2989dfb4f2d9098d4a502f3445d\",\"name\":\"Reset Values\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.shouldAskInfoHelpful = false;\\n})()\\n\",\"id\":\"ce4e542151e84c0db595f6718b4c8b9d\",\"name\":\"Reset Ask For Help\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaInputs.search_results = global.VAAISearchHelper.filterResultsForLoggedInUser(\\n        vaInputs.search_results.toString(), vaSystem);\\n})()\\n\",\"id\":\"34f4e384de1d46a2bb9b99a1437a4444\",\"name\":\"Filter Results for User\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"ScriptedAction\",\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    vaVars.session_id = gs.getSessionID();\\n    vaVars.user_id = vaInputs.user.getValue();\\n    vaVars.is_logged_in = gs.getSession().isLoggedIn();\\n    vaVars.language = gs.getSession().getLanguage();\\n})()\\n\",\"id\":\"d52755e087dd4cbab96545418fecd688\",\"name\":\"Get Session Info\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"FDIHInvocation\",\"type\":\"FDIHInvocation\",\"name\":\"AI Search\",\"kind\":\"action\",\"mode\":\"sync\",\"inputs\":[{\"supported_input_modes\":[],\"name\":\"search_term\",\"type\":\"string\",\"order\":0,\"required\":true,\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.search_term}}\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"context_profile_id\",\"type\":\"script\",\"order\":0,\"required\":true,\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return vaSystem.getContextProfileId();\\n})()\\n\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"search_context_id\",\"type\":\"string\",\"order\":0,\"required\":false,\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaInputs.search_application_configuration}}\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"logging_context\",\"type\":\"script\",\"order\":0,\"required\":false,\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return JSON.stringify(global.VAAISearchHelper.getLoggingContext(vaSystem));\\n})()\\n\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"locale\",\"type\":\"script\",\"order\":0,\"required\":false,\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    return vaSystem.getRequesterLocale();\\n})()\\n\"}],\"is_list_data_entry\":false},{\"supported_input_modes\":[],\"name\":\"start_time\",\"type\":\"script\",\"order\":0,\"required\":true,\"value\":[{\"type\":\"String\",\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    /* Return a quoted string.  For example:\\n\\n       if (vaInputs.first_name == 'Bill') {\\n           return gs.getMessageLang(\\\"hi there {0}\\\", vaContext.getRequesterLang(), [vaInputs.first_name]);\\n       } else {\\n           return gs.getMessageLang(\\\"how are you {0}\\\", vaContext.getRequesterLang(), [vaInputs.last_name]);\\n       }\\n    */\\n    return new GlideDateTime().getNumericValue();\\n})()\\n\"}],\"is_list_data_entry\":false}],\"outputs\":[{\"name\":\"search_result\",\"order\":0,\"value\":[],\"is_list_data_entry\":false,\"topicVariableName\":\"search_results\"},{\"name\":\"__action_status__\",\"order\":0,\"value\":[],\"is_list_data_entry\":false,\"topicVariableName\":\"action_status\"},{\"name\":\"__dont_treat_as_error__\",\"order\":0,\"value\":[],\"is_list_data_entry\":false,\"topicVariableName\":\"don_t_treat_as_error\"},{\"name\":\"end_time\",\"order\":0,\"value\":[],\"is_list_data_entry\":false,\"topicVariableName\":\"end_time\"}],\"metadata\":{\"runAs\":\"session_user\"},\"id\":\"1ffdfec8578745bb9c2bb5daa0af4854\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"sys_id\":\"2eaf23715b621010a76b04d13d81c7b5\",\"scope\":\"global\"}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"1ffdfec8578745bb9c2bb5daa0af4854\",\"target_node_id\":\"34f4e384de1d46a2bb9b99a1437a4444\",\"id\":\"6367d15d588c438e934dd8cccc322122\"},{\"type\":\"Edge\",\"source_node_id\":\"40298c4bf66a49a9bd6a8e0daba757e0\",\"target_node_id\":\"ce4e542151e84c0db595f6718b4c8b9d\",\"id\":\"77f743668b604b44998f94dfa0e09ba8\"},{\"type\":\"Edge\",\"source_node_id\":\"f236fd40c0724a6aa3b8d2fb9e08cfa8\",\"target_node_id\":\"40298c4bf66a49a9bd6a8e0daba757e0\",\"branch_id\":\"1c0ecfc97ef94330aacb6b822834d11c\",\"id\":\"b6d0c4196d0241f088124f66571c38b1\",\"name\":\"1c0ecfc97ef94330aacb6b822834d11c\"},{\"type\":\"Edge\",\"source_node_id\":\"f236fd40c0724a6aa3b8d2fb9e08cfa8\",\"target_node_id\":\"26edd2989dfb4f2d9098d4a502f3445d\",\"branch_id\":\"e4041c2d51bc40fda6507596f8b5ba3a\",\"id\":\"cb15e7bb80fa47daaa393e4e3b3cf51c\",\"name\":\"e4041c2d51bc40fda6507596f8b5ba3a\"},{\"type\":\"Edge\",\"source_node_id\":\"26edd2989dfb4f2d9098d4a502f3445d\",\"target_node_id\":\"9c1e4a5124fa4361ae213788e8495117\",\"id\":\"e76da427c4de416d9558363d629ac4e4\"},{\"type\":\"Edge\",\"source_node_id\":\"ce4e542151e84c0db595f6718b4c8b9d\",\"target_node_id\":\"9c1e4a5124fa4361ae213788e8495117\",\"id\":\"c2963652393147e0b849ac53085623df\"},{\"type\":\"Edge\",\"source_node_id\":\"34f4e384de1d46a2bb9b99a1437a4444\",\"target_node_id\":\"f236fd40c0724a6aa3b8d2fb9e08cfa8\",\"id\":\"c5cd51cd97ab4c4bae5f2533d0f94f1f\"},{\"type\":\"Edge\",\"source_node_id\":\"f7b1faf3c9234206bc440a77b65bff04\",\"target_node_id\":\"d52755e087dd4cbab96545418fecd688\",\"id\":\"51176f91d263411da57d8110856a03c8\"},{\"type\":\"Edge\",\"source_node_id\":\"d52755e087dd4cbab96545418fecd688\",\"target_node_id\":\"1ffdfec8578745bb9c2bb5daa0af4854\",\"id\":\"941628e2d7ac46d9b2aeaa843795abbc\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"geniusSearchResults\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"077379a6c629402d90800491410a62a2\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"searchResults\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"0e6f879c7f024eebbd94175aa370044a\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"shouldAskInfoHelpful\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"744dbeb5c84f4102b278240b750bec86\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"6c0387e9a1e243e0a3b69798a353af1e\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"search_term\",\"list\":false,\"id\":\"f8bf797c07f64e949d14d50321704e0c\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"Reference\",\"type\":\"Reference\",\"table\":\"sys_search_context_config\",\"id\":\"41ea99fb9d1e4abcb2f83964ab24e066\",\"name\":\"search_application_configuration\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"search_results\",\"list\":false,\"id\":\"ddc192713244460f96a8c403cceee804\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"action_status\",\"list\":false,\"id\":\"addf18208481458da907fbb21ad184cb\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false},{\"type\":\"True/False\",\"type\":\"True/False\",\"id\":\"65406b028d82464a8f837e48d1ed708e\",\"name\":\"don_t_treat_as_error\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"VariableDto\",\"type\":\"String\",\"name\":\"end_time\",\"list\":false,\"id\":\"29b4381490fa47b6ae04679b74784709\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"output\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"434a64fd531db410f738ddeeff7b12c7\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"search_term\",\"label\":\"Search Term\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"f8bf797c07f64e949d14d50321704e0c\",\"type\":\"String\"},{\"name\":\"search_application_configuration\",\"label\":\"Search Application Configuration\",\"default-value\":\"\\\"\\\"\",\"required\":false,\"metadata\":{\"type\":\"Reference\",\"list\":false,\"items\":[],\"use_items\":false,\"table\":\"sys_search_context_config\",\"query\":\"\"},\"id\":\"41ea99fb9d1e4abcb2f83964ab24e066\",\"type\":\"Reference\",\"hint\":\"(Optional) Use a custom Search Application Configuration\"}],\"return-values-mapping\":[{\"name\":\"geniussearchresults\",\"label\":\"geniusSearchResults\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.geniusSearchResults}}\"}},{\"name\":\"searchresults\",\"label\":\"searchResults\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.searchResults}}\"}},{\"name\":\"shouldaskinfohelpful\",\"label\":\"shouldAskInfoHelpful\",\"value\":{\"type\":\"String\",\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.shouldAskInfoHelpful}}\"}}]},\"domain\":\"global\",\"topic_type\":\"TOPIC_BLOCK\",\"channels\":[],\"id\":\"3c7ce95487e10910b6edcbfc0ebb3565\",\"name\":\"AI search diagnostics\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"library\":true,\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"AI search diagnostics","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/434a64fd531db410f738ddeeff7b12c7","value":"434a64fd531db410f738ddeeff7b12c7"},"design_topic_id":"3c7ce95487e10910b6edcbfc0ebb3565","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/7adc619487e10910b6edcbfc0ebb358c","value":"7adc619487e10910b6edcbfc0ebb358c"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"12","sys_updated_on":"2021-06-02 21:29:25","sys_tags":"","type":"FlowTopic","graph":"","sys_class_name":"sys_cb_design_topic","sys_id":"f98d45bb53312010b6e8ddeeff7b1279","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/7dd3bf3704b52210559073c06a02f701","value":"7dd3bf3704b52210559073c06a02f701"},"sys_update_name":"sys_cb_design_topic_f98d45bb53312010b6e8ddeeff7b1279","sys_updated_by":"admin","sys_created_on":"2021-01-26 00:26:35","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"6df70fc2bdd3456ea2b73faa803a57ee\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"6df70fc2bdd3456ea2b73faa803a57ee\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"6df70fc2bdd3456ea2b73faa803a57ee\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"f7c8e76cc51f42d185bd556a274ba253\",\"name\":\"Start\"},{\"type\":\"CustomNode\",\"name\":\"GEOLOCATION_CONTROL\",\"mode\":\"input\",\"generateDataFunction\":\"function() {\\n    return {};\\n}\\n\",\"messageTranscriptFunction\":\"function(controlData) {\\n    return '';\\n}\\n\",\"inputResponseHandlerFunction\":\"function(controlData, responseValue) {\\n\\treturn vaVars.geolocationResponse = JSON.stringify(responseValue);\\n}\",\"inputResponseMessageTranscriptFunction\":\"function(controlData, responseValue) {\\n    return '';\\n}\\n\",\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"unsupportedDeviceMessage\":{\"type\":\"String\",\"mode\":\"script\",\"value\":\"(function execute() {\\n    return gs.getMessageLang(\\\"Sorry, the Geolocation control is not supported on this channel\\\", vaContext.getRequesterLang());\\n})()\"},\"id\":\"a72f840132c34cdd8ec9034f67c370dd\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"9a8140518fbb42159ae2cecc9429400d\",\"name\":\"End\"}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"f7c8e76cc51f42d185bd556a274ba253\",\"target_node_id\":\"a72f840132c34cdd8ec9034f67c370dd\",\"id\":\"c08e704fb72941f9b73a528d7cf9bc18\"},{\"type\":\"Edge\",\"source_node_id\":\"a72f840132c34cdd8ec9034f67c370dd\",\"target_node_id\":\"9a8140518fbb42159ae2cecc9429400d\",\"id\":\"65a65d1b8f294c16bf7e6d4d8b5d8388\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"geolocationResponse\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"99a6799e491e4b2db96c2201d61ebd87\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"current-user\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[],\"return-values-mapping\":[{\"name\":\"georesponsejsonstring\",\"label\":\"geoResponseJsonString\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.geolocationResponse}}\"}}]},\"domain\":\"global\",\"topic_type\":\"CUSTOM_INPUT\",\"channels\":[],\"id\":\"925c897b53312010b6e8ddeeff7b12d6\",\"name\":\"Geolocation control\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[],\"triggerable_by_notification\":false,\"library\":true,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Geolocation control","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"925c897b53312010b6e8ddeeff7b12d6","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/358d45bb53312010b6e8ddeeff7b1276","value":"358d45bb53312010b6e8ddeeff7b1276"},"sys_created_by":"admin","sys_policy":""},{"sys_mod_count":"40","sys_updated_on":"2023-07-14 03:15:16","sys_tags":"","type":"FlowTopic","graph":"{\n  \"graph_api_version\": \"1.0.48\",\n  \"goals\": {\n    \"primary\": {\n      \"id\": \"primary\",\n      \"trigger\": {\n        \"type\": \"primary\"\n      },\n      \"name\": \"primary\",\n      \"applicability\": \"\",\n      \"description\": \"\",\n      \"nodes\": {\n        \"416b97d219124a46b73059f423923b7b\": {\n          \"id\": \"416b97d219124a46b73059f423923b7b\",\n          \"stepType\": \"Start\",\n          \"name\": \"Start\",\n          \"greetingResponse\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"parameters\": [\n            {\n              \"type\": \"String\",\n              \"value\": \"\",\n              \"id\": \"941f0a6ff03641c799e2afe7c121aa3f\",\n              \"name\": \"definition\",\n              \"required\": true,\n              \"referenced\": true,\n              \"disabled\": true\n            },\n            {\n              \"type\": \"Array.String\",\n              \"value\": [],\n              \"id\": \"6649c0be3b9944659143cfccfc4dd2f9\",\n              \"name\": \"inputs\",\n              \"required\": true,\n              \"referenced\": false\n            }\n          ],\n          \"variableIds\": [\n            \"941f0a6ff03641c799e2afe7c121aa3f\",\n            \"6649c0be3b9944659143cfccfc4dd2f9\"\n          ]\n        },\n        \"a898a13ad1a84cc09b2eb71851ed73f3\": {\n          \"id\": \"a898a13ad1a84cc09b2eb71851ed73f3\",\n          \"stepType\": \"CustomInput\",\n          \"name\": \"MULTILIST\",\n          \"generateDataFunction\": \"function() {\\n    var inputsLength = vaInputs.inputs.getValue().length;\\n    var index, key, value;\\n    var definition = vaInputs.definition.getValue();\\n    for (index = 0; index < inputsLength; index++) {\\n        var key = '{{' + index + '}}';\\n        var value = vaInputs.inputs.getValue()[index];\\n        definition = definition.replace(key, value);\\n    }\\n    return JSON.parse(definition);\\n}\\n\",\n          \"messageTranscriptFunction\": \"function(controlData) {\\n    return JSON.stringify(controlData);\\n}\\n\",\n          \"inputResponseHandlerFunction\": \"function(controlData, responseValue) {\\n    vaVars.output = responseValue.response;\\n}\\n\",\n          \"inputResponseMessageTranscriptFunction\": \"function(controlData, responseValue) {\\n    return JSON.stringify(responseValue);\\n}\\n\",\n          \"unsupportedDeviceMessage\": {\n            \"value\": [\n              {\n                \"type\": \"paragraph\",\n                \"children\": [\n                  {\n                    \"text\": \"Multi-list is not supported on this device.\"\n                  }\n                ]\n              }\n            ],\n            \"mode\": \"simple\"\n          },\n          \"invocationType\": \"action\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          },\n          \"skippable\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"b08e64996122444b8e13ddb21bee0a89\": {\n          \"id\": \"b08e64996122444b8e13ddb21bee0a89\",\n          \"stepType\": \"TerminateGoal\",\n          \"name\": \"End\",\n          \"confirmationMessage\": {\n            \"mode\": \"simple\",\n            \"value\": \"\"\n          },\n          \"outputVariables\": [\n            {\n              \"key\": \"output\",\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.output}}\",\n                        \"displayValue\": \"Script Variablesoutput\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\",\n              \"disabled\": true\n            }\n          ]\n        },\n        \"496c2e14995e49d0a581b729c29f6380\": {\n          \"id\": \"496c2e14995e49d0a581b729c29f6380\",\n          \"stepType\": \"TextOutput\",\n          \"name\": \"Prompt message\",\n          \"secure\": false,\n          \"value\": [\n            {\n              \"value\": [\n                {\n                  \"type\": \"paragraph\",\n                  \"children\": [\n                    {\n                      \"text\": \"\"\n                    },\n                    {\n                      \"type\": \"datapill\",\n                      \"dataPill\": {\n                        \"value\": \"{{vaVars.prompt}}\",\n                        \"displayValue\": \"Script Variablesprompt\"\n                      },\n                      \"children\": [\n                        {\n                          \"text\": \"\"\n                        }\n                      ]\n                    },\n                    {\n                      \"text\": \"\"\n                    }\n                  ]\n                }\n              ],\n              \"mode\": \"simple\"\n            }\n          ],\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        },\n        \"c59070bb51a446fbaaea7527b9c89a91\": {\n          \"id\": \"c59070bb51a446fbaaea7527b9c89a91\",\n          \"name\": \"Set prompt\",\n          \"script\": \"(function execute() {\\n    // The first key, 0, represents the prompt message.\\n    vaVars.prompt = vaInputs.inputs.getValue()[0];\\n})()\\n\",\n          \"stepType\": \"ScriptAction\",\n          \"applicability\": {\n            \"value\": \"\",\n            \"mode\": \"query\"\n          }\n        }\n      },\n      \"edges\": [\n        {\n          \"id\": \"b2a231606f59479ea713162f052a9a6d\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"a898a13ad1a84cc09b2eb71851ed73f3\",\n          \"target\": \"b08e64996122444b8e13ddb21bee0a89\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"e5e90efc68204a6bb0a89a17682bd462\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"496c2e14995e49d0a581b729c29f6380\",\n          \"target\": \"a898a13ad1a84cc09b2eb71851ed73f3\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"1ec2a9e4e55d4339a3ff1a92040eaad6\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"416b97d219124a46b73059f423923b7b\",\n          \"target\": \"c59070bb51a446fbaaea7527b9c89a91\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        },\n        {\n          \"id\": \"88302cd9daa1461f96a0d1cb0082529c\",\n          \"edgeType\": \"Edge\",\n          \"source\": \"c59070bb51a446fbaaea7527b9c89a91\",\n          \"target\": \"496c2e14995e49d0a581b729c29f6380\",\n          \"sourcePort\": \"\",\n          \"targetPort\": \"\"\n        }\n      ]\n    }\n  },\n  \"variables\": {\n    \"21296478988345468e382f44287ecb66\": {\n      \"category\": \"vaInputs\",\n      \"id\": \"21296478988345468e382f44287ecb66\",\n      \"label\": \"User\",\n      \"name\": \"user\",\n      \"table\": \"sys_user\",\n      \"varType\": \"reference\"\n    },\n    \"941f0a6ff03641c799e2afe7c121aa3f\": {\n      \"id\": \"941f0a6ff03641c799e2afe7c121aa3f\",\n      \"name\": \"definition\",\n      \"label\": \"Definition\",\n      \"defaultValue\": \"\",\n      \"varType\": \"string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"416b97d219124a46b73059f423923b7b\",\n      \"isHidden\": false\n    },\n    \"8273ba5175864c13b59f75b37511df61\": {\n      \"id\": \"8273ba5175864c13b59f75b37511df61\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"output\",\n      \"label\": \"output\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"4d6a80db41a64cf5bfdcc20ae6f713d5\": {\n      \"id\": \"4d6a80db41a64cf5bfdcc20ae6f713d5\",\n      \"value\": {\n        \"value\": \"\",\n        \"mode\": \"simple\"\n      },\n      \"name\": \"prompt\",\n      \"label\": \"prompt\",\n      \"varType\": \"script\",\n      \"category\": \"vaVars\"\n    },\n    \"6649c0be3b9944659143cfccfc4dd2f9\": {\n      \"id\": \"6649c0be3b9944659143cfccfc4dd2f9\",\n      \"name\": \"inputs\",\n      \"label\": \"Inputs\",\n      \"defaultValue\": [],\n      \"varType\": \"array.string\",\n      \"category\": \"vaInputs\",\n      \"metadata\": {\n        \"libraryMappingType\": \"input\"\n      },\n      \"nodeId\": \"416b97d219124a46b73059f423923b7b\",\n      \"isHidden\": false\n    }\n  }\n}","sys_class_name":"sys_cb_design_topic","sys_id":"fb2e9907ac0d1510fa9b86c13c78a0ec","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/79d37f3704b52210559073c06a02f7ed","value":"79d37f3704b52210559073c06a02f7ed"},"sys_update_name":"sys_cb_design_topic_fb2e9907ac0d1510fa9b86c13c78a0ec","sys_updated_by":"admin","sys_created_on":"2022-08-05 23:30:17","design_definition":"{\"type\":\"FlowTopic\",\"triggers\":[{\"type\":\"Trigger\",\"name\":\"8d6432afeb0b48b9b5e4caa635097fc4\",\"triggerType\":\"request\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"id\":\"8d6432afeb0b48b9b5e4caa635097fc4\"}],\"goals\":[{\"name\":\"primary\",\"trigger_id\":\"8d6432afeb0b48b9b5e4caa635097fc4\",\"nodes\":[{\"type\":\"StartGoal\",\"goal_id\":\"primary\",\"greeting_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"416b97d219124a46b73059f423923b7b\",\"name\":\"Start\"},{\"type\":\"CustomNode\",\"name\":\"MULTILIST\",\"mode\":\"input\",\"generateDataFunction\":\"function() {\\n    var inputsLength = vaInputs.inputs.getValue().length;\\n    var index, key, value;\\n    var definition = vaInputs.definition.getValue();\\n    for (index = 0; index < inputsLength; index++) {\\n        var key = '{{' + index + '}}';\\n        var value = vaInputs.inputs.getValue()[index];\\n        definition = definition.replace(key, value);\\n    }\\n    return JSON.parse(definition);\\n}\\n\",\"messageTranscriptFunction\":\"function(controlData) {\\n    return JSON.stringify(controlData);\\n}\\n\",\"inputResponseHandlerFunction\":\"function(controlData, responseValue) {\\n    vaVars.output = responseValue.response;\\n}\\n\",\"inputResponseMessageTranscriptFunction\":\"function(controlData, responseValue) {\\n    return JSON.stringify(responseValue);\\n}\\n\",\"skippable\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"false\"},\"unsupportedDeviceMessage\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"Multi-list is not supported on this device.\"},\"id\":\"a898a13ad1a84cc09b2eb71851ed73f3\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}},{\"type\":\"TerminateGoal\",\"goal_id\":\"primary\",\"confirmation_msg\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"\"},\"id\":\"b08e64996122444b8e13ddb21bee0a89\",\"name\":\"End\"},{\"type\":\"TextOutputPrompt\",\"value\":[{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.prompt}}\"}],\"id\":\"496c2e14995e49d0a581b729c29f6380\",\"name\":\"Prompt message\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"secure\":false},{\"type\":\"ScriptedAction\",\"script\":\"(function execute() {\\n    // The first key, 0, represents the prompt message.\\n    vaVars.prompt = vaInputs.inputs.getValue()[0];\\n})()\\n\",\"id\":\"c59070bb51a446fbaaea7527b9c89a91\",\"name\":\"Set prompt\",\"goal_id\":\"primary\",\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"}}],\"edges\":[{\"type\":\"Edge\",\"source_node_id\":\"a898a13ad1a84cc09b2eb71851ed73f3\",\"target_node_id\":\"b08e64996122444b8e13ddb21bee0a89\",\"id\":\"b2a231606f59479ea713162f052a9a6d\"},{\"type\":\"Edge\",\"source_node_id\":\"496c2e14995e49d0a581b729c29f6380\",\"target_node_id\":\"a898a13ad1a84cc09b2eb71851ed73f3\",\"id\":\"e5e90efc68204a6bb0a89a17682bd462\"},{\"type\":\"Edge\",\"source_node_id\":\"416b97d219124a46b73059f423923b7b\",\"target_node_id\":\"c59070bb51a446fbaaea7527b9c89a91\",\"id\":\"1ec2a9e4e55d4339a3ff1a92040eaad6\"},{\"type\":\"Edge\",\"source_node_id\":\"c59070bb51a446fbaaea7527b9c89a91\",\"target_node_id\":\"496c2e14995e49d0a581b729c29f6380\",\"id\":\"88302cd9daa1461f96a0d1cb0082529c\"}],\"id\":\"primary\"}],\"script_variables\":[{\"type\":\"String\",\"name\":\"output\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"8273ba5175864c13b59f75b37511df61\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"prompt\",\"value\":{\"type\":\"String\",\"mode\":\"string\"},\"list\":false,\"id\":\"4d6a80db41a64cf5bfdcc20ae6f713d5\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false}],\"glide_variables\":[{\"type\":\"Reference\",\"table\":\"sys_user\",\"id\":\"21296478988345468e382f44287ecb66\",\"name\":\"user\",\"formatType\":\"text\",\"secure\":false,\"sensitive\":false,\"list\":false},{\"type\":\"String\",\"name\":\"definition\",\"list\":false,\"id\":\"941f0a6ff03641c799e2afe7c121aa3f\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false},{\"type\":\"String\",\"name\":\"inputs\",\"list\":true,\"id\":\"6649c0be3b9944659143cfccfc4dd2f9\",\"formatType\":\"text\",\"metadata\":{\"libraryMappingType\":\"input\"},\"secure\":false,\"sensitive\":false}],\"applicability\":{\"type\":\"Applicability\",\"mode\":\"script\",\"value\":\"true\"},\"roles\":[],\"scope\":\"global\",\"library-usage\":{\"type\":\"Library\",\"input-parameters\":[{\"name\":\"definition\",\"label\":\"definition\",\"default-value\":\"\\\"\\\"\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":false,\"items\":[],\"use_items\":false},\"id\":\"941f0a6ff03641c799e2afe7c121aa3f\",\"type\":\"String\"},{\"name\":\"inputs\",\"label\":\"inputs\",\"default-value\":\"[]\",\"required\":true,\"metadata\":{\"type\":\"String\",\"list\":true,\"items\":[],\"use_items\":false},\"id\":\"6649c0be3b9944659143cfccfc4dd2f9\",\"type\":\"Array.String\"}],\"return-values-mapping\":[{\"name\":\"output\",\"label\":\"output\",\"value\":{\"type\":\"String\",\"mode\":\"string\",\"value\":\"{{vaVars.output}}\"}}]},\"domain\":\"global\",\"topic_type\":\"CUSTOM_INPUT\",\"channels\":[],\"dialog_acts_enabled\":false,\"id\":\"e6fc1d43ac0d1510fa9b86c13c78a0ed\",\"name\":\"Grouped List Input\",\"key_phrases\":[],\"nlu_provider\":\"\",\"nlu_model\":\"\",\"nlu_model_label\":\"\",\"nlu_intent\":\"\",\"nlu_intent_label\":\"\",\"flexible_conversation_switching\":true,\"autopilot_topic\":false,\"design_categories\":[{\"name\":null,\"visible\":false,\"sysId\":\"b1dfd7c254103300fa9b212481c502cb\"}],\"triggerable_by_notification\":false,\"model_type\":\"nlu_keyword\",\"modify_confirmation_enabled\":false,\"library\":true,\"csTopicId\":\"ff2ed5c3ac0d1510fa9b86c13c78a0c1\",\"readOnly\":false,\"nluMapping\":\"[]\"}","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"name":"Grouped List Input","sys_name":"FlowTopic","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/global","value":"global"},"design_topic_id":"e6fc1d43ac0d1510fa9b86c13c78a0ed","compiled_topic":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_cs_topic/ff2ed5c3ac0d1510fa9b86c13c78a0c1","value":"ff2ed5c3ac0d1510fa9b86c13c78a0c1"},"sys_created_by":"admin","sys_policy":"read"}]}