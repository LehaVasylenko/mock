{"result":[{"apply_to_all_groups":"true","description":"","sys_updated_on":"2024-06-20 07:55:51","table_name":"interaction","sys_class_name":"wwna_quick_actions","sys_id":"244c290c93120210e97e529a848918d4","sys_updated_by":"admin","sys_created_on":"2024-05-16 08:42:28","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"sys_name":"Test Rich Text Menu","parameter_hint":"","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"apply_to_groups":"","sys_created_by":"admin","command_name":"testRichTextMenu","sys_mod_count":"6","active":"true","sys_overrides":"","sys_tags":"","script":"var unescapedString = GlideStringUtil.unEscapeHTML(params[0]);\nvar payload = JSON.parse(unescapedString);\n\ngs.publish(payload.ambChannel, {\n    'features': {\n        \"dummyId\": {\n            'result': {\n                'logId': \"d9387cd31b624210133e2f46b04bcb4f\",\n                'response': \"Here is the rich text response<br/><ul><li>Coffee</li><li>Tea</li><li>Milk</li></ul>\",\n                \"status\": \"success\"\n            },\n            \"status\": \"success\"\n        }\n    }\n});","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"condition":"","sys_update_name":"wwna_quick_actions_244c290c93120210e97e529a848918d4","name":"Test Rich Text Menu","accepts_string_parameter":"true","parameter_label":"payload","sys_policy":""},{"apply_to_all_groups":"true","description":"Early return Failure scenario Test Action","sys_updated_on":"2024-08-07 04:13:29","table_name":"interaction","sys_class_name":"wwna_quick_actions","sys_id":"2878c7e093ea0210bc5d529a8489189a","sys_updated_by":"admin","sys_created_on":"2024-05-30 14:58:31","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"sys_name":"Test Custom Failure by BU Warning Type","parameter_hint":"","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"apply_to_groups":"","sys_created_by":"admin","command_name":"testCommonFailureAction","sys_mod_count":"9","active":"true","sys_overrides":"","sys_tags":"","script":"var unescapedString = GlideStringUtil.unEscapeHTML(params[0]);\nvar payload = JSON.parse(unescapedString);\n\ngs.publish(payload.ambChannel, {\n    \"status\": \"error\",\n    \"errorMessage\": \"Test Error Message multi line content with early return scenario, Test Error Message multi line content with early return scenario, Test Error Message multi line content with early return scenario\"\n});","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"condition":"","sys_update_name":"wwna_quick_actions_2878c7e093ea0210bc5d529a8489189a","name":"Test Custom Failure by BU Warning Type","accepts_string_parameter":"false","parameter_label":"","sys_policy":""},{"apply_to_all_groups":"true","description":"LLM Failure scenario Test Action","sys_updated_on":"2024-06-12 09:37:36","table_name":"interaction","sys_class_name":"wwna_quick_actions","sys_id":"4393f87493360210fa69529a84891847","sys_updated_by":"admin","sys_created_on":"2024-06-12 09:03:34","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"sys_name":"Test Custom Failure by LLM","parameter_hint":"","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"apply_to_groups":"","sys_created_by":"admin","command_name":"testCommonFailureActionLLM","sys_mod_count":"1","active":"true","sys_overrides":"","sys_tags":"","script":"var unescapedString = GlideStringUtil.unEscapeHTML(params[0]);\nvar payload = JSON.parse(unescapedString);\n\ngs.publish(payload.ambChannel, {\n    'features': {\n        \"dummyId\": {\n            'result': {\n                'logId': \"-1\",\n                'response': \"Test Error Message multi line content with LLM failure scenario, Test Error Message multi line content with LLM failure scenario, Test Error Message multi line content with LLM failure scenario.\",\n            },\n            \"status\": \"error\"\n        }\n    }\n});","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"condition":"","sys_update_name":"wwna_quick_actions_4393f87493360210fa69529a84891847","name":"Test Custom Failure by LLM","accepts_string_parameter":"false","parameter_label":"","sys_policy":""},{"apply_to_all_groups":"true","description":"Test Custom Failure by BU Error Type","sys_updated_on":"2024-08-07 04:12:06","table_name":"interaction","sys_class_name":"wwna_quick_actions","sys_id":"4fd9c4be933f4210de37529a84891835","sys_updated_by":"admin","sys_created_on":"2024-08-07 04:10:44","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"sys_name":"Test Custom Failure by BU Error Type","parameter_hint":"","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"apply_to_groups":"","sys_created_by":"admin","command_name":"testCommonFailureActionErrorType","sys_mod_count":"1","active":"true","sys_overrides":"","sys_tags":"","script":"var unescapedString = GlideStringUtil.unEscapeHTML(params[0]);\nvar payload = JSON.parse(unescapedString);\n\ngs.publish(payload.ambChannel, {\n    \"status\": \"error\",\n    \"errorType\": \"error\",\n    \"errorMessage\": \"Test Error Message multi line content with early return scenario, Test Error Message multi line content with early return scenario, Test Error Message multi line content with early return scenario\"\n});","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"condition":"","sys_update_name":"wwna_quick_actions_4fd9c4be933f4210de37529a84891835","name":"Test Custom Failure by BU Error Type","accepts_string_parameter":"false","parameter_label":"","sys_policy":""},{"apply_to_all_groups":"true","description":"Shortens the given content by making LLM call","sys_updated_on":"2024-09-10 10:49:32","table_name":"sys_one_extend_capability","sys_class_name":"wwna_quick_actions","sys_id":"7a9217087fd602106b71bff03d866561","sys_updated_by":"admin","sys_created_on":"2024-05-16 16:10:32","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"sys_name":"Shorten","parameter_hint":"","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"apply_to_groups":"","sys_created_by":"admin","command_name":"shorten","sys_mod_count":"52","active":"true","sys_overrides":"","sys_tags":"","script":"// Logger initialization\nvar logger = new WWNALogger();\n\n// Convert the payload in string to escape quotes.\nvar stringifiedPayload = JSON.stringify(params[0]);\n\n// Escape the characters & < > from the string\nvar escapedPayload = global.JSUtil.escapeText(stringifiedPayload);\n\n// unescape HTML if escaped already\nvar unEscapedPayload = GlideStringUtil.unEscapeHTML(escapedPayload);\n\n// parse the strigified Payload\nvar param = JSON.parse(unEscapedPayload);\n\nvar jsonPayload = JSON.parse(param);\n\nlogger.info(\"WWNA: JSON payload passed with Shorten Action: \" + JSON.stringify(jsonPayload));\n\nvar ambChannelName = jsonPayload.ambChannel;\nvar extensionConfig = new WWNAConfigImpl(jsonPayload.payload.document_table_name, jsonPayload.payload.document_sys_id, jsonPayload.payload.skill_id);\n\nvar preValidateResponse = extensionConfig.preValidateInputs(jsonPayload.payload.selected_text, jsonPayload.payload.drafted_text);\n\nif (!preValidateResponse.isValid) {\n    gs.publish(ambChannelName, {\n        \"status\": WWNAConstants.ONE_EXTEND_STATES.ERROR,\n        \"errorMessage\": preValidateResponse.errorMessage,\n        \"type\": preValidateResponse.errorType\n    });\n} else {\n    var PAYLOAD = {\n        skill_name: jsonPayload.payload.skill_name,\n        skill_description: jsonPayload.payload.skill_description,\n        drafted_text: jsonPayload.payload.drafted_text,\n        selected_text: jsonPayload.payload.selected_text,\n        context: jsonPayload.payload.context,\n        skill_id: jsonPayload.payload.skill_id,\n        document_id: jsonPayload.payload.document_sys_id,\n        document_table: jsonPayload.payload.document_table_name,\n        caller: jsonPayload.payload.caller\n    };\n\n    var CAPABILITY_ID = WWNAConstants.WWNA_COMMON_ACTIONS_CAPABILITY_ID;\n\n    // providing the promptConfigFilter will pick the right promptConfigID from sys_generative_ai_prompt_config\n    var PROMPT_CONFIG_FILTERS = {\n        \"shorten\": \"true\"\n    };\n\n    var promptFilters = extensionConfig.getPromptConfigFilters(\"shorten\") || PROMPT_CONFIG_FILTERS;\n    var targetLanguage = extensionConfig.getTargetLanguage();\n\n    // Request payload for the capability\n    var request = {\n        \"executionRequests\": [{\n            \"payload\": PAYLOAD,\n            \"meta\": {\n                \"configFilters\": promptFilters,\n                \"skillConfigId\": jsonPayload.payload.skill_config_id,\n                \"source\": jsonPayload.payload.trigger_source,\n                \"documentId\": jsonPayload.payload.document_sys_id,\n                \"documentTable\": jsonPayload.payload.document_table_name\n            },\n            'returnRequest': true,\n            \"capabilityId\": CAPABILITY_ID\n        }],\n        \"mode\": \"async\",\n        \"ambCallbackChannel\": ambChannelName,\n        \"timeout\": 20\n    };\n\n    if (targetLanguage) {\n        request.executionRequests[0].meta.dtTargetLanguage = targetLanguage;\n    }\n\n    // get the groupId in case of refine action is performed\n    if (jsonPayload.payload.trigger_source === WWNAConstants.ACTION_TYPES.REFINE) {\n        var groupId = \"\";\n        groupId = extensionConfig.getGroupId();\n        if (groupId)\n            request.executionRequests[0].meta.__groupId = groupId;\n    }\n\n    logger.info(\"WWNA: request for OneExtend capability in Shorten Action: \" + JSON.stringify(request));\n\n    // Call to the OneExtend Capability\n    var response = sn_one_extend.OneExtendUtil.execute(request);\n\n    logger.info(\"WWNA: response of async caller in Shorten Action:  \" + JSON.stringify(response));\n\n\n    if (response.status === WWNAConstants.ONE_EXTEND_STATES.ERROR) {\n        gs.publish(ambChannelName, {\n            \"status\": WWNAConstants.ONE_EXTEND_STATES.ERROR,\n            \"errorMessage\": WWNAConstants.GENERIC_ERROR_MESSAGE\n        });\n    }\n}\nanswer = {\n    success: true,\n    message: \"\"\n};","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"condition":"","sys_update_name":"wwna_quick_actions_7a9217087fd602106b71bff03d866561","name":"Shorten","accepts_string_parameter":"true","parameter_label":"param","sys_policy":"read"},{"apply_to_all_groups":"true","description":"Elaborate the given content by making LLM call.","sys_updated_on":"2024-09-13 12:12:37","table_name":"sys_one_extend_capability","sys_class_name":"wwna_quick_actions","sys_id":"a50317087fd602106b71bff03d8665b2","sys_updated_by":"admin","sys_created_on":"2024-05-16 16:12:03","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"sys_name":"Elaborate","parameter_hint":"","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"apply_to_groups":"","sys_created_by":"admin","command_name":"elaborate","sys_mod_count":"68","active":"true","sys_overrides":"","sys_tags":"","script":"// Logger initialization\nvar logger = new WWNALogger();\n\n// Convert the payload in string to escape quotes.\nvar stringifiedPayload = JSON.stringify(params[0]);\n\n// Escape the characters & < > from the string\nvar escapedPayload = global.JSUtil.escapeText(stringifiedPayload);\n\n// unescape HTML if escaped already\nvar unEscapedPayload = GlideStringUtil.unEscapeHTML(escapedPayload);\n\n// parse the strigified Payload\nvar param = JSON.parse(unEscapedPayload);\n\nvar jsonPayload = JSON.parse(param);\nvar ambChannelName = jsonPayload.ambChannel;\n\nvar extensionConfig = new WWNAConfigImpl(jsonPayload.payload.document_table_name, jsonPayload.payload.document_sys_id, jsonPayload.payload.skill_id);\n\nvar preValidateResponse = extensionConfig.preValidateInputs(jsonPayload.payload.selected_text, jsonPayload.payload.drafted_text);\n\nif (!preValidateResponse.isValid) {\n    gs.publish(ambChannelName, {\n        \"status\": WWNAConstants.ONE_EXTEND_STATES.ERROR,\n        \"errorMessage\": preValidateResponse.errorMessage,\n        \"type\": preValidateResponse.errorType\n    });\n} else {\n    logger.info(\"WWNA: JSON payload passed with Elaborate Action: \" + JSON.stringify(jsonPayload));\n\n    var PAYLOAD = {\n        skill_description: jsonPayload.payload.skill_description,\n        skill_name: jsonPayload.payload.skill_name,\n        drafted_text: jsonPayload.payload.drafted_text,\n        context: jsonPayload.payload.context,\n        selected_text: jsonPayload.payload.selected_text,\n        skill_id: jsonPayload.payload.skill_id,\n        document_id: jsonPayload.payload.document_sys_id,\n        document_table: jsonPayload.payload.document_table_name,\n        caller: jsonPayload.payload.caller\n    };\n\n    // Fetch the context if it is not present already\n    if (PAYLOAD.context.length === 0) {\n        PAYLOAD.context = extensionConfig.getSkillContext(jsonPayload.payload);\n\n        logger.info(\"WWNA: fetched context inside Elaborate Action: \" + JSON.stringify(PAYLOAD.context));\n    }\n\n    // If context is null remove the loader from UI by sending the error message\n    if (!PAYLOAD.context) {\n        logger.error(\"WWNA: fetch context returned null inside Elaborate Action\");\n        gs.publish(ambChannelName, {\n            \"status\": WWNAConstants.ONE_EXTEND_STATES.ERROR,\n            \"errorMessage\": WWNAConstants.GENERIC_ERROR_MESSAGE\n        });\n    } else {\n        var CAPABILITY_ID = WWNAConstants.WWNA_COMMON_ACTIONS_CAPABILITY_ID;\n\n        // providing the promptConfigFilter will pick the right promptConfigID from sys_generative_ai_prompt_config\n        var PROMPT_CONFIG_FILTERS = {\n            \"elaborate\": \"true\"\n        };\n\n        var promptFilters = extensionConfig.getPromptConfigFilters(\"elaborate\") || PROMPT_CONFIG_FILTERS;\n        var targetLanguage = extensionConfig.getTargetLanguage();\n\n        // Request payload for the capability\n        var request = {\n            \"executionRequests\": [{\n                \"payload\": PAYLOAD,\n                \"meta\": {\n                    \"configFilters\": promptFilters,\n                    \"skillConfigId\": jsonPayload.payload.skill_config_id,\n                    \"source\": jsonPayload.payload.trigger_source,\n                    \"documentId\": jsonPayload.payload.document_sys_id,\n                    \"documentTable\": jsonPayload.payload.document_table_name\n                },\n                'returnRequest': true,\n                \"capabilityId\": CAPABILITY_ID\n            }],\n            \"mode\": \"async\",\n            \"ambCallbackChannel\": ambChannelName,\n            \"timeout\": 20\n        };\n\n        if (targetLanguage) {\n            request.executionRequests[0].meta.dtTargetLanguage = targetLanguage;\n        }\n        // get the groupId in case of refine action is performed\n        if (jsonPayload.payload.trigger_source === WWNAConstants.ACTION_TYPES.REFINE) {\n            var groupId = \"\";\n            groupId = extensionConfig.getGroupId();\n            if (groupId)\n                request.executionRequests[0].meta.__groupId = groupId;\n        }\n\n        logger.info(\"WWNA: request for OneExtend capability in Elaborate Action: \" + JSON.stringify(request));\n\n        // Call to the OneExtend Capability\n        var response = sn_one_extend.OneExtendUtil.execute(request);\n\n        logger.info(\"WWNA: response of async caller in Elaborate Action: \" + JSON.stringify(response));\n\n        if (response.status === WWNAConstants.ONE_EXTEND_STATES.ERROR) {\n            gs.publish(ambChannelName, {\n                \"status\": WWNAConstants.ONE_EXTEND_STATES.ERROR,\n                \"errorMessage\": WWNAConstants.GENERIC_ERROR_MESSAGE\n            });\n        }\n    }\n}\n\nanswer = {\n    success: true,\n    message: \"\"\n};","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"condition":"","sys_update_name":"wwna_quick_actions_a50317087fd602106b71bff03d8665b2","name":"Elaborate","accepts_string_parameter":"true","parameter_label":"param","sys_policy":"read"},{"apply_to_all_groups":"true","description":"Common custom action","sys_updated_on":"2024-06-20 07:56:03","table_name":"interaction","sys_class_name":"wwna_quick_actions","sys_id":"b34072ab93560210bc5d529a8489181a","sys_updated_by":"admin","sys_created_on":"2024-05-27 10:38:35","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"sys_name":"Test Common custom action","parameter_hint":"","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"apply_to_groups":"","sys_created_by":"admin","command_name":"testCommonCustom","sys_mod_count":"9","active":"true","sys_overrides":"","sys_tags":"","script":"var unescapedString = GlideStringUtil.unEscapeHTML(params[0]);\nvar payload = JSON.parse(unescapedString);\n\ngs.publish(payload.ambChannel, {\n    'features': {\n        \"dummyId\": {\n            'result': {\n                'logId': \"9f68b0171b624210133e2f46b04bcb3a\",\n                'response': \"Common Test Response\",\n                \"status\": \"success\"\n            },\n            \"status\": \"success\"\n        }\n    }\n});","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"condition":"","sys_update_name":"wwna_quick_actions_b34072ab93560210bc5d529a8489181a","name":"Test Common custom action","accepts_string_parameter":"false","parameter_label":"","sys_policy":""},{"apply_to_all_groups":"true","description":"Search for a KB article to post in the chat","sys_updated_on":"2022-11-29 17:22:02","table_name":"sys_cs_collab_chat","sys_class_name":"quickactions_action","sys_id":"b9a4e80bc34505103f4fcd7b7940dd70","sys_updated_by":"admin","sys_created_on":"2022-01-18 23:08:02","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"sys_name":"Search KB Article","parameter_hint":"","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"apply_to_groups":"","sys_created_by":"admin","command_name":"search-kb","sys_mod_count":"13","active":"false","sys_overrides":"","sys_tags":"","script":"var message = params[0] + \"\";\nvar success = true;\ntry {\n\tsn_collab.CollabChatScriptObject.sendMessage(record.sys_id, gs.getUserID(), {payload:message, type: \"text\"}, [], context + \"\");\n} catch (e) {\n\tmessage = \"\"+e.toString();\n\tsuccess = false;\n}\n\nanswer = {\n    message: message,\n    success: success\n};","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/53b1b0e79761011018b2fa98c253afcc","value":"53b1b0e79761011018b2fa98c253afcc"},"condition":"","sys_update_name":"quickactions_action_b9a4e80bc34505103f4fcd7b7940dd70","name":"Search KB Article","accepts_string_parameter":"false","parameter_label":"","sys_policy":""},{"apply_to_all_groups":"true","description":"","sys_updated_on":"2024-06-20 07:55:35","table_name":"interaction","sys_class_name":"wwna_quick_actions","sys_id":"fcebe10c93120210e97e529a848918cb","sys_updated_by":"admin","sys_created_on":"2024-05-16 08:41:31","sys_domain":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_user_group/global","value":"global"},"sys_name":"Test Preset Action","parameter_hint":"","sys_scope":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_scope/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"apply_to_groups":"","sys_created_by":"admin","command_name":"testPresetAction","sys_mod_count":"8","active":"true","sys_overrides":"","sys_tags":"","script":"var unescapedString = GlideStringUtil.unEscapeHTML(params[0]);\nvar payload = JSON.parse(unescapedString);\n\ngs.publish(payload.ambChannel, {\n    'features': {\n        \"dummyId\": {\n            'result': {\n                'logId': \"e678b0171b624210133e2f46b04bcbee\",\n                'response': \"Preset Test Response\",\n                \"status\": \"success\"\n            },\n            \"status\": \"success\"\n        }\n    }\n});","sys_package":{"link":"https://dev315171.service-now.com/api/now/v1/table/sys_package/757c34719bf7f10c4a1f9fe81ba8bba3","value":"757c34719bf7f10c4a1f9fe81ba8bba3"},"condition":"","sys_update_name":"wwna_quick_actions_fcebe10c93120210e97e529a848918cb","name":"Test Preset Action","accepts_string_parameter":"true","parameter_label":"payload","sys_policy":""}]}